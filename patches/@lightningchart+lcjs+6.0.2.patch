diff --git a/node_modules/@lightningchart/lcjs/dist/lcjs.mjs b/node_modules/@lightningchart/lcjs/dist/lcjs.mjs
index 0a79123..0c66260 100644
--- a/node_modules/@lightningchart/lcjs/dist/lcjs.mjs
+++ b/node_modules/@lightningchart/lcjs/dist/lcjs.mjs
@@ -1,5 +1,5 @@
 /* LightningChart JS v6.0.2 */
-import*as t from"immutable";import{Record as i}from"immutable";import{Eventer as s}from"@lightningchart/eventer";import e from"earcut";class h{constructor(){this.o=!0}u(){return this.o}}class r extends h{constructor(t,i){super(),this.S=t,this.o=i}M(t){return t!==this.S&&(this.S=t,this.o=!0),this}_(){return this.S}u(){return super.u()}}const n=(t,i)=>({x:t,y:i}),o=(t,i)=>({x:t,y:i}),a=(t,i,s)=>({position:t,high:i,low:s}),l=(t,i,s)=>({x:t,y:i,z:s}),u=t=>{const i=Array(0),s=Array(0);return t.length>0&&t.forEach((t=>{i.push(n(t.position,t.high)),s.push(n(t.position,t.low))})),[i,s]},c=(t,i)=>({min:t,max:i}),d=(t,i,s,e)=>({x:t,y:i,width:s,height:e}),f=(t,i=!0)=>new r(t,i),A=(t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}),g=A,y=(t,i)=>({left:void 0!==i.left?i.left:t.left,top:void 0!==i.top?i.top:t.top,right:void 0!==i.right?i.right:t.right,bottom:void 0!==i.bottom?i.bottom:t.bottom}),m=i({type:"color",r:1,g:1,b:1,a:1});class p extends m{constructor(t){super(t)}toUint32(){return void 0!==this.C||(this.C=I(this.getR(),this.getG(),this.getB(),this.getA())),this.C}toString(){return`color:${this.r},${this.g},${this.b},${this.a}`}setA(t){return this.set("a",t/255)}setR(t){return this.set("r",t/255)}setG(t){return this.set("g",t/255)}setB(t){return this.set("b",t/255)}getA(){return 255*this.get("a")}getR(){return 255*this.get("r")}getG(){return 255*this.get("g")}getB(){return 255*this.get("b")}getHighlight(){return this.T||(this.T=new p({r:this.r+.45*(1-this.r),g:this.g+.45*(1-this.g),b:this.b+.45*(1-this.b),a:this.a<1?this.a+.45*(1-this.a):1})),this.T}getLighter(){return this.F||(this.F=new p({r:this.r+.4*(1-this.r),g:this.g+.4*(1-this.g),b:this.b+.4*(1-this.b),a:this.a})),this.F}getDarker(){return this.I||(this.I=new p({r:this.r-.4*(1-this.r),g:this.g-.4*(1-this.g),b:this.b-.4*(1-this.b),a:this.a})),this.I}toRGBAString(){return`rgba( ${255*this.r}, ${255*this.g}, ${255*this.b}, ${255*this.a} )`}}const v=t=>!(!t||"object"!=typeof t||!("type"in t)||"color"!==t.type),S=(t,i,s,e=255)=>new p({r:t/255,g:i/255,b:s/255,a:e/255}),b=t=>{const i=t.startsWith("#")?t.substring(1):t.startsWith("0x")?t.substr(2):t;switch(i.length){case 8:return new p({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255,a:Number(`0x${i.substring(6,8)}`)/255});case 6:return new p({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255});case 4:return new p({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255,a:Number(`0x${i.charAt(3)}${i.charAt(3)}`)/255});case 3:return new p({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255});default:throw new Error(`ColorHEX parsing error | input: ${t}`)}},x=(t,i=1,s=1)=>{let e,h,r;t/=360;const n=Math.floor(6*t),o=6*t-n,a=s*(1-i),l=s*(1-o*i),u=s*(1-(1-o)*i);switch(n%6){case 0:e=s,h=u,r=a;break;case 1:e=l,h=s,r=a;break;case 2:e=a,h=s,r=u;break;case 3:e=a,h=l,r=s;break;case 4:e=u,h=a,r=s;break;default:e=s,h=a,r=l}return new p({r:e,g:h,b:r})},M=t=>{try{if(t.startsWith("rgba")){const i=t.substr(5).slice(0,-1),s=JSON.parse(`[${i}]`);return S(s[0],s[1],s[2],255*s[3])}if(t.startsWith("rgb")){const i=t.substr(4).slice(0,-1),s=JSON.parse(`[${i}]`);return S(s[0],s[1],s[2])}if(t.startsWith("hsl")){const i=t.substr(4).slice(0,-1).split(",").map(parseFloat),s=w(i[0],i[1],i[2]);return S(s[0],s[1],s[2])}return t.startsWith("#")||t.startsWith("0x")?b(t):b(k(t))}catch(t){}return console.warn(`ColorCSS parsing error: ${t}`),b("#fff")},_=t=>S(255&t,255&(t>>=8),255&(t>>=8),255&(t>>=8)),w=(t,i,s)=>{i/=100,s/=100;const e=(1-Math.abs(2*s-1))*i,h=t/60,r=e*(1-Math.abs(h%2-1));let n=[];isNaN(t)?n=[0,0,0]:h<=1?n=[e,r,0]:h<=2?n=[r,e,0]:h<=3?n=[0,e,r]:h<=4?n=[0,r,e]:h<=5?n=[r,0,e]:h<=6&&(n=[e,0,r]);const o=s-.5*e;return[Math.round(255*(n[0]+o)),Math.round(255*(n[1]+o)),Math.round(255*(n[2]+o))]},C={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},k=t=>{const i=C[t.toLowerCase()];if(i)return i;throw new Error(`Unknown color code: ${t}`)},T=new p({}),F=S(0,0,0,0),I=(t,i,s,e=255)=>(e<<24|s<<16|i<<8|t)>>>0,P=t=>I(255*t.r,255*t.g,255*t.b,255*t.a),D=(t,i)=>t.value-i.value,B=i({type:"lut",steps:[],title:"",units:"",interpolate:!0,color:S(0,0,0,255),length:0,min:0,max:0,subranges:[],isValid:!1,percentageValues:!1}),L=t=>{const{steps:i}=t,s=i.length;i.sort(D);const[e,h]=s>0?[i[0].value,i[s-1].value]:[0,0],r=s>0?s-1:0,n=Array(r);for(let t=0;t<r;t+=1)n[t]={min:i[t],max:i[t+1]};return{min:e,max:h,length:s,steps:i,subranges:n,isValid:s>0&&e!==h}};class R extends B{constructor(t){super(((t,i)=>({steps:t.steps,title:t.title,units:t.units,interpolate:t.interpolate,percentageValues:t.percentageValues,color:t.color,length:i.length,min:i.min,max:i.max,subranges:i.subranges,isValid:i.isValid}))(t,L(t)))}toString(){return`LUT:interpolate=${this.interpolate},steps=${this.steps.length},percentage=${this.percentageValues}`}setSteps(t){return this.merge(L({...this,steps:t}))}getSteps(){return this.get("steps")}setTitle(t){return this.set("title",t)}getTitle(){return this.get("title")}setUnits(t){return this.set("units",t)}getUnits(){return this.get("units")}setInterpolation(t){return this.set("interpolate",t)}getInterpolation(){return this.get("interpolate")}setFallbackColor(t){return this.set("color",t)}getFallbackColor(){return this.get("color")}setPercentageValues(t){return this.set("percentageValues",t)}getPercentageValues(){return this.get("percentageValues")}getColors(t){if(Array.isArray(t)){if(Array.isArray(t[0])){const i=t,s=i.length,e=i[0].length,h=[...Array(s)].map((()=>Array(e)));for(let t=0;t<s;t+=1)for(let s=0;s<e;s+=1)h[t][s]=this.P(i[t][s]);return h}const i=t,s=i.length,e=Array(s);for(let t=0;t<s;t+=1)e[t]=this.P(i[t]);return e}return this.P(t)}P(t){const{steps:i}=this,s=i.length;if(0===s)return this.getFallbackColor();if(1===s)return i[0].color||this.color;if(this.interpolate){for(let n=0;n<s-1;n+=1){const s=i[n],o=i[n+1],a=Math.min(s.value,o.value),l=Math.max(s.value,o.value);if(t>=a&&t<=l){if(a===l)return s.color;const i=(t-s.value)/(o.value-s.value);return e=s.color,h=o.color,r=i,new p({r:e.r+(h.r-e.r)*r,g:e.g+(h.g-e.g)*r,b:e.b+(h.b-e.b)*r,a:e.a+(h.a-e.a)*r})}}return t<i[0].value?i[0].color:i[s-1].color}var e,h,r;for(let e=s-1;e>=0;e-=1)if(t>=i[e].value)return i[e].color;return i[0].color}}const E=t=>!(!t||"object"!=typeof t||!("type"in t)||"lut"!==t.type),z=i({type:"fillstyle",fillType:"empty"});class V extends z{toString(){return"emptyFill"}}const O=new V,N=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"empty"===t.fillType),G=i({type:"fillstyle",fillType:"solid",color:S(255,255,255)});class W extends G{}class U extends W{constructor(t){super({...t,fillType:"solid"})}toString(){return`solidFill:${this.color.toString()}`}setColor(t){return v(t)?this.set("color",t):this.set("color",t(this.get("color")))}getColor(){return this.get("color")}setA(t){return this.setColor(this.getColor().setA(t))}setR(t){return this.setColor(this.getColor().setR(t))}setG(t){return this.setColor(this.getColor().setG(t))}setB(t){return this.setColor(this.getColor().setB(t))}}const Y=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"solid"===t.fillType);class H extends W{constructor(t){super({...t,fillType:"individual"})}toString(){return`individualPointFill:${this.color.toString()}`}setFallbackColor(t){return v(t)?this.set("color",t):this.set("color",t(this.get("color")))}getFallbackColor(){return this.get("color")}}const $=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"individual"===t.fillType),X=i({type:"fillstyle",fillType:"palette",lut:new R({steps:[]}),lookUpProperty:"value"});class j extends X{constructor(t){super({...t,fillType:"palette"})}toString(){return`palettedFill:lut=${this.lut.toString()},lookUpProperty=${this.lookUpProperty}`}getPalette(){return this.get("lut")}setLookUpProperty(t){return"function"==typeof t?this.set("lookUpProperty",t(this.get("lookUpProperty"))):this.set("lookUpProperty",t)}getLookUpProperty(){return this.get("lookUpProperty")}}const Z=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"palette"===t.fillType),Q={linear:(t,i,s)=>{const e=i-t;return h=>h<s?t+e/s*h:i},easeIn:(t,i,s)=>e=>e<s?t+Math.abs(2*(Math.sqrt(.5)*e/s)**2)*(i-t):i,easeOut:(t,i,s)=>e=>e<s?t+Math.abs(1-2*(Math.sqrt(.5)*(1-e/s))**2)*(i-t):i,ease:(t,i,s)=>e=>e<s?t+(e<s/2?.5*(e/s*2)**2.5:.5+.5*(1-(1-2*(e/s-.5))**2.5))*(i-t):i,logarithmic:t=>{const i=pi(t);return(s,e,h)=>{const r=i(s),n=i(e);return i=>i<h?t**(r+Math.abs(1-2*(Math.sqrt(.5)*(1-i/h))**2)*(n-r)):e}}};class J{constructor(t,i,e,h=Q.linear,r){this.delta=0,this.nextAnimations=new Array,this.D=!1,this.easing=Q.linear,this.L=new s,this.isOver=()=>(this.delta===this.duration||this.D)&&0===this.nextAnimations.length,this.values=t,this.action=i,this.duration=e,this.easing=h,this.R=r,this.eases=t.map((([t,i])=>h(t,i,e)))}V(){this.L.emit("start")}start(){return this.R.includes(this)||this.R.push(this),this}addNextAnimations(t){return t instanceof Array?t.forEach((t=>this.nextAnimations.push(t))):this.nextAnimations.push(t),this}NextAnimation(t,i,s=this.duration,e=this.easing){const h=new J(t,i,s,e,this.R);return this.nextAnimations.push(h),h}onAnimationStart(t,i){return this.L.on("start",t,i)}onAnimationEnd(t,i){return this.L.on("end",t,i)}onEveryAnimationEnd(t,i){return this.L.on("everyEnd",t,i)}onAllAnimationEnd(t,i){return this.L.on("allEnd",t,i)}allOffAnimationEnd(){return this.L.topicOff("end"),this}allOffEveryAnimationEnd(){return this.L.topicOff("everyEnd"),this}allOffAllAnimationEnd(){return this.L.topicOff("allEnd"),this}offAnimationEnd(t){return this.L.off(t,"end")}offEveryAnimationEnd(t){return this.L.off(t,"everyEnd")}offAllAnimationEnd(t){return this.L.off(t,"allEnd")}finish(t=!0){if(this.D=!0,this.R.splice(this.R.indexOf(this),1),this.nextAnimations.length>0){const i=this.nextAnimations[0];return t&&(this.L.listeners("allEnd").forEach(((t,s)=>i.onAllAnimationEnd(t,s))),this.L.listeners("everyEnd").forEach(((t,s)=>i.onEveryAnimationEnd(t,s)))),i.addNextAnimations(this.nextAnimations.slice(1)),i.start(),t&&(this.L.emit("end",i),this.L.emit("everyEnd",i)),i}t&&(this.L.emit("end",void 0),this.L.emit("everyEnd",void 0),this.L.emit("allEnd"))}finishAll(t=!0){let i=this;for(;i;)i=i.finish(t)}getFinalValues(){return this.nextAnimations.length>0?this.nextAnimations[this.nextAnimations.length-1].values.map(Wt):this.values.map(Wt)}getTimeUntilFinish(){let t=this.duration-this.delta;for(let i=0;i<this.nextAnimations.length;i+=1)t+=this.nextAnimations[i].duration-this.nextAnimations[i].delta;return t}}const K=(t,i=60)=>{i>60&&console.log("Note: Animator FPS is usually capped at 60 by the browser!");const s=[];let e,h,r=0;const n=()=>{e=void 0;const o=Date.now();h=h||o,r=o-h,r/1e3>=1/i&&(h=Date.now()-r%(1e3/i),s.forEach((t=>{0===t.delta&&t.V(),t.delta+=r-r%(1e3/i),t.delta>t.duration&&(t.delta=t.duration),t.action(t.eases.map((i=>i(t.delta)))),t.delta===t.duration&&t.finish()})),t()),s.length>0?e=Ot.requestAnimationFrame(n):(e=void 0,h=void 0)};return(t=1e3,i=Q.linear)=>(h,r,o=t)=>{const a=new J(h,r,o,i,s).start();return e||(e=Ot.requestAnimationFrame(n)),a}};var q,tt;!function(t){t.circle="circle",t.ellipse="ellipse"}(q||(q={})),function(t){t.closestSide="closest-side",t.closestCorner="closest-corner",t.farthestSide="farthest-side",t.farthestCorner="farthest-corner"}(tt||(tt={}));const it=i({type:"fillstyle",fillType:"radial-gradient",stops:[{color:b("#f00"),offset:0},{color:b("#0f0"),offset:1}],position:n(.5,.5),shape:q.ellipse,extent:tt.farthestCorner});class st extends it{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("RadialGradientFill requires minimum two color stops to be defined.")}toString(){return`radialGradientFill:${this.shape},${this.extent},${this.position.x},${this.position.y},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");return this.set("stops",t)}getColorStops(){return this.get("stops")}setPosition(t){return this.set("position",t)}getPosition(){return this.get("position")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}setExtent(t){return this.set("extent",t)}getExtent(){return this.get("extent")}}const et=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"radial-gradient"===t.fillType),ht=i({type:"fillstyle",fillType:"linear-gradient",stops:[{color:b("#f00"),offset:0},{color:b("#0f0"),offset:1}],angle:0});class rt extends ht{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("LinearGradientFill requires minimum two color stops to be defined.")}toString(){return`linearGradientFill:${this.angle},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");const i=t.sort(((t,i)=>t.offset-i.offset));return this.set("stops",i)}getColorStops(){return this.get("stops")}setAngle(t,i){return this.set("angle",i?function(t){return 180*t/Math.PI}(t):t)}getAngle(t){return t?Bs(this.get("angle")):this.get("angle")}}const nt=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"linear-gradient"===t.fillType),ot=i({type:"linestyle",lineType:"empty"}),at=new class extends ot{constructor(){super(...arguments),this.thickness=0}setThickness(t){return this}getThickness(){return 0}O(){return 0}setFillStyle(t){return this}getFillStyle(){return O}},lt=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"empty"!==t.lineType);class ut{constructor(t,i,e,h){this.cellIndex=t,this.cellSpan=i,this.cellsAmount=e,this.observedAmount=h,this.x=new ct,this.y=new ct,this.z=new ct,this.L=new s;const r={...t},n={...i};if(h){const t=t=>{this.cellsAmount.x=t.reduce(os,0),this.cellIndex.x=t.reduce(((t,i,s)=>s>=r.x?t:t+i),0),this.cellSpan.x=t.reduce(((t,i,s)=>s>=r.x&&s<r.x+n.x?t+i:t),0),this.L.emit("cell-resize")},i=h.x.N(t);t(h.x._());const s=t=>{this.cellsAmount.y=t.reduce(os,0),this.cellIndex.y=t.reduce(((t,i,s)=>s>=r.y?t:t+i),0),this.cellSpan.y=t.reduce(((t,i,s)=>s>=r.y&&s<r.y+n.y?t+i:t),0),this.L.emit("cell-resize")},e=h.y.N(s);s(h.y._()),this.G=()=>{h.x.W(i),h.y.W(e)}}}U(){return this.G&&(this.G(),this.G=void 0),this}Y(t){return this.L.on("cell-resize",t)}H(t){return this.L.off(t,"cell-resize")}}class ct extends h{constructor(){super(...arguments),this.$=0,this.X=10,this.j=1}Z(){return this.o=!1,this}J(){return this.o=!0,this}getInnerStart(){return this.$}getInnerEnd(){return this.X}getInnerInterval(){return Math.abs(this.getInnerEnd()-this.getInnerStart())}K(t,i){return this.$=t,this.X=i,this.q(),this}tt(t){return this.j=t,this.q(),this}it(t){return t/this.j}q(){const t=this.it(this.X-this.$),i=this.j;void 0!==this.st&&!1!==Ht(t,this.st)||(this.o=!0,this.et=i,this.st=t)}ht(){return this.st}rt(){return this.et}nt(){return this.X<this.$}ot(t,i){return!0}}const dt={d1:t=>new t.scale1DConstructor(0,1,1,void 0),d2:t=>(new t.scaleXYConstructor).ut({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0),d3:()=>new ut({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0)},ft=(t,i,s)=>i===s?t:s.ct(i.dt(t)),At=(t,i,s)=>{if(i===s)return t;const e=i instanceof Js?i.x:i.x instanceof Js?i.x.x:i.x.ft,h=i instanceof Js?i.y:i.y instanceof Js?i.y.y:i.y.ft,r=s instanceof Js?s.x:s.x instanceof Js?s.x.x:s.x.ft,n=s instanceof Js?s.y:s.y instanceof Js?s.y.y:s.y.ft;return{...t,x:ft(t.x,e,r),y:ft(t.y,h,n)}},gt=(t,i,s)=>{const e=t(i,s);return t=>new U({color:e(t)})},yt=(t,i,s)=>{const e=t(i+1,s);return t=>new st({stops:[{offset:0,color:e(t)},{offset:1,color:e(t).getDarker()}]})},mt=(t,i,s,e)=>{const h=t(i+1,e);return t=>new rt({stops:[{offset:0,color:h(t).getDarker()},{offset:.5,color:h(t)},{offset:1,color:h(t).getDarker()}],angle:s||90})},pt=(...t)=>{if(0===t.length)return{remove:Yt};let i=!1;const s=t.map((s=>s.onIntervalChange(((e,h,r)=>((s,e,h)=>{i||(i=!0,t.filter((t=>t!==s)).forEach((t=>t.At(e,h,!1,s.getStopped(),"synchronizedAxis"))),i=!1)})(s,h,r)))));let e=!1;const h=t.map((i=>i.onStoppedStateChanged(((s,h)=>((i,s)=>{e||(e=!0,t.filter((t=>t!==i)).forEach((t=>t.setStopped(s))),e=!1)})(i,h)))));return{remove:()=>{t.forEach(((t,i)=>{t.offIntervalChange(s[i]),t.offStoppedStateChanged(h[i])}))}}},vt=(t,i,s,e)=>{if(!s||0===s.length)throw new Error("Invalid use regularColorSteps 'colorPalette' is undefined or empty");const h=null==e?void 0:e.formatLabels,r=null==e?void 0:e.alpha;return s.map(((e,n)=>{const o=t+n/(s.length-1)*(i-t);return{color:void 0!==r?e.setA(r):e,value:o,label:h?h(o):void 0}}))},St=t=>t&&"object"==typeof t&&"column"in t&&"row"in t,bt=t=>t&&"object"==typeof t&&"z"in t&&"column"in t&&"row"in t,xt=t=>t&&"object"==typeof t&&"position"in t&&"open"in t&&"high"in t&&"isPacked"in t,Mt=t=>t&&"object"==typeof t&&"annulus"in t&&"sector"in t,_t=t=>t&&"object"==typeof t&&"index"in t,wt=t=>t&&"object"==typeof t&&"xSize"in t&&"ySize"in t&&"zSize"in t,Ct=t=>t&&"object"==typeof t&&"figure"in t&&"x1"in t&&"y2"in t&&"height"in t,kt=t=>t&&"object"==typeof t&&"figure"in t&&"start"in t&&"end"in t&&"median"in t&&"upperQuartile"in t,Tt=t=>t&&"object"==typeof t&&"figure"in t&&"x"in t&&"radiusX"in t&&"radiusY"in t,Ft=t=>t&&"object"==typeof t&&"figure"in t&&"x"in t&&"coordinates"in t,It=t=>t&&"object"==typeof t&&"figure"in t&&"startX"in t&&"endX"in t,Pt=t=>t&&"object"==typeof t&&"x"in t&&"y"in t;class Dt extends Error{constructor(t,i){super(`ChartError: ${t} ${i?`in ${i.constructor.name}`:""}`),Object.setPrototypeOf(this,Dt.prototype)}}class Bt extends Error{constructor(t,i,s=!1){const e=`EngineError: ${t} ${i?`in ${i.constructor.name}`:""}`;super(e),s&&Ot.alert(e),Object.setPrototypeOf(this,Bt.prototype)}}class Lt extends Bt{constructor(t){super(t),Object.setPrototypeOf(this,Lt.prototype)}}var Rt,Et,zt,Vt;!function(t){t[t.Content=0]="Content",t[t.PaddedContent=1]="PaddedContent",t[t.PaddedBackground=2]="PaddedBackground",t[t.Everything=3]="Everything"}(Rt||(Rt={})),function(t){t[t.never=0]="never",t[t.always=1]="always",t[t.whenHovered=2]="whenHovered",t[t.whenDragged=3]="whenDragged",t[t.whenNotDragged=4]="whenNotDragged",t[t.whenHoveredOrDragged=5]="whenHoveredOrDragged"}(Et||(Et={})),function(t){t[t.notDraggable=0]="notDraggable",t[t.draggable=1]="draggable",t[t.onlyHorizontal=2]="onlyHorizontal",t[t.onlyVertical=3]="onlyVertical"}(zt||(zt={})),function(t){t[t.Up=0]="Up",t[t.Right=1]="Right",t[t.Down=2]="Down",t[t.Left=3]="Left"}(Vt||(Vt={}));const Ot="undefined"!=typeof window?window:"undefined"!=typeof global&&global._lcjs?global._lcjs:{},Nt=(t,i)=>t.x===i.x&&t.y===i.y,Gt=t=>t!==Ki&&t!==qi&&!Number.isNaN(t)&&Number.isFinite(t)&&t!==1/0&&t!==-1/0,Wt=t=>t[1],Ut=t=>t.dispose(),Yt=()=>{},Ht=(t,i)=>t===i,$t=(t,i,s)=>s>i?Math.min(Math.max(t,i),s):Math.min(Math.max(t,s),i),Xt=t=>Array.prototype.concat.apply([],t),jt=(t,i)=>void 0===t||Number.isNaN(t)?i:t,Zt=t=>t.yt(),Qt=t=>t.vt(),Jt=t=>t.St(),Kt=t=>t.bt(),qt=t=>t.min.x,ti=t=>t.max.x,ii=t=>t.min.y,si=t=>t.max.y,ei=(t,i,s,e,h)=>{if(t.length>0){let r=h?e(h):void 0;for(let e=0;e<t.length;e+=1){const h=i(t[e]);void 0!==h&&(r=void 0!==r?s(r,h):h)}return r}if(h)return e(h)},hi=(t,i)=>t.position===i.position&&t.high===i.high&&t.low===i.low,ri=n(0,1),ni=n(1,0),oi=n(0,-1),ai=n(-1,0),li=n(0,0),ui=t=>{switch(t){case Vt.Up:return ri;case Vt.Right:return ni;case Vt.Down:return oi;case Vt.Left:return ai;default:return li}},ci=t=>t===Vt.Left||t===Vt.Right,di=t=>{t.stopPropagation(),t.preventDefault()},fi=(t,i)=>{if(!i)return t;const s=t.length,e=new Float32Array(2*s);let h=0;for(let i=0;i<s;i+=1){const s=t[i],r=Math.fround(s);e[h+0]=r,e[h+1]=s-r,h+=2}return e},Ai=(t,i,s=Float32Array)=>{if(!i){const i=t.length,e=new s(2*i);let h=0;for(let s=0;s<i;s+=1){const i=t[s];e[h+0]=i.x,e[h+1]=i.y,h+=2}return e}const e=t.length,h=new s(4*e);let r=0;for(let i=0;i<e;i+=1){const s=t[i],e=Math.fround(s.x),n=Math.fround(s.y);h[r+0]=e,h[r+1]=n,h[r+2]=s.x-e,h[r+3]=s.y-n,r+=4}return h},gi=t=>{const i=t.length,s=new Float32Array(3*i);let e=0;for(let h=0;h<i;h+=1){const i=t[h];s[e+0]=i.x,s[e+1]=i.y,s[e+2]=i.z,e+=3}return s},yi=t=>i=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)},mi=t=>{let i=t.length;for(let s=0;s<i-1;s+=1)t[s].x===t[s+1].x&&t[s].y===t[s+1].y&&(t.splice(s,1),s-=1,i-=1);return t},pi=t=>{const i=Math.log(t);return t=>Math.log(t)/i},vi=pi(Math.E),Si=(t,i)=>{const s=i[t];return s?s():void 0},bi=(t,i)=>{let s;if(i)s=i;else{const i={x:0,y:0};for(let s=0;s<t.length;s+=1)i.x+=t[s].x/t.length,i.y+=t[s].y/t.length;s=i}return t.sort(((t,i)=>Ls(Cs(t,s))-Ls(Cs(i,s))))},xi=(t,i,s)=>{if(0===t.length)return!1===s.canReturnB?i.slice():i;const e=i.length;if(e<1e5)return t.push.apply(t,i),t;for(let s=0;s<e;s+=1)t.push(i[s]);return t},Mi=(t,i,s)=>s<0?t:s>1?i:S(t.getR()+s*(i.getR()-t.getR()),t.getG()+s*(i.getG()-t.getG()),t.getB()+s*(i.getB()-t.getB()),t.getA()+s*(i.getA()-t.getA())),_i=t=>255===t.getA()?t:t.setA(255),wi=(()=>{const t=S(0,0,0);return i=>(i=_i(i),new st({shape:q.circle,extent:tt.farthestCorner,position:{x:.2,y:.8},stops:[{offset:0,color:i},{offset:1,color:Mi(i,t,.5)}]}))})(),Ci=(()=>{const t=t=>{var i;if(t){if(Y(t)){if(0===t.getColor().getA())return;return t.getColor()}if(et(t)||nt(t)){const s=t.getColorStops();return 3===s.length?s[1].color:null===(i=s[0])||void 0===i?void 0:i.color}Z(t)}};return(i,s,e,h)=>{var r;const n=[];if(h.fill&&n.push(h.fill),h.fill2&&n.push(h.fill2),h.stroke){const t=h.stroke.getFillStyle();t!==O&&("stroke"===(null===(r=h.behavior)||void 0===r?void 0:r.priority)?n.unshift(t):n.push(t))}if(h.point3D){const t=h.point3D;n.push(t.getFillStyle())}let o;if(h.behavior&&!0===h.behavior.colorStep){const[i,e]=n.reduce(((i,s)=>{if(i[0]&&i[1])return i;const e=t(s);return e&&(void 0===i[0]?i[0]=e:i[1]=e),i}),[void 0,void 0]);o=i&&e?(a=i)===(l=e)||a.getR()===l.getR()&&a.getG()===l.getG()&&a.getB()===l.getB()?wi(a):(a=_i(a),l=_i(l),new rt({angle:0,stops:[{offset:0,color:l},{offset:.5,color:l},{offset:.5,color:a},{offset:1,color:a}]})):s.uiButtonFillStyle}else{const i=n.reduce(((i,s)=>i||t(s)),void 0);o=i?e?new U({color:i}):wi(i):s.uiButtonFillStyle}var a,l;i.setButtonOnFillStyle(o)}})(),ki=t=>{const i=t;if(Z(i))return{lut:i.getPalette(),lookUpProperty:i.getLookUpProperty()}},Ti=t=>{let i=0;return()=>(i+=1,`${t}-${i}`)},Fi=(t,i)=>{let s="string"==typeof t?t:String(t);const e=s.indexOf(".");let h=e>=0?e:s.length;for(;h<i;h+=1)s=`0${s}`;return s},Ii=(t,i)=>"function"==typeof t?t(i):t,Pi=t=>t.ctrlKey?Math.sign(t.deltaY)*Math.min(.05*Math.abs(t.deltaY),1):Math.sign(t.deltaY),Di=(t,i)=>i(),Bi=()=>new Error("LightningChart JS encountered an unexpected error.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact");new U({color:S(255,255,255,1)});const Li=t=>t===ts||t.min.x===ts.min.x&&t.max.x===ts.max.x&&t.min.y===ts.min.y&&t.max.y===ts.max.y,Ri=t=>Array.from(new Set(t)),Ei=t=>t.filter((t=>void 0!==t)),zi=t=>"boolean"==typeof t?t?1:0:t>1?1:t<0?0:t,Vi=(t,i,s)=>{i.length<=0||(t.setText(s.label).setOn(i[0].getVisible()),s.style&&t.setButtonOnFillStyle(s.style),s.toggleVisibilityOnClick&&t.onSwitch(((t,s)=>i.forEach((t=>t.setVisible(s))))),t.onMouseEnter((()=>i.forEach((t=>t.setHighlight(!0))))),t.onMouseLeave((()=>i.forEach((t=>t.setHighlight(!1))))),i.forEach((i=>i.onMouseEnter((()=>t.setHighlight(!0))))),i.forEach((i=>i.onMouseLeave((()=>t.setHighlight(!1))))),i.forEach((i=>i.onTouchStart((()=>t.setHighlight(!0))))),i.forEach((i=>i.onTouchEnd((()=>t.setHighlight(!1))))))},Oi=(t,i)=>{throw new Error(i)},Ni=t=>{let i;return()=>i||(i=t(),i)},Gi=t=>{if(t===at)return 0;const i=t.getThickness();return i<0?1:1*i},Wi=(t,i,s,e)=>{const h=`LightningChart JS Resources not found.\nresourcesBaseUrl: "${t}"\ninitiator: ${s}\nresource url: ${i}\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/error-resources-not-found/`;if(e.shouldCrash)throw Ot.alert(h),new Error(h);Ot.console.warn(h)},Ui=(t,i,s,e=0)=>{if(t<s(e)||s(i)<t)return;const h=i;for(;e!==i;){const h=Math.ceil((e+i)/2);t<s(h)?i=h-1:e=h}const r=Math.abs(t-s(e));return e<h&&Math.abs(t-s(e+1))<r?e+1:e},Yi=()=>{const t=new Map;return{xt:i=>(i.setMouseEnterEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Mt(i,s,e,h)})),i.setMouseLeaveEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h._t(i,s,e)})),i.setMouseClickEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.wt(i,s,e,h)})),i.setMouseDoubleClickEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Ct(i,s,e,h)})),i.setMouseDownEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.kt(i,s,e,h)})),i.setMouseUpEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Tt(i,s,e,h)})),i.setMouseMoveEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Ft(i,s,e,h)})),i.setMouseDragEventHandler(((i,s,e,h,r,n,o)=>{const a=n&&t.get(n);a&&a.It(i,s,e,h,r,n,o)})),i.setMouseDragStartEventHandler(((i,s,e,h,r)=>{const n=h&&t.get(h);n&&n.Pt(i,s,e,h,r)})),i.setMouseDragStopEventHandler(((i,s,e,h,r,n)=>{const o=r&&t.get(r);o&&o.Dt(i,s,e,h,r,n)})),i.setMouseWheelEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Bt(i,s,e,h)})),i.setTouchStartEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Lt(i,s,e,h)})),i.setTouchMoveEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Rt(i,s,e,h)})),i.setTouchEndEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Et(i,s,e,h)})),i),zt:(i,s)=>{t.set(i,s)},Vt:()=>{t.clear()}}},Hi={left:0,right:0,top:0,bottom:0},$i=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER),Xi=(t,i,s)=>{i&&i.Ot();const e=s();return{Nt:t,Ot:()=>{e.forEach((i=>t.Gt(i)))}}},ji=(t,i,s)=>{let e;const h=()=>(e=s(),e),r={...t,resolve:()=>e||h()};for(const t of Object.keys(i))Object.defineProperty(r,t,{get:function(){return e?e[t]:h()[t]}});return r},Zi=t=>{if(t)return"resolve"in t?t.resolve():t},Qi=t=>{let i=t;return{Wt:t=>{const s=i;return i=s+t,[s,t]}}},Ji={add:(t,i)=>l(t.x+i,t.y+i,t.z+i),addVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x+=t.x,s.y+=t.y,s.z+=t.z;return s},subtract:(t,i)=>l(t.x-i,t.y-i,t.z-i),subtractVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x-=t.x,s.y-=t.y,s.z-=t.z;return s},multiply:(t,i)=>l(t.x*i,t.y*i,t.z*i),divide:(t,i)=>l(t.x/i,t.y/i,t.z/i),multiplyVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x*=t.x,s.y*=t.y,s.z*=t.z;return s},divideVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x/=t.x,s.y/=t.y,s.z/=t.z;return s},length:t=>Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),normalize:t=>Ji.divide(t,Ji.length(t)),dot:(t,i)=>t.x*i.x+t.y*i.y+t.z*i.z,cross:(t,i)=>l(t.y*i.z-t.z*i.y,t.z*i.x-t.x*i.z,t.x*i.y-t.y*i.x),angle:(t,i)=>Math.acos(Ji.dot(t,i)/(Ji.length(t)*Ji.length(i))),rotateAroundAxis(t,i,s){const e=Math.cos(s),h=Math.sin(s),r=Ji.dot(i,t),n=Ji.cross(i,t);return Ji.addVec(Ji.multiply(t,e),Ji.addVec(Ji.multiply(i,(1-e)*r),Ji.multiply(n,h)))},lerp:(t,i,s)=>(s=$t(s,0,1),Ji.addVec(Ji.multiply(t,1-s),Ji.multiply(i,s))),equals:(t,i)=>Ht(t.x,i.x)&&Ht(t.y,i.y)&&Ht(t.z,i.z),abs:t=>({x:Math.abs(t.x),y:Math.abs(t.y),z:Math.abs(t.z)}),sign:t=>({x:Math.sign(t.x),y:Math.sign(t.y),z:Math.sign(t.z)})},Ki=Number.MAX_SAFE_INTEGER,qi=-Number.MAX_SAFE_INTEGER,ts=c(n(Ki,Ki),n(qi,qi)),is=c(l(Ki,Ki,Ki),l(qi,qi,qi)),ss=(t,i)=>{const s=Math.log(t)/Math.log(i);return Math.floor((t=>(Math.ceil(t)-t<1e-4?t=Math.ceil(t):t-Math.floor(t)<1e-4&&(t=Math.floor(t)),t))(s))},es=(t,i)=>!(i.min.x>t.max.x||i.max.x<t.min.x||i.min.y>t.max.y||i.max.y<t.min.y),hs=(t,i)=>!(t[1].x<i[0].x||t[0].x>i[1].x||t[3].y<i[0].y||t[0].y>i[3].y),rs=(t,i)=>({min:{x:Math.min(t[0].x,i[0].x),y:Math.min(t[0].y,i[0].y)},max:{x:Math.max(t[2].x,i[2].x),y:Math.max(t[2].y,i[2].y)}}),ns=t=>{const i=t.length;for(let s=0;s<i;s+=1)for(let e=s+1;e<i;e+=1)if(es(t[s],t[e]))return!0;return!1},os=(t,i)=>i+t,as=(t,i,s)=>{const e=Cs(i,t),h=e.x*e.x+e.y*e.y;if(0===h)return t;const r=Cs(s,t),o=(r.x*e.x+r.y*e.y)/h;return o<=0?t:o>=1?i:n(t.x+o*e.x,t.y+o*e.y)},ls=(t,i,s)=>s>i?t>=i&&t<=s:t>=s&&t<=i,us=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)},cs=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return s*s+e*e},ds=(t,i,s)=>ws(t,_s(Cs(i,t),s)),fs=(t,i,s)=>Ji.addVec(t,Ji.multiply(Ji.subtractVec(i,t),s));function As(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,h=t[0].y,r=t[0].y;for(let n=0;n<i;n+=1){const i=t[n];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>h&&(h=i.y),i.y<r&&(r=i.y)}return c(n(e,r),n(s,h))}return ts}function gs(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,h=t[0].y,r=t[0].y,n=t[0].z,o=t[0].z;for(let a=0;a<i;a+=1){const i=t[a];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>h&&(h=i.y),i.y<r&&(r=i.y),i.z>n&&(n=i.z),i.z<o&&(o=i.z)}return c(l(e,r,o),l(s,h,n))}return is}const ys=(...t)=>{const i={min:{x:Ki,y:Ki},max:{x:qi,y:qi}};for(const s of t)i.min.x=i.min.x<s.min.x?i.min.x:s.min.x,i.max.x=i.max.x>s.max.x?i.max.x:s.max.x,i.min.y=i.min.y<s.min.y?i.min.y:s.min.y,i.max.y=i.max.y>s.max.y?i.max.y:s.max.y;return i},ms=(t,i)=>c(l(t.min.x<i.min.x?t.min.x:i.min.x,t.min.y<i.min.y?t.min.y:i.min.y,t.min.z<i.min.z?t.min.z:i.min.z),l(t.max.x>i.max.x?t.max.x:i.max.x,t.max.y>i.max.y?t.max.y:i.max.y,t.max.z>i.max.z?t.max.z:i.max.z));function ps(t,i,s,e){const h=t.x-e.x,r=t.y-e.y,n=e.x-s.x,o=s.y-e.y,a=o*h+n*r,l=(e.y-i.y)*h+(i.x-e.x)*r,u=o*(i.x-e.x)+n*(i.y-e.y);return u<0?a<=0&&l<=0&&a+l>=u:a>=0&&l>=0&&a+l<=u}function vs(t,i,s){return n(Math.cos(s)*(t.x-i.x)+Math.sin(s)*(t.y-i.y)+i.x,-Math.sin(s)*(t.x-i.x)+Math.cos(s)*(t.y-i.y)+i.y)}function Ss(t,i){return n(t.x-i.x,t.y-i.y)}function bs(t){const i=Ms(t);return 0===i?n(0,0):n(t.x/i,t.y/i)}function xs(t,i){let s={x:i.x-t.x,y:i.y-t.y};s=bs(s);const e=Math.PI/2,h=s.x;return s.x=-Math.sin(e)*s.y,s.y=h*Math.sin(e),s}function Ms(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function _s(t,i){return n(t.x*i,t.y*i)}function ws(t,i){return n(t.x+i.x,t.y+i.y)}function Cs(t,i){return n(t.x-i.x,t.y-i.y)}function ks(t,i){return n(t.x*i.x,t.y*i.y)}function Ts(t,i){return n(t.x/i.x,t.y/i.y)}function Fs(t){return _s(t,-1)}function Is(t,i){return t.x*i.x+t.y*i.y}const Ps=(t,i,s)=>{const e=(s.y-i.y)/(s.x-i.x),h=i.y+(t-i.x)*e;return n(t,h)},Ds=(t,i,s)=>{const e=(s.y-i.y)/(s.x-i.x),h=i.x+(t-i.y)/e;return n(h,t)};function Bs(t){return t*Math.PI/180}function Ls(t){return 180*Math.atan2(t.y,t.x)/Math.PI}function Rs(t){return n(Math.cos(t),Math.sin(t))}const Es=(t,i,s,e)=>{let h,r,o,a;if(i.x-t.x!=0||e.x-s.x!=0)return i.x-t.x==0?(o=i.x,r=(e.y-s.y)/(e.x-s.x),a=r*(o-s.x)+s.y):e.x-s.x==0?(o=e.x,h=(i.y-t.y)/(i.x-t.x),a=h*(o-t.x)+t.y):(h=(i.y-t.y)/(i.x-t.x),r=(e.y-s.y)/(e.x-s.x),o=(s.y-r*s.x+h*t.x-t.y)/(h-r),a=h*(o-t.x)+t.y),n(o,a)},zs=(t,i)=>{const s=t.length,e=i.length,h=new Uint16Array(s+e);return h.set(t,0),h.set(i,s),h};class Vs{constructor(){this.Ut=!0}getInnerStart(){return this.$}getInnerEnd(){return this.X}getInnerInterval(){return Math.abs(this.X-this.$)}K(t,i){return this.Ut=t!==this.$||i!==this.X,this.$=t,this.X=i,this}Z(){return this.Ut=!1,this}J(){return this.Ut=!0,this}}class Os extends Vs{constructor(t,i,s,e){if(super(),this.Yt=!0,this.Ht=!0,this.$t=[0,0],this.Xt=!0,this.jt=t,this.Zt=i,this.Qt=s,this.Jt=t,this.Kt=i,e){const t=e.N(this.qt.bind(this));this.qt(e._()),this.ti=()=>e.W(t)}}tt(t){return this.j=t,this.Ht=!0,this}ii(t){return this.$t=t.map(Math.abs),this.Xt=!0,this}si(){return this.jt/this.Qt*this.j+this.$t[0]}ei(){return(this.jt+this.Zt)/this.Qt*this.j-this.$t[1]}hi(){return this.getCellSize()-this.ri()}ni(){return this.j}getCellSize(){return this.oi(this.j)}ri(){return this.$t[0]+this.$t[1]}ai(){return this.$t}qt(t){this.Qt=t.reduce(os,0),this.jt=t.reduce(((t,i,s)=>s>=this.Jt?t:t+i),0),this.Zt=t.reduce(((t,i,s)=>s>=this.Jt&&s<this.Jt+this.Kt?t+i:t),0),this.Yt=!0,this.li()}oi(t){return t*this.Zt/this.Qt}Z(){return super.Z(),this.Ht=!1,this.Xt=!1,this.Yt=!1,this}J(){return super.J(),this.Ht=!0,this.Xt=!0,this.Yt=!0,this}}class Ns extends Os{constructor(t,i,s,e){super(t,i,s,e),this.ui={internal:10,function:Gs(10),number:10},this.j=1e3,this.K(1,1e3),this.ci=this.di()}ot(t,i,s,e,h){if(t===i)return!1;const r=Math.min(t,i)<Us,n=Math.max(t,i)>Ys;return!r&&!n||!!h&&(i>t?{start:r?Us:t,end:n?Ys:i}:{start:n?Ys:t,end:r?Us:i})}dt(t){const i=this.si(),s=this.ei(),e=Math.max(t,Us);return i+(this.ui.function(e)-this.ci.scaleStartLog)/this.ci.scaleIntervalLog*(s-i)}ct(t){const i=this.si(),s=(t-i)/(this.ei()-i),e=this.ci.scaleStartLog+s*this.ci.scaleIntervalLog;return this.ui.number**e}li(){this.ui&&this.di()}K(t,i){return super.K(t,i),this.ui&&this.di(),this}ii(t){return super.ii(t),this.ui&&this.di(),this}tt(t){return super.tt(t),this.ui&&this.di(),this}fi(t){return this.ui={internal:t,function:Gs(t),number:Ws(t)},this}Ai(){return this.ui.internal}gi(t,i){const s=this.dt(t)+i;return this.ct(s)}yi(){return this.Ht||this.Ut||this.Xt||this.Yt}di(){const t=this.ui.function(this.$),i=this.ui.function(this.X)-t,s=2*this.si()/this.j-1,e=2*this.ei()/this.j-1-s;return this.ci={scaleStartLog:t,scaleIntervalLog:i,viewportStart:s,viewportSize:e},this.ci}mi(){return this.ci}}const Gs=t=>"e"===t?vi:pi(t),Ws=t=>"e"===t?Math.E:t,Us=.9*10**-4,Ys=1.1*10**25,Hs=[{prefix:"T",unit:10**12},{prefix:"B",unit:10**9},{prefix:"M",unit:1e6},{prefix:"K",unit:1e3}],$s=(t,i,s)=>{const e=Math.abs(s-i),h=Math.max(2-ss(e,10),0);return t.toFixed(h)},Xs={Numeric:(t,i)=>$s(t,i.getInnerStart(),i.getInnerEnd()),NumericUnits:(t,i)=>{const s=Math.abs(i.getInnerEnd()-i.getInnerStart()),e=t<0;t=Math.abs(t);let h="",r="";if(s>=1e3&&t>1e3){let i="";for(const s of Hs){const e=Math.round(1e3*t/s.unit)/1e3;if(e>=1){i=e.toString(),r=s.prefix;break}}h=(e?"-":"")+i}else{let i=String(Math.floor(t));const r=ss(t,1e3);for(let t=1;t<=r;t+=1){const s=i.length-(3*t+(t-1));i=`${i.substring(0,s)} ${i.substring(s,i.length)}`}h=(e?"-":"")+i+(s<=10?((t,i)=>{if(0===i)return"";let s=(Math.abs(t)-Math.abs(Math.floor(t))).toString().substring(1);return s.length>i&&(s=s.substring(0,i+1)),s})(t,2-ss(s,10)):"")}return h+=r,h},LogarithmicExponentsRounded:(t,i,s,e=10)=>{const h=Gs(e)(t);return`${e}${js(h)}`},LogarithmicExponents:(t,i,s,e=10)=>{const h=Gs(e),r=Math.floor(h(t)),n=t/Ws(e)**r;return`${Math.round(n)}×${e}${js(r)}`},LogarithmicExtreme:(t,i,s,e=10)=>{const h=Gs(e),r=Math.floor(h(t));return`${(t/Ws(e)**r).toFixed(2)}×${e}${js(r)}`},LogarithmicNoExponents:(t,i,s,e=10)=>{const h=Gs(e);if("e"===e)return`${Math.floor(h(t))}e`;const r=t.toString();if(t>1)return r;const n=Math.floor(h(t));return t.toFixed(Math.abs(n))},Scientific:(t,i)=>{const s=Math.max(Math.abs(i.getInnerStart()),Math.abs(i.getInnerEnd())),e=Math.floor(Math.log10(s));return 0===t?`0.00e${e<0?"":"+"}${e}`:t.toExponential(2)}},js=t=>Math.round(t).toString().split("").map((t=>{switch(t){case"0":return"⁰";case"1":return"¹";case"2":return"²";case"3":return"³";case"4":return"⁴";case"5":return"⁵";case"6":return"⁶";case"7":return"⁷";case"8":return"⁸";case"9":return"⁹";case"-":return"⁻";default:return t}})).join("");class Zs extends Os{constructor(t,i,s,e){super(t,i,s,e),this.pi=!1,this.vi=!1,this.Si=0,this.j=1e3,this.K(0,10),this.q()}yi(){return this.vi}ot(t,i,s,e,h){if(t===i)return!1;const r=Math.abs(e-s),n=Math.abs(i-t);if(!this.pi){const s=((t,i,s)=>{const e=((t,i)=>{if(i<Ki&&i>qi&&t<Ki&&t>qi){const s=Math.abs(t/2**23),e=Math.abs(i/2**23),h=Math.min(s,e);return 10**Math.floor(Math.log10(h))}})(t,i);if(void 0!==e)return e*s})(t,i,this.getCellSize());if(void 0===s)return!1;if(n>s)return!0;const e=(i+t)/2,o=(h?s/2:r/2)*(t>i?-1:1);return{start:e-o,end:e+o}}const o=10**-(12-Math.log10(Math.max(Math.abs(t),1)));if(n>o)return!0;const a=(i+t)/2,l=(h?o/2:r/2)*(t>i?-1:1);return{start:a-l,end:a+l}}li(){this.q()}dt(t){return this.si()+(t-this.$)/(this.X-this.$)*(this.ei()-this.si())}ct(t){return this.$+(t-this.si())/(this.ei()-this.si())*(this.X-this.$)}K(t,i){return super.K(t,i),this.q(),this}ii(t){return super.ii(t),this.q(),this}tt(t){return super.tt(t),this.bi=Qs(this.X-this.$,this.$t,this.j,this.Zt,this.Qt),this.q(),this}xi(){return this.pi=!0,this}Mi(){return this.pi}_i(){return Math.abs(this.wi)}Ci(){return this._i()/this.bi}ki(){return this.Ti}Fi(){return this.Ii}getPixelSize(){return this.bi}mi(){return this.ci}J(){return super.J(),this.vi=!0,this}Z(){return super.Z(),this.vi=!1,this}Pi(t,i=Xs.Numeric){return i(t,this)}Di(){const t=Math.abs(this.getInnerEnd()).toString().length,i=Math.abs(this.getInnerStart()).toString().length;return t>i?t:i}Bi(t){return Qs(t,this.$t,this.j,this.Zt,this.Qt)}q(){let t=this.$,i=this.X,s=0;this.pi&&(t=0,i=this.X-this.$,s=this.$);const e=i-t,h=Qs(e,this.$t,this.j,this.Zt,this.Qt);this.Ii=t-this.$t[0]*h,this.Ti=i+this.$t[1]*h;const r=this.Ti-this.Ii,n=r-this.wi,o=Math.abs(n/h),a=e-this.Si,l=Math.abs(a/h);(!this.ci||o>=.4||l>=.4)&&(this.Si=e,this.wi=r,this.bi=h,this.vi=!0);const u=this.wi*this.Qt/(2*this.Zt),c=-(this.Ii-this.wi*this.jt/this.Zt)-u,d=2*this.si()/this.j-1,f=2*this.ei()/this.j-1-d;this.ci={displacement:c,scaling:u,highPrecisionOffset:s,viewportStart:d,viewportSize:f,scaleStartLog:0,scaleIntervalLog:0}}gi(t,i){return t+this.bi*i}}const Qs=(t,i,s,e=1,h=1)=>t/(s*e/h-(i[0]+i[1]));class Js{Li(t,i){return"x"in t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=i),this}Z(){return this.x.Z(),this.y.Z(),this}J(){return this.x.J(),this.y.J(),this}tt(t,i){return"object"==typeof t?(this.x.tt(t.x),this.y.tt(t.y)):(this.x.tt(t),this.y.tt(i)),this}ni(){return n(this.x.ni(),this.y.ni())}Ri(t){return this.x.ii(t),this}Ei(t){return this.y.ii(t),this}ri(){return n(this.x.ri(),this.y.ri())}zi(t,i){return this.x.K(t,i),this}Vi(t,i){return this.y.K(t,i),this}getInnerIntervalPixels(){const t=this.x.getCellSize(),i=this.y.getCellSize();return{x:t-this.x.ri(),y:i-this.y.ri()}}Oi(){return this.x.yi()||this.y.yi()}}class Ks extends Js{constructor(){super(...arguments),this.Ni="LinearScaleXY"}ut(t,i,s,e){return this.x=new Zs(t.x,i.x,s.x,e?e.x:void 0),this.y=new Zs(t.y,i.y,s.y,e?e.y:void 0),this}Mi(){return this.x.Mi()||this.y.Mi()}Gi(){return n(this.x.getPixelSize(),this.y.getPixelSize())}mi(){return{x:this.x.mi(),y:this.y.mi()}}gi(t,i){const s=this.Gi();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}Wi(t,i,s,e){const h=this.Gi(),r=xs(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class qs extends Js{constructor(){super(...arguments),this.Ni="MixedScaleXY"}Mi(){return!1}gi(t,i){const s=this.x.dt(t.x),e=this.y.dt(t.y),h={x:s+i.x,y:e+i.y};return{x:this.x.ct(h.x),y:this.y.ct(h.y)}}Wi(t,i,s,e){const h={x:this.x.dt(t.x),y:this.y.dt(t.y)},r={x:this.x.dt(i.x),y:this.y.dt(i.y)},n=bs(Cs(r,h)),o=xs(r,h),a={x:h.x+n.x*e+o.x*s,y:h.y+n.y*e+o.y*s};return{x:this.x.ct(a.x),y:this.y.ct(a.y)}}mi(){const t=this.x.mi(),i=this.y.mi();return{uScaleStart:[this.x.$,this.y.$],uScaleInterval:[this.x.getInnerInterval(),this.y.getInnerInterval()],uScaleStartLog:[t.scaleStartLog,i.scaleStartLog],uScaleIntervalLog:[t.scaleIntervalLog,i.scaleIntervalLog],uViewportStart:[t.viewportStart,i.viewportStart],uViewportSize:[t.viewportSize,i.viewportSize]}}}const te=(t,i)=>t instanceof Ns||i instanceof Ns?(new qs).Li(t,i):(new Ks).Li(t,i),ie=t=>"client"===t,se=t=>!!(t&&"object"==typeof t&&"clientX"in t&&"number"==typeof t.clientX&&"clientY"in t&&"number"==typeof t.clientY),ee=t=>"relative"===t,he=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y),re=(t,i,s)=>{if(t){const t={x:s.x.si(),y:s.y.si(),width:s.x.hi(),height:s.y.hi()};i.forEach((i=>{i.Ui=t}))}else i.forEach((t=>{t.Ui=void 0}))},ne=(t,i)=>{var s;return i?"string"==typeof i?`${t} ${i}`:!1!==(null===(s=i.Yi)||void 0===s?void 0:s.displayInCursor)&&i.getUnits()?`${t} ${i.getUnits()}`:t:t},oe=t=>{let i=!1,s={type:"linear"};if(t&&(void 0!==t.opposite&&(i=t.opposite),t.type&&"linear-highPrecision"===t.type&&(s={type:"linear-highPrecision"}),t.type&&"logarithmic"===t.type)){let i=10;if(t.base)if("E"===t.base||"e"===t.base||"natural"===t.base)i="e";else if("number"==typeof t.base)i=t.base;else if("string"==typeof t.base)try{i=Number(t.base)}catch(i){console.warn(`Unidentified logarithmic base "${t.base}"`)}s={base:i,type:"logarithmic"}}return{opposite:i,type:s}},ae=(t,i,s,e=1)=>$t(t+.1*e*(i-t)+.5*e*s.getPixelSize()*Math.sign(i-t),t,i),le=(t,i,s,e=1)=>{const h=s.dt(t),r=s.dt(i);return $t(s.ct(h+.1*e*(r-h)+.5*e*Math.sign(r-h)),t,i)};var ue;!function(t){t[t.noHighlighting=0]="noHighlighting",t[t.onHover=1]="onHover"}(ue||(ue={}));class ce{constructor(t,i,e,h){this.Hi=!0,this.$i=ue.onHover,this.Xi=!1,this.ji=!0,this.L=new s,this.Zi=[],this.Qi=[],this.onMouseEnter=t=>this.L.on("mouseEnter",t),this.onMouseLeave=t=>this.L.on("mouseLeave",t),this.onMouseClick=t=>this.L.on("mouseClick",t),this.onMouseDoubleClick=t=>this.L.on("mouseDoubleClick",t),this.onMouseDown=t=>this.L.on("mouseDown",t),this.onMouseUp=t=>this.L.on("mouseUp",t),this.onMouseMove=t=>this.L.on("mouseMove",t),this.offMouseEnter=t=>this.L.off(t,"mouseEnter"),this.offMouseLeave=t=>this.L.off(t,"mouseLeave"),this.offMouseClick=t=>this.L.off(t,"mouseClick"),this.offMouseDoubleClick=t=>this.L.off(t,"mouseDoubleClick"),this.offMouseDown=t=>this.L.off(t,"mouseDown"),this.offMouseUp=t=>this.L.off(t,"mouseUp"),this.offMouseMove=t=>this.L.off(t,"mouseMove"),this.offMouseDragStart=t=>this.L.off(t,"mouseDragStart"),this.offMouseDrag=t=>this.L.off(t,"mouseDrag"),this.offMouseDragStop=t=>this.L.off(t,"mouseDragStop"),this.offMouseWheel=t=>this.L.off(t,"mouseWheel"),this.Mt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseEnter",this,i,h),this.$i===ue.onHover&&this.setHighlight(!0)},this._t=(t,i,s)=>{this.L.emit("mouseLeave",this,i,void 0),this.$i===ue.onHover&&this.setHighlight(!1)},this.Ft=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseMove",this,i,h)},this.wt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseClick",this,i,h)},this.Ct=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseDoubleClick",this,i,h)},this.kt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseDown",this,i,h)},this.Tt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseUp",this,i,h)},this.Pt=(t,i,s,e,h)=>{const r=this.Ji(h,i);this.L.emit("mouseDragStart",this,i,s,r)},this.It=(t,i,s,e,h,r,n)=>{const o=this.Ji(n,i);this.L.emit("mouseDrag",this,i,s,e,h,o)},this.Dt=(t,i,s,e,h,r)=>{const n=this.Ji(r,i);this.L.emit("mouseDragStop",this,i,s,e,n)},this.Bt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseWheel",this,i,h)},this.Lt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("touchStart",this,i,h),this.$i===ue.onHover&&this.setHighlight(!0)},this.Rt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("touchMove",this,i,h)},this.Et=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("touchEnd",this,i,h),this.$i===ue.onHover&&this.setHighlight(!1)},this.chart=t,this.Ki=i,this.qi=e,this.ts=new Map,this.ss=h,this.es=this.ss.hs(this,{rs:{themeEffectEnabled:this.qi.effectsText},ns:{}}),this.chart.us.ls.os(this,(t=>{this.ts.forEach(((i,s)=>s.cs(t))),this.Qi.forEach((i=>i.setHighlight(t))),this.Zi.forEach((i=>i.cs(t)))}),{animationEnabled:this.chart.getAnimationsEnabled()})}ds(){}fs(t,i){const s=void 0===(null==i?void 0:i.setEventHandlers)||i.setEventHandlers,e=void 0!==(null==i?void 0:i.isText)&&i.isText;this.ts.set(t,{isText:e});const h=Array.from(this.ts);this.es.rs.As(h.filter((t=>t[1].isText)).map((t=>t[0]))),this.es.ns.As(h.filter((t=>!t[1].isText)).map((t=>t[0]))),t.setMouseInteractions(this.Hi).setVisible(this.ji).cs(this.chart.us.ls.gs(this,!0)),s&&t.setMouseEnterEventHandler(this.Mt).setMouseLeaveEventHandler(this._t).setMouseClickEventHandler(this.wt).setMouseDoubleClickEventHandler(this.Ct).setMouseDownEventHandler(this.kt).setMouseUpEventHandler(this.Tt).setMouseMoveEventHandler(this.Ft).setMouseDragStartEventHandler(this.Pt).setMouseDragEventHandler(this.It).setMouseDragStopEventHandler(this.Dt).setMouseWheelEventHandler(this.Bt).setTouchStartEventHandler(this.Lt).setTouchMoveEventHandler(this.Rt).setTouchEndEventHandler(this.Et);const r=t.onDispose((()=>{t.offDispose(r),this.ts.delete(t)}))}ys(t){this.Zi=t;const i=this.chart.us.ls.gs(this,!0);t.forEach((t=>{t.cs(i).ps(this.ji)}))}Ji(t,i){}vs(t){const i=this.chart.us.Ss(t);if(i&&Array.from(this.ts.keys()).includes(i.entity))return this.Ji(i.info,t)}setEffect(t){return this.es.rs.bs(t&&this.qi.effectsText),this.es.ns.bs(t),this.chart.us.xs(),this}getEffect(){return this.es.rs.Ms()||this.es.ns.Ms()}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}setIcon(t){return this._s=t,this.chart.us.xs(),this}getIcon(){return this._s}setName(t){return this.ws=t,this.Qi.forEach((i=>i.setText(t))),this}getName(){return this.ws||"Component"}dispose(){return this.Xi||(this.Xi=!0,this.ts.forEach(((t,i)=>i.dispose())),this.Ki(this),this.Qi.forEach((t=>{t.dispose()})),this.Qi.length=0,this.L.emit("dispose",this),this.chart.us.xs()),this}setVisible(t){return t===this.ji||(this.ji=t,this.ts.forEach(((i,s)=>s.setVisible(t))),this.Zi.forEach((i=>i.ps(t))),this.Qi.forEach((i=>i.setOn(t))),this.L.emit("visibleStateChanged",this,this.ji),this.chart.us.xs()),this}getVisible(){return this.ji}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}setHighlight(t){return this.chart.us.ls.Cs(this,t),this.L.emit("highlight",this,t),this}getHighlight(){return this.chart.us.ls.gs(this)}setAnimationHighlight(t){return this.chart.us.ls.ks(this,t),this}getAnimationHighlight(){return this.chart.us.ls.Ts(this)}setMouseInteractions(t){return this.Hi=t,this.ts.forEach(((i,s)=>s.setMouseInteractions(t))),this.chart.us.xs(),this}getMouseInteractions(){return this.Hi}getIsUnderMouse(){for(const t of this.ts)if(t[0].Fs)return!0;return!1}setHighlightOnHover(t){return this.$i=t?ue.onHover:ue.noHighlighting,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.$i!==ue.noHighlighting}attach(t,i=!0,s=!1){return this.styleLegendEntry(t,s),Vi(t,[this],{toggleVisibilityOnClick:i,label:this.getName(),style:void 0}),this.Qi.push(t),t.onDispose((()=>{const i=this.Qi.indexOf(t);i>=0&&this.Qi.splice(i,1)})),this}Is(){return this._s}onMouseDragStart(t){return this.L.on("mouseDragStart",t)}onMouseDrag(t){return this.L.on("mouseDrag",t)}onMouseDragStop(t){return this.L.on("mouseDragStop",t)}onMouseWheel(t){return this.L.on("mouseWheel",t)}onTouchStart(t){return this.L.on("touchStart",t)}onTouchMove(t){return this.L.on("touchMove",t)}onTouchEnd(t){return this.L.on("touchEnd",t)}isDisposed(){return this.Xi}onDispose(t){return this.L.on("dispose",t)}offTouchStart(t){return this.L.off(t,"touchStart")}offTouchMove(t){return this.L.off(t,"touchMove")}offTouchEnd(t){return this.L.off(t,"touchEnd")}offDispose(t){return this.L.off(t,"dispose")}}class de extends ce{constructor(t,i,s,e,h,r,n,o){super(i,s,n,o),this.Ps=!0,this.Ds=t,this.axis=e,this.ft=h,this.Bs=r,this.Ls()}setClipping(t){return this.Ps=t,this.Ds.xs(),this}getClipping(){return this.Ps}}const fe=t=>{const i=t.length;if(i>0){let s=0,e=0;for(let h=0;h<i;h+=1)s+=t[h].x,e+=t[h].y;return n(s/i,e/i)}return n(0,0)},Ae=(...t)=>{const i=t.length,s=new Array(i).fill(!1),e=(e,h)=>{for(let r=0;r<i;r+=1){const i=t[r],n=i.Rs(e,h);n?i.Es(e,h,!0):s[r]&&s[r]&&i.Es(e,h,!1),s[r]=n}return!1};return{onTouchStart:e,onTouchMove:e,onTouchEnd:e}},ge=class{constructor(t,i=300){this.zs=!1,this.Vs=[],this.Os=300,this.Ns=t,this.Os=i}Rs(t,i){const s=Ot.performance.now();let e=!1;for(let t=0;t<this.Vs.length;t+=1)s-this.Vs[t].time>=this.Os?(this.Vs.splice(t,1),t-=1):this.Vs[t].state&&(e=!0);return this.zs?0===i.interactions.length&&(this.Vs.push({state:!1,time:s}),this.zs=!1):1===i.interactions.length&&"pointerdown"===i.type&&(this.Vs.push({state:!0,time:s}),e=!0,this.zs=!0),e}Es(t,i,s){if(s){const s=this.Vs.reduce(((t,i)=>(i.state?t.on+=1:t.off+=1,t)),{on:0,off:0});s.on>=2&&s.off>=1&&(this.Ns(t,i),this.Vs.length=0)}}},ye=class{constructor(t,i,s,e=1,h=100){this.Gs=t,this.Ws=i,this.Us=s,this.Ys=e,this.Hs=h}Rs(t,i){const s=i.interactions.length;if(s===this.Ys){if(void 0!==this.$s)return!0;if("pointerdown"===i.type&&(1===s||(t=>{const i=t.length;if(i>0){const s=fe(t);let e=0;for(let h=0;h<i;h+=1)e=Math.max(e,us(s,n(t[h].x,t[h].y)));return e}return Ki})(i.interactions)<=this.Hs))return this.$s=fe(i.interactions),!0}return!1}Es(t,i,s){const e=this.Xs;if(!s||i.forceTouchEnd||"pointerup"===i.type)this.Us&&this.Us(t,this.$s,e,i),this.$s=void 0,this.Xs=void 0;else{const s=fe(i.interactions);"pointerdown"===i.type?this.Gs&&this.Gs(t,this.$s,i):"pointermove"===i.type&&this.Ws&&this.Ws(t,this.$s,s,n(s.x-e.x,e.y-s.y),i),this.Xs=s}}},me=class{constructor(t,i,s){this.js=!1,this.Gs=t,this.Ws=i,this.Us=s}Rs(t,i){return this.js?2!==i.interactions.length&&(this.js=!1):2===i.interactions.length&&"pointerdown"===i.type&&(this.js=!0),this.js}Es(t,i,s){let e,h;if(s&&"pointerup"!==i.type){if("pointerdown"===i.type){const s=i.interactions;e=s[0],h=s[1],this.Gs(t,e,h,i)}else if("pointermove"===i.type){e=i.interactions[0],h=i.interactions[1];const s=this.Zs,r=this.Qs,o=n(e.x-s.x,s.y-e.y),a=n(h.x-r.x,r.y-h.y);this.Ws(t,e,h,o,a,i)}}else{const s=i.interactions;this.Us(t,s[0],s[1],i)}this.Zs=e,this.Qs=h}},pe=i({type:"linestyle",lineType:"solid",fillStyle:new U({color:S(255,255,255)}),thickness:1});class ve extends pe{constructor(t){super({...t,lineType:"solid"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}O(){const t=this.getThickness();return t<0?1:t}}const Se=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"solid"!==t.lineType);class be{constructor(t,i){this.Js=t,this.Ks=i,this.qs=i.rows*Je,this.te=i.columns*Ke}}var xe,Me;!function(t){t[t.ZoomIn=0]="ZoomIn",t[t.ZoomInX=1]="ZoomInX",t[t.ZoomInY=2]="ZoomInY",t[t.ZoomOut=3]="ZoomOut",t[t.ZoomOutX=4]="ZoomOutX",t[t.ZoomOutY=5]="ZoomOutY",t[t.ZoomToFit=6]="ZoomToFit",t[t.ToggleAnimations=7]="ToggleAnimations"}(xe||(xe={})),function(t){t[t.Circle=0]="Circle",t[t.Rectangle=1]="Rectangle",t[t.RoundedRectangle=2]="RoundedRectangle"}(Me||(Me={}));const _e={x:-43,y:0},we={x:-65,y:0},Ce={x:-86,y:0},ke={x:-107,y:-1},Te={x:-128,y:-3},Fe={x:-150,y:0},Ie={x:-171,y:0},Pe={x:-276,y:0},De={x:-298,y:0},Be={x:0,y:0},Le={x:-21,y:0};class Re extends be{constructor(t,i,s,e){super(t,s),this.ie=Ot.document.createElement("button"),this.se=Ot.document.createElement("div"),this.ee=Ot.document.createElement("label"),this.Ks=s,this.he=i,this.re=e}ne(t,i,s,e){this.oe(t,e),this.ae(),this.le(i),this.ue(),this.ee.textContent=s||"";const h=Ot.document.createElement("div");this.ce(h),this.ie.onclick=this.onClick.bind(this),h.appendChild(this.se),h.appendChild(this.ee),this.ie.appendChild(h)}ue(){this.ie.style.cursor="pointer"}ce(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignContent="center",t.style.flexDirection="column"}le(t){"string"==typeof t?(this.se.style.backgroundImage=`url(${t})`,this.se.style.backgroundSize="100%",this.se.style.backgroundRepeat="no-repeat",this.se.style.backgroundPosition="center",this.se.style.width="20px",this.se.style.height="20px"):this.applyStyleForSprite(t),this.se.style.margin="auto"}ae(){switch(this.he){case Me.RoundedRectangle:this.ie.style.borderRadius="10px";break;case Me.Rectangle:this.ie.style.borderRadius="0px";break;case Me.Circle:default:this.ie.style.borderRadius="31px"}}oe(t,i){this.ie.style.width=`${this.te.toString()}px`,this.ie.style.height=`${this.qs.toString()}px`,this.ie.style.backgroundColor=t,this.ie.style.opacity=i||qe,this.ie.style.alignItems="center",this.ie.style.border="2px solid #707070",this.ie.style.transition="background-color .8s ease"}applyStyleForSprite(t){this.se.style.backgroundImage=`url(${this.Js}/${th})`,this.se.style.backgroundPositionX=`${t.x}px`,this.se.style.backgroundPositionY=`${t.y}px`,this.se.style.backgroundSize="1600%",this.se.style.backgroundRepeat="no-repeat",this.se.style.width="20px",this.se.style.height="20px"}de(t){return t.appendChild(this.ie),t}fe(){return this.ie}}class Ee extends Re{constructor(t,i,s,e){super(t,i,s,e),this.Ae="",this.ge="",this.ye=!1,this.re=e}me(){this.pe(),this.onToggledStateAction()}ve(){this.Se(),this.onInitialStateAction()}Se(){this.be(this.Ae)}pe(){this.be(this.ge)}be(t){"string"==typeof t?this.se.style.background=t:(this.se.style.backgroundImage=`url(${this.Js}/${th})`,this.se.style.backgroundPositionX=`${t.x}px`,this.se.style.backgroundPositionY=`${t.y}px`)}onClick(){this.ye?this.ve():this.me(),this.ye=!this.ye}}class ze extends Re{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.re=i;const e=this.re.getTheme();this.ne(e.onScreenMenuBackgroundColor.toRGBAString(),_e)}onClick(){const t=this.re.xe();t&&this.re.zoom(t,{x:-1,y:-1})}}class Ve extends Re{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.re=i;const e=this.re.getTheme();this.ne(e.onScreenMenuBackgroundColor.toRGBAString(),ke)}onClick(){const t=this.re.xe();t&&this.re.zoom(t,{x:-1,y:0})}}class Oe extends Re{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.re=i;const e=this.re.getTheme();this.ne(e.onScreenMenuBackgroundColor.toRGBAString(),Fe)}onClick(){const t=this.re.xe();t&&this.re.zoom(t,{x:0,y:-1})}}class Ne extends Re{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.re=i;const e=this.re.getTheme();this.ne(e.onScreenMenuBackgroundColor.toRGBAString(),we)}onClick(){const t=this.re.xe();t&&this.re.zoom(t,{x:1,y:1})}}class Ge extends Re{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.re=i;const e=this.re.getTheme();this.ne(e.onScreenMenuBackgroundColor.toRGBAString(),Te)}onClick(){const t=this.re.xe();t&&this.re.zoom(t,{x:1,y:0})}}class We extends Re{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.re=i;const e=this.re.getTheme();this.ne(e.onScreenMenuBackgroundColor.toRGBAString(),Ie)}onClick(){const t=this.re.xe();t&&this.re.zoom(t,{x:0,y:1})}}class Ue extends Ee{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.re=i;const e=this.re.getTheme();this.Ae=Pe,this.ge=De,this.ne(e.onScreenMenuBackgroundColor.toRGBAString(),this.Ae)}onToggledStateAction(){this.re.setAnimationsEnabled(!1)}onInitialStateAction(){this.re.setAnimationsEnabled(!0)}}class Ye extends Re{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.re=i;const e=this.re.getTheme();this.ne(e.onScreenMenuBackgroundColor.toRGBAString(),Ce)}onClick(){this.re.forEachAxis((t=>{t.fit(!0)}))}}class He extends Re{constructor(t,i,s){super(t,i.shape||ih,i.dimensions||{rows:1,columns:1},s);const e=s.getTheme(),h=i.color||e.onScreenMenuBackgroundColor.toRGBAString(),r=i.icon||"",n=i.label||"",o=i.opacity||"";this.ne(h,r,n,o),this.Me=i.action}onClick(){this.Me(this.re)}}class $e extends Ee{constructor(t,i,s,e){super(t,i,{rows:1,columns:1},s),this.re=s,this._e=e,this.Ae=Le,this.ge=Be,this.ne(sh,this.Ae)}Se(){this.be(this.Ae),this.ie.style.backgroundColor=sh,this.ie.style.border="2px solid #707070",this.ie.style.margin="0px"}pe(){this.be(this.ge),this.ie.style.background="#FECC00 0% 0% no-repeat padding-box",this.ie.style.border="10px solid #BCBCBC12",this.ie.style.margin="1px"}onToggledStateAction(){var t;null===(t=this._e)||void 0===t||t.style.setProperty("display","block")}onInitialStateAction(){var t;null===(t=this._e)||void 0===t||t.style.setProperty("display","none")}}var Xe;!function(t){t.Move="move",t.ResizeColumn="col-resize",t.ResizeRow="row-resize",t.Horizontal="ew-resize",t.Vertical="ns-resize",t.NorthWest="nw-resize",t.NorthEast="ne-resize",t.Copy="copy",t.CrossHair="crosshair",t.Default="default",t.Help="help",t.Restricted="not-allowed",t.None="none",t.Point="pointer",t.Text="text",t.Wait="wait",t.ZoomIn="zoom-in",t.ZoomOut="zoom-out"}(Xe||(Xe={}));const je={LeftBottom:n(-1,-1),CenterBottom:n(0,-1),RightBottom:n(1,-1),LeftCenter:n(-1,0),Center:n(0,0),RightCenter:n(1,0),LeftTop:n(-1,1),CenterTop:n(0,1),RightTop:n(1,1)},Ze=new U({color:S(255,255,255,0)}),Qe=new ve({thickness:1,fillStyle:Ze}),Je=60,Ke=60,qe="1.0",th="osm/osm-sprite-transparent.png",ih=Me.Circle,sh="#363636";var eh;!function(t){t[t.TopRight=0]="TopRight",t[t.TopLeft=1]="TopLeft",t[t.BottomLeft=2]="BottomLeft",t[t.BottomRight=3]="BottomRight"}(eh||(eh={}));class hh extends de{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.ws="Band",this.we=0,this.Ce=0,this.ke=this.qi.bandFillStyle,this.Te=this.qi.bandStrokeStyle,this.Fe=!0,this.Ie=this.Ds.Be(this.ft).De(this.ke).Pe(this.Te).cs(this.getHighlight()),this.fs(this.Ie)}setValueStart(t){return this.we=t,this.L.emit("valueChange",this,this.we,this.Ce),this.Ds.xs(),this}getValueStart(){return this.we}setValueEnd(t){return this.Ce=t,this.L.emit("valueChange",this,this.we,this.Ce),this.Ds.xs(),this}getValueEnd(){return this.Ce}setFillStyle(t){this.ke="function"==typeof t?t(this.ke):t;const i=this.ke;return this.Ie.De(i),this.Ds.xs(),this}getFillStyle(){return this.ke}setStrokeStyle(t){this.Te="function"==typeof t?t(this.Te):t;const i=this.Te;return this.Ie.Pe(i),this.Ds.xs(),this}getStrokeStyle(){return this.Te}onValueChange(t){return this.L.on("valueChange",t)}offValueChange(t){return this.L.off(t,"valueChange")}Le(){return this.Ie.Re(this.Bs.toVec2(this.we,this.Bs.getHeight(this.ft).getInnerStart())).tt(this.Bs.toVec2(this.Ce-this.we,this.Bs.getHeight(this.ft).getInnerInterval())),re(this.Ps,[this.Ie],this.ft),this}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke,stroke:this.Te})}Ee(t,i){t.cs(i),this.Ds.xs()}setDefaultMouseInteractions(t){return this.Fe=t,this}Ls(){let t,i;const s=(s,e)=>{if(!this.Fe)return;const h=At(this.Ds.us.ze(e.x,e.y),this.Ds.us.ft,this.ft),r=this.Bs.getWidth(h),n=this.axis.ft.dt(this.we),o=this.axis.ft.dt(this.Ce),a=(this.axis.ft.dt(r)-n)/(o-n);t=!(a<.1||a>.9),!1===t&&(i=a<.5)},e=(s,e,h,r,n)=>{if(!this.Fe)return;const o=this.Bs.getWidth(r);t?(this.we=this.axis.ft.gi(this.we,o),this.Ce=this.axis.ft.gi(this.Ce,o)):i?this.we=this.axis.ft.gi(this.we,o):this.Ce=this.axis.ft.gi(this.Ce,o),di(n),this.L.emit("valueChange",this,this.we,this.Ce),this.Ds.xs()};this.onMouseMove(((i,e)=>{if(!this.Fe)return;s(0,n(e.clientX,e.clientY));const h=t?Xe.Point:this.Bs.getWidth({x:Xe.Horizontal,y:Xe.Vertical});this.Ve=this.chart.engine.setMouseStyle(h,this.Ve)})),this.onMouseLeave((()=>{this.Fe&&(this.chart.engine.restoreMouseStyle(this.Ve),this.Ve=void 0)})),this.onMouseDrag(((t,i,s,h,r)=>{this.Fe&&0===s&&e(0,0,0,r,i)}));const h=Ae(new ye(s,e));this.onTouchStart(h.onTouchStart),this.onTouchMove(h.onTouchMove),this.onTouchEnd(h.onTouchEnd)}}class rh extends de{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.ws="Constant Line",this.S=0,this.Te=this.qi.constantLineStrokeStyle,this.Oe=!0,this.Fe=!0,this.Ne=this.Ds.We(this.ft).Ge(this.Te).cs(this.getHighlight()),this.fs(this.Ne)}setValue(t){return this.S=t,this.L.emit("valueChange",this,this.S),this.Ds.xs(),this}getValue(){return this.S}setStrokeStyle(t){this.Te="function"==typeof t?t(this.Te):t;const i=this.Te;return this.Ne.Ge(i),this.Ds.xs(),this}getStrokeStyle(){return this.Te}setInteractionMoveByDragging(t){return this.Oe=t,this}getInteractionMoveByDragging(){return this.Oe}onValueChange(t){return this.L.on("valueChange",t)}offValueChange(t){return this.L.off(t,"valueChange")}Le(){return this.Ne.Ye(this.Bs.toVec2(this.S,this.Bs.getHeight(this.ft).getInnerStart())).Ue(this.Bs.toVec2(this.S,this.Bs.getHeight(this.ft).getInnerEnd())),re(this.Ps,[this.Ne],this.ft),this}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{stroke:this.Te})}Ee(t,i){t.cs(i),this.Ds.xs()}setDefaultMouseInteractions(t){return this.Fe=t,this}Ls(){const t=(t,i)=>{this.Fe&&this.Oe&&(this.S=this.axis.ft.gi(this.S,this.Bs.getWidth(i)),this.L.emit("valueChange",this,this.S),this.Ds.xs(),di(t))};this.onMouseMove((()=>{if(this.Fe&&this.Oe){const t=this.Bs.getWidth({x:Xe.Horizontal,y:Xe.Vertical});this.Ve=this.chart.engine.setMouseStyle(t,this.Ve)}})),this.onMouseLeave((()=>{this.Fe&&this.Oe&&(this.chart.engine.restoreMouseStyle(this.Ve),this.Ve=void 0)})),this.onMouseDrag(((i,s,e,h,r)=>{this.Fe&&this.Oe&&0===e&&t(s,r)}));const i=Ae(new ye(void 0,((i,s,e,h,r)=>t(r,h))));this.onTouchStart(i.onTouchStart),this.onTouchMove(i.onTouchMove),this.onTouchEnd(i.onTouchEnd)}}const nh={fitting:{start:(t,i,s,e)=>i>=t?s:e,end:(t,i,s,e)=>i>=t?e:s,allowIntervalLengthChange:!0},expansion:{start:(t,i,s,e)=>i>=t?s<t?s:t:e>t?e:t,end:(t,i,s,e)=>i>=t?e>i?e:i:s<i?s:i,allowIntervalLengthChange:!0},progressive:{start:(t,i,s,e)=>i>t?nh.progressive.end(t,i,s,e)+(t-i):e>t?e:t,end:(t,i,s,e)=>i>t?e>i?e:i:nh.progressive.start(t,i,s,e)+(i-t),allowIntervalLengthChange:!1},regressive:{start:(t,i,s,e)=>i>t?s<t?s:t:nh.regressive.end(t,i,s,e)+(t-i),end:(t,i,s,e)=>i>t?nh.regressive.start(t,i,s,e)+(i-t):s<i?s:i,allowIntervalLengthChange:!1}},oh={Empty:"Empty",Numeric:"Numeric",DateTime:"DateTime",Time:"Time"},ah=t=>void 0!==t.He,lh=t=>void 0!==t.$e,uh=(t,i)=>[t,i],ch=(t,i,s,e)=>{const h=[],r=Math.round(Math.abs((t-i)/s));for(let n=1;n<r;n+=1){const r=Math.round((t+s*n)*e)/e;r<i&&h.push(r)}return h},dh=(t,i,s,e,h)=>{Ht(t,0)&&(t=0),Ht(i,0)&&(i=0);const r=[];let n=void 0!==e?((t,i,s)=>t-(t-s)%i)(t,s,e):t;if(s<=0)throw new Error(`_getRegularGreatKeyValues unit less than or equal to 0, unit: ${s}`);for(;n<i&&!1===Ht(n,i);)r.push(n),n+=s,n=Math.round(n*h)/h;return r.push(n),r},fh=(t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i&&!1===Ht(r,i);)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h},Ah=(t,...i)=>{const s=i.length>0?i.length:t?1:0;return(e,h,r,n,o,a)=>{if(h>=s)return;const l=i[h]||1;let u=!1,c=!1,d=1;return t&&(u="ignore"in t?"first"===t.ignore||"both"===t.ignore:u,c="ignore"in t?"last"===t.ignore||"both"===t.ignore:c,d="offset"in t&&void 0!==t.offset?t.offset:d),((t,i,s,e,h)=>(s&&(t=t.filter(((t,i)=>i>0))),e&&(t=t.filter(((i,s)=>s<t.length-1))),t.filter(((t,s)=>(s+h)%i==0))))(e,l,u,c,d)}},gh=(...t)=>{const i=t.length>0?t.length:0;return(s,e,h,r,n,o)=>{if(e>=i)return;const a=t[e]||1;return s.filter(((t,i)=>i%a==0))}},yh=i({type:"empty-ticks",cursorFormatter:void 0});class mh extends yh{Xe(t){return{je:[],Ze:[],Qe:this.cursorFormatter?this.cursorFormatter:Xs.Numeric,Je:void 0,Ke:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}}const ph=t=>!(!t||"object"!=typeof t||!("type"in t)||"empty-ticks"!==t.type),vh=(t,i)=>{if(i.has(t))return i.get(t);const s=As(t.th.qe());if(Li(s))return s;const e=t.ih.gi(s.min,{x:-5,y:-5}),h=t.ih.gi(s.min,{x:5,y:5}),r=t.ih.gi(s.max,{x:-5,y:-5}),n=t.ih.gi(s.max,{x:5,y:5}),o={min:{x:Math.min(e.x,h.x,r.x,n.x),y:Math.min(e.y,h.y,r.y,n.y)},max:{x:Math.max(e.x,h.x,r.x,n.x),y:Math.max(e.y,h.y,r.y,n.y)}};return i.set(t,o),o},Sh=t=>{const i=new Map;if(!ph(t)){for(const s of t.je)i.set(s,new Map);for(const s of t.Ze)i.set(s,new Map)}return i},bh=(new mh).Xe({type:"linear"});class xh{constructor(t,i,e,h,r,n,o){this.L=new s,this.sh=bh,this.eh=oh.Empty,this.hh=new Map,this.rh=new Map,this.oh=nh.fitting,this.ah=!0,this.lh=K((()=>this.chart.us.xs()))(300,Q.linear),this.uh=!0,this.ji=!0,this.dh=!1,this.fh=qi,this.Ah=!1,this.gh=!1,this.yh=qi,this.mh=qi,this.ph=qi,this.Sh=!1,this.bh="",this.xh={},this.Mh=()=>{this._h.setMouseInteractions(!0).setMouseMoveEventHandler(((t,i)=>this.L.emit("mouseMoveTitle",this,i))).setMouseEnterEventHandler(((t,i)=>this.L.emit("mouseEnterTitle",this,i))).setMouseLeaveEventHandler(((t,i)=>this.L.emit("mouseLeaveTitle",this,i))).setMouseDownEventHandler(((t,i)=>this.L.emit("mouseDownTitle",this,i))).setMouseUpEventHandler(((t,i)=>this.L.emit("mouseUpTitle",this,i))).setMouseClickEventHandler(((t,i)=>this.L.emit("mouseClickTitle",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.L.emit("mouseDoubleClickTitle",this,i))).setMouseWheelEventHandler(((t,i)=>this.L.emit("mouseWheelTitle",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.L.emit("mouseDragStartTitle",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.L.emit("mouseDragTitle",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.L.emit("mouseDragStopTitle",this,i,s,e))).setTouchStartEventHandler(((t,i)=>this.L.emit("touchStartTitle",this,i))).setTouchMoveEventHandler(((t,i)=>this.L.emit("touchMoveTitle",this,i))).setTouchEndEventHandler(((t,i)=>this.L.emit("touchEndTitle",this,i))),this.Mh=void 0},this.wh=(t,i,s,e,h,r)=>{const n=[],o=[];for(const a of t){if(a<s||a>e){n.push(a);continue}const t=this.hh.get(i),l=(t?t.get(a):void 0)||this.Ch(a,i);l.kh=!1;const u=this.Th(l,h);r.set(l,u),n.push(a),o.push(l)}return{displayedKeyValues:n,createdTicks:o}},this.Fh=(t,i,s,e,h,r,n,o,a,l,u)=>{const c=[];for(let d=0;d<t.length;d+=1){const f=t[d],A=i[d];let g,y,m;if(this.Ih(f,s)){const i=vh(f,a);y=[t[d-1],t[d+1]],m=y.concat(l).concat(u).filter((t=>void 0!==t)).filter((i=>i.Ph!==s||!!t.find((t=>t===i)))).map((t=>es(i,vh(t,a))?t:void 0)),g=m.some((t=>void 0!==t))}else g=!1;if(g){let t=!0;const i=m.filter((t=>void 0!==t));if(t&&i.every((t=>ah(t.Ph)))&&(t=!1),t&&s.Dh&&s.Dh.Bh&&!1===s.Dh.Bh(A,e,h,r,n,o)&&(t=!1),!1===t)continue;return!0}c.push(f)}return c},this.formatValue=t=>this.sh.Qe(t,this.ft),this.Lh=!0,this.Rh=!0,this.chart=t,this.Eh=i,this.qi=h,this.zh=n,this.ft=e,this.Vh=o,"logarithmic"===o.type&&this.setAnimationZoom(Q.logarithmic(Ws(o.base))),this.Oh=n.numeric,this.Nh("Numeric"),this.Gh=e.getInnerStart(),this.Wh=e.getInnerEnd(),this.setAnimationsEnabled(r)}setUnits(t,i={}){return this.Uh=t,this.Yi=i,this.Yh(),this}getUnits(){return this.Uh}setDefaultInterval(t,i){return this.Hh=t,!1!==(null==i?void 0:i.applyImmediately)&&(this.Sh=!0,this.chart.us.xs()),this}getDefaultInterval(){return this.Hh}getTitle(){return this.bh}setTitle(t){return this.bh=t,this.Yh(),this}getTitleFillStyle(){return this._h.$h()}setIntervalRestrictions(t){return this.Xh=t,this.chart.us.xs(),this}getIntervalRestrictions(){return this.Xh}setTitleFillStyle(t){return this._h.De(t),this.chart.us.xs(),this}getTitleFont(){return this._h.jh()}setTitleFont(t){return this._h.Zh(t),this.chart.us.xs(),this}setTitleRotation(t){return this._h.Qh(t),this.chart.us.xs(),this}getTitleRotation(){return this._h.Jh()}setTitleEffect(t){return this.Kh.bs(t),this.chart.us.xs(),this}getTitleEffect(){return this.Kh.Ms()}Nh(t,i){if(this.hh.size>0&&this.qh(),"Empty"===t){const s=i||(t=>t);this.Oh=s(new mh),this.sh=this.Oh.Xe(this.Vh),this.eh=t}else if("Numeric"===t){"Numeric"!==this.eh&&(this.Oh=this.zh.numeric);const s=i||(t=>t);this.Oh=s(this.Oh),this.sh=this.Oh.Xe(this.Vh),this.eh=t}else if("DateTime"===t){"DateTime"!==this.eh&&(this.Oh=this.zh.datetime);const s=i||(t=>t);this.Oh=s(this.Oh),this.sh=this.Oh.Xe(this.Vh),this.eh=t}else if("Time"===t){"Time"!==this.eh&&(this.Oh=this.zh.time);const s=i||(t=>t);this.Oh=s(this.Oh),this.sh=this.Oh.Xe(this.Vh),this.eh=t}return this.rh.forEach((t=>Array.from(t.values()).forEach((t=>t.dispose())))),this.rh=Sh(this.sh),this.chart.us.xs(),this}tr(){return this.sh}ir(t){this.sh=t,this.rh.forEach((t=>Array.from(t.values()).forEach((t=>t.dispose())))),this.rh=Sh(this.sh),this.chart.us.xs()}setInterval(t){const{start:i,end:s,animate:e,stopAxisAfter:h}=t;return this.At(void 0!==i?i:this.Gh,void 0!==s?s:this.Wh,void 0!==e&&e,void 0===h||h,"userSetInterval"),this}At(t,i,s=!1,e=!0,h){let r={start:t,end:i};const n=!0,o=Math.abs(i-t);if(Math.abs(this.Wh-this.Gh),void 0!==this.sh.Je&&this.sh.Je>o){const s=(i+t)/2,e=this.sh.Je/2*(t>i?-1:1);r={start:s-e,end:s+e}}if(void 0!==this.sh.Ke&&this.sh.Ke<o){const s=(i+t)/2,e=this.sh.Ke/2*(t>i?-1:1);r={start:s-e,end:s+e}}const a=this.ft.ot(r.start,r.end,this.Gh,this.Wh,n);if(!1===a)return this;if(!0===a);else if(r=a,"zoomBandChart"===h)return this;let l;switch(h){case"userSetInterval":case"userFit":case"interactionSetInterval":case"interactionZoom":l=!0;break;case"zoomBandChart":case"synchronizedAxis":l=!1;break;default:return Oi(0,""),this}if(this.sr&&this.sr.finishAll(!1),this.lh&&(!0===s||s>0)){this.setStopped(!0);const t=!0===s?void 0:s,i=!this.sr||this.sr.isOver()?this.lh:this.sr.NextAnimation.bind(this);this.sr=i([[this.Gh,r.start],[this.Wh,r.end]],(([t,i])=>{this.er(t,i,n)}),t),this.sr.onAnimationEnd((()=>{this.sr=void 0,l&&(this.ph=Ot.performance.now())})),this.sr.onAnimationEnd((()=>this.setStopped(e)))}else this.er(r.start,r.end,n),this.setStopped(e),l&&(this.ph=Ot.performance.now());return this}getInterval(){return{start:this.Gh,end:this.Wh}}setStopped(t){return t===this.dh||(t&&(this.sr&&this.sr.finishAll(!1),this.sr=void 0),this.dh=t,this.L.emit("stoppedStateChanged",this,this.dh),this.fh=Ot.performance.now(),this.chart.us.xs()),this}getStopped(){return this.dh}onStoppedStateChanged(t){return this.L.on("stoppedStateChanged",t)}offStoppedStateChanged(t){return this.L.off(t,"stoppedStateChanged")}fit(t,i){const s=this.hr(),e=this.Hh||kh,h="function"==typeof e?e({curStart:this.Gh,curEnd:this.Wh,dataMin:null==s?void 0:s.min,dataMax:null==s?void 0:s.max}):e;return this.At(void 0!==h.start?h.start:this.Gh,void 0!==h.end?h.end:this.Wh,void 0!==h.animate?h.animate:void 0===t||t,void 0!==h.stopAxisAfter?h.stopAxisAfter:void 0===i||i,"userFit"),this}setScrollStrategy(t){return this.oh=t,this.chart.us.xs(),this}getScrollStrategy(){return this.oh}setAnimationScroll(t){return this.ah=Boolean(t),this.chart.us.xs(),this}setAnimationZoom(t,i=300){return this.sr&&(this.sr.finishAll(!1),this.sr=void 0),this.lh=t?K((()=>this.chart.us.xs()))(i,t):void 0,this}setAnimationsEnabled(t){return this.uh=t,t?(this.setAnimationScroll(!0),this.setAnimationZoom(Q.ease,void 0)):(this.setAnimationScroll(void 0),this.setAnimationZoom(void 0)),this}getAnimationsEnabled(){return this.uh}setVisible(t){const i=this.ji!==t;return this.ji=t,this._h.setVisible(t),this.rr((i=>{i.th.setVisible(t)})),i&&this.L.emit("visibleStateChanged",this,this.ji),this}getVisible(){return this.ji}onIntervalChange(t){return this.L.on("scaleChange",t)}offIntervalChange(t){return this.L.off(t,"scaleChange")}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}nr(t,i){this.Mh&&this.Mh();const s=new Map;if(ph(this.sh)||!this.ji)return this.qh(),s;i=i||new Map;const e=this.ar(),h=e.min,r=e.max,n=r-h,o=t.physicalAxisSize;this.xh.physicalAxisSize=o;const a=_h(this.sh,h,r,this.Gh,this.Wh,o),l=[];if(this.lr(),l.push(...this.ur(this.sh,h,r,a,i,t,s)),this.cr(this.sh,h,r,a,i,t,l,s),this.dr(),a)for(const[t,i]of this.rh){const s=a.get(t);if(void 0!==s)for(const[t,e]of i)s.includes(t)||(null==e||e.dispose(),i.delete(t))}return this.xh.min=h,this.xh.max=r,this.xh.scaleInterval=n,this.xh.physicalAxisSize=o,s}Ar(t){const i=t.Ph.gr;t.th.yr(i(t.S,this.ft)).Es()}mr(t,i){const s=i.pr;t.th.De(s.getLabelFillStyle()).Zh(s.getLabelFont()).Qh(s.getLabelRotation())}Ch(t,i){const s=this.rh.get(i);let e=s.get(t);e?(s.delete(t),e.Ph=i,e.ps(!0)):e=this.vr(t,i);const h=this.hh.get(i)||new Map;return h.set(t,e),this.hh.set(i,h),this.mr(e,i),e}Th(t,i){const s=this.Sr(t,i);return this.Ar(t),s}ur(t,i,s,e,h,r,n){const o=[];for(const a of t.je){const t=e.get(a);for(const e of t){if(e<i||e>s)continue;const t=this.hh.get(a),l=(t?t.get(e):void 0)||this.Ch(e,a),u=this.Th(l,r),c=vh(l,h);o.find((t=>es(c,vh(t,h))))&&l.th.setVisible(!1),l.kh=!1,n.set(l,u),o.push(l)}}return o}cr(t,i,s,e,h,r,n,o){let a,l=[];for(const u of t.Ze){const t=e.get(u);if(!t)break;let c;if(void 0===a)c=[{start:i,end:s,keyValues:t}];else{c=[];for(let i=0;i<a.length-1;i+=1){const s=a[i],e=a[i+1],h={start:s,end:e,keyValues:[]};for(const i of t)i>=s&&i<e&&h.keyValues.push(i);c.push(h)}}if(a=t,lh(u))continue;let d=0,f=-1,A=[],g=[];for(let t=0;t<c.length;t+=1){const e=this.wh(c[t].keyValues,u,i,s,r,o);A=A.concat(e.displayedKeyValues),g=g.concat(e.createdTicks)}let y=g,m=!0;if(u.pr.getLabelFillStyle()!==O){let t=[];for(;++f<c.length;){const e=c[f],r=e.start,o=e.end;let a=e.keyValues;if(d>0){if(void 0===u.Dh){m=!1;break}const t=u.Dh.br;if(a=t(a,d-1,r,o,i,s),void 0===a)break}const y=this.Fh(g.filter((t=>a.some((i=>Ht(t.S,i))))),A,u,d,r,o,i,s,h,n,l);!0!==y?t=t.concat(y):(d+=1,f=-1,t=[])}y=t,g.forEach((i=>{t.find((t=>t===i))||this.Mr(i)}))}if(l=y,!m)break}}Mr(t){const i=this.hh.get(t.Ph);null==i||i.delete(t.S);const s=this.rh.get(t.Ph);s&&s.has(t.S)?t.dispose():s&&(t.ps(!1),s.set(t.S,t))}rr(t){for(const i of this.hh.values())for(const s of i.values())t(s)}_r(t,i){for(const s of this.hh.values())for(const e of s.values())i=t(i,e);return i}qh(){this.hh.forEach(((t,i)=>{t.forEach((t=>this.Mr(t)))})),this.hh.clear()}lr(){for(const t of this.hh.values())for(const i of t.values())i.kh=!0}dr(){for(const t of this.hh.values())for(const[i,s]of t.entries())s.kh&&(s.dispose(),t.delete(i))}ar(){const t=this.ft.getInnerStart()<this.ft.getInnerEnd()?this.ft.getInnerStart():this.ft.getInnerEnd(),i=this.ft.getInnerEnd()>this.ft.getInnerStart()?this.ft.getInnerEnd():this.ft.getInnerStart();return c(t,i)}Ih(t,i){return!(t.kh||0===t.th.wr().length||ah(i)&&!0!==i.Cr)}kr(t,i){return ph(this.sh)||(this.sh.je.forEach((s=>{i=t(i,s.pr)})),this.sh.Ze.forEach((s=>{(t=>void 0!==t.gr)(s)&&(i=t(i,s.pr))}))),i}hr(){let t=this.Eh.Tr();const i=this.Eh.Fr();let s;if(void 0!==t&&Gt(t)&&void 0!==i&&Gt(i)&&("logarithmic"===this.Vh.type&&(0===t&&(t=Math.min(1,i)),Math.sign(t)!==Math.sign(i)&&(t=Math.min(1,i-.1))),s?(s.min=Math.min(s.min,t),s.max=Math.max(s.max,i)):s=c(t,i)),s&&Gt(s.min)&&Gt(s.max))return Ht(s.min,s.max)?{min:s.min-1,max:s.max+1}:s}Ir(){if(!this.Lh)return 0;let t=0;const i=this.Eh.Pr();return i&&(t=Math.max(t,i)),t}setAutoRegionsEnabled(t){return this.Lh=t,this.chart.us.xs(),this}Dr(){var t;const i=this.Ah;let s=!1;if(this.Sh&&this.Hh){const t=this.hr(),i="function"==typeof this.Hh?this.Hh({curStart:this.Gh,curEnd:this.Wh,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max}):this.Hh;this.setInterval(i),this.Sh=!1}if(this.oh&&!this.dh){const i=this.hr();if(i){const e=this.Gh,h=this.Wh;let r=this.oh.start(e,h,i.min,i.max),n=this.oh.end(e,h,i.min,i.max);const o=null===(t=this.oh.allowIntervalLengthChange)||void 0===t||t,a=Ch(this.Xh,i,{start:r,end:n},{start:e,end:h},o);r=a.start,n=a.end;const l=!1===Ht(e,r),u=!1===Ht(h,n);if(r=l?r:e,n=u?n:h,l||u){let t=!1;if(this.ah&&!this.Rh)if(this.ah){t=!0;const i=l?this.Br(e,r):e,a=u?this.Br(h,n):h;if(!0===this.er(i,a,o)&&(l&&!1===Ht(i,r)||u&&!1===Ht(a,n))){this.chart.us.xs(!0),s=!0;let t=Math.abs(n-r)/Math.abs(i-a);t<1&&(t=1/t),this.gh=t>=1.4}}else t=!1;t||this.er(r,n,o),this.Rh=!1}}}return s?(this.Ah!==s&&(this.Ah=s,this.yh=Ot.performance.now()),this.Lr&&(clearTimeout(this.Lr),this.Lr=void 0)):!0===i&&void 0===this.Lr&&(this.gh=!1,this.Lr=setTimeout((()=>{!1!==this.Ah&&(this.Ah=!1,this.yh=Ot.performance.now()),this.Lr=void 0,this.chart.us.xs()}),200)),this}er(t,i,s){let e={start:t,end:i},h=!0;if(this.Xh){const t=this.hr();e=Ch(this.Xh,t,e,{start:this.Gh,end:this.Wh},s)}const r=Math.abs(i-t),n=Math.abs(this.Wh-this.Gh);if(void 0!==this.sh.Je&&this.sh.Je>r){const r=(i+t)/2,o=(s?this.sh.Je/2:n/2)*(t>i?-1:1);e={start:r-o,end:r+o},h=!1}if(void 0!==this.sh.Ke&&this.sh.Ke<r){const r=(i+t)/2,o=(s?this.sh.Ke/2:n/2)*(t>i?-1:1);e={start:r-o,end:r+o},h=!1}let o=this.ft.ot(e.start,e.end,this.Gh,this.Wh,s);if(!1===o)return!1;!0!==o&&(e=o);const a=this.Ir(),l=this.Rr(Math.min(e.start,e.end),Math.max(e.start,e.end),a);return o=this.ft.ot(e.end>e.start?l.min:l.max,e.end>e.start?l.max:l.min,this.Gh,this.Wh,!1),!!o&&(!0===o?this.ft.K(e.end>e.start?l.min:l.max,e.end>e.start?l.max:l.min):this.ft.K(e.start,e.end),this.Gh=e.start,this.Wh=e.end,this.L.emit("scaleChange",this,e.start,e.end),this.mh=Ot.performance.now(),this.chart.us.xs(),h)}Er(){return this.Ah}zr(){return void 0!==this.sr}Yh(){var t;const i=!1!==(null===(t=this.Yi)||void 0===t?void 0:t.displayOnAxis);this._h.yr(this.Uh&&i&&this.bh?`${this.bh} (${this.Uh})`:this.bh),this.chart.us.xs()}onTitleMouseEnter(t){return this.L.on("mouseEnterTitle",t)}offTitleMouseEnter(t){return this.L.off(t,"mouseEnterTitle")}onTitleMouseMove(t){return this.L.on("mouseMoveTitle",t)}offTitleMouseMove(t){return this.L.off(t,"mouseMoveTitle")}onTitleMouseLeave(t){return this.L.on("mouseLeaveTitle",t)}offTitleMouseLeave(t){return this.L.off(t,"mouseLeaveTitle")}onTitleMouseDown(t){return this.L.on("mouseDownTitle",t)}offTitleMouseDown(t){return this.L.off(t,"mouseDownTitle")}onTitleMouseUp(t){return this.L.on("mouseUpTitle",t)}offTitleMouseUp(t){return this.L.off(t,"mouseUpTitle")}onTitleMouseClick(t){return this.L.on("mouseClickTitle",t)}offTitleMouseClick(t){return this.L.off(t,"mouseClickTitle")}onTitleMouseDoubleClick(t){return this.L.on("mouseDoubleClickTitle",t)}offTitleMouseDoubleClick(t){return this.L.off(t,"mouseDoubleClickTitle")}onTitleMouseDragStart(t){return this.L.on("mouseDragStartTitle",t)}offTitleMouseDragStart(t){return this.L.off(t,"mouseDragStartTitle")}onTitleMouseDrag(t){return this.L.on("mouseDragTitle",t)}offTitleMouseDrag(t){return this.L.off(t,"mouseDragTitle")}onTitleMouseDragStop(t){return this.L.on("mouseDragStopTitle",t)}offTitleMouseDragStop(t){return this.L.off(t,"mouseDragStopTitle")}onTitleMouseWheel(t){return this.L.on("mouseWheelTitle",t)}offTitleMouseWheel(t){return this.L.off(t,"mouseWheelTitle")}onTitleTouchStart(t){return this.L.on("touchStartTitle",t)}offTitleMouseTouchStart(t){return this.L.off(t,"touchStartTitle")}onTitleTouchMove(t){return this.L.on("touchMoveTitle",t)}offTitleTouchMove(t){return this.L.off(t,"touchMoveTitle")}onTitleTouchEnd(t){return this.L.on("touchEndTitle",t)}offTitleTouchEnd(t){return this.L.off(t,"touchEndTitle")}}class Mh{constructor(t,i,s,e,h=s.Nr(e).Or(Hi).Vr(Hi).setMouseInteractions(!1)){this.kh=!1,this.Xi=!1,this.ts=[],this.Ph=t,this.S=i,this.Gr=s,this.ih=e,this.th=h,this.ts.push(h)}ps(t){this.ts.forEach((i=>i.setVisible(t)))}dispose(){return this.Xi||(this.Xi=!0,this.ts.forEach((t=>t.dispose()))),this}}const _h=(t,i,s,e,h,r)=>{const n=new Map;for(const r of t.je){let t=r.Wr(i,s,e,h);t=wh(t),n.set(r,t)}let o;for(const e of t.Ze){let t;if(void 0===o)t=e.Wr(i,s,i,s);else{let h=[];const n=o.filter((t=>i<=t&&t<=s)).length;if(n>0){const t=r/(n-1);if(void 0!==e.Ur&&e.Ur>t)break}for(let t=0;t<o.length-1;t+=1){const r=e.Wr(o[t],o[t+1],i,s);h=h.concat(r)}t=h}t=wh(t),n.set(e,t),o=t}return n},wh=t=>(t=(t=>{const i={},s=[],e=t.length;let h=0;for(let r=0;r<e;r+=1){const e=t[r];1!==i[e]&&(i[e]=1,s[h]=e,h+=1)}return s})(t)).sort(((t,i)=>t-i)),Ch=(t,i,s,e,h)=>{const r="function"==typeof t?t({curStart:e.start,curEnd:e.end,dataMin:null==i?void 0:i.min,dataMax:null==i?void 0:i.max}):t;if(!r)return s;const n={start:s.start,end:s.end};let o=Math.abs(s.end-s.start);if(void 0!==r.intervalMin&&o<r.intervalMin){const t=(n.start+n.end)/2;n.start=t+.5*Math.sign(s.start-t)*r.intervalMin,n.end=t+.5*Math.sign(s.end-t)*r.intervalMin}if(o=Math.abs(s.end-s.start),void 0!==r.intervalMax&&o>r.intervalMax){const t=(n.start+n.end)/2;n.start=t+.5*Math.sign(s.start-t)*r.intervalMax,n.end=t+.5*Math.sign(s.end-t)*r.intervalMax}return o=Math.abs(s.end-s.start),void 0!==r.startMin&&(n.start=Math.max(n.start,r.startMin),h||Ht(Math.abs(n.start-n.end),o)||(n.end=n.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==r.startMax&&(n.start=Math.min(n.start,r.startMax),h||Ht(Math.abs(n.start-n.end),o)||(n.end=n.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==r.endMin&&(n.end=Math.max(n.end,r.endMin),h||Ht(Math.abs(n.start-n.end),o)||(n.start=n.end+Math.sign(s.start-s.end)*o)),o=Math.abs(s.end-s.start),void 0!==r.endMax&&(n.end=Math.min(n.end,r.endMax),h||Ht(Math.abs(n.start-n.end),o)||(n.start=n.end+Math.sign(s.start-s.end)*o)),n},kh=t=>{if(void 0===t.dataMin||void 0===t.dataMax)return{stopAxisAfter:!1};const i=t.curEnd>=t.curStart;return{start:i?t.dataMin:t.dataMax,end:i?t.dataMax:t.dataMin,stopAxisAfter:!1}},Th=i({type:"font",size:14,family:"Arial",weight:"normal",style:"normal",variant:!1});class Fh extends Th{constructor(t){super(t)}setSize(t){return this.set("size",t)}setFamily(t){return this.set("family",t)}setWeight(t){return this.set("weight",t)}setStyle(t){return this.set("style",t)}setVariant(t){return this.set("variant",t)}getSize(){return this.get("size")}getFamily(){return this.get("family")}getWeight(){return this.get("weight")}getStyle(){return this.get("style")}getVariant(){return this.get("variant")}}const Ih=t=>!(!t||"object"!=typeof t||!("type"in t)||"font"!==t.type),Ph=new Fh,Dh=new class{getFillStyle(){return O}},Bh=i({type:"triangulated-points-3d",shape:"sphere",size:10,fillStyle:new U,wireframeStyle:at});class Lh extends Bh{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setWireframeStyle(t){return"function"==typeof t?this.set("wireframeStyle",t(this.get("wireframeStyle"))):this.set("wireframeStyle",t)}getWireframeStyle(){return this.get("wireframeStyle")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}}const Rh=t=>!(!t||"object"!=typeof t||!("type"in t)||"triangulated-points-3d"!==t.type),Eh=i({type:"pixelated-points-3d",size:5,fillStyle:new U});class zh extends Eh{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}}const Vh=t=>!(!t||"object"!=typeof t||!("type"in t)||"pixelated-points-3d"!==t.type),Oh={Triangulated:Lh,Pixelated:zh};class Nh{constructor(t){this.Yr=new Map,this.us=t}os(t,i,s){const e=s.animationEnabled;this.Yr.set(t,{applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:e,curAnimatedHighlightValue:0});const h=t.onDispose((()=>{this.Yr.delete(t),t.offDispose(h)}))}Hr(t,i){let s=i.animationEnabled;const e=[],h=t.onDispose((()=>{e.forEach((t=>{this.Yr.delete(t)})),t.offDispose(h)}));return{$r:(t,i)=>{const h={applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:s,curAnimatedHighlightValue:0};e.push(t),this.Yr.set(t,h)},Xr:()=>{e.forEach((t=>{this.Yr.delete(t)})),e.length=0},jr:t=>{s=t,e.forEach((t=>{this.ks(t,s)}))},Zr:()=>s}}Cs(t,i){const s=this.Yr.get(t);s&&(s.curUnanimatedHighlightValue=zi(i),this.us.xs())}gs(t,i=!1){const s=this.Yr.get(t);return s?i?s.curAnimatedHighlightValue:s.curUnanimatedHighlightValue:0}ks(t,i){const s=this.Yr.get(t);s&&(s.animationEnabled=i)}Ts(t){const i=this.Yr.get(t);return!!i&&i.animationEnabled}Es(t){let i=!1;this.Yr.forEach(((s,e)=>{let h;if(s.animationEnabled){const e=1e3;if(s.curUnanimatedHighlightValue>0){const r=s.curAnimationPositionMillis/e;h=s.curUnanimatedHighlightValue*Math.abs(Math.sin(r*Math.PI/2+.5));const n=0===s.curAnimatedHighlightValue?1:t;s.curAnimationPositionMillis+=n,i=!0}else s.curAnimatedHighlightValue>0&&0===s.curUnanimatedHighlightValue?(h=Math.max(s.curAnimatedHighlightValue-t/e,0),i=i||h>0):h=0,s.curAnimationPositionMillis=0}else h=s.curUnanimatedHighlightValue;h!==s.curAnimatedHighlightValue&&(s.applyHighlight(h),s.curAnimatedHighlightValue=h)})),i&&this.us.xs(!0)}}const Gh=new Map,Wh=(t,i)=>{const s=t.getSize(),e=t.getFamily(),h=t.getWeight(),r=t.getStyle(),n=t.getVariant(),o=`${r} ${n?"small-caps":"normal"} ${h} ${s}px ${e}`,a=`${o} ${i.toFixed(2)}`;let l=Gh.get(a);return l||(l=((t,i,s,e)=>({font:t,properties:i,dpr:s,id:e}))(o,{type:"font",size:s,family:e,style:r,variant:n,weight:h},i,a),Gh.set(a,l)),l};var Uh,Yh;!function(t){t[t.click=0]="click",t[t.dbclick=1]="dbclick",t[t.mouseDown=2]="mouseDown",t[t.mouseUp=3]="mouseUp",t[t.contextmenu=4]="contextmenu",t[t.wheel=5]="wheel"}(Uh||(Uh={})),function(t){t[t.touchStart=0]="touchStart",t[t.touchMove=1]="touchMove",t[t.touchEnd=2]="touchEnd"}(Yh||(Yh={}));const Hh=t=>({container:t.Qr,setMouseStyle:(i,s)=>t.Jr(i,s),restoreMouseStyle:i=>t.Kr(i),captureFrame:(i,s,e)=>t.qr(i,s,e),renderFrame:(i,s,e=!1)=>t.tn(i,s,e),layout:()=>{t.sn(),t.en(),t.rn.hn(),t.xs()},setBackgroundFillStyle(i){return t.setBackgroundFillStyle(i),this},setBackgroundStrokeStyle(i){return t.setBackgroundStrokeStyle(i),this},getBackgroundFillStyle:()=>t.getBackgroundFillStyle(),getBackgroundStrokeStyle:()=>t.getBackgroundStrokeStyle(),addCustomIcon:(i,s)=>t.nn(i,s),onRenderFrame:i=>t.an(i),offRenderFrame:i=>t.ln(i)}),$h=[];let Xh;const jh=()=>{if(void 0!==Xh){const t=Ot.getComputedStyle(Ot.document.body),i=Number(t.getPropertyValue("margin-top").replace("px",""))+Number(t.getPropertyValue("margin-bottom").replace("px",""));Xh.style.height=Ot.innerHeight-i+"px",(()=>{for(let t=0;t<$h.length;t+=1)$h[t]()})()}},Zh=new U({color:S(255,255,255)}),Qh={font:Wh(Ph,0),fillStyle:Zh,lineStyle:new ve({fillStyle:Zh,thickness:1}),pointStyle3D:new Oh.Triangulated};class Jh{constructor(t,i,e){this.L=new s,this.ft=dt.d2({scaleXYConstructor:Ks}),this.un=new Map,this.cn=K((()=>this.xs()),60),this.dn=n(0,0),this.fn=!1,this.An=Yt,this.gn=()=>{},this.yn=[],this.mn=-1,this.pn=[],this.vn=!0,this.Xi=!1,this.Sn=!1,this.en=()=>{const{bottom:t,left:i}=this.Qr.getBoundingClientRect();return this.dn=n(Math.floor(i),Math.floor(t)),this},this.bn=t=>{if(this.xn){const i=this.xn.entity.Mn;i&&i(this.xn.entity,t,this.xn.button,this.xn.startLocation,this.xn.collectionMember,this.xn.info),this.xn=void 0}},this.sn=()=>{this._n&&this._n()},this.Jr=(t,i)=>{if(!i){this.Qr.style.cursor=t;const i=this.mn;return this.mn+=1,this.pn.push([i,t]),i}return this.Kr(i),this.Jr(t)},this.Kr=t=>{const i=t?this.pn.findIndex((i=>i[0]===t)):-1;i>=0?(this.pn.splice(i,1),this.pn.length>0?this.Qr.style.cursor=this.pn[this.pn.length-1][1]:this.Qr.style.cursor="default"):(this.pn.push([0,"default"]),this.Qr.style.cursor="default")},this.wn=t=>(this.Cn.M(t),this),this.kn=()=>this.Cn._(),this.Tn=()=>{this.An&&this.An(1e3/60),this.Fn(),this.In(),this.gn&&this.gn()},this.Pn=t=>(this.un.set(t.Dn(),t),this.un=new Map([...this.un.entries()].sort(((t,i)=>t[0]-i[0]))),t),this.Bn=t=>(this.un.delete(t),this),this.Z=()=>(this.Cn.o=!1,this),this.J=()=>(this.Cn.o=!0,this),this.Ln=t=>{if(!this.vn)return;const i=this.Rn,s=i&&i.clientX===t.clientX&&i.clientY===t.clientY,e=this.Ss({x:t.clientX,y:t.clientY});if(this.En&&((null==e?void 0:e.entity)!==this.En.entity||e.collectionMember!==this.En.collectionMember)&&!this.xn){this.En.entity.Fs=!1;const i=this.En.entity.zn;i&&i(this.En.entity,t,this.En.collectionMember)}if(e&&e.entity.getMouseInteractions()&&!this.xn)if(e.entity.Fs){if(!s){const i=e.entity.Vn;i&&i(e.entity,t,e.collectionMember,e.info)}}else{e.entity.Fs=!0;const i=e.entity.On;i&&i(e.entity,t,e.collectionMember,e.info)}if(this.xn){const s=this.xn.entity.Nn,e=i?n(t.clientX-i.clientX,i.clientY-t.clientY):{x:0,y:0};!s||0===e.x&&0===e.y||s(this.xn.entity,t,this.xn.button,this.xn.startLocation,e,this.xn.collectionMember,this.xn.info)}this.Gn=t,this.Rn=t,this.En=e?{...e,event:t}:void 0},this.Wn=t=>{if(this.vn=!1,this.Gn=t,this.En&&!this.Un&&!this.xn){this.En.entity.Fs=!1;const i=this.En.entity.zn;i&&i(this.En.entity,t,this.En.collectionMember),this.En=void 0}},this.Yn=t=>{if(this.vn=!0,this.Gn=t,this.xn&&t.buttons<=0){const i=this.xn.entity.Mn;i&&i(this.xn.entity,t,this.xn.button,this.xn.startLocation,this.xn.collectionMember,this.xn.info),this.xn=void 0}if(this.Un&&t.buttons<=0){const i=this.Un.entity.Hn;i&&i(this.Un.entity,t,this.Un.collectionMember,this.Un.info),this.Un=void 0}},this.$n=()=>this.Gn&&this.Xn?this.Gn.timeStamp>this.Xn.timeStamp?this.Gn:this.Xn:this.Gn||this.Xn,this.rn=t,this.qi=i.theme,this.jn=e.jn,this.Zn=e.Zn,this.Qn=e.Qn,this.Jn={Kn:i&&i.overrideInteractionMouseButtons?i.overrideInteractionMouseButtons:void 0,Js:i&&void 0!==i.resourcesBaseUrl&&null!==i.resourcesBaseUrl?i.resourcesBaseUrl:`${Ot.location.origin}/resources`,qn:!i||!("warnings"in i)||"boolean"!=typeof i.warnings||i.warnings,io:(()=>{const t=null==i?void 0:i.pickingPrecision;if("string"==typeof t){const i=t.toLowerCase();if("best"===i)return 1;if("high"===i)return.5;if("low"===i)return 1/8}return 1/4})(),so:void 0===(null==i?void 0:i.interactable)||i.interactable,eo:void 0===i.textPixelSnappingEnabled||i.textPixelSnappingEnabled};const h=i?i.container:void 0;if(h){if("string"==typeof h){const t=Ot.document.getElementById(h);if(!t)throw new Error(`Container "${h}" doesn't exist.`);this.Qr=t}else this.Qr=h;Ot.addEventListener("resize",this.sn),this.yn.push((()=>{Ot.removeEventListener("resize",this.sn)}))}else{if(void 0===Xh){const t=Ot.document.createElement("div");t.id="lcjs-auto-flexbox",t.style.position="relative",t.style.width="100%",t.style.display="flex",t.style.flexDirection="column",Ot.document.body.appendChild(t),Xh=t,Ot.addEventListener("resize",jh)}let t=1;for(;null!==Ot.document.getElementById(`chart-${t}`);)t+=1;this.Qr=Ot.document.createElement("div"),this.Qr.id=`chart-${t}`,this.Qr.style.flex="1",this.Qr.style.height="100%",Xh.appendChild(this.Qr),jh(),$h.push(this.sn),this.yn.push((()=>{Xh&&Xh.removeChild(this.Qr),$h.includes(this.sn)&&$h.splice($h.indexOf(this.sn),1),0===$h.length&&Xh&&(Ot.document.body.removeChild(Xh),Xh=void 0,Ot.removeEventListener("resize",jh))}))}if(Ot.ResizeObserver){const t=t=>{for(const i of t)i.target===this.Qr&&this.sn()};this.ho=new Ot.ResizeObserver(t.bind(this)),this.ho.observe(this.Qr)}""===this.Qr.style.position&&(this.Qr.style.position="relative"),this.Qr.style.boxSizing="content-box",this.Qr.addEventListener("fullscreenchange",this.sn),this.Qr.addEventListener("webkitfullscreenchange",this.sn);const r=i?i.maxFps:void 0;this.ro=r?-1===r?-1:0!==r?1e3/r:0:0;const o=new Map;let a=!1;const l=(t,i)=>s=>{const e=function(t){return{x:t.clientX,y:t.clientY}}(s);switch(s.type){case"pointerover":case"pointerenter":case"pointermove":case"pointerdown":o.set(s.pointerId,e);break;default:o.delete(s.pointerId),a=!1}switch(s.interactions=Array.from(o.values()),s.pointerType){case"pen":case"mouse":default:t&&t(s);break;case"touch":i&&i(s)}s.defaultPrevented&&(a=!0)};this.Qr.onwheel=this.no(Uh.wheel),this.Qr.oncontextmenu=this.no(Uh.contextmenu),this.Qr.onclick=this.no(Uh.click),this.Qr.ondblclick=this.no(Uh.dbclick),this.Qr.onlostpointercapture=()=>{a=!1},this.Qr.ontouchmove=t=>{a&&t.preventDefault()},this.Qr.onpointerover=l(),this.Qr.onpointerenter=l(this.Yn),this.Qr.onpointerdown=l(this.no(Uh.mouseDown),this.oo(Yh.touchStart)),this.Qr.onpointermove=l(this.Ln,this.oo(Yh.touchMove)),this.Qr.onpointerup=l(this.no(Uh.mouseUp),this.oo(Yh.touchEnd)),this.Qr.onpointercancel=l(),this.Qr.onpointerout=l(),this.Qr.onpointerleave=l(this.Wn,this.oo(Yh.touchEnd)),Ot.addEventListener("dragstart",this.bn),Ot.addEventListener("scroll",this.en,{passive:!0}),this.Cn=f(new p({r:0,g:0,b:0,a:0})),this.ls=new Nh(this)}ao(t,i){var s,e,h,r;(null===(s=this.En)||void 0===s?void 0:s.entity)===t.entity&&this.En.collectionMember===t.collectionMember&&(this.En={...i,info:this.En.info,event:this.En.event}),(null===(e=this.lo)||void 0===e?void 0:e.entity)===t.entity&&this.lo.collectionMember===t.collectionMember&&(this.lo={...i,info:this.lo.info}),(null===(h=this.Un)||void 0===h?void 0:h.entity)===t.entity&&this.Un.collectionMember===t.collectionMember&&(this.Un={...i,info:this.Un.info,event:this.Un.event}),(null===(r=this.xn)||void 0===r?void 0:r.entity)===t.entity&&this.xn.collectionMember===t.collectionMember&&(this.xn={...i,info:this.xn.info,button:this.xn.button,startLocation:this.xn.startLocation})}uo(){this.Sn=!0,this.An=void 0,this.gn=void 0}an(t){return this.L.on("render",t)}ln(t){return this.L.off(t)}co(){return this.do}fo(){return this.Ao}setBackgroundFillStyle(t){return this.yo.De(t),this}getBackgroundFillStyle(){return this.yo.$h()}setBackgroundStrokeStyle(t){return this.yo.Pe(t),this}getBackgroundStrokeStyle(){return this.yo.mo()}po(t){return this.gn=t,this}vo(t){return this.An=t,this}So(t){return this.un.get(t)}bo(){return Array.from(this.un.keys()).reverse().reduce(((t,i)=>i!==Number.MAX_SAFE_INTEGER&&i>t?i:t),0)+1}no(t){return i=>this.xo(t,i)}xo(t,i){if(!this.vn)return;t===Uh.contextmenu&&di(i);const s=this.Ss({x:i.clientX,y:i.clientY});if(t===Uh.mouseUp){if(this.xn){const t=this.xn.entity.Mn;if(t&&t(this.xn.entity,i,this.xn.button,this.xn.startLocation,this.xn.collectionMember,this.xn.info),(null==s?void 0:s.entity)!==this.xn.entity||s.collectionMember!==this.xn.collectionMember){this.xn.entity.Fs=!1;const t=this.xn.entity.zn;t&&t(this.xn.entity,i,this.xn.collectionMember)}this.xn=void 0}if(this.Un){const t=this.Un.entity.getMouseInteractions()&&this.Un.entity.Hn;t&&t(this.Un.entity,i,this.Un.collectionMember,this.Un.info),this.Un=void 0}}else if(s&&s.entity.getMouseInteractions()){const e=t===Uh.click?s.entity.Mo:t===Uh.dbclick?s.entity._o:t===Uh.mouseDown?s.entity.wo:t===Uh.wheel?s.entity.Co:t===Uh.contextmenu?s.entity.ko:void 0;if(e&&e(s.entity,i,s.collectionMember,s.info),t===Uh.mouseDown){this.Un={entity:s.entity,collectionMember:s.collectionMember,event:i,info:s.info};const t=this.Un.event.button,e=s.entity.To;e&&e(s.entity,i,t,s.collectionMember,s.info),this.xn={entity:s.entity,collectionMember:s.collectionMember,button:t,startLocation:n(i.clientX,i.clientY),info:s.info}}}this.Gn=i,this.En=s?{...s,event:i}:void 0}oo(t){return i=>this.Fo(t,i)}Fo(t,i){const s=i.interactions.length;if(this.Xn=i,this.lo){const e=t===Yh.touchMove?this.lo.entity.Io:t===Yh.touchEnd?this.lo.entity.Po:t===Yh.touchStart?this.lo.entity.Do:void 0;e&&e(this.lo.entity,i,this.lo.collectionMember,this.lo.info),t===Yh.touchEnd&&0===s&&(this.lo.entity.Fs=!1,this.lo=void 0)}else if(t===Yh.touchStart){for(let t=0;t<s&&(this.lo=this.Ss({x:i.interactions[t].x,y:i.interactions[t].y}),!this.lo);t+=1);if(this.lo){this.lo.entity.Fs=!0;const t=this.lo.entity.Do;t&&t(this.lo.entity,i,this.lo.collectionMember,this.lo.info)}}}Bo(t){return this.L.on("resize",t)}Lo(t){return this.L.off(t,"resize")}Ro(){return this.L.topicOff("resize"),this}Eo(t){return this.L.on("inViewChange",t)}zo(t){return this.L.off(t)}U(){if(!this.Xi){if(this.Xi=!0,this.un)for(const t of this.un.values())t.U();this.An=void 0,this.gn=void 0,Ot.removeEventListener("dragstart",this.bn),Ot.removeEventListener("scroll",this.en),this.Qr.removeEventListener("fullscreenchange",this.sn),this.Qr.removeEventListener("webkitfullscreenchange",this.sn),this.ho&&(this.ho.disconnect(),this.ho=void 0),this.yn.forEach((t=>{t()})),this.yn.length=0}}ze(t,i){return n(t-this.dn.x,this.dn.y-i)}Vo(t,i){return n(t+this.dn.x,this.dn.y-i)}Oo(t){const i=this.ze(t.clientX,t.clientY);return{engineX:i.x,engineY:i.y}}No(t){const i=this.Vo(t.engineX,t.engineY);return{clientX:i.x,clientY:i.y}}}const Kh=(t=1)=>({type:"horizontalProgressive",packager:(i,s,e)=>{if(i.length>1){const h=_s(s,e*t),r=Math.abs(h.x),o=i.length,a=[];let l=0,u=0,c=i[0].x+r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.x<c&&u<o){const s=u;let e=t.y,h=t.y;for(;u<o&&i[u].x<=c;)i[u].y>e&&(e=i[u].y),i[u].y<h&&(h=i[u].y),u+=1;if(s!==u){const t=(a[l-1].x+i[u-1].x)/2;a[l+0]=n(t,h),a[l+1]=n(t,e),a[l+2]=i[u-1],l+=3}}c+=r}return a}return i.slice()}}),qh=(t=1)=>({type:"horizontalRegressive",packager:(i,s,e)=>{if(i.length>1){const h=_s(s,e*t),r=Math.abs(h.x),o=i.length,a=[];let l=0,u=0,c=i[0].x-r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.x>c&&u<o){const s=u;let e=t.y,h=t.y;for(;u<o&&i[u].x>=c;)i[u].y>e&&(e=i[u].y),i[u].y<h&&(h=i[u].y),u+=1;if(s!==u){const t=(a[l-1].x+i[u-1].x)/2;a[l+0]=n(t,h),a[l+1]=n(t,e),a[l+2]=i[u-1],l+=3}}c-=r}return a}return i.slice()}}),tr=(t=1)=>({type:"verticalProgressive",packager:(i,s,e)=>{if(i.length>1){const h=_s(s,e*t),r=Math.abs(h.y),o=i.length,a=[];let l=0,u=0,c=i[0].y+r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.y<c&&u<o){const s=u;let e=t.x,h=t.x;for(;u<o&&i[u].y<=c;)i[u].x>e&&(e=i[u].x),i[u].x<h&&(h=i[u].x),u+=1;if(s!==u){const t=(a[l-1].y+i[u-1].y)/2;a[l+0]=n(h,t),a[l+1]=n(e,t),a[l+2]=i[u-1],l+=3}}c+=r}return a}return i.slice()}}),ir=(t=1)=>({type:"verticalRegressive",packager:(i,s,e)=>{if(i.length>1){const h=_s(s,e*t),r=Math.abs(h.y),o=i.length,a=[];let l=0,u=0,c=i[0].y-r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.y>c&&u<o){const s=u;let e=t.x,h=t.x;for(;u<o&&i[u].y>=c;)i[u].x>e&&(e=i[u].x),i[u].x<h&&(h=i[u].x),u+=1;if(s!==u){const t=(a[l-1].y+i[u-1].y)/2;a[l+0]=n(h,t),a[l+1]=n(e,t),a[l+2]=i[u-1],l+=3}}c-=r}return a}return i.slice()}});var sr;!function(t){t[t.Square=0]="Square",t[t.Circle=1]="Circle",t[t.HollowCircle=2]="HollowCircle",t[t.Triangle=3]="Triangle",t[t.Cross=4]="Cross",t[t.Diamond=5]="Diamond",t[t.Plus=6]="Plus",t[t.Minus=7]="Minus",t[t.Arrow=8]="Arrow",t[t.Star=9]="Star"}(sr||(sr={}));const er={ProgressiveX:"ProgressiveX",ProgressiveY:"ProgressiveY",RegressiveX:"RegressiveX",RegressiveY:"RegressiveY"};var hr;!function(t){t[t.Nearest=0]="Nearest",t[t.NearestX=1]="NearestX",t[t.NearestY=2]="NearestY"}(hr||(hr={}));const rr=(t,i,s,e,h,r,n,o,a,l)=>{const u=t.length;if(0===u)return;const c=e?1:0,d=u-(h?2:1);if(s===hr.Nearest)return nr(t,i,r,n,c,d);if(s===hr.NearestX||s===hr.NearestY){if("boolean"==typeof l&&("x"===a&&s===hr.NearestX||"y"===a&&s===hr.NearestY))return lr(t,At(i,n,r),a,l,c,d);if(s===hr.NearestX)return or(t,At(i,n,r),o,c,d);if(s===hr.NearestY)return ar(t,At(i,n,r),o,c,d)}},nr=(t,i,s,e,h,r)=>{let n,o=Number.MAX_VALUE;for(let a=h;a<=r;a+=1){const h=t[a];if(!Number.isNaN(h.x)&&!Number.isNaN(h.y)){const t=At(h,s,e),r=(t.x-i.x)**2+(t.y-i.y)**2;r<o&&(o=r,n=a)}}return n},or=(t,i,s,e,h)=>{if(i.x<s.min.x||i.x>s.max.x)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.x>i.x?e.x-i.x:i.x-e.x;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},ar=(t,i,s,e,h)=>{if(i.y<s.min.y||i.y>s.max.y)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.y>i.y?e.y-i.y:i.y-e.y;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},lr=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<u||o>d)||!n&&(o<c||o>f))return;let A=h,g=Math.floor((h+r)/2),y=r,m=-1;for(;;){const i=o-(n?t[g].x:t[g].y);if(i*(e?-1:1)>0)A=Math.min(g+1,y),m=Math.floor((A+y)/2);else{if(0===Math.abs(i))return g;y=Math.max(g-1,A),m=Math.floor((A+y)/2)}if(m===g){const s=g>h?Math.abs(o-(n?t[g-1].x:t[g-1].y)):Ki,e=g<r?Math.abs(o-(n?t[g+1].x:t[g+1].y)):Ki,a=Math.abs(i);switch(Math.min(a,s,e)){case s:return g-1;case e:return g+1;default:return g}}else g=m}},ur=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<u||o>d)||!n&&(o<c||o>f))return;let A=h,g=Math.floor((h+r)/2),y=r,m=-1;for(;;){const s=o-(n?t[g].x:t[g].y);if(s*(e?-1:1)>0)A=Math.min(g+1,y),m=Math.floor((A+y)/2);else{if(0===Math.abs(s))return{a:g,b:g,lerpAmount:0};y=Math.max(g-1,A),m=Math.floor((A+y)/2)}if(m===g){if(s*(e?-1:1)<0&&g>h){const s=t[g-1],e=t[g];return{a:g-1,b:g,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}if(g<r){const s=t[g],e=t[g+1];return{a:g,b:g+1,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}return{a:g,b:g,lerpAmount:0}}g=m}};let cr=0;class dr{constructor(t,i,e){this.Go=f(!0),this.Wo=!1,this.Fs=!1,this.Uo=!1,this.Xi=!1,this.ji=!0,this.Yo=void 0,this.Ho=0,this.L=new s,this.Vn=void 0,this.On=void 0,this.zn=void 0,this.Mo=void 0,this.Co=void 0,this.ko=void 0,this._o=void 0,this.wo=void 0,this.Hn=void 0,this.To=void 0,this.Nn=void 0,this.Mn=void 0,this.Do=void 0,this.Io=void 0,this.Po=void 0,this.onDispose=t=>this.L.on("dispose",t),this.offDispose=t=>this.L.off(t,"dispose"),this.us=t,this.$o=i,this.Xo=e,this.jo=cr,cr+=1,this.Zo=t.qi.highlightColorOffset}Qo(){let t;return this.Jo("DataPattern",(i=>(t=i.pattern,!0))),"ProgressiveX"===t||"RegressiveX"===t?hr.NearestX:"ProgressiveY"===t||"RegressiveY"===t?hr.NearestY:hr.Nearest}Ko(t){return void 0!==this.Xo.find((i=>i.type===t))}Jo(t,i){var s;return!!this.Ko(t)&&!0===i(null===(s=this.Xo.find((i=>i.type===t)))||void 0===s?void 0:s.args)}dispose(){return this.Xi||(this.Fs&&this.zn&&this.zn(this,void 0,void 0),this.Xi=!0,this.$o(this),this.L.emit("dispose",this)),this}isDisposed(){return this.Xi}setVisible(t){const i=this.ji;return this.ji=t,!t&&i&&(this.Fs&&this.zn&&this.zn(this,void 0,void 0),this.Fs=!1),this}getVisible(){return this.ji}setMouseInteractions(t){const i=this.Go._();return this.Go.M(t),t||(i&&this.Fs&&this.zn&&this.zn(this,void 0,void 0),this.Fs=!1),this}getMouseInteractions(){return this.Go._()}getIsUnderMouse(){return this.Fs}getIsGrabbed(){return this.Uo}setMouseMoveEventHandler(t){return this.Vn=t,this}setMouseEnterEventHandler(t){return this.On=t,this}setMouseLeaveEventHandler(t){return this.zn=t,this}setMouseClickEventHandler(t){return this.Mo=t,this}setMouseDoubleClickEventHandler(t){return this._o=t,this}setMouseDownEventHandler(t){return this.wo=t,this}setMouseUpEventHandler(t){return this.Hn=t,this}setMouseWheelEventHandler(t){return this.Co=t,this}setMouseContextMenuEventHandler(t){return this.ko=t,this}setMouseDragEventHandler(t){return this.Nn=t,this}setMouseDragStartEventHandler(t){return this.To=t,this}setMouseDragStopEventHandler(t){return this.Mn=t,this}setTouchStartEventHandler(t){return this.Do=t,this}setTouchMoveEventHandler(t){return this.Io=t,this}setTouchEndEventHandler(t){return this.Po=t,this}qo(t){return this.Yo=t,this}ta(){return this.Yo?this.Yo:fr}cs(t){return this.Ho=t,this}ia(){return this.Ho}sa(t){return this.Zo=t,this}ea(){return this.Zo}}const fr=c(n(0,0),n(0,0));class Ar extends dr{constructor(t,i,s,e){super(t,s,e),this.ha=0,this.Ds=i,this.Ds.ra=!0}na(t){return this.ha===t||(this.ha=t,this.Ds.ra=!0),this}oa(){return this.ha}}class gr extends Ar{constructor(t,i,s,e,h){super(t,i,e,h),this.aa=!0,this.ft=s}}const yr=(t,i,s)=>{if(s instanceof Ks){const e=s.Gi(),h=ks(i,{x:Math.abs(e.x),y:Math.abs(e.y)});return c(n(t.min.x-h.x,t.min.y-h.y),n(t.max.x+h.x,t.max.y+h.y))}return c(s.gi(n(t.min.x,t.min.y),_s(i,-1)),s.gi(n(t.max.x,t.max.y),i))},mr=(t,i)=>"function"==typeof i?i(t):i,pr=(t,i)=>!t||t!==i,vr=(t,i)=>t===O&&i!==O,Sr=t=>t!==O;class br extends gr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ke=Qh.fillStyle,this.us=t}De(t){return this.ke=mr(this.ke,t),this}$h(){return this.ke}la(){return pr(this.ua,this.ke)}ca(){return vr(this.ua,this.ke)}da(){return Sr(this.ke)}fa(t){this.ua=t}}class xr extends br{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Te=Qh.lineStyle,this.us=t}Pe(t){return this.Te="function"==typeof t?t(this.Te):t,this}mo(){return this.Te}Aa(){return!this.ga||this.ga!==this.Te}ya(t){return!this.ga||this.ga.getThickness()!==t}da(){return this.Te!==at||super.da()}ca(){return(this.Te!==at||this.ke!==O)&&this.ga===at&&this.ua===O}ma(t){this.ga=t}}class Mr extends br{constructor(t,i,s,e,h,r=f(5)){super(t,i,s,e,h),this.size=f(5),this.size=r}tt(t){return this.size.M(t),this}}class _r extends br{constructor(t,i,s,e,h,r=f(Qh.font)){super(t,i,s,e,h),this.pa=f(""),this.va=f(n(0,0)),this.Sa=f(0),this.ba=f(0),this.xa=f(n(0,0)),this.Ma=f(0),this._a=f(Ph),this.wa=n(0,0),this.$t=f(A(1,1,1,1)),this.Ca=f(g(4,4,4,4)),this.font=f(Qh.font),this.ka=!1,this.font=r}da(){return Sr(this.ke)&&this.pa._().length>0}ca(){return!1===this.ka&&this.da()}yr(t){return this.pa.M(t),this}wr(){return this.pa._()}Zh(t){return Ih(t)?this._a.M(t):this._a.M(t(this._a._())),this}jh(){return this._a._()}Ta(t){return this._a.M(this._a._().setFamily(t)),this}Fa(){return this._a._().getFamily()}Ia(t){return this._a.M(this._a._().setSize(t)),this}Pa(){return this._a._().getSize()}Da(t){return this._a.M(this._a._().setWeight(t)),this}Ba(){return this._a._().getWeight()}La(t){return this._a.M(this._a._().setStyle(t)),this}Ra(){return this._a._().getStyle()}Ea(t){return this._a.M(this._a._().setVariant(t)),this}za(){return this._a._().getVariant()}Re(t){return this.va.M(t),this}Va(){return this.va._()}Qh(t){return this.Ma.M(t),this}Jh(){return this.Ma._()}Oa(t,i){return this.xa.M(n(t,i)),this}Na(){return this.xa._()}Ga(t){return this.ba.M(t),this}Wa(){return this.ba._()}Ua(t){return this.Sa.M(t),this}Ya(){return this.Sa._()}Ha(t){return this.ba.M(t.x),this.Sa.M(t.y),this}Vr(t){return this.$t.M(t),this}$a(){return this.$t._()}Or(t){return this.Ca.M(t),this}Xa(){return this.Ca._()}}class wr extends Mr{constructor(t,i,s,e,h,r=5){super(t,i,s,e,h,f(r)),this.ja=[],this.Za=f(sr.Square),this.Ma=f(0),this.Qa=f(!1),this.Ja=f(!1),this.Ka=f(!1),this.qa=ts,this.tl=0,this.il=[],this.sl=0,this.el=ts,this.hl=!1,this.rl=void 0}nl(){return this.il}ol(){return this.ja}al(t){return this.Za.M(t),this}ll(){return this.Za._()}Qh(t){return this.Ma.M(t),this}Jh(){return this.Ma._()}ul(t){return this.Qa.M(t),this}cl(t){return this.Ja.M(t),this}dl(t){return this.Ka.M(t),this}fl(t,i){return Array.isArray(t)||(t=[t]),this.sl+=t.length,this.il=xi(this.il,t,{canReturnB:!0}),this.el&&(this.el=i?ys(this.el,i):void 0),this.rl=void 0,this}Vt(){return this.hl=!0,this.ja.length=0,this.tl=0,this.qa=ts,this.il=[],this.sl=0,this.rl=void 0,this}Al(){return this.tl}yl(){return this.sl}}class Cr extends xr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.va=f(n(0,0)),this.j=f(n(100,100)),this.Ma=f(0),this.wa=f(n(0,0)),this.ml=!1}Es(){return this.pl(),this}Re(t){const i=this.va._();return t.x===i.x&&t.y===i.y||(this.va.M(t),this.pl()),this}Va(){return this.va._()}vl(t){const i=this.va._();return t!==i.x&&(this.va.M(n(t,i.y)),this.pl()),this}Sl(t){const i=this.va._();return t!==i.y&&(this.va.M(n(i.x,t)),this.pl()),this}tt(t){const i=this.j._();return t.x===i.x&&t.y===i.y||(this.j.M(n(t.x,t.y)),this.pl()),this}ni(){return this.j._()}bl(t){const i=this.j._();return t!==i.x&&(this.j.M(n(t,i.y)),this.pl()),this}xl(t){const i=this.j._();return t!==i.x&&(this.j.M(n(i.x,t)),this.pl()),this}Qh(t){return this.Ma.M(t),this}Jh(){return this.Ma._()}Ml(t){const i=this.wa._();return t===i&&i.x===t.x&&i.y===t.y||(void 0===t?(this.ml=!1,this.pl()):(this.ml=!0,this.wa.M(t))),this}pl(){if(!this.ml){const t=this.va._(),i=this.j._(),s=n(t.x+i.x/2,t.y+i.y/2),e=this.wa._();s.x===e.x&&s.y===e.y||this.wa.M(s)}}}class kr extends xr{constructor(){super(...arguments),this.ja=[],this.va=f(n(0,0)),this.qa=ts,this._l=!1}wl(t){return t=mi(t),this.ja=t,this._l=!0,this}Cl(){return this.ja}vt(){return this.qa.max.x}yt(){return this.qa.min.x}bt(){return this.qa.max.y}St(){return this.qa.min.y}kl(){return 0}Tl(){return 0}}class Tr extends kr{}class Fr extends br{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Fl=new Array,this.Il=new Array,this.Pl=f({type:"disabled",packager:(t,i,s)=>t.slice()}),this.qa=ts,this.Dl=0,this.Bl=!1,this.il=[Array(),Array()],this.Ll=!1,this.Rl=(new U).setColor(S(42,171,240)),this.hl=!1,this.El=!1,this.zl=!1}fl(t,i){const s=this.Dl-1,e=s>0&&!this.Ll;let[h,r]=e?[[this.Fl[s]],[this.Il[s]]]:[[],[]];if(t instanceof Array){const[i,s]=u(t);h=xi(h,i,{canReturnB:!0}),r=xi(r,s,{canReturnB:!0})}else{const i=t.position;h.push(n(i,t.high)),r.push(n(i,t.low))}return this.Ll?(this.il[0]=xi(this.il[0],h,{canReturnB:!0}),this.il[1]=xi(this.il[1],r,{canReturnB:!0})):(this.il=[h,r],this.Ll=!0),this.qa=ys(this.qa,i||ys(As(h),As(r))),this}Vt(){return this.hl=!0,this.Fl.length=0,this.Il.length=0,this.Dl=0,this.qa=ts,this}ol(){return[this.Fl,this.Il]}nl(){return[this.il[0],this.il[1]]}Vl(t){return this.Pl.M(t),this}Ol(){return this.Pl._()}Nl(t){return this.Rl="function"==typeof t?t(this.Rl):t,this}Gl(){return this.Rl}Al(){return this.Dl-(Number(this.El)+Number(this.zl))}yl(){return this.il.length}Wl(t){return this.El=t,this}Ul(){return this.El}Yl(t){return this.zl=t,this}Hl(){return this.zl}ca(){return this.ua===O&&this.$l===O&&(this.ke!==O||this.Rl!==O)}Xl(t){this.$l=t}da(){return this.Rl!==O||super.da()}la(){return super.la()||!this.$l||this.$l!==this.Rl}}class Ir extends xr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.va=f(n(0,0)),this.jl=f(0),this.Ti=f(360),this.Zl=f(100),this.Ql=f(100),this.Jl=f(0),this.Kl=f(void 0),this.ql=n(0,0),this.tu=n(0,0),this.iu=n(0,0)}su(){return this.Zl._()}eu(){return this.Ql._()}Va(){return this.va._()}hu(){return this.jl._()}ki(){return this.Ti._()}ru(){return this.Jl._()}nu(){return this.Kl._()}ou(){return this.ql}au(){return this.tu}lu(){return this.iu}Re(t){return this.va.M(t),this}uu(t){return this.jl.M(t),this}Ue(t){return this.Ti.M(t),this}cu(t){return this.Ql.M(t),this.Zl.M(t),this}du(t){return this.Zl.M(t),this}fu(t){return this.Ql.M(t),this}Au(t){return this.Jl.M(t<0?0:t),this}gu(t){return this.Kl.M(void 0!==t&&t<=0?void 0:t),this}}var Pr;!function(t){t[t.Complex=0]="Complex",t[t.Simple=1]="Simple"}(Pr||(Pr={}));const Dr=(t,i)=>"function"==typeof i?i(t):i,Br=(t,i)=>!t||t!==i,Lr=(t,i)=>!t||t.getThickness()!==i,Rr=(t,i)=>t===at&&i!==at,Er=t=>t!==at&&t.getFillStyle()!==O;class zr extends gr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.yu=Qh.lineStyle,this.engine=t}Ge(t){return this.yu=Dr(this.yu,t),this}mu(){return this.yu}Aa(){return Br(this.pu,this.yu)}vu(t){return Lr(this.pu,t)}ca(){return Rr(this.pu,this.yu)}da(){return Er(this.yu)}Su(t){this.pu=t}}class Vr extends zr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Ii=n(0,0),this.Ti=n(0,0),this.bu=!1}M({min:t,max:i}){return t.x===this.Ii.x&&t.y===this.Ii.y&&i.x===this.Ti.x&&i.y===this.Ti.y||(this.bu=!0,this.Ii=t,this.Ti=i),this}Fi(){return this.Ii}ki(){return this.Ti}Ye(t){return t.x===this.Ii.x&&t.y===this.Ii.y||(this.bu=!0,this.Ii=t),this}Ue(t){return t.x===this.Ti.x&&t.y===this.Ti.y||(this.bu=!0,this.Ti=t),this}}class Or extends zr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.xu=void 0}}class Nr extends zr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Mu=[],this.qa=ts,this.il=new Array,this.tl=0,this.hl=!1,this._u=f(void 0),this.El=!1,this.zl=!1}wu(t){return this._u.M(t),this}Cu(){return this._u._()}nl(){return this.il}ol(){return this.Mu}Vt(){return this.hl=!0,this.Mu.length=0,this.tl=0,this.il=[],this.qa=ts,this}Al(){return this.tl-(Number(this.El)+Number(this.zl))}yl(){return this.il.length}Wl(t){return this.El=t,this}Ul(){return this.El}Yl(t){return this.zl=t,this}Hl(){return this.zl}}const Gr=t=>{const i=t.getDraggingMode();return void 0!==i&&i!==zt.notDraggable?i===zt.draggable?Xe.Move:i===zt.onlyHorizontal?Xe.Horizontal:Xe.Vertical:void 0};class Wr{constructor(){this.ji=!0,this.L=new s,this.ku=0,this.Mt=(t,i,s)=>{0===this.ku&&this.L.emit("mouseEnter",this,i),this.ku+=1},this._t=(t,i,s)=>{this.ku-=1,this.ku<1&&(this.L.emit("mouseLeave",this,i),this.ku=0)},this.wt=(t,i,s)=>{this.L.emit("mouseClick",this,i)},this.Ct=(t,i,s)=>{this.L.emit("mouseDoubleClick",this,i)},this.kt=(t,i,s)=>{this.L.emit("mouseDown",this,i)},this.Tt=(t,i,s)=>{this.L.emit("mouseUp",this,i)},this.Ft=(t,i,s)=>{this.L.emit("mouseMove",this,i)},this.Pt=(t,i,s,e)=>{this.L.emit("mouseDragStart",this,i,s)},this.It=(t,i,s,e,h,r)=>{this.L.emit("mouseDrag",this,i,s,e,h)},this.Dt=(t,i,s,e,h)=>{this.L.emit("mouseDragStop",this,i,s,e)},this.Bt=(t,i,s)=>{this.L.emit("mouseWheel",this,i)},this.Lt=(t,i)=>{this.ku+=1,this.L.emit("touchStart",this,i)},this.Rt=(t,i)=>{this.L.emit("touchMove",this,i)},this.Et=(t,i)=>{this.ku-=1,this.L.emit("touchEnd",this,i)},this.Tu=t=>(t instanceof gr?t.setMouseEnterEventHandler(this.Mt).setMouseLeaveEventHandler(this._t).setMouseClickEventHandler(this.wt).setMouseDoubleClickEventHandler(this.Ct).setMouseDownEventHandler(this.kt).setMouseUpEventHandler(this.Tt).setMouseMoveEventHandler(this.Ft).setMouseDragEventHandler(this.It).setMouseDragStartEventHandler(this.Pt).setMouseDragStopEventHandler(this.Dt).setMouseWheelEventHandler(this.Bt).setTouchStartEventHandler(this.Lt).setTouchMoveEventHandler(this.Rt).setTouchEndEventHandler(this.Et):(t.onMouseEnter(((t,i)=>this.Mt(t,i))),t.onMouseLeave(((t,i)=>this._t(t,i))),t.onMouseClick(((t,i)=>this.wt(t,i))),t.onMouseDoubleClick(((t,i)=>this.Ct(t,i))),t.onMouseDown(((t,i)=>this.kt(t,i))),t.onMouseUp(((t,i)=>this.Tt(t,i))),t.onMouseMove(((t,i)=>this.Ft(t,i))),t.onMouseDrag(((t,i,s,e,h)=>this.It(t,i,s,e,h))),t.onMouseDragStart(((t,i,s)=>this.Pt(t,i,s))),t.onMouseDragStop(((t,i,s,e)=>this.Dt(t,i,s,e))),t.onMouseWheel(((t,i)=>this.Bt(t,i))),t.onTouchStart(((t,i)=>this.Lt(t,i))),t.onTouchMove(((t,i)=>this.Rt(t,i))),t.onTouchEnd(((t,i)=>this.Et(t,i)))),t)}onMouseEnter(t){return this.L.on("mouseEnter",t)}onMouseLeave(t){return this.L.on("mouseLeave",t)}onMouseClick(t){return this.L.on("mouseClick",t)}onMouseDoubleClick(t){return this.L.on("mouseDoubleClick",t)}onMouseDown(t){return this.L.on("mouseDown",t)}onMouseUp(t){return this.L.on("mouseUp",t)}onMouseMove(t){return this.L.on("mouseMove",t)}onMouseDragStart(t){return this.L.on("mouseDragStart",t)}onMouseDrag(t){return this.L.on("mouseDrag",t)}onMouseDragStop(t){return this.L.on("mouseDragStop",t)}onMouseWheel(t){return this.L.on("mouseWheel",t)}onTouchStart(t){return this.L.on("touchStart",t)}onTouchMove(t){return this.L.on("touchMove",t)}onTouchEnd(t){return this.L.on("touchEnd",t)}offMouseEnter(t){return this.L.off(t,"mouseEnter")}offMouseLeave(t){return this.L.off(t,"mouseLeave")}offMouseClick(t){return this.L.off(t,"mouseClick")}offMouseDoubleClick(t){return this.L.off(t,"mouseDoubleClick")}offMouseDown(t){return this.L.off(t,"mouseDown")}offMouseUp(t){return this.L.off(t,"mouseUp")}offMouseMove(t){return this.L.off(t,"mouseMove")}offMouseDragStart(t){return this.L.off(t,"mouseDragStart")}offMouseDrag(t){return this.L.off(t,"mouseDrag")}offMouseDragStop(t){return this.L.off(t,"mouseDragStop")}offMouseWheel(t){return this.L.off(t,"mouseWheel")}offTouchStart(t){return this.L.off(t,"touchStart")}offTouchMove(t){return this.L.off(t,"touchMove")}offTouchEnd(t){return this.L.off(t,"touchEnd")}getIsUnderMouse(){return this.ku>0}setVisible(t){const i=this.ji!==t;return this.ji=t,i&&this.L.emit("visibleStateChanged",this,this.ji),this}getVisible(){return this.ji}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}}const Ur=(t,i,s)=>{const e=t.getDraggingMode();if(e!==zt.notDraggable){const h=t.scale.gi(t.getPosition(),{x:e!==zt.onlyVertical?i.x:0,y:e!==zt.onlyHorizontal?i.y:0}),r=t.scale,n=t.getSize(),o=t.getOrigin(),a=r.gi({x:r.x.getInnerStart(),y:r.y.getInnerStart()},ks({x:(1+o.x)/2,y:(1+o.y)/2},n)),l=r.gi({x:r.x.getInnerEnd(),y:r.y.getInnerEnd()},ks({x:(o.x-1)/2,y:(o.y-1)/2},n)),u={x:Math.min(Math.max(h.x,a.x),l.x),y:Math.min(Math.max(h.y,a.y),l.y)};t.setPosition(u),di(s)}},Yr=(t,i,s,e,h)=>{Ur(t,h,i)},Hr=(t,i,s,e,h)=>{Ur(t,e,h)};class $r extends Wr{constructor(t,i,s,e,h){super(),this.position=n(50,50),this.origin=n(0,0),this.size=n(0,0),this.Xi=!1,this.Fu=void 0,this.Iu=void 0,this.Pu=Gr,this.Du=void 0,this.Go=!0,this.Bu=()=>{const t="function"==typeof this.Pu?this.Pu(this):this.Pu;t&&(this.Iu=this.Ds.us.Jr(t))},this.Lu=()=>{this.Ds.us.Kr(this.Iu)},this.$t=A(0,0,0,0),this.Ds=t,this.renderingScale=i,this.scale=s,this.$o=e,this.qi=h,this.Ds.xs(),this.onMouseEnter(this.Bu),this.onMouseLeave(this.Lu),this.onMouseDrag(Yr);const r=Ae(new ye(Yt,Hr,Yt));this.onTouchStart(r.onTouchStart),this.onTouchMove(r.onTouchMove),this.onTouchEnd(r.onTouchEnd),this.qi=h}setMouseInteractions(t){return this.Ru().forEach((i=>i.setMouseInteractions(t))),this.Go=t,this}getMouseInteractions(){return this.Go}setEffect(t){return this.es=this.es||this.Ds.us.es.hs(this,{Eu:{shapes:this.Ru()}}),this.es.Eu.bs(t),this}getEffect(){return!!this.es&&this.es.Eu.Ms()}setAutoDispose(t){return this.Du=t,this.Ds.xs(),this}getAutoDispose(){return this.Du}getSize(t=Rt.Everything){return t===Rt.Everything?n(this.size.x+(this.$t.left+this.$t.right),this.size.y+(this.$t.bottom+this.$t.top)):this.size}setContentSize(t){this.size=t}setMargin(t){return this.$t="object"==typeof t?y(this.$t,t):{left:t,top:t,right:t,bottom:t},this.Ds.xs(),this}getMargin(){return this.$t}Le(){if(this.Du){const t=this.size,i=this.renderingScale.ni(),s={x:t.x/i.x,y:t.y/i.y};("max-width"===this.Du.type&&s.x>=this.Du.maxWidth||"max-height"===this.Du.type&&s.y>=this.Du.maxHeight)&&this.dispose()}return this}Es(){return this}dispose(){return this.Xi||(this.Ds.xs(),this.Xi=!0,this.$o(this),this.L.emit("dispose",this),this.Ru().forEach((t=>t.dispose()))),this}setVisible(t){return super.setVisible(t),this.Ru().forEach((i=>i.setVisible(t))),this.Ds.xs(),this}isDisposed(){return this.Xi}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setPosition(t){return this.position=t,this.Ds.xs(),this}getPosition(t=this.origin,i=Rt.Everything){const s=this.getSize(Rt.Everything),e=this.scale.gi(this.position,ks({x:-(this.origin.x+1)/2,y:-(this.origin.y+1)/2},s));if(i===Rt.Everything)return this.scale.gi(e,ks({x:(t.x+1)/2,y:(t.y+1)/2},s));const h=this.scale.gi(e,{x:this.$t.left,y:this.$t.bottom}),r=this.getSize(Rt.Content);return this.scale.gi(h,ks({x:(t.x+1)/2,y:(t.y+1)/2},r))}setOrigin(t){return this.origin=t,this.Ds.xs(),this}getOrigin(){return this.origin}setDraggingMode(t=zt.notDraggable){return this.Fu=t,this.Ds.xs(),this}getDraggingMode(){return void 0!==this.Fu?this.Fu:zt.notDraggable}setMouseStyle(t){return this.Pu=t,this}getMouseStyle(){return this.Pu}}class Xr extends $r{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Ca=A(),this.zu=0,this.Ds=t,this.Vu=e,this.backgroundElement=new this.Vu(this.Ds,this.renderingScale,this.scale,Yt,r),this.Tu(this.backgroundElement)}Ru(){return this.backgroundElement.Ru()}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}setBackground(t){return t(this.backgroundElement),this}getBackground(){return this.backgroundElement}Le(){return super.Le(),this.Xi||this.backgroundElement.setOrigin(this.origin).setPosition(this.getPosition(this.origin,Rt.PaddedBackground)).Le(),this}Es(){const t=this.getSize(Rt.PaddedContent);return this.backgroundElement.Ou(t).Es(),super.Es()}dispose(){return super.dispose(),this.backgroundElement.dispose(),this}setVisible(t){return super.setVisible(t),this.backgroundElement.setVisible(t),this}setPadding(t){return this.Ca="object"==typeof t?y(this.Ca,t):{left:t,top:t,right:t,bottom:t},this.Ds.xs(),this}getPadding(){return this.Ca}getSize(t=Rt.Everything){let i=super.getSize(t);return t>=Rt.PaddedContent&&(i=n(i.x+this.Ca.left+this.Ca.right,i.y+this.Ca.bottom+this.Ca.top)),t>=Rt.PaddedBackground&&(i=n(i.x+this.backgroundElement.Nu()+this.backgroundElement.Gu(),i.y+this.backgroundElement.Wu()+this.backgroundElement.Uu())),i}getPosition(t=this.origin,i=Rt.Everything){if(i===Rt.Everything)return super.getPosition(t,i);const s=super.getPosition(n(-1,-1),Rt.Everything),e=this.getMargin(),h=this.scale.gi(s,{x:e.left,y:e.bottom});if(i===Rt.PaddedBackground){const i=this.getSize(Rt.PaddedBackground);return this.scale.gi(h,ks({x:(t.x+1)/2,y:(t.y+1)/2},i))}const r=this.scale.gi(h,{x:this.backgroundElement.Nu(),y:this.backgroundElement.Wu()});if(i===Rt.PaddedContent){const i=this.getSize(Rt.PaddedContent);return this.scale.gi(r,ks({x:(t.x+1)/2,y:(t.y+1)/2},i))}const o=this.getPadding(),a=this.scale.gi(r,{x:o.left,y:o.bottom}),l=this.getSize(Rt.Content);return this.scale.gi(a,ks({x:(t.x+1)/2,y:(t.y+1)/2},l))}setMouseInteractions(t){return super.setMouseInteractions(t),this.backgroundElement.setMouseInteractions(t),this}getHighlight(){return this.zu}setHighlight(t){return this.zu=zi(t),this.backgroundElement.setHighlight(t),this.L.emit("highlight",this,t),this}}const jr=t=>"setBackground"in t;class Zr extends Wr{constructor(t,i,s,e,h,r,n,o,a,l,u){super(),this.S=0,this.Yu=1,this.Hu=!0,this.$u=new Fh,this.Xu=!0,this.Xi=!1,this.axisScale=e,this.renderingScale=h,this.ju=n,this.Zu=o,this.Qu=a,this.$o=l,this.Ju=i,this.Ku=s,this.qu=this.Tu(this.Ju.We(this.renderingScale)),this.qi=u,this.tc=this.Tu(this.Qu.setDirection(this.Zu).ic(this.Ku,this.renderingScale,r,Yt,this.qi,!1).setOrigin(ui(this.Zu))),this.axis=t,this.setMouseInteractions(!1),"major"===this.tc.sc?this.qu.Ge(u.xAxisNumericTicks.majorTickStyle.gridStrokeStyle):"minor"===this.tc.sc?this.qu.Ge(u.xAxisNumericTicks.minorTickStyle.gridStrokeStyle):"other"===this.tc.sc&&this.qu.Ge(u.cursorGridStrokeStyleX)}setValue(t){return this.S=t,this.Ku.xs(),this.L.emit("valueChange",this,this.S),this}getValue(){return this.S}setTextFormatter(t){return this.hc=t,this.Ku.xs(),this}setTickLength(t){return this.tc.setPointerLength(t),this.Ju.xs(),this}getTickLength(){return this.tc.getPointerLength()}setTickLabelPadding(t){return this.tc.setTickLabelPadding(t),this.Ju.xs(),this}setTickLabelRotation(t){return this.tc.setTextRotation(t),this.Ju.xs(),this}getTickLabelRotation(){return this.tc.getTextRotation()}getTickLabelPadding(){return this.tc.getTickLabelPadding()}setGridStrokeLength(t){return this.Yu=t,this.Ju.xs(),this}getGridStrokeLength(){return this.Yu}setGridStrokeStyle(t){return this.qu.Ge(t),this.Ju.xs(),this}getGridStrokeStyle(){return this.qu.mu()}dispose(){return this.Xi||(this.Xi=!0,this.qu.dispose(),this.tc.dispose(),this.$o(this),this.Ju.us.xs(),this.L.emit("dispose",this)),this}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setMarkerVisible(t){return this.Hu=t,this.Ku.xs(),this}getMarkerVisible(){return this.Hu}setMarker(t){return t(this.tc),this.Ku.xs(),this}getMarker(){return this.tc}setMouseInteractions(t){return this.tc.setMouseInteractions(t),this.qu.setMouseInteractions(t),this}getMouseInteractions(){return this.qu.getMouseInteractions()}setAllocatesAxisSpace(t){return this.Xu=t,this.Ku.xs(),this}getAllocatesAxisSpace(){return this.Xu}isInScale(){return ls(this.S,this.axisScale.getInnerStart(),this.axisScale.getInnerEnd())}onValueChange(t){return this.L.on("valueChange",t)}offValueChange(t){return this.L.off(t,"valueChange")}}class Qr extends Zr{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,u,a,l),this.rc=!1,this.$o=a,this.Ju=i,this.Ku=s}dispose(){return this.rc=!1,super.dispose()}update(){return this}plot(t,i,s,e,h){if(this.isInScale()&&this.getVisible()&&t){this.rc=!1;const t=ft(this.S,this.axisScale,this.ju.getWidth(this.renderingScale));this.qu.setVisible(!0).Ye(this.ju.toPoint(t,i)).Ue(this.ju.toPoint(t,i-(e+s*this.Yu))),this.Hu?(this.hc&&this.tc.setText(this.hc(this.S,this)),this.tc.setVisible(!0).setPosition(this.ju.toPoint(t,h))):this.tc.setVisible(!1)}else this.qu.setVisible(!1),this.tc.setVisible(!1);return this.tc.Es().Le(),this}nc(){const t=this.tc.Es().getSize();return this.ju.getHeight(t)}}const Jr=(t,i)=>t.setTextFillStyle(i.uiTextFillStyle).setTextFont(i.uiTextFont),Kr=(t,i)=>(Ci(t.setButtonSize(i.uiButtonSize),i,!1,{fill:i.uiButtonFillStyle}),t),qr=(t,i,s)=>{s&&jr(t)&&t.setBackground((t=>t.setFillStyle(i.uiBackgroundFillStyle).setStrokeStyle(i.uiBackgroundStrokeStyle))).setEffect(!0)},tn={uiElement:void 0,stylers:t.List(),addStyler(t){return{...this,stylers:this.stylers.push(t)}},applyStylers(t,i){return this.stylers.forEach((s=>void 0!==s?s(t,i):void 0)),t}},sn={background:void 0,setBackground(t){return{...this,background:t}}},en={ic(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,e,h),h);return qr(n,h,r),n}},hn={ic(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.background,e,h),h);return qr(n,h,r),n}};class rn extends $r{constructor(){super(...arguments),this.oc=!0}Le(){return super.Le(),this}setMouseInteractions(t){return this.oc=t,this}getMouseInteractions(){return this.oc}Ru(){return[]}}class nn extends rn{onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}Ou(t){return this.size=t,this}Nu(){return 0}Gu(){return 0}Uu(){return 0}Wu(){return 0}setHighlight(t){return this}getHighlight(){return 0}setFillStyle(){return this}getFillStyle(){return O}setStrokeStyle(){return this}getStrokeStyle(){return at}setStrokeThickness(){return this}getStrokeThickness(){return 0}}class on extends $r{constructor(){super(...arguments),this.L=new s,this.zu=0}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}getHighlight(){return this.zu}setHighlight(t){return this.zu=t,this.Ru().forEach((i=>i.cs(t))),this.L.emit("highlight",this,t),this.Ds.xs(),this}}class an extends on{}class ln extends an{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Ds=t,this.Za=this.Ds.ac(this.renderingScale,Pr.Simple).setVisible(!1).De(O).Pe(at),this.Tu(this.Za)}lc(){const t=this.uc();if(t.length>2){const i=As(t),s=n(i.max.x-i.min.x,i.max.y-i.min.y);this.setContentSize(s);const e=t.map((t=>{const e=ws(t,_s(i.min,-1));return this.scale.gi(this.position,ws(e,ks(_s(ws(this.origin,n(1,1)),-.5),s)))})).map((t=>At(t,this.scale,this.renderingScale)));this.Za.wl(e).setVisible(this.getVisible()).setVisible(this.getVisible())}else this.Za&&this.Za.setVisible(!1),this.setContentSize(n(0,0))}Le(){return super.Le(),this.Xi||this.lc(),this}Es(){return this.lc(),super.Es()}setVisible(t){return super.setVisible(t),this.Za.setVisible(t),this}}const un=(t,i,s)=>t*(1-s)+i*s,cn=(t,i,s,e,h)=>{if(void 0===i.value||void 0===s.value||void 0===e.value||void 0===h.value)return;const r=(t.x-s.point.x)/(h.point.x-s.point.x),n=(h.point.y-s.point.y)*r+s.point.y,o=(t.x-i.point.x)/(e.point.x-i.point.x),a=(e.point.y-i.point.y)*o+i.point.y,l=(t.y-a)/(n-a),u=un(s.value,h.value,r),c=un(i.value,e.value,o);return un(c,u,l)},dn={warm:t=>i=>x(60/(t-1)*i,.8,.8),cold:t=>i=>x(60/(t-1)*i+180,.8,.8),fullSpectrum:t=>i=>x(360/t*i,.8,.8),reverseSpectrum:t=>i=>x(360/t*(t-i),.8,.8),flatUI:t=>i=>x(360/t*i+8,.8,.8-.15/t*i),arction:t=>i=>{const s=1-.2/t*i;return x(360/t*i+51,s,s)},arctionWarm:t=>i=>{const s=t-1,e=1-.2/s*i;return x(46-46/s*i+4,e,e)},sunset:t=>i=>{const s=[170,320];return x(i%2?s[0]:s[1],.8,.5+.5/(t-1)*i)},dynamic:t=>i=>{const s=i%2,e=[234,346];return x(s?e[0]:e[1],s?.3:.9,.5+.5/(t-1)*i)},magenta:t=>i=>{const s=[.9,.6];return x(354,i%2?s[0]:s[1],.5+.5/(t-1)*i)},greyscale:t=>i=>x(0,0,.25+.5/(t-1)*i),frozen:t=>i=>{const s=[.8,.6];return x(160+80/(t-1)*i,.6,i%2?s[0]:s[1])},retro:t=>i=>{const s=[6,183];return x(i%2?s[0]:s[1],.7,.5+.5/(t-1)*i)},crayons:t=>i=>{let s=180+230/(t-1)*i;return s>360&&(s-=360),x(s,.9,.8)},custom:(t,i)=>s=>{const e=.25+.5/(t-1)*s;if(!i)return x(0,0,e);const h=i.getR()/255,r=i.getG()/255,n=i.getB()/255,o=Math.max(h,r,n),a=Math.min(h,r,n);let l=0;if(o!==a){const t=o-a;switch(o){case h:l=(r-n)/t+(r<n?6:0);break;case r:l=(n-h)/t+2;break;case n:l=(h-r)/t+4;break;default:l=0}return l=l/6*360,x(l,.8,e)}return x(0,0,e)},sector:(t,i,s=.8,e=.8)=>h=>r=>x(t+(i-t)/h*r,s,e),auroraBorealis:t=>i=>fn([{value:0,hex:"#23FF7A"},{value:1/9,hex:"#03E65D"},{value:2/9,hex:"#04D155"},{value:3/9,hex:"#00B849"},{value:4/9,hex:"#00A869"},{value:5/9,hex:"#008F68"},{value:6/9,hex:"#00815E"},{value:7/9,hex:"#017153"},{value:8/9,hex:"#704A85"},{value:1,hex:"#743A70"}],t,i),blueSciFi:t=>i=>fn([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#E2E7FF"},{value:2/9,hex:"#ACB9F8"},{value:3/9,hex:"#889DFF"},{value:4/9,hex:"#547EEF"},{value:5/9,hex:"#4068D8"},{value:6/9,hex:"#2B50B7"},{value:7/9,hex:"#1B3E9F"},{value:8/9,hex:"#8D1395"},{value:1,hex:"#780A74"}],t,i),light:t=>i=>fn([{value:0,hex:"#FECC00"},{value:1/9,hex:"#F7B300"},{value:2/9,hex:"#EF9900"},{value:3/9,hex:"#E88000"},{value:4/9,hex:"#E06600"},{value:5/9,hex:"#DD5A00"},{value:6/9,hex:"#D94D00"},{value:7/9,hex:"#D13300"},{value:8/9,hex:"#C91A00"},{value:1,hex:"#C10000"}],t,i),monochrome:t=>i=>fn([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#EEEEEE"},{value:2/9,hex:"#DCDCDC"},{value:3/9,hex:"#C1C1C1"},{value:4/9,hex:"#A4A2A2"},{value:5/9,hex:"#8B8B8B"},{value:6/9,hex:"#787878"},{value:7/9,hex:"#656565"},{value:8/9,hex:"#565555"},{value:1,hex:"#434343"}],t,i),night:t=>i=>fn([{value:0,hex:"#F0F9E0"},{value:1/9,hex:"#C9DFA4"},{value:2/9,hex:"#B5C796"},{value:3/9,hex:"#8998B7"},{value:4/9,hex:"#6E7E9E"},{value:5/9,hex:"#5C6D8F"},{value:6/9,hex:"#47587A"},{value:7/9,hex:"#374B72"},{value:8/9,hex:"#273C65"},{value:1,hex:"#192847"}],t,i),sunset2:t=>i=>fn([{value:0,hex:"#22334D"},{value:1/9,hex:"#82062C"},{value:2/9,hex:"#AB001D"},{value:3/9,hex:"#D80428"},{value:4/9,hex:"#CF5D1B"},{value:5/9,hex:"#CF8229"},{value:6/9,hex:"#CF9D29"},{value:7/9,hex:"#C4BE25"},{value:8/9,hex:"#E1DC49"},{value:1,hex:"#FFFA67"}],t,i)},fn=(t,i,s)=>{const e=gn(i,s),[h,r]=yn(e,t),n=An(t[h]),o=An(t[r]),a=0!==n.value?(o.value-e)/n.value:0,l={value:a,h:un(n.h,o.h,a),s:un(n.s,o.s,a),v:un(n.v,o.v,a)};return x(l.h,l.s,l.v)},An=t=>{const i=(t=>{const i=t.r,s=t.g,e=t.b,h=Math.max(i,s,e),r=Math.min(i,s,e);let n=0;const o=h,a=h-r,l=0===h?0:a/h;if(h===r)n=0;else{switch(h){case i:n=(s-e)/a+(s<e?6:0);break;case s:n=(e-i)/a+2;break;case e:n=(i-s)/a+4}n/=6}return[360*n,l,o]})(b(t.hex));return{value:t.value,h:i[0],s:i[1],v:i[2]}},gn=(t,i)=>{const s=i/t;return s<0?0:s>1?1:s},yn=(t,i)=>{if(i.length<2)throw new Error("Invalid palette size");for(let s=0;s<i.length;s+=1)if(t<i[s].value)return[s-1,s];return[i.length-2,i.length-1]};class mn{constructor(){this.type="simple"}}const pn=t=>!(!t||"object"!=typeof t||!("type"in t)||"simple"!==t.type),vn=new mn;class Sn{constructor(t){this.type="phong",this.ambientReflection=1,this.specularReflection=.1,this.diffuseReflection=1,this.ambientColor=b("#000"),this.specularColor=b("#fff"),this.shininess=32,t&&(this.ambientReflection=Number.isNaN(Number(t.ambientReflection))?this.ambientReflection:Number(t.ambientReflection),this.specularReflection=Number.isNaN(Number(t.specularReflection))?this.specularReflection:Number(t.specularReflection),this.diffuseReflection=Number.isNaN(Number(t.diffuseReflection))?this.diffuseReflection:Number(t.diffuseReflection),this.ambientColor=t.ambientColor||this.ambientColor,this.specularColor=t.specularColor||this.specularColor,this.shininess=t.shininess||this.shininess)}}const bn=t=>!(!t||"object"!=typeof t||!("type"in t)||"phong"!==t.type),xn=new Sn,Mn={Simple:mn,Phong:Sn};var _n;!function(t){t[t.Fill=0]="Fill",t[t.Fit=1]="Fit",t[t.Stretch=2]="Stretch",t[t.Center=3]="Center",t[t.Tile=4]="Tile"}(_n||(_n={}));const wn=i({type:"fillstyle",fillType:"image",source:void 0,surroundingColor:S(0,0,0,0),sourceMissingColor:S(0,0,0,0),fitMode:_n.Fill});class Cn extends wn{constructor(t){super(t)}setSource(t){return this.set("source",t)}getSource(){return this.get("source")}setSurroundingColor(t){return v(t)?this.set("surroundingColor",t):this.set("surroundingColor",t(this.get("surroundingColor")))}getSurroundingColor(){return this.get("surroundingColor")}setSourceMissingColor(t){return v(t)?this.set("sourceMissingColor",t):this.set("sourceMissingColor",t(this.get("sourceMissingColor")))}getSourceMissingColor(){return this.get("sourceMissingColor")}setFitMode(t){return this.set("fitMode",t)}getFitMode(){return this.get("fitMode")}toString(){return`imagefill:${this.fitMode}`}}const kn=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"image"===t.fillType),Tn={Dotted:[1,3],DottedDense:[1,1],Dashed:[3,1],DashedEqual:[2,2],DashedLoose:[2,4],DashDotted:[3,2,1,2]},Fn=i({type:"linestyle",lineType:"dashed",pattern:Tn.DashedEqual,fillStyle:new U({color:S(255,255,255)}),thickness:1,patternScale:3});class In extends Fn{constructor(t){super({...t,lineType:"dashed"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}O(){const t=this.getThickness();return t<0?1:t}setPattern(t){return"function"==typeof t?this.set("pattern",t(this.getPattern())):this.set("pattern",t)}getPattern(){return this.get("pattern")}setPatternScale(t){return"function"==typeof t?this.set("patternScale",t(this.getPatternScale())):this.set("patternScale",t)}getPatternScale(){return this.get("patternScale")}}const Pn=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"dashed"!==t.lineType),Dn=i({type:"icon",width:void 0,height:void 0,cc:void 0,dc:Yt,fc:Yt});class Bn extends Dn{constructor(t,i,s,e){super({...e,cc:t,dc:i,fc:s})}dispose(){return this.fc(this),this}setWidth(t){const i=this.set("width",t);return this.dc(i),i}getWidth(){return this.get("width")}setHeight(t){const i=this.set("height",t);return this.dc(i),i}getHeight(){return this.get("height")}setSize(t,i){const s=this.withMutations((s=>{s.set("width",t).set("height",i)}));return this.dc(s),s}ni(){if(!this.cc)return{x:0,y:0};const t=this.cc.width,i=this.cc.height;if(0===t||0===i)return{x:0,y:0};const s=this.width,e=this.height;return"number"==typeof s&&"number"==typeof e?{x:s,y:e}:"number"==typeof s?{x:s,y:i*s/t}:"number"==typeof e?{x:t*e/i,y:e}:{x:t,y:i}}}const Ln=t=>!(!t||"object"!=typeof t||!("type"in t)||"icon"!==t.type),Rn=i({type:"glow",color:S(255,255,255,50),spread:1,blur:4,offset:{x:0,y:0}});class En extends Rn{constructor(t){super(t)}setSpread(t){return this.set("spread","function"==typeof t?t(this.get("spread")):t)}getSpread(){return this.get("spread")}setBlur(t){return this.set("blur","function"==typeof t?t(this.get("blur")):t)}getBlur(){return this.get("blur")}setColor(t){return this.set("color","function"==typeof t?t(this.get("color")):t)}getColor(){return this.get("color")}setOffset(t){return this.set("offset","function"==typeof t?t(this.get("offset")):t)}getOffset(){return this.get("offset")}}const zn=t=>!(!t||"object"!=typeof t||!("type"in t)||"glow"!==t.type);class Vn{constructor(t){this.Ac=0,this.gc=0,this.yc=0,this.mc=!1,this.vc=!0,this.Sc=!1,this.bc={warningDisplayed:!1,expandEvents:[]},this.L=new s,this.vc=!t||void 0===t.autoSortingEnabled||t.autoSortingEnabled,void 0!==(null==t?void 0:t.dataPattern)&&(this.xc={userSpecified:null===t.dataPattern?void 0:t.dataPattern}),this.Mc=void 0!==(null==t?void 0:t.lookupValues)&&t.lookupValues,this._c=void 0!==(null==t?void 0:t.colors)&&t.colors,this.wc=void 0!==(null==t?void 0:t.ids)&&t.ids,this.Cc=void 0!==(null==t?void 0:t.sizes)&&t.sizes,this.kc=void 0!==(null==t?void 0:t.rotations)&&t.rotations,this.Tc=(null==t?void 0:t.dataStorage)?t.dataStorage:Float64Array,this.Fc=!1!==(null==t?void 0:t.allowInputModification)}add(t){return Array.isArray(t)?this.appendJSON(t,{x:"x",y:"y"}):this.appendSample(t),this}addArraysXY(t,i){return this.appendSamples({xValues:t,yValues:i}),this}appendJSON(t,i={x:"x",y:"y"}){const s=t.length,e=i.x,h=i.y,r=i.lookupValue,n=i.size,o=i.rotation,a=i.color,l=i.id;let u,c,d,f,A,g,y;if(e){u=new this.Tc(s);const i=t[0]&&t[0][e]instanceof Date;if(t[0]&&"string"==typeof t[0][e])for(let i=0;i<s;i+=1){const s=t[i];u[i]=new Date(s[e]).getTime()}else if(i)for(let i=0;i<s;i+=1){const s=t[i];u[i]=s[e].getTime()}else for(let i=0;i<s;i+=1){const s=t[i];u[i]=s[e]}}if(h){c=new this.Tc(s);const i=t[0]&&t[0][h]instanceof Date;if(t[0]&&"string"==typeof t[0][h])for(let i=0;i<s;i+=1){const s=t[i];c[i]=new Date(s[h]).getTime()}else if(i)for(let i=0;i<s;i+=1){const s=t[i];c[i]=s[h].getTime()}else for(let i=0;i<s;i+=1){const s=t[i];c[i]=s[h]}}if(r){d=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];d[i]=s[r]}}if(a){f=[];for(let i=0;i<s;i+=1){const s=t[i];f[i]=s[a]}}if(l){A=new Uint32Array(s);for(let i=0;i<s;i+=1){const s=t[i];A[i]=s[l]}}if(n){g=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];g[i]=s[n]}}if(o){y=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];y[i]=s[o]}}return this.appendSamples({xValues:u,yValues:c,ids:A,colors:f,lookupValues:d,sizes:g,rotations:y,start:i.start,step:i.step}),this}appendSample(t){const{samplesCacheX:i,samplesCacheY:s,samplesCacheColors:e,samplesCacheIDs:h,samplesCacheLookup:r,samplesCacheSize:n,samplesCacheRotation:o,maxSampleCount:a,dataPattern:l}=this.Ic({appendCount:1}),u=this.Pc(),c=void 0!==t.step?t.step:1,d=void 0!==t.x?"number"==typeof t.x?t.x:"string"==typeof t.x?new Date(t.x).getTime():t.x.getTime():u?u.x+c:0,f=void 0!==t.y?"number"==typeof t.y?t.y:"string"==typeof t.y?new Date(t.y).getTime():t.y.getTime():u?u.y+c:0;if(l&&this.vc&&this.Dc&&this.Bc&&!this.Lc(l,d,f)&&!this.Sc)return this.Rc(this.Dc,this.Bc,new this.Tc([d]),new this.Tc([f]),void 0!==t.lookupValue?new Float32Array([t.lookupValue]):void 0,void 0!==t.color?this.Ec((t.color,[t.color])):void 0,void 0!==t.id?new Uint32Array([t.id]):void 0,void 0!==t.size?new Float32Array([t.size]):void 0,void 0!==t.rotation?new Float32Array([t.rotation]):void 0,l),this;if(i[this.Ac]=d,s[this.Ac]=f,void 0!==t.lookupValue&&r&&(r[this.Ac]=t.lookupValue),void 0!==t.color&&e){const i=this.Ec((t.color,[t.color]));void 0!==i&&(e[this.Ac]=i[0])}return void 0!==t.id&&h&&(h[this.Ac]=t.id),void 0!==t.size&&n&&(n[this.Ac]=t.size),void 0!==t.rotation&&o&&(o[this.Ac]=t.rotation),this.zc(this.Ac,this.Ac),this.Ac+=1,this.Ac>a-1&&(this.Ac=0,this.mc=!0),this.gc=Math.min(this.gc+1,a),this.yc+=1,this}appendSamples(t){const{lookupValues:i,colors:s,ids:e,sizes:h,rotations:r,start:n,step:o}=t;let a=t.offset,l=t.count;const u=t.xValues||t.yValues;if(!u)return this;const c=u.length;if(a=void 0!==a?a:0,l=void 0!==l?l:c-a,l<=0)return this;const d=void 0!==t.offsetLookupValues?t.offsetLookupValues:a,f=void 0!==t.offsetColors?t.offsetColors:a,A=void 0!==t.offsetIds?t.offsetIds:a,g=void 0!==t.offsetSizes?t.offsetSizes:a,y=void 0!==t.offsetRotations?t.offsetRotations:a,m=this.Vc(!0),[p,v]=this.Oc(l,t.xValues,"x","ProgressiveX"===m||"RegressiveX"===m||void 0===m?n:void 0,"ProgressiveX"===m||"RegressiveX"===m||void 0===m?o:void 0,a),[S,b]=this.Oc(l,t.yValues,"y","ProgressiveY"===m||"RegressiveY"===m?n:void 0,"ProgressiveY"===m||"RegressiveY"===m?o:void 0,a),x=this.Ec(s),{samplesCacheX:M,samplesCacheY:_,samplesCacheLookup:w,samplesCacheColors:C,samplesCacheIDs:k,samplesCacheSize:T,samplesCacheRotation:F,maxSampleCount:I,dataPattern:P,incomingDataReplacedCache:D}=this.Ic({appendCount:l,...0===v&&0===b&&0===a&&0===d&&0===f&&0===A&&0===g&&0===y?{incomingDataX:p,incomingDataY:S,incomingDataLookup:i,incomingDataIDs:e,incomingDataColors:x,incomingDataSize:h,incomingDataRotation:r}:{}});if(!D&&P&&this.vc&&this.Dc&&this.Bc){const t=p[v],s=S[b];if(!this.Lc(P,t,s)&&!this.Sc)return this.Rc(this.Dc,this.Bc,Yn(p,v,v+l),Yn(S,b,b+l),Yn(i,d,d+l),Yn(x,f,f+l),Yn(e,A,A+l),Yn(h,g,g+l),Yn(r,y,y+l),P),this}const B=I-this.Ac,L=Math.min(l,B);if(L>0&&(D||(Wn(M,p,v,L,this.Ac),Wn(_,S,b,L,this.Ac),i&&w&&Wn(w,i,d,L,this.Ac),e&&k&&Wn(k,e,A,L,this.Ac),x&&C&&Wn(C,x,f,L,this.Ac),h&&T&&Wn(T,h,g,L,this.Ac),r&&F&&Wn(F,r,y,L,this.Ac)),this.zc(this.Ac,this.Ac+L-1),this.Ac+=L,this.Ac>I-1&&(this.Ac=0,this.mc=!0)),this.gc=Math.min(this.gc+L,I),this.yc+=L,this.Vc(),l-L>0){const t={xValues:p?Yn(p,v+L,void 0):void 0,yValues:S?Yn(S,b+L,void 0):void 0,lookupValues:i?Yn(i,d+L,void 0):void 0,ids:e?Yn(e,A+L,void 0):void 0,colors:x?Yn(x,f+L,void 0):void 0,sizes:h?Yn(h,g+L,void 0):void 0,rotations:r?Yn(r,y+L,void 0):void 0};this.appendSamples(t)}return this}setSamples(t){return this.clear().appendSamples(t)}fill(t){const i=this.Dc||this.Bc;if(!i)return this;const s=i.length;if(void 0!==t.x&&(this.Dc=this.Dc||new this.Tc(s),this.Dc.fill(t.x)),void 0!==t.y&&(this.Bc=this.Bc||new this.Tc(s),this.Bc.fill(t.y)),void 0!==t.lookupValue&&(this.Nc=this.Nc||new Float32Array(s),this.Nc.fill(t.lookupValue)),void 0!==t.color){const i=this.Ec([t.color]);i&&(this.Gc=this.Gc||new Uint32Array(s),this.Gc.fill(i[0]))}return void 0!==t.size&&(this.Wc=this.Wc||new Float32Array(s),this.Wc.fill(t.size)),void 0!==t.rotation&&(this.Uc=this.Uc||new Float32Array(s),this.Uc.fill(t.rotation)),this.L.emit("cleared"),this}alterSamples(t,i){const{xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a}=i;let l=i.offset,u=i.count;const c=s||e||h||r||n||o||a,d=c?c.length:void 0!==i.x||void 0!==i.y?1:0;if(l=void 0!==l?l:0,u=void 0!==u?u:d-l,u<=0)return this;const f=void 0!==i.offsetLookupValues?i.offsetLookupValues:l,A=void 0!==i.offsetColors?i.offsetColors:l,g=void 0!==i.offsetIds?i.offsetIds:l,y=void 0!==i.offsetSizes?i.offsetSizes:l,m=void 0!==i.offsetRotations?i.offsetRotations:l,p=this.Ec(r),v=this.yc-1,S=void 0!==this.Yc?Math.max(this.yc-this.Yc,0):0,b=t+u-1,x=Math.max(t,S),M=Math.min(b,v),_=M-x+1;if(this.yc>0&&_>0){const{samplesCacheX:r,samplesCacheY:u,samplesCacheColors:c,samplesCacheIDs:d,samplesCacheLookup:v,samplesCacheSize:b,samplesCacheRotation:w}=this.Ic({appendCount:0}),C=r.length;if(void 0!==this.Yc&&this.mc&&this.yc%this.Yc!=0){const S=this.yc-this.yc%this.Yc,_=this.yc-1,k=this.yc-this.gc,T=S-1,F=Math.max(x,k),I=Math.min(M,T)-F+1;if(I>0){const S=F-t,x=On(F,this.yc,C,this.Ac);if(void 0!==i.x)for(let t=x;t<x+I;t+=1)r[t]=i.x;if(void 0!==i.y)for(let t=x;t<x+I;t+=1)u[t]=i.y;s&&Wn(r,s,l+S,I,x),e&&Wn(u,e,l+S,I,x),h&&v&&Wn(v,h,f+S,I,x),n&&d&&Wn(d,n,g+S,I,x),p&&c&&Wn(c,p,A+S,I,x),o&&b&&Wn(b,o,y+S,I,x),a&&w&&Wn(w,a,m+S,I,x)}const P=Math.max(x,S),D=Math.min(M,_)-P+1;if(D>0){const S=P-t,x=On(P,this.yc,C,this.Ac);if(void 0!==i.x)for(let t=x;t<x+D;t+=1)r[t]=i.x;if(void 0!==i.y)for(let t=x;t<x+D;t+=1)u[t]=i.y;s&&Wn(r,s,l+S,D,x),e&&Wn(u,e,l+S,D,x),h&&v&&Wn(v,h,f+S,D,x),n&&d&&Wn(d,n,g+S,D,x),p&&c&&Wn(c,p,A+S,D,x),o&&b&&Wn(b,o,y+S,D,x),a&&w&&Wn(w,a,m+S,D,x)}}else{const t=x-S;if(void 0!==i.x)for(let s=t;s<t+_;s+=1)r[s]=i.x;if(void 0!==i.y)for(let s=t;s<t+_;s+=1)u[s]=i.y;e&&Wn(u,e,l,_,t),s&&Wn(r,s,l,_,t),e&&Wn(u,e,l,_,t),h&&v&&Wn(v,h,f,_,t),n&&d&&Wn(d,n,g,_,t),p&&c&&Wn(c,p,A,_,t),o&&b&&Wn(b,o,y,_,t),a&&w&&Wn(w,a,m,_,t)}this.L.emit("cleared")}const w=t+u-1-v;if(w>0){const i=M+1-t;this.appendSamples({xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a,offset:l+i,offsetLookupValues:f+i,offsetColors:A+i,offsetIds:g+i,offsetSizes:y+i,offsetRotations:m+i,count:w})}return this}alterSamplesByID(t,i){if(!this.wc)throw new Error("LightningChart JS attempted to use alterSamplesByID on DataSetXY that doesn't have IDs enabled.");const s=t.length,e=this.Hc;if(s<=0||!e)return this;const h=(("object"==typeof i.color?this.Ec([i.color]):"number"==typeof i.color?[i.color]:[])||[])[0],r=Array.isArray(i.xValues)?new this.Tc(i.xValues):i.xValues,n=Array.isArray(i.yValues)?new this.Tc(i.yValues):i.yValues,o=Array.isArray(i.yValues)?new Float32Array(i.yValues):i.yValues,a=this.Ec(i.colors),l=Array.isArray(i.sizes)?new Float32Array(i.sizes):i.sizes,u=Array.isArray(i.rotations)?new Float32Array(i.rotations):i.rotations,c=e.length,d=this.gc,f=this.yc-1,A=Math.max(f-d+1,0);for(let d=0;d<s;d+=1){const s=t[d],g=Gn(s,A,f,(t=>e[On(t,this.yc,c,this.Ac)])),y=On(g,this.yc,c,this.Ac);e[y]===s&&(void 0!==i.x&&this.Dc&&(this.Dc[y]=i.x),void 0!==i.y&&this.Bc&&(this.Bc[y]=i.y),void 0!==i.lookupValue&&this.Nc&&(this.Nc[y]=i.lookupValue),void 0!==i.size&&this.Wc&&(this.Wc[y]=i.size),void 0!==i.rotation&&this.Uc&&(this.Uc[y]=i.rotation),void 0!==h&&this.Gc&&(this.Gc[y]=h),r&&this.Dc&&(this.Dc[y]=r[d]),n&&this.Bc&&(this.Bc[y]=n[d]),o&&this.Nc&&(this.Nc[y]=o[d]),a&&this.Gc&&(this.Gc[y]=a[d]),l&&this.Wc&&(this.Wc[y]=l[d]),u&&this.Uc&&(this.Uc[y]=u[d]))}return this.L.emit("cleared"),this}clear(){return this.Ac=0,this.gc=0,this.yc=0,this.mc=!1,this.L.emit("cleared"),this}getSampleCount(){return this.gc}getNextSampleIndex(){return this.yc}setMaxSampleCount(t){if("object"==typeof t){this.$c&&this.offMaxSampleCountExceeded(this.$c);const i=t.max,s=t.initial,e=t=>{const s=this.Yc||0;if(void 0!==i&&s>=i)return;let e=Math.max(2*s,t);void 0!==i&&(e=Math.min(e,i)),this.setMaxSampleCount(e)};this.$c=this.onMaxSampleCountExceeded(((t,i,s,h)=>{e(h)})),void 0===this.Yc&&(void 0!==s?this.setMaxSampleCount(s):this.setMaxSampleCount(Math.min(2*this.gc,void 0!==i?i:Number.MAX_SAFE_INTEGER)))}else if("number"==typeof t){const i=t;if(void 0!==this.Yc&&this.Yc>i)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to shrink data set. This is currently not supported.");if(!this.Dc||!this.Bc)return this.Yc=i,this;if(i===this.Yc)return this;if(this.mc&&0!==this.Ac)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to expand data set that has exceeded its max sample count. This is currently not supported.");this.Yc=i,this.gc<i?(this.Ac=this.gc,this.mc=!1):(this.Ac=0,this.mc=!0);const s=new this.Tc(this.Yc);s.set(this.Dc);const e=new this.Tc(this.Yc);if(e.set(this.Bc),this.Dc=s,this.Bc=e,this.Mc){const t=new Float32Array(this.Yc);this.Nc&&t.set(this.Nc),this.Nc=t}if(this.wc){const t=new Uint32Array(this.Yc);this.Hc&&t.set(this.Hc),this.Hc=t}if(this._c){const t=new Uint32Array(this.Yc);this.Gc&&t.set(this.Gc),this.Gc=t}if(this.Cc){const t=new Float32Array(this.Yc);this.Wc&&t.set(this.Wc),this.Wc=t}if(this.kc){const t=new Float32Array(this.Yc);this.Uc&&t.set(this.Uc),this.Uc=t}}return this}getMaxSampleCount(){return this.Yc}readBack(t){if(!this.Dc||!this.Bc)return{xValues:new this.Tc,yValues:new this.Tc,iSampleFirst:0};const i=this.Dc.length;let s,e=[];if(null==t?void 0:t.onlyInRange){const i=this.Xc();if(!i)throw new Error("LightningChart JS - attempted to use `DataSetXY.readBack` with `visibleOnly: true` without a data pattern.\nThis operation is only supported for patterned data (e.g. 'ProgressiveX')");const h=Math.min(t.onlyInRange.start,t.onlyInRange.end),r=Math.max(t.onlyInRange.start,t.onlyInRange.end),n=Nn(h,r,this.Dc,this.yc,this.gc,this.Ac,i,0);if(!n)return{xValues:new this.Tc,yValues:new this.Tc,iSampleFirst:0};e=n.dataRanges,s=n.iFirstSample}else if(void 0!==this.Yc&&this.mc&&this.yc%this.Yc!=0){const t=this.Ac,h=i-t,r=this.Ac-1;e.push({offset:t,count:h}),e.push({offset:0,count:r+1}),s=this.yc-i}else e.push({offset:0,count:this.gc}),s=0;const h=e.reduce(((t,i)=>t+i.count),0),r=new this.Tc(h),n=new this.Tc(h),o=this._c?new Uint32Array(h):void 0,a=this.Mc?new Float32Array(h):void 0,l=this.wc?new Uint32Array(h):void 0,u=this.Cc?new Float32Array(h):void 0,c=this.kc?new Float32Array(h):void 0;let d=0;for(const t of e)r.set(this.Dc.subarray(t.offset,t.offset+t.count),d),n.set(this.Bc.subarray(t.offset,t.offset+t.count),d),this._c&&o&&this.Gc&&o.set(this.Gc.subarray(t.offset,t.offset+t.count),d),this.Mc&&a&&this.Nc&&a.set(this.Nc.subarray(t.offset,t.offset+t.count),d),this.wc&&l&&this.Hc&&l.set(this.Hc.subarray(t.offset,t.offset+t.count),d),this.Cc&&u&&this.Wc&&u.set(this.Wc.subarray(t.offset,t.offset+t.count),d),this.kc&&c&&this.Uc&&c.set(this.Uc.subarray(t.offset,t.offset+t.count),d),d+=t.count;return{xValues:r,yValues:n,iSampleFirst:s,lookupValues:a,colors:o,ids:l,sizes:u,rotations:c}}onMaxSampleCountExceeded(t){return this.L.on("maxSampleCountExceeded",t)}offMaxSampleCountExceeded(t){return this.L.off(t)}Oc(t,i,s,e,h,r){if(void 0===i){const i=this.Pc();h=void 0!==h?h:1,e=void 0!==e?e:i?i[s]+h:0;const r=new this.Tc(t);for(let i=0;i<t;i+=1)r[i]=e+i*h;return[r,0]}const n=i[0]&&i[0]instanceof Date,o=i[0]&&"string"==typeof i[0];if(void 0!==e||void 0!==h){const a=this.Pc();h=void 0!==h?h:1,e=void 0!==e?e:a?a[s]+h:0;const l=new this.Tc(t);if(o)for(let s=0;s<t;s+=1)l[s]=e+new Date(i[s+r]).getTime()*h;else if(n)for(let s=0;s<t;s+=1)l[s]=e+i[s+r].getTime()*h;else for(let s=0;s<t;s+=1)l[s]=e+i[s+r]*h;return[l,0]}if(o){const s=new this.Tc(t);for(let e=0;e<t;e+=1)s[e]=new Date(i[e]).getTime();return[s,r]}if(n){const s=new this.Tc(t);for(let e=0;e<t;e+=1)s[e]=i[e].getTime();return[s,r]}return[i,r]}Ec(t){if(!t||0===t.length)return;const i=t[0];if(v(i)){const i=t.length,s=new Uint32Array(i);for(let e=0;e<i;e+=1){const i=t[e],h=255*i.a<<24|255*i.b<<16|255*i.g<<8|255*i.r;s[e]=h}return s}return t}jc(){return{min:0,max:void 0!==this.Yc&&this.mc?this.Yc-1:this.gc-1}}Zc(t){t=Math.min(t,this.gc),this.yc-=t,this.gc-=t,this.Ac-=t,this.Ac<0&&void 0!==this.Yc&&(this.Ac+=this.Yc)}Rc(t,i,s,e,h,r,n,o,a,l){var u;const c=s.length,d=s[0],f=s[c-1],A=e[c-1];if(this.Lc(l,f,A)){const t=(null===(u=this.Pc())||void 0===u?void 0:u.x)||0;let i=0;for(let e=0;e<c;e+=1)if(s[e]>t){i=e;break}const l={xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a,offset:i};this.Sc=!0,this.appendSamples(l),this.Sc=!1}else{const l=t.length,u=this.gc,f=this.yc-1,A=Math.max(f-u+1,0),g=Gn(d,A,f,(i=>t[On(i,this.yc,l,this.Ac)])),y=g-1,m=g+1,p=t[On(g,this.yc,l,this.Ac)],v=m<=this.yc-1?t[On(m,this.yc,l,this.Ac)]:void 0,S=void 0!==v&&v<d?m+1:p<d?g+1:y+1,b=f-S+1,x=new this.Tc(b),M=new this.Tc(b),_=this.Mc?new Float32Array(b):void 0,w=this._c?new Uint32Array(b):void 0,C=this.wc?new Uint32Array(b):void 0,k=this.Cc?new Float32Array(b):void 0,T=this.kc?new Float32Array(b):void 0;let F=0;for(let s=S;s<=f;s+=1){const e=On(s,this.yc,l,this.Ac);x[F]=t[e],M[F]=i[e],_&&this.Nc&&(_[F]=this.Nc[e]),w&&this.Gc&&(w[F]=this.Gc[e]),C&&this.Hc&&(C[F]=this.Hc[e]),k&&this.Wc&&(k[F]=this.Wc[e]),T&&this.Uc&&(T[F]=this.Uc[e]),F+=1}this.Zc(b);const I=new this.Tc(c+b);I.set(s),I.set(x,c);const P=new this.Tc(c+b);let D,B,L,R,E;P.set(e),P.set(M,c),h&&_&&(D=new Float32Array(c+b),D.set(h),D.set(_,c)),r&&w&&(B=new Uint32Array(c+b),B.set(r),B.set(w,c)),n&&C&&(L=new Uint32Array(c+b),L.set(n),L.set(C,c)),o&&k&&(R=new Float32Array(c+b),R.set(o),R.set(k,c)),a&&T&&(E=new Float32Array(c+b),E.set(a),E.set(T,c)),this.Sc=!0,this.appendSamples({xValues:I,yValues:P,lookupValues:D,colors:B,ids:L,sizes:R,rotations:E}),this.Sc=!1,this.L.emit("cleared")}}Xc(){return this.Vc()}Vc(t=!1){let i;if(this.xc&&"userSpecified"in this.xc)i=this.xc.userSpecified;else if(this.xc&&"autoDetectResult"in this.xc)i=this.xc.autoDetectResult;else if(this.Dc&&this.Bc&&this.yc>0&&!t){const t=void 0!==this.Yc&&this.mc?this.Ac:0,s=this.gc-1,e=void 0!==this.Yc&&this.mc?0:void 0,h=void 0!==this.Yc&&this.mc?this.Ac-1:void 0,[r,n]=void 0!==e&&void 0!==h&&Math.abs(h-e)>Math.abs(s-t)?[e,h]:[t,s];if(1+n-r>=2){let t,s,e=this.Dc[r],h=this.Bc[r];for(let i=r+1;i<=n;i+=1){if(!1!==t){const s=this.Dc[i],h=Math.sign(s-e);0!==h&&t&&t.direction!==h?t=!1:0===h||t||(t={direction:h}),e=s}if(!1!==s){const t=this.Bc[i],e=Math.sign(t-h);0!==e&&s&&s.direction!==e?s=!1:0===e||s||(s={direction:e}),h=t}}i=t&&t.direction>0?er.ProgressiveX:t&&t.direction<0?er.RegressiveX:s&&s.direction>0?er.ProgressiveY:s&&s.direction<0?er.RegressiveY:void 0,this.xc={autoDetectResult:i},i&&Ot.console.warn(`LightningChart JS DataSetXY warning | Data pattern was detected automatically (DataPatterns.${i}).\nAutomatic detection is only intended for kick-starting application development, not for production use.\nAdd { dataPattern: '${i}'} } to your application when creating series or DataSetXY to get clear this warning.`)}}if(i&&"ProgressiveX"!==i)throw new Error("LightningChart JS New XY rework beta features do not yet support other data patterns than ProgressiveX. This will be introduced in near future.");return i}Lc(t,i,s){const e=this.Pc();return!e||("ProgressiveX"===t?i>e.x:"RegressiveX"===t?i<e.x:"ProgressiveY"===t?s>e.y:"RegressiveY"!==t||s<e.y)}Ic(t){if(t.incomingDataX&&t.incomingDataY&&0===this.gc&&!this.Dc&&!this.Bc&&(void 0===this.Yc||this.Yc===t.appendCount)&&this.Fc)return this.Dc=Un(t.incomingDataX,this.Tc)||new this.Tc,this.Bc=Un(t.incomingDataY,this.Tc)||new this.Tc,this.Nc=this.Mc?Un(t.incomingDataLookup,Float32Array):void 0,this.Hc=this.wc?Un(t.incomingDataIDs,Uint32Array):void 0,this.Gc=this._c?Un(t.incomingDataColors,Uint32Array):void 0,this.Wc=this.Cc?Un(t.incomingDataSize,Float32Array):void 0,this.Uc=this.kc?Un(t.incomingDataRotation,Float32Array):void 0,{dataPattern:this.Vc(),samplesCacheX:this.Dc,samplesCacheY:this.Bc,samplesCacheLookup:this.Nc,samplesCacheIDs:this.Hc,samplesCacheColors:this.Gc,samplesCacheSize:this.Wc,samplesCacheRotation:this.Uc,maxSampleCount:t.appendCount,incomingDataReplacedCache:!0};if(void 0===this.Yc){const i=this.gc+t.appendCount;if(!this.Dc||!this.Bc)return this.Dc=new this.Tc(i),this.Bc=new this.Tc(i),this.Nc=this.Mc?new Float32Array(i):void 0,this.Hc=this.wc?new Uint32Array(i):void 0,this.Gc=this._c?new Uint32Array(i):void 0,this.Wc=this.Cc?new Float32Array(i):void 0,this.Uc=this.kc?new Float32Array(i):void 0,{dataPattern:this.Vc(),samplesCacheX:this.Dc,samplesCacheY:this.Bc,samplesCacheLookup:this.Nc,samplesCacheIDs:this.Hc,samplesCacheColors:this.Gc,samplesCacheSize:this.Wc,samplesCacheRotation:this.Uc,maxSampleCount:i};const s=this.Dc.length;if(s<i){if(!this.bc.warningDisplayed){const s=Ot.performance.now();if(this.bc.expandEvents=this.bc.expandEvents.filter((t=>s-t.timestamp<5e3)),i>1e3&&this.bc.expandEvents.push({timestamp:s}),this.bc.expandEvents.length>5)return Ot.console.warn("LightningChart JS warning - DataSetXY append operation was performed more than 5 times in 5 seconds.\nAutomatic max sample count control was enabled.\nFor streaming applications, DataSetXY.setMaxSampleCount() or Series.setMaxSampleCount() should be configured explicitly to get rid of this warning."),this.bc.warningDisplayed=!0,this.setMaxSampleCount({mode:"auto"}),this.Ic(t)}const s=new this.Tc(i);s.set(this.Dc),this.Dc=s;const e=new this.Tc(i);if(e.set(this.Bc),this.Bc=e,this.Mc){const t=new Float32Array(i);this.Nc&&t.set(this.Nc),this.Nc=t}if(this.wc){const t=new Uint32Array(i);this.Hc&&t.set(this.Hc),this.Hc=t}if(this._c){const t=new Uint32Array(i);this.Gc&&t.set(this.Gc),this.Gc=t}if(this.Cc){const t=new Float32Array(i);this.Wc&&t.set(this.Wc),this.Wc=t}if(this.kc){const t=new Float32Array(i);this.Uc&&t.set(this.Uc),this.Uc=t}return this.Ac=this.gc,{dataPattern:this.Vc(),samplesCacheX:this.Dc,samplesCacheY:this.Bc,samplesCacheLookup:this.Nc,samplesCacheIDs:this.Hc,samplesCacheColors:this.Gc,samplesCacheSize:this.Wc,samplesCacheRotation:this.Uc,maxSampleCount:i}}if(s>4*i){const t=new this.Tc(i);t.set(this.Dc.subarray(0,this.gc)),this.Dc=t;const s=new this.Tc(i);if(s.set(this.Bc.subarray(0,this.gc)),this.Bc=s,this.Mc){const t=new Float32Array(i);this.Nc&&t.set(this.Nc.subarray(0,this.gc)),this.Nc=t}if(this.wc){const t=new Uint32Array(i);this.Hc&&t.set(this.Hc.subarray(0,this.gc)),this.Hc=t}if(this._c){const t=new Uint32Array(i);this.Gc&&t.set(this.Gc.subarray(0,this.gc)),this.Gc=t}if(this.Cc){const t=new Float32Array(i);this.Wc&&t.set(this.Wc.subarray(0,this.gc)),this.Wc=t}if(this.kc){const t=new Float32Array(i);this.Uc&&t.set(this.Uc.subarray(0,this.gc)),this.Uc=t}return{dataPattern:this.Vc(),samplesCacheX:this.Dc,samplesCacheY:this.Bc,samplesCacheLookup:this.Nc,samplesCacheIDs:this.Hc,samplesCacheColors:this.Gc,samplesCacheSize:this.Wc,samplesCacheRotation:this.Uc,maxSampleCount:i}}return{dataPattern:this.Vc(),samplesCacheX:this.Dc,samplesCacheY:this.Bc,samplesCacheLookup:this.Nc,samplesCacheIDs:this.Hc,samplesCacheColors:this.Gc,samplesCacheSize:this.Wc,samplesCacheRotation:this.Uc,maxSampleCount:s}}return t.appendCount+this.gc>this.Yc&&this.L.emit("maxSampleCountExceeded",this,this.gc,this.Yc,this.gc+t.appendCount),this.Dc=this.Dc||new this.Tc(this.Yc),this.Bc=this.Bc||new this.Tc(this.Yc),this.Nc=this.Nc||(this.Mc?new Float32Array(this.Yc):void 0),this.Hc=this.Hc||(this.wc?new Uint32Array(this.Yc):void 0),this.Gc=this.Gc||(this._c?new Uint32Array(this.Yc):void 0),this.Wc=this.Wc||(this.Cc?new Float32Array(this.Yc):void 0),this.Uc=this.Uc||(this.kc?new Float32Array(this.Yc):void 0),{dataPattern:this.Vc(),samplesCacheX:this.Dc,samplesCacheY:this.Bc,samplesCacheLookup:this.Nc,samplesCacheIDs:this.Hc,samplesCacheColors:this.Gc,samplesCacheSize:this.Wc,samplesCacheRotation:this.Uc,maxSampleCount:this.Yc}}Qc(){if(!this.Dc||!this.Bc||0===this.gc)return;if(void 0===this.Yc)return this.yc>0?{x:this.Dc[0],y:this.Bc[0]}:void 0;if(!this.mc)return{x:this.Dc[0],y:this.Bc[0]};let t=this.Ac-this.gc;return t<0&&(t+=this.Yc),{x:this.Dc[t],y:this.Bc[t]}}Pc(){if(!this.Dc||!this.Bc||0===this.gc)return;if(void 0===this.Yc){const t=this.gc-1;return t>=0?{x:this.Dc[t],y:this.Bc[t]}:void 0}let t=this.Ac-1;return t<0&&(t+=this.Yc),{x:this.Dc[t],y:this.Bc[t]}}Jc(t){if(!this.Dc||!this.Bc)return;const i=this.Dc.length,s=this.gc,e=this.yc-1,h=Math.max(e-s+1,0)+t,r=On(h,this.yc,i,this.Ac);return{x:this.Dc[r],y:this.Bc[r],lookupValue:this.Mc&&this.Nc?this.Nc[r]:void 0,id:this.wc&&this.Hc?this.Hc[r]:void 0,color:this._c&&this.Gc?this.Gc[r]:void 0,size:this.Cc&&this.Wc?this.Wc[r]:void 0,rotation:this.kc&&this.Uc?this.Uc[r]:void 0,iSample:h}}Kc(t,i,s,e){const h=this.Vc(),r=this.Dc,n=this.Bc;if(!r||!n)return;const o=(t,i)=>({x:r[t],y:n[t],lookupValue:this.Mc&&this.Nc?this.Nc[t]:void 0,id:this.wc&&this.Hc?this.Hc[t]:void 0,color:this._c&&this.Gc?this.Gc[t]:void 0,size:this.Cc&&this.Wc?this.Wc[t]:void 0,rotation:this.kc&&this.Uc?this.Uc[t]:void 0,iSample:i}),a=r.length,l=this.gc,u=this.yc-1,c=Math.max(u-l+1,0);if(h){const s=this.Qc(),e=this.Pc();if(!(s&&e&&this.Dc&&this.Bc))return;const r="ProgressiveX"===h||"RegressiveX"===h?"x":"y",n="x"===r?"y":"x",l="x"===r?this.Dc:this.Bc,d="x"===n?this.Dc:this.Bc,f=t[r],A=Math.min(s[r],e[r]),g=Math.max(s[r],e[r]);if(f<A||f>g)return;const y=Gn(f,c,u,(t=>l[On(t,this.yc,a,this.Ac)])),m=On(y,this.yc,a,this.Ac);if(!i)return o(m,y);const p=y-1,v=y+1,S=f>=l[m]&&("ProgressiveX"===h||"ProgressiveY"===h)?v<=u?v:void 0:p>=c?p:void 0;if(void 0===S)return;const b=On(S,this.yc,a,this.Ac),x=l[m],M=d[m],_=l[b],w=d[b],C=Math.min(x,_),k=C===x?M:w,T=Math.max(x,_),F=C===x?y:S,I=(f-C)/(T-C),P=un(k,T===x?M:w,I);return"ProgressiveX"===h||"RegressiveX"===h?{x:f,y:P,iSample:F+I}:{x:P,y:f,iSample:F+I}}let d,f=Number.MAX_VALUE;const A=At(t,s,e),g=this.gc-1;for(let t=0;t<=g;t+=1){const i=r[t],h=n[t];if(!Number.isNaN(i)&&!Number.isNaN(h)){const r=ft(i,s.x,e.x),n=ft(h,s.y,e.y),o=(r-A.x)**2+(n-A.y)**2;o<f&&(f=o,d=t)}}return void 0===d?void 0:o(d,d)}zc(t,i){this.L.emit("changed",t,i)}Gt(t){return this.L.off(t)}qc(t){return this.L.on("changed",t)}td(t){return this.L.on("cleared",t)}}const On=(t,i,s,e)=>t%s,Nn=(t,i,s,e,h,r,n,o)=>{if(0===e||0===h)return;const a=s.length,l=e-1,u=Math.max(l-h+1,0),c=Gn(t,u,l,(t=>s[On(t,e,a)])),d=Gn(i,u,l,(t=>s[On(t,e,a)])),f=Math.max(c-o,u),A=Math.min(d+o,l),g=On(f,e,a),y=On(A,e,a);return g>y?{iFirstSample:f,iLastSample:A,iFirstSampleDataArray:g,iLastSampleDataArray:y,dataRanges:[{offset:g,count:a-g},{offset:0,count:y+1}]}:{iFirstSample:f,iLastSample:A,iFirstSampleDataArray:g,iLastSampleDataArray:y,dataRanges:[{offset:g,count:y-g+1}]}},Gn=(t,i,s,e)=>{const h=s;for(;i!==s;){const h=Math.ceil((i+s)/2);t<e(h)?s=h-1:i=h}const r=Math.abs(t-e(i));return i<h&&Math.abs(t-e(i+1))<r?i+1:i},Wn=(t,i,s,e,h)=>{const r=i.length;if(Array.isArray(i))for(let r=0;r<e;r+=1)t[h+r]=i[s+r];else t.set(r===e?i:i.subarray(s,s+e),h)},Un=(t,i)=>void 0===t?void 0:Array.isArray(t)?new i(t):t instanceof i?t:new i(t),Yn=(t,i,s)=>{if(void 0!==t)return Array.isArray(t)?t.slice(i,s):t.subarray(i,s)};class Hn extends on{constructor(t,i,s,e,h){super(t,i,s,e,h),this.pa="label",this.Za=this.Ds.Nr(this.renderingScale).yr(this.pa).De(O).Vr(Hi).Or(Hi),this.setMargin(5),this.Tu(this.Za)}Ru(){return[this.Za]}setFillStyle(t){return this.Za.De(t),this.Ds.xs(),this}getFillStyle(){return this.Za.$h()}Le(){const t=this.getPosition(n(0,0),Rt.Content),i=At(t,this.scale,this.renderingScale);return this.Za.Re(i),this}Es(){this.Za.Es();const t=0===this.pa.length?n(0,0):this.Za.sd();return this.setContentSize(t),super.Es()}setText(t){return this.pa=t,this.Za.yr(this.pa),this.Ds.xs(),this}getText(){return this.pa}setFont(t){return this.Za.Zh(t),this.Ds.xs(),this}getFont(){return this.Za.jh()}setTextRotation(t){return this.Za.Qh(t),this.Ds.xs(),this}getTextRotation(){return this.Za.Jh()}}const $n={...tn,...en,uiElement:Hn};class Xn extends an{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ed=!1,this.fitTo=this.Ou.bind(this),this.setSize=this.fitTo,this.Za=this.Ds.ac(i).De(O).Pe(at),this.Tu(this.Za)}Ru(){return[this.Za]}setFillStyle(t){return this.Za.De(t),this.Ds.xs(),this}getFillStyle(){return this.Za.$h()}setStrokeStyle(t){return this.Za.Pe(t),this.Ds.xs(),this}getStrokeStyle(){return this.Za.mo()}Le(){const t=As([this.getPosition(n(-1,-1),Rt.Content),this.getPosition(n(1,1),Rt.Content)].map((t=>At(t,this.scale,this.renderingScale))));return this.ed?this.Za.wl([{x:(t.min.x+t.max.x)/2,y:t.min.y},{x:t.min.x,y:(t.min.y+t.max.y)/2},{x:(t.min.x+t.max.x)/2,y:t.max.y},{x:t.max.x,y:(t.min.y+t.max.y)/2}]):this.Za.wl([t.min,{x:t.min.x,y:t.max.y},t.max,{x:t.max.x,y:t.min.y}]),this}Ou(t){return this.setContentSize(t),this.Ds.xs(),this}Nu(){return 0}Gu(){return 0}Uu(){return 0}Wu(){return 0}}class jn extends an{constructor(t,i,s,e,h){super(t,i,s,e,h),this.hd=n(0,0),this.Za=t.rd(i).uu(0).Ue(360).De(O).Pe(at),this.Tu(this.Za)}Ru(){return[this.Za]}setFillStyle(t){return this.Za.De(t),this.Ds.xs(),this}getFillStyle(){return this.Za.$h()}setStrokeStyle(t){return this.Za.Pe(t),this.Ds.xs(),this}getStrokeStyle(){return this.Za.mo()}Le(){const t=this.getSize(Rt.Content).x/2;return this.Za.du(t*this.renderingScale.Gi().x).fu(t*this.renderingScale.Gi().y).Re(At(this.getPosition(n(0,0),Rt.Content),this.scale,this.renderingScale)).gu(255).Es(),this}Ou(t){const i=Math.sqrt(t.x*t.x/4+t.y*t.y/4);return this.setContentSize(n(2*i,2*i)),this.hd=t,this.Ds.xs(),this}Nu(){return(this.getSize(Rt.Content).x-this.hd.x)/2}Gu(){return(this.getSize(Rt.Content).x-this.hd.x)/2}Uu(){return(this.getSize(Rt.Content).y-this.hd.y)/2}Wu(){return(this.getSize(Rt.Content).y-this.hd.y)/2}fitTo(t){const i=Math.min(t.x,t.y);return this.setContentSize(n(i,i)),this.hd=t,this}}class Zn extends ln{constructor(t,i,s,e,h){super(t,i,s,Pr.Simple,e,h),this.nd=f(n(0,0)),this.od=!1,this.Ds=t,this.lc()}uc(){const t=this.nd._();if(this.od){const i=Math.min(t.x,t.y);return[n(0,0),n(i/2,i/2),n(0,i),n(-i/2,i/2)]}const i=2*Math.sqrt(this.nd._().x*this.nd._().x/4+this.nd._().y*this.nd._().y/4),s=n(Math.cos(Math.PI/4)*i,0),e=n(0,Math.sin(Math.PI/4)*i),h=n(0,0),r=ws(h,ws(s,e)),o=ws(r,ws(e,_s(s,-1)));return[h,r,o,Cs(o,ws(s,e))]}Ru(){return[this.Za]}setFillStyle(t){return this.Za.De(t),this.Ds.xs(),this}getFillStyle(){return this.Za.$h()}setStrokeStyle(t){return this.Za.Pe(t),this.Ds.xs(),this}getStrokeStyle(){return this.Za.mo()}Ou(t){return this.nd.M(t),this.od=!1,this.Ds.xs(),this}Nu(){return this.od?0:(this.getSize(Rt.Content).x-this.nd._().x)/2}Gu(){return this.od?0:(this.getSize(Rt.Content).x-this.nd._().x)/2}Uu(){return this.od?0:(this.getSize(Rt.Content).y-this.nd._().y)/2}Wu(){return this.od?0:(this.getSize(Rt.Content).y-this.nd._().y)/2}fitTo(t){return this.nd.M(t),this.od=!0,this.Ds.xs(),this}}class Qn extends ln{constructor(t,i,s,e,h){super(t,i,s,Pr.Simple,e,h),this.ad=f(n(0,0)),this.ld=f(10),this.ud=f(void 0),this.Zu=f(Vt.Right),this.lc()}Ru(){return[this.Za]}setFillStyle(t){return this.Za.De(t),this.Ds.xs(),this}getFillStyle(){return this.Za.$h()}setStrokeStyle(t){return this.Za.Pe(t),this.Ds.xs(),this}getStrokeStyle(){return this.Za.mo()}setDirection(t){return this.Zu.M(t),this.Ds.xs(),this}getDirection(){return this.Zu._()}setPointerLength(t){return this.ld.M(t),this.Ds.xs(),this}getPointerLength(){return this.ld._()}setPointerAngle(t){return this.ud.M(t),this.Ds.xs(),this}getPointerAngle(){let t=this.ud._();if(void 0===t){const i=this.dd();if(0===i)return 0;t=0!==i?180*Math.atan(2*this.getPointerLength()/i)/Math.PI:0}return Math.min(Math.max(t,1),89)}Ou(t){return this.ad.M(t),this.Ds.xs(),this}fd(){const t=this.getPointerAngle();return 0===t?0:2*this.getPointerLength()/Math.tan(t*Math.PI/180)}Ad(){return ci(this.Zu._())?this.ad._().x:this.ad._().y}dd(){return ci(this.Zu._())?this.ad._().y:this.ad._().x}Nu(){switch(this.Zu._()){case Vt.Right:return 0;case Vt.Left:return this.getPointerLength();case Vt.Up:case Vt.Down:return Math.max(0,this.fd()-this.dd());default:return 0}}Gu(){switch(this.Zu._()){case Vt.Right:return this.getPointerLength();case Vt.Left:return 0;case Vt.Up:case Vt.Down:return Math.max(0,this.fd()-this.dd());default:return 0}}Uu(){switch(this.Zu._()){case Vt.Right:case Vt.Left:return Math.max(0,this.fd()-this.dd());case Vt.Up:return this.getPointerLength();case Vt.Down:default:return 0}}Wu(){switch(this.Zu._()){case Vt.Right:case Vt.Left:return Math.max(0,this.fd()-this.dd());case Vt.Up:return 0;case Vt.Down:return this.getPointerLength();default:return 0}}uc(){const t=ui(this.Zu._()),i=xs(n(0,0),t),s=this.getPointerLength(),e=this.fd(),h=this.Ad(),r=this.dd();if(!(0!==s&&0!==e||0!==h&&0!==r))return[];const o=n(0,0),a=ws(ws(o,_s(t,-s)),_s(i,e/2)),l=ws(a,_s(i,(r-e)/2)),u=ws(l,_s(t,-h)),c=ws(ws(o,_s(t,-s)),_s(i,-e/2)),d=ws(c,_s(i,-(r-e)/2)),f=ws(d,_s(t,-h));let A;return A=0===h||0===r?[o,a,c]:0===s||0===e?[l,u,f,d]:Ht(r,e)?[o,a,u,f,c]:[o,a,l,u,f,d,c],A}}class Jn extends on{constructor(t,i,s,e,h){super(t,i,s,e,h),this.fitTo=this.Ou.bind(this),this.setSize=this.fitTo,this.gd=new Vn,this.Za=this.Ds.vd(i).Ge(at).pd(O).md(O).yd(this.gd),this.Tu(this.Za)}Ru(){return[this.Za]}setShape(t){return this.Za.Sd(t),this}getShape(){return this.Za.bd()}setRotation(t){return this.Za.xd(t),this}getRotation(){return this.Za.Md()}setFillStyle(t){return this.Za.md(t),this.Ds.xs(),this}getFillStyle(){return this.Za._d()}Le(){const t=At(this.getPosition({x:0,y:0},Rt.Content),this.scale,this.renderingScale),i=Math.max(this.size.x,this.size.y);if(this.gd.clear(),i>0){const s=this.Za.bd(),e=this.Za._d(),h=Ln(s)&&s,r=kn(e)&&e;if(h){const t=i/h.ni().y;this.Za.wd(t)}else if(r){const t=r.source;if(t instanceof Image){const s=i/t.height;this.Za.wd(s)}}else this.Za.wd(i);this.gd.appendSample(t)}return this}Ou(t){return this.setContentSize(t),this.Ds.xs(),this}Nu(){return 0}Gu(){return 0}Uu(){return 0}Wu(){return 0}}const Kn={...tn,...en,uiElement:Jn};class qn extends rn{setSize(t){return this.setContentSize(t),this.Ds.xs(),this}}class to extends Xr{constructor(){super(...arguments),this.Cd=[],this.kd=0,this.Td=t=>{const i=this.Cd.indexOf(t);i>=0&&this.Cd.splice(i,1)}}getMembers(){return this.Cd}getMemberCount(){return this.Cd.length}setMinimumSize(t){return this.Fd=t,this.Ds.xs(),this}getMinimumSize(){return this.Fd}addElement(t,i=-1){const s=t.ic(this.Ds,this.renderingScale,this.scale,this.Td,this.qi,!1);return s.setMouseInteractions(this.getMouseInteractions()),i>=0?this.Cd.splice(i,0,s):this.Cd.push(s),s.setVisible(this.getVisible()),this.Tu(s),this.Xi&&(Di(0,(()=>{})),s.dispose()),s}dispose(){return super.dispose(),this.Cd.slice().forEach(Ut),this}setVisible(t){return super.setVisible(t),this.Cd.forEach((i=>i.setVisible(t))),this}setMouseInteractions(t){super.setMouseInteractions(t);for(let i=0;i<this.Cd.length;i+=1)this.Cd[i].setMouseInteractions(t);return this}getMouseInteractions(){if(super.getMouseInteractions())return!0;for(let t=0;t<this.Cd.length;t+=1)if(this.Cd[t].getMouseInteractions())return!0;return!1}setHighlight(t){super.setHighlight(t);for(let s=0;s<this.Cd.length;s+=1){const e=this.Cd[s];"getHighlight"in(i=e)&&"setHighlight"in i&&e.setHighlight(t)}var i;return this}}class io extends to{Le(){super.Le();const t=this.getPosition(n(-1,1),Rt.Content),i=this.Cd.reduce(((t,i)=>t+ +(i instanceof qn)),0),s=i>0?(this.size.x-this.kd)/i:0;return this.Cd.reduce(((i,e)=>e instanceof qn?this.scale.gi({x:i,y:t.y},{x:s+e.getSize().x,y:0}).x:e.setOrigin(n(-1,1)).setPosition(n(i,t.y)).Le().getPosition(n(1,0)).x),t.x),this}Es(){for(let t=0;t<this.Cd.length;t+=1){const i=this.Cd[t];i instanceof so&&i.setMinimumSize(0),i.Es()}const t=this.Cd.reduce(this.Id.bind(this),o(0,0));this.kd=t.x;const i=void 0===this.Fd?t:n(Math.max(t.x,this.Fd),t.y);this.setContentSize(i);for(let t=0;t<this.Cd.length;t+=1){const s=this.Cd[t];s instanceof so&&s.setMinimumSize(i.y).Es()}return super.Es()}Id(t,i){const s=i.getSize();return t.x+=s.x,t.y=Math.max(t.y,s.y),t}addGap(t=0,i=-1){return this.addElement(eo,i).setSize(n(0,t))}}class so extends to{Le(){super.Le();const t=this.getPosition(n(-1,1),Rt.Content),i=this.Cd.reduce(((t,i)=>t+ +(i instanceof qn)),0),s=i>0?(this.size.y-this.kd)/i:0;return this.Cd.reduce(((i,e)=>e instanceof qn?this.scale.gi({x:t.x,y:i},{x:0,y:-(s+e.getSize().y)}).y:e.setOrigin(n(-1,1)).setPosition(n(t.x,i)).Le().getPosition(n(0,-1)).y),t.y),this}Es(){for(let t=0;t<this.Cd.length;t+=1){const i=this.Cd[t];i instanceof io&&i.setMinimumSize(0),i.Es()}const t=this.Cd.reduce(this.Id.bind(this),o(0,0));this.kd=t.y;const i=void 0===this.Fd?t:n(t.x,Math.max(t.y,this.Fd));this.setContentSize(i);for(let t=0;t<this.Cd.length;t+=1){const s=this.Cd[t];s instanceof io&&s.setMinimumSize(i.x).Es()}return super.Es()}Id(t,i){const s=i.getSize();return t.y+=s.y,t.x=Math.max(t.x,s.x),t}addGap(t=0,i=-1){return this.addElement(eo,i).setSize(n(0,t))}}const eo={...tn,...en,uiElement:qn};class ho extends io{constructor(){super(...arguments),this.Cd=[]}addColumn(){return this.addElement(oo,void 0)}getColumn(t,i=!1){return i&&this.Cd.length<=t?(this.addColumn(),this.getColumn(t,!0)):this.Cd[t]}}class ro extends so{constructor(){super(...arguments),this.Cd=[]}addRow(){return this.addElement(ao,void 0)}getRow(t,i=!1){return i&&this.Cd.length<=t?(this.addRow(),this.getRow(t,!0)):this.Cd[t]}}const no={...tn,...sn,...hn},oo={...no,uiElement:so,background:Xn},ao={...no,uiElement:io,background:Xn},lo={setTextLabel:null,setText(t){return this.setTextLabel.setText(t),this},getText(){return this.setTextLabel.getText()}},uo=(t,i)=>{const s={},e=`stylable${t}s`;return s[e]=i,s[`set${t}FillStyle`]=function(t){return this[e].forEach((i=>i.setFillStyle(t))),this},s[`get${t}FillStyle`]=function(){return this[e][0].getFillStyle()},s[`set${t}Font`]=function(t){return this[e].forEach((i=>i.setFont(t))),this},s[`get${t}Font`]=function(){return this[e][0].getFont()},s[`set${t}Rotation`]=function(t){return this[e].forEach((i=>i.setTextRotation(t))),this},s[`get${t}Rotation`]=function(){return this[e][0].getTextRotation()},s},co=uo("Text",[]),fo={button:void 0,isLocked:!1,setOn(t){const i=this.button.getOn()!==t;return this.button.setOn(t),i&&this.L.emit("switch",t),this},getOn(){return this.button.getOn()},setLocked(t){return this.isLocked=t,this},getLocked(){return this.isLocked},onSwitch(t){return this.L.on("switch",(i=>t(this,i)))},offSwitch(t){return this.L.off(t,"switch")},setButtonOffFillStyle(t){return this.button.setOffFillStyle(t),this},getButtonOffFillStyle(){return this.button.getOffFillStyle()},setButtonOnFillStyle(t){return this.button.setOnFillStyle(t),this},getButtonOnFillStyle(){return this.button.getOnFillStyle()},setButtonSize(t){return this.button.setSize(t),this},getButtonSize(){return this.button.getSize()},setButtonShape(t){return this.button.setButtonShape(t),this},getButtonShape(){return this.button.getButtonShape()}},Ao={textFillStyleHidden:void 0,setTextFillStyleHidden(t){return this.textFillStyleHidden="function"==typeof t?t(this.textFillStyleHidden):t,this},getTextFillStyleHidden(){return this.textFillStyleHidden}},go={pointable:void 0,setDirection(t){return this.pointable.setDirection(t),this},getDirection(){return this.pointable.getDirection()},setPointerLength(t){return this.pointable.setPointerLength(t),this},getPointerLength(){return this.pointable.getPointerLength()}},yo={...tn,...sn,background:Xn,ic(t,i,s,e,h,r){const n=new io(t,i,s,this.background,e,h),o=n.addElement($n,void 0),a=Object.assign(n,lo,{setTextLabel:o},co,{stylableTexts:[o]});return qr(a,h,r),this.applyStylers(a,h)}}.addStyler(Jr),mo={...tn,...sn,background:Qn,direction:Vt.Up,setDirection(t){return this.direction=t,this},ic(t,i,s,e,h,r){const n=this.direction,o=new io(t,i,s,this.background,e,h),a=o.addElement($n,void 0),l=o.getBackground().setDirection(n),u=Object.assign(o,lo,{setTextLabel:a},co,{stylableTexts:[a]},go,{pointable:l},{setTickLabelPadding(t){return this.getDirection()===Vt.Up?(this.setPadding({top:t}),a.setMargin({top:0})):this.getDirection()===Vt.Down?(this.setPadding({bottom:t}),a.setMargin({bottom:0})):this.getDirection()===Vt.Right?(this.setPadding({right:t}),a.setMargin({right:0})):this.getDirection()===Vt.Left&&(this.setPadding({left:t}),a.setMargin({left:0})),this},getTickLabelPadding(){return this.getDirection()===Vt.Up?this.getPadding().top:this.getDirection()===Vt.Down?this.getPadding().bottom:this.getDirection()===Vt.Right?this.getPadding().right:this.getPadding().left}});return u.sc="other",u.setPointerLength(h.xAxisNumericTicks.majorTickStyle.getTickLength()).setTickLabelPadding(h.xAxisNumericTicks.majorTickStyle.getTickPadding()).setTextFont(h.uiTextFont).setTextFillStyle(h.uiTextFillStyle).setBackground((t=>t.setFillStyle(h.uiBackgroundFillStyle).setStrokeStyle(h.uiBackgroundStrokeStyle))),qr(u,h,r),this.applyStylers(u,h)}};class po extends $r{constructor(t,i,e,h,r,n){super(t,i,e,r,n),this.zs=!1,this.L=new s,this.Pd=O,this.Dd=O,this.getOn=()=>this.zs,this.Dd=n.uiButtonFillStyleHidden||n.uiButtonFillStyle,this.Bd=this.Tu(new Jn(this.Ds,this.renderingScale,this.scale,Yt,n).setShape(h)).setFillStyle(this.Dd)}Ru(){return[...this.Bd.Ru()]}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}setOn(t){return this.zs=t,this.Bd.setFillStyle(t?this.Pd:this.Dd),this.Ds.xs(),this}setOffFillStyle(t){return this.Dd="function"==typeof t?t(this.Dd):t,this.zs||this.Bd.setFillStyle(this.Dd),this}getOffFillStyle(){return this.Dd}setSize(t){return this.Bd.fitTo("number"==typeof t?n(t,t):t),this}getSize(){return this.Bd.getSize()}setOnFillStyle(t){return this.Pd="function"==typeof t?t(this.Pd):t,this.zs&&this.Bd.setFillStyle(this.Pd),this}getOnFillStyle(){return this.Pd}setButtonShape(t){return this.Bd.setShape(t),this.Ds.xs(),this}getButtonShape(){return this.Bd.getShape()}Le(){return super.Le(),this.Bd.setVisible(this.getVisible()).setPosition(this.getPosition(n(0,0),Rt.Content)).Le(),this}Es(){const t=this.Bd.Es().getSize();return this.setContentSize(t),super.Es()}dispose(){return super.dispose(),this.Bd.dispose(),this}setMouseInteractions(t){return this.Bd.setMouseInteractions(t),this}getMouseInteractions(){return this.Bd.getMouseInteractions()}setHighlight(t){const i=zi(t);return this.Bd.setHighlight(i),this.L.emit("highlight",this,t),this.Ds.xs(),this}getHighlight(){return this.Bd.getHighlight()}}const vo={...tn,uiElement:po,buttonShape:sr.Circle,setButtonShape(t){return{...this,buttonShape:t}},ic(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.buttonShape,e,h),h);return qr(n,h,r),n}},So={...tn,...sn,background:Xn,buttonBuilder:vo,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},ic(t,i,s,e,h,r){const n=new io(t,i,s,this.background,e,h),o=n.addElement(oo);o.addGap();const a=o.addElement(this.buttonBuilder);o.addGap();const l=n.addElement(oo);l.addGap();const u=l.addElement($n);l.addGap(),n.addGap();const c=Object.assign(n,lo,{setTextLabel:u},co,{stylableTexts:[u]},fo,{button:a},Ao);let d;return c.onMouseClick(((t,i)=>{c.getLocked()||c.setOn(!c.getOn())})),c.onMouseEnter((()=>c.setHighlight(!0))),c.onMouseLeave((()=>c.setHighlight(!1))),c.setMouseStyle(Xe.Point),c.setTextFillStyleHidden(h.uiTextFillStyleHidden||h.uiTextFillStyle),c.onSwitch(((t,i)=>{i?d&&c.setTextFillStyle(d):(d=c.getTextFillStyle(),c.setTextFillStyle(c.getTextFillStyleHidden()))})),c.setPadding({left:5}),qr(c,h,r),this.applyStylers(c,h)}}.addStyler(Jr).addStyler(Kr);class bo extends $r{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.Ld=[],this.Rd=2,this.Ed="",this.zd=(t,i)=>void 0!==t.label?t.label:i.percentageValues?`${(100*t.value).toFixed(0)}%`:$s(t.value,i.min,i.max),this.Vd=0,this.Od=0,this.Nd=!1,this.Ds=t,this.Gd=r,this.Wd=this.Tu(t.Be(i).Pe(at)),this.Ud=this.Tu(t.Nr(i).De(h.uiTextFillStyle).Zh(h.uiTextFont).setMouseInteractions(!1)),"vertical"===r?(this.Yd=140,this.Hd=25):(this.Yd=160,this.Hd=15)}Ru(){return[this.Wd,this.Ud]}$d(t){this.Xd=t;const i=_o(t,"vertical"===this.Gd?0:90,this.Nd);return this.Wd.De(i),this.Ds.xs(),this}jd(){return this.Xd}Zd(t){return this.Yd=t,this.Ds.xs(),this}Qd(){return this.Yd}Jd(t){return this.Hd=t,this.Ds.xs(),this}Kd(){return this.Hd}qd(t){return this.Ed=t,this.Ds.xs(),this}tf(){return this.Ed}if(t){return this.zd=t,this.Ds.xs(),this}setLUTDisplayProportionalSteps(t){if(this.Nd=t,this.Xd){const t=_o(this.Xd,"vertical"===this.Gd?0:90,this.Nd);this.Wd.De(t)}return this.Ds.xs(),this}getLUTDisplayProportionalSteps(){return this.Nd}setFillStyle(t){return this.Ud.De(t),this.Ds.xs(),this}getFillStyle(){return this.Ud.$h()}setFont(t){return this.Ud.Zh(t),this.Ds.xs(),this}getFont(){return this.Ud.jh()}setTextRotation(t){return this.Od=t,this.Ud.Qh(t),this.Ds.xs(),this}getTextRotation(){return this.Ud.Jh()}Le(){var t,i,s,e;if(super.Le(),this.Xi||!this.getVisible())return this;const h=this.Xd;if(h){const r=this.renderingScale.Gi(),n=h.min,o=h.max;if("vertical"===this.Gd){const s=this.getPosition({x:-1,y:-1},Rt.Content),e=ws(s,{x:this.Wd.ni().x+this.Rd*r.x,y:0}),a={x:e.x,y:e.y+(this.Ed.length>0?this.Vd*r.y+this.Ud.ni().y:0)+.5*((null===(t=this.Ld[0])||void 0===t?void 0:t.ni().y)||0)},l={x:a.x,y:this.getPosition({x:-1,y:1},Rt.Content).y-.5*((null===(i=this.Ld[this.Ld.length-1])||void 0===i?void 0:i.ni().y)||0)};this.Wd.Re({x:s.x,y:a.y}),this.Ud.Ha({x:-1,y:-1}).Re(e),h.getSteps().forEach(((t,i)=>{const s=ds(a,l,this.Nd?!0===h.getInterpolation()?(t.value-n)/(o-n):.9*(t.value-n)/(o-n):!0===h.getInterpolation()?i/(h.getSteps().length-1):i/h.getSteps().length);this.Ld[i].Ha({x:-1,y:0}).Re(s)}))}else{const t=this.getPosition({x:-1,y:-1},Rt.Content),i=this.getPosition({x:1,y:1},Rt.Content),a=this.Ld.reduce(((t,i)=>Math.max(t,i.ni().y)),0),l=ws(t,{x:.5*((null===(s=this.Ld[0])||void 0===s?void 0:s.ni().x)||0),y:a}),u={x:i.x,y:l.y},c={x:u.x-(.5*((null===(e=this.Ld[this.Ld.length-1])||void 0===e?void 0:e.ni().x)||0)+(this.Ed.length>0?this.Vd*r.x+this.Ud.ni().x:0)),y:l.y},d={x:l.x,y:l.y+this.Rd*r.y};this.Wd.Re(d),this.Ud.Ha({x:1,y:1}).Re(u),h.getSteps().forEach(((t,i)=>{const s=ds(l,c,this.Nd?!0===h.getInterpolation()?(t.value-n)/(o-n):.9*(t.value-n)/(o-n):!0===h.getInterpolation()?i/(h.getSteps().length-1):i/h.getSteps().length);this.Ld[i].Ha({x:0,y:1}).Re(s)}))}}return this}Es(){if(this.Xd&&this.getVisible()){const t=this.Xd.getSteps();for(let i=this.Ld.length;i<t.length;i+=1)this.Ld.push(this.Tu(this.Ds.Nr(this.renderingScale).setMouseInteractions(!1)));for(let i=0;i<t.length;i+=1)this.Ld[i].De(this.Ud.$h()).Zh(this.Ud.jh()).yr(this.zd(t[i],this.Xd)).Qh(this.Od);for(let i=t.length;i<this.Ld.length;i+=1)this.Ld[i].dispose();if(this.Ld.length=t.length,this.Ud.yr(this.Ed),"vertical"===this.Gd){const t=this.Hd,i=this.Yd;this.Wd.tt({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=t+Math.max(this.Ld.reduce(((t,i)=>Math.max(t,i.Es().sd().x)),0),this.Ud.Es().sd().x),e=(this.Ed.length>0?this.Vd+this.Ud.Es().sd().y:0)+i+.5*this.Ld[0].Es().sd().y+.5*this.Ld[this.Ld.length-1].Es().sd().y;this.setContentSize({x:s,y:e})}else{const t=this.Yd,i=this.Hd;this.Wd.tt({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=Math.max(this.Ed.length>0?this.Vd+this.Ud.Es().sd().x:0,.5*this.Ld[this.Ld.length-1].Es().sd().x),e=t+.5*this.Ld[0].Es().sd().x+s,h=i+this.Rd+this.Ld.reduce(((t,i)=>Math.max(t,i.Es().sd().y)),0);this.setContentSize({x:e,y:h})}}else this.Ld.forEach((t=>t.dispose())),this.Ld.length=0,this.Ud.setVisible(!1),this.Wd.setVisible(!1),this.setContentSize({x:0,y:0});return super.Es()}dispose(){return super.dispose(),this.Wd.dispose(),this.Ld.forEach(Ut),this.Ud.dispose(),this}setMouseInteractions(t){return this.Wd.setMouseInteractions(t),this}getMouseInteractions(){return this.Wd.getMouseInteractions()}}const xo={lutElement:{},setLUT(t){return this.lutElement.$d(t),this},getLUT(){return this.lutElement.jd()},setLUTLength(t){return this.lutElement.Zd(t),this},getLUTLength(){return this.lutElement.Qd()},setLUTThickness(t){return this.lutElement.Jd(t),this},getLUTThickness(){return this.lutElement.Kd()},setLookUpUnit(t){return this.lutElement.qd(t),this},getLookUpUnit(){return this.lutElement.tf()},setLUTStepValueFormatter(t){return this.lutElement.if(t),this},setLUTDisplayProportionalSteps(t){return this.lutElement.setLUTDisplayProportionalSteps(t),this},getLUTDisplayProportionalSteps(){return this.lutElement.getLUTDisplayProportionalSteps()}},Mo={...tn,...sn,background:Xn,alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},ic(t,i,s,e,h,r){const n=new so(t,i,s,this.background,e,h),o=n.addElement({ic:()=>new bo(t,i,s,Yt,h,this.alignment)}),a=Object.assign(n,co,{stylableTexts:[o]},xo,{lutElement:o});return qr(a,h,r),this.applyStylers(a,h)}}.addStyler(Jr),_o=(t,i,s)=>{const e=t.getSteps(),h=t.min,r=t.max-h;if(!0===t.getInterpolation())return new rt({angle:i,stops:e.map(((i,n)=>({offset:s?(i.value-h)/r:n/(e.length-1),color:i.color||t.color})))});const n=[];for(let i=0;i<e.length;i+=1){const o=e[i];n.push({offset:s?.9*(o.value-h)/r:i/e.length,color:o.color||t.color});const a=i<e.length-1?e[i+1]:void 0;n.push({offset:s?a?.9*(a.value-h)/r:1:a?(i+1)/e.length:1,color:o.color||t.color})}return new rt({angle:i,stops:n})},wo={...tn,...sn,background:Xn,buttonBuilder:vo,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},ic(t,i,s,e,h){const r=new so(t,i,s,this.background,e,h),n=r.addElement(ao),o=n.addElement(oo);o.addGap();const a=o.addElement(this.buttonBuilder);o.addGap();const l=n.addElement(oo);l.addGap();const u=l.addElement($n);l.addGap();const c=r.addElement({ic:()=>new bo(t,i,s,Yt,h,this.alignment)});"vertical"===this.alignment&&c.setMargin({left:h.uiButtonSize+6});const d=Object.assign(r,lo,{setTextLabel:u},co,{stylableTexts:[u,c]},uo("LUTText",[c]),fo,{button:a},xo,{lutElement:c},Ao);let f;return d.onMouseClick((()=>{d.getLocked()||d.setOn(!d.getOn())})),d.onMouseEnter((()=>d.setHighlight(!0))),d.onMouseLeave((()=>d.setHighlight(!1))),d.setMouseStyle(Xe.Point),d.setTextFillStyleHidden(h.uiTextFillStyleHidden||h.uiTextFillStyle),d.onSwitch(((t,i)=>{i?f&&d.setTextFillStyle(f):(f=d.getTextFillStyle(),d.setTextFillStyle(d.getTextFillStyleHidden()))})),d.setPadding({left:5}),this.applyStylers(d,h)}}.addStyler(Jr).addStyler(Kr),Co={alignment:null,title:null,entryStylers:null,legendBoxDisposed:null,entries:[],add(t,i){const s=!i||"object"!=typeof i||void 0===i.toggleVisibilityOnClick||i.toggleVisibilityOnClick,e=null==i?void 0:i.matchStyleExactly,h=i&&"object"==typeof i&&void 0!==i.builder?i.builder:void 0;return this.legendBoxDisposed()||(t instanceof La?this.addChart(t,s,h,e):"attach"in t?this.addAttachable(t,s,h,e):t&&this.addDashboard(t,s,h,e)),this},addAttachable(t,i,s,e){const h=t.jd&&t.jd(),r=t.Is&&t.Is(),n=void 0!==e&&e;let o=s;if(!o){let t=h?wo.setAlignment(this.alignment):So;void 0!==r&&(t=t.setButtonShape(r)),o=t}const a=this.addElement(o);if(h&&"setLUT"in a){a.setLUT(h.lut);const t=h.lut.getUnits(),i=h.lookUpProperty,s=t.length>0?t:"x"===i?"x":"y"===i?"y":"z"===i?"z":"";a.setLookUpUnit(s)}return this.entryStylers.forEach((t=>t(a))),this.entries.push({entry:a,component:t}),t.attach(a,i,n),i||a.setLocked(!0),this},addChart(t,i,s,e){return t.sf().forEach((t=>this.addAttachable(t,i,s,e))),this},addDashboard(t,i,s,e){return t.getCells().filter((t=>t.panel instanceof La)).forEach((t=>this.addChart(t.panel,i,s,e))),this},setTitle(t){return this.title.setText(t),this},getTitle(){return this.title.getText()},setTitleFillStyle(t){return this.title.setTextFillStyle(t),this},getTitleFillStyle(){return this.title.getTextFillStyle()},setTitleFont(t){return this.title.setTextFont(t),this},getTitleFont(){return this.title.getTextFont()},setTitleRotation(t){return this.title.setTextRotation(t),this},getTitleRotation(){return this.title.getTextRotation()},setEntries(t){return this.entries.forEach((i=>t(i.entry,i.component))),this}},ko={alignment:"vertical",layoutBuilder:oo,setAlignment(t){return{...this,alignment:t,layoutBuilder:"horizontal"===t?ao:oo}},getAlignment(){return this.alignment},titleBuilder:yo,styleTitle(t){return{...this,titleBuilder:this.titleBuilder.addStyler(t)}},entryStylers:[],styleEntries(t){return{...this,entryStylers:[...this.entryStylers,t]}}},To={...tn,...sn,...ko,background:Xn,ic(t,i,s,e,h,r){const n=this.layoutBuilder.setBackground(this.background).ic(t,i,s,e,h,!1);let o=Object.assign(n,Co,{alignment:this.alignment,entryStylers:this.entryStylers,legendBoxDisposed:()=>n.Xi});o.entries=[];const a=o.addElement("horizontal"===this.alignment?oo:ao),l=a.addElement(this.titleBuilder).setText("Legend").setTextFillStyle(h.legendTitleFillStyle).setTextFont(h.legendTitleFont);return a.addGap(),o=Object.assign(o,{title:l}),"horizontal"===this.alignment&&l.setMargin({right:6}),qr(o,h,r),this.applyStylers(o,h)}}.addStyler(((t,i)=>t.setPadding(5)));class Fo extends $r{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ef=10,this.hf=Vt.Up,this.rf=0,this.sc="major",this.pa=this.Tu(t.Nr(this.renderingScale).Vr(Hi).Or(Hi)),this.Ne=this.Tu(t.We(this.renderingScale))}Ru(){return[this.pa]}Le(){if(super.Le(),this.Xi)return this;const t=At(this.getPosition(),this.scale,this.renderingScale),i=this.renderingScale.gi(t,{x:this.hf===Vt.Right?-this.ef:this.hf===Vt.Left?this.ef:0,y:this.hf===Vt.Up?-this.ef:this.hf===Vt.Down?this.ef:0}),s=this.renderingScale.gi(i,{x:this.hf===Vt.Right?-this.rf:this.hf===Vt.Left?this.rf:0,y:this.hf===Vt.Up?-this.rf:this.hf===Vt.Down?this.rf:0});return this.Ne.Ye(t).Ue(i),this.pa.Re(s).Ha(this.hf===Vt.Up?{x:0,y:1}:this.hf===Vt.Down?{x:0,y:-1}:this.hf===Vt.Right?{x:1,y:0}:{x:-1,y:0}),this}Es(){const t=this.Ne.mu().getThickness();return this.size=this.hf===Vt.Left||this.hf===Vt.Right?{x:this.ef+this.rf+this.pa.Es().sd().x,y:t}:{y:this.ef+this.rf+this.pa.Es().sd().y,x:t},super.Es()}dispose(){return super.dispose(),this.pa.dispose(),this.Ne.dispose(),this}setVisible(t){return super.setVisible(t),this.pa.setVisible(t),this.Ne.setVisible(t),this}setMouseInteractions(t){return this.pa.setMouseInteractions(t),this.Ne.setMouseInteractions(t),this}getMouseInteractions(){return this.pa.getMouseInteractions()}getText(){return this.pa.wr()}setTextFillStyle(t){return this.pa.De(t),this.Ds.xs(),this}getTextFillStyle(){return this.pa.$h()}setTextFont(t){return this.pa.Zh(t),this}setTextRotation(t){return this.pa.Qh(t),this}getTextRotation(){return this.pa.Jh()}getTextFont(){return this.pa.jh()}setText(t){return this.pa.yr(t),this.Ds.xs(),this}setDirection(t){return this.hf=t,this.Ds.xs(),this}getDirection(){return this.hf}setPointerLength(t){return this.ef=t,this.Ds.xs(),this}getPointerLength(){return this.ef}setTickLabelPadding(t){return this.rf=t,this.Ds.xs(),this}getTickLabelPadding(){return this.rf}setTickStyle(t){return this.Ne.Ge(t),this.Ds.xs(),this}getTickStyle(){return this.Ne.mu()}}const Io={...tn,direction:Vt.Up,setDirection(t){return this.direction=t,this},ic(t,i,s,e,h,r){const n=this.direction,o=new Fo(t,i,s,e,h);return qr(o,h,r),o.setDirection(n),this.applyStylers(o,h)}}.addStyler(Jr),Po=Io.addStyler(((t,i)=>(t.sc="major",t.setPointerLength(i.xAxisNumericTicks.majorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.majorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.majorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.majorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.majorTickStyle.labelFillStyle)))),Do=Io.addStyler(((t,i)=>(t.sc="minor",t.setPointerLength(i.xAxisNumericTicks.minorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.minorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.minorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.minorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.minorTickStyle.labelFillStyle)))),Bo=So.addStyler((t=>t.onSwitch(((i,s)=>!0===s?setTimeout((()=>t.setOn(!1)),300):void 0)))),Lo=To.setAlignment("horizontal"),Ro=To.setAlignment("vertical"),Eo={TextBox:yo,CheckBox:So,ButtonBox:Bo,PointableTextBox:mo,AxisTickMajor:Po,AxisTickMinor:Do,LUTRange:Mo},zo={HorizontalLegendBox:Lo,VerticalLegendBox:Ro},Vo={nf:0,af:1,lf:2,uf:3,cf:4,df:5,ff:6,Af:7,gf:8,yf:9,mf:10,pf:11,vf:12,Sf:13,bf:14,xf:15,Mf:16,_f:17,wf:18,Cf:19,kf:20,Tf:21,Ff:22,If:23};class Oo extends Mh{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Pf=h}}class No extends xh{constructor(t,i,e,h,r,o,a,l,u,c,d,f,A,g,y,m){var p,v,S;super(c,u,a,g,y,{numeric:u.getWidth({x:g.xAxisNumericTicks,y:g.yAxisNumericTicks}),datetime:u.getWidth({x:g.xAxisDateTimeTicks,y:g.yAxisDateTimeTicks}),time:u.getWidth({x:g.xAxisTimeTicks,y:g.yAxisTimeTicks})},m),this.Df=new Map,this.Bf=void 0,this.Lf=0,this.Rf=[],this.Ef=[],this.oh=nh.fitting,this.zf=!0,this.Vf=8,this.Of=void 0,this.Nf=void 0,this.Gf=20,this.Wf=1,this.Uf=!0,this.Yf=!0,this.Hf=!0,this.$f=!0,this.Xf=!0,this.jf=!0,this.Zf=!0,this.Qf=!0,this.Jf=!0,this.Kf=!0,this.qf=this.Eh.defaultDragMouseStyle,this.tA=this.Eh.defaultDragMouseStyle,this.iA=this.Eh.defaultDragMouseStyle,this.sA=this.Eh.defaultDragMouseStyle,this.eA=this.Eh.defaultDragMouseStyle,this.L=new s,this.hA=[],this.rA=t=>{const i=this.Ef.indexOf(t);i>=0&&this.Ef.splice(i,1)},this.nA=t=>(this.Ef.indexOf(t)<0&&this.Ef.push(t),this.rA),this.oA="center",this.Lt=(t,i)=>this.L.emit("axisAreaTouch",this,i),this.aA=yi(this.hA),this.onAxisInteractionAreaMouseClick=t=>this.L.on("axisAreaMouseClick",t),this.onAxisInteractionAreaMouseDoubleClick=t=>this.L.on("axisAreaDoubleClick",t),this.onAxisInteractionAreaMouseDown=t=>this.L.on("axisAreaMouseDown",t),this.onAxisInteractionAreaMouseUp=t=>this.L.on("axisAreaMouseUp",t),this.onAxisInteractionAreaMouseEnter=t=>this.L.on("axisAreaMouseEnter",t),this.onAxisInteractionAreaMouseLeave=t=>this.L.on("axisAreaMouseLeave",t),this.onAxisInteractionAreaMouseMove=t=>this.L.on("axisAreaMouseMove",t),this.onAxisInteractionAreaMouseWheel=t=>this.L.on("axisAreaMouseWheel",t),this.onAxisInteractionAreaMouseDragStart=t=>this.L.on("axisAreaMouseDragStart",t),this.onAxisInteractionAreaMouseDrag=t=>this.L.on("axisAreaMouseDrag",t),this.onAxisInteractionAreaMouseDragStop=t=>this.L.on("axisAreaMouseDragStop",t),this.onAxisInteractionAreaTouchStart=t=>this.L.on("axisAreaTouchStart",t),this.onAxisInteractionAreaTouch=t=>this.L.on("axisAreaTouch",t),this.onAxisInteractionAreaTouchStop=t=>this.L.on("axisAreaTouchEnd",t),this.offAxisInteractionAreaMouseClick=t=>this.L.off(t,"axisAreaMouseClick"),this.offAxisInteractionAreaMouseDoubleClick=t=>this.L.off(t,"axisAreaDoubleClick"),this.offAxisInteractionAreaMouseDown=t=>this.L.off(t,"axisAreaMouseDown"),this.offAxisInteractionAreaMouseUp=t=>this.L.off(t,"axisAreaMouseUp"),this.offAxisInteractionAreaMouseEnter=t=>this.L.off(t,"axisAreaMouseEnter"),this.offAxisInteractionAreaMouseLeave=t=>this.L.off(t,"axisAreaMouseLeave"),this.offAxisInteractionAreaMouseMove=t=>this.L.off(t,"axisAreaMouseMove"),this.offAxisInteractionAreaMouseWheel=t=>this.L.off(t,"axisAreaMouseWheel"),this.offAxisInteractionAreaMouseDragStart=t=>this.L.off(t,"axisAreaMouseDragStart"),this.offAxisInteractionAreaMouseDrag=t=>this.L.off(t,"axisAreaMouseDrag"),this.offAxisInteractionAreaMouseDragStop=t=>this.L.off(t,"axisAreaMouseDragStop"),this.offAxisInteractionAreaTouchStart=t=>this.L.off(t,"axisAreaTouchStart"),this.offAxisInteractionAreaTouch=t=>this.L.off(t,"axisAreaTouch"),this.offAxisInteractionAreaTouchStop=t=>this.L.off(t,"axisAreaTouchEnd"),this.Yd={relative:1},this.lA=0,this.uA=0,this.cA=(t,i)=>i.getAllocatesAxisSpace()?Math.max(t,i.update().nc()):t,this.dA=t=>{const i=this.Rf.indexOf(t);-1!==i&&this.Rf.splice(i,1)},this.fA=(t,i)=>{this.L.emit("axisAreaDoubleClick",this,i),this.$f&&(this.setStopped(!1),di(i))},this.AA=t=>{this.L.emit("axisAreaMouseEnter",this),(this.Yf||this.Uf||this.Hf||this.$f)&&this.gA(t)},this.yA=t=>{this.mA(t),this.L.emit("axisAreaMouseLeave",this)},this.pA=(t,i,s)=>{var e,h;this.L.emit("axisAreaMouseDragStart",this,i,s);const r=jt(null===(e=this.chart.vA.Kn)||void 0===e?void 0:e.axisXYZoomMouseButton,0),o=jt(null===(h=this.chart.vA.Kn)||void 0===h?void 0:h.axisXYPanMouseButton,2),a=n(i.clientX,i.clientY);s===o&&this.Yf?(this.SA(t),di(i)):s===r&&this.Uf&&(this.bA(t,a),di(i))},this.xA=(t,i,s,e,h)=>{var r,o;this.L.emit("axisAreaMouseDrag",this,i,s,e,h);const a=jt(null===(r=this.chart.vA.Kn)||void 0===r?void 0:r.axisXYZoomMouseButton,0),l=jt(null===(o=this.chart.vA.Kn)||void 0===o?void 0:o.axisXYPanMouseButton,2),u=n(i.clientX,i.clientY);s===l&&this.Yf?(this.MA(t,h),di(i)):s===a&&this.Uf&&(this._A(t,e,u,h),di(i))},this.wA=(t,i,s,e)=>{var h,r;this.L.emit("axisAreaMouseDragStop",this,i,s,e);const o=jt(null===(h=this.chart.vA.Kn)||void 0===h?void 0:h.axisXYZoomMouseButton,0),a=jt(null===(r=this.chart.vA.Kn)||void 0===r?void 0:r.axisXYPanMouseButton,2),l=n(i.clientX,i.clientY);s===a&&this.Yf?(this.CA(t),di(i)):s===o&&this.Uf&&(this.kA(t,e,l),di(i)),t.getIsUnderMouse()&&(this.Yf||this.Uf||this.Hf||this.$f)&&this.gA(t)},this.TA=(t,i)=>{if(this.L.emit("axisAreaMouseWheel",this,i),this.Hf){this.setStopped(!0);const t=this.Eh.getWidth(this.FA.us.ze(i.clientX,i.clientY)),s=this.ft.ct(t);this.zoom(s,Pi(i)),di(i)}},this.IA=(t,i)=>this.L.emit("axisAreaMouseClick",this,i),this.PA=(t,i)=>this.L.emit("axisAreaMouseDown",this,i),this.DA=(t,i)=>this.L.emit("axisAreaMouseUp",this,i),this.BA=(t,i)=>this.L.emit("axisAreaMouseMove",this,i),this.LA=(t,i,s)=>{this.L.emit("axisAreaTouchStart",this,s),this.Uf&&(this.gA(t),this.bA(t,i),di(s))},this.RA=(t,i,s,e,h)=>{this.L.emit("axisAreaTouch",this,h),this.Uf&&(this._A(t,i,s,e),di(h))},this.EA=(t,i,s,e)=>{this.L.emit("axisAreaTouchEnd",this,e),this.Uf&&(this.kA(t,i,s),this.mA(t),di(e))},this.zA=(t,i,s,e)=>{(this.Yf||this.Hf)&&(this.gA(t),this.SA(t),di(e))},this.VA=(t,i,s,e,h,r)=>{if(this.Yf){const i=n((e.x+h.x)/2,(e.y+h.y)/2);this.MA(t,i),di(r)}if(this.Hf){const t=this.FA.us.ze(i.x,i.y),n=this.FA.us.ze(s.x,s.y),o=Math.abs(this.Eh.getWidth(Cs(t,e))-this.Eh.getWidth(Cs(n,h)))-Math.abs(this.Eh.getWidth(t)-this.Eh.getWidth(n)),a=this.ft.gi(this.Gh,-o),l=this.ft.gi(this.Wh,o);this.er(a,l,!0),di(r)}},this.OA=(t,i,s,e)=>{(this.Yf||this.Hf)&&(this.CA(t),this.mA(t),di(e))},this.NA=(t,i)=>{(this.Xf||this.jf)&&this.GA(t)},this.WA=(t,i)=>{this.UA(t)},this.YA=(t,i,s)=>{const e=n(i.clientX,i.clientY);this.Xf&&this.HA(t,e)},this.$A=(t,i,s,e,h)=>{const r=n(i.clientX,i.clientY);this.Xf&&this.XA(t,r,e,h)},this.jA=(t,i,s,e,h)=>{const r=n(i.clientX,i.clientY);this.Xf&&this.ZA(t,r,e,h)},this.QA=(t,i,s,e)=>{const h=n(i.clientX,i.clientY);(this.Xf||this.jf)&&this.JA(t,h,e),(this.Xf||this.jf)&&this.GA(t)},this.KA=(t,i)=>{this.jf&&(this.setStopped(!0),this.zoom(this.Gh,Pi(i)),di(i))},this.qA=(t,i)=>{this.jf&&(this.setStopped(!0),this.zoom(this.Wh,Pi(i)),di(i))},this.tg=(t,i,s)=>{this.Xf&&(this.GA(t),this.HA(t,i),di(s))},this.ig=(t,i,s,e,h)=>{this.Xf&&(this.XA(t,i,s,e),di(h))},this.sg=(t,i,s,e,h)=>{this.Xf&&(this.ZA(t,i,s,e),di(h))},this.eg=(t,i,s,e)=>{this.Xf&&(this.JA(t,i,s),this.UA(t),di(e))},this.hg=t,this.FA=i,this.rg=h,this.ng=r,this.chart=c,this.og=f,this.ag=e,this.ss=o,"logarithmic"===m.type&&this.chart.us.jn(Vo.Cf),A(this,this.nA),a.lg=this,this.ug=d,this.cg=this.ug>50?1:-1,this.dg=(S=this.Eh.toPoint(0,-this.cg),Math.abs(S.x)>=Math.abs(S.y)?S.x>=0?Vt.Right:Vt.Left:S.y>=0?Vt.Up:Vt.Down),this.Ag=l,this.gg=this.ft instanceof Zs?(new Ks).Li(this.Eh.toVec2(this.ft,this.Ag)):(new qs).Li(this.Eh.toVec2(this.ft,this.Ag)),this.yg=this.chart.mg,this.pg=(new Ks).Li(this.Eh.toVec2(this.Eh.getWidth(this.yg),this.Ag)),this.vg=this.FA.We(this.gg).setMouseInteractions(!1),this.Sg=this.FA.We(this.gg).setMouseInteractions(!1),this.bg=this.FA.We(this.gg).setMouseInteractions(!1),this.xg=this.ag.Be(this.yg).De(u.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).Pe(at).sa(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.Mg=this.ag.Be(this.yg).De(u.getWidth({x:g.xAxisZoomingBandFillStyle,y:g.yAxisZoomingBandFillStyle})).Pe(u.getWidth({x:g.xAxisZoomingBandStrokeStyle,y:g.yAxisZoomingBandStrokeStyle})),this._g=this.ag.Be(this.yg).De(u.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).Pe(at).sa(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.wg=this.ag.Be(this.yg).De(u.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).Pe(at).sa(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this._h=this.ag.Nr(this.gg).setMouseInteractions(!1).Qh(this.Eh.getTitleTextRotation(this.cg)).Or(Hi).Vr(Hi),this.chart.us.ls.os(this.xg,(t=>this.xg.cs(t)),{animationEnabled:this.uh}),this.chart.us.ls.os(this._g,(t=>this._g.cs(t)),{animationEnabled:this.uh}),this.chart.us.ls.os(this.wg,(t=>this.wg.cs(t)),{animationEnabled:this.uh});const b=Ae(new ye(this.LA,this.RA,this.EA,1),new me(this.zA,this.VA,this.OA),new ge(this.fA)),x=Ae(new ye(this.tg,this.ig,this.eg)),M=Ae(new ye(this.tg,this.sg,this.eg));this.xg.setMouseEnterEventHandler(this.AA).setMouseLeaveEventHandler(this.yA).setMouseDragStartEventHandler(this.pA).setMouseDragEventHandler(this.xA).setMouseDragStopEventHandler(this.wA).setMouseWheelEventHandler(this.TA).setMouseDoubleClickEventHandler(this.fA).setMouseClickEventHandler(this.IA).setMouseDownEventHandler(this.PA).setMouseUpEventHandler(this.DA).setMouseMoveEventHandler(this.BA).setTouchStartEventHandler(b.onTouchStart).setTouchMoveEventHandler(b.onTouchMove).setTouchEndEventHandler(b.onTouchEnd),this._g.setMouseEnterEventHandler(this.NA).setMouseLeaveEventHandler(this.WA).setMouseDragStartEventHandler(this.YA).setMouseDragEventHandler(this.$A).setMouseDragStopEventHandler(this.QA).setMouseWheelEventHandler(this.KA).setTouchStartEventHandler(x.onTouchStart).setTouchMoveEventHandler(x.onTouchMove).setTouchEndEventHandler(x.onTouchEnd),this.wg.setMouseEnterEventHandler(this.NA).setMouseLeaveEventHandler(this.WA).setMouseDragStartEventHandler(this.YA).setMouseDragEventHandler(this.jA).setMouseDragStopEventHandler(this.QA).setMouseWheelEventHandler(this.qA).setTouchStartEventHandler(M.onTouchStart).setTouchMoveEventHandler(M.onTouchMove).setTouchEndEventHandler(M.onTouchEnd),this.vg.Ge(u.getWidth({x:g.xAxisStrokeStyle,y:g.yAxisStrokeStyle})),this.Sg.Ge(u.getWidth({x:g.xAxisNibStyle,y:g.yAxisNibStyle})),this.bg.Ge(u.getWidth({x:g.xAxisNibStyle,y:g.yAxisNibStyle})),this._h.De(u.getWidth({x:g.xAxisTitleFillStyle,y:g.yAxisTitleFillStyle})).Zh(u.getWidth({x:g.xAxisTitleFont,y:g.yAxisTitleFont})),this.es=o.hs(this,{}),this.Kh=this.es.Cg([this._h]).bs(g.effectsText),this.kg=null!==(p=u.getWidth({x:g.xAxisMarginAfterTicks,y:g.yAxisMarginAfterTicks}))&&void 0!==p?p:7,this.Tg=null!==(v=u.getWidth({x:g.xAxisMarginAfterTitle,y:g.yAxisMarginAfterTitle}))&&void 0!==v?v:7}Er(){return this.Ah}zr(){return void 0!==this.sr}setTickStrategy(t,i){return super.Nh(t,i)}getTickStrategy(){return this.eh}addBand(t=!0){const i=t?this.ng:this.rg,s=new hh(i,this.chart,this.aA,this,this.gg,this.Eh,this.qi,this.ss);return this.hA.push(s),s}addConstantLine(t=!0){const i=t?this.ng:this.rg,s=new rh(i,this.chart,this.aA,this,this.gg,this.Eh,this.qi,this.ss);return this.hA.push(s),s}Fg(t){this.hA.forEach(t)}Ig(t){return this.hA.map(t)}getHighlighters(){return this.hA}setThickness(t){return"number"==typeof t?(this.Pg=t,this.Dg=t):"object"==typeof t&&(this.Pg=t.min,this.Dg=t.max),this.chart.us.xs(),this}getThickness(){return{min:this.Pg,max:this.Dg}}setMouseInteractions(t){return this.setAxisInteractionPanByDragging(t).setAxisInteractionReleaseByDoubleClicking(t).setAxisInteractionZoomByDragging(t).setAxisInteractionZoomByWheeling(t).setNibInteractionScaleByDragging(t).setNibInteractionScaleByWheeling(t)}Bg(){return this.Ef}vr(t,i){return new Oo(i,t,this.FA,this.gg,this.gg)}qh(){if(this.Df){for(const t of this.Df)t[1].grid.dispose(),t[1].tick.dispose();this.Df.clear()}super.qh()}Sr(t,i){const{tickStart:s}=i,e=t.Ph.pr,h=s+e.getTickLength()*this.cg+e.getTickPadding()*this.cg;t.th.Re(this.Eh.toPoint(t.S,h)).Ha(this.Eh.toPoint(e.getLabelAlignment(),-this.cg)).Qh(e.labelRotation).setVisible(this.getVisible())}Lg(t,i){const{startPosition:s,gridStrokeLen:e,gridStrokeStart:h,tickStart:r}=i,n=t.Ph.pr,o=s-e*n.getGridStrokeLength(),a=r+n.getTickLength()*this.cg;return{gridStroke:{start:this.Eh.toPoint(t.S,h),end:this.Eh.toPoint(t.S,o)},tickStroke:{start:this.Eh.toPoint(t.S,r),end:this.Eh.toPoint(t.S,a)}}}Br(t,i){return"linear"===this.Vh.type?ae(t,i,this.ft):le(t,i,this.ft)}Rg(t,i){return i instanceof Zs?ae:le}Rr(t,i,s){if("logarithmic"!==this.Vh.type){const e=this.ft.Bi(i-t);return{min:t-s*e,max:i+s*e}}const e=this.ft;return{min:e.gi(t,-s),max:e.gi(i,s)}}Es(){if(!this.ji)return{Eg:0,zg:0,Hd:0};const t=!(this.hh.size>0),i=this._h&&this._h.wr().length>0&&this.getTitleFillStyle()!==O,s=this.Eh.getHeight(i?this.chart.us.Og.Vg(this._h.wr(),this.getTitleFont(),this.getTitleRotation()):{x:0,y:0})+(i?this.Tg:0),e=ph(this.sh)?new Map:_h(this.sh,Math.min(this.Gh,this.Wh),Math.max(this.Gh,this.Wh),this.Gh,this.Wh,0),h=this.ft;let r=0;e.forEach(((i,s)=>{if((t=>void 0!==t.pr&&void 0!==t.gr)(s)){const e=Math.max(...i.map((i=>{if(!ls(i,this.Gh,this.Wh))return 0;const e=this.chart.us.Og.Vg(s.gr(i,h),s.pr.labelFont,s.pr.labelRotation);return t||!e.isEstimate?this.Eh.getHeight(e):0})))+s.pr.tickLength+s.pr.tickPadding;r=Math.max(r,e)}}));const n=this.Rf.reduce(this.cA,0);r=Math.max(r,n),r+=this.kg;const o=$t(s+r,void 0!==this.Pg?this.Pg:0,void 0!==this.Dg?this.Dg:Ki);return this.Lf=o,{Eg:r,zg:s,Hd:o}}Le(t){const i=this.getVisible()&&t.Ng>0;this.Gg=t;const s=this.vg.mu(),e=this.ft.getInnerStart()<this.ft.getInnerEnd()?this.ft.getInnerStart():this.ft.getInnerEnd(),h=this.ft.getInnerEnd()>this.ft.getInnerStart()?this.ft.getInnerEnd():this.ft.getInnerStart(),r=s.getThickness()*this.cg/2,n=this.Ag.getInnerInterval(),o=this.ug/100*n,a=o+t.Wg,l=n*this.cg,u=a+r;if(i||this.qh(),!ph(this.sh)&&i){const t=this.ft.hi();this.nr({physicalAxisSize:t,startPosition:o,gridStrokeLen:l,gridStrokeStart:a,tickStart:u});for(const[i,s]of this.hh){let e=this.Df.get(i);if(!e)if(i.He)e={grid:this.hg[0].Ug(this.gg).setMouseInteractions(!1),tick:this.hg[0].Ug(this.gg).setMouseInteractions(!1)};else if("Yg"in i){const t=Array.from(this.hh.keys()).filter((t=>"Yg"in t)).reverse().indexOf(i),s=this.hg[t];if(!s)throw new Error("Not enough tick layers. This is an internal LCJS error - if you see this, please contact Arction support.");e={grid:s.Ug(this.gg).setMouseInteractions(!1),tick:s.Ug(this.gg).setMouseInteractions(!1)}}if(e){e.grid.Vt(),e.tick.Vt();for(const[i,h]of s){const i=this.Lg(h,{physicalAxisSize:t,startPosition:o,gridStrokeLen:l,gridStrokeStart:a,tickStart:u});e.grid.$r().Hg(i.gridStroke.start,i.gridStroke.end),e.tick.$r().Hg(i.tickStroke.start,i.tickStroke.end)}e.grid.Ge(i.pr.getGridStrokeStyle()),e.tick.Ge(i.pr.getTickStyle()),this.Df.set(i,e)}}}const c=u,d=c+this.cg*t.$g,f=this.Xf||this.jf?Math.min(this.Gf,.25*t.Ng):0,A={start:this.Eh.toVec2(this.ft.gi(this.ft.getInnerStart(),f),c),end:this.Eh.toVec2(this.ft.gi(this.ft.getInnerEnd(),-f),d)},g=At(this.Eh.toVec2(this.ft.getInnerStart(),d),this.gg,this.yg),y=At(A.start,this.gg,this.yg),m=At(A.end,this.gg,this.yg),p=At(this.Eh.toVec2(this.ft.getInnerEnd(),c),this.gg,this.yg);this.vg.Ye(this.Eh.toPoint(e,a)).Ue(this.Eh.toPoint(h,a)).setVisible(i),this.Sg.Ye(this.Eh.toPoint(this.ft.gi(this.ft.getInnerStart(),this.Vf),a)).Ue(this.Eh.toPoint(this.ft.getInnerStart(),a)).setVisible(i),this.bg.Ye(this.Eh.toPoint(this.ft.gi(this.ft.getInnerEnd(),-this.Vf),a)).Ue(this.Eh.toPoint(this.ft.getInnerEnd(),a)).setVisible(i);const v=a+t.Eg*this.cg;if(this._h.Re(this.Eh.toPoint(this.Eh.getWidth(At("center"===this.oA?_s(ws(g,p),.5):"start"===this.oA?g:p,this.yg,this.gg)),v)).Ha(this.Eh.toPoint("center"===this.oA?0:"start"===this.oA?-1:1,-1*this.cg)).setVisible(i).setMouseInteractions(void 0!==["mouseEnterTitle","mouseMoveTitle","mouseLeaveTitle","mouseDownTitle","mouseUpTitle","mouseClickTitle","mouseDoubleClickTitle","mouseDragStartTitle","mouseDragTitle","mouseDragStopTitle","mouseWheelTitle","touchStartTitle","touchMoveTitle","touchEndTitle"].find((t=>this.L.listeners(t).size>0))),this.Bf){const i=this.ug/100*n+t.Wg,s=-this.cg*n-t.Wg,e={start:this.Eh.toVec2(this.Bf.min,u+this.cg*this.Lf),end:this.Eh.toVec2(this.Bf.max,i+s)},h=At(e.start,this.gg,this.yg),r=At(e.end,this.gg,this.yg);this.Mg.Re(h).tt(Cs(r,h)).setVisible(!0)}else this.Mg.setVisible(!1);this.xg.Re(y).tt(Cs(m,y)).setVisible(i),this._g.Re(g).tt(Cs(y,g)).setVisible(i),this.wg.Re(m).tt(Cs(p,m)).setVisible(i);for(const s of this.Rf)s.update().plot(i,a,l,t.Wg,u);for(const t of this.hA)t.Le()}setLength(t){return this.Yd=t,this.chart.us.xs(),this}getLength(){return this.Yd}setMargins(t,i){return this.lA=t,this.uA=i,this.chart.us.xs(),this}getMargins(){return{start:this.lA,end:this.uA}}getStackIndex(){var t,i;return null!==(i=null===(t=[...this.chart.Xg,...this.chart.jg,...this.chart.Zg,...this.chart.Qg].find((t=>t.axis===this)))||void 0===t?void 0:t.iStack)&&void 0!==i?i:0}getParallelIndex(){var t,i;return null!==(i=null===(t=[...this.chart.Xg,...this.chart.jg,...this.chart.Zg,...this.chart.Qg].find((t=>t.axis===this)))||void 0===t?void 0:t.iParallel)&&void 0!==i?i:0}Jg(){const t=this.Gg;if(!t)return;const i=this.getVisible()&&t.Ng>0,s=this.vg.mu().getThickness()*this.cg/2,e=this.Ag.getInnerInterval(),h=this.ug/100*e+t.Wg,r=e*this.cg,n=h+s;for(const s of this.Rf)s.update().plot(i,h,r,t.Wg,n);for(const t of this.hA)t.Le()}Kg(){return this.Lf}qg(t,i){i=i||Eo.AxisTickMajor;const s=new Qr(this,t?this.hg[0]:this.ag,this.ag,this.ft,this.pg,this.pg,this.Eh,this.dg,this.dA,this.qi,i).setTextFormatter(this.formatValue);return this.Rf.push(s),s}gA(t){this.chart.us.ls.Cs(t,1),this.Of=t.us.Jr(this.qf,this.Of)}mA(t){this.chart.us.ls.Cs(t,0),t.us.Kr(this.Of)}SA(t){this.setStopped(!0),t.us.Kr(this.Of)}MA(t,i){const s=-this.Eh.getWidth(i);this.pan(s),this.Of=t.us.Jr(this.tA,this.Of)}pan(t){const i=this.Gh,s=this.Wh,e=this.ft.gi(i,t),h=this.ft.gi(s,t);this.er(e,h,!1)}zoom(t,i){const s=this.ft.dt(this.Gh),e=this.ft.dt(this.Wh),h=this.ft.dt(t),r=$t((h-s)/(e-s),0,1),n=.2*this.ft.hi(),o=r*this.Wf*n*-i,a=(1-r)*this.Wf*n*i,l=this.ft.gi(this.Gh,o),u=this.ft.gi(this.Wh,a);this.er(l,u,!0)}CA(t){this.Bf=void 0,t.us.Kr(this.Of)}bA(t,i){this.setStopped(!0),t.us.Kr(this.Of),this.chart.us.ls.Cs(this.xg,0)}_A(t,i,s,e){const h=At(this.FA.us.ze(s.x,s.y),this.FA.us.ft,this.gg),r=$t(this.Eh.getWidth(h),this.Gh,this.Wh),n=this.Eh.getWidth(At(this.FA.us.ze(i.x,i.y),this.FA.us.ft,this.gg));Math.abs(this.ft.dt(r)-this.ft.dt(n))>10?(this.Bf=c(Math.min(r,n),Math.max(r,n)),this.Of=t.us.Jr(this.iA,this.Of)):(this.Bf=void 0,this.Of=t.us.Jr(this.qf,this.Of)),this.FA.xs()}kA(t,i,s){if(this.Bf){const t=this.Bf.min,i=this.Bf.max,s=this.Wh<this.Gh;this.At(s?i:t,s?t:i,!0,!0,"interactionSetInterval")}this.Bf=void 0,t.us.Kr(this.Of)}GA(t){this.chart.us.ls.Cs(t,1),this.Nf=t.us.Jr(this.sA,this.Nf)}UA(t){this.chart.us.ls.Cs(t,0),t.us.Kr(this.Nf)}HA(t,i){this.setStopped(!0),this.Nf=t.us.Jr(this.eA,this.Nf)}XA(t,i,s,e){const h=this.Eh.getWidth(e);this.er(this.ft.gi(this.Gh,h),this.Wh,!0)}ZA(t,i,s,e){const h=this.Eh.getWidth(e);this.er(this.Gh,this.ft.gi(this.Wh,h),!0)}JA(t,i,s){t.us.Kr(this.Nf),t.getIsUnderMouse()&&(this.Nf=t.us.Jr(this.sA)),this.FA.xs()}addCustomTick(t){return this.qg(!0,t)}setTitlePosition(t){return this.oA=t,this.chart.us.xs(),this}getTitlePosition(){return this.oA}getUiPosition(){return this.ug}setStrokeStyle(t){return this.vg.Ge(t),this.FA.xs(),this}getStrokeStyle(){return this.vg.mu()}getOverlayStyle(){return this.xg.$h()}setOverlayStyle(t){return this.xg.De(t),this.FA.xs(),this}setAxisInteractionZoomByDragging(t){return this.Uf=t,this}getAxisInteractionZoomByDragging(){return this.Uf}setAxisInteractionPanByDragging(t){return this.Yf=t,this}getAxisInteractionPanByDragging(){return this.Yf}setAxisInteractionZoomByWheeling(t){return this.Hf=t,this}getAxisInteractionZoomByWheeling(){return this.Hf}setAxisInteractionReleaseByDoubleClicking(t){return this.$f=t,this}getAxisInteractionReleaseByDoubleClicking(){return this.$f}setAxisMouseHoverStyle(t=this.Eh.defaultDragMouseStyle){return this.qf=t,this}getAxisMouseHoverStyle(){return this.qf}setAxisMousePanStyle(t=this.Eh.defaultDragMouseStyle){return this.tA=t,this}getAxisMousePanStyle(){return this.tA}setAxisMouseZoomStyle(t=this.Eh.defaultDragMouseStyle){return this.iA=t,this}getAxisMouseZoomStyle(){return this.iA}setAnimationHighlight(t){return this.chart.us.ls.ks(this.xg,t),this.chart.us.ls.ks(this._g,t),this.chart.us.ls.ks(this.wg,t),this}getAnimationHighlight(){return this.chart.us.ls.Ts(this.xg)}getMarginAfterTicks(){return this.kg}setMarginAfterTicks(t){return this.kg=t,this.FA.xs(),this}getMarginAfterTitle(){return this.Tg}setMarginAfterTitle(t){return this.Tg=t,this.FA.xs(),this}getNibLength(){return this.Vf}setNibLength(t){return this.Vf=t,this.FA.xs(),this}getNibStyle(){return this.Sg.mu()}setNibStyle(t){return this.Sg.Ge(t),this.bg.Ge(t),this.FA.xs(),this}getNibOverlayStyle(){return this._g.$h()}setNibOverlayStyle(t){return this._g.De(t),this.wg.De(t),this.FA.xs(),this}setNibMousePickingAreaSize(t){return this.Gf=t,this.FA.xs(),this}getNibMousePickingAreaSize(){return this.Gf}setNibInteractionScaleByDragging(t){return this.Xf=t,this}getNibInteractionScaleByDragging(){return this.Xf}setNibInteractionScaleByWheeling(t){return this.jf=t,this}getNibInteractionScaleByWheeling(){return this.jf}setNibMouseHoverStyle(t=this.Eh.defaultDragMouseStyle){return this.sA=t,this}getNibMouseHoverStyle(){return this.sA}setNibMouseScaleStyle(t=this.Eh.defaultDragMouseStyle){return this.eA=t,this}getNibMouseScaleStyle(){return this.eA}setChartInteractions(t){return this.setChartInteractionFitByDrag(t),this.setChartInteractionPanByDrag(t),this.setChartInteractionZoomByDrag(t),this.setChartInteractionZoomByWheel(t),this}setChartInteractionPanByDrag(t){return this.Zf=t,this}getChartInteractionPanByDrag(){return this.Zf}setChartInteractionZoomByWheel(t){return this.Qf=t,this}getChartInteractionZoomByWheel(){return this.Qf}setChartInteractionZoomByDrag(t){return this.Jf=t,this}getChartInteractionZoomByDrag(){return this.Jf}setChartInteractionFitByDrag(t){return this.Kf=t,this}getChartInteractionFitByDrag(){return this.Kf}Z(){return this.ft.Z(),this}J(){return this.ft.J(),this}dispose(){this.Sg.dispose(),this.bg.dispose(),this.vg.dispose(),this.xg.dispose(),this.Mg.dispose(),this._g.dispose(),this.wg.dispose(),this._h.dispose(),this.rr(Ut);for(const t of this.Df.values())t.grid.dispose(),t.tick.dispose();return this.Ef.slice().forEach(Ut),this.hA.slice().forEach(Ut),this.og(this),this.L.emit("dispose",this),this}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setVisible(t){this.Sg.setVisible(t),this.bg.setVisible(t),this.vg.setVisible(t),this._h.setVisible(t),this.xg.setVisible(t),this._g.setVisible(t),this.wg.setVisible(t),this.rr((i=>{i.ps(t)}));for(const i of this.Df.values())i.grid.setVisible(t),i.tick.setVisible(t);return super.setVisible(t),this.chart.us.xs(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationHighlight(this.uh),this}}var Go;!function(t){t.Start="start",t.Center="center",t.End="end"}(Go||(Go={}));const Wo={getWidth:t=>t.x,getHeight:t=>t.y,toVec2:(t,i)=>({x:t,y:i}),toPoint:(t,i)=>n(t,i)},Uo={getWidth:t=>t.y,getHeight:t=>t.x,toVec2:(t,i)=>({x:i,y:t}),toPoint:(t,i)=>n(i,t)},Yo=t=>!!(t&&"object"==typeof t&&"x"in t&&t.x instanceof No&&"y"in t&&t.y instanceof No),Ho=i({type:"tick-style",gridStrokeLength:1,gridStrokeStyle:new ve,tickLength:7,tickStyle:new ve,tickPadding:0,labelFont:new Fh,labelFillStyle:new U,labelAlignment:0,labelRotation:0});class $o extends Ho{constructor(t){super(t)}setGridStrokeLength(t){return this.set("gridStrokeLength",t)}getGridStrokeLength(){return this.get("gridStrokeLength")}setGridStrokeStyle(t){return this.set("gridStrokeStyle","function"==typeof t?t(this.get("gridStrokeStyle")):t)}getGridStrokeStyle(){return this.get("gridStrokeStyle")}setTickLength(t){return this.set("tickLength",t)}getTickLength(){return this.get("tickLength")}setTickStyle(t){return this.set("tickStyle","function"==typeof t?t(this.get("tickStyle")):t)}getTickStyle(){return this.get("tickStyle")}setTickPadding(t){return this.set("tickPadding",t)}getTickPadding(){return this.get("tickPadding")}setLabelFillStyle(t){return this.set("labelFillStyle","function"==typeof t?t(this.get("labelFillStyle")):t)}getLabelFillStyle(){return this.get("labelFillStyle")}setLabelFont(t){return this.set("labelFont","function"==typeof t?t(this.get("labelFont")):t)}getLabelFont(){return this.get("labelFont")}setLabelAlignment(t){return this.set("labelAlignment",t)}getLabelAlignment(){return this.get("labelAlignment")}setLabelRotation(t){return this.set("labelRotation",t)}getLabelRotation(){return this.get("labelRotation")}}const Xo=t=>!(!t||"object"!=typeof t||!("type"in t)||"tick-style"!==t.type),jo=new $o({labelFillStyle:O,gridStrokeStyle:at,tickStyle:at}),Zo=t=>Xo(t)&&N(t.labelFillStyle)&&lt(t.gridStrokeStyle)&&lt(t.tickStyle),Qo=i({type:"time-ticks",cursorFormatter:void 0,timeOrigin:void 0,majorTickStyle:new $o,minorTickStyle:new $o,majorFormattingFunction:void 0,minorFormattingFunction:void 0}),Jo=(t,i)=>{const s=i-t;return s>=864e5?"MajorHours12":s>=36e5?"MajorHours":s>=6e5?"MajorMinutes15":s>=9e4?"MajorMinutes":s>=10500?"MajorSeconds15":s>=1e3?"MajorSeconds":s>=100?"MajorMilliseconds100":s>=10?"MajorMilliseconds10":s>=1?"MajorMilliseconds":s>=.1?"MajorMicroseconds100":s>=.01?"MajorMicroseconds10":s>=.001?"MajorMicroseconds":s<=.001?"MajorNanoseconds100":"Unknown"},Ko={hhmmss:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/36e5);i%=36e5;const h=Math.floor(i/6e4);i%=6e4;const r=Math.floor(i/1e3);return`${s}${Fi(e,2)}:${Fi(h,2)}:${Fi(r,2)}`},hhmmssmmm:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/36e5);i%=36e5;const h=Math.floor(i/6e4);i%=6e4;const r=Math.floor(i/1e3);i%=1e3;const n=Math.floor(i/1);return`${s}${Fi(e,2)}:${Fi(h,2)}:${Fi(r,2)}.${Fi(n,3)}`},hhmmssmmmuuu:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/36e5),h=Math.floor(i/6e4)%60,r=Math.floor(i/1e3)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}).split(".")[1];return`${s}${Fi(e,2)}:${Fi(h,2)}:${Fi(r,2)}.${Fi(n,3)}${o}`},hhmmssmmmuuunnn:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/36e5),h=Math.floor(i/6e4)%60,r=Math.floor(i/1e3)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:6,maximumFractionDigits:6}).split(".")[1];return`${s}${Fi(e,2)}:${Fi(h,2)}:${Fi(r,2)}.${Fi(n,3)}${o}`}},qo={MajorHours12:{major:{format:Ko.hhmmss,getKeyValues:(t,i,s,e)=>{const h=432e5;return t=Math.floor(t/(4*h))*h*4,dh(t,i,h,void 0,1e6)},fitKeyValues:Ah({ignore:"first"},2,4)},minor:{format:Ko.hhmmss,getKeyValues:(t,i,s,e)=>ch(t,i,36e5,1e6),fitKeyValues:Ah({},2,3,4,6)},defaultValueFormatter:Ko.hhmmss},MajorHours:{major:{format:Ko.hhmmss,getKeyValues:(t,i,s,e)=>{const h=36e5;return t=Math.floor(t/(12*h))*h*12,dh(t,i,h,void 0,1e6)},fitKeyValues:Ah({ignore:"first"},2,6,12)},minor:{format:Ko.hhmmss,getKeyValues:(t,i,s,e)=>ch(t,i,3e5,1e6),fitKeyValues:Ah({},2,4,6)},defaultValueFormatter:Ko.hhmmss},MajorMinutes15:{major:{format:Ko.hhmmss,getKeyValues:(t,i,s,e)=>(t=36e5*Math.floor(t/36e5),dh(t,i,9e5,void 0,1e6)),fitKeyValues:Ah({ignore:"first"},2)},minor:{format:Ko.hhmmss,getKeyValues:(t,i,s,e)=>ch(t,i,6e4,1e6),fitKeyValues:Ah({},3,5)},defaultValueFormatter:Ko.hhmmss},MajorMinutes:{major:{format:Ko.hhmmss,getKeyValues:(t,i,s,e)=>{const h=6e4;return t=Math.floor(t/6e5)*h*10,dh(t,i,h,void 0,1e6)},fitKeyValues:Ah({ignore:"first"},2,5)},minor:{format:Ko.hhmmss,getKeyValues:(t,i,s,e)=>ch(t,i,5e3,1e6),fitKeyValues:Ah({},2,3,4,6)},defaultValueFormatter:Ko.hhmmss},MajorSeconds15:{major:{format:Ko.hhmmss,getKeyValues:(t,i,s,e)=>{const h=15e3;return t=Math.floor(t/6e4)*h*4,dh(t,i,h,void 0,1e6)},fitKeyValues:Ah({ignore:"first"},2,4)},minor:{format:Ko.hhmmss,getKeyValues:(t,i,s,e)=>ch(t,i,1e3,1e6),fitKeyValues:Ah({},3,5)},defaultValueFormatter:Ko.hhmmss},MajorSeconds:{major:{format:Ko.hhmmssmmm,getKeyValues:(t,i,s,e)=>{const h=1e3;return t=Math.floor(t/1e4)*h*10,dh(t,i,h,void 0,1e6)},fitKeyValues:Ah({ignore:"first"},2,5)},minor:{format:Ko.hhmmssmmm,getKeyValues:(t,i,s,e)=>ch(t,i,100,1e6),fitKeyValues:Ah({},2,3,5)},defaultValueFormatter:Ko.hhmmssmmm},MajorMilliseconds100:{major:{format:Ko.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=100*Math.floor(t/1e3)*10,dh(t,i,100,void 0,1e6)),fitKeyValues:Ah({ignore:"first"},2,5)},minor:{format:Ko.hhmmssmmm,getKeyValues:(t,i,s,e)=>ch(t,i,10,1e6),fitKeyValues:Ah({},2,3,5)},defaultValueFormatter:Ko.hhmmssmmm},MajorMilliseconds10:{major:{format:Ko.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=10*Math.floor(t/100)*10,dh(t,i,10,void 0,1e6)),fitKeyValues:Ah({ignore:"first"},2,5)},minor:{format:Ko.hhmmssmmm,getKeyValues:(t,i,s,e)=>ch(t,i,1,1e6),fitKeyValues:Ah({},2,3,5)},defaultValueFormatter:Ko.hhmmssmmm},MajorMilliseconds:{major:{format:Ko.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=1*Math.floor(t/10)*10,dh(t,i,1,void 0,1e6)),fitKeyValues:Ah({ignore:"first"},2,5)},minor:{format:Ko.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>ch(t,i,.1,1e6),fitKeyValues:Ah({},2)},defaultValueFormatter:Ko.hhmmssmmmuuu},MajorMicroseconds100:{major:{format:Ko.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=.1*Math.floor(t/1)*10,dh(t,i,.1,void 0,1e6)),fitKeyValues:Ah({ignore:"first"},2,5)},minor:{format:Ko.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>ch(t,i,.01,1e6),fitKeyValues:Ah({},2,3,5)},defaultValueFormatter:Ko.hhmmssmmmuuu},MajorMicroseconds10:{major:{format:Ko.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>{const h=.01;return t=Math.floor(t/.1)*h*10,dh(t,i,h,void 0,1e6)},fitKeyValues:Ah({ignore:"first"},2,5)},minor:{format:Ko.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>ch(t,i,.001,1e6),fitKeyValues:Ah({},2,3,5)},defaultValueFormatter:Ko.hhmmssmmmuuu},MajorMicroseconds:{major:{format:Ko.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=.001;return t=Math.floor(t/.01)*h*10,dh(t,i,h,void 0,1e6)},fitKeyValues:Ah({ignore:"first"},2,5)},minor:{format:Ko.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>ch(t,i,100*1e-6,1e6),fitKeyValues:Ah({},2,3,5)},defaultValueFormatter:Ko.hhmmssmmmuuunnn},MajorNanoseconds100:{major:{format:Ko.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=100*1e-6;return t=Math.floor(t/.001)*h*10,dh(t,i,h,void 0,1e6)},fitKeyValues:Ah({ignore:"first"},2,5)},minor:{format:Ko.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>ch(t,i,10*1e-6,1e6),fitKeyValues:Ah({},2,3,5)},defaultValueFormatter:Ko.hhmmssmmmuuunnn},Unknown:{major:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},minor:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},defaultValueFormatter:(t,i,s)=>""}};class ta extends Qo{Xe(t){const i=this.timeOrigin||0,s=[{th:"Major ticks",Yg:0,pr:this.majorTickStyle,gr:this.majorFormattingFunction?this.majorFormattingFunction:(t,s,e)=>{const h=Jo(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return(0,qo[h].major.format)(t+i,s,e)},Wr:(t,i,s,e)=>{const h=Jo(s,e);return(0,qo[h].major.getKeyValues)(t,i,s,e)},Dh:{br:(t,i,s,e,h,r)=>{const n=Jo(h,r),o=qo[n].major.fitKeyValues;if(o)return o(t,i,s,e,h,r)}},Ur:void 0}];return Xo(this.minorTickStyle)&&s.push({th:"Minor ticks",Yg:1,pr:this.minorTickStyle,gr:this.minorFormattingFunction?this.minorFormattingFunction:(t,s,e)=>{const h=Jo(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return(0,qo[h].minor.format)(t+i,s,e)},Wr:(t,i,s,e)=>{const h=Jo(s,e);return(0,qo[h].minor.getKeyValues)(t,i,s,e)},Dh:{br:(t,i,s,e,h,r)=>{const n=Jo(h,r),o=qo[n].minor.fitKeyValues;if(o)return o(t,i,s,e,h,r)}},Ur:void 0}),{je:[],Ze:s,Qe:this.cursorFormatter||((t,s,e)=>{const h=Jo(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return qo[h].defaultValueFormatter(t+i,s,e)}),Je:1e-4,Ke:864e6}}setTickStyle(t){return this.setMajorTickStyle(t).setMinorTickStyle(t)}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTimeOrigin(t){return this.set("timeOrigin",t)}getTimeOrigin(){return this.get("timeOrigin")}setFormattingFunction(t){return this.withMutations((i=>i.set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const ia=t=>!(!t||"object"!=typeof t||!("type"in t)||"time-ticks"!==t.type),sa=(t,i,s,e,h)=>(r,n)=>o=>{const a=new Date(o+r),l={year:n?a.getUTCFullYear():a.getFullYear(),monthIndex:n?a.getUTCMonth():a.getMonth(),day:n?a.getUTCDate():a.getDate(),hours:n?a.getUTCHours():a.getHours(),minutes:n?a.getUTCMinutes():a.getMinutes(),seconds:n?a.getUTCSeconds():a.getSeconds(),millis:n?a.getUTCMilliseconds():a.getMilliseconds()},u=e?e(l):void 0;if(0===t&&!0===u)return o;const c=l[i];h.includes("year")&&(l.year=Math.floor(l.year/s)*s),h.includes("monthIndex")&&(l.monthIndex=0),h.includes("day")&&(l.day=1),h.includes("hours")&&(l.hours=0),h.includes("minutes")&&(l.minutes=0),h.includes("seconds")&&(l.seconds=0),h.includes("millis")&&(l.millis=0);let d=(0===t?1:t)*s;return-1===t&&!1===u&&(d=0),0!==d&&(l[i]=s*(d>0?Math.floor((c+d)/s):Math.ceil((c+d)/s))),n?Date.UTC(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis)-r:new Date(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis).getTime()-r},ea=(t,i,s,...e)=>sa(-1,t,i,s,e),ha=(t,i,s,...e)=>sa(-1,t,i,s,e),ra=(t,i,s,...e)=>sa(0,t,i,s,e),na=(t,i,...s)=>sa(1,t,i,void 0,s),oa=t=>(i,s)=>e=>{const h=new Date(e+i),r=s?h.getUTCDay():h.getDay(),n=1===r&&0===(s?h.getUTCHours():h.getHours())&&0===(s?h.getUTCMinutes():h.getMinutes())&&0===h.getSeconds()&&0===h.getMilliseconds();if(0===t&&!0===n)return e;let o=s?h.getUTCDate():h.getDate();return-1===t&&1===r&&!1===n||(-1===t?o-=r>=2?r-1:r+6:o+=r>0?8-r:1),s?Date.UTC(h.getUTCFullYear(),h.getUTCMonth(),o,0,0,0,0)-i:new Date(h.getFullYear(),h.getMonth(),o,0,0,0,0).getTime()-i},aa=[{label:"MilliSecond1",unit:1,irregular:!1,greatTicks:void 0,majorTicks:{fitFunction:Ah({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Ah(void 0,2)}},{label:"MilliSecond10",unit:10,irregular:!1,greatTicks:{getReferenceKeyValue:ea("millis",10,(t=>t.millis%10==0),"millis")},majorTicks:{fitFunction:Ah({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Ah(void 0,2)}},{label:"MilliSecond100",unit:100,irregular:!1,greatTicks:{getReferenceKeyValue:ea("millis",100,(t=>t.millis%100==0),"millis")},majorTicks:{fitFunction:Ah({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Ah(void 0,2)}},{label:"Second",unit:1e3,irregular:!1,greatTicks:{getReferenceKeyValue:ea("seconds",1,(t=>0===t.millis),"millis")},majorTicks:{fitFunction:gh(5,10,15,30)},minorTicks:{amount:4,fitFunction:Ah(void 0,2)}},{label:"Minute",unit:6e4,irregular:!1,greatTicks:{getReferenceKeyValue:ea("minutes",1,(t=>0===t.seconds&&0===t.millis),"seconds","millis")},majorTicks:{fitFunction:gh(5,10,15,30)},minorTicks:{amount:12,fitFunction:Ah(void 0,3,6)}},{label:"Hour",unit:36e5,irregular:!1,greatTicks:{getReferenceKeyValue:ea("hours",1,(t=>0===t.minutes&&0===t.seconds&&0===t.millis),"minutes","seconds","millis")},majorTicks:{fitFunction:gh(3,6,12)},minorTicks:{amount:8,fitFunction:Ah(void 0,2,4)}},{label:"Day",unit:864e5,irregular:!1,greatTicks:{getReferenceKeyValue:ea("day",1,(t=>0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"hours","minutes","seconds","millis")},majorTicks:{fitFunction:Ah({ignore:"last"},2,4)},minorTicks:{amount:7,fitFunction:Ah({ignore:"last"},2,3)}},{label:"Week",unit:6048e5,irregular:!0,getPrevKeyValue:oa(-1),getNextKeyValueIncludingRef:oa(0),getNextKeyValue:oa(1),greatTicks:!0,majorTicks:{fitFunction:Ah(void 0,2)},minorTicks:{fitFunction:void 0}},{label:"Month",unit:2592e6,irregular:!0,getPrevKeyValue:ha("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ra("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValue:na("monthIndex",1,"day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Ah(void 0,2,3)},minorTicks:{fitFunction:Ah(void 0,2,4,6)}},{label:"Year",unit:31536e6,irregular:!0,getPrevKeyValue:ha("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ra("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:na("year",1,"monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Ah({ignore:"first"},2,5)},minorTicks:{fitFunction:Ah(void 0,2,5)}},{label:"Decade",unit:31536e7,irregular:!0,getPrevKeyValue:ha("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ra("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:na("year",10,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Ah(void 0,2,4)},minorTicks:{fitFunction:Ah(void 0,2,5)}},{label:"Century",unit:316224e7,irregular:!0,getPrevKeyValue:ha("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ra("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:na("year",100,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0},{label:"Millennium",unit:316224e8,irregular:!0,getPrevKeyValue:ha("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ra("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:na("year",1e3,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0}],la=(t,i,s,e,h)=>{const r=i-t;let n;for(let t=h?0:aa.length-1;h?t<aa.length:t>=0;h?t+=1:t-=1){const i=r/aa[t].unit;if((void 0===s||i>=s)&&(void 0===e||i<=e)){n=aa[t];break}}return n},ua=(t,i,s)=>{let e=la(i,s,void 0,1,!0);if(void 0!==e&&0===aa.indexOf(e)&&(e=aa[1]),void 0===e)return;if("great"===t)return e;const h="major"===t?1:2,r=aa[aa.indexOf(e)-h];return void 0===r?aa[0]:r},ca=(t,i,s)=>(e,h,r,n)=>{const o=ua("great",e,h);if(void 0===o)return[];if("Decade"===o.label||"Century"===o.label||"Millennium"===o.label)return[];const a=n>r?e:h,l=(e+h)/2,u=n>r?h:e;if(aa.indexOf(o)<=aa.findIndex((t=>"Hour"===t.label)))return"left"===s?[a]:[];let c;if(!0===o.irregular)c=fh(e,h,o.getPrevKeyValue(t,i),o.getNextKeyValue(t,i));else{const s=o.greatTicks.getReferenceKeyValue(t,i)(e);c=dh(e,h,o.unit,s,1)}const d=((t,i,s)=>{for(const e of s)if(e>=t&&e<=i)return e})(e,h,c);return"left"===s?void 0===d||ls(d,l,u)?[a]:[d]:void 0!==d&&ls(d,l,u)?[d]:[u]},da=(t,i,s)=>(e,h,r,n)=>{const o=ua(t,r,n);let a;if(void 0===o)return[];if("great"===t&&void 0!==o.greatTicks)if(!0===o.irregular)a=fh(e,h,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s));else{const t=o.greatTicks.getReferenceKeyValue(i,s)(e);a=dh(e,h,o.unit,t,1)}else if("major"===t&&void 0!==o.majorTicks)a=!0===o.irregular?((t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h})(e,h,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s)):((t,i,s)=>{const e=[];let h=t,r=0;for(;h<i;)if(e.push(h),h+=s,r+=1,r>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return e.push(h),e})(e,h,o.unit);else{if("minor"!==t||void 0===o.minorTicks)return[];if(!0===o.irregular)a=((t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h})(e,h,o.getNextKeyValueIncludingRef(i,s),o.getNextKeyValue(i,s));else{const t=(t=>{if(void 0!==t)return aa[aa.indexOf(t)+1]})(o);if(void 0===t)return[];a=ch(e,h,t.unit/o.minorTicks.amount,1)}}return a},fa=t=>(i,s,e,h,r,n)=>{const o=ua(t,r,n);if(void 0===o)return;let a;return"major"===t?a=o.majorTicks.fitFunction:o.minorTicks&&(a=o.minorTicks.fitFunction),a?a(i,s,e,h,r,n):void 0},Aa=i({type:"date-time-ticks",utc:!1,locale:void 0,dateOrigin:void 0,cursorFormatter:void 0,greatTickStyle:new $o,majorTickStyle:new $o,minorTickStyle:new $o,formatOptionsMajorCentury:{year:"numeric",hour12:!1},formatOptionsMinorDecade:{year:"numeric",hour12:!1},formatOptionsMajorDecade:{year:"numeric",hour12:!1},formatOptionsMinorYear:{year:"numeric",hour12:!1},formatOptionsMajorYear:{year:"numeric",hour12:!1},formatOptionsMinorMonth:{month:"short",hour12:!1},formatOptionsGreatYear:{year:"numeric",hour12:!1},formatOptionsMajorMonth:{month:"long",hour12:!1},formatOptionsMinorWeek:{day:"numeric",hour12:!1},formatOptionsGreatMonth:{year:"numeric",month:"long",hour12:!1},formatOptionsMajorWeek:{day:"numeric",weekday:"short",hour12:!1},formatOptionsMinorDay:{day:"numeric",weekday:"short",hour12:!1},formatOptionsGreatWeek:(t,i,s)=>{const e=new Date(t),h=(t=>{const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));i.setUTCDate(i.getUTCDate()+4-(i.getUTCDay()||7));const s=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i.getTime()-s.getTime())/864e5+1)/7)})(e);return`${new Intl.DateTimeFormat(s,{year:"numeric",month:"long",hour12:!1}).format(e)} Week ${h}`},formatOptionsMajorDay:{weekday:"long",day:"numeric",hour12:!1},formatOptionsMinorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatDay:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatHour:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsGreatMinute:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsMinorMillisecond:t=>{const i=new Date(t);return i.setHours(0,0,0,0),Ko.hhmmssmmm(t-i.getTime())},formatMillisecondRange:t=>{const i=new Date(t);return i.setHours(0,0,0,0),Ko.hhmmssmmm(t-i.getTime())},formatOptionsGreatSecond:{},formatOptionsMajorMilliSecond:{}});class ga extends Aa{Xe(t){const i=void 0!==this.dateOrigin?this.dateOrigin.getTime():0,s=t=>aa.map((i=>{const s=((t,i,s)=>{switch(s.label){case"MilliSecond1":case"MilliSecond10":case"MilliSecond100":return"Great"===i?t.formatOptionsGreatMinute:t.formatMillisecondRange;case"Second":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorSecond:t.formatOptionsMinorSecond;case"Minute":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorMinute:t.formatOptionsMinorMinute;default:case"Hour":return"Great"===i?t.formatOptionsGreatHour:"Major"===i?t.formatOptionsMajorHour:t.formatOptionsMinorHour;case"Day":return"Great"===i?t.formatOptionsGreatDay:"Major"===i?t.formatOptionsMajorDay:t.formatOptionsMinorDay;case"Week":return"Great"===i?t.formatOptionsGreatWeek:"Major"===i?t.formatOptionsMajorWeek:t.formatOptionsMinorWeek;case"Month":return"Great"===i?t.formatOptionsGreatMonth:"Major"===i?t.formatOptionsMajorMonth:t.formatOptionsMinorMonth;case"Year":return"Great"===i?t.formatOptionsGreatYear:"Major"===i?t.formatOptionsMajorYear:t.formatOptionsMinorYear;case"Decade":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorDecade:t.formatOptionsMinorDecade;case"Century":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorCentury:void 0;case"Millennium":return}})(this,t,i);if("object"!=typeof s)return s;try{return new Intl.DateTimeFormat(this.locale,s)}catch(t){let i="";for(const t in s)i+=` ${t}: ${s[t]},`;Ot.console.error(`Invalid Intl.DateTimeFormat ( locale: ${this.locale}, formatOptions {${i}} )`)}})),e=new Map;e.set("great",s("Great")),e.set("major",s("Major")),e.set("minor",s("Minor"));const h=t=>String(t),r=(t,s)=>(r,n)=>{let o=r+i;const a=n.getInnerStart(),l=n.getInnerEnd(),u=a>l,c=ua(t,u?l:a,u?a:l);if(void 0===c)return h(o);if("great"===t){const t=Ht(r,"left"===s?a:l);let e;if(e=!1===t?r:!1===c.irregular?"left"===s&&!1===u||"right"===s&&!0===u?c.greatTicks.getReferenceKeyValue(i,this.utc)(r):c.greatTicks.getReferenceKeyValue(i,this.utc)(r+1*c.unit):"left"===s&&!1===u||"right"===s&&!0===u?c.getPrevKeyValue(i,this.utc)(r):c.getNextKeyValue(i,this.utc)(r),o=e+i,"right"===s&&!0===t)return""}const d=e.get(t);if(void 0===d)return h(o);const f=d[aa.indexOf(c)];return void 0===f?"":"function"==typeof f?f(o,n,this.locale):f.format(o)},n=[],o=[{th:"Great ticks (directive)",Yg:0,$e:!0,Wr:da("great",i,this.utc),Ur:void 0},{th:"Major ticks",Yg:1,pr:this.majorTickStyle,gr:r("major"),Wr:da("major",i,this.utc),Dh:{br:fa("major")},Ur:void 0}];Zo(this.greatTickStyle)||(n.push({th:"Great ticks (left)",pr:this.greatTickStyle.setLabelAlignment(-1),gr:r("great","left"),Wr:ca(i,this.utc,"left"),He:!0,Cr:!1}),n.push({th:"Great ticks (right)",pr:this.greatTickStyle.setLabelAlignment(1),gr:r("great","right"),Wr:ca(i,this.utc,"right"),He:!0,Cr:!1})),Zo(this.minorTickStyle)||o.push({th:"Minor ticks",Yg:2,pr:this.minorTickStyle,gr:r("minor"),Wr:da("minor",i,this.utc),Dh:{br:fa("minor"),Bh:(t,i,s,e,h,r)=>{const n=ua("minor",h,r);return!n||"Week"!==n.label}},Ur:void 0});const a=this.cursorFormatter;return{je:n,Ze:o,Qe:a?(t,s,e)=>a(i+t,s,e):(t,s,e)=>{const h=la(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()),void 0,1,!0),r=h&&h.unit<=6e4,n=new Date(i+t),o=new Date(i+t);o.setHours(0,0,0,0);const a=r?Ko.hhmmssmmm:Ko.hhmmss;return`${new Intl.DateTimeFormat(e,{year:"numeric",month:"numeric",day:"numeric"}).format(n)} ${a(n.getTime()-o.getTime())}`},Je:1,Ke:31536e9}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTickStyle(t){return this.setGreatTickStyle(t).setMajorTickStyle(t).setMinorTickStyle(t)}setGreatTickStyle(t){if("function"==typeof t){const i=this.get("greatTickStyle");return this.set("greatTickStyle",t(i))}return this.set("greatTickStyle",t)}getGreatTickStyle(){return this.get("greatTickStyle")}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setUTC(t){return this.set("utc",t)}getUTC(){return this.get("utc")}setLocale(t){return this.set("locale",t)}getLocale(){return this.get("locale")}setDateOrigin(t){return this.set("dateOrigin",t)}getDateOrigin(){return this.get("dateOrigin")}setFormatting(t,i,s){return this.withMutations((e=>e.set("formatOptionsGreatYear",t||this.formatOptionsGreatYear).set("formatOptionsGreatMonth",t||this.formatOptionsGreatMonth).set("formatOptionsGreatWeek",t||this.formatOptionsGreatWeek).set("formatOptionsGreatDay",t||this.formatOptionsGreatDay).set("formatOptionsGreatHour",t||this.formatOptionsGreatHour).set("formatOptionsGreatMinute",t||this.formatOptionsGreatMinute).set("formatOptionsMajorCentury",i||this.formatOptionsMajorCentury).set("formatOptionsMajorDecade",i||this.formatOptionsMajorDecade).set("formatOptionsMajorYear",i||this.formatOptionsMajorYear).set("formatOptionsMajorMonth",i||this.formatOptionsMajorMonth).set("formatOptionsMajorWeek",i||this.formatOptionsMajorWeek).set("formatOptionsMajorDay",i||this.formatOptionsMajorDay).set("formatOptionsMajorHour",i||this.formatOptionsMajorHour).set("formatOptionsMajorMinute",i||this.formatOptionsMajorMinute).set("formatOptionsMajorSecond",i||this.formatOptionsMajorSecond).set("formatOptionsMinorDecade",s||this.formatOptionsMinorDecade).set("formatOptionsMinorYear",s||this.formatOptionsMinorYear).set("formatOptionsMinorMonth",s||this.formatOptionsMinorMonth).set("formatOptionsMinorWeek",s||this.formatOptionsMinorWeek).set("formatOptionsMinorDay",s||this.formatOptionsMinorDay).set("formatOptionsMinorHour",s||this.formatOptionsMinorHour).set("formatOptionsMinorMinute",s||this.formatOptionsMinorMinute).set("formatOptionsMinorSecond",s||this.formatOptionsMinorSecond)))}setFormattingDecade(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorDecade",t)),i&&(s=s.set("formatOptionsMinorYear",i)),s)))}setFormattingYear(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorYear",t)),i&&(s=s.set("formatOptionsMinorMonth",i)),s)))}setFormattingMonth(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatYear",t)),i&&(e=e.set("formatOptionsMajorMonth",i)),s&&(e=e.set("formatOptionsMinorWeek",s)),e)))}setFormattingWeek(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMonth",t)),i&&(e=e.set("formatOptionsMajorWeek",i)),s&&(e=e.set("formatOptionsMinorDay",s)),e)))}setFormattingDay(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatWeek",t)),i&&(e=e.set("formatOptionsMajorDay",i)),s&&(e=e.set("formatOptionsMinorHour",s)),e)))}setFormattingHour(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatDay",t)),i&&(e=e.set("formatOptionsMajorHour",i)),s&&(e=e.set("formatOptionsMinorMinute",s)),e)))}setFormattingMinute(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatHour",t)),i&&(e=e.set("formatOptionsMajorMinute",i)),s&&(e=e.set("formatOptionsMinorSecond",s)),e)))}setFormattingSecond(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMinute",t)),i&&(e=e.set("formatOptionsMajorSecond",i)),s&&(e=e.set("formatOptionsMinorMillisecond",s)),e)))}setFormattingMilliSecond(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatSecond",t)),i&&(s=s.set("formatOptionsMajorMilliSecond",i)),s)))}}const ya=t=>!(!t||"object"!=typeof t||!("type"in t)||"date-time-ticks"!==t.type),ma=(t,i)=>(s,e)=>{const h=e-s;if(i){const i=Math.log10(h/2);let r=10**Math.floor(i-t);const n=1/r;r=Math.round(r*n)/n;const o=Math.round(Math.floor(s/(10*r))*r*10*n)/n;return dh(o,e,r,void 0,n)}const r=Math.log10(h);let n=10**Math.round(r-t);const o=1/n;return n=Math.round(n*o)/o,ch(s,e,n,o)},pa=(t,i,s,e,h,r)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%5==0)):void 0,va=(t,i,s,e,h,r)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%3==0)):2===i?t.filter(((t,i)=>i%4==0)):3===i?t.filter(((t,i)=>i%5==0)):void 0,Sa=Ah(void 0,2,5),ba=(t,i,s,e,h,r)=>0===i?[t[1],t[3],t[5]]:1===i?[t[0],t[3]]:2===i?[t[1]]:void 0,xa=(t,i)=>{const s=Gs(t),e=Ws(t);if(i)return(t,i)=>{const h=[],r=Math.floor(s(t)),n=Math.ceil(s(i));for(let t=r-1;t<=n+1;t+=1){const i=e**t;h.push(i)}return h};const h=10===t?9:4;return(t,i)=>{const r=Math.round(s(t)),n=Math.round(s(i)),o=[],a=e**r,l=(e**n-a)/h;for(let s=1;s<=h;s+=1){const e=a+l*s;e>t&&e<i&&o.push(e)}return o}},Ma=i({type:"numeric-ticks",cursorFormatter:void 0,extremeTickStyle:new $o,majorTickStyle:new $o,minorTickStyle:new $o,formattingOffset:void 0,extremeFormattingFunction:void 0,majorFormattingFunction:void 0,minorFormattingFunction:void 0});class _a extends Ma{Xe(t){const i=this.formattingOffset,s=this.get("extremeFormattingFunction")||("logarithmic"===t.type?(i,s)=>Xs.LogarithmicNoExponents(i,s,void 0,t.base):Xs.Numeric),e=this.get("majorFormattingFunction")||("logarithmic"===t.type?(i,s)=>Xs.LogarithmicNoExponents(i,s,void 0,t.base):Xs.Numeric),h=this.get("minorFormattingFunction")||("logarithmic"===t.type?(i,s)=>Xs.LogarithmicNoExponents(i,s,void 0,t.base):Xs.Numeric),r=[],n=[];Zo(this.extremeTickStyle)||r.push({th:"Extreme ticks",pr:this.extremeTickStyle,gr:void 0===i?s:(t,e,h)=>s(i+t,e,h),Wr:uh,He:!0,Cr:!0}),n.push({th:"Major ticks",Yg:0,pr:this.majorTickStyle,gr:void 0===i?e:(t,s,h)=>e(i+t,s,h),Wr:"logarithmic"===t.type?xa(t.base,!0):ma(0,!0),Dh:"logarithmic"===t.type?{br:va}:{br:pa},Ur:void 0}),Zo(this.minorTickStyle)||n.push({th:"Minor ticks",Yg:1,pr:this.minorTickStyle,gr:void 0===i?h:(t,s,e)=>h(i+t,s,e),Wr:"logarithmic"===t.type?xa(t.base,!1):ma(1,!1),Dh:"logarithmic"===t.type?{br:ba}:{br:Sa},Ur:50});const o=this.cursorFormatter?this.cursorFormatter:Xs.Numeric;return{je:r,Ze:n,Qe:void 0===i?o:(t,s,e)=>o(i+t,s,e),Je:1e-9,Ke:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setExtremeTickStyle(t){if("function"==typeof t){const i=this.get("extremeTickStyle");return this.set("extremeTickStyle",t(i))}return this.set("extremeTickStyle",t)}getExtremeTickStyle(){return this.get("extremeTickStyle")}setFormattingOffset(t){return this.set("formattingOffset",t)}getFormattingOffset(){return this.get("formattingOffset")}setTickStyle(t){const i=this.setMajorTickStyle(t).setMinorTickStyle(t);return i.extremeTickStyle!==jo?i.setExtremeTickStyle(t):i}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setFormattingFunction(t){return this.withMutations((i=>i.set("extremeFormattingFunction",t).set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getExtremeFormattingFunction(){return this.get("extremeFormattingFunction")}setExtremeFormattingFunction(t){return this.set("extremeFormattingFunction",t)}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const wa=t=>!(!t||"object"!=typeof t||!("type"in t)||"numeric-ticks"!==t.type),Ca=(t,i,s="image/png",e)=>{i+=`.${s.slice(s.indexOf("image/")+6)}`;const h=t.captureFrame(s,e);if("image/png"!==s&&h.type.includes("image/png"))throw new Error(`saveToFile | type not supported by browser: ${s}\nCheck support table for HTMLCanvasElement.toDataURL`);if(Ot.navigator.msSaveBlob)Ot.navigator.msSaveBlob(h,i);else{const t=Ot.document.createElement("a");Ot.document.body.appendChild(t);const s=Ot.URL.createObjectURL(h);t.href=s,t.download=i,t.click(),setTimeout((()=>{Ot.URL.revokeObjectURL(s),Ot.document.body.removeChild(t)}),0)}},ka=(t,i,s,e,h,r)=>{const n=t.ic(i,s,e,h,r,!0);return n.setDraggingMode(zt.draggable),n},Ta=(t,i)=>{if("relative"===t)return i;if(t instanceof Js)return t;const s=t.x instanceof xh?t.x.ft:t.x.x,e=t.y instanceof xh?t.y.ft:t.y.y;return te(s,e)},Fa=(t,i,s,e,h)=>{if(s){const r=t,n=i,o=Yo(n)?n:ee(n)?e:void 0;if(o&&ie(s)){const t=At(r,o,h.ft);return h.No({engineX:t.x,engineY:t.y})}if(o&&ee(s))return At(r,o,e);if(o&&Yo(s))return At(r,o,s)}else{const s=t;if(ee(i)){const t=h.Oo(s);return At({x:t.engineX,y:t.engineY},h.ft,e)}if(Yo(i)){const t=i,e=h.Oo(s);return At({x:e.engineX,y:e.engineY},h.ft,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")};class Ia{constructor(t,i,e,h,r,o,a,l){this.coordsRelative="relative",this.coordsClient="client",this.ty=[],this.iy=[],this.L=new s,this.sy=void 0,this.ey=void 0,this.hy=void 0,this.$t=A(0,0,0,0),this.ny=!1,this.Xi=!1,this.oy=()=>{this.ly=!0,this.uy.xs()},this.Ay=t=>i=>{const s=this.ty.indexOf(i);-1!==s&&this.ty.splice(s,1),this.us.xs(),t.U()},this.gy=t=>{const i=this.iy.indexOf(t);-1!==i&&this.iy.splice(i,1),this.us.xs()},this.ly=!0,this.onInViewChange=t=>this.L.on("inViewChange",t),this.offInViewChange=t=>this.L.off(t,"inViewChange"),this.vA=t,this.yy=e,this.uy=h,this.removePanel=r,this.qi=i.us.qi;const u=i.us.ni();if(this.uiScale=e.d2({scaleXYConstructor:Ks}).zi(0,100).Vi(0,100).tt(u),this.mg=e.d2({scaleXYConstructor:Ks}).zi(0,this.uiScale.x.getCellSize()).Vi(0,this.uiScale.y.getCellSize()).tt(u),this.engine=i.us.my,this.us=i.us.py,this.es=this.us.es.hs(this,{}),this.vy=()=>i.Sy("unidentified ui"),this.by=i.xy(),this.My=this.uy.Be(this.uiScale).Re(n(0,0)).tt(n(100,100)).De(o).Pe(a).setMouseMoveEventHandler(((t,i)=>this.L.emit("mouseMovePanelBackground",this,i))).setMouseEnterEventHandler(((t,i)=>this.L.emit("mouseEnterPanelBackground",this,i))).setMouseLeaveEventHandler(((t,i)=>this.L.emit("mouseLeavePanelBackground",this,i))).setMouseDownEventHandler(((t,i)=>this.L.emit("mouseDownPanelBackground",this,i))).setMouseUpEventHandler(((t,i)=>this.L.emit("mouseUpPanelBackground",this,i))).setMouseClickEventHandler(((t,i)=>this.L.emit("mouseClickPanelBackground",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.L.emit("mouseDoubleClickPanelBackground",this,i))).setMouseWheelEventHandler(((t,i)=>this.L.emit("mouseWheelPanelBackground",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.L.emit("mouseDragStartPanelBackground",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.L.emit("mouseDragPanelBackground",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.L.emit("mouseDragStopPanelBackground",this,i,s,e))).setTouchStartEventHandler(((t,i)=>this.L.emit("touchStartPanelBackground",this,i))).setTouchMoveEventHandler(((t,i)=>this.L.emit("touchMovePanelBackground",this,i))).setTouchEndEventHandler(((t,i)=>this.L.emit("touchEndPanelBackground",this,i))),l){const t=l.on(this.oy);this._y=()=>l.off(t)}else{const t=i.us.Bo(this.oy);this.wy=i.us.Lo.bind(i.us,t)}const c=i.us.Eo((t=>{this.ny=t,this.L.emit("inViewChange",this,t)}));this.Cy=i.us.zo.bind(i.us,c),this.sy=r}getTheme(){return this.qi}getSizePixels(){return this.mg.getInnerIntervalPixels()}setBackgroundFillStyle(t){return this.My.De(t),this.uy.xs(),this}getBackgroundFillStyle(){return this.My.$h()}setBackgroundStrokeStyle(t){return this.My.Pe(t),this.uy.xs(),this}getBackgroundStrokeStyle(){return this.My.mo()}translateCoordinate(t,i,s){return Fa(t,i,s,this.mg,this.us)}ky(t){return this.ty.push(t),this.us.xs(),t}Ty(t){return this.iy.push(t),this.us.xs(),t}addUIElement(t=yo,i=this.uiScale){i=Ta(i,this.mg);const s=this.vy();return this.ky(ka(t,s,this.uiScale,i,this.Ay(s),this.qi))}addLegendBox(t=To,i=this.uiScale){i=Ta(i,this.mg);const s=this.Ty(ka(t,this.by,this.uiScale,i,this.gy,this.qi));return s.setDraggingMode(zt.notDraggable),void 0!==i&&i!==this.uiScale||(void 0===t||"vertical"===t.getAlignment()?s.setOrigin(je.RightCenter).setPosition({x:100,y:50}):s.setOrigin(je.CenterBottom).setPosition(this.uiScale.gi({x:50,y:0},{x:0,y:3}))),s}getLegendBoxes(){return this.iy}dispose(){return this.Xi||(this.Xi=!0,this.wy&&this.wy(),this._y&&this._y(),Pa(this.uiScale),Pa(this.mg),this.Cy&&this.Cy(),this.ey&&this.ey(),this.uy.U(),this.by.U(),this.ty.slice().forEach((t=>{t.dispose()})),this.iy.slice().forEach((t=>{t.dispose()})),this.us.xs(),this.sy&&this.sy(this),this.L.emit("dispose",this)),this}isDisposed(){return this.Xi}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}saveToFile(t,i,s){return Ca(this.engine,t,i,s),this}Vr(t){this.$t=t,this.oy()}Z(){return this.mg.Z(),this.uiScale.Z(),this}J(){return this.mg.J(),this.uiScale.J(),this}Le(t){if(this.ly){const t=this.uy.us.ni(),i=t.x,s=t.y;this.uiScale.tt(i,s),this.mg.tt(i,s);const e=[this.$t.left,this.$t.right],h=[this.$t.bottom,this.$t.top];this.uiScale.Ri(e),this.uiScale.Ei(h);const r=this.uiScale.getInnerIntervalPixels();this.mg.zi(0,r.x).Ri(e).Vi(0,r.y).Ei(h),this.L.emit("resize",this,r.x,r.y,i,s)}this.ly=!1}Fy(){for(let t=0;t<this.ty.length;t+=1)this.ty[t].Es().Le();for(let t=0;t<this.iy.length;t+=1)this.iy[t].Es().Le();this.hy&&this.hy()}Iy(t,i){if(t){const s=t(i);this.onResize(s.Es.bind(s)),this.ey=s.U.bind(s),this.hy=s.Es.bind(s)}}onBackgroundMouseEnter(t){return this.L.on("mouseEnterPanelBackground",t)}offBackgroundMouseEnter(t){return this.L.off(t,"mouseEnterPanelBackground")}onBackgroundMouseMove(t){return this.L.on("mouseMovePanelBackground",t)}offBackgroundMouseMove(t){return this.L.off(t,"mouseMovePanelBackground")}onBackgroundMouseLeave(t){return this.L.on("mouseLeavePanelBackground",t)}offBackgroundMouseLeave(t){return this.L.off(t,"mouseLeavePanelBackground")}onBackgroundMouseDown(t){return this.L.on("mouseDownPanelBackground",t)}offBackgroundMouseDown(t){return this.L.off(t,"mouseDownPanelBackground")}onBackgroundMouseUp(t){return this.L.on("mouseUpPanelBackground",t)}offBackgroundMouseUp(t){return this.L.off(t,"mouseUpPanelBackground")}onBackgroundMouseClick(t){return this.L.on("mouseClickPanelBackground",t)}offBackgroundMouseClick(t){return this.L.off(t,"mouseClickPanelBackground")}onBackgroundMouseDoubleClick(t){return this.L.on("mouseDoubleClickPanelBackground",t)}offBackgroundMouseDoubleClick(t){return this.L.off(t,"mouseDoubleClickPanelBackground")}onBackgroundMouseDragStart(t){return this.L.on("mouseDragStartPanelBackground",t)}offBackgroundMouseDragStart(t){return this.L.off(t,"mouseDragStartPanelBackground")}onBackgroundMouseDrag(t){return this.L.on("mouseDragPanelBackground",t)}offBackgroundMouseDrag(t){return this.L.off(t,"mouseDragPanelBackground")}onBackgroundMouseDragStop(t){return this.L.on("mouseDragStopPanelBackground",t)}offBackgroundMouseDragStop(t){return this.L.off(t,"mouseDragStopPanelBackground")}onBackgroundMouseWheel(t){return this.L.on("mouseWheelPanelBackground",t)}offBackgroundMouseWheel(t){return this.L.off(t,"mouseWheelPanelBackground")}onBackgroundTouchStart(t){return this.L.on("touchStartPanelBackground",t)}offBackgroundMouseTouchStart(t){return this.L.off(t,"touchStartPanelBackground")}onBackgroundTouchMove(t){return this.L.on("touchMovePanelBackground",t)}offBackgroundTouchMove(t){return this.L.off(t,"touchMovePanelBackground")}onBackgroundTouchEnd(t){return this.L.on("touchEndPanelBackground",t)}offBackgroundTouchEnd(t){return this.L.off(t,"touchEndPanelBackground")}onResize(t){return this.L.on("resize",t)}offResize(t){return this.L.off(t,"resize")}getIsInView(){return this.ny}}const Pa=t=>{t.ti&&t.ti()};class Da extends Ia{constructor(t,i,s,e,h,r){super(t,i,s,i.Py("uipanel bg",0),e,i.us.qi.uiPanelBackgroundFillStyle,i.us.qi.uiPanelBackgroundStrokeStyle,r),this.Iy(h,this.mg)}setMinimumSize(t){return this.Fd=t,this.us.xs(),this}getMinimumSize(){return this.Fd}Le(t){super.Le(t),super.Fy()}}const Ba=A(10,10,10,10);class La extends Ia{constructor(t,i,s,e,h,r,o,a,l,u){super(t,i,s,e,h,r,o,u),this.Dy={},this.Ca=Ba,this.uh=!0,this.By=i.Ly("chart internal ui",0),this.bh=this.By.Nr(this.uiScale).yr("Chart").Re(n(50,100)).Ha(n(0,1)).Zh(a).De(l).setMouseInteractions(!1),this.Ry=this.es.Cg([this.bh]).bs(this.qi.effectsText)}setAnimationsEnabled(t){return this.uh=t,this}getAnimationsEnabled(){return this.uh}setTitle(t){return this.bh.yr(t),this.us.xs(),this}getTitle(){return this.bh.wr()}getTitleSize(){return this.bh.Es().sd()}setTitleFillStyle(t){return this.bh.De(t),this.oy(),this}getTitleFillStyle(){return this.bh.$h()}setTitleFont(t){return this.bh.Zh(t),this.oy(),this}getTitleFont(){return this.bh.jh()}setTitleRotation(t){return this.bh.Qh(t),this.us.xs(),this}getTitleRotation(){return this.bh.Jh()}setTitleEffect(t){return this.Ry.bs(t),this.us.xs(),this}getTitleEffect(){return this.Ry.Ms()}setTitleMargin(t){var i,s;return this.Dy="object"==typeof t?this.Dy?(i=this.Dy,{left:void 0!==(s=t).left?s.left:i.left,top:void 0!==s.top?s.top:i.top,right:void 0!==s.right?s.right:i.right,bottom:void 0!==s.bottom?s.bottom:i.bottom}):t:{left:t,top:t,right:t,bottom:t},this.oy(),this}getTitleMargin(){return this.Dy}setPadding(t){return this.Ca="object"==typeof t?y(this.Ca,t):{left:t,top:t,right:t,bottom:t},this.oy(),this}getPadding(){return this.Ca}Ey(t){const i=t.zy(),s=null==i?void 0:i.height,e=null==i?void 0:i.width;if(void 0!==s&&void 0!==e)return{x:s/2,y:e/2}}dispose(){return super.dispose(),this.By.U(),this}}const Ra={Vy:(t,i)=>t.$h()!==O&&0!==t.wr().length&&t.getVisible()?t.Es().sd().y:0,Oy(t,i){t.Re(n(50,100)).Vr({top:void 0!==i.top?i.top:10,right:i.right||0,left:i.left||0,bottom:i.bottom||0})}},Ea=t=>"show-all-interpolated"===t||"show-nearest-interpolated"===t||"show-pointed-interpolated"===t,za=(t,i)=>{const s="series"in t?t.series:void 0;if(!s||!("getCursorFormattingOverride"in s))return i;const e=s.getCursorFormattingOverride();return e?e(t,i):i},Va=(t,i,e,h,r,n,o)=>{let a,l,u=r,c=n,d=null,f=!0;const A=new s;if(h){f=!1;const i=()=>{f=!0,t.getCursorMode()&&(l&&g?y.Le(...g):t.us.xs())},s=()=>{t.getCursorMode()&&(l&&g?y.Le(...g):t.us.xs())},e=()=>{f=!1,t.getCursorMode()&&(l&&g?y.Le(...g):t.us.xs())},r=()=>{f=!0,t.getCursorMode()&&(l&&g?y.Le(...g):t.us.xs())},n=()=>{t.getCursorMode()&&(l&&g?y.Le(...g):t.us.xs())},o=()=>{f=!1,t.getCursorMode()&&(l&&g?y.Le(...g):t.us.xs())};h.onSeriesBackgroundMouseEnter(i),h.onSeriesBackgroundMouseMove(s),h.onSeriesBackgroundMouseLeave(e),h.onSeriesBackgroundTouchStart(r),h.onSeriesBackgroundTouchMove(n),h.onSeriesBackgroundTouchEnd(o),h.Ny(((i,s)=>{s.onMouseEnter(((i,e,h)=>{s.getCursorEnabled()?(a=h||void 0,t.getCursorMode()&&(l&&g?y.Le(...g):t.us.xs())):l||t.us.xs()})),s.onMouseMove(((i,e,h)=>{s.getCursorEnabled()?(a=h||void 0,t.getCursorMode()&&(l&&g?y.Le(...g):t.us.xs())):l||t.us.xs()})),s.onMouseLeave((()=>{s.getCursorEnabled()?(a=void 0,t.getCursorMode()&&(l&&g?y.Le(...g):t.us.xs())):l||t.us.xs()}))}))}let g;const y={setCursor:i=>(i(e),t),getCursor:()=>e,setCursorMode:i=>(u=i,t.us.xs(),t),getCursorMode:()=>u,setCustomCursor:t=>{l=t},onCursorTargetChanged:t=>A.on("cursorTargetChanged",t),offCursorTargetChanged:t=>{A.off(t)},setCursorFormatting:i=>(c=i,t.us.xs(),t),getCursorFormatting:()=>c,U:()=>{e.dispose(),i.U()},Le:(i,s,h,r)=>{g=[i,s,h,r];const n=t.us.$n();let y=[];if((null==r?void 0:r.explicitTarget)&&u)y=[r.explicitTarget];else if(!i&&u){const t=s.find((t=>t.getIsUnderMouse())),i=n&&t&&t.getCursorEnabled&&t.getCursorEnabled()&&t.vs?t.vs(n):void 0;if(a=i||a,a&&"show-all"!==u&&"show-all-interpolated"!==u)y=[a];else if("show-all"===u||"show-all-interpolated"===u||"show-nearest"===u||"show-nearest-interpolated"===u){if((f||void 0!==t)&&n&&h){for(const t of s){if(t.getCursorEnabled&&!t.getCursorEnabled()||!t.getVisible())continue;const i=h(t,n,u);i&&y.push(i)}"show-nearest"!==u&&"show-nearest-interpolated"!==u||(y.sort(((t,i)=>o(t,n)-o(i,n))),y.length=1)}}else if(("show-pointed"===u||"show-pointed-interpolated"===u)&&n&&t&&t.getCursorEnabled&&t.getCursorEnabled()&&h){const i=h(t,n,u);i&&(y=[i])}}y=Ei(y.map((t=>Zi(t))));const m=(null==r?void 0:r.overrideCursorPositions)||((t,i)=>i),p=y[0],v=y.length>0?y:void 0;if(p!==d&&n&&(l&&l(p,v,n),A.emit("cursorTargetChanged",p,v,n),d=p),l)e.getVisible()&&(e.setVisible(!1),e.Es().Le());else{if(y&&y.length>0){const i=c(t,y[0],y);e.setVisible(!0).setPosition(...m(y,y.map((t=>t.cursorPosition)))).setResultTable((t=>t.setContent(i)))}else e.setVisible(!1);(null==r?void 0:r.afterCursorPointedAt)&&r.afterCursorPointedAt(y),e.Es().Le()}},solveNearest:(i,s,e,h)=>{const r=i||t.us.$n();if(!r)return[];let n=[];if("show-all"===s||"show-all-interpolated"===s||"show-nearest"===s||"show-nearest-interpolated"===s){for(const t of e){if(!t.getCursorEnabled()||!t.getVisible())continue;const i=h(t,r,s);i&&n.push(i)}"show-nearest"!==s&&"show-nearest-interpolated"!==s||(n.sort(((t,i)=>o(t,r)-o(i,r))),n.length=1)}return n=Ei(n.map((t=>Zi(t)))),n},Gy:e};return y};class Oa{constructor(t,i){this.Wy=t,this.Uy=i}alter(t){this.Yy=void 0!==this.Yy?this.Yy:this.Uy(),this.Hy=t,this.Wy(t)}resetValue(){void 0!==this.Hy&&(void 0!==this.Yy&&this.isAltered()&&this.Wy(this.Yy),this.Yy=void 0,this.Hy=void 0)}getNormalValue(){return void 0!==this.Yy?this.Yy:this.Uy()}isAltered(){return void 0!==this.Hy&&this.Uy()===this.Hy}}class Na{constructor(t,i){this.$y=[],this.Xy=t,this.ft=i}update(){return this.Xy.getVisible()?!(this.jy()&&(!this.Zy()||(this.resetTable(),this.Xy.Es(),this.jy()))&&(this.Qy(),this.Xy.Es(),this.jy()&&(this.resetTable(),this.Xy.Es(),1))):(this.Zy()&&this.resetTable(),!0)}Zy(){for(let t=0;t<this.$y.length;t+=1)if(this.$y[t].isAltered())return!0;return!1}resetTable(){for(let t=0;t<this.$y.length;t+=1)this.$y[t].resetValue();return this}jy(){return((t,i)=>{const s=At(t.getPosition(n(-1,-1),Rt.PaddedBackground),t.scale,i),e=At(t.getPosition(n(1,1),Rt.PaddedBackground),t.scale,i);return s.x<i.x.getInnerStart()||e.x>i.x.getInnerEnd()||s.y<i.y.getInnerStart()||e.y>i.y.getInnerEnd()})(this.Xy,this.ft)}Jy(){return((t,i)=>{const s=At(t.getPosition(n(-1,-1),Rt.PaddedBackground),t.scale,i),e=At(t.getPosition(n(1,1),Rt.PaddedBackground),t.scale,i);return s.x<i.x.getInnerStart()||e.x>i.x.getInnerEnd()})(this.Xy,this.ft)}Ky(){return((t,i)=>{const s=At(t.getPosition(n(-1,-1),Rt.PaddedBackground),t.scale,i),e=At(t.getPosition(n(1,1),Rt.PaddedBackground),t.scale,i);return s.y<i.y.getInnerStart()||e.y>i.y.getInnerEnd()})(this.Xy,this.ft)}qy(t){return this.$y.push(t),t}}class Ga extends Na{constructor(){super(...arguments),this.wa=this.qy(new Oa((t=>this.Xy.setOrigin(t)),(()=>this.Xy.getOrigin())))}Qy(){const t=this.wa.getNormalValue(),i=n(this.Jy()?-t.x:t.x,this.Ky()?-t.y:t.y);this.wa.alter(i)}}class Wa extends Na{constructor(t,i,s,e){super(t,i),this.tm=this.qy(new Oa((t=>this.Xy.setTextFont((i=>i.setSize(t)))),(()=>this.Xy.getTextFont().getSize()))),this.im=s,this.sm=e}Qy(){const t=this.tm.getNormalValue(),i=this.im;if(i<t)for(let s=1;s<=this.sm;s+=1){const e=t-(t-i)*(s/this.sm);if(this.tm.alter(e),this.Xy.Es(),!this.jy())return}}}const Ua={Flip:(t,i)=>new Ga(t,i),FontSize:(t=5,i=5)=>(s,e)=>new Wa(s,e,t,i)},Ya={None:nn,Rectangle:Xn,Circle:jn,Diamond:Zn,Pointer:Qn};class Ha extends ro{constructor(){super(...arguments),this.$u=this.qi.cursorResultTableTextFont,this.Od=0,this.hm=this.qi.cursorResultTableTextFillStyle}setContent(t){let i;void 0===t?i=[]:Array.isArray(t)?(i=[],t.forEach((t=>{i.push(Array.isArray(t)?t:[t])}))):i=[[t]];for(let t=0;t<i.length;t+=1){const s=i[t];let e=!1;for(let t=0;t<s.length;t+=1){const i=s[t],h="object"==typeof i&&"text"in i?i.text:"string"==typeof i?i:void 0,r="object"==typeof i&&"icon"in i?i.icon:Ln(i)?i:void 0,n=i instanceof ce&&i;if(!(h&&h.length>0||r||n)){e=!0;break}}e||(s.unshift(""),s.push(""))}const s=i.length;let e=this.getMembers().length;for(let t=0;t<Math.max(s,e);t+=1){const r=this.getRow(t,!0);if(t>=s)this.getMembers()[t].dispose(),t-=1,e-=1;else{const s=i[t].length;let e=r.getMembers().length;for(let n=0;n<Math.max(s,e);n+=1){const o=i[t][n],a="object"==typeof o&&"font"in o?o.font:void 0,l="object"==typeof o&&"fillStyle"in o?o.fillStyle:void 0,u="object"==typeof o&&"text"in o?o.text:"string"==typeof o?o:void 0,c="object"==typeof o&&"icon"in o?o.icon:Ln(o)?o:void 0,d=o instanceof ce&&o,f=r.getMembers();if(n>=s)r.getMembers()[n].dispose(),n-=1,e-=1;else if(void 0!==u&&u.length>0||c||d){const t=a?this.$u.withMutations((t=>{for(const i of Object.keys(a)){const s=a[i];void 0!==s&&t.set(i,s)}return t})):this.$u,i=l||this.hm,s=f[n];if(u){let e;s&&s instanceof Hn?e=s:(s&&s.dispose(),e=r.addElement($n,n)),e.setText(u).setFont(t).setFillStyle(i).setTextRotation(this.Od)}else if(c){let e;s&&s instanceof Jn?e=s:(s&&s.dispose(),e=r.addElement(Kn,n)),e.setFillStyle(i).setShape(c).setSize({y:t.size,x:t.size}),e.setMargin(5)}else if(d){let e;s&&"setTextFillStyleHidden"in(h=s)&&"setText"in h?e=s:(s&&s.dispose(),e=r.addElement(So.setBackground(Ya.None),n).setOn(!0));const o=d.Is();void 0!==o&&e.setButtonShape(o),e.setText(d.getName()).setTextFont(t).setTextFillStyle(i).setTextRotation(this.Od),d.styleLegendEntry(e)}}else{const t=f[n];t&&t instanceof qn||(t&&t.dispose(),r.addGap(void 0,n))}}}}var h;return this.Ds.xs(),this}setTextFillStyle(t){this.hm="function"==typeof t?t(this.hm):t;for(let t=0;t<this.getMemberCount();t+=1){const i=this.getRow(t);for(let t=0;t<i.getMembers().length;t+=1){const s=i.getMembers()[t];s instanceof Hn&&s.setFillStyle(this.hm)}}return this.Ds.xs(),this}getTextFillStyle(){return this.hm}setTextFont(t){return Ih(t)?this.$u=t:this.$u=t(this.$u),this.Ds.xs(),this}getTextFont(){return this.$u}setTextRotation(t){return this.Od=t,this.Ds.xs(),this}getTextRotation(){return this.Od}rm(){for(let t=0;t<this.Cd.length;t+=1)for(let i=0;i<this.Cd[t].getMembers().length;i+=1)this.Cd[t].getMembers()[i].dispose()}Es(){for(let t=0;t<this.Cd.length;t+=1)this.Cd[t].setMinimumSize(void 0);super.Es();for(let t=0;t<this.Cd.length;t+=1)this.Cd[t].setMinimumSize(this.size.x);return super.Es(),this}}class $a{constructor(t,i,e,h,r,n){this.nm=[],this.om=!0,this.am=!0,this.ny=!1,this.ji=!0,this.Xi=!1,this.lm=[],this.L=new s,this.Ds=t,this.renderingScale=i,this.scale=e,this.um=h,this.dm=r,this.qi=n,this.Xy=new Ha(this.Ds,this.renderingScale,this.scale,this.dm,Yt,n).setMouseInteractions(!1).setBackground((t=>t.setFillStyle(n.cursorResultTableFillStyle).setStrokeStyle(n.cursorResultTableStrokeStyle))).setTextFillStyle(n.cursorResultTableTextFillStyle).setTextFont(n.cursorResultTableTextFont),this.fm=Ua.Flip(this.Xy,this.scale)}isDisposed(){return this.Xi}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t)}setPointMarkerVisible(t){return this.om=t,this.nm.forEach((i=>i.pointMarker.setVisible(i.targetVisible&&t))),this.Ds.xs(),this}getPointMarkerVisible(){return this.om}setPointMarker(t){return this.nm.forEach((i=>t(i.pointMarker))),this.lm.push(t),this.Ds.xs(),this}setResultTableVisible(t){return this.am=t,this.Ds.xs(),this}getResultTableVisible(){return this.am}setResultTable(t){return t(this.Xy),this.Ds.xs(),this}setAutoFitStrategy(t){return this.fm&&this.fm.resetTable(),this.fm=t?t(this.Xy,this.Ds.us.ft):void 0,this.Ds.xs(),this}getAutoFitStrategy(){return void 0!==this.fm}setVisible(t){return this.ji=t,this.Ds.xs(),this}getVisible(){return this.ji}dispose(){return this.nm.forEach((t=>t.pointMarker.dispose())),this.Xy.dispose(),this.lm.length=0,this.um(this),this.L.emit("dispose"),this}Le(){return this.fm&&this.fm.update(),this.Xy.setVisible(this.ny&&this.ji&&this.am),this.nm.forEach((t=>t.pointMarker.setVisible(t.targetVisible&&this.ny&&this.ji&&this.om))),this.nm.forEach((t=>t.pointMarker.Le())),this.Xy.Le(),this}Es(){return this.nm.forEach((t=>t.pointMarker.Es())),this.Xy.Es(),this}Am(t,i){const s=i===this.scale?t:At(t,i,this.scale);this.Xy.setPosition(s)}}const Xa=t=>t.setResultTable((t=>t.setEffect(!0).setOrigin(n(-1,-1)).setMargin(5)));class ja extends $a{constructor(){super(...arguments),this.va={x:0,y:0}}setPosition(t){const i=this.renderingScale,s=Ta(t.resultTableScale,i),e=s===this.scale?t.resultTable:At(t.resultTable,s,this.scale),h=Ta(t.pointMarkerScale,i),r=h===this.scale?t.pointMarker:At(t.pointMarker,h,this.scale);this.va=r;let n=this.nm[0];if(!n){const t=new Jn(this.Ds,this.renderingScale,this.scale,Yt,this.qi).setMouseInteractions(!1).setFillStyle(this.qi.cursorPointMarkerFillStyle).setSize(this.qi.cursorPointMarkerSize).setShape(this.qi.cursorPointMarkerShape);n={pointMarker:t,targetVisible:!0},this.nm.push(n),this.lm.forEach((i=>i(t)))}return n.pointMarker.setPosition(r),this.Xy.setPosition(e),this.Ds.xs(),this}Es(){return super.Es(),this.ny=((t,i,s=i)=>{const e=i!==s?At(t,i,s):t;return e.x>=s.x.getInnerStart()&&e.x<=s.x.getInnerEnd()&&e.y>=s.y.getInnerStart()&&e.y<=s.y.getInnerEnd()})(this.va,this.scale),this}}class Za{constructor(t,i=[]){this.gm=[],this.ym=(t,i)=>(this.gm.forEach((s=>s(t,i))),t),this.addStyler=t=>new Za(this.dm,this.gm.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new Za(t,this.gm.map((t=>t))),this.pm=(t,i,s,e,h)=>this.ym(new ja(t,i,s,e,this.dm,h),h),this.dm=t,this.gm=i}}const Qa=new Za(Xn,[Xa]),Ja=new Za(Qn,[Xa,t=>t.setPointMarkerVisible(!1).setResultTable((t=>t.setOrigin(n(0,-1)).setMargin(0).setBackground((t=>{t instanceof Qn&&t.setDirection(Vt.Down).setPointerLength(10).setPointerAngle(60)}))))]),Ka=Qa,qa=Qa,tl=Qa,il=Ja,sl=new Za(Xn,[Xa,t=>t.setPointMarkerVisible(!1).setResultTable((t=>t.setOrigin(je.LeftBottom)))]);var el;!function(t){t[t.LabelsInsideSlices=0]="LabelsInsideSlices",t[t.LabelsOnSides=1]="LabelsOnSides"}(el||(el={}));const hl={SortByName:(t,i)=>t.getName().localeCompare(i.getName(),void 0,{numeric:!0}),SortByValueAscending:(t,i)=>t.getAnimatedValue()-i.getAnimatedValue(),SortByValueDescending:(t,i)=>i.getAnimatedValue()-t.getAnimatedValue(),None:()=>0},rl={Name:t=>`${t.getName()}`,NamePlusValue:t=>`${t.getName()}: ${Math.round(t.getAnimatedValue())}`,NamePlusRelativeValue:(t,i)=>`${t.getName()}: ${(100*i).toFixed(2)}%`};class nl extends ce{constructor(){super(...arguments),this.ws="Slice",this.S=0}}const ol=(t,i)=>{di(i),t.setExploded(!t.getExploded())};class al extends nl{}class ll extends al{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.vm=!1,this.Sm=O,this.bm=O,this.xm=this.S,this.Mm=this.vm?1:0,this._m=this.getVisible(),this.wm=K((()=>this.chart.us.xs())),this.Cm=K((()=>this.chart.us.xs())),this.km=()=>{this.Tm=void 0},this.Fm=()=>{this.Im=void 0},this.index=t,this.chart=e,this.scale=h,this.Ki=r,this.Pm=i.rd(h).cs(this.getHighlight()),this.fs(this.Pm),this.th=s.Nr(h).cs(this.getHighlight()),this.fs(this.th,{isText:!0}),this.onMouseClick(ol),this.onTouchEnd(ol)}setValue(t){return this.chart.getAnimationsEnabled()?this._m&&this.Dm(this.xm,t):this.xm=t,this.S=t,this.chart.us.xs(),this}getValue(){return this.S}setExploded(t){if(t&&!1===this.chart.getMultipleSliceExplosion()){const t=this.chart.getSlices();for(let i=0;i<t.length;i+=1)t[i]!==this&&t[i].getExploded()&&t[i].setExploded(!1)}return this.chart.getAnimationsEnabled()?(this.Im&&this.Im.finish(),this.Im=this.Cm(300,Q.ease)([[this.Mm,t?1:0]],(([t])=>{this.Mm=t,this.chart.us.xs()})),this.Im.onEveryAnimationEnd(this.Fm),this.vm=!this.vm):!1!==this.chart.getMultipleSliceExplosion()||t?(this.Mm=this.vm?0:1,this.vm=!this.vm):(this.Mm=0,this.vm=!this.vm),this.chart.us.xs(),this}getExploded(){return this.vm}setVisible(t){return this._m=t,!1===t?this.chart.getAnimationsEnabled()&&this.xm>0?(this.Tm&&(this.Tm.finish(!1),this.Tm=void 0),this.Dm(this.xm,0,(()=>super.setVisible(!1)))):(this.xm=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.Tm&&(this.Tm.finish(!1),this.Tm=void 0),super.setVisible(!0),this.Dm(this.xm,this.S)):(this.xm=this.S,super.setVisible(!0)),this}Dm(t,i,s){this.Tm=this.wm(300,Q.ease)([[t,i]],(([t])=>{this.xm=t,this.chart.us.xs()})),this.Tm.onEveryAnimationEnd(this.km),s&&this.Tm.onAnimationEnd(s)}setStyle(t,i,s,e){this.Sm=t,this.bm=s,this.Pm.De(this.Sm).Pe(i),this.th.De(this.bm).Zh(e);for(let t=0;t<this.Qi.length;t+=1)this.styleLegendEntry(this.Qi[t])}getAnimatedValue(){return this.xm}getAnimatedExplosion(){return this.Mm}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.Sm,stroke:this.Pm.mo()})}}const ul=(t,i,s)=>ws(i,_s(Rs(.5*(t.hu()+t.ki())*Math.PI/180),s)),cl=(t,i,s,e,h,r)=>{const n=t.length;let o=90;for(let a=0;a<n;a+=1){const l=t[a],u=o-360*i[a],c=l.getAnimatedExplosion();if(0===c||1===n)l.Pm.Re(s);else{const t=ws(s,_s(Rs(.5*(o+u)*Math.PI/180),r*c));l.Pm.Re(t)}l.Pm.uu(o).Ue(u).du(e).fu(e).Au(h),o=u}},dl=t=>{const i=t.getSlices();for(let t=0;t<i.length;t+=1)i[t].setExploded(!1)};class fl extends La{constructor(t,i,s,e,h,r,n){super(t,i,s,i.Py("pieChart bg",0),e,i.us.qi.pieChartBackgroundFillStyle,i.us.qi.pieChartBackgroundStrokeStyle,i.us.qi.pieChartTitleFont,i.us.qi.pieChartTitleFillStyle,r),this.Bm=[],this.Lm=hl.SortByName,this.Jl=0,this.Rm=this.qi.pieChartSliceFillStylePalette,this.Em=this.qi.pieChartSliceStrokeStyle,this.zm=!0,this.Vm=this.qi.pieChartSliceLabelFont,this.Om=this.qi.pieChartSliceLabelFillStyle,this.Nm=0,this.Gm=!1,this.Wm=20,this.Um=!0,this.Ym=!0,this.Hm=t=>{const i=this.Bm.indexOf(t);i>=0&&(this.Bm.splice(i,1),this.$m())},this.us.jn(Vo.gf),this.Xm=i.jm("pieChart bottom",0),this.Zm=i.jm("pieChart top",1),this.bh.yr("Pie Chart"),this.Iy(h,this.mg),this.onBackgroundMouseDoubleClick(dl);const o=Ae(new ge(dl));this.onBackgroundTouchStart(o.onTouchStart),this.onBackgroundTouchMove(o.onTouchMove),this.onBackgroundTouchEnd(o.onTouchEnd);const a=i.Qm(),l=jt(n?n.cursorBuilder:void 0,qa);this.Jm=Va(this,a,l.pm(a,this.uiScale,this.uiScale,Yt,this.qi),void 0,"show-pointed",Al,(()=>0)),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled))}setCursor(t){return this.Jm.setCursor(t),this}getCursor(){return this.Jm.getCursor()}setCursorMode(t){return this.Jm.setCursorMode(t),this}getCursorMode(){return this.Jm.getCursorMode()}setCustomCursor(t){return this.Jm.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.Jm.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.Jm.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Jm.setCursorFormatting(t),this}getCursorFormatting(){return this.Jm.getCursorFormatting()}addCursor(t=qa){const i=this.vy(),s=t.pm(i,this.uiScale,this.uiScale,this.Ay(i),this.qi);return this.ky(s),s}addSlice(t,i){const s=new ll(this.Nm,this.Xm,this.Zm,this,this.mg,this.Hm,this.qi,this.us.es);this.Nm+=1,s.setName(t);const e=this.uh;return this.uh=!1,s.setValue(i),this.uh=e,s.setEffect(this.Um),this.Km(s),this.Bm.push(s),this.$m(),s.setHighlightOnHover(this.zm),s.onMouseMove((()=>{this.getCursorMode()&&this.us.xs()})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Bm}setMultipleSliceExplosion(t){return this.Gm=t,this}getMultipleSliceExplosion(){return this.Gm}setInnerRadius(t){return this.Jl=t,this.us.xs(),this}getInnerRadius(){return this.Jl}setSliceExplosionOffset(t){return this.Wm=t,this.us.xs(),this}getSliceExplosionOffset(){return this.Wm}setLUT(t){return this.Xd=t,this.us.xs(),this}setSliceFillStyle(t){this.Rm=t;for(let t=0;t<this.Bm.length;t+=1)this.Km(this.Bm[t]);return this.us.xs(),this}getSliceFillStyle(){return this.Rm}setSliceStrokeStyle(t){this.Em="function"==typeof t?t(this.Em):t;for(let t=0;t<this.Bm.length;t+=1)this.Km(this.Bm[t]);return this.us.xs(),this}getSliceStrokeStyle(){return this.Em}setSliceEffect(t){return this.Um=t,this.Bm.forEach((i=>i.es.ns.bs(t))),this.us.xs(),this}getSliceEffect(){return this.Um}setSliceSorter(t){return this.Lm=t,this.Bm=this.Bm.sort(this.Lm),this.us.xs(),this}getSliceSorter(){return this.Lm}setLabelFillStyle(t){this.Om="function"==typeof t?t(this.Om):t;for(let t=0;t<this.Bm.length;t+=1)this.Km(this.Bm[t]);return this.us.xs(),this}getLabelFillStyle(){return this.Om}setLabelFont(t){this.Vm="function"==typeof t?t(this.Vm):t;for(let t=0;t<this.Bm.length;t+=1)this.Km(this.Bm[t]);return this.us.xs(),this}getLabelFont(){return this.Vm}setLabelEffect(t){return this.Ym=t,this.Bm.forEach((i=>i.es.rs.bs(t))),this.us.xs(),this}getLabelEffect(){return this.Ym}setLabelFormatter(t){return this.qm=t,this.us.xs(),this}getLabelFormatter(){return this.qm}setSliceHighlightOnHover(t){return this.zm=t,this.Bm.forEach((i=>i.setHighlightOnHover(t))),this}Le(t){super.Le(t),Ra.Oy(this.bh,this.Dy),super.Fy();const i=Ra.Vy(this.bh,this.Dy),s=n(this.mg.x.getInnerInterval()-(this.Ca.left+this.Ca.right),this.mg.y.getInnerInterval()-(this.Ca.bottom+this.Ca.top+i)),e=n(this.Ca.left+s.x/2,this.Ca.bottom+s.y/2);if(this.Xd){const t=this.Xd;this.Bm.forEach((i=>{this.Km(i,new U({color:t.getColors(i.getAnimatedValue())}))}))}for(let t=0;t<this.Bm.length;t+=1){const i=this.Bm[t].getAnimatedValue()>0;this.Bm[t].Pm.setVisible(i),this.Bm[t].th.setVisible(i)}this.Bm=this.Bm.sort(this.Lm);const h=this.Bm.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/r:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.th.yr(this.qm(i,o[t])).Es()}this.Jm.Le(!1,this.Bm,((t,i,s)=>{const e=o[h.indexOf(t)]||0,r=this.us.Oo(i);return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.us.ft,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.us.ft},slice:t,category:t.getName(),value:t.getValue(),relativeValue:e}})),this.tp(h,o,e,s)}Km(t,i=this.Rm(t.index,t)){t.setStyle(i,this.Em,this.Om,this.Vm)}$m(){this.Bm=this.Bm.sort(this.Lm),this.us.xs()}sf(){return this.Bm}dispose(){return super.dispose(),this.Bm.slice().forEach((t=>t.dispose())),this.Jm.U(),this.Zm.U(),this.Xm.U(),this}}const Al=(t,i,s)=>[[i.slice],[{text:i.value.toString(),font:{weight:"bold"}}]],gl={UserSeries:{type:"ApplicationType",args:{type:"UserSeries"}},InternalUI:{type:"ApplicationType",args:{type:"InternalUI"}}},yl=(...t)=>{const i=[];return t.forEach((t=>{var s;t&&"object"==typeof(s=t)&&s&&"pattern"in s&&i.push({type:"DataPattern",args:t})})),i};class ml extends fl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.qm=rl.NamePlusValue,this.ip=[],this.sp=40,this.ep=5,this.hp=10,this.rp=this.qi.pieChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.rp=t;for(let t=0;t<this.ip.length;t+=1)this.ip[t].Ge(this.rp);return this.us.xs(),this}getLabelConnectorStyle(){return this.rp}setLabelSliceOffset(t){return this.sp=t,this.us.xs(),this}getLabelSliceOffset(){return this.sp}setLabelConnectorGapStart(t){return this.ep=t,this.us.xs(),this}getLabelConnectorGapStart(){return this.ep}setLabelConnectorEndLength(t){return this.hp=t,this.us.xs(),this}getLabelConnectorEndLength(){return this.hp}tp(t,i,s,e){const h=this.Vm.getSize(),r=this.sp,n=this.hp,o=this.ep,a=Math.min(this.Wm,r-o);let l=0;if(1===t.length)l=t[0].th.sd().x;else for(let i=0;i<t.length;i+=1)l=Math.max(l,t[i].th.sd().x);const u=Math.max(.5*(Math.min(e.x-2*l-2*n,e.y-2*h)-2*r),0);if(u<50){const r=Math.max(.5*Math.min(e.x,e.y-2*h),0);cl(t,i,s,r,this.Jl,a),t.forEach((t=>t.th.setVisible(!1))),this.ip.forEach((t=>t.setVisible(!1)))}else{cl(t,i,s,u,this.Jl,a);let e=90;const h=t.map(((t,h)=>{const o=360*i[h],a=e-o,l=Rs(Bs(.5*(e+a))),c=l.x>=0?-1:1,d=ws(ws(s,_s(l,u+r)),{x:c*-n,y:0});e=a;const f={x:c,y:0};t.th.Re(d).Ha(f),t.th.Es();const A=As(t.th.qe());return{position:d,alignment:f,shape:t.th,boundaries:A,sliceAngleVec:l,slice:t}})),l=[];for(let t=0;t<h.length;t+=1){const i=h[t],s=l[l.length-1];s&&!1!==ns([s.boundaries,i.boundaries])?i.shape.setVisible(!1):(l.push(i),i.shape.setVisible(!0))}for(let t=0;t<this.ip.length;t+=1)this.ip[t].setVisible(!1);l.forEach(((t,i)=>{const e=t.slice.Pm,h=ul(e,s,u+o+a*t.slice.getAnimatedExplosion()),r=Ds(t.position.y,h,s),n=t.position;this.np([h,r,n])}))}}getMinimumSize(){return n(500,300)}np(t){let i;for(let t=0;t<this.ip.length;t+=1)if(!this.ip[t].getVisible()){i=this.ip[t].setVisible(!0);break}void 0===i&&(i=this.Zm.op(this.mg,void 0,[gl.InternalUI]).Ge(this.rp).setMouseInteractions(!1),this.ip.push(i)),i.Vt().fl(t)}}class pl extends fl{constructor(){super(...arguments),this.qm=rl.Name,this.ap=.5}tp(t,i,s,e){const h=this.Wm,r=Math.max(0,.5*Math.min(e.x,e.y)-h);cl(t,i,s,r,this.Jl,h);for(let i=0;i<t.length;i+=1){const e=t[i],n=e.Pm,o=e.th,a=this.Jl/100,l=((1-a)*this.ap+a)*r+e.getAnimatedExplosion()*h,u=ul(n,s,l);o.Re(u).Ga(0).Ua(0)}}getMinimumSize(){return n(200,200)}setLabelPosition(t){return this.ap=t,this.us.xs(),this}getLabelPosition(){return this.ap}}const vl={LabelsOnSides:ml,LabelsInsideSlices:pl},Sl=t=>{if(Se(t)){const i=t.getThickness(),s=t.getFillStyle();if(Y(s))return 1===i?Dh:new Lh({size:i,fillStyle:s,shape:"sphere"})}return Dh};class bl{constructor(t,i,e,h,r,n,o,a,l,u){this.L=new s,this.S=0,this.ji=!0,this.Xi=!1,this.xs=t,this.lp=i,this.up=e,this.cp=h,this.dp=r,this.fp=n,this.Od=o,this.hm=a,this.Ap=l,this.hc=u}setValue(t){return t===this.S||(this.S=t,this.xs(),this.L.emit("valueChange",this,this.S)),this}getValue(){return this.S}setTickStyle(t){return this.up="function"==typeof t?t(this.up):t,this.xs(),this}getTickStyle(){return this.up}setTickLength(t){return this.cp=t,this.xs(),this}getTickLength(){return this.cp}setGridStrokeStyle(t){return this.dp="function"==typeof t?t(this.dp):t,this.xs(),this}getGridStrokeStyle(){return this.dp}setTextPadding(t){return this.fp=t,this.xs(),this}getTextPadding(){return this.fp}setTextRotation(t){return this.Od=t,this.xs(),this}getTextRotation(){return this.Od}setTextFillStyle(t){return this.hm="function"==typeof t?t(this.hm):t,this.xs(),this}getTextFillStyle(){return this.hm}setTextFont(t){return this.Ap="function"==typeof t?t(this.Ap):t,this.xs(),this}getTextFont(){return this.Ap}setTextFormatter(t){return this.hc=t,this.xs(),this}onValueChange(t){return this.L.on("valueChange",t)}offValueChange(t){return this.L.off(t,"valueChange")}dispose(){return this.Xi||(this.Xi=!0,this.lp(),this.xs(),this.L.emit("dispose",this)),this}isDisposed(){return this.Xi}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setVisible(t){const i=this.ji!==t;return this.ji=t,i&&(this.L.emit("visibleStateChanged",this,this.ji),this.xs()),this}getVisible(){return this.ji}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}}class xl extends bl{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d){super(t,i,s,e,h,r,n,o,a,l),this.gp=u,this.yp=c,this.Ca=d}setBackgroundFillStyle(t){return this.gp="function"==typeof t?t(this.gp):t,this.xs(),this}getBackgroundFillStyle(){return this.gp}setBackgroundStrokeStyle(t){return this.yp="function"==typeof t?t(this.yp):t,this.xs(),this}getBackgroundStrokeStyle(){return this.yp}setPadding(t){return this.Ca="number"==typeof t?{left:t,top:t,right:t,bottom:t}:{...this.Ca,...t},this.xs(),this}getPadding(){return this.Ca}}class Ml{constructor(t,i,s,e){this.mp=[],this.pp=new Map,this.vp=t,this.Sp=i,this.bp=s,this.xp=e}Mp(){this.bp&&this.bp();const t=[];return{add:(i,s)=>{t.push({instanceUniqueProperties:i,instanceSharedProperties:s})},finishPlot:()=>{const i=[];let s=[];t.forEach((t=>{const s=i.find((i=>((t,i)=>{const s=Object.keys(t);for(const e of s)if(t[e]!==i[e])return!1;return!0})(i.sharedProperties,t.instanceSharedProperties)));s?s.instances.push(t.instanceUniqueProperties):i.push({sharedProperties:t.instanceSharedProperties,instances:[t.instanceUniqueProperties]})}));const e=this.mp.slice(),h=[];i.forEach((t=>{let i=e.pop();i||(i=this.vp(),this.mp.push(i));const r=[],n=i._p().slice();t.instances.forEach(((t,i)=>{const s=n.shift();r.push({...t,existingMember:s})}));const o=this.Sp(i,r,t.sharedProperties);s=xi(s,o,{canReturnB:!0});for(let s=0;s<t.instances.length;s+=1)h.push({jo:t.instances[s].jo,collection:i,member:o[s]});n.forEach((t=>{null==i||i.Td(t)}))})),e.forEach((t=>{t.dispose();const i=this.mp.indexOf(t);i<0?Di(0,(()=>{})):this.mp.splice(i,1)})),h.forEach((t=>{const i=this.pp.get(t.jo);i&&t.collection.us.ao({entity:i.collection,collectionMember:i.member},{entity:t.collection,collectionMember:t.member})})),this.pp.clear(),h.forEach((t=>{this.pp.set(t.jo,t)})),this.xp&&this.xp(this.mp,s)}}}wp(){this.mp.forEach((t=>{t.dispose()})),this.mp.length=0}}class _l{constructor(t){this.Cp=[],this.kp=t}Mp(){return this.Tp(),{add:()=>this.ll(),finishPlot:()=>{this.Fp()}}}ll(){let t=this.Cp.find((t=>t.isFree));return t||(t={isFree:!1,shape:this.kp()},this.Cp.push(t)),t.isFree=!1,t.shape}Tp(){this.Cp.forEach((t=>{t.isFree=!0}))}Fp(){this.Cp.filter((t=>t.isFree)).forEach((t=>{t.shape.dispose(),this.Cp.splice(this.Cp.indexOf(t),1)}))}wp(){this.Cp.forEach((t=>t.shape.dispose())),this.Cp.length=0}}class wl extends xh{constructor(t,i,s,e,h,r,n,o,a){super(t,i,s,e,o,{numeric:i.Ip({x:t.us.qi.xAxis3DNumericTicks,y:t.us.qi.yAxis3DNumericTicks,z:t.us.qi.zAxis3DNumericTicks}),datetime:i.Ip({x:t.us.qi.xAxis3DDateTimeTicks,y:t.us.qi.yAxis3DDateTimeTicks,z:t.us.qi.zAxis3DDateTimeTicks}),time:i.Ip({x:t.us.qi.xAxis3DTimeTicks,y:t.us.qi.yAxis3DTimeTicks,z:t.us.qi.zAxis3DTimeTicks})},{type:"linear"}),this.Rf=[],this.Pp=()=>{},this.Dp=()=>{},this.Bp=()=>{},this.Lp=()=>{},this.chart=t,this.Rp=h,this.Ep=r,this.zp=n,this.Vp=this.Rp.ft;const l=this.Eh.Ip({x:this.qi.xAxis3DStrokeStyle,y:this.qi.yAxis3DStrokeStyle,z:this.qi.zAxis3DStrokeStyle});this.Op=this.Rp.op([gl.InternalUI]).Ge(l).Np(Sl(l)).setMouseInteractions(!1),this._h=this.Ep.Nr(this.zp).setMouseInteractions(!1).De(i.Ip({x:t.us.qi.xAxis3DTitleFillStyle,y:t.us.qi.yAxis3DTitleFillStyle,z:t.us.qi.zAxis3DTitleFillStyle})).Zh(i.Ip({x:t.us.qi.xAxis3DTitleFont,y:t.us.qi.yAxis3DTitleFont,z:t.us.qi.zAxis3DTitleFont})).na(3),this.Gp=new _l((()=>this.Ep.Nr(this.zp).na(2).Or(Hi).Vr(Hi))),this.Wp=new Ml((()=>this.Ep.Yp(this.zp).setMouseInteractions(!1).na(1)),((t,i,s)=>(t.De(s.fillStyle).Pe(s.strokeStyle),i.map((({positions:i,existingMember:s})=>{const e=s||t.$r();return e.wl(i),e}))))),this.Hp=new Ml((()=>this.Rp.Ug().setMouseInteractions(!1)),((t,i,s)=>(t.Vt().Ge(s.lineStyle),i.map((({positions:i,existingMember:s})=>s||t.fl(i)))))),this.es=a,this.Kh=this.es.Cg([this._h]).bs(e.effectsText),this.Op.setMouseEnterEventHandler(this.Pp).setMouseLeaveEventHandler(this.Dp).setMouseDragEventHandler(this.Bp).setMouseDragStopEventHandler(this.Lp),s.lg=this}setTickStrategy(t,i){return super.Nh(t,i)}getTickStrategy(){return this.eh}addCustomTick(){const t=new xl((()=>this.chart.us.xs()),(()=>{const i=this.Rf.indexOf(t);i>=0&&this.Rf.splice(i,1)}),this.qi.xAxis3DNumericTicks.majorTickStyle.tickStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.tickLength,this.qi.xAxis3DNumericTicks.majorTickStyle.gridStrokeStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.tickPadding,this.qi.xAxis3DNumericTicks.majorTickStyle.labelRotation,this.qi.xAxis3DNumericTicks.majorTickStyle.labelFillStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.labelFont,(t=>this.formatValue(t)),O,at,{left:4,right:4,top:4,bottom:4});return this.Rf.push(t),this.chart.us.xs(),t}setStrokeStyle(t){return this.Op.Ge(t).Np(Sl(this.Op.mu())),this.chart.us.xs(),this}getStrokeStyle(){return this.Op.mu()}setMouseInteractions(t){return this}setVisible(t){return super.setVisible(t),this.Op.setVisible(t),!1===t&&(this.Hp.wp(),this.Gp.wp(),this.Wp.wp()),this.Rp.xs(),this}Bg(){return this.chart.getSeries()}$p(t){return Math.abs(this.ft.it(t)*this.Rp.Xp(1))}Rr(t,i,s){const e=Math.abs(this.ft.it(i-t)*this.Rp.Xp(1));return{min:t-s*e,max:i+s*e}}vr(t,i){const s=new Cl(i,t,this.Ep,this.zp,this.Rp);return s.th.na(0),s}Sr(t,i){const s=this.jp(i,t.S,t.Ph.pr.tickLength,t.Ph.pr.tickPadding);return t.th.Re(s.labelPosition).Ha(s.labelAlignment),s}jp(t,i,s,e){const{wuSize:h,start:r,end:o,tickDirection3D:a,tickDirection2D:l}=t,u=(i-this.ft.getInnerStart())/(this.ft.getInnerEnd()-this.ft.getInnerStart()),c=Ji.addVec(fs(r,o,u),Ji.multiplyVec(Ji.multiply(a,this.Rp.Xp(.5*this.Op.mu().getThickness())),h)),d=Ji.addVec(c,Ji.multiplyVec(Ji.multiply(a,this.Rp.Xp(s)),h)),f=this.Rp.Zp(d)||n(0,0);return{labelPosition:ws(At(f,this.chart.us.ft,this.zp),_s(l,e)),labelAlignment:{x:-l.x,y:-l.y},posTickEnd3D:d,posTickStart3D:c,tickPositionRelative:u}}Qp(t,i,s){const{wuSize:e,start:h,end:r,tickDirection3D:o}=i,a=(t-this.ft.getInnerStart())/(this.ft.getInnerEnd()-this.ft.getInnerStart()),l=Ji.addVec(fs(h,r,a),Ji.multiplyVec(Ji.multiply(o,this.Rp.Xp(.5*this.Op.mu().getThickness())),e)),u=Ji.addVec(l,Ji.multiplyVec(Ji.multiply(o,this.Rp.Xp(10)),e)),c=this.Rp.Zp(l)||n(0,0),d=this.Rp.Zp(u)||n(0,0);return this.Ep.We(this.zp).Ye(c).Ue(d).Ge(new ve({fillStyle:new U({color:x(120*s)}),thickness:1}))}Br(t,i){return kl(t,i,this.ft)}Le(t){if(!this.ji)return;const i=Math.min(this.Gh,this.Wh),s=Math.max(this.Gh,this.Wh),e=this.Vp,h=l(e.x.ht(),e.y.ht(),e.z.ht());let r,o;this.Jp()?(r=l(e.x.getInnerEnd(),e.y.getInnerStart(),e.z.getInnerStart()),o=l(e.x.getInnerEnd(),e.y.getInnerStart(),e.z.getInnerEnd())):(r=l(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),o=this.Eh.Kp(l(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),r));const a=this.Eh.hf,u=this.Rp.Zp(r)||n(0,0),c=this.Rp.Zp(o)||n(0,0),d=fs(r,o,.5),f=Ji.addVec(d,Ji.multiplyVec(Ji.multiply(a,-1),h)),A=this.Rp.Zp(d)||n(0,0),g=this.Rp.Zp(f)||n(0,0),y=bs(Cs(At(A,this.chart.us.ft,this.zp),At(g,this.chart.us.ft,this.zp)));this.Op.Vt().fl([r,o]);const{gridlinePositionA:m,gridlinePositionB:p,gridlinePositionC:v}=this.Eh.qp(t),S=t=>({x:-1===t.x?this.Vp.x.getInnerStart():1===t.x?this.Vp.x.getInnerEnd():0,y:-1===t.y?this.Vp.y.getInnerStart():1===t.y?this.Vp.y.getInnerEnd():0,z:-1===t.z?this.Vp.z.getInnerStart():1===t.z?this.Vp.z.getInnerEnd():0}),b=S(m),x=S(p),M=S(v),_={physicalAxisSize:Ms(Cs(u,c)),wuSize:h,start:r,end:o,tickDirection3D:a,tickDirection2D:y,gridlinePositionA:b,gridlinePositionB:x,gridlinePositionC:M},w=this.nr(_),C=this.Hp.Mp();for(const[t,i]of this.hh)for(const[,s]of i){const i=w.get(s);if(!i)continue;const e=this.tv(_,i);C.add({jo:0,positions:[e.tickStroke.start,e.tickStroke.end]},{lineStyle:t.pr.tickStyle}),e.gridStroke&&C.add({jo:0,positions:e.gridStroke},{lineStyle:t.pr.gridStrokeStyle})}const k=this.Gp.Mp(),T=this.Wp.Mp(),F={x:0,y:0};this.Rf.forEach((t=>{if(!t.ji||t.S<i||t.S>s)return;const e=this.jp(_,t.S,t.cp,t.fp),h=this.tv(_,e);if(t.hm!==O){const i=k.add().Re(e.labelPosition).Ha(e.labelAlignment).De(t.hm).Zh(t.Ap).yr(t.hc(t.S)).Qh(t.Od),s=i.Es().ni();if(F.x=Math.max(F.x,s.x),F.y=Math.max(F.y,s.y),t.gp!==O){const s=i.qe(),e=[{x:s[0].x-t.Ca.left,y:s[0].y+t.Ca.top},{x:s[1].x+t.Ca.right,y:s[1].y+t.Ca.top},{x:s[2].x+t.Ca.right,y:s[2].y-t.Ca.bottom},{x:s[3].x-t.Ca.left,y:s[3].y-t.Ca.bottom}];T.add({jo:0,positions:e},{fillStyle:t.gp,strokeStyle:t.yp})}}C.add({jo:0,positions:[h.tickStroke.start,h.tickStroke.end]},{lineStyle:t.up}),h.gridStroke&&C.add({jo:0,positions:h.gridStroke},{lineStyle:t.dp})})),k.finishPlot(),T.finishPlot(),C.finishPlot();const I=this._r(((t,i)=>{const s=i.th.ni();return t.x=Math.max(t.x,s.x),t.y=Math.max(t.y,s.y),t}),{x:F.x,y:F.y}),P=Math.atan((c.y-u.y)/(c.x-u.x));this._h.Ha({x:0,y:0}).Qh(180*-P/Math.PI);const D=Ji.addVec(d,Ji.multiplyVec(Ji.multiply(a,this.Rp.Xp(.5*this.Op.mu().getThickness()+this.kr(((t,i)=>Math.max(t,i.tickLength)),0))),h)),B=this.Rp.Zp(D)||n(0,0),L=ws(At(B,this.chart.us.ft,this.zp),ws(ws(ks(I,y),_s(y,this.kr(((t,i)=>Math.max(t)),0))),ks(_s(this._h.Es().ni(),.5),y)));this._h.Re(L),this.Op.sv={overrideFollowing:!1,skipMousePicking:!1}}tv(t,i){const{gridlinePositionA:s,gridlinePositionB:e,gridlinePositionC:h}=t,r=i.posTickStart3D,n=i.posTickEnd3D,o=i.tickPositionRelative;let a;return Ht(o,0)||Ht(o,1)||(a=[this.ev()?{...s,x:r.x}:this.hv()?{...s,y:r.y}:this.Jp()?{...s,z:r.z}:{x:0,y:0,z:0},this.ev()?{...e,x:r.x}:this.hv()?{...e,y:r.y}:this.Jp()?{...e,z:r.z}:{x:0,y:0,z:0},this.ev()?{...h,x:r.x}:this.hv()?{...h,y:r.y}:this.Jp()?{...h,z:r.z}:{x:0,y:0,z:0}]),{gridStroke:a,tickStroke:{start:r,end:n}}}qh(){super.qh(),this.Hp.wp(),this.Gp.wp(),this.Wp.wp()}ev(){return this.Eh.ev()}hv(){return this.Eh.hv()}Jp(){return this.Eh.Jp()}}class Cl extends Mh{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.rv=h}}const kl=(t,i,s)=>$t(t+.1*(i-t)+Math.abs(s.ht())/100*Math.sign(i-t),Math.min(t,i),Math.max(t,i)),Tl=(t,i,s,e)=>({Tr:()=>{const s=t();let e;for(const t of s){if(!t.nv())continue;const s=i(t);e=void 0===s?e:void 0!==e?Math.min(e,s):s}return e},Fr:()=>{const i=t();let e;for(const t of i){if(!t.nv())continue;const i=s(t);e=void 0===i?e:void 0!==e?Math.max(e,i):i}return e},Pr:()=>{const i=t();let s;for(const t of i){if(!t.nv())continue;const i=e(t);s=void 0===i?s:void 0!==s?Math.max(s,i):i}return s}}),Fl=t=>({...Tl(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.Pr().y)),Ip:t=>t.y,Kp:(t,i)=>({x:i.x,y:t.y,z:i.z}),hf:l(-1,0,0),qp:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:l(i.x,0,i.z),gridlinePositionB:l(i.x,0,-i.z),gridlinePositionC:l(-i.x,0,-i.z)}},ev:()=>!1,hv:()=>!0,Jp:()=>!1}),Il=t=>({...Tl(t,(t=>t.getZMin()),(t=>t.getZMax()),(t=>t.Pr().z)),Ip:t=>t.z,Kp:(t,i)=>({x:i.x,y:i.y,z:t.z}),hf:l(1,0,0),qp:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:l(i.x,-i.y,0),gridlinePositionB:l(i.x,i.y,0),gridlinePositionC:l(-i.x,i.y,0)}},ev:()=>!1,hv:()=>!1,Jp:()=>!0});class Pl extends ce{constructor(t,i,s,e,h){super(t,i,e,h),this.ov=xn,this.av=!0,this.lv=!0,this.uv=!0,this.chart=t,this.Rp=s,this.ts=new Map,this.onMouseWheel(this.chart.cv),this.onMouseDrag(this.chart.dv),this.onMouseDragStop(this.chart.fv),this.onTouchStart(this.chart.Av.onTouchStart),this.onTouchMove(this.chart.Av.onTouchMove),this.onTouchEnd(this.chart.Av.onTouchEnd)}Ji(t,i){const s=null==t?void 0:t.dataPoint;if(s)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.mg,axisLocation:s},...s,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ()}}setCursorEnabled(t){return this.av=t,this}getCursorEnabled(){return this.av}setCursorFormattingOverride(t){return this.gv=t,this}getCursorFormattingOverride(){return this.gv}setAutoScrollingEnabled(t){return this.lv=t,this.chart.us.xs(),this}getAutoScrollingEnabled(){return this.lv}setColorShadingStyle(t){return this.ov=t,this.ts.forEach(((i,s)=>s.yv(t))),this.Rp.xs(),this}getColorShadingStyle(){return this.ov}setDepthTestEnabled(t){return this.uv=t,this.ts.forEach(((i,s)=>s.mv(t))),this.Rp.xs(),this}getDepthTestEnabled(){return this.uv}pv(){}Le(){}xp(){}getXMax(){const t=this.Za;return t?t.vt():void 0}getXMin(){const t=this.Za;return t?t.yt():void 0}getYMax(){const t=this.Za;return t?t.bt():void 0}getYMin(){const t=this.Za;return t?t.St():void 0}getZMax(){const t=this.Za;return t?t.vv():void 0}getZMin(){const t=this.Za;return t?t.Sv():void 0}Pr(){const t=this.Za;return t?l(t.kl(),t.Tl(),t.bv()):l(0,0,0)}}class Dl extends Pl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.ws="Box Series 3D",this.xv=.25,this.Mv=!1,this.jd=()=>ki(this.ke),this.ke=Ii(this.qi.boxSeries3DFillStyle,h),this.Za=this.Rp.wv().mv(this.uv).De(this.ke)._v(this.xv).cs(this.getHighlight()),this.fs(this.Za)}invalidateData(t){const i=t.length;if(0===i)return this;this.Mv&&this.chart.us.jn(Vo.kf);const s=t[0];if(!s)return this;let e;if("xMin"in s||"yMin"in s||"zMin"in s||"xMax"in s||"yMax"in s||"zMax"in s){e=[];for(let s=0;s<i;s+=1){const i=t[s],h="xMin"in i&&"xMax"in i,r="yMin"in i&&"yMax"in i,n="zMin"in i&&"zMax"in i;e[s]={color:i.color,value:i.value,id:i.id,xCenter:h?(i.xMin+i.xMax)/2:void 0,yCenter:r?(i.yMin+i.yMax)/2:void 0,zCenter:n?(i.zMin+i.zMax)/2:void 0,xSize:h?i.xMax-i.xMin:void 0,ySize:r?i.yMax-i.yMin:void 0,zSize:n?i.zMax-i.zMin:void 0}}}else e=t;return this.Za.Cv(e.slice()),this.chart.us.xs(),this.Mv=!0,this}setFillStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.Za.De(t),this.chart.us.xs(),this}getFillStyle(){return this.ke}setRoundedEdges(t){return void 0!==t&&isNaN(t)&&(console.error("'BoxSeries3D.setRoundedEdges | NaN was supplied.'"),t=void 0),this.xv=void 0!==t?$t(t,0,1):void 0,this.Za._v(this.xv),this.Rp.xs(),this}getRoundedEdges(){return this.xv}nv(){return this.lv&&this.getVisible()}Ee(t,i){t.cs(i),this.chart.us.xs()}Le(){super.Le(),this.Za.Es(!1)}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke})}}class Bl extends Pl{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Mv=!1,this.jd=()=>ki(this.yu.getFillStyle())}setStrokeStyle(t){this.yu="function"==typeof t?t(this.yu):t;const i=this.yu;return this.Za.Ge(i),this.Rp.xs(),this}getStrokeStyle(){return this.yu}add(t){return this.Mv&&this.chart.us.jn(Vo.kf),this.Mv=!0,(t=Array.isArray(t)?t:[t])?(this.Za.fl(t.slice()),this.Rp.xs(),this):this}clear(){return this.Za.Vt(),this}getPointAmount(){const t=this.Za;return t.Al()+t.yl()}nv(){return this.lv&&this.getPointAmount()>0&&this.getVisible()}Ee(t,i){t.cs(i),this.Rp.xs()}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{stroke:this.yu})}}class Ll extends Bl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.ws="Line Series 3D",this.yu=Ii(e.lineSeries3DStrokeStyle,h),this.kv=Qh.pointStyle3D,this.Tv(this.yu),this.Za=this.Rp.op([gl.UserSeries]).mv(this.uv).Ge(this.yu).Np(this.kv).cs(this.getHighlight()),this.fs(this.Za)}setStrokeStyle(t){super.setStrokeStyle(t),this.Tv(this.yu);const i=this.kv;return this.Za.Np(i),this}Tv(t){const i=new Oh.Triangulated({shape:"sphere",fillStyle:t.getFillStyle(),size:t.getThickness()});this.kv=i}}class Rl extends Bl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.ws="Point Line Series 3D",this.jd=()=>ki(this.yu.getFillStyle())||ki(this.kv.getFillStyle()),this.kv=Ii(e.pointLineSeries3DPointStyle,h),this.yu=Ii(e.lineSeries3DStrokeStyle,h),this.Fv(),this.Za=this.Rp.op([gl.UserSeries]).mv(this.uv).Ge(this.yu).Np(this.kv).cs(this.getHighlight()),this.fs(this.Za)}setPointStyle(t){return this.kv="function"==typeof t?t(this.kv):t,this.Fv(),this.Za.Np(this.kv),this.Rp.xs(),this}getPointStyle(){return this.kv}setStrokeStyle(t){super.setStrokeStyle(t);const i=this.yu,s=Math.abs(i.getThickness()),e=this.kv,h=e.getSize();s>("object"==typeof h?Math.max(h.x,h.y,h.z):h)&&(this.kv=e.setSize(s)),this.Fv();const r=this.kv;return this.Za.Np(r),this.Rp.xs(),this}Fv(){const t=this.kv,i=t.getSize();this.kv=t.setSize(i)}Ee(t,i){t.cs(i),this.Rp.xs()}}class El extends Pl{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.Mv=!1,((null==r?void 0:r.individualPointSizeAxisEnabled)||(null==r?void 0:r.individualPointSizeEnabled))&&this.chart.us.jn(Vo.Tf)}add(t){return this.Mv&&this.chart.us.jn(Vo.kf),this.Mv=!0,(t=Array.isArray(t)?t:[t])?(this.Za.fl(t.slice()),this.Rp.xs(),this):this}clear(){return this.Za.Vt(),this}getPointAmount(){const t=this.Za;return t.Al()+t.yl()}nv(){return this.lv&&this.getPointAmount()>0&&this.getVisible()}Ee(t,i){t.cs(i),this.Rp.xs()}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{point3D:this.Iv})}}class zl extends El{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.ws="Point Series 3D",this.jd=()=>ki(this.Iv.getFillStyle());const n=void 0!==(null==r?void 0:r.automaticColorIndex)?r.automaticColorIndex:this.chart.getSeries().length;this.Iv=Ii(e.pointSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.Za=this.Rp.Dv(o).mv(this.uv).Pv(this.Iv).cs(this.getHighlight()),this.fs(this.Za)}setPointStyle(t){this.Iv="function"==typeof t?t(this.Iv):t;const i=this.Iv;return this.Za.Pv(i),this.Rp.xs(),this}getPointStyle(){return this.Iv}}class Vl extends El{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.ws="Point Cloud Series 3D",this.jd=()=>ki(this.Iv.getFillStyle());const n=this.chart.getSeries().length;this.Iv=Ii(e.pointCloudSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.Za=this.Rp.Dv(o).Pv(this.Iv).cs(this.getHighlight()),this.fs(this.Za)}setPointStyle(t){this.Iv="function"==typeof t?t(this.Iv):t;const i=this.Iv;return this.Za.Pv(i),this.Rp.xs(),this}getPointStyle(){return this.Iv}}const Ol={Triangulated:zl,Pixelated:Vl};class Nl extends La{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.Bv=[],this.Lv=0,this.Rv=t=>{const i=this.Bv.indexOf(t);i>=0&&(this.Bv.splice(i,1),this.L.emit("seriesDispose",this,t))},this.onSeriesBackgroundMouseEnter=t=>this.L.on("mouseEnterSeriesBackground",t),this.onSeriesBackgroundMouseLeave=t=>this.L.on("mouseLeaveSeriesBackground",t),this.onSeriesBackgroundMouseMove=t=>this.L.on("mouseMoveSeriesBackground",t),this.onSeriesBackgroundMouseDown=t=>this.L.on("mouseDownSeriesBackground",t),this.onSeriesBackgroundMouseUp=t=>this.L.on("mouseUpSeriesBackground",t),this.onSeriesBackgroundMouseClick=t=>this.L.on("mouseClickSeriesBackground",t),this.onSeriesBackgroundMouseDoubleClick=t=>this.L.on("mouseDoubleClickSeriesBackground",t),this.onSeriesBackgroundMouseDragStart=t=>this.L.on("mouseDragStartSeriesBackground",t),this.onSeriesBackgroundMouseDrag=t=>this.L.on("mouseDragSeriesBackground",t),this.onSeriesBackgroundMouseDragStop=t=>this.L.on("mouseDragStopSeriesBackground",t),this.onSeriesBackgroundMouseWheel=t=>this.L.on("mouseWheelSeriesBackground",t),this.onSeriesBackgroundTouchStart=t=>this.L.on("touchStartSeriesBackground",t),this.onSeriesBackgroundTouchMove=t=>this.L.on("touchMoveSeriesBackground",t),this.onSeriesBackgroundTouchEnd=t=>this.L.on("touchEndSeriesBackground",t),this.offSeriesBackgroundMouseEnter=t=>this.L.off(t,"mouseEnterSeriesBackground"),this.offSeriesBackgroundMouseLeave=t=>this.L.off(t,"mouseLeaveSeriesBackground"),this.offSeriesBackgroundMouseMove=t=>this.L.off(t,"mouseMoveSeriesBackground"),this.offSeriesBackgroundMouseDown=t=>this.L.off(t,"mouseDownSeriesBackground"),this.offSeriesBackgroundMouseUp=t=>this.L.off(t,"mouseUpSeriesBackground"),this.offSeriesBackgroundMouseClick=t=>this.L.off(t,"mouseClickSeriesBackground"),this.offSeriesBackgroundMouseDoubleClick=t=>this.L.off(t,"mouseDoubleClickSeriesBackground"),this.offSeriesBackgroundMouseDragStart=t=>this.L.off(t,"mouseDragStartSeriesBackground"),this.offSeriesBackgroundMouseDrag=t=>this.L.off(t,"mouseDragSeriesBackground"),this.offSeriesBackgroundMouseDragStop=t=>this.L.off(t,"mouseDragStopSeriesBackground"),this.offSeriesBackgroundMouseWheel=t=>this.L.off(t,"mouseWheelSeriesBackground"),this.offSeriesBackgroundTouchStart=t=>this.L.off(t,"touchStartSeriesBackground"),this.offSeriesBackgroundTouchMove=t=>this.L.off(t,"touchMoveSeriesBackground"),this.offSeriesBackgroundTouchEnd=t=>this.L.off(t,"touchEndSeriesBackground"),this.Ev=this.es.Cg()}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.Bv.forEach((i=>i.setAnimationHighlight(t))),this}zv(t,i){this.Ev.As([i]),t.setMouseMoveEventHandler(((t,i)=>{this.L.emit("mouseMoveSeriesBackground",this,i)})).setMouseEnterEventHandler(((t,i)=>{this.L.emit("mouseEnterSeriesBackground",this,i)})).setMouseLeaveEventHandler(((t,i)=>{this.L.emit("mouseLeaveSeriesBackground",this,i)})).setMouseDownEventHandler(((t,i)=>this.L.emit("mouseDownSeriesBackground",this,i))).setMouseUpEventHandler(((t,i)=>this.L.emit("mouseUpSeriesBackground",this,i))).setMouseClickEventHandler(((t,i)=>this.L.emit("mouseClickSeriesBackground",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.L.emit("mouseDoubleClickSeriesBackground",this,i))).setMouseWheelEventHandler(((t,i)=>this.L.emit("mouseWheelSeriesBackground",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.L.emit("mouseDragStartSeriesBackground",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.L.emit("mouseDragSeriesBackground",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.L.emit("mouseDragStopSeriesBackground",this,i,s,e))).setTouchStartEventHandler(((t,i)=>{this.L.emit("touchStartSeriesBackground",this,i)})).setTouchMoveEventHandler(((t,i)=>{this.L.emit("touchMoveSeriesBackground",this,i)})).setTouchEndEventHandler(((t,i)=>{this.L.emit("touchEndSeriesBackground",this,i)}))}setSeriesBackgroundFillStyle(t){return this.Vv.De(t),this.us.xs(),this}getSeriesBackgroundFillStyle(){return this.Vv.$h()}setSeriesBackgroundStrokeStyle(t){return this.Ov.Pe(t),this.us.xs(),this}getSeriesBackgroundStrokeStyle(){return this.Ov.mo()}setSeriesBackgroundEffect(t){return this.Ev.bs(t),this.us.xs(),this}getSeriesBackgroundEffect(){return this.Ev.Ms()}Nv(t){this.Bv.push(t),void 0!==this.Gv&&t.setHighlightOnHover(this.Gv),this.L.emit("seriesAdded",this,t)}sf(){return this.Bv}setSeriesHighlightOnHover(t){return this.Gv=t,this.Bv.forEach((i=>i.setHighlightOnHover(t))),this}dispose(){return this.Bv.slice().forEach(Ut),super.dispose()}Ny(t){return this.L.on("seriesAdded",t)}Wv(t){return this.L.off(t)}Uv(t){return this.L.on("seriesDispose",t)}Yv(t){return this.L.off(t)}}const Gl=Ji.normalize({x:-.5610788649579117,y:-.35242840511865414,z:-1.1349149375849081});class Wl{constructor(t,i,s,e){this.Hv=!0,this.$v=!0,this.Xv=2*-Math.PI/2160,this.jv=2*Math.PI/2160,this.Zv=.1,this.Qv=1*Math.PI/180,this.Jv=t,this.Kv=i,this.qv=s,this.Zp=e}getDefaultCameraConfiguration(t){const i={direction:Gl,location:Ji.multiply(Gl,-1)};return this.cameraLocationChanged({boundingBox:t,cameraDirection:i.direction,cameraLocation:i.location})||i}applyCameraInteractions(t,i){let s={direction:t.cameraDirection,location:t.cameraLocation};return i.forEach((t=>{"rotate"===t.type?s=this.tS(s,t):"wheel-zoom"===t.type?s=this.iS(s,t):"rotate+zoom"===t.type?s=this.sS(s,t):"fixed-rotate"===t.type?s=this.eS(s,t):"move"===t.type&&(s=this.hS(s,t))})),this.Hv?s=this.rS(t.boundingBox,s):this.$v&&(s=this.nS(t.boundingBox,s)),s}tS(t,i){const{rotation:s}=i,e=t.location,h=Ji.multiply(Ji.normalize(t.location),-1),{Right:r,Up:n}=this.oS(h);let o=e;const a=this.aS(h),l=s.x*this.Xv*a;o=Ji.rotateAroundAxis(o,n,l);const u=(s.y>0?1:-1)*Math.min(Math.abs(s.y)*this.jv,a-this.Qv);return 0!==u&&(o=Ji.rotateAroundAxis(o,r,u)),{location:o,direction:Ji.multiply(Ji.normalize(o),-1)}}iS(t,i){const{deltaY:s}=i;this.Hv&&this.lS(!1);const e=t.location,h=Ji.multiply(Ji.normalize(e),-1),r=s*this.Zv,n=Ji.length(e)*-r;return{direction:h,location:Ji.addVec(e,Ji.multiply(h,n))}}sS(t,i){const{rotation:s,cameraDistance:e}=i;this.Hv&&this.lS(!1);let h=this.tS(t,{type:"rotate",rotation:s});const r=h.location,n=Ji.multiply(Ji.normalize(r),-1),o=Ji.multiply(n,-e);return h={direction:Ji.multiply(Ji.normalize(o),-1),location:o},h}eS(t,i){this.Hv&&this.lS(!1);const{rotation:s}=i,e=t.location,h=t.direction,{Right:r,Up:n}=this.oS(h),o=s.x*this.Xv;let a=Ji.normalize(Ji.rotateAroundAxis(h,n,o));const l=s.y*this.jv;return a=Ji.normalize(Ji.rotateAroundAxis(a,r,l)),{location:e,direction:a}}hS(t,i){this.Hv&&this.lS(!1),this.$v=!1;const{amountRight:s,amountForward:e}=i,h=t.location,r=t.direction,{Right:n}=this.oS(r);return{location:Ji.addVec(h,Ji.multiply(r,.01*e),Ji.multiply(n,.01*s)),direction:r}}boundingBoxChanged(t){const i={location:t.cameraLocation,direction:Ji.multiply(Ji.normalize(t.cameraLocation),-1)};return this.Hv?this.rS(t.boundingBox,i):this.nS(t.boundingBox,i)}cameraLocationChanged(t){const i={location:t.cameraLocation,direction:Ji.multiply(Ji.normalize(t.cameraLocation),-1)};return this.Hv?this.rS(t.boundingBox,i):this.nS(t.boundingBox,i)}viewportChanged(t){const i={location:t.cameraLocation,direction:Ji.multiply(Ji.normalize(t.cameraLocation),-1)};if(this.Hv)return this.rS(t.boundingBox,i)}rS(t,i,s){let e=i;s=void 0!==s?s:0,e=this.uS(t,e,100,20,1,s,5);const h=this.aS(e.direction);return e=this.cS(e,this.dS(t,e,100,1),h),e}uS(t,i,s,e,h,r,n){return Ul(r,n,(t=>({direction:i.direction,location:Ji.multiply(i.direction,-t)})),(i=>this.fS(t,i)),s,h,"linear",e)}dS(t,i,s,e){const{Right:h,Left:r,Up:n,Down:o}=this.oS(i.direction),a=this.AS(t,!1,i);let l=i;const u=e,c=.1;return Math.abs(a.bottom-a.top)>u&&(l=a.bottom<a.top?Yl(0,c,(t=>({location:l.location,direction:Ji.normalize(Ji.lerp(l.direction,o,t))})),(i=>this.gS(t,i)),0,u,!0,s):Yl(0,c,(t=>({location:l.location,direction:Ji.normalize(Ji.lerp(l.direction,n,t))})),(i=>this.gS(t,i)),0,u,!0,s)),Math.abs(a.left-a.right)>u&&(l=a.left<a.right?Yl(0,c,(t=>({location:l.location,direction:Ji.normalize(Ji.lerp(l.direction,r,t))})),(i=>this.yS(t,i)),0,u,!0,s):Yl(0,c,(t=>({location:l.location,direction:Ji.normalize(Ji.lerp(l.direction,h,t))})),(i=>this.yS(t,i)),0,u,!0,s)),l}fS(t,i){const s=this.AS(t,!0,i);return Math.min(s.left+s.right,s.top+s.bottom)}yS(t,i){const s=this.AS(t,!1,i);return Math.abs(s.left-s.right)}gS(t,i){const s=this.AS(t,!1,i);return Math.abs(s.top-s.bottom)}AS(t,i,s){const e=As(this.mS(t,i,s).map((t=>At(t,this.Jv,this.Kv))));return{left:e.min.x,right:this.Kv.x.getInnerEnd()-e.max.x,top:this.Kv.y.getInnerEnd()-e.max.y,bottom:e.min.y}}mS(t,i,s){const e=this.qv,h=l(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),r=l(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),n=[],o=i?16:4,a=(h.x+r.x)/2,u=(h.z+r.z)/2,c=Math.sqrt(2)*(r.x-a),d=Math.sqrt(2)*(r.z-u);return[h.y,r.y].forEach((t=>{for(let i=0;i<o;i+=1){const s=Math.PI/4+2*Math.PI*i/o,e=a+Math.cos(s)*c,h=u+Math.sin(s)*d;n.push({x:e,y:t,z:h})}})),n.map((t=>this.Zp(t,s))).filter((t=>void 0!==t))}nS(t,i){const s=Ji.length(i.location),e=this.pS(t);return s<e?{direction:i.direction,location:Ji.multiply(i.direction,-e)}:i}pS(t){return.8*Math.sqrt(t.x**2+t.y**2+t.z**2)}oS(t){const i=l(0,1,0),s=Ji.normalize(Ji.cross(i,Ji.multiply(t,-1)));let e=Ji.cross(s,t);return e.y=Math.abs(e.y),e=Ji.normalize(e),{Right:s,Up:e,Down:Ji.multiply(e,-1),Left:Ji.multiply(s,-1)}}aS(t){const i={x:0,y:1,z:0},s=Ji.angle(t,i),e=Ji.angle(t,Ji.multiply(i,-1));return Math.min(s,e)}cS(t,i,s){return{location:Ji.lerp(t.location,i.location,s),direction:Ji.normalize(Ji.lerp(t.direction,i.direction,s))}}lS(t){return this.Hv=t,this}vS(){return this.Hv}}const Ul=(t,i,s,e,h,r,n,o)=>{let a,l=0,u=(i+t)/2;do{const o=s(u);if(a={value:u,result:o,score:e(o)},Math.abs(a.score-h)<=r)break;const c=a.score>h;c&&"linear"===n||!c&&"reversed"===n?(u=(a.value+t)/2,i=a.value):(u=(a.value+i)/2,t=a.value),l+=1}while(l<o);return a.result},Yl=(t,i,s,e,h,r,n,o)=>{let a,l=0,u=t;do{const c=s(u),d=e(c);if(void 0===a||Math.abs(d-h)<Math.abs(a.score-h)){if(a={value:u,result:c,score:e(c)},Math.abs(a.score-h)<=r)break}else if(n)break;l+=1,u+=1/(o-1)*(i-t)}while(l<o);return a.result};class Hl extends Pl{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.ws="Surface Grid Series 3D",this.SS={},this.Mv=!1,this.jd=()=>ki(this.ke),this.ov=vn;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.chart.getSeries().length;this.ke=Ii(this.qi.surfaceGridSeries3DFillStyle,n),this.bS=Ii(this.qi.surfaceGridSeries3DWireframeStyle,n);const o={heatmapDataType:"intensity",dataOrder:e.dataOrder||"columns",columns:e.columns,rows:e.rows};this.Jn=o,this.Za=this.Rp.MS(o).De(this.ke).xS(this.bS).yv(this.ov).cs(this.getHighlight()),this.fs(this.Za),this.setHighlightOnHover(!1)}Ji(t,i){const s=null==t?void 0:t.dataPoint;if(s)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.mg,axisLocation:s},...s,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:Z(this.ke)?this.ke.lut:void 0}}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke})}_S(){const t=this.SS.start||{x:0,z:0};let i;i=this.SS.end?{x:(this.SS.end.x-t.x)/this.Jn.columns,z:(this.SS.end.z-t.z)/this.Jn.rows}:this.SS.step?this.SS.step:{x:1,z:1},this.Za.wS(t,i),this.chart.us.xs()}setStart(t){return this.SS.start=t,this._S(),this}getStart(){return this.Za.CS().start}setStep(t){return this.SS.step=t,this._S(),this}getStep(){return this.Za.CS().step}setEnd(t){return this.SS.end=t,this._S(),this}getEnd(){return this.Za.CS().end}setFillStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.Za.De(this.ke),this.Rp.xs(),this}getFillStyle(){return this.ke}setWireframeStyle(t){return this.bS="function"==typeof t?t(this.bS):t,this.Za.xS(this.bS),this.Rp.xs(),this}getWireframeStyle(){return this.Za.kS()}setIntensityInterpolation(t){return t=t||"disabled",this.Za.TS(t),this.Rp.xs(),this}getIntensityInterpolation(){return this.Za.FS()}invalidateIntensityValues(t){if(this.Mv&&this.chart.us.jn(Vo.kf),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Jn.dataOrder?t.length:t[0].length,rows:"rows"===this.Jn.dataOrder?t.length:t[0].length},s="columns"===this.Jn.dataOrder?this.Jn.columns:this.Jn.rows,e="columns"===this.Jn.dataOrder?this.Jn.rows:this.Jn.columns;if(i.x>s||i.y>e){if(!0===this.chart.vA.qn){const t=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.Jn.columns}x${this.Jn.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;Ot.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.Za.IS({type:"intensity",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Jn.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Jn.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.Jn.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.Jn.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.Jn.dataOrder?this.Jn.columns:this.Jn.rows)-1,o=("columns"===this.Jn.dataOrder?this.Jn.rows:this.Jn.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.chart.vA.qn){const s=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.Jn.columns}x${this.Jn.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Ot.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),u=Math.max(e-n,0),c=Math.max(r-o,0),d=i.primary-(a+u),f=[];if(0===l&&0===c)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),h=Math.max(h,0)}this.Za.IS({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.Rp.xs(),this.Mv=!0,this}invalidateHeightMap(t){if(this.Mv&&this.chart.us.jn(Vo.kf),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Jn.dataOrder?t.length:t[0].length,rows:"rows"===this.Jn.dataOrder?t.length:t[0].length},s="columns"===this.Jn.dataOrder?this.Jn.columns:this.Jn.rows,e="columns"===this.Jn.dataOrder?this.Jn.rows:this.Jn.columns;if(i.x>s||i.y>e){if(!0===this.chart.vA.qn){const t=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.Jn.columns}x${this.Jn.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;Ot.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.Za.PS({type:"y",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Jn.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Jn.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.Jn.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.Jn.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.Jn.dataOrder?this.Jn.columns:this.Jn.rows)-1,o=("columns"===this.Jn.dataOrder?this.Jn.rows:this.Jn.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.chart.vA.qn){const s=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.Jn.columns}x${this.Jn.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Ot.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),u=Math.max(e-n,0),c=Math.max(r-o,0),d=i.primary-(a+u),f=[];if(0===l&&0===c)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),h=Math.max(h,0)}this.Za.PS({type:"y",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.Rp.xs(),this.Mv=!0,this}setCullMode(t){return this.Za.DS("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.Za.BS()}pv(){}Le(){}xp(){}nv(){return this.lv&&this.getVisible()}Ee(t,i){t.cs(i),this.Rp.xs()}}class $l extends Pl{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.ws="Surface Grid Series 3D",this.SS={},this.jd=()=>ki(this.ke),this.chart.us.jn(Vo.kf),this.ov=vn;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.chart.getSeries().length;this.ke=Ii(this.qi.surfaceScrollingGridSeries3DFillStyle,n),this.bS=Ii(this.qi.surfaceScrollingGridSeries3DWireframeStyle,n);const o={heatmapDataType:"intensity",scrollDimension:e.scrollDimension||"columns",columns:e.columns,rows:e.rows};this.Jn=o,this.Za=this.Rp.LS(o).De(this.ke).xS(this.bS).yv(this.ov).cs(this.getHighlight()),this.fs(this.Za),this.setHighlightOnHover(!1)}Ji(t,i){const s=null==t?void 0:t.dataPoint;if(s)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.mg,axisLocation:s},...s,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:Z(this.ke)?this.ke.lut:void 0}}_S(){const t=this.SS.start||{x:0,z:0};let i;i=this.SS.step?this.SS.step:{x:1,z:1},this.Za.wS(t,i),this.chart.us.xs()}setStart(t){return this.SS.start=t,this._S(),this}getStart(){return this.Za.CS().start}setStep(t){return this.SS.step=t,this._S(),this}getStep(){return this.Za.CS().step}setFillStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.Za.De(this.ke),this.Rp.xs(),this}getFillStyle(){return this.ke}setWireframeStyle(t){return this.bS="function"==typeof t?t(this.bS):t,this.Za.xS(this.bS),this.Rp.xs(),this}getWireframeStyle(){return this.Za.kS()}setIntensityInterpolation(t){return t=t||"disabled",this.Za.TS(t),this.Rp.xs(),this}getIntensityInterpolation(){return this.Za.FS()}clear(){return this.Za.Vt(),this.Rp.xs(),this}addValues(t){if(!t)return this;let i=t.yValues,s=t.intensityValues;if(!i&&!s)return this;if(i&&0===i.length&&(i=void 0),s&&0===s.length&&(s=void 0),i){const t=i[0].length,s=0+t-1,e="columns"===this.Jn.scrollDimension?this.Jn.rows:this.Jn.columns;if(s>e-1){if(!0===this.chart.vA.qn){const i=`SurfaceScrollingGridSeries3D.addValues input yValues overflow.\nGrid was created with ${e} ${"columns"===this.Jn.scrollDimension?"rows":"columns"}, input yValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Ot.console.warn(i)}const s=[];for(let t=0;t<i.length;t+=1)s[t]=i[t].slice(0,e+1);i=s}}if(s){const t=s[0].length,i=0+t-1,e="columns"===this.Jn.scrollDimension?this.Jn.rows:this.Jn.columns;if(i>e-1){if(!0===this.chart.vA.qn){const i=`SurfaceScrollingGridSeries3D.addValues intensityValues overflow.\nGrid was created with ${e} ${"columns"===this.Jn.scrollDimension?"rows":"columns"}, input intensityValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Ot.console.warn(i)}const i=[];for(let t=0;t<s.length;t+=1)i[t]=s[t].slice(0,e+1);s=i}}if(i&&s){const t=i.length,e=s.length;if(t!==e){if(!0===this.chart.vA.qn){const i=`SurfaceScrollingGridSeries3D.addValues input yValues and intensityValues size does not match.\nyValues: ${t}\nintensityValues: ${e}\nData will be automatically clipped according to the smaller supplied sample. This can result in sub-optimal performance.`;Ot.console.warn(i)}t>e?i=i.slice(0,e):s=s.slice(0,t)}}const e=i?i.length:null==s?void 0:s.length,h=i?i[0].length:null==s?void 0:s[0].length;return this.Za.RS({startPrimary:0,startSecondary:0,lengthPrimary:e,lengthSecondary:h,heightMapValues:i,intensityValues:s}),this.Rp.xs(),this}setCullMode(t){return this.Za.DS("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.Za.BS()}pv(){}Le(){}xp(){}nv(){return this.lv&&this.getVisible()}Ee(t,i){t.cs(i),this.Rp.xs()}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke})}}const Xl=t=>!!(t&&"object"==typeof t&&"id"in t&&"chart"in t&&t.chart instanceof ql),jl=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y&&"z"in t&&"number"==typeof t.z);class Zl extends Pl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.ws="Mesh Model 3D",this.ES=new Float32Array,this.ft={x:1,y:1,z:1},this.zS={x:0,y:0,z:0},this.VS={x:0,y:0,z:0},this.OS={x:0,y:0,z:0},this.NS={x:0,y:0,z:0},this.qa=is,this.jd=()=>ki(this.getFillStyle());const n=void 0!==(null==h?void 0:h.automaticColorIndex)?h.automaticColorIndex:this.chart.getSeries().length;this.Za=this.Rp.GS().mv(this.uv).De(Ii(this.qi.meshModel3DFillStyle||this.qi.pointSeriesFillStyle,n)).cs(this.getHighlight()),this.fs(this.Za)}Ji(t,i){const s=this.getFillStyle();return ji({series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:Z(s)?s.lut:void 0},{cursorPosition:0,index:0,x:0,y:0,z:0,value:0},(()=>{const e=this.Za.WS(t,i);if(e)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.mg,axisLocation:e.coordAxis},...e.coordAxis,index:e.index,value:e.value,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:Z(s)?s.lut:void 0}}))}setModelGeometry(t){const{indices:i,vertices:s,normals:e}=t;let h=qi,r=Ki,n=qi,o=Ki,a=qi,l=Ki;for(let t=0;t<s.length;t+=3){const i=s[t],e=s[t+1],u=s[t+2];h=Math.max(h,i),r=Math.min(r,i),n=Math.max(n,e),o=Math.min(o,e),a=Math.max(a,u),l=Math.min(l,u)}this.qa={min:{x:r,y:o,z:l},max:{x:h,y:n,z:a}};for(let t=0;t<s.length;t+=3)s[t]-=this.qa.min.x,s[t+1]-=this.qa.min.y,s[t+2]-=this.qa.min.z;return this.NS={x:this.qa.max.x-this.qa.min.x,y:this.qa.max.y-this.qa.min.y,z:this.qa.max.z-this.qa.min.z},this.ES=s instanceof Float32Array?s:new Float32Array(s),this.checkedNormals=e&&!Number.isNaN(e[0])?e instanceof Float32Array?e:new Float32Array(e):void 0,this.checkedNormals||this.setColorShadingStyle(vn),this.Za.US({vertices:this.ES,normals:this.checkedNormals,indices:i instanceof Uint16Array?i:new Uint16Array(i),modelSize:this.NS}),this.chart.us.xs(),this}setVertexValues(t){return this.Za.YS(t),this.chart.us.xs(),this}setScale(t){const i={x:"number"==typeof t?t:(null==t?void 0:t.x)||1,y:"number"==typeof t?t:(null==t?void 0:t.y)||1,z:"number"==typeof t?t:(null==t?void 0:t.z)||1};return this.ft=i,this.Za.HS(i),this.chart.us.xs(),this}getScale(){return this.ft}setModelLocation(t){return this.VS=t,this.Za.$S(t),this.chart.us.xs(),this}getModelLocation(){return this.VS}setModelAlignment(t){return this.zS=t,this.Za.XS(t),this.chart.us.xs(),this}getModelAlignment(){return this.zS}setModelRotation(t){const i={x:Bs(t.x),y:Bs(t.y),z:Bs(t.z)};return this.OS=i,this.Za.jS(this.OS),this.chart.us.xs(),this}getModelRotation(){return this.OS}setBackfaceCullingMode(t){return this.Za.ZS(t),this.chart.us.xs(),this}getBackfaceCullingMode(){return this.Za.QS()}setFillStyle(t){return this.Za.De(t),this.chart.us.xs(),this}getFillStyle(){return this.Za.$h()}setColorShadingStyle(t){return this.checkedNormals||t!==xn?super.setColorShadingStyle(t):(console.warn("Phong shading style is not supported without normals. Switching to Simple shading style."),super.setColorShadingStyle(new Mn.Simple))}nv(){return!1}Ee(t,i){t.cs(i),this.chart.us.xs()}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.getFillStyle()})}}class Ql extends $a{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r),this.chart=n,this.JS=this.chart.getDefaultAxisX().addCustomTick().setVisible(!1).setGridStrokeStyle(r.cursor3DGridStrokeStyleX).setTickStyle(r.cursor3DTickStrokeStyleX).setTextFillStyle(r.cursor3DTickLabelFillStyleX).setTextFont(r.cursor3DTickLabelFontX).setBackgroundFillStyle(r.cursor3DTickLabelBackgroundFillStyleX).setBackgroundStrokeStyle(r.cursor3DTickLabelBackgroundStrokeStyleX).setPadding(r.cursor3DTickLabelPaddingX),this.KS=this.chart.getDefaultAxisY().addCustomTick().setVisible(!1).setGridStrokeStyle(r.cursor3DGridStrokeStyleY).setTickStyle(r.cursor3DTickStrokeStyleY).setTextFillStyle(r.cursor3DTickLabelFillStyleY).setTextFont(r.cursor3DTickLabelFontY).setBackgroundFillStyle(r.cursor3DTickLabelBackgroundFillStyleY).setBackgroundStrokeStyle(r.cursor3DTickLabelBackgroundStrokeStyleY).setPadding(r.cursor3DTickLabelPaddingY),this.qS=this.chart.getDefaultAxisZ().addCustomTick().setVisible(!1).setGridStrokeStyle(r.cursor3DGridStrokeStyleZ).setTickStyle(r.cursor3DTickStrokeStyleZ).setTextFillStyle(r.cursor3DTickLabelFillStyleZ).setTextFont(r.cursor3DTickLabelFontZ).setBackgroundFillStyle(r.cursor3DTickLabelBackgroundFillStyleZ).setBackgroundStrokeStyle(r.cursor3DTickLabelBackgroundStrokeStyleZ).setPadding(r.cursor3DTickLabelPaddingZ)}setTickX(t){return t(this.JS),this.chart.us.xs(),this}setTickY(t){return t(this.KS),this.chart.us.xs(),this}setTickZ(t){return t(this.qS),this.chart.us.xs(),this}setTicks(t){return t(this.JS),t(this.KS),t(this.qS),this.chart.us.xs(),this}dispose(){return super.dispose(),this.JS.dispose(),this.KS.dispose(),this.qS.dispose(),this}Le(){return this.JS.setVisible(this.ji&&this.ny),this.KS.setVisible(this.ji&&this.ny),this.qS.setVisible(this.ji&&this.ny),super.Le()}setPosition(t){this.ny=!0;const i=this.renderingScale,s=Ta(t.resultTableScale,i),e=s===this.scale?t.resultTable:At(t.resultTable,s,this.scale);this.Xy.setPosition(e),this.JS.setValue(t.axisLocation.x),this.KS.setValue(t.axisLocation.y),this.qS.setValue(t.axisLocation.z);let h=this.nm[0];if(!h){const t=new Jn(this.Ds,this.renderingScale,this.scale,Yt,this.qi).setMouseInteractions(!1).setFillStyle(this.qi.cursorPointMarkerFillStyle).setSize(this.qi.cursorPointMarkerSize).setShape(this.qi.cursorPointMarkerShape);h={pointMarker:t,targetVisible:!0},this.nm.push(h),this.lm.forEach((i=>i(t)))}return h.pointMarker.setPosition(e),this.chart.us.xs(),this}}class Jl{constructor(t,i){this.gm=[],this.ym=(t,i)=>(this.gm.forEach((s=>s(t,i))),t),this.addStyler=t=>new Jl(this.dm,this.gm.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new Jl(t,this.gm.map((t=>t))),this.pm=(t,i,s,e,h,r)=>this.ym(new Ql(t,i,s,e,this.dm,h,r),h),this.dm=t,this.gm=i}}const Kl=new Jl(Xn,[(t,i)=>{Xa(t)}]);class ql extends Nl{constructor(t,i,s,e,h,r,o){var a;super(t,i,s,i.Py("chart3D bg",0),e,i.us.qi.chart3DBackgroundFillStyle,i.us.qi.chart3DBackgroundStrokeStyle,i.us.qi.chart3DTitleFont,i.us.qi.chart3DTitleFillStyle,r),this.tb=1,this.ib=[],this.sb=2,this.eb=!0,this.hb=!0,this.rb=!0,this.nb=0,this.coordsAxis={id:"axes",chart:this},this.coordsWorld={id:"world",chart:this},this.yn=[],this._n=()=>{const t=this.Rp.ob();this.lb.ab(t),this.ub.ab(t);const i=this.cb.viewportChanged(this.fb());i&&this.Ab(i),this.us.xs()},this.gb=!1,this.dv=(t,i,s,e,h)=>{if(this.gb=!0,this.rb){const t=h;this.ib.push({type:"rotate",rotation:t}),this.us.xs(),di(i)}},this.fv=(t,i,s,e,h)=>{this.gb=!1},this.cv=(t,i)=>{if(this.hb){if(this.eb)Math.sign(this.nb)!==Math.sign(i.deltaY)?this.nb=Pi(i):this.nb+=Pi(i);else{const t=Pi(i);this.ib.push({type:"wheel-zoom",deltaY:t})}this.us.xs(),di(i)}},this.us.jn(Vo.vf),this.bh.yr("Chart3D"),this.yb=s.d3(),this.yb.x.K(-1,1),this.yb.y.K(-1,1),this.yb.z.K(-1,1),this.Rp=i.mb("chart3D layer3D",0,this.yb),this.lb=i.pb("chart3D series bg",0),this.ub=i.jm("chart3D axis ui",1),this.vb={x:new wl(this,(a=()=>this.Bv,{...Tl(a,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.Pr().x)),Ip:t=>t.x,Kp:(t,i)=>({x:t.x,y:i.y,z:i.z}),hf:l(0,-1,0),qp:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:l(0,i.y,i.z),gridlinePositionB:l(0,i.y,-i.z),gridlinePositionC:l(0,-i.y,-i.z)}},ev:()=>!0,hv:()=>!1,Jp:()=>!1}),this.yb.x,this.qi,this.Rp,this.ub,this.mg,!1,this.es),y:new wl(this,Fl((()=>this.Bv)),this.yb.y,this.qi,this.Rp,this.ub,this.mg,!1,this.es),z:new wl(this,Il((()=>this.Bv)),this.yb.z,this.qi,this.Rp,this.ub,this.mg,!1,this.es)},this.Sb=this.Rp.op([gl.InternalUI]).setMouseInteractions(!1),this.setBoundingBoxStrokeStyle(this.qi.chart3DBoundingBoxStrokeStyle),this.Vv=this.lb.ac(this.us.ft,Pr.Simple).De(this.qi.chart3DSeriesBackgroundFillStyle).Pe(at).setMouseInteractions(!0),this.Ov=this.lb.ac(this.us.ft,Pr.Simple).De(O).Pe(this.qi.chart3DSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.zv(this.Vv,this.Ov),this.bb({x:1,y:1,z:1},!0),this.cb=new Wl(this.us.ft,this.mg,this.yb,((t,i)=>(i&&this.Ab(i),this.Rp.Zp(t)))),this.xb=this.cb.getDefaultCameraConfiguration(this.Mb(this._b)),this.Ab(this.xb);const u=jt(o?o.cursorBuilder:void 0,Kl),c=i.Qm();let d;this.Jm=Va(this,c,u.pm(c,this.mg,this.mg,Yt,this.qi,this),this,"show-pointed",tu,(()=>0)),this.Av=Ae(new me(((t,i,s)=>{d={locationOne:i,locationTwo:s,cameraLocation:this.Rp.getCameraLocation()}}),((t,i,s,e,h,r)=>{if(!this.rb&&!this.hb)return;const o=(d.locationOne.x-d.locationTwo.x)**2+(d.locationOne.y-d.locationTwo.y)**2,a=(i.x-s.x)**2+(i.y-s.y)**2,l=Ji.length(d.cameraLocation),u=o/a*l,c=n((e.x+h.x)/2,(e.y+h.y)/2);this.ib.push({type:"rotate+zoom",rotation:this.rb?c:{x:0,y:0},cameraDistance:this.hb?u:l}),this.us.xs(),di(r)}),(t=>{})),new ye((t=>{}),((t,i,s,e,h)=>{if(this.rb){const t=e;this.ib.push({type:"rotate",rotation:t}),this.us.xs(),di(h)}}),(t=>{}))),this.onBackgroundTouchStart(this.Av.onTouchStart),this.onBackgroundTouchMove(this.Av.onTouchMove),this.onBackgroundTouchEnd(this.Av.onTouchEnd),this.onSeriesBackgroundTouchStart(this.Av.onTouchStart),this.onSeriesBackgroundTouchMove(this.Av.onTouchMove),this.onSeriesBackgroundTouchEnd(this.Av.onTouchEnd),this.onBackgroundMouseDrag(this.dv),this.onBackgroundMouseDragStop(this.fv),this.onBackgroundMouseWheel(this.cv),this.onBackgroundMouseDown(((t,i)=>{di(i)})),this.onSeriesBackgroundMouseDrag(this.dv),this.onSeriesBackgroundMouseDragStop(this.fv),this.onSeriesBackgroundMouseWheel(this.cv),this.onSeriesBackgroundMouseDown(((t,i)=>{di(i)})),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled)),this.onResize(this._n),this._n(),this.Iy(h,this.mg)}setProjection(t){this.Rp.wb(t);const i=this.cb.viewportChanged(this.fb());return i&&this.Ab(i),this.us.xs(),this}getProjection(){return this.Rp.Cb()}setCursor(t){return this.Jm.setCursor(t),this}getCursor(){return this.Jm.getCursor()}setCursorMode(t){return this.Jm.setCursorMode(t),this}getCursorMode(){return this.Jm.getCursorMode()}setCustomCursor(t){return this.Jm.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.Jm.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.Jm.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Jm.setCursorFormatting(t),this}getCursorFormatting(){return this.Jm.getCursorFormatting()}addCursor(t=Kl){const i=this.vy(),s=t.pm(i,this.mg,this.mg,this.Ay(i),this.qi,this);return this.ky(s),s}addPointSeries(t){const i=new(t&&t.type||zl)(this,this.Rv,this.Rp,this.qi,this.us.es,t);return this.Nv(i),i}addLineSeries(t){const i=new Ll(this,this.Rv,this.Rp,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,this.us.es);return this.Nv(i),i}addPointLineSeries(t){const i=new Rl(this,this.Rv,this.Rp,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,this.us.es);return this.Nv(i),i}addSurfaceGridSeries(t){const i=new Hl(this,this.Rv,this.Rp,t,this.qi,this.us.es);return this.Nv(i),i}addSurfaceScrollingGridSeries(t){const i=new $l(this,this.Rv,this.Rp,t,this.qi,this.us.es);return this.Nv(i),i}addBoxSeries(t){const i=new Dl(this,this.Rv,this.Rp,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,this.us.es);return this.Nv(i),i}addMeshModel(t){const i=new Zl(this,this.Rv,this.Rp,this.qi,t,this.us.es);return this.Nv(i),i}translateCoordinate(t,i,s){if(Xl(i)||Xl(s)||jl(t)){if(Xl(i)&&Xl(s)&&jl(t)){if("axes"===i.id&&"world"===s.id)return this.Rp.kb(t);if("world"===i.id&&"axes"===s.id)return this.Rp.Tb(t);if(i.id===s.id)return t}if(Xl(i)&&ie(s)&&jl(t)){const i=this.Rp.Zp(t);return i?this.us.No({engineX:i.x,engineY:i.y}):{clientX:-1,clientY:-1}}if(Xl(i)&&ee(s)&&jl(t)){const i=this.Rp.Zp(t);return i?At(i,this.us.ft,this.mg):{clientX:-1,clientY:-1}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}return Fa(t,i,s,this.mg,this.us)}getDefaultAxisX(){return this.vb.x}getDefaultAxisY(){return this.vb.y}getDefaultAxisZ(){return this.vb.z}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}get axisZ(){return this.getDefaultAxisZ()}get zAxis(){return this.getDefaultAxisZ()}getDefaultAxes(){return[this.vb.x,this.vb.y,this.vb.z]}setCameraLocation(t){let i={location:t,direction:Ji.normalize(Ji.multiply(t,-1))};const s=this.cb.cameraLocationChanged(this.fb(i));return s&&(i=s),this.Ab(i),this.us.xs(),this}getCameraLocation(){return this.Rp.getCameraLocation()}getCameraDirection(){return this.Rp.getCameraDirection()}setCameraAutomaticFittingEnabled(t){this.cb.lS(t);const i=this.cb.cameraLocationChanged(this.fb());return i&&this.Ab(i),this}getCameraAutomaticFittingEnabled(){return this.cb.vS()}onCameraChange(t){return this.L.on("cameraChange",t)}offCameraChange(t){return this.L.off(t,"cameraChange")}setBoundingBoxStrokeStyle(t){return this.Sb.Ge(t).Np(Sl(this.Sb.mu())),this.Rp.xs(),this}getBoundingBoxStrokeStyle(){return this.Sb.mu()}setBoundingBox(t){return this.bb(t,!1),this}bb(t,i){this._b=t;const s=this.Mb(t);if(this.yb.x.tt(s.x),this.yb.y.tt(s.y),this.yb.z.tt(-s.z),!i){const t=this.cb.boundingBoxChanged(this.fb());t&&this.Ab(t)}this.us.xs()}getBoundingBox(){return this._b}Le(t){if(Ra.Oy(this.bh,this.Dy),0!==this.nb){const i=this.nb*t*.006;this.ib.push({type:"wheel-zoom",deltaY:i}),this.nb=Math.sign(this.nb)*Math.max(Math.abs(this.nb)-.01*t,0),0!==this.nb&&this.us.xs(!0)}const i=this.getCameraDirection();if(this.ib.length>0){const t=this.cb.applyCameraInteractions(this.fb(),this.ib);t&&this.Ab(t),this.ib.length=0}this.Fb&&Ji.equals(this.Fb.location,this.xb.location)&&Ji.equals(this.Fb.direction,this.xb.direction)||this.L.emit("cameraChange",this,this.getCameraLocation()),this.Fb=this.xb,super.Le(t);for(let t=0;t<this.Bv.length;t+=1)this.Bv[t].pv();for(let t=0;t<this.Bv.length;t+=1)this.Bv[t].Le();this.vb.x.Dr(),this.vb.y.Dr(),this.vb.z.Dr(),this.vb.x.Le(i),this.vb.y.Le(i),this.vb.z.Le(i),this.Jm.Le(this.gb,this.Bv,void 0),super.Fy();const s=this.yb,e=l(s.x.getInnerStart(),s.y.getInnerStart(),s.z.getInnerStart()),h=l(s.x.getInnerEnd(),s.y.getInnerEnd(),s.z.getInnerEnd());this.Sb.Vt().fl([l(h.x,e.y,e.z),l(h.x,h.y,e.z),l(h.x,h.y,h.z),l(h.x,e.y,h.z),l(e.x,e.y,h.z),l(e.x,h.y,h.z),l(h.x,h.y,h.z),l(h.x,h.y,e.z),l(e.x,h.y,e.z),l(e.x,h.y,h.z),l(e.x,e.y,h.z),l(e.x,e.y,e.z)]);const r=[l(e.x,e.y,e.z),l(h.x,e.y,e.z),l(e.x,h.y,e.z),l(h.x,h.y,e.z),l(e.x,e.y,h.z),l(h.x,e.y,h.z),l(e.x,h.y,h.z),l(h.x,h.y,h.z)].map((t=>this.Rp.Zp(t))),n=this.Rp.Zp(l((e.x+h.x)/2,(e.y+h.y)/2,(e.z+h.z)/2)),o=bi(r,n),a=[];for(let t=0;t<o.length;t+=1){const i=o[t];ps(i,n,o[t>0?t-1:o.length-1],o[t<o.length-1?t+1:0])||a.push(i)}const u=bi(a,n);this.Vv.wl(u),this.Ov.wl(u);for(let t=0;t<this.Bv.length;t+=1)this.Bv[t].xp()}dispose(){return this.yn.forEach((t=>{t()})),this.yn.length=0,this.yb.U(),this.Rp.U(),this.ub.U(),this.lb.U(),this.Jm.U(),super.dispose()}Z(){return this.yb.x.Z(),this.yb.y.Z(),this.yb.z.Z(),super.Z()}J(){return super.J()}Ab(t){this.Rp.setCameraLocation(t.location).setCameraDirection(t.direction).setLightLocation(Ji.addVec(t.location,Ji.multiply(t.direction,-this.sb))),this.xb=t,this.us.xs()}Mb(t){return Ji.divide(t,Ji.length(t)/this.tb)}fb(t=this.xb){return{boundingBox:this.Mb(this._b),cameraLocation:t.location,cameraDirection:t.direction}}setMouseInteractions(t){return this.setMouseInteractionZoom(t).setMouseInteractionRotate(t)}setMouseInteractionZoom(t){return this.hb=t,this}getMouseInteractionZoom(){return this.hb}setMouseInteractionRotate(t){return this.rb=t,this}getMouseInteractionRotate(){return this.rb}forEachAxis(t){return t(this.vb.x),t(this.vb.y),t(this.vb.z),this}getSeries(){return this.Bv}getMinimumSize(){}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationZoom(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}setAnimationZoom(t){return this.eb=!!t,this}getAnimationZoom(){return this.eb}}const tu=(t,i,s)=>{var e,h;return bt(i)?za(i,[[i.series],[t.getDefaultAxisX().getTitle()||"X","",{text:ne(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:ne(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],[t.getDefaultAxisZ().getTitle()||"Z","",{text:ne(i.axisZ.formatValue(i.z),i.axisZ),font:{weight:"bold"}}],void 0!==i.intensity?["Value","",{text:ne(i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]:[]]):_t(i)?za(i,[[i.series],void 0!==i.value?["Value","",{text:ne(i.value.toFixed(2),null===(h=i.lut)||void 0===h?void 0:h.units),font:{weight:"bold"}}]:[]]):za(i,[[i.series],[t.getDefaultAxisX().getTitle()||"X","",{text:ne(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:ne(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],[t.getDefaultAxisZ().getTitle()||"Z","",{text:ne(i.axisZ.formatValue(i.z),i.axisZ),font:{weight:"bold"}}]])},iu={Column:oo,Row:ao};class su extends Da{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.Ib=new Map,this.Pb=this.addUIElement(iu.Row).setPosition({x:0,y:100}).setOrigin(je.LeftTop).setBackground((t=>t.setFillStyle(O).setStrokeStyle(at)))}add(t,i){return(t instanceof La?[t]:t instanceof Kf?t.getCells().filter((t=>t.panel instanceof La)).map((t=>t.panel)):[]).forEach((t=>{const s=this.Pb.addElement(zo.VerticalLegendBox).setBackground((t=>t.setFillStyle(O).setStrokeStyle(at))).add(t,i).setTitle(t.getTitle());this.Ib.set(t,s)})),this.us.xs(),this}setLegendBoxes(t){return this.Ib.forEach(((i,s)=>t(i,s))),this}getMinimumSize(){return super.getMinimumSize()||this.Pb.getSize()}}const eu={World:"World",USA:"USA",NorthAmerica:"NorthAmerica",SouthAmerica:"SouthAmerica",Canada:"Canada",Europe:"Europe",Asia:"Asia",Africa:"Africa",Australia:"Australia"},hu=(t,i)=>!(!i.name||t.name.toLowerCase()!==i.name.toLowerCase())||"ISO_A3"in t&&"ISO_A3"in i&&t.ISO_A3.toLowerCase()===i.ISO_A3.toLowerCase(),ru=(t,i)=>{let s=i.geometry;return s=nu(t,i,s),s=ou(t,i,s),s},nu=(t,i,s)=>{if(t===eu.Asia){const t=[];for(let i=0;i<s.length;i+=1){t[i]=[];const e=s[i],h=t[i];for(let t=0;t<e.length;t+=1){const i=e[t];i.x<-100?h[t]={x:i.x+360,y:i.y}:h[t]=i}}return t}return s},ou=(t,i,s)=>{const e=i.name.toLowerCase();let h;if(t===eu.USA&&("alaska"===e?h={translate:{x:55,y:-25},scale:{x:.16,y:.16}}:"hawaii"===e&&(h={translate:{x:48,y:7},scale:{x:1,y:1}})),h){const{translate:t,scale:r}=h,n=As(Xt(s)),o=[];for(let i=0;i<s.length;i+=1){o[i]=[];const h=s[i],a=o[i];for(let i=0;i<h.length;i+=1){const s=h[i];let o=s.x;"alaska"===e&&1===Math.sign(o)&&(o=-180-(180-o)),a[i]={x:t.x+(o-n.min.x)*r.x+n.min.x,y:t.y+(s.y-n.min.y)*r.y+n.min.y}}}return i.outlier=!0,i.transform={...h,vertexBoundaries:n},o}return s},au={World:{min:{x:-180,y:-90},max:{x:180.0000000000002,y:83.63410065300012}},Europe:{min:{x:-25,y:34},max:{x:40,y:70}},Africa:{min:{x:-17,y:-40},max:{x:52,y:37.37549753800012}},Asia:{min:{x:27,y:-10.922621351999808},max:{x:180.0000000000002,y:81.85871002800009}},NorthAmerica:{min:{x:-179.1435033839999,y:5.515082098000121},max:{x:-50,y:83.11652252800009}},SouthAmerica:{min:{x:-85,y:-55.9185042229998},max:{x:-35,y:15}},USA:{min:{x:-125,y:24},max:{x:-68,y:50}},Canada:{min:{x:-141.0181,y:41.7297},max:{x:-52.6194,y:75}},Australia:{min:{x:111,y:-43.6586},max:{x:155,y:-9.2199}}},lu={World:.6,Europe:1/1.4,Africa:1.3,Asia:.8,NorthAmerica:.9,SouthAmerica:1.5,USA:3/4,Canada:6/8,Australia:11/12};class uu extends La{constructor(t,i,s,e,h,r,n){super(t,i,s,i.Py("mapChart bg",0),e,i.us.qi.mapChartBackgroundFillStyle,i.us.qi.mapChartBackgroundStrokeStyle,i.us.qi.mapChartTitleFont,i.us.qi.mapChartTitleFillStyle,n),this.Db=[],this.ft=this.yy.d2({scaleXYConstructor:Ks}),this.Hi=!0,this.Bb=this.qi.mapChartSeparateRegionFillStyle,this.Lb=this.qi.mapChartSeparateRegionStrokeStyle,this.uh=!0,this.Rb=0,this.Eb=!0,this.zb=new Map,this.onMouseEnter=t=>this.L.on("mouseEnter",t),this.onMouseLeave=t=>this.L.on("mouseLeave",t),this.onMouseClick=t=>this.L.on("mouseClick",t),this.onMouseDoubleClick=t=>this.L.on("mouseDoubleClick",t),this.onMouseDown=t=>this.L.on("mouseDown",t),this.onMouseUp=t=>this.L.on("mouseUp",t),this.onMouseMove=t=>this.L.on("mouseMove",t),this.offMouseEnter=t=>this.L.off(t,"mouseEnter"),this.offMouseLeave=t=>this.L.off(t,"mouseLeave"),this.offMouseClick=t=>this.L.off(t,"mouseClick"),this.offMouseDoubleClick=t=>this.L.off(t,"mouseDoubleClick"),this.offMouseDown=t=>this.L.off(t,"mouseDown"),this.offMouseUp=t=>this.L.off(t,"mouseUp"),this.offMouseMove=t=>this.L.off(t,"mouseMove"),this.offMouseDragStart=t=>this.L.off(t,"mouseDragStart"),this.offMouseDrag=t=>this.L.off(t,"mouseDrag"),this.offMouseDragStop=t=>this.L.off(t,"mouseDragStop"),this.offMouseWheel=t=>this.L.off(t,"mouseWheel"),this.onMapDataReady=t=>{const i=this.L.on("mapDataReady",t);return this.Vb&&Ot.setTimeout((()=>t())),i},this.onViewChange=t=>this.L.on("viewChange",t),this.Ob=(t,i,s,e,h)=>{this.ft.x.tt(e).ii([this.$t.left+this.Ca.left,this.$t.right+this.Ca.right]),this.ft.y.tt(h).ii([this.$t.bottom+this.Ca.bottom,this.$t.top+this.Ca.top+Ra.Vy(this.bh,this.Dy)]),this.Nb&&this.Gb(this.Wb,this.ft,this.Nb)},this.Mt=(t,i)=>{const s=i;if(!s||!this.Vb)return;const e=this.Ub(this.Vb,s),h=null==e?void 0:e.region;h&&(this.getCursorMode()&&(this.Yb(e),di(t)),this.Eb&&this.us.ls.Cs(h,!0),this.Hb=h,this.L.emit("mouseEnter",this,t,e))},this._t=(t,i)=>{const s=i;if(!s||!this.Vb)return;const e=this.Ub(this.Vb,s),h=null==e?void 0:e.region;this.$b(),h&&(this.Eb&&this.us.ls.Cs(h,!1),this.Hb=void 0,this.L.emit("mouseLeave",this,t,e),t&&di(t))},this.Ft=(t,i)=>{const s=i;if(!s||!this.Vb)return;const e=this.Ub(this.Vb,s),h=null==e?void 0:e.region;h&&(this.getCursorMode()&&(this.Yb(e),di(t)),this.Hb=h,this.L.emit("mouseMove",this,t,e))},this.wt=(t,i)=>{const s=i;if(!s||!this.Vb)return;const e=this.Ub(this.Vb,s);this.L.emit("mouseClick",this,t,e)},this.Ct=(t,i)=>{const s=i;if(!s||!this.Vb)return;const e=this.Ub(this.Vb,s);this.L.emit("mouseDoubleClick",this,t,e)},this.kt=(t,i)=>{const s=i;if(!s||!this.Vb)return;const e=this.Ub(this.Vb,s);this.L.emit("mouseDown",this,t,e)},this.Tt=(t,i)=>{const s=i;if(!s||!this.Vb)return;const e=this.Ub(this.Vb,s);this.L.emit("mouseUp",this,t,e)},this.Pt=(t,i,s)=>{const e=s;if(!e||!this.Vb)return;const h=this.Ub(this.Vb,e);this.L.emit("mouseDragStart",this,t,i,h)},this.It=(t,i,s,e,h)=>{const r=h;if(!r||!this.Vb)return;const n=this.Ub(this.Vb,r);this.L.emit("mouseDrag",this,t,i,s,e,n)},this.Dt=(t,i,s,e)=>{const h=e;if(!h||!this.Vb)return;const r=this.Ub(this.Vb,h);this.L.emit("mouseDragStop",this,t,i,s,r)},this.Bt=(t,i)=>{const s=i;if(!s||!this.Vb)return;const e=this.Ub(this.Vb,s);this.L.emit("mouseWheel",this,t,e)},this.Lt=(t,i)=>{const s=i;if(!s||!this.Vb)return;const e=this.Ub(this.Vb,s),h=null==e?void 0:e.region;h&&(this.Yb(e),this.Eb&&this.us.ls.Cs(h,!0),this.Hb=h,this.L.emit("touchStart",this,t,e),di(t))},this.Rt=(t,i)=>{const s=i;if(!s||!this.Vb)return;const e=this.Ub(this.Vb,s),h=null==e?void 0:e.region;h&&(this.Yb(e),this.Hb=h,this.L.emit("touchMove",this,t,e),di(t))},this.Et=(t,i)=>{const s=i;if(!s||!this.Vb)return;const e=this.Ub(this.Vb,s),h=null==e?void 0:e.region;this.$b(),h&&(this.Eb&&this.us.ls.Cs(h,!1),this.Hb=void 0,this.L.emit("touchEnd",this,t,e),di(t))},this.us.jn(Vo.bf),this.uh=!1!==(null==r?void 0:r.animationsEnabled),this.Xb=i.jm("mapChart plotting",0),this.onResize(this.Ob),this.bh.yr("Map Chart");const o=i.Qm(),a=jt(r?r.cursorBuilder:void 0,sl);this.Jm=Va(this,o,a.pm(o,this.uiScale,this.uiScale,Yt,this.qi),void 0,"show-pointed",du,(()=>0)),this.jb=this.es.Cg(),this.Iy(h,this.uiScale),this.Zb=this.Xb.Yp(this.ft).setMouseInteractions(this.Hi).setMouseEnterEventHandler(((t,i,s)=>this.Mt(i,s))).setMouseLeaveEventHandler(((t,i,s)=>this._t(i,s))).setMouseClickEventHandler(((t,i,s)=>this.wt(i,s))).setMouseDoubleClickEventHandler(((t,i,s)=>this.Ct(i,s))).setMouseDownEventHandler(((t,i,s)=>this.kt(i,s))).setMouseUpEventHandler(((t,i,s)=>this.Tt(i,s))).setMouseMoveEventHandler(((t,i,s)=>this.Ft(i,s))).setMouseDragStartEventHandler(((t,i,s,e)=>this.Pt(i,s,e))).setMouseDragEventHandler(((t,i,s,e,h,r)=>this.It(i,s,e,h,r))).setMouseDragStopEventHandler(((t,i,s,e,h)=>this.Dt(i,s,e,h))).setMouseWheelEventHandler(((t,i,s)=>this.Bt(i,s))).setTouchStartEventHandler(((t,i,s)=>this.Lt(i,s))).setTouchMoveEventHandler(((t,i,s)=>this.Rt(i,s))).setTouchEndEventHandler(((t,i,s)=>this.Et(i,s))).De(this.qi.mapChartFillStyle).Pe(this.qi.mapChartStrokeStyle),this.Qb=this.Xb.Yp(this.ft).setMouseInteractions(this.Hi).De(this.qi.mapChartOutlierRegionFillStyle).Pe(this.qi.mapChartOutlierRegionStrokeStyle);const l=jt(r&&r.type,eu.World);this.Wb=l,this.Jb(l).then((()=>{this.L.emit("mapDataReady")}))}getRegionUnderMouse(){return this.Hb}setFillStyle(t){return this.Zb.De(t),this.us.xs(),this}getFillStyle(){return this.Zb.$h()}setStrokeStyle(t){return this.Zb.Pe(t),this.us.xs(),this}getStrokeStyle(){return this.Zb.mo()}setEffect(t){return this.jb.bs(t),this.us.xs(),this}getEffect(){return this.jb.Ms()}setOutlierRegionFillStyle(t){return this.Qb.De(t),this.us.xs(),this}getOutlierRegionFillStyle(){return this.Qb.$h()}setOutlierRegionStrokeStyle(t){return this.Qb.Pe(t),this.us.xs(),this}getOutlierRegionStrokeStyle(){return this.Qb.mo()}setSeparateRegionFillStyle(t){return this.Bb="function"==typeof t?t(this.Bb):t,this.Db.forEach((t=>t.De(this.Bb))),this.us.xs(),this}getSeparateRegionFillStyle(){return this.Bb}setSeparateRegionStrokeStyle(t){return this.Lb="function"==typeof t?t(this.Lb):t,this.Db.forEach((t=>t.Pe(this.Lb))),this.us.xs(),this}getSeparateRegionStrokeStyle(){return this.Lb}invalidateRegionValues(t){if(!this.Vb||!this.Kb)return this.qb=this.qb||[],this.qb.push(t),this;if("function"==typeof t)for(let i=0;i<this.Vb.regions.length;i+=1){const s=this.Vb.regions[i],e=this.Kb[i],h=t({...s,geometry:void 0},e);if(void 0!==h&&h!==e){this.Kb[i]=h;const t=this.zb.get(s);null==t||t.forEach((t=>{t.tx(h)}))}}else for(const i of t)if(i)for(let t=0;t<this.Vb.regions.length;t+=1){const s=this.Vb.regions[t],e=this.Kb[t];if(void 0!==i.value&&i.value!==e&&hu(s,i)){this.Kb[t]=i.value;const e=this.zb.get(s);null==e||e.forEach((t=>{t.tx(i.value)}))}}return this.us.xs(),this}onMouseDragStart(t){return this.L.on("mouseDragStart",t)}onMouseDrag(t){return this.L.on("mouseDrag",t)}onMouseDragStop(t){return this.L.on("mouseDragStop",t)}onMouseWheel(t){return this.L.on("mouseWheel",t)}onTouchStart(t){return this.L.on("touchStart",t)}onTouchMove(t){return this.L.on("touchMove",t)}onTouchEnd(t){return this.L.on("touchEnd",t)}offTouchStart(t){return this.L.off(t,"touchStart")}offTouchMove(t){return this.L.off(t,"touchMove")}offTouchEnd(t){return this.L.off(t,"touchEnd")}setMouseInteractions(t){return this.Hi=t,this.Zb.setMouseInteractions(t),this}getMouseInteractions(){return this.Hi}setHighlight(t){var i;return t=zi(t),this.Rb=t,null===(i=this.Vb)||void 0===i||i.regions.forEach((i=>{this.us.ls.Cs(i,t)})),this.L.emit("highlight",this,t),this}getHighlight(){return this.Rb}setAnimationHighlight(t){var i;return null===(i=this.Vb)||void 0===i||i.regions.forEach((i=>{this.us.ls.ks(i,t)})),this}getAnimationHighlight(){var t;return this.us.ls.Ts(null===(t=this.Vb)||void 0===t?void 0:t.regions[0])}setHighlightOnHover(t){return this.Eb=t,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Eb}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}offMapDataReady(t){return this.L.off(t,"mapDataReady")}offViewChange(t){return this.L.off(t,"viewChange")}async Jb(t){const i=await((t,i)=>{let s;if(t===eu.World)s="countries_world.json";else if(t===eu.NorthAmerica)s="countries_northAmerica.json";else if(t===eu.SouthAmerica)s="countries_southAmerica.json";else if(t===eu.Africa)s="countries_africa.json";else if(t===eu.Europe)s="countries_europe.json";else if(t===eu.Asia)s="countries_asia.json";else if(t===eu.USA)s="states_usa.json";else if(t===eu.Canada)s="territoriesProvinces_canada.json";else{if(t!==eu.Australia){const i=`LCJS MapChart unidentified \`type\`: ${t}`;throw Ot.alert(i),new Error(i)}s="territories_australia.json"}const e=`${i}/maps/${s}`;return Ot.fetch(e).then((t=>t.json())).catch((t=>{Wi(i,e,"Map Chart",{shouldCrash:!0})}))})(t,this.vA.Js);this.Kb=new Array(i.regions.length).map((t=>{})).fill(void 0);const s=au[t];if(!s)throw new Error("Unidentified map type.");for(const t of i.outliers)for(const i of t.geometry)this.Qb.$r().wl(i);if(t===eu.USA){const t=25.8,i=29.7;this.Db.push(this.Xb.Be(this.ft).setMouseInteractions(!1).De(this.Bb).Pe(this.Lb).Re({x:-126,y:t}).tt({x:10,y:i-t}),this.Xb.Be(this.ft).setMouseInteractions(!1).De(this.Bb).Pe(this.Lb).Re({x:-113,y:t}).tt({x:7,y:i-t}))}const e=this.us.ls.Hr(this.Zb,{animationEnabled:this.uh});for(let s=0;s<i.regions.length;s+=1){const h=i.regions[s],r=ru(t,h),n=[];for(const t of r)t.length<3||n.push(this.Zb.$r().wl(t));this.zb.set(h,n),e.$r(h,(t=>{n.forEach((i=>i.cs(t)))}))}if(this.jb.As([this.Zb]),this.Nb=s,this.Gb(t,this.ft,s),this.Vb=i,this.qb){for(const t of this.qb)this.invalidateRegionValues(t);this.qb=void 0}this.us.xs()}Gb(t,i,s){const e=lu[t],h=i.x.getCellSize(),r=i.y.getCellSize()/h,n={min:{x:s.min.x,y:s.min.y},max:{x:s.max.x,y:s.max.y}};if(r<e){const t=(n.max.x-n.min.x)*(e/r-1);n.min.x-=t/2,n.max.x+=t/2}else if(r>e){const t=(n.max.y-n.min.y)*(r/e-1);n.min.y-=t/2,n.max.y+=t/2}i.x.K(n.min.x,n.max.x),i.y.K(n.min.y,n.max.y);const o=this.ft.x.ai(),a=this.ft.y.ai();this.L.emit("viewChange",{latitudeRange:{start:n.min.y,end:n.max.y},longitudeRange:{start:n.min.x,end:n.max.x},margin:{top:a[1],bottom:a[0],left:o[0],right:o[1]}})}Yb(t){this.ix=t,this.us.xs()}$b(){this.ix=void 0,this.us.xs()}Ub(t,i){const s=Array.from(this.zb.entries()).findIndex((([t,s])=>s.includes(i))),e=null==t?void 0:t.regions[s],h=this.us.$n();if(!h)return;const r=this.us.Oo(h),n=this.Kb&&this.Kb[s];let o=At({x:r.engineX,y:r.engineY},this.us.ft,this.ft);o={x:$t(o.x,this.ft.x.getInnerStart(),this.ft.x.getInnerEnd()),y:$t(o.y,this.ft.y.getInnerStart(),this.ft.y.getInnerEnd())};let a=o.x,l=o.y;const u=e.transform;e.outlier&&u&&(a=(a-u.translate.x-u.vertexBoundaries.min.x)/u.scale.x+u.vertexBoundaries.min.x,l=(l-u.translate.y-u.vertexBoundaries.min.y)/u.scale.y+u.vertexBoundaries.min.y);const c=this.getFillStyle();return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.us.ft,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.us.ft},region:e,value:n,longitude:l,latitude:a,lut:Z(c)?c.lut:void 0}}setCursor(t){return this.Jm.setCursor(t),this}getCursor(){return this.Jm.getCursor()}setCursorMode(t){return this.Jm.setCursorMode(t),this}getCursorMode(){return this.Jm.getCursorMode()}setCustomCursor(t){return this.Jm.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.Jm.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.Jm.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Jm.setCursorFormatting(t),this}getCursorFormatting(){return this.Jm.getCursorFormatting()}addCursor(t=sl){const i=this.vy(),s=t.pm(i,this.uiScale,this.uiScale,this.Ay(i),this.qi);return this.ky(s),s}setAnimationsEnabled(t){return this.uh=!t,this}getAnimationsEnabled(){return this.uh}getMinimumSize(){}sf(){return[this]}Le(t){super.Le(t),super.Fy(),Ra.Oy(this.bh,this.Dy);const i=d(this.ft.x.si(),this.ft.y.si(),this.ft.x.hi(),this.ft.y.hi());return this.Xb.ab(i),this.Jm.Le(!1,[],void 0,{explicitTarget:this.ix}),this}dispose(){return this.Xb.U(),this.Jm.U(),Pa(this.ft),super.dispose()}Z(){return super.Z(),this.ft.Z(),this}J(){return super.J(),this.ft.J(),this}jd(){return ki(this.getFillStyle())}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),t.onMouseEnter((()=>{this.setHighlight(!0)})),t.onMouseLeave((()=>{this.setHighlight(!1)})),this.onMouseEnter((()=>t.setHighlight(!0))),this.onMouseLeave((()=>t.setHighlight(!1))),this.onTouchStart((()=>t.setHighlight(!0))),this.onTouchEnd((()=>t.setHighlight(!1))),this.styleLegendEntry(t,s),this}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.getFillStyle()})}}const cu=(t,i)=>{const s=t>0,e=i>0;return`${[Fi(Math.abs(0|t),2),"° ",Fi(Math.abs(0|(t<0?t=-t:t)%1*60),2),"' "].join("")+(s?"E":"W")}, ${[Fi(Math.abs(0|i),2),"° ",Fi(Math.abs(0|(i<0?i=-i:i)%1*60),2),"' "].join("")+(e?"N":"S")}`},du=(t,i,s)=>{var e;const h=[[i.region.name],[cu(i.longitude,i.latitude)]];return void 0!==i.value&&h.push({text:ne(i.value.toFixed(1),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}),h};class fu extends xh{constructor(t,i,s,e,h,r,n,o,a){super(t,i,i.sx(s),e,h,{numeric:i.hx({amplitude:e.polarAmplitudeAxisNumericTicks,radial:e.polarAmplitudeAxisNumericTicks}),datetime:i.hx({amplitude:e.polarAmplitudeAxisDateTimeTicks,radial:e.polarAmplitudeAxisDateTimeTicks}),time:i.hx({amplitude:e.polarAmplitudeAxisTimeTicks,radial:e.polarAmplitudeAxisTimeTicks})},{type:"linear"}),this.nx=r,this.ox=n,this.lx=o,this.es=a,this.ux=s,this.Ax=i.hx({amplitude:e.polarAmplitudeAxisStrokeStyle,radial:e.polarRadialAxisStrokeStyle}),this._h=o.Nr(s).setMouseInteractions(!1).Zh(i.hx({amplitude:e.polarAmplitudeAxisTitleFont,radial:e.polarRadialAxisTitleFont})).De(i.hx({amplitude:e.polarAmplitudeAxisTitleFillStyle,radial:e.polarRadialAxisTitleFillStyle})),this.Kh=this.es.Cg([this._h]).bs(e.effectsText)}setTickStrategy(t,i){return super.Nh(t,i)}setStrokeStyle(t){return this.Ax="function"==typeof t?t(this.Ax):t,this.ox.xs(),this}getStrokeStyle(){return this.Ax}vr(t,i){return new Au(i,t,this.ux,this.lx,this.gx(this.nx,this.ux),this.lx.We(this.ux).setMouseInteractions(!1))}Sr(t,i){const s=this.yx(this.ux,t);this.mx&&!1===this.mx(t)?t.th.setVisible(!1):t.th.setVisible(!0).Re(ws(this.vx(this.ux,t.S),s.padding)).Ha(s.alignment).Qh(s.rotation).Oa(s.offset.x,s.offset.y),this.Sx(this.ux,t.bx,t.xx,t)}setMouseInteractions(t){return this}Le(){this.nr({physicalAxisSize:0});const t=this._r(((t,i)=>{const s=i.Ph.pr,e=.5*this.Ax.getThickness()+s.tickLength+s.tickPadding+Math.abs(i.th.Es().sd().y);return Math.max(t,e)}),0);return this.Mx(this.ux,this.Ax,t),this._x(this.ux,this._h,t),t}}class Au extends Mh{constructor(t,i,s,e,h,r,n){super(t,i,e,s,n),this.bx=h,this.xx=r,h.setMouseInteractions(!1),this.ts.push(h,r)}}class gu extends fu{constructor(t,i,s,e,h,r,n,o,a){super(t,yu((()=>this.Bg())),i,s,e,h,r,n,o),this.Op=this.ox.We(this.ux).setMouseInteractions(!1),this.wx=a,this.setScrollStrategy(nh.expansion),this.setTickStrategy(oh.Numeric),this.setTitle("Amplitude")}Bg(){return this.wx()}Br(t,i){return ae(t,i,this.ux.y)}Rr(t,i,s){const e=2*(i-t),h=this.ux.x.Bi(e);return{min:t-s*h,max:i+s*h}}vx(t,i){return{x:t.Cx()?i-t.kx().start:t.kx().start-i,y:0}}gx(t,i){return t.rd(i)}Sx(t,i,s,e){const h=e.Ph.pr,r=t.Cx()?e.S-t.kx().start:t.kx().start-e.S;Ht(e.S,t.kx().start)||Ht(e.S,t.kx().end)?i.setVisible(!1):i.setVisible(!0).uu(0).Ue(360).gu(void 0).Au(0).cu(r).gu(60).De(O).Pe(h.gridStrokeStyle);const n=.5*this.Ax.getThickness();s.Ye({x:r,y:-n*t.Gi().y}).Ue({x:r,y:-(n+h.tickLength)*t.Gi().y}).Ge(h.tickStyle)}yx(t,i){const s=i.Ph.pr;return{alignment:{x:0,y:1},padding:{x:0,y:t.Gi().y*-(.5*this.Ax.getThickness()+s.tickLength+s.tickPadding)},rotation:0,offset:{x:0,y:0}}}Mx(t,i,s){const e=t.Cx()?t.kx().end-t.kx().start:t.kx().start-t.kx().end;this.Op.Ye({x:0,y:0}).Ue({x:e,y:0}).Ge(i)}_x(t,i,s){const e=t.Cx()?(t.kx().start+t.kx().end)/2-t.kx().start:t.kx().start-(t.kx().start+t.kx().end)/2;i.Ha({x:0,y:1}).Re({x:e,y:-s*t.Gi().y})}}const yu=t=>({...Tl(t,(t=>t.getAmplitudeMin()),(t=>t.getAmplitudeMax()),(t=>{})),sx:t=>({getInnerStart:()=>t.kx().start,getInnerEnd:()=>t.kx().end,K:(i,s)=>t.Tx(i,s),ot:(i,s,e,h,r)=>t.y.ot(i,s,e,h,r)}),hx:t=>t.amplitude});class mu extends fu{constructor(t,i,s,e,h,r,n,o){super(t,vu,i,s,e,h,r,n,o),this.Fx=90,this.Ix=12,this.Px=pu,this.Op=this.ox.rd(this.ux).setMouseInteractions(!1),this.mx=t=>{let i=180*(t.S-this.ux.Dx())/Math.PI%360;for(;i<0;)i+=360;for(;i>360;)i-=360;if(i>=0&&i<=20||i>=340&&i<=360)return!1},this.oh=void 0,this.setTickStyle(s.polarRadialAxisTickStyle),this.setTitle("Degrees"),this.setNorth(this.Fx)}setTickStyle(t){return this.Bx="function"==typeof t?t(this.Bx):t,this.Lx(),this.ox.xs(),this}getTickStyle(){return this.Bx}setTickFormattingFunction(t){return this.Px=t,this.Lx(),this.ox.xs(),this}getTickFormattingFunction(){return this.Px}setClockwise(t){this.ux.Rx(t);const i=this.Fx*Math.PI/180;return t?this.ux.Ex(i+Math.PI/2):this.ux.Ex(i-Math.PI/2),this.ox.xs(),this}getClockwise(){return!this.ux.zx()}setNorth(t){for(;t<0;)t+=360;t%=360,this.Fx=t;const i=t*Math.PI/180;return this.getClockwise()?this.ux.Ex(i+Math.PI/2):this.ux.Ex(i-Math.PI/2),this.ox.xs(),this}getNorth(){return 180*this.ux.Dx()/Math.PI}setDivision(t){return this.Ix=t,this.Lx(),this.ox.xs(),this}getDivision(){return this.Ix}Bg(){return[]}Br(t,i){return i}Rr(t,i,s){return{min:t,max:i}}vx(t,i){const s=t.zx()?1:-1,e=t.Dx(),h=t.Cx()?t.kx().end-t.kx().start:t.kx().start-t.kx().end;return{x:Math.cos((i-e)*s)*h,y:Math.sin((i-e)*s)*h}}gx(t,i){return t.We(i)}Sx(t,i,s,e){const h=this.Bx,r=t.zx()?1:-1,n=t.Dx(),o=(e.S-n)*r,a=Math.cos(o),l=Math.sin(o),u=t.Cx()?t.kx().end-t.kx().start:t.kx().start-t.kx().end,c={x:a*u,y:l*u};i.Ye({x:0,y:0}).Ue(c);const d={x:c.x+a*h.tickLength*t.Gi().x,y:c.y+l*h.tickLength*t.Gi().y};s.Ye(c).Ue(d),i.Ge(h.gridStrokeStyle),s.Ge(h.tickStyle)}yx(t,i){const s=this.Bx,e=t.zx()?1:-1,h=t.Dx();let r,n=(i.S-h)*e;for(;n<0;)n+=2*Math.PI;for(;n>=2*Math.PI;)n-=2*Math.PI;r=n>0&&n<=Math.PI?-n+Math.PI/2:-n-Math.PI/2;const o=s.tickLength+s.tickPadding,a=Math.cos(n)*o*t.Gi().x,l=Math.sin(n)*o*t.Gi().y;return{alignment:{x:0,y:0},padding:{x:a,y:l},rotation:180*r/Math.PI,offset:{x:a,y:l}}}Mx(t,i,s){const e=t.Cx()?t.kx().end-t.kx().start:t.kx().start-t.kx().end;this.Op.uu(0).Ue(360).Au(0).cu(e+.5*i.getThickness()*t.Gi().x).gu(360).De(O).Pe(i)}_x(t,i,s){const e=t.Dx(),h=this.yx(t,{S:0+e}),r=t.Cx()?t.kx().end-t.kx().start:t.kx().start-t.kx().end;i.Ha(h.alignment).Qh(h.rotation).Oa(h.offset.x,h.offset.y).Re(ws({x:r,y:0},h.padding))}Lx(){this.ir({je:[],Ze:[{th:"Radial ticks",Yg:0,pr:this.Bx,gr:this.Px,Wr:(t,i,s,e)=>{const h=[],r=2*Math.PI/this.Ix;for(let t=0;t<2*Math.PI;t+=r)h.push(t);return h},Dh:{br:()=>{},Bh:()=>!1},Ur:void 0}],Qe:pu,Je:void 0,Ke:void 0})}}const pu=(t,i,s)=>(180*t/Math.PI).toFixed(0),vu={Tr:()=>{},Fr:()=>{},Pr:()=>{},sx:t=>({getInnerStart:()=>0,getInnerEnd:()=>2*Math.PI,K:(t,i)=>{},ot:(i,s,e,h,r)=>t.x.ot(i,s,e,h,r)}),hx:t=>t.radial},Su=t=>!!(t&&"object"==typeof t&&"axisAmplitude"in t&&"axisRadial"in t),bu=t=>!!(t&&"object"==typeof t&&"angle"in t&&"number"==typeof t.angle&&"amplitude"in t&&"number"==typeof t.amplitude);class xu extends ce{constructor(t,i,s,e,h,r){super(i,s,h,r),this.ws="Sector",this.Vx=0,this.Ox=1*Math.PI/2,this.Nx=void 0,this.Gx=void 0,this.Ds=t,this.ux=e,this.Pm=this.Ds.rd(this.ux).cs(this.getHighlight()),this.fs(this.Pm),this.ke=h.polarSectorFillStyle,this.Te=h.polarSectorStrokeStyle,this.setMouseInteractions(!1)}setAngleStart(t){return this.Vx=$t(t,0,360),this.Ds.xs(),this}getAngleStart(){return this.Vx}setAngleEnd(t){return this.Ox=$t(t,0,360),this.Ds.xs(),this}getAngleEnd(){return this.Ox}setAmplitudeStart(t){return this.Nx=t,this.Ds.xs(),this}getAmplitudeStart(){return this.Nx}setAmplitudeEnd(t){return this.Gx=t,this.Ds.xs(),this}getAmplitudeEnd(){return this.Gx}setFillStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.Ds.xs(),this}getFillStyle(){return this.ke}setStrokeStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.Ds.xs(),this}getStrokeStyle(){return this.Te}Le(){const t=this.ux.kx(),i=180*this.ux.Dx()/Math.PI,s=void 0!==this.Nx?$t(this.Nx,t.start,t.end):t.start,e=void 0!==this.Gx?$t(this.Gx,t.start,t.end):t.end,h=this.ux.Cx()?s-t.start:t.start-s,r=this.ux.Cx()?e-t.start:t.start-e,n=Math.min(h,r),o=Math.max(h,r),a=this.ux.zx()?1:-1,l=Math.abs(this.Ox-this.Vx);this.Pm.uu((this.Vx-i)*a).Ue((this.Ox-i)*a).Au(100*n/o).cu(o).De(this.ke).Pe(this.Te).gu(Math.ceil(l/2))}Ee(t,i){t.cs(i),this.Ds.xs()}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke,stroke:this.Te})}}class Mu extends ce{constructor(){super(...arguments),this.lv=!0,this.av=!0}setAutoScrollingEnabled(t){return this.lv=t,this.chart.us.xs(),this}getAutoScrollingEnabled(){return this.lv}pv(){}Le(){}xp(){}setCursorEnabled(t){return this.av=t,this}getCursorEnabled(){return this.av}setCursorFormattingOverride(t){return this.gv=t,this}getCursorFormattingOverride(){return this.gv}}class _u extends Mu{constructor(t,i,s,e,h,r){super(i,s,h,r),this.Ds=t,this.chart=i,this.scale=e}getAmplitudeMin(){return this.Wx?this.Wx.min:void 0}getAmplitudeMax(){return this.Wx?this.Wx.max:void 0}}const wu=(t,i)=>{const s=[],e=i.kx().start,h=i.kx().end,r=i.Cx(),n=i.zx()?1:-1,o=i.Dx(),a=Math.abs(h-e),l=Math.min(e,h)+.001*a,u=Math.max(e,h)-.001*a;for(const i of t){const t=$t(i.amplitude,l,u),h=i.angle*Math.PI/180-o,a=Math.cos(h*n)*(r?t-e:e-t),c=Math.sin(h*n)*(r?t-e:e-t),d=i.color;s.push({x:a,y:c,color:d})}return s},Cu=t=>{const i={min:Ki,max:qi};for(const s of t)i.min=Math.min(i.min,s.amplitude),i.max=Math.max(i.max,s.amplitude);return i},ku=t=>t.slice().map((t=>t.angle>=0&&t.angle<=360?t:{...t,angle:t.angle%360})),Tu=(t,i)=>{let s=Ls(t);for(i.zx()||(s*=-1),s+=180*i.Dx()/Math.PI;s<0;)s+=360;s%=360;const e=Ms(t),h=i.kx(),r=Math.abs(h.end-h.start);return{angle:s,amplitude:un(h.start,h.end,e/r)}};class Fu extends _u{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r),this.ws="Heatmap Series",this.Ux=!0,this.Mv=!1,this.jd=()=>ki(this.ke);const o=this.chart.getSeries().length;this.ke=Ii(this.qi.polarHeatmapSeriesFillStyle||this.qi.heatmapGridSeriesFillStyle,o);const a=n.amplitudeStart||0,l=n.amplitudeEnd?(n.amplitudeEnd-a)/(n.annuli-1):n.amplitudeStep||1,u={sectors:n.sectors,annuli:n.annuli,amplitudeStart:a,amplitudeStep:l,heatmapDataType:"intensity",dataOrder:n.dataOrder||"annuli"};this.Jn=u,this.Yx=t.Hx(e,[],u).De(this.ke).cs(this.getHighlight()),this.fs(this.Yx);const c=Math.min(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep),d=Math.max(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep);this.Wx={min:c,max:d},this.setHighlightOnHover(!1)}solveNearest(t,i="show-nearest"){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=At(e,this.chart.us.ft,this.scale),r=Tu(h,this.scale),n=Ea(i)?this.Yx.$x(r):this.Yx.Kc(r);if(!n)return;const o=wu([n],this.scale)[0];return{cursorPosition:{pointMarker:o,pointMarkerScale:this.scale,resultTable:o,resultTableScale:this.scale},series:this,angle:n.angle,amplitude:n.amplitude,intensity:n.cellValue,annulus:n.iAnnulus,sector:n.iSector,lut:Z(this.ke)?this.ke.lut:void 0}}Ji(t,i){return ji({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0,intensity:0,sector:0,annulus:0,lut:Z(this.ke)?this.ke.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}invalidateIntensityValues(t){if(this.Mv&&this.chart.us.jn(Vo.kf),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,sectors:"annuli"===this.Jn.dataOrder?t[0].length:t.length,annuli:"annuli"===this.Jn.dataOrder?t.length:t[0].length},s="annuli"===this.Jn.dataOrder?this.Jn.annuli:this.Jn.sectors,e="annuli"===this.Jn.dataOrder?this.Jn.sectors:this.Jn.annuli;if(i.x>s||i.y>e){if(!0===this.chart.vA.qn){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nHeatmap ${s}x${e}, input ${i.x}x${i.y}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Ot.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);if(0===(t=h).length||0===t[0].length)return this}this.Yx.IS({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iSector"in t&&"iAnnulus"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,sectors:"annuli"===this.Jn.dataOrder?t.values[0].length:t.values.length,annuli:"annuli"===this.Jn.dataOrder?t.values.length:t.values[0].length},s="annuli"===this.Jn.dataOrder?t.iAnnulus:t.iSector,e=s+i.primary-1,h="annuli"===this.Jn.dataOrder?t.iSector:t.iAnnulus,r=h+i.secondary-1,n="annuli"===this.Jn.dataOrder?this.Jn.annuli-1:this.Jn.sectors-1,o="annuli"===this.Jn.dataOrder?this.Jn.sectors-1:this.Jn.annuli-1;if(s<0||h<0){if(!0===this.chart.vA.qn){const i=`PolarHeatmapSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niSector: ${t.iSector}, iAnnuli: ${t.iAnnulus}.\nNo intensity values will be invalidated.`;Ot.console.warn(i)}return this}if(e>n||r>o){if(!0===this.chart.vA.qn){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nMax indexes ${n}x${o}, input ${i.primary}x${i.secondary} starting at [${s},${h}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Ot.console.warn(t)}const a=Math.max(e-n,0),l=i.primary-a,u=Math.max(r-o,0),c=[];for(let i=0;i<l;i+=1)c[i]=t.values[i].slice(0,u>0?-u:void 0);if(0===(t={iSector:t.iSector,iAnnulus:t.iAnnulus,values:c}).values.length||0===t.values[0].length)return this}this.Yx.IS({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.Ds.xs(),this.Mv=!0,this}setFillStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.Yx.De(this.ke),this.Ds.xs(),this}getFillStyle(){return this.ke}clear(){return this.Yx.Vt(),this.Ds.xs(),this}setIntensityInterpolation(t){return t=t||"disabled",this.Yx.TS(t),this.Ds.xs(),this}getIntensityInterpolation(){return this.Yx.FS()}nv(){return this.lv&&this.getVisible()}Ee(t,i){t.cs(i),this.Ds.xs()}Le(){}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke})}}class Iu extends _u{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.ws="Line Series",this.Xx=[],this.jx=!1,this.Zx=!1,this.yu=Ii(this.qi.polarLineSeriesStrokeStyle,r),this.Qx=t.op(e,void 0,[gl.UserSeries]).Ge(this.yu).cs(this.getHighlight()),this.fs(this.Qx)}solveNearest(t,i){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=this.Qx.Jx(e);if(!h)return;const r=Tu(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Ji(t,i){return ji({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,"show-nearest")))}setData(t){return 0!==this.Xx.length&&this.chart.us.jn(Vo.kf),this.Xx=ku(t),this.jx=!0,this.Wx=Cu(this.Xx),this.Ds.xs(),this}setStrokeStyle(t){this.yu="function"==typeof t?t(this.yu):t;const i=this.yu;return this.Qx.Ge(i),this.Ds.xs(),this}getStrokeStyle(){return this.yu}setConnectDataAutomaticallyEnabled(t){return this.Zx=t,this.Ds.xs(),this}getConnectDataAutomaticallyEnabled(){return this.Zx}nv(){return this.lv&&this.Xx.length>0&&this.getVisible()}Ee(t,i){t.cs(i),this.Ds.xs()}Le(){if(this.jx||this.scale.Kx()){const t=wu(this.Xx,this.scale),i=As(t);this.Zx?(t.push({...t[0]}),this.Qx.Yl(!0)):this.Qx.Yl(!1),this.Qx.Vt().fl(t).qo(i),this.jx=!1,this.Qx.Es()}}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{stroke:this.yu})}}class Pu extends _u{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.ws="Point Line Series",this.Xx=[],this.jx=!1,this.Zx=!1,this.qx=3,this.Ma=0,this.tM=sr.Circle,this.ke=Ii(this.qi.polarPointLineSeriesFillStyle,r),this.yu=Ii(this.qi.polarPointLineSeriesStrokeStyle,r),this.Qx=t.op(e,void 0,[gl.UserSeries]).Ge(this.yu).cs(this.getHighlight()),this.fs(this.Qx),this.iM=t.Dv(e).De(this.ke).al(this.tM).tt(this.qx).cs(this.getHighlight()),this.fs(this.iM)}solveNearest(t,i){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=this.Qx.Jx(e);if(!h)return;const r=Tu(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Ji(t,i){return ji({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}setData(t){return 0!==this.Xx.length&&this.chart.us.jn(Vo.kf),this.Xx=ku(t),this.jx=!0,this.Wx=Cu(this.Xx),this.Ds.xs(),this}setStrokeStyle(t){this.yu="function"==typeof t?t(this.yu):t;const i=this.yu;return this.Qx.Ge(i),this.Ds.xs(),this}getStrokeStyle(){return this.yu}setPointFillStyle(t){this.ke="function"==typeof t?t(this.ke):t;const i=this.ke;return this.iM.De(i),this.Ds.xs(),this}getPointFillStyle(){return this.ke}setPointSize(t){return this.qx=t,this.iM.tt(t),this.Ds.xs(),this}getPointSize(){return this.qx}setPointShape(t){return this.tM=t,this.iM.al(this.tM),this}getPointShape(){return this.tM}setPointRotation(t){return this.Ma=t,this.iM.Qh(t),this.Ds.xs(),this}getPointRotation(){return this.Ma}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke,stroke:this.yu})}setConnectDataAutomaticallyEnabled(t){return this.Zx=t,this.Ds.xs(),this}getConnectDataAutomaticallyEnabled(){return this.Zx}nv(){return this.lv&&this.Xx.length>0&&this.getVisible()}Ee(t,i){t.cs(i),this.Ds.xs()}Le(){if(this.jx||this.scale.Kx()){const t=wu(this.Xx,this.scale),i=As(t);this.Zx?(t.push({...t[0]}),this.Qx.Yl(!0)):this.Qx.Yl(!1),this.Qx.Vt().fl(t).qo(i),this.iM.Vt().fl(t).qo(i),this.jx=!1,this.Qx.Es(),this.iM.Es()}}Is(){return this._s||this.tM}}class Du extends Wr{constructor(t,i,e,h,r,n,o,a,l){super(),this.jo=$i(),this.L=new s,this.Xi=!1,this.sM=h,this.eM=r,this.hM=n,this.rM=o,this.nM=a,this.Ds=t,this.scale=i,this.oM=e,this.qi=l}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}dispose(){return this.oM&&this.oM(this),this.Ds.us.xs(),this.L.emit("dispose",this),this.Xi=!0,this}setVisible(t){return super.setVisible(t),this.hM(),this.Ds.us.xs(),this}isDisposed(){return this.Xi}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setMouseInteractions(t){return this.rM(this,t),this}getMouseInteractions(){return this.nM(this)}}class Bu extends Du{constructor(t,i,s,e,h,r,n,o,a,l,u,d,f,A,g,y,m){super(t,i,s,e,h,r,n,o,m),this.aM=1,this.lM=1,this.Ds=t,this.scale=i,this.dimensionStrategy=a,this.start=l,this.end=u,this.lowerExtreme=d,this.lowerQuartile=f,this.median=A,this.upperQuartile=g,this.upperExtreme=y,this.boundaries=c(this.dimensionStrategy.toPoint(l,d),this.dimensionStrategy.toPoint(u,y)),this.uM=this.qi.boxSeriesBodyFillStyle,this.cM=this.qi.boxSeriesBodyStrokeStyle,this.yu=this.qi.boxSeriesStrokeStyle,this.dM=this.qi.boxSeriesMedianStrokeStyle,this.Es()}getBoundaries(){return this.boundaries}setBodyWidth(t){return this.aM=t,this.Es(),this}getBodyWidth(){return this.aM}setBodyFillStyle(t){return this.uM="function"==typeof t?t(this.uM):t,this.eM(),this}getBodyFillStyle(){return this.uM}setBodyStrokeStyle(t){return this.cM="function"==typeof t?t(this.cM):t,this.eM(),this}getBodyStrokeStyle(){return this.cM}setTailWidth(t){return this.lM=t,this.Es(),this}getTailWidth(){return this.lM}setStrokeStyle(t){return this.yu="function"==typeof t?t(this.yu):t,this.eM(),this}getStrokeStyle(){return this.yu}setMedianStrokeStyle(t){return this.dM="function"==typeof t?t(this.dM):t,this.eM(),this}getMedianStrokeStyle(){return this.dM}Es(){this.sM()}getDominantStyle(){return this.getBodyFillStyle()}}class Lu extends Mu{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,a,l),this.Ps=!0,this.ts=new Map,this.chart=t,this.Ds=s,this.axisX=e,this.axisY=h,this.axisXAttachHandler=r,this.axisYAttachHandler=n,this.fM=o,this.scale=te(e.ft,h.ft),this.AM=t.gM,t.gM+=1,this.yM(this.scale),this.attacheAxis(),this.onMouseEnter(this.chart.mM),this.onMouseLeave(this.chart.pM),this.onMouseWheel(this.chart.cv),this.onMouseDragStart(this.chart.vM),this.onMouseDrag(this.chart.dv),this.onMouseDragStop(this.chart.fv),this.onTouchStart(this.chart.Av.onTouchStart),this.onTouchMove(this.chart.Av.onTouchMove),this.onTouchEnd(this.chart.Av.onTouchEnd)}get xAxis(){return this.axisX}get yAxis(){return this.axisY}SM(){const t=Array.from(this.ts.keys());for(const i of t)if(i.bM)return i.bM}setClipping(t){return this.Ps=t,this.Ds.xs(),this}getClipping(){return this.Ps}attacheAxis(){this.xM=this.axisXAttachHandler(this),this.MM=this.axisYAttachHandler(this)}fs(t,i){super.fs(t,i),t.na(this.AM)}getName(){const t=this.ds(),i="ProgressiveY"===t||"RegressiveY"===t?this.axisX.getTitle():this.axisY.getTitle();return this.ws||i.length>0&&i||"Series"}setDrawOrder(t){return this.AM=t.seriesDrawOrderIndex,this.ts.forEach(((t,i)=>{i.na(this.AM)})),this.chart.us.xs(),this}dispose(){return super.dispose(),this.xM(this),this.MM(this),this}xp(){super.xp(),re(this.Ps,Array.from(this.ts.keys()),this.scale)}getBoundaries(){return c(n(this.getXMin()||0,this.getYMin()||0),n(this.getXMax()||0,this.getYMax()||0))}setCursorEnabled(t){return super.setCursorEnabled(t)}}const Ru=(t,i,s,e)=>{const h=t.length;let r=0;if(void 0!==i){const h=s-i;if(h>0){const i=t.slice(r,h);r+=h,e(i,!0)}}for(;r<h;){const i=t.slice(r,r+s);r+=s,e(i,!1)}},Eu=(t,i=(t=>t))=>{const s=[];let e;for(let h=0;h<t.length;h+=1){e=t[h];const r=i(e.ol()),n=e.nl(),o=n?i(n):[];let a=!1,l=!1;"Ul"in e&&(a=e.Ul(),l=e.Hl()),s.push.apply(s,r.slice(a?1:0,r.length-(l&&0===o.length?1:0))),s.push.apply(s,o.slice(a&&0===r.length?1:0,o.length-(l?1:0)))}return s};class zu extends Lu{constructor(){super(...arguments),this._M=[],this.wM=void 0,this.CM=!1,this.oM=t=>{const i=this._M.findIndex((i=>i===t));i>=0&&this._M.splice(i,1),this.CM=!0,this.wM=void 0,this.Ds.xs()},this.sM=()=>{this.wM=void 0,this.CM=!0,this.chart.us.xs()},this.eM=()=>{this.CM=!0,this.chart.us.xs()},this.hM=()=>{this.wM=void 0,this.CM=!0,this.chart.us.xs()},this.rM=(t,i)=>{this.setMouseInteractions(i)},this.kM=t=>this.getMouseInteractions()}Le(){super.Le(),this.CM&&(this.TM(this._M),this.CM=!1)}clear(){return this._M.slice().forEach(Ut),this._M.length=0,this.CM=!0,this.wM=void 0,this.Ds.xs(),this}FM(t,i){void 0!==i?this._M.splice(i,0,t):this._M.push(t),this.CM=!0,this.IM&&this.IM(t),t.onMouseEnter(((t,i)=>this.Mt(t,i,void 0,{}))),t.onMouseLeave(((t,i)=>this._t(t,i,void 0))),t.onMouseClick(((t,i)=>this.wt(t,i,void 0,{}))),t.onMouseDoubleClick(((t,i)=>this.Ct(t,i,void 0,{}))),t.onMouseDown(((t,i)=>this.kt(t,i,void 0,{}))),t.onMouseUp(((t,i)=>this.Tt(t,i,void 0,{}))),t.onMouseMove(((t,i)=>this.Ft(t,i,void 0,{}))),t.onMouseDragStart(((t,i,s)=>this.Pt(t,i,s,void 0,{}))),t.onMouseDrag(((t,i,s,e,h)=>this.It(t,i,s,e,h,void 0,{}))),t.onMouseDragStop(((t,i,s,e)=>this.Dt(t,i,s,e,void 0,{}))),t.onMouseWheel(((t,i)=>this.Bt(t,i,void 0,{}))),t.onTouchStart(((t,i)=>this.Lt(t,i,void 0,{}))),t.onTouchMove(((t,i)=>this.Rt(t,i,void 0,{}))),t.onTouchEnd(((t,i)=>this.Et(t,i,void 0,{}))),this.Ds.xs()}nv(){return this.lv&&this._M.length>0&&this.getVisible()}setDefaultStyle(t){this.IM=t,this._M.forEach(t),t(this.PM);for(let t=0;t<this.Qi.length;t+=1)this.styleLegendEntry(this.Qi[t]);return this.CM=!0,this.chart.us.xs(),this}getXMax(){return this.wM||(this.wM=this.DM()),this.wM.max.x}getXMin(){return this.wM||(this.wM=this.DM()),this.wM.min.x}getYMax(){return this.wM||(this.wM=this.DM()),this.wM.max.y}getYMin(){return this.wM||(this.wM=this.DM()),this.wM.min.y}Pr(){return n(0,0)}DM(){const t=c(o(Ki,Ki),o(qi,qi));for(let i=0;i<this._M.length;i+=1)if(this._M[i].getVisible()){const s=this._M[i].getBoundaries();t.min.x=Math.min(t.min.x,s.min.x),t.min.y=Math.min(t.min.y,s.min.y),t.max.x=Math.max(t.max.x,s.max.x),t.max.y=Math.max(t.max.y,s.max.y)}return t}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this._M.length>0?this._M[0].getDominantStyle():this.PM.getDominantStyle()})}}const Vu=(t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:e+i*s,y:t[s]};return h};class Ou extends Lu{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,l,u),this.BM=[],this.Mu=[],this.LM=0,this.Fs=!1,this.$i=ue.onHover,this.chart.us.jn(Vo.Mf),this.RM=a}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.LM=void 0!==i&&i>0?i:0,this.Ds.xs(),this}add(t){if(0!==this.BM.length&&this.chart.us.jn(Vo.kf),Array.isArray(t)?this.EM(t):this.EM([t]),this.Mu.length>0){const t=this.Mu[this.Mu.length-1];this.zM={x:t.x,y:t.y}}return this}addArrayX(t,i=1,s){let e=s;return e||(e=this.zM?this.zM.y+i:0),this.add(((t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:t[s],y:e+i*s};return h})(t,i,e)),this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.zM?this.zM.x+i:0),this.add(Vu(t,i,e)),this}addArraysXY(t,i){if(t.length!==i.length)throw new Error("arrayX and arrayY lengths are not equal");return this.add(((t,i)=>{const s=new Array(t.length);for(let e=0;e<t.length;e+=1)s[e]={x:t[e],y:i[e]};return s})(t,i)),this}getPointAmount(){return this.BM.reduce(((t,i)=>t+i.Al()+i.yl()),this.Mu.length)}clear(){this.VM=void 0;for(let t=0;t<this.BM.length;t+=1)this.BM[t].Vt();return this.Mu.length=0,this.zM=void 0,this.Ds.xs(),this.L.emit("dataClear",this),this}getLastPoint(){return this.zM}nv(){return this.lv&&this.getPointAmount()>0&&this.getVisible()}getXMax(){return this.RM.getXMax(this.BM,this.VM)||0}getXMin(){return this.RM.getXMin(this.BM,this.VM)||0}getYMax(){return this.RM.getYMax(this.BM,this.VM)||0}getYMin(){return this.RM.getYMin(this.BM,this.VM)||0}Pr(){const t=n(0,0);for(const i of this.BM)t.x=Math.max(t.x,i.kl()),t.y=Math.max(t.y,i.Tl());return t}OM(t,i,s,e){this.RM.OM(t,i,s,e,this.scale,(t=>{}))}pv(){super.pv(),this.NM&&this.OM(this.BM,this.getPointAmount(),this.NM,this.LM)}Le(){super.Le();const t=this.getBoundaries();this.Mu.length>0&&(this.GM(this.Mu),this.Mu=[]);for(const i of this.BM)i.qo(t);return super.Le()}xp(){super.xp(),this.VM=void 0,this.Mu.length=0}EM(t){0!==t.length&&(this.VM?this.VM=ys(this.VM,As(t)):this.VM=As(t),this.L.emit("dataAdd",this,t,this.VM),this.Mu=xi(this.Mu,t,{canReturnB:!1}),this.Ds.xs())}WM(){return Eu(this.BM)}UM(t){return this.L.on("dataAdd",t)}YM(t){return this.L.off(t)}HM(t){return this.L.on("dataClear",t)}$M(t){return this.L.off(t)}}const Nu=(t,i,s,e)=>{let h,r,n=Number.MAX_VALUE;for(let o=0;o<i.length;o+=1){const a=i[o],l=s(a,t);if(l){const i=e(t,l);(void 0===h||i<n)&&(h=l,r=a,n=i)}}return h&&r?[h,r]:void 0};class Gu extends zu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.ws="Box Series",this.XM=Yi(),this.jM=t=>At(this.Bs.toPoint((t.start+t.end)/2,t.median),this.scale,this.Ds.us.ft),this.chart.us.jn(Vo.wf),this.Bs=a,this.PM=new Bu(this.Ds,this.scale,this.oM,Yt,Yt,Yt,Yt,(t=>!1),this.Bs,0,0,0,0,0,0,0,this.qi).dispose(),this.ZM=new Ml((()=>{const t=this.Ds.Ug(this.scale);return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ge(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.$r();return s.Hg(i.start,i.end),s}))))),this.QM=new Ml((()=>{const t=this.XM.xt(this.Ds.Yp(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.De(s.fillStyle).Pe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.$r();return s.wl(i.vertices),this.XM.zt(s,i.figure),s})))),(()=>{this.XM.Vt()}),((t,i)=>{this.ys(i)}))}solveNearest(t,i){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY};if(0===this._M.length)return;const h=Nu(e,this._M.filter((t=>t.getVisible())),this.jM,us);if(!h)return;const r=At(h[0],this.Ds.us.ft,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],start:h[1].start,end:h[1].end,lowerExtreme:h[1].lowerExtreme,lowerQuartile:h[1].lowerQuartile,median:h[1].median,upperQuartile:h[1].upperQuartile,upperExtreme:h[1].upperExtreme,series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return ji({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,median:0,lowerQuartile:0,upperQuartile:0,lowerExtreme:0,upperExtreme:0,start:0,end:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}yM(t){if(!(t instanceof Ks||t instanceof qs))throw new Error("BoxSeries only supports Linear Axes")}TM(t){const i=this.QM.Mp(),s=this.ZM.Mp();t.forEach((t=>{if(!t.getVisible())return;const e=this.Bs.toPoint((t.start+t.end-t.aM*(t.end-t.start))/2,t.lowerQuartile),h=this.Bs.toPoint((t.end-t.start)*t.aM,t.upperQuartile-t.lowerQuartile),r=this.Bs.toPoint((t.start+t.end)/2,t.lowerQuartile),n=this.Bs.toPoint((t.start+t.end)/2,t.lowerExtreme),o=this.Bs.toPoint((t.start+t.end)/2,t.upperQuartile),a=this.Bs.toPoint((t.start+t.end)/2,t.upperExtreme),l=this.Bs.toPoint((t.start+t.end-t.lM*(t.end-t.start))/2,t.lowerExtreme),u=this.Bs.toPoint((t.start+t.end+t.lM*(t.end-t.start))/2,t.lowerExtreme),c=this.Bs.toPoint((t.start+t.end-t.lM*(t.end-t.start))/2,t.upperExtreme),d=this.Bs.toPoint((t.start+t.end+t.lM*(t.end-t.start))/2,t.upperExtreme),f=this.Bs.toPoint((t.start+t.end-t.aM*(t.end-t.start))/2,t.median),A=this.Bs.toPoint((t.start+t.end+t.aM*(t.end-t.start))/2,t.median);i.add({jo:t.jo,vertices:[{x:e.x,y:e.y},{x:e.x,y:e.y+h.y},{x:e.x+h.x,y:e.y+h.y},{x:e.x+h.x,y:e.y}],figure:t},{fillStyle:t.uM,strokeStyle:t.cM}),s.add({jo:0,start:r,end:n,figure:t},{strokeStyle:t.yu}),s.add({jo:0,start:o,end:a,figure:t},{strokeStyle:t.yu}),s.add({jo:0,start:l,end:u,figure:t},{strokeStyle:t.yu}),s.add({jo:0,start:c,end:d,figure:t},{strokeStyle:t.yu}),s.add({jo:0,start:f,end:A,figure:t},{strokeStyle:t.dM})})),i.finishPlot(),s.finishPlot()}add(t){const i=new Bu(this.Ds,this.scale,this.oM,this.sM,this.eM,this.hM,this.rM,this.kM,this.Bs,t.start,t.end,t.lowerExtreme,t.lowerQuartile,t.median,t.upperQuartile,t.upperExtreme,this.qi);return this.FM(i),this.CM=!0,this.chart.us.xs(),i}}class Wu extends Du{constructor(t,i,s,e,h,r,o,a,l,u){super(t,i,s,e,h,r,o,a,l),this.dimensions={x:0,y:0,radiusX:0,radiusY:0},this.qa=c(n(0,0),n(0,0)),this.Ds=t,this.scale=i,this.ke=Ii(l.ellipseSeriesFillStyle,u),this.Te=Ii(l.ellipseSeriesStrokeStyle,u)}getBoundaries(){return this.qa}setDimensions(t){return this.dimensions=t,this.qa=c(n(t.x-t.radiusX,t.y-t.radiusY),n(t.x+t.radiusX,t.y+t.radiusY)),this.sM(),this.Ds.xs(),this}getDimensions(){return this.dimensions}setFillStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.eM(),this}getFillStyle(){return this.ke}setStrokeStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.eM(),this}getStrokeStyle(){return this.Te}getDominantStyle(){return this.ke}}class Uu extends zu{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.ws="Ellipse Series",this.XM=Yi(),this.jM=t=>{const i=t.getDimensions(),s=n(i.x,i.y);return At(s,this.scale,this.Ds.us.ft)},this.chart.us.jn(Vo.wf),this.JM=c,this.PM=new Wu(this.Ds,this.scale,Yt,Yt,Yt,Yt,Yt,(t=>!1),this.qi,this.JM).dispose(),this.QM=new Ml((()=>{const t=this.XM.xt(this.Ds.Yp(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.De(s.fillStyle).Pe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.$r();return s.wl(i.vertices),this.XM.zt(s,i.figure),s})))),(()=>{this.XM.Vt()}),((t,i)=>{this.ys(i)}))}solveNearest(t,i){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY};if(0===this._M.length)return;const h=Nu(e,this._M.filter((t=>t.getVisible())),this.jM,us);if(!h)return;const r=At(h[0],this.Ds.us.ft,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],...h[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return ji({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,radiusX:0,radiusY:0,drawSteps:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}yM(t){if(!(t instanceof Ks||t instanceof qs))throw new Error("EllipseSeries only supports Linear Axes")}TM(t){const i=this.QM.Mp();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=[],h=void 0!==s.drawSteps?s.drawSteps:72;for(let t=0;t<=h;t+=1){const i=t/h*2*Math.PI,r=s.x+s.radiusX*Math.cos(i),n=s.y+s.radiusY*Math.sin(i);e.push({x:r,y:n})}const r=t.getFillStyle(),n=t.getStrokeStyle();i.add({jo:t.jo,vertices:e,figure:t},{fillStyle:r,strokeStyle:n})})),i.finishPlot()}add(t){const i=new Wu(this.Ds,this.scale,this.oM,this.sM,this.eM,this.hM,this.rM,this.kM,this.qi,this.JM).setDimensions(t);return this.FM(i),this.CM=!0,this.chart.us.xs(),i}}class Yu extends Du{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a),this.KM=[],this.qa=ts,this.Ds=t,this.scale=i,this.ke=Ii(a.polygonSeriesFillStyle,l),this.Te=Ii(a.polygonSeriesStrokeStyle,l)}getBoundaries(){return this.qa}setDimensions(t){return this.KM=t,this.qa=As(this.KM),this.sM(),this.Ds.xs(),this}getDimensions(){return this.KM}setFillStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.eM(),this}getFillStyle(){return this.ke}setStrokeStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.eM(),this}getStrokeStyle(){return this.Te}getDominantStyle(){return this.ke}}class Hu extends zu{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.ws="Polygon Series",this.XM=Yi(),this.jM=t=>{const i=t.getBoundaries(),s=n((i.min.x+i.max.x)/2,(i.min.y+i.max.y)/2);return At(s,this.scale,this.Ds.us.ft)},this.chart.us.jn(Vo.wf),this.JM=c,this.PM=new Yu(this.Ds,this.scale,Yt,Yt,Yt,Yt,Yt,(t=>!1),this.qi,this.JM).dispose(),this.QM=new Ml((()=>{const t=this.XM.xt(this.Ds.Yp(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.De(s.fillStyle).Pe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.$r();return s.wl(i.vertices),this.XM.zt(s,i.figure),s})))),(()=>{this.XM.Vt()}),((t,i)=>{this.ys(i)}))}solveNearest(t,i){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY};if(0===this._M.length)return;const h=Nu(e,this._M.filter((t=>t.getVisible())),this.jM,us);if(!h)return;const r=At(h[0],this.Ds.us.ft,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],coordinates:h[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return ji({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,coordinates:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}yM(t){}TM(t){const i=this.QM.Mp();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=t.getFillStyle(),h=t.getStrokeStyle();i.add({jo:t.jo,vertices:s,figure:t},{fillStyle:e,strokeStyle:h})})),i.finishPlot()}add(t){const i=new Yu(this.Ds,this.scale,this.oM,this.sM,this.eM,this.hM,this.rM,this.kM,this.qi,this.JM).setDimensions(t);return this.FM(i),this.CM=!0,this.chart.us.xs(),i}}class $u extends Du{constructor(t,i,s,e,h,r,o,a,l,u){super(t,i,s,e,h,r,o,a,l),this.qM={x:0,y:0,width:0,height:0},this.t_={x1:0,y1:0,x2:0,y2:0},this.qa=c(n(0,0),n(0,0)),this.ke=Ii(l.rectangleSeriesFillStyle,u),this.Ds=t,this.scale=i,this.Te=Ii(l.rectangleSeriesStrokeStyle,u)}getBoundaries(){return this.qa}setDimensions(t){return"x"in t?(this.qM=t,this.t_={x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}):(this.t_=t,this.qM={x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}),this.qa=As([this.qM,n(this.qM.x+this.qM.width,this.qM.y+this.qM.height)]),this.sM(),this.Ds.xs(),this}getDimensionsPositionAndSize(){return this.qM}getDimensionsTwoPoints(){return this.t_}setFillStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.eM(),this}getFillStyle(){return this.ke}setStrokeStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.eM(),this}getStrokeStyle(){return this.Te}getDominantStyle(){return this.ke}}class Xu extends zu{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.ws="Rectangle Series",this.XM=Yi(),this.jM=t=>{const i=t.getDimensionsPositionAndSize(),s=n(i.x+i.width/2,i.y+i.height/2);return At(s,this.scale,this.Ds.us.ft)},this.chart.us.jn(Vo.wf),this.JM=c,this.PM=new $u(this.Ds,this.scale,Yt,Yt,Yt,Yt,Yt,(t=>!1),this.qi,this.JM).dispose(),this.QM=new Ml((()=>{const t=this.XM.xt(this.Ds.Yp(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.De(s.fillStyle).Pe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.$r();return s.wl(i.vertices),this.XM.zt(s,i.figure),s})))),(()=>{this.XM.Vt()}),((t,i)=>{this.ys(i)}))}solveNearest(t,i){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY};if(0===this._M.length)return;const h=Nu(e,this._M.filter((t=>t.getVisible())),this.jM,us);if(!h)return;const r=At(h[0],this.Ds.us.ft,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],...h[1].getDimensionsPositionAndSize(),...h[1].getDimensionsTwoPoints(),series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return ji({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,x1:0,y1:0,x2:0,y2:0,width:0,height:0,multiHit:0,figure:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}yM(t){}TM(t){const i=this.QM.Mp();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensionsTwoPoints(),e=[{x:s.x1,y:s.y1},{x:s.x1,y:s.y2},{x:s.x2,y:s.y2},{x:s.x2,y:s.y1}],h=t.getFillStyle(),r=t.getStrokeStyle();i.add({jo:t.jo,vertices:e,figure:t},{fillStyle:h,strokeStyle:r})})),i.finishPlot()}add(t){const i=new $u(this.Ds,this.scale,this.oM,this.sM,this.eM,this.hM,this.rM,this.kM,this.qi,this.JM).setDimensions(t);return this.FM(i),this.CM=!0,this.chart.us.xs(),i}}class ju extends Du{constructor(t,i,s,e,h,r,o,a,l,u){super(t,i,s,e,h,r,o,a,l),this.dimensions={startX:0,startY:0,endX:0,endY:0},this.qa=c(n(0,0),n(0,0)),this.qi=l,this.Ds=t,this.scale=i,this.Te=Ii(l.segmentSeriesStrokeStyle,u)}getBoundaries(){return this.qa}setDimensions(t){return this.dimensions=t,this.qa=c(n(Math.min(t.startX,t.endX),Math.min(t.startY,t.endY)),n(Math.max(t.startX,t.endX),Math.max(t.startY,t.endY))),this.sM(),this.Ds.xs(),this}getDimensions(){return this.dimensions}setStrokeStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.eM(),this}getStrokeStyle(){return this.Te}getDominantStyle(){const t=this.Te;return t!==at?t.getFillStyle():O}}class Zu extends zu{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.ws="Segment Series",this.i_=Yi(),this.jM=t=>{const i=t.getDimensions(),s=n((i.startX+i.endX)/2,(i.startY+i.endY)/2);return At(s,this.scale,this.Ds.us.ft)},this.chart.us.jn(Vo.wf),this.JM=c,this.PM=new ju(this.Ds,this.scale,Yt,Yt,Yt,Yt,Yt,(t=>!1),this.qi,this.JM).dispose(),this.ZM=new Ml((()=>{const t=this.i_.xt(this.Ds.Ug(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ge(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.$r();return s.Hg(i.start,i.end),this.i_.zt(s,i.figure),s})))),(()=>{this.i_.Vt()}),((t,i)=>{this.ys(i)}))}solveNearest(t,i){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY};if(0===this._M.length)return;const h=Nu(e,this._M.filter((t=>t.getVisible())),this.jM,us);if(!h)return;const r=At(h[0],this.Ds.us.ft,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],...h[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return ji({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,startX:0,startY:0,endX:0,endY:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}yM(t){}TM(t){const i=this.ZM.Mp();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e={x:s.startX,y:s.startY},h={x:s.endX,y:s.endY},r=t.getStrokeStyle();i.add({jo:t.jo,start:e,end:h,figure:t},{strokeStyle:r})})),i.finishPlot()}add(t){const i=new ju(this.Ds,this.scale,this.oM,this.sM,this.eM,this.hM,this.rM,this.kM,this.qi,this.JM).setDimensions(t);return this.FM(i),this.CM=!0,this.chart.us.xs(),i}}class Qu extends Lu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.ws="Heatmap Grid Series",this.SS={},this.chart.us.jn(Vo._f),this.s_=a,this.qi=l;const d=c;this.ke=Ii(l.heatmapGridSeriesFillStyle,d),this.bS=Ii(this.qi.heatmapGridSeriesWireframeStyle,d);const f={heatmapDataType:"intensity",dataOrder:a.dataOrder||"columns",columns:a.columns,rows:a.rows};this.Jn=f,this.e_=this.Ds.h_(this.scale,[],f).De(this.ke).xS(this.bS).cs(this.getHighlight()),this.fs(this.e_),this.setHighlightOnHover(!1)}solveNearest(t,i="show-nearest"){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=At(e,this.Ds.us.ft,this.scale),r=Ea(i)?this.e_.$x(h):this.e_.Kc(h);if(r)return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:r.x,y:r.y,column:r.column,row:r.row,intensity:r.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:Z(this.ke)?this.ke.lut:void 0}}Ji(t,i){return ji({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,intensity:0,column:0,row:0,lut:Z(this.ke)?this.ke.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}_S(){const t=this.SS.start||{x:0,y:0};let i;i=this.SS.end?{x:(this.SS.end.x-t.x)/this.Jn.columns,y:(this.SS.end.y-t.y)/this.Jn.rows}:this.SS.step?this.SS.step:{x:1,y:1},this.e_.wS(t,i),this.chart.us.xs()}setStart(t){return this.SS.start=t,this._S(),this}getStart(){return this.e_.CS().start}setStep(t){return this.SS.step=t,this._S(),this}getStep(){return this.e_.CS().step}setEnd(t){return this.SS.end=t,this._S(),this}getEnd(){return this.e_.CS().end}clear(){return this.e_.Vt(),this.Ds.xs(),this.L.emit("dataClear",this),this}setWireframeStyle(t){return this.bS="function"==typeof t?t(this.bS):t,this.e_.xS(this.bS),this.Ds.xs(),this.L.emit("styleChange",this),this}getWireframeStyle(){return this.bS}setIntensityInterpolation(t){return t=t||"disabled",this.e_.TS(t),this.Ds.xs(),this.L.emit("styleChange",this),this}getIntensityInterpolation(){return this.e_.FS()}nv(){return this.lv&&this.getVisible()}jd(){return ki(this.ke)}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke})}r_(t){this.e_.r_().forEach((i=>{t.e_.IS(i)}))}$M(t){return this.L.off(t)}HM(t){return this.L.on("dataClear",t)}n_(t){return this.L.on("styleChange",t)}o_(t){return this.L.off(t)}getXMax(){const t=this.e_;return t?t.vt():void 0}getXMin(){const t=this.e_;return t?t.yt():void 0}getYMax(){const t=this.e_;return t?t.bt():void 0}getYMin(){const t=this.e_;return t?t.St():void 0}Pr(){const t=n(0,0);return t.x=Math.max(t.x,this.e_.kl()),t.y=Math.max(t.y,this.e_.Tl()),t}yM(t){if(!(t instanceof Ks))throw new Error("HeatmapGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof Ks&&t.Mi())throw new Error("HeatmapGridSeries can not be attached to a high precision Axis.")}Ee(t,i){t.cs(i),this.Ds.xs()}Le(){return super.Le(),this.e_.qo(this.getBoundaries()),this}}class Ju extends Qu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u,c),this.Mv=!1}invalidateIntensityValues(t){if(this.Mv&&this.chart.us.jn(Vo.kf),Array.isArray(t)){if(0===t.length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Jn.dataOrder?t.length:t[0].length,rows:"rows"===this.Jn.dataOrder?t.length:t[0].length},s="columns"===this.Jn.dataOrder?this.Jn.columns:this.Jn.rows,e="columns"===this.Jn.dataOrder?this.Jn.rows:this.Jn.columns;if(i.x>s||i.y>e){if(!0===this.chart.vA.qn){const t=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Jn.columns}x${this.Jn.rows}, input ${i.columns}x${i.rows}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Ot.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.e_.IS({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Jn.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Jn.dataOrder?t.values.length:t.values[0].length},s="columns"===this.Jn.dataOrder?t.iColumn:t.iRow,e=s+i.primary-1,h="columns"===this.Jn.dataOrder?t.iRow:t.iColumn,r=h+i.secondary-1,n=("columns"===this.Jn.dataOrder?this.Jn.columns:this.Jn.rows)-1,o=("columns"===this.Jn.dataOrder?this.Jn.rows:this.Jn.columns)-1;if(s<0||h<0){if(!0===this.chart.vA.qn){const i=`HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niColumn: ${t.iColumn}, iRow: ${t.iRow}.\nNo intensity values will be invalidated.`;Ot.console.warn(i)}return this}if(e>n||r>o){if(!0===this.chart.vA.qn){const s=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Jn.columns}x${this.Jn.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Ot.console.warn(s)}const s=Math.max(e-n,0),h=i.primary-s,a=Math.max(r-o,0),l=[];for(let i=0;i<h;i+=1)l[i]=t.values[i].slice(0,a>0?-a:void 0);t={iColumn:t.iColumn,iRow:t.iRow,values:l}}this.e_.IS({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.L.emit("invalidateIntensity",this,t),this.Ds.xs(),this.Mv=!0,this}setFillStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.e_.De(this.ke),this.L.emit("styleChange",this),this.Ds.xs(),this}getFillStyle(){return this.ke}a_(t){return this.L.on("invalidateIntensity",t)}l_(t){return this.L.off(t)}}class Ku extends Lu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.ws="Scrolling Heatmap Grid Series",this.SS={},this.chart.us.jn(Vo._f),this.chart.us.jn(Vo.kf);const d=c;this.ke=Ii(l.heatmapScrollingGridSeriesFillStyle,d),this.bS=Ii(this.qi.heatmapScrollingGridSeriesWireframeStyle,d);const f={scrollDimension:"columns",heatmapDataType:"intensity",...a};this.Jn=f,this.u_=this.Ds.c_(this.scale,[],f).De(this.ke).xS(this.bS).cs(this.getHighlight()),this.fs(this.u_),this.setHighlightOnHover(!1)}solveNearest(t,i="show-nearest"){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=At(e,this.Ds.us.ft,this.scale),r=Ea(i)?this.u_.$x(h):this.u_.Kc(h);if(r)return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:r.x,y:r.y,column:r.column,row:r.row,intensity:r.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:Z(this.ke)?this.ke.lut:void 0}}Ji(t,i){return ji({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,intensity:0,multiHit:0,column:0,row:0,lut:Z(this.ke)?this.ke.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}_S(){const t=this.SS.start||{x:0,y:0};let i;i=this.SS.step?this.SS.step:{x:1,y:1},this.u_.wS(t,i),this.chart.us.xs()}setStart(t){return this.SS.start=t,this._S(),this}getStart(){return this.u_.CS().start}setStep(t){return this.SS.step=t,this._S(),this}getStep(){return this.u_.CS().step}clear(){return this.u_.Vt(),this.Ds.xs(),this}setWireframeStyle(t){return this.bS="function"==typeof t?t(this.bS):t,this.u_.xS(this.bS),this.Ds.xs(),this}getWireframeStyle(){return this.bS}setPixelInterpolationMode(t){return t=t||"disabled",this.u_.TS(t),this.Ds.xs(),this}getPixelInterpolationMode(){return this.u_.FS()}setDataCleaning(t){return this.u_.wu(t),this.Ds.xs(),this}nv(){return this.lv&&this.getVisible()}jd(){return ki(this.ke)}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke})}De(t){return this.ke="function"==typeof t?t(this.ke):t,this.u_.De(this.ke),this.Ds.xs(),this}yM(t){if(!(t instanceof Ks))throw new Error("HeatmapScrollingGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof Ks&&t.Mi())throw new Error("HeatmapScrollingGridSeries can not be attached to a high precision Axis.")}getXMax(){return this.u_.vt()||0}getXMin(){return this.u_.yt()||0}getYMax(){return this.u_.bt()||0}getYMin(){return this.u_.St()||0}Pr(){const t=n(0,0);return t.x=Math.max(t.x,this.u_.kl()),t.y=Math.max(t.y,this.u_.Tl()),t}Ee(t,i){t.cs(i),this.Ds.xs()}}class qu extends Ku{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u,c)}addIntensityValues(t){if(0===t.length||0===t[0].length)return this;const i=t.length,s=t[0].length,e=("columns"===this.Jn.scrollDimension?t.length:t[0].length,"rows"===this.Jn.scrollDimension?t.length:t[0].length,0+s-1),h=this.Jn.resolution-1;if(e>h){if(!0===this.chart.vA.qn){const t=`HeatmapScrollingGridSeries.addIntensityValues intensity matrix overflow.\nGrid resolution: ${this.Jn.resolution}, input ${i}x${s}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Ot.console.warn(t)}const e=[];for(let s=0;s<i;s+=1)e[s]=t[s].slice(0,h+1);t=e}return this.u_.RS(t),this.Ds.xs(),this}invalidateIntensityValues(t){return this.u_.IS(t.iSample,t.values),this.Ds.xs(),this}getSampleCount(){return this.u_.d_()}setFillStyle(t){return this.De(t),this}getFillStyle(){return this.ke}}const tc=(t,i,s)=>{let e,h,r=Number.MAX_VALUE;for(let n=0;n<i.length;n+=1){const o=i[n],a=s(o,t);if(a){const i=us(t,a[0]),s=us(t,a[1]);(void 0===e||i<r||s<r)&&(e=a,h=o,i<r?r=i:s<r&&(r=s))}}return e&&h?[e,h]:void 0};class ic extends Lu{constructor(){super(...arguments),this.BM=[],this.Mu=[],this.f_=[],this.A_=[],this.NM=1e3,this.LM=0,this.$i=ue.onHover,this.Pl={type:"disabled",packager:(t,i,s)=>t.slice()},this.g_=[],this.y_=[],this.m_=!1,this.p_=(t,i)=>{const s=t.Jx(i);if(s)return[At(s[0],this.scale,this.Ds.us.ft),At(s[1],this.scale,this.Ds.us.ft)]},this.v_=(t,i)=>{const s=t.S_(i);if(s)return[At(s[0],this.scale,this.Ds.us.ft),At(s[1],this.scale,this.Ds.us.ft)]},this.jd=()=>ki(this.b_)||ki(this.x_),this.M_=t=>{const i=t.length;if(this.BM.length>0){const s=this.BM.length-1,e=this.BM[s];if(i>0){const[i,s]=e.ol(),[h,r]=e.nl();if((h?i.length+h.length:i.length)>=this.NM){const o=h&&h.length>0?h[h.length-1]:i[i.length-1],l=r&&r.length>0?r[r.length-1]:s[i.length-1],u=(o.x+t[0].position)/2,d=Ps(u,o,n(t[0].position,t[0].high)).y,f=Ps(u,l,n(t[0].position,t[0].low)).y,A=a(u,d,f);e.fl(A,c(n(u,f),n(u,d))).Yl(!0),this.__([A].concat(t)).Wl(!0)}else e.fl(t)}}else i>0&&this.__(t)},this.w_=t=>{const i=this.g_,s=t.length;if(this.g_.length>0){if(s>0){const s=i[i.length-1],e=s.ol(),h=s.nl();if(e.length+h.length>=this.NM){const r=h.length>0?h[h.length-1]:e[e.length-1],o=(r.x+t[0].x)/2,a=Ps(o,r,n(t[0].x,t[0].y)).y,l=n(o,a);s.fl(l,c(n(o,a),n(o,a))).Yl(!0),i.push(this.C_([l].concat(t),this.VM).Wl(!0))}else s.fl(t)}}else s>0&&i.push(this.C_(t))},this.k_=t=>{const i=this.y_,s=t.length;if(this.y_.length>0){if(s>0){const s=i[i.length-1],e=s.ol(),h=s.nl();if(e.length+h.length>=this.NM){const r=h.length>0?h[h.length-1]:e[e.length-1],o=(r.x+t[0].x)/2,a=Ps(o,r,n(t[0].x,t[0].y)).y,l=n(o,a);s.fl(l,c(n(o,a),n(o,a))).Yl(!0),i.push(this.T_([l].concat(t)).Wl(!0))}else s.fl(t)}}else s>0&&i.push(this.T_(t))}}ds(){return"ProgressiveX"}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.LM=void 0!==i&&i>0?i:0,this.Ds.xs(),this}clear(){for(let t=0;t<this.BM.length;t+=1)this.BM[t].dispose();for(let t=0;t<this.g_.length;t+=1)this.g_[t].dispose();for(let t=0;t<this.y_.length;t+=1)this.y_[t].dispose();return this.Mu.length=0,this.f_.length=0,this.A_.length=0,this.VM=void 0,this.BM.length=0,this.g_.length=0,this.y_.length=0,this.Ds.xs(),this.L.emit("dataClear",this),this}getPointAmount(){return this.BM.reduce(((t,i)=>t+i.Al()+i.yl()),this.Mu.length)}getXMax(){return ei(this.BM,Qt,Math.max,ti,this.VM)||0}getXMin(){return ei(this.BM,Zt,Math.min,qt,this.VM)||0}getYMax(){return ei(this.BM,Kt,Math.max,si,this.VM)||0}getYMin(){return ei(this.BM,Jt,Math.min,ii,this.VM)||0}Pr(){const t=n(0,0);for(const i of this.BM)t.x=Math.max(t.x,i.kl()),t.y=Math.max(t.y,i.Tl());return t}nv(){return this.lv&&this.getPointAmount()>0&&this.getVisible()}yM(t){}EM(t,i,s){this.Mu=xi(this.Mu,t,{canReturnB:!1}),this.f_=xi(this.f_,i,{canReturnB:!1}),this.A_=xi(this.A_,s,{canReturnB:!1}),this.Ds.xs()}F_(t,i,s,e){this.I_(i,s,e),this.EM(Array.isArray(t)?t:[t],i,s)}I_(t,i,s){const e=ys(As(t),As(i));this.VM?this.VM=ys(this.VM,e):this.VM=e,s&&(this.VM=ys(this.VM,s))}P_(){const t=this.BM.length,i=Math.min(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd());let s=0;if(t>1)for(let e=0;e<t-1;e+=1)this.scale.x.gi(this.BM[e].vt(),this.BM[e].kl())<i&&(s+=1);return s}OM(t,i,s,e){if(s>0){const h=Math.ceil(s/i),r=t.length-h;if(r>0&&e>0){const i=r-e>0?e:r;if(i>0){for(let s=0;s<i;s+=1)t[s].dispose();t.splice(0,i)}}}}D_(t){const i=this.BM.length>0?this.BM[this.BM.length-1]:void 0,s=i?i.ol()[0].length+(i.nl()[0]?i.nl()[0].length:0):void 0;Ru(t,s,this.NM,this.M_)}B_(t){const i=this.g_.length>0?this.g_[this.g_.length-1].ol().length+this.g_[this.g_.length-1].nl().length:void 0;Ru(t,i,this.NM,this.w_)}L_(t,i){const s=this.g_.length>0?this.g_[this.g_.length-1].ol().length+this.g_[this.g_.length-1].nl().length:void 0;Ru(t,s,this.NM,this.w_),Ru(i,s,this.NM,this.k_)}__(t,i){const s=this.Ds.R_(this.scale).fl(t,i).De(this.b_).Nl(this.x_).Vl(this.Pl).cs(this.getHighlight());return this.BM.push(s),this.fs(s),s}E_(t,i,s){const e=this.Ds.op(this.scale,void 0,[gl.UserSeries]).fl(t,s).setMouseInteractions(!1).Ge(i).cs(this.getHighlight());return this.fs(e),e}C_(t,i){return this.E_(t,this.z_,i)}T_(t,i){return this.E_(t,this.V_,i)}O_(t){this.b_="function"==typeof t?t(this.b_):t;const i=this.b_;for(let t=0;t<this.BM.length;t+=1)this.BM[t].De(i);this.Ds.xs()}N_(t){this.x_="function"==typeof t?t(this.x_):t;const i=this.x_;for(let t=0;t<this.BM.length;t+=1)this.BM[t].Nl(i);this.Ds.xs()}G_(){return this.b_}Gl(){return this.x_}W_(t){this.z_="function"==typeof t?t(this.z_):t;const i=this.z_;for(let t=0;t<this.g_.length;t+=1)this.g_[t].Ge(i);this.Ds.xs()}U_(t){this.V_="function"==typeof t?t(this.V_):t;const i=this.V_;for(let t=0;t<this.y_.length;t+=1)this.y_[t].Ge(i);this.Ds.xs()}Y_(){return this.z_}H_(){return this.V_}Ee(t,i){t.cs(i),this.X_(i),this.Ds.xs()}X_(t){for(let i=0;i<this.g_.length;i+=1)this.g_[i].cs(t);for(let i=0;i<this.y_.length;i+=1)this.y_[i].cs(t)}pv(){if(super.pv(),this.m_=!1,this.LM>0){const t=this.P_();this.OM(this.BM,this.NM,this.LM,t),this.g_.length>0&&this.OM(this.g_,this.NM,this.LM,t),this.y_.length>0&&this.OM(this.y_,this.NM,this.LM,t),this.m_=!0}}Le(){if(super.Le(),this.Mu.length>0&&(this.D_(this.Mu),this.j_(this.f_,this.A_),this.m_=!0),this.m_){const t=this.getBoundaries();for(const i of this.BM)i.qo(t);for(const i of this.g_)i.qo(t);for(const i of this.y_)i.qo(t)}}xp(){super.xp(),this.VM=void 0,this.Mu.length=0,this.f_.length=0,this.A_.length=0}}class sc extends ic{constructor(t,i,s,e,h,r,n,o,a=0,l,u){super(t,i,s,e,h,r,n,o,l,u),this.chart.us.jn(Vo.Mf),this.Z_=a}add(t){0!==this.BM.length&&this.chart.us.jn(Vo.kf);const i=Array.isArray(t)?t:[t];if(i.length>0){const t=this.Q_(i),[s,e]=this.J_(t);this.F_(t,s,e,c(n(Ki,this.Z_),n(qi,this.Z_)));const h=this.Mu[this.Mu.length-1];this.zM=h?{position:h.position,high:h.high,low:h.low}:void 0,this.L.emit("dataAdd",this,i,this.VM)}return this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.zM?this.zM.position+i:0),this.add(Vu(t,i,e)),this}UM(t){return this.L.on("dataAdd",t)}YM(t){return this.L.off(t)}HM(t){return this.L.on("dataClear",t)}$M(t){return this.L.off(t)}}class ec extends sc{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l,u);const c=t.getSeries().length;this.b_=Ii(this.qi.areaSeriesBipolarHighFillStyle,c),this.z_=Ii(this.qi.areaSeriesBipolarHighStrokeStyle,c),this.x_=Ii(this.qi.areaSeriesBipolarLowFillStyle,c),this.V_=Ii(this.qi.areaSeriesBipolarLowStrokeStyle,c)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=tc(e,this.BM,Ea(i)?this.v_:this.p_);if(void 0!==h&&void 0!==h[0]){const t=At(h[0][0],this.Ds.us.ft,this.scale),i=At(h[0][1],this.Ds.us.ft,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY,multiHit:[t,i]}}}Q_(t){return this.K_(t)}j_(t,i){return this.L_(t,i)}K_(t){let i=0;const s=[],e=t.length,h=this.Z_;return e>0&&(this.q_&&(this.q_.y<=h&&h<=t[0].y||this.q_.y>=h&&h>=t[0].y)&&(s[i]=a(.5*(this.q_.x+t[0].x),h,h),i+=1),this.q_=t[e-1],1===e?this.tw(t[0],s,i):this.iw(t,s)),s}tw(t,i,s=0){return i[s]=a(t.x,t.y,this.Z_),s+1}iw(t,i){let s=0,e=0;const h=t.length-1,r=this.Z_;for(;e<h;){const h=t[e],n=t[e+=1],o=a(h.x,h.y,r);if(0!==s&&hi(i[s-1],o)||(i[s]=o,s+=1),h.y<=r&&r<=n.y||h.y>=r&&r>=n.y){const t=h.y,e=n.y,o=r,l=t===e?n.x:un(h.x,n.x,(o-t)/(e-t));i[s]=a(l,r,r),s+=1}i[s]=a(n.x,n.y,r),s+=1}return s}J_(t){const i=t.length,s=Array(i),e=Array(i),h=this.Z_;for(let r=0;r<i;r+=1){const i=t[r];i.high>h?(s[r]=n(i.position,i.high),e[r]=n(i.position,h)):i.high<h?(s[r]=n(i.position,h),e[r]=n(i.position,i.high)):(s[r]=n(i.position,i.high),e[r]=n(i.position,i.high))}return[s,e]}WM(){return Eu(this.BM,(t=>t[0]))}setPositiveFillStyle(t){return this.O_(t),this}setNegativeFillStyle(t){return this.N_(t),this}setPositiveStrokeStyle(t){return this.W_(t),this}setNegativeStrokeStyle(t){return this.U_(t),this}getPositiveFillStyle(){return this.G_()}getNegativeFillStyle(){return this.Gl()}getPositiveStrokeStyle(){return this.Y_()}getNegativeStrokeStyle(){return this.H_()}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.b_,fill2:this.x_,behavior:{colorStep:!0}})}}class hc extends sc{constructor(){super(...arguments),this.V_=at}j_(t){return this.B_(t)}J_(t){const i=t.length,s=Array(i);for(let e=0;e<i;e+=1){const i=t[e];s[e]=n(i.position,i.high)}return[s,[]]}setStrokeStyle(t){return this.W_(t),this}getStrokeStyle(){return this.Y_()}}class rc extends hc{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l,u);const c=t.getSeries().length;this.b_=O,this.x_=Ii(this.qi.areaSeriesNegativeFillStyle,c),this.z_=Ii(this.qi.areaSeriesNegativeStrokeStyle,c)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=tc(e,this.BM,Ea(i)?this.v_:this.p_);if(void 0!==h&&void 0!==h[0]){const t=At(h[0][0],this.Ds.us.ft,this.scale),i=At(h[0][1],this.Ds.us.ft,this.scale),s=t.y<i.y?t:i;return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.axisX,y:this.axisY}},...s,series:this,axisX:this.axisX,axisY:this.axisY}}}Q_(t){return this.sw(t)}sw(t){const i=[];return 1===t.length?this.tw(t[0],i):this.iw(t,i),i}tw(t,i,s=0){const e=this.Z_;return i[s]=t.y>e?a(t.x,e,e):a(t.x,t.y,e),s+1}iw(t,i,s=0){let e=0;const h=t.length-1,r=this.Z_;for(;e<h;){const h=t[e],o=t[e+=1];if(h.y<=r){const t=a(h.x,h.y,r);if(0!==s&&hi(i[s-1],t)||(i[s]=t,s+=1),o.y>r){const t=Es(n(qi,r),n(Ki,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,r,r),s+=1}else i[s]=a(o.x,o.y,r),s+=1}else{const t=a(h.x,r,r);if(0!==s&&hi(i[s-1],t)||(i[s]=t,s+=1),o.y<=r){const t=Es(n(qi,r),n(Ki,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,o.y,r),s+=1}else i[s]=a(o.x,r,r),s+=1}}return s}WM(){return Eu(this.BM,(t=>t[1]))}setFillStyle(t){return this.N_(t),this}getFillStyle(){return this.Gl()}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.x_,stroke:this.z_})}}class nc extends hc{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u);const d=c;this.b_=Ii(this.qi.areaSeriesPositiveFillStyle,d),this.x_=O,this.z_=Ii(this.qi.areaSeriesPositiveStrokeStyle,d)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=tc(e,this.BM,Ea(i)?this.v_:this.p_);if(void 0!==h&&void 0!==h[0]){const t=At(h[0][0],this.Ds.us.ft,this.scale),i=At(h[0][1],this.Ds.us.ft,this.scale),s=t.y<i.y?i:t;return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.axisX,y:this.axisY}},...s,series:this,axisX:this.axisX,axisY:this.axisY}}}Q_(t){return this.ew(t)}ew(t){const i=[];return 1===t.length?this.tw(t[0],i):this.iw(t,i),i}tw(t,i,s=0){const e=this.Z_;return i[s]=t.y<e?a(t.x,e,e):a(t.x,t.y,e),s+1}iw(t,i,s=0){let e=0;const h=t.length-1,r=this.Z_;for(;e<h;){const h=t[e],o=t[e+=1];if(h.y>=r){const t=a(h.x,h.y,r);if(0!==s&&hi(i[s-1],t)||(i[s]=t,s+=1),o.y<r){const t=Es(n(qi,r),n(Ki,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,r,r),s+=1}else i[s]=a(o.x,o.y,r),s+=1}else{const t=a(h.x,r,r);if(0!==s&&hi(i[s-1],t)||(i[s]=t,s+=1),o.y>=r){const t=Es(n(qi,r),n(Ki,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,o.y,r),s+=1}else i[s]=a(o.x,r,r),s+=1}}return s}WM(){return Eu(this.BM,(t=>t[0]||[]))}setFillStyle(t){return this.O_(t),this}getFillStyle(){return this.G_()}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.b_,stroke:this.z_})}}const oc={Positive:nc,Negative:rc,Bipolar:ec};class ac extends ic{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l),this.chart.us.jn(Vo.Mf);const c=u;this.b_=Ii(this.qi.areaRangeSeriesFillStyle,c),this.z_=Ii(this.qi.areaRangeSeriesStrokeStyle,c),this.x_=Ii(this.qi.areaRangeSeriesFillStyleInverted,c),this.V_=Ii(this.qi.areaRangeSeriesStrokeStyleInverted,c)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=tc(e,this.BM,Ea(i)?this.v_:this.p_);if(void 0!==h&&void 0!==h[0]){const t=At(h[0][0],this.Ds.us.ft,this.scale),i=At(h[0][1],this.Ds.us.ft,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY,multiHit:[t,i]}}}add(t){const i=Array.isArray(t)?t:[t],[s,e]=u(i);this.F_(t,s,e);const h=this.Mu[this.Mu.length-1];return this.zM=h?{position:h.position,high:h.high,low:h.low}:void 0,this.L.emit("dataAdd",this,i,this.VM),this}addArraysHighLow(t,i,s=1,e=0){if(t.length!==i.length)throw new Error("arrayHigh and arrayLow lengths are not equal");{let h=e;h||(h=this.zM?this.zM.position+s:0),this.add(((t,i,s=1,e)=>{const h=void 0!==e?e:0,r=new Array(t.length);for(let e=0;e<t.length;e+=1)r[e]={position:h+s*e,high:t[e],low:i[e]};return r})(t,i,s,h))}return this}j_(t,i){this.L_(t,i)}setHighFillStyle(t){return this.O_(t),this}setLowFillStyle(t){return this.N_(t),this}setHighStrokeStyle(t){return this.W_(t),this}setLowStrokeStyle(t){return this.U_(t),this}getHighFillStyle(){return this.G_()}getLowFillStyle(){return this.Gl()}getHighStrokeStyle(){return this.Y_()}getLowStrokeStyle(){return this.H_()}WM(){return Eu(this.BM,(t=>{const i=t[0],s=t[1];if(!i||!s)return[];const e=[],h=i.length;for(let t=0;t<h;t+=1)e[t]={position:i[t].x,high:i[t].y,low:s[t].y};return e}))}UM(t){return this.L.on("dataAdd",t)}YM(t){return this.L.off(t)}HM(t){return this.L.on("dataClear",t)}$M(t){return this.L.off(t)}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.b_,fill2:this.x_,behavior:{colorStep:!0}})}}var lc;!function(t){t[t.before=0]="before",t[t.middle=.5]="middle",t[t.after=1]="after"}(lc||(lc={}));const uc=(t,i)=>{const s=[],e=t.length,h=i;if(e>0){let i=0,r=t[0];s[i]=r,i+=1;for(let o=1;o<e;o+=1){const e=t[o];if(h<=0)s[i]=n(r.x,e.y),i+=1;else{const t=r.x*(1-h)+e.x*h;s[i]=n(t,r.y),i+=1,s[i]=n(t,e.y),i+=1}s[i]=e,i+=1,r=e}}return s},cc=(t,i)=>{const s=t*t,e=s*t,h=1-t,r=h*h,o=r*h;return n(o*i[0].x+3*t*r*i[1].x+3*s*h*i[2].x+e*i[3].x,o*i[0].y+3*t*r*i[1].y+3*s*h*i[2].y+e*i[3].y)},dc=(t,i=32)=>{if(2===t.length)return[t[0],t[1]];const s=(t=>{const i=1e-5,s=t.length-1,e=Array(s);if(s>1){let h=n(0,0),r=n(0,0),o=n(0,0),a=bs(Cs(t[1],t[0]));const l=3;let u=0,c=0;for(let d=0;d<s;d+=1){const f=Array(4);if(f[0]=t[d],f[1]=t[d],f[3]=t[d+1],f[2]=t[d+1],o=a,h=r,d+1<s?(a=t[d+2]===t[d+1]?n(0,0):bs(Cs(t[d+2],t[d+1])),r=bs(ws(o,a))):r=n(0,0),t[d+1].y===t[d].y)u=0,c=0;else{const s=t[d+1].x-t[d].x;u=Math.abs(h.x)>i?Math.abs(s/(l*h.x)):1,c=Math.abs(r.x)>i?Math.abs(s/(l*r.x)):1}f[1]=ws(_s(h,u),f[1]),f[2]=Cs(f[2],_s(r,c)),e[d]=f}}return e.length>0?e:[]})(t),e=s.length,h=Array(e*i);let r=0;for(let t=0;t<e;t+=1)for(let e=0;e<=i;e+=1)h[r]=cc(e/i,s[t]),r+=1;return h};class fc extends Ou{constructor(t,i,s,e,h,r,o,a,l,u,d,f,A,g,y){super(t,i,s,e,h,r,o,a,l,d,f),this.BM=[],this.NM=1e5,this.qx=5,this.Ma=0,this.Qa=!1,this.Ja=!1,this.Ka=!1,this.hw=1,this.rw=[],this.nw=(t,i)=>{const s=t.Kc(i);if(s)return At(s,this.scale,this.Ds.us.ft)},this.ow=(t,i)=>{const s=t.S_(i);if(s)return At(s,this.scale,this.Ds.us.ft)},this.aw=t=>{if(this.BM.length>0){const i=this.BM[this.BM.length-1];if(t.length>0){const s=i.ol(),e=i.nl(),h=s.length+e.length-+i.Ul();if(h>=this.NM){const r=e.length>0?e[e.length-1]:s[i.Ul()?h:h-1],o=n((r.x+t[0].x)/2,(r.y+t[0].y)/2);i.fl(o,c(n(o.x,o.y),n(o.x,o.y))).Yl(!0),this.lw([o].concat(t)).Wl(!0)}else i.fl(t,this.VM)}}else t.length>0&&this.lw(t)},this.uw=t=>{if(this.rw.length>0){const i=this.rw[this.rw.length-1];t.length>0&&((i.ol().length+i.nl().length)*this.hw>=this.NM?this.cw(t):i.fl(t))}else t.length>0&&this.cw(t)},this.Jn=y,this.tM=u,this.dw=A,this.fw=Ii(d.pointLineSeriesFillStyle,g),this.yu=Ii(this.qi.pointLineSeriesStrokeStyle,g)}add(t){return super.add(t),this}WM(){return Eu(this.rw)}setStrokeStyle(t){this.yu="function"==typeof t?t(this.yu):t;const i=this.yu;for(let t=0;t<this.BM.length;t+=1)this.BM[t].Ge(i);return this.Ds.xs(),this}getStrokeStyle(){return this.yu}setPointFillStyle(t){this.fw="function"==typeof t?t(this.fw):t;const i=this.fw;for(let t=0;t<this.rw.length;t+=1)this.rw[t].De(i);return this.Ds.xs(),this}getPointFillStyle(){return this.fw}setPointSize(t){this.qx=t;for(let i=0;i<this.rw.length;i+=1)this.rw[i].tt(t);return this.Ds.xs(),this}getPointSize(){return this.qx}getPointShape(){return this.tM}setPointRotation(t){this.Ma=t;for(let i=0;i<this.rw.length;i+=1)this.rw[i].Qh(t);return this.Ds.xs(),this}getPointRotation(){return this.Ma}setIndividualPointSizeEnabled(t){this.Qa=t,t&&this.chart.us.jn(Vo.Tf);for(let i=0;i<this.rw.length;i+=1)this.rw[i].ul(t);return this.Ds.xs(),this}getIndividualPointSizeEnabled(){return this.Qa}setIndividualPointRotationEnabled(t){this.Ja=t;for(let i=0;i<this.rw.length;i+=1)this.rw[i].cl(t);return this.Ds.xs(),this}getIndividualPointRotationEnabled(){return this.Ja}setIndividualPointValueEnabled(t){this.Ka=t;for(let i=0;i<this.rw.length;i+=1)this.rw[i].dl(t);return this.Ds.xs(),this}getIndividualPointValueEnabled(){return this.Ka}setVisible(t){return super.setVisible(t),this.rw.forEach((i=>i.setVisible(t))),this}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY};if(0===this.BM.length)return;const h=this.BM[0].Qo()||hr.NearestX,r=Ea(i)?Nu(e,this.BM,this.ow,h===hr.NearestX?(t,i)=>Math.abs(t.x-i.x):h===hr.NearestY?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2):Nu(e,this.rw,this.nw,h===hr.NearestX?(t,i)=>Math.abs(t.x-i.x):h===hr.NearestY?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==r){const t=At(r[0],this.Ds.us.ft,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}jd(){return ki(this.fw)||ki(this.yu.getFillStyle())}Is(){return this._s||this.tM}yM(t){}Ee(t,i){t.cs(i),this.Ds.xs()}GM(t){const i=this.BM.length>0?this.BM[this.BM.length-1].ol().length+this.BM[this.BM.length-1].nl().length-+this.BM[this.BM.length-1].Ul():void 0;Ru(t,i,this.NM,this.aw),Ru(t,i,this.NM,this.uw)}cw(t,i){const s=this.Ds.Dv(this.scale).fl(t,i).setMouseInteractions(this.Hi).De(this.fw).al(this.tM).tt(this.qx).Qh(this.Ma).ul(this.Qa).cl(this.Ja).dl(this.Ka).cs(this.getHighlight());return this.fs(s),this.rw.push(s),s}lw(t,i){const s=this.Ds.op(this.scale,void 0,[gl.UserSeries,...this.dw]).fl(t,i).setMouseInteractions(this.Hi).Ge(this.yu).cs(this.getHighlight());return this.fs(s),this.BM.push(s),s}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{stroke:this.yu,fill:this.fw})}getPointAmount(){return this.rw.reduce(((t,i)=>t+i.Al()+i.yl()),this.Mu.length)}clear(){super.clear();for(let t=0;t<this.BM.length;t+=1)this.BM[t].dispose();this.BM.length=0;for(let t=0;t<this.rw.length;t+=1)this.rw[t].dispose();return this.rw.length=0,this}OM(t,i,s,e){super.OM(t,i,s,e),this.RM.OM(this.rw,i,s,e,this.scale,(t=>{}))}}const Ac=(t,i)=>t.nl().length>=i?t.nl().slice(-i):Array.prototype.concat(t.ol(),t.nl()).slice(-i),gc=(t,i,s)=>{const e=Array.prototype.concat(t.ol(),t.nl()).slice(0,-s-1).concat(i.slice(s+1,2*s+2));t.Vt().fl(e).Es()};class yc extends fc{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d,f,A){super(t,i,s,e,h,r,n,o,a,l,u,c,d,f,A),this.hw=32,this.NM=8e3,this.Aw=t=>{if(0===t.length)return;const i=this.rw.length;if(i>0){const s=i>1,e=this.rw[i-1];if(s){const s=Array.prototype.concat(e.ol(),e.nl()),h=s.length;if(32*h>=this.NM){const s=Ac(e,3),h=Array.prototype.concat(s,t),r=dc(h,32);gc(this.BM[i-1],r,32),this.lw(r.slice(66))}else if(h<5){const e=this.rw[i-2],h=Ac(e,3),r=Array.prototype.concat(h,s,t),n=dc(r,32),o=this.BM[i-1],a=n.slice(66);o.Vt().fl(a).Es()}else{const s=this.BM[i-1],h=Array.prototype.concat(s.ol(),s.nl()),r=Ac(e,4),n=Array.prototype.concat(r,t),o=dc(n,32),a=h.slice(0,-66).concat(o.slice(33));s.Vt().fl(a).Es()}}else{const s=Array.prototype.concat(e.ol(),e.nl()),h=s.length,r=this.BM[i-1];if(32*h>=this.NM){const i=Ac(e,3),s=Array.prototype.concat(i,t),h=dc(s,32);gc(this.BM[0],h,32),this.lw(h.slice(66))}else if(h+t.length>1){const i=Array.prototype.concat(s,t),e=dc(i,32);r.Vt().fl(e).Es()}else r.fl(t)}}else{const i=t.length>0?dc(t,32):t,s=As(i);this.lw(i,s)}this.uw(t)}}GM(t){const i=this.rw.length,s=this.rw.length>0?this.rw[i-1].ol().length+this.rw[i-1].nl().length:void 0;Ru(t,s,Math.ceil(this.NM/this.hw),this.Aw)}}class mc{constructor(){this.Ni="FreeformPattern",this.Pl={type:"disabled",packager:(t,i,s)=>t.slice()}}OM(t,i,s,e,h,r){if(e>0){const h=Math.trunc((i-e)/s);if(h>0&&t.length>1){const i=t.splice(0,h);for(let t=0;t<i.length;t+=1)r(i[t]),i[t].dispose()}}}gw(t,i){const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)}getXMax(t=[],i){return ei(t,Qt,Math.max,ti,i)}getXMin(t=[],i){return ei(t,Zt,Math.min,qt,i)}getYMax(t=[],i){return ei(t,Kt,Math.max,si,i)}getYMin(t=[],i){return ei(t,Jt,Math.min,ii,i)}}const pc=t=>{switch(t){case"normal":default:return 1;case"high":return.25}},vc=i({Pl:{type:"disabled",packager:(t,i,s)=>t.slice()}});class Sc extends vc{OM(t,i,s,e,h,r){if(e>0){const i=Math.ceil(e/s),n=t.length-i;if(n>0){const i=this.P_(t,h);if(i>0){const s=n-i>0?i:n;if(s>0){for(let i=0;i<s;i+=1)r(t[i]),t[i].dispose();t.splice(0,s)}}}}}}const bc=(t,i)=>{const s=i.St();return t?Math.min(s,t):s},xc=(t,i)=>{const s=i.bt();return t?Math.max(s,t):s};class Mc extends Sc{gw(t,i){return Math.abs(t.x-i.x)}getYMax(t=[],i){return t.reduce(xc,i?i.max.y:void 0)}getYMin(t=[],i){return t.reduce(bc,i?i.min.y:void 0)}}const _c=(t,i)=>{const s=i.yt();return t?Math.min(s,t):s},wc=(t,i)=>{const s=i.vt();return t?Math.max(s,t):s};class Cc extends Sc{gw(t,i){return Math.abs(t.y-i.y)}getXMax(t=[],i){return t.reduce(wc,i?i.max.x:void 0)}getXMin(t=[],i){return t.reduce(_c,i?i.min.x:void 0)}}const kc={horizontalProgressive:new class extends Mc{constructor(){super({Pl:Kh()}),this.Ni="HorizontalProgressivePattern"}P_(t,i){const s=t.length,e=Math.min(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.x.gi(t[r].vt(),t[r].kl())<e&&(h+=1);return h}getXMax(t=[],i){return void 0!==i?i?i.max.x:void 0:t.length>0?t[t.length-1].vt():void 0}getXMin(t=[],i){return t.length>0&&t[0].Al()>0?t[0].yt():i?i.min.x:void 0}setPrecision(t){return this.set("_columnPackaging",Kh(pc(t)))}},horizontalRegressive:new class extends Mc{constructor(){super({Pl:qh()}),this.Ni="HorizontalRegressivePattern"}P_(t,i){const s=t.length,e=Math.max(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.x.gi(t[r].yt(),-t[r].kl())&&(h+=1);return h}getXMax(t=[],i){return t.length>0&&t[0].Al()>0?t[0].vt():i?i.max.x:void 0}getXMin(t=[],i){return void 0!==i?i?i.min.x:void 0:t.length>0?t[t.length-1].yt():void 0}setPrecision(t){return this.set("_columnPackaging",qh(pc(t)))}},verticalProgressive:new class extends Cc{constructor(){super({Pl:tr()}),this.Ni="VerticalProgressivePattern"}P_(t,i){const s=t.length,e=Math.min(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.y.gi(t[r].bt(),t[r].Tl())<e&&(h+=1);return h}getYMax(t=[],i){return void 0!==i?i?i.max.y:void 0:t.length>0?t[t.length-1].bt():void 0}getYMin(t=[],i){return t.length>0&&t[0].Al()>0?t[0].St():i?i.min.y:void 0}setPrecision(t){return this.set("_columnPackaging",tr(pc(t)))}},verticalRegressive:new class extends Cc{constructor(){super({Pl:ir()}),this.Ni="VerticalRegressivePattern"}P_(t,i){const s=t.length,e=Math.max(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.y.gi(t[r].St(),-t[r].Tl())&&(h+=1);return h}getYMax(t=[],i){return t.length>0&&t[0].Al()>0?t[0].bt():i?i.max.y:void 0}getYMin(t=[],i){return void 0!==i?i?i.min.y:void 0:t.length>0?t[t.length-1].St():void 0}setPrecision(t){return this.set("_columnPackaging",ir(pc(t)))}},freeform:new mc};class Tc extends fc{constructor(t,i,s,e,h,r,o,a,l,u,d,f,A,g,y){super(t,i,s,e,h,r,o,a,kc.horizontalProgressive,l,d,f,A,g,y),this.aw=t=>{const i=this.BM.length>0?this.BM[this.BM.length-1].ol().length+this.BM[this.BM.length-1].nl().length:void 0;Ru(t,i,this.NM,this.yw)},this.yw=t=>{const i=t.length;if(this.BM.length>0){const s=this.BM[this.BM.length-1];if(i>0){const i=s.ol(),e=s.nl(),h=e.length>0?e[e.length-1]:i[i.length-1],r=uc([h].concat(t),this.mw);r.shift();const o=n((h.x+r[0].x)/2,(h.y+r[0].y)/2),a=Array.prototype.concat(o,r);(e.length>0?i.length+e.length:i.length)>=this.NM?(s.fl(o,c(n(o.x,o.y),n(o.x,o.y))).Yl(!0),this.lw(a).Wl(!0),this.cw(t)):s.fl(a)}}else i>0&&this.lw(uc(t,this.mw));this.uw(t)},this.mw=u,void 0===this.dw.find((t=>"DataPattern"===t.type))&&this.dw.push({type:"DataPattern",args:{pattern:"ProgressiveX"}})}}class Fc extends Lu{constructor(t,i,s,e,h,r,n,a,l,u){super(t,i,s,e,h,r,n,a,l,u),this.pw=t=>t[4]>=t[1],this.wM=c(o(Ki,Ki),o(qi,qi)),this.Sw=[],this.bw=!1,this.xw=-1,this.Mw=[],this._w=!0,this.ww=!1,this.Cw=4,this.kw=[1e-7,1e-6,1e-5,1e-4,.001,.01,.1,1,5,10,30,60,300,600,1800,3600,7200,14400,28800,36e3,43200,50400,57600,64800,72e3,86400,172800,259200,345600,432e3,604800,1209600,2592e3,7776e3,10368e3,15552e3,31536e3,15768e4,31536e4,63072e4,7884e5,15768e5,31536e5,3942e6,47304e5,63072e5,7884e6,15768e6,31536e6,3942e7,47304e6,63072e6,7884e7,15768e7,31536e7,63072e7,7884e8,15768e8,31536e8,47304e8,63072e8],this.chart.us.jn(Vo.ff)}WM(){return this.Mw}UM(t){return this.L.on("dataAdd",t)}YM(t){return this.L.off(t)}HM(t){return this.L.on("dataClear",t)}$M(t){return this.L.off(t)}nv(){return this.lv&&this.Mw.length>0&&this.getVisible()}Tw(t){if(!(this.Mw.length<1))return[this.Mw[t][0],this.Mw[t][1],this.Mw[t][2],this.Mw[t][3],this.Mw[t][4]]}solveNearest(t,i){if(0===this.Mw.length)return;const s=this.chart.translateCoordinate(t,{x:this.axisX,y:this.axisY}).x,e=void 0!==this.getPackDataState();let h,r,o,a,l;if(e){const t=this.Fw;if(!t)return;const i=Ui(s,t.length-1,(i=>t[i][0])),e=void 0!==i&&t[i];if(!e)return;a=e[3],o=e[2],r=e[1],l=e[4],h=e[0]}else{const t=Ui(s,this.Mw.length-1,(t=>this.Mw[t][0])),i=void 0!==t&&this.Mw[t];if(!i)return;h=i[0],r=i[1],o=i[2],a=i[3],l=i[4]}return{cursorPosition:{resultTable:n(h,l),resultTableScale:this.scale,pointMarker:n(h,l),pointMarkerScale:{x:this.axisX,y:this.axisY}},x:h,y:l,open:r,high:o,low:a,close:l,position:h,isPacked:e,series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return ji({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,open:0,high:0,low:0,close:0,position:0,isPacked:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}yM(t){if(!(t.x instanceof Zs))throw new Error("OHLCSeries must be attached to a Linear X Axis.");this.Iw=t.x}Pr(){return n(5,5)}m_(t){const i=t.length-1;if(i<0)return this;for(let s=0;s<=i;s+=1)t[s][3]<this.wM.min.y&&(this.wM.min.y=t[s][3]),this.wM.max.y<t[s][2]&&(this.wM.max.y=t[s][2]);return this.wM.min.x=Math.min(this.wM.min.x,t[0][0]),this.wM.max.x=Math.max(this.wM.max.x,t[i][0]),this}getXMax(){return this.wM.max.x}getXMin(){return this.wM.min.x}getYMax(){return this.wM.max.y}getYMin(){return this.wM.min.y}add(t){this.Mw.length>0&&this.chart.us.jn(Vo.kf);const i=Array.isArray(t[0])?t:[t[0]];if(i.length>0){this.bw=!0;const t=this.Mw.length,s=this.Sw.length,e=i.length;this.Mw.length=t+e,this.Sw.length=s+e;for(let h=0;h<e;h+=1)this.Mw[t+h]=i[h],this.Sw[s+h]=this.Mw[t+h];this.m_(i),this.L.emit("dataAdd",this,i,void 0),this.Ds.xs()}return this}setPackData(t){return t!==this._w&&(this.ww=!0,this._w=t,this.chart.us.xs()),this}getPackData(){return this._w}getPackDataState(){const t=this.xw;if(!(t<0||void 0===this.Fw||this.Fw.length===this.Mw.length))return{figureAxisInterval:t}}setFigureWidth(t){return this.Pw=t,this.chart.us.xs(),this}getFigureWidth(){return this.Pw}setFigureMinimumGap(t){return this.Cw=t,this.chart.us.xs(),this}getFigureMinimumGap(){return this.Cw}clear(){return this.Mw=[],this.Sw=[],this.Fw=void 0,this.Dw(),this.wM.min.x=Ki,this.wM.min.y=Ki,this.wM.max.x=qi,this.wM.max.y=qi,this.L.emit("dataClear",this),this}Bw(t){return this.Iw.getPixelSize()*t/1e3}Lw(){const t=this.kw.length-1,i=this.Bw(this.Pw+this.Cw);let s=Ui(i,t,(t=>this.kw[t]));return void 0===s?s=i<this.kw[0]?0:this.kw[t]<i?t:this.kw.length/2:this.kw[s]<i&&(s+=1),this.kw.length<=s&&(s=t),1e3*this.kw[s]}Le(){if(super.Le(),!this._w){this.Fw=void 0;let t=null;if(this.ww?(this.ww=!1,t=this.Mw,this.Dw()):t=this.Sw,t.length>=1){for(let i=0;i<t.length;i+=1){const s=t[i],e=s[0];this.pw(s)?this.Rw(e,s):this.Ew(e,s)}this.Sw.length=0,this.bw=!1,this.xw=-1}}}xp(){super.xp();const t=this.Lw();if(this._w&&this.Mw.length>=1&&(t!==this.xw||this.bw||this.ww)){this.ww=!1,this.xw=t,this.bw=!1,this.Dw(),this.Fw=[];const i=this.Mw.length;let s=this.Mw[0][0]-this.Mw[0][0]%(t/2)+t,e=0;for(;e<i;){let h=this.Tw(e);if(void 0===h)break;let r=h[3],n=h[2];const o=e;for(e+=1;e<i&&this.Mw[e][0]<s;)h=this.Mw[e],this.Mw[e][3]<r&&(r=this.Mw[e][3]),n<this.Mw[e][2]&&(n=this.Mw[e][2]),e+=1;const a=e-1;let l=h[0];o<a&&(l=this.Mw[a][0],h=[l,this.Mw[o][1],n,r,this.Mw[a][4]]),h[1]<h[4]?this.Rw(l,h):this.Ew(l,h),this.Fw.push(h),s+=t}}}}class Ic extends Fc{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.zw=1175494351e-14,this.Pw=this.qi.ohlcCandleThicknessPixels||5,this.Vw=this.qi.ohlcCandleTailStrokeStylePositive,this.Ow=this.qi.ohlcCandleTailStrokeStyleNegative,this.Nw=this.qi.ohlcCandleBodyFillStylePositive,this.Gw=this.qi.ohlcCandleBodyFillStyleNegative,this.Ww=s.Ug(this.scale).Ge(new ve({thickness:this.Pw,fillStyle:this.Nw})),this.Ww.xu={x:0,y:1},this.Uw=s.Ug(this.scale).Ge(new ve({thickness:this.Pw,fillStyle:this.Gw})),this.Uw.xu={x:0,y:-1},this.Yw=s.Ug(this.scale).Ge(this.Vw),this.Hw=s.Ug(this.scale).Ge(this.Ow),this.fs(this.Ww),this.fs(this.Uw),this.fs(this.Yw),this.fs(this.Hw)}setBodyThickness(t){return this.Pw=t,this.Ww.Ge(new ve({thickness:this.Pw,fillStyle:this.Nw})),this.Uw.Ge(new ve({thickness:this.Pw,fillStyle:this.Gw})),this.chart.us.xs(),this}getBodyThickness(){return this.Pw}setBodyFillStylePositive(t){return this.Nw="function"==typeof t?t(this.Nw):t,this.Ww.Ge(new ve({thickness:this.Pw,fillStyle:this.Nw})),this.chart.us.xs(),this}getBodyFillStylePositive(){return this.Nw}setBodyFillStyleNegative(t){return this.Gw="function"==typeof t?t(this.Gw):t,this.Uw.Ge(new ve({thickness:this.Pw,fillStyle:this.Gw})),this.chart.us.xs(),this}getBodyFillStyleNegative(){return this.Gw}setTailStrokeStylePositive(t){return this.Vw="function"==typeof t?t(this.Vw):t,this.Yw.Ge(this.Vw),this.chart.us.xs(),this}getTailStrokeStylePositive(){return this.Vw}setTailStrokeStyleNegative(t){return this.Ow="function"==typeof t?t(this.Ow):t,this.Hw.Ge(this.Ow),this.chart.us.xs(),this}getTailStrokeStyleNegative(){return this.Ow}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.Nw,fill2:this.Gw,behavior:{colorStep:!0}})}Dw(){return this.Yw.Vt(),this.Hw.Vt(),this.Ww.Vt(),this.Uw.Vt(),this}Rw(t,i){return Math.abs(i[1]-i[4])<this.zw?this.Ww.$r().Hg({x:t,y:i[1]-this.zw},{x:t,y:i[1]+this.zw}):this.Ww.$r().Hg({x:t,y:i[1]},{x:t,y:i[4]}),i[4]<i[2]&&this.Yw.$r().Hg({x:t,y:i[4]},{x:t,y:i[2]}),i[3]<i[1]&&this.Yw.$r().Hg({x:t,y:i[3]},{x:t,y:i[1]}),this}Ew(t,i){return Math.abs(i[1]-i[4])<this.zw?this.Uw.$r().Hg({x:t,y:i[1]-this.zw},{x:t,y:i[1]+this.zw}):this.Uw.$r().Hg({x:t,y:i[1]},{x:t,y:i[4]}),i[3]<i[4]&&this.Hw.$r().Hg({x:t,y:i[3]},{x:t,y:i[4]}),i[1]<i[2]&&this.Hw.$r().Hg({x:t,y:i[1]},{x:t,y:i[2]}),this}}class Pc extends Fc{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.Pw=this.qi.ohlcBarThicknessPixels||10,this.$w=this.qi.ohlcBarStrokeStylePositive,this.Xw=this.qi.ohlcBarStrokeStyleNegative,this.jw=s.Ug(this.scale).Ge(this.$w),this.fs(this.jw),this.Zw=s.Ug(this.scale).Ge(this.$w),this.Zw.xu={x:-this.Pw/2,y:0},this.fs(this.Zw),this.Qw=s.Ug(this.scale).Ge(this.$w),this.Qw.xu={x:this.Pw/2,y:0},this.fs(this.Qw),this.Jw=s.Ug(this.scale).Ge(this.Xw),this.fs(this.Jw),this.Kw=s.Ug(this.scale).Ge(this.Xw),this.Kw.xu={x:-this.Pw/2,y:0},this.fs(this.Kw),this.qw=s.Ug(this.scale).Ge(this.Xw),this.qw.xu={x:this.Pw/2,y:0},this.fs(this.qw)}setStrokeStylePositive(t){return this.$w="function"==typeof t?t(this.$w):t,this.jw.Ge(this.$w),this.Zw.Ge(this.$w),this.Qw.Ge(this.$w),this.chart.us.xs(),this}getStrokeStylePositive(){return this.$w}setStrokeStyleNegative(t){return this.Xw="function"==typeof t?t(this.Xw):t,this.Jw.Ge(this.Xw),this.Kw.Ge(this.Xw),this.qw.Ge(this.Xw),this.chart.us.xs(),this}getStrokeStyleNegative(){return this.Xw}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.$w.getFillStyle(),fill2:this.Xw.getFillStyle(),behavior:{colorStep:!0}})}setFigureWidth(t){return super.setFigureWidth(t),this.Zw.xu={x:-t/2,y:0},this.Kw.xu={x:-t/2,y:0},this.Qw.xu={x:t/2,y:0},this.qw.xu={x:t/2,y:0},this}Dw(){return this.Jw.Vt(),this.jw.Vt(),this.Kw.Vt(),this.Zw.Vt(),this.qw.Vt(),this.Qw.Vt(),this}Rw(t,i){return this.jw.$r().Hg({x:t,y:i[3]},{x:t,y:i[2]}),this.Zw.$r().Hg({x:t,y:i[1]},{x:t,y:i[1]}),this.Qw.$r().Hg({x:t,y:i[4]},{x:t,y:i[4]}),this}Ew(t,i){return this.Jw.$r().Hg({x:t,y:i[3]},{x:t,y:i[2]}),this.Kw.$r().Hg({x:t,y:i[1]},{x:t,y:i[1]}),this.qw.$r().Hg({x:t,y:i[4]},{x:t,y:i[4]}),this}}const Dc={Candlesticks:Ic,Bars:Pc},Bc=t=>({defaultDragMouseStyle:Xe.Horizontal,getTitleTextRotation:()=>0,...Tl(t,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.Pr().x))}),Lc=t=>({defaultDragMouseStyle:Xe.Vertical,getTitleTextRotation:t=>90*t,...Tl(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.Pr().y))});class Rc extends $a{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,o),this.tC=!1,this.iC=!1,this.sC=!1,this.eC=!1,this.hC=new Map,this.rC=new Map,this.nC=[],this.oC=[],this.aC=!0,this.lC=!0,this.uC=[],this.cC=new Set,this.dC=!1,this.dm=h,this.fC=r,this.AC=n,this.gC=o.cursorGridStrokeStyleX,this.yC=o.cursorGridStrokeStyleY}dispose(){return super.dispose(),this.hC.forEach((t=>t.forEach((t=>t.dispose())))),this.rC.forEach((t=>t.forEach((t=>t.dispose())))),this.nC.length=0,this.oC.length=0,this.lm.length=0,this}Le(){return this.setPosition(...this.uC),this.nC.forEach((t=>t.setVisible(this.ji&&this.ny).setMarkerVisible(this.ji&&this.ny&&this.aC))),this.oC.forEach((t=>t.setVisible(this.ji&&this.ny).setMarkerVisible(this.ji&&this.ny&&this.lC))),super.Le()}setPosition(...t){if(this.uC=t,this.nC.forEach((t=>t.setVisible(!1))),this.oC.forEach((t=>t.setVisible(!1))),this.nC.length=0,this.oC.length=0,0===t.length)return this;const i=this.renderingScale,s=t[0].resultTable,e=Ta(t[0].resultTableScale,i),h=e===this.scale?s:At(s,e,this.scale);this.Xy.setPosition(h),this.ny=!1,this.nm.forEach((t=>{t.targetVisible=!1}));const r=new Map;return t.forEach(((t,s)=>{const e=t.pointMarkerScale.x,h=t.pointMarkerScale.y,o=r.get(e)||[],a=r.get(h)||[],l=!o.includes(t.pointMarker.x),u=!a.includes(t.pointMarker.y);o.push(t.pointMarker.x),a.push(t.pointMarker.y),r.set(e,o),r.set(h,a);const c=t.pointMarker,d=Vc(n(c.x,c.y),e,h);if(l){const t=this.Ch(e,!0);t.setValue(c.x),t.setGridStrokeLength(this.tC?d.x:1).setAllocatesAxisSpace(this.dC),this.nC.push(t)}if(u){const t=this.Ch(h,!1);t.setValue(c.y),t.setGridStrokeLength(this.iC?d.y:1).setAllocatesAxisSpace(this.dC),this.oC.push(t)}let f=this.nm[s];if(!f){const t=new Jn(this.Ds,this.renderingScale,this.scale,Yt,this.qi).setMouseInteractions(!1).setFillStyle(this.qi.cursorPointMarkerFillStyle).setSize(this.qi.cursorPointMarkerSize).setShape(this.qi.cursorPointMarkerShape);f={pointMarker:t,targetVisible:!0},this.nm.push(f),this.lm.forEach((i=>i(t)))}const A=Ta(t.pointMarkerScale,i),g=A===this.scale?t.pointMarker:At(t.pointMarker,A,this.scale);f.pointMarker.setPosition(g),f.targetVisible=!0;const y=e.getInterval(),m=h.getInterval(),p=Math.min(y.start,y.end),v=Math.max(y.start,y.end),S=Math.min(m.start,m.end),b=Math.max(m.start,m.end);c.x>=p&&c.x<=v&&c.y>=S&&c.y<=b&&(this.ny=!0)})),this}setTickMarkersAllocateAxisSpace(t){return this.dC=t,this.Ds.xs(),this}getTickMarkersAllocateAxisSpace(){return this.dC}Ch(t,i){this.cC.has(t)||(t.onDispose((()=>{var i;null===(i=s.get(t))||void 0===i||i.forEach((t=>t.dispose())),s.delete(t)})),this.cC.add(t));const s=i?this.hC:this.rC,e=i?this.nC:this.oC,h=s.get(t)||[];s.set(t,h);let r=h.find((t=>!e.includes(t)));return r||(r=i?t.qg(!1,this.fC):t.qg(!1,this.AC),h.push(r),this.mr(r,i),r.setMouseInteractions(!1)),r}mr(t,i){const s=i?this.gC:this.yC;return t.setGridStrokeStyle(s),t.setMouseInteractions(!1),(i?this.aC:this.lC)?t.setMarkerVisible(!0):t.setMarkerVisible(!1),t}setGridStrokeXCut(t){return this.tC=t,this.Ds.xs(),this}getGridStrokeXCut(){return this.tC}setGridStrokeYCut(t){return this.iC=t,this.Ds.xs(),this}getGridStrokeYCut(){return this.iC}setGridStrokeXStyle(t){return this.gC=t instanceof Function?t(this.getGridStrokeXStyle()):t,this.hC.forEach((t=>t.forEach((t=>t.setGridStrokeStyle(this.gC))))),this}getGridStrokeXStyle(){return this.gC}setGridStrokeYStyle(t){return this.yC=t instanceof Function?t(this.getGridStrokeYStyle()):t,this.rC.forEach((t=>t.forEach((t=>t.setGridStrokeStyle(this.yC))))),this}getGridStrokeYStyle(){return this.yC}setTickMarkerXVisible(t){return this.aC=t,this.Ds.xs(),this}getTickMarkerXVisible(){return this.aC}setTickMarkerYVisible(t){return this.lC=t,this.Ds.xs(),this}getTickMarkerYVisible(){return this.lC}setTickMarkerX(t){return this.hC.forEach((i=>i.forEach((i=>i.setMarker(t))))),this.fC=this.fC.addStyler(t),this.Ds.xs(),this}setTickMarkerY(t){return this.rC.forEach((i=>i.forEach((i=>i.setMarker(t))))),this.AC=this.AC.addStyler(t),this.Ds.xs(),this}}class Ec{constructor(t,i,s,e){this.gm=[],this.ym=(t,i)=>(this.gm.forEach((s=>s(t,i))),t),this.addStyler=t=>new Ec(this.dm,this.fC,this.AC,this.gm.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new Ec(t,this.fC,this.AC,this.gm.map((t=>t))),this.pm=(t,i,s,e,h)=>this.ym(new Rc(t,i,s,e,this.dm,this.fC,this.AC,h),h),this.dm=t,this.gm=e,this.fC=i,this.AC=s}}const zc=new Ec(Xn,Eo.PointableTextBox,Eo.PointableTextBox,[(t,i)=>{Xa(t),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),jr(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),jr(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),Vc=(t,i,s)=>{const e=i.ft,h=s.ft;let r=(t.x-e.getInnerStart())/(e.getInnerEnd()-e.getInnerStart()),o=(t.y-h.getInnerStart())/(h.getInnerEnd()-h.getInnerStart());return 1===s.cg&&(r=1-r),1===i.cg&&(o=1-o),n(o,r)};class Oc extends Ou{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d,f){super(t,i,s,e,h,r,n,o,a,l,u),this.BM=[],this.Ux=!0,this.NM=void 0,this._u=void 0,this.mC=(t,i)=>{const s=t.Jx(i);if(s)return At(s,this.scale,this.Ds.us.ft)},this.ow=(t,i)=>{const s=t.S_(i);if(s)return At(s,this.scale,this.Ds.us.ft)},this.jd=()=>ki(this.yu.getFillStyle()),this.dw=c,this.Jn=f,this.yu=Ii(this.qi.lineSeriesStrokeStyle,d),this.pC={individualLookupValuesEnabled:void 0!==(null==f?void 0:f.individualLookupValuesEnabled)&&f.individualLookupValuesEnabled}}ds(){var t,i;return null===(i=null===(t=this.Jn)||void 0===t?void 0:t.dataPattern)||void 0===i?void 0:i.pattern}add(t){return super.add(t),this}setMouseInteractions(t){return super.setMouseInteractions(t)}setStrokeStyle(t){this.yu="function"==typeof t?t(this.yu):t;const i=this.yu;for(let t=0;t<this.BM.length;t+=1)this.BM[t].Ge(i);return this.Ds.xs(),this}getStrokeStyle(){return this.yu}setDataCleaning(t){return this._u=t,this.BM.forEach((t=>t.wu(this._u))),this.Ds.xs(),this}setCursorInterpolationEnabled(t){return this.Ux=t,this.Ds.us.xs(),this}getCursorInterpolationEnabled(){return this.Ux}yM(t){}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY};if(0===this.BM.length)return;const h=this.BM[0].Qo()||hr.NearestX,r=Nu(e,this.BM,Ea(i)?this.ow:this.mC,h===hr.NearestX?(t,i)=>Math.abs(t.x-i.x):h===hr.NearestY?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==r){const t=At(r[0],this.Ds.us.ft,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}GM(t){let i=this.BM[0];i||(i=this.lw(),this.BM.push(i),this.fs(i)),i.fl(t,this.VM)}lw(){return this.Ds.op(this.scale,this.pC,[gl.UserSeries,...this.dw]).Ge(this.yu).wu(this._u).cs(this.getHighlight())}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{stroke:this.yu})}Ee(t,i){t.cs(i),this.Ds.xs()}OM(t,i,s,e){}}class Nc extends Ou{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d){super(t,i,s,e,h,r,n,o,new mc,l,u),this.BM=[],this.qx=5,this.Ma=0,this.Qa=!1,this.Ja=!1,this.Ka=!1,this.NM=void 0,this.nw=(t,i)=>{const s=t.Kc(i);if(s)return At(s,this.scale,this.Ds.us.ft)},this.Jn=d,this.tM=a,this.ke=Ii(l.pointSeriesFillStyle,c)}add(t){return super.add(t),this}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=Nu(e,this.BM,this.nw,us);if(void 0!==h){const t=At(h[0],this.Ds.us.ft,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}jd(){return ki(this.ke)}Is(){return this._s||this.tM}yM(t){}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke})}Ee(t,i){t.cs(i),this.Ds.xs()}setPointFillStyle(t){this.ke="function"==typeof t?t(this.ke):t;const i=this.ke;for(let t=0;t<this.BM.length;t+=1)this.BM[t].De(i);return this.Ds.xs(),this}getPointFillStyle(){return this.ke}setPointSize(t){this.qx=t;for(let i=0;i<this.BM.length;i+=1)this.BM[i].tt(t);return this.Ds.xs(),this}getPointSize(){return this.qx}getPointShape(){return this.tM}setPointRotation(t){this.Ma=t;for(let i=0;i<this.BM.length;i+=1)this.BM[i].Qh(t);return this.Ds.xs(),this}getPointRotation(){return this.Ma}setIndividualPointSizeEnabled(t){this.Qa=t,t&&this.chart.us.jn(Vo.Tf);for(let i=0;i<this.BM.length;i+=1)this.BM[i].ul(t);return this.Ds.xs(),this}getIndividualPointSizeEnabled(){return this.Qa}setIndividualPointRotationEnabled(t){this.Ja=t;for(let i=0;i<this.BM.length;i+=1)this.BM[i].cl(t);return this.Ds.xs(),this}getIndividualPointRotationEnabled(){return this.Ja}setIndividualPointValueEnabled(t){this.Ka=t;for(let i=0;i<this.BM.length;i+=1)this.BM[i].dl(t);return this.Ds.xs(),this}getIndividualPointValueEnabled(){return this.Ka}GM(t){let i=this.BM[0];i||(i=this.lw()),i.fl(t,this.VM)}lw(){const t=this.Ds.Dv(this.scale).al(this.tM).tt(this.qx).Qh(this.Ma).ul(this.Qa).cl(this.Ja).dl(this.Ka).De(this.ke).cs(this.getHighlight());return this.BM.push(t),this.fs(t),t}}class Gc{constructor(t,i,e,h){this.vC=!1,this.L=new s,this.chart=e,this.SC=h,this.Js=t.Js,this.he=h||ih,this.bC=Ot.document.createElement("div"),this.bC.style.position="absolute",this.bC.style.pointerEvents="none",Ot.document.body.append(this.bC);const r=()=>{const t=e.engine.container.getBoundingClientRect();this.bC.style.left=`${t.left}px`,this.bC.style.top=`${t.top}px`,this.bC.style.width=`${t.width}px`,this.bC.style.height=`${t.height}px`};r(),e.onResize(r),this.xC(this.bC),this.MC(),this._C(),this.wC(),this.CC(i),this.chart.kC().push(this)}xC(t){this.TC=Ot.document.createElement("div"),this.TC.style.pointerEvents="all",t.append(this.TC),this.FC=Ot.document.createElement("div"),this.IC=new $e(this.Js,this.he,this.chart,this.FC),this.PC=Ot.document.createElement("table"),this.PC.style.borderSpacing="0",this.TC.appendChild(this.IC.fe()),this.TC.appendChild(this.FC),this.FC.appendChild(this.PC)}_C(){let t=0,i=0,s=0,e=0,h=!1;this.vC=!1,this.TC.onmousedown=r=>{r=r||Ot.event,s=r.clientX,e=r.clientY,h=!0,Ot.document.onmouseup=t=>{this.vC?this.TC.addEventListener("click",di,!0):this.TC.removeEventListener("click",di,!0),h=!1,this.vC=!1,Ot.document.onmouseup=null,Ot.document.onmousemove=null},Ot.document.onmousemove=r=>{r=r||Ot.event,h&&(t=s-r.clientX,i=e-r.clientY,s=r.clientX,e=r.clientY,this.vC=!0,this.TC.style.top=this.TC.offsetTop-i+"px",this.TC.style.left=this.TC.offsetLeft-t+"px",this.TC.style.removeProperty("right"),this.TC.style.removeProperty("bottom"))}}}wC(){let t=0,i=0,s=0,e=0,h=!1;this.TC.ontouchstart=r=>{r=r||Ot.event,s=r.touches[0].clientX,e=r.touches[0].clientY,h=!0,this.TC.ontouchend=()=>{h=!1,Ot.document.ontouchend=null,Ot.document.ontouchmove=null},this.TC.ontouchmove=r=>{h&&(di(r),r=r||Ot.event,t=s-r.touches[0].clientX,i=e-r.touches[0].clientY,s=r.touches[0].clientX,e=r.touches[0].clientY,this.TC.style.top=this.TC.offsetTop-i+"px",this.TC.style.left=this.TC.offsetLeft-t+"px",this.TC.style.removeProperty("right"),this.TC.style.removeProperty("bottom"))}}}MC(){this.TC.style.setProperty("top","10px"),this.TC.style.setProperty("left","10px"),this.TC.style.position="absolute",this.TC.style.display="flex",this.TC.style.alignItems="flex-start",this.FC.style.setProperty("display","none")}removePositionProperty(){this.TC.style.removeProperty("top"),this.TC.style.removeProperty("left"),this.TC.style.removeProperty("bottom"),this.TC.style.removeProperty("right")}setPositionProperty(t){switch(this.removePositionProperty(),t){case eh.BottomLeft:this.TC.style.setProperty("bottom","10px"),this.TC.style.setProperty("left","10px");break;case eh.TopLeft:this.TC.style.setProperty("top","10px"),this.TC.style.setProperty("left","10px");break;case eh.BottomRight:this.TC.style.setProperty("bottom","10px"),this.TC.style.setProperty("right","10px");break;case eh.TopRight:default:this.TC.style.setProperty("top","10px"),this.TC.style.setProperty("right","10px")}}CC(t){for(let i=0;i<t.length;i+=1){const s=this.PC.insertRow();for(let e=0;e<t[i].length;e+=1){const h=s.insertCell(),r=t[i][e];"object"!=typeof r?this.DC(r,h):this.addCustomButton(r,h)}}}DC(t,i){switch(t){case xe.ZoomIn:this.BC(new ze(this.Js,this.chart,this.he),i);break;case xe.ZoomInX:this.BC(new Ve(this.Js,this.chart,this.he),i);break;case xe.ZoomInY:this.BC(new Oe(this.Js,this.chart,this.he),i);break;case xe.ZoomOut:this.BC(new Ne(this.Js,this.chart,this.he),i);break;case xe.ZoomOutX:this.BC(new Ge(this.Js,this.chart,this.he),i);break;case xe.ZoomOutY:this.BC(new We(this.Js,this.chart,this.he),i);break;case xe.ZoomToFit:this.BC(new Ye(this.Js,this.chart,this.he),i);break;case xe.ToggleAnimations:this.BC(new Ue(this.Js,this.chart,this.he),i);break;default:console.error(`No predefined button like "${xe[t]}" exists.`)}}BC(t,i){i.rowSpan=t.Ks.rows,i.colSpan=t.Ks.columns,t.de(i)}addCustomButton(t,i){const s=new He(this.Js,t,this.chart);return this.BC(s,i),this}dispose(){this.bC.remove(),this.L.emit("dispose",this)}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}}class Wc extends Lu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){var d;super(t,i,s,e,h,r,n,o,a,l),this.LC=0,this.Jn=c,this.Za=this.Ds.vd(this.scale).Ge(Ii(this.qi.lineSeriesStrokeStyle,u)).md(Ii(this.qi.pointSeriesFillStyle,u)).pd(Ii(this.qi.areaSeriesPositiveFillStyle,u)).RC(void 0).wd(7),this.Za.EC=!1!==(null===(d=this.Jn)||void 0===d?void 0:d.allowDataGrouping),this.fs(this.Za)}ds(){return this.getDataSet().Xc()}setDataSet(t){var i;return t===(null===(i=this.gd)||void 0===i?void 0:i.Nt)||(t._c&&this.chart.us.jn(Vo.Ff),t.Cc&&this.chart.us.jn(Vo.Tf),this.gd=Xi(t,this.gd,(()=>[t.qc((()=>{this.LC+=1,this.LC>1&&this.chart.us.jn(Vo.kf),this.chart.us.xs()})),t.td((()=>this.chart.us.xs()))])),this.Za.yd(t),this.chart.us.xs()),this}getDataSet(){return this.zC()}setStrokeStyle(t){return this.Za.Ge(t),this.Ds.xs(),this}getStrokeStyle(){return this.Za.mu()}setAreaFillStyle(t){return this.Za.pd(t),this.Ds.xs(),this}getAreaFillStyle(){return this.Za.VC()}setPointFillStyle(t){return this.Za.md(t),this.Ds.xs(),this}getPointFillStyle(){return this.Za._d()}setPointSize(t){return this.Za.wd(t),this.Ds.xs(),this}getPointSize(){return this.Za.OC()}setPointShape(t){return this.Za.Sd(t),this.Ds.xs(),this}getPointShape(){return this.Za.bd()}setPointRotation(t){return this.Za.xd(t),this.Ds.xs(),this}getPointRotation(){return this.Za.Md()}setPointAlignment(t){return this.Za.NC(t),this.chart.us.xs(),this}getPointAlignment(){return this.Za.GC()}setCurvePreprocessing(t){return this.Za.RC(t),this.Ds.xs(),this}getCurvePreprocessing(){return this.Za.WC()}add(t){return this.zC().add(t),this.Ds.xs(),this}addArraysXY(t,i){return this.zC().addArraysXY(t,i),this.Ds.xs(),this}appendJSON(t,i){return this.zC().appendJSON(t,i),this.Ds.xs(),this}appendSample(t){return this.zC().appendSample(t),this.Ds.xs(),this}appendSamples(t){return this.zC().appendSamples(t),this.Ds.xs(),this}fill(t){return this.zC().fill(t),this.Ds.xs(),this}setSamples(t){return this.zC().setSamples(t),this.Ds.xs(),this}alterSamples(t,i){return this.zC().alterSamples(t,i),this.Ds.xs(),this}alterSamplesByID(t,i){return this.zC().alterSamplesByID(t,i),this.Ds.xs(),this}getSampleCount(){return this.zC().getSampleCount()}getNextSampleIndex(){return this.zC().getNextSampleIndex()}clear(){return this.zC().clear(),this.Ds.xs(),this}setMaxSampleCount(t){return this.zC().setMaxSampleCount(t),this.Ds.xs(),this}getMaxSampleCount(){return this.zC().getMaxSampleCount()}readBack(t){return this.zC().readBack(t)}onMaxSampleCountExceeded(t){return this.zC().onMaxSampleCountExceeded(t)}offMaxSampleCountExceeded(t){return this.zC().offMaxSampleCountExceeded(t)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){let s=Ea(i);void 0!==this.getCurvePreprocessing()&&(s=!1);const e=this.UC(),h=this.chart.translateCoordinate(t,{x:this.axisX,y:this.axisY}),r=e.Kc(h,s,this.scale,this.chart.mg);if(void 0!==r)return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){const s=this.getDataSet(),e=null==t?void 0:t.dataPoint;return void 0===s.Xc()||e?e?{cursorPosition:{resultTable:e,resultTableScale:this.scale,pointMarker:e,pointMarkerScale:{x:this.axisX,y:this.axisY}},...e,series:this,axisX:this.axisX,axisY:this.axisY}:void 0:ji({series:this,axisX:this.axisX,axisY:this.axisY},{x:0,y:0,cursorPosition:0,id:0,rotation:0,size:0,color:0,lookupValue:0,multiHit:0,iSample:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}UC(){return this.zC()}jd(){return ki(this.getPointFillStyle())||ki(this.getStrokeStyle().getFillStyle())||ki(this.getAreaFillStyle())}nv(){var t;const i=null===(t=this.gd)||void 0===t?void 0:t.Nt;return this.getAutoScrollingEnabled()&&void 0!==i&&i.yc>0}yM(t){}getXMax(){return this.Za.vt()}getXMin(){return this.Za.yt()}getYMax(){return this.Za.bt()}getYMin(){return this.Za.St()}Pr(){return{x:this.Za.kl(),y:this.Za.Tl()}}zC(){if(!this.gd){const t=new Vn(this.Jn);t._c&&this.chart.us.jn(Vo.Ff),t.Cc&&this.chart.us.jn(Vo.Tf),this.gd=Xi(t,this.gd,(()=>[t.qc((()=>{this.LC+=1,this.LC>1&&this.chart.us.jn(Vo.kf),this.chart.us.xs()})),t.td((()=>{this.chart.us.xs()}))])),this.Za.yd(t)}return this.gd.Nt}styleLegendEntry(t,i=!1){const s=this.getPointFillStyle(),e=this.getAreaFillStyle();Ci(t,this.qi,i,{stroke:this.getStrokeStyle(),fill:s!==O?s:e,behavior:{priority:"stroke"}})}Is(){return this._s||this.getPointShape()}Ee(t,i){t.cs(i),this.Ds.xs()}}const Uc=(...t)=>(i,s)=>t.forEach((t=>t.forEach((t=>{t.axis.ft.tt(i),t.axis.Ag.tt(s)})))),Yc=n(10,10);var Hc;!function(t){t[t.Top=0]="Top",t[t.Bottom=1]="Bottom",t[t.Left=2]="Left",t[t.Right=3]="Right"}(Hc||(Hc={}));const $c=new Set([Hc.Top,Hc.Bottom,Hc.Left,Hc.Right]),Xc=t=>t.setStopped(!0),jc=t=>t.getChartInteractionFitByDrag()?t.fit(!0):void 0,Zc=(t,i)=>{const s="linear-highPrecision"===t.Vh.type||"linear-highPrecision"===i.Vh.type,e="logarithmic"===t.Vh.type||"logarithmic"===i.Vh.type;if(s&&e){const s=`Invalid Axis combination | 'logarithmic' can't be combined with 'linear-highPrecision' (x: ${t.Vh.type}, y: ${i.Vh.type})`;throw new Error(s)}};var Qc,Jc,Kc;!function(t){t[t.seriesBackground=0]="seriesBackground",t[t.gridLine0=1]="gridLine0",t[t.gridLine1=2]="gridLine1",t[t.gridLine2=3]="gridLine2",t[t.highlightersBelow=4]="highlightersBelow"}(Qc||(Qc={})),function(t){t[t.plotting=0]="plotting",t[t.highlightersAbove=1]="highlightersAbove",t[t.fg=2]="fg"}(Jc||(Jc={}));class qc extends Nl{constructor(t,i,s,e,h,r,o){super(t,i,s,i.Py("chartXY bg",0),e,i.us.qi.chartXYBackgroundFillStyle,i.us.qi.chartXYBackgroundStrokeStyle,i.us.qi.chartXYTitleFont,i.us.qi.chartXYTitleFillStyle,o),this.YC=this.yy.d2({scaleXYConstructor:Ks}),this.Xg=[],this.jg=[],this.Qg=[],this.Zg=[],this.HC=new Map,this.$C=!0,this.XC=!0,this.jC=!0,this.Wf=2,this.ZC=!0,this.QC=!0,this.JC=[],this.KC=this.By.Be(this.YC).De(O).Pe(at).setMouseInteractions(!1),this.qC=this.By.We(this.YC).Ge(at).setMouseInteractions(!1),this.tk=this.By.We(this.YC).Ge(at).setMouseInteractions(!1),this.ik=this.qi.chartXYZoomingRectangleFillStyle,this.sk=this.qi.chartXYZoomingRectangleStrokeStyle,this.ek=this.qi.chartXYFittingRectangleFillStyle,this.hk=this.qi.chartXYFittingRectangleStrokeStyle,this.rk=Xe.Default,this.nk=Xe.Move,this.ak=Xe.ZoomIn,this.lk=Xe.Default,this.uk=void 0,this.oA=td,this.gM=0,this.ck=(t,i,s)=>{const e=t.solveNearest(i,s);return e&&ls(e.cursorPosition.pointMarker.x,e.axisX.getInterval().start,e.axisX.getInterval().end)&&ls(e.cursorPosition.pointMarker.y,e.axisY.getInterval().start,e.axisY.getInterval().end)?e:void 0},this.dk=Uc(this.jg,this.Xg),this.fk=Uc(this.Qg,this.Zg),this.Ak=(t,i,s,e,h)=>{this.dk(e,h),this.fk(h,e),this.YC.tt(e,h),this.us.xs()},this.gk=(t,i)=>{this.HC.set(t,i)},this.og=t=>{const i=this.jg.findIndex((i=>i.axis===t)),s=this.Xg.findIndex((i=>i.axis===t)),e=this.Qg.findIndex((i=>i.axis===t)),h=this.Zg.findIndex((i=>i.axis===t));i>=0&&this.jg.splice(i,1),s>=0&&this.Xg.splice(s,1),e>=0&&this.Qg.splice(e,1),h>=0&&this.Zg.splice(h,1),this.HC.delete(t),this.us.xs()},this.addAreaSeries=t=>{const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=t&&t.baseline?t.baseline:0,h=new(t&&t.type?t.type:oc.Positive)(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,e,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length);return this.Nv(h),h},this.addAreaRangeSeries=t=>{const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=new ac(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length);return this.Nv(e),e},this.mk=!1,this.pk=!1,this.mM=()=>{(this.$C||this.XC)&&(this.uk=this.engine.setMouseStyle(this.rk))},this.pM=()=>{this.mk=!1,this.engine.restoreMouseStyle(this.uk)},this.vM=(t,i,s)=>{var e,h;const r=jt(null===(e=this.vA.Kn)||void 0===e?void 0:e.chartXYRectangleZoomFitMouseButton,0),n=jt(null===(h=this.vA.Kn)||void 0===h?void 0:h.chartXYPanMouseButton,2);this.engine.restoreMouseStyle(this.uk);const o=this.By.us.ze(i.clientX,i.clientY);s===r&&(this.$C||this.XC)?(this.vk(t,o),di(i)):s===n&&this.ZC&&(this.uk=this.engine.setMouseStyle(this.nk),this.pk=!0,di(i))},this.dv=(t,i,s,e,h)=>{var r,o;const a=n(i.clientX,i.clientY),l=jt(null===(r=this.vA.Kn)||void 0===r?void 0:r.chartXYRectangleZoomFitMouseButton,0),u=jt(null===(o=this.vA.Kn)||void 0===o?void 0:o.chartXYPanMouseButton,2);s===l&&(this.$C||this.XC)?(this.Sk(t,e,a),di(i)):s===u&&this.ZC&&(this.bk(_s(h,-1)),di(i)),this.us.xs()},this.fv=(t,i,s,e)=>{var h,r;const o=jt(null===(h=this.vA.Kn)||void 0===h?void 0:h.chartXYRectangleZoomFitMouseButton,0),a=jt(null===(r=this.vA.Kn)||void 0===r?void 0:r.chartXYPanMouseButton,2);if(s===o&&(this.$C||this.XC)){const s=n(i.clientX,i.clientY);this.xk(t,e,s),di(i)}else s===a&&this.ZC&&di(i);this.engine.restoreMouseStyle(this.uk),this.Vv.getIsUnderMouse()&&(this.uk=this.engine.setMouseStyle(this.rk)),this.mk=!1,this.pk=!1},this.cv=(t,i)=>{if(this.jC){const t=this.By.us.ze(i.clientX,i.clientY);this.Mk(t,n(Pi(i),Pi(i))),di(i)}},this._k=(t,i,s,e)=>{},this.wk=(t,i,s,e,h,r)=>{if(this.ZC){const t=n(-(e.x+h.x)/2,-(e.y+h.y)/2);this.bk(t),di(r),this.pk=!0}if(this.jC){const t=this.us.Oo({clientX:i.x,clientY:i.y}),o=this.us.Oo({clientX:s.x,clientY:s.y}),a=Cs(n(Math.abs(t.engineX-e.x-(o.engineX-h.x)),Math.abs(t.engineY-e.y-(o.engineY-h.y))),n(Math.abs(t.engineX-o.engineX),Math.abs(t.engineY-o.engineY)));this.forEachAxisX((t=>{t.getChartInteractionZoomByWheel()&&t.At(t.ft.gi(t.getInterval().start,-a.x),t.ft.gi(t.getInterval().end,a.x),!1,!0,"interactionZoom")})),this.forEachAxisY((t=>{t.getChartInteractionZoomByWheel()&&t.At(t.ft.gi(t.getInterval().start,-a.y),t.ft.gi(t.getInterval().end,a.y),!1,!0,"interactionZoom")})),di(r),this.mk=!0}},this.Ck=(t,i,s,e)=>{this.pk=!1,this.mk=!1},this.kk=(t,i,s)=>{(this.XC||this.$C)&&(this.vk(t,i),di(s))},this.Tk=(t,i,s,e,h)=>{(this.XC||this.$C)&&(this.Sk(t,i,s),di(h))},this.Fk=(t,i,s,e)=>{(this.XC||this.$C)&&(this.xk(t,i,s),di(e))},this.us.jn(Vo.xf),this.setPadding({right:24}),this.Ik=i.pb("chartXY series bg",Qc.seriesBackground),this.Pk=[Qc.gridLine0,Qc.gridLine1,Qc.gridLine2].map((t=>i.Dk(`chartXY gridline #${t}`,t))),this.rg=i.Dk("chartXY highlighters below",Qc.highlightersBelow),this.Xb=i.jm("chartXY plotting",Jc.plotting),this.ng=i.jm("chartXY highlighters above",Jc.highlightersAbove),this.FA=i.jm("chartXY fg",Jc.fg),this.YC.x.K(0,this.uiScale.x.getCellSize()-(this.$t.left+this.$t.right+this.Ca.left+this.Ca.right)),this.YC.y.K(0,this.uiScale.y.getCellSize()-(this.$t.bottom+this.$t.top+this.Ca.bottom+this.Ca.top)),this.YC.tt(this.uiScale.ni().x,this.uiScale.ni().y),this.Vv=this.Ik.Be(this.YC).De(this.qi.chartXYSeriesBackgroundFillStyle).Pe(at),this.Ov=this.FA.Be(this.YC).De(O).Pe(this.qi.chartXYSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.zv(this.Vv,this.Ov),this.setSeriesBackgroundEffect(!1);const a=jt(r?r.cursorBuilder:void 0,zc),l=i.Qm();this.Jm=Va(this,l,a.pm(l,this.YC,this.YC,Yt,this.qi),this,"show-all",hd,((t,i)=>{const s=this.translateCoordinate(t,{x:t.axisX,y:t.axisY},this.coordsClient);return Math.sqrt((s.clientX-i.clientX)**2+(s.clientY-i.clientY)**2)})),this.addAxisX(r&&r.defaultAxisX),this.addAxisY(r&&r.defaultAxisY),this.onResize(this.Ak),this.bh.yr("ChartXY"),this.Av=Ae(new ye(this.kk,this.Tk,this.Fk,1),new me(this._k,this.wk,this.Ck)),this.onSeriesBackgroundMouseEnter(this.mM),this.onSeriesBackgroundMouseLeave(this.pM),this.onSeriesBackgroundMouseWheel(this.cv),this.onSeriesBackgroundMouseDragStart(this.vM),this.onSeriesBackgroundMouseDrag(this.dv),this.onSeriesBackgroundMouseDragStop(this.fv),this.onSeriesBackgroundTouchStart(this.Av.onTouchStart),this.onSeriesBackgroundTouchMove(this.Av.onTouchMove),this.onSeriesBackgroundTouchEnd(this.Av.onTouchEnd),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled)),this.Iy(h,this.YC)}get coordsAxis(){return{x:this.getDefaultAxisX(),y:this.getDefaultAxisY()}}getSeries(){return this.Bv}setCursor(t){return this.Jm.setCursor(t),this}getCursor(){return this.Jm.getCursor()}setCursorMode(t){return this.Jm.setCursorMode(t),this}getCursorMode(){return this.Jm.getCursorMode()}setCustomCursor(t){return this.Jm.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.Jm.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.Jm.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Jm.setCursorFormatting(t),this}getCursorFormatting(){return this.Jm.getCursorFormatting()}solveNearest(t,i=this.getCursorMode()||"show-nearest"){return this.Jm.solveNearest(t,i,this.Bv,this.ck)}addCursor(t=zc){const i=this.vy(),s=t.pm(i,this.YC,this.YC,this.Ay(i),this.qi);return this.ky(s),s}getMinimumSize(){const t={x:0,y:0};t.x+=this.$t.left+this.$t.right+this.Ca.left+this.Ca.right,t.y+=this.$t.top+this.$t.bottom+this.Ca.top+this.Ca.bottom;const i=this.bh.Es().sd(),s=y(id(this.oA||td),this.Dy);return t.x+=i.x+s.left+s.right,t.y+=i.y+s.top+s.bottom,this.Bk&&(t.x+=this.Bk.left,t.x+=this.Bk.right,t.y+=this.Bk.top,t.y+=this.Bk.bottom),t.x+=Yc.x,t.y+=Yc.y,t}addAxisX(t){var i,s;const{opposite:e,type:h}=oe(t);let r;r="linear"===h.type?this.yy.d1({dimension:"x",scale1DConstructor:Zs}):"linear-highPrecision"===h.type?this.yy.d1({dimension:"x",scale1DConstructor:Zs}).xi():this.yy.d1({dimension:"x",scale1DConstructor:Ns}).fi(h.base),r.tt(this.YC.x.ni());const n=e?this.Xg:this.jg,o=new No(this.Pk,this.FA,this.By,this.rg,this.ng,this.us.es,r,this.YC.y,(a=()=>o.Bg(),{...Wo,...Bc(a)}),this,e?100:0,this.og,this.gk,this.qi,this.uh,h);var a;let l,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=n.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),u=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,u=null!==(s=t.iStack)&&void 0!==s?s:0),n.push({axis:o,iStack:u,iParallel:l}),this.us.xs(),o}addAxisY(t){var i,s;const{opposite:e,type:h}=oe(t);let r;r="linear"===h.type?this.yy.d1({dimension:"y",scale1DConstructor:Zs}):"linear-highPrecision"===h.type?this.yy.d1({dimension:"y",scale1DConstructor:Zs}).xi():this.yy.d1({dimension:"y",scale1DConstructor:Ns}).fi(h.base),r.tt(this.YC.y.ni());const n=e?this.Zg:this.Qg,o=new No(this.Pk,this.FA,this.By,this.rg,this.ng,this.us.es,r,this.YC.x,(a=()=>o.Bg(),{...Uo,...Lc(a)}),this,e?100:0,this.og,this.gk,this.qi,this.uh,h);var a;let l,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=n.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),u=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,u=null!==(s=t.iStack)&&void 0!==s?s:0),n.push({axis:o,iParallel:l,iStack:u}),this.us.xs(),o}swapAxes(t,i){const s=[this.jg,this.Qg,this.Zg,this.Xg],e=s.find((i=>void 0!==i.find((i=>i.axis===t)))),h=s.find((t=>void 0!==t.find((t=>t.axis===i))));if(!e||!h)return this;if(e!==h)throw new Error("LightningChart JS ChartXY.swapAxes does not support swapping Axes that are on different sides.");const r=e.find((i=>i.axis===t)),n=e.find((t=>t.axis===i));if(!r||!n)return this;const o=r.iParallel,a=r.iStack;return r.iParallel=n.iParallel,r.iStack=n.iStack,n.iParallel=o,n.iStack=a,this.us.xs(),this}dispose(){return this.Jm.U(),this.Ik.U(),this.Xb.U(),this.FA.U(),this.Pk.forEach((t=>t.U())),this.ng.U(),this.rg.U(),this.kC().forEach((t=>t.dispose())),Pa(this.YC),this.jg.slice().forEach((t=>t.axis.dispose())),this.Qg.slice().forEach((t=>t.axis.dispose())),this.Zg.slice().forEach((t=>t.axis.dispose())),this.Xg.slice().forEach((t=>t.axis.dispose())),this.Bv.slice().forEach((t=>{t.dispose()})),super.dispose()}getDefaultAxisX(){var t;return null===(t=[...this.jg,...this.Xg].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}getDefaultAxisY(){var t;return null===(t=[...this.Qg,...this.Zg].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}getDefaultAxes(){return[this.getDefaultAxisX(),this.getDefaultAxisY()]}getAxes(...t){const i=t&&t.length>0?new Set(t):$c;return Xt(Array.from(i).map((t=>{switch(t){default:case Hc.Top:return this.Xg.map((t=>t.axis));case Hc.Bottom:return this.jg.map((t=>t.axis));case Hc.Left:return this.Qg.map((t=>t.axis));case Hc.Right:return this.Zg.map((t=>t.axis))}})))}Lk(t){let i;return this.forEachAxisX((s=>{i=t===s?"x":i})),this.forEachAxisY((s=>{i=t===s?"y":i})),i}forEachAxisX(t){this.jg.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.Xg.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}forEachAxisY(t){this.Qg.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.Zg.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}setTitlePosition(t){return this.oA=t,this.us.xs(),this}getTitlePosition(){return this.oA}Rk(t,i,s,e){const h=this.oA||td;let r,n=y(id(h),this.Dy);this.getTitleFillStyle()===O||0===this.getTitle().length?(r={x:0,y:0},n={left:0,top:0,right:0,bottom:0}):r=this.bh.Es().sd();const o=Math.abs(e)+this.Ca.bottom+this.$t.bottom,a=Math.abs(s)+this.Ca.top+this.$t.top,l={left:Math.abs(t)+this.Ca.left+this.$t.left,right:Math.abs(i)+this.Ca.right+this.$t.right,top:a,bottom:o},u=this.uiScale.Gi(),{horizontalAlignment:c,verticalAlignment:d,position:f,marginsWithTitle:A}=sd(h,u,l,r,n,this.Ca);return this.bh.Re(f).Ga(c).Ua(d),A}Le(t){super.Le(t);for(const t of this.Bv)t.pv();for(const t of this.Bv)t.Le();const i=Ei(this.Bv.map((t=>t.SM()))),s=new Set(i.map((t=>t.Ek)));if(1===s.size){const t=Array.from(s)[0],e="x"===t?[this.jg,this.Xg]:[this.Qg,this.Zg],h="y"===t?[this.jg,this.Xg]:[this.Qg,this.Zg];e.forEach((t=>t.forEach((t=>t.axis.Dr())))),i.forEach((t=>t.zk())),h.forEach((t=>t.forEach((t=>t.axis.Dr()))))}else this.Qg.forEach((t=>t.axis.Dr())),this.jg.forEach((t=>t.axis.Dr())),this.Xg.forEach((t=>t.axis.Dr())),this.Zg.forEach((t=>t.axis.Dr()));const e=this.Qg.map((t=>t.axis.Es())),h=this.jg.map((t=>t.axis.Es())),r=this.Xg.map((t=>t.axis.Es())),o=this.Zg.map((t=>t.axis.Es()));let a=!1;this.forEachAxis((t=>{(t.Er()||t.zr())&&(a=!0)}));const l=this.mk||this.pk||!this.QC&&a,u=new Set(this.getAxes().map((t=>t.getStackIndex()))).size>1;this.Jm.Le(l,u?this.Bv.sort(((t,i)=>i.axisY.getStackIndex()-t.axisY.getStackIndex())):this.Bv,this.ck,{afterCursorPointedAt:t=>{const i=this.us.$n();if(t.length>1&&i){const t=this.us.Oo(i);this.Jm.Gy.Am({x:t.engineX,y:t.engineY},this.us.ft)}},overrideCursorPositions:(t,i)=>t.map((t=>t.multiHit?t.multiHit.map((i=>({...t.cursorPosition,pointMarker:i}))):[t.cursorPosition])).flat()});const c=ed(this.Qg,e),f=ed(this.jg,h),A=ed(this.Xg,r),g=ed(this.Zg,o),y=this.Rk(c.thicknessTotal,g.thicknessTotal,A.thicknessTotal,f.thicknessTotal),m=this.YC.x.getCellSize()-(y.left+y.right),p=this.YC.y.getCellSize()-(y.bottom+y.top),v=[y.left,y.right],S=[y.bottom,y.top];this.YC.x.K(0,m),this.YC.y.K(0,p),this.YC.x.ii(v),this.YC.y.ii(S);const b=(t,i,s,e)=>{let h=0;t.groups.forEach((t=>{let r=0;const n=t.stacks.reduce(((t,i)=>Math.max(t,i.Eg)),0),o=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()?i.axis.lA+i.axis.uA:0)),0),a=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"pixels"in i.axis.Yd?i.axis.Yd.pixels:0)),0),l=i-o-a;t.stacks.forEach((e=>{const o=e.axis,a=o.getVisible(),u=Math.max(i-r,0),c=Math.min(a?"pixels"in o.Yd?o.Yd.pixels:o.Yd.relative/t.sumRelativeSize*l:0,u),d=a?s[0]+r+o.lA:0,f=a?s[1]+(i-r)-c-o.lA:0;o.ft.ii([d,f]),o.Le({Eg:n,zg:e.zg,Ng:c,Vk:r,$g:n+e.zg,Wg:h}),a&&(r+=c+o.lA+o.uA)})),h+=e*t.thicknessMax}))};b(c,p,S,-1),b(g,p,S,1),b(f,m,v,-1),b(A,m,v,1),this.Bk={left:c.thicknessTotal,top:A.thicknessTotal,right:g.thicknessTotal,bottom:f.thicknessTotal},this.Vv.Re(n(0,0)).tt(n(m,p)),this.Ov.Re(n(0,0)).tt(n(m,p));const x=d(this.YC.x.si(),this.YC.y.si(),this.YC.x.hi(),this.YC.y.hi());this.Xb.ab(x),this.rg.ab(x),this.ng.ab(x),this.hy&&this.hy(),super.Fy(),this.jg.forEach((t=>t.axis.Jg())),this.Xg.forEach((t=>t.axis.Jg())),this.Qg.forEach((t=>t.axis.Jg())),this.Zg.forEach((t=>t.axis.Jg()));for(const t of this.Bv)t.xp()}Z(){for(let t=0;t<this.jg.length;t+=1)this.jg[t].axis.Z();for(let t=0;t<this.Xg.length;t+=1)this.Xg[t].axis.Z();for(let t=0;t<this.Qg.length;t+=1)this.Qg[t].axis.Z();for(let t=0;t<this.Zg.length;t+=1)this.Zg[t].axis.Z();return super.Z()}yk(t){if(this.HC.has(t))return this.HC.get(t);throw new Error("No attach handler for axis Make sure that passed axes definitely belong to this chart and that they haven't been disposed of.")}addLineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);let e=kc.freeform;t&&t.dataPattern&&(e="ProgressiveX"===t.dataPattern.pattern?kc.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?kc.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?kc.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?kc.verticalRegressive:kc.freeform);const h=new Oc(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,e,this.qi,this.us.es,yl(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,t);return this.Nv(h),h}addPointLineAreaSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=new Wc(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,t);return this.Nv(e),e}addPointSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=t&&t.pointShape&&Object.values(sr).includes(t.pointShape)?"string"==typeof t.pointShape?sr[t.pointShape]:t.pointShape:sr.Square,h=new Nc(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,e,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,t);return this.Nv(h),h}addPointLineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=t&&t.pointShape&&Object.values(sr).includes(t.pointShape)?"string"==typeof t.pointShape?sr[t.pointShape]:t.pointShape:sr.Square;let h=kc.freeform;t&&t.dataPattern&&(h="ProgressiveX"===t.dataPattern.pattern?kc.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?kc.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?kc.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?kc.verticalRegressive:kc.freeform);const r=new fc(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,h,e,this.qi,this.us.es,yl(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,t);return this.Nv(r),r}addStepSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=t&&t.pointShape?t.pointShape:sr.Square,h=t&&t.mode?t.mode:lc.before,r=new Tc(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,e,h,this.qi,this.us.es,yl(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,t);return this.Nv(r),r}addSplineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=t&&t.pointShape?t.pointShape:sr.Square;let h=kc.freeform;t&&t.dataPattern&&(h="ProgressiveX"===t.dataPattern.pattern?kc.horizontalProgressive:"RegressiveX"===t.dataPattern.pattern?kc.horizontalRegressive:kc.freeform);const r=new yc(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,h,e,this.qi,this.us.es,yl(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,t);return this.Nv(r),r}addRectangleSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=new Xu(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length);return this.Nv(e),e}addPolygonSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY(),e=new Hu(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length);return this.Nv(e),e}addSegmentSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=new Zu(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length);return this.Nv(e),e}addEllipseSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=new Uu(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length);return this.Nv(e),e}addBoxSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=t&&t.dimensionStrategy?t.dimensionStrategy:Wo,h=new Gu(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,e,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length);return this.Nv(h),h}addHeatmapGridSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new Ju(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,t,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length),this.Nv(e),e}addHeatmapScrollingGridSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new qu(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,t,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length),this.Nv(e),e}addOHLCSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=new(t&&t.type?t.type:Dc.Candlesticks)(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,this.qi,this.us.es);return this.Nv(e),e}addOnScreenMenu(t,i){return new Gc(this.vA,t,this,i)}setMouseBackgroundStyle(t=Xe.Default){return this.rk=t,this}setMouseZoomStyle(t=Xe.ZoomIn){return this.ak=t,this}setMouseFitStyle(t=Xe.Default){return this.lk=t,this}setMousePanStyle(t=Xe.Move){return this.nk=t,this}setMouseInteractions(t){return this.setMouseInteractionRectangleZoom(t).setMouseInteractionRectangleFit(t).setMouseInteractionWheelZoom(t).setMouseInteractionPan(t)}setMouseInteractionRectangleZoom(t){return this.$C=t,this}getMouseInteractionRectangleZoom(){return this.$C}setMouseInteractionRectangleFit(t){return this.XC=t,this}getMouseInteractionRectangleFit(){return this.XC}setMouseInteractionPan(t){return this.ZC=t,this}getMouseInteractionPan(){return this.ZC}setMouseInteractionWheelZoom(t){return this.jC=t,this}getMouseInteractionWheelZoom(){return this.jC}setZoomingRectangleFillStyle(t){return this.ik="function"==typeof t?t(this.ik):t,this.us.xs(),this}getZoomingRectangleFillStyle(){return this.ik}setZoomingRectangleStrokeStyle(t){return this.sk="function"==typeof t?t(this.sk):t,this.us.xs(),this}getZoomingRectangleStrokeStyle(){return this.sk}setFittingRectangleFillStyle(t){return this.ek="function"==typeof t?t(this.ek):t,this.us.xs(),this}getFittingRectangleFillStyle(){return this.ek}setFittingRectangleStrokeStyle(t){return this.hk="function"==typeof t?t(this.hk):t,this.us.xs(),this}getFittingRectangleStrokeStyle(){return this.hk}addLegendBox(t,i){const s=super.addLegendBox(t,i);if(void 0===i||i===this.uiScale)if(void 0===t||"vertical"===t.getAlignment())s.setOrigin(je.RightCenter).setPosition({x:this.uiScale.x.ct(this.uiScale.x.ei()-this.Ca.right),y:ft(this.YC.y.ct(this.YC.y.si()+this.YC.y.hi()/2),this.YC.y,this.uiScale.y)});else{const t=this.oA||td,i=sd(t,this.uiScale.Gi(),this.Ca,this.getTitleFillStyle()===O||0===this.getTitle().length?{x:0,y:0}:this.bh.Es().sd(),y(id(t),this.Dy),this.Ca).marginsWithTitle.top;s.setOrigin(je.RightTop).setPosition(At({x:this.mg.x.getInnerEnd()-this.Ca.right,y:this.mg.y.getInnerEnd()-i},this.mg,this.uiScale))}return s}vk(t,i){this.forEachAxis(Xc);const s=this.us.Oo({clientX:i.x,clientY:i.y}),e=At({x:s.engineX,y:s.engineY},this.By.us.ft,this.YC);this.KC.Re(e).tt(n(0,0))}Sk(t,i,s){const e=this.us.Oo({clientX:i.x,clientY:i.y}),h=At({x:e.engineX,y:e.engineY},this.By.us.ft,this.YC),r=this.us.Oo({clientX:s.x,clientY:s.y}),o=At({x:r.engineX,y:r.engineY},this.By.us.ft,this.YC),a=ls(o.x,this.YC.x.getInnerStart(),this.YC.x.getInnerEnd())&&ls(o.y,this.YC.y.getInnerStart(),this.YC.y.getInnerEnd()),l=n(Math.min(h.x,o.x),Math.min(h.y,o.y)),u=n(Math.max(h.x,o.x),Math.max(h.y,o.y));this.KC.Re(l).tt(Cs(u,l));const c=Math.min(u.x-l.x,u.y-l.y)>=10;a&&c&&u.x===h.x&&this.XC?(this.mk=!0,this.KC.De(this.ek).Pe(this.hk),this.qC.Ge(this.hk).Ye(h).Ue(o),this.tk.Ge(this.hk).Ye(n(h.x,o.y)).Ue(n(o.x,h.y)),this.uk=this.engine.setMouseStyle(this.lk,this.uk)):a&&c&&(this.$C||this.XC)?(this.mk=!0,this.KC.De(this.ik).Pe(this.sk),this.qC.Ge(at),this.tk.Ge(at),this.uk=this.engine.setMouseStyle(this.ak,this.uk)):(this.mk=!1,this.KC.Pe(at).De(O),this.qC.Ge(at),this.tk.Ge(at),this.engine.restoreMouseStyle(this.uk)),this.us.xs()}xk(t,i,s){if(this.mk){const t=this.us.Oo({clientX:s.x,clientY:s.y}),e=At({x:t.engineX,y:t.engineY},this.By.us.ft,this.YC),h=ls(e.x,this.YC.x.getInnerStart(),this.YC.x.getInnerEnd())&&ls(e.y,this.YC.y.getInnerStart(),this.YC.y.getInnerEnd()),r=s.x>=i.x||!this.XC?"zoom":"fit",n=this.KC.Va(),o=ws(n,this.KC.ni()),a=Math.min(this.KC.ni().x,this.KC.ni().y)>=10;h&&a&&"zoom"===r&&this.$C?(this.forEachAxisX((t=>{if(t.getChartInteractionZoomByDrag()){const i=At(n,this.YC,t.gg).x,s=At(o,this.YC,t.gg).x;t.At(i,s,!0,!0,"interactionSetInterval")}})),this.forEachAxisY((t=>{if(t.getChartInteractionZoomByDrag()){const i=At(n,this.YC,t.gg).y,s=At(o,this.YC,t.gg).y;t.At(i,s,!0,!0,"interactionSetInterval")}}))):h&&a&&"fit"===r&&this.XC&&this.forEachAxis(jc)}this.KC.Pe(at).De(O),this.qC.Ge(at),this.tk.Ge(at),this.us.xs()}pan(t){this.forEachAxisX((i=>{i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.setStopped(!0).pan(t.y)}))}bk(t){this.forEachAxisX((i=>{i.getChartInteractionPanByDrag()&&i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.getChartInteractionPanByDrag()&&i.setStopped(!0).pan(t.y)}))}zoom(t,i){this.forEachAxis(Xc),this.forEachAxisX((s=>{s.zoom(s.ft.ct(t.x),i.x)})),this.forEachAxisY((s=>{s.zoom(s.ft.ct(t.y),i.y)}))}Mk(t,i){this.forEachAxisX((s=>{s.getChartInteractionZoomByWheel()&&(Xc(s),s.zoom(s.ft.ct(t.x),i.x))})),this.forEachAxisY((s=>{s.getChartInteractionZoomByWheel()&&(Xc(s),s.zoom(s.ft.ct(t.y),i.y))}))}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}sf(){const t=[];return this.forEachAxis((i=>i.Fg((i=>t.push(i))))),super.sf().concat(t)}kC(){return this.JC}xe(){return this.Ey(this.Xb)}setCursorEnabledDuringAxisAnimation(t){return this.QC=t,this}getCursorEnabledDuringAxisAnimation(){return this.QC}forEachAxis(t){return this.forEachAxisX(t),this.forEachAxisY(t),this}translateCoordinate(t,i,s){if(s){const e=t,h=i,r=Yo(h)?h:ee(h)?this.mg:void 0;if(r&&ie(s)){const t=At(e,r,this.us.ft);return this.us.No({engineX:t.x,engineY:t.y})}if(r&&ee(s))return At(e,r,this.mg);if(r&&Yo(s))return At(e,r,s)}else{const s=t;if(ee(i)){const t=this.us.Oo(s);return At({x:t.engineX,y:t.engineY},this.us.ft,this.mg)}if(Yo(i)){const t=i,e=this.us.Oo(s);return At({x:e.engineX,y:e.engineY},this.us.ft,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}}!function(t){t.CenterTop="center-top",t.RightTop="right-top",t.LeftTop="left-top",t.CenterBottom="center-bottom",t.RightBottom="right-bottom",t.LeftBottom="left-bottom",t.SeriesCenterTop="series-center-top",t.SeriesRightTop="series-right-top",t.SeriesLeftTop="series-left-top",t.SeriesCenterBottom="series-center-bottom",t.SeriesRightBottom="series-right-bottom",t.SeriesLeftBottom="series-left-bottom"}(Kc||(Kc={}));const td=Kc.CenterTop,id=t=>{switch(t){case"center-top":case"series-center-bottom":return{left:0,right:0,top:0,bottom:5};case"left-top":return{left:20,right:0,top:0,bottom:5};case"right-top":return{left:0,right:20,top:0,bottom:5};case"center-bottom":return{left:0,right:0,top:0,bottom:0};case"left-bottom":return{left:20,right:0,top:0,bottom:0};case"right-bottom":return{left:0,right:20,top:0,bottom:0};case"series-center-top":return{left:0,right:0,top:5,bottom:0};case"series-left-top":return{left:5,right:0,top:5,bottom:0};case"series-right-top":return{left:0,right:5,top:5,bottom:0};case"series-left-bottom":return{left:5,right:0,top:0,bottom:5};case"series-right-bottom":return{left:0,right:5,top:0,bottom:5}}return Oi(0,`Unexpected ChartXY title position selection ${t}`)},sd=(t,i,s,e,h,r)=>{e.x,h.left,h.right;const n=e.y+h.bottom+h.top,o=(h.left-h.right)*i.x,a=(h.bottom-h.top)*i.y;switch(t){case"center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-(r.top+h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:o,y:100-(r.top-h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100+o,y:100-(r.top-h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50+o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100+o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"series-center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:s.left*i.x+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100-s.right*i.x+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50,y:s.bottom*i.y+a},marginsWithTitle:s};case"series-left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:s.left*i.x+o,y:s.bottom*i.y+a},marginsWithTitle:s};case"series-right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100-s.right*i.x+o,y:s.bottom*i.y+a},marginsWithTitle:s}}return Oi(0,`Unexpected ChartXY title position selection ${t}`)},ed=(t,i)=>{const s=[];t.forEach(((t,e)=>{const h=i[e],r=s.find((i=>i.iParallel===t.iParallel));r?(r.stacks.push({...t,...h}),r.stacks.sort(((t,i)=>t.iStack-i.iStack))):s.push({iParallel:t.iParallel,stacks:[{...t,...h}]})}));const e=s.map((t=>{const i=t.stacks.reduce(((t,i)=>Math.max(t,i.Eg)),0),s=t.stacks.reduce(((t,i)=>Math.max(t,i.zg)),0),e=t.stacks.reduce(((t,i)=>Math.max(t,i.Hd)),0),h=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"relative"in i.axis.Yd?i.axis.Yd.relative:0)),0);return{...t,ticksSizeMax:i,titleSizeMax:s,sumRelativeSize:h,thicknessMax:e}}));return e.sort(((t,i)=>t.iParallel-i.iParallel)),{groups:e,thicknessTotal:e.reduce(((t,i)=>t+i.thicknessMax),0)}},hd=(t,i,s)=>{var e;const h=Array.from(new Set(s.map((t=>t.series.ds())))),r=1===h.length&&void 0!==h[0]?h[0]:void 0,n="ProgressiveY"===r||"RegressiveY"===r?{progressiveDimension:"Y",progressiveAxis:i.axisY,valueDimension:"X",hitValueAxis:t=>t.axisX,value:t=>t.x,position:t=>t.y}:{progressiveDimension:"X",progressiveAxis:i.axisX,valueDimension:"Y",hitValueAxis:t=>t.axisY,value:t=>t.y,position:t=>t.x},o=n.progressiveAxis.getTickStrategy();return St(i)?za(i,[[i.series],[t.getDefaultAxisX().getTitle()||"X","",{text:ne(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:ne(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],void 0!==i.intensity?["Value","",{text:ne(i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]:[]]):1===s.length?"Time"===o||"DateTime"===o?i.multiHit?[[ne(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis)],...za(i,[[i.series,""],[`${n.valueDimension}1`,"",{text:ne(n.hitValueAxis(i).formatValue(n.value(i.multiHit[0])),n.hitValueAxis(i)),font:{weight:"bold"}}],[`${n.valueDimension}2`,"",{text:ne(n.hitValueAxis(i).formatValue(n.value(i.multiHit[1])),n.hitValueAxis(i)),font:{weight:"bold"}}]])]:[[ne(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis)],...za(i,[[i.series,"",{text:ne(n.hitValueAxis(i).formatValue(n.value(i)),n.hitValueAxis(i)),font:{weight:"bold"}}]])]:i.multiHit?za(i,[[i.series],[n.progressiveDimension,"",{text:ne(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),font:{weight:"bold"}}],[`${n.valueDimension}1`,"",{text:ne(n.hitValueAxis(i).formatValue(n.value(i.multiHit[0])),n.hitValueAxis(i)),font:{weight:"bold"}}],[`${n.valueDimension}2`,"",{text:ne(n.hitValueAxis(i).formatValue(n.value(i.multiHit[1])),n.hitValueAxis(i)),font:{weight:"bold"}}]]):za(i,[[i.series],[n.progressiveDimension,"",{text:ne(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),font:{weight:"bold"}}],[n.valueDimension,"",{text:ne(n.hitValueAxis(i).formatValue(n.value(i)),n.hitValueAxis(i)),font:{weight:"bold"}}]]):r?[ne(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),...s.map((t=>t.multiHit?za(t,[[t.series,""],[`${n.valueDimension}1`,"",{text:ne(n.hitValueAxis(t).formatValue(n.value(t.multiHit[0])),n.hitValueAxis(t)),font:{weight:"bold"}}],[`${n.valueDimension}2`,"",{text:ne(n.hitValueAxis(t).formatValue(n.value(t.multiHit[1])),n.hitValueAxis(t)),font:{weight:"bold"}}]]):za(t,[[t.series,"",{text:ne(n.hitValueAxis(t).formatValue(n.value(t)),n.hitValueAxis(t)),font:{weight:"bold"}}]]))).flat()]:s.map((t=>za(t,[[t.series],[n.progressiveDimension,"",{text:ne(n.progressiveAxis.formatValue(n.position(t)),n.progressiveAxis),font:{weight:"bold"}}],[n.valueDimension,"",{text:ne(n.hitValueAxis(t).formatValue(n.value(t)),n.hitValueAxis(t)),font:{weight:"bold"}}]]))).flat()},rd=t=>t instanceof Ou||t instanceof sc||t instanceof ac||t instanceof Ju||t instanceof Fc||t instanceof Tc||t instanceof Wc;class nd{constructor(t,i,e,h,r,n,o){this.coordsRelative="relative",this.coordsClient="client",this.L=new s,this.Ok=[],this.Nk=new Map,this.Bv=new Map,this.Gk=(t,i,s)=>{0!==this.Bv.size&&void 0!==[...this.Bv.values()].find((({series:t})=>!0===t.getVisible()))||this.Wk.At(i,s,!1,!1,"zoomBandChart"),this.Uk.us.xs()},i.us.jn(Vo.Sf),this.vA=t,this.Yk=(null==n?void 0:n.orientation)||"x",this.Hk=void 0!==(null==n?void 0:n.useSharedValueAxis)&&n.useSharedValueAxis,this.$k=h,this.ju="x"===this.Yk?Wo:Uo;const a={...n,defaultAxisX:this.ju.getWidth({x:null==n?void 0:n.defaultAxis,y:void 0}),defaultAxisY:this.ju.getHeight({x:null==n?void 0:n.defaultAxis,y:void 0})};this.Uk=new qc(t,i,e,Yt,r,a,o).setTitle("Zoom Band Chart").setMouseInteractions(!1).setCursorMode(void 0),this.engine=this.Uk.engine;const l=this.Uk.getDefaultAxisX().setMouseInteractions(!1),u=this.Uk.getDefaultAxisY().setMouseInteractions(!1);this.Wk=this.ju.getWidth({x:l,y:u}).setScrollStrategy(nh.fitting).setAnimationScroll(!1).setStrokeStyle(at).setTickStrategy(oh.Empty),(null==n?void 0:n.useSharedValueAxis)?this.Xk=this.ju.getHeight({x:l,y:u}):this.ju.getHeight({x:l,y:u}).dispose();const c=this.getTheme().zoomBandChartDefocusOverlayFillStyle||new U({color:this.getTheme().isDark?S(0,0,0,180):S(255,255,255,180)});this.jk=[this.Uk.FA.Be(this.Wk.gg).De(c).Pe(at),this.Uk.FA.Be(this.Wk.gg).De(c).Pe(at)];const d=this.Uk.FA.Ug(this.Wk.gg).Ge(this.getTheme().zoomBandChartSplitterStrokeStyle||this.getTheme().chartXYSeriesBackgroundStrokeStyle);this.Zk={collection:d,members:new Array(5).fill(0).map((t=>d.$r()))};const f=this.getTheme(),A="function"==typeof f.zoomBandChartKnobFillStyle?f.zoomBandChartKnobFillStyle(this.vA.Js):f.zoomBandChartKnobFillStyle||O;this.Qk=[this.Uk.FA.Be(this.Uk.mg).De(A).Pe(at),this.Uk.FA.Be(this.Uk.mg).De(A).Pe(at)],this.Jk=this.getTheme().zoomBandChartKnobSize||{x:0,y:0},this.Kk()}add(t){var i,s,e,h,r;const n=this.Ok.map((t=>t.axis)),o="x"===this.Yk?t.axisX:t.axisY;if(!n.includes(o)){const t=o.onIntervalChange(this.Gk);this.Ok.push({axis:o,deattach:()=>{o.offIntervalChange(t)}}),this.Wk.ir(o.tr()),this.qk&&this.qk.remove(),this.qk=pt(...this.Ok.map((t=>t.axis)))}const a=this.ju.getHeight({x:t.axisX,y:t.axisY});let l;if(this.Hk)l=this.Xk;else{const t=this.Nk.get(a);t?l=t:(l=this.ju.getHeight({x:this.Uk.addAxisX.bind(this.Uk),y:this.Uk.addAxisY.bind(this.Uk)})(),this.tT(l)),this.Nk.set(a,l)}const u=this.ju.getWidth({x:this.Wk,y:l}),c=this.ju.getHeight({x:this.Wk,y:l});let d;const f=[],A=(t,i)=>{const s=t=>{if(0!==t.length)if("x"in t[0]){const s=t;i.add(s)}else{const s=t,e=[];for(let t=0;t<s.length;t+=1){const i=s[t];e.push({x:i[0],y:i[4]})}i.add(e)}},e=t.WM();s(e);const h=t.UM(((t,i)=>s(i)));f.push((()=>t.YM(h)));const r=t.HM((()=>i.clear()));f.push((()=>{t.$M(r)}))};if(t instanceof Wc)d=this.Uk.addPointLineAreaSeries({...t.Jn,xAxis:u,yAxis:c}).setStrokeStyle(t.getStrokeStyle()).setAreaFillStyle(t.getAreaFillStyle()).setPointFillStyle(t.getPointFillStyle()).setPointAlignment(t.getPointAlignment()).setPointRotation(t.getPointRotation()).setPointShape(t.getPointShape()).setPointSize(t.getPointSize()).setCurvePreprocessing(t.getCurvePreprocessing()),d.setDataSet(t.UC());else if(t instanceof Oc||t instanceof Fc){const s=this.Uk.addLineSeries({xAxis:u,yAxis:c,dataPattern:t instanceof Oc?null===(i=t.Jn)||void 0===i?void 0:i.dataPattern:void 0});if(t instanceof Oc)s.setStrokeStyle(t.getStrokeStyle());else{const i=od(t);i&&s.setStrokeStyle(i)}A(t,s),d=s}else if(t instanceof hc){const i=this.Uk.addAreaSeries({xAxis:u,yAxis:c,baseline:t.Z_}).setFillStyle(t.getFillStyle()).setStrokeStyle(t.getStrokeStyle());A(t,i),d=i}else if(t instanceof Nc){const i=this.Uk.addPointSeries({xAxis:u,yAxis:c,pointShape:null===(s=t.Jn)||void 0===s?void 0:s.pointShape}).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof Tc){const i=this.Uk.addStepSeries({xAxis:u,yAxis:c,pointShape:null===(e=t.Jn)||void 0===e?void 0:e.pointShape,mode:t.mw}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof yc){const i=this.Uk.addSplineSeries({xAxis:u,yAxis:c,pointShape:null===(h=t.Jn)||void 0===h?void 0:h.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof fc){const i=this.Uk.addSplineSeries({xAxis:u,yAxis:c,pointShape:null===(r=t.Jn)||void 0===r?void 0:r.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof ac){const i=this.Uk.addAreaRangeSeries({xAxis:u,yAxis:c}).setLowFillStyle(t.getLowFillStyle()).setHighFillStyle(t.getHighFillStyle()).setLowStrokeStyle(t.getLowStrokeStyle()).setHighStrokeStyle(t.getHighStrokeStyle()).add(t.WM()),s=t.UM(((t,s)=>i.add(s)));f.push((()=>t.YM(s))),d=i;const e=t.HM((()=>i.clear()));f.push((()=>{t.$M(e)}))}else{if(!(t instanceof Qu))throw new Error("LightningChart JS Zoom Band Chart unsupported series type");{const i=this.Uk.addHeatmapGridSeries({xAxis:u,yAxis:c,...t.s_}),s=()=>{i.setWireframeStyle(t.getWireframeStyle()).setIntensityInterpolation(t.getIntensityInterpolation()).setFillStyle(t.getFillStyle())};s(),d=i,t.r_(d);const e=t.a_(((t,s)=>i.invalidateIntensityValues(s))),h=t.n_(s);f.push((()=>{t.l_(e),t.o_(h)}));const r=t.HM((()=>i.clear()));f.push((()=>{t.$M(r)}))}}d.setMouseInteractions(!1);const g=t.onVisibleStateChanged(((t,i)=>{d.setVisible(i)}));f.push((()=>{t.offVisibleStateChanged(g)}));const y=t.onHighlight(((t,i)=>d.setHighlight(i)));f.push((()=>{t.offHighlight(y)}));const m=t.onDispose((()=>{this.disposeSeries(t)}));return f.push((()=>{t.offDispose(m)})),this.Bv.set(t,{series:d,clearReferences:()=>f.forEach((t=>t()))}),d}disposeSeries(t){const i=this.Bv.get(t);if(i){const{clearReferences:s}=i;s(),this.Bv.delete(t),i.series.dispose();const e=this.ju.getHeight({x:t.axisX,y:t.axisY}),h=this.Nk.get(e);h&&0===h.Bg().length&&(this.Nk.delete(e),h.dispose())}const s="x"===this.Yk?t.axisX:t.axisY;if(!Array.from(this.Bv.keys()).find((t=>s===("x"===this.Yk?t.axisX:t.axisY)))){const t=this.Ok.findIndex((t=>t.axis===s));this.Ok[t].deattach(),this.Ok.splice(t,1)}return this}setDefocusOverlayFillStyle(t){return this.jk.forEach((i=>i.De(t))),this.Uk.us.xs(),this}getDefocusOverlayFillStyle(){return this.jk[0].$h()}setSplitterStrokeStyle(t){return this.Zk.collection.Ge(t),this.Uk.us.xs(),this}getSplitterStrokeStyle(){return this.Zk.collection.mu()}setKnobFillStyle(t){return this.Qk.forEach((i=>i.De(t))),this.Uk.us.xs(),this}getKnobFillStyle(){return this.Qk[0].$h()}setKnobStrokeStyle(t){return this.Qk.forEach((i=>i.Pe(t))),this.Uk.us.xs(),this}getKnobStrokeStyle(){return this.Qk[0].mo()}setKnobSize(t){return this.Jk=t,this.Uk.us.xs(),this}getKnobSize(){return this.Jk}getDefaultAxisX(){return this.Uk.getDefaultAxisX()}getDefaultAxisY(){return this.Uk.getDefaultAxisY()}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}tT(t){t.setTickStrategy(oh.Empty).setMouseInteractions(!1).setNibStyle(at).setStrokeStyle(at)}Kk(){let t;const i=(t,i,s)=>{var e,h;const r="x"===this.Yk?null===(e=Array.from(this.Bv.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this.Bv.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=r.getInterval(),o=this.Wk.getInterval();Math.abs(this.Wk.ft.dt(t)-this.Wk.ft.dt(i))<10||Math.sign(i-t)!==Math.sign(n.end-n.start)||Math.min(t,i)<Math.min(o.start,o.end)||Math.max(t,i)>Math.max(o.start,o.end)&&Math.max(n.start,n.end)<Math.max(t,i)||r.At(t,i,s,!0,"zoomBandChart")};this.Qk.forEach(((s,e)=>{s.setMouseEnterEventHandler((()=>{t=this.engine.setMouseStyle(this.ju.getWidth({x:Xe.Horizontal,y:Xe.Vertical}),t)})),s.setMouseLeaveEventHandler((()=>{this.engine.restoreMouseStyle(t)}));const h=t=>{var s,h;const r="x"===this.Yk?null===(s=Array.from(this.Bv.keys())[0])||void 0===s?void 0:s.axisX:null===(h=Array.from(this.Bv.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=this.ju.getWidth(this.Uk.translateCoordinate(t,this.Uk.coordsAxis)),o=r.getInterval(),a=0===e?n:o.start,l=1===e?n:o.end;i(a,l,!1),di(t)};s.setMouseDragEventHandler(((t,i,s,e,r)=>h(i)));const r=Ae(new ye(void 0,((t,i,s,e,r)=>h(r))));s.setTouchStartEventHandler(r.onTouchStart),s.setTouchMoveEventHandler(r.onTouchMove),s.setTouchEndEventHandler(r.onTouchEnd)})),this.Uk.onSeriesBackgroundMouseEnter((()=>{t=this.engine.setMouseStyle(Xe.Move,t)})),this.Uk.onSeriesBackgroundMouseLeave((()=>{this.engine.restoreMouseStyle(t)}));const s=(t,s)=>{var e,h;const r="x"===this.Yk?null===(e=Array.from(this.Bv.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this.Bv.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=r.getInterval(),o=this.Wk.ft.gi(n.start,this.ju.getWidth(t)),a=this.Wk.ft.gi(n.end,this.ju.getWidth(t));i(o,a,!1),di(s)};this.Uk.onSeriesBackgroundMouseDrag(((t,i,e,h,r)=>s(r,i)));const e=Ae(new ye(void 0,((t,i,e,h,r)=>s(h,r))));this.Uk.onSeriesBackgroundMouseWheel(((t,s)=>{var e,h;const r="x"===this.Yk?null===(e=Array.from(this.Bv.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this.Bv.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=r.getInterval(),o=this.Wk.getInterval(),a=this.ju.getWidth(this.Uk.translateCoordinate(s,this.Uk.coordsAxis)),l=this.Wk.ft.dt(n.start),u=this.Wk.ft.dt(n.end),c=this.Wk.ft.dt(a),d=$t((c-l)/(u-l),0,1),f=.2*Math.abs(u-l)*r.Wf,A=d*f*-Math.sign(s.deltaY),g=(1-d)*f*Math.sign(s.deltaY),y=$t(this.Wk.ft.gi(n.start,A),o.start,o.end),m=$t(this.Wk.ft.gi(n.end,g),o.start,o.end);i(y,m,!1),di(s)})),this.Uk.onSeriesBackgroundTouchStart(e.onTouchStart),this.Uk.onSeriesBackgroundTouchMove(e.onTouchMove),this.Uk.onSeriesBackgroundTouchEnd(e.onTouchEnd),this.jk.forEach(((s,e)=>{s.setMouseEnterEventHandler((()=>{t=this.engine.setMouseStyle(Xe.Point,t)})),s.setMouseLeaveEventHandler((()=>{this.engine.restoreMouseStyle(t)}));const h=t=>{var s,e;const h="x"===this.Yk?null===(s=Array.from(this.Bv.keys())[0])||void 0===s?void 0:s.axisX:null===(e=Array.from(this.Bv.keys())[0])||void 0===e?void 0:e.axisY;if(!h)return;const r=this.ju.getWidth(this.Uk.translateCoordinate(t,this.Uk.coordsAxis)),n=h.getInterval(),o=this.Wk.getInterval(),a=$t(r-(n.end-n.start)/2,Math.min(o.start,o.end),Math.max(o.start,o.end)-Math.abs(n.end-n.start)),l=a+(n.end-n.start);i(a,l,!0),di(t)};s.setMouseClickEventHandler(((t,i)=>h(i)));const r=Ae(new class{constructor(t,i=300){this.zs=!1,this.Vs=[],this.Os=300,this.Ns=t,this.Os=i}Rs(t,i){const s=Ot.performance.now();let e=!1;for(let t=0;t<this.Vs.length;t+=1)s-this.Vs[t].time>=this.Os?(this.Vs.splice(t,1),t-=1):this.Vs[t].state&&(e=!0);return this.zs?0===i.interactions.length&&(this.Vs.push({state:!1,time:s}),this.zs=!1):1===i.interactions.length&&"pointerdown"===i.type&&(this.Vs.push({state:!0,time:s}),e=!0,this.zs=!0),e}Es(t,i,s){if(s&&!this.zs){const s=this.Vs.reduce(((t,i)=>(i.state?t.on+=1:t.off+=1,t)),{on:0,off:0});s.on>=1&&s.off>=1&&(this.Ns(t,i),this.Vs.length=0)}}}(((t,i)=>h(i))));s.setTouchStartEventHandler(r.onTouchStart),s.setTouchMoveEventHandler(r.onTouchMove),s.setTouchEndEventHandler(r.onTouchEnd)}))}getSizePixels(){return this.Uk.getSizePixels()}onResize(t){return this.Uk.onResize(((i,s,e,h,r)=>t(this,s,e,h,r)))}offResize(t){return this.Uk.offResize(t)}Vr(t){this.Uk.Vr(t)}getMinimumSize(){return this.Uk.getMinimumSize()}Z(){return this.Uk.Z()}J(){return this.Uk.J()}Le(t){var i,s,e,h;const r=Ri(Array.from(this.Bv.keys()).map((t=>t.chart))),n="x"===this.Yk?null===(i=Array.from(this.Bv.keys())[0])||void 0===i?void 0:i.axisX:null===(s=Array.from(this.Bv.keys())[0])||void 0===s?void 0:s.axisY;if("x"===this.Yk){const t=r.reduce(((t,i)=>{const s=[];i.forEachAxisY((t=>{if(0!==t.ug)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.Kg())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),i=r.reduce(((t,i)=>{const s=[];i.forEachAxisY((t=>{if(100!==t.ug)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.Kg())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),s=r.reduce(((t,i)=>Math.max(t,i.getPadding().left)),0),h=r.reduce(((t,i)=>Math.max(t,i.getPadding().right)),0);this.Uk.forEachAxisY((t=>t.setThickness(0))),null===(e=this.getDefaultAxisY())||void 0===e||e.setThickness(t),this.Uk.setPadding({left:s+(0===r.length?10:0),right:h+i+(0===r.length?10:0)})}else{const t=r.reduce(((t,i)=>{const s=[];i.forEachAxisX((t=>{if(0!==t.ug)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.Kg())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),i=r.reduce(((t,i)=>{const s=[];i.forEachAxisX((t=>{if(100!==t.ug)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.Kg())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),s=r.reduce(((t,i)=>Math.max(t,i.getPadding().bottom)),0),e=r.reduce(((t,i)=>Math.max(t,i.getPadding().top)),0);this.Uk.forEachAxisX((t=>t.setThickness(0))),null===(h=this.getDefaultAxisX())||void 0===h||h.setThickness(t),this.Uk.setPadding({bottom:s+(0===r.length?10:0),top:e+i+(0===r.length?10:0)})}this.Uk.Le(t);const o=this.Wk.getInterval().start,a=this.Wk.getInterval().end,l=$t(n?n.getInterval().start:o,o,a),u=$t(n?n.getInterval().end:a,o,a),c=this.ju.getHeight(this.Uk.YC.getInnerIntervalPixels());this.jk[0].Re(this.ju.toPoint(o,0)).tt(this.ju.toPoint(l-o,c)),this.jk[1].Re(this.ju.toPoint(u,0)).tt(this.ju.toPoint(a-u,c)),this.Zk.members[0].Hg(this.ju.toPoint(o,c),this.ju.toPoint(l,c)),this.Zk.members[1].Hg(this.ju.toPoint(l,c),this.ju.toPoint(l,0)),this.Zk.members[2].Hg(this.ju.toPoint(l,0),this.ju.toPoint(u,0)),this.Zk.members[3].Hg(this.ju.toPoint(u,0),this.ju.toPoint(u,c)),this.Zk.members[4].Hg(this.ju.toPoint(u,c),this.ju.toPoint(a,c));const d=At(this.ju.toPoint(l,c/2),this.Wk.gg,this.Uk.mg),f=At(this.ju.toPoint(u,c/2),this.Wk.gg,this.Uk.mg),A=this.Jk;this.Qk[0].Re({x:d.x-A.x/2,y:d.y-A.y/2}).tt({x:A.x,y:A.y}).Qh(this.ju.getWidth({x:0,y:90})),this.Qk[1].Re({x:f.x-A.x/2,y:f.y-A.y/2}).tt({x:A.x,y:A.y}).Qh(this.ju.getWidth({x:0,y:90}))}setSeriesBackgroundFillStyle(t){return this.Uk.setSeriesBackgroundFillStyle(t),this.Uk.us.xs(),this}getSeriesBackgroundFillStyle(){return this.Uk.getSeriesBackgroundFillStyle()}setSeriesBackgroundStrokeStyle(t){return this.Uk.setSeriesBackgroundStrokeStyle(t),this.Uk.us.xs(),this}getSeriesBackgroundStrokeStyle(){return this.Uk.getSeriesBackgroundStrokeStyle()}setSeriesBackgroundEffect(t){return this.Uk.setSeriesBackgroundEffect(t),this.Uk.us.xs(),this}getSeriesBackgroundEffect(){return this.Uk.getSeriesBackgroundEffect()}getTheme(){return this.Uk.getTheme()}setTitle(t){return this.Uk.setTitle(t),this}getTitle(){return this.Uk.getTitle()}setTitleFillStyle(t){return this.Uk.setTitleFillStyle(t),this}getTitleFillStyle(){return this.Uk.getTitleFillStyle()}setTitleFont(t){return this.Uk.setTitleFont(t),this}getTitleFont(){return this.Uk.getTitleFont()}setTitleMargin(t){return this.Uk.setTitleMargin(t),this}getTitleMargin(){return this.Uk.getTitleMargin()}setPadding(t){return this.Uk.setPadding(t),this}getPadding(){return this.Uk.getPadding()}setBackgroundFillStyle(t){return this.Uk.setBackgroundFillStyle(t),this}getBackgroundFillStyle(){return this.Uk.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.Uk.setBackgroundStrokeStyle(t),this}getBackgroundStrokeStyle(){return this.Uk.getBackgroundStrokeStyle()}translateCoordinate(t,i,s){return Fa(t,i,s,this.Uk.mg,this.Uk.us)}addUIElement(t,i){return this.Uk.addUIElement(t,i)}addLegendBox(t,i){return this.Uk.addLegendBox(t,i)}getLegendBoxes(){return this.Uk.getLegendBoxes()}saveToFile(t,i,s){return this.Uk.saveToFile(t,i,s),this}dispose(){return this.Uk.dispose(),this.Nk.clear(),this.Bv.clear(),this.$k(this),this}isDisposed(){return this.Uk.isDisposed()}onDispose(t){return this.Uk.onDispose((()=>t(this)))}offDispose(t){return this.Uk.offDispose(t)}}const od=t=>{if("getStrokeStyle"in t)return t.getStrokeStyle();const i=(t=>t instanceof Oc||t instanceof hc?t.getStrokeStyle().getFillStyle():t instanceof Nc||t instanceof fc?t.getPointFillStyle():void 0)(t);return i?new ve({thickness:2,fillStyle:i}):void 0};class ad extends _u{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.ws="Point Series",this.Xx=[],this.jx=!1,this.qx=3,this.Ma=0,this.ke=Ii(this.qi.polarPointSeriesFillStyle,r),this.gd=new Vn({dataPattern:null}),this.Za=t.vd(e).Ge(at).pd(O).md(this.ke).Sd(sr.Circle).wd(this.qx).cs(this.getHighlight()).yd(this.gd),this.fs(this.Za)}solveNearest(t,i="show-nearest"){const s=this.chart.translateCoordinate(t,this.chart.coordsAxis),e=wu([s],this.scale)[0],h=this.gd.Kc(e,Ea(i),this.scale,this.chart.mg);if(!h)return;const r=Tu(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Ji(t,i){return ji({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}setData(t){return 0!==this.Xx.length&&this.chart.us.jn(Vo.kf),this.Xx=ku(t),this.jx=!0,this.Wx=Cu(this.Xx),this.Ds.xs(),this}setPointAlignment(t){return this.Za.NC(t),this.chart.us.xs(),this}getPointAlignment(){return this.Za.GC()}setPointFillStyle(t){this.ke="function"==typeof t?t(this.ke):t;const i=this.ke;return this.Za.md(i),this.Ds.xs(),this}getPointFillStyle(){return this.ke}setPointSize(t){return this.qx=t,this.Za.wd(t),this.Ds.xs(),this}getPointSize(){return this.qx}setPointShape(t){return this.Za.Sd(t),this.chart.us.xs(),this}getPointShape(){return this.Za.bd()}setPointRotation(t){return this.Ma=t,this.Za.xd(t),this.Ds.xs(),this}getPointRotation(){return this.Ma}nv(){return this.lv&&this.Xx.length>0&&this.getVisible()}Ee(t,i){t.cs(i),this.Ds.xs()}Le(){if(this.jx||this.scale.Kx()){const t=wu(this.Xx,this.scale),i=As(t);this.gd.clear().add(t),this.Za.qo(i),this.jx=!1,this.Za.Es()}}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke})}Is(){return this._s||this.getPointShape()}}class ld{constructor(t,i,e,h){this.L=new s,this.iT=!1,this.re=t,this.sT=i,this.Bv=e,this.Za=h}setGeometry(t){return this.eT=t,this.iT=!0,this.re.us.xs(),this}getGeometry(){return this.eT}setMouseInteractions(t){return this.Za.setMouseInteractions(t),this}dispose(){return this.Za.dispose(),this.sT(this),this.L.emit("dispose",this),this}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setVisible(t){const i=this.Za.getVisible()!==t;return this.Za.setVisible(t),i&&this.L.emit("visibleStateChanged",this,t),this.re.us.xs(),this}getVisible(){return this.Za.getVisible()}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}}class ud extends _u{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.ws="Polygon Series",this.hT=[],this.rT=[],this.nT=t=>{const i=this.rT.indexOf(t);i>=0&&this.rT.splice(i,1);const s=this.hT.findIndex((i=>i===t.Za));s>=0&&this.hT.splice(s,1),this.Ds.xs()},this.ke=Ii(this.qi.polarPolygonSeriesFillStyle,r),this.Te=Ii(this.qi.polarPolygonSeriesStrokeStyle,r)}solveNearest(t,i){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=Nu(e,this.hT,((t,i)=>{const s=t.Kc(i);if(s)return At(s,this.scale,t.us.ft)}),us);if(!h)return;const r=At(h[0],h[1].us.ft,this.scale);if(!this.oT(h[1]))return;const n=Tu(r,this.scale);return{cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this,...n}}Ji(t,i){return ji({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}addPolygon(){const t=new ld(this.chart,this.nT,this,this.aT());return this.rT.push(t),t}setFillStyle(t){this.ke="function"==typeof t?t(this.ke):t;const i=this.ke;for(const t of this.hT)t.De(i);return this.Ds.xs(),this}getFillStyle(){return this.ke}setStrokeStyle(t){this.Te="function"==typeof t?t(this.Te):t;const i=this.Te;for(const t of this.hT)t.Pe(i);return this.Ds.xs(),this}getStrokeStyle(){return this.Te}nv(){return this.lv&&void 0!==this.rT.find((t=>void 0!==t.lT))&&this.getVisible()}Le(){this.rT.forEach((t=>{(t.iT||this.scale.Kx())&&t.uT&&(t.Za.wl(wu(t.uT,this.scale)),t.iT=!1,t.Za.Es())}))}pv(){super.pv();const t=c(Ki,qi);this.rT.forEach((i=>{if(!i.eT)return;const s=!i.iT&&i.uT?i.uT:ku(i.eT);i.uT=s;const e=!i.iT&&i.lT?i.lT:Cu(s);i.lT=e,t.min=Math.min(t.min,e.min),t.max=Math.max(t.max,e.max)})),this.Wx=t}Ee(t,i){t.cs(i),this.Ds.xs()}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke,stroke:this.Te})}aT(){const t=this.Ds.ac(this.scale,Pr.Simple).De(this.ke).Pe(this.Te).cs(this.getHighlight());return this.hT.push(t),this.fs(t),t}oT(t){return this.rT.find((i=>i.Za===t))}}class cd extends _u{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.ws="Area Series",this.Xx=[],this.jx=!1,this.Zx=!1,this.cT=!1,this.ke=Ii(this.qi.polarAreaSeriesFillStyle,r),this.Te=Ii(this.qi.polarAreaSeriesStrokeStyle,r)}setData(t){0!==this.Xx.length&&this.chart.us.jn(Vo.kf);const i=(t=>{const i=[];let s,e,h=!1;for(let r=0;r<t.length;r+=1){const n=t[r];let o=!0;if(s){o=!1;const t=n.angle-s.angle;if(Ht(t,0))o=!0;else{const i=Math.sign(t);void 0===e?(e=i,o=!0):e===i&&(o=!0)}}o?i.push(n):h=!0,s=n}return{progressivePoints:i,userDataModified:h}})(t);return i.userDataModified&&!1===this.cT&&(console.warn(`${this.ws} setData data format is faulty. Consecutive 'angle' values should progress in the same direction! Invalid data points have been removed.`),this.cT=!0),this.Xx=i.progressivePoints,this.jx=!0,this.Wx=Cu(this.Xx),this.Ds.xs(),this}setFillStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.Ds.xs(),this}getFillStyle(){return this.ke}setStrokeStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.Ds.xs(),this}getStrokeStyle(){return this.Te}setConnectDataAutomaticallyEnabled(t){return this.Zx=t,this.Ds.xs(),this}getConnectDataAutomaticallyEnabled(){return this.Zx}nv(){return this.lv&&this.Xx.length>0&&this.getVisible()}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke,stroke:this.Te})}}class dd extends cd{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.dT=this.Ds.ac(this.scale,Pr.Simple).cs(this.getHighlight()),this.fs(this.dT)}solveNearest(t,i){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=this.dT.Kc(e);if(!h)return;const r=Tu(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Ji(t,i){return ji({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}Le(){if(this.jx||this.scale.Kx()){const t=this.Xx,i=!0===this.Zx?wu(t.concat((t=>{if(0===t.length)return t;const i=t[0],s=t[t.length-1];if(Ht(i.angle,s.angle))return t;const e=1*Math.sign(s.angle-i.angle);let h=0;const r=[];for(let t=s.angle+e;!Ht(t%360,i.angle%360);t+=e)if(r.push({angle:t,amplitude:0}),h+=1,h>360)return[];for(let t=0;t<r.length;t+=1)r[t].amplitude=un(s.amplitude,i.amplitude,(t+1)/(r.length+1));return r})(t)),this.scale):[...wu(t,this.scale),{x:0,y:0}];this.dT.wl(i).De(this.ke).Pe(this.Te),this.jx=!1,this.dT.Es()}}Ee(t,i){t.cs(i),this.Ds.xs()}}class fd extends Js{constructor(){super(...arguments),this.Ni="RadialScale",this.fT={start:0,end:1},this.AT=!1,this.gT=0,this.j=n(0,0),this.yT=[0,0],this.mT=[0,0],this.o=!0,this.vi=!0,this.pT=!0,this.vT=!0,this.ST={x:0,y:0},this.ci={x:{displacement:0,scaling:0,highPrecisionOffset:0},y:{displacement:0,scaling:0,highPrecisionOffset:0}}}Tx(t,i){return t===this.fT.start&&i===this.fT.end||(this.fT={start:t,end:i},this.pT=!0,this.bT()),this}kx(){return this.fT}Cx(){return this.fT.end>=this.fT.start}Rx(t){this.AT=t,this.vT=!0}zx(){return!1===this.AT}Ex(t){this.gT=t,this.vT=!0}Dx(){return this.gT}yi(){return this.vi}Mi(){return!1}ut(t,i,s,e){return this.x=new Zs(t.x,i.x,s.x,e?e.x:void 0),this.y=new Zs(t.y,i.y,s.y,e?e.y:void 0),this}mi(){return this.ci}Kx(){return this.pT}xT(){return this.vT}Gi(){return this.ST}Z(){return this.o=!1,this.vi=!1,this.pT=!1,this.vT=!1,this}J(){return this.o=!0,this.vi=!0,this.pT=!0,this.vT=!0,this}tt(t,i){return"object"==typeof t?(this.j.x=t.x,this.j.y=t.y):(this.j.x=t,this.j.y=i),this.bT(),this}Ri(t){return this.yT=t,this.bT(),this}Ei(t){return this.mT=t,this.bT(),this}ri(){return n(this.yT[0]+this.yT[1],this.mT[0]+this.mT[1])}ni(){return this.j}bT(){const t=this.fT,i=n(this.x.oi(this.j.x),this.y.oi(this.j.y)),s=this.yT[0]+this.yT[1],e=this.mT[0]+this.mT[1],h=Math.max(i.x-s,0),r=Math.max(i.y-e,0),o=.5*(h>r?r:h),a=[this.yT[0]+Math.max((h-2*o)/2,0),this.yT[1]+Math.max((h-2*o)/2,0)],l=[this.mT[0]+Math.max((r-2*o)/2,0),this.mT[1]+Math.max((r-2*o)/2,0)],u=Math.abs(t.end-t.start);this.x.tt(this.j.x).ii(a).K(-u,u),this.y.tt(this.j.y).ii(l).K(-u,u),this.ST={x:this.x.getPixelSize(),y:this.y.getPixelSize()},this.ci={x:this.x.mi(),y:this.y.mi()},this.J()}gi(t,i){const s=this.Gi();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}Wi(t,i,s,e){const h=this.Gi(),r=xs(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class Ad extends Nl{constructor(t,i,s,e,h,r,n){super(t,i,s,i.Py("polarChart bg",0),e,i.us.qi.polarChartBackgroundFillStyle,i.us.qi.polarChartBackgroundStrokeStyle,i.us.qi.polarChartTitleFont,i.us.qi.polarChartTitleFillStyle,n),this.coordsClient="client",this.hA=[],this.Go=!0,this.MT=(t,i,s,e,h)=>{this.ux.tt(e,h)},this.aA=yi(this.hA),this._T=t=>{this.hA.push(t)},this.wT=()=>this.Bv,this.us.jn(Vo.pf),this.Ik=i.pb("polarChart series bg",0),this.CT=i.jm("polarChart axis gridlines",0),this.kT=i.jm("polarChart series",1),this.TT=i.jm("polarChart axis lines",2),this.FT=i.jm("polarChart axis ticks",3),this.ux=s.d2({scaleXYConstructor:fd}),this.onResize(this.MT),this.bh.yr("Polar Chart"),this.Vv=this.Ik.rd(this.ux).De(this.qi.polarChartSeriesBackgroundFillStyle).Pe(at).uu(0).Ue(360).Au(0),this.Ov=this.Ik.rd(this.ux).De(O).Pe(this.qi.polarChartSeriesBackgroundStrokeStyle).uu(0).Ue(360).Au(0),super.zv(this.Vv,this.Ov),this.Iy(h,this.mg),this.IT=new gu(this,this.ux,this.qi,!1!==(null==r?void 0:r.animationsEnabled),this.CT,this.TT,this.FT,this.es,this.wT),this.PT=new mu(this,this.ux,this.qi,!1!==(null==r?void 0:r.animationsEnabled),this.CT,this.TT,this.FT,this.es),this.coordsAxis={axisAmplitude:this.IT,axisRadial:this.PT};const o=i.Qm(),a=jt(r?r.cursorBuilder:void 0,il);this.Jm=Va(this,o,a.pm(o,this.uiScale,this.uiScale,Yt,this.qi),this,"show-nearest",yd,((t,i)=>{const s=this.translateCoordinate(t,this.coordsClient);return Math.sqrt((s.clientX-i.clientX)**2+(s.clientY-i.clientY)**2)})),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled))}getSeries(){return this.Bv}setCursor(t){return this.Jm.setCursor(t),this}getCursor(){return this.Jm.getCursor()}setCursorMode(t){return this.Jm.setCursorMode(t),this}getCursorMode(){return this.Jm.getCursorMode()}setCustomCursor(t){return this.Jm.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.Jm.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.Jm.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Jm.setCursorFormatting(t),this}getCursorFormatting(){return this.Jm.getCursorFormatting()}solveNearest(t,i=this.getCursorMode()||"show-nearest"){return this.Jm.solveNearest(t,i,this.Bv,((t,i,s)=>t.solveNearest(i,s)))}addCursor(t=il){const i=this.vy(),s=t.pm(i,this.uiScale,this.uiScale,this.Ay(i),this.qi);return this.ky(s),s}translateCoordinate(t,i,s){if(s){const i=t,e=this.mg,h=s;if(ie(h)){const t=At(i,e,this.us.ft);return this.us.No({engineX:t.x,engineY:t.y})}if(ee(h))return i;if(Su(h)){const t=At(i,e,this.ux);return Tu(t,this.ux)}}else{const s=t,e=i;if(se(s)){if(Su(e)){const t=this.us.Oo(s),i=At({x:t.engineX,y:t.engineY},this.us.ft,this.ux);return Tu(i,this.ux)}if(ie(e))return s;if(ee(e)){const t=this.us.Oo(s);return At({x:t.engineX,y:t.engineY},this.us.ft,this.mg)}}else if(bu(s)){if(Su(e))return s;const t=wu([s],this.ux)[0];if(ie(e)){const i=At(t,this.ux,this.us.ft),s={engineX:i.x,engineY:i.y};return this.us.No(s)}if(ee(e))return At(t,this.ux,this.mg)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addLineSeries(t){const i=new Iu(this.kT,this,this.Rv,this.ux,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,this.us.es);return this.Nv(i),i}addPointSeries(t){const i=new ad(this.kT,this,this.Rv,this.ux,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,this.us.es);return this.Nv(i),i}addPointLineSeries(t){const i=new Pu(this.kT,this,this.Rv,this.ux,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,this.us.es);return this.Nv(i),i}addAreaSeries(t){const i=new dd(this.kT,this,this.Rv,this.ux,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,this.us.es);return this.Nv(i),i}addPolygonSeries(t){const i=new ud(this.kT,this,this.Rv,this.ux,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,this.us.es);return this.Nv(i),i}addHeatmapSeries(t){const i=new Fu(this.kT,this,this.Rv,this.ux,this.qi,this.us.es,t);return this.Nv(i),i}addSector(){const t=new xu(this.kT,this,this.aA,this.ux,this.qi,this.us.es);return this._T(t),t}getAmplitudeAxis(){return this.IT}get amplitudeAxis(){return this.IT}get axisAmplitude(){return this.IT}getRadialAxis(){return this.PT}get radialAxis(){return this.PT}get axisRadial(){return this.PT}Le(t){var i,s;super.Le(t),Ra.Oy(this.bh,this.Dy);for(const t of this.Bv)t.pv();this.IT.Dr(),this.PT.Dr();for(const t of this.Bv)t.Le();for(let t=1;t<=2;t+=1){const i=this.IT.Le(),s=this.PT.Le(),e=Ra.Vy(this.bh,this.Dy),h=[this.Ca.left+s,this.Ca.right+s],r=[this.Ca.bottom+s,this.Ca.top+s+e];this.ux.Ri(h).Ei(r);const n=4;if(!(!this.DT||Math.abs(this.DT.amplitude-i)>=n||Math.abs(this.DT.radial-s)>=n)||1!==t){this.DT={amplitude:i,radial:s};break}}const e=this.ux.kx().start,h=this.ux.kx().end,r=this.ux.Cx()?((null===(i=this.DT)||void 0===i?void 0:i.radial)||0)*this.ux.x.getPixelSize()+h-e:((null===(s=this.DT)||void 0===s?void 0:s.radial)||0)*this.ux.x.getPixelSize()+e-h;this.Vv.cu(r).gu(360),this.Ov.cu(r).gu(360);for(const t of this.hA)t.Le();this.Jm.Le(!1,this.Bv,((t,i,s)=>t.solveNearest(i,s)));for(const t of this.Bv)t.xp();return super.Fy(),this.BT(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.IT.setAnimationsEnabled(t),this.PT.setAnimationsEnabled(t),this}setMouseInteractions(t){return this.Go=t,this}getMouseInteractions(){return this.Go}getMinimumSize(){return n(gd,gd)}BT(){}forEachAxis(t){return t(this.IT),t(this.PT),this}dispose(){return this.hA.slice().forEach((t=>t.dispose())),this.Jm.U(),this.Ik.U(),this.CT.U(),this.kT.U(),this.TT.U(),this.FT.U(),super.dispose()}sf(){return[...this.Bv,...this.hA]}}const gd=300,yd=(t,i,s)=>{var e;return Mt(i)?za(i,[[i.series],["Angle","",{text:i.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:ne(t.getAmplitudeAxis().formatValue(i.amplitude),t.amplitudeAxis),font:{weight:"bold"}}],["Intensity","",{text:ne(i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]]):za(i,[[i.series],["Angle","",{text:i.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:ne(t.getAmplitudeAxis().formatValue(i.amplitude),t.amplitudeAxis),font:{weight:"bold"}}]])};class md extends nl{}class pd extends md{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.ws="Slice",this.S=0,this.vm=!1,this.LT=O,this.bm=O,this.xm=this.S,this.wm=K((()=>this.chart.us.xs())),this.km=()=>{this.Tm=void 0},this.index=t,this.chart=e,this.scale=h,this.Ki=r,this.dT=i.ac(h,Pr.Simple).cs(this.getHighlight()),this.fs(this.dT),this.th=s.Nr(h).cs(this.getHighlight()),this.fs(this.th,{isText:!0})}setValue(t){return this.chart.getAnimationsEnabled()?this.getVisible()&&this.Dm(this.xm,t):this.xm=t,this.S=t,this.chart.us.xs(),this}getValue(){return this.S}setVisible(t){return!1===t?this.chart.getAnimationsEnabled()&&this.xm>0?(this.Tm&&(this.Tm.finish(!1),this.Tm=void 0),this.Dm(this.xm,0,(()=>super.setVisible(!1)))):(this.xm=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.Tm&&(this.Tm.finish(!1),this.Tm=void 0),super.setVisible(!0),this.Dm(this.xm,this.S)):(this.xm=this.S,super.setVisible(!0)),this}Dm(t,i,s){this.Tm=this.wm(300,Q.ease)([[t,i]],(([t])=>{this.xm=t,this.chart.us.xs()})),this.Tm.onEveryAnimationEnd(this.km),s&&this.Tm.onAnimationEnd(s)}setStyle(t,i,s,e){this.LT=t,this.bm=s,this.dT.De(this.LT).Pe(i),this.th.De(this.bm).Zh(e);for(let t=0;t<this.Qi.length;t+=1)this.styleLegendEntry(this.Qi[t])}getAnimatedValue(){return this.xm}Ee(t,i){return t.cs(i),this.chart.us.xs(),this}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.LT,stroke:this.dT.mo()})}}var vd;!function(t){t[t.VariableHeight=0]="VariableHeight",t[t.VariableWidth=1]="VariableWidth"}(vd||(vd={}));const Sd=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},bd=(t,i,s,e,h,r=0,n=vd.VariableHeight,o)=>{i=Sd(i,e.x),s=Sd(s,e.x);const a=t.length;let l=0,u=0;l=t.reduce(((t,i)=>t+i.getAnimatedValue()),0);let c={x:o-i/2,y:e.y+h.bottom},d={x:o+i/2,y:e.y+h.bottom},f={x:0,y:h.bottom},A={x:0,y:h.bottom},g=0,y=0;if(r)for(let i=0;i<t.length;i+=1){const s=10;y+=t[i].getAnimatedValue();const o=n===vd.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-y/l*e.y;if(n===vd.VariableWidth){r=o-r<s?Math.max(20,o-s):r;break}0!==g&&g-o-r<s&&(r=Math.max(0,g-o-s)),g=o}const m=(i-s)/2/e.y;for(let g=0;g<a;g+=1){const y=t[g];u+=y.getAnimatedValue();const p=n===vd.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-u/l*e.y;let v=0;g>0&&(c={x:f.x+m*r,y:f.y-r},d={x:A.x-m*r,y:A.y-r}),v=(i+u/l*(s-i))/2,f={x:o-v,y:parseInt(`${n===vd.VariableWidth?c.y-p:p}`,10)},A={x:o+v,y:parseInt(`${n===vd.VariableWidth?d.y-p:p}`,10)},d.x>=c.x&&A.x>f.x&&y.dT.wl([f,c,d,A])}};class xd extends La{constructor(t,i,s,e,h,r,n){super(t,i,s,i.Py("funnelChart bg",0),e,i.us.qi.funnelChartBackgroundFillStyle,i.us.qi.funnelChartBackgroundStrokeStyle,i.us.qi.funnelChartTitleFont,i.us.qi.funnelChartTitleFillStyle,r),this.Bm=[],this.Lm=hl.None,this.zm=!0,this.Nm=0,this.RT=80,this.ET=20,this.zT=0,this.VT=vd.VariableHeight,this.Um=!0,this.Hm=t=>{const i=this.Bm.indexOf(t);i>=0&&(this.Bm.splice(i,1),this.$m())},this.us.jn(Vo.gf),this.Ym=this.qi.effectsText,this.Xm=i.jm("funnelChart bottom",0),this.Zm=i.jm("funnelChart top",1),this.bh.yr("Funnel Chart"),this.Rm=this.qi.funnelChartSliceFillStylePalette,this.Em=this.qi.funnelChartSliceStrokeStyle,this.Vm=this.qi.funnelChartSliceLabelFont,this.Om=this.qi.funnelChartSliceLabelFillStyle;const o=i.Qm(),a=jt(n?n.cursorBuilder:void 0,qa);this.Jm=Va(this,o,a.pm(o,this.uiScale,this.uiScale,Yt,this.qi),void 0,"show-pointed",Md,(()=>0)),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled)),this.Iy(h,this.mg)}setCursor(t){return this.Jm.setCursor(t),this}getCursor(){return this.Jm.getCursor()}setCursorMode(t){return this.Jm.setCursorMode(t),this}getCursorMode(){return this.Jm.getCursorMode()}setCustomCursor(t){return this.Jm.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.Jm.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.Jm.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Jm.setCursorFormatting(t),this}getCursorFormatting(){return this.Jm.getCursorFormatting()}addCursor(t=qa){const i=this.vy(),s=t.pm(i,this.uiScale,this.uiScale,this.Ay(i),this.qi);return this.ky(s),s}addSlice(t,i){const s=new pd(this.Nm,this.Xm,this.Zm,this,this.mg,this.Hm,this.qi,this.us.es);return this.Nm+=1,s.setName(t),s.setValue(i),s.es.rs.bs(this.Ym),s.es.ns.bs(this.Um),this.Bm.push(s),this.us.xs(),s.setHighlightOnHover(this.zm),s.onMouseMove((()=>{this.getCursorMode()&&this.us.xs()})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Bm}setHeadWidth(t){return this.RT=t,this.us.xs(),this}getHeadWidth(){return this.RT}setNeckWidth(t){return this.ET=t,this.us.xs(),this}getNeckWidth(){return this.ET}setSliceGap(t){return this.zT=Math.min(Math.max(t,0),20),this.us.xs(),this}setSliceMode(t){return this.VT=t,this.us.xs(),this}getFunnelSliceMode(){return this.VT}setLUT(t){return this.Xd=t,this.us.xs(),this}setSliceFillStyle(t){return this.Rm=t,this.us.xs(),this}getSliceFillStyle(){return this.Rm}setSliceStrokeStyle(t){return this.Em="function"==typeof t?t(this.Em):t,this.us.xs(),this}getSliceStrokeStyle(){return this.Em}setSliceEffect(t){return this.Um=t,this.Bm.forEach((i=>i.es.ns.bs(t))),this.us.xs(),this}getSliceEffect(){return this.Um}setSliceSorter(t){return this.Lm=t,this.Bm=this.Bm.sort(this.Lm),this.us.xs(),this}getSliceSorter(){return this.Lm}setLabelFillStyle(t){return this.Om="function"==typeof t?t(this.Om):t,this.us.xs(),this}getLabelFillStyle(){return this.Om}setLabelFont(t){return this.Vm="function"==typeof t?t(this.Vm):t,this.us.xs(),this}getLabelFont(){return this.Vm}setLabelEffect(t){return this.Ym=t,this.Bm.forEach((i=>i.es.rs.bs(t))),this.us.xs(),this}getLabelEffect(){return this.Ym}setLabelFormatter(t){return this.qm=t,this.us.xs(),this}getLabelFormatter(){return this.qm}setSliceHighlightOnHover(t){return this.zm=t,this.Bm.forEach((i=>i.setHighlightOnHover(t))),this}Le(t){super.Le(t),Ra.Oy(this.bh,this.Dy),super.Fy();const i=Ra.Vy(this.bh,this.Dy),s=n(this.mg.x.getInnerInterval()-(this.Ca.left+this.Ca.right),this.mg.y.getInnerInterval()-(this.Ca.bottom+this.Ca.top+i)),e=n(this.Ca.left+s.x/2,this.Ca.bottom+s.y/2);this.Bm=this.Bm.sort(this.Lm);for(let t=0,{length:i}=this.Bm;t<i;t+=1)this.Km(this.Bm[t],t);const h=this.Bm.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/r:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.th.yr(this.qm(i,o[t])).Es()}o.push(r),this.Jm.Le(!1,this.Bm,((t,i,s)=>{const e=o[h.indexOf(t)]||0,r=this.us.Oo(i);return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.us.ft,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.us.ft},slice:t,category:t.getName(),value:t.getValue(),relativeValue:e}})),this.tp(h,o,e,s)}Km(t,i){t.setStyle(this.Xd?new U({color:this.Xd.getColors(t.getAnimatedValue())}):this.Rm(i,t),this.Em,this.Om,this.Vm)}$m(){this.Bm=this.Bm.sort(this.Lm),this.us.xs()}sf(){return this.Bm}dispose(){return this.Bm.slice().forEach((t=>t.dispose())),this.Jm.U(),this.Xm.U(),this.Zm.U(),super.dispose()}}const Md=(t,i,s)=>[[i.slice],[{text:i.value.toString(),font:{weight:"bold"}}]],_d=(t,i,s)=>{const e=t.Cl();if(e.length>0){let t;const h=(e[1].y-e[0].y)/2+e[0].y;return t=i===Fd.Left?(e[0].x-e[1].x)/2+e[1].x-s:(e[2].x-(4===e.length?e[3].x:e[1].x))/2+(4===e.length?e[3].x:e[1].x)+s,{x:t,y:h}}},wd=t=>{const i=t.Cl();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class Cd extends xd{constructor(){super(...arguments),this.qm=rl.NamePlusValue,this.OT=10,this.NT=Fd.Left,this.GT=el.LabelsOnSides,this.ip=[],this.rp=this.qi.funnelChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.rp=t;for(let t=0;t<this.ip.length;t+=1)this.ip[t].Ge(this.rp);return this.us.xs(),this}getLabelConnectorStyle(){return this.rp}setLabelConnectorGap(t){return this.OT=t,this.us.xs(),this}getLabelConnectorGap(){return this.OT}setLabelSide(t){return this.NT=t,this.us.xs(),this}getLabelSide(){return this.NT}tp(t,i,s,e){const h=e.x+this.Ca.left+this.Ca.right,r=e.y+this.Ca.top+this.Ca.bottom<250||h<250,o=this.OT;let a,l=0;if(!r)for(let i=0;i<t.length;i+=1)l=Math.max(l,t[i].th.ni().x);a=r?h/2:this.NT===Fd.Right?(this.Ca.left+(h-(this.Ca.right+l)))/2:(this.Ca.left+l+(h-this.Ca.right))/2;const u=e.x-l,c=n(u,e.y);if(bd(t,this.RT,this.ET,c,this.Ca,this.zT,this.VT,a),r)return t.forEach((t=>t.th.setVisible(!1))),void this.ip.forEach((t=>t.setVisible(!1)));this.WT(t,this.NT===Fd.Left?-1:1,-1,s,e);for(let t=0;t<this.ip.length;t+=1)this.ip[t].setVisible(!1);for(let i=0;i<t.length;i+=1)t[i].getVisible()&&this.np(this.UT(t[i],-1,s,o))}getMinimumSize(){return n(500,300)}WT(t,i,s,e,h){if(0===t.length)return;const r=e.x+i*h.x*.5,o=1===s?Math.max:Math.min;let a;for(let e=0;e<t.length;e+=1){const h=t[e];if(0===h.dT.Cl().length)h.th.setVisible(!1);else{let t;h.th.setVisible(!0),a&&(t=a.th.Va().y+s*(a.th.ni().y+10));const e=(_d(h.dT,this.NT,0)||n(0,0)).y,l=void 0===t?e:o(e,t);h.th.Re(n(r,l)).Ga(i).Ua(0),a=h}}}UT(t,i,s,e){const h=t.dT,r=t.th,o=_d(h,this.NT,e);if(o){const t={x:Ps(this.NT===Fd.Left?r.Va().x-i*(e+r.ni().x):r.Va().x+i*(e+r.ni().x),o,s).x,y:Ds(r.Va().y,o,s).y};return[o,t,n(this.NT===Fd.Left?r.Va().x-i*(e+r.ni().x):r.Va().x+i*(e+r.ni().x),t.y)]}}np(t){if(t){let i;for(let t=0;t<this.ip.length;t+=1)if(!this.ip[t].getVisible()){i=this.ip[t].setVisible(!0);break}void 0===i&&(i=this.Zm.op(this.mg,void 0,[gl.InternalUI]).Ge(this.rp),this.ip.push(i)),i.Vt().fl(t)}}}class kd extends xd{constructor(){super(...arguments),this.qm=rl.Name,this.GT=el.LabelsInsideSlices}tp(t,i,s,e){const h=this.Ca.left+e.x/2;bd(t,this.RT,this.ET,e,this.Ca,this.zT,this.VT,h);for(let i=0;i<t.length;i+=1){const s=t[i],e=s.dT,h=s.th,r=wd(e);r&&h.Re(r).Ga(0).Ua(0)}}getMinimumSize(){return n(200,200)}}const Td={LabelsOnSides:Cd,LabelsInsideSlices:kd};var Fd,Id;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(Fd||(Fd={}));class Pd extends nl{}class Dd extends Pd{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.ws="Slice",this.S=0,this.vm=!1,this.LT=O,this.bm=O,this.xm=this.S,this.wm=K((()=>this.chart.us.xs())),this.km=()=>{this.Tm=void 0},this.index=t,this.chart=e,this.scale=h,this.Ki=r,this.dT=i.ac(h,Pr.Simple).cs(this.getHighlight()),this.fs(this.dT),this.th=s.Nr(h).cs(this.getHighlight()),this.fs(this.th,{isText:!0})}setValue(t){return this.chart.getAnimationsEnabled()?this.getVisible()&&this.Dm(this.xm,t):this.xm=t,this.S=t,this.chart.us.xs(),this}getValue(){return this.S}setVisible(t){return!1===t?this.chart.getAnimationsEnabled()&&this.xm>0?(this.Tm&&(this.Tm.finish(!1),this.Tm=void 0),this.Dm(this.xm,0,(()=>super.setVisible(!1)))):(this.xm=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.Tm&&(this.Tm.finish(!1),this.Tm=void 0),super.setVisible(!0),this.Dm(this.xm,this.S)):(this.xm=this.S,super.setVisible(!0)),this}Dm(t,i,s){this.Tm=this.wm(300,Q.ease)([[t,i]],(([t])=>{this.xm=t,this.chart.us.xs()})),this.Tm.onEveryAnimationEnd(this.km),s&&this.Tm.onAnimationEnd(s)}setStyle(t,i,s,e){this.LT=t,this.bm=s,this.dT.De(this.LT).Pe(i),this.th.De(this.bm).Zh(e);for(let t=0;t<this.Qi.length;t+=1)this.styleLegendEntry(this.Qi[t])}getAnimatedValue(){return this.xm}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.LT,stroke:this.dT.mo()})}}!function(t){t[t.VariableHeight=0]="VariableHeight",t[t.VariableWidth=1]="VariableWidth"}(Id||(Id={}));const Bd=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},Ld=(t,i,s,e,h,r=0,n=Id.VariableHeight,o)=>{i=Bd(i,e.x),s=Bd(s,e.x);const a=t.length;let l=0,u=0;l=t.reduce(((t,i)=>t+i.getAnimatedValue()),0);let c={x:o-i/2,y:e.y+h.bottom},d={x:o+i/2,y:e.y+h.bottom},f={x:0,y:h.bottom},A={x:0,y:h.bottom},g=0,y=0;if(r)for(let i=0;i<t.length;i+=1){const s=10;y+=t[i].getAnimatedValue();const o=n===Id.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-y/l*e.y;if(n===Id.VariableWidth){r=o-r<s?Math.max(20,o-s):r;break}0!==g&&g-o-r<s&&(r=Math.max(0,g-o-s)),g=o}const m=(i-s)/2/e.y;for(let g=0;g<a;g+=1){const y=t[g];u+=y.getAnimatedValue();const p=n===Id.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-u/l*e.y;let v=0;g>0&&(c={x:f.x+m*r,y:f.y-r},d={x:A.x-m*r,y:A.y-r}),v=(i+u/l*(s-i))/2,f={x:o-v,y:parseInt(`${n===Id.VariableWidth?c.y-p:p}`,10)},A={x:o+v,y:parseInt(`${n===Id.VariableWidth?d.y-p:p}`,10)},d.x>=c.x&&A.x>=f.x&&y.dT.wl([f,c,d,A])}};class Rd extends La{constructor(t,i,s,e,h,r,n){super(t,i,s,i.Py("pyramidChart bg",0),e,i.us.qi.pyramidChartBackgroundFillStyle,i.us.qi.pyramidChartBackgroundStrokeStyle,i.us.qi.pyramidChartTitleFont,i.us.qi.pyramidChartTitleFillStyle,r),this.Bm=[],this.Lm=hl.None,this.Rm=this.qi.pyramidChartSliceFillStylePalette,this.Em=this.qi.pyramidChartSliceStrokeStyle,this.zm=!0,this.Vm=this.qi.pyramidChartSliceLabelFont,this.Om=this.qi.pyramidChartSliceLabelFillStyle,this.Nm=0,this.RT=0,this.ET=80,this.zT=0,this.VT=Id.VariableHeight,this.Um=!0,this.Hm=t=>{const i=this.Bm.indexOf(t);i>=0&&(this.Bm.splice(i,1),this.$m())},this.us.jn(Vo.gf),this.Ym=this.qi.effectsText,this.Xm=i.jm("pyramidChart bottom",0),this.Zm=i.jm("pyramidChart top",1),this.bh.yr("Pyramid Chart");const o=i.Qm(),a=jt(n?n.cursorBuilder:void 0,qa);this.Jm=Va(this,o,a.pm(o,this.uiScale,this.uiScale,Yt,this.qi),void 0,"show-pointed",Ed,(()=>0)),this.Iy(h,this.mg),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled))}setCursor(t){return this.Jm.setCursor(t),this}getCursor(){return this.Jm.getCursor()}setCursorMode(t){return this.Jm.setCursorMode(t),this}getCursorMode(){return this.Jm.getCursorMode()}setCustomCursor(t){return this.Jm.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.Jm.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.Jm.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Jm.setCursorFormatting(t),this}getCursorFormatting(){return this.Jm.getCursorFormatting()}addCursor(t=qa){const i=this.vy(),s=t.pm(i,this.uiScale,this.uiScale,this.Ay(i),this.qi);return this.ky(s),s}addSlice(t,i){const s=new Dd(this.Nm,this.Xm,this.Zm,this,this.mg,this.Hm,this.qi,this.us.es);return this.Nm+=1,s.setName(t),s.setValue(i),s.es.rs.bs(this.Ym),s.es.ns.bs(this.Um),this.Bm.push(s),this.us.xs(),s.onMouseMove((()=>{this.getCursorMode()&&this.us.xs()})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Bm}setNeckWidth(t){return this.ET=t,this.us.xs(),this}getNeckWidth(){return this.ET}setSliceGap(t){return this.zT=Math.min(Math.max(t,0),20),this.us.xs(),this}setSliceMode(t){return this.VT=t,this.us.xs(),this}getPyramidSliceMode(){return this.VT}setLUT(t){return this.Xd=t,this.us.xs(),this}setSliceFillStyle(t){return this.Rm=t,this.us.xs(),this}getSliceFillStyle(){return this.Rm}setSliceStrokeStyle(t){return this.Em="function"==typeof t?t(this.Em):t,this.us.xs(),this}getSliceStrokeStyle(){return this.Em}setSliceEffect(t){return this.Um=t,this.Bm.forEach((i=>i.es.ns.bs(t))),this.us.xs(),this}getSliceEffect(){return this.Um}setSliceSorter(t){return this.Lm=t,this.Bm=this.Bm.sort(this.Lm),this.us.xs(),this}getSliceSorter(){return this.Lm}setLabelFillStyle(t){return this.Om="function"==typeof t?t(this.Om):t,this.us.xs(),this}getLabelFillStyle(){return this.Om}setLabelFont(t){return this.Vm="function"==typeof t?t(this.Vm):t,this.us.xs(),this}getLabelFont(){return this.Vm}setLabelEffect(t){return this.Ym=t,this.Bm.forEach((i=>i.es.rs.bs(t))),this.us.xs(),this}getLabelEffect(){return this.Ym}setLabelFormatter(t){return this.qm=t,this.us.xs(),this}getLabelFormatter(){return this.qm}setSliceHighlightOnHover(t){return this.zm=t,this.Bm.forEach((i=>i.setHighlightOnHover(t))),this}Le(t){super.Le(t),Ra.Oy(this.bh,this.Dy),super.Fy();const i=Ra.Vy(this.bh,this.Dy),s=n(this.mg.x.getInnerInterval()-(this.Ca.left+this.Ca.right),this.mg.y.getInnerInterval()-(this.Ca.bottom+this.Ca.top+i)),e=n(this.Ca.left+s.x/2,this.Ca.bottom+s.y/2);this.Bm=this.Bm.sort(this.Lm);for(let t=0,{length:i}=this.Bm;t<i;t+=1)this.Km(this.Bm[t],t);const h=this.Bm.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/r:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.th.yr(this.qm(i,o[t])).Es()}o.push(r),this.Jm.Le(!1,this.Bm,((t,i,s)=>{const e=o[h.indexOf(t)]||0,r=this.us.Oo(i);return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.us.ft,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.us.ft},slice:t,category:t.getName(),value:t.getValue(),relativeValue:e}})),this.tp(h,o,e,s)}Km(t,i){t.setStyle(this.Xd?new U({color:this.Xd.getColors(t.getAnimatedValue())}):this.Rm(i,t),this.Em,this.Om,this.Vm)}$m(){this.Bm=this.Bm.sort(this.Lm),this.us.xs()}sf(){return this.Bm}dispose(){return this.Bm.slice().forEach((t=>t.dispose())),this.Jm.U(),this.Xm.U(),this.Zm.U(),super.dispose()}}const Ed=(t,i,s)=>[[i.slice],[{text:i.value.toString(),font:{weight:"bold"}}]],zd=(t,i,s)=>{const e=t.Cl();if(e.length>0){let t;const h=(e[1].y-e[0].y)/2+e[0].y;return t=i===Wd.Left?(e[0].x-e[1].x)/2+e[1].x-s:(e[2].x-(4===e.length?e[3].x:e[1].x))/2+(4===e.length?e[3].x:e[1].x)+s,{x:t,y:h}}},Vd=t=>{const i=t.Cl();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class Od extends Rd{constructor(){super(...arguments),this.qm=rl.NamePlusValue,this.OT=10,this.NT=Wd.Left,this.GT=el.LabelsOnSides,this.ip=[],this.rp=this.qi.pyramidChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.rp=t;for(let t=0;t<this.ip.length;t+=1)this.ip[t].Ge(this.rp);return this.us.xs(),this}getLabelConnectorStyle(){return this.rp}setLabelConnectorGap(t){return this.OT=t,this.us.xs(),this}getLabelConnectorGap(){return this.OT}setLabelSide(t){return this.NT=t,this.us.xs(),this}getLabelSide(){return this.NT}tp(t,i,s,e){const h=e.x+this.Ca.left+this.Ca.right,r=e.y+this.Ca.top+this.Ca.bottom<250||h<250,o=this.OT;let a,l=0;if(!r)for(let i=0;i<t.length;i+=1)l=Math.max(l,t[i].th.ni().x);a=r?h/2:this.NT===Wd.Right?(this.Ca.left+(h-(this.Ca.right+l)))/2:(this.Ca.left+l+(h-this.Ca.right))/2;const u=e.x-l,c=n(u,e.y);if(Ld(t,this.RT,this.ET,c,this.Ca,this.zT,this.VT,a),r)return t.forEach((t=>t.th.setVisible(!1))),void this.ip.forEach((t=>t.setVisible(!1)));this.WT(t,this.NT===Wd.Left?-1:1,-1,s,e);for(let t=0;t<this.ip.length;t+=1)this.ip[t].setVisible(!1);for(let i=0;i<t.length;i+=1)if(t[i].getVisible()){const e=this.UT(t[i],-1,s,o);e&&this.np(e)}}getMinimumSize(){return n(500,300)}WT(t,i,s,e,h){if(0===t.length)return;const r=e.x+i*h.x*.5,o=1===s?Math.max:Math.min;let a;for(let e=0;e<t.length;e+=1){const h=t[e];let l;0===h.dT.Cl().length?h.th.setVisible(!1):h.th.setVisible(!0),a&&(l=a.th.Va().y+s*(a.th.ni().y+10));const u=zd(h.dT,this.NT,0);if(u){const t=u.y,s=void 0===l?t:o(t,l);h.th.Re(n(r,s)).Ga(i).Ua(0)}a=h}}UT(t,i,s,e){const h=t.dT,r=t.th,o=zd(h,this.NT,e);if(o){const t={x:Ps(this.NT===Wd.Left?r.Va().x-i*(e+r.ni().x):r.Va().x+i*(e+r.ni().x),o,s).x,y:Ds(r.Va().y,o,s).y};return[o,t,n(this.NT===Wd.Left?r.Va().x-i*(e+r.ni().x):r.Va().x+i*(e+r.ni().x),t.y)]}}np(t){let i;for(let t=0;t<this.ip.length;t+=1)if(!this.ip[t].getVisible()){i=this.ip[t].setVisible(!0);break}void 0===i&&(i=this.Zm.op(this.mg,void 0,[gl.InternalUI]).Ge(this.rp),this.ip.push(i)),i.Vt().fl(t)}}class Nd extends Rd{constructor(){super(...arguments),this.qm=rl.Name,this.GT=el.LabelsInsideSlices}tp(t,i,s,e){const h=this.Ca.left+e.x/2;Ld(t,this.RT,this.ET,e,this.Ca,this.zT,this.VT,h);for(let i=0;i<t.length;i+=1){const s=t[i].dT,e=t[i].th,h=Vd(s);h&&e.Re(h).Ga(0).Ua(0)}}getMinimumSize(){return n(200,200)}}const Gd={LabelsOnSides:Od,LabelsInsideSlices:Nd};var Wd;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(Wd||(Wd={}));const Ud=(t,i,s,e,h,r)=>(t.alignmentX=(h+Math.PI/2)%(2*Math.PI)<=Math.PI?-1:1,t.alignmentY=h%(2*Math.PI)<=Math.PI?-1:1,t.paddingX=Math.cos(h)*r,t.paddingY=Math.sin(h)*r,t),Yd=(t,i,s,e,h,r,n,o)=>{if(0===i)return t.paddingX=o,t.alignmentX=-1,t};var Hd;!function(t){t[t.Normal=0]="Normal",t[t.Circle=1]="Circle"}(Hd||(Hd={}));class $d{constructor(t,i,e,h,r,n,o,a){this.L=new s,this.YT=t,this.Gr=i,this.scale=e,this.chart=h,this.tag=r,this.axisScale=n,this.HT=o,this.$T=a,this.XT=this.YT.We(this.scale).setMouseInteractions(!1),this.jT=this.Gr.Nr(this.scale).yr(this.tag).setMouseInteractions(!1),this.ZT=this.HT(this,this.YT.op(this.scale,void 0,[gl.InternalUI])).Ge(this.chart.getNibStyle()),this.$T.As([this.jT])}tp(t,i,s,e,h,r,o){const a=i.length,l=i[s>0?s-1:a-1],u=i[s],c=i[s<a-1?s+1:0],d=this.chart.getNibLength();this.XT.Ye(t).Ue(u).Ge(this.chart.getAxisStyle()),this.ZT.Vt().fl(r===Hd.Normal?[ds(u,l,$t(.5*d/Ms(Cs(l,u)),0,1)),u,ds(u,c,$t(.5*d/Ms(Cs(c,u)),0,1))]:((t,i,s,e,h=2)=>{const r=e/s,o=[];for(let a=-e/2;a<=e/2;a+=h){const h=r*(a/e)+i,l=n(t.x+Math.cos(h)*s,t.y+Math.sin(h)*s);o.push(l)}return o})(t,e,h,d)),o?this.jT.setVisible(!0).Re(ws(u,n(o.paddingX,o.paddingY))).Ga(o.alignmentX).Ua(o.alignmentY):this.jT.setVisible(!1)}getLabelSize(){return this.jT.Zh(this.chart.getAxisLabelFont()).De(this.chart.getAxisLabelStyle()).Es().ni()}dispose(){this.XT&&this.XT.dispose(),this.jT&&this.jT.dispose(),this.ZT&&this.ZT.dispose()}}class Xd extends Mu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,a,l,c),this.ws="Spider Series",this.Mu=new Map,this.$i=ue.onHover,this.qx=8,this.Ma=0,this.QT=(()=>{const t=K((()=>{}));let i;return(s,e,h,r)=>{const n=null==r?void 0:r.onStart,o=null==r?void 0:r.onCompleted,a=(null==r?void 0:r.easing)||Q.ease,l=(null==r?void 0:r.durationMs)||1e3;let u;if(i)if(0===i.nextAnimations.length){const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);u=t}else{s=i.nextAnimations.pop().values[0][0];const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);u=t}else u=t(l,a)([[s,e]],(([t])=>{h(t)})),i=u;u.onAnimationEnd((()=>{i=void 0})),n&&u.onAnimationStart(n),o&&u.onAnimationEnd(o)}})(),this.JT={},this.KT={},this._m=this.getVisible(),this.qT=1,this.tF=((t,i)=>{const s=K((()=>{}));let e,h,r=1;return(n,o,a)=>{if(n===h)return;h=n;const l=(null==a?void 0:a.easing)||Q.ease,u=(null==a?void 0:a.durationMs)||1e3;e&&(e.finish(!1),e=void 0),!1===n?o&&r?(e=s(u,l)([[r,0]],(([i])=>{r=i,t(r)})),e.onAnimationEnd((()=>{e=void 0,i(!1)}))):(r=0,i(!1)):o?(i(!0),e=s(u,l)([[r,1]],(([i])=>{r=i,t(r)})),e.onAnimationEnd((()=>{e=void 0}))):(r=1,i(!0))}})((t=>{this.qT=t,this.Ds.us.xs()}),(t=>{super.setVisible(t)})),this.chart=t,this.Ds=i,this.tM=e,this.iF=h,this.vb=r,this.sF=n,this.eF=o,this.scale=s,this.hF=Ii(l.spiderSeriesFillStyle,u),this.rF=Ii(l.spiderSeriesStrokeStyle,u),this.nF=Ii(l.spiderSeriesPointFillStyle,u)}Ji(t,i){const s=this.eF(i);if(void 0!==s&&this.Mu.has(s.tag)){const t=this.Mu.get(s.tag),i=this.sF(s.tag,t);return{cursorPosition:{pointMarker:i,pointMarkerScale:this.scale,resultTable:i,resultTableScale:this.scale},series:this,axis:s.tag,value:t}}}nv(){return this.lv&&this.Mu.size>0&&this.getVisible()}addPoints(...t){this.Mu.size>0&&this.chart.us.jn(Vo.kf),t=t.filter((t=>void 0!==t.axis));for(let i=0;i<t.length;i+=1)this.iF(t[i].axis);if(this.chart.getAnimationsEnabled()&&void 0!==this.JT){const i=new Map;let s;t.forEach((t=>i.set(t.axis,t.value))),this.QT(0,1,(t=>{i.forEach(((i,e)=>{const h=(null==s?void 0:s.get(e))||0;this.Mu.set(e,h+t*(i-h)),this.Ds.us.xs()}))}),{easing:this.JT.easing,durationMs:this.JT.durationMs,onStart:()=>{s=new Map(this.Mu)}})}else for(let i=0;i<t.length;i+=1){const s=t[i].axis;this.Mu.set(s,t[i].value)}return this.Ds.xs(),this}getValue(t,i=!1){const s=this.Mu.get(t),e=this.chart.getOriginValue();if(void 0!==s)return i?e+this.qT*(s-e):s}setAnimationAddPoints(t,i){return this.JT=t?{easing:t,durationMs:i}:void 0,this.Ds.xs(),this}setVisibleStateChangedAnimation(t,i){return this.KT=t?{easing:t,durationMs:i}:void 0,this.Ds.xs(),this}setFillStyle(t){return this.hF="function"==typeof t?t(this.hF):t,this.dT&&(this.dT.De(this.hF),this.Ds.xs()),this}getFillStyle(){return this.hF}setStrokeStyle(t){return this.rF="function"==typeof t?t(this.rF):t,this.dT&&(this.dT.Pe(this.rF),this.Ds.xs()),this}getStrokeStyle(){return this.rF}setPointFillStyle(t){return this.nF="function"==typeof t?t(this.nF):t,this.iM&&(this.iM.De(this.nF),this.Ds.xs()),this}getPointFillStyle(){return this.nF}setPointSize(t){return this.qx=t,this.iM&&this.iM.tt(t),this}getPointSize(){return this.qx}getPointShape(){return this.tM}setPointRotation(t){return this.Ma=t,this.iM&&this.iM.Qh(t),this.Ds.xs(),this}getPointRotation(){return this.Ma}Le(){if(super.Le(),!this.Xi){const t=new Array(this.vb.length),i=this.chart.getOriginValue();for(let s=0;s<this.vb.length;s+=1){const e=this.Mu.get(this.vb[s].tag);t[s]=void 0!==e?this.sF(this.vb[s].tag,i+this.qT*(e-i)):this.sF(this.vb[s].tag,i)}mi(t),t.length>=3&&(this.dT||(this.dT=this.Ds.ac(this.scale,Pr.Simple).Pe(this.rF).De(this.hF).cs(this.getHighlight()),this.fs(this.dT)),this.dT.wl(t),this.iM||(this.iM=this.Ds.Dv(this.scale).tt(this.qx).al(this.tM).Qh(this.Ma).De(this.nF).cs(this.getHighlight()),this.fs(this.iM)),this.iM.Vt().fl(t))}}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.hF,stroke:this.rF})}Is(){return this._s||this.tM}oF(){for(let t=0;t<this.Qi.length;t+=1)Ci(this.Qi[t],this.qi,!1,{fill:this.hF,stroke:this.rF})}Ee(t,i){return t.cs(i),this.Ds.xs(),this}setVisible(t){var i,s;return this._m=t,this.tF(t,this.chart.getAnimationsEnabled()&&void 0!==this.KT,{easing:null===(i=this.KT)||void 0===i?void 0:i.easing,durationMs:null===(s=this.KT)||void 0===s?void 0:s.durationMs}),this}}const jd=(t,i)=>{const s=Math.PI/2-2*t*Math.PI/i;return s>=0?s:s+2*Math.PI},Zd=t=>As(t.jT.qe()),Qd=t=>As(t.qe()),Jd=(t,i,s,e)=>t.Au(0).Re(s).uu(90).Ue(-270).gu(i===Hd.Circle?void 0:e.length),Kd={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},qd={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},tf=()=>{qd.alignmentX=0,qd.alignmentY=0,qd.paddingX=0,qd.paddingY=0};class sf extends Nl{constructor(t,i,s,e,h,r,o){super(t,i,s,i.Py("spiderChart bg",0),e,i.us.qi.spiderChartBackgroundFillStyle,i.us.qi.spiderChartBackgroundStrokeStyle,i.us.qi.spiderChartTitleFont,i.us.qi.spiderChartTitleFillStyle,o),this.Ca=A(20,20,20,20),this.axisScale=dt.d1({scale1DConstructor:Zs,dimension:"x"}).K(0,1),this.vb=[],this.aF=[],this.lF=[],this.uF=nh.expansion,this.cF=!0,this.dF=Yd,this.fF=Ud,this.Go=!0,this.AF=Hd.Normal,this.gF=4,this.yF=this.qi.spiderChartWebStyle,this.mF=this.qi.spiderChartScaleLabelFillStyle,this.pF=this.qi.spiderChartScaleLabelFont,this.vF=5,this.SF=this.qi.spiderChartAxisLabelFillStyle,this.bF=this.qi.spiderChartAxisLabelFont,this.xF=5,this.MF=this.qi.spiderChartAxisStrokeStyle,this._F=this.qi.spiderChartAxisNibStrokeStyle,this.Vf=10,this.wF=A(),this.hasAxis=t=>this.vb.reduce(((i,s)=>i||s.tag===t),!1),this.formatValue=t=>this.axisScale.Pi(t,Xs.Numeric),this.CF=()=>{const t=this.vb.map(Zd).concat(this.lF.map(Qd));return ns(t)},this.kF=()=>this.TF.rd(this.mg).setMouseInteractions(!1),this.FF=t=>t.dispose(),this.IF=()=>this.FA.Nr(this.mg).setMouseInteractions(!1),this.PF=t=>t.dispose(),this.DF=t=>this.formatValue(this.axisScale.getInnerStart()+t*(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart())),this.BF=(t,i)=>{let s,e;const h=()=>{void 0!==this.LF&&this.LF.finish(),s=c(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),e=this.uF,this.uF=void 0},r=(i,e,h,r,o)=>{const a=n(h.x-e.x,e.y-h.y),l=this.vb.findIndex((i=>i===t));if(l>=0&&void 0!==s){const i=jd(l,this.vb.length),e=n(Math.cos(i),Math.sin(i)),h=a.x*e.x+a.y*e.y,r=Ms(Cs(t.XT.Fi(),t.XT.ki())),u=s.min+(s.max-s.min)*Math.max(1+h/r,.01);this.axisScale.K(s.min,u),di(o),this.us.xs()}},o=()=>{if(s=void 0,void 0!==e)if(this.uh){const t=c(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),i=this.RF(),s=e;if(void 0!==i){const e=s.start(t.min,t.max,i.min,i.max),h=s.end(t.min,t.max,i.min,i.max);this.LF=this.uy.us.cn(300,Q.ease)([[0,1]],(([i])=>{this.axisScale.K(t.min+i*(e-t.min),t.max+i*(h-t.max))})),this.LF.onAnimationEnd((()=>{this.LF=void 0,this.uF=s}))}else this.uF=e}else this.uF=e;e=void 0};i.setMouseEnterEventHandler(this.EF).setMouseLeaveEventHandler(this.zF).setMouseDragStartEventHandler(h).setMouseDragEventHandler(((t,i,s,e,h)=>r(0,n(i.clientX,i.clientY),e,0,i))).setMouseDragStopEventHandler(o);const a=Ae(new ye(((t,i,s)=>{this.EF(t),h(),di(s)}),r,((t,i,s,e)=>{this.zF(t),o(),di(e)})));return i.setTouchStartEventHandler(a.onTouchStart).setTouchMoveEventHandler(a.onTouchMove).setTouchEndEventHandler(a.onTouchEnd)},this.VF=t=>{this.cF&&!this.hasAxis(t)&&this.addAxis(t)},this.sF=(t,i)=>{for(const s of this.vb)if(s.tag===t){const t=Math.max(Math.min((i-this.axisScale.getInnerStart())/(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart()),1),0);return ds(s.XT.Fi(),s.XT.ki(),t)}},this.eF=t=>{if(0===this.vb.length)return;const i=Cs(this.translateCoordinate(t,this.coordsRelative),this.vb[0].XT.Fi()),s=Math.atan2(i.y,i.x);let e,h=Ki;for(const t of this.vb){const i=Cs(t.XT.ki(),t.XT.Fi()),r=Math.atan2(i.y,i.x),n=Math.abs(s-r);n<h&&(e=t,h=n)}return e},this.EF=t=>{this.Go&&(t.Ge(this._F),this.us.xs())},this.zF=t=>{t.Ge(this._F),this.us.xs()},this.us.jn(Vo.mf),this.Ik=i.pb("spiderChart series bg",0),this.TF=i.jm("spiderChart web shapes",0),this.OF=i.jm("spiderChart axis bg",1),this.Xb=i.jm("spiderChart plotting",2),this.FA=i.jm("spiderChart fg",3),this.$T=this.es.Cg().bs(this.qi.effectsText),this.bh.yr("Spider Chart"),this.Vv=this.Ik.rd(this.mg).De(this.qi.spiderChartSeriesBackgroundFillStyle).Pe(at).uu(90).Ue(-270).Au(0),this.Ov=this.Ik.rd(this.mg).De(O).Pe(this.qi.spiderChartSeriesBackgroundStrokeStyle).uu(90).Ue(-270).Au(0),super.zv(this.Vv,this.Ov);const a=i.Qm(),l=jt(r?r.cursorBuilder:void 0,Ja);this.Jm=Va(this,a,l.pm(a,this.uiScale,this.uiScale,Yt,this.qi),this,"show-pointed",ef,(()=>0)),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled)),this.Iy(h,this.mg)}getSeries(){return this.Bv}setCursor(t){return this.Jm.setCursor(t),this}getCursor(){return this.Jm.getCursor()}setCursorMode(t){return this.Jm.setCursorMode(t),this}getCursorMode(){return this.Jm.getCursorMode()}setCustomCursor(t){return this.Jm.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.Jm.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.Jm.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Jm.setCursorFormatting(t),this}getCursorFormatting(){return this.Jm.getCursorFormatting()}addCursor(t=Ja){const i=this.vy(),s=t.pm(i,this.uiScale,this.uiScale,this.Ay(i),this.qi);return this.ky(s),s}addAxis(t){if("string"==typeof t){if(!this.hasAxis(t)){const i=new $d(this.OF,this.FA,this.mg,this,t,this.axisScale,this.BF,this.$T);this.vb.push(i)}}else t&&this.vb.push(t);return this.$T.As(this.vb.map((t=>t.jT))),this.us.xs(),this}addSeries(t){const i=void 0!==(null==t?void 0:t.pointShape)?t.pointShape:sr.Circle,s=void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,e=new Xd(this,this.Xb,this.mg,i,this.VF,this.vb,this.sF,this.eF,this.Rv,this.qi,s,this.us.es);return this.Nv(e),e}getSeriesCount(){return this.Bv.length}setWebMode(t){return this.AF=t,this.us.xs(),this}getWebMode(){return this.AF}setWebCount(t){return this.gF=t,this.us.xs(),this}getWebCount(){return this.gF}setWebStyle(t){return this.yF="function"==typeof t?t(this.yF):t,this.us.xs(),this}getWebStyle(){return this.yF}setScaleLabelStyle(t){return this.mF="function"==typeof t?t(this.mF):t,this.us.xs(),this}getScaleLabelStyle(){return this.mF}setScaleLabelFont(t){return this.pF="function"==typeof t?t(this.pF):t,this.us.xs(),this}getScaleLabelFont(){return this.pF}setScaleLabelPadding(t){return this.vF=t,this.us.xs(),this}getScaleLabelPadding(){return this.vF}setScaleLabelStrategy(t){return this.dF=t,this.us.xs(),this}setScaleLabelFormatter(t){return this.formatValue=t,this.us.xs(),this}setAxisLabelStyle(t){return this.SF="function"==typeof t?t(this.SF):t,this.us.xs(),this}getAxisLabelStyle(){return this.SF}setAxisLabelFont(t){return this.bF="function"==typeof t?t(this.bF):t,this.us.xs(),this}getAxisLabelFont(){return this.bF}setAxisLabelEffect(t){return this.$T.bs(t),this.us.xs(),this}getAxisLabelEffect(){return this.$T.Ms()}setAxisLabelPadding(t){return this.xF=t,this.us.xs(),this}getAxisLabelPadding(){return this.xF}setAxisLabelStrategy(t){return this.fF=t,this.us.xs(),this}setAxisStyle(t){return this.MF="function"==typeof t?t(this.MF):t,this.us.xs(),this}getAxisStyle(){return this.MF}setNibStyle(t){return this._F="function"==typeof t?t(this._F):t,this.us.xs(),this}getNibStyle(){return this._F}setNibLength(t){return this.Vf=t,this.us.xs(),this}getNibLength(){return this.Vf}setAutoAxis(t){return this.cF=t,this}getAutoAxis(){return this.cF}setMouseInteractions(t){return this.Go=t,this}getMouseInteractions(){return this.Go}setAxisScrollStrategy(t){return this.uF=t,this.us.xs(),this}getAxisScrollStrategy(){return this.uF}setAxisInterval(t,i=0){return this.axisScale.K(i,t),this.us.xs(),this}getOriginValue(){return this.axisScale.getInnerStart()}getEdgeValue(){return this.axisScale.getInnerEnd()}Le(t){super.Le(t),Ra.Oy(this.bh,this.Dy);const i=this.vb.length,s=Ra.Vy(this.bh,this.Dy),e=n(this.mg.x.getInnerInterval()-(this.Ca.left+this.Ca.right),this.mg.y.getInnerInterval()-(this.Ca.bottom+this.Ca.top+s)),h=((t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}))(0,0,0,0);if(void 0!==this.fF){const t=Math.min(e.x,e.y)/2;for(let s=0;s<i;s+=1){const e=jd(s,i),r=Math.cos(e),o=Math.sin(e),a=this.vb[s].getLabelSize();tf();const l=this.fF(qd,s,i,this.vb[s].tag,e,this.xF),u=n(r*t+l.paddingX,o*t+l.paddingY);r>0?h.right=Math.max(h.right,u.x+.5*(1-l.alignmentX)*a.x-t):h.left=Math.max(h.left,-u.x+.5*(l.alignmentX+1)*a.x-t),o>0?h.top=Math.max(h.top,u.y+.5*(1-l.alignmentY)*a.y-t):h.bottom=Math.max(h.bottom,-u.y+.5*(l.alignmentY+1)*a.y-t)}}if(this.uF){const t=this.RF();if(void 0!==t){const i=this.uF.start(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max),s=this.uF.end(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max);this.axisScale.K(i,s)}}const r=n(this.mg.x.getInnerStart()+(h.left+this.mg.x.getInnerInterval()-h.right)/2,this.mg.y.getInnerStart()+(h.bottom+this.mg.y.getInnerInterval()-h.top)/2),o=Math.min(e.x/2-(h.left+h.right)/2,e.y/2-(h.bottom+h.top)/2);this.wF=A(this.$t.left+this.Ca.left+h.left,this.$t.top+this.Ca.top+s+h.top,this.$t.right+this.Ca.right+h.right,this.$t.bottom+this.Ca.bottom+h.bottom),this.tp(r,o);for(const t of this.Bv)t.pv();for(const t of this.Bv)t.Le();super.Fy(),this.Jm.Le(!1,this.Bv,void 0);for(const t of this.Bv)t.xp()}dispose(){return this.Ik.U(),this.TF.U(),this.OF.U(),this.Xb.U(),this.FA.U(),this.Jm.U(),super.dispose()}getMinimumSize(){return n(this.wF.left+this.wF.right+100,this.wF.bottom+this.wF.top+100)}tp(t,i){const s=this.vb.length,e=[];for(let h=0;h<s;h+=1){const r=jd(h,s),o=n(t.x+Math.cos(r)*i,t.y+Math.sin(r)*i);e.push(o)}Jd(this.Vv,this.AF,t,e),Jd(this.Ov,this.AF,t,e),this.Vv.cu(i),this.Ov.cu(i),((t,i,s,e,h,r,n,o)=>{const a=t.length,l=r.length,u=i>0&&l>1;for(let l=0;l<Math.max(i,a);l+=1)if(u&&l<i){l>=a&&t.push(n());const o=t[l];Jd(o,s,e,r);const u=h*((l+1)/i);o.cu(u)}else l<t.length&&o(t[l]);t.length=u?i:0})(this.aF,this.gF,this.AF,t,i,e,this.kF,this.FF);for(const t of this.aF)t.De(O).Pe(this.yF);for(let h=0;h<s;h+=1){const r=this.vb[h],n=jd(h,s);tf();const o=void 0!==this.fF?this.fF(qd,h,s,this.vb[h].tag,n,this.xF):void 0;r.tp(t,e,h,n,i,this.AF,o)}((t,i,s,e,h,r,o,a,l,u)=>{const c=h.length,d=t.length;let f=0;if(void 0!==i)for(let l=0;l<c;l+=1){const A=h[l].tag,g=jd(l,c);for(let h=0;h<s+ +(0===l);h+=1){Kd.alignmentX=0,Kd.alignmentY=0,Kd.paddingX=0,Kd.paddingY=0;const y=i(Kd,l,c,A,g,h,s,e);if(void 0!==y){f>=d&&t.push(a());const i=t[f];f+=1;const e=(s-h)/s,c=ds(r,o[l],e);i.Re(ws(c,n(y.paddingX,y.paddingY))).Ga(y.alignmentX).Ua(y.alignmentY).yr(u(e))}}}for(let i=f;i<d;i+=1)l(t[i]);t.length=f})(this.lF,this.dF,this.gF,this.vF,this.vb,t,e,this.IF,this.PF,this.DF);for(const t of this.lF)t.De(this.mF).Zh(this.pF)}RF(){let t,i;const s=this.getSeriesCount()>1;for(const e of this.vb)for(const h of this.Bv){const r=h.getValue(e.tag,s);void 0!==r&&(t=void 0===t?r:Math.min(t,r),i=void 0===i?r:Math.max(i,r))}if(void 0!==t&&void 0!==i)return c(t,i)}}const ef=(t,i,s)=>za(i,[[i.series],[i.axis],[{text:t.formatValue(i.value),font:{weight:"bold"}}]]),hf=(t,i)=>{const s=Math.floor(99999/i),e=Math.floor(99999/i),h=Math.floor(99998/i),r=Math.floor(99998/i),n=Math.floor(99999/(i+1)),o=Math.floor(89999/(i+1)),a=510001+i*o;let l=0;return{NF:()=>{const i=t.GF("dashboard ui",a+l);return l+=1,i},WF:()=>t.GF("dashboard legend",51e4),UF:i=>{const a=1+i*s,l=100001+i*e,u=200002+i*h,c=300002+i*r,d=400001+i*n,f=510001+i*o;let A=0;return{us:t,Py:(i,s)=>{const e=a+s;return t.GF(i,e)},pb:(i,s)=>{const e=l+s;return t.GF(i,e)},Dk:(i,s)=>{const e=u+s;return t.GF(i,e)},jm:(i,s)=>{const e=c+s;return t.GF(i,e)},mb:(i,s,e)=>{const h=c+s;return t.YF(i,h,e)},Ly:(i,s)=>{const e=d+s;return t.GF(i,e)},Sy:i=>{const s=f+A,e=t.GF(i,s);return A+=1,e},xy:()=>t.GF("panel legend",500002+i),Qm:()=>t.GF("panel cursor",600001+i)}}}};class rf{constructor(t){this.L=new s,this.S=t}M(t){return this.S=t,this.L.emit("set",t),this}_(){return this.S}N(t){return this.L.on("set",t)}W(t){return this.L.off(t,"set")}}const nf={dh:!1,fh:0,Ah:!1,yh:0,gh:!1,mh:0,ph:0,oh:nh.fitting},of=t=>{if(!t||"object"!=typeof t||null===t)return!1;const i=t.type;return!(!i||!["spark-line","spark-bar","spark-win-loss","spark-area","spark-pie"].includes(i))},af=(t,i,s,e,h,r,n,o)=>{const{type:a,data:l}=t;if(0===l.length)return;const u=[e,h];"spark-line"===a&&mf(t,i,u,r,n,o),"spark-bar"===a&&pf({...t,winLoss:!1},i,u,r,n,o),"spark-win-loss"===a&&pf({...t,winLoss:!0},i,u,r,n,o),"spark-area"===a&&vf(t,i,u,r,n,o),"spark-pie"===a&&Sf(t,i,u,r,n,o)},lf=(t,i,s,e)=>({x:cf(t.x,i.x,s.x,e),y:df(t.y,i.y,s.y,e)}),uf=(t,i,s,e)=>({position:cf(t.position,i.x,s.x,e),high:df(t.high,i.y,s.y,e),low:df(t.low,i.y,s.y,e)}),cf=(t,i,s,e)=>{const h=$t(t,i,i+s);return e[0].x+e[1].x*(h-i)/s},df=(t,i,s,e)=>{const h=$t(t,i,i+s);return e[0].y+e[1].y*(h-i)/s},ff=(t,i,s,e,h,r,n,o)=>{for(const a of t)"point"===a.type&&Af(a,i,s,h,r,n,o),"axis-band"===a.type&&gf(a,s,h,r,n,o),"constant-line"===a.type&&yf(a,s,e,h,r,n,o)},Af=(t,i,s,e,h,r,n)=>{const{value:o,fillStyle:a,shape:l,size:u,rotation:c}=t;let d={x:NaN,y:NaN};if("start"===o&&(d=i[0]),"end"===o&&(d=i[i.length-1]),"min"===o){d=i[0];for(const t of i)d=d.y<t.y?d:t}if("max"===o){d=i[0];for(const t of i)d=d.y>t.y?d:t}("object"!=typeof o||(d=lf(o,s,e,h),((t,i)=>{const s=i[0],e=i[1],h=t.x,r=t.y;return s.x<=h&&h<=s.x+e.x&&s.y<=r&&r<=s.y+e.y})(d,h)))&&r.pointSet.add().Vt().al(void 0!==l?l:sr.Circle).Qh(c||0).tt(u||5).De(a||n.sparkPointChartFillStyle).fl(d)},gf=(t,i,s,e,h,r)=>{const{axis:o,start:a,end:l,fillStyle:u,strokeStyle:c}=t;let d=n(qi,Ki),f=n(qi,Ki);"x"===o&&(d=lf({x:a,y:qi},i,s,e),f=lf({x:l,y:Ki},i,s,e)),"y"===o&&(d=lf({x:qi,y:a},i,s,e),f=lf({x:Ki,y:l},i,s,e));const A=e[0],g=e[1],y=$t(d.x,A.x,A.x+g.x),m=$t(d.y,A.y,A.y+g.y),p=$t(f.x,A.x,A.x+g.x),v=$t(f.y,A.y,A.y+g.y);h.rect.add().vl(y).Sl(m).tt(n(p-y,v-m)).De(u||r.sparkChartBandFillStyle).Pe(c||r.sparkChartBandStrokeStyle).Pe(at)},yf=(t,i,s,e,h,r,o)=>{const{axis:a,value:l,strokeStyle:u}=t,c=l||0,d=i.y,f=s.y,A=i.x,g=s.x,y=[];if("y"===a&&d<=c&&c<=f){const t=lf(n(A,c),{x:A,y:d},e,h),i=lf(n(g,c),{x:A,y:d},e,h);y.push([t,i])}if("x"===a&&A<=c&&c<=g){const t=lf(n(c,d),{x:A,y:d},e,h),i=lf(n(c,f),{x:A,y:d},e,h);y.push([t,i])}y.length>0&&r.line.add().Ge(u||o.sparkChartConstantLineStrokeStyle).Ye(y[0][0]).Ue(y[0][1])},mf=(t,i,s,e,h,r)=>{const{strokeStyle:n,data:o,markers:a}=t,l=o.length;l>1e4&&h.qn&&Ot.console.warn("LightningChart JS warning: SparkLineChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let u=Ki,c=qi,d=Ki,f=qi;for(let t=0;t<l;t+=1){const i=o[t];u=Math.min(u,i.x),c=Math.max(c,i.x),d=Math.min(d,i.y),f=Math.max(f,i.y)}const A={x:c-u,y:f-d},g=o.map((t=>lf(t,{x:u,y:d},A,s)));i.lineSet.add().cs(r).Ge(n||e.sparkLineChartStrokeStyle).Vt().fl(g),a&&ff(a,g,{x:u,y:d},{x:c,y:f},A,s,i,e)},pf=(t,i,s,e,h,r)=>{const{data:n,fillStyle:o,strokeStyle:a,threshold:l,winFillStyle:u,lossFillStyle:c}=t,d=t.barSize||1,f=t.gap||1,A=t.winLoss,g=l||0,y=f/d*1;let m=Ki,p=qi;if(A)m=-1,p=1;else for(const t of n)m=Math.min(m,t),p=Math.max(p,t);const v={x:0,y:A?-1:Math.min(0,m)},S={x:1*n.length+(n.length-1)*y,y:A?2:Math.max(p,1e-5)};n.map(((t,i)=>{const e={x:1*(i+1)+i*y,y:A?t>=g?1:0:t},h=lf({x:1*i+i*y,y:A?t>=g?0:-1:0},v,S,s),r=lf(e,v,S,s);return{value:t,position:h,width:r.x-h.x,height:r.y-h.y}})).forEach((t=>{var s;i.rect.add().cs(r).Re(t.position).xl(t.height).bl(t.width).De((s=t.value,A?(s>=g?u:c)||e.sparkBarChartFillStyle:o||e.sparkBarChartFillStyle)).Pe(a||e.sparkBarChartStrokeStyle)}))},vf=(t,i,s,e,h,r)=>{const{data:n,fillStyle:o,strokeStyle:l,markers:u}=t,c=n.length;c>1e4&&h.qn&&Ot.console.warn("LightningChart JS warning: SparkAreaChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let d=Ki,f=qi,A=Ki,g=qi;for(let t=0;t<c;t+=1){const i=n[t];d=Math.min(d,i.x),f=Math.max(f,i.x),A=Math.min(A,i.y),g=Math.max(g,i.y)}const y={x:f-d,y:g-A},m=[],p=[];for(const t of n){const i=a(t.x,t.y,A);m.push(uf(i,{x:d,y:A},y,s)),p.push(lf(t,{x:d,y:A},y,s))}i.junction.add().cs(r).Vt().fl(m).De(o||e.sparkAreaChartFillStyle),i.lineSet.add().cs(r).Vt().fl(p).Ge(l||e.sparkAreaChartStrokeStyle),u&&ff(u,p,{x:d,y:A},{x:f,y:g},y,s,i,e)},Sf=(t,i,s,e,h,r)=>{const{data:o,strokeStyle:a}=t,l=o.map((t=>"number"==typeof t?t:t.value)),u=o.map((t=>"object"==typeof t?t.fillStyle:void 0)),c=l.reduce(((t,i)=>t+i),0),d=lf(n(50,50),{x:0,y:0},{x:100,y:100},s),f=s[1],A=f.x<=f.y?f.x/2:f.y/2;let g=90;l.forEach(((t,s)=>{const h=t/c*360;i.arc.add().cs(r).Re(d).cu(A).Au(0).uu(g).Ue(g+h).De(u[s]||Ii(e.sparkPieChartFillStyle,s)).Pe(a||e.sparkPieChartStrokeStyle),g+=h}))};var bf,xf,Mf;!function(t){t[t.UpToDown=0]="UpToDown",t[t.LeftToRight=1]="LeftToRight"}(bf||(bf={})),function(t){t[t.Vertical=0]="Vertical",t[t.Horizontal=1]="Horizontal",t[t.Both=2]="Both"}(xf||(xf={})),function(t){t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right"}(Mf||(Mf={}));class _f extends Wr{constructor(t,i,s,e,h){super(),this.zs=!1,this.qM={x:0,y:0,height:20,width:20},this.HF={x:10,y:10},this.Ds=t,this.$F=h,this.XF=new Xn(t,i,s,Yt,e).setMouseInteractions(!0),this.jF=t.ac(i,Pr.Simple).De(e.dataGridScrollBarButtonArrowFillStyle).Pe(e.dataGridScrollBarButtonArrowStrokeStyle).setMouseInteractions(!1),this.Tu(this),this.XF.onMouseEnter((t=>t.setHighlight(1))),this.XF.onMouseLeave((t=>t.setHighlight(0)))}ZF(){switch(this.$F){case Mf.Up:this.jF.wl([{x:this.qM.x,y:this.qM.y+this.HF.y/2},{x:this.qM.x+this.HF.x/2,y:this.qM.y-this.HF.y/2},{x:this.qM.x-this.HF.x/2,y:this.qM.y-this.HF.y/2}]);break;case Mf.Down:this.jF.wl([{x:this.qM.x-this.HF.x/2,y:this.qM.y+this.HF.y/2},{x:this.qM.x+this.HF.x/2,y:this.qM.y+this.HF.y/2},{x:this.qM.x,y:this.qM.y-this.HF.y/2}]);break;case Mf.Left:this.jF.wl([{x:this.qM.x-this.HF.x/2,y:this.qM.y},{x:this.qM.x+this.HF.x/2,y:this.qM.y+this.HF.y/2},{x:this.qM.x+this.HF.x/2,y:this.qM.y-this.HF.y/2}]);break;case Mf.Right:this.jF.wl([{x:this.qM.x-this.HF.x/2,y:this.qM.y+this.HF.y/2},{x:this.qM.x+this.HF.x/2,y:this.qM.y},{x:this.qM.x-this.HF.x/2,y:this.qM.y-this.HF.y/2}])}}Re(t){return this.qM.x=t.x,this.qM.y=t.y,this}Va(){return n(this.qM.x,this.qM.y)}tt(t){return this.qM.height=t.x,this.qM.width=t.y,this}ni(){return{x:this.qM.height,y:this.qM.width}}onMouseDown(t){return this.XF.onMouseDown(t)}onMouseUp(t){return this.XF.onMouseUp(t)}setFillStyle(t){return this.XF.setFillStyle(t),this}getFillStyle(){return this.XF.getFillStyle()}setStrokeStyle(t){return this.XF.setStrokeStyle(t),this}getStrokeStyle(){return this.XF.getStrokeStyle()}Le(){return this.XF.Le(),this.ZF(),this}Es(){return this.XF.setSize(n(this.qM.height,this.qM.width)).setPosition(n(this.qM.x,this.qM.y)),this}setVisible(t){return this.XF.setVisible(t),this.jF.setVisible(t),this}dispose(){return this.XF.dispose(),this.jF.dispose(),this}setMouseInteractions(t){return this.XF.setMouseInteractions(t),this}getMouseInteractions(){return this.XF.getMouseInteractions()}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}getHighlight(){return this.XF.getHighlight()}setHighlight(t){return this.XF.setHighlight(zi(t)),this.L.emit("highlight",this,Boolean(t)),this.Ds.xs(),this}}const wf=(t,i)=>Math.min(Math.max(t,i.getInnerStart()),i.getInnerEnd());class Cf{constructor(t,i,e,h,r,o,a){this.nd={x:0,y:0},this.qM={x:0,y:0,height:0,width:0},this.L=new s,this.QF={min:n(0,0),max:n(0,0)},this.JF=!1,this.KF=!1,this.qF={x:0,y:0},this.Iu=void 0,this.tI=n(0,0),this.iI={x:0,y:0},this.sI=0,this.eI=15,this.hI=(t,i)=>{this.JF=!0,this.FA.xs();const s=this.rI.getDraggingMode();this.Iu=this.FA.us.Jr(s===zt.notDraggable?Xe.Restricted:s===zt.draggable?Xe.Move:s===zt.onlyHorizontal?Xe.Horizontal:Xe.Vertical),this.nI&&clearInterval(this.nI)},this.oI=()=>{this.JF=!1,this.FA.xs(),this.FA.us.Kr(this.Iu)},this.aI=t=>(this.KF=!0,this.qF=At(this.FA.us.ze(t.x,t.y),this.FA.us.ft,this.scale),!0),this.lI=(t,i)=>(this.uI(i),this.nI=setInterval((()=>this.uI(i)),300),!0),this.cI=()=>(clearInterval(this.nI),!0),this.dI=(t,i)=>{const s=this.rI.getDraggingMode();if(s!==zt.notDraggable){const e=i||s,h=At(this.FA.us.ze(t.x,t.y),this.FA.us.ft,this.scale),r=n(e!==zt.onlyVertical?wf(h.x,this.scale.x):this.qM.x,e!==zt.onlyHorizontal?wf(h.y,this.scale.y):this.qM.y),o=n(r.x-this.qF.x,r.y-this.qF.y),a=n(this.rI.getPosition().x+o.x,this.rI.getPosition().y+o.y),l=this.fI(a),u={x:Math.abs(this.tI.x-l.x),y:Math.abs(this.tI.y-l.y)};return this.AI(u),this.iI.y>o.y&&(this.qF=h),this.Le(),!0}return!1},this.gI=(t,i)=>{this.KF=!1,di(i),this.FA.xs()},this.FA=t,this.uy=i,this.scale=h,this.contentScale=r,this.yI=a,this.mI=new _f(t,e,h,o,a===bf.UpToDown?Mf.Up:Mf.Left).setStrokeStyle(o.dataGridScrollBarButtonStrokeStyle).setFillStyle(o.dataGridScrollBarButtonFillStyle),this.pI=new _f(t,e,h,o,a===bf.UpToDown?Mf.Down:Mf.Right).setStrokeStyle(o.dataGridScrollBarButtonStrokeStyle).setFillStyle(o.dataGridScrollBarButtonFillStyle),this.rI=new Xn(t,e,h,Yt,o).setFillStyle(o.dataGridScrollBarFillStyle).setStrokeStyle(o.dataGridScrollBarStrokeStyle).setMouseInteractions(!0).setDraggingMode(a===bf.UpToDown?zt.onlyVertical:a===bf.LeftToRight?zt.onlyHorizontal:zt.notDraggable),this.vI=new Xn(i,e,h,Yt,o).setFillStyle(o.dataGridScrollBarBackgroundFillStyle).setStrokeStyle(o.dataGridScrollBarBackgroundStrokeStyle).setMouseInteractions(!0),this.rI.onMouseEnter(this.hI),this.rI.onMouseLeave(this.oI),this.rI.onMouseDragStart(((t,i)=>this.aI(n(i.clientX,i.clientY))&&di(i))),this.rI.onMouseDrag(((t,i)=>this.dI(n(i.clientX,i.clientY))&&di(i))),this.rI.onMouseDragStop(this.gI),this.rI.onTouchStart(((t,i)=>this.aI(n(i.clientX,i.clientY))&&di(i))),this.rI.onTouchMove(((t,i)=>this.dI(n(i.clientX,i.clientY))&&di(i))),this.rI.onTouchEnd(this.gI),this.mI.onMouseDown(((t,i)=>this.lI(t,i)&&di(i))),this.pI.onMouseDown(((t,i)=>this.lI(t,i)&&di(i))),this.mI.onMouseUp(((t,i)=>this.cI()&&di(i))),this.pI.onMouseUp(((t,i)=>this.cI()&&di(i))),this.vI.onMouseWheel(((t,i)=>this.SI(i))),this.rI.onMouseWheel(((t,i)=>this.SI(i))),this.vI.onMouseDown(((t,i)=>this.lI(t,i)&&di(i))),this.vI.onMouseUp(((t,i)=>this.cI()&&di(i)))}bI(t){return this.qM=t,this}bl(t){return this.qM.width=t,this}xI(){return this.qM.width}MI(t){return this.tI=t,this}_I(t){return this.nd=t,this}wI(){return this.nd}CI(t){return this.eI=t,this}kI(){return this.yI}TI(t){let i;switch(this.yI){case bf.UpToDown:return i=t>0?Math.min(this.tI.y-this.QF.max.y,this.iI.y+t):Math.max(0,this.iI.y+t),i!==this.iI.y&&(this.AI({x:0,y:i}),this.Le(),!0);case bf.LeftToRight:return i=Math.min(this.QF.max.x-this.tI.x,this.iI.x+t),i!==this.iI.x&&(this.AI({y:0,x:i}),this.Le(),!0);default:return!1}}FI(t){let i;switch(this.yI){case bf.UpToDown:return i=Math.max(0,this.iI.y-t),i!==this.iI.y&&(this.AI({x:0,y:i}),this.Le(),!0);case bf.LeftToRight:return i=t>0?Math.max(0,this.iI.x-t):Math.min(this.QF.max.x-this.tI.x,this.iI.x-t),i!==this.iI.x&&(this.AI({x:i,y:0}),this.Le(),!0);default:return!0}}II(t){switch(this.yI){case bf.UpToDown:return this.L.on("scrollY",t);case bf.LeftToRight:return this.L.on("scrollX",t)}return this.L.on("scrollY",t)}fI(t){switch(this.yI){case bf.UpToDown:if(t.y>this.QF.min.y)return n(t.x,this.QF.min.y);if(t.y<this.QF.max.y)return n(t.x,this.QF.max.y);break;case bf.LeftToRight:if(t.x<this.QF.min.x)return n(this.QF.min.x,t.y);if(t.x>this.QF.max.x)return n(this.QF.max.x,t.y)}return t}SI(t){t.deltaY>0&&this.DI()&&di(t),t.deltaY<0&&this.BI()&&di(t)}uI(t){const i=At(this.FA.us.ze(t.clientX,t.clientY),this.FA.us.ft,this.scale);let s;const e=this.rI.getPosition(),h=this.rI.getSize();this.LI(i,e,h)?clearInterval(this.nI):(s=this.yI===bf.UpToDown?n(0,i.y-e.y>0?this.eI:-this.eI):n(e.x-i.x>0?this.eI:-this.eI,0),(s.x>0||s.y>0)&&this.RI(0!==s.x?Math.abs(s.x):Math.abs(s.y)),(s.x<0||s.y<0)&&this.EI(0!==s.x?Math.abs(s.x):Math.abs(s.y)))}LI(t,i,s){return this.yI===bf.UpToDown?t.y<i.y+s.y/2&&t.y>i.y-s.y/2:t.x>i.x-s.x/2&&t.x<i.x+s.x/2}zI(t){this.QF=t}RI(t){switch(this.yI){case bf.UpToDown:{const i=Math.max(0,this.iI.y-t);return i!==this.iI.y&&(this.AI({x:0,y:i}),this.Le(),!0)}case bf.LeftToRight:{const i=Math.max(0,this.iI.x-t);return i!==this.iI.x&&(this.AI({x:i,y:0}),this.Le(),!0)}default:return!1}}EI(t){switch(this.yI){case bf.UpToDown:{let i;return i=this.nd.x>this.qM.height?Math.min(this.tI.y-this.QF.max.y,this.iI.y+t):0,i!==this.iI.y&&(this.AI({x:0,y:i}),this.Le(),!0)}case bf.LeftToRight:{const i=Math.min(this.QF.max.x-this.tI.x,this.iI.x+t);return i!==this.iI.x&&(this.AI({y:0,x:i}),this.Le(),!0)}default:return!1}}BI(){return this.RI(this.eI)}DI(){return this.EI(this.eI)}AI(t){if(t.x===this.iI.x&&t.y===this.iI.y)return;let i;switch(this.iI=t,this.yI){case bf.UpToDown:i=this.iI.y*this.sI*this.contentScale.Gi().y,this.L.emit("scrollY",xf.Vertical,i),this.FA.us.xs();break;case bf.LeftToRight:i=this.iI.x*this.sI*this.contentScale.Gi().x,this.L.emit("scrollX",xf.Horizontal,i)}}setVisible(t){return this.mI.setVisible(t),this.pI.setVisible(t),this.vI.setVisible(t),this.rI.setVisible(t),this}dispose(){return this.mI.dispose(),this.pI.dispose(),this.vI.dispose(),this.rI.dispose(),this.nI&&clearInterval(this.nI),this}Es(){switch(this.VI(),this.OI(),this.yI){case bf.UpToDown:this.mI.Re({x:this.qM.x,y:this.qM.y+this.qM.height-this.mI.ni().x/2}).tt(n(this.qM.width,this.qM.width)).Es(),this.pI.Re({x:this.qM.x,y:this.qM.y+10}).tt(n(this.qM.width,this.qM.width)).Es(),this.vI.setSize({x:this.qM.width,y:this.qM.height-2*this.mI.ni().x}).setPosition({x:this.qM.x,y:this.qM.y+this.pI.ni().y+this.vI.getSize().y/2}),this.rI.setSize(n(this.qM.width,this.NI())),this.tI={x:this.qM.x,y:this.mI.Va().y-this.mI.ni().y/2-this.rI.getSize().y/2},this.zI({min:{x:this.qM.x,y:this.mI.Va().y-this.mI.ni().y/2-this.rI.getSize().y/2},max:{x:this.qM.x,y:this.pI.Va().y+this.pI.ni().x/2+this.rI.getSize().y/2}});break;case bf.LeftToRight:this.mI.Re({x:this.qM.x,y:this.qM.y}).tt(n(this.qM.height,this.qM.height)).Es(),this.pI.Re({x:this.qM.x+this.qM.width-this.pI.ni().x,y:this.qM.y}).tt(n(this.qM.height,this.qM.height)).Es(),this.vI.setSize({y:this.qM.height,x:this.qM.width-2*this.mI.ni().y}).setPosition({x:this.qM.x+this.mI.ni().x/2+this.vI.getSize().x/2,y:this.qM.y}),this.rI.setSize(n(this.NI(),this.qM.height)),this.tI={x:this.mI.Va().x+this.mI.ni().x/2+this.rI.getSize().x/2,y:this.qM.y},this.zI({min:{x:this.mI.Va().x+this.mI.ni().x/2+this.rI.getSize().x/2,y:this.qM.y},max:{x:this.pI.Va().x-this.pI.ni().x/2-this.rI.getSize().x/2,y:this.qM.y}})}return this.GI(),this}VI(){switch(this.yI){case bf.UpToDown:this.WI()||this.setVisible(!1),this.WI()&&this.setVisible(!0);break;case bf.LeftToRight:this.UI()||this.setVisible(!1),this.UI()&&this.setVisible(!0)}}OI(){switch(this.yI){case bf.UpToDown:this.WI()||this.AI({x:0,y:0});break;case bf.LeftToRight:this.UI()||this.AI({x:0,y:0})}}WI(){return this.nd.x>this.qM.height}UI(){return this.nd.y>this.qM.width}NI(){switch(this.yI){case bf.UpToDown:return this.qM.height*(this.qM.height-2*this.mI.ni().x)/this.nd.x;case bf.LeftToRight:return this.qM.width*(this.qM.width-2*this.mI.ni().y)/this.nd.y;default:return 0}}GI(){switch(this.yI){case bf.UpToDown:this.sI=(this.nd.x-this.qM.height)/(this.QF.min.y-this.QF.max.y);break;case bf.LeftToRight:this.sI=(this.nd.y-this.qM.width)/(this.QF.max.x-this.QF.min.x)}}Le(){switch(this.mI.Le(),this.pI.Le(),this.vI.Le(),this.yI){case bf.UpToDown:this.rI.setPosition({x:this.qM.x,y:this.mI.Va().y-this.mI.ni().y/2-this.rI.getSize().y/2-this.iI.y}).Le();break;case bf.LeftToRight:this.rI.setPosition({y:this.qM.y,x:this.mI.Va().x+this.mI.ni().x/2+this.rI.getSize().x/2+this.iI.x}).Le()}return this}}class kf{constructor(t,i,s,e,h,r,n){switch(this.FA=t,this.uy=i,this.scale=e,this.contentScale=h,n){case xf.Vertical:this.YI=this.HI(s,r,bf.UpToDown);break;case xf.Horizontal:this.$I=this.HI(s,r,bf.LeftToRight);break;case xf.Both:this.YI=this.HI(s,r,bf.UpToDown),this.$I=this.HI(s,r,bf.LeftToRight)}this.XI=Ae(new ye(void 0,((t,i,s,e,h)=>{var r,n;0!==e.x&&(null===(r=this.$I)||void 0===r?void 0:r.FI(e.x))&&di(h),0!==e.y&&(null===(n=this.YI)||void 0===n?void 0:n.TI(e.y))&&di(h)})))}HI(t,i,s){return new Cf(this.FA,this.uy,t,this.scale,this.contentScale,i,s)}xI(){return 20}_I(t){var i,s;return null===(i=this.YI)||void 0===i||i._I(t),null===(s=this.$I)||void 0===s||s._I(t),this}jI(t){var i;return null===(i=this.$I)||void 0===i||i.CI(t),this}ZI(t){var i;return null===(i=this.YI)||void 0===i||i.CI(t),this}QI(t){const i=this.YI;return i&&i.SI(t),this}JI(t){return this.XI.onTouchStart(this,t),this}KI(t){return this.XI.onTouchMove(this,t),this}qI(t){return this.XI.onTouchEnd(this,t),this}onScroll(t){var i,s;return null===(i=this.$I)||void 0===i||i.II(t),null===(s=this.YI)||void 0===s||s.II(t),this}dispose(){var t,i;return null===(t=this.YI)||void 0===t||t.dispose(),null===(i=this.$I)||void 0===i||i.dispose(),this}Le(){var t,i;return null===(t=this.YI)||void 0===t||t.Le(),null===(i=this.$I)||void 0===i||i.Le(),this}Es(){var t,i,s,e;const h=this.scale.x,r=this.scale.y;return null===(t=this.YI)||void 0===t||t.bI({x:h.getInnerEnd()-10,y:r.getInnerStart()+20,height:r.getInnerEnd()-20,width:20}),null===(i=this.$I)||void 0===i||i.bI({x:h.getInnerStart()+10,y:r.getInnerStart()+10,height:20,width:h.getInnerEnd()-20}),null===(s=this.YI)||void 0===s||s.Es(),null===(e=this.$I)||void 0===e||e.Es(),this}}class Tf extends La{constructor(t,i,s,e,h,r){super(t,i,s,i.Py("dataGrid bg",0),e,i.us.qi.dataGridBackgroundFillStyle,i.us.qi.dataGridBackgroundStrokeStyle,i.us.qi.dataGridTitleFont,i.us.qi.dataGridTitleFillStyle,r),this.tP=[],this.iP=[],this.sP=[],this.eP=new Map,this.hP=!0,this.rP=!0,this.nP=!0,this.oP=!0,this.aP=!0,this.lP=!0,this.uP=!0,this.cP=!0,this.dP=!0,this.fP=!0,this.AP=!0,this.gP=!0,this.yP=!0,this.mP=!0,this.pP=!0,this.vP=!0,this.SP=new Set,this.bP=new Set,this.xP=!0,this.MP=!0,this._P=(t,i)=>{t.borders=void 0===i?Bf:{...t.borders,...i},this.wP(t),this.gP=!0,this.us.xs()},this.wP=t=>{t.borders&&(!1===t.borders.top&&this.CP(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!1}:{...this.kP,bottom:!1}})),!1===t.borders.bottom&&this.CP(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!1}:{...this.kP,top:!1}})),!1===t.borders.left&&this.CP(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!1}:{...this.kP,right:!1}})),!1===t.borders.right&&this.CP(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!1}:{...this.kP,left:!1}})),!0===t.borders.top&&this.CP(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!0}:{...this.kP,bottom:!0}})),!0===t.borders.bottom&&this.CP(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!0}:{...this.kP,top:!0}})),!0===t.borders.left&&this.CP(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!0}:{...this.kP,right:!0}})),!0===t.borders.right&&this.CP(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!0}:{...this.kP,left:!0}})))},this.TP=(t,i)=>{const s=this.eP.get(t);s&&this.L.emit(Ff.cellMouseEnter,s,i)},this.FP=(t,i)=>{const s=this.eP.get(t);s&&this.L.emit(Ff.cellMouseLeave,s,i)},this.IP=(t,i)=>{const s=this.eP.get(t);s&&this.L.emit(Ff.cellMouseClick,s,i)},this.PP=(t,i)=>{const s=this.eP.get(t);s&&this.L.emit(Ff.cellMouseDoubleClick,s,i)},this.DP=(t,i)=>{const s=this.eP.get(t);s&&this.L.emit(Ff.cellMouseDown,s,i)},this.BP=(t,i)=>{const s=this.eP.get(t);s&&this.L.emit(Ff.cellMouseUp,s,i)},this.LP=(t,i)=>{const s=this.eP.get(t);s&&this.L.emit(Ff.cellMouseMove,s,i)},this.RP=(t,i)=>{const s=this.eP.get(t);s&&this.L.emit(Ff.cellMouseDrag,s,i)},this.EP=(t,i)=>{const s=this.eP.get(t);s&&this.L.emit(Ff.cellMouseDragStart,s,i)},this.zP=(t,i)=>{const s=this.eP.get(t);s&&this.L.emit(Ff.cellMouseDragStop,s,i)},this.VP=(t,i)=>{const s=this.eP.get(t);s&&(this.L.emit(Ff.cellMouseWheel,s,i),!i.defaultPrevented&&this.xP&&this.OP.QI(i))},this.NP=(t,i)=>{const s=this.eP.get(t);s&&(this.L.emit(Ff.cellTouchStart,s,i),!i.defaultPrevented&&this.MP&&this.OP.JI(i))},this.GP=(t,i)=>{const s=this.eP.get(t);s&&(this.L.emit(Ff.cellTouchMove,s,i),!i.defaultPrevented&&this.MP&&this.OP.KI(i))},this.WP=(t,i)=>{const s=this.eP.get(t);s&&(this.L.emit(Ff.cellTouchEnd,s,i),!i.defaultPrevented&&this.MP&&this.OP.qI(i))},this.us.jn(Vo.lf),this.bh.yr("Data Grid"),this.UP=s.d2({scaleXYConstructor:Ks}),this.UP.x.lg=nf,this.YP=s.d2({scaleXYConstructor:Ks}),this.HP={x:0,y:0},this.$P=this.qi.dataGridTextFont,this.XP=this.qi.dataGridTextFillStyle,this.kP={top:!0,bottom:!0,left:!0,right:!0},this.jP=this.qi.dataGridCellBackgroundFillStyle,this.ZP=this.qi.dataGridBorderStrokeStyle,this.QP="left-center",this.JP={left:5,right:5,bottom:5,top:5},this.KP=i.pb("dataGrid grid bg",0),this.qP=i.pb("dataGrid cell bg",1),this.tD=i.jm("dataGrid cell content",0),this.iD=i.jm("dataGrid scrollbar bg",1),this.sD=i.jm("dataGrid scrollbar fg",2),this.OP=this.eD(),this.onBackgroundMouseWheel(((t,i)=>{this.xP&&this.OP.QI(i)})),this.onBackgroundTouchStart(((t,i)=>{this.MP&&this.OP.JI(i)})),this.onBackgroundTouchMove(((t,i)=>{this.MP&&this.OP.KI(i)})),this.onBackgroundTouchEnd(((t,i)=>{this.MP&&this.OP.qI(i)})),this.hD=this.KP.Be(this.UP).De(this.qi.dataGridBackgroundFillStyle).Pe(at).setMouseInteractions(!1),this.rD=this.tD.Ug(this.UP).setMouseInteractions(!1),this.nD=new _l((()=>this.qP.Be(this.UP).setMouseInteractions(!0).setMouseEnterEventHandler(this.TP).setMouseLeaveEventHandler(this.FP).setMouseClickEventHandler(this.IP).setMouseDoubleClickEventHandler(this.PP).setMouseDownEventHandler(this.DP).setMouseUpEventHandler(this.BP).setMouseMoveEventHandler(this.LP).setMouseDragEventHandler(this.RP).setMouseDragStartEventHandler(this.EP).setMouseDragStopEventHandler(this.zP).setMouseWheelEventHandler(this.VP).setTouchStartEventHandler(this.NP).setTouchMoveEventHandler(this.GP).setTouchEndEventHandler(this.WP))),this.oD=new _l((()=>this.tD.Be(this.UP).setMouseInteractions(!1))),this.aD=new _l((()=>this.tD.Nr(this.UP).setMouseInteractions(!1))),this.lD=new _l((()=>this.tD.op(this.UP,{},[gl.InternalUI,{type:"DataPattern",args:{pattern:"ProgressiveX"}}]).setMouseInteractions(!1))),this.uD=new _l((()=>this.tD.We(this.UP).setMouseInteractions(!1))),this.cD=new _l((()=>this.tD.Dv(this.UP).setMouseInteractions(!1))),this.dD=new _l((()=>this.tD.Be(this.UP).setMouseInteractions(!1))),this.fD=new _l((()=>this.tD.R_(this.UP).setMouseInteractions(!1))),this.AD=new _l((()=>this.tD.rd(this.UP).setMouseInteractions(!1))),this.Iy(h,this.uiScale),this.onResize((()=>{this.hP=!0,this.us.xs(),this.UP.tt(this.mg.ni()),this.YP.tt(this.mg.ni())})),this.gD=this.es.Cg([this.hD])}getMinimumSize(){return{x:200,y:200}}setAnimationsEnabled(t){return this}sf(){return[]}dispose(){return super.dispose(),this.KP.U(),this.qP.U(),this.tD.U(),this.iD.U(),this.sD.U(),Pa(this.UP),Pa(this.YP),this.OP.dispose(),this.aD.wp(),this.nD.wp(),this.oD.wp(),this.lD.wp(),this.uD.wp(),this.cD.wp(),this.dD.wp(),this.fD.wp(),this.AD.wp(),this}Z(){return super.Z(),this.UP.Z(),this.YP.Z(),this}J(){return super.J(),this.UP.J(),this.YP.J(),this}setBackgroundEffect(t){return this.gD.bs(t),this.us.xs(),this}getBackgroundEffect(){return this.gD.Ms()}setInteractionScrollOnWheel(t){return this.xP=t,this}getInteractionScrollOnWheel(){return this.xP}setInteractionPanOnTouch(t){return this.MP=t,this}getInteractionPanOnTouch(){return this.MP}onCellMouseEnter(t){return this.L.on(Ff.cellMouseEnter,t)}offCellMouseEnter(t){return this.L.off(t)}onCellMouseLeave(t){return this.L.on(Ff.cellMouseLeave,t)}offCellMouseLeave(t){return this.L.off(t)}onCellMouseClick(t){return this.L.on(Ff.cellMouseClick,t)}offCellMouseClick(t){return this.L.off(t)}onCellMouseDoubleClick(t){return this.L.on(Ff.cellMouseDoubleClick,t)}offCellMouseDoubleClick(t){return this.L.off(t)}onCellMouseDown(t){return this.L.on(Ff.cellMouseDown,t)}offCellMouseDown(t){return this.L.off(t)}onCellMouseUp(t){return this.L.on(Ff.cellMouseUp,t)}offCellMouseUp(t){return this.L.off(t)}onCellMouseMove(t){return this.L.on(Ff.cellMouseMove,t)}offCellMouseMove(t){return this.L.off(t)}onCellMouseDrag(t){return this.L.on(Ff.cellMouseDrag,t)}offCellMouseDrag(t){return this.L.off(t)}onCellMouseDragStart(t){return this.L.on(Ff.cellMouseDragStart,t)}offCellMouseDragStart(t){return this.L.off(t)}onCellMouseDragStop(t){return this.L.on(Ff.cellMouseDragStop,t)}offCellMouseDragStop(t){return this.L.off(t)}onCellMouseWheel(t){return this.L.on(Ff.cellMouseWheel,t)}offCellMouseWheel(t){return this.L.off(t)}onCellTouchStart(t){return this.L.on(Ff.cellTouchStart,t)}offCellTouchStart(t){return this.L.off(t)}onCellTouchMove(t){return this.L.on(Ff.cellTouchMove,t)}offCellTouchMove(t){return this.L.off(t)}onCellTouchEnd(t){return this.L.on(Ff.cellTouchEnd,t)}offCellTouchEnd(t){return this.L.off(t)}setGridBackgroundFillStyle(t){return this.hD.De(t),this.us.xs(),this}getGridBackgroundFillStyle(){return this.hD.$h()}setCellContent(t,i,s,e,h){if("number"==typeof s&&void 0!==e&&void 0!==h){const r=s,n=e,o=h;let a=[];for(let s=t;s<t+r;s+=1)for(let t=i;t<i+n;t+=1){const i=this.CP(s,t);i&&a.push(i)}a=Ri(a);let l={highlight:0};for(const t of a){const i=this.tP.indexOf(t);i<0||(l={...l,highlight:t.highlight,textFont:t.textFont,textFillStyle:t.textFillStyle,contentAlignment:t.contentAlignment,borders:t.borders,padding:t.padding,backgroundFillStyle:t.backgroundFillStyle},this.tP.splice(i,1))}const u={...l,column:t,row:i,columnSpan:r,rowSpan:n,content:o};this.tP.push(u),this.oP=!0,"string"==typeof u.content||"number"==typeof u.content?this.rP=!0:this.nP=!0,this.us.xs()}else this.yD(t,i,s);return this}setColumnContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.yD(t,e,s)}return this}setRowContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.yD(e,t,s)}return this}setTableContent(t){const i=t.length;if(0===i)return this;const s=t[0].length;if(0===s)return this;for(let e=0;e<s;e+=1)for(let s=0;s<i;s+=1){const i=t[s][e];this.yD(e,s,i)}return this}setColumnWidth(t,i){let s=this.iP.find((i=>i.column===t));return s||(s={column:t,min:void 0,max:void 0},this.iP.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.iP.splice(this.iP.indexOf(s),1):(s.min=i,s.max=i),this.lP=!0,this.us.xs(),this}setRowHeight(t,i){let s=this.sP.find((i=>i.row===t));return s||(s={row:t,min:void 0,max:void 0},this.sP.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.sP.splice(this.sP.indexOf(s),1):(s.min=i,s.max=i),this.lP=!0,this.us.xs(),this}setColumnPaddings(t,i){return"number"==typeof i&&(i=g(i,i,i,i)),this.mD(t,(t=>this.pD(t,i))),this}setRowPaddings(t,i){return"number"==typeof i&&(i=g(i,i,i,i)),this.vD(t,(t=>this.pD(t,i))),this}setCellPadding(t,i,s){return"number"==typeof s&&(s=g(s,s,s,s)),this.CP(t,i,(t=>this.pD(t,s))),this}setCellsPaddings(t){return"number"==typeof t&&(t=g(t,t,t,t)),this.JP={...this.JP,...t},this.SD((t=>this.pD(t,this.JP))),this}setCellBorders(t,i,s){return this.CP(t,i,(t=>this._P(t,s))),this}setRowBorders(t,i){return this.vD(t,(t=>this._P(t,i))),this}setColumnBorders(t,i){return this.mD(t,(t=>this._P(t,i))),this}setCellsBorders(t){return this.kP=void 0===t?Bf:t,this.SD((t=>this._P(t,this.kP))),this}setCellsBorderStrokeStyle(t){return this.ZP="function"==typeof t?t(this.ZP):t,this.mP=!0,this.us.xs(),this}setColumnTextFillStyle(t,i){return this.mD(t,(t=>this.bD(t,i))),this}setRowTextFillStyle(t,i){return this.vD(t,(t=>this.bD(t,i))),this}setCellTextFillStyle(t,i,s){return this.CP(t,i,(t=>this.bD(t,s))),this}setCellsTextFillStyle(t){return this.XP="function"==typeof t?t(this.XP):t,this.SD((t=>this.bD(t,this.XP))),this}setColumnTextFont(t,i){return this.mD(t,(t=>this.xD(t,i))),this}setRowTextFont(t,i){return this.vD(t,(t=>this.xD(t,i))),this}setCellTextFont(t,i,s){return this.CP(t,i,(t=>this.xD(t,s))),this}setCellsTextFont(t){return this.$P="function"==typeof t?t(this.$P):t,this.SD((t=>this.xD(t,this.$P))),this}setColumnContentAlignment(t,i){return this.mD(t,(t=>this.MD(t,i))),this}setRowContentAlignment(t,i){return this.vD(t,(t=>this.MD(t,i))),this}setCellContentAlignment(t,i,s){return this.CP(t,i,(t=>this.MD(t,s))),this}setCellsContentAlignment(t){return this.QP=t,this.SD((t=>this.MD(t,this.QP))),this}setCellBackgroundFillStyle(t,i,s){return this.CP(t,i,(t=>this._D(t,s))),this}setColumnBackgroundFillStyle(t,i){return this.mD(t,(t=>this._D(t,i))),this}setRowBackgroundFillStyle(t,i){return this.vD(t,(t=>this._D(t,i))),this}setCellsBackgroundFillStyle(t){return this.jP="function"==typeof t?t(this.jP):t,this.SD((t=>this._D(t,this.jP))),this}setCellHighlight(t,i,s){return this.CP(t,i,(t=>{t.highlight=zi(s)})),this.yP=!0,this.us.xs(),this}setColumnHighlight(t,i){const s=zi(i);return this.mD(t,(t=>{t.highlight=s})),this.yP=!0,this.us.xs(),this}setRowHighlight(t,i){const s=zi(i);return this.vD(t,(t=>{t.highlight=s})),this.yP=!0,this.us.xs(),this}removeCell(t,i){return this.CP(t,i,(t=>this.tP.splice(this.tP.indexOf(t),1))),this.aP=!0,this.us.xs(),this}removeRow(t){return this.vD(t,(t=>this.tP.splice(this.tP.indexOf(t),1))),this.tP.filter((i=>i.row>t)).forEach((t=>{t.row-=1})),this.aP=!0,this.us.xs(),this}removeColumn(t){return this.mD(t,(t=>this.tP.splice(this.tP.indexOf(t),1))),this.tP.filter((i=>i.column>t)).forEach((t=>{t.column-=1})),this.aP=!0,this.us.xs(),this}removeCells(){return this.tP.splice(0),this.aP=!0,this.us.xs(),this}getColumnMax(){return 0===this.tP.length?0:this.tP.reduce(((t,i)=>Math.max(t,i.column+i.columnSpan-1)),0)}getRowMax(){return 0===this.tP.length?0:this.tP.reduce(((t,i)=>Math.max(t,i.row+i.rowSpan-1)),0)}Le(t){super.Le(t),Ra.Oy(this.bh,this.Dy),super.Fy();const i=Math.round(this.ZP.O()),s=i/2;let e=this.rP||this.nP||this.oP||this.aP||this.lP||this.uP||this.AP||this.gP||this.mP||this.vP;if(e){this.tP.forEach((t=>{this.bP.add(t.column)})),this.tP.forEach((t=>{this.SP.add(t.row)}));const t=this.aD.Mp(),h=this.wD(s,t);t.finishPlot();const r=this.CD(this.bP.size,h),n=this.kD(this.SP.size,h),o=r.reduce(os,0)+i,a=n.reduce(os,0)+i,l=new Array(r.length+1).fill(0).map(((t,i)=>r.reduce(((t,s,e)=>t+(e<i?s:0)),0))),u=new Array(n.length+1).fill(0).map(((t,i)=>n.reduce(((t,s,e)=>t+(e<i?s:0)),0)));if(this.TD){const t=this.TD.columnWidths.every(((t,i)=>t===r[i])),i=this.TD.rowHeights.every(((t,i)=>t===n[i]));t&&i&&(e=!1)}this.TD={columnWidths:r,rowHeights:n,dataGridWidth:o,dataGridHeight:a,columnWidthsCumulative:l,rowHeightsCumulative:u,cellsContentSizes:h}}const h=e||this.nP||this.oP||this.aP||this.cP||this.dP||this.fP||this.gP||this.yP||this.mP||this.hP||this.vP;if((h||this.pP)&&this.TD){const t=this.mg.getInnerIntervalPixels(),e=Ra.Vy(this.bh,this.Dy),r=[this.Ca.left+s,this.Ca.right+s],n=[this.Ca.bottom+s,this.Ca.top+e+s],o={x:t.x-r[0]-r[1],y:t.y-n[0]-n[1]},a=[this.Ca.left,this.Ca.right],l=[this.Ca.bottom,this.Ca.top+e],u={x:Math.round(t.x-a[0]-a[1]),y:Math.round(t.y-l[0]-l[1])},c={x:Math.ceil(s),y:Math.floor(u.y-s)};this.YP.Ri(r).Ei(n).zi(0,o.x).Vi(0,o.y),this.OP._I({x:this.TD.dataGridHeight,y:this.TD.dataGridWidth}).Es().Le();const d={x:Math.round(this.HP.x),y:Math.round(Math.min(0,this.HP.y))};this.UP.Ri(a).Ei(l).zi(d.x,u.x+d.x).Vi(d.y,u.y+d.y),this.hD.Re({x:c.x,y:c.y});const f={x:this.UP.x.si(),y:this.UP.y.si()+this.OP.xI(),width:this.UP.x.hi()+i-this.OP.xI(),height:this.UP.y.hi()+i};this.tD.ab(f),this.qP.ab(f),this.KP.ab(f);const A=this.TD,g=[{x:this.UP.x.getInnerStart(),y:this.UP.y.getInnerStart()},{x:this.UP.x.getInnerEnd(),y:this.UP.y.getInnerStart()},{x:this.UP.x.getInnerEnd(),y:this.UP.y.getInnerEnd()},{x:this.UP.x.getInnerStart(),y:this.UP.y.getInnerEnd()}];A.cellsContentSizes.forEach((t=>{var i;const s={x:c.x+A.columnWidthsCumulative[t.cell.column],y:c.y-A.rowHeightsCumulative[t.cell.row+t.cell.rowSpan]},e={x:s.x+A.columnWidths[t.cell.column],y:s.y+A.rowHeights[t.cell.row]},h=hs([s,{x:e.x,y:s.y},e,{x:s.x,y:e.y}],g);null===(i=t.text)||void 0===i||i.setVisible(h)})),h&&this.FD(c,this.TD,i)}this.hP=!1,this.rP=!1,this.nP=!1,this.oP=!1,this.aP=!1,this.lP=!1,this.uP=!1,this.cP=!1,this.dP=!1,this.fP=!1,this.AP=!1,this.gP=!1,this.yP=!1,this.mP=!1,this.pP=!1,this.vP=!1}wD(t,i){const s=[],e={left:Math.ceil(t),right:Math.ceil(t),top:Math.ceil(t),bottom:Math.ceil(t)};for(const t of this.tP){const{content:h}=t,r={...this.JP,...t.padding};let n,o,a,l={x:0,y:0};if("string"==typeof h||"number"==typeof h){const s=String(h);n=i.add(),l=n.yr(s).Zh(t.textFont||this.$P).Es().sd()}if(of(h)&&(o=h,l={x:200,y:50}),Ln(h)){const t=this.us.ID(h);t.PD()?(a=h,l=a.ni()):t.DD((()=>{this.vP=!0,this.us.xs()}))}if(n||o||a){r.top=Math.round(r.top),r.left=Math.round(r.left),r.right=Math.round(r.right),r.bottom=Math.round(r.bottom);const i={x:Math.round(l.x+r.left+r.right+e.left+e.right),y:Math.round(l.y+r.top+r.bottom+e.top+e.bottom)};s.push({cell:t,contentSize:i,text:n,sparkChart:o,icon:a,cellPadding:r,cellMargin:e})}}return s}FD(t,i,s){const{dataGridWidth:e,dataGridHeight:h,cellsContentSizes:r,columnWidths:n,columnWidthsCumulative:o,rowHeights:a,rowHeightsCumulative:l}=i,u={x:e-s,y:-h+s};this.hD.tt(u),this.rD.Ge(this.ZP),this.eP.clear();const c={cellBackground:this.nD.Mp(),cellIconRect:this.oD.Mp(),lineSet:this.lD.Mp(),line:this.uD.Mp(),pointSet:this.cD.Mp(),rect:this.dD.Mp(),junction:this.fD.Mp(),arc:this.AD.Mp()},d=[];for(const i of r){const{cell:e,text:h,sparkChart:r,icon:u,cellPadding:f,cellMargin:A}=i,g={column:e.column,row:e.row},y={x:t.x+o[e.column],y:t.y-l[e.row+e.rowSpan]},m={x:y.x+A.left,y:y.y+A.bottom},p={x:m.x+f.left,y:m.y+f.bottom},v={x:new Array(e.columnSpan).fill(0).reduce(((t,i,s)=>t+n[e.column+s]),0),y:new Array(e.rowSpan).fill(0).reduce(((t,i,s)=>t+a[e.row+s]),0)},S={x:v.x-A.left-A.right,y:v.y-A.top-A.bottom},b={x:S.x-f.left-f.right,y:S.y-f.top-f.bottom};if(h){const t=Df(p,b,e.contentAlignment||this.QP);h.Re(t[0]).Ha({x:t[1],y:t[2]}).De(this.BD(e.textFillStyle||this.XP,e.content,this.XP)).cs(e.highlight)}const x=this.BD(e.backgroundFillStyle||this.jP,e.content);if(x!==O){const t=c.cellBackground.add();t.Re(y).tt(v).De(x).Pe(at).cs(e.highlight),this.eP.set(t,g)}const M=e.borders||this.kP;if(M&&Pf(y,v,M,s,d),r){const t=p,i=b;af(r,c,this.UP,t,i,this.qi,this.vA,e.highlight)}if(u){const t=u.ni(),i=Df(p,b,e.contentAlignment||this.QP);c.cellIconRect.add().Re({x:i[0].x+t.x*(-.5-i[1]/2),y:i[0].y+t.y*(-.5-i[2]/2)}).tt(t).De(new Cn({source:u.cc,fitMode:_n.Stretch})).Pe(at).cs(e.highlight)}}this.rD.Vt();for(const t of d)this.rD.$r().Hg(t[0],t[1]);c.cellBackground.finishPlot(),c.cellIconRect.finishPlot(),c.lineSet.finishPlot(),c.line.finishPlot(),c.pointSet.finishPlot(),c.rect.finishPlot(),c.junction.finishPlot(),c.arc.finishPlot()}CD(t,i){const s=new Array(t).fill(0);for(const t of this.bP.values()){const e=i.filter((i=>t>=i.cell.column&&t+1<=i.cell.column+i.cell.columnSpan)).reduce(((t,i)=>{const s=i.contentSize.x/i.cell.columnSpan;return Math.max(t,s)}),0),h=this.iP.find((i=>i.column===t)),r=h?$t(e,void 0!==h.min?h.min:qi,void 0!==h.max?h.max:Ki):e;s[t]=r}return s}kD(t,i){const s=new Array(t).fill(0);for(const t of this.SP.values()){const e=i.filter((i=>t>=i.cell.row&&t+1<=i.cell.row+i.cell.rowSpan)).reduce(((t,i)=>{const s=i.contentSize.y/i.cell.rowSpan;return Math.max(t,s)}),0),h=this.sP.find((i=>i.row===t)),r=h?$t(e,void 0!==h.min?h.min:qi,void 0!==h.max?h.max:Ki):e;s[t]=r}return s}BD(t,i,s){if(Z(t)){try{const s=Number(i);return new U({color:t.getPalette().getColors(s)})}catch(t){}return s||O}return t}bD(t,i){t.textFillStyle="function"==typeof i?i(t.textFillStyle||this.XP):i,this.fP=!0,this.us.xs()}xD(t,i){t.textFont="function"==typeof i?i(t.textFont||this.$P):i,this.AP=!0,this.us.xs()}_D(t,i){t.backgroundFillStyle="function"==typeof i?i(t.backgroundFillStyle||this.jP):i,this.dP=!0,this.us.xs()}MD(t,i){t.contentAlignment=i,this.cP=!0,this.us.xs()}pD(t,i){t.padding={...t.padding,...i},this.uP=!0,this.us.xs()}yD(t,i,s){let e=this.CP(t,i);e?e.content=s:(e={column:t,row:i,columnSpan:1,rowSpan:1,content:s,highlight:0},this.tP.push(e),this.oP=!0),"string"==typeof e.content||"number"==typeof e.content?this.rP=!0:this.nP=!0,this.us.xs()}SD(t){this.tP.forEach((i=>t(i)))}CP(t,i,s){const e=this.tP.find((s=>t>=s.column&&t+1<=s.column+s.columnSpan&&i>=s.row&&i+1<=s.row+s.rowSpan));return e&&s&&s(e),e}mD(t,i){const s=this.tP.filter((i=>t>=i.column&&t+1<=i.column+i.columnSpan));for(const t of s)t&&i(t)}vD(t,i){const s=this.tP.filter((i=>t>=i.row&&t+1<=i.row+i.rowSpan));for(const t of s)t&&i(t)}eD(){return new kf(this.sD,this.iD,this.YP,this.YP,this.UP,this.qi,xf.Both).onScroll(((t,i)=>{this.TD&&(t===xf.Vertical&&(this.HP.y=-i),t===xf.Horizontal&&(this.HP.x=i),this.pP=!0,this.us.xs())})).jI(50).ZI(12)}}const Ff={cellMouseEnter:"cellMouseEnter",cellMouseLeave:"cellMouseLeave",cellMouseClick:"cellMouseClick",cellMouseDoubleClick:"cellMouseDoubleClick",cellMouseDown:"cellMouseDown",cellMouseUp:"cellMouseUp",cellMouseMove:"cellMouseMove",cellMouseDrag:"cellMouseDrag",cellMouseDragStart:"cellMouseDragStart",cellMouseDragStop:"cellMouseDragStop",cellMouseWheel:"cellMouseWheel",cellTouchStart:"cellTouchStart",cellTouchMove:"cellTouchMove",cellTouchEnd:"cellTouchEnd"};var If;!function(t){t.Center="center",t.RightCenter="right-center",t.LeftCenter="left-center",t.RightTop="right-top",t.LeftTop="left-top",t.RightBottom="right-bottom",t.LeftBottom="left-bottom",t.CenterTop="center-top",t.CenterBottom="center-bottom"}(If||(If={}));const Pf=(t,i,s,e,h)=>{const r={x:t.x,y:t.y},n={x:t.x,y:t.y+i.y},o={x:t.x+i.x,y:t.y},a={x:t.x+i.x,y:t.y+i.y};s.top&&h.push([n,a]),s.bottom&&h.push([r,o]),s.left&&h.push([r,n]),s.right&&h.push([o,a])},Df=(t,i,s)=>{const e=t.x,h=t.x+i.x,r=t.x+i.x/2,o=t.y+i.y,a=t.y,l=t.y+i.y/2;switch(s){case"left-center":return[n(e,l),-1,0];case"right-center":return[n(h,l),1,0];case"center":return[n(r,l),0,0];case"left-bottom":return[n(e,a),-1,-1];case"right-bottom":return[n(h,a),1,-1];case"center-bottom":return[n(r,a),0,-1];case"left-top":return[n(e,o),-1,1];case"right-top":return[n(h,o),1,1];case"center-top":return[n(r,o),0,1]}return Oi(0,`Unidentified DataGrid cell content alignment option: ${s}`)},Bf={top:!1,bottom:!1,left:!1,right:!1};class Lf extends xh{constructor(t,i,s,e,h,r){super(t,{Fr(){},Tr(){},Pr(){}},e,i,s,{numeric:i.xAxisNumericTicks,datetime:i.xAxisDateTimeTicks,time:i.xAxisTimeTicks},{type:"linear"}),this.chart=t,this.es=r,this.Ds=h,this._h=h.Nr(t.LD).Zh(this.qi.barChartCategoryAxisTitleFont||this.qi.xAxisTitleFont).De(this.qi.barChartCategoryAxisTitleFillStyle||this.qi.xAxisTitleFillStyle),this.setTitleRotation(this.chart.Bs.getWidth({x:0,y:-90})),this.Kh=this.es.Cg([this._h]).bs(i.effectsText),this.RD=h.We(t.LD).Ge(i.barChartCategoryAxisStrokeStyle||i.xAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.Pg=t,this.Dg=t):"object"==typeof t&&(this.Pg=t.min,this.Dg=t.max),this.chart.us.xs(),this}getThickness(){return{min:this.Pg,max:this.Dg}}setStrokeStyle(t){return this.RD.Ge(t),this.chart.us.xs(),this}getStrokeStyle(){return this.RD.mu()}Es(){if(!this.ji)return{Eg:0,zg:0,Hd:$t(0,void 0!==this.Pg?this.Pg:0,void 0!==this.Dg?this.Dg:Ki)};const t=this.RD.mu().O()/2,i=this.chart.Bs.getHeight(this._h.Es().sd());return{Eg:t,zg:i,Hd:t+i}}Le(t,i,s,e){const h=this.getInterval(),r=this.chart.valueAxis.getInterval();this.RD.Ye(this.chart.Bs.toPoint(h.start,r.start)).Ue(this.chart.Bs.toPoint(h.end,r.start)).setVisible(this.ji),this._h.Re(this.chart.Bs.toPoint(.5*(h.start+h.end),this.chart.valueAxis.ft.gi(r.start,-(t.Eg+e.labelMarginBeforeCategoryAxisPixels)))).Ha(this.chart.Bs.toPoint(0,1)).setVisible(this.ji)}setMouseInteractions(t){return this}vr(t,i){return new Mh(i,t,this.Ds,this.chart.LD)}Sr(t,i){return{}}Br(t,i){return i}Rr(t,i,s){return{min:t,max:i}}}class Rf extends xh{constructor(t,i,s,e,h,r,n){super(t,{Fr:()=>{var i;if(t.ED){if("positive"===t.zD||"bipolar"===t.zD){if("after-bar"===(null===(i=t.VD)||void 0===i?void 0:i.position)){const i=this.ft.hi();return this.ft.gi(t.ED.max,Math.min(this.chart.Bs.getHeight(this.chart.OD())+t.VD.labelMargin,.3*i))}return t.ED.max}return t.ND?$t(-1,-1e-6,t.ED.max):0}},Tr:()=>{var i;if(t.ED){if("negative"===t.zD||"bipolar"===t.zD){if("after-bar"===(null===(i=t.VD)||void 0===i?void 0:i.position)){const i=this.ft.hi();return this.ft.gi(t.ED.min,-Math.min(this.chart.Bs.getHeight(this.chart.OD())+t.VD.labelMargin,.3*i))}return t.ED.min}return t.ND?$t(1,1e-6,t.ED.min):0}},Pr:()=>{}},e,i,s,{numeric:i.barChartValueAxisTicks||i.yAxisNumericTicks,datetime:i.yAxisDateTimeTicks,time:i.yAxisTimeTicks},n),this.chart=t,this.es=r,this.Ds=h,this._h=h.Nr(t.LD).Zh(this.qi.barChartValueAxisTitleFont||this.qi.yAxisTitleFont).De(this.qi.barChartValueAxisTitleFillStyle||this.qi.yAxisTitleFillStyle),this.setTitleRotation(this.chart.Bs.getHeight({x:0,y:-90})),this.Kh=this.es.Cg([this._h]).bs(i.effectsText),this.RD=h.We(t.LD).Ge(i.barChartValueAxisStrokeStyle||this.qi.yAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.Pg=t,this.Dg=t):"object"==typeof t&&(this.Pg=t.min,this.Dg=t.max),this.chart.us.xs(),this}getThickness(){return{min:this.Pg,max:this.Dg}}setStrokeStyle(t){return this.RD.Ge(t),this.chart.us.xs(),this}getStrokeStyle(){return this.RD.mu()}setTickStrategy(t,i){return super.Nh(t,i)}Es(t){if(!this.ji)return this.qh(),{Eg:0,zg:0,Hd:$t(0,void 0!==this.Pg?this.Pg:0,void 0!==this.Dg?this.Dg:Ki)};const i=this.chart.Bs.getWidth(this.chart.LD).hi(),s=this.ft.hi();this.nr({physicalAxisSize:s,oppositeAxisSize:i,plotLines:t});let e=0;for(const t of this.hh.values())for(const i of t.values()){const t=i.Ph.pr,s=this.chart.Bs.getWidth(i.th.sd()),h=t.getTickLength()+t.getTickPadding()+s;e=Math.max(e,h)}const h=e+this.RD.mu().O()/2,r=this.chart.Bs.getWidth(this._h.Es().sd());return{Eg:h,zg:r,Hd:$t(h+r,void 0!==this.Pg?this.Pg:0,void 0!==this.Dg?this.Dg:Ki)}}Le(t){const i=this.getInterval();this.RD.Ye(this.chart.Bs.toPoint(-.5,this.Gh)).Ue(this.chart.Bs.toPoint(-.5,this.Wh)).setVisible(this.ji);const s="logarithmic"===this.Vh.type?Math.sqrt(i.start+i.end):.5*(i.start+i.end),e=this.chart.Bs.toPoint(this.chart.categoryAxis.ft.gi(-.5,t.Eg*this.chart.Bs.GD),s),h=this.chart.Bs.toPoint(this.chart.Bs.WD,0);this._h.Re(e).Ha(h).setVisible(this.ji)}setMouseInteractions(t){return this}vr(t,i){return new Mh(i,t,this.Ds,this.chart.LD)}Sr(t,i){const s=t.Ph.pr,e=this.chart.Bs.toPoint(-.5,t.S),h=this.chart.LD.gi(e,this.chart.Bs.toPoint(s.getTickLength()*this.chart.Bs.GD,0)),r=this.chart.LD.gi(e,this.chart.Bs.toPoint(s.gridStrokeLength*i.oppositeAxisSize*-this.chart.Bs.GD,0)),n=this.chart.LD.gi(h,this.chart.Bs.toPoint(s.getTickPadding()*this.chart.Bs.GD,0));t.th.Re(n).Ha(this.chart.Bs.toPoint(this.chart.Bs.WD,s.getLabelAlignment())).Qh(s.getLabelRotation()),s.tickStyle!==at&&0!==s.tickLength&&i.plotLines.add({positions:[e,h]},{lineStyle:s.tickStyle}),s.gridStrokeStyle!==at&&s.gridStrokeLength>0&&i.plotLines.add({positions:[e,r]},{lineStyle:s.gridStrokeStyle})}Br(t,i){return"linear"===this.Vh.type?ae(t,i,this.ft):le(t,i,this.ft)}Rr(t,i,s){return{min:t,max:i}}}class Ef extends Mu{constructor(t,i,s,e,h,r,n){super(t,i,s,e),this.jo=$i(),this.S=0,this.UD=!1,this.chart=t,this.chart=t,this.category=h,this.subCategory=r,this.ws=h,this.ke=Ii(s.barChartBarFillStyle||s.rectangleSeriesFillStyle,n),this.Te=Ii(s.barChartBarStrokeStyle||s.rectangleSeriesStrokeStyle,n),this.onVisibleStateChanged((()=>{this.chart.YD()})),this.onDispose((()=>{this.chart.YD(),this.chart.HD.delete(this.category),this.chart.$D.delete(this)}))}Ji(t,i){const s=this.chart.us.Oo(i);return{cursorPosition:{pointMarker:{x:s.engineX,y:s.engineY},pointMarkerScale:this.chart.us.ft,resultTable:{x:s.engineX,y:s.engineY},resultTableScale:this.chart.us.ft},category:this.category,subCategory:this.subCategory,bar:this,value:this.getValue()}}setValue(t){return this.UD=!0,this.S=t,this.chart.YD(),this.chart.us.xs(),this.chart.HD.delete(this.category),this.chart.$D.delete(this),this}getValue(){return this.S}get value(){return this.S}setFillStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.chart.YD(),this}getFillStyle(){return this.ke}setStrokeStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.chart.YD(),this}getStrokeStyle(){return this.Te}nv(){return this.lv}setEffect(t){return this.chart.setBarsEffect(t),this}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke})}}const zf=t=>!!(t&&"object"==typeof t&&"iCategory"in t&&"number"==typeof t.iCategory&&"value"in t&&"number"==typeof t.value),Vf=(t,i,s)=>{const e=t.Ld.filter((t=>void 0!==t)),h=e.map((t=>s(t.sizePixels))).reduce(((t,i)=>Math.max(t,i)),1),r=Math.ceil(h/(i/e.length));return r<=1?e:e.filter(((t,i)=>i%r==0))};class Of extends Nl{constructor(t,i,s,e,h,r,n){var o;let a;super(t,i,s,i.Py("barChart bg",0),e,i.us.qi.barChartBackgroundFillStyle||i.us.qi.chartXYBackgroundFillStyle,i.us.qi.barChartBackgroundStrokeStyle||i.us.qi.chartXYBackgroundStrokeStyle,i.us.qi.barChartTitleFont||i.us.qi.chartXYTitleFont,i.us.qi.barChartTitleFillStyle||i.us.qi.chartXYTitleFillStyle,r),this.coordsBars="barChart",this.XD=Gf.Descending,this.jD=this.qi.barChartCategoryLabels,this.VD=this.qi.barChartValueLabelsAfterBars,this.ZD=!1,this.XM=Yi(),this.HD=new Map,this.$D=new Map,this.zD="positive",this.QD="columns",this.JD=!0,this.KD=new Map,this.qD={speed:1},this.Tm={speed:1},this.tB=.08,this.iB=[],this._n=(t,i,s,e,h)=>{this.LD.tt(e,h)},this.us.jn(Vo.Af),this.Bs="horizontal"===(null==n?void 0:n.type)?Uf:Wf,this.bh.yr("Bar Chart"),this.sB=i.jm("barChart plotting 1",0),this.eB=i.jm("barChart plotting 2",1),this.ND="logarithmic"===(null===(o=null==n?void 0:n.valueAxis)||void 0===o?void 0:o.type),this.ND?"horizontal"===this.Bs.hB?(a=s.d1({scale1DConstructor:Zs,dimension:"y"}),this.LD=(new qs).Li(s.d1({scale1DConstructor:Ns,dimension:"x"}),a)):(a=s.d1({scale1DConstructor:Zs,dimension:"x"}),this.LD=(new qs).Li(a,s.d1({scale1DConstructor:Ns,dimension:"y"}))):(this.LD=s.d2({scaleXYConstructor:Ks}),a=this.Bs.getWidth(this.LD)),this.rB=this.es.Cg(),this.QM=new Ml((()=>this.XM.xt(this.sB.Yp(this.LD).na(0))),((t,i,s)=>(t.De(s.fillStyle).Pe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.$r();return s.wl(i.vertices),this.XM.zt(s,i.bar),i.bar.ys([s]),s})))),(()=>{this.XM.Vt()}),(t=>{this.rB.As(t)})),this.Vv=this.uy.Be(this.LD).De(this.qi.barChartSeriesBackgroundFillStyle||O).Pe(at),this.Ov=this.uy.Be(this.LD).De(O).Pe(this.qi.barChartSeriesBackgroundStrokeStyle||at).setMouseInteractions(!1),super.zv(this.Vv,this.Ov),this.categoryAxis=new Lf(this,this.qi,!1!==(null==n?void 0:n.animationsEnabled),a,this.eB,this.es);const l=oe(null==n?void 0:n.valueAxis);this.valueAxis=new Rf(this,this.qi,!1!==(null==n?void 0:n.animationsEnabled),this.Bs.getHeight(this.LD),this.eB,this.es,l.type),this.nB=new _l((()=>this.eB.Nr(this.LD).Or(Hi).Vr(Hi).na(1))),this.oB=new Ml((()=>this.uy.Ug(this.LD).setMouseInteractions(!1)),((t,i,s)=>(t.Ge(s.lineStyle),i.map((({positions:i,existingMember:s})=>(s||t.$r()).Hg(i[0],i[1]))))));const u=i.Qm(),c=jt(n?n.cursorBuilder:void 0,Ka);this.Jm=Va(this,u,c.pm(u,this.uiScale,this.uiScale,Yt,this.qi),this,"show-pointed",Yf,(()=>0)),this.onResize(this._n),this.Iy(h,this.LD),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled))}getSeries(){return this.Bv}setCursor(t){return this.Jm.setCursor(t),this}getCursor(){return this.Jm.getCursor()}setCursorMode(t){return this.Jm.setCursorMode(t),this}getCursorMode(){return this.Jm.getCursorMode()}setCustomCursor(t){return this.Jm.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.Jm.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.Jm.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Jm.setCursorFormatting(t),this}getCursorFormatting(){return this.Jm.getCursorFormatting()}addCursor(t=Ka){const i=this.vy(),s=t.pm(i,this.uiScale,this.uiScale,this.Ay(i),this.qi);return this.ky(s),s}setBarsMargin(t){return this.tB=$t(t,0,.49),this.ZD=!0,this.us.xs(),this}getBarsMargin(){return this.tB}setBarsEffect(t){return this.rB.bs(t),this.us.xs(),this}getBarsEffect(){return this.rB.Ms()}setData(t){let i;if(Array.isArray(t))i=[],t.forEach(((t,s)=>{"string"==typeof t?i.push({category:t}):"number"==typeof t?i.push({category:`Category ${s+1}`,value:t}):"object"==typeof t&&i.push(t)}));else{i=[];const s=Object.keys(t);for(const e of s){const s=t[e];i.push({category:e,value:"number"==typeof s?s:void 0})}}return this.aB("columns",i),this}setDataStacked(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:h}=i;h.forEach(((i,h)=>{const r=t[h];s.push({category:r,subCategory:e,value:i})}))})),this.aB("stacks",s),this}setDataGrouped(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:h}=i;h.forEach(((i,h)=>{const r=t[h];s.push({category:r,subCategory:e,value:i})}))})),this.aB("groups",s),this}aB(t,i){this.Bv.length>0&&this.us.jn(Vo.kf),this.QD=t,this.iB=i.map((t=>t.category)),this.lB(i);const s=Ri(i.map((t=>t.category))),e=s.length,h=Ri(i.map((t=>t.subCategory))).filter((t=>void 0!==t));if(i.forEach((t=>{let i=this.Bv.find((i=>i.category===t.category&&i.subCategory===t.subCategory));if(!i){const e=s.indexOf(t.category),r=h.includes(t.subCategory)?h.indexOf(t.subCategory):void 0;i=new Ef(this,this.Rv,this.qi,this.us.es,t.category,t.subCategory,jt(r,e)),this.Nv(i),this.KD.set(i,{category:e,valueStart:this.ND?1e-6:0,valueEnd:void 0!==t.value?t.value:0})}void 0!==t.value&&i.setValue(t.value)})),this.Bv.slice().forEach((t=>{void 0===i.find((i=>i.category===t.category&&i.subCategory===t.subCategory))&&(t.dispose(),this.KD.delete(t))})),this.categoryAxis.setInterval(this.Bs.getWidth({x:{start:-.5,end:e-.5},y:{start:e-.5,end:-.5}})),this.ED=0===this.Bv.length?void 0:"stacks"!==t?this.Bv.reduce(((t,i)=>({min:Math.min(t.min,i.getValue()),max:Math.max(t.max,i.getValue())})),{min:Ki,max:qi}):{min:0,max:s.reduce(((t,s)=>Math.max(t,i.reduce(((t,i)=>i.category!==s?t:void 0!==i.value?t+i.value:t),0))),0)},this.ED&&(this.zD=this.ED.min>=0?"positive":this.ED.max<=0?"negative":"bipolar",("bipolar"===this.zD||"negative"===this.zD)&&this.ND))throw new Error("LightningChart JS BarChart bipolar/negative data + logarithmic value axis combination not supported.");this.lB(this.Bv),this.HD.clear(),this.$D.clear(),this.ZD=!0,this.us.xs()}setCategoryLabels(t){const i="function"==typeof t?this.jD?t(this.jD):this.jD:t;return this.jD=i?{...this.qi.barChartCategoryLabels,...i}:void 0,this.HD.clear(),this.us.xs(),this}getCategoryLabels(){return this.jD}setValueLabels(t){var i;const s="function"==typeof t?this.VD?t(this.VD):this.VD:t,e=(null==s?void 0:s.position)||(null===(i=this.VD)||void 0===i?void 0:i.position);return s&&e?"after-bar"===e?this.VD={...this.qi.barChartValueLabelsAfterBars,...s}:"inside-bar"!==e&&"inside-bar-start"!==e&&"inside-bar-centered"!==e&&"inside-bar-end"!==e||(this.VD={...this.qi.barChartValueLabelsInsideBars,...s}):this.VD=void 0,this.$D.clear(),this.us.xs(),this}getValueLabels(){return this.VD}setLabelFittingEnabled(t){return this.JD=t,this.us.xs(),this}getLabelFittingEnabled(){return this.JD}getBar(t,i){if(("groups"===this.QD||"stacks"===this.QD)&&void 0===i)throw new Error("LightningChart JS BarChart.getBar() | `subCategory` parameter is required for grouped and stacked bar charts!");const s=this.Bv.find((s=>s.category===t&&(void 0===i||i===s.subCategory)));if(!s)throw new Error(`BarChart.getBar() no such bar: "${t}" ${i?`"${i}"`:""}`);return s}getBars(){return this.Bv}setSorting(t){this.XD=t;const i=this.Bv.slice();return this.Bv.length=0,this.Bv.push(...Ei(this.iB.map((t=>i.find((i=>i.category===t)))))),this.lB(this.Bv),this.us.xs(),this}getSorting(){return this.XD}setAnimationCategoryPosition(t,i=1){return this.qD=t?{speed:i}:void 0,this.us.xs(),this}setAnimationValues(t,i=1){return this.Tm=t?{speed:i}:void 0,this.us.xs(),this}translateCoordinate(t,i,s){if(s&&he(t)&&ee(i))return super.translateCoordinate(t,i,s);const e=i;let h;if(se(t))h=this.us.Oo(t);else if(he(t)){const i=At(t,this.mg,this.us.ft);h={engineX:i.x,engineY:i.y}}else{if(!zf(t))throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Input coordinate system not recognized.");{const i=At(this.Bs.toPoint(t.iCategory,t.value),this.LD,this.us.ft);h={engineX:i.x,engineY:i.y}}}if(ie(e))return this.us.No(h);if("barChart"===e){const t=At({x:h.engineX,y:h.engineY},this.us.ft,this.LD);return{iCategory:this.Bs.getWidth(t),value:this.Bs.getHeight(t)}}if(ee(e))return At({x:h.engineX,y:h.engineY},this.us.ft,this.mg);throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Target coordinate system not recognized.")}sf(){if("columns"===this.QD)return this.Bv;const t=Ri(Ei(this.Bv.map((t=>t.subCategory))));return Ei(t.map((t=>{const i=this.Bv.filter((i=>i.subCategory===t)),s=i[0];if(s)return(t=>{let i=!1;t.forEach((s=>s.onHighlight(((e,h)=>{i||(i=!0,t.forEach((t=>s!==t?t.setHighlight(h):void 0)),i=!1)})))),t.forEach((i=>i.onDispose((()=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)}))))})(i),{attach(e,h){return Vi(e,i,{toggleVisibilityOnClick:!0,label:t,style:s.getFillStyle()}),this}}})))}Le(t){var i,s;super.Le(t);const e=this.nB.Mp(),h=this.oB.Mp(),r=this.Bv.filter((t=>t.getVisible()&&t.UD)),n=Ri(r.map((t=>t.category))),o=Ri(Ei(r.map((t=>t.subCategory)))),a=5e-4*t*((null===(i=this.qD)||void 0===i?void 0:i.speed)||0),l=.003*t*((null===(s=this.qD)||void 0===s?void 0:s.speed)||0),u=this.valueAxis.ft,c=u instanceof Zs?(t,i)=>{var s;return ae(t,i,u,(null===(s=this.Tm)||void 0===s?void 0:s.speed)||0)}:(t,i)=>{var s;return le(t,i,u,(null===(s=this.Tm)||void 0===s?void 0:s.speed)||0)};let d;"columns"===this.QD?d=r.map((t=>({bar:t,position:{category:n.indexOf(t.category),valueStart:this.ND?1e-6:0,valueEnd:t.value}}))):"groups"===this.QD?d=r.map((t=>{const i=n.indexOf(t.category),s=o.indexOf(t.subCategory),e=1/(o.length+2*(o.length+1)*this.tB),h=this.tB*e;return{bar:t,position:{category:i+(s-(o.length-1)/2)*(e+h),valueStart:this.ND?1e-6:0,valueEnd:t.value}}})):(d=[],n.forEach(((t,i)=>{const s=r.filter((i=>i.category===t));let e=this.ND?1e-6:0;s.forEach(((i,s)=>{d.push({bar:i,position:{category:n.indexOf(t),valueStart:e,valueEnd:e+i.value}}),e+=i.value}))}))),d.forEach((t=>{const{bar:i,position:s}=t;let e,h,r=this.KD.get(i);void 0===r&&(r=s);const n=s.valueStart;if(this.qD&&r.category!==s.category){const t=Math.sign(s.category-r.category);e=r.category+a*t+l*(s.category-r.category),t!==Math.sign(s.category-e)&&(e=s.category)}else e=s.category;if(this.Tm&&r.valueEnd!==s.valueEnd){const t=Math.sign(s.valueEnd-r.valueEnd);h=c(r.valueEnd,s.valueEnd),t!==Math.sign(s.valueEnd-h)&&(h=s.valueEnd)}else h=s.valueEnd;this.KD.set(i,{category:e,valueStart:n,valueEnd:h}),e===s.category&&h===s.valueEnd||this.us.xs(!0),e===r.category&&h===r.valueEnd||(this.ZD=!0)})),Ra.Oy(this.bh,this.Dy);const f=r.length>0;this.categoryAxis.Dr(),this.valueAxis.Dr();const A=this.categoryAxis.setVisible(f).Es(),g=this.valueAxis.setVisible(f).Es(h),{labelMarginBeforeCategoryAxisPixels:y}=f?this.uB(n,r,e,h):{labelMarginBeforeCategoryAxisPixels:0};this.categoryAxis.Le(A,e,h,{labelMarginBeforeCategoryAxisPixels:y}),this.valueAxis.Le(g);const m=this.categoryAxis.getThickness(),p=$t(A.Hd+y,void 0!==m.min?m.min:0,void 0!==m.max?m.max:Ki),v={x:Math.min(this.LD.x.getInnerStart(),this.LD.x.getInnerEnd()),y:Math.min(this.LD.y.getInnerStart(),this.LD.y.getInnerEnd())},S=Math.max(this.LD.x.getInnerStart(),this.LD.x.getInnerEnd()),b=Math.max(this.LD.y.getInnerStart(),this.LD.y.getInnerEnd()),x={x:S-v.x,y:b-v.y};this.Vv.Re(v),this.Vv.tt(x),this.Ov.Re(v),this.Ov.tt(x),super.Fy(),this.Jm.Le(!1,this.Bv,void 0);const M=Ra.Vy(this.bh,this.Dy);if(this.LD.Ei([this.$t.bottom+this.Ca.bottom+("vertical"===this.Bs.hB?p:0),this.$t.top+this.Ca.top+M+("horizontal"===this.Bs.hB?g.Hd:0)]),this.LD.Ri([this.$t.left+this.Ca.left+this.Bs.getHeight({x:p,y:g.Hd}),this.$t.right+this.Ca.right]),this.sB.ab({x:this.LD.x.si(),y:this.LD.y.si(),width:this.LD.x.hi(),height:this.LD.y.hi()}),this.hy&&this.hy(),this.ZD){const t=this.QM.Mp(),i="groups"===this.QD?1/(o.length+2*(o.length+1)*this.tB):1-2*this.tB;r.forEach((s=>{const e=this.KD.get(s);if(void 0===e)return;const h=e.category-.5*i,r=e.category+.5*i,n=[this.Bs.toPoint(h,e.valueStart),this.Bs.toPoint(h,e.valueEnd),this.Bs.toPoint(r,e.valueEnd),this.Bs.toPoint(r,e.valueStart)];t.add({jo:s.jo,vertices:n,bar:s},{fillStyle:s.ke,strokeStyle:s.Te})})),t.finishPlot()}e.finishPlot(),h.finishPlot(),this.ZD=!1}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationCategoryPosition(t),this.setAnimationValues(t),this.valueAxis.setAnimationsEnabled(t),this.categoryAxis.setAnimationsEnabled(t),this}dispose(){return this.eB.U(),this.sB.U(),this.Jm.U(),super.dispose()}lB(t){const i=this.XD;i&&t.sort(((s,e)=>i({category:s.category,value:t.reduce(((t,i)=>t+(i.category===s.category&&i.value||0)),0)},{category:e.category,value:t.reduce(((t,i)=>t+(i.category===e.category&&i.value||0)),0)})))}uB(t,i,s,e){let h=0;const r=this.jD,n=this.VD,o=this.valueAxis.getInterval(),a=this.Bs.getWidth({x:this.LD.x.hi(),y:this.LD.y.hi()});if(r&&r.labelFillStyle!==O){const n=r.tickLength+r.labelMargin,l=this.Bs.toPoint(0,1),u={Ld:t.map(((t,s)=>{const e=i.reduce(((i,s)=>s.category!==t?i:i+s.value),0),h=r.formatter(t,e);if(!h)return;const a=s;return void 0!==a?{text:h,position:this.Bs.toPoint(a,this.valueAxis.ft.gi(o.start,-n)),alignment:l,rotation:r.labelRotation,sizePixels:this.cB(t,e)}:void 0})),$u:r.labelFont,ft:this.LD},c=u?this.JD?Vf(u,a,this.Bs.getWidth):u.Ld:[];c.forEach((t=>{t&&s.add().yr(t.text).Re(t.position).Ha(t.alignment).Qh(t.rotation).De(r.labelFillStyle).Zh(r.labelFont)})),r.tickStyle!==at&&0!==r.tickLength&&c.forEach((t=>{if(!t)return;const i=this.Bs.getWidth(t.position);e.add({positions:[this.Bs.toPoint(i,this.valueAxis.ft.getInnerStart()),this.Bs.toPoint(i,this.valueAxis.ft.gi(o.start,-r.tickLength))]},{lineStyle:r.tickStyle})})),h=c.reduce(((t,i)=>i?Math.max(t,this.Bs.getHeight(i.sizePixels)):t),0)+r.tickLength+r.labelMargin}if(n&&n.labelFillStyle!==O){let t;"after-bar"===n.position?t={Ld:i.map(((t,i)=>{const s=n.formatter(t,t.category,t.value);if(!s)return;const e=this.KD.get(t);return void 0!==e?{text:s,position:this.Bs.toPoint(e.category,this.valueAxis.ft.gi(e.valueEnd,n.labelMargin*Math.sign(e.valueEnd))),alignment:this.Bs.toPoint(0,-1*Math.sign(e.valueEnd)),rotation:n.labelRotation,sizePixels:this.dB(t)}:void 0})),$u:n.labelFont,ft:this.LD}:"inside-bar"!==n.position&&"inside-bar-start"!==n.position&&"inside-bar-centered"!==n.position&&"inside-bar-end"!==n.position||(t={Ld:i.map(((t,i)=>{const s=n.formatter(t,t.category,t.value);if(!s)return;const e=this.KD.get(t);if(void 0===e)return;const h="bipolar"===this.zD?Math.sign(e.valueEnd):"negative"===this.zD?-1:1,r=this.Bs.toPoint(0,"inside-bar"===n.position||"inside-bar-end"===n.position?1*h:"inside-bar-centered"===n.position?0:-1*h);return{text:s,position:this.Bs.toPoint(e.category,"inside-bar"===n.position||"inside-bar-end"===n.position?this.valueAxis.ft.gi(e.valueEnd,-n.labelMargin*h):"inside-bar-centered"===n.position?(e.valueStart+e.valueEnd)/2:this.valueAxis.ft.gi(e.valueStart,n.labelMargin*h)),alignment:r,rotation:n.labelRotation,sizePixels:this.dB(t)}})),$u:n.labelFont,ft:this.LD}),t&&(t?this.JD?Vf(t,a,this.Bs.getWidth):t.Ld:[]).forEach((t=>{t&&s.add().yr(t.text).Re(t.position).Ha(t.alignment).Qh(t.rotation).De(n.labelFillStyle).Zh(n.labelFont).setMouseInteractions(!1)}))}return{labelMarginBeforeCategoryAxisPixels:h}}cB(t,i){if(!this.jD||this.jD.labelFillStyle===O)return{x:0,y:0};const s=this.HD.get(t);if(s)return s;const e=this.jD.formatter(t,i),h=this.us.Og.Vg(e,this.jD.labelFont,this.jD.labelRotation);return h.isEstimate?this.us.xs(!0):this.HD.set(t,h),h}dB(t){if(!this.VD||this.VD.labelFillStyle===O)return{x:0,y:0};const i=this.$D.get(t);if(i)return i;const s=this.us.Og.Vg(this.VD.formatter(t,t.category,t.value),this.VD.labelFont,this.VD.labelRotation);return s.isEstimate?this.us.xs(!0):this.$D.set(t,s),s}OD(){return this.Bv.reduce(((t,i)=>{const s=this.dB(i);return{x:Math.max(t.x,s.x),y:Math.max(t.y,s.y)}}),{x:0,y:0})}YD(){this.ZD=!0,this.us.xs()}getMinimumSize(){return{x:200,y:200}}}const Nf={Horizontal:"horizontal",Vertical:"vertical"},Gf={Disabled:void 0,None:void 0,Ascending:(t,i)=>t.value-i.value,Descending:(t,i)=>i.value-t.value,Alphabetical:(t,i)=>t.category.localeCompare(i.category)},Wf={...Wo,hB:"vertical",GD:-1,WD:1},Uf={...Uo,hB:"horizontal",GD:1,WD:-1},Yf=(t,i,s)=>{const e=[[i.bar]],h=t.valueAxis.getTitle();return h&&e.push([h]),i.subCategory?e.push([i.subCategory,"",{text:ne(t.valueAxis.formatValue(i.bar.getValue()),t.valueAxis),font:{weight:"bold"}}]):e.push({text:ne(t.valueAxis.formatValue(i.bar.getValue()),t.valueAxis),font:{weight:"bold"}}),e};class Hf extends La{constructor(t,i,s,e,h,r,n){super(t,i,s,i.Py("gaugeChart bg",0),e,i.us.qi.gaugeChartBackgroundFillStyle,i.us.qi.gaugeChartBackgroundStrokeStyle,i.us.qi.gaugeChartTitleFont,i.us.qi.gaugeChartTitleFillStyle,r),this.tu=this.qi.gaugeChartStartAngle,this.iu=this.qi.gaugeChartEndAngle,this.fB={start:0,end:100},this.S=0,this.AB=[],this.gB=this.qi.gaugeChartBarThickness,this.yB=this.qi.gaugeChartValueIndicatorThickness,this.mB=this.qi.gaugeChartNeedleLength,this.pB=this.qi.gaugeChartNeedleThickness,this.vB=this.qi.gaugeChartNeedleFillStyle,this.SB=this.qi.gaugeChartNeedleStrokeStyle,this.bB=this.qi.gaugeChartRoundedEdges,this.xB=!0,this.MB=!0,this._B=!0,this.wB=[],this.CB=[],this.kB=!0,this.TB=!0,this.xm=this.S,this.FB=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.IB=this.qi.gaugeChartBarGradient,this.PB=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.DB=this.qi.gaugeChartTickFont,this.BB=this.qi.gaugeChartValueLabelFont,this.LB=this.qi.gaugeChartValueLabelFillStyle,this.RB=this.qi.gaugeChartUnitLabelFont,this.EB=this.qi.gaugeChartUnitLabelFillStyle,this.zB=this.qi.gaugeChartTickFillStyle,this.VB=this.qi.gaugeChartBarColor,this.OB=this.qi.gaugeChartGlowColor,this.NB=this.qi.gaugeChartGlowColor.getA(),this.GB=1,this.WB=1,this.UB=this.qi.gaugeChartNeedleAlignment,this.YB=!1,this.HB=this.qi.gaugeChartGapBetweenBarAndValueIndicators,this.$B=this.qi.gaugeChartBarStrokeStyle,this.XB=!1,this.us.jn(Vo.yf),this.bh.yr("Gauge Chart"),this.Iy(h,this.mg),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled)),this.jB=this.VB,this.ZB=this.OB,this.QB=S(0,0,0,0),this.JB=this.es.Cg(),this.KB=this.es.Cg().bs(this.qi.effectsText),this.qB=this.uy.ac(this.mg).Pe(this.$B).setMouseInteractions(!1),this.tL=this.uy.rd(this.mg).uu(0).Ue(360).Au(0).Pe(at).setMouseInteractions(!1),this.iL=this.By.We(this.mg).Ge(this.qi.gaugeChartNeedleStrokeStyle).setMouseInteractions(!1),this.sL=this.By.We(this.mg).Ge(new ve({thickness:this.pB,fillStyle:this.vB})).setMouseInteractions(!1),this.eL=this.By.Nr(this.mg).Zh(this.BB).De(this.LB).setMouseInteractions(!1),this.Ud=this.By.Nr(this.mg).Zh(this.RB).De(this.EB).yr("").setMouseInteractions(!1),this.hL=this.uy.Nr(this.mg).Zh(this.DB).De(this.zB).setMouseInteractions(!1),this.rL=this.uy.Nr(this.mg).Zh(this.DB).De(this.zB).setMouseInteractions(!1),this.JB.As([this.qB]),this.KB.As([this.eL,this.Ud,this.hL,this.rL]),this.nL(),this.onResize((()=>{this.YB=!0}))}nL(){this.sL.Ge((t=>t.setThickness(this.pB))),this.iL.Ge((t=>t.setThickness(2*this.SB.getThickness()+this.pB)))}setAnimationsEnabled(t){return this.uh=t,this.TB=t,this.kB=t,this}setInterval(t,i){return this.fB={start:t,end:i},this.YB=!0,this.us.xs(),this}getInterval(){return this.fB}setTickFillStyle(t){return this.zB="function"==typeof t?t(this.zB):t,this.CB.forEach((i=>{i.start.De(t),i.end.De(t)})),this.hL.De(t),this.rL.De(t),this.YB=!0,this.us.xs(),this}getTickFillStyle(){return this.zB}setTickFont(t){return this.DB="function"==typeof t?t(this.DB):t,this.CB.forEach((i=>{i.start.Zh(t),i.end.Zh(t)})),this.hL.Zh(t),this.rL.Zh(t),this.YB=!0,this.us.xs(),this}getTickFont(){return this.DB}setTickFormatter(t){return this.FB=t,this.YB=!0,this.us.xs(),this}getTickFormatter(){return this.FB}setValueLabelFillStyle(t){return this.LB="function"==typeof t?t(this.LB):t,this.eL.De(t),this.YB=!0,this.us.xs(),this}getValueLabelFillStyle(){return this.eL.$h()}setValueLabelFont(t){return this.BB="function"==typeof t?t(this.BB):t,this.eL.Zh(t),this.YB=!0,this.us.xs(),this}getValueLabelFont(){return this.eL.jh()}setValueFormatter(t){return this.PB="string"==typeof t?i=>t:t,this.YB=!0,this.us.xs(),this}getValueLabel(){return this.eL.wr()||this.PB}setUnitLabelFillStyle(t){return this.EB="function"==typeof t?t(this.EB):t,this.Ud.De(t),this.YB=!0,this.us.xs(),this}getUnitLabelFillStyle(){return this.Ud.$h()}setUnitLabelFont(t){return this.RB="function"==typeof t?t(this.RB):t,this.Ud.Zh(t),this.YB=!0,this.us.xs(),this}getUnitLabelFont(){return this.Ud.jh()}setUnitLabel(t){return this.Ud.yr(t),this.YB=!0,this.us.xs(),this}getUnitLabel(){return this.Ud.wr()}setNeedleFillStyle(t){return this.vB="function"==typeof t?t(this.vB):t,this.sL.Ge((i=>i.setFillStyle(t))),this.YB=!0,this.us.xs(),this}getNeedleFillStyle(){return this.sL.mu().getFillStyle()}setNeedleThickness(t){return this.pB=t,this.nL(),this.YB=!0,this.us.xs(),this}getNeedleThickness(){return this.pB}setNeedleStrokeStyle(t){return this.SB="function"==typeof t?t(this.SB):t,this.iL.Ge(t),this.nL(),this.YB=!0,this.us.xs(),this}getNeedleStrokeStyle(){return this.iL.mu()}setNeedleLength(t){return this.mB=t,this.YB=!0,this.us.xs(),this}getNeedleLength(){return this.mB}setBarColor(t){return this.VB=t,this.YB=!0,this.us.xs(),this}getBarColor(){return this.jB}setBarGradient(t){return this.IB=t,this.YB=!0,this.us.xs(),this}getBarGradient(){return this.IB}setBarStrokeStyle(t){return this.$B="function"==typeof t?t(this.$B):t,this.qB.Pe(t),this.YB=!0,this.us.xs(),this}getBarStrokeStyle(){return this.qB.mo()}setBarThickness(t){return this.gB=t,this.YB=!0,this.us.xs(),this}getBarThickness(){return this.gB}setAngleInterval(t,i){return Math.abs(t-i)>360&&(i=t<i?t+360:t-360),this.tu=t,this.iu=i,this.YB=!0,this.us.xs(),this}getAngleInterval(){return{start:this.tu,end:this.iu}}setValue(t){return this.XB&&this.us.jn(Vo.kf),this.XB=!0,this.S=t,this.kB||(this.xm=this.S),this.YB=!0,this.us.xs(),this}getValue(){return this.S}setValueAnimation(t,i=1){return this.kB=t,this.GB=Math.max(0,i),this.YB=!0,this.us.xs(),this}setColorAnimation(t,i=1){return this.TB=t,this.WB=Math.max(0,i),this.YB=!0,this.us.xs(),this}setRoundedEdges(t){return this.bB=t,this.YB=!0,this.us.xs(),this}getRoundedEdges(){return this.bB}setValueIndicators(t){return this.AB=t,this.wB.forEach((t=>{t.dispose()})),this.wB.length=0,this.CB.forEach((t=>{t.start.dispose(),t.end.dispose()})),this.CB.length=0,this.AB.forEach((t=>{const i=this.uy.ac(this.mg).Pe(at).De(new U({color:t.color})).setMouseInteractions(!1);this.wB.push(i);const s=this.uy.Nr(this.mg).Zh(this.DB).De(this.zB).setMouseInteractions(!1),e=this.uy.Nr(this.mg).Zh(this.DB).De(this.zB).setMouseInteractions(!1);this.CB.push({start:s,end:e})})),this.JB.As([this.qB,...this.wB]),this.KB.As([this.eL,this.Ud,this.hL,this.rL,...this.CB.map((t=>[t.start,t.end])).flat()]),this.YB=!0,this.us.xs(),this}getValueIndicators(){return this.AB}setValueIndicatorThickness(t){return this.yB=t,this.YB=!0,this.us.xs(),this}getValueIndicatorThickness(){return this.yB}setAutomaticBarColoring(t){return this._B=!!t,this.YB=!0,this.us.xs(),this}getAutomaticBarColoring(){return this._B}setGlowColor(t){return void 0===t?(this.xB=!1,this.ZB=void 0):"object"==typeof t&&"auto"in t?(this.MB=t.auto,t.auto&&(this.ZB=void 0),void 0!==t.alpha&&(this.NB=t.alpha),this.xB=!0):(this.ZB=t,this.NB=t.getA(),this.MB=!1,this.xB=!0),this.YB=!0,this.us.xs(),this}getAutomaticGlowColoring(){return this.MB}setNeedleAlignment(t){return this.UB=t,this.YB=!0,this.us.xs(),this}getNeedleAlignment(){return this.UB}setGapBetweenBarAndValueIndicators(t){return this.HB=t,this.YB=!0,this.us.xs(),this}getGapBetweenBarAndValueIndicators(){return this.HB}setBarEffect(t){return this.JB.bs(t),this.us.xs(),this}getBarEffect(){return this.JB.Ms()}setLabelEffect(t){return this.KB.bs(t),this.us.xs(),this}getLabelEffect(){return this.KB.Ms()}Le(t){var i;if(super.Le(t),Ra.Oy(this.bh,this.Dy),super.Fy(),this.xm!==this.S){if(this.kB){const i=5e-4*t,s=.003*t,e=Math.sign(this.S-this.xm);this.xm=this.xm+i*e+s*this.GB*(this.S-this.xm),e!==Math.sign(this.S-this.xm)?this.xm=this.S:this.us.xs(!0)}else this.xm=this.S;this.YB=!0}const s=this.AB.find((t=>this.xm>=t.start&&this.xm<=t.end));if(this.jB=this._B&&s?s.color:this.VB,this.TB){if(this.QB!==this.jB){const i=this.QB.getR(),s=this.QB.getG(),e=this.QB.getB(),h=this.jB.getR(),r=this.jB.getG(),n=this.jB.getB(),o=Math.sign(h-i),a=Math.sign(r-s),l=Math.sign(n-e),u=.005*t,c=.003*t;this.QB=S(i+u*o+c*this.WB*(h-i),s+u*a+c*this.WB*(r-s),e+u*l+c*this.WB*(n-e));const d=Math.abs(h-this.QB.getR()),f=Math.abs(r-this.QB.getG()),A=Math.abs(n-this.QB.getB());d<1&&f<1&&A<1?this.QB=this.jB:this.us.xs(!0),this.YB=!0}}else this.QB=this.jB;if(this.YB){let t=Ki,e=qi,h=Ki,r=qi;if(new Array(100).fill(0).forEach(((i,s,n)=>{const o=this.tu+s/n.length*(this.iu-this.tu),a=Math.sin(o*Math.PI/180),l=Math.cos(o*Math.PI/180);a<t&&(t=a),a>e&&(e=a),l<h&&(h=l),l>r&&(r=l)})),this.IB?this.qB.De(new st({stops:[{offset:0,color:b("#000000")},{offset:1,color:this.QB}],position:{x:.5,y:.5}})):this.qB.De(new U({color:this.QB})),this.xB){const t=this.MB&&s?this.QB:null!==(i=this.ZB)&&void 0!==i?i:this.OB;this.tL.De(new st({stops:[{offset:0,color:t.setA(this.NB)},{offset:1,color:t.setA(0)}],position:{x:.5,y:.5},extent:tt.farthestSide}))}else this.tL.De(O);const n=this.FB(this.fB.start),o=this.FB(this.fB.end);let a=0,l=0;const u=this.us.Og.Vg(n,this.hL.jh(),this.hL.Jh()),c=this.us.Og.Vg(o,this.rL.jh(),this.rL.Jh());u.x>a&&(a=u.x),u.y>l&&(l=u.y),c.x>a&&(a=c.x),c.y>l&&(l=c.y),this.CB.forEach(((t,i)=>{if(i>=this.AB.length)return;const s=this.AB[i],e=this.FB(s.start),h=this.FB(s.end),r=this.us.Og.Vg(e,t.start.jh(),t.start.Jh()),n=this.us.Og.Vg(h,t.end.jh(),t.end.Jh());r.x>a&&(a=r.x),r.y>l&&(l=r.y),n.x>a&&(a=n.x),n.y>l&&(l=n.y)}));const d=this.AB.length>0?this.yB:0,f=this.mg.getInnerIntervalPixels(),A=Ra.Vy(this.bh,this.Dy),g={x:f.x,y:f.y-A},y={x:.5*g.x,y:.5*g.y},m=d+2*this.HB+this.gB/2,p=a+m,v=l+m,S=v+A,x=f.y-(S+v),M=f.x-(p+p),_=.5*Math.max(this.gB/2,x<M?x:M),w=.5*_,C=(t+e)*w,k=(h+r)*w,T={x:y.x-k,y:y.y-C},F={x:y.x-.5*k,y:y.y-.5*C};this.tL.Re(y).cu(.5*Math.min(g.x,f.y)),this.eL.Re(F).yr(this.PB(this.xm)),this.Ud.Re({x:F.x,y:F.y-this.eL.sd().y-this.Ud.sd().y/4});const I=jf(this.fB,this.tu,this.iu,this.xm,T,_+this.UB*(this.mB/2+this.gB/2)),P=I.angle*(Math.PI/180),D=.5*this.mB,B=Math.cos(P),L=Math.sin(P);this.sL.Ye({x:I.x+D*B,y:I.y+D*L}).Ue({x:I.x-D*B,y:I.y-D*L}),this.iL.Ye({x:I.x+D*B,y:I.y+D*L}).Ue({x:I.x-D*B,y:I.y-D*L});const R=$f(T,_,this.tu,this.iu,this.gB,this.bB,!1,!1);this.qB.wl(R).qo({min:{x:T.x-_,y:T.y-_},max:{x:T.x+_,y:T.y+_}});const E=T.y+_,z=T.y-_,V=T.x+_,N=T.x-_,[G,W]=this.fB.start<this.fB.end?[this.fB.start,this.fB.end]:[this.fB.end,this.fB.start],Y=_+.5*this.gB+d/2+this.HB,H=Y+d/2;this.AB.forEach(((t,i)=>{var s,e;const h=t.start>=G&&t.end<=W;this.wB[i].setVisible(h),this.CB[i].start.setVisible(h),this.CB[i].end.setVisible(h);const r=jf(this.fB,this.tu,this.iu,t.start,T,H),n=jf(this.fB,this.tu,this.iu,t.end,T,H),o=$f(T,Y,r.angle,n.angle,this.yB,this.bB,!(0===i),!(i===this.AB.length-1));this.wB[i].wl(o);const a=this.fB.start===t.start||this.fB.end===t.start,l=this.fB.start===t.end||this.fB.end===t.end||this.AB.some((i=>i.start===t.end&&i!==t));this.CB[i].start.Re({x:r.x,y:r.y}).Ha({x:Math.min(1,Math.max(-1,2*(r.x-V)/(N-V)-1)),y:Math.min(1,Math.max(-1,2*(r.y-E)/(z-E)-1))}).yr(null!==(s=t.startLabel)&&void 0!==s?s:a?"":this.FB(t.start)),this.CB[i].end.Re({x:n.x,y:n.y}).Ha({x:Math.min(1,Math.max(-1,2*(n.x-V)/(N-V)-1)),y:Math.min(1,Math.max(-1,2*(n.y-E)/(z-E)-1))}).yr(null!==(e=t.endLabel)&&void 0!==e?e:l?"":this.FB(t.end))}));const $=this.AB.some((t=>t.start<t.end?this.fB.start>=t.start&&this.fB.start<=t.end:this.fB.start<=t.start&&this.fB.start>=t.end)),X=jf(this.fB,this.tu,this.iu,this.fB.start,T,$?H:Y-this.HB);this.hL.Re({x:X.x,y:X.y}).Ha({x:Math.min(1,Math.max(-1,2*(X.x-V)/(N-V)-1)),y:Math.min(1,Math.max(-1,2*(X.y-E)/(z-E)-1))}).yr(n);const j=this.AB.some((t=>t.start<t.end?this.fB.end>=t.start&&this.fB.end<=t.end:this.fB.end<=t.start&&this.fB.end>=t.end)),Z=jf(this.fB,this.tu,this.iu,this.fB.end,T,j?H:Y-this.HB);this.rL.Re({x:Z.x,y:Z.y}).Ha({x:Math.min(1,Math.max(-1,2*(Z.x-V)/(N-V)-1)),y:Math.min(1,Math.max(-1,2*(Z.y-E)/(z-E)-1))}).yr(o),this.YB=!1}}getMinimumSize(){return{x:150,y:150}}sf(){return[this]}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),t.setMouseInteractions(!1),Ci(t,this.qi,s,{fill:new U({color:this.getBarColor()})}),this}}const $f=(t,i,s,e,h,r=!0,n=!0,o=!0)=>{const a=[],l=.5*h,u=s>e,c=Math.sign(s-e),d=-1*c;if(r){const t=l/(2*Math.PI*i)*360+.1;n&&(s+=t*d),o&&(e+=t*c)}else s+=.1*d,e+=.1*c;const f=Xf(t,i+l,s,e,u);if(a.push(...f),r){const h={x:t.x+i*Math.cos(e*(Math.PI/180)),y:t.y+i*Math.sin(e*(Math.PI/180))};let r;r=s>e?Xf(h,l,e+180,e+360,u):Xf(h,l,e-180,e-360,u),a.push(...r)}const A=Xf(t,i-l,e,s,!u);if(a.push(...A),r){const h={x:t.x+i*Math.cos(s*(Math.PI/180)),y:t.y+i*Math.sin(s*(Math.PI/180))};let r;r=s>e?Xf(h,l,s-180,s-360,u):Xf(h,l,s+180,s+360,u),a.push(...r)}return a},Xf=(t,i,s,e,h)=>{s<e&&([s,e]=[e,s]);const r=[],n=h?-1:1,o=h?t=>t>e:t=>t<s;for(let a=h?s:e;o(a);a+=n){const s=a*(Math.PI/180),e=t.x+i*Math.cos(s),h=t.y+i*Math.sin(s);r.push({x:e,y:h})}const a=(h?e:s)*(Math.PI/180),l=t.x+i*Math.cos(a),u=t.y+i*Math.sin(a);return r.push({x:l,y:u}),r},jf=(t,i,s,e,h,r)=>{const[n,o]=t.start<t.end?[t.start,t.end]:[t.end,t.start],a=Math.max(n,Math.min(o,e)),l=t.start<t.end?s-i:i-s,u=t.start<t.end?i+(a-t.start)/(t.end-t.start)*l:i-(a-t.start)/(t.end-t.start)*l,c=u*(Math.PI/180);return{x:h.x+r*Math.cos(c),y:h.y+r*Math.sin(c),angle:Math.round(u)}},Zf=(t,i)=>i?t.x:t.y,Qf=(t,i,s,e)=>1===i&&e===(s?t.columnIndex:t.rowIndex)||-1===i&&e===(s?t.columnIndex+t.columnSpan:t.rowIndex+t.rowSpan),Jf=(t,i,s,e,h,r)=>{const n=i.length,o=Math.sign(e),a=[],l=i.reduce(((t,i)=>t+i));for(let t=1;t<=n-1;t+=1)a.push(Zf(h,r)*i.slice(0,t).reduce(((t,i)=>t+i),0)/l);const u=a.map((t=>0));let c=a[s-1]+e;for(let i=s;i>0&&i<n;i+=o){const e=t.filter((t=>Qf(t,o,r,i))).reduce(((t,i)=>Math.max(t,Zf(i.panel.getMinimumSize()||{x:0,y:0},r))),20),n=a[i-1];if(1===o&&c>Zf(h,r)-e||-1===o&&c<0+e){u.fill(0);break}if(i!==s&&(1===o?n>c:n<c))break;u[i-1]=c-n,c+=e*o}const d=u.map(((t,i)=>a[i]+t)),f=d.map(((t,i)=>(t-(i>0?d[i-1]:0))/Zf(h,r)));return f.push(1-f.reduce(((t,i)=>t+i),0)),f};class Kf{constructor(t,i,e,h,r){this.coordsRelative="relative",this.coordsClient="client",this.Xi=!1,this.tP=new Array,this.L=new s,this.oL=[],this.iy=[],this.aL=void 0,this.lL=!0,this.uL=!0,this.cL=!0,this.ny=!1,this.dL=!0,this.fL=()=>{this.dL=!0,this.us.xs()},this.AL=[],this.onInViewChange=t=>this.L.on("inViewChange",t),this.offInViewChange=t=>this.L.off(t,"inViewChange"),this.gL=t=>{for(let i=0;i<this.tP.length;i+=1)if(this.tP[i].panel===t){this.tP.splice(i,1),this.lL=!0,this.us.xs();break}},this.yL=t=>{const i=this.oL.indexOf(t);i>=0&&this.oL.splice(i,1)},this.gy=t=>{const i=this.iy.indexOf(t);i>=0&&this.iy.splice(i,1)},this.mL=(t,i,s,e,h)=>{if(this.pL(i,s,e,h)){const r={panel:t,columnIndex:i,rowIndex:s,columnSpan:e,rowSpan:h};return this.tP.push(r),this.vL(r),this.lL=!0,t}throw new Dt("Out of dashboard range.")},this.SL=i.numberOfRows,this.bL=i.numberOfColumns,this.vA=t,this.xL=i,this.ML=h;const n=this.bL*this.SL;this._L={x:new rf(new Array(this.bL).fill(1)),y:new rf(new Array(this.SL).fill(1))},this.qi=e.qi,this.wL=this.qi.dashboardSplitterStyle,this.uh=!1!==(null==i?void 0:i.animationsEnabled),this.CL=hf(e,n),this.kL=e.GF("dashboard splitters",500001),this.fM=()=>this.CL.NF(),this.by=this.CL.WF(),this.es=e.es.hs(this,{TL:{}}),this.es.TL.bs(this.qi.effectsDashboardSplitters);const o=e.ni();this.uiScale=dt.d2({scaleXYConstructor:Ks}).zi(0,100).Vi(0,100).tt(o),this.mg=dt.d2({scaleXYConstructor:Ks}).zi(0,this.uiScale.x.getCellSize()).Vi(0,this.uiScale.y.getCellSize()).tt(o),this.FL=e.IL.bind(e),this.PL=e.DL.bind(e),this.BL=e.LL.bind(e),this.RL=e.EL.bind(e),this.co=e.co.bind(e),this.fo=e.fo.bind(e),this.engine=e.my,this.us=e.py,e.Bo((()=>this.fL())),e.xs();const a=e.Eo((t=>{this.ny=t,this.L.emit("inViewChange",this,t)}));this.Cy=e.zo.bind(e,a),this.zL(),this.setAnimationsEnabled(this.uh);const l=("resize",{on:(u=this.L).on.bind(u,"resize"),off:u.off.bind(u)});var u;this.createChartXY=t=>{const i=qf(t,this.xL,this.uh);return this.mL(new qc(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createSpiderChart=t=>{const i=qf(t,this.xL,this.uh);return this.mL(new sf(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPolarChart=t=>{const i=qf(t,this.xL,this.uh);return this.mL(new Ad(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPieChart=t=>{const i=qf(t,this.xL,this.uh),s=i&&i.type?i.type:ml;return this.mL(new s(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,l,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createGaugeChart=t=>{const i=qf(t,this.xL,this.uh);return this.mL(new Hf(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,l,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createFunnelChart=t=>{const i=qf(t,this.xL,this.uh),s=i&&i.type?i.type:Cd;return this.mL(new s(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,l,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPyramidChart=t=>{const i=qf(t,this.xL,this.uh),s=t&&t.type?t.type:Od;return this.mL(new s(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,l,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createUIPanel=t=>{const i=qf(t,this.xL,this.uh);return this.mL(new Da(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createLegendBoxPanel=t=>{const i=qf(t,this.xL,this.uh);return this.mL(new su(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createZoomBandChart=t=>{const i=qf(t,this.xL,this.uh);return this.mL(new nd(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createMapChart=t=>{const i=qf(t,this.xL,this.uh);return this.mL(new uu(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createChart3D=t=>{const i=qf(t,this.xL,this.uh),s=new ql(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,l,i);return this.mL(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createDataGrid=t=>{const i=qf(t,this.xL,this.uh),s=new Tf(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,l);return this.mL(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createBarChart=t=>{const i=qf(t,this.xL,this.uh),s=new Of(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,l,i);return this.mL(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)}}VL(t,i){return t+i*this.bL}OL(t,i){return{d1:s=>new s.scale1DConstructor("x"===s.dimension?t.columnIndex:t.rowIndex,"x"===s.dimension?t.columnSpan:t.rowSpan,"x"===s.dimension?this.bL:this.SL,"x"===s.dimension?i.x:i.y),d2:s=>(new s.scaleXYConstructor).ut({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.bL,y:this.SL},i),d3:()=>new ut({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.bL,y:this.SL},i)}}setWidth(t){return t instanceof Array||(t=[t,t]),this.FL(t[0]),this.PL(t[1]),this}setHeight(t){return t instanceof Array||(t=[t,t]),this.BL(t[0]),this.RL(t[1]),this}getWidth(){return this.co()}getHeight(){return this.fo()}setBackgroundFillStyle(t){return this.engine.setBackgroundFillStyle(t),this.kL.xs(),this}getBackgroundFillStyle(){return this.engine.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.engine.setBackgroundStrokeStyle(t),this.kL.xs(),this}getBackgroundStrokeStyle(){return this.engine.getBackgroundStrokeStyle()}getTheme(){return this.qi}setSplitterStyle(t){const i=this.wL;return this.wL="function"==typeof t?t(this.wL):t,this.NL(i),this}getSplitterStyle(){return this.wL}setSplitterEffect(t){return this.es.TL.bs(t),this.us.xs(),this}getSplitterEffect(){return this.es.TL.Ms()}setAnimationHighlight(t){return this.cL=t,this.AL.forEach((i=>this.us.ls.ks(i.line,t))),this}getAnimationHighlight(){return this.cL}NL(t){for(const t of this.AL)t.line.Ge(this.wL);this.zL()}setColumnWidth(t,i){const s=this._L.x._();return t>=0&&t<s.length&&(s[t]=i,this._L.x.M(s)),this.fL(),this}getColumnWidth(t){const i=this._L.x._();if(t>=i.length)throw new Dt("Column index is out of dashboard range.");return i[t]}setRowHeight(t,i){const s=this._L.y._();return t>=0&&t<s.length&&(s[Math.abs(s.length-1-t)]=i,this._L.y.M(s)),this.fL(),this}getRowHeight(t){const i=this._L.y._();if(t>=i.length)throw new Dt("Row index is out of dashboard range.");return i[Math.abs(i.length-1-t)]}getSizePixels(){return this.mg.getInnerIntervalPixels()}onResize(t){return this.L.on("resize",t)}offResize(t){return this.L.off(t,"resize")}GL(t,i,s){if(s&&Math.abs(t.x)>0)this.WL(i,t.x);else{if(s||!(Math.abs(t.y)>0))return;this.UL(i,t.y)}for(const t of this.tP)t.panel.J();this.fL()}UL(t,i){const s=Jf(this.tP,this._L.y._(),t,i,this.mg.ni(),!1);this._L.y.M(s),this.fL()}WL(t,i){const s=Jf(this.tP,this._L.x._(),t,i,this.mg.ni(),!0);this._L.x.M(s),this.fL()}YL(){this.AL.forEach((t=>t.line.dispose())),this.AL.length=0;for(let t=1;t<=this.bL-1;t+=1)for(let i=0;i<=this.SL-1;i+=1)if(void 0!==this.tP.find((s=>ls(i,s.rowIndex,s.rowIndex+s.rowSpan-1)&&(t===s.columnIndex||t===s.columnIndex+s.columnSpan)))){const s=Ae(new ye((()=>{this.HL(t)}),((i,s,e,h,r)=>{this.GL(h,t,!0),di(r)}),(()=>{this.$L(t)}))),e=this.kL.We(this.mg).Ge(this.wL).setMouseEnterEventHandler((()=>{this.HL(t)})).setMouseLeaveEventHandler((()=>{this.$L(t)})).setMouseDragEventHandler(((i,s,e,h,r)=>{this.GL(r,t,!0),di(s)})).setTouchStartEventHandler(s.onTouchStart).setTouchMoveEventHandler(s.onTouchMove).setTouchEndEventHandler(s.onTouchEnd);this.us.ls.os(e,(t=>e.cs(t)),{animationEnabled:this.cL}),this.AL.push({row:i,column:t,line:e,alignment:"vertical"})}for(let t=1;t<=this.SL-1;t+=1)for(let i=0;i<=this.bL-1;i+=1)if(void 0!==this.tP.find((s=>ls(i,s.columnIndex,s.columnIndex+s.columnSpan-1)&&(t===s.rowIndex||t===s.rowIndex+s.rowSpan)))){const s=Ae(new ye((()=>{this.XL(t)}),((i,s,e,h,r)=>{this.GL(h,t,!1),di(r)}),(()=>{this.jL(t)}))),e=this.kL.We(this.mg).Ge(this.wL).setMouseEnterEventHandler((()=>{this.XL(t)})).setMouseLeaveEventHandler((()=>{this.jL(t)})).setMouseDragEventHandler(((i,s,e,h,r)=>{this.GL(r,t,!1),di(s)})).setTouchStartEventHandler(s.onTouchStart).setTouchMoveEventHandler(s.onTouchMove).setTouchEndEventHandler(s.onTouchEnd);this.us.ls.os(e,(t=>e.cs(t)),{animationEnabled:this.cL}),this.AL.push({row:t,column:i,line:e,alignment:"horizontal"})}this.es.TL.As(this.AL.map((t=>t.line)))}ZL(){const t=this.mg.ni(),i=this._L.x._(),s=i.reduce(((t,i)=>t+i)),e=this._L.y._(),h=e.reduce(((t,i)=>t+i));this.AL.forEach((r=>{if("vertical"===r.alignment){const o=n(t.x*i.slice(0,r.column).reduce(((t,i)=>t+i),0)/s,t.y*e.slice(0,r.row).reduce(((t,i)=>t+i),0)/h),a=n(o.x,t.y*e.slice(0,r.row+1).reduce(((t,i)=>t+i),0)/h);r.line.Ye(o).Ue(a)}else{const o=n(t.x*i.slice(0,r.column).reduce(((t,i)=>t+i),0)/s,t.y*e.slice(0,r.row).reduce(((t,i)=>t+i),0)/h),a=n(t.x*i.slice(0,r.column+1).reduce(((t,i)=>t+i),0)/s,o.y);r.line.Ye(o).Ue(a)}}))}HL(t){this.AL.forEach((i=>{"vertical"===i.alignment&&i.column===t&&(this.us.ls.Cs(i.line,1),this.kL.QL(i.line))})),this.aL=this.engine.setMouseStyle(Xe.ResizeColumn),this.us.xs()}XL(t){this.AL.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&(this.us.ls.Cs(i.line,1),this.kL.QL(i.line))})),this.aL=this.engine.setMouseStyle(Xe.ResizeRow),this.us.xs()}$L(t){this.AL.forEach((i=>{"vertical"===i.alignment&&i.column===t&&this.us.ls.Cs(i.line,0)})),this.engine.restoreMouseStyle(this.aL),this.us.xs()}jL(t){this.AL.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&this.us.ls.Cs(i.line,0)})),this.engine.restoreMouseStyle(this.aL),this.us.xs()}setAnimationsEnabled(t){return this.uh=t,this.getCells().filter((t=>t.panel instanceof La)).forEach((i=>i.panel.setAnimationsEnabled(t))),this.setAnimationHighlight(this.uh),this}getAnimationsEnabled(){return this.uh}getCells(){return this.tP.slice()}dispose(){return this.Xi||(this.Cy&&this.Cy(),this.tP.slice().forEach((t=>t.panel.dispose())),this.oL.slice().forEach((t=>t.dispose())),this.iy.slice().forEach((t=>t.dispose())),this.Xi=!0,this.ML(),this.L.emit("dispose",this)),this}isDisposed(){return this.Xi}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}getIsInView(){return this.ny}saveToFile(t,i,s){return Ca(this.engine,t,i,s),this}JL(t){if(this.dL){const t=this.us.ft.ni(),i=t.x,s=t.y;this.uiScale.tt(i,s),this.mg.tt(i,s);const e=this.uiScale.getInnerIntervalPixels();this.mg.zi(0,e.x).Vi(0,e.y),this.L.emit("resize",this,e.x,e.y,i,s),this.uL=!0}this.lL&&(this.YL(),this.lL=!1,this.uL=!0),this.uL&&(this.ZL(),this.uL=!1);for(const i of this.tP)i.panel.Le(t);return this.oL.forEach((t=>t.Es())),this.oL.forEach((t=>t.Le())),this.iy.forEach((t=>t.Es())),this.iy.forEach((t=>t.Le())),this.dL=!1,this}Z(){for(const t of this.tP)t.panel.Z();return this.mg.x.Z(),this.mg.y.Z(),this.uiScale.x.Z(),this.uiScale.y.Z(),this}J(){for(const t of this.tP)t.panel.J();return this.mg.x.J(),this.mg.y.J(),this.uiScale.x.J(),this.uiScale.y.J(),this}translateCoordinate(t,i,s){return Fa(t,i,s,this.mg,this.us)}addUIElement(t=yo,i=this.uiScale){i=Ta(i,this.mg);const s=ka(t,this.fM(),this.uiScale,i,this.yL,this.qi);return this.oL.push(s),s}addLegendBox(t=To,i=this.uiScale){i=Ta(i,this.mg);const s=ka(t,this.by,this.uiScale,i,this.gy,this.qi);return s.setDraggingMode(zt.notDraggable),this.iy.push(s),s}getLegendBoxes(){return this.iy}pL(t,i,s,e){return i>=0&&t>=0&&i+e<=this.SL&&t+s<=this.bL}vL(t){const i=this.wL,s=i===at?0:i.getThickness()/2,e={left:t.columnIndex>0?s:0,top:t.rowIndex<this.SL-1?s:0,right:t.columnIndex<this.bL-1?s:0,bottom:t.rowIndex>0?s:0};t.panel.Vr(e)}zL(){this.uiScale.x.ii([0,0]),this.uiScale.y.ii([0,0]),this.mg.x.ii([0,0]),this.mg.y.ii([0,0]);for(const t of this.tP)this.vL(t);this.us.xs()}}const qf=(t,i,s)=>{const e={...t,columnSpan:t.columnSpan||1,rowSpan:t.rowSpan||1,animationsEnabled:void 0!==t.animationsEnabled?t.animationsEnabled:s};var h,r;return e.rowIndex=(h=e.rowIndex,r=e.rowSpan,i.numberOfRows-(h+r)),e},tA={XY:zc,Spider:Ja,BarChart:Ka,Map:sl,Polar:il,D3:Kl},iA={Angola:{name:"Angola",ISO_A3:"AGO"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Gabon:{name:"Gabon",ISO_A3:"GAB"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Namibia:{name:"Namibia",ISO_A3:"NAM"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Oman:{name:"Oman",ISO_A3:"OMN"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},Somalia:{name:"Somalia",ISO_A3:"SOM"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"}},sA={Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Armenia:{name:"Armenia",ISO_A3:"ARM"},Australia:{name:"Australia",ISO_A3:"AUS"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},China:{name:"China",ISO_A3:"CHN"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},India:{name:"India",ISO_A3:"IND"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Nepal:{name:"Nepal",ISO_A3:"NPL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Philippines:{name:"Philippines",ISO_A3:"PHL"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Palestine:{name:"Palestine",ISO_A3:"PSE"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Russia:{name:"Russia",ISO_A3:"RUS"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Singapore:{name:"Singapore",ISO_A3:"SGP"},Syria:{name:"Syria",ISO_A3:"SYR"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Yemen:{name:"Yemen",ISO_A3:"YEM"}},eA={"New South Wales":{name:"New South Wales"},Victoria:{name:"Victoria"},Queensland:{name:"Queensland"},"South Australia":{name:"South Australia"},"Western Australia":{name:"Western Australia"},Tasmania:{name:"Tasmania"},"Northern Territory":{name:"Northern Territory"},"Australian Capital Territory":{name:"Australian Capital Territory"},"Other Territories":{name:"Other Territories"}},hA={"British Columbia":{name:"British Columbia"},Quebec:{name:"Quebec"},Nunavut:{name:"Nunavut"},"Prince Edward Island":{name:"Prince Edward Island"},Saskatchewan:{name:"Saskatchewan"},Yukon:{name:"Yukon"},Manitoba:{name:"Manitoba"},Ontario:{name:"Ontario"},"New Brunswick":{name:"New Brunswick"},"Northwest Territories":{name:"Northwest Territories"},Alberta:{name:"Alberta"},"Newfoundland and Labrador":{name:"Newfoundland and Labrador"},"Nova Scotia":{name:"Nova Scotia"}},rA={Albania:{name:"Albania",ISO_A3:"ALB"},Austria:{name:"Austria",ISO_A3:"AUT"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Denmark:{name:"Denmark",ISO_A3:"DNK"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Finland:{name:"Finland",ISO_A3:"FIN"},France:{name:"France",ISO_A3:"FRA"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Greece:{name:"Greece",ISO_A3:"GRC"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Italy:{name:"Italy",ISO_A3:"ITA"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Malta:{name:"Malta",ISO_A3:"MLT"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Poland:{name:"Poland",ISO_A3:"POL"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Romania:{name:"Romania",ISO_A3:"ROU"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Russia:{name:"Russia",ISO_A3:"RUS"},Turkey:{name:"Turkey",ISO_A3:"TUR"}},nA={Aruba:{name:"Aruba",ISO_A3:"ABW"},Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},Angola:{name:"Angola",ISO_A3:"AGO"},Anguilla:{name:"Anguilla",ISO_A3:"AIA"},Albania:{name:"Albania",ISO_A3:"ALB"},Aland:{name:"Aland",ISO_A3:"ALA"},Andorra:{name:"Andorra",ISO_A3:"AND"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Argentina:{name:"Argentina",ISO_A3:"ARG"},Armenia:{name:"Armenia",ISO_A3:"ARM"},"American Samoa":{name:"American Samoa",ISO_A3:"ASM"},Antarctica:{name:"Antarctica",ISO_A3:"ATA"},"French Southern and Antarctic Lands":{name:"French Southern and Antarctic Lands",ISO_A3:"ATF"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},Australia:{name:"Australia",ISO_A3:"AUS"},Austria:{name:"Austria",ISO_A3:"AUT"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belize:{name:"Belize",ISO_A3:"BLZ"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},Canada:{name:"Canada",ISO_A3:"CAN"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Chile:{name:"Chile",ISO_A3:"CHL"},China:{name:"China",ISO_A3:"CHN"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Cyprus No Mans Area":{name:"Cyprus No Mans Area",ISO_A3:"-99"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},"Cook Islands":{name:"Cook Islands",ISO_A3:"COK"},Colombia:{name:"Colombia",ISO_A3:"COL"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Curaçao":{name:"Curaçao",ISO_A3:"CUW"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},"Northern Cyprus":{name:"Northern Cyprus",ISO_A3:"-99"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Dominica:{name:"Dominica",ISO_A3:"DMA"},Denmark:{name:"Denmark",ISO_A3:"DNK"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},"Dhekelia Sovereign Base Area":{name:"Dhekelia Sovereign Base Area",ISO_A3:"-99"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Finland:{name:"Finland",ISO_A3:"FIN"},Fiji:{name:"Fiji",ISO_A3:"FJI"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},France:{name:"France",ISO_A3:"FRA"},"Faroe Islands":{name:"Faroe Islands",ISO_A3:"FRO"},"Federated States of Micronesia":{name:"Federated States of Micronesia",ISO_A3:"FSM"},Gabon:{name:"Gabon",ISO_A3:"GAB"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Guernsey:{name:"Guernsey",ISO_A3:"GGY"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Greece:{name:"Greece",ISO_A3:"GRC"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},Guam:{name:"Guam",ISO_A3:"GUM"},Guyana:{name:"Guyana",ISO_A3:"GUY"},"Hong Kong S.A.R.":{name:"Hong Kong S.A.R.",ISO_A3:"HKG"},"Heard Island and McDonald Islands":{name:"Heard Island and McDonald Islands",ISO_A3:"HMD"},Honduras:{name:"Honduras",ISO_A3:"HND"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},"Isle of Man":{name:"Isle of Man",ISO_A3:"IMN"},India:{name:"India",ISO_A3:"IND"},"Indian Ocean Territories":{name:"Indian Ocean Territories",ISO_A3:"-99"},"British Indian Ocean Territory":{name:"British Indian Ocean Territory",ISO_A3:"IOT"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Israel:{name:"Israel",ISO_A3:"ISR"},Italy:{name:"Italy",ISO_A3:"ITA"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},Jersey:{name:"Jersey",ISO_A3:"JEY"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},"Baykonur Cosmodrome":{name:"Baykonur Cosmodrome",ISO_A3:"-99"},"Siachen Glacier":{name:"Siachen Glacier",ISO_A3:"-99"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},Kiribati:{name:"Kiribati",ISO_A3:"KIR"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},Liechtenstein:{name:"Liechtenstein",ISO_A3:"LIE"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},"Macao S.A.R":{name:"Macao S.A.R",ISO_A3:"MAC"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Mexico:{name:"Mexico",ISO_A3:"MEX"},"Marshall Islands":{name:"Marshall Islands",ISO_A3:"MHL"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},"Northern Mariana Islands":{name:"Northern Mariana Islands",ISO_A3:"MNP"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Namibia:{name:"Namibia",ISO_A3:"NAM"},"New Caledonia":{name:"New Caledonia",ISO_A3:"NCL"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Niue:{name:"Niue",ISO_A3:"NIU"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Nepal:{name:"Nepal",ISO_A3:"NPL"},"New Zealand":{name:"New Zealand",ISO_A3:"NZL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Panama:{name:"Panama",ISO_A3:"PAN"},"Pitcairn Islands":{name:"Pitcairn Islands",ISO_A3:"PCN"},Peru:{name:"Peru",ISO_A3:"PER"},"Spratly Islands":{name:"Spratly Islands",ISO_A3:"-99"},Philippines:{name:"Philippines",ISO_A3:"PHL"},Palau:{name:"Palau",ISO_A3:"PLW"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},Poland:{name:"Poland",ISO_A3:"POL"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Palestine:{name:"Palestine",ISO_A3:"PSE"},"French Polynesia":{name:"French Polynesia",ISO_A3:"PYF"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Romania:{name:"Romania",ISO_A3:"ROU"},Russia:{name:"Russia",ISO_A3:"RUS"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},Singapore:{name:"Singapore",ISO_A3:"SGP"},"South Georgia and South Sandwich Islands":{name:"South Georgia and South Sandwich Islands",ISO_A3:"SGS"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Solomon Islands":{name:"Solomon Islands",ISO_A3:"SLB"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Somalia:{name:"Somalia",ISO_A3:"SOM"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},"Sao Tome and Principe":{name:"Sao Tome and Principe",ISO_A3:"STP"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},"East Timor":{name:"East Timor",ISO_A3:"TLS"},Tonga:{name:"Tonga",ISO_A3:"TON"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Tuvalu:{name:"Tuvalu",ISO_A3:"TUV"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},"United States Minor Outlying Islands":{name:"United States Minor Outlying Islands",ISO_A3:"UMI"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"US Naval Base Guantanamo Bay":{name:"US Naval Base Guantanamo Bay",ISO_A3:"-99"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Vanuatu:{name:"Vanuatu",ISO_A3:"VUT"},"Wallis and Futuna":{name:"Wallis and Futuna",ISO_A3:"WLF"},"Akrotiri Sovereign Base Area":{name:"Akrotiri Sovereign Base Area",ISO_A3:"-99"},Samoa:{name:"Samoa",ISO_A3:"WSM"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"}},oA={Alabama:{name:"Alabama"},Alaska:{name:"Alaska"},Arizona:{name:"Arizona"},Arkansas:{name:"Arkansas"},California:{name:"California"},Colorado:{name:"Colorado"},Connecticut:{name:"Connecticut"},Delaware:{name:"Delaware"},"District of Columbia":{name:"District of Columbia"},Florida:{name:"Florida"},Georgia:{name:"Georgia"},Hawaii:{name:"Hawaii"},Idaho:{name:"Idaho"},Illinois:{name:"Illinois"},Indiana:{name:"Indiana"},Iowa:{name:"Iowa"},Kansas:{name:"Kansas"},Kentucky:{name:"Kentucky"},Louisiana:{name:"Louisiana"},Maine:{name:"Maine"},Maryland:{name:"Maryland"},Massachusetts:{name:"Massachusetts"},Michigan:{name:"Michigan"},Minnesota:{name:"Minnesota"},Mississippi:{name:"Mississippi"},Missouri:{name:"Missouri"},Montana:{name:"Montana"},Nebraska:{name:"Nebraska"},Nevada:{name:"Nevada"},"New Hampshire":{name:"New Hampshire"},"New Jersey":{name:"New Jersey"},"New Mexico":{name:"New Mexico"},"New York":{name:"New York"},"North Carolina":{name:"North Carolina"},"North Dakota":{name:"North Dakota"},Ohio:{name:"Ohio"},Oklahoma:{name:"Oklahoma"},Oregon:{name:"Oregon"},Pennsylvania:{name:"Pennsylvania"},"Rhode Island":{name:"Rhode Island"},"South Carolina":{name:"South Carolina"},"South Dakota":{name:"South Dakota"},Tennessee:{name:"Tennessee"},Texas:{name:"Texas"},Utah:{name:"Utah"},Vermont:{name:"Vermont"},Virginia:{name:"Virginia"},Washington:{name:"Washington"},"West Virginia":{name:"West Virginia"},Wisconsin:{name:"Wisconsin"},Wyoming:{name:"Wyoming"}},aA={Anguilla:{name:"Anguilla",ISO_A3:"AIA"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Canada:{name:"Canada",ISO_A3:"CAN"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},Dominica:{name:"Dominica",ISO_A3:"DMA"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Mexico:{name:"Mexico",ISO_A3:"MEX"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"}},lA={Argentina:{name:"Argentina",ISO_A3:"ARG"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Chile:{name:"Chile",ISO_A3:"CHL"},Colombia:{name:"Colombia",ISO_A3:"COL"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},Guyana:{name:"Guyana",ISO_A3:"GUY"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Panama:{name:"Panama",ISO_A3:"PAN"},Peru:{name:"Peru",ISO_A3:"PER"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Honduras:{name:"Honduras",ISO_A3:"HND"}},uA={World:nA,USA:oA,NorthAmerica:aA,SouthAmerica:lA,Canada:hA,Europe:rA,Asia:sA,Africa:iA,Australia:eA},cA=(t,i)=>Math.abs(t)+Math.abs(i);function dA(t,i){const s=t.reduce(cA,0),e=(h=t,Math.max(...h.map((t=>t))));var h;const r=(t=>Math.min(...t.map((t=>t))))(t);return Math.max(i**2*e/s**2,s**2/(i**2*r))}const fA=({height:t,width:i})=>t>i?{value:i,vertical:!1}:{value:t,vertical:!0},AA=({data:t,dimensions:i})=>{const{x:s,y:e,width:h,height:r}=i,n=t.map((t=>t.value)).reduce(cA,0),o=t.map((t=>t.animatedValue)).reduce(cA,0),a=t.map((t=>t.animatedValue*r*h/o)),l=a.reduce(((t,i)=>t+i),0),u=a.map((t=>t/l*100)),c=a.filter(((t,i)=>u[i])),d={children:[],id:0,parentID:-1,name:"Main Rectangle",value:n,animatedValue:o,x:s,y:e,width:h,height:r,nodeIndex:-1,userNode:{name:"Main Rectangle",value:n}};if(1===t.length){const s={...t[0],x:i.x,y:i.y,width:i.width,height:i.height,userNode:{...t[0].userNode,value:t[0].value}};d.children.push(s)}else yA(c,fA(d).value,t,d);return d.children},gA=(t,i,s,e,h)=>{const r=t.reduce(cA,0)/i;t.forEach(((t,i)=>{const n=Math.abs(t)/r,{x:o,y:a,children:l}=h,u=e[l.length],c={...u,x:o,y:a,width:s?r:n,height:s?n:r,userNode:{...u.userNode,value:u.value}};s?h.y-=n:h.x+=n,l.push(c)})),s?(h.x+=r,h.y+=i,h.width-=r):(h.x-=i,h.y-=r,h.height-=r)},yA=(t,i,s,e)=>{const h=[{children:t,width:i,row:[]}];for(;h.length>0;){const t=h.pop();if(!t)continue;const{children:i,width:r,row:n}=t;let o=0;const a=[...n];for(;o<i.length;){const t=[...a,i[o]],n=dA(a,r),l=dA(t,r);if(!(0===a.length||n>l)){gA(a,r,fA(e).vertical,s,e),h.push({children:i.slice(o),width:fA(e).value,row:[]});break}a.push(i[o]),o+=1}o===i.length&&gA(a,r,fA(e).vertical,s,e)}};class mA extends La{constructor(t,i,s,e,h,r,n){if(super(t,i,s,i.Py("treeMapChart bg",0),e,i.us.qi.treeMapChartBackgroundFillStyle||i.us.qi.chartXYSeriesBackgroundFillStyle,i.us.qi.treeMapChartBackgroundStrokeStyle||i.us.qi.chartXYBackgroundStrokeStyle,i.us.qi.treeMapChartTitleFont||i.us.qi.chartXYTitleFont,i.us.qi.treeMapChartTitleFillStyle||i.us.qi.chartXYTitleFillStyle,n),this.KL=new Map,this.qL=[],this.tR={},this.iR=f([]),this.Tm={speed:1},this.sR=Ki,this.eR=!0,this.hR="Go Back",this.rR=[],this.nR=this.qi.treeMapChartPathLabelFillStyle||this.qi.uiTextFillStyle,this.oR=this.qi.treeMapChartPathLabelFont||this.qi.uiTextFont,this.aR=this.qi.treeMapChartLabelHeaderFillStyle||this.qi.uiTextFillStyle,this.lR=this.qi.treeMapChartLabelHeaderFont||this.qi.uiTextFont,this.uR=this.qi.treeMapChartLabelFillStyle||this.qi.uiTextFillStyle,this.cR=this.qi.treeMapChartLabelFont||this.qi.uiTextFont,this.Hi=!0,this.Eb=!0,this.dR=!1,this.fR=this.qi.treeMapChartParentColor||F,this.AR=this.qi.treeMapChartNodeStrokeStyle||this.qi.uiBackgroundStrokeStyle,this.onNodeMouseEnter=t=>this.L.on("mouseEnter",t),this.onNodeMouseLeave=t=>this.L.on("mouseLeave",t),this.onNodeMouseClick=t=>this.L.on("mouseClick",t),this.onNodeMouseDoubleClick=t=>this.L.on("mouseDoubleClick",t),this.onNodeMouseDown=t=>this.L.on("mouseDown",t),this.onNodeMouseUp=t=>this.L.on("mouseUp",t),this.onNodeMouseMove=t=>this.L.on("mouseMove",t),this.offNodeMouseEnter=t=>this.L.off(t,"mouseEnter"),this.offNodeMouseLeave=t=>this.L.off(t,"mouseLeave"),this.offNodeMouseClick=t=>this.L.off(t,"mouseClick"),this.offNodeMouseDoubleClick=t=>this.L.off(t,"mouseDoubleClick"),this.offNodeMouseDown=t=>this.L.off(t,"mouseDown"),this.offNodeMouseUp=t=>this.L.off(t,"mouseUp"),this.offNodeMouseMove=t=>this.L.off(t,"mouseMove"),this.offNodeMouseDragStart=t=>this.L.off(t,"mouseDragStart"),this.offNodeMouseDrag=t=>this.L.off(t,"mouseDrag"),this.offNodeMouseDragStop=t=>this.L.off(t,"mouseDragStop"),this.offNodeMouseWheel=t=>this.L.off(t,"mouseWheel"),this.Ob=(t,i,s,e,h)=>{this.us.xs(),this.dR=!0},this.Mt=(t,i)=>{const s=this.gR(i);s&&(this.ix=this.yR(s,t),this.Eb&&this.us.ls.Cs(i,!0),this.eR&&this.engine.setMouseStyle(Xe.Point),this.L.emit("mouseEnter",this,t,this.ix),this.us.xs())},this._t=(t,i)=>{this.gR(i)&&(this.ix=void 0,this.Eb&&this.us.ls.Cs(i,!1),this.engine.setMouseStyle(Xe.Default),this.L.emit("mouseLeave",this,t,this.ix),this.us.xs())},this.Ft=(t,i)=>{const s=this.gR(i);s&&(this.ix=this.yR(s,t),this.Eb&&this.us.ls.Cs(i,!0),this.eR&&this.engine.setMouseStyle(Xe.Point),this.L.emit("mouseEnter",this,t,this.ix),this.us.xs())},this.wt=(t,i)=>{const s=this.gR(i);if(s){if(this.eR){const i=(null==s?void 0:s.children.length)?s:s.parentID?this.tR[s.parentID]:void 0;i&&(this.iR.M([i]),this.ix=void 0,this.L.emit("viewChange",this.iR._()),this.dR=!0),t&&di(t)}this.L.emit("mouseClick",this,t,this.yR(s,t)),this.us.xs()}},this.Ct=(t,i)=>{const s=this.gR(i);s&&this.L.emit("mouseDoubleClick",this,t,this.yR(s,t))},this.kt=(t,i)=>{const s=this.gR(i);s&&this.L.emit("mouseDown",this,t,this.yR(s,t))},this.Tt=(t,i)=>{const s=this.gR(i);s&&this.L.emit("mouseUp",this,t,this.yR(s,t))},this.Pt=(t,i,s)=>{const e=this.gR(s);e&&this.L.emit("mouseDragStart",this,t,i,this.yR(e,t))},this.It=(t,i,s,e,h)=>{const r=this.gR(h);r&&this.L.emit("mouseDrag",this,t,i,s,e,this.yR(r,t))},this.Dt=(t,i,s,e)=>{const h=this.gR(e);h&&this.L.emit("mouseDragStop",this,t,i,s,this.yR(h,t))},this.Bt=(t,i)=>{const s=this.gR(i);s&&this.L.emit("mouseWheel",this,t,this.yR(s,t))},this.Lt=(t,i)=>{const s=this.gR(i);s&&(this.ix=this.yR(s,t),this.Eb&&this.us.ls.Cs(i,!0),this.L.emit("touchStart",this,t,this.ix),this.us.xs(),di(t))},this.Rt=(t,i)=>{const s=this.gR(i);s&&(this.ix=this.yR(s,t),this.Eb&&this.us.ls.Cs(i,!0),this.L.emit("touchMove",this,t,this.ix),this.us.xs(),di(t))},this.Et=(t,i)=>{const s=this.gR(i);if(s){if(this.ix=void 0,this.eR){const i=(null==s?void 0:s.children.length)?s:s.parentID?this.tR[s.parentID]:void 0;i&&(this.iR.M([i]),this.L.emit("viewChange",this.iR._()),this.dR=!0),t&&di(t)}this.Eb&&this.us.ls.Cs(i,!1),this.L.emit("touchEnd",this,t,this.ix),this.us.xs(),di(t)}},this.mR=t=>{const i=this.tR[this.rR[t].id]?[this.tR[this.rR[t].id]]:this.qL;this.iR.M(i),this.L.emit("viewChange",i),this.dR=!0,this.us.xs()},this.qi.treeMapChartNodeColors)this.pR=this.qi.treeMapChartNodeColors;else{const t=this.qi.pointSeriesFillStyle,i=t=>Y(t)?t.getColor():F;this.pR="function"==typeof t?new Array(5).fill(0).map(((s,e)=>i(t(e)))):[i(t)]}this.us.jn(Vo.If),this.Xm=i.pb("TreeMapChart plotting",0),this.Zm=i.pb("TreeMap UI plotting",1),this.onResize(this.Ob),this.bh.yr("TreeMap Chart");const o=i.Qm(),a=jt(r?r.cursorBuilder:void 0,tl);this.Jm=Va(this,o,a.pm(o,this.uiScale,this.uiScale,Yt,this.qi),void 0,"show-pointed",pA,(()=>0)),this.vR=this.es.Cg(),this.Iy(h,this.uiScale),this.Zb=this.Xm.Yp(this.mg).De(new H).Pe(this.AR),this.SR=this.us.ls.Hr(this,{animationEnabled:!1!==(null==r?void 0:r.animationsEnabled)}),this.bR=new _l((()=>this.Zm.Nr(this.mg).setMouseInteractions(!1))),this.xR=new _l((()=>this.Zm.Nr(this.uiScale))),this.Zb.setMouseInteractions(this.Hi).setMouseEnterEventHandler(((t,i,s)=>this.Mt(i,s))).setMouseLeaveEventHandler(((t,i,s)=>this._t(i,s))).setMouseClickEventHandler(((t,i,s)=>this.wt(i,s))).setMouseDoubleClickEventHandler(((t,i,s)=>this.Ct(i,s))).setMouseDownEventHandler(((t,i,s)=>this.kt(i,s))).setMouseUpEventHandler(((t,i,s)=>this.Tt(i,s))).setMouseMoveEventHandler(((t,i,s)=>this.Ft(i,s))).setMouseDragStartEventHandler(((t,i,s,e)=>this.Pt(i,s,e))).setMouseDragEventHandler(((t,i,s,e,h,r)=>this.It(i,s,e,h,r))).setMouseDragStopEventHandler(((t,i,s,e,h)=>this.Dt(i,s,e,h))).setMouseWheelEventHandler(((t,i,s)=>this.Bt(i,s))).setTouchStartEventHandler(((t,i,s)=>this.Lt(i,s))).setTouchMoveEventHandler(((t,i,s)=>this.Rt(i,s))).setTouchEndEventHandler(((t,i,s)=>this.Et(i,s))),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled))}setData(t){t=Array.isArray(t)?t.slice():[t];const{MR:i}=(()=>{let t=0;return{MR:i=>{var s;const e=i.map(((t,i)=>({node:t,parent:null}))),h=[];for(;e.length>0;){const i=e.pop();if(!i)continue;const{node:r,parent:n}=i;t+=1;const o={id:t,parentID:null==n?void 0:n.id,name:r.name,value:Number(r.value)||0,animatedValue:Number(r.value)||0,children:[],nodeIndex:n?n.nodeIndex:-1,userNode:r};n?n.children.push(o):h.push(o),null===(s=r.children)||void 0===s||s.forEach((t=>{e.push({node:t,parent:o})}))}const r=t=>{t.children.forEach(r),t.children.length>0&&(t.value+=t.children.reduce(((t,i)=>t+i.value),0),t.animatedValue+=t.children.reduce(((t,i)=>t+i.animatedValue),0),t.children.sort(((t,i)=>i.animatedValue-t.animatedValue)))};h.forEach(r);const n=1===i.length?h[0].children:h;return n.sort(((t,i)=>i.animatedValue-t.animatedValue)),n.forEach(((t,i)=>{t.nodeIndex=i;const s=i=>{i.children.forEach((i=>{i.nodeIndex=t.nodeIndex,s(i)}))};s(t)})),h}}})(),s=i(t);return s.forEach((t=>{const i=this.tR[t.id];i&&this._R(t,i)})),this.ix=void 0,this.iR.M(s),this.qL=s,this.tR=this.wR(s),this.dR=!0,this.us.xs(),this}setAnimationValues(t,i=1){return this.Tm=t?{speed:i}:void 0,this.us.xs(),this}setInitPathButtonText(t){return this.hR=t,this.dR=!0,this.us.xs(),this}setDisplayedLevelsCount(t){return this.sR=t,this.dR=!0,this.us.xs(),this}setDrillDownEnabled(t){return this.eR=t,this.dR=!0,this.us.xs(),this}setDrillDownNode(t){var i,s;if(this.ix=void 0,void 0===t)this.iR.M(this.qL);else{const e=[...this.qL];for(;e.length>0;){const h=e.pop();if(h){if(void 0!==h.value&&h.userNode===t||h.parentID&&Array.isArray(t)&&(null===(s=null===(i=this.tR[h.parentID])||void 0===i?void 0:i.userNode)||void 0===s?void 0:s.children)===t){const t=h.children.length?h:h.parentID?this.tR[h.parentID]:this.qL[0];this.iR.M([t]);break}if(h.children)for(let t=h.children.length-1;t>=0;t-=1)e.push(h.children[t])}}}return this.L.emit("viewChange",this.iR._()),this.dR=!0,this.us.xs(),this}setNodeColoring(t){return t instanceof Array?(this.Zb.De(new H),this.pR=t):this.Zb.De(t),this.dR=!0,this.us.xs(),this}setParentNodeColor(t){return this.fR=t,this.dR=!0,this.us.xs(),this}setPathLabelFillStyle(t){return this.nR="function"==typeof t?t(this.nR):t,this.dR=!0,this.us.xs(),this}getPathLabelFillStyle(){return this.nR}setPathLabelFont(t){return Ih(t)?this.oR=t:this.oR=t(this.oR),this.dR=!0,this.us.xs(),this}getPathLabelFont(){return this.oR}setHeaderFont(t){return Ih(t)?this.lR=t:this.lR=t(this.lR),this.dR=!0,this.us.xs(),this}getHeaderFont(){return this.lR}setHeaderFillStyle(t){return this.aR="function"==typeof t?t(this.aR):t,this.dR=!0,this.us.xs(),this}getHeaderFillStyle(){return this.aR}setLabelFont(t){return Ih(t)?this.cR=t:this.cR=t(this.cR),this.dR=!0,this.us.xs(),this}getLabelFont(){return this.cR}setLabelFillStyle(t){return this.uR="function"==typeof t?t(this.uR):t,this.dR=!0,this.us.xs(),this}getLabelFillStyle(){return this.uR}setNodeBorderStyle(t){return this.Zb.Pe(t),this.dR=!0,this.us.xs(),this}getNodeBorderStyle(){return this.Zb.mo()}setNodeEffect(t){return this.vR.bs(t),this.us.xs(),this}getNodeEffect(){return this.vR.Ms()}setCursor(t){return this.Jm.setCursor(t),this}getCursor(){return this.Jm.getCursor()}setCursorMode(t){return this.Jm.setCursorMode(t),this}getCursorMode(){return this.Jm.getCursorMode()}setCustomCursor(t){return this.Jm.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.Jm.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.Jm.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Jm.setCursorFormatting(t),this}getCursorFormatting(){return this.Jm.getCursorFormatting()}addCursor(t=tl){const i=this.vy(),s=t.pm(i,this.uiScale,this.uiScale,this.Ay(i),this.qi);return this.ky(s),s}onNodeMouseDragStart(t){return this.L.on("mouseDragStart",t)}onNodeMouseDrag(t){return this.L.on("mouseDrag",t)}onNodeMouseDragStop(t){return this.L.on("mouseDragStop",t)}onNodeMouseWheel(t){return this.L.on("mouseWheel",t)}onNodeTouchStart(t){return this.L.on("touchStart",t)}onNodeTouchMove(t){return this.L.on("touchMove",t)}onNodeTouchEnd(t){return this.L.on("touchEnd",t)}onViewChange(t){return this.L.on("viewChange",t)}offNodeTouchStart(t){return this.L.off(t,"touchStart")}offNodeTouchMove(t){return this.L.off(t,"touchMove")}offNodeTouchEnd(t){return this.L.off(t,"touchEnd")}offViewChange(t){return this.L.off(t,"viewChange")}setMouseInteractions(t){return this.Hi=t,this.Zb.setMouseInteractions(t),this}getMouseInteractions(){return this.Hi}setAnimationHighlight(t){return this.SR.jr(t),this}getAnimationHighlight(){return this.SR.Zr()}setHighlightOnHover(t){return this.Eb=t,this}getHighlightOnHover(){return this.Eb}yR(t,i){const s=this.us.Oo(i);return{cursorPosition:{pointMarker:{x:s.engineX,y:s.engineY},pointMarkerScale:this.us.ft,resultTable:{x:s.engineX,y:s.engineY},resultTableScale:this.us.ft},name:t.name,value:t.value,node:t.userNode}}getMinimumSize(){}sf(){return[this]}Le(t){super.Le(t),super.Fy(),Ra.Oy(this.bh,this.Dy);const i=Ra.Vy(this.bh,this.Dy);if(this.dR&&this.iR._().length){this.Zb.Vt(),this.KL.clear(),this.SR.Xr(),this.uh&&this.CR(t);const s=AA({data:this.iR._(),dimensions:{x:0+this.Ca.left,y:this.mg.y.getInnerEnd()-i-this.Ca.top,width:this.mg.x.getInnerEnd()-this.Ca.right-this.Ca.left,height:this.mg.y.getInnerEnd()-i-this.Ca.top-this.Ca.bottom}}),e=this.bR.Mp();this.kR(s,e),e.finishPlot(),this.TR(),this.qL!==this.iR._()&&this.qL.length>1&&this.rR.unshift({name:this.hR,id:0});let h=0;const r=this.xR.Mp(),n=this.oR;this.rR.forEach(((t,i)=>{const s=r.add(),e=this.us.Og.Vg(t.name,n,0);s.yr(`← ${t.name}`).Zh(n).Re({x:0,y:100}).Ha({x:-1,y:1}).Vr({left:this.Ca.left+h,top:this.Ca.top,right:0,bottom:0}).De(this.nR).setMouseClickEventHandler((t=>this.mR(i))).setMouseEnterEventHandler((()=>this.engine.setMouseStyle(Xe.Point))).setMouseLeaveEventHandler((()=>this.engine.setMouseStyle(Xe.Default))),h+=e.x+25})),r.finishPlot(),this.iR._().every((t=>t.value===t.animatedValue))?this.dR=!1:this.us.xs(!0)}return this.Jm.Le(!1,[],void 0,{explicitTarget:this.ix}),this}dispose(){return this.Zm.U(),this.Xm.U(),this.Jm.U(),this.Zb.dispose(),this.KL.clear(),this.bR.wp(),this.xR.wp(),super.dispose()}Z(){return super.Z(),this}J(){return super.J(),this}jd(){return ki(this.Zb.$h())}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),Ci(t,this.qi,s,{}),this}kR(t,i,s=!1,e=0){const h=t.map(((t,i)=>({node:t,isChild:s,visibleDepth:e})));for(;h.length>0;){const t=h.pop();if(!t)continue;const{node:s,visibleDepth:e,opacity:r}=t,{x:n,y:o,height:a,width:l,children:u,animatedValue:c,name:d,nodeIndex:f}=s,A=this.pR,g=0===e&&1===this.iR._().length?this.fR:A[f%A.length],y=[{x:n,y:o},{x:n,y:o-a},{x:l+n,y:o-a},{x:l+n,y:o}],m=this.Zb.$r().wl(y).FR(g.setA(r||250)).tx(c);this.KL.set(m,s),this.SR.$r(m,(t=>m.cs(t)));const p=n+5,v=o+25+5,S=Math.max(a-25-5,0),b=Math.max(l-5-5,0);if(u&&u.length&&e<this.sR&&b>15&&S>15){const t=AA({data:u,dimensions:{x:b>0?p:n,y:S>0?o-25:v,width:b,height:S}});for(let i=0;i<t.length;i+=1){const n=(250-(u.length>7?50:150))/(u.length-1),o=1===s.id&&1===this.qL.length||this.qL===this.iR._()?250:r?r/(e+1):250-i*n;h.push({node:t[i],isChild:!0,visibleDepth:e+1,opacity:o})}}const x=0===e&&1===this.iR._().length?this.aR:this.uR,M=0===e?this.lR:this.cR,_=this.IR(d,l-25,M),w=this.us.Og.Vg(_,M,0),C=i.add();l-25>w.x&&a>25?C.yr(_).Re({x:n+5,y:o-2.5}).Ha({x:-1,y:1}).De(x).Zh(M):C.yr("")}}wR(t){const i={},s=[...t];for(;s.length>0;){const t=s.pop();t&&(i[t.id]=t,t.children&&s.push(...t.children))}return i}gR(t){if(!this.dR&&t)return this.KL.get(t)}TR(){this.rR=[];const t=this.iR._()[0].id;let i=this.tR[t].parentID;for(;i;)this.rR.push({name:this.tR[i].name,id:i}),i=this.tR[i].parentID;return this.rR.reverse()}IR(t,i,s){let e=this.us.Og.Vg(t,s,0).x;if(e<=i)return t;const h=t.split(" ");let r=t;for(;h.length>1&&e>i;)h.pop(),r=`${h.join(" ")}...`,e=this.us.Og.Vg(r,s,0).x;if(e>i)for(r=`${h[0]}...`,e=this.us.Og.Vg(r,s,0).x;r.length>3&&e>i;)r=`${r.substring(0,r.length-4)}...`,e=this.us.Og.Vg(r,s,0).x;return r.length<=3&&e>i?"":r}CR(t){var i;const s=[...this.qL];for(;s.length>0;){const e=s.pop();if(!e)continue;const h=e.value-e.animatedValue;if(Math.abs(h)<.0015*e.value||void 0===this.Tm)e.animatedValue=e.value;else{const s=h/250*((null===(i=this.Tm)||void 0===i?void 0:i.speed)||1)*t;e.animatedValue+=s,(h>0&&e.animatedValue>e.value||h<0&&e.animatedValue<e.value)&&(e.animatedValue=e.value)}e.children&&e.children.length>0&&s.push(...e.children)}}_R(t,i){const s=[{current:t,previous:i}];for(;s.length>0;){const t=s.pop();if(!t)continue;const{current:i,previous:e}=t;i.animatedValue=this.uh?e.animatedValue:i.value,e.nodeIndex<0?i.nodeIndex=0:i.nodeIndex=e.nodeIndex;const h=new Map(e.children.map((t=>[t.id,t])));i.children.forEach(((t,i)=>{const r=h.get(t.id);s.push({current:t,previous:r||e})}))}}}const pA=(t,i,s)=>[[i.name],[{text:i.value.toString(),font:{weight:"bold"}}]],vA=(t,i)=>{const s=(t=>{const i=new U({color:t.uiStrokeColorContrastHigh}),s=new U({color:t.uiStrokeColorContrastMedium}),e=new U({color:t.uiStrokeColorContrastLow}),h=new Fh({family:t.fontFamily,weight:"normal",style:"normal"}),r=h.setSize(18*t.fontScaler),n=h.setSize(16*t.fontScaler),o=h.setSize(14*t.fontScaler),a=h.setSize(10*t.fontScaler),l=h.withMutations((i=>i.set("size",14*t.fontScaler).set("weight","bold"))),u=h.setSize(13*t.fontScaler),c=new ve({thickness:2,fillStyle:e}),d=new U({color:t.dataHighlightOverlayColor}),f=new ve({thickness:2,fillStyle:t.legendBackgroundBorderFillStyle}),A=t.dataColorPalette.map((t=>new U({color:t.stroke}))),g=t=>A[t%A.length],y=A.map((t=>new ve({thickness:2,fillStyle:t}))),m=t=>y[t%y.length],p=t.dataColorPalette.map((t=>new U({color:t.border}))).map((t=>new ve({thickness:2,fillStyle:t}))),v=t=>p[t%p.length],x=t.dataColorPalette.map((t=>{const i=t.area;return new rt({angle:0,stops:[{offset:0,color:i.setA(0)},{offset:.8,color:i}]})})),M=t=>x[t%x.length],_=t.dataColorPaletteInverted.map((t=>{const i=t.area;return new rt({angle:180,stops:[{offset:0,color:i.setA(0)},{offset:.8,color:i}]})})),w=t=>_[t%_.length],C=t.dataColorPalette.map((t=>{const i=t.area;return new rt({angle:180,stops:[{color:Mi(i,S(255,255,255,i.getA()),.3),offset:0},{color:i,offset:.5},{color:Mi(i,S(0,0,0,i.getA()),.3),offset:1}]})})),k=t=>C[t%C.length],T=t.dataColorPaletteInverted.map((t=>new U({color:t.border}))).map((t=>new ve({thickness:2,fillStyle:t}))),F=t=>T[t%T.length],I=new U({color:t.dataColorPositive}),P=new U({color:t.dataColorNegative}),D=new ve({thickness:1,fillStyle:new U({color:t.dataStrokeColorContrastHigh.setA(50)})}),B=new ve({thickness:2,fillStyle:t.axisLineFillStyle}),L=at,R=new U({color:S(0,0,0,1)}),E=new ve({thickness:1,fillStyle:t.axisGridMajorFillStyle}),z=at,V=o,N=t.axisLabelMajorFillStyle,G=new ve({thickness:1,fillStyle:t.axisGridMajorFillStyle}),W=new ve({thickness:1,fillStyle:t.axisTickMajorFillStyle}),Y=o,H=t.axisLabelMajorFillStyle,$=new ve({thickness:1,fillStyle:t.axisGridMinorFillStyle}),X=new ve({thickness:1,fillStyle:t.axisTickMinorFillStyle}),j=a,Z=t.axisLabelMinorFillStyle,Q=jo,J=new $o({gridStrokeStyle:E,tickStyle:z,tickLength:50,tickPadding:-14,labelFont:V,labelFillStyle:N}),K=new $o({gridStrokeStyle:G,tickStyle:W,tickLength:7,tickPadding:5,labelFont:Y,labelFillStyle:H}),q=new $o({gridStrokeStyle:$,tickStyle:X,tickLength:4,tickPadding:10,labelFont:j,labelFillStyle:Z}),tt=new _a({extremeTickStyle:Q,majorTickStyle:K,minorTickStyle:q}),it=new ga({greatTickStyle:J,majorTickStyle:K,minorTickStyle:q}),st=new ta({majorTickStyle:K,minorTickStyle:q}),et=new U({color:t.dataHighlightOverlayColor}),ht=new ve({thickness:1,fillStyle:s}),nt=new ve({thickness:2,fillStyle:s}),ot=t=>new Oh.Triangulated({shape:"sphere",size:10,fillStyle:A[t%A.length]}),lt=A[0],ut=t.uiTextFillStyle,ct=t.legendBackgroundFillStyle,dt=new ve({thickness:1,fillStyle:t.legendBackgroundBorderFillStyle}),ft=wi(t.legendButtonDefaultColor),At=wi(t.isDark?S(70,70,70,255):S(170,170,170,255)),gt=new U({color:t.isDark?S(70,70,70,255):S(170,170,170,255)}),yt=new ve({thickness:1,fillStyle:i}),mt=new In({thickness:1,fillStyle:t.cursorGridFillStyle,pattern:Tn.DashedEqual,patternScale:3}),pt=new ve({thickness:1,fillStyle:t.cursorGridFillStyle}),vt=t.zoomBandChartDefocusOverlayFillStyle,St=new ve({thickness:2,fillStyle:new U({color:t.zoomBandChartSplitterColor})}),bt=new U({color:t.uiBackgroundColor});let xt={isDark:t.isDark,effect:t.effect,effectsText:t.effectsText,effectsDashboardSplitters:t.effectsDashboardSplitters,lcjsBackgroundFillStyle:t.lcjsBackgroundFillStyle,lcjsBackgroundStrokeStyle:at,highlightColorOffset:t.highlightColorOffset,highlightColorOffsetAxisOverlay:t.highlightColorOffsetAxisOverlay,dashboardSplitterStyle:new ve({thickness:4,fillStyle:t.dashboardSplitterFillStyle}),chartXYBackgroundFillStyle:t.panelBackgroundFillStyle,chartXYBackgroundStrokeStyle:at,chartXYTitleFont:r,chartXYTitleFillStyle:t.titleFillStyle,chartXYSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chartXYSeriesBackgroundStrokeStyle:c,chartXYZoomingRectangleFillStyle:d,chartXYZoomingRectangleStrokeStyle:f,chartXYFittingRectangleFillStyle:d,chartXYFittingRectangleStrokeStyle:f,lineSeriesStrokeStyle:m,pointLineSeriesStrokeStyle:m,pointLineSeriesFillStyle:g,pointSeriesFillStyle:g,ellipseSeriesFillStyle:g,ellipseSeriesStrokeStyle:m,polygonSeriesFillStyle:g,polygonSeriesStrokeStyle:m,rectangleSeriesFillStyle:g,rectangleSeriesStrokeStyle:at,segmentSeriesStrokeStyle:m,boxSeriesBodyFillStyle:g(0),boxSeriesBodyStrokeStyle:at,boxSeriesStrokeStyle:new ve({thickness:1,fillStyle:A[0]}),boxSeriesMedianStrokeStyle:new ve({thickness:1,fillStyle:new U({color:S(0,0,0)})}),ohlcCandleThicknessPixels:5,ohlcCandleBodyFillStylePositive:I,ohlcCandleBodyFillStyleNegative:P,ohlcCandleTailStrokeStylePositive:new ve({thickness:1,fillStyle:new U({color:t.uiStrokeColorContrastHigh})}),ohlcCandleTailStrokeStyleNegative:new ve({thickness:1,fillStyle:new U({color:t.uiStrokeColorContrastHigh})}),ohlcBarThicknessPixels:10,ohlcBarStrokeStylePositive:new ve({thickness:2,fillStyle:I}),ohlcBarStrokeStyleNegative:new ve({thickness:2,fillStyle:P}),heatmapGridSeriesFillStyle:g,heatmapGridSeriesWireframeStyle:D,heatmapScrollingGridSeriesFillStyle:g,heatmapScrollingGridSeriesWireframeStyle:D,areaRangeSeriesFillStyle:M,areaRangeSeriesStrokeStyle:v,areaRangeSeriesFillStyleInverted:w,areaRangeSeriesStrokeStyleInverted:F,areaSeriesBipolarHighFillStyle:M,areaSeriesBipolarHighStrokeStyle:v,areaSeriesBipolarLowFillStyle:w,areaSeriesBipolarLowStrokeStyle:F,areaSeriesPositiveFillStyle:M,areaSeriesPositiveStrokeStyle:v,areaSeriesNegativeFillStyle:w,areaSeriesNegativeStrokeStyle:F,xAxisTitleFont:n,xAxisTitleFillStyle:t.axisTitleFillStyle,xAxisStrokeStyle:B,xAxisNibStyle:L,xAxisOverlayStyle:R,xAxisZoomingBandFillStyle:d,xAxisZoomingBandStrokeStyle:at,xAxisNumericTicks:tt,xAxisDateTimeTicks:it,xAxisTimeTicks:st,yAxisTitleFont:n,yAxisTitleFillStyle:t.axisTitleFillStyle,yAxisStrokeStyle:B,yAxisNibStyle:L,yAxisOverlayStyle:R,yAxisZoomingBandFillStyle:d,yAxisZoomingBandStrokeStyle:at,yAxisNumericTicks:tt,yAxisDateTimeTicks:it,yAxisTimeTicks:st,bandFillStyle:et,bandStrokeStyle:ht,constantLineStrokeStyle:nt,barChartBackgroundFillStyle:t.panelBackgroundFillStyle,barChartBackgroundStrokeStyle:at,barChartTitleFont:r,barChartTitleFillStyle:t.titleFillStyle,barChartSeriesBackgroundFillStyle:O,barChartSeriesBackgroundStrokeStyle:at,barChartBarFillStyle:g,barChartBarStrokeStyle:new ve({thickness:1,fillStyle:e}),barChartValueAxisTitleFont:n,barChartValueAxisTitleFillStyle:t.axisTitleFillStyle,barChartValueAxisStrokeStyle:B,barChartValueAxisTicks:tt.setMajorTickStyle((t=>t.setGridStrokeStyle(at))).setMinorTickStyle((t=>t.setGridStrokeStyle(at))),barChartCategoryAxisTitleFont:n,barChartCategoryAxisTitleFillStyle:t.axisTitleFillStyle,barChartCategoryAxisStrokeStyle:B,barChartCategoryLabels:{formatter:(t,i)=>t,labelFillStyle:tt.majorTickStyle.labelFillStyle,labelFont:tt.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,tickStyle:tt.majorTickStyle.tickStyle,tickLength:0},barChartValueLabelsAfterBars:{position:"after-bar",formatter:(t,i,s)=>t.chart.valueAxis.formatValue(s),labelFillStyle:tt.majorTickStyle.labelFillStyle,labelFont:tt.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},barChartValueLabelsInsideBars:{position:"inside-bar",formatter:(t,i,s)=>t.chart.valueAxis.formatValue(s),labelFillStyle:tt.majorTickStyle.labelFillStyle,labelFont:tt.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},chart3DBackgroundFillStyle:t.panelBackgroundFillStyle,chart3DBackgroundStrokeStyle:at,chart3DTitleFont:r,chart3DTitleFillStyle:t.titleFillStyle,chart3DSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chart3DSeriesBackgroundStrokeStyle:c,chart3DBoundingBoxStrokeStyle:at,xAxis3DTitleFont:n,xAxis3DTitleFillStyle:t.axisTitleFillStyle,xAxis3DStrokeStyle:B,xAxis3DNumericTicks:tt,xAxis3DDateTimeTicks:it,xAxis3DTimeTicks:st,yAxis3DTitleFont:n,yAxis3DTitleFillStyle:t.axisTitleFillStyle,yAxis3DStrokeStyle:B,yAxis3DNumericTicks:tt,yAxis3DDateTimeTicks:it,yAxis3DTimeTicks:st,zAxis3DTitleFont:n,zAxis3DTitleFillStyle:t.axisTitleFillStyle,zAxis3DStrokeStyle:B,zAxis3DNumericTicks:tt,zAxis3DDateTimeTicks:it,zAxis3DTimeTicks:st,lineSeries3DStrokeStyle:m,pointLineSeries3DStrokeStyle:m,pointLineSeries3DPointStyle:ot,pointSeries3DPointStyle:ot,pointCloudSeries3DPointStyle:t=>new Oh.Pixelated({size:5,fillStyle:A[t%A.length]}),surfaceGridSeries3DFillStyle:g,surfaceGridSeries3DWireframeStyle:D,surfaceScrollingGridSeries3DFillStyle:g,surfaceScrollingGridSeries3DWireframeStyle:D,boxSeries3DFillStyle:g,meshModel3DFillStyle:g(0),polarChartBackgroundFillStyle:t.panelBackgroundFillStyle,polarChartBackgroundStrokeStyle:at,polarChartTitleFont:r,polarChartTitleFillStyle:t.titleFillStyle,polarChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,polarChartSeriesBackgroundStrokeStyle:c,polarSectorFillStyle:et,polarSectorStrokeStyle:ht,polarAmplitudeAxisTitleFont:n,polarAmplitudeAxisTitleFillStyle:t.axisTitleFillStyle,polarAmplitudeAxisStrokeStyle:B,polarAmplitudeAxisNumericTicks:tt,polarAmplitudeAxisDateTimeTicks:it,polarAmplitudeAxisTimeTicks:st,polarRadialAxisTitleFont:n,polarRadialAxisTitleFillStyle:t.axisTitleFillStyle,polarRadialAxisStrokeStyle:B,polarRadialAxisTickStyle:K,polarLineSeriesStrokeStyle:m,polarPointLineSeriesFillStyle:g,polarPointLineSeriesStrokeStyle:m,polarPointSeriesFillStyle:g,polarPolygonSeriesFillStyle:k,polarPolygonSeriesStrokeStyle:v,polarAreaSeriesFillStyle:k,polarAreaSeriesStrokeStyle:v,polarHeatmapSeriesFillStyle:g,mapChartBackgroundFillStyle:t.panelBackgroundFillStyle,mapChartBackgroundStrokeStyle:at,mapChartTitleFont:r,mapChartTitleFillStyle:t.titleFillStyle,mapChartFillStyle:lt,mapChartStrokeStyle:new ve({thickness:1,fillStyle:new U({color:t.dataStrokeColorContrastMedium})}),mapChartOutlierRegionFillStyle:O,mapChartOutlierRegionStrokeStyle:new ve({thickness:1,fillStyle:e}),mapChartSeparateRegionFillStyle:ct,mapChartSeparateRegionStrokeStyle:dt,dataGridBackgroundFillStyle:t.panelBackgroundFillStyle,dataGridBackgroundStrokeStyle:at,dataGridTitleFont:r,dataGridTitleFillStyle:t.titleFillStyle,dataGridTextFont:o,dataGridTextFillStyle:lt,dataGridCellBackgroundFillStyle:new U({color:t.uiBackgroundColor}),dataGridBorderStrokeStyle:new ve({thickness:.4,fillStyle:new U({color:t.uiBackgroundBorderColor})}),dataGridScrollBarBackgroundFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarBackgroundStrokeStyle:at,dataGridScrollBarFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarStrokeStyle:dt,dataGridScrollBarButtonFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarButtonStrokeStyle:dt,dataGridScrollBarButtonArrowFillStyle:ft,dataGridScrollBarButtonArrowStrokeStyle:dt,sparkLineChartStrokeStyle:m(0),sparkPointChartFillStyle:g(0),sparkBarChartFillStyle:g(0),sparkBarChartStrokeStyle:v(0),sparkAreaChartFillStyle:M(0),sparkAreaChartStrokeStyle:v(0),sparkPieChartFillStyle:g,sparkPieChartStrokeStyle:dt,sparkChartBandFillStyle:et,sparkChartBandStrokeStyle:ht,sparkChartConstantLineStrokeStyle:nt,spiderChartBackgroundFillStyle:t.panelBackgroundFillStyle,spiderChartBackgroundStrokeStyle:at,spiderChartTitleFont:r,spiderChartTitleFillStyle:t.titleFillStyle,spiderChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,spiderChartSeriesBackgroundStrokeStyle:c,spiderChartWebStyle:new ve({thickness:2,fillStyle:e}),spiderChartScaleLabelFillStyle:t.axisLabelMajorFillStyle,spiderChartScaleLabelFont:o,spiderChartAxisLabelFillStyle:t.axisTitleFillStyle,spiderChartAxisLabelFont:n,spiderChartAxisStrokeStyle:new ve({thickness:2,fillStyle:s}),spiderChartAxisNibStrokeStyle:new ve({thickness:2,fillStyle:i}),spiderSeriesFillStyle:k,spiderSeriesStrokeStyle:v,spiderSeriesPointFillStyle:g,pieChartBackgroundFillStyle:t.panelBackgroundFillStyle,pieChartBackgroundStrokeStyle:at,pieChartTitleFont:r,pieChartTitleFillStyle:t.titleFillStyle,pieChartSliceFillStylePalette:g,pieChartSliceStrokeStyle:dt,pieChartSliceLabelFont:u,pieChartSliceLabelFillStyle:t.uiTextFillStyle,pieChartConnectorStrokeStyle:yt,funnelChartBackgroundFillStyle:t.panelBackgroundFillStyle,funnelChartBackgroundStrokeStyle:at,funnelChartTitleFont:r,funnelChartTitleFillStyle:t.titleFillStyle,funnelChartSliceFillStylePalette:g,funnelChartSliceStrokeStyle:dt,funnelChartSliceLabelFont:u,funnelChartSliceLabelFillStyle:t.uiTextFillStyle,funnelChartConnectorStrokeStyle:yt,pyramidChartBackgroundFillStyle:t.panelBackgroundFillStyle,pyramidChartBackgroundStrokeStyle:at,pyramidChartTitleFont:r,pyramidChartTitleFillStyle:t.titleFillStyle,pyramidChartSliceFillStylePalette:g,pyramidChartSliceStrokeStyle:dt,pyramidChartSliceLabelFont:u,pyramidChartSliceLabelFillStyle:t.uiTextFillStyle,pyramidChartConnectorStrokeStyle:yt,gaugeChartValueLabelFont:u.setSize(60),gaugeChartUnitLabelFont:u.setSize(40),gaugeChartTickFont:u.setSize(30),gaugeChartBarThickness:40,gaugeChartValueIndicatorThickness:10,gaugeChartRoundedEdges:!0,gaugeChartNeedleLength:40,gaugeChartStartAngle:225,gaugeChartEndAngle:-45,gaugeChartNeedleAlignment:0,gaugeChartGapBetweenBarAndValueIndicators:10,gaugeChartTickFillStyle:t.uiTextFillStyle,gaugeChartBarGradient:!0,gaugeChartBarStrokeStyle:at,gaugeChartUnitLabelFillStyle:t.uiTextFillStyle,gaugeChartValueLabelFillStyle:t.uiTextFillStyle,gaugeChartBarColor:S(255,255,255),gaugeChartGlowColor:S(255,255,64),gaugeChartNeedleFillStyle:new U({color:S(255,255,255)}),gaugeChartNeedleThickness:10,gaugeChartNeedleStrokeStyle:new ve({thickness:2,fillStyle:new U({color:S(0,0,0)})}),gaugeChartBackgroundFillStyle:t.panelBackgroundFillStyle,gaugeChartBackgroundStrokeStyle:at,gaugeChartTitleFont:r,gaugeChartTitleFillStyle:t.titleFillStyle,treeMapChartBackgroundFillStyle:t.panelBackgroundFillStyle,treeMapChartBackgroundStrokeStyle:at,treeMapChartParentColor:t.treeMapChartParentColor,treeMapChartNodeColors:t.treeMapChartNodeColors,treeMapChartNodeStrokeStyle:new ve({thickness:1,fillStyle:new U({color:b("000")})}),treeMapChartTitleFillStyle:t.titleFillStyle,treeMapChartTitleFont:r,treeMapChartPathLabelFillStyle:ut,treeMapChartPathLabelFont:u,treeMapChartLabelHeaderFillStyle:t.treeMapChartLabelHeaderFillStyle,treeMapChartLabelHeaderFont:r,treeMapChartLabelFillStyle:t.treeMapChartLabelFillStyle,treeMapChartLabelFont:u,uiPanelBackgroundFillStyle:t.panelBackgroundFillStyle,uiPanelBackgroundStrokeStyle:at,zoomBandChartDefocusOverlayFillStyle:vt,zoomBandChartSplitterStrokeStyle:St,zoomBandChartKnobFillStyle:t.zoomBandChartKnobFillStyle,zoomBandChartKnobSize:t.zoomBandChartKnobSize,onScreenMenuBackgroundColor:S(254,204,0,.7),uiButtonFillStyle:ft,uiButtonFillStyleHidden:At,uiButtonStrokeStyle:dt,uiButtonSize:10,uiBackgroundFillStyle:ct,uiBackgroundStrokeStyle:dt,uiTextFillStyle:ut,uiTextFillStyleHidden:gt,uiTextFont:u,legendTitleFillStyle:ut,legendTitleFont:l,cursorTickMarkerXBackgroundFillStyle:ct,cursorTickMarkerXBackgroundStrokeStyle:dt,cursorTickMarkerXTextFillStyle:ut,cursorTickMarkerXTextFont:u,cursorTickMarkerYBackgroundFillStyle:ct,cursorTickMarkerYBackgroundStrokeStyle:dt,cursorTickMarkerYTextFillStyle:ut,cursorTickMarkerYTextFont:u,cursorPointMarkerFillStyle:mt.getFillStyle(),cursorPointMarkerSize:{x:9,y:9},cursorPointMarkerShape:sr.Cross,cursorResultTableFillStyle:ct,cursorResultTableStrokeStyle:dt,cursorResultTableTextFillStyle:ut,cursorResultTableTextFont:u,cursorGridStrokeStyleX:mt,cursorGridStrokeStyleY:mt,cursor3DGridStrokeStyleX:pt,cursor3DGridStrokeStyleY:pt,cursor3DGridStrokeStyleZ:pt,cursor3DTickStrokeStyleX:K.tickStyle,cursor3DTickStrokeStyleY:K.tickStyle,cursor3DTickStrokeStyleZ:K.tickStyle,cursor3DTickLabelFillStyleX:ut,cursor3DTickLabelFillStyleY:ut,cursor3DTickLabelFillStyleZ:ut,cursor3DTickLabelFontX:u,cursor3DTickLabelFontY:u,cursor3DTickLabelFontZ:u,cursor3DTickLabelBackgroundFillStyleX:bt,cursor3DTickLabelBackgroundFillStyleY:bt,cursor3DTickLabelBackgroundFillStyleZ:bt,cursor3DTickLabelBackgroundStrokeStyleX:dt,cursor3DTickLabelBackgroundStrokeStyleY:dt,cursor3DTickLabelBackgroundStrokeStyleZ:dt,cursor3DTickLabelPaddingX:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingY:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingZ:{left:4,right:4,top:4,bottom:4}};return t.overrideThemeProperties&&(xt={...xt,...t.overrideThemeProperties}),xt})(t),e={...i,header1Font:s.xAxisTitleFont,header2Font:s.xAxisNumericTicks.getMajorTickStyle().labelFont,header3Font:s.uiTextFont,mainDataColor:t.dataColorPalette[0].stroke};return{...s,examples:e}},SA=(t,i)=>{const s=new Image;s.crossOrigin="*";const e=`${t}/${i}`;return s.addEventListener("error",(i=>{Wi(t,e,"Theme resource",{shouldCrash:!1})})),s.src=e,s},bA=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:Mi(i[e%i.length].stroke,S(255,255,255),.5);return new st({stops:[{color:Mi(h,S(255,255,255),.5*s).setA(100),offset:0},{color:h.setA(100),offset:.5},{color:Mi(h,S(30,30,30),.5*s).setA(100),offset:1}]})},xA=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:Mi(i[e%i.length].stroke,S(255,255,255),.2);return new st({stops:[{color:Mi(h,S(255,255,255),.2*s),offset:0},{color:h,offset:.5},{color:Mi(h,S(0,0,0),.2*s),offset:1}]})},MA=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:Mi(i[e%i.length].stroke,S(255,255,255),.2);return new rt({angle:90,stops:[{color:Mi(h,S(255,255,255),.5*s),offset:0},{color:h,offset:.35},{color:Mi(h,S(30,30,30),.5*s),offset:1}]})},_A=(t,i,s)=>(s=>{const e=new Map;return s=>{const h=e.get(s);if(h)return h;const r=(s=>{const e=!0===t?i[s%i.length].stroke:Mi(i[s%i.length].stroke,S(255,255,255),.3);return new rt({angle:90,stops:[{color:Mi(e,S(255,255,255),.5),offset:0},{color:e,offset:.35},{color:Mi(e,S(30,30,30),.5),offset:1}]})})(s);return e.set(s,r),r}})(),wA=Ni((()=>{const t=S(255,255,255),i=new U({color:t}),s=!0,e=new En({spread:1,blur:9,offset:{x:0,y:0},color:S(0,0,0,150)}),h=new st({position:{x:.8,y:.8},extent:tt.farthestCorner,shape:q.ellipse,stops:[{offset:0,color:S(50,51,52)},{offset:.5,color:S(14,15,16)},{offset:1,color:S(0,0,0)}]}),r=new U({color:S(45,45,45)}),n=new st({position:{x:.5,y:.5},extent:tt.farthestCorner,shape:q.circle,stops:[{offset:0,color:S(120,120,120,100)},{offset:1,color:S(0,0,0,50)}]}),o=new st({position:{x:.5,y:.5},extent:tt.farthestCorner,shape:q.circle,stops:[{offset:0,color:S(30,30,30,200)},{offset:1,color:S(0,0,0,255)}]}),a=new U({color:S(255,255,220)}),l=new U({color:S(255,255,166)}),u=new U({color:S(255,255,220)}),c=new U({color:S(255,255,220,130)}),d=new U({color:S(255,255,200)}),f=d,A=f,g=new rt({angle:45,stops:[{offset:0,color:S(230,230,230)},{offset:1,color:S(150,150,150)}]}),y=new U({color:S(220,220,220)}),m=new U({color:S(200,200,200,50)}),p=new U({color:S(200,200,200,150)}),v=new U({color:S(200,200,200,20)}),x=new U({color:S(220,220,220)}),M=new rt({angle:0,stops:[{offset:0,color:S(10,10,10,220)},{offset:1,color:S(30,30,30,220)}]}),_=i,w=S(255,255,200),C=M,k=_,T=S(20,20,20),F=S(0,0,0),I=t,P=S(150,150,150),D=S(50,50,50),B=S(50,50,50),L=S(100,100,100),R=S(200,200,200),E=[S(255,255,91,255),S(255,205,91,255),S(255,155,91,255),S(255,196,188,255),S(255,148,184,255),S(219,148,198,255),S(235,196,224,255),S(169,148,198,255),S(148,226,198,255),S(148,255,176,255),S(180,255,165,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),z=t.setA(20),V=S(176,255,157,255),O=S(255,112,76,255),N={mapChartFillStyle:new rt({angle:135,stops:[{color:S(255,255,91,255),offset:0},{color:S(255,155,91,255),offset:1}]}),spiderSeriesFillStyle:bA(s,E,.5),pieChartSliceFillStylePalette:xA(s,E,1),funnelChartSliceFillStylePalette:MA(s,E,1),pyramidChartSliceFillStylePalette:MA(s,E,1),rectangleSeriesFillStyle:_A(s,E),gaugeChartBarColor:S(255,255,91,255),gaugeChartGlowColor:S(255,255,91,64)},G=new U({color:S(176,255,157,255)}),W=new U({color:S(255,146,146,255)}),Y=new U({color:S(176,255,157,255)}),H=new U({color:S(230,63,63,255)}),$=new U({color:S(176,255,157,120)}),X=new U({color:S(229,63,63,180)}),j=new U({color:S(27,37,36,255)}),Z=new U({color:S(62,27,27,255)}),Q=[S(255,0,0),S(255,255,0),S(0,255,0)],J=[S(10,10,255),S(10,190,255),S(251,255,0),S(255,38,0)],K=[S(255,255,0),S(255,204,0),S(255,128,0),S(255,0,0)],it=[S(0,0,0),S(167,4,69,255),S(255,0,0),S(252,252,168,255)],et=new st({stops:[{color:S(61,61,80,100),offset:0},{color:S(44,44,55,30),offset:1}]}),ht=new U({color:S(148,148,198,255)}),nt=$.getColor().setA(255),ot=S(100,100,100),at=[S(255,241,149,200),S(255,230,65,200),S(238,211,32,200),S(238,176,32,200),S(255,159,13,200),S(254,120,37,200),S(253,91,56,200),S(253,75,84,200),S(254,95,124,200),S(227,56,160,200),S(226,53,134,200),S(216,90,166,200),S(254,151,206,200),S(237,151,254,200),S(243,177,255,200),S(233,133,252,200),S(210,101,230,200),S(178,61,200,200),S(193,81,156,200),S(217,95,145,200)];return vA({isDark:s,highlightColorOffset:S(60,60,60,60),highlightColorOffsetAxisOverlay:S(255,255,255,40),effect:e,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:h,dashboardSplitterFillStyle:r,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:o,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:a,axisTitleFillStyle:l,axisLabelMajorFillStyle:u,axisLabelMinorFillStyle:c,uiTitleFillStyle:d,uiTextFillStyle:f,cursorTextFillStyle:A,axisLineFillStyle:g,axisTickMajorFillStyle:y,axisGridMajorFillStyle:m,axisTickMinorFillStyle:p,axisGridMinorFillStyle:v,cursorGridFillStyle:x,legendBackgroundFillStyle:M,legendBackgroundBorderFillStyle:_,legendButtonDefaultColor:w,resultTableBackgroundFillStyle:C,resultTableBackgroundBorderFillStyle:k,uiBackgroundColor:T,uiBackgroundBorderColor:F,uiStrokeColorContrastHigh:I,uiStrokeColorContrastMedium:P,uiStrokeColorContrastLow:D,dataStrokeColorContrastHigh:B,dataStrokeColorContrastMedium:L,dataStrokeColorContrastLow:R,dataColorPalette:E,dataColorPaletteInverted:[{area:S(190,50,50,100),border:S(210,80,80)}],dataHighlightOverlayColor:z,dataColorPositive:V,dataColorNegative:O,zoomBandChartDefocusOverlayFillStyle:new U({color:S(0,0,0,180)}),zoomBandChartSplitterColor:b("#FBFB5A"),zoomBandChartKnobFillStyle:t=>new Cn({source:SA(t,"zoomBandChart/darkgold-selector.png"),fitMode:_n.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:N,treeMapChartParentColor:b("#181E21"),treeMapChartNodeColors:at,treeMapChartLabelFillStyle:new U({color:S(33,33,33)}),treeMapChartLabelHeaderFillStyle:new U({color:S(250,250,250)})},{positiveTextFillStyle:G,negativeTextFillStyle:W,positiveFillStyle:Y,negativeFillStyle:H,positiveAreaFillStyle:$,negativeAreaFillStyle:X,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:Z,badGoodColorPalette:Q,coldHotColorPalette:J,intensityColorPalette:K,spectrogramColorPalette:it,bollingerFillStyle:et,bollingerBorderFillStyle:ht,highlightPointColor:t,highlightDataGridColor:nt,unfocusedDataColor:ot})})),CA=Ni((()=>{const t=S(255,255,255),i=new U({color:t}),s=!0,e=new En({spread:0,blur:9,offset:{x:0,y:0},color:S(105,255,236,40)}),h=new U({color:S(2,21,30)}),r=new st({stops:[{color:S(19,40,66,150),offset:0},{color:S(0,0,0,150),offset:1}]}),n=new U({color:S(0,5,8,150)}),o=i,a=i,l=i,u=new U({color:S(255,255,220,130)}),c=i,d=i,f=d,A=new U({color:S(20,224,250,255)}),g=i,y=new U({color:S(61,94,110,100)}),m=new U({color:S(61,94,110,255)}),p=new U({color:S(61,94,110,40)}),v=i,x=new U({color:S(0,18,23,255)}),M=i,_=t,w=new U({color:S(0,17,22,240)}),C=i,k=S(0,38,48,220),T=S(0,0,0),F=t,I=S(150,150,150),P=S(19,78,93),D=S(50,50,50),B=S(0,36,48),L=S(200,200,200),R=[S(45,253,253,255),S(44,172,247,255),S(46,100,248,255),S(96,84,199,255),S(184,104,245,255),S(98,160,218,255),S(43,238,245,255),S(38,140,206,255),S(112,96,224,255),S(206,157,255,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),E=t.setA(50),z=S(3,217,194,255),V=S(230,63,63,255),O={mapChartFillStyle:new rt({angle:135,stops:[{color:S(118,248,231,255),offset:0},{color:S(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:bA(s,R,1),pieChartSliceFillStylePalette:xA(s,R,1),funnelChartSliceFillStylePalette:MA(s,R,1),pyramidChartSliceFillStylePalette:MA(s,R,1),rectangleSeriesFillStyle:_A(s,R),gaugeChartBarColor:S(3,217,194,255),gaugeChartGlowColor:S(3,217,194,120)},N=new U({color:S(45,253,253,255)}),G=new U({color:S(255,146,146,255)}),W=new U({color:S(45,253,253,255)}),Y=new U({color:S(230,63,63,255)}),H=new U({color:S(1,190,164,120)}),$=new U({color:S(229,63,63,180)}),X=new U({color:S(1,53,57,255)}),j=new U({color:S(62,27,27,255)}),Z=[S(1,104,119,255),S(0,165,144,255),S(0,246,214,255)],Q=[S(0,87,95,255),S(0,125,124,255),S(1,209,182,255),S(0,255,221,255),S(218,112,112,255),S(172,47,47,255)],J=[S(126,255,253,255),S(50,233,230,255),S(0,196,193,255),S(62,138,178,255),S(139,88,191,255),S(162,55,143,255)],K=[S(13,31,52,255),S(101,50,118,255),S(1,142,172,255),S(2,196,170,255),S(0,255,221,255)],q=new st({stops:[{color:S(122,103,254,70),offset:0},{color:S(178,168,255,10),offset:1}]}),tt=new U({color:S(122,103,254,255)}),it=H.getColor().setA(255),et=S(15,83,83),ht=[S(139,252,252,150),S(60,239,239,150),S(2,201,201,150),S(26,159,159,150),S(15,146,187,150),S(65,168,200,150),S(67,146,207,150),S(64,108,209,150),S(189,64,233,150),S(219,84,238,150),S(192,55,212,150),S(212,98,229,150),S(248,110,211,150),S(251,154,225,150),S(251,154,184,150),S(233,105,144,150),S(255,133,170,150),S(249,110,135,150),S(245,72,101,150),S(210,57,84,150)];return vA({isDark:s,highlightColorOffset:S(60,60,60,60),highlightColorOffsetAxisOverlay:S(255,255,255,40),effect:e,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new Cn({source:SA(t,"themes/turquoiseHexagon.jpg"),fitMode:_n.Fill}),dashboardSplitterFillStyle:h,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,axisLabelMinorFillStyle:u,uiTitleFillStyle:c,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:A,axisTickMajorFillStyle:g,axisGridMajorFillStyle:y,axisTickMinorFillStyle:m,axisGridMinorFillStyle:p,cursorGridFillStyle:v,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:_,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:C,uiBackgroundColor:k,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:D,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:L,dataColorPalette:R,dataColorPaletteInverted:[{area:S(170,60,210,100),border:S(210,100,250)}],dataHighlightOverlayColor:E,dataColorPositive:z,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new U({color:S(0,0,0,180)}),zoomBandChartSplitterColor:b("#2BF4F4"),zoomBandChartKnobFillStyle:t=>new Cn({source:SA(t,"zoomBandChart/turquoise-selector.png"),fitMode:_n.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:O,treeMapChartParentColor:b("#002329"),treeMapChartNodeColors:ht,treeMapChartLabelFillStyle:new U({color:S(33,33,33)}),treeMapChartLabelHeaderFillStyle:new U({color:S(250,250,250)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:W,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:$,positiveBackgroundFillStyle:X,negativeBackgroundFillStyle:j,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:J,spectrogramColorPalette:K,bollingerFillStyle:q,bollingerBorderFillStyle:tt,highlightPointColor:t,highlightDataGridColor:it,unfocusedDataColor:et})})),kA=Ni((()=>{const t=!1,i=new En({spread:0,blur:6,offset:{x:2,y:-2},color:S(0,0,0,30)}),s=new st({position:{x:.8,y:.8},extent:tt.farthestCorner,shape:q.ellipse,stops:[{offset:0,color:S(255,255,255)},{offset:1,color:S(255,255,255)}]}),e=new U({color:S(219,227,233,255)}),h=new st({position:{x:.5,y:.5},extent:tt.farthestCorner,shape:q.circle,stops:[{offset:0,color:S(255,255,255,200)},{offset:1,color:S(240,244,246,200)}]}),r=new st({position:{x:.5,y:.5},extent:tt.farthestCorner,shape:q.circle,stops:[{offset:0,color:S(255,255,255,255)},{offset:1,color:S(255,255,255,255)}]}),n=new U({color:S(33,43,49)}),o=new U({color:S(33,43,49)}),a=new U({color:S(33,43,49)}),l=new U({color:S(33,43,49,150)}),u=new U({color:S(33,43,49)}),c=u,d=c,f=new rt({angle:45,stops:[{offset:0,color:S(225,225,225)},{offset:1,color:S(225,225,225)}]}),A=new U({color:S(150,150,150,255)}),g=new U({color:S(150,150,150,170)}),y=new U({color:S(150,150,150,150)}),m=new U({color:S(150,150,150,100)}),p=new U({color:S(60,70,80)}),v=new rt({angle:0,stops:[{offset:0,color:S(255,255,255,240)},{offset:1,color:S(255,255,255,240)}]}),x=new U({color:S(168,186,199)}),M=S(255,255,200),_=new U({color:S(255,255,255,240)}),w=new U({color:S(128,146,159,255)}),C=S(255,255,255,255),k=S(168,168,199,255),T=S(168,186,199,255),F=S(168,186,199,255),I=S(168,186,199,255),P=S(168,186,199,255),D=S(100,100,100),B=S(200,200,200),L=[S(28,181,140,255),S(255,132,0,255),S(240,39,39,255),S(86,121,251,255),S(2,181,213,255),S(13,212,158,255),S(22,167,3,255),S(234,103,232,255),S(62,183,179,255),S(140,93,3,255),S(155,158,186,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),R=S(150,150,150,80),E=S(46,182,120,255),z=S(255,66,66,255),V=new ve({thickness:2,fillStyle:new U({color:S(168,186,199,255)})}),O={mapChartFillStyle:new rt({angle:-45,stops:[{color:S(2,181,213,255),offset:0},{color:S(175,243,255,255),offset:1}]}),spiderSeriesFillStyle:bA(t,L,.8),pieChartSliceFillStylePalette:xA(t,L,.8),funnelChartSliceFillStylePalette:MA(t,L,.5),pyramidChartSliceFillStylePalette:MA(t,L,.5),rectangleSeriesFillStyle:_A(t,L),gaugeChartBarColor:S(46,182,120,255),gaugeChartGlowColor:S(46,182,120,120),chartXYSeriesBackgroundStrokeStyle:V,chart3DSeriesBackgroundStrokeStyle:V,polarChartSeriesBackgroundStrokeStyle:V,spiderChartSeriesBackgroundStrokeStyle:V,dataGridTextFillStyle:new U({color:S(0,88,64,255)})},N=new U({color:S(4,146,108,255)}),G=new U({color:S(240,39,39,255)}),W=new U({color:S(28,181,140,255)}),Y=new U({color:S(230,88,88,255)}),H=new U({color:S(28,181,140,180)}),$=new U({color:S(230,88,88,180)}),X=new U({color:S(229,243,228)}),j=new U({color:S(232,225,216)}),Z=[S(193,48,48,255),S(240,234,60,255),S(45,191,55,255)],Q=[S(10,19,255,255),S(15,191,250,255),S(249,255,2,255),S(253,133,0,255),S(255,24,0,255)],J=[S(50,99,213),S(8,179,77),S(255,246,0),S(255,126,0),S(189,36,30)],K=[S(16,64,176),S(8,179,77),S(255,246,0),S(255,126,0),S(168,6,0)],it=new U({color:S(185,198,207,255)}),et=new st({stops:[{color:S(151,190,220,10),offset:0},{color:S(151,190,220,50),offset:1}]}),ht=H.getColor().setA(255),nt=S(150,150,150),ot=[S(255,243,136,125),S(254,237,99,125),S(255,216,109,125),S(255,172,100,125),S(255,133,101,125),S(255,113,142,125),S(230,103,129,125),S(242,126,219,125),S(255,155,235,125),S(255,181,240,125),S(203,143,255,125),S(208,154,255,125),S(171,188,255,125),S(197,209,255,125),S(171,187,255,125),S(84,167,239,125),S(38,196,214,125),S(38,214,196,125),S(69,225,141,125),S(36,191,88,125)];return vA({isDark:t,highlightColorOffset:S(-60,-60,-60,60),highlightColorOffsetAxisOverlay:S(0,0,0,40),effect:i,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:s,dashboardSplitterFillStyle:e,panelBackgroundFillStyle:h,seriesBackgroundFillStyle:r,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:n,axisTitleFillStyle:o,axisLabelMajorFillStyle:a,axisLabelMinorFillStyle:l,uiTitleFillStyle:u,uiTextFillStyle:c,cursorTextFillStyle:d,axisLineFillStyle:f,axisTickMajorFillStyle:A,axisGridMajorFillStyle:g,axisTickMinorFillStyle:y,axisGridMinorFillStyle:m,cursorGridFillStyle:p,legendBackgroundFillStyle:v,legendBackgroundBorderFillStyle:x,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:_,resultTableBackgroundBorderFillStyle:w,uiBackgroundColor:C,uiBackgroundBorderColor:k,uiStrokeColorContrastHigh:T,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:I,dataStrokeColorContrastHigh:P,dataStrokeColorContrastMedium:D,dataStrokeColorContrastLow:B,dataColorPalette:L,dataColorPaletteInverted:[{area:S(190,50,50,100),border:S(210,80,80)}],dataHighlightOverlayColor:R,dataColorPositive:E,dataColorNegative:z,zoomBandChartDefocusOverlayFillStyle:new U({color:S(255,255,255,180)}),zoomBandChartSplitterColor:b("#505D65"),zoomBandChartKnobFillStyle:t=>new Cn({source:SA(t,"zoomBandChart/light-selector.png"),fitMode:_n.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:O,treeMapChartParentColor:b("#D9D9D9"),treeMapChartNodeColors:ot,treeMapChartLabelFillStyle:new U({color:S(0,0,0)}),treeMapChartLabelHeaderFillStyle:new U({color:S(33,33,33)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:W,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:$,positiveBackgroundFillStyle:X,negativeBackgroundFillStyle:j,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:J,spectrogramColorPalette:K,bollingerFillStyle:et,bollingerBorderFillStyle:it,highlightPointColor:S(0,0,0),highlightDataGridColor:ht,unfocusedDataColor:nt})})),TA=Ni((()=>{const t=!1,i=new st({position:{x:.8,y:.8},extent:tt.farthestCorner,shape:q.ellipse,stops:[{offset:0,color:S(255,255,255)},{offset:1,color:S(255,255,255)}]}),s=new U({color:S(214,236,216,255)}),e=new st({position:{x:.5,y:.5},extent:tt.farthestCorner,shape:q.circle,stops:[{offset:0,color:S(233,244,231,70)},{offset:1,color:S(233,244,231,200)}]}),h=new st({position:{x:.5,y:.5},extent:tt.farthestCorner,shape:q.circle,stops:[{offset:0,color:S(255,255,255,255)},{offset:1,color:S(255,255,255,255)}]}),r=new U({color:S(1,61,53)}),n=new U({color:S(1,61,53)}),o=new U({color:S(1,61,53)}),a=new U({color:S(1,61,53,150)}),l=new U({color:S(1,61,53)}),u=l,c=u,d=new rt({angle:45,stops:[{offset:0,color:S(225,225,225)},{offset:1,color:S(225,225,225)}]}),f=new U({color:S(188,211,186,255)}),A=new U({color:S(188,211,186,150)}),g=new U({color:S(188,211,186,50)}),y=new U({color:S(188,211,186,50)}),m=new U({color:S(104,148,111,255)}),p=new rt({angle:0,stops:[{offset:0,color:S(255,255,255,240)},{offset:1,color:S(255,255,255,240)}]}),v=new U({color:S(104,148,111)}),x=S(255,255,200),M=new U({color:S(255,255,255,240)}),_=new U({color:S(104,148,111,255)}),w=S(255,255,255,255),C=S(179,201,183,255),k=S(188,211,186,255),T=S(188,211,186,255),F=S(188,211,186,255),I=S(188,211,186,255),P=S(100,100,100),D=S(200,200,200),B=[S(138,195,142,255),S(193,161,114,255),S(178,99,99,255),S(142,156,210,255),S(154,209,219,255),S(164,212,199,255),S(104,156,97,255),S(196,147,195,255),S(92,190,187,255),S(126,100,51,255),S(136,138,157,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),L=S(150,150,150,80),R=S(46,182,84,255),E=S(232,96,96,255),z=new ve({thickness:2,fillStyle:new U({color:S(188,211,186,255)})}),V={mapChartFillStyle:new rt({angle:-45,stops:[{color:S(118,160,121,255),offset:0},{color:S(174,227,178,255),offset:1}]}),spiderSeriesFillStyle:bA(t,B,.8),pieChartSliceFillStylePalette:xA(t,B,.8),pyramidChartSliceFillStylePalette:MA(t,B,.5),funnelChartSliceFillStylePalette:MA(t,B,.5),rectangleSeriesFillStyle:_A(t,B),gaugeChartBarColor:S(46,182,84,255),gaugeChartGlowColor:S(46,182,84,120),chartXYSeriesBackgroundStrokeStyle:z,chart3DSeriesBackgroundStrokeStyle:z,polarChartSeriesBackgroundStrokeStyle:z,spiderChartSeriesBackgroundStrokeStyle:z,dataGridTextFillStyle:new U({color:S(77,66,21,255)})},O=new U({color:S(93,151,97,255)}),N=new U({color:S(178,99,99,255)}),G=new U({color:S(138,195,142,255)}),W=new U({color:S(178,99,99,255)}),Y=new U({color:S(138,195,142,180)}),H=new U({color:S(178,99,99,180)}),$=new U({color:S(224,240,237)}),X=new U({color:S(251,227,227)}),j=[S(178,99,99,255),S(215,224,111,255),S(80,186,88,255)],Z=[S(62,64,142,255),S(66,131,77,255),S(250,250,135,255),S(202,161,78,255),S(179,53,53,255)],Q=[S(64,86,138),S(123,192,205),S(255,252,149),S(220,155,92),S(184,78,74)],J=[S(64,86,138),S(123,192,205),S(255,252,149),S(220,155,92),S(132,60,57)],K=new U({color:S(185,198,207,255)}),it=new st({stops:[{color:S(151,190,220,10),offset:0},{color:S(151,190,220,50),offset:1}]}),et=Y.getColor().setA(255),ht=S(150,150,150),nt=[S(242,239,210,150),S(243,238,183,150),S(210,222,136,150),S(204,217,148,150),S(157,190,124,150),S(143,178,72,150),S(198,147,88,150),S(216,148,71,150),S(229,142,103,150),S(225,174,152,150),S(219,149,203,150),S(216,188,209,150),S(109,198,189,150),S(172,206,202,150),S(164,223,217,150),S(174,215,233,150),S(203,225,235,150),S(220,227,243,150),S(207,213,227,150),S(171,182,209,150)];return vA({isDark:t,highlightColorOffset:S(-60,-60,-60,60),highlightColorOffsetAxisOverlay:S(0,0,0,40),effect:void 0,effectsText:!1,effectsDashboardSplitters:!1,lcjsBackgroundFillStyle:i,dashboardSplitterFillStyle:s,panelBackgroundFillStyle:e,seriesBackgroundFillStyle:h,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:r,axisTitleFillStyle:n,axisLabelMajorFillStyle:o,axisLabelMinorFillStyle:a,uiTitleFillStyle:l,uiTextFillStyle:u,cursorTextFillStyle:c,axisLineFillStyle:d,axisTickMajorFillStyle:f,axisGridMajorFillStyle:A,axisTickMinorFillStyle:g,axisGridMinorFillStyle:y,cursorGridFillStyle:m,legendBackgroundFillStyle:p,legendBackgroundBorderFillStyle:v,legendButtonDefaultColor:x,resultTableBackgroundFillStyle:M,resultTableBackgroundBorderFillStyle:_,uiBackgroundColor:w,uiBackgroundBorderColor:C,uiStrokeColorContrastHigh:k,uiStrokeColorContrastMedium:T,uiStrokeColorContrastLow:F,dataStrokeColorContrastHigh:I,dataStrokeColorContrastMedium:P,dataStrokeColorContrastLow:D,dataColorPalette:B,dataColorPaletteInverted:[{area:S(210,70,70,100),border:S(200,110,110)}],dataHighlightOverlayColor:L,dataColorPositive:R,dataColorNegative:E,zoomBandChartDefocusOverlayFillStyle:new U({color:S(255,255,255,180)}),zoomBandChartSplitterColor:b("#446A40"),zoomBandChartKnobFillStyle:t=>new Cn({source:SA(t,"zoomBandChart/lightnature-selector.png"),fitMode:_n.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:V,treeMapChartParentColor:b("#EFF7EE"),treeMapChartNodeColors:nt,treeMapChartLabelFillStyle:new U({color:S(0,0,0)}),treeMapChartLabelHeaderFillStyle:new U({color:S(33,33,33)})},{positiveTextFillStyle:O,negativeTextFillStyle:N,positiveFillStyle:G,negativeFillStyle:W,positiveAreaFillStyle:Y,negativeAreaFillStyle:H,positiveBackgroundFillStyle:$,negativeBackgroundFillStyle:X,badGoodColorPalette:j,coldHotColorPalette:Z,intensityColorPalette:Q,spectrogramColorPalette:J,bollingerFillStyle:it,bollingerBorderFillStyle:K,highlightPointColor:S(0,0,0),highlightDataGridColor:et,unfocusedDataColor:ht})})),FA=Ni((()=>{const t=S(255,255,255),i=new U({color:t}),s=!0,e=new En({spread:1,blur:9,offset:{x:0,y:0},color:S(255,255,255,30)}),h=new U({color:S(6,15,36)}),r=new st({stops:[{color:S(46,13,87,50),offset:0},{color:S(0,0,0,150),offset:1}]}),n=new U({color:S(0,5,8,150)}),o=i,a=i,l=i,u=new U({color:S(255,255,220,130)}),c=i,d=i,f=d,A=new rt({angle:45,stops:[{offset:0,color:S(241,133,255,255)},{offset:1,color:S(115,207,238,255)}]}),g=i,y=new U({color:S(61,94,110,100)}),m=new U({color:S(61,94,110,255)}),p=new U({color:S(61,94,110,40)}),v=i,x=new U({color:S(0,18,23,255)}),M=i,_=S(115,207,238,255),w=new U({color:S(0,17,22,240)}),C=i,k=S(0,38,48,255),T=S(0,0,0),F=t,I=S(150,150,150),P=S(19,57,93),D=S(50,50,50),B=S(0,17,48),L=S(200,200,200),R=[S(20,211,237,255),S(98,147,252,255),S(164,73,250,255),S(129,117,253,255),S(95,134,252,255),S(22,133,212,255),S(35,200,242,255),S(104,121,233,255),S(137,69,232,255),S(70,72,241,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),E=t.setA(50),z=S(3,217,194,255),V=S(243,21,110,255),O={mapChartFillStyle:new rt({angle:135,stops:[{color:S(118,248,231,255),offset:0},{color:S(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:bA(s,R,.5),pieChartSliceFillStylePalette:xA(s,R,2),funnelChartSliceFillStylePalette:MA(s,R,1),pyramidChartSliceFillStylePalette:MA(s,R,1),rectangleSeriesFillStyle:_A(s,R),gaugeChartBarColor:S(3,217,194,255),gaugeChartGlowColor:S(3,217,194,150)},N=new U({color:S(20,211,237,255)}),G=new U({color:S(253,145,178,255)}),W=new U({color:S(20,211,237,255)}),Y=new U({color:S(239,68,121,255)}),H=new U({color:S(20,211,237,120)}),$=new U({color:S(239,68,121,180)}),X=new U({color:S(1,53,57,255)}),j=new U({color:S(94,19,42,255)}),Z=[S(174,51,132,255),S(204,107,218,255),S(189,215,253,255)],Q=[S(0,63,95,255),S(0,149,255,255),S(0,225,255,255),S(255,154,254,255),S(204,98,170,255),S(139,39,84,255)],J=[S(197,241,255,255),S(70,210,255,255),S(0,164,217,255),S(90,99,222,255),S(138,75,192,255),S(151,27,162,255)],K=[S(13,31,52,255),S(129,54,130,255),S(131,108,176,255),S(7,162,213,255),S(26,247,255,255)],q=new st({stops:[{color:S(219,42,235,60),offset:0},{color:S(237,73,252,10),offset:1}]}),tt=new U({color:S(237,73,252,255)}),it=H.getColor().setA(255),et=S(8,70,100),ht=[S(149,230,255,150),S(93,213,243,150),S(20,189,223,150),S(5,151,181,150),S(2,138,198,150),S(2,113,198,150),S(97,148,236,150),S(93,111,230,150),S(151,120,223,150),S(128,87,227,150),S(153,52,230,150),S(179,92,245,150),S(248,110,211,150),S(255,155,228,150),S(251,88,207,150),S(255,0,162,150),S(214,73,177,150),S(209,71,159,150),S(238,101,169,150),S(210,57,134,150)];return vA({isDark:s,highlightColorOffset:S(60,60,60,60),highlightColorOffsetAxisOverlay:S(255,255,255,40),effect:e,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new Cn({source:SA(t,"themes/cyberSpace.jpg"),fitMode:_n.Fill}),dashboardSplitterFillStyle:h,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,axisLabelMinorFillStyle:u,uiTitleFillStyle:c,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:A,axisTickMajorFillStyle:g,axisGridMajorFillStyle:y,axisTickMinorFillStyle:m,axisGridMinorFillStyle:p,cursorGridFillStyle:v,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:_,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:C,uiBackgroundColor:k,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:D,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:L,dataColorPalette:R,dataColorPaletteInverted:[{area:S(41,130,255,100),border:S(45,110,240)}],dataHighlightOverlayColor:E,dataColorPositive:z,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new U({color:S(0,0,0,180)}),zoomBandChartSplitterColor:b("#DB77FF"),zoomBandChartKnobFillStyle:t=>new Cn({source:SA(t,"zoomBandChart/cyberspace-selector.png"),fitMode:_n.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:O,treeMapChartParentColor:b("#1E1E3B"),treeMapChartNodeColors:ht,treeMapChartLabelFillStyle:new U({color:S(33,33,33)}),treeMapChartLabelHeaderFillStyle:new U({color:S(250,250,250)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:W,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:$,positiveBackgroundFillStyle:X,negativeBackgroundFillStyle:j,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:J,spectrogramColorPalette:K,bollingerFillStyle:q,bollingerBorderFillStyle:tt,highlightPointColor:t,highlightDataGridColor:it,unfocusedDataColor:et})})),IA={};Object.defineProperty(IA,"darkGold",{get:wA,enumerable:!0}),Object.defineProperty(IA,"turquoiseHexagon",{get:CA,enumerable:!0}),Object.defineProperty(IA,"light",{get:kA,enumerable:!0}),Object.defineProperty(IA,"lightNature",{get:TA,enumerable:!0}),Object.defineProperty(IA,"cyberSpace",{get:FA,enumerable:!0});const PA=IA,DA=PA.darkGold,BA=t=>({...t,effect:void 0}),LA=(t,i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAsa2NhQlgAACxranVtYgAAAB5qdW1kYzJwYQARABCAAACqADibcQNjMnBhAAAALEVqdW1iAAAAR2p1bWRjMm1hABEAEIAAAKoAOJtxA3Vybjp1dWlkOjlmZDBkZjkzLTVmMDMtNDczYi1hZThhLTFhNDM4NmMzNmJhYQAAAAGzanVtYgAAAClqdW1kYzJhcwARABCAAACqADibcQNjMnBhLmFzc2VydGlvbnMAAAAA12p1bWIAAAAmanVtZGNib3IAEQAQgAAAqgA4m3EDYzJwYS5hY3Rpb25zAAAAAKljYm9yoWdhY3Rpb25zgaNmYWN0aW9ua2MycGEuZWRpdGVkbXNvZnR3YXJlQWdlbnRtQWRvYmUgRmlyZWZseXFkaWdpdGFsU291cmNlVHlwZXhTaHR0cDovL2N2LmlwdGMub3JnL25ld3Njb2Rlcy9kaWdpdGFsc291cmNldHlwZS9jb21wb3NpdGVXaXRoVHJhaW5lZEFsZ29yaXRobWljTWVkaWEAAACranVtYgAAAChqdW1kY2JvcgARABCAAACqADibcQNjMnBhLmhhc2guZGF0YQAAAAB7Y2JvcqVqZXhjbHVzaW9uc4GiZXN0YXJ0GCFmbGVuZ3RoGSx3ZG5hbWVuanVtYmYgbWFuaWZlc3RjYWxnZnNoYTI1NmRoYXNoWCBvErgv+J0u7bVCYViyMUgw5yMb8idAv1erA3/DALx9NWNwYWRIAAAAAAAAAAAAAAIDanVtYgAAACRqdW1kYzJjbAARABCAAACqADibcQNjMnBhLmNsYWltAAAAAddjYm9yqGhkYzp0aXRsZW9HZW5lcmF0ZWQgaW1hZ2VpZGM6Zm9ybWF0aWltYWdlL3BuZ2ppbnN0YW5jZUlEeCh4bXAuaWlkOjI3NEMxQjdDN0E0MDExRUVBQkZFQUNFQjJDOTA0NzVCb2NsYWltX2dlbmVyYXRvcng2QWRvYmVfUGhvdG9zaG9wLzI1LjIuMCBhZG9iZV9jMnBhLzAuNy42IGMycGEtcnMvMC4yNS4ydGNsYWltX2dlbmVyYXRvcl9pbmZvgb9kbmFtZW9BZG9iZSBQaG90b3Nob3BndmVyc2lvbmYyNS4yLjD/aXNpZ25hdHVyZXgZc2VsZiNqdW1iZj1jMnBhLnNpZ25hdHVyZWphc3NlcnRpb25zgqJjdXJseCdzZWxmI2p1bWJmPWMycGEuYXNzZXJ0aW9ucy9jMnBhLmFjdGlvbnNkaGFzaFggSmnBvf+o3kEweL4k7cz4MTrB0WSVNFZxoA1rBrM31K+iY3VybHgpc2VsZiNqdW1iZj1jMnBhLmFzc2VydGlvbnMvYzJwYS5oYXNoLmRhdGFkaGFzaFggL2g6Dghd536quyA5vPlS/9NGA5WvLRkkKJmqn0VxCoFjYWxnZnNoYTI1NgAAKEBqdW1iAAAAKGp1bWRjMmNzABEAEIAAAKoAOJtxA2MycGEuc2lnbmF0dXJlAAAAKBBjYm9y0oREoQE4JKNmc2lnVHN0oWl0c3RUb2tlbnOBoWN2YWxZDjYwgg4yMAMCAQAwgg4pBgkqhkiG9w0BBwKggg4aMIIOFgIBAzEPMA0GCWCGSAFlAwQCAQUAMIGCBgsqhkiG9w0BCRABBKBzBHEwbwIBAQYJYIZIAYb9bAcBMDEwDQYJYIZIAWUDBAIBBQAEIHj4VpJDPzaO0x4hOPnj/w1GTHuwXU0IpBf4VVocIQzoAhB3SsxvHza2JR1fKj3Mjr0yGA8yMDIzMTEwMzExNTcyNloCCQCyOL6wAOGCbaCCC70wggUHMIIC76ADAgECAhAFHp6R1x6RCrvkPVzt0N3ZMA0GCSqGSIb3DQEBCwUAMGMxCzAJBgNVBAYTAlVTMRcwFQYDVQQKEw5EaWdpQ2VydCwgSW5jLjE7MDkGA1UEAxMyRGlnaUNlcnQgVHJ1c3RlZCBHNCBSU0E0MDk2IFNIQTI1NiBUaW1lU3RhbXBpbmcgQ0EwHhcNMjMwOTA4MDAwMDAwWhcNMzQxMjA3MjM1OTU5WjBYMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xMDAuBgNVBAMTJ0RpZ2lDZXJ0IEFkb2JlIEFBVEwgVGltZXN0YW1wIFJlc3BvbmRlcjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABE0srlH5A/+15/MFl1asNh8Q8TubOsEVfu0qlJrF0smjtwL1IeHZ/AB7J59u1Trpho1BDN85lfTY30rNBsfT+myjggGLMIIBhzAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH/BAIwADAWBgNVHSUBAf8EDDAKBggrBgEFBQcDCDAgBgNVHSAEGTAXMAgGBmeBDAEEAjALBglghkgBhv1sBwEwHwYDVR0jBBgwFoAUuhbZbU2FL3MpdpovdYxqII+eyG8wHQYDVR0OBBYEFLA1qlbDIamLztO4vIsWJVed7zThMFoGA1UdHwRTMFEwT6BNoEuGSWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcmwwgZAGCCsGAQUFBwEBBIGDMIGAMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wWAYIKwYBBQUHMAKGTGh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcnQwDQYJKoZIhvcNAQELBQADggIBAHgrjELHhBCEWJSCyRX7lsL0C9LJgbX1ryVYySNRxHkMR2LqC7PQZRJgDNR+kJop8P5v2Bzp/jMrzw4U4pY6rYv3I8HpFlJa4uBwUTIUgHWpi8Xxd1JEEX94POODi7HySekX60A055BozFb7GGVaxb0LreQTRXnkr6ggPNUPX9Gh+2ScOxlTdQQLgZbkdYvxo3Ap6cy9riZijRxOZqiOyWSxMUhgKxeKzwrFW6Xbe0awNhOUXZzIxc4ixpKzWSItpPJ30ZiBQn49U3ADYTnshbN9ZkTA1pHf/Nov2ZUvvddkZ8UYvwo9vBvLTDvnmABnRMBKaXYAs3ZCvw9CkDPOWTeUJMFRAtmUx52ohaA3nD8bCJ6UfpQ2pFfOdShwpb6GKv0g+BgcdIG2LHPJ0Ufmr+XmpgZgq/HIge0hjcCADpjDgq2z4B0L4xtAA1M8MrUx02hxb7104nFKqMuv5zJTQl3sgwqXUyP+9zHQP9y/Z5Fx/AQWrOXCW56dV7P4cFBJl8zHqinlhkOStZ1m22+9Hlq+eC0hJ2lkF1LuzRdJJb/51LXoPKRnopFDng6XpoD7eG6w4YpAx9+P00JuUoBsYSrdsuFiyWyQQGBAnjI69ggbSLcW+hJytuinaxawVlItJkS2eV5Z4XsxPg7f82uRkdtN0hTHeI93CN3OWeRebnK7MIIGrjCCBJagAwIBAgIQBzY3tyRUfNhHrP0oZipeWzANBgkqhkiG9w0BAQsFADBiMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29tMSEwHwYDVQQDExhEaWdpQ2VydCBUcnVzdGVkIFJvb3QgRzQwHhcNMjIwMzIzMDAwMDAwWhcNMzcwMzIyMjM1OTU5WjBjMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xOzA5BgNVBAMTMkRpZ2lDZXJ0IFRydXN0ZWQgRzQgUlNBNDA5NiBTSEEyNTYgVGltZVN0YW1waW5nIENBMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAxoY1BkmzwT1ySVFVxyUDxPKRN6mXUaHW0oPRnkyibaCwzIP5WvYRoUQVQl+kiPNo+n3znIkLf50fng8zH1ATCyZzlm34V6gCff1DtITaEfFzsbPuK4CEiiIY3+vaPcQXf6sZKz5C3GeO6lE98NZW1OcoLevTsbV15x8GZY2UKdPZ7Gnf2ZCHRgB720RBidx8ald68Dd5n12sy+iEZLRS8nZH92GDGd1ftFQLIWhuNyG7QKxfst5Kfc71ORJn7w6lY2zkpsUdzTYNXNXmG6jBZHRAp8ByxbpOH7G1WE15/tePc5OsLDnipUjW8LAxE6lXKZYnLvWHpo9OdhVVJnCYJn+gGkcgQ+NDY4B7dW4nJZCYOjgRs/b2nuY7W+yB3iIU2YIqx5K/oN7jPqJz+ucfWmyU8lKVEStYdEAoq3NDzt9KoRxrOMUp88qqlnNCaJ+2RrOdOqPVA+C/8KI8ykLcGEh/FDTP0kyr75s9/g64ZCr6dSgkQe1CvwWcZklSUPRR8zZJTYsg0ixXNXkrqPNFYLwjjVj33GHek/45wPmyMKVM1+mYSlg+0wOI/rOP015LdhJRk8mMDDtbiiKowSYI+RQQEgN9XyO7ZONj4KbhPvbCdLI/Hgl27KtdRnXiYKNYCQEoAA6EVO7O6V3IXjASvUaetdN2udIOa5kM0jO0zbECAwEAAaOCAV0wggFZMBIGA1UdEwEB/wQIMAYBAf8CAQAwHQYDVR0OBBYEFLoW2W1NhS9zKXaaL3WMaiCPnshvMB8GA1UdIwQYMBaAFOzX44LScV1kTN8uZz/nupiuHA9PMA4GA1UdDwEB/wQEAwIBhjATBgNVHSUEDDAKBggrBgEFBQcDCDB3BggrBgEFBQcBAQRrMGkwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBBBggrBgEFBQcwAoY1aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcnQwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcmwwIAYDVR0gBBkwFzAIBgZngQwBBAIwCwYJYIZIAYb9bAcBMA0GCSqGSIb3DQEBCwUAA4ICAQB9WY7Ak7ZvmKlEIgF+ZtbYIULhsBguEE0TzzBTzr8Y+8dQXeJLKftwig2qKWn8acHPHQfpPmDI2AvlXFvXbYf6hCAlNDFnzbYSlm/EUExiHQwIgqgWvalWzxVzjQEiJc6VaT9Hd/tydBTX/6tPiix6q4XNQ1/tYLaqT5Fmniye4Iqs5f2MvGQmh2ySvZ180HAKfO+ovHVPulr3qRCyXen/KFSJ8NWKcXZl2szwcqMj+sAngkSumScbqyQeJsG33irr9p6xeZmBo1aGqwpFyd/EjaDnmPv7pp1yr8THwcFqcdnGE4AJxLafzYeHJLtPo0m5d2aR8XKc6UsCUqc3fpNTrDsdCEkPlM05et3/JWOZJyw9P2un8WbDQc1PtkCbISFA0LcTJM3cHXg65J6t5TRxktcma+Q4c6umAU+9Pzt4rUyt+8SVe+0KXzM5h0F4ejjpnOHdI/0dKNPH+ejxmF/7K9h+8kaddSweJywm228Vex4Ziza4k9Tm8heZWcpw8De/mADfIBZPJ/tgZxahZrrdVcA6KYawmKAr7ZVBtzrVFZgxtGIJDwq9gdkT/r+k0fNX2bwE+oLeMt8EifAAzV3C+dAjfwAL5HYCJtnwZXZCpimHCUcr5n8apIUP/JiW9lVUKx+A+sDyDivl1vupL0QVSucTDh3bNzgaoSv27dZ8/DGCAbgwggG0AgEBMHcwYzELMAkGA1UEBhMCVVMxFzAVBgNVBAoTDkRpZ2lDZXJ0LCBJbmMuMTswOQYDVQQDEzJEaWdpQ2VydCBUcnVzdGVkIEc0IFJTQTQwOTYgU0hBMjU2IFRpbWVTdGFtcGluZyBDQQIQBR6ekdcekQq75D1c7dDd2TANBglghkgBZQMEAgEFAKCB0TAaBgkqhkiG9w0BCQMxDQYLKoZIhvcNAQkQAQQwHAYJKoZIhvcNAQkFMQ8XDTIzMTEwMzExNTcyNlowKwYLKoZIhvcNAQkQAgwxHDAaMBgwFgQU2Rq5M/4XremCHqYT9aQ6cU4+fn0wLwYJKoZIhvcNAQkEMSIEIGmY+GsCefCDmP0PFcYjdxBUfi0EgKYuEZb9pUMyLNuVMDcGCyqGSIb3DQEJEAIvMSgwJjAkMCIEIILa8ZSVezaEAkWP1ScAaf5ixxRW+p4Lhqv4J+hTICfZMAoGCCqGSM49BAMCBEcwRQIgcxxuf7QHV9Fkpj1VhPrFqhNFh8dZzl8qUU/2N3Sr4eoCIQDKu0KGYL++CSsDAXjJciMDbr5ImTy3jw0yQU5GYYeLimd4NWNoYWluglkGMzCCBi8wggQXoAMCAQICEBtbCzvasORd8vMNnlTR2tIwDQYJKoZIhvcNAQELBQAwdTELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEiMCAGA1UEAxMZQWRvYmUgUHJvZHVjdCBTZXJ2aWNlcyBHMzAeFw0yMzAyMDEwMDAwMDBaFw0yNDAyMDEyMzU5NTlaMIGhMREwDwYDVQQDDAhjYWktcHJvZDEcMBoGA1UECwwTQ29udGVudCBDcmVkZW50aWFsczETMBEGA1UECgwKQWRvYmUgSW5jLjERMA8GA1UEBwwIU2FuIEpvc2UxEzARBgNVBAgMCkNhbGlmb3JuaWExCzAJBgNVBAYTAlVTMSQwIgYJKoZIhvcNAQkBFhVncnAtY2FpLW9wc0BhZG9iZS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDv0wCnfYY9lkHDsykrTG7FYlnYHBcyualuD5u9ULjzv+FsTWOLg8Nhrz9RTxI9EeBbu3Wm7f4vqPsQYfxkEp0wIa6DVmEOZhbAeRfbhybWQ/D4Wvvck4mEZR+QZmTpIn7HX61gbtMFHlJUxkYBctIoAt9TBAFbz9d5Ig2WG0bsH39b6/8USXnIIk4FB6dtBRT1xeEwSDtwOd1YBpXXNBJmRWHXNJZZ85of2tBTesg/kMvTrOJJxYDZ97U416wcvbVomlees+NXUY3/ZB4xH+NsZils7m1bL2v2hSnHiLoqZeUKklbHUmT4ZpjrZCdtuIsWm5j2PPXKr7HKUuCbZSXBAgMBAAWjggGMMIIBiDAMBgNVHRMBAf8EAjAAMA4GA1UdDwEB/wQEAwIHgDAeBgNVHSUEFzAVBgkqhkiG9y8BAQwGCCsGAQUFBwMEMIGOBgNVHSAEgYYwgYMwgYAGCSqGSIb3LwECAzBzMHEGCCsGAQUFBwICMGUMY1lvdSBhcmUgbm90IHBlcm1pdHRlZCB0byB1c2UgdGhpcyBMaWNlbnNlIENlcnRpZmljYXRlIGV4Y2VwdCBhcyBwZXJtaXR0ZWQgYnkgdGhlIGxpY2Vuc2UgYWdyZWVtZW50LjBdBgNVHR8EVjBUMFKgUKBOhkxodHRwOi8vcGtpLWNybC5zeW1hdXRoLmNvbS9jYV83YTVjM2EwYzczMTE3NDA2YWRkMTkzMTJiYzFiYzIzZi9MYXRlc3RDUkwuY3JsMDcGCCsGAQUFBwEBBCswKTAnBggrBgEFBQcwAYYbaHR0cDovL3BraS1vY3NwLnN5bWF1dGguY29tMB8GA1UdIwQYMBaAFFcpejJNzP7kNU7AHyRzznNTq99qMA0GCSqGSIb3DQEBCwUAA4ICAQBXjlGa3yAK/Gijn6n/JNU9FZm72MP6vc5czrWe9y0T+EawuRvhpD5Edi1TnXkrpe8sMkgSjTGdbY+yGhq8zlCWQeXN1/aWo3L9Xr1uNxY/oVpLn0uWWfnfJ7yR9gKl/yoMfhjydT4t1fXHi/MhfhrWSVRHqX2U31UFGz/e298P2kv+vqhzpIUo1bj+jibtoPLMMQcCOTtKiJOTh4o3VSZpwQDERCzo91NkF+LnZjwYl6fE5USIkg/oCoomXxSPpowybDrcRJ9ilbtJcER48/LGgwzv/c7OYdron4PnEXm1FkOaVj+QRf7OwiNTizonhIzLR5Vfp0QHOWv/bPzvCjPQd+Xr0Q4032WlSxQwostNTAPtoVAU4OCwVH3Ech38emJ00/6fkDCdr7MN8/4n2LSNrMUvaBEZdmLqDCBnO02dbFrmpg3pTc0FqRQ4GL/88pjRNSMy5tU9SoQnSCGYqIsjfL8AzgPEGiXXRgABYc1uXecf4/eayb3K2MPs7hnWTbUKpHHJIwxpdN3vTGdZNWpz9Oxfuo3eELQlkTvACHgqkaXi/FAanHe5PChn6fr1/4cNF8goD0buPApgS3zzwqjRhxrH8ISwPfJn8JqzurMaLDMnnc18tHzUiMtX73jf6oXh7voCxX/T4D3nFPlxU3om2cpcLQ1Wd4026x18rlSGR1kGpTCCBqEwggSJoAMCAQICEAyotlR7iebSBol1zYubieIwDQYJKoZIhvcNAQELBQAwbDELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEZMBcGA1UEAxMQQWRvYmUgUm9vdCBDQSBHMjAeFw0xNjExMjkwMDAwMDBaFw00MTExMjgyMzU5NTlaMHUxCzAJBgNVBAYTAlVTMSMwIQYDVQQKExpBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZDEdMBsGA1UECxMUQWRvYmUgVHJ1c3QgU2VydmljZXMxIjAgBgNVBAMTGUFkb2JlIFByb2R1Y3QgU2VydmljZXMgRzMwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC3Hy69vQmzXEhs/gyDrmwB6lF4JaSAPomnsbKIZNr2iXaB+fkd85X8eJiNmI7P5O4cVT4Nc1p3zrESqBV4ZUyW8gcZ78QdwoHG8QNd2VNcHnMgSR+XT9Iafsnq9Nfww3Jt9KL3l5ANQ5n1+MJqr48EWNLll942bOL/JH4ywDSMoqhZqtJEIUUUGlQVBZ8CAvJc7LE6ddA5C52PE2Ppa7RfQgHXf4gfXVZwpxYRZcziPiOHqEvLb0J3cShUbejFxV6cwX8QyAPa1ePHg1RtM0HX+D34xHo3DkyGnmT+Ddq00TEDGG26AL5PdINKFIQl+zaq6KJFQe1fdGE5wrWzU4mBPmzaz3EbLn+7FWlwAhorYqIMldbfHE3ydc+aTU1JW7+bG19qmvhO9IluGtTtQDeqFBj2fg6faxsfVfVPD7stN6TwoIDlkOCE4RE+Iin8m3z3eqi/VsTmsmRqBxWDRaqOHz02EJoEDxXJG3ei+UbIIp01XZQvdufm90WxOTuqqan2ZqTPX9K5VdjEh/ovr7xFc5q1dZo+Sa5y4sTVM854/tLU3klOgUKzzSXYPYS3GhBcYJHjwr9xNRHnNX99D6F0g7OijScWfvtjxh13aTv/H0ETvymah4yfDpVdh9cK5YSCPqnuOlsujFAyhYwJXOWDvZZU2EkWVLDhoPx9zp7N4QIDAQABo4IBNDCCATAwEgYDVR0TAQH/BAgwBgEB/wIBADA1BgNVHR8ELjAsMCqgKKAmhiRodHRwOi8vY3JsLmFkb2JlLmNvbS9hZG9iZXJvb3RnMi5jcmwwDgYDVR0PAQH/BAQDAgEGMBQGA1UdJQQNMAsGCSqGSIb3LwEBBzBXBgNVHSAEUDBOMEwGCSqGSIb3LwECAzA/MD0GCCsGAQUFBwIBFjFodHRwczovL3d3dy5hZG9iZS5jb20vbWlzYy9wa2kvcHJvZF9zdmNlX2Nwcy5odG1sMCQGA1UdEQQdMBukGTAXMRUwEwYDVQQDEwxTWU1DLTQwOTYtMzMwHQYDVR0OBBYEFFcpejJNzP7kNU7AHyRzznNTq99qMB8GA1UdIwQYMBaAFKYc4W1UJEyoj0hyv26pjNXk7DHUMA0GCSqGSIb3DQEBCwUAA4ICAQBxzuUHjKbcLdzI4DtlXgCSgZXrlSAkr59pOF3JfPG42qVNAGU7JcEYXJ6+WbfcGwY7WYMl+jO7IvJPb7shXFYW9bnJgxX7lLU14KExchmcLNY1ee6IhBJ2Y8PzZMRUKSd5CkURPg0PBLGjz/KR/DofHx+G4rPTCOGORYxeYrd01lci5hVxvKccvIk7MD69ZTewfZPSM+0WnsU3f0Zmd7hgbRpUyWceG0eHFpdUKK/ZFWhHjDVC28odCnN885tHncKXviItK0ZUUo/AIthFKlhEXsnq9VL9fFbgvO83ZvpUQo5y8mY3cuGnEVGXdhjNb53CfC1u4dbpYmWaN99subUzEsUaUb3loLPfVfzDOpg2y9v37kBdy/wuXr20teY7U62xj/fAgs1QSnhUtlMTfCqbefyEycKVmKIrJkJLsvgTSYKVvH4FFIwfd5WjqOC97jX98rcVAzhAI0iSkazsWOMvL6m0L4nLJapx+85GsVX8Y6AHmEP4bmCElwil6KAP+UewJFiw5rmwV2pESHAhYuZJa03B8tl0nd2QJzvJGmbeBqXqpF9ORinFM3HErK8puRokOjFH2+1asLeI2tB31W/ELdNe27Ogduq6Z6qBwCp59YX27qydDhD0WRfN64kCs25K88iGAGNW2CAfTDS+b+WYJBiIL9jXYZ4LF+BiUvfdu2NwYWRZC70AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPZZAQBKX2Q2ihN2fLDLReHISpfOF0xIqNpOZXbBwZ0XanWG98erbIBdawl7r9nVma/uZjYH457wp00TVpKYUTJHMnzJMKskvM2Df4K6t5pUKGtJqEvMXLUy3g9kJq53aYDwikcUE+8wv+CYtu/+vii4XYSXQIxT4NN+JKoTDXmrNH1G46Nmpfq6SKk0g9GQ2brbkW3fzGR0xDxY3BXRy71guSBxN9TAbQGqUjMnkIyBcwV9wUQ2oCW9oIMNKASjW0CRkcFEzzmrQ+y+zHYpNvUaG7QehHcyhvOec3plzlyP6DZeQWp3PHA5bmonI8t5j6Qj15X1KnQiXuJ0rW+xoMA89aIVmpx4VgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAOSaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA5LjEtYzAwMSA3OS4xNDYyODk5Nzc3LCAyMDIzLzA2LzI1LTIzOjU3OjE0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjYyYTdmYWExLWJmZTMtMjE0Ny04MjAwLWMxM2NlMGU4ZTc1NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzRDMUI3RDdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzRDMUI3QzdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjUuMiAoMjAyMzEwMjQubS4yMzc0IDRhYjk0MzkpICAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphYjQzZjNjYy1hNTY4LTRkNGQtOTdiZC1iYjk0YjBlZjhjYmQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjJhN2ZhYTEtYmZlMy0yMTQ3LTgyMDAtYzEzY2UwZThlNzU0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HNvo5wAADZFJREFUeNrsXFtPVUkW3gc4yP0qDigKON517FFbHRGn1TamjaOJvvhsjIkvPplgfEKe1AefNDE+GP+AmWTszPTYcbpn2piJzc1GWwlOekRBEBFQ7jeZ9ZVrnVkUtfc5CGp3h5VU9qUuu3bVV9+67DonND4+7omEQiHPJaWlpYlxcXGLKX8epTCdB5aXNnHU6c2bN5POcaREp+O9dHxSX1/f5s3KL1ImYCkasMrKyvIISJspD+AyZSTpOrodDSaIBpQCkwtgSM8oVd2/f39M2quoqAijmcrKyjG/l7L77vde+v6sfCRgbdu2LY3AtJNSgg0qDa5oTOViKQtM9nXTgQMHaqmpPEoLKXUQqJpcYIqPj/cSEhLMUZgUbYyNjZkjRPpu50n+VEUvKtditMEb7Xom5OrVqzvpkOXIukFps5XXTunO4cOHR7heKp1/ye1gEX9BCcdv6H4330cbCyh9iXrRgJUQ1FmarFWUIqDS4ApiCT9AobxMpj24uI/209LSvMLCwiLKz6fyQModAlW73TeAac6cOV5SUpIBlasv9qKRvgBYIyMj3tDQkDmPdaLRPzwrHA6bhGsNWr9xsMfEZnC7XDSg+tzv4lRCCRPfjJtHjhzpu3LlCkDVx4BKZICsx9gy4PT4rmFQQbIpdfM5ynX7gWrS/Phl7NixI0SDWCCD52Is14vqAXIByoluAkl+fr43f/58Lyvr7cIaHh4OJSYmfkug6rXZApOamprqUb6vned3X4CBujj29/cbkEl/7EUj74o+og4S2gh6xkypk6mUPXnyZN25c+fCDKzm8vLyOuQzqCAtJ06cuH/+/PkwAytMLCR57VjQFy5cmKeAiXJZGOeLFy/iPBVt4Nqeb60dogKLBm9O/FvxXIwVxBAaUBpgixYt8np7e7329vYJZUtKSkwSefHihVdTU9N2586dXrtfmNj09HQz0dMRvAsYD0dhLryrvG8s7/w+ZCrPcJSdx8duAb+6l0WgWqeu/8uMZMoDWCTr+BpMVoZ8jLUq18XXgdohEFg0cXF6kF2s5Uf9NqBwxL0FCxaYSXz58qWZSNzr6+vzioqKIm01NTV5ZLgbT9HuExgGAzBdUOmJEeb6EKD5AJKt1KJ9TwAFNrpz6tSpljNnzgiQuuh8DbNSNx9HlF0mx26/cbTHLy6AsSKGcVCyjWepJwnS2trqbdiwwZyDJaDyUBbslZmZGTG6Hz9+7D18+NDdUSqTkpIyY6B6V5b4mYsBAIGm27rXR/f+DFXGKm5Ega6P7a5lqvw6sbMIcFkKlCUAI6esQI0QBCwBjxirNqCkDACSkZFhQKLVCSassbHR27Jli6kvsnDhQnN8/vy5t3Hjxsj95ubmSQ6CVoEA5a8IBO+LsSKgoskPKxaC1DKo1mmDXF1/AwAyCO+rNoX1FrANVqLA6V6sfuGGgwcPphBovrCBIuwCgRp7+vSpAUd2dra5bmtrM6pvdHTUu3fvnrGdNHhEbt265XV1dXn79+9/y8V0XltbGwkDkKpsqqqqqhG2AmgBrFn5+Qo0Uyw21gRm0kwCLwqAAgC2b99u2AQCVYWyACtUGkRUoC2bNm0yYBIBe/l5ncKaWmg1hrj/47TCRu32ebUam4LyAweEymK1QG+PUdk3PmXCrGZicrej9e99CD0znvs4NsPtRh2fmMMNLmBBYHgDmTC4ly1bNslWAbhu375tyh06dGgCw2kB+yDEAIEh39HR4RsjE+/NkgJKf0DwlNJ3jkndi2Yo/QXOZ5RxWElpOaUqSk99QLWPErzUr2OcD+j7T+GPUKqZocldyu2mWWbMv1mt4T3q2OObSVnNz46MD49xMfelE85ArOGGiA2FSR0cHDRggVe3fv16Lzc317cXCBeUlZUZu8sVBLUF7YrnaDMWygsjWpLJx1eOvCS8LKX+GFeYdPS1T356wLOC7NcOK/g4HSbaSmku2zZtlo0D6l8U5R2mIxmO91/F79iP8aY+lmhAR2Us09PXr439hAles2ZNoK2Tl5dnwgorV66clHfz5k1v165dk8CFuJYfWwm4/Twgn4FMZqO0U00OPg/lsgck0k3Ae6JACq8HamsAJgPl9fOAzef8VLpey1HtVGXUQoZ45b7QawzgojqpauJNZIYnpEXUFpWZw8ZxMqsdEdgUixlUqPMt1RlygE8mv4jO5/M7tFHZXs4HI+uJG4YFQvldnF+sAPRGjd8SSjl8fzGVG6I6Dxk76GcKl8uOlbESh4eHDVOBpWCcQ/1F88qQv2fPnknlnjx5YsIJOBYXF/9/NqhtANcV8ZbYlc8zswJYJJ8H5Eem7A3WxEYmjdVcigycyltBeV/RsVANbDKDrJnL5jom+Dsa+A5e0WDOn7g/Kx3PR/06qpPDjBS28gG6e6pfDT6gimeV5LF6iqh4focxHo84Ne8hzv8ng2sJA6tfjUedROkZbPkqRhbie8JauTEBi7y6ePncAQaaO3fulKLaWgDQgYEBoxrh+WlgiW3l9znFNtp5IBN5kv0YS6vJYgYVVlU120mfUPot58sqbeaBxJh8zqs7TIN+i573R2aMfykGQD2w21dcfx2DMI3yXjOosLqH6Fr6U8VqDHGhzVw2ns8T2BaTWNMefrc09a7PA1R1iNuuYibZwfXmUB8Qq/qrZa9tZjs1i65fcRswHf5O1zuYgZ7yeG1jdq3SbM9gauFF8yimOBYABaN66dKlUwKVS0TVQT2+evVqgjcIYAWxXxQ12O/jcWUq0MlqvwtQsIeo8zOUWoQHOcCTNMbqQsqPcTARE5PCk/+a64woB6HPYf/JMzq57KgqW8AAaKa8Jn4fbfOlKe92wGeoMq13GFQqdwD95aDmZ5Q+Z9AJwwwoYL5Wn3vqHH2JCOU9pkMjg7jWMgH8GYtspVx8cIwW6QYDrV271rccgATGAkhgm8GTfPDggbd161YTWIUqdLGVnPt4lQKsQQebJTCVj7CNlO4YmAwFlCUaBAo0XVR/nK6T+RqTNh5g7GuwLrTyMxlMfY760r/eKI4J+hJSffA1rlm9o989DK5SLtOmnpOm+pCr6zNoojpJVK6HnxFbuKGiomI5u5hRQVVdXW0+0UjowGa97u6Jn5ewewExMIAN3mA0lepjX8nLgsYXMy2P8SAmWJM6zGoJhnkrr7BEBRwbJLYHJJ/zQ5gwZhx7IkMMkEFWfZF8BcxOFU9zAes33L9+yzERMKLP66nMM8V4HjNFpgPI0r9kft4AmwLjzE4wD0Z58S0OMCvk/RMDgB1zHGtZtIoIgopKe/TokRNYnZ2dzroAIsAFo93Vrq0OAxgLdPZ7TZBsLOtBAl2vZbvqE1VWT4JWM/YkDfJk4P4+GtxqR5l07otrYjMdk6Ydj24ebxjwO23CZ6A+YGegiJOn+vY3xcC9jncY5TwA7E92+zGEW/r5+CnbUjdijbXYbJXs8E6ck11aWmp2G+B7oC1Qc2AsP+AAVHqT3RR3Vd5nQ9dO93hw6ik95hX9H7jonF/PIQBjj7ARC9f5rhUTQrlWrt/L9e/y/XbOq1ce0ihfy0A85useZop6K2gJ8P8A0FACo/7De7tV5Qd4sgIa8QDp2IBoDTNOvU7Mlo1sQ44rwNSzwS3t19l14WWq/tb4qLW76rn3Yp2gSd8KCVjwWMqC1JP6nmei8Ddu3DBRdgmI4jshDHbkByVpQ5+rY9P3339fk5OT46m9RVMNLGLQf2cxdCGff62M3I8m1EcY73nqVg4nhBYe/FK+EwJH+E4cpAozgxoQlhEQwGNctWqVUW2rV6+OGOx++96jbcm193bJBrx3lBQV3NRu8o+xgCrWvervsoddWD8pKamQ40Py9QEM00htNrzrnvxY3yeW/kUTIRlbO7kYa4OlxyMsZG87loQ8Yhdv9+7dJkIPYGk28mOrFStWGOMeux+wdx0foq9fvx7Z3QDGgmeK9D63y8j74D2QpI+unZHTAZdsgJzKxE33vfQzowEuluC3q57eyx/EWBn2DQQ3MdDa9bd/xrV8+fLIpx8beH4/HigoKHgbKi4u9s6ePeuVl5cbYOkOIxwB0M30Bj+0DRDhy4LE7KSfszJ9SbAMd0+5vxEjG6EB+SWMRq3eepycnGwMdq0mfX7aNWHbsrAhovvXrl2bpCKRB2DDSZjuKpd2AVa0qX9EMSszK3GOmEWCjopLgBMJE4GEyZajVh8OA9zJXBpUOL98+bJ37Ngxr6WlRbPbuIABrILPS+8KAtRD/3t6ekzsTBbLLKg+HLC0GrxLkzCmAaWTDSptm0QDGf92cMKvdy5duuQdPXpU6+sB7TAAWFCzOI8VTCiLOoinIeaGNqbyO8JZmXlg3a2srPyJANQqQHIBTIPLBlYQc8GTxM5SAdHevXvNr3NgSylGe2Z7owAG2AZHcSbshHJgOJQDoCSeNgumj2hjMbAMqHBBE/IAv0imiU6AjSUGvN9Pv1z2lAtc2AiILTg4r6mpMfGP48ePew0NDdJGU21t7SuXaysAt3e26l85z7LSx5cJ4YbTp0/PJVBN2G6wb9++PJrAzdif5fpBhTaK/f70I1qygPeMrqvq6upi0nmuPyWZlY8XJPWNY7mEVJX5GyNK8yiFg34J7fM3RYEgIyCN09H8jVF1dfXs3xj9CoD1PwEGAKorJqR4atjIAAAAAElFTkSuQmCC")=>{let s,e=0,h=0;const r=[],n=t=>{const i=new Ot.Image;i.src=t,i.onload=()=>{r.forEach((t=>{var s;const r=new Cn({source:i,fitMode:_n.Stretch});null===(s=t.Wd)||void 0===s||s.De(r),e=i.width,h=i.height,l(t)}))}};n(i);const o=t.Zn((t=>n(t)));let a;if(new Ot.Image instanceof Ot.HTMLImageElement){const t=new Ot.Image;t.src=i,a=new Cn({source:t,fitMode:_n.Stretch})}else if(Ot.lcjs_setup){const t=new Ot.Image;t.src=i;const s=Ot.lcjs_setup(t.naturalWidth,t.naturalHeight);s.getContext("2d").drawImage(t,0,0),a=new Cn({source:s,fitMode:_n.Stretch})}else a=new U({color:b("#f00")});const l=t=>{if(t.Wd){const i=t.ft.gi({x:t.ft.x.getInnerEnd(),y:t.ft.y.getInnerStart()},{x:-(3+e),y:3}),s=t.ft.gi({x:t.ft.x.getInnerEnd(),y:t.ft.y.getInnerStart()},{x:-3,y:3+h}),r={x:s.x-i.x,y:s.y-i.y};t.Wd.Re(i).tt(r)}s&&s.xs()};return s=t.GF("logo",Number.MAX_SAFE_INTEGER),i=>{const e={ft:i};return(i=>{i.Wd&&i.Wd.dispose(),s&&(i.Wd=s.Be(i.ft).De(a).setMouseInteractions(!0).Pe(at).setMouseEnterEventHandler((()=>{t.Jr(Xe.Point)})).setMouseLeaveEventHandler((()=>{t.Jr(Xe.None)})).setMouseClickEventHandler(RA).setTouchEndEventHandler(RA),l(i))})(e),r.push(e),{Es:()=>l(e),U:()=>(i=>{i.Wd&&(i.Wd.dispose(),i.Wd=void 0);const s=r.indexOf(i);s>=0&&r.splice(s,1),r.length<=0&&t.Qn(o)})(e)}}},RA=()=>Ot.open("https://lightningchart.com/lightningchart-js/");class EA{constructor(){this.PR=this.II.bind(this),Ot.addEventListener("scroll",this.PR,{passive:!0})}U(){this.PR&&Ot.removeEventListener("scroll",this.PR),this.PR=void 0}}class zA{constructor(t,i){this.wa=t,this.j=i,this.DR=!0,this.BR=null,this.LR=null}}class VA{constructor(t){this.RR=!1,this.ER=1,this.zR=t,this.VR={wa:n(0,0),j:n(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),DR:!0,BR:null,LR:null},this.OR=n(64,64),this.NR=new Uint8ClampedArray(this.OR.x*this.OR.y*this.ER)}GR(t,i){if(!t.DR)return null;if(t.BR&&t.LR){const s=this.GR(t.BR,i);return null!==s?s:this.GR(t.LR,i)}const s=o(t.j.x,t.j.y);if(t.wa.x+t.j.x>=Number.MAX_SAFE_INTEGER&&(s.x=this.OR.x-t.wa.x-1),t.wa.y+t.j.y>=Number.MAX_SAFE_INTEGER&&(s.y=this.OR.y-t.wa.y-1),t.j.x===i.x&&t.j.y===i.y)return t.DR=!1,t;if(s.x<i.x||s.y<i.y)return null;let e,h;const r=s.x-i.x,a=s.y-i.y;let l=r<a;return 0===r&&0===a&&(l=!(t.j.x>t.j.y)),l?(e=new zA(ws(t.wa,{x:0,y:1}),n(t.j.x,i.y)),h=new zA(ws(t.wa,{x:0,y:i.y+1}),n(t.j.x,t.j.y-1-i.y))):(e=new zA(ws(t.wa,{x:1,y:0}),n(i.x,t.j.y)),h=new zA(ws(t.wa,{x:i.x+1,y:0}),n(t.j.x-1-i.x,t.j.y))),t.BR=e,t.LR=h,this.GR(t.BR,i)}WR(t,i){const s={UR:!1,wa:null};let e=this.GR(this.VR,i);if(null===e)for(;null===e&&this.OR.x<this.zR&&this.OR.y<this.zR;){if(!this.YR(n(2*this.OR.x,2*this.OR.y)))return this.RR=!0,null;s.UR=!0,e=this.GR(this.VR,i)}if(null===e)return this.RR=!0,null;for(let s=0;s<i.y;s+=1)for(let h=0;h<i.x;h+=1){const r=e.wa.y+s,n=e.wa.x+h;this.NR[r*this.ER*this.OR.x+n*this.ER+0]=t[s*this.ER*i.x+h*this.ER+0]}return s.wa=e.wa,s}YR(t){if(t.x>this.zR||t.y>this.zR)return!1;const i=new Uint8ClampedArray(t.x*t.y*this.ER);for(let s=0;s<this.OR.y;s+=1)for(let e=0;e<this.OR.x;e+=1)i[s*t.x*this.ER+e*this.ER+0]=this.NR[s*this.OR.x*this.ER+e*this.ER+0];return this.OR=t,this.NR=i,!0}}class OA{constructor(t){this.HR=new Map,this.zR=t,this.HR.set(this.HR.size,new VA(this.zR))}$R(t){return this.HR.get(t)}WR(t,i){let s=-1;const e=Array.from(this.HR.values());for(let t=0;t<e.length;t+=1){const i=e[t];if(!i)break;if(!i.RR){s=t;break}}-1===s&&(s=this.HR.size,this.HR.set(this.HR.size,new VA(this.zR)));const h=this.HR.get(s);if(!h)return null;let r=h.WR(t,i);if(!r&&h.RR){const e=this.HR.size,h=new VA(this.zR);this.HR.set(e,h),s=e,r=h.WR(t,i)}return r?{XR:s,...r}:null}}var NA;!function(t){t[t.Fail=0]="Fail",t[t.Success=1]="Success",t[t.Resize=2]="Resize"}(NA||(NA={}));const GA=Ti("font-texture");class WA{constructor(t){this.jR=new Map,this.ZR=new Map,this.jo=GA(),this.QR=t,this.JR=new OA(this.QR.KR||4096)}qR(){return this.ZR.forEach((t=>{this.QR.tE(t)})),this.ZR.clear(),this}iE(t,i){const s=this.jR.get(i);if(s)return s.get(t)}sE(t,i,s){let e=this.jR.get(i);if(e||(e=new Map,this.jR.set(i,e)),e.has(t.glyph))return NA.Success;const h=this.JR.WR(s,t.size);if(!h||!h.wa)return NA.Fail;h.UR&&this.eE();const r=this.JR.$R(h.XR);if(!r)return NA.Fail;let n=this.ZR.get(h.XR);if(!n){const t=this.QR.gl.createTexture();if(!t)throw new Bt("Failed to create texture for font!");n=t,this.ZR.set(h.XR,t)}const o=h.wa,a=r.OR.x,l=r.OR.y,u=-t.offsetX,c=t.baseline-t.size.y,d=-t.offsetX+t.size.x,f=t.baseline,A=o.x/a,g=(o.y+t.size.y)/l,y=(o.x+t.size.x)/a,m=o.y/l,p=[A,g,y,g,A,m,A,m,y,g,y,m],v=[u,c,d,c,u,f,u,f,d,c,d,f],S={origin:o,size:t.size,advanceX:t.advance,baseline:t.baseline,vertices:v,texCoords:p,packerId:h.XR,texture:n};e.set(t.glyph,S);const b=this.QR.gl;return b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),b.bindTexture(b.TEXTURE_2D,n),b.texImage2D(b.TEXTURE_2D,0,b.LUMINANCE,r.OR.x,r.OR.y,0,b.LUMINANCE,b.UNSIGNED_BYTE,this.QR.hE?r.NR:new Uint8Array(r.NR)),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.bindTexture(b.TEXTURE_2D,null),h.UR?NA.Resize:NA.Success}eE(){this.jR.forEach((t=>{t.forEach(((i,s)=>{const e=this.JR.$R(i.packerId);if(!e)return;const h=i.origin,r=e.OR.x,n=e.OR.y,o=h.x/r,a=(h.y+i.size.y)/n,l=(h.x+i.size.x)/r,u=h.y/n,c=[o,a,l,a,o,u,o,u,l,a,l,u];i.texCoords=c,t.set(s,i)}))}))}}const UA=t=>{if(t instanceof Ks||t instanceof fd)return t.Mi()?"linear-highPrecision":"linear";if(t instanceof qs){const i={};return t.x instanceof Ns&&(i.x={base:t.x.Ai()}),t.y instanceof Ns&&(i.y={base:t.y.Ai()}),["logarithmic",i]}return"linear"},YA=t=>{const i=Object.keys(t),s={};return i.forEach((i=>{const e=t[i];let h=!1;s[i]=t=>{if(!t)return h;const i=e();return h=i,i}})),s},HA=(t,i,s)=>"value"===t.getLookUpProperty()?s:"x"===t.getLookUpProperty()?{min:i.yt(),max:i.vt()}:"y"===t.getLookUpProperty()?{min:i.St(),max:i.bt()}:"z"===t.getLookUpProperty()?{min:i.Sv(),max:i.vv()}:void 0,$A=t=>!(!t||"value"!==t.lookUpProperty||!t.lut.percentageValues),XA=t=>(i,s)=>s%2?i:i+t;class jA{constructor(t){this.rE=new Map,this.nE=Ti("font"),this.oE=new Map,this.aE=new Set,this.QR=t}qR(t=!1){return(t||0===this.aE.size)&&(this.rE.forEach(((t,i)=>{t.qR(),this.rE.delete(i)})),this.aE.clear()),this}lE(t){this.aE.add(t)}uE(t){this.aE.delete(t)}cE(t,i,s,e){const h=Ot.devicePixelRatio,r=`${e?"dark":"light"} - ${Wh(i,h).id}`,n=this.oE.get(r),o=this.rE.get(n);let a=0,l=0,u=0;const c=t.split(""),d=i.size,f=.45*i.size*h,A=Math.round(1*i.size);let g=!1;for(let t=0;t<c.length;t+=1){const i=c[t],s=o&&o.iE(i,d);if(s)""!==i.trim()&&(l=Math.max(l,s.baseline),a=Math.min(a,s.baseline-(s.size.y-1))),u+=s.advanceX;else{if(""!==i.trim()){const t=0;l=Math.max(l,t),a=Math.min(a,t-(A-1))}u+=f,g=!0}}const y=((t,i,s)=>{if(0===s||360===s||180===s||s%180==0)return{x:t,y:i};if(90===s||-90===s||(s+90)%180==0)return{x:i,y:t};const e=s*Math.PI/180,h=Math.cos(e),r=Math.sin(e);return{x:Math.abs(t*h)+Math.abs(i*r),y:Math.abs(t*r)+Math.abs(i*h)}})(u/h,(l-a+1)/h,s);return{x:y.x,y:y.y,isEstimate:g}}dE(t,i,s){const e=`${s?"dark":"light"} - ${i.id}`;let h=this.oE.get(e);h||(h=this.nE(),this.rE.set(h,new WA(this.QR)),this.oE.set(e,h));const r=this.rE.get(h);if(!r)throw new Bt("Failed to get font texture!");let o=0,a=0,l=0;const u=t.split(""),d=new Map;let f=0;const A=i.properties.size;for(let t=0;t<u.length;t+=1){const e=u[t],h=Math.ceil(f);let n=r.iE(e,A);if(!n){const h=this.QR.fE(e,i.properties,i.dpr,s);if(!h)continue;const l=r.sE(h[1],A,h[0]);if(l===NA.Resize){this.aE.forEach((t=>{t.pa.o=!0})),t=-1,f=0,a=0,o=0,d.clear(),this.QR.us.xs(!0);continue}if(l===NA.Fail)throw new Bt("Failed to create glyph");if(n=r.iE(e,A),!n)throw new Bt("Failed to get glyph after creation")}if(""!==e.trim()){let t=d.get(n.texture);t||(t={vertices:[],texCoords:[]},d.set(n.texture,t)),t.vertices.push(...n.vertices.map(XA(h))),t.texCoords.push(...n.texCoords),a=Math.max(a,n.baseline),o=Math.min(o,n.baseline-(n.size.y-1))}f+=n.advanceX}l=f;const g=c(n(0,o),n(l,a)),y=[];return d.forEach(((t,i)=>{y.push({texCoords:new Float32Array(t.texCoords),vertices:new Float32Array(t.vertices),texture:i})})),[y,g]}}class ZA{constructor(t){this.modifiers=[],this.modifiers=t}build(t){const i=this.modifiers.filter((t=>QA(t)));for(const s of i)t=s(t);return`${Ri(this.modifiers.filter((t=>JA(t)))).map((t=>t.AE)).join("\n")}\n${t}`}}const QA=t=>"function"==typeof t,JA=t=>t&&"object"==typeof t&&"gE"in t,KA=(...t)=>i=>{t=t.reverse();for(let s of t)"string"==typeof s&&(s=s.includes("{")||s.endsWith(";")?s:`${s};`,s=s.trim(),i=i.replace("void main(void)",`${s}\nvoid main(void)`));return i},qA=t=>i=>(t=t.endsWith(";")?t:`${t};`,i.replace(t,"")),tg=(...t)=>i=>{const s=t.filter((t=>t));for(let t=0;t<s.length;t+=1)s[t]=s[t].endsWith(";")?s[t]:`${s[t]};`,s[t]=s[t].startsWith("\t")?s[t]:`\t${s[t]}`;const e=s.join("\n");return i.replace("void main(void) {\n",`void main(void) {\n${e}\n`)},ig=(t,...i)=>s=>{for(let t=0;t<i.length;t+=1)i[t]=i[t].endsWith(";")?i[t]:`${i[t]};`,i[t]=i[t].startsWith("\t")?i[t]:`\t${i[t]}`;const e=i.join("\n"),h=new RegExp(`(.*${t}.*)`),r=s.replace(h,`${e}\n$1`);return i.forEach((i=>{if(!r.includes(i))throw new Error(`ShaderBefore misusage (not found: \n${i}\nmatch: \n${t}\nresult: \n${r}\n)`)})),r},sg=(t,...i)=>s=>{const e=i.filter((t=>"string"==typeof t));for(let t=0;t<e.length;t+=1)e[t]=e[t].endsWith(";")?e[t]:`${e[t]};`,e[t]=e[t].startsWith("\t")?e[t]:`\t${e[t]}`;const h=e.join("\n"),r=s.lastIndexOf(t),n=s.substring(r),o=n.indexOf("\n"),a=n.substring(o),l=`${s.substring(0,r+o)}\n${h}${a}`;return e.forEach((i=>{if(!l.includes(i))throw new Error(`ShaderAfter misusage (not found: "${i}", match: "${t}", result: "${l}")`)})),l},eg=(...t)=>i=>{for(let s of t)if("string"==typeof s){s=s.endsWith(";")?s:`${s};`,s=s.trim(),s=s.startsWith("\t")?s:`\t${s}`;const t=i.lastIndexOf("}");i=`${i.substring(0,t-1)}\n${s}\n}`}return i},hg=(t,i)=>s=>{let e,h;if(t.includes("uniform")||t.includes("attribute")){const i=t.endsWith(";")?t:`${t};`;s=KA(i)(s),e=t.split(" ")[2].replace(";","")}else e=t;if(i.includes(" ")){const t=i.endsWith(";")?i:`${i};`;s=KA(t)(s),h=i.split(" ")[2].replace(";","")}else h=i;return eg(`\t${h} = ${e};`)(s)},rg=(...t)=>i=>{t=t.reverse();for(const s of t)i=s+i;return i},ng={roundUnsigned:{gE:"roundUnsigned",AE:"float roundUnsigned(float number) {\n  return floor(number + 0.5);\n}"},linearStep:{gE:"linearStep",AE:"float linearStep(float step0, float step1, float step) {\n  return clamp((step - step0) / (step1 - step0), 0.0, 1.0);\n}"},decodeUbyteRGBAEncodedFloat:{gE:"decodeUbyteRGBAEncodedFloat",AE:"\n      // Denormalize 8-bit color channels to integers in the range 0 to 255.\n      ivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {\n        ivec4 bytes = ivec4(inputFloats * 255.0);\n        return (\n          littleEndian\n          ? bytes.abgr\n          : bytes\n        );\n      }\n      \n      // Break the four bytes down into an array of 32 bits.\n      void bytesToBits(const in ivec4 bytes, out bool bits[32]) {\n        for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {\n          float acc = float(bytes[channelIndex]);\n          for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {\n            float powerOfTwo = exp2(float(indexInByte));\n            bool bit = acc >= powerOfTwo;\n            bits[channelIndex * 8 + (7 - indexInByte)] = bit;\n            acc = mod(acc, powerOfTwo);\n          }\n        }\n      }\n      \n      // Compute the exponent of the 32-bit float.\n      float getExponent(bool bits[32]) {\n        const int startIndex = 1;\n        const int bitStringLength = 8;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        float acc = 0.0;\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Compute the mantissa of the 32-bit float.\n      float getMantissa(bool bits[32], bool subnormal) {\n        const int startIndex = 9;\n        const int bitStringLength = 23;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        // Leading/implicit/hidden bit convention:\n        // If the number is not subnormal (with exponent 0), we add a leading 1 digit.\n        float acc = float(!subnormal) * exp2(float(bitStringLength));\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Parse the float from its 32 bits.\n      float bitsToFloat(bool bits[32]) {\n        float signBit = float(bits[0]) * -2.0 + 1.0;\n        float exponent = getExponent(bits);\n        bool subnormal = abs(exponent - 0.0) < 0.01;\n        float mantissa = getMantissa(bits, subnormal);\n        float exponentBias = 127.0;\n        return signBit * mantissa * exp2(exponent - exponentBias - 23.0);\n      }\n      \n      // Decode a 32-bit float from the RGBA color channels of a texel.\n      float decodeUbyteRGBAEncodedFloat(vec4 rgba, bool littleEndian) {\n        ivec4 rgbaBytes = floatsToBytes(rgba, littleEndian);\n        bool bits[32];\n        bytesToBits(rgbaBytes, bits);\n        return bitsToFloat(bits);\n      }\n      "},texelFetchWithFallback:{webgl2:{gE:"texelFetchWithFallback",AE:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{gE:"texelFetchWithFallback",AE:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},texelFetchUnsignedWithFallback:{webgl2:{gE:"texelFetchUnsignedWithFallback",AE:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{gE:"texelFetchUnsignedWithFallback",AE:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},modulus:{gE:"modulus",AE:"int modulus(int a, int b) {\n  return (a)-((a)/(b))*(b);\n}"},computeScreenSpaceWireframe:{gE:"computeScreenSpaceWireframe",AE:"#extension GL_OES_standard_derivatives : enable\nfloat computeScreenSpaceWireframe (vec3 barycentric, float lineWidth) {\n  vec3 dist = fwidth(barycentric);\n  vec3 smoothed = smoothstep(dist * ((lineWidth * 0.5) - 0.5), dist * ((lineWidth * 0.5) + 0.5), barycentric);\n  return 1.0 - min(min(smoothed.x, smoothed.y), smoothed.z);\n}"}},og=(t,i)=>{const s=i.steps,e=s.length-1,h=[KA("uniform vec4 uFallbackColor")],r=[],n=[];for(let t=0;t<i.steps.length;t+=1)r.push(`uniform float uLUTValue${t}`),n.push(`uniform vec4 uLUTColor${t}`);return h.push(KA(...r,...n),i.percentageValues&&KA("uniform float uMinValue","uniform float uMaxValue")),i.interpolate?h.push(sg("colorFragment =","vec4 colorLookup = uLUTColor0","float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),"if (value <= -340282346638528859811704183484516925440.0) {\n                    colorLookup = uFallbackColor;\n                }",`if (value >= uLUTValue${e}) {\n                    colorLookup = uLUTColor${e};\n                }`,...s.slice(0,-1).map(((t,i)=>`if (value >= uLUTValue${i} && value <= uLUTValue${i+1}) {\ncolorLookup = uLUTColor${i} + vec4(uLUTColor${i+1}.r -  uLUTColor${i}.r, uLUTColor${i+1}.g -  uLUTColor${i}.g, uLUTColor${i+1}.b -  uLUTColor${i}.b, uLUTColor${i+1}.a -  uLUTColor${i}.a) * (value - uLUTValue${i})/(uLUTValue${i+1} - uLUTValue${i});} `)),"colorFragment = colorLookup")):h.push(sg("colorFragment =","vec4 colorLookup = vec4(uLUTValue0)","float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),`if (${t} <= -340282346638528859811704183484516925440.0) {\n                    colorLookup = uFallbackColor;\n                } else if (${t} < uLUTValue0) { colorLookup = uLUTColor0;} ${s.slice().reverse().map((t=>{const i=s.indexOf(t);return`else if (value >= uLUTValue${i}) { colorLookup = uLUTColor${i};} `})).join("")}`,"colorFragment = colorLookup")),h},ag=[KA("uniform sampler2D uMaskTexture"),KA("varying vec2 vMaskTextureCoord"),sg("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.r")],lg=[KA("uniform sampler2D uMaskTexture"),KA("varying vec2 vMaskTextureCoord"),sg("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.a")],ug=[KA("varying vec3 vPosWorld;","varying vec3 vNormal;","uniform vec3 uCameraLoc;","uniform vec3 uLightLoc;","uniform vec4 uLightColor;","uniform vec4 uAmbientColor;","uniform float uShininess;","uniform float uAmbientReflection;","uniform float uDiffuseReflection;","uniform float uSpecularReflection;"),sg("colorFragment =","float ambientReflection = uAmbientReflection","float diffuseReflection = uDiffuseReflection","float specularReflection = uSpecularReflection","vec3 ambientColor = uAmbientColor.rgb","vec3 diffuseColor = colorFragment.rgb","vec3 specularColor = uLightColor.rgb","vec3 vNormalNormalized = normalize(vNormal)","vNormalNormalized = (float(gl_FrontFacing) * 2.0 - 1.0) * vNormalNormalized","vec3 lightDir = normalize( uLightLoc - vPosWorld )","float lambertian = abs(dot(vNormalNormalized, lightDir))","float specular = 0.0","vec3 R =  reflect(-lightDir, vNormalNormalized)","vec3 V = normalize(uCameraLoc - vPosWorld)","float specAngle = max(dot(R,V),0.0)","specular = pow(specAngle, uShininess)","colorFragment = vec4(ambientReflection * ambientColor + diffuseReflection * lambertian * diffuseColor + specularReflection * specular * specularColor, colorFragment.a)")];class cg extends Error{constructor(t,i,s){super(`Dynamic shader generation error\n(id: ${i})\n ${s?`when applying feature: ${s.idVertex?`vert: ${s.idVertex}`:""} ${s.idFragment?`frag: ${s.idFragment}`:""}`:""} | ${t}`)}}const dg=(...t)=>{let i="";for(const s of t){if("object"!=typeof s){i+=`${String(s)},`;continue}const t=[{prefix:"",obj:s}];for(;t.length>0;){const{prefix:s,obj:e}=t.shift();i+=`${s}:`;const h=Object.keys(e).sort();for(const s of h){const h=e[s];"object"==typeof h&&h.__proto__===Object.prototype||Array.isArray(h)?t.push({prefix:s,obj:h}):i+=`${s}=${String(h)},`}}}return i},fg=t=>void 0!==t.find((t=>{var i;return null===(i=t.yE)||void 0===i?void 0:i.mE})),Ag=t=>void 0!==t.find((t=>{var i;return null===(i=t.yE)||void 0===i?void 0:i.pE})),gg=(t,i,...s)=>{const e=[],h=i?"vec3":"vec2",{axisWorldTranslation:r,scaling:n,translation:o,offset:a,flipXY:l,flipXZ:u,splitPosAttribute:c,normalSource:d}=t,f=[];if("attribute"===d&&e.push(KA("attribute vec3 aNormal"),tg("vec3 normal = aNormal")),"linear-highPrecision"!==r?s.forEach((t=>{void 0!==t.attributeNameAxisCoord&&void 0!==t.variableNameAxisCoord&&(!0!==c?e.push(tg(`${h} ${t.variableNameAxisCoord} = ${t.attributeNameAxisCoord}`)):e.push(tg(`${h} ${t.variableNameAxisCoord} = ${i?`vec3(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y, ${t.attributeNameAxisCoord}Z)`:`vec2(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y)`}`)))})):s.forEach((i=>{!0!==t.splitPosAttribute?e.push(tg(`${h} ${i.variableNameAxisCoord}_highpart = ${i.attributeNameAxisCoord}_highpart`),tg(`${h} ${i.variableNameAxisCoord}_lowpart = ${i.attributeNameAxisCoord}_lowpart`)):e.push(tg(`${h} ${i.variableNameAxisCoord}_highpart = vec2(${i.attributeNameAxisCoord}_highpartX, ${i.attributeNameAxisCoord}_highpartY)`),tg(`${h} ${i.variableNameAxisCoord}_lowpart = vec2(${i.attributeNameAxisCoord}_lowpartX, ${i.attributeNameAxisCoord}_lowpartY)`))})),a&&a.rotation){const t=a.rotation.dataType,i="uniform"===t?"u":"a";if("attribute-deg"===t){e.push(KA("attribute float aRotDeg"),KA("uniform float uBaseRotDeg"));const t="cRot",i="aInstanceGeo";e.push(tg(`vec2 ${t} = vec2(sin((aRotDeg + uBaseRotDeg) * 0.01745329252), cos((aRotDeg + uBaseRotDeg) * 0.01745329252))`,`vec2 rotatedGeo = vec2(${i}.x * ${t}.y + ${i}.y * ${t}.x, ${i}.y * ${t}.y - ${i}.x * ${t}.x)`))}else{const s=`${i}Rot`;e.push(KA(`${t} vec2 ${s}`));const h="aInstanceGeo";e.push(tg(`vec2 rotatedGeo = vec2(${h}.x * ${s}.y + ${h}.y * ${s}.x, ${h}.y * ${s}.y - ${h}.x * ${s}.x)`))}}if(a&&e.push(KA(`attribute ${h} aInstanceGeo`)),!0===l){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXY");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${i?`vec3(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x, ${t.variableNameAxisCoord}.z)`:`vec2(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`}`)}))}if(!0===u){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXZ");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = vec3(${t.variableNameAxisCoord}.z, ${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`)}))}if(n){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + scaling");const t=("attribute"===n.dataType?"a":"u")+"Scaling",h=i?"vec3":"vec2";e.push(KA(`${n.dataType} ${h} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} * ${t}`)}))}if(o&&"axis"===o.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + translation (axis)");const t=("attribute"===o.dataType?"a":"u")+"TranslationAxis",h=i?"vec3":"vec2";e.push(KA(`${o.dataType} ${h} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} + ${t}`)}))}if(a&&"axis"===a.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + offset (axis)");const t=("attribute"===a.dataType?"a":"u")+"OffsetAxis",n=!0===a.symmetric?"float":h;e.push(KA(`${a.dataType} ${n} ${t}`));const o=a.halved?" * 0.5":"",l=a.rotation?"rotatedGeo":"aInstanceGeo",u="offsetGeometry";f.push(`${h} ${u} = ${t} * ${l}${o} * sign(uScale)`),i&&"gpu-calculate"===d&&f.push(`${h} normal = ${l}`),s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${t.variableNameAxisCoord} + ${u}`)}))}if(void 0===r||"linear"===r)e.push(KA(`uniform ${h} uDisp`,`uniform ${h} uScale`)),s.forEach((t=>{f.push(`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord} - uDisp) / uScale`)}));else if("linear-highPrecision"===r)e.push(KA(`uniform ${h} uDisp`,`uniform ${h} uScale`,`uniform ${h} uScaleStart_highpart`,`uniform ${h} uScaleStart_lowpart`)),s.forEach((t=>{f.push(`${h} ${t.variableNameAxisCoord}_hprecision = (${t.variableNameAxisCoord}_highpart - uScaleStart_highpart) + (${t.variableNameAxisCoord}_lowpart - uScaleStart_lowpart)`,`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord}_hprecision - uDisp) / uScale`,`${h} ${t.variableNameAxisCoord} = ${t.variableNameAxisCoord}_highpart + ${t.variableNameAxisCoord}_lowpart`)}));else if("matrix"===r)e.push(KA("uniform mat3 uMatrix")),s.forEach((t=>{f.push(`vec2 ${t.variableNameWorldCoord} = (uMatrix * vec3(${t.variableNameAxisCoord}, 1.0)).xy`)}));else if("matrix4"===r)e.push(KA("uniform mat4 uMatrix")),s.forEach((t=>{f.push(`vec4 ${t.variableNameWorldCoord} = uMatrix * ${t.attributeNameAxisCoord}`)}));else if("logarithmic"===r[0]){e.push(KA(`uniform ${h} uScaleStart`,`uniform ${h} uScaleStartLog`,`uniform ${h} uScaleInterval`,`uniform ${h} uScaleIntervalLog`,`uniform ${h} uViewportStart`,`uniform ${h} uViewportSize`));const t=i?["x","y","z"]:["x","y"],n=[];t.forEach((t=>{const i=r[1][t];if(void 0!==i){const t=i.base;if("e"===t)return;const s=`float cLog${t} = 1.0 / log(${Ws(t).toFixed(1)})`;n.includes(s)||n.push(s)}})),e.push(KA(...n)),s.forEach(((i,s)=>{const e=`${s}`,n=[];t.forEach((t=>{const s=t.toUpperCase(),h=r[1][t];if(void 0===h)f.push(`float posPercent${s}${e} = (${i.variableNameAxisCoord}.${t} - uScaleStart.${t}) / uScaleInterval.${t}`);else{const r=h.base,n="e"===r;f.push(`float posLog${s}${e} = log(${i.variableNameAxisCoord}.${t})${n?"":` * cLog${r}`}`,`float posPercent${s}${e} = (posLog${s}${e} - uScaleStartLog.${t}) / uScaleIntervalLog.${t}`)}n.push(`posPercent${s}${e}`)})),f.push(`${h} ${i.variableNameWorldCoord} = uViewportStart + ${h}(${n.join(", ")}) * uViewportSize`)}))}if(a&&"px"===a.sizeUnit){e.push(KA("uniform vec2 uRatioPxClip"));let t="vec2(0.0, 0.0)";a.useAlignment&&(e.push(KA("uniform vec2 uOffsetAlignment")),t="uOffsetAlignment");const i=("attribute"===a.dataType?"a":"u")+"OffsetPixels",r=!0===a.symmetric?"float":h;e.push(KA(`${a.dataType} ${r} ${i}`));const n=a.halved?" * 0.5":"",o=`(${a.rotation?"rotatedGeo":"aInstanceGeo"} + ${t}) * ${i}${n} * uRatioPxClip`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${o}`)}))}if(a&&"scale"===a.sizeUnit){e.push(KA("uniform vec2 uRatioPxClip")),e.push(KA("uniform vec2 uSizePixels"));let t="vec2(0.0, 0.0)";a.useAlignment&&(e.push(KA("uniform vec2 uOffsetAlignment")),t="uOffsetAlignment");const i=("uniform"===a.dataType?"u":"a")+"OffsetScale";e.push(KA(`${a.dataType} float ${i}`));const h=`(${a.rotation?"rotatedGeo":"aInstanceGeo"} + ${t}) * ${i} * uSizePixels * uRatioPxClip`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${h}`)}))}if(a&&"wu"===a.sizeUnit){const t=("attribute"===a.dataType?"a":"u")+"OffsetWU",r=!0===a.symmetric?"float":h;e.push(KA(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?"rotatedGeo":"aInstanceGeo",l="offsetGeometry";f.push(`${h} ${l} = ${t} * ${o}${n}`),i&&"gpu-calculate"===d&&f.push(`${h} normal = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l}`)}))}if(a&&"nwu"===a.sizeUnit){e.push(KA("uniform float uRatioNwuWu"));const t=("attribute"===a.dataType?"a":"u")+"OffsetNWU",r=!0===a.symmetric?"float":h;e.push(KA(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?"rotatedGeo":"aInstanceGeo",l="offsetGeometry";f.push(`${h} ${l} = ${t} * ${o}${n}`),i&&"gpu-calculate"===d&&f.push(`${h} normal = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l} * uRatioNwuWu`)}))}return t.snapToNearestPixel&&(e.push(KA("uniform vec2 uViewportSizePx")),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = 2.0 * floor(((${t.variableNameWorldCoord} + 1.0) * 0.5) * uViewportSizePx + 0.5) / uViewportSizePx - 1.0`)}))),e.push(ig("gl_Position =",...f)),e},yg=(t,i,s,e)=>{const h=[],r=t.axisWorldTranslation,n=i?"vec3":"vec2";if("linear"===r)h.push(sg(s,`${n} ${e} = ${s} * uScale + uDisp`));else if("linear-highPrecision"===r)h.push(sg(s,`${n} ${e} = ${s} * uScale + uDisp + uScaleStart_highpart + uScaleStart_lowpart`));else{if("matrix"===r)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("matrix4"===r)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("logarithmic"!==r[0])throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");{const t=[`${n} ${s}_percent = (${s} - uViewportStart) / uViewportSize`];(i?["x","y","z"]:["x","y"]).forEach((i=>{const e=i.toUpperCase(),h=r[1][i];if(void 0===h)t.push(`float pos${e}Back = ${s}_percent.${i} * uScaleInterval.${i} + uScaleStart.${i}`);else{const r=h.base,n="e"===r?"1.0":`cLog${r}`;t.push(`float pos${e}Back = pow(2.71828, (${s}_percent.${i} * uScaleIntervalLog.${i} + uScaleStartLog.${i}) / ${n})`)}})),t.push(`${n} ${e} = ${n}(posXBack, posYBack${i?", posZBack":""})`),h.push(sg(s,...t))}}return h},mg=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.yE)||void 0===i?void 0:i.vE})))(t)?[qA("attribute vec4 aColor"),qA("vColor = aColor"),KA("attribute vec4 aColorA"),KA("attribute vec4 aColorB"),eg("vColor = mix(aColorA, aColorB, aSegmentSide)")]:[],pg=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.yE)||void 0===i?void 0:i.SE})))(t)?[qA("attribute float aLookupValue"),qA("vLookupValue = aLookupValue"),KA("attribute float aLookupValueA"),KA("attribute float aLookupValueB"),eg("vLookupValue = mix(aLookupValueA, aLookupValueB, aSegmentSide)")]:[],vg={"2D":{idFeature:"2D",apply:t=>({idVertex:"2D",idFragment:"2D",defaultVertexShader:"2D",defaultFragmentShader:"FragmentShader"})},"2DCompose":{idFeature:"2DCompose",apply:t=>({idVertex:"2DCompose",idFragment:"2DCompose",defaultVertexShader:"2DMatrix",defaultFragmentShader:"Empty"})},"3D":{idFeature:"3D",yE:{mE:!0},apply:t=>({idVertex:"3D",idFragment:"3D",defaultVertexShader:"3D",defaultFragmentShader:"FragmentShader"})},PointSize:t=>({idFeature:"PointSize",apply:i=>{const s="uniform"===t?"u":"a";return{idVertex:`SizePrimitive:${dg(t)}`,idFragment:void 0,vertexShaderModifiers:[KA(`${t} float ${s}PointSize`,"uniform float uDevicePixelRatio"),eg(`gl_PointSize = ${s}PointSize * uDevicePixelRatio`)]}}}),Color:t=>{const i=t&&t.dataType,s=t&&t.maskTextureText,e=t&&t.maskTexture,h=t&&t.overrideOpacity;return{idFeature:"Color",yE:{pE:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,SE:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0,vE:"attribute"===t.dataType||void 0},apply:(r,n)=>{let o,a=`Color:${dg(t)}`;const l=[];let u="FragmentShader";const c=[];if("uniform"===i)c.push(KA("uniform vec4 uColor"),sg("colorFragment =","colorFragment = uColor"),...s?ag:[],...e?lg:[]);else if("attribute"===i)o="colorAttribute",l.push(hg("attribute vec4 aColor","varying vec4 vColor")),c.push(KA("varying vec4 vColor"),sg("colorFragment =","colorFragment = vColor"),...s?ag:[],...e?lg:[]);else if("texture"===i)o="colorTexCoord",l.push(hg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),c.push(KA("varying vec2 vTextureCoord"),KA("uniform sampler2D uColorTexture"),KA("uniform vec4 uColor"),sg("colorFragment =","colorFragment = texture2D(uColorTexture, vTextureCoord)","if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.) {\n                        colorFragment = uColor;\n                    }"),...s?ag:[],...e?lg:[]);else if("texture-coord-calc-gpu"===i)o="colorTexCoord",u="Empty",l.push(KA("attribute vec2 aTextureCoord"),KA("varying vec2 vTextureCoord"),eg("vTextureCoord = gl_Position.xy * 0.5 + 0.5")),c.push(KA("varying vec2 vTextureCoord"),KA("uniform sampler2D uColorTexture"),tg("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord)","gl_FragColor = colorFragment;"));else if(Array.isArray(i)&&"image"===i[0])o="colorTexCoord",l.push(hg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),i[1].fitMode===_n.Tile?c.push(KA("uniform sampler2D uColorTexture"),KA("varying vec2 vTextureCoord"),sg("colorFragment =","colorFragment = texture2D(uColorTexture, vTextureCoord);")):c.push(KA("uniform sampler2D uColorTexture"),KA("varying vec2 vTextureCoord"),KA("uniform vec4 uColor"),sg("colorFragment =","colorFragment = texture2D(uColorTexture, vTextureCoord);","if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.){\n                                colorFragment = uColor;\n                            }"));else if(Array.isArray(i)&&"lookup"===i[0]){const t=i[1];if("value"===t)o="lookup:value",l.push(hg("attribute float aLookupValue","varying float vLookupValue"));else{const i=`posAxis.${t}`;o=`lookup:${t}`,l.push(hg(i,"varying float vLookupValue"))}c.push(KA("varying float vLookupValue"),...og("vLookupValue",i[2]),...s?ag:[],...e?lg:[])}else if(Array.isArray(i)&&"gradient"===i[0]){const t=i[1],h=t.getColorStops();et(t)?(a=`rgradient${h.length},${e},${s}`,c.push(KA("uniform vec4 uBounds","uniform vec2 uCenter","uniform vec2 uDistance","uniform float uAspect"),KA(...Xt(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),ng.linearStep,sg("colorFragment =","vec2 uv = vec2((((gl_FragCoord.x)-uBounds.x)/(uBounds.z))*uAspect,((gl_FragCoord.y)-uBounds.y)/(uBounds.w))","float mixVal = distance(uv/uDistance, uCenter/uDistance)","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, mixVal))",...h.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, mixVal));`)),"colorFragment = color"),...s?ag:[],...e?lg:[])):nt(t)&&(a=`lgradient${h.length},${e},${s}`,c.push(KA("uniform vec4 uBounds","uniform vec2 uStartPoint","uniform vec2 uEndPoint"),KA(...Xt(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),ng.linearStep,sg("colorFragment =","vec2 uv = gl_FragCoord.xy - uBounds.xy","float magnitude = ((uv.x-uStartPoint.x) * (uEndPoint.x-uStartPoint.x) + (uv.y-uStartPoint.y) * (uEndPoint.y-uStartPoint.y)) / (pow(uEndPoint.x - uStartPoint.x, 2.0) + pow(uEndPoint.y-uStartPoint.y,2.0))","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, magnitude))",...h.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, magnitude))`)),"colorFragment = color"),...s?ag:[],...e?lg:[]))}if(s||e){const t="maskTexture";o=o?`${o} ${t}`:`Color:${t}`,l.push(hg("attribute vec2 aMaskTextureCoord","varying vec2 vMaskTextureCoord"))}return h&&c.push(KA("uniform float uOpacity"),sg("colorFragment =","colorFragment.a *= uOpacity")),{vertexShaderModifiers:l,fragmentShader:u,fragmentShaderModifiers:c,idVertex:o,idFragment:a}}}},ColorShaded3D:t=>{const{dataType:i,shadingStyle:s,wireframe:e}=t;let h;const r=`ColorShaded3D:${dg(t)}`;return{idFeature:"ColorShaded3D",yE:{pE:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,SE:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0},apply:(t,n)=>{const o=[],a=[];if(o.push("phong"===s&&hg("normal","varying vec3 vNormal"),hg("posWorld","varying vec3 vPosWorld")),"uniform"===i)a.push(KA("uniform vec4 uColorDiffuse"),sg("colorFragment =","colorFragment = uColorDiffuse"));else if("attribute"===i)h="per-vertex-color",o.push(hg("attribute vec4 aColor","varying vec4 vColor")),a.push(KA("varying vec4 vColor"),sg("colorFragment =","colorFragment = vColor"));else if(Array.isArray(i)){const t=i[1];if("value"===t)h="lookup:value",o.push(hg("attribute float aLookupValue","varying float vLookupValue"));else{const i=`posAxis.${t}`;h=`lookup:${t}`,o.push(hg(i,"varying float vLookupValue"))}a.push(KA("varying float vLookupValue"),...og("vLookupValue",i[2]))}if(e){const t="wireframe";h=h?`${h},${t}`:t,o.push(hg("attribute vec3 aTriangleBary","varying vec3 vTriangleBary")),a.push(KA("varying vec3 vTriangleBary"),KA("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),ng.computeScreenSpaceWireframe,sg("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)","colorFragment = mix(colorFragment, uWireframeColor, edge)"))}return"phong"===s&&a.push(...ug),{idVertex:h,idFragment:r,vertexShaderModifiers:o,fragmentShader:"FragmentShader",fragmentShaderModifiers:a}}}},VertexLocation:t=>({idFeature:"VertexLocation",apply:i=>{const s=[],e=fg(i),h=t.coordType?t.coordType:e?"vec3":"vec2";return"linear-highPrecision"!==t.axisWorldTranslation?!0!==t.splitPosAttribute?s.push(KA(`attribute ${h} aPos`)):s.push(KA("attribute float aPosX"),KA("attribute float aPosY"),e&&KA("attribute float aPosZ")):!0===t.splitPosAttribute?s.push(KA("attribute float aPos_highpartX"),KA("attribute float aPos_lowpartX"),KA("attribute float aPos_highpartY"),KA("attribute float aPos_lowpartY")):s.push(KA(`attribute ${h} aPos_highpart`),KA(`attribute ${h} aPos_lowpart`)),s.push(...gg(t,e,{attributeNameAxisCoord:"aPos",variableNameAxisCoord:"vec4"===t.coordType?void 0:"posAxis",variableNameWorldCoord:"posWorld"})),{idVertex:`VertexLocation:${dg(t)}`,idFragment:void 0,vertexShaderModifiers:s}}}),Model3D:t=>({idFeature:"Model3D",apply:i=>{const s=[];return s.push(KA("attribute vec3 aGeoPos"),KA("uniform mat4 uModelRotation"),KA("uniform mat4 uModelRotationNormals"),KA("uniform vec3 uLocationAxis"),KA("uniform vec3 uModelAlignment"),KA("uniform vec3 uModelScale"),KA("uniform vec3 uModelSize"),...gg({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,{attributeNameAxisCoord:"uLocationAxis",variableNameAxisCoord:"locationAxis",variableNameWorldCoord:"locationWorld"}),ig("gl_Position =","vec3 posWorld = locationWorld + ((uModelRotation * vec4(aGeoPos, 1.0)).xyz  - (uModelAlignment + 1.0) * uModelSize/2.0) * uModelScale;"),"attribute"===t.normalSource&&sg("vec3 normal ="," normal = (uModelRotationNormals * vec4(normal, 1.0)).xyz;"),...Ag(i)?yg({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,"posWorld","posAxis"):[]),{vertexShaderModifiers:s,idVertex:`Model3D:${dg(t)}`,idFragment:void 0}}}),LineInstanced2D:t=>({idFeature:"LineInstanced2D",apply:i=>({idVertex:`LineInstanced2D:${dg(t)}`,idFragment:void 0,vertexShaderModifiers:[KA("uniform float uThicknessPixels"),KA("uniform vec2 uRatioPxClip"),..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[KA("attribute vec2 aLocationA"),KA("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[KA("attribute vec2 aLocationA_highpart"),KA("attribute vec2 aLocationB_highpart"),KA("attribute vec2 aLocationA_lowpart"),KA("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[KA("attribute float aLocationAX"),KA("attribute float aLocationAY"),KA("attribute float aLocationBX"),KA("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[KA("attribute float aLocationA_highpartX"),KA("attribute float aLocationA_highpartY"),KA("attribute float aLocationB_highpartX"),KA("attribute float aLocationB_highpartY"),KA("attribute float aLocationA_lowpartX"),KA("attribute float aLocationA_lowpartY"),KA("attribute float aLocationB_lowpartX"),KA("attribute float aLocationB_lowpartY")]:[],KA("attribute vec2 aSegmentPosition"),KA("attribute float aSegmentSide"),...gg(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),t.ensureMinimumSegmentLength&&KA("uniform vec2 uMinSegmentPixelVector"),sg("worldB = ",t.ensureMinimumSegmentLength&&"float segmentLengthPixels = sqrt(pow(worldB.x - worldA.x, 2.0) + pow(worldB.y - worldA.y, 2.0)) / length(uRatioPxClip)",t.ensureMinimumSegmentLength&&"if (segmentLengthPixels == 0.0 || segmentLengthPixels < length(uMinSegmentPixelVector)) {\n                        worldB = worldA + uMinSegmentPixelVector * uRatioPxClip;\n                    }","vec2 directionBasis = worldB - worldA","vec2 directionBasisNorm = normalize(directionBasis)","vec2 perpendBasisNorm = vec2(-directionBasisNorm.y, directionBasisNorm.x)","vec2 offset = mix(worldA, worldB, aSegmentSide)","vec2 thicknessDirection = aSegmentPosition.x * directionBasisNorm + aSegmentPosition.y * perpendBasisNorm","vec2 posWorld = offset + thicknessDirection * uThicknessPixels * uRatioPxClip"),...pg(i),...mg(i),...Ag(i)?yg(t,!1,"posWorld","posAxis"):[]]})}),Area2D:t=>({idFeature:"Area2D",apply:i=>({idVertex:`Area2D:${dg(t)}`,idFragment:void 0,vertexShaderModifiers:[..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[KA("attribute vec2 aLocationA"),KA("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[KA("attribute vec2 aLocationA_highpart"),KA("attribute vec2 aLocationB_highpart"),KA("attribute vec2 aLocationA_lowpart"),KA("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[KA("attribute float aLocationAX"),KA("attribute float aLocationAY"),KA("attribute float aLocationBX"),KA("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[KA("attribute float aLocationA_highpartX"),KA("attribute float aLocationA_highpartY"),KA("attribute float aLocationB_highpartX"),KA("attribute float aLocationB_highpartY"),KA("attribute float aLocationA_lowpartX"),KA("attribute float aLocationA_lowpartY"),KA("attribute float aLocationB_lowpartX"),KA("attribute float aLocationB_lowpartY")]:[],KA("attribute float aCurveOrBaseline"),KA("attribute float aSegmentSide"),...gg(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),sg("worldB = ","vec2 posCoord = mix(worldA, worldB, aSegmentSide)","float baseline = min(posCoord.y, -1.0)","vec2 posWorld = vec2(posCoord.x, mix(posCoord.y, baseline, aCurveOrBaseline))"),...pg(i),...mg(i),...Ag(i)?yg(t,!1,"posWorld","posAxis"):[]]})}),LineInstanced3D:t=>({idFeature:"LineInstanced3D",apply:i=>({idVertex:`LineInstanced3D:${dg(t)}`,idFragment:void 0,defaultFragmentShader:"FragmentShader",vertexShaderModifiers:[KA("uniform float uOffsetWU"),KA("attribute vec3 aLocationA"),KA("attribute vec3 aLocationB"),KA("attribute float aSegmentPosition"),KA("attribute float aPerpendHorizontal"),KA("attribute float aPerpendVertical"),...gg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},fg(i),{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),sg("worldB = ","vec3 directionBasis = worldB - worldA","vec3 directionBasisNorm = normalize(directionBasis)","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(directionBasis.y), 0.9 ) ))","vec3 horizontalBasis = normalize( cross( notParallel, directionBasisNorm ) )","vec3 verticalBasis = normalize( cross( horizontalBasis, directionBasisNorm ) )","vec3 normal = aPerpendHorizontal * horizontalBasis + aPerpendVertical * verticalBasis","vec3 posWorld = worldA + aSegmentPosition * directionBasis + normal * uOffsetWU * 0.5"),...Ag(i)?yg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,"posWorld","posAxis"):[]]})}),RoundedEdges3D:{idFeature:"RoundedEdges3D",apply:t=>({idVertex:"RoundedEdges3D",idFragment:void 0,vertexShaderModifiers:[KA("attribute vec3 aEdge"),KA("uniform float uEdgeRoundness"),sg("posWorld =","vec3 boxSizeWorld = abs( aOffsetAxis / uScale )","float boxMinDimensionWorldXZ = min( boxSizeWorld.x, boxSizeWorld.z )","vec3 edgeRoundAmount = uEdgeRoundness * vec3( boxMinDimensionWorldXZ, min( boxMinDimensionWorldXZ, boxSizeWorld.y ), boxMinDimensionWorldXZ )","posWorld = posWorld + aEdge * edgeRoundAmount")]})},ColorGrid2D:t=>{const i=t.flipXY,s=t.intensityTextureType,e=t.littleEndian;return{idFeature:"ColorGrid2D",apply:(h,r)=>({idVertex:void 0,idFragment:`ColorGrid2D:${dg(t)}`,fragmentShader:"FragmentShader",fragmentShaderModifiers:[KA("uniform vec4 uTileBounds","uniform vec2 uTileDimensions","uniform sampler2D uTileIntensityValues"),"ubyte"===s&&ng.decodeUbyteRGBAEncodedFloat,"bilinear"===t.interpolation?tg("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions - 1.0)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensions - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensions - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${i?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${i?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${i?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${i?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===s?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${e})`),"float intensity01 = "+("float"===s?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${e})`),"float intensity10 = "+("float"===s?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${e})`),"float intensity11 = "+("float"===s?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${e})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${i?"lerpFactors.y":"lerpFactors.x"})`):tg("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellIndexNormalized = cellIndex / uTileDimensions",`vec4 sample0 = texture2D(uTileIntensityValues, ${i?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = "+("float"===s?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${e})`)),...og("intensityP",t.lut)]})}},DrawToNormalTexture:t=>{const i=t.flipXZ,s=t.vertexIdSource,e=t.normalTextureType,h=t.heightmapTextureType,r=t.littleEndian;return{idFeature:"DrawToNormalTexture",apply:(n,o)=>{const a=[],l=[];return a.push(KA("uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB","attribute"===s&&"attribute float aVertexID"),void 0!==s&&ng.roundUnsigned,ng.modulus,ng.texelFetchWithFallback[o],"ubyte"===h&&ng.decodeUbyteRGBAEncodedFloat,tg(void 0===s?"int iVertex = gl_VertexID":"int iVertex = int(roundUnsigned(aVertexID))","int iSecondary = modulus(iVertex, (uTileDimensions.y - 1))","int iPrimary = iVertex / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(uTileDimensions) - 1.0","vec2 halfTexelWorld = 2.0 / (uTileDimensionsMinus1 * 2.0)","vec2 posWorld = vec2(-1.0 + halfTexelWorld.y + iCell.y * 2.0 * halfTexelWorld.y, -1.0 + halfTexelWorld.x + iCell.x * 2.0 * halfTexelWorld.x)","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec3 posAxis0 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`} ,\n                            uTileStartLocationAxisXZ.y + iCell.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell1 = iCell + vec2(1.0, 0.0)",`vec3 posAxis1 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell1.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell1.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell2 = iCell + vec2(0.0, 1.0)",`vec3 posAxis2 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell2.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell2.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell3 = iCell + vec2(1.0, 1.0)",`vec3 posAxis3 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell3.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell3.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec3 normal = normalize(cross(posAxis2 - posAxis0, posAxis1 - posAxis0) + cross(posAxis1 - posAxis3, posAxis2 - posAxis3))","uint"===e?"vNormalRGB = uvec3(((normal / 2.0) + 0.5) * float(-1u))":"vNormalRGB = (normal / 2.0) + 0.5","gl_PointSize = 1.0")),l.push(KA("uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB"),tg("uint"===e?"gl_FragColor = uvec4(vNormalRGB, -1u)":"gl_FragColor = vec4(vNormalRGB, 1.0)")),{idVertex:`DrawToNormalTexture:${dg(t)}`,idFragment:`DrawToNormalTexture:${dg(t)}`,vertexShaderModifiers:a,fragmentShaderModifiers:l,fragmentShader:"Empty",hints:["uint"===e&&{type:"fragOutput",fragOutput:"uvec4"}]}}}},SurfaceGrid:t=>{const i=t.fillColor,s=t.interpolation,e=t.flipXZ,h=t.shadingStyle,r=t.wireframe,n=t.normalTextureType,o=t.heightmapTextureType,a=t.intensityTextureType,l=t.littleEndian;return{idFeature:"SurfaceGrid",yE:{bE:!0},apply:(u,c)=>{const d=[],f=[];return d.push(KA("attribute vec2 aGeoCellOffset","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture"),ng.modulus,ng.texelFetchWithFallback[c],"ubyte"===o&&ng.decodeUbyteRGBAEncodedFloat,tg("int iSecondary = modulus(iInstance + uBaseInstance, (uTileDimensions.y - 1))","int iPrimary = (iInstance + uBaseInstance) / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 iCellVertex = iCell + aGeoCellOffset","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","vec2 ySampleCoordinate = vec2(iCellVertex.y, iCellVertex.x) / vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x)","float y = "+("float"===o?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${l})`),"vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)","vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * "+(e?"vec2(iCellVertex.y, iCellVertex.x)":"iCellVertex"),"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)")),d.push(...gg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:"posAxis",variableNameWorldCoord:"posWorld"})),"phong"===h&&d.push(hg("posWorld","varying vec3 vPosWorld"),..."uint"===n?[ng.texelFetchUnsignedWithFallback[c],eg("vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)")]:[eg("vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))")],eg("vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vNormal = normalize(normalAxis * uScale)"),KA("varying vec3 vNormal",..."uint"===n?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"])),f.push(KA("varying vec3 vTriangleBary")),"uniform"===i?f.push(KA("uniform vec4 uColorDiffuse"),sg("colorFragment =","colorFragment = uColorDiffuse")):Array.isArray(i)&&"lookup"===i[0]&&("value"===i[1]?(d.push(hg("posAxis.xz","varying vec2 vVertexLocationAxisXZ")),f.push(KA("uniform vec4 uTileBoundsAxisXZ","uniform vec2 uTileDimensionsXZ","varying vec2 vVertexLocationAxisXZ","uniform sampler2D uTileIntensityValues","uniform mat4 uViewProjectionMatrix","uniform vec3 uScale","uniform vec3 uDisp"),"ubyte"===a&&ng.decodeUbyteRGBAEncodedFloat,"bilinear"===s?tg("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = (vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensionsXZ - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensionsXZ - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${e?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${e?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${e?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${e?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===a?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${l})`),"float intensity01 = "+("float"===a?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${l})`),"float intensity10 = "+("float"===a?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${l})`),"float intensity11 = "+("float"===a?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${l})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${e?"lerpFactors.y":"lerpFactors.x"})`):tg("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = floor((vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ)","vec2 cellIndexNormalized = cellIndex / (uTileDimensionsXZ - 1.0)",`vec4 sample0 = texture2D(uTileIntensityValues, ${e?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = sample0.x"),...og("intensityP",i[2]))):(d.push(hg(`posAxis.${i[1]}`,"varying float vLookupValue")),f.push(KA("varying float vLookupValue"),...og("vLookupValue",i[2])))),"phong"===h&&f.push(...ug),r&&(d.push(KA("attribute vec3 aTriangleBary"),hg("aTriangleBary","varying vec3 vTriangleBary")),f.push(KA("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),ng.computeScreenSpaceWireframe,sg("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",i?"if (edge > 0.0) {\n                                    colorFragment = vec4(mix(colorFragment.rgb, uWireframeColor.rgb, edge * uWireframeColor.a), max(colorFragment.a, uWireframeColor.a));\n                                }":"if (edge > 0.0) {\n                                    colorFragment = uWireframeColor;\n                                  } else {\n                                      discard;\n                                  }"))),{idVertex:`SurfaceGrid:${dg(t)}`,idFragment:`SurfaceGrid:${dg(t)}`,vertexShaderModifiers:d,fragmentShader:"FragmentShader",fragmentShaderModifiers:f}}}},DebugSurfaceGridNormals:t=>({idFeature:"DebugSurfaceGridNormals",apply:(i,s)=>({idVertex:`DebugSurfaceGridNormals:${dg(t)}`,idFragment:`DebugSurfaceGridNormals:${dg(t)}`,vertexShaderModifiers:[KA("attribute float aNormalArrow","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===t.instanceIdSource&&"attribute float aInstanceID",..."uint"===t.normalTextureType?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"]),ng.roundUnsigned,ng.modulus,ng.texelFetchWithFallback[s],"ubyte"===t.heightmapTextureType&&ng.decodeUbyteRGBAEncodedFloat,tg(void 0===t.instanceIdSource?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","float y00 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y01 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y10 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y11 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y = (y00 + y01 + y10 + y11) / 4.0","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * (0.5 + ${t.flipXZ?"vec2(iCell.y, iCell.x)":"iCell"})`,"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)",..."uint"===t.normalTextureType?["vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)"]:["vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))"],"vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vec3 normalWorld = normalize(normalAxis * uScale)"),..."uint"===t.normalTextureType?[ng.texelFetchUnsignedWithFallback[s]]:[],...gg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:"posAxis",variableNameWorldCoord:"posWorld"}),sg("posWorld =","vec3 dirArrow = normalWorld","vec3 posArrowStart = posWorld","vec3 posArrowEnd = posWorld + dirArrow * 0.010","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(dirArrow.y), 0.9 ) ))","vec3 dirArrowLeft = normalize(-dirArrow + 0.50 * normalize(cross(dirArrow, notParallel)))","vec3 dirArrowRight = normalize(-dirArrow + 0.50 * normalize(cross(notParallel, dirArrow)))","vec3 posArrowLeft = posArrowEnd + dirArrowLeft * 0.0025","vec3 posArrowRight = posArrowEnd + dirArrowRight * 0.0025","if (aNormalArrow == 0.0) {\n                        posWorld = posArrowStart;\n                    } else if (aNormalArrow == 1.0) {\n                        posWorld = posArrowEnd;\n                    } else if (aNormalArrow == 2.0) {\n                        posWorld = posArrowLeft;\n                    } else if (aNormalArrow == 3.0) {\n                        posWorld = posArrowRight;\n                    }")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[eg("gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0)")]})}),OffsetTowardsCamera:()=>({idFeature:"OffsetTowardsCamera",apply:t=>({idVertex:"OffsetTowardsCamera",idFragment:void 0,vertexShaderModifiers:[KA("uniform vec3 uCameraLoc"),sg("posWorld =","posWorld = posWorld + normalize(uCameraLoc) * 0.0025")]})}),AliasedEdge:{idFeature:"AliasedEdge",apply:t=>({idVertex:"AliasedEdge",idFragment:"AliasedEdge",vertexShaderModifiers:[KA("attribute float aSegmentInside"),KA("varying float vSegmentInside"),KA("varying float vSegmentSide"),sg("gl_Position = ","\n                vSegmentInside = aSegmentInside;\n                vSegmentSide = aSegmentSide;\n                ")],fragmentShaderModifiers:[rg("#extension GL_OES_standard_derivatives : enable"),KA("uniform float uAALimit"),KA("varying float vSegmentInside"),KA("varying float vSegmentSide"),sg("antiAliasFactor = ","\n                float dist = (uAALimit - vSegmentInside);\n                vec2 ddist = vec2(dFdx(dist), dFdy(dist));\n                float pixelDist = dist / length(ddist);\n                // additional blurring\n                pixelDist *= 0.5;\n\n                float aa = clamp(0.5 - pixelDist, 0.0, 1.0);\n                if((vSegmentSide <= 0.0 || vSegmentSide >= 1.0) && aa <=0.99){\n                    aa *= 0.5;\n                }\n                antiAliasFactor = aa;\n                ")]})},Glow1D:t=>({idFeature:"Glow1D",apply:()=>{const i=Math.round(t.spreadPx),s=Math.round(t.blurPx),e=i+s,h=t.firstPass,r=[];for(let t=-e;t<=e;t+=1){const i=Math.abs(t);r.push(h?{x:t.toFixed(1),y:"0.0",distPx:i.toFixed(1)}:{x:"0.0",y:t.toFixed(1),distPx:i.toFixed(1)})}return{idVertex:`Glow1D:${dg(t)}`,idFragment:`Glow1D:${dg(t)}`,vertexShaderModifiers:[hg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[KA("uniform sampler2D uTexture"),KA("varying vec2 vTextureCoord"),KA("uniform vec2 uTextureSize"),h&&KA("uniform vec2 uOffsetPx"),!h&&KA("uniform sampler2D uTextureFirstGlowPass"),!h&&KA("uniform vec4 uGlowColor"),sg("antiAliasFactor =","vec2 oneTexel = vec2(1.0, 1.0) / uTextureSize",...h?[]:["float inverseIntensity =\n                        0.25 * texture2D(uTexture, vTextureCoord).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, 0.0)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, 0.0)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, -oneTexel.y)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, -oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, -oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, oneTexel.y)).a","antiAliasFactor *= 1.0 - (inverseIntensity * inverseIntensity)","if (antiAliasFactor <= 0.0) { discard; }"],"float distancePx = 255.0","vec2 sample_tx = vec2(0.0)",...h?["vec2 texCoordOffset = vTextureCoord - uOffsetPx * oneTexel",...r.map(((t,i)=>[`sample_tx = texCoordOffset + oneTexel * vec2(${t.x}, ${t.y})`,`if (distancePx > ${t.distPx} && sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0 && texture2D(uTexture, sample_tx).a > 0.0) { distancePx = ${t.distPx}; }`])).flat(),"colorFragment = vec4(distancePx / 255.0, 0.0, 0.0, 1.0)"]:["vec4 sample_horizontal = vec4(0.0)","float horizontal_dist = 255.0","float min_horizontal_dist = 255.0",...r.map(((t,i)=>[`sample_tx = vTextureCoord + oneTexel * vec2(${t.x}, ${t.y})`,"if (sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0) {\n                                            sample_horizontal = texture2D(uTextureFirstGlowPass, sample_tx);\n                                            horizontal_dist = sample_horizontal.r * 255.0;\n                                          }","if (sample_horizontal.a < 0.9) { horizontal_dist = 255.0; }","min_horizontal_dist = min(min_horizontal_dist, horizontal_dist)",`distancePx = min(distancePx, pow(horizontal_dist * horizontal_dist + ${t.y} * ${t.y}, 0.5))`])).flat(),`if (distancePx > ${e.toFixed(1)}) { discard; }`,"vec4 pixelGlowColor = vec4(0.0, 0.0, 0.0, 0.0)",`if (distancePx > ${i.toFixed(1)}) {\n                                        float lerpAmount = (distancePx - ${i.toFixed(1)}) / ${(s+1).toFixed(1)};\n                                        pixelGlowColor = mix(uGlowColor, vec4(uGlowColor.rgb, 0.0), 1.0 - (1.0 - lerpAmount) * (1.0 - lerpAmount));\n                                    } else {\n                                        pixelGlowColor = uGlowColor;\n                                    }`,"colorFragment = pixelGlowColor"])]}}}),MousePicking:t=>{const i=!!(null==t?void 0:t.customMousePickingIdInput),s=!i&&!!(null==t?void 0:t.useVertexId),e=!i&&!!(null==t?void 0:t.useAttribute),h=!i&&!s&&!e;return{idFeature:"MousePicking",yE:{bE:h,xE:s},apply:(r,n)=>{const o="webgl2"===n?"flat":"",a="webgl2"===n?"int":"float";return{idVertex:`MousePicking:${dg(t)}`,idFragment:`MousePicking:${dg(t)}`,vertexShaderModifiers:[...h?[KA(`${o} varying ${a} vPickingIdOffset`),eg(`vPickingIdOffset = ${a}(iInstance)`)]:[],...s?[KA(`${o} varying ${a} vPickingIdOffset`),eg(`vPickingIdOffset = ${a}(iVertex)`)]:[],...e?[KA("attribute float aPickingIdOffset",`${o} varying ${a} vPickingIdOffset`),eg(`vPickingIdOffset = ${a}(aPickingIdOffset)`)]:[]],fragmentShaderModifiers:[KA("uniform int uFirstId"),...i?[]:[KA(`${o} varying ${a} vPickingIdOffset`),tg("int mousePickingIdOffset = "+("int"===a?"vPickingIdOffset":"int(floor(vPickingIdOffset + 0.5))"))],sg("colorFragment =","int remainder = mousePickingIdOffset + uFirstId","int r = remainder / 16777216","remainder -= r * 16777216","int g = remainder / 65536","remainder -= g * 65536","int b = remainder / 256","remainder -= b * 256","int a = remainder","colorFragment = vec4(float(r) / 255.0, float(g) / 255.0, float(b) / 255.0, float(a) / 255.0)"),t=>t.replace("gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor)","if (antiAliasFactor <= 0.0) { discard; }\ngl_FragColor = fragColorEnd").replace("if (fragColorEnd.a <= 0.0) { discard; }","")]}}}},AttributeHighlight:{idFeature:"AttributeHighlight",apply:t=>({idVertex:"AttributeHighlight",idFragment:"AttributeHighlight",vertexShaderModifiers:[hg("attribute float aIsHighlighted","varying float vIsHighlighted")],fragmentShaderModifiers:[t=>t.replace("uniform float uIsHighlighted","varying float vIsHighlighted").replace("uIsHighlighted","vIsHighlighted")]})},StippleTexture:{idFeature:"StippleTexture",apply:(t,i)=>({idVertex:"StippleTexture",idFragment:"StippleTexture",vertexShaderModifiers:[KA("attribute vec2 aLengthSoFar"),KA("varying float vLengthSoFar"),KA("uniform vec2 uStippleCount"),eg("\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[KA("uniform sampler2D uStippleTexture"),KA("uniform float uStippleScale"),KA("varying float vLengthSoFar"),"webgl1"===i&&KA("uniform float uStippleTextureWidthLimiter"),sg("antiAliasFactor = ",`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    antiAliasFactor *= stippleAA;\n                    if (antiAliasFactor <= 0.0) { discard; }`)]})},StippleTextureInstanced:{idFeature:"StippleTextureInstanced",apply:(t,i)=>({idVertex:"StippleTextureInstanced",idFragment:"StippleTextureInstanced",vertexShaderModifiers:[KA("attribute vec2 aLengthSoFarA"),KA("attribute vec2 aLengthSoFarB"),KA("varying float vLengthSoFar"),KA("uniform vec2 uStippleCount"),eg("\n                vec2 aLengthSoFar = mix(aLengthSoFarA, aLengthSoFarB, aSegmentSide);\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[KA("uniform sampler2D uStippleTexture"),KA("uniform float uStippleScale"),KA("varying float vLengthSoFar"),"webgl1"===i&&KA("uniform float uStippleTextureWidthLimiter"),sg("antiAliasFactor = ",`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    antiAliasFactor *= stippleAA;\n                    if (antiAliasFactor <= 0.0) { discard; }`)]})},PolarHeatmap:t=>({idFeature:"PolarHeatmap",apply:(i,s)=>{const e="dataType"in t,h="interpolation"in t?t:void 0,r=h?h.flipXY:void 0,n="bilinear"===(null==h?void 0:h.interpolation),o=null==h?void 0:h.intensityTextureType,a=null==h?void 0:h.littleEndian;return{idVertex:void 0,idFragment:`PolarHeatmap:${dg(t)}`,vertexShaderModifiers:[],fragmentShaderModifiers:[KA("uniform vec2 uViewportSize","uniform vec2 uScale","uniform vec2 uDisp","uniform float uSectors","uniform float uAnnuli","uniform float uAmplitudeStart","uniform float uAmplitudeStep","uniform float uAmplitudeAxisStart","uniform float uAmplitudeAxisEnd","uniform float uAngleOffset","uniform float uAngleDirection",h&&"uniform sampler2D uTileIntensityValues",e&&"uniform vec4 uColor"),ng.texelFetchWithFallback[s],"ubyte"===o&&ng.decodeUbyteRGBAEncodedFloat,tg("vec2 posWorld = (2.0 * gl_FragCoord.xy / uViewportSize) - 1.0","vec2 posAxis = posWorld * uScale + uDisp","float amplitudeAxisInterval = uAmplitudeAxisEnd - uAmplitudeAxisStart","float amplitude = uAmplitudeAxisStart + sign(amplitudeAxisInterval) * sqrt(posAxis.x * posAxis.x + posAxis.y * posAxis.y)","float iAnnulus = (amplitude - uAmplitudeStart) / uAmplitudeStep"),h&&sg("iAnnulus","float angRad = atan(posAxis.y, posAxis.x) * uAngleDirection + uAngleOffset","if (angRad < 0.0) { angRad = angRad + 2.0 * 3.1415926538; }","if (angRad > 2.0 * 3.1415926538) { angRad = angRad - 2.0 * 3.1415926538; }","float iSector = uSectors * angRad / (2.0 * 3.1415926538)","vec2 cellIndex = vec2(iSector, iAnnulus)","ivec2 cellStart = ivec2(floor(cellIndex))","ivec2 cellEnd = cellStart + ivec2(1)","if (cellEnd.x >= int(uSectors)) { cellEnd = ivec2(0, cellEnd.y); }",r&&"cellIndex = vec2(cellIndex.y, cellIndex.x)",r&&"cellStart = ivec2(cellStart.y, cellStart.x)",r&&"cellEnd = ivec2(cellEnd.y, cellEnd.x)"),e&&sg("colorFragment =","colorFragment = uColor"),h&&sg("cellEnd","vec2 tileDimensions = "+(r?"vec2(uAnnuli, uSectors)":"vec2(uSectors, uAnnuli)"),n&&"vec4 sample00 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",n&&"vec4 sample01 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellStart.x, cellEnd.y), tileDimensions)",n&&"vec4 sample10 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellEnd.x, cellStart.y), tileDimensions)",n&&"vec4 sample11 = texelFetchWithFallback(uTileIntensityValues, cellEnd, tileDimensions)",n&&"float intensity00 = "+("float"===o?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${a})`),n&&"float intensity01 = "+("float"===o?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${a})`),n&&"float intensity10 = "+("float"===o?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${a})`),n&&"float intensity11 = "+("float"===o?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${a})`),n&&"vec2 lerpFactors = cellIndex - vec2(cellStart)",n&&"float intensityR1 = mix(intensity00, intensity10, lerpFactors.x)",n&&"float intensityR2 = mix(intensity01, intensity11, lerpFactors.x)",n&&"float intensityP = mix(intensityR1, intensityR2,  lerpFactors.y)",!n&&"vec4 sample0 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",!n&&"float intensityP = "+("float"===o?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${a})`)),...h?og("intensityP",h.lut):[]]}}})},Sg={"2D":"\nvoid main(void) {\n    gl_Position = vec4(posWorld, 0.0, 1.0 );\n}\n","2DMatrix":"\nvoid main(void) {\n    gl_Position = posWorld;\n}\n","3D":"\nuniform mat4 uViewProjectionMatrix;\nvoid main(void) {\n    gl_Position = uViewProjectionMatrix * vec4(posWorld, 1.0);\n}\n"},bg={FragmentShader:"\nuniform float uIsHighlighted;\nuniform vec4 uHighlightColorOffset;\nuniform float uRenderEffectMask;\nvoid main(void) {\n    vec4 colorFragment = vec4(0.0, 0.0, 0.0, 0.0);\n    float antiAliasFactor = 1.0;\n    vec4 fragColorEnd = colorFragment;\n    if (fragColorEnd.a <= 0.0) { discard; }\n    fragColorEnd = clamp(fragColorEnd + uIsHighlighted * uHighlightColorOffset, vec4(0.0), vec4(1.0));\n    fragColorEnd = mix(fragColorEnd, vec4(1.0), uRenderEffectMask * fragColorEnd.a * 1000.0);\n    gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor);\n}\n",Empty:"\nvoid main(void) {\n}\n"};class xg{constructor(t,i,s,e,h){if(this.id=t,this.shader=s,this.gl=e,this.info=h,!i||!s)throw new Lt(`Could not find ${this.ME()} ${this._E()} shader source code.`);this.gl.shaderSource(s,i),this.gl.compileShader(s)}get src(){return""}ME(){return this.id.toString()}_E(){return this.gl.getShaderParameter(this.shader,this.gl.SHADER_TYPE)===this.gl.FRAGMENT_SHADER?"fragment":"vertex"}}class Mg extends xg{constructor(t,i,s,e){super(t,i,s.createShader(s.VERTEX_SHADER),s,e)}}class _g extends xg{constructor(t,i,s,e){super(t,i,s.createShader(s.FRAGMENT_SHADER),s,e)}}class wg{constructor(t,i,s,e){this.wE=new Map,this.CE=new Map,this.kE=s,this.TE=s.createProgram(),this.FE=`${t.ME()} vertex`,this.IE=`${i.ME()} fragment`,s.attachShader(this.TE,t.shader),s.attachShader(this.TE,i.shader),s.bindAttribLocation(this.TE,0,"aPos"),s.linkProgram(this.TE),s.deleteShader(t.shader),s.deleteShader(i.shader),this.allAttributeNames=t.info.allAttributeNames,this.allUniformNames=Array.from(new Set(t.info.allUniformNames.concat(i.info.allUniformNames)).values()),this.vertexSharedRemovedVariables=t.info.removedVariableNames,this.fragmentSharedRemovedVariables=i.info.removedVariableNames}get vertexShaderSrc(){return""}get fragmentShaderSrc(){return""}PE(t){return Di(0,(()=>Bi()))}DE(t){const i=this.BE(t);if(void 0===i)throw this.PE(`Could not get ${t} uniform from ${this.FE} and ${this.IE} shaders.`);return i}BE(t){const i=this.wE.get(t);if(i)return i;const s=this.kE.getUniformLocation(this.TE,t);return s?(this.wE.set(t,s),s):void 0}LE(t){const i=this.RE(t);if(void 0===i)throw this.PE(`Could not get ${t} attribute from ${this.FE} and ${this.IE} shaders.`);return i}RE(t){const i=this.CE.get(t);if(i||0===i)return i;const s=this.kE.getAttribLocation(this.TE,t);return s>=0?(this.CE.set(t,s),s):void 0}U(){this.kE.deleteProgram(this.TE)}}const Cg=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/,kg=t=>{let i;try{i=Ot.getComputedStyle(t)}catch(t){return null}return i};
+import*as t from"immutable";import{Record as i}from"immutable";import{Eventer as s}from"@lightningchart/eventer";import e from"earcut";class h{constructor(){this.o=!0}u(){return this.o}}class r extends h{constructor(t,i){super(),this.S=t,this.o=i}M(t){return t!==this.S&&(this.S=t,this.o=!0),this}_(){return this.S}u(){return super.u()}}const n=(t,i)=>({x:t,y:i}),o=(t,i)=>({x:t,y:i}),a=(t,i,s)=>({position:t,high:i,low:s}),l=(t,i,s)=>({x:t,y:i,z:s}),u=t=>{const i=Array(0),s=Array(0);return t.length>0&&t.forEach((t=>{i.push(n(t.position,t.high)),s.push(n(t.position,t.low))})),[i,s]},c=(t,i)=>({min:t,max:i}),d=(t,i,s,e)=>({x:t,y:i,width:s,height:e}),f=(t,i=!0)=>new r(t,i),A=(t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}),g=A,y=(t,i)=>({left:void 0!==i.left?i.left:t.left,top:void 0!==i.top?i.top:t.top,right:void 0!==i.right?i.right:t.right,bottom:void 0!==i.bottom?i.bottom:t.bottom}),m=i({type:"color",r:1,g:1,b:1,a:1});class p extends m{constructor(t){super(t)}toUint32(){return void 0!==this.C||(this.C=I(this.getR(),this.getG(),this.getB(),this.getA())),this.C}toString(){return`color:${this.r},${this.g},${this.b},${this.a}`}setA(t){return this.set("a",t/255)}setR(t){return this.set("r",t/255)}setG(t){return this.set("g",t/255)}setB(t){return this.set("b",t/255)}getA(){return 255*this.get("a")}getR(){return 255*this.get("r")}getG(){return 255*this.get("g")}getB(){return 255*this.get("b")}getHighlight(){return this.T||(this.T=new p({r:this.r+.45*(1-this.r),g:this.g+.45*(1-this.g),b:this.b+.45*(1-this.b),a:this.a<1?this.a+.45*(1-this.a):1})),this.T}getLighter(){return this.F||(this.F=new p({r:this.r+.4*(1-this.r),g:this.g+.4*(1-this.g),b:this.b+.4*(1-this.b),a:this.a})),this.F}getDarker(){return this.I||(this.I=new p({r:this.r-.4*(1-this.r),g:this.g-.4*(1-this.g),b:this.b-.4*(1-this.b),a:this.a})),this.I}toRGBAString(){return`rgba( ${255*this.r}, ${255*this.g}, ${255*this.b}, ${255*this.a} )`}}const v=t=>!(!t||"object"!=typeof t||!("type"in t)||"color"!==t.type),S=(t,i,s,e=255)=>new p({r:t/255,g:i/255,b:s/255,a:e/255}),b=t=>{const i=t.startsWith("#")?t.substring(1):t.startsWith("0x")?t.substr(2):t;switch(i.length){case 8:return new p({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255,a:Number(`0x${i.substring(6,8)}`)/255});case 6:return new p({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255});case 4:return new p({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255,a:Number(`0x${i.charAt(3)}${i.charAt(3)}`)/255});case 3:return new p({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255});default:throw new Error(`ColorHEX parsing error | input: ${t}`)}},x=(t,i=1,s=1)=>{let e,h,r;t/=360;const n=Math.floor(6*t),o=6*t-n,a=s*(1-i),l=s*(1-o*i),u=s*(1-(1-o)*i);switch(n%6){case 0:e=s,h=u,r=a;break;case 1:e=l,h=s,r=a;break;case 2:e=a,h=s,r=u;break;case 3:e=a,h=l,r=s;break;case 4:e=u,h=a,r=s;break;default:e=s,h=a,r=l}return new p({r:e,g:h,b:r})},M=t=>{try{if(t.startsWith("rgba")){const i=t.substr(5).slice(0,-1),s=JSON.parse(`[${i}]`);return S(s[0],s[1],s[2],255*s[3])}if(t.startsWith("rgb")){const i=t.substr(4).slice(0,-1),s=JSON.parse(`[${i}]`);return S(s[0],s[1],s[2])}if(t.startsWith("hsl")){const i=t.substr(4).slice(0,-1).split(",").map(parseFloat),s=w(i[0],i[1],i[2]);return S(s[0],s[1],s[2])}return t.startsWith("#")||t.startsWith("0x")?b(t):b(k(t))}catch(t){}return console.warn(`ColorCSS parsing error: ${t}`),b("#fff")},_=t=>S(255&t,255&(t>>=8),255&(t>>=8),255&(t>>=8)),w=(t,i,s)=>{i/=100,s/=100;const e=(1-Math.abs(2*s-1))*i,h=t/60,r=e*(1-Math.abs(h%2-1));let n=[];isNaN(t)?n=[0,0,0]:h<=1?n=[e,r,0]:h<=2?n=[r,e,0]:h<=3?n=[0,e,r]:h<=4?n=[0,r,e]:h<=5?n=[r,0,e]:h<=6&&(n=[e,0,r]);const o=s-.5*e;return[Math.round(255*(n[0]+o)),Math.round(255*(n[1]+o)),Math.round(255*(n[2]+o))]},C={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},k=t=>{const i=C[t.toLowerCase()];if(i)return i;throw new Error(`Unknown color code: ${t}`)},T=new p({}),F=S(0,0,0,0),I=(t,i,s,e=255)=>(e<<24|s<<16|i<<8|t)>>>0,P=t=>I(255*t.r,255*t.g,255*t.b,255*t.a),D=(t,i)=>t.value-i.value,B=i({type:"lut",steps:[],title:"",units:"",interpolate:!0,color:S(0,0,0,255),length:0,min:0,max:0,subranges:[],isValid:!1,percentageValues:!1}),L=t=>{const{steps:i}=t,s=i.length;i.sort(D);const[e,h]=s>0?[i[0].value,i[s-1].value]:[0,0],r=s>0?s-1:0,n=Array(r);for(let t=0;t<r;t+=1)n[t]={min:i[t],max:i[t+1]};return{min:e,max:h,length:s,steps:i,subranges:n,isValid:s>0&&e!==h}};class R extends B{constructor(t){super(((t,i)=>({steps:t.steps,title:t.title,units:t.units,interpolate:t.interpolate,percentageValues:t.percentageValues,color:t.color,length:i.length,min:i.min,max:i.max,subranges:i.subranges,isValid:i.isValid}))(t,L(t)))}toString(){return`LUT:interpolate=${this.interpolate},steps=${this.steps.length},percentage=${this.percentageValues}`}setSteps(t){return this.merge(L({...this,steps:t}))}getSteps(){return this.get("steps")}setTitle(t){return this.set("title",t)}getTitle(){return this.get("title")}setUnits(t){return this.set("units",t)}getUnits(){return this.get("units")}setInterpolation(t){return this.set("interpolate",t)}getInterpolation(){return this.get("interpolate")}setFallbackColor(t){return this.set("color",t)}getFallbackColor(){return this.get("color")}setPercentageValues(t){return this.set("percentageValues",t)}getPercentageValues(){return this.get("percentageValues")}getColors(t){if(Array.isArray(t)){if(Array.isArray(t[0])){const i=t,s=i.length,e=i[0].length,h=[...Array(s)].map((()=>Array(e)));for(let t=0;t<s;t+=1)for(let s=0;s<e;s+=1)h[t][s]=this.P(i[t][s]);return h}const i=t,s=i.length,e=Array(s);for(let t=0;t<s;t+=1)e[t]=this.P(i[t]);return e}return this.P(t)}P(t){const{steps:i}=this,s=i.length;if(0===s)return this.getFallbackColor();if(1===s)return i[0].color||this.color;if(this.interpolate){for(let n=0;n<s-1;n+=1){const s=i[n],o=i[n+1],a=Math.min(s.value,o.value),l=Math.max(s.value,o.value);if(t>=a&&t<=l){if(a===l)return s.color;const i=(t-s.value)/(o.value-s.value);return e=s.color,h=o.color,r=i,new p({r:e.r+(h.r-e.r)*r,g:e.g+(h.g-e.g)*r,b:e.b+(h.b-e.b)*r,a:e.a+(h.a-e.a)*r})}}return t<i[0].value?i[0].color:i[s-1].color}var e,h,r;for(let e=s-1;e>=0;e-=1)if(t>=i[e].value)return i[e].color;return i[0].color}}const E=t=>!(!t||"object"!=typeof t||!("type"in t)||"lut"!==t.type),z=i({type:"fillstyle",fillType:"empty"});class V extends z{toString(){return"emptyFill"}}const O=new V,N=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"empty"===t.fillType),G=i({type:"fillstyle",fillType:"solid",color:S(255,255,255)});class W extends G{}class U extends W{constructor(t){super({...t,fillType:"solid"})}toString(){return`solidFill:${this.color.toString()}`}setColor(t){return v(t)?this.set("color",t):this.set("color",t(this.get("color")))}getColor(){return this.get("color")}setA(t){return this.setColor(this.getColor().setA(t))}setR(t){return this.setColor(this.getColor().setR(t))}setG(t){return this.setColor(this.getColor().setG(t))}setB(t){return this.setColor(this.getColor().setB(t))}}const Y=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"solid"===t.fillType);class H extends W{constructor(t){super({...t,fillType:"individual"})}toString(){return`individualPointFill:${this.color.toString()}`}setFallbackColor(t){return v(t)?this.set("color",t):this.set("color",t(this.get("color")))}getFallbackColor(){return this.get("color")}}const $=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"individual"===t.fillType),X=i({type:"fillstyle",fillType:"palette",lut:new R({steps:[]}),lookUpProperty:"value"});class j extends X{constructor(t){super({...t,fillType:"palette"})}toString(){return`palettedFill:lut=${this.lut.toString()},lookUpProperty=${this.lookUpProperty}`}getPalette(){return this.get("lut")}setLookUpProperty(t){return"function"==typeof t?this.set("lookUpProperty",t(this.get("lookUpProperty"))):this.set("lookUpProperty",t)}getLookUpProperty(){return this.get("lookUpProperty")}}const Z=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"palette"===t.fillType),Q={linear:(t,i,s)=>{const e=i-t;return h=>h<s?t+e/s*h:i},easeIn:(t,i,s)=>e=>e<s?t+Math.abs(2*(Math.sqrt(.5)*e/s)**2)*(i-t):i,easeOut:(t,i,s)=>e=>e<s?t+Math.abs(1-2*(Math.sqrt(.5)*(1-e/s))**2)*(i-t):i,ease:(t,i,s)=>e=>e<s?t+(e<s/2?.5*(e/s*2)**2.5:.5+.5*(1-(1-2*(e/s-.5))**2.5))*(i-t):i,logarithmic:t=>{const i=pi(t);return(s,e,h)=>{const r=i(s),n=i(e);return i=>i<h?t**(r+Math.abs(1-2*(Math.sqrt(.5)*(1-i/h))**2)*(n-r)):e}}};class J{constructor(t,i,e,h=Q.linear,r){this.delta=0,this.nextAnimations=new Array,this.D=!1,this.easing=Q.linear,this.L=new s,this.isOver=()=>(this.delta===this.duration||this.D)&&0===this.nextAnimations.length,this.values=t,this.action=i,this.duration=e,this.easing=h,this.R=r,this.eases=t.map((([t,i])=>h(t,i,e)))}V(){this.L.emit("start")}start(){return this.R.includes(this)||this.R.push(this),this}addNextAnimations(t){return t instanceof Array?t.forEach((t=>this.nextAnimations.push(t))):this.nextAnimations.push(t),this}NextAnimation(t,i,s=this.duration,e=this.easing){const h=new J(t,i,s,e,this.R);return this.nextAnimations.push(h),h}onAnimationStart(t,i){return this.L.on("start",t,i)}onAnimationEnd(t,i){return this.L.on("end",t,i)}onEveryAnimationEnd(t,i){return this.L.on("everyEnd",t,i)}onAllAnimationEnd(t,i){return this.L.on("allEnd",t,i)}allOffAnimationEnd(){return this.L.topicOff("end"),this}allOffEveryAnimationEnd(){return this.L.topicOff("everyEnd"),this}allOffAllAnimationEnd(){return this.L.topicOff("allEnd"),this}offAnimationEnd(t){return this.L.off(t,"end")}offEveryAnimationEnd(t){return this.L.off(t,"everyEnd")}offAllAnimationEnd(t){return this.L.off(t,"allEnd")}finish(t=!0){if(this.D=!0,this.R.splice(this.R.indexOf(this),1),this.nextAnimations.length>0){const i=this.nextAnimations[0];return t&&(this.L.listeners("allEnd").forEach(((t,s)=>i.onAllAnimationEnd(t,s))),this.L.listeners("everyEnd").forEach(((t,s)=>i.onEveryAnimationEnd(t,s)))),i.addNextAnimations(this.nextAnimations.slice(1)),i.start(),t&&(this.L.emit("end",i),this.L.emit("everyEnd",i)),i}t&&(this.L.emit("end",void 0),this.L.emit("everyEnd",void 0),this.L.emit("allEnd"))}finishAll(t=!0){let i=this;for(;i;)i=i.finish(t)}getFinalValues(){return this.nextAnimations.length>0?this.nextAnimations[this.nextAnimations.length-1].values.map(Wt):this.values.map(Wt)}getTimeUntilFinish(){let t=this.duration-this.delta;for(let i=0;i<this.nextAnimations.length;i+=1)t+=this.nextAnimations[i].duration-this.nextAnimations[i].delta;return t}}const K=(t,i=60)=>{i>60&&console.log("Note: Animator FPS is usually capped at 60 by the browser!");const s=[];let e,h,r=0;const n=()=>{e=void 0;const o=Date.now();h=h||o,r=o-h,r/1e3>=1/i&&(h=Date.now()-r%(1e3/i),s.forEach((t=>{0===t.delta&&t.V(),t.delta+=r-r%(1e3/i),t.delta>t.duration&&(t.delta=t.duration),t.action(t.eases.map((i=>i(t.delta)))),t.delta===t.duration&&t.finish()})),t()),s.length>0?e=Ot.requestAnimationFrame(n):(e=void 0,h=void 0)};return(t=1e3,i=Q.linear)=>(h,r,o=t)=>{const a=new J(h,r,o,i,s).start();return e||(e=Ot.requestAnimationFrame(n)),a}};var q,tt;!function(t){t.circle="circle",t.ellipse="ellipse"}(q||(q={})),function(t){t.closestSide="closest-side",t.closestCorner="closest-corner",t.farthestSide="farthest-side",t.farthestCorner="farthest-corner"}(tt||(tt={}));const it=i({type:"fillstyle",fillType:"radial-gradient",stops:[{color:b("#f00"),offset:0},{color:b("#0f0"),offset:1}],position:n(.5,.5),shape:q.ellipse,extent:tt.farthestCorner});class st extends it{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("RadialGradientFill requires minimum two color stops to be defined.")}toString(){return`radialGradientFill:${this.shape},${this.extent},${this.position.x},${this.position.y},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");return this.set("stops",t)}getColorStops(){return this.get("stops")}setPosition(t){return this.set("position",t)}getPosition(){return this.get("position")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}setExtent(t){return this.set("extent",t)}getExtent(){return this.get("extent")}}const et=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"radial-gradient"===t.fillType),ht=i({type:"fillstyle",fillType:"linear-gradient",stops:[{color:b("#f00"),offset:0},{color:b("#0f0"),offset:1}],angle:0});class rt extends ht{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("LinearGradientFill requires minimum two color stops to be defined.")}toString(){return`linearGradientFill:${this.angle},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");const i=t.sort(((t,i)=>t.offset-i.offset));return this.set("stops",i)}getColorStops(){return this.get("stops")}setAngle(t,i){return this.set("angle",i?function(t){return 180*t/Math.PI}(t):t)}getAngle(t){return t?Bs(this.get("angle")):this.get("angle")}}const nt=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"linear-gradient"===t.fillType),ot=i({type:"linestyle",lineType:"empty"}),at=new class extends ot{constructor(){super(...arguments),this.thickness=0}setThickness(t){return this}getThickness(){return 0}O(){return 0}setFillStyle(t){return this}getFillStyle(){return O}},lt=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"empty"!==t.lineType);class ut{constructor(t,i,e,h){this.cellIndex=t,this.cellSpan=i,this.cellsAmount=e,this.observedAmount=h,this.x=new ct,this.y=new ct,this.z=new ct,this.L=new s;const r={...t},n={...i};if(h){const t=t=>{this.cellsAmount.x=t.reduce(os,0),this.cellIndex.x=t.reduce(((t,i,s)=>s>=r.x?t:t+i),0),this.cellSpan.x=t.reduce(((t,i,s)=>s>=r.x&&s<r.x+n.x?t+i:t),0),this.L.emit("cell-resize")},i=h.x.N(t);t(h.x._());const s=t=>{this.cellsAmount.y=t.reduce(os,0),this.cellIndex.y=t.reduce(((t,i,s)=>s>=r.y?t:t+i),0),this.cellSpan.y=t.reduce(((t,i,s)=>s>=r.y&&s<r.y+n.y?t+i:t),0),this.L.emit("cell-resize")},e=h.y.N(s);s(h.y._()),this.G=()=>{h.x.W(i),h.y.W(e)}}}U(){return this.G&&(this.G(),this.G=void 0),this}Y(t){return this.L.on("cell-resize",t)}H(t){return this.L.off(t,"cell-resize")}}class ct extends h{constructor(){super(...arguments),this.$=0,this.X=10,this.j=1}Z(){return this.o=!1,this}J(){return this.o=!0,this}getInnerStart(){return this.$}getInnerEnd(){return this.X}getInnerInterval(){return Math.abs(this.getInnerEnd()-this.getInnerStart())}K(t,i){return this.$=t,this.X=i,this.q(),this}tt(t){return this.j=t,this.q(),this}it(t){return t/this.j}q(){const t=this.it(this.X-this.$),i=this.j;void 0!==this.st&&!1!==Ht(t,this.st)||(this.o=!0,this.et=i,this.st=t)}ht(){return this.st}rt(){return this.et}nt(){return this.X<this.$}ot(t,i){return!0}}const dt={d1:t=>new t.scale1DConstructor(0,1,1,void 0),d2:t=>(new t.scaleXYConstructor).ut({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0),d3:()=>new ut({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0)},ft=(t,i,s)=>i===s?t:s.ct(i.dt(t)),At=(t,i,s)=>{if(i===s)return t;const e=i instanceof Js?i.x:i.x instanceof Js?i.x.x:i.x.ft,h=i instanceof Js?i.y:i.y instanceof Js?i.y.y:i.y.ft,r=s instanceof Js?s.x:s.x instanceof Js?s.x.x:s.x.ft,n=s instanceof Js?s.y:s.y instanceof Js?s.y.y:s.y.ft;return{...t,x:ft(t.x,e,r),y:ft(t.y,h,n)}},gt=(t,i,s)=>{const e=t(i,s);return t=>new U({color:e(t)})},yt=(t,i,s)=>{const e=t(i+1,s);return t=>new st({stops:[{offset:0,color:e(t)},{offset:1,color:e(t).getDarker()}]})},mt=(t,i,s,e)=>{const h=t(i+1,e);return t=>new rt({stops:[{offset:0,color:h(t).getDarker()},{offset:.5,color:h(t)},{offset:1,color:h(t).getDarker()}],angle:s||90})},pt=(...t)=>{if(0===t.length)return{remove:Yt};let i=!1;const s=t.map((s=>s.onIntervalChange(((e,h,r)=>((s,e,h)=>{i||(i=!0,t.filter((t=>t!==s)).forEach((t=>t.At(e,h,!1,s.getStopped(),"synchronizedAxis"))),i=!1)})(s,h,r)))));let e=!1;const h=t.map((i=>i.onStoppedStateChanged(((s,h)=>((i,s)=>{e||(e=!0,t.filter((t=>t!==i)).forEach((t=>t.setStopped(s))),e=!1)})(i,h)))));return{remove:()=>{t.forEach(((t,i)=>{t.offIntervalChange(s[i]),t.offStoppedStateChanged(h[i])}))}}},vt=(t,i,s,e)=>{if(!s||0===s.length)throw new Error("Invalid use regularColorSteps 'colorPalette' is undefined or empty");const h=null==e?void 0:e.formatLabels,r=null==e?void 0:e.alpha;return s.map(((e,n)=>{const o=t+n/(s.length-1)*(i-t);return{color:void 0!==r?e.setA(r):e,value:o,label:h?h(o):void 0}}))},St=t=>t&&"object"==typeof t&&"column"in t&&"row"in t,bt=t=>t&&"object"==typeof t&&"z"in t&&"column"in t&&"row"in t,xt=t=>t&&"object"==typeof t&&"position"in t&&"open"in t&&"high"in t&&"isPacked"in t,Mt=t=>t&&"object"==typeof t&&"annulus"in t&&"sector"in t,_t=t=>t&&"object"==typeof t&&"index"in t,wt=t=>t&&"object"==typeof t&&"xSize"in t&&"ySize"in t&&"zSize"in t,Ct=t=>t&&"object"==typeof t&&"figure"in t&&"x1"in t&&"y2"in t&&"height"in t,kt=t=>t&&"object"==typeof t&&"figure"in t&&"start"in t&&"end"in t&&"median"in t&&"upperQuartile"in t,Tt=t=>t&&"object"==typeof t&&"figure"in t&&"x"in t&&"radiusX"in t&&"radiusY"in t,Ft=t=>t&&"object"==typeof t&&"figure"in t&&"x"in t&&"coordinates"in t,It=t=>t&&"object"==typeof t&&"figure"in t&&"startX"in t&&"endX"in t,Pt=t=>t&&"object"==typeof t&&"x"in t&&"y"in t;class Dt extends Error{constructor(t,i){super(`ChartError: ${t} ${i?`in ${i.constructor.name}`:""}`),Object.setPrototypeOf(this,Dt.prototype)}}class Bt extends Error{constructor(t,i,s=!1){const e=`EngineError: ${t} ${i?`in ${i.constructor.name}`:""}`;super(e),s&&Ot.alert(e),Object.setPrototypeOf(this,Bt.prototype)}}class Lt extends Bt{constructor(t){super(t),Object.setPrototypeOf(this,Lt.prototype)}}var Rt,Et,zt,Vt;!function(t){t[t.Content=0]="Content",t[t.PaddedContent=1]="PaddedContent",t[t.PaddedBackground=2]="PaddedBackground",t[t.Everything=3]="Everything"}(Rt||(Rt={})),function(t){t[t.never=0]="never",t[t.always=1]="always",t[t.whenHovered=2]="whenHovered",t[t.whenDragged=3]="whenDragged",t[t.whenNotDragged=4]="whenNotDragged",t[t.whenHoveredOrDragged=5]="whenHoveredOrDragged"}(Et||(Et={})),function(t){t[t.notDraggable=0]="notDraggable",t[t.draggable=1]="draggable",t[t.onlyHorizontal=2]="onlyHorizontal",t[t.onlyVertical=3]="onlyVertical"}(zt||(zt={})),function(t){t[t.Up=0]="Up",t[t.Right=1]="Right",t[t.Down=2]="Down",t[t.Left=3]="Left"}(Vt||(Vt={}));const Ot="undefined"!=typeof window?window:"undefined"!=typeof global&&global._lcjs?global._lcjs:{},Nt=(t,i)=>t.x===i.x&&t.y===i.y,Gt=t=>t!==Ki&&t!==qi&&!Number.isNaN(t)&&Number.isFinite(t)&&t!==1/0&&t!==-1/0,Wt=t=>t[1],Ut=t=>t.dispose(),Yt=()=>{},Ht=(t,i)=>t===i,$t=(t,i,s)=>s>i?Math.min(Math.max(t,i),s):Math.min(Math.max(t,s),i),Xt=t=>Array.prototype.concat.apply([],t),jt=(t,i)=>void 0===t||Number.isNaN(t)?i:t,Zt=t=>t.yt(),Qt=t=>t.vt(),Jt=t=>t.St(),Kt=t=>t.bt(),qt=t=>t.min.x,ti=t=>t.max.x,ii=t=>t.min.y,si=t=>t.max.y,ei=(t,i,s,e,h)=>{if(t.length>0){let r=h?e(h):void 0;for(let e=0;e<t.length;e+=1){const h=i(t[e]);void 0!==h&&(r=void 0!==r?s(r,h):h)}return r}if(h)return e(h)},hi=(t,i)=>t.position===i.position&&t.high===i.high&&t.low===i.low,ri=n(0,1),ni=n(1,0),oi=n(0,-1),ai=n(-1,0),li=n(0,0),ui=t=>{switch(t){case Vt.Up:return ri;case Vt.Right:return ni;case Vt.Down:return oi;case Vt.Left:return ai;default:return li}},ci=t=>t===Vt.Left||t===Vt.Right,di=t=>{t.stopPropagation(),t.preventDefault()},fi=(t,i)=>{if(!i)return t;const s=t.length,e=new Float32Array(2*s);let h=0;for(let i=0;i<s;i+=1){const s=t[i],r=Math.fround(s);e[h+0]=r,e[h+1]=s-r,h+=2}return e},Ai=(t,i,s=Float32Array)=>{if(!i){const i=t.length,e=new s(2*i);let h=0;for(let s=0;s<i;s+=1){const i=t[s];e[h+0]=i.x,e[h+1]=i.y,h+=2}return e}const e=t.length,h=new s(4*e);let r=0;for(let i=0;i<e;i+=1){const s=t[i],e=Math.fround(s.x),n=Math.fround(s.y);h[r+0]=e,h[r+1]=n,h[r+2]=s.x-e,h[r+3]=s.y-n,r+=4}return h},gi=t=>{const i=t.length,s=new Float32Array(3*i);let e=0;for(let h=0;h<i;h+=1){const i=t[h];s[e+0]=i.x,s[e+1]=i.y,s[e+2]=i.z,e+=3}return s},yi=t=>i=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)},mi=t=>{let i=t.length;for(let s=0;s<i-1;s+=1)t[s].x===t[s+1].x&&t[s].y===t[s+1].y&&(t.splice(s,1),s-=1,i-=1);return t},pi=t=>{const i=Math.log(t);return t=>Math.log(t)/i},vi=pi(Math.E),Si=(t,i)=>{const s=i[t];return s?s():void 0},bi=(t,i)=>{let s;if(i)s=i;else{const i={x:0,y:0};for(let s=0;s<t.length;s+=1)i.x+=t[s].x/t.length,i.y+=t[s].y/t.length;s=i}return t.sort(((t,i)=>Ls(Cs(t,s))-Ls(Cs(i,s))))},xi=(t,i,s)=>{if(0===t.length)return!1===s.canReturnB?i.slice():i;const e=i.length;if(e<1e5)return t.push.apply(t,i),t;for(let s=0;s<e;s+=1)t.push(i[s]);return t},Mi=(t,i,s)=>s<0?t:s>1?i:S(t.getR()+s*(i.getR()-t.getR()),t.getG()+s*(i.getG()-t.getG()),t.getB()+s*(i.getB()-t.getB()),t.getA()+s*(i.getA()-t.getA())),_i=t=>255===t.getA()?t:t.setA(255),wi=(()=>{const t=S(0,0,0);return i=>(i=_i(i),new st({shape:q.circle,extent:tt.farthestCorner,position:{x:.2,y:.8},stops:[{offset:0,color:i},{offset:1,color:Mi(i,t,.5)}]}))})(),Ci=(()=>{const t=t=>{var i;if(t){if(Y(t)){if(0===t.getColor().getA())return;return t.getColor()}if(et(t)||nt(t)){const s=t.getColorStops();return 3===s.length?s[1].color:null===(i=s[0])||void 0===i?void 0:i.color}Z(t)}};return(i,s,e,h)=>{var r;const n=[];if(h.fill&&n.push(h.fill),h.fill2&&n.push(h.fill2),h.stroke){const t=h.stroke.getFillStyle();t!==O&&("stroke"===(null===(r=h.behavior)||void 0===r?void 0:r.priority)?n.unshift(t):n.push(t))}if(h.point3D){const t=h.point3D;n.push(t.getFillStyle())}let o;if(h.behavior&&!0===h.behavior.colorStep){const[i,e]=n.reduce(((i,s)=>{if(i[0]&&i[1])return i;const e=t(s);return e&&(void 0===i[0]?i[0]=e:i[1]=e),i}),[void 0,void 0]);o=i&&e?(a=i)===(l=e)||a.getR()===l.getR()&&a.getG()===l.getG()&&a.getB()===l.getB()?wi(a):(a=_i(a),l=_i(l),new rt({angle:0,stops:[{offset:0,color:l},{offset:.5,color:l},{offset:.5,color:a},{offset:1,color:a}]})):s.uiButtonFillStyle}else{const i=n.reduce(((i,s)=>i||t(s)),void 0);o=i?e?new U({color:i}):wi(i):s.uiButtonFillStyle}var a,l;i.setButtonOnFillStyle(o)}})(),ki=t=>{const i=t;if(Z(i))return{lut:i.getPalette(),lookUpProperty:i.getLookUpProperty()}},Ti=t=>{let i=0;return()=>(i+=1,`${t}-${i}`)},Fi=(t,i)=>{let s="string"==typeof t?t:String(t);const e=s.indexOf(".");let h=e>=0?e:s.length;for(;h<i;h+=1)s=`0${s}`;return s},Ii=(t,i)=>"function"==typeof t?t(i):t,Pi=t=>t.ctrlKey?Math.sign(t.deltaY)*Math.min(.05*Math.abs(t.deltaY),1):Math.sign(t.deltaY),Di=(t,i)=>i(),Bi=()=>new Error("LightningChart JS encountered an unexpected error.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact");new U({color:S(255,255,255,1)});const Li=t=>t===ts||t.min.x===ts.min.x&&t.max.x===ts.max.x&&t.min.y===ts.min.y&&t.max.y===ts.max.y,Ri=t=>Array.from(new Set(t)),Ei=t=>t.filter((t=>void 0!==t)),zi=t=>"boolean"==typeof t?t?1:0:t>1?1:t<0?0:t,Vi=(t,i,s)=>{i.length<=0||(t.setText(s.label).setOn(i[0].getVisible()),s.style&&t.setButtonOnFillStyle(s.style),s.toggleVisibilityOnClick&&t.onSwitch(((t,s)=>i.forEach((t=>t.setVisible(s))))),t.onMouseEnter((()=>i.forEach((t=>t.setHighlight(!0))))),t.onMouseLeave((()=>i.forEach((t=>t.setHighlight(!1))))),i.forEach((i=>i.onMouseEnter((()=>t.setHighlight(!0))))),i.forEach((i=>i.onMouseLeave((()=>t.setHighlight(!1))))),i.forEach((i=>i.onTouchStart((()=>t.setHighlight(!0))))),i.forEach((i=>i.onTouchEnd((()=>t.setHighlight(!1))))))},Oi=(t,i)=>{throw new Error(i)},Ni=t=>{let i;return()=>i||(i=t(),i)},Gi=t=>{if(t===at)return 0;const i=t.getThickness();return i<0?1:1*i},Wi=(t,i,s,e)=>{const h=`LightningChart JS Resources not found.\nresourcesBaseUrl: "${t}"\ninitiator: ${s}\nresource url: ${i}\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/error-resources-not-found/`;if(e.shouldCrash)throw Ot.alert(h),new Error(h);Ot.console.warn(h)},Ui=(t,i,s,e=0)=>{if(t<s(e)||s(i)<t)return;const h=i;for(;e!==i;){const h=Math.ceil((e+i)/2);t<s(h)?i=h-1:e=h}const r=Math.abs(t-s(e));return e<h&&Math.abs(t-s(e+1))<r?e+1:e},Yi=()=>{const t=new Map;return{xt:i=>(i.setMouseEnterEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Mt(i,s,e,h)})),i.setMouseLeaveEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h._t(i,s,e)})),i.setMouseClickEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.wt(i,s,e,h)})),i.setMouseDoubleClickEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Ct(i,s,e,h)})),i.setMouseDownEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.kt(i,s,e,h)})),i.setMouseUpEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Tt(i,s,e,h)})),i.setMouseMoveEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Ft(i,s,e,h)})),i.setMouseDragEventHandler(((i,s,e,h,r,n,o)=>{const a=n&&t.get(n);a&&a.It(i,s,e,h,r,n,o)})),i.setMouseDragStartEventHandler(((i,s,e,h,r)=>{const n=h&&t.get(h);n&&n.Pt(i,s,e,h,r)})),i.setMouseDragStopEventHandler(((i,s,e,h,r,n)=>{const o=r&&t.get(r);o&&o.Dt(i,s,e,h,r,n)})),i.setMouseWheelEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Bt(i,s,e,h)})),i.setTouchStartEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Lt(i,s,e,h)})),i.setTouchMoveEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Rt(i,s,e,h)})),i.setTouchEndEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Et(i,s,e,h)})),i),zt:(i,s)=>{t.set(i,s)},Vt:()=>{t.clear()}}},Hi={left:0,right:0,top:0,bottom:0},$i=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER),Xi=(t,i,s)=>{i&&i.Ot();const e=s();return{Nt:t,Ot:()=>{e.forEach((i=>t.Gt(i)))}}},ji=(t,i,s)=>{let e;const h=()=>(e=s(),e),r={...t,resolve:()=>e||h()};for(const t of Object.keys(i))Object.defineProperty(r,t,{get:function(){return e?e[t]:h()[t]}});return r},Zi=t=>{if(t)return"resolve"in t?t.resolve():t},Qi=t=>{let i=t;return{Wt:t=>{const s=i;return i=s+t,[s,t]}}},Ji={add:(t,i)=>l(t.x+i,t.y+i,t.z+i),addVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x+=t.x,s.y+=t.y,s.z+=t.z;return s},subtract:(t,i)=>l(t.x-i,t.y-i,t.z-i),subtractVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x-=t.x,s.y-=t.y,s.z-=t.z;return s},multiply:(t,i)=>l(t.x*i,t.y*i,t.z*i),divide:(t,i)=>l(t.x/i,t.y/i,t.z/i),multiplyVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x*=t.x,s.y*=t.y,s.z*=t.z;return s},divideVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x/=t.x,s.y/=t.y,s.z/=t.z;return s},length:t=>Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),normalize:t=>Ji.divide(t,Ji.length(t)),dot:(t,i)=>t.x*i.x+t.y*i.y+t.z*i.z,cross:(t,i)=>l(t.y*i.z-t.z*i.y,t.z*i.x-t.x*i.z,t.x*i.y-t.y*i.x),angle:(t,i)=>Math.acos(Ji.dot(t,i)/(Ji.length(t)*Ji.length(i))),rotateAroundAxis(t,i,s){const e=Math.cos(s),h=Math.sin(s),r=Ji.dot(i,t),n=Ji.cross(i,t);return Ji.addVec(Ji.multiply(t,e),Ji.addVec(Ji.multiply(i,(1-e)*r),Ji.multiply(n,h)))},lerp:(t,i,s)=>(s=$t(s,0,1),Ji.addVec(Ji.multiply(t,1-s),Ji.multiply(i,s))),equals:(t,i)=>Ht(t.x,i.x)&&Ht(t.y,i.y)&&Ht(t.z,i.z),abs:t=>({x:Math.abs(t.x),y:Math.abs(t.y),z:Math.abs(t.z)}),sign:t=>({x:Math.sign(t.x),y:Math.sign(t.y),z:Math.sign(t.z)})},Ki=Number.MAX_SAFE_INTEGER,qi=-Number.MAX_SAFE_INTEGER,ts=c(n(Ki,Ki),n(qi,qi)),is=c(l(Ki,Ki,Ki),l(qi,qi,qi)),ss=(t,i)=>{const s=Math.log(t)/Math.log(i);return Math.floor((t=>(Math.ceil(t)-t<1e-4?t=Math.ceil(t):t-Math.floor(t)<1e-4&&(t=Math.floor(t)),t))(s))},es=(t,i)=>!(i.min.x>t.max.x||i.max.x<t.min.x||i.min.y>t.max.y||i.max.y<t.min.y),hs=(t,i)=>!(t[1].x<i[0].x||t[0].x>i[1].x||t[3].y<i[0].y||t[0].y>i[3].y),rs=(t,i)=>({min:{x:Math.min(t[0].x,i[0].x),y:Math.min(t[0].y,i[0].y)},max:{x:Math.max(t[2].x,i[2].x),y:Math.max(t[2].y,i[2].y)}}),ns=t=>{const i=t.length;for(let s=0;s<i;s+=1)for(let e=s+1;e<i;e+=1)if(es(t[s],t[e]))return!0;return!1},os=(t,i)=>i+t,as=(t,i,s)=>{const e=Cs(i,t),h=e.x*e.x+e.y*e.y;if(0===h)return t;const r=Cs(s,t),o=(r.x*e.x+r.y*e.y)/h;return o<=0?t:o>=1?i:n(t.x+o*e.x,t.y+o*e.y)},ls=(t,i,s)=>s>i?t>=i&&t<=s:t>=s&&t<=i,us=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)},cs=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return s*s+e*e},ds=(t,i,s)=>ws(t,_s(Cs(i,t),s)),fs=(t,i,s)=>Ji.addVec(t,Ji.multiply(Ji.subtractVec(i,t),s));function As(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,h=t[0].y,r=t[0].y;for(let n=0;n<i;n+=1){const i=t[n];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>h&&(h=i.y),i.y<r&&(r=i.y)}return c(n(e,r),n(s,h))}return ts}function gs(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,h=t[0].y,r=t[0].y,n=t[0].z,o=t[0].z;for(let a=0;a<i;a+=1){const i=t[a];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>h&&(h=i.y),i.y<r&&(r=i.y),i.z>n&&(n=i.z),i.z<o&&(o=i.z)}return c(l(e,r,o),l(s,h,n))}return is}const ys=(...t)=>{const i={min:{x:Ki,y:Ki},max:{x:qi,y:qi}};for(const s of t)i.min.x=i.min.x<s.min.x?i.min.x:s.min.x,i.max.x=i.max.x>s.max.x?i.max.x:s.max.x,i.min.y=i.min.y<s.min.y?i.min.y:s.min.y,i.max.y=i.max.y>s.max.y?i.max.y:s.max.y;return i},ms=(t,i)=>c(l(t.min.x<i.min.x?t.min.x:i.min.x,t.min.y<i.min.y?t.min.y:i.min.y,t.min.z<i.min.z?t.min.z:i.min.z),l(t.max.x>i.max.x?t.max.x:i.max.x,t.max.y>i.max.y?t.max.y:i.max.y,t.max.z>i.max.z?t.max.z:i.max.z));function ps(t,i,s,e){const h=t.x-e.x,r=t.y-e.y,n=e.x-s.x,o=s.y-e.y,a=o*h+n*r,l=(e.y-i.y)*h+(i.x-e.x)*r,u=o*(i.x-e.x)+n*(i.y-e.y);return u<0?a<=0&&l<=0&&a+l>=u:a>=0&&l>=0&&a+l<=u}function vs(t,i,s){return n(Math.cos(s)*(t.x-i.x)+Math.sin(s)*(t.y-i.y)+i.x,-Math.sin(s)*(t.x-i.x)+Math.cos(s)*(t.y-i.y)+i.y)}function Ss(t,i){return n(t.x-i.x,t.y-i.y)}function bs(t){const i=Ms(t);return 0===i?n(0,0):n(t.x/i,t.y/i)}function xs(t,i){let s={x:i.x-t.x,y:i.y-t.y};s=bs(s);const e=Math.PI/2,h=s.x;return s.x=-Math.sin(e)*s.y,s.y=h*Math.sin(e),s}function Ms(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function _s(t,i){return n(t.x*i,t.y*i)}function ws(t,i){return n(t.x+i.x,t.y+i.y)}function Cs(t,i){return n(t.x-i.x,t.y-i.y)}function ks(t,i){return n(t.x*i.x,t.y*i.y)}function Ts(t,i){return n(t.x/i.x,t.y/i.y)}function Fs(t){return _s(t,-1)}function Is(t,i){return t.x*i.x+t.y*i.y}const Ps=(t,i,s)=>{const e=(s.y-i.y)/(s.x-i.x),h=i.y+(t-i.x)*e;return n(t,h)},Ds=(t,i,s)=>{const e=(s.y-i.y)/(s.x-i.x),h=i.x+(t-i.y)/e;return n(h,t)};function Bs(t){return t*Math.PI/180}function Ls(t){return 180*Math.atan2(t.y,t.x)/Math.PI}function Rs(t){return n(Math.cos(t),Math.sin(t))}const Es=(t,i,s,e)=>{let h,r,o,a;if(i.x-t.x!=0||e.x-s.x!=0)return i.x-t.x==0?(o=i.x,r=(e.y-s.y)/(e.x-s.x),a=r*(o-s.x)+s.y):e.x-s.x==0?(o=e.x,h=(i.y-t.y)/(i.x-t.x),a=h*(o-t.x)+t.y):(h=(i.y-t.y)/(i.x-t.x),r=(e.y-s.y)/(e.x-s.x),o=(s.y-r*s.x+h*t.x-t.y)/(h-r),a=h*(o-t.x)+t.y),n(o,a)},zs=(t,i)=>{const s=t.length,e=i.length,h=new Uint16Array(s+e);return h.set(t,0),h.set(i,s),h};class Vs{constructor(){this.Ut=!0}getInnerStart(){return this.$}getInnerEnd(){return this.X}getInnerInterval(){return Math.abs(this.X-this.$)}K(t,i){return this.Ut=t!==this.$||i!==this.X,this.$=t,this.X=i,this}Z(){return this.Ut=!1,this}J(){return this.Ut=!0,this}}class Os extends Vs{constructor(t,i,s,e){if(super(),this.Yt=!0,this.Ht=!0,this.$t=[0,0],this.Xt=!0,this.jt=t,this.Zt=i,this.Qt=s,this.Jt=t,this.Kt=i,e){const t=e.N(this.qt.bind(this));this.qt(e._()),this.ti=()=>e.W(t)}}tt(t){return this.j=t,this.Ht=!0,this}ii(t){return this.$t=t.map(Math.abs),this.Xt=!0,this}si(){return this.jt/this.Qt*this.j+this.$t[0]}ei(){return(this.jt+this.Zt)/this.Qt*this.j-this.$t[1]}hi(){return this.getCellSize()-this.ri()}ni(){return this.j}getCellSize(){return this.oi(this.j)}ri(){return this.$t[0]+this.$t[1]}ai(){return this.$t}qt(t){this.Qt=t.reduce(os,0),this.jt=t.reduce(((t,i,s)=>s>=this.Jt?t:t+i),0),this.Zt=t.reduce(((t,i,s)=>s>=this.Jt&&s<this.Jt+this.Kt?t+i:t),0),this.Yt=!0,this.li()}oi(t){return t*this.Zt/this.Qt}Z(){return super.Z(),this.Ht=!1,this.Xt=!1,this.Yt=!1,this}J(){return super.J(),this.Ht=!0,this.Xt=!0,this.Yt=!0,this}}class Ns extends Os{constructor(t,i,s,e){super(t,i,s,e),this.ui={internal:10,function:Gs(10),number:10},this.j=1e3,this.K(1,1e3),this.ci=this.di()}ot(t,i,s,e,h){if(t===i)return!1;const r=Math.min(t,i)<Us,n=Math.max(t,i)>Ys;return!r&&!n||!!h&&(i>t?{start:r?Us:t,end:n?Ys:i}:{start:n?Ys:t,end:r?Us:i})}dt(t){const i=this.si(),s=this.ei(),e=Math.max(t,Us);return i+(this.ui.function(e)-this.ci.scaleStartLog)/this.ci.scaleIntervalLog*(s-i)}ct(t){const i=this.si(),s=(t-i)/(this.ei()-i),e=this.ci.scaleStartLog+s*this.ci.scaleIntervalLog;return this.ui.number**e}li(){this.ui&&this.di()}K(t,i){return super.K(t,i),this.ui&&this.di(),this}ii(t){return super.ii(t),this.ui&&this.di(),this}tt(t){return super.tt(t),this.ui&&this.di(),this}fi(t){return this.ui={internal:t,function:Gs(t),number:Ws(t)},this}Ai(){return this.ui.internal}gi(t,i){const s=this.dt(t)+i;return this.ct(s)}yi(){return this.Ht||this.Ut||this.Xt||this.Yt}di(){const t=this.ui.function(this.$),i=this.ui.function(this.X)-t,s=2*this.si()/this.j-1,e=2*this.ei()/this.j-1-s;return this.ci={scaleStartLog:t,scaleIntervalLog:i,viewportStart:s,viewportSize:e},this.ci}mi(){return this.ci}}const Gs=t=>"e"===t?vi:pi(t),Ws=t=>"e"===t?Math.E:t,Us=.9*10**-4,Ys=1.1*10**25,Hs=[{prefix:"T",unit:10**12},{prefix:"B",unit:10**9},{prefix:"M",unit:1e6},{prefix:"K",unit:1e3}],$s=(t,i,s)=>{const e=Math.abs(s-i),h=Math.max(2-ss(e,10),0);return t.toFixed(h)},Xs={Numeric:(t,i)=>$s(t,i.getInnerStart(),i.getInnerEnd()),NumericUnits:(t,i)=>{const s=Math.abs(i.getInnerEnd()-i.getInnerStart()),e=t<0;t=Math.abs(t);let h="",r="";if(s>=1e3&&t>1e3){let i="";for(const s of Hs){const e=Math.round(1e3*t/s.unit)/1e3;if(e>=1){i=e.toString(),r=s.prefix;break}}h=(e?"-":"")+i}else{let i=String(Math.floor(t));const r=ss(t,1e3);for(let t=1;t<=r;t+=1){const s=i.length-(3*t+(t-1));i=`${i.substring(0,s)} ${i.substring(s,i.length)}`}h=(e?"-":"")+i+(s<=10?((t,i)=>{if(0===i)return"";let s=(Math.abs(t)-Math.abs(Math.floor(t))).toString().substring(1);return s.length>i&&(s=s.substring(0,i+1)),s})(t,2-ss(s,10)):"")}return h+=r,h},LogarithmicExponentsRounded:(t,i,s,e=10)=>{const h=Gs(e)(t);return`${e}${js(h)}`},LogarithmicExponents:(t,i,s,e=10)=>{const h=Gs(e),r=Math.floor(h(t)),n=t/Ws(e)**r;return`${Math.round(n)}×${e}${js(r)}`},LogarithmicExtreme:(t,i,s,e=10)=>{const h=Gs(e),r=Math.floor(h(t));return`${(t/Ws(e)**r).toFixed(2)}×${e}${js(r)}`},LogarithmicNoExponents:(t,i,s,e=10)=>{const h=Gs(e);if("e"===e)return`${Math.floor(h(t))}e`;const r=t.toString();if(t>1)return r;const n=Math.floor(h(t));return t.toFixed(Math.abs(n))},Scientific:(t,i)=>{const s=Math.max(Math.abs(i.getInnerStart()),Math.abs(i.getInnerEnd())),e=Math.floor(Math.log10(s));return 0===t?`0.00e${e<0?"":"+"}${e}`:t.toExponential(2)}},js=t=>Math.round(t).toString().split("").map((t=>{switch(t){case"0":return"⁰";case"1":return"¹";case"2":return"²";case"3":return"³";case"4":return"⁴";case"5":return"⁵";case"6":return"⁶";case"7":return"⁷";case"8":return"⁸";case"9":return"⁹";case"-":return"⁻";default:return t}})).join("");class Zs extends Os{constructor(t,i,s,e){super(t,i,s,e),this.pi=!1,this.vi=!1,this.Si=0,this.j=1e3,this.K(0,10),this.q()}yi(){return this.vi}ot(t,i,s,e,h){if(t===i)return!1;const r=Math.abs(e-s),n=Math.abs(i-t);if(!this.pi){const s=((t,i,s)=>{const e=((t,i)=>{if(i<Ki&&i>qi&&t<Ki&&t>qi){const s=Math.abs(t/2**23),e=Math.abs(i/2**23),h=Math.min(s,e);return 10**Math.floor(Math.log10(h))}})(t,i);if(void 0!==e)return e*s})(t,i,this.getCellSize());if(void 0===s)return!1;if(n>s)return!0;const e=(i+t)/2,o=(h?s/2:r/2)*(t>i?-1:1);return{start:e-o,end:e+o}}const o=10**-(12-Math.log10(Math.max(Math.abs(t),1)));if(n>o)return!0;const a=(i+t)/2,l=(h?o/2:r/2)*(t>i?-1:1);return{start:a-l,end:a+l}}li(){this.q()}dt(t){return this.si()+(t-this.$)/(this.X-this.$)*(this.ei()-this.si())}ct(t){return this.$+(t-this.si())/(this.ei()-this.si())*(this.X-this.$)}K(t,i){return super.K(t,i),this.q(),this}ii(t){return super.ii(t),this.q(),this}tt(t){return super.tt(t),this.bi=Qs(this.X-this.$,this.$t,this.j,this.Zt,this.Qt),this.q(),this}xi(){return this.pi=!0,this}Mi(){return this.pi}_i(){return Math.abs(this.wi)}Ci(){return this._i()/this.bi}ki(){return this.Ti}Fi(){return this.Ii}getPixelSize(){return this.bi}mi(){return this.ci}J(){return super.J(),this.vi=!0,this}Z(){return super.Z(),this.vi=!1,this}Pi(t,i=Xs.Numeric){return i(t,this)}Di(){const t=Math.abs(this.getInnerEnd()).toString().length,i=Math.abs(this.getInnerStart()).toString().length;return t>i?t:i}Bi(t){return Qs(t,this.$t,this.j,this.Zt,this.Qt)}q(){let t=this.$,i=this.X,s=0;this.pi&&(t=0,i=this.X-this.$,s=this.$);const e=i-t,h=Qs(e,this.$t,this.j,this.Zt,this.Qt);this.Ii=t-this.$t[0]*h,this.Ti=i+this.$t[1]*h;const r=this.Ti-this.Ii,n=r-this.wi,o=Math.abs(n/h),a=e-this.Si,l=Math.abs(a/h);(!this.ci||o>=.4||l>=.4)&&(this.Si=e,this.wi=r,this.bi=h,this.vi=!0);const u=this.wi*this.Qt/(2*this.Zt),c=-(this.Ii-this.wi*this.jt/this.Zt)-u,d=2*this.si()/this.j-1,f=2*this.ei()/this.j-1-d;this.ci={displacement:c,scaling:u,highPrecisionOffset:s,viewportStart:d,viewportSize:f,scaleStartLog:0,scaleIntervalLog:0}}gi(t,i){return t+this.bi*i}}const Qs=(t,i,s,e=1,h=1)=>t/(s*e/h-(i[0]+i[1]));class Js{Li(t,i){return"x"in t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=i),this}Z(){return this.x.Z(),this.y.Z(),this}J(){return this.x.J(),this.y.J(),this}tt(t,i){return"object"==typeof t?(this.x.tt(t.x),this.y.tt(t.y)):(this.x.tt(t),this.y.tt(i)),this}ni(){return n(this.x.ni(),this.y.ni())}Ri(t){return this.x.ii(t),this}Ei(t){return this.y.ii(t),this}ri(){return n(this.x.ri(),this.y.ri())}zi(t,i){return this.x.K(t,i),this}Vi(t,i){return this.y.K(t,i),this}getInnerIntervalPixels(){const t=this.x.getCellSize(),i=this.y.getCellSize();return{x:t-this.x.ri(),y:i-this.y.ri()}}Oi(){return this.x.yi()||this.y.yi()}}class Ks extends Js{constructor(){super(...arguments),this.Ni="LinearScaleXY"}ut(t,i,s,e){return this.x=new Zs(t.x,i.x,s.x,e?e.x:void 0),this.y=new Zs(t.y,i.y,s.y,e?e.y:void 0),this}Mi(){return this.x.Mi()||this.y.Mi()}Gi(){return n(this.x.getPixelSize(),this.y.getPixelSize())}mi(){return{x:this.x.mi(),y:this.y.mi()}}gi(t,i){const s=this.Gi();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}Wi(t,i,s,e){const h=this.Gi(),r=xs(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class qs extends Js{constructor(){super(...arguments),this.Ni="MixedScaleXY"}Mi(){return!1}gi(t,i){const s=this.x.dt(t.x),e=this.y.dt(t.y),h={x:s+i.x,y:e+i.y};return{x:this.x.ct(h.x),y:this.y.ct(h.y)}}Wi(t,i,s,e){const h={x:this.x.dt(t.x),y:this.y.dt(t.y)},r={x:this.x.dt(i.x),y:this.y.dt(i.y)},n=bs(Cs(r,h)),o=xs(r,h),a={x:h.x+n.x*e+o.x*s,y:h.y+n.y*e+o.y*s};return{x:this.x.ct(a.x),y:this.y.ct(a.y)}}mi(){const t=this.x.mi(),i=this.y.mi();return{uScaleStart:[this.x.$,this.y.$],uScaleInterval:[this.x.getInnerInterval(),this.y.getInnerInterval()],uScaleStartLog:[t.scaleStartLog,i.scaleStartLog],uScaleIntervalLog:[t.scaleIntervalLog,i.scaleIntervalLog],uViewportStart:[t.viewportStart,i.viewportStart],uViewportSize:[t.viewportSize,i.viewportSize]}}}const te=(t,i)=>t instanceof Ns||i instanceof Ns?(new qs).Li(t,i):(new Ks).Li(t,i),ie=t=>"client"===t,se=t=>!!(t&&"object"==typeof t&&"clientX"in t&&"number"==typeof t.clientX&&"clientY"in t&&"number"==typeof t.clientY),ee=t=>"relative"===t,he=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y),re=(t,i,s)=>{if(t){const t={x:s.x.si(),y:s.y.si(),width:s.x.hi(),height:s.y.hi()};i.forEach((i=>{i.Ui=t}))}else i.forEach((t=>{t.Ui=void 0}))},ne=(t,i)=>{var s;return i?"string"==typeof i?`${t} ${i}`:!1!==(null===(s=i.Yi)||void 0===s?void 0:s.displayInCursor)&&i.getUnits()?`${t} ${i.getUnits()}`:t:t},oe=t=>{let i=!1,s={type:"linear"};if(t&&(void 0!==t.opposite&&(i=t.opposite),t.type&&"linear-highPrecision"===t.type&&(s={type:"linear-highPrecision"}),t.type&&"logarithmic"===t.type)){let i=10;if(t.base)if("E"===t.base||"e"===t.base||"natural"===t.base)i="e";else if("number"==typeof t.base)i=t.base;else if("string"==typeof t.base)try{i=Number(t.base)}catch(i){console.warn(`Unidentified logarithmic base "${t.base}"`)}s={base:i,type:"logarithmic"}}return{opposite:i,type:s}},ae=(t,i,s,e=1)=>$t(t+.1*e*(i-t)+.5*e*s.getPixelSize()*Math.sign(i-t),t,i),le=(t,i,s,e=1)=>{const h=s.dt(t),r=s.dt(i);return $t(s.ct(h+.1*e*(r-h)+.5*e*Math.sign(r-h)),t,i)};var ue;!function(t){t[t.noHighlighting=0]="noHighlighting",t[t.onHover=1]="onHover"}(ue||(ue={}));class ce{constructor(t,i,e,h){this.Hi=!0,this.$i=ue.onHover,this.Xi=!1,this.ji=!0,this.L=new s,this.Zi=[],this.Qi=[],this.onMouseEnter=t=>this.L.on("mouseEnter",t),this.onMouseLeave=t=>this.L.on("mouseLeave",t),this.onMouseClick=t=>this.L.on("mouseClick",t),this.onMouseDoubleClick=t=>this.L.on("mouseDoubleClick",t),this.onMouseDown=t=>this.L.on("mouseDown",t),this.onMouseUp=t=>this.L.on("mouseUp",t),this.onMouseMove=t=>this.L.on("mouseMove",t),this.offMouseEnter=t=>this.L.off(t,"mouseEnter"),this.offMouseLeave=t=>this.L.off(t,"mouseLeave"),this.offMouseClick=t=>this.L.off(t,"mouseClick"),this.offMouseDoubleClick=t=>this.L.off(t,"mouseDoubleClick"),this.offMouseDown=t=>this.L.off(t,"mouseDown"),this.offMouseUp=t=>this.L.off(t,"mouseUp"),this.offMouseMove=t=>this.L.off(t,"mouseMove"),this.offMouseDragStart=t=>this.L.off(t,"mouseDragStart"),this.offMouseDrag=t=>this.L.off(t,"mouseDrag"),this.offMouseDragStop=t=>this.L.off(t,"mouseDragStop"),this.offMouseWheel=t=>this.L.off(t,"mouseWheel"),this.Mt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseEnter",this,i,h),this.$i===ue.onHover&&this.setHighlight(!0)},this._t=(t,i,s)=>{this.L.emit("mouseLeave",this,i,void 0),this.$i===ue.onHover&&this.setHighlight(!1)},this.Ft=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseMove",this,i,h)},this.wt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseClick",this,i,h)},this.Ct=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseDoubleClick",this,i,h)},this.kt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseDown",this,i,h)},this.Tt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseUp",this,i,h)},this.Pt=(t,i,s,e,h)=>{const r=this.Ji(h,i);this.L.emit("mouseDragStart",this,i,s,r)},this.It=(t,i,s,e,h,r,n)=>{const o=this.Ji(n,i);this.L.emit("mouseDrag",this,i,s,e,h,o)},this.Dt=(t,i,s,e,h,r)=>{const n=this.Ji(r,i);this.L.emit("mouseDragStop",this,i,s,e,n)},this.Bt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseWheel",this,i,h)},this.Lt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("touchStart",this,i,h),this.$i===ue.onHover&&this.setHighlight(!0)},this.Rt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("touchMove",this,i,h)},this.Et=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("touchEnd",this,i,h),this.$i===ue.onHover&&this.setHighlight(!1)},this.chart=t,this.Ki=i,this.qi=e,this.ts=new Map,this.ss=h,this.es=this.ss.hs(this,{rs:{themeEffectEnabled:this.qi.effectsText},ns:{}}),this.chart.us.ls.os(this,(t=>{this.ts.forEach(((i,s)=>s.cs(t))),this.Qi.forEach((i=>i.setHighlight(t))),this.Zi.forEach((i=>i.cs(t)))}),{animationEnabled:this.chart.getAnimationsEnabled()})}ds(){}fs(t,i){const s=void 0===(null==i?void 0:i.setEventHandlers)||i.setEventHandlers,e=void 0!==(null==i?void 0:i.isText)&&i.isText;this.ts.set(t,{isText:e});const h=Array.from(this.ts);this.es.rs.As(h.filter((t=>t[1].isText)).map((t=>t[0]))),this.es.ns.As(h.filter((t=>!t[1].isText)).map((t=>t[0]))),t.setMouseInteractions(this.Hi).setVisible(this.ji).cs(this.chart.us.ls.gs(this,!0)),s&&t.setMouseEnterEventHandler(this.Mt).setMouseLeaveEventHandler(this._t).setMouseClickEventHandler(this.wt).setMouseDoubleClickEventHandler(this.Ct).setMouseDownEventHandler(this.kt).setMouseUpEventHandler(this.Tt).setMouseMoveEventHandler(this.Ft).setMouseDragStartEventHandler(this.Pt).setMouseDragEventHandler(this.It).setMouseDragStopEventHandler(this.Dt).setMouseWheelEventHandler(this.Bt).setTouchStartEventHandler(this.Lt).setTouchMoveEventHandler(this.Rt).setTouchEndEventHandler(this.Et);const r=t.onDispose((()=>{t.offDispose(r),this.ts.delete(t)}))}ys(t){this.Zi=t;const i=this.chart.us.ls.gs(this,!0);t.forEach((t=>{t.cs(i).ps(this.ji)}))}Ji(t,i){}vs(t){const i=this.chart.us.Ss(t);if(i&&Array.from(this.ts.keys()).includes(i.entity))return this.Ji(i.info,t)}setEffect(t){return this.es.rs.bs(t&&this.qi.effectsText),this.es.ns.bs(t),this.chart.us.xs(),this}getEffect(){return this.es.rs.Ms()||this.es.ns.Ms()}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}setIcon(t){return this._s=t,this.chart.us.xs(),this}getIcon(){return this._s}setName(t){return this.ws=t,this.Qi.forEach((i=>i.setText(t))),this}getName(){return this.ws||"Component"}dispose(){return this.Xi||(this.Xi=!0,this.ts.forEach(((t,i)=>i.dispose())),this.Ki(this),this.Qi.forEach((t=>{t.dispose()})),this.Qi.length=0,this.L.emit("dispose",this),this.chart.us.xs()),this}setVisible(t){return t===this.ji||(this.ji=t,this.ts.forEach(((i,s)=>s.setVisible(t))),this.Zi.forEach((i=>i.ps(t))),this.Qi.forEach((i=>i.setOn(t))),this.L.emit("visibleStateChanged",this,this.ji),this.chart.us.xs()),this}getVisible(){return this.ji}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}setHighlight(t){return this.chart.us.ls.Cs(this,t),this.L.emit("highlight",this,t),this}getHighlight(){return this.chart.us.ls.gs(this)}setAnimationHighlight(t){return this.chart.us.ls.ks(this,t),this}getAnimationHighlight(){return this.chart.us.ls.Ts(this)}setMouseInteractions(t){return this.Hi=t,this.ts.forEach(((i,s)=>s.setMouseInteractions(t))),this.chart.us.xs(),this}getMouseInteractions(){return this.Hi}getIsUnderMouse(){for(const t of this.ts)if(t[0].Fs)return!0;return!1}setHighlightOnHover(t){return this.$i=t?ue.onHover:ue.noHighlighting,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.$i!==ue.noHighlighting}attach(t,i=!0,s=!1){return this.styleLegendEntry(t,s),Vi(t,[this],{toggleVisibilityOnClick:i,label:this.getName(),style:void 0}),this.Qi.push(t),t.onDispose((()=>{const i=this.Qi.indexOf(t);i>=0&&this.Qi.splice(i,1)})),this}Is(){return this._s}onMouseDragStart(t){return this.L.on("mouseDragStart",t)}onMouseDrag(t){return this.L.on("mouseDrag",t)}onMouseDragStop(t){return this.L.on("mouseDragStop",t)}onMouseWheel(t){return this.L.on("mouseWheel",t)}onTouchStart(t){return this.L.on("touchStart",t)}onTouchMove(t){return this.L.on("touchMove",t)}onTouchEnd(t){return this.L.on("touchEnd",t)}isDisposed(){return this.Xi}onDispose(t){return this.L.on("dispose",t)}offTouchStart(t){return this.L.off(t,"touchStart")}offTouchMove(t){return this.L.off(t,"touchMove")}offTouchEnd(t){return this.L.off(t,"touchEnd")}offDispose(t){return this.L.off(t,"dispose")}}class de extends ce{constructor(t,i,s,e,h,r,n,o){super(i,s,n,o),this.Ps=!0,this.Ds=t,this.axis=e,this.ft=h,this.Bs=r,this.Ls()}setClipping(t){return this.Ps=t,this.Ds.xs(),this}getClipping(){return this.Ps}}const fe=t=>{const i=t.length;if(i>0){let s=0,e=0;for(let h=0;h<i;h+=1)s+=t[h].x,e+=t[h].y;return n(s/i,e/i)}return n(0,0)},Ae=(...t)=>{const i=t.length,s=new Array(i).fill(!1),e=(e,h)=>{for(let r=0;r<i;r+=1){const i=t[r],n=i.Rs(e,h);n?i.Es(e,h,!0):s[r]&&s[r]&&i.Es(e,h,!1),s[r]=n}return!1};return{onTouchStart:e,onTouchMove:e,onTouchEnd:e}},ge=class{constructor(t,i=300){this.zs=!1,this.Vs=[],this.Os=300,this.Ns=t,this.Os=i}Rs(t,i){const s=Ot.performance.now();let e=!1;for(let t=0;t<this.Vs.length;t+=1)s-this.Vs[t].time>=this.Os?(this.Vs.splice(t,1),t-=1):this.Vs[t].state&&(e=!0);return this.zs?0===i.interactions.length&&(this.Vs.push({state:!1,time:s}),this.zs=!1):1===i.interactions.length&&"pointerdown"===i.type&&(this.Vs.push({state:!0,time:s}),e=!0,this.zs=!0),e}Es(t,i,s){if(s){const s=this.Vs.reduce(((t,i)=>(i.state?t.on+=1:t.off+=1,t)),{on:0,off:0});s.on>=2&&s.off>=1&&(this.Ns(t,i),this.Vs.length=0)}}},ye=class{constructor(t,i,s,e=1,h=100){this.Gs=t,this.Ws=i,this.Us=s,this.Ys=e,this.Hs=h}Rs(t,i){const s=i.interactions.length;if(s===this.Ys){if(void 0!==this.$s)return!0;if("pointerdown"===i.type&&(1===s||(t=>{const i=t.length;if(i>0){const s=fe(t);let e=0;for(let h=0;h<i;h+=1)e=Math.max(e,us(s,n(t[h].x,t[h].y)));return e}return Ki})(i.interactions)<=this.Hs))return this.$s=fe(i.interactions),!0}return!1}Es(t,i,s){const e=this.Xs;if(!s||i.forceTouchEnd||"pointerup"===i.type)this.Us&&this.Us(t,this.$s,e,i),this.$s=void 0,this.Xs=void 0;else{const s=fe(i.interactions);"pointerdown"===i.type?this.Gs&&this.Gs(t,this.$s,i):"pointermove"===i.type&&this.Ws&&this.Ws(t,this.$s,s,n(s.x-e.x,e.y-s.y),i),this.Xs=s}}},me=class{constructor(t,i,s){this.js=!1,this.Gs=t,this.Ws=i,this.Us=s}Rs(t,i){return this.js?2!==i.interactions.length&&(this.js=!1):2===i.interactions.length&&"pointerdown"===i.type&&(this.js=!0),this.js}Es(t,i,s){let e,h;if(s&&"pointerup"!==i.type){if("pointerdown"===i.type){const s=i.interactions;e=s[0],h=s[1],this.Gs(t,e,h,i)}else if("pointermove"===i.type){e=i.interactions[0],h=i.interactions[1];const s=this.Zs,r=this.Qs,o=n(e.x-s.x,s.y-e.y),a=n(h.x-r.x,r.y-h.y);this.Ws(t,e,h,o,a,i)}}else{const s=i.interactions;this.Us(t,s[0],s[1],i)}this.Zs=e,this.Qs=h}},pe=i({type:"linestyle",lineType:"solid",fillStyle:new U({color:S(255,255,255)}),thickness:1});class ve extends pe{constructor(t){super({...t,lineType:"solid"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}O(){const t=this.getThickness();return t<0?1:t}}const Se=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"solid"!==t.lineType);class be{constructor(t,i){this.Js=t,this.Ks=i,this.qs=i.rows*Je,this.te=i.columns*Ke}}var xe,Me;!function(t){t[t.ZoomIn=0]="ZoomIn",t[t.ZoomInX=1]="ZoomInX",t[t.ZoomInY=2]="ZoomInY",t[t.ZoomOut=3]="ZoomOut",t[t.ZoomOutX=4]="ZoomOutX",t[t.ZoomOutY=5]="ZoomOutY",t[t.ZoomToFit=6]="ZoomToFit",t[t.ToggleAnimations=7]="ToggleAnimations"}(xe||(xe={})),function(t){t[t.Circle=0]="Circle",t[t.Rectangle=1]="Rectangle",t[t.RoundedRectangle=2]="RoundedRectangle"}(Me||(Me={}));const _e={x:-43,y:0},we={x:-65,y:0},Ce={x:-86,y:0},ke={x:-107,y:-1},Te={x:-128,y:-3},Fe={x:-150,y:0},Ie={x:-171,y:0},Pe={x:-276,y:0},De={x:-298,y:0},Be={x:0,y:0},Le={x:-21,y:0};class Re extends be{constructor(t,i,s,e){super(t,s),this.ie=Ot.document.createElement("button"),this.se=Ot.document.createElement("div"),this.ee=Ot.document.createElement("label"),this.Ks=s,this.he=i,this.re=e}ne(t,i,s,e){this.oe(t,e),this.ae(),this.le(i),this.ue(),this.ee.textContent=s||"";const h=Ot.document.createElement("div");this.ce(h),this.ie.onclick=this.onClick.bind(this),h.appendChild(this.se),h.appendChild(this.ee),this.ie.appendChild(h)}ue(){this.ie.style.cursor="pointer"}ce(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignContent="center",t.style.flexDirection="column"}le(t){"string"==typeof t?(this.se.style.backgroundImage=`url(${t})`,this.se.style.backgroundSize="100%",this.se.style.backgroundRepeat="no-repeat",this.se.style.backgroundPosition="center",this.se.style.width="20px",this.se.style.height="20px"):this.applyStyleForSprite(t),this.se.style.margin="auto"}ae(){switch(this.he){case Me.RoundedRectangle:this.ie.style.borderRadius="10px";break;case Me.Rectangle:this.ie.style.borderRadius="0px";break;case Me.Circle:default:this.ie.style.borderRadius="31px"}}oe(t,i){this.ie.style.width=`${this.te.toString()}px`,this.ie.style.height=`${this.qs.toString()}px`,this.ie.style.backgroundColor=t,this.ie.style.opacity=i||qe,this.ie.style.alignItems="center",this.ie.style.border="2px solid #707070",this.ie.style.transition="background-color .8s ease"}applyStyleForSprite(t){this.se.style.backgroundImage=`url(${this.Js}/${th})`,this.se.style.backgroundPositionX=`${t.x}px`,this.se.style.backgroundPositionY=`${t.y}px`,this.se.style.backgroundSize="1600%",this.se.style.backgroundRepeat="no-repeat",this.se.style.width="20px",this.se.style.height="20px"}de(t){return t.appendChild(this.ie),t}fe(){return this.ie}}class Ee extends Re{constructor(t,i,s,e){super(t,i,s,e),this.Ae="",this.ge="",this.ye=!1,this.re=e}me(){this.pe(),this.onToggledStateAction()}ve(){this.Se(),this.onInitialStateAction()}Se(){this.be(this.Ae)}pe(){this.be(this.ge)}be(t){"string"==typeof t?this.se.style.background=t:(this.se.style.backgroundImage=`url(${this.Js}/${th})`,this.se.style.backgroundPositionX=`${t.x}px`,this.se.style.backgroundPositionY=`${t.y}px`)}onClick(){this.ye?this.ve():this.me(),this.ye=!this.ye}}class ze extends Re{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.re=i;const e=this.re.getTheme();this.ne(e.onScreenMenuBackgroundColor.toRGBAString(),_e)}onClick(){const t=this.re.xe();t&&this.re.zoom(t,{x:-1,y:-1})}}class Ve extends Re{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.re=i;const e=this.re.getTheme();this.ne(e.onScreenMenuBackgroundColor.toRGBAString(),ke)}onClick(){const t=this.re.xe();t&&this.re.zoom(t,{x:-1,y:0})}}class Oe extends Re{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.re=i;const e=this.re.getTheme();this.ne(e.onScreenMenuBackgroundColor.toRGBAString(),Fe)}onClick(){const t=this.re.xe();t&&this.re.zoom(t,{x:0,y:-1})}}class Ne extends Re{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.re=i;const e=this.re.getTheme();this.ne(e.onScreenMenuBackgroundColor.toRGBAString(),we)}onClick(){const t=this.re.xe();t&&this.re.zoom(t,{x:1,y:1})}}class Ge extends Re{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.re=i;const e=this.re.getTheme();this.ne(e.onScreenMenuBackgroundColor.toRGBAString(),Te)}onClick(){const t=this.re.xe();t&&this.re.zoom(t,{x:1,y:0})}}class We extends Re{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.re=i;const e=this.re.getTheme();this.ne(e.onScreenMenuBackgroundColor.toRGBAString(),Ie)}onClick(){const t=this.re.xe();t&&this.re.zoom(t,{x:0,y:1})}}class Ue extends Ee{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.re=i;const e=this.re.getTheme();this.Ae=Pe,this.ge=De,this.ne(e.onScreenMenuBackgroundColor.toRGBAString(),this.Ae)}onToggledStateAction(){this.re.setAnimationsEnabled(!1)}onInitialStateAction(){this.re.setAnimationsEnabled(!0)}}class Ye extends Re{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.re=i;const e=this.re.getTheme();this.ne(e.onScreenMenuBackgroundColor.toRGBAString(),Ce)}onClick(){this.re.forEachAxis((t=>{t.fit(!0)}))}}class He extends Re{constructor(t,i,s){super(t,i.shape||ih,i.dimensions||{rows:1,columns:1},s);const e=s.getTheme(),h=i.color||e.onScreenMenuBackgroundColor.toRGBAString(),r=i.icon||"",n=i.label||"",o=i.opacity||"";this.ne(h,r,n,o),this.Me=i.action}onClick(){this.Me(this.re)}}class $e extends Ee{constructor(t,i,s,e){super(t,i,{rows:1,columns:1},s),this.re=s,this._e=e,this.Ae=Le,this.ge=Be,this.ne(sh,this.Ae)}Se(){this.be(this.Ae),this.ie.style.backgroundColor=sh,this.ie.style.border="2px solid #707070",this.ie.style.margin="0px"}pe(){this.be(this.ge),this.ie.style.background="#FECC00 0% 0% no-repeat padding-box",this.ie.style.border="10px solid #BCBCBC12",this.ie.style.margin="1px"}onToggledStateAction(){var t;null===(t=this._e)||void 0===t||t.style.setProperty("display","block")}onInitialStateAction(){var t;null===(t=this._e)||void 0===t||t.style.setProperty("display","none")}}var Xe;!function(t){t.Move="move",t.ResizeColumn="col-resize",t.ResizeRow="row-resize",t.Horizontal="ew-resize",t.Vertical="ns-resize",t.NorthWest="nw-resize",t.NorthEast="ne-resize",t.Copy="copy",t.CrossHair="crosshair",t.Default="default",t.Help="help",t.Restricted="not-allowed",t.None="none",t.Point="pointer",t.Text="text",t.Wait="wait",t.ZoomIn="zoom-in",t.ZoomOut="zoom-out"}(Xe||(Xe={}));const je={LeftBottom:n(-1,-1),CenterBottom:n(0,-1),RightBottom:n(1,-1),LeftCenter:n(-1,0),Center:n(0,0),RightCenter:n(1,0),LeftTop:n(-1,1),CenterTop:n(0,1),RightTop:n(1,1)},Ze=new U({color:S(255,255,255,0)}),Qe=new ve({thickness:1,fillStyle:Ze}),Je=60,Ke=60,qe="1.0",th="osm/osm-sprite-transparent.png",ih=Me.Circle,sh="#363636";var eh;!function(t){t[t.TopRight=0]="TopRight",t[t.TopLeft=1]="TopLeft",t[t.BottomLeft=2]="BottomLeft",t[t.BottomRight=3]="BottomRight"}(eh||(eh={}));class hh extends de{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.ws="Band",this.we=0,this.Ce=0,this.ke=this.qi.bandFillStyle,this.Te=this.qi.bandStrokeStyle,this.Fe=!0,this.Ie=this.Ds.Be(this.ft).De(this.ke).Pe(this.Te).cs(this.getHighlight()),this.fs(this.Ie)}setValueStart(t){return this.we=t,this.L.emit("valueChange",this,this.we,this.Ce),this.Ds.xs(),this}getValueStart(){return this.we}setValueEnd(t){return this.Ce=t,this.L.emit("valueChange",this,this.we,this.Ce),this.Ds.xs(),this}getValueEnd(){return this.Ce}setFillStyle(t){this.ke="function"==typeof t?t(this.ke):t;const i=this.ke;return this.Ie.De(i),this.Ds.xs(),this}getFillStyle(){return this.ke}setStrokeStyle(t){this.Te="function"==typeof t?t(this.Te):t;const i=this.Te;return this.Ie.Pe(i),this.Ds.xs(),this}getStrokeStyle(){return this.Te}onValueChange(t){return this.L.on("valueChange",t)}offValueChange(t){return this.L.off(t,"valueChange")}Le(){return this.Ie.Re(this.Bs.toVec2(this.we,this.Bs.getHeight(this.ft).getInnerStart())).tt(this.Bs.toVec2(this.Ce-this.we,this.Bs.getHeight(this.ft).getInnerInterval())),re(this.Ps,[this.Ie],this.ft),this}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke,stroke:this.Te})}Ee(t,i){t.cs(i),this.Ds.xs()}setDefaultMouseInteractions(t){return this.Fe=t,this}Ls(){let t,i;const s=(s,e)=>{if(!this.Fe)return;const h=At(this.Ds.us.ze(e.x,e.y),this.Ds.us.ft,this.ft),r=this.Bs.getWidth(h),n=this.axis.ft.dt(this.we),o=this.axis.ft.dt(this.Ce),a=(this.axis.ft.dt(r)-n)/(o-n);t=!(a<.1||a>.9),!1===t&&(i=a<.5)},e=(s,e,h,r,n)=>{if(!this.Fe)return;const o=this.Bs.getWidth(r);t?(this.we=this.axis.ft.gi(this.we,o),this.Ce=this.axis.ft.gi(this.Ce,o)):i?this.we=this.axis.ft.gi(this.we,o):this.Ce=this.axis.ft.gi(this.Ce,o),di(n),this.L.emit("valueChange",this,this.we,this.Ce),this.Ds.xs()};this.onMouseMove(((i,e)=>{if(!this.Fe)return;s(0,n(e.clientX,e.clientY));const h=t?Xe.Point:this.Bs.getWidth({x:Xe.Horizontal,y:Xe.Vertical});this.Ve=this.chart.engine.setMouseStyle(h,this.Ve)})),this.onMouseLeave((()=>{this.Fe&&(this.chart.engine.restoreMouseStyle(this.Ve),this.Ve=void 0)})),this.onMouseDrag(((t,i,s,h,r)=>{this.Fe&&0===s&&e(0,0,0,r,i)}));const h=Ae(new ye(s,e));this.onTouchStart(h.onTouchStart),this.onTouchMove(h.onTouchMove),this.onTouchEnd(h.onTouchEnd)}}class rh extends de{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.ws="Constant Line",this.S=0,this.Te=this.qi.constantLineStrokeStyle,this.Oe=!0,this.Fe=!0,this.Ne=this.Ds.We(this.ft).Ge(this.Te).cs(this.getHighlight()),this.fs(this.Ne)}setValue(t){return this.S=t,this.L.emit("valueChange",this,this.S),this.Ds.xs(),this}getValue(){return this.S}setStrokeStyle(t){this.Te="function"==typeof t?t(this.Te):t;const i=this.Te;return this.Ne.Ge(i),this.Ds.xs(),this}getStrokeStyle(){return this.Te}setInteractionMoveByDragging(t){return this.Oe=t,this}getInteractionMoveByDragging(){return this.Oe}onValueChange(t){return this.L.on("valueChange",t)}offValueChange(t){return this.L.off(t,"valueChange")}Le(){return this.Ne.Ye(this.Bs.toVec2(this.S,this.Bs.getHeight(this.ft).getInnerStart())).Ue(this.Bs.toVec2(this.S,this.Bs.getHeight(this.ft).getInnerEnd())),re(this.Ps,[this.Ne],this.ft),this}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{stroke:this.Te})}Ee(t,i){t.cs(i),this.Ds.xs()}setDefaultMouseInteractions(t){return this.Fe=t,this}Ls(){const t=(t,i)=>{this.Fe&&this.Oe&&(this.S=this.axis.ft.gi(this.S,this.Bs.getWidth(i)),this.L.emit("valueChange",this,this.S),this.Ds.xs(),di(t))};this.onMouseMove((()=>{if(this.Fe&&this.Oe){const t=this.Bs.getWidth({x:Xe.Horizontal,y:Xe.Vertical});this.Ve=this.chart.engine.setMouseStyle(t,this.Ve)}})),this.onMouseLeave((()=>{this.Fe&&this.Oe&&(this.chart.engine.restoreMouseStyle(this.Ve),this.Ve=void 0)})),this.onMouseDrag(((i,s,e,h,r)=>{this.Fe&&this.Oe&&0===e&&t(s,r)}));const i=Ae(new ye(void 0,((i,s,e,h,r)=>t(r,h))));this.onTouchStart(i.onTouchStart),this.onTouchMove(i.onTouchMove),this.onTouchEnd(i.onTouchEnd)}}const nh={fitting:{start:(t,i,s,e)=>i>=t?s:e,end:(t,i,s,e)=>i>=t?e:s,allowIntervalLengthChange:!0},expansion:{start:(t,i,s,e)=>i>=t?s<t?s:t:e>t?e:t,end:(t,i,s,e)=>i>=t?e>i?e:i:s<i?s:i,allowIntervalLengthChange:!0},progressive:{start:(t,i,s,e)=>i>t?nh.progressive.end(t,i,s,e)+(t-i):e>t?e:t,end:(t,i,s,e)=>i>t?e>i?e:i:nh.progressive.start(t,i,s,e)+(i-t),allowIntervalLengthChange:!1},regressive:{start:(t,i,s,e)=>i>t?s<t?s:t:nh.regressive.end(t,i,s,e)+(t-i),end:(t,i,s,e)=>i>t?nh.regressive.start(t,i,s,e)+(i-t):s<i?s:i,allowIntervalLengthChange:!1}},oh={Empty:"Empty",Numeric:"Numeric",DateTime:"DateTime",Time:"Time"},ah=t=>void 0!==t.He,lh=t=>void 0!==t.$e,uh=(t,i)=>[t,i],ch=(t,i,s,e)=>{const h=[],r=Math.round(Math.abs((t-i)/s));for(let n=1;n<r;n+=1){const r=Math.round((t+s*n)*e)/e;r<i&&h.push(r)}return h},dh=(t,i,s,e,h)=>{Ht(t,0)&&(t=0),Ht(i,0)&&(i=0);const r=[];let n=void 0!==e?((t,i,s)=>t-(t-s)%i)(t,s,e):t;if(s<=0)throw new Error(`_getRegularGreatKeyValues unit less than or equal to 0, unit: ${s}`);for(;n<i&&!1===Ht(n,i);)r.push(n),n+=s,n=Math.round(n*h)/h;return r.push(n),r},fh=(t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i&&!1===Ht(r,i);)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h},Ah=(t,...i)=>{const s=i.length>0?i.length:t?1:0;return(e,h,r,n,o,a)=>{if(h>=s)return;const l=i[h]||1;let u=!1,c=!1,d=1;return t&&(u="ignore"in t?"first"===t.ignore||"both"===t.ignore:u,c="ignore"in t?"last"===t.ignore||"both"===t.ignore:c,d="offset"in t&&void 0!==t.offset?t.offset:d),((t,i,s,e,h)=>(s&&(t=t.filter(((t,i)=>i>0))),e&&(t=t.filter(((i,s)=>s<t.length-1))),t.filter(((t,s)=>(s+h)%i==0))))(e,l,u,c,d)}},gh=(...t)=>{const i=t.length>0?t.length:0;return(s,e,h,r,n,o)=>{if(e>=i)return;const a=t[e]||1;return s.filter(((t,i)=>i%a==0))}},yh=i({type:"empty-ticks",cursorFormatter:void 0});class mh extends yh{Xe(t){return{je:[],Ze:[],Qe:this.cursorFormatter?this.cursorFormatter:Xs.Numeric,Je:void 0,Ke:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}}const ph=t=>!(!t||"object"!=typeof t||!("type"in t)||"empty-ticks"!==t.type),vh=(t,i)=>{if(i.has(t))return i.get(t);const s=As(t.th.qe());if(Li(s))return s;const e=t.ih.gi(s.min,{x:-5,y:-5}),h=t.ih.gi(s.min,{x:5,y:5}),r=t.ih.gi(s.max,{x:-5,y:-5}),n=t.ih.gi(s.max,{x:5,y:5}),o={min:{x:Math.min(e.x,h.x,r.x,n.x),y:Math.min(e.y,h.y,r.y,n.y)},max:{x:Math.max(e.x,h.x,r.x,n.x),y:Math.max(e.y,h.y,r.y,n.y)}};return i.set(t,o),o},Sh=t=>{const i=new Map;if(!ph(t)){for(const s of t.je)i.set(s,new Map);for(const s of t.Ze)i.set(s,new Map)}return i},bh=(new mh).Xe({type:"linear"});class xh{constructor(t,i,e,h,r,n,o){this.L=new s,this.sh=bh,this.eh=oh.Empty,this.hh=new Map,this.rh=new Map,this.oh=nh.fitting,this.ah=!0,this.lh=K((()=>this.chart.us.xs()))(300,Q.linear),this.uh=!0,this.ji=!0,this.dh=!1,this.fh=qi,this.Ah=!1,this.gh=!1,this.yh=qi,this.mh=qi,this.ph=qi,this.Sh=!1,this.bh="",this.xh={},this.Mh=()=>{this._h.setMouseInteractions(!0).setMouseMoveEventHandler(((t,i)=>this.L.emit("mouseMoveTitle",this,i))).setMouseEnterEventHandler(((t,i)=>this.L.emit("mouseEnterTitle",this,i))).setMouseLeaveEventHandler(((t,i)=>this.L.emit("mouseLeaveTitle",this,i))).setMouseDownEventHandler(((t,i)=>this.L.emit("mouseDownTitle",this,i))).setMouseUpEventHandler(((t,i)=>this.L.emit("mouseUpTitle",this,i))).setMouseClickEventHandler(((t,i)=>this.L.emit("mouseClickTitle",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.L.emit("mouseDoubleClickTitle",this,i))).setMouseWheelEventHandler(((t,i)=>this.L.emit("mouseWheelTitle",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.L.emit("mouseDragStartTitle",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.L.emit("mouseDragTitle",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.L.emit("mouseDragStopTitle",this,i,s,e))).setTouchStartEventHandler(((t,i)=>this.L.emit("touchStartTitle",this,i))).setTouchMoveEventHandler(((t,i)=>this.L.emit("touchMoveTitle",this,i))).setTouchEndEventHandler(((t,i)=>this.L.emit("touchEndTitle",this,i))),this.Mh=void 0},this.wh=(t,i,s,e,h,r)=>{const n=[],o=[];for(const a of t){if(a<s||a>e){n.push(a);continue}const t=this.hh.get(i),l=(t?t.get(a):void 0)||this.Ch(a,i);l.kh=!1;const u=this.Th(l,h);r.set(l,u),n.push(a),o.push(l)}return{displayedKeyValues:n,createdTicks:o}},this.Fh=(t,i,s,e,h,r,n,o,a,l,u)=>{const c=[];for(let d=0;d<t.length;d+=1){const f=t[d],A=i[d];let g,y,m;if(this.Ih(f,s)){const i=vh(f,a);y=[t[d-1],t[d+1]],m=y.concat(l).concat(u).filter((t=>void 0!==t)).filter((i=>i.Ph!==s||!!t.find((t=>t===i)))).map((t=>es(i,vh(t,a))?t:void 0)),g=m.some((t=>void 0!==t))}else g=!1;if(g){let t=!0;const i=m.filter((t=>void 0!==t));if(t&&i.every((t=>ah(t.Ph)))&&(t=!1),t&&s.Dh&&s.Dh.Bh&&!1===s.Dh.Bh(A,e,h,r,n,o)&&(t=!1),!1===t)continue;return!0}c.push(f)}return c},this.formatValue=t=>this.sh.Qe(t,this.ft),this.Lh=!0,this.Rh=!0,this.chart=t,this.Eh=i,this.qi=h,this.zh=n,this.ft=e,this.Vh=o,"logarithmic"===o.type&&this.setAnimationZoom(Q.logarithmic(Ws(o.base))),this.Oh=n.numeric,this.Nh("Numeric"),this.Gh=e.getInnerStart(),this.Wh=e.getInnerEnd(),this.setAnimationsEnabled(r)}setUnits(t,i={}){return this.Uh=t,this.Yi=i,this.Yh(),this}getUnits(){return this.Uh}setDefaultInterval(t,i){return this.Hh=t,!1!==(null==i?void 0:i.applyImmediately)&&(this.Sh=!0,this.chart.us.xs()),this}getDefaultInterval(){return this.Hh}getTitle(){return this.bh}setTitle(t){return this.bh=t,this.Yh(),this}getTitleFillStyle(){return this._h.$h()}setIntervalRestrictions(t){return this.Xh=t,this.chart.us.xs(),this}getIntervalRestrictions(){return this.Xh}setTitleFillStyle(t){return this._h.De(t),this.chart.us.xs(),this}getTitleFont(){return this._h.jh()}setTitleFont(t){return this._h.Zh(t),this.chart.us.xs(),this}setTitleRotation(t){return this._h.Qh(t),this.chart.us.xs(),this}getTitleRotation(){return this._h.Jh()}setTitleEffect(t){return this.Kh.bs(t),this.chart.us.xs(),this}getTitleEffect(){return this.Kh.Ms()}Nh(t,i){if(this.hh.size>0&&this.qh(),"Empty"===t){const s=i||(t=>t);this.Oh=s(new mh),this.sh=this.Oh.Xe(this.Vh),this.eh=t}else if("Numeric"===t){"Numeric"!==this.eh&&(this.Oh=this.zh.numeric);const s=i||(t=>t);this.Oh=s(this.Oh),this.sh=this.Oh.Xe(this.Vh),this.eh=t}else if("DateTime"===t){"DateTime"!==this.eh&&(this.Oh=this.zh.datetime);const s=i||(t=>t);this.Oh=s(this.Oh),this.sh=this.Oh.Xe(this.Vh),this.eh=t}else if("Time"===t){"Time"!==this.eh&&(this.Oh=this.zh.time);const s=i||(t=>t);this.Oh=s(this.Oh),this.sh=this.Oh.Xe(this.Vh),this.eh=t}return this.rh.forEach((t=>Array.from(t.values()).forEach((t=>t.dispose())))),this.rh=Sh(this.sh),this.chart.us.xs(),this}tr(){return this.sh}ir(t){this.sh=t,this.rh.forEach((t=>Array.from(t.values()).forEach((t=>t.dispose())))),this.rh=Sh(this.sh),this.chart.us.xs()}setInterval(t){const{start:i,end:s,animate:e,stopAxisAfter:h}=t;return this.At(void 0!==i?i:this.Gh,void 0!==s?s:this.Wh,void 0!==e&&e,void 0===h||h,"userSetInterval"),this}At(t,i,s=!1,e=!0,h){let r={start:t,end:i};const n=!0,o=Math.abs(i-t);if(Math.abs(this.Wh-this.Gh),void 0!==this.sh.Je&&this.sh.Je>o){const s=(i+t)/2,e=this.sh.Je/2*(t>i?-1:1);r={start:s-e,end:s+e}}if(void 0!==this.sh.Ke&&this.sh.Ke<o){const s=(i+t)/2,e=this.sh.Ke/2*(t>i?-1:1);r={start:s-e,end:s+e}}const a=this.ft.ot(r.start,r.end,this.Gh,this.Wh,n);if(!1===a)return this;if(!0===a);else if(r=a,"zoomBandChart"===h)return this;let l;switch(h){case"userSetInterval":case"userFit":case"interactionSetInterval":case"interactionZoom":l=!0;break;case"zoomBandChart":case"synchronizedAxis":l=!1;break;default:return Oi(0,""),this}if(this.sr&&this.sr.finishAll(!1),this.lh&&(!0===s||s>0)){this.setStopped(!0);const t=!0===s?void 0:s,i=!this.sr||this.sr.isOver()?this.lh:this.sr.NextAnimation.bind(this);this.sr=i([[this.Gh,r.start],[this.Wh,r.end]],(([t,i])=>{this.er(t,i,n)}),t),this.sr.onAnimationEnd((()=>{this.sr=void 0,l&&(this.ph=Ot.performance.now())})),this.sr.onAnimationEnd((()=>this.setStopped(e)))}else this.er(r.start,r.end,n),this.setStopped(e),l&&(this.ph=Ot.performance.now());return this}getInterval(){return{start:this.Gh,end:this.Wh}}setStopped(t){return t===this.dh||(t&&(this.sr&&this.sr.finishAll(!1),this.sr=void 0),this.dh=t,this.L.emit("stoppedStateChanged",this,this.dh),this.fh=Ot.performance.now(),this.chart.us.xs()),this}getStopped(){return this.dh}onStoppedStateChanged(t){return this.L.on("stoppedStateChanged",t)}offStoppedStateChanged(t){return this.L.off(t,"stoppedStateChanged")}fit(t,i){const s=this.hr(),e=this.Hh||kh,h="function"==typeof e?e({curStart:this.Gh,curEnd:this.Wh,dataMin:null==s?void 0:s.min,dataMax:null==s?void 0:s.max}):e;return this.At(void 0!==h.start?h.start:this.Gh,void 0!==h.end?h.end:this.Wh,void 0!==h.animate?h.animate:void 0===t||t,void 0!==h.stopAxisAfter?h.stopAxisAfter:void 0===i||i,"userFit"),this}setScrollStrategy(t){return this.oh=t,this.chart.us.xs(),this}getScrollStrategy(){return this.oh}setAnimationScroll(t){return this.ah=Boolean(t),this.chart.us.xs(),this}setAnimationZoom(t,i=300){return this.sr&&(this.sr.finishAll(!1),this.sr=void 0),this.lh=t?K((()=>this.chart.us.xs()))(i,t):void 0,this}setAnimationsEnabled(t){return this.uh=t,t?(this.setAnimationScroll(!0),this.setAnimationZoom(Q.ease,void 0)):(this.setAnimationScroll(void 0),this.setAnimationZoom(void 0)),this}getAnimationsEnabled(){return this.uh}setVisible(t){const i=this.ji!==t;return this.ji=t,this._h.setVisible(t),this.rr((i=>{i.th.setVisible(t)})),i&&this.L.emit("visibleStateChanged",this,this.ji),this}getVisible(){return this.ji}onIntervalChange(t){return this.L.on("scaleChange",t)}offIntervalChange(t){return this.L.off(t,"scaleChange")}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}nr(t,i){this.Mh&&this.Mh();const s=new Map;if(ph(this.sh)||!this.ji)return this.qh(),s;i=i||new Map;const e=this.ar(),h=e.min,r=e.max,n=r-h,o=t.physicalAxisSize;this.xh.physicalAxisSize=o;const a=_h(this.sh,h,r,this.Gh,this.Wh,o),l=[];if(this.lr(),l.push(...this.ur(this.sh,h,r,a,i,t,s)),this.cr(this.sh,h,r,a,i,t,l,s),this.dr(),a)for(const[t,i]of this.rh){const s=a.get(t);if(void 0!==s)for(const[t,e]of i)s.includes(t)||(null==e||e.dispose(),i.delete(t))}return this.xh.min=h,this.xh.max=r,this.xh.scaleInterval=n,this.xh.physicalAxisSize=o,s}Ar(t){const i=t.Ph.gr;t.th.yr(i(t.S,this.ft)).Es()}mr(t,i){const s=i.pr;t.th.De(s.getLabelFillStyle()).Zh(s.getLabelFont()).Qh(s.getLabelRotation())}Ch(t,i){const s=this.rh.get(i);let e=s.get(t);e?(s.delete(t),e.Ph=i,e.ps(!0)):e=this.vr(t,i);const h=this.hh.get(i)||new Map;return h.set(t,e),this.hh.set(i,h),this.mr(e,i),e}Th(t,i){const s=this.Sr(t,i);return this.Ar(t),s}ur(t,i,s,e,h,r,n){const o=[];for(const a of t.je){const t=e.get(a);for(const e of t){if(e<i||e>s)continue;const t=this.hh.get(a),l=(t?t.get(e):void 0)||this.Ch(e,a),u=this.Th(l,r),c=vh(l,h);o.find((t=>es(c,vh(t,h))))&&l.th.setVisible(!1),l.kh=!1,n.set(l,u),o.push(l)}}return o}cr(t,i,s,e,h,r,n,o){let a,l=[];for(const u of t.Ze){const t=e.get(u);if(!t)break;let c;if(void 0===a)c=[{start:i,end:s,keyValues:t}];else{c=[];for(let i=0;i<a.length-1;i+=1){const s=a[i],e=a[i+1],h={start:s,end:e,keyValues:[]};for(const i of t)i>=s&&i<e&&h.keyValues.push(i);c.push(h)}}if(a=t,lh(u))continue;let d=0,f=-1,A=[],g=[];for(let t=0;t<c.length;t+=1){const e=this.wh(c[t].keyValues,u,i,s,r,o);A=A.concat(e.displayedKeyValues),g=g.concat(e.createdTicks)}let y=g,m=!0;if(u.pr.getLabelFillStyle()!==O){let t=[];for(;++f<c.length;){const e=c[f],r=e.start,o=e.end;let a=e.keyValues;if(d>0){if(void 0===u.Dh){m=!1;break}const t=u.Dh.br;if(a=t(a,d-1,r,o,i,s),void 0===a)break}const y=this.Fh(g.filter((t=>a.some((i=>Ht(t.S,i))))),A,u,d,r,o,i,s,h,n,l);!0!==y?t=t.concat(y):(d+=1,f=-1,t=[])}y=t,g.forEach((i=>{t.find((t=>t===i))||this.Mr(i)}))}if(l=y,!m)break}}Mr(t){const i=this.hh.get(t.Ph);null==i||i.delete(t.S);const s=this.rh.get(t.Ph);s&&s.has(t.S)?t.dispose():s&&(t.ps(!1),s.set(t.S,t))}rr(t){for(const i of this.hh.values())for(const s of i.values())t(s)}_r(t,i){for(const s of this.hh.values())for(const e of s.values())i=t(i,e);return i}qh(){this.hh.forEach(((t,i)=>{t.forEach((t=>this.Mr(t)))})),this.hh.clear()}lr(){for(const t of this.hh.values())for(const i of t.values())i.kh=!0}dr(){for(const t of this.hh.values())for(const[i,s]of t.entries())s.kh&&(s.dispose(),t.delete(i))}ar(){const t=this.ft.getInnerStart()<this.ft.getInnerEnd()?this.ft.getInnerStart():this.ft.getInnerEnd(),i=this.ft.getInnerEnd()>this.ft.getInnerStart()?this.ft.getInnerEnd():this.ft.getInnerStart();return c(t,i)}Ih(t,i){return!(t.kh||0===t.th.wr().length||ah(i)&&!0!==i.Cr)}kr(t,i){return ph(this.sh)||(this.sh.je.forEach((s=>{i=t(i,s.pr)})),this.sh.Ze.forEach((s=>{(t=>void 0!==t.gr)(s)&&(i=t(i,s.pr))}))),i}hr(){let t=this.Eh.Tr();const i=this.Eh.Fr();let s;if(void 0!==t&&Gt(t)&&void 0!==i&&Gt(i)&&("logarithmic"===this.Vh.type&&(0===t&&(t=Math.min(1,i)),Math.sign(t)!==Math.sign(i)&&(t=Math.min(1,i-.1))),s?(s.min=Math.min(s.min,t),s.max=Math.max(s.max,i)):s=c(t,i)),s&&Gt(s.min)&&Gt(s.max))return Ht(s.min,s.max)?{min:s.min-1,max:s.max+1}:s}Ir(){if(!this.Lh)return 0;let t=0;const i=this.Eh.Pr();return i&&(t=Math.max(t,i)),t}setAutoRegionsEnabled(t){return this.Lh=t,this.chart.us.xs(),this}Dr(){var t;const i=this.Ah;let s=!1;if(this.Sh&&this.Hh){const t=this.hr(),i="function"==typeof this.Hh?this.Hh({curStart:this.Gh,curEnd:this.Wh,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max}):this.Hh;this.setInterval(i),this.Sh=!1}if(this.oh&&!this.dh){const i=this.hr();if(i){const e=this.Gh,h=this.Wh;let r=this.oh.start(e,h,i.min,i.max),n=this.oh.end(e,h,i.min,i.max);const o=null===(t=this.oh.allowIntervalLengthChange)||void 0===t||t,a=Ch(this.Xh,i,{start:r,end:n},{start:e,end:h},o);r=a.start,n=a.end;const l=!1===Ht(e,r),u=!1===Ht(h,n);if(r=l?r:e,n=u?n:h,l||u){let t=!1;if(this.ah&&!this.Rh)if(this.ah){t=!0;const i=l?this.Br(e,r):e,a=u?this.Br(h,n):h;if(!0===this.er(i,a,o)&&(l&&!1===Ht(i,r)||u&&!1===Ht(a,n))){this.chart.us.xs(!0),s=!0;let t=Math.abs(n-r)/Math.abs(i-a);t<1&&(t=1/t),this.gh=t>=1.4}}else t=!1;t||this.er(r,n,o),this.Rh=!1}}}return s?(this.Ah!==s&&(this.Ah=s,this.yh=Ot.performance.now()),this.Lr&&(clearTimeout(this.Lr),this.Lr=void 0)):!0===i&&void 0===this.Lr&&(this.gh=!1,this.Lr=setTimeout((()=>{!1!==this.Ah&&(this.Ah=!1,this.yh=Ot.performance.now()),this.Lr=void 0,this.chart.us.xs()}),200)),this}er(t,i,s){let e={start:t,end:i},h=!0;if(this.Xh){const t=this.hr();e=Ch(this.Xh,t,e,{start:this.Gh,end:this.Wh},s)}const r=Math.abs(i-t),n=Math.abs(this.Wh-this.Gh);if(void 0!==this.sh.Je&&this.sh.Je>r){const r=(i+t)/2,o=(s?this.sh.Je/2:n/2)*(t>i?-1:1);e={start:r-o,end:r+o},h=!1}if(void 0!==this.sh.Ke&&this.sh.Ke<r){const r=(i+t)/2,o=(s?this.sh.Ke/2:n/2)*(t>i?-1:1);e={start:r-o,end:r+o},h=!1}let o=this.ft.ot(e.start,e.end,this.Gh,this.Wh,s);if(!1===o)return!1;!0!==o&&(e=o);const a=this.Ir(),l=this.Rr(Math.min(e.start,e.end),Math.max(e.start,e.end),a);return o=this.ft.ot(e.end>e.start?l.min:l.max,e.end>e.start?l.max:l.min,this.Gh,this.Wh,!1),!!o&&(!0===o?this.ft.K(e.end>e.start?l.min:l.max,e.end>e.start?l.max:l.min):this.ft.K(e.start,e.end),this.Gh=e.start,this.Wh=e.end,this.L.emit("scaleChange",this,e.start,e.end),this.mh=Ot.performance.now(),this.chart.us.xs(),h)}Er(){return this.Ah}zr(){return void 0!==this.sr}Yh(){var t;const i=!1!==(null===(t=this.Yi)||void 0===t?void 0:t.displayOnAxis);this._h.yr(this.Uh&&i&&this.bh?`${this.bh} (${this.Uh})`:this.bh),this.chart.us.xs()}onTitleMouseEnter(t){return this.L.on("mouseEnterTitle",t)}offTitleMouseEnter(t){return this.L.off(t,"mouseEnterTitle")}onTitleMouseMove(t){return this.L.on("mouseMoveTitle",t)}offTitleMouseMove(t){return this.L.off(t,"mouseMoveTitle")}onTitleMouseLeave(t){return this.L.on("mouseLeaveTitle",t)}offTitleMouseLeave(t){return this.L.off(t,"mouseLeaveTitle")}onTitleMouseDown(t){return this.L.on("mouseDownTitle",t)}offTitleMouseDown(t){return this.L.off(t,"mouseDownTitle")}onTitleMouseUp(t){return this.L.on("mouseUpTitle",t)}offTitleMouseUp(t){return this.L.off(t,"mouseUpTitle")}onTitleMouseClick(t){return this.L.on("mouseClickTitle",t)}offTitleMouseClick(t){return this.L.off(t,"mouseClickTitle")}onTitleMouseDoubleClick(t){return this.L.on("mouseDoubleClickTitle",t)}offTitleMouseDoubleClick(t){return this.L.off(t,"mouseDoubleClickTitle")}onTitleMouseDragStart(t){return this.L.on("mouseDragStartTitle",t)}offTitleMouseDragStart(t){return this.L.off(t,"mouseDragStartTitle")}onTitleMouseDrag(t){return this.L.on("mouseDragTitle",t)}offTitleMouseDrag(t){return this.L.off(t,"mouseDragTitle")}onTitleMouseDragStop(t){return this.L.on("mouseDragStopTitle",t)}offTitleMouseDragStop(t){return this.L.off(t,"mouseDragStopTitle")}onTitleMouseWheel(t){return this.L.on("mouseWheelTitle",t)}offTitleMouseWheel(t){return this.L.off(t,"mouseWheelTitle")}onTitleTouchStart(t){return this.L.on("touchStartTitle",t)}offTitleMouseTouchStart(t){return this.L.off(t,"touchStartTitle")}onTitleTouchMove(t){return this.L.on("touchMoveTitle",t)}offTitleTouchMove(t){return this.L.off(t,"touchMoveTitle")}onTitleTouchEnd(t){return this.L.on("touchEndTitle",t)}offTitleTouchEnd(t){return this.L.off(t,"touchEndTitle")}}class Mh{constructor(t,i,s,e,h=s.Nr(e).Or(Hi).Vr(Hi).setMouseInteractions(!1)){this.kh=!1,this.Xi=!1,this.ts=[],this.Ph=t,this.S=i,this.Gr=s,this.ih=e,this.th=h,this.ts.push(h)}ps(t){this.ts.forEach((i=>i.setVisible(t)))}dispose(){return this.Xi||(this.Xi=!0,this.ts.forEach((t=>t.dispose()))),this}}const _h=(t,i,s,e,h,r)=>{const n=new Map;for(const r of t.je){let t=r.Wr(i,s,e,h);t=wh(t),n.set(r,t)}let o;for(const e of t.Ze){let t;if(void 0===o)t=e.Wr(i,s,i,s);else{let h=[];const n=o.filter((t=>i<=t&&t<=s)).length;if(n>0){const t=r/(n-1);if(void 0!==e.Ur&&e.Ur>t)break}for(let t=0;t<o.length-1;t+=1){const r=e.Wr(o[t],o[t+1],i,s);h=h.concat(r)}t=h}t=wh(t),n.set(e,t),o=t}return n},wh=t=>(t=(t=>{const i={},s=[],e=t.length;let h=0;for(let r=0;r<e;r+=1){const e=t[r];1!==i[e]&&(i[e]=1,s[h]=e,h+=1)}return s})(t)).sort(((t,i)=>t-i)),Ch=(t,i,s,e,h)=>{const r="function"==typeof t?t({curStart:e.start,curEnd:e.end,dataMin:null==i?void 0:i.min,dataMax:null==i?void 0:i.max}):t;if(!r)return s;const n={start:s.start,end:s.end};let o=Math.abs(s.end-s.start);if(void 0!==r.intervalMin&&o<r.intervalMin){const t=(n.start+n.end)/2;n.start=t+.5*Math.sign(s.start-t)*r.intervalMin,n.end=t+.5*Math.sign(s.end-t)*r.intervalMin}if(o=Math.abs(s.end-s.start),void 0!==r.intervalMax&&o>r.intervalMax){const t=(n.start+n.end)/2;n.start=t+.5*Math.sign(s.start-t)*r.intervalMax,n.end=t+.5*Math.sign(s.end-t)*r.intervalMax}return o=Math.abs(s.end-s.start),void 0!==r.startMin&&(n.start=Math.max(n.start,r.startMin),h||Ht(Math.abs(n.start-n.end),o)||(n.end=n.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==r.startMax&&(n.start=Math.min(n.start,r.startMax),h||Ht(Math.abs(n.start-n.end),o)||(n.end=n.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==r.endMin&&(n.end=Math.max(n.end,r.endMin),h||Ht(Math.abs(n.start-n.end),o)||(n.start=n.end+Math.sign(s.start-s.end)*o)),o=Math.abs(s.end-s.start),void 0!==r.endMax&&(n.end=Math.min(n.end,r.endMax),h||Ht(Math.abs(n.start-n.end),o)||(n.start=n.end+Math.sign(s.start-s.end)*o)),n},kh=t=>{if(void 0===t.dataMin||void 0===t.dataMax)return{stopAxisAfter:!1};const i=t.curEnd>=t.curStart;return{start:i?t.dataMin:t.dataMax,end:i?t.dataMax:t.dataMin,stopAxisAfter:!1}},Th=i({type:"font",size:14,family:"Arial",weight:"normal",style:"normal",variant:!1});class Fh extends Th{constructor(t){super(t)}setSize(t){return this.set("size",t)}setFamily(t){return this.set("family",t)}setWeight(t){return this.set("weight",t)}setStyle(t){return this.set("style",t)}setVariant(t){return this.set("variant",t)}getSize(){return this.get("size")}getFamily(){return this.get("family")}getWeight(){return this.get("weight")}getStyle(){return this.get("style")}getVariant(){return this.get("variant")}}const Ih=t=>!(!t||"object"!=typeof t||!("type"in t)||"font"!==t.type),Ph=new Fh,Dh=new class{getFillStyle(){return O}},Bh=i({type:"triangulated-points-3d",shape:"sphere",size:10,fillStyle:new U,wireframeStyle:at});class Lh extends Bh{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setWireframeStyle(t){return"function"==typeof t?this.set("wireframeStyle",t(this.get("wireframeStyle"))):this.set("wireframeStyle",t)}getWireframeStyle(){return this.get("wireframeStyle")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}}const Rh=t=>!(!t||"object"!=typeof t||!("type"in t)||"triangulated-points-3d"!==t.type),Eh=i({type:"pixelated-points-3d",size:5,fillStyle:new U});class zh extends Eh{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}}const Vh=t=>!(!t||"object"!=typeof t||!("type"in t)||"pixelated-points-3d"!==t.type),Oh={Triangulated:Lh,Pixelated:zh};class Nh{constructor(t){this.Yr=new Map,this.us=t}os(t,i,s){const e=s.animationEnabled;this.Yr.set(t,{applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:e,curAnimatedHighlightValue:0});const h=t.onDispose((()=>{this.Yr.delete(t),t.offDispose(h)}))}Hr(t,i){let s=i.animationEnabled;const e=[],h=t.onDispose((()=>{e.forEach((t=>{this.Yr.delete(t)})),t.offDispose(h)}));return{$r:(t,i)=>{const h={applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:s,curAnimatedHighlightValue:0};e.push(t),this.Yr.set(t,h)},Xr:()=>{e.forEach((t=>{this.Yr.delete(t)})),e.length=0},jr:t=>{s=t,e.forEach((t=>{this.ks(t,s)}))},Zr:()=>s}}Cs(t,i){const s=this.Yr.get(t);s&&(s.curUnanimatedHighlightValue=zi(i),this.us.xs())}gs(t,i=!1){const s=this.Yr.get(t);return s?i?s.curAnimatedHighlightValue:s.curUnanimatedHighlightValue:0}ks(t,i){const s=this.Yr.get(t);s&&(s.animationEnabled=i)}Ts(t){const i=this.Yr.get(t);return!!i&&i.animationEnabled}Es(t){let i=!1;this.Yr.forEach(((s,e)=>{let h;if(s.animationEnabled){const e=1e3;if(s.curUnanimatedHighlightValue>0){const r=s.curAnimationPositionMillis/e;h=s.curUnanimatedHighlightValue*Math.abs(Math.sin(r*Math.PI/2+.5));const n=0===s.curAnimatedHighlightValue?1:t;s.curAnimationPositionMillis+=n,i=!0}else s.curAnimatedHighlightValue>0&&0===s.curUnanimatedHighlightValue?(h=Math.max(s.curAnimatedHighlightValue-t/e,0),i=i||h>0):h=0,s.curAnimationPositionMillis=0}else h=s.curUnanimatedHighlightValue;h!==s.curAnimatedHighlightValue&&(s.applyHighlight(h),s.curAnimatedHighlightValue=h)})),i&&this.us.xs(!0)}}const Gh=new Map,Wh=(t,i)=>{const s=t.getSize(),e=t.getFamily(),h=t.getWeight(),r=t.getStyle(),n=t.getVariant(),o=`${r} ${n?"small-caps":"normal"} ${h} ${s}px ${e}`,a=`${o} ${i.toFixed(2)}`;let l=Gh.get(a);return l||(l=((t,i,s,e)=>({font:t,properties:i,dpr:s,id:e}))(o,{type:"font",size:s,family:e,style:r,variant:n,weight:h},i,a),Gh.set(a,l)),l};var Uh,Yh;!function(t){t[t.click=0]="click",t[t.dbclick=1]="dbclick",t[t.mouseDown=2]="mouseDown",t[t.mouseUp=3]="mouseUp",t[t.contextmenu=4]="contextmenu",t[t.wheel=5]="wheel"}(Uh||(Uh={})),function(t){t[t.touchStart=0]="touchStart",t[t.touchMove=1]="touchMove",t[t.touchEnd=2]="touchEnd"}(Yh||(Yh={}));const Hh=t=>({container:t.Qr,setMouseStyle:(i,s)=>t.Jr(i,s),restoreMouseStyle:i=>t.Kr(i),captureFrame:(i,s,e)=>t.qr(i,s,e),renderFrame:(i,s,e=!1)=>t.tn(i,s,e),layout:()=>{t.sn(),t.en(),t.rn.hn(),t.xs()},setBackgroundFillStyle(i){return t.setBackgroundFillStyle(i),this},setBackgroundStrokeStyle(i){return t.setBackgroundStrokeStyle(i),this},getBackgroundFillStyle:()=>t.getBackgroundFillStyle(),getBackgroundStrokeStyle:()=>t.getBackgroundStrokeStyle(),addCustomIcon:(i,s)=>t.nn(i,s),onRenderFrame:i=>t.an(i),offRenderFrame:i=>t.ln(i)}),$h=[];let Xh;const jh=()=>{if(void 0!==Xh){const t=Ot.getComputedStyle(Ot.document.body),i=Number(t.getPropertyValue("margin-top").replace("px",""))+Number(t.getPropertyValue("margin-bottom").replace("px",""));Xh.style.height=Ot.innerHeight-i+"px",(()=>{for(let t=0;t<$h.length;t+=1)$h[t]()})()}},Zh=new U({color:S(255,255,255)}),Qh={font:Wh(Ph,0),fillStyle:Zh,lineStyle:new ve({fillStyle:Zh,thickness:1}),pointStyle3D:new Oh.Triangulated};class Jh{constructor(t,i,e){this.L=new s,this.ft=dt.d2({scaleXYConstructor:Ks}),this.un=new Map,this.cn=K((()=>this.xs()),60),this.dn=n(0,0),this.fn=!1,this.An=Yt,this.gn=()=>{},this.yn=[],this.mn=-1,this.pn=[],this.vn=!0,this.Xi=!1,this.Sn=!1,this.en=()=>{const{bottom:t,left:i}=this.Qr.getBoundingClientRect();return this.dn=n(Math.floor(i),Math.floor(t)),this},this.bn=t=>{if(this.xn){const i=this.xn.entity.Mn;i&&i(this.xn.entity,t,this.xn.button,this.xn.startLocation,this.xn.collectionMember,this.xn.info),this.xn=void 0}},this.sn=()=>{this._n&&this._n()},this.Jr=(t,i)=>{if(!i){this.Qr.style.cursor=t;const i=this.mn;return this.mn+=1,this.pn.push([i,t]),i}return this.Kr(i),this.Jr(t)},this.Kr=t=>{const i=t?this.pn.findIndex((i=>i[0]===t)):-1;i>=0?(this.pn.splice(i,1),this.pn.length>0?this.Qr.style.cursor=this.pn[this.pn.length-1][1]:this.Qr.style.cursor="default"):(this.pn.push([0,"default"]),this.Qr.style.cursor="default")},this.wn=t=>(this.Cn.M(t),this),this.kn=()=>this.Cn._(),this.Tn=()=>{this.An&&this.An(1e3/60),this.Fn(),this.In(),this.gn&&this.gn()},this.Pn=t=>(this.un.set(t.Dn(),t),this.un=new Map([...this.un.entries()].sort(((t,i)=>t[0]-i[0]))),t),this.Bn=t=>(this.un.delete(t),this),this.Z=()=>(this.Cn.o=!1,this),this.J=()=>(this.Cn.o=!0,this),this.Ln=t=>{if(!this.vn)return;const i=this.Rn,s=i&&i.clientX===t.clientX&&i.clientY===t.clientY,e=this.Ss({x:t.clientX,y:t.clientY});if(this.En&&((null==e?void 0:e.entity)!==this.En.entity||e.collectionMember!==this.En.collectionMember)&&!this.xn){this.En.entity.Fs=!1;const i=this.En.entity.zn;i&&i(this.En.entity,t,this.En.collectionMember)}if(e&&e.entity.getMouseInteractions()&&!this.xn)if(e.entity.Fs){if(!s){const i=e.entity.Vn;i&&i(e.entity,t,e.collectionMember,e.info)}}else{e.entity.Fs=!0;const i=e.entity.On;i&&i(e.entity,t,e.collectionMember,e.info)}if(this.xn){const s=this.xn.entity.Nn,e=i?n(t.clientX-i.clientX,i.clientY-t.clientY):{x:0,y:0};!s||0===e.x&&0===e.y||s(this.xn.entity,t,this.xn.button,this.xn.startLocation,e,this.xn.collectionMember,this.xn.info)}this.Gn=t,this.Rn=t,this.En=e?{...e,event:t}:void 0},this.Wn=t=>{if(this.vn=!1,this.Gn=t,this.En&&!this.Un&&!this.xn){this.En.entity.Fs=!1;const i=this.En.entity.zn;i&&i(this.En.entity,t,this.En.collectionMember),this.En=void 0}},this.Yn=t=>{if(this.vn=!0,this.Gn=t,this.xn&&t.buttons<=0){const i=this.xn.entity.Mn;i&&i(this.xn.entity,t,this.xn.button,this.xn.startLocation,this.xn.collectionMember,this.xn.info),this.xn=void 0}if(this.Un&&t.buttons<=0){const i=this.Un.entity.Hn;i&&i(this.Un.entity,t,this.Un.collectionMember,this.Un.info),this.Un=void 0}},this.$n=()=>this.Gn&&this.Xn?this.Gn.timeStamp>this.Xn.timeStamp?this.Gn:this.Xn:this.Gn||this.Xn,this.rn=t,this.qi=i.theme,this.jn=e.jn,this.Zn=e.Zn,this.Qn=e.Qn,this.Jn={Kn:i&&i.overrideInteractionMouseButtons?i.overrideInteractionMouseButtons:void 0,Js:i&&void 0!==i.resourcesBaseUrl&&null!==i.resourcesBaseUrl?i.resourcesBaseUrl:`${Ot.location.origin}/resources`,qn:!i||!("warnings"in i)||"boolean"!=typeof i.warnings||i.warnings,io:(()=>{const t=null==i?void 0:i.pickingPrecision;if("string"==typeof t){const i=t.toLowerCase();if("best"===i)return 1;if("high"===i)return.5;if("low"===i)return 1/8}return 1/4})(),so:void 0===(null==i?void 0:i.interactable)||i.interactable,eo:void 0===i.textPixelSnappingEnabled||i.textPixelSnappingEnabled};const h=i?i.container:void 0;if(h){if("string"==typeof h){const t=Ot.document.getElementById(h);if(!t)throw new Error(`Container "${h}" doesn't exist.`);this.Qr=t}else this.Qr=h;Ot.addEventListener("resize",this.sn),this.yn.push((()=>{Ot.removeEventListener("resize",this.sn)}))}else{if(void 0===Xh){const t=Ot.document.createElement("div");t.id="lcjs-auto-flexbox",t.style.position="relative",t.style.width="100%",t.style.display="flex",t.style.flexDirection="column",Ot.document.body.appendChild(t),Xh=t,Ot.addEventListener("resize",jh)}let t=1;for(;null!==Ot.document.getElementById(`chart-${t}`);)t+=1;this.Qr=Ot.document.createElement("div"),this.Qr.id=`chart-${t}`,this.Qr.style.flex="1",this.Qr.style.height="100%",Xh.appendChild(this.Qr),jh(),$h.push(this.sn),this.yn.push((()=>{Xh&&Xh.removeChild(this.Qr),$h.includes(this.sn)&&$h.splice($h.indexOf(this.sn),1),0===$h.length&&Xh&&(Ot.document.body.removeChild(Xh),Xh=void 0,Ot.removeEventListener("resize",jh))}))}if(Ot.ResizeObserver){const t=t=>{for(const i of t)i.target===this.Qr&&this.sn()};this.ho=new Ot.ResizeObserver(t.bind(this)),this.ho.observe(this.Qr)}""===this.Qr.style.position&&(this.Qr.style.position="relative"),this.Qr.style.boxSizing="content-box",this.Qr.addEventListener("fullscreenchange",this.sn),this.Qr.addEventListener("webkitfullscreenchange",this.sn);const r=i?i.maxFps:void 0;this.ro=r?-1===r?-1:0!==r?1e3/r:0:0;const o=new Map;let a=!1;const l=(t,i)=>s=>{const e=function(t){return{x:t.clientX,y:t.clientY}}(s);switch(s.type){case"pointerover":case"pointerenter":case"pointermove":case"pointerdown":o.set(s.pointerId,e);break;default:o.delete(s.pointerId),a=!1}switch(s.interactions=Array.from(o.values()),s.pointerType){case"pen":case"mouse":default:t&&t(s);break;case"touch":i&&i(s)}s.defaultPrevented&&(a=!0)};this.Qr.onwheel=this.no(Uh.wheel),this.Qr.oncontextmenu=this.no(Uh.contextmenu),this.Qr.onclick=this.no(Uh.click),this.Qr.ondblclick=this.no(Uh.dbclick),this.Qr.onlostpointercapture=()=>{a=!1},this.Qr.ontouchmove=t=>{a&&t.preventDefault()},this.Qr.onpointerover=l(),this.Qr.onpointerenter=l(this.Yn),this.Qr.onpointerdown=l(this.no(Uh.mouseDown),this.oo(Yh.touchStart)),this.Qr.onpointermove=l(this.Ln,this.oo(Yh.touchMove)),this.Qr.onpointerup=l(this.no(Uh.mouseUp),this.oo(Yh.touchEnd)),this.Qr.onpointercancel=l(),this.Qr.onpointerout=l(),this.Qr.onpointerleave=l(this.Wn,this.oo(Yh.touchEnd)),Ot.addEventListener("dragstart",this.bn),Ot.addEventListener("scroll",this.en,{passive:!0}),this.Cn=f(new p({r:0,g:0,b:0,a:0})),this.ls=new Nh(this)}ao(t,i){var s,e,h,r;(null===(s=this.En)||void 0===s?void 0:s.entity)===t.entity&&this.En.collectionMember===t.collectionMember&&(this.En={...i,info:this.En.info,event:this.En.event}),(null===(e=this.lo)||void 0===e?void 0:e.entity)===t.entity&&this.lo.collectionMember===t.collectionMember&&(this.lo={...i,info:this.lo.info}),(null===(h=this.Un)||void 0===h?void 0:h.entity)===t.entity&&this.Un.collectionMember===t.collectionMember&&(this.Un={...i,info:this.Un.info,event:this.Un.event}),(null===(r=this.xn)||void 0===r?void 0:r.entity)===t.entity&&this.xn.collectionMember===t.collectionMember&&(this.xn={...i,info:this.xn.info,button:this.xn.button,startLocation:this.xn.startLocation})}uo(){this.Sn=!0,this.An=void 0,this.gn=void 0}an(t){return this.L.on("render",t)}ln(t){return this.L.off(t)}co(){return this.do}fo(){return this.Ao}setBackgroundFillStyle(t){return this.yo.De(t),this}getBackgroundFillStyle(){return this.yo.$h()}setBackgroundStrokeStyle(t){return this.yo.Pe(t),this}getBackgroundStrokeStyle(){return this.yo.mo()}po(t){return this.gn=t,this}vo(t){return this.An=t,this}So(t){return this.un.get(t)}bo(){return Array.from(this.un.keys()).reverse().reduce(((t,i)=>i!==Number.MAX_SAFE_INTEGER&&i>t?i:t),0)+1}no(t){return i=>this.xo(t,i)}xo(t,i){if(!this.vn)return;t===Uh.contextmenu&&di(i);const s=this.Ss({x:i.clientX,y:i.clientY});if(t===Uh.mouseUp){if(this.xn){const t=this.xn.entity.Mn;if(t&&t(this.xn.entity,i,this.xn.button,this.xn.startLocation,this.xn.collectionMember,this.xn.info),(null==s?void 0:s.entity)!==this.xn.entity||s.collectionMember!==this.xn.collectionMember){this.xn.entity.Fs=!1;const t=this.xn.entity.zn;t&&t(this.xn.entity,i,this.xn.collectionMember)}this.xn=void 0}if(this.Un){const t=this.Un.entity.getMouseInteractions()&&this.Un.entity.Hn;t&&t(this.Un.entity,i,this.Un.collectionMember,this.Un.info),this.Un=void 0}}else if(s&&s.entity.getMouseInteractions()){const e=t===Uh.click?s.entity.Mo:t===Uh.dbclick?s.entity._o:t===Uh.mouseDown?s.entity.wo:t===Uh.wheel?s.entity.Co:t===Uh.contextmenu?s.entity.ko:void 0;if(e&&e(s.entity,i,s.collectionMember,s.info),t===Uh.mouseDown){this.Un={entity:s.entity,collectionMember:s.collectionMember,event:i,info:s.info};const t=this.Un.event.button,e=s.entity.To;e&&e(s.entity,i,t,s.collectionMember,s.info),this.xn={entity:s.entity,collectionMember:s.collectionMember,button:t,startLocation:n(i.clientX,i.clientY),info:s.info}}}this.Gn=i,this.En=s?{...s,event:i}:void 0}oo(t){return i=>this.Fo(t,i)}Fo(t,i){const s=i.interactions.length;if(this.Xn=i,this.lo){const e=t===Yh.touchMove?this.lo.entity.Io:t===Yh.touchEnd?this.lo.entity.Po:t===Yh.touchStart?this.lo.entity.Do:void 0;e&&e(this.lo.entity,i,this.lo.collectionMember,this.lo.info),t===Yh.touchEnd&&0===s&&(this.lo.entity.Fs=!1,this.lo=void 0)}else if(t===Yh.touchStart){for(let t=0;t<s&&(this.lo=this.Ss({x:i.interactions[t].x,y:i.interactions[t].y}),!this.lo);t+=1);if(this.lo){this.lo.entity.Fs=!0;const t=this.lo.entity.Do;t&&t(this.lo.entity,i,this.lo.collectionMember,this.lo.info)}}}Bo(t){return this.L.on("resize",t)}Lo(t){return this.L.off(t,"resize")}Ro(){return this.L.topicOff("resize"),this}Eo(t){return this.L.on("inViewChange",t)}zo(t){return this.L.off(t)}U(){if(!this.Xi){if(this.Xi=!0,this.un)for(const t of this.un.values())t.U();this.An=void 0,this.gn=void 0,Ot.removeEventListener("dragstart",this.bn),Ot.removeEventListener("scroll",this.en),this.Qr.removeEventListener("fullscreenchange",this.sn),this.Qr.removeEventListener("webkitfullscreenchange",this.sn),this.ho&&(this.ho.disconnect(),this.ho=void 0),this.yn.forEach((t=>{t()})),this.yn.length=0}}ze(t,i){return n(t-this.dn.x,this.dn.y-i)}Vo(t,i){return n(t+this.dn.x,this.dn.y-i)}Oo(t){const i=this.ze(t.clientX,t.clientY);return{engineX:i.x,engineY:i.y}}No(t){const i=this.Vo(t.engineX,t.engineY);return{clientX:i.x,clientY:i.y}}}const Kh=(t=1)=>({type:"horizontalProgressive",packager:(i,s,e)=>{if(i.length>1){const h=_s(s,e*t),r=Math.abs(h.x),o=i.length,a=[];let l=0,u=0,c=i[0].x+r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.x<c&&u<o){const s=u;let e=t.y,h=t.y;for(;u<o&&i[u].x<=c;)i[u].y>e&&(e=i[u].y),i[u].y<h&&(h=i[u].y),u+=1;if(s!==u){const t=(a[l-1].x+i[u-1].x)/2;a[l+0]=n(t,h),a[l+1]=n(t,e),a[l+2]=i[u-1],l+=3}}c+=r}return a}return i.slice()}}),qh=(t=1)=>({type:"horizontalRegressive",packager:(i,s,e)=>{if(i.length>1){const h=_s(s,e*t),r=Math.abs(h.x),o=i.length,a=[];let l=0,u=0,c=i[0].x-r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.x>c&&u<o){const s=u;let e=t.y,h=t.y;for(;u<o&&i[u].x>=c;)i[u].y>e&&(e=i[u].y),i[u].y<h&&(h=i[u].y),u+=1;if(s!==u){const t=(a[l-1].x+i[u-1].x)/2;a[l+0]=n(t,h),a[l+1]=n(t,e),a[l+2]=i[u-1],l+=3}}c-=r}return a}return i.slice()}}),tr=(t=1)=>({type:"verticalProgressive",packager:(i,s,e)=>{if(i.length>1){const h=_s(s,e*t),r=Math.abs(h.y),o=i.length,a=[];let l=0,u=0,c=i[0].y+r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.y<c&&u<o){const s=u;let e=t.x,h=t.x;for(;u<o&&i[u].y<=c;)i[u].x>e&&(e=i[u].x),i[u].x<h&&(h=i[u].x),u+=1;if(s!==u){const t=(a[l-1].y+i[u-1].y)/2;a[l+0]=n(h,t),a[l+1]=n(e,t),a[l+2]=i[u-1],l+=3}}c+=r}return a}return i.slice()}}),ir=(t=1)=>({type:"verticalRegressive",packager:(i,s,e)=>{if(i.length>1){const h=_s(s,e*t),r=Math.abs(h.y),o=i.length,a=[];let l=0,u=0,c=i[0].y-r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.y>c&&u<o){const s=u;let e=t.x,h=t.x;for(;u<o&&i[u].y>=c;)i[u].x>e&&(e=i[u].x),i[u].x<h&&(h=i[u].x),u+=1;if(s!==u){const t=(a[l-1].y+i[u-1].y)/2;a[l+0]=n(h,t),a[l+1]=n(e,t),a[l+2]=i[u-1],l+=3}}c-=r}return a}return i.slice()}});var sr;!function(t){t[t.Square=0]="Square",t[t.Circle=1]="Circle",t[t.HollowCircle=2]="HollowCircle",t[t.Triangle=3]="Triangle",t[t.Cross=4]="Cross",t[t.Diamond=5]="Diamond",t[t.Plus=6]="Plus",t[t.Minus=7]="Minus",t[t.Arrow=8]="Arrow",t[t.Star=9]="Star"}(sr||(sr={}));const er={ProgressiveX:"ProgressiveX",ProgressiveY:"ProgressiveY",RegressiveX:"RegressiveX",RegressiveY:"RegressiveY"};var hr;!function(t){t[t.Nearest=0]="Nearest",t[t.NearestX=1]="NearestX",t[t.NearestY=2]="NearestY"}(hr||(hr={}));const rr=(t,i,s,e,h,r,n,o,a,l)=>{const u=t.length;if(0===u)return;const c=e?1:0,d=u-(h?2:1);if(s===hr.Nearest)return nr(t,i,r,n,c,d);if(s===hr.NearestX||s===hr.NearestY){if("boolean"==typeof l&&("x"===a&&s===hr.NearestX||"y"===a&&s===hr.NearestY))return lr(t,At(i,n,r),a,l,c,d);if(s===hr.NearestX)return or(t,At(i,n,r),o,c,d);if(s===hr.NearestY)return ar(t,At(i,n,r),o,c,d)}},nr=(t,i,s,e,h,r)=>{let n,o=Number.MAX_VALUE;for(let a=h;a<=r;a+=1){const h=t[a];if(!Number.isNaN(h.x)&&!Number.isNaN(h.y)){const t=At(h,s,e),r=(t.x-i.x)**2+(t.y-i.y)**2;r<o&&(o=r,n=a)}}return n},or=(t,i,s,e,h)=>{if(i.x<s.min.x||i.x>s.max.x)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.x>i.x?e.x-i.x:i.x-e.x;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},ar=(t,i,s,e,h)=>{if(i.y<s.min.y||i.y>s.max.y)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.y>i.y?e.y-i.y:i.y-e.y;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},lr=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<u||o>d)||!n&&(o<c||o>f))return;let A=h,g=Math.floor((h+r)/2),y=r,m=-1;for(;;){const i=o-(n?t[g].x:t[g].y);if(i*(e?-1:1)>0)A=Math.min(g+1,y),m=Math.floor((A+y)/2);else{if(0===Math.abs(i))return g;y=Math.max(g-1,A),m=Math.floor((A+y)/2)}if(m===g){const s=g>h?Math.abs(o-(n?t[g-1].x:t[g-1].y)):Ki,e=g<r?Math.abs(o-(n?t[g+1].x:t[g+1].y)):Ki,a=Math.abs(i);switch(Math.min(a,s,e)){case s:return g-1;case e:return g+1;default:return g}}else g=m}},ur=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<u||o>d)||!n&&(o<c||o>f))return;let A=h,g=Math.floor((h+r)/2),y=r,m=-1;for(;;){const s=o-(n?t[g].x:t[g].y);if(s*(e?-1:1)>0)A=Math.min(g+1,y),m=Math.floor((A+y)/2);else{if(0===Math.abs(s))return{a:g,b:g,lerpAmount:0};y=Math.max(g-1,A),m=Math.floor((A+y)/2)}if(m===g){if(s*(e?-1:1)<0&&g>h){const s=t[g-1],e=t[g];return{a:g-1,b:g,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}if(g<r){const s=t[g],e=t[g+1];return{a:g,b:g+1,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}return{a:g,b:g,lerpAmount:0}}g=m}};let cr=0;class dr{constructor(t,i,e){this.Go=f(!0),this.Wo=!1,this.Fs=!1,this.Uo=!1,this.Xi=!1,this.ji=!0,this.Yo=void 0,this.Ho=0,this.L=new s,this.Vn=void 0,this.On=void 0,this.zn=void 0,this.Mo=void 0,this.Co=void 0,this.ko=void 0,this._o=void 0,this.wo=void 0,this.Hn=void 0,this.To=void 0,this.Nn=void 0,this.Mn=void 0,this.Do=void 0,this.Io=void 0,this.Po=void 0,this.onDispose=t=>this.L.on("dispose",t),this.offDispose=t=>this.L.off(t,"dispose"),this.us=t,this.$o=i,this.Xo=e,this.jo=cr,cr+=1,this.Zo=t.qi.highlightColorOffset}Qo(){let t;return this.Jo("DataPattern",(i=>(t=i.pattern,!0))),"ProgressiveX"===t||"RegressiveX"===t?hr.NearestX:"ProgressiveY"===t||"RegressiveY"===t?hr.NearestY:hr.Nearest}Ko(t){return void 0!==this.Xo.find((i=>i.type===t))}Jo(t,i){var s;return!!this.Ko(t)&&!0===i(null===(s=this.Xo.find((i=>i.type===t)))||void 0===s?void 0:s.args)}dispose(){return this.Xi||(this.Fs&&this.zn&&this.zn(this,void 0,void 0),this.Xi=!0,this.$o(this),this.L.emit("dispose",this)),this}isDisposed(){return this.Xi}setVisible(t){const i=this.ji;return this.ji=t,!t&&i&&(this.Fs&&this.zn&&this.zn(this,void 0,void 0),this.Fs=!1),this}getVisible(){return this.ji}setMouseInteractions(t){const i=this.Go._();return this.Go.M(t),t||(i&&this.Fs&&this.zn&&this.zn(this,void 0,void 0),this.Fs=!1),this}getMouseInteractions(){return this.Go._()}getIsUnderMouse(){return this.Fs}getIsGrabbed(){return this.Uo}setMouseMoveEventHandler(t){return this.Vn=t,this}setMouseEnterEventHandler(t){return this.On=t,this}setMouseLeaveEventHandler(t){return this.zn=t,this}setMouseClickEventHandler(t){return this.Mo=t,this}setMouseDoubleClickEventHandler(t){return this._o=t,this}setMouseDownEventHandler(t){return this.wo=t,this}setMouseUpEventHandler(t){return this.Hn=t,this}setMouseWheelEventHandler(t){return this.Co=t,this}setMouseContextMenuEventHandler(t){return this.ko=t,this}setMouseDragEventHandler(t){return this.Nn=t,this}setMouseDragStartEventHandler(t){return this.To=t,this}setMouseDragStopEventHandler(t){return this.Mn=t,this}setTouchStartEventHandler(t){return this.Do=t,this}setTouchMoveEventHandler(t){return this.Io=t,this}setTouchEndEventHandler(t){return this.Po=t,this}qo(t){return this.Yo=t,this}ta(){return this.Yo?this.Yo:fr}cs(t){return this.Ho=t,this}ia(){return this.Ho}sa(t){return this.Zo=t,this}ea(){return this.Zo}}const fr=c(n(0,0),n(0,0));class Ar extends dr{constructor(t,i,s,e){super(t,s,e),this.ha=0,this.Ds=i,this.Ds.ra=!0}na(t){return this.ha===t||(this.ha=t,this.Ds.ra=!0),this}oa(){return this.ha}}class gr extends Ar{constructor(t,i,s,e,h){super(t,i,e,h),this.aa=!0,this.ft=s}}const yr=(t,i,s)=>{if(s instanceof Ks){const e=s.Gi(),h=ks(i,{x:Math.abs(e.x),y:Math.abs(e.y)});return c(n(t.min.x-h.x,t.min.y-h.y),n(t.max.x+h.x,t.max.y+h.y))}return c(s.gi(n(t.min.x,t.min.y),_s(i,-1)),s.gi(n(t.max.x,t.max.y),i))},mr=(t,i)=>"function"==typeof i?i(t):i,pr=(t,i)=>!t||t!==i,vr=(t,i)=>t===O&&i!==O,Sr=t=>t!==O;class br extends gr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ke=Qh.fillStyle,this.us=t}De(t){return this.ke=mr(this.ke,t),this}$h(){return this.ke}la(){return pr(this.ua,this.ke)}ca(){return vr(this.ua,this.ke)}da(){return Sr(this.ke)}fa(t){this.ua=t}}class xr extends br{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Te=Qh.lineStyle,this.us=t}Pe(t){return this.Te="function"==typeof t?t(this.Te):t,this}mo(){return this.Te}Aa(){return!this.ga||this.ga!==this.Te}ya(t){return!this.ga||this.ga.getThickness()!==t}da(){return this.Te!==at||super.da()}ca(){return(this.Te!==at||this.ke!==O)&&this.ga===at&&this.ua===O}ma(t){this.ga=t}}class Mr extends br{constructor(t,i,s,e,h,r=f(5)){super(t,i,s,e,h),this.size=f(5),this.size=r}tt(t){return this.size.M(t),this}}class _r extends br{constructor(t,i,s,e,h,r=f(Qh.font)){super(t,i,s,e,h),this.pa=f(""),this.va=f(n(0,0)),this.Sa=f(0),this.ba=f(0),this.xa=f(n(0,0)),this.Ma=f(0),this._a=f(Ph),this.wa=n(0,0),this.$t=f(A(1,1,1,1)),this.Ca=f(g(4,4,4,4)),this.font=f(Qh.font),this.ka=!1,this.font=r}da(){return Sr(this.ke)&&this.pa._().length>0}ca(){return!1===this.ka&&this.da()}yr(t){return this.pa.M(t),this}wr(){return this.pa._()}Zh(t){return Ih(t)?this._a.M(t):this._a.M(t(this._a._())),this}jh(){return this._a._()}Ta(t){return this._a.M(this._a._().setFamily(t)),this}Fa(){return this._a._().getFamily()}Ia(t){return this._a.M(this._a._().setSize(t)),this}Pa(){return this._a._().getSize()}Da(t){return this._a.M(this._a._().setWeight(t)),this}Ba(){return this._a._().getWeight()}La(t){return this._a.M(this._a._().setStyle(t)),this}Ra(){return this._a._().getStyle()}Ea(t){return this._a.M(this._a._().setVariant(t)),this}za(){return this._a._().getVariant()}Re(t){return this.va.M(t),this}Va(){return this.va._()}Qh(t){return this.Ma.M(t),this}Jh(){return this.Ma._()}Oa(t,i){return this.xa.M(n(t,i)),this}Na(){return this.xa._()}Ga(t){return this.ba.M(t),this}Wa(){return this.ba._()}Ua(t){return this.Sa.M(t),this}Ya(){return this.Sa._()}Ha(t){return this.ba.M(t.x),this.Sa.M(t.y),this}Vr(t){return this.$t.M(t),this}$a(){return this.$t._()}Or(t){return this.Ca.M(t),this}Xa(){return this.Ca._()}}class wr extends Mr{constructor(t,i,s,e,h,r=5){super(t,i,s,e,h,f(r)),this.ja=[],this.Za=f(sr.Square),this.Ma=f(0),this.Qa=f(!1),this.Ja=f(!1),this.Ka=f(!1),this.qa=ts,this.tl=0,this.il=[],this.sl=0,this.el=ts,this.hl=!1,this.rl=void 0}nl(){return this.il}ol(){return this.ja}al(t){return this.Za.M(t),this}ll(){return this.Za._()}Qh(t){return this.Ma.M(t),this}Jh(){return this.Ma._()}ul(t){return this.Qa.M(t),this}cl(t){return this.Ja.M(t),this}dl(t){return this.Ka.M(t),this}fl(t,i){return Array.isArray(t)||(t=[t]),this.sl+=t.length,this.il=xi(this.il,t,{canReturnB:!0}),this.el&&(this.el=i?ys(this.el,i):void 0),this.rl=void 0,this}Vt(){return this.hl=!0,this.ja.length=0,this.tl=0,this.qa=ts,this.il=[],this.sl=0,this.rl=void 0,this}Al(){return this.tl}yl(){return this.sl}}class Cr extends xr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.va=f(n(0,0)),this.j=f(n(100,100)),this.Ma=f(0),this.wa=f(n(0,0)),this.ml=!1}Es(){return this.pl(),this}Re(t){const i=this.va._();return t.x===i.x&&t.y===i.y||(this.va.M(t),this.pl()),this}Va(){return this.va._()}vl(t){const i=this.va._();return t!==i.x&&(this.va.M(n(t,i.y)),this.pl()),this}Sl(t){const i=this.va._();return t!==i.y&&(this.va.M(n(i.x,t)),this.pl()),this}tt(t){const i=this.j._();return t.x===i.x&&t.y===i.y||(this.j.M(n(t.x,t.y)),this.pl()),this}ni(){return this.j._()}bl(t){const i=this.j._();return t!==i.x&&(this.j.M(n(t,i.y)),this.pl()),this}xl(t){const i=this.j._();return t!==i.x&&(this.j.M(n(i.x,t)),this.pl()),this}Qh(t){return this.Ma.M(t),this}Jh(){return this.Ma._()}Ml(t){const i=this.wa._();return t===i&&i.x===t.x&&i.y===t.y||(void 0===t?(this.ml=!1,this.pl()):(this.ml=!0,this.wa.M(t))),this}pl(){if(!this.ml){const t=this.va._(),i=this.j._(),s=n(t.x+i.x/2,t.y+i.y/2),e=this.wa._();s.x===e.x&&s.y===e.y||this.wa.M(s)}}}class kr extends xr{constructor(){super(...arguments),this.ja=[],this.va=f(n(0,0)),this.qa=ts,this._l=!1}wl(t){return t=mi(t),this.ja=t,this._l=!0,this}Cl(){return this.ja}vt(){return this.qa.max.x}yt(){return this.qa.min.x}bt(){return this.qa.max.y}St(){return this.qa.min.y}kl(){return 0}Tl(){return 0}}class Tr extends kr{}class Fr extends br{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Fl=new Array,this.Il=new Array,this.Pl=f({type:"disabled",packager:(t,i,s)=>t.slice()}),this.qa=ts,this.Dl=0,this.Bl=!1,this.il=[Array(),Array()],this.Ll=!1,this.Rl=(new U).setColor(S(42,171,240)),this.hl=!1,this.El=!1,this.zl=!1}fl(t,i){const s=this.Dl-1,e=s>0&&!this.Ll;let[h,r]=e?[[this.Fl[s]],[this.Il[s]]]:[[],[]];if(t instanceof Array){const[i,s]=u(t);h=xi(h,i,{canReturnB:!0}),r=xi(r,s,{canReturnB:!0})}else{const i=t.position;h.push(n(i,t.high)),r.push(n(i,t.low))}return this.Ll?(this.il[0]=xi(this.il[0],h,{canReturnB:!0}),this.il[1]=xi(this.il[1],r,{canReturnB:!0})):(this.il=[h,r],this.Ll=!0),this.qa=ys(this.qa,i||ys(As(h),As(r))),this}Vt(){return this.hl=!0,this.Fl.length=0,this.Il.length=0,this.Dl=0,this.qa=ts,this}ol(){return[this.Fl,this.Il]}nl(){return[this.il[0],this.il[1]]}Vl(t){return this.Pl.M(t),this}Ol(){return this.Pl._()}Nl(t){return this.Rl="function"==typeof t?t(this.Rl):t,this}Gl(){return this.Rl}Al(){return this.Dl-(Number(this.El)+Number(this.zl))}yl(){return this.il.length}Wl(t){return this.El=t,this}Ul(){return this.El}Yl(t){return this.zl=t,this}Hl(){return this.zl}ca(){return this.ua===O&&this.$l===O&&(this.ke!==O||this.Rl!==O)}Xl(t){this.$l=t}da(){return this.Rl!==O||super.da()}la(){return super.la()||!this.$l||this.$l!==this.Rl}}class Ir extends xr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.va=f(n(0,0)),this.jl=f(0),this.Ti=f(360),this.Zl=f(100),this.Ql=f(100),this.Jl=f(0),this.Kl=f(void 0),this.ql=n(0,0),this.tu=n(0,0),this.iu=n(0,0)}su(){return this.Zl._()}eu(){return this.Ql._()}Va(){return this.va._()}hu(){return this.jl._()}ki(){return this.Ti._()}ru(){return this.Jl._()}nu(){return this.Kl._()}ou(){return this.ql}au(){return this.tu}lu(){return this.iu}Re(t){return this.va.M(t),this}uu(t){return this.jl.M(t),this}Ue(t){return this.Ti.M(t),this}cu(t){return this.Ql.M(t),this.Zl.M(t),this}du(t){return this.Zl.M(t),this}fu(t){return this.Ql.M(t),this}Au(t){return this.Jl.M(t<0?0:t),this}gu(t){return this.Kl.M(void 0!==t&&t<=0?void 0:t),this}}var Pr;!function(t){t[t.Complex=0]="Complex",t[t.Simple=1]="Simple"}(Pr||(Pr={}));const Dr=(t,i)=>"function"==typeof i?i(t):i,Br=(t,i)=>!t||t!==i,Lr=(t,i)=>!t||t.getThickness()!==i,Rr=(t,i)=>t===at&&i!==at,Er=t=>t!==at&&t.getFillStyle()!==O;class zr extends gr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.yu=Qh.lineStyle,this.engine=t}Ge(t){return this.yu=Dr(this.yu,t),this}mu(){return this.yu}Aa(){return Br(this.pu,this.yu)}vu(t){return Lr(this.pu,t)}ca(){return Rr(this.pu,this.yu)}da(){return Er(this.yu)}Su(t){this.pu=t}}class Vr extends zr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Ii=n(0,0),this.Ti=n(0,0),this.bu=!1}M({min:t,max:i}){return t.x===this.Ii.x&&t.y===this.Ii.y&&i.x===this.Ti.x&&i.y===this.Ti.y||(this.bu=!0,this.Ii=t,this.Ti=i),this}Fi(){return this.Ii}ki(){return this.Ti}Ye(t){return t.x===this.Ii.x&&t.y===this.Ii.y||(this.bu=!0,this.Ii=t),this}Ue(t){return t.x===this.Ti.x&&t.y===this.Ti.y||(this.bu=!0,this.Ti=t),this}}class Or extends zr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.xu=void 0}}class Nr extends zr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Mu=[],this.qa=ts,this.il=new Array,this.tl=0,this.hl=!1,this._u=f(void 0),this.El=!1,this.zl=!1}wu(t){return this._u.M(t),this}Cu(){return this._u._()}nl(){return this.il}ol(){return this.Mu}Vt(){return this.hl=!0,this.Mu.length=0,this.tl=0,this.il=[],this.qa=ts,this}Al(){return this.tl-(Number(this.El)+Number(this.zl))}yl(){return this.il.length}Wl(t){return this.El=t,this}Ul(){return this.El}Yl(t){return this.zl=t,this}Hl(){return this.zl}}const Gr=t=>{const i=t.getDraggingMode();return void 0!==i&&i!==zt.notDraggable?i===zt.draggable?Xe.Move:i===zt.onlyHorizontal?Xe.Horizontal:Xe.Vertical:void 0};class Wr{constructor(){this.ji=!0,this.L=new s,this.ku=0,this.Mt=(t,i,s)=>{0===this.ku&&this.L.emit("mouseEnter",this,i),this.ku+=1},this._t=(t,i,s)=>{this.ku-=1,this.ku<1&&(this.L.emit("mouseLeave",this,i),this.ku=0)},this.wt=(t,i,s)=>{this.L.emit("mouseClick",this,i)},this.Ct=(t,i,s)=>{this.L.emit("mouseDoubleClick",this,i)},this.kt=(t,i,s)=>{this.L.emit("mouseDown",this,i)},this.Tt=(t,i,s)=>{this.L.emit("mouseUp",this,i)},this.Ft=(t,i,s)=>{this.L.emit("mouseMove",this,i)},this.Pt=(t,i,s,e)=>{this.L.emit("mouseDragStart",this,i,s)},this.It=(t,i,s,e,h,r)=>{this.L.emit("mouseDrag",this,i,s,e,h)},this.Dt=(t,i,s,e,h)=>{this.L.emit("mouseDragStop",this,i,s,e)},this.Bt=(t,i,s)=>{this.L.emit("mouseWheel",this,i)},this.Lt=(t,i)=>{this.ku+=1,this.L.emit("touchStart",this,i)},this.Rt=(t,i)=>{this.L.emit("touchMove",this,i)},this.Et=(t,i)=>{this.ku-=1,this.L.emit("touchEnd",this,i)},this.Tu=t=>(t instanceof gr?t.setMouseEnterEventHandler(this.Mt).setMouseLeaveEventHandler(this._t).setMouseClickEventHandler(this.wt).setMouseDoubleClickEventHandler(this.Ct).setMouseDownEventHandler(this.kt).setMouseUpEventHandler(this.Tt).setMouseMoveEventHandler(this.Ft).setMouseDragEventHandler(this.It).setMouseDragStartEventHandler(this.Pt).setMouseDragStopEventHandler(this.Dt).setMouseWheelEventHandler(this.Bt).setTouchStartEventHandler(this.Lt).setTouchMoveEventHandler(this.Rt).setTouchEndEventHandler(this.Et):(t.onMouseEnter(((t,i)=>this.Mt(t,i))),t.onMouseLeave(((t,i)=>this._t(t,i))),t.onMouseClick(((t,i)=>this.wt(t,i))),t.onMouseDoubleClick(((t,i)=>this.Ct(t,i))),t.onMouseDown(((t,i)=>this.kt(t,i))),t.onMouseUp(((t,i)=>this.Tt(t,i))),t.onMouseMove(((t,i)=>this.Ft(t,i))),t.onMouseDrag(((t,i,s,e,h)=>this.It(t,i,s,e,h))),t.onMouseDragStart(((t,i,s)=>this.Pt(t,i,s))),t.onMouseDragStop(((t,i,s,e)=>this.Dt(t,i,s,e))),t.onMouseWheel(((t,i)=>this.Bt(t,i))),t.onTouchStart(((t,i)=>this.Lt(t,i))),t.onTouchMove(((t,i)=>this.Rt(t,i))),t.onTouchEnd(((t,i)=>this.Et(t,i)))),t)}onMouseEnter(t){return this.L.on("mouseEnter",t)}onMouseLeave(t){return this.L.on("mouseLeave",t)}onMouseClick(t){return this.L.on("mouseClick",t)}onMouseDoubleClick(t){return this.L.on("mouseDoubleClick",t)}onMouseDown(t){return this.L.on("mouseDown",t)}onMouseUp(t){return this.L.on("mouseUp",t)}onMouseMove(t){return this.L.on("mouseMove",t)}onMouseDragStart(t){return this.L.on("mouseDragStart",t)}onMouseDrag(t){return this.L.on("mouseDrag",t)}onMouseDragStop(t){return this.L.on("mouseDragStop",t)}onMouseWheel(t){return this.L.on("mouseWheel",t)}onTouchStart(t){return this.L.on("touchStart",t)}onTouchMove(t){return this.L.on("touchMove",t)}onTouchEnd(t){return this.L.on("touchEnd",t)}offMouseEnter(t){return this.L.off(t,"mouseEnter")}offMouseLeave(t){return this.L.off(t,"mouseLeave")}offMouseClick(t){return this.L.off(t,"mouseClick")}offMouseDoubleClick(t){return this.L.off(t,"mouseDoubleClick")}offMouseDown(t){return this.L.off(t,"mouseDown")}offMouseUp(t){return this.L.off(t,"mouseUp")}offMouseMove(t){return this.L.off(t,"mouseMove")}offMouseDragStart(t){return this.L.off(t,"mouseDragStart")}offMouseDrag(t){return this.L.off(t,"mouseDrag")}offMouseDragStop(t){return this.L.off(t,"mouseDragStop")}offMouseWheel(t){return this.L.off(t,"mouseWheel")}offTouchStart(t){return this.L.off(t,"touchStart")}offTouchMove(t){return this.L.off(t,"touchMove")}offTouchEnd(t){return this.L.off(t,"touchEnd")}getIsUnderMouse(){return this.ku>0}setVisible(t){const i=this.ji!==t;return this.ji=t,i&&this.L.emit("visibleStateChanged",this,this.ji),this}getVisible(){return this.ji}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}}const Ur=(t,i,s)=>{const e=t.getDraggingMode();if(e!==zt.notDraggable){const h=t.scale.gi(t.getPosition(),{x:e!==zt.onlyVertical?i.x:0,y:e!==zt.onlyHorizontal?i.y:0}),r=t.scale,n=t.getSize(),o=t.getOrigin(),a=r.gi({x:r.x.getInnerStart(),y:r.y.getInnerStart()},ks({x:(1+o.x)/2,y:(1+o.y)/2},n)),l=r.gi({x:r.x.getInnerEnd(),y:r.y.getInnerEnd()},ks({x:(o.x-1)/2,y:(o.y-1)/2},n)),u={x:Math.min(Math.max(h.x,a.x),l.x),y:Math.min(Math.max(h.y,a.y),l.y)};t.setPosition(u),di(s)}},Yr=(t,i,s,e,h)=>{Ur(t,h,i)},Hr=(t,i,s,e,h)=>{Ur(t,e,h)};class $r extends Wr{constructor(t,i,s,e,h){super(),this.position=n(50,50),this.origin=n(0,0),this.size=n(0,0),this.Xi=!1,this.Fu=void 0,this.Iu=void 0,this.Pu=Gr,this.Du=void 0,this.Go=!0,this.Bu=()=>{const t="function"==typeof this.Pu?this.Pu(this):this.Pu;t&&(this.Iu=this.Ds.us.Jr(t))},this.Lu=()=>{this.Ds.us.Kr(this.Iu)},this.$t=A(0,0,0,0),this.Ds=t,this.renderingScale=i,this.scale=s,this.$o=e,this.qi=h,this.Ds.xs(),this.onMouseEnter(this.Bu),this.onMouseLeave(this.Lu),this.onMouseDrag(Yr);const r=Ae(new ye(Yt,Hr,Yt));this.onTouchStart(r.onTouchStart),this.onTouchMove(r.onTouchMove),this.onTouchEnd(r.onTouchEnd),this.qi=h}setMouseInteractions(t){return this.Ru().forEach((i=>i.setMouseInteractions(t))),this.Go=t,this}getMouseInteractions(){return this.Go}setEffect(t){return this.es=this.es||this.Ds.us.es.hs(this,{Eu:{shapes:this.Ru()}}),this.es.Eu.bs(t),this}getEffect(){return!!this.es&&this.es.Eu.Ms()}setAutoDispose(t){return this.Du=t,this.Ds.xs(),this}getAutoDispose(){return this.Du}getSize(t=Rt.Everything){return t===Rt.Everything?n(this.size.x+(this.$t.left+this.$t.right),this.size.y+(this.$t.bottom+this.$t.top)):this.size}setContentSize(t){this.size=t}setMargin(t){return this.$t="object"==typeof t?y(this.$t,t):{left:t,top:t,right:t,bottom:t},this.Ds.xs(),this}getMargin(){return this.$t}Le(){if(this.Du){const t=this.size,i=this.renderingScale.ni(),s={x:t.x/i.x,y:t.y/i.y};("max-width"===this.Du.type&&s.x>=this.Du.maxWidth||"max-height"===this.Du.type&&s.y>=this.Du.maxHeight)&&this.dispose()}return this}Es(){return this}dispose(){return this.Xi||(this.Ds.xs(),this.Xi=!0,this.$o(this),this.L.emit("dispose",this),this.Ru().forEach((t=>t.dispose()))),this}setVisible(t){return super.setVisible(t),this.Ru().forEach((i=>i.setVisible(t))),this.Ds.xs(),this}isDisposed(){return this.Xi}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setPosition(t){return this.position=t,this.Ds.xs(),this}getPosition(t=this.origin,i=Rt.Everything){const s=this.getSize(Rt.Everything),e=this.scale.gi(this.position,ks({x:-(this.origin.x+1)/2,y:-(this.origin.y+1)/2},s));if(i===Rt.Everything)return this.scale.gi(e,ks({x:(t.x+1)/2,y:(t.y+1)/2},s));const h=this.scale.gi(e,{x:this.$t.left,y:this.$t.bottom}),r=this.getSize(Rt.Content);return this.scale.gi(h,ks({x:(t.x+1)/2,y:(t.y+1)/2},r))}setOrigin(t){return this.origin=t,this.Ds.xs(),this}getOrigin(){return this.origin}setDraggingMode(t=zt.notDraggable){return this.Fu=t,this.Ds.xs(),this}getDraggingMode(){return void 0!==this.Fu?this.Fu:zt.notDraggable}setMouseStyle(t){return this.Pu=t,this}getMouseStyle(){return this.Pu}}class Xr extends $r{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Ca=A(),this.zu=0,this.Ds=t,this.Vu=e,this.backgroundElement=new this.Vu(this.Ds,this.renderingScale,this.scale,Yt,r),this.Tu(this.backgroundElement)}Ru(){return this.backgroundElement.Ru()}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}setBackground(t){return t(this.backgroundElement),this}getBackground(){return this.backgroundElement}Le(){return super.Le(),this.Xi||this.backgroundElement.setOrigin(this.origin).setPosition(this.getPosition(this.origin,Rt.PaddedBackground)).Le(),this}Es(){const t=this.getSize(Rt.PaddedContent);return this.backgroundElement.Ou(t).Es(),super.Es()}dispose(){return super.dispose(),this.backgroundElement.dispose(),this}setVisible(t){return super.setVisible(t),this.backgroundElement.setVisible(t),this}setPadding(t){return this.Ca="object"==typeof t?y(this.Ca,t):{left:t,top:t,right:t,bottom:t},this.Ds.xs(),this}getPadding(){return this.Ca}getSize(t=Rt.Everything){let i=super.getSize(t);return t>=Rt.PaddedContent&&(i=n(i.x+this.Ca.left+this.Ca.right,i.y+this.Ca.bottom+this.Ca.top)),t>=Rt.PaddedBackground&&(i=n(i.x+this.backgroundElement.Nu()+this.backgroundElement.Gu(),i.y+this.backgroundElement.Wu()+this.backgroundElement.Uu())),i}getPosition(t=this.origin,i=Rt.Everything){if(i===Rt.Everything)return super.getPosition(t,i);const s=super.getPosition(n(-1,-1),Rt.Everything),e=this.getMargin(),h=this.scale.gi(s,{x:e.left,y:e.bottom});if(i===Rt.PaddedBackground){const i=this.getSize(Rt.PaddedBackground);return this.scale.gi(h,ks({x:(t.x+1)/2,y:(t.y+1)/2},i))}const r=this.scale.gi(h,{x:this.backgroundElement.Nu(),y:this.backgroundElement.Wu()});if(i===Rt.PaddedContent){const i=this.getSize(Rt.PaddedContent);return this.scale.gi(r,ks({x:(t.x+1)/2,y:(t.y+1)/2},i))}const o=this.getPadding(),a=this.scale.gi(r,{x:o.left,y:o.bottom}),l=this.getSize(Rt.Content);return this.scale.gi(a,ks({x:(t.x+1)/2,y:(t.y+1)/2},l))}setMouseInteractions(t){return super.setMouseInteractions(t),this.backgroundElement.setMouseInteractions(t),this}getHighlight(){return this.zu}setHighlight(t){return this.zu=zi(t),this.backgroundElement.setHighlight(t),this.L.emit("highlight",this,t),this}}const jr=t=>"setBackground"in t;class Zr extends Wr{constructor(t,i,s,e,h,r,n,o,a,l,u){super(),this.S=0,this.Yu=1,this.Hu=!0,this.$u=new Fh,this.Xu=!0,this.Xi=!1,this.axisScale=e,this.renderingScale=h,this.ju=n,this.Zu=o,this.Qu=a,this.$o=l,this.Ju=i,this.Ku=s,this.qu=this.Tu(this.Ju.We(this.renderingScale)),this.qi=u,this.tc=this.Tu(this.Qu.setDirection(this.Zu).ic(this.Ku,this.renderingScale,r,Yt,this.qi,!1).setOrigin(ui(this.Zu))),this.axis=t,this.setMouseInteractions(!1),"major"===this.tc.sc?this.qu.Ge(u.xAxisNumericTicks.majorTickStyle.gridStrokeStyle):"minor"===this.tc.sc?this.qu.Ge(u.xAxisNumericTicks.minorTickStyle.gridStrokeStyle):"other"===this.tc.sc&&this.qu.Ge(u.cursorGridStrokeStyleX)}setValue(t){return this.S=t,this.Ku.xs(),this.L.emit("valueChange",this,this.S),this}getValue(){return this.S}setTextFormatter(t){return this.hc=t,this.Ku.xs(),this}setTickLength(t){return this.tc.setPointerLength(t),this.Ju.xs(),this}getTickLength(){return this.tc.getPointerLength()}setTickLabelPadding(t){return this.tc.setTickLabelPadding(t),this.Ju.xs(),this}setTickLabelRotation(t){return this.tc.setTextRotation(t),this.Ju.xs(),this}getTickLabelRotation(){return this.tc.getTextRotation()}getTickLabelPadding(){return this.tc.getTickLabelPadding()}setGridStrokeLength(t){return this.Yu=t,this.Ju.xs(),this}getGridStrokeLength(){return this.Yu}setGridStrokeStyle(t){return this.qu.Ge(t),this.Ju.xs(),this}getGridStrokeStyle(){return this.qu.mu()}dispose(){return this.Xi||(this.Xi=!0,this.qu.dispose(),this.tc.dispose(),this.$o(this),this.Ju.us.xs(),this.L.emit("dispose",this)),this}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setMarkerVisible(t){return this.Hu=t,this.Ku.xs(),this}getMarkerVisible(){return this.Hu}setMarker(t){return t(this.tc),this.Ku.xs(),this}getMarker(){return this.tc}setMouseInteractions(t){return this.tc.setMouseInteractions(t),this.qu.setMouseInteractions(t),this}getMouseInteractions(){return this.qu.getMouseInteractions()}setAllocatesAxisSpace(t){return this.Xu=t,this.Ku.xs(),this}getAllocatesAxisSpace(){return this.Xu}isInScale(){return ls(this.S,this.axisScale.getInnerStart(),this.axisScale.getInnerEnd())}onValueChange(t){return this.L.on("valueChange",t)}offValueChange(t){return this.L.off(t,"valueChange")}}class Qr extends Zr{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,u,a,l),this.rc=!1,this.$o=a,this.Ju=i,this.Ku=s}dispose(){return this.rc=!1,super.dispose()}update(){return this}plot(t,i,s,e,h){if(this.isInScale()&&this.getVisible()&&t){this.rc=!1;const t=ft(this.S,this.axisScale,this.ju.getWidth(this.renderingScale));this.qu.setVisible(!0).Ye(this.ju.toPoint(t,i)).Ue(this.ju.toPoint(t,i-(e+s*this.Yu))),this.Hu?(this.hc&&this.tc.setText(this.hc(this.S,this)),this.tc.setVisible(!0).setPosition(this.ju.toPoint(t,h))):this.tc.setVisible(!1)}else this.qu.setVisible(!1),this.tc.setVisible(!1);return this.tc.Es().Le(),this}nc(){const t=this.tc.Es().getSize();return this.ju.getHeight(t)}}const Jr=(t,i)=>t.setTextFillStyle(i.uiTextFillStyle).setTextFont(i.uiTextFont),Kr=(t,i)=>(Ci(t.setButtonSize(i.uiButtonSize),i,!1,{fill:i.uiButtonFillStyle}),t),qr=(t,i,s)=>{s&&jr(t)&&t.setBackground((t=>t.setFillStyle(i.uiBackgroundFillStyle).setStrokeStyle(i.uiBackgroundStrokeStyle))).setEffect(!0)},tn={uiElement:void 0,stylers:t.List(),addStyler(t){return{...this,stylers:this.stylers.push(t)}},applyStylers(t,i){return this.stylers.forEach((s=>void 0!==s?s(t,i):void 0)),t}},sn={background:void 0,setBackground(t){return{...this,background:t}}},en={ic(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,e,h),h);return qr(n,h,r),n}},hn={ic(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.background,e,h),h);return qr(n,h,r),n}};class rn extends $r{constructor(){super(...arguments),this.oc=!0}Le(){return super.Le(),this}setMouseInteractions(t){return this.oc=t,this}getMouseInteractions(){return this.oc}Ru(){return[]}}class nn extends rn{onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}Ou(t){return this.size=t,this}Nu(){return 0}Gu(){return 0}Uu(){return 0}Wu(){return 0}setHighlight(t){return this}getHighlight(){return 0}setFillStyle(){return this}getFillStyle(){return O}setStrokeStyle(){return this}getStrokeStyle(){return at}setStrokeThickness(){return this}getStrokeThickness(){return 0}}class on extends $r{constructor(){super(...arguments),this.L=new s,this.zu=0}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}getHighlight(){return this.zu}setHighlight(t){return this.zu=t,this.Ru().forEach((i=>i.cs(t))),this.L.emit("highlight",this,t),this.Ds.xs(),this}}class an extends on{}class ln extends an{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Ds=t,this.Za=this.Ds.ac(this.renderingScale,Pr.Simple).setVisible(!1).De(O).Pe(at),this.Tu(this.Za)}lc(){const t=this.uc();if(t.length>2){const i=As(t),s=n(i.max.x-i.min.x,i.max.y-i.min.y);this.setContentSize(s);const e=t.map((t=>{const e=ws(t,_s(i.min,-1));return this.scale.gi(this.position,ws(e,ks(_s(ws(this.origin,n(1,1)),-.5),s)))})).map((t=>At(t,this.scale,this.renderingScale)));this.Za.wl(e).setVisible(this.getVisible()).setVisible(this.getVisible())}else this.Za&&this.Za.setVisible(!1),this.setContentSize(n(0,0))}Le(){return super.Le(),this.Xi||this.lc(),this}Es(){return this.lc(),super.Es()}setVisible(t){return super.setVisible(t),this.Za.setVisible(t),this}}const un=(t,i,s)=>t*(1-s)+i*s,cn=(t,i,s,e,h)=>{if(void 0===i.value||void 0===s.value||void 0===e.value||void 0===h.value)return;const r=(t.x-s.point.x)/(h.point.x-s.point.x),n=(h.point.y-s.point.y)*r+s.point.y,o=(t.x-i.point.x)/(e.point.x-i.point.x),a=(e.point.y-i.point.y)*o+i.point.y,l=(t.y-a)/(n-a),u=un(s.value,h.value,r),c=un(i.value,e.value,o);return un(c,u,l)},dn={warm:t=>i=>x(60/(t-1)*i,.8,.8),cold:t=>i=>x(60/(t-1)*i+180,.8,.8),fullSpectrum:t=>i=>x(360/t*i,.8,.8),reverseSpectrum:t=>i=>x(360/t*(t-i),.8,.8),flatUI:t=>i=>x(360/t*i+8,.8,.8-.15/t*i),arction:t=>i=>{const s=1-.2/t*i;return x(360/t*i+51,s,s)},arctionWarm:t=>i=>{const s=t-1,e=1-.2/s*i;return x(46-46/s*i+4,e,e)},sunset:t=>i=>{const s=[170,320];return x(i%2?s[0]:s[1],.8,.5+.5/(t-1)*i)},dynamic:t=>i=>{const s=i%2,e=[234,346];return x(s?e[0]:e[1],s?.3:.9,.5+.5/(t-1)*i)},magenta:t=>i=>{const s=[.9,.6];return x(354,i%2?s[0]:s[1],.5+.5/(t-1)*i)},greyscale:t=>i=>x(0,0,.25+.5/(t-1)*i),frozen:t=>i=>{const s=[.8,.6];return x(160+80/(t-1)*i,.6,i%2?s[0]:s[1])},retro:t=>i=>{const s=[6,183];return x(i%2?s[0]:s[1],.7,.5+.5/(t-1)*i)},crayons:t=>i=>{let s=180+230/(t-1)*i;return s>360&&(s-=360),x(s,.9,.8)},custom:(t,i)=>s=>{const e=.25+.5/(t-1)*s;if(!i)return x(0,0,e);const h=i.getR()/255,r=i.getG()/255,n=i.getB()/255,o=Math.max(h,r,n),a=Math.min(h,r,n);let l=0;if(o!==a){const t=o-a;switch(o){case h:l=(r-n)/t+(r<n?6:0);break;case r:l=(n-h)/t+2;break;case n:l=(h-r)/t+4;break;default:l=0}return l=l/6*360,x(l,.8,e)}return x(0,0,e)},sector:(t,i,s=.8,e=.8)=>h=>r=>x(t+(i-t)/h*r,s,e),auroraBorealis:t=>i=>fn([{value:0,hex:"#23FF7A"},{value:1/9,hex:"#03E65D"},{value:2/9,hex:"#04D155"},{value:3/9,hex:"#00B849"},{value:4/9,hex:"#00A869"},{value:5/9,hex:"#008F68"},{value:6/9,hex:"#00815E"},{value:7/9,hex:"#017153"},{value:8/9,hex:"#704A85"},{value:1,hex:"#743A70"}],t,i),blueSciFi:t=>i=>fn([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#E2E7FF"},{value:2/9,hex:"#ACB9F8"},{value:3/9,hex:"#889DFF"},{value:4/9,hex:"#547EEF"},{value:5/9,hex:"#4068D8"},{value:6/9,hex:"#2B50B7"},{value:7/9,hex:"#1B3E9F"},{value:8/9,hex:"#8D1395"},{value:1,hex:"#780A74"}],t,i),light:t=>i=>fn([{value:0,hex:"#FECC00"},{value:1/9,hex:"#F7B300"},{value:2/9,hex:"#EF9900"},{value:3/9,hex:"#E88000"},{value:4/9,hex:"#E06600"},{value:5/9,hex:"#DD5A00"},{value:6/9,hex:"#D94D00"},{value:7/9,hex:"#D13300"},{value:8/9,hex:"#C91A00"},{value:1,hex:"#C10000"}],t,i),monochrome:t=>i=>fn([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#EEEEEE"},{value:2/9,hex:"#DCDCDC"},{value:3/9,hex:"#C1C1C1"},{value:4/9,hex:"#A4A2A2"},{value:5/9,hex:"#8B8B8B"},{value:6/9,hex:"#787878"},{value:7/9,hex:"#656565"},{value:8/9,hex:"#565555"},{value:1,hex:"#434343"}],t,i),night:t=>i=>fn([{value:0,hex:"#F0F9E0"},{value:1/9,hex:"#C9DFA4"},{value:2/9,hex:"#B5C796"},{value:3/9,hex:"#8998B7"},{value:4/9,hex:"#6E7E9E"},{value:5/9,hex:"#5C6D8F"},{value:6/9,hex:"#47587A"},{value:7/9,hex:"#374B72"},{value:8/9,hex:"#273C65"},{value:1,hex:"#192847"}],t,i),sunset2:t=>i=>fn([{value:0,hex:"#22334D"},{value:1/9,hex:"#82062C"},{value:2/9,hex:"#AB001D"},{value:3/9,hex:"#D80428"},{value:4/9,hex:"#CF5D1B"},{value:5/9,hex:"#CF8229"},{value:6/9,hex:"#CF9D29"},{value:7/9,hex:"#C4BE25"},{value:8/9,hex:"#E1DC49"},{value:1,hex:"#FFFA67"}],t,i)},fn=(t,i,s)=>{const e=gn(i,s),[h,r]=yn(e,t),n=An(t[h]),o=An(t[r]),a=0!==n.value?(o.value-e)/n.value:0,l={value:a,h:un(n.h,o.h,a),s:un(n.s,o.s,a),v:un(n.v,o.v,a)};return x(l.h,l.s,l.v)},An=t=>{const i=(t=>{const i=t.r,s=t.g,e=t.b,h=Math.max(i,s,e),r=Math.min(i,s,e);let n=0;const o=h,a=h-r,l=0===h?0:a/h;if(h===r)n=0;else{switch(h){case i:n=(s-e)/a+(s<e?6:0);break;case s:n=(e-i)/a+2;break;case e:n=(i-s)/a+4}n/=6}return[360*n,l,o]})(b(t.hex));return{value:t.value,h:i[0],s:i[1],v:i[2]}},gn=(t,i)=>{const s=i/t;return s<0?0:s>1?1:s},yn=(t,i)=>{if(i.length<2)throw new Error("Invalid palette size");for(let s=0;s<i.length;s+=1)if(t<i[s].value)return[s-1,s];return[i.length-2,i.length-1]};class mn{constructor(){this.type="simple"}}const pn=t=>!(!t||"object"!=typeof t||!("type"in t)||"simple"!==t.type),vn=new mn;class Sn{constructor(t){this.type="phong",this.ambientReflection=1,this.specularReflection=.1,this.diffuseReflection=1,this.ambientColor=b("#000"),this.specularColor=b("#fff"),this.shininess=32,t&&(this.ambientReflection=Number.isNaN(Number(t.ambientReflection))?this.ambientReflection:Number(t.ambientReflection),this.specularReflection=Number.isNaN(Number(t.specularReflection))?this.specularReflection:Number(t.specularReflection),this.diffuseReflection=Number.isNaN(Number(t.diffuseReflection))?this.diffuseReflection:Number(t.diffuseReflection),this.ambientColor=t.ambientColor||this.ambientColor,this.specularColor=t.specularColor||this.specularColor,this.shininess=t.shininess||this.shininess)}}const bn=t=>!(!t||"object"!=typeof t||!("type"in t)||"phong"!==t.type),xn=new Sn,Mn={Simple:mn,Phong:Sn};var _n;!function(t){t[t.Fill=0]="Fill",t[t.Fit=1]="Fit",t[t.Stretch=2]="Stretch",t[t.Center=3]="Center",t[t.Tile=4]="Tile"}(_n||(_n={}));const wn=i({type:"fillstyle",fillType:"image",source:void 0,surroundingColor:S(0,0,0,0),sourceMissingColor:S(0,0,0,0),fitMode:_n.Fill});class Cn extends wn{constructor(t){super(t)}setSource(t){return this.set("source",t)}getSource(){return this.get("source")}setSurroundingColor(t){return v(t)?this.set("surroundingColor",t):this.set("surroundingColor",t(this.get("surroundingColor")))}getSurroundingColor(){return this.get("surroundingColor")}setSourceMissingColor(t){return v(t)?this.set("sourceMissingColor",t):this.set("sourceMissingColor",t(this.get("sourceMissingColor")))}getSourceMissingColor(){return this.get("sourceMissingColor")}setFitMode(t){return this.set("fitMode",t)}getFitMode(){return this.get("fitMode")}toString(){return`imagefill:${this.fitMode}`}}const kn=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"image"===t.fillType),Tn={Dotted:[1,3],DottedDense:[1,1],Dashed:[3,1],DashedEqual:[2,2],DashedLoose:[2,4],DashDotted:[3,2,1,2]},Fn=i({type:"linestyle",lineType:"dashed",pattern:Tn.DashedEqual,fillStyle:new U({color:S(255,255,255)}),thickness:1,patternScale:3});class In extends Fn{constructor(t){super({...t,lineType:"dashed"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}O(){const t=this.getThickness();return t<0?1:t}setPattern(t){return"function"==typeof t?this.set("pattern",t(this.getPattern())):this.set("pattern",t)}getPattern(){return this.get("pattern")}setPatternScale(t){return"function"==typeof t?this.set("patternScale",t(this.getPatternScale())):this.set("patternScale",t)}getPatternScale(){return this.get("patternScale")}}const Pn=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"dashed"!==t.lineType),Dn=i({type:"icon",width:void 0,height:void 0,cc:void 0,dc:Yt,fc:Yt});class Bn extends Dn{constructor(t,i,s,e){super({...e,cc:t,dc:i,fc:s})}dispose(){return this.fc(this),this}setWidth(t){const i=this.set("width",t);return this.dc(i),i}getWidth(){return this.get("width")}setHeight(t){const i=this.set("height",t);return this.dc(i),i}getHeight(){return this.get("height")}setSize(t,i){const s=this.withMutations((s=>{s.set("width",t).set("height",i)}));return this.dc(s),s}ni(){if(!this.cc)return{x:0,y:0};const t=this.cc.width,i=this.cc.height;if(0===t||0===i)return{x:0,y:0};const s=this.width,e=this.height;return"number"==typeof s&&"number"==typeof e?{x:s,y:e}:"number"==typeof s?{x:s,y:i*s/t}:"number"==typeof e?{x:t*e/i,y:e}:{x:t,y:i}}}const Ln=t=>!(!t||"object"!=typeof t||!("type"in t)||"icon"!==t.type),Rn=i({type:"glow",color:S(255,255,255,50),spread:1,blur:4,offset:{x:0,y:0}});class En extends Rn{constructor(t){super(t)}setSpread(t){return this.set("spread","function"==typeof t?t(this.get("spread")):t)}getSpread(){return this.get("spread")}setBlur(t){return this.set("blur","function"==typeof t?t(this.get("blur")):t)}getBlur(){return this.get("blur")}setColor(t){return this.set("color","function"==typeof t?t(this.get("color")):t)}getColor(){return this.get("color")}setOffset(t){return this.set("offset","function"==typeof t?t(this.get("offset")):t)}getOffset(){return this.get("offset")}}const zn=t=>!(!t||"object"!=typeof t||!("type"in t)||"glow"!==t.type);class Vn{constructor(t){this.Ac=0,this.gc=0,this.yc=0,this.mc=!1,this.vc=!0,this.Sc=!1,this.bc={warningDisplayed:!1,expandEvents:[]},this.L=new s,this.vc=!t||void 0===t.autoSortingEnabled||t.autoSortingEnabled,void 0!==(null==t?void 0:t.dataPattern)&&(this.xc={userSpecified:null===t.dataPattern?void 0:t.dataPattern}),this.Mc=void 0!==(null==t?void 0:t.lookupValues)&&t.lookupValues,this._c=void 0!==(null==t?void 0:t.colors)&&t.colors,this.wc=void 0!==(null==t?void 0:t.ids)&&t.ids,this.Cc=void 0!==(null==t?void 0:t.sizes)&&t.sizes,this.kc=void 0!==(null==t?void 0:t.rotations)&&t.rotations,this.Tc=(null==t?void 0:t.dataStorage)?t.dataStorage:Float64Array,this.Fc=!1!==(null==t?void 0:t.allowInputModification)}add(t){return Array.isArray(t)?this.appendJSON(t,{x:"x",y:"y"}):this.appendSample(t),this}addArraysXY(t,i){return this.appendSamples({xValues:t,yValues:i}),this}appendJSON(t,i={x:"x",y:"y"}){const s=t.length,e=i.x,h=i.y,r=i.lookupValue,n=i.size,o=i.rotation,a=i.color,l=i.id;let u,c,d,f,A,g,y;if(e){u=new this.Tc(s);const i=t[0]&&t[0][e]instanceof Date;if(t[0]&&"string"==typeof t[0][e])for(let i=0;i<s;i+=1){const s=t[i];u[i]=new Date(s[e]).getTime()}else if(i)for(let i=0;i<s;i+=1){const s=t[i];u[i]=s[e].getTime()}else for(let i=0;i<s;i+=1){const s=t[i];u[i]=s[e]}}if(h){c=new this.Tc(s);const i=t[0]&&t[0][h]instanceof Date;if(t[0]&&"string"==typeof t[0][h])for(let i=0;i<s;i+=1){const s=t[i];c[i]=new Date(s[h]).getTime()}else if(i)for(let i=0;i<s;i+=1){const s=t[i];c[i]=s[h].getTime()}else for(let i=0;i<s;i+=1){const s=t[i];c[i]=s[h]}}if(r){d=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];d[i]=s[r]}}if(a){f=[];for(let i=0;i<s;i+=1){const s=t[i];f[i]=s[a]}}if(l){A=new Uint32Array(s);for(let i=0;i<s;i+=1){const s=t[i];A[i]=s[l]}}if(n){g=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];g[i]=s[n]}}if(o){y=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];y[i]=s[o]}}return this.appendSamples({xValues:u,yValues:c,ids:A,colors:f,lookupValues:d,sizes:g,rotations:y,start:i.start,step:i.step}),this}appendSample(t){const{samplesCacheX:i,samplesCacheY:s,samplesCacheColors:e,samplesCacheIDs:h,samplesCacheLookup:r,samplesCacheSize:n,samplesCacheRotation:o,maxSampleCount:a,dataPattern:l}=this.Ic({appendCount:1}),u=this.Pc(),c=void 0!==t.step?t.step:1,d=void 0!==t.x?"number"==typeof t.x?t.x:"string"==typeof t.x?new Date(t.x).getTime():t.x.getTime():u?u.x+c:0,f=void 0!==t.y?"number"==typeof t.y?t.y:"string"==typeof t.y?new Date(t.y).getTime():t.y.getTime():u?u.y+c:0;if(l&&this.vc&&this.Dc&&this.Bc&&!this.Lc(l,d,f)&&!this.Sc)return this.Rc(this.Dc,this.Bc,new this.Tc([d]),new this.Tc([f]),void 0!==t.lookupValue?new Float32Array([t.lookupValue]):void 0,void 0!==t.color?this.Ec((t.color,[t.color])):void 0,void 0!==t.id?new Uint32Array([t.id]):void 0,void 0!==t.size?new Float32Array([t.size]):void 0,void 0!==t.rotation?new Float32Array([t.rotation]):void 0,l),this;if(i[this.Ac]=d,s[this.Ac]=f,void 0!==t.lookupValue&&r&&(r[this.Ac]=t.lookupValue),void 0!==t.color&&e){const i=this.Ec((t.color,[t.color]));void 0!==i&&(e[this.Ac]=i[0])}return void 0!==t.id&&h&&(h[this.Ac]=t.id),void 0!==t.size&&n&&(n[this.Ac]=t.size),void 0!==t.rotation&&o&&(o[this.Ac]=t.rotation),this.zc(this.Ac,this.Ac),this.Ac+=1,this.Ac>a-1&&(this.Ac=0,this.mc=!0),this.gc=Math.min(this.gc+1,a),this.yc+=1,this}appendSamples(t){const{lookupValues:i,colors:s,ids:e,sizes:h,rotations:r,start:n,step:o}=t;let a=t.offset,l=t.count;const u=t.xValues||t.yValues;if(!u)return this;const c=u.length;if(a=void 0!==a?a:0,l=void 0!==l?l:c-a,l<=0)return this;const d=void 0!==t.offsetLookupValues?t.offsetLookupValues:a,f=void 0!==t.offsetColors?t.offsetColors:a,A=void 0!==t.offsetIds?t.offsetIds:a,g=void 0!==t.offsetSizes?t.offsetSizes:a,y=void 0!==t.offsetRotations?t.offsetRotations:a,m=this.Vc(!0),[p,v]=this.Oc(l,t.xValues,"x","ProgressiveX"===m||"RegressiveX"===m||void 0===m?n:void 0,"ProgressiveX"===m||"RegressiveX"===m||void 0===m?o:void 0,a),[S,b]=this.Oc(l,t.yValues,"y","ProgressiveY"===m||"RegressiveY"===m?n:void 0,"ProgressiveY"===m||"RegressiveY"===m?o:void 0,a),x=this.Ec(s),{samplesCacheX:M,samplesCacheY:_,samplesCacheLookup:w,samplesCacheColors:C,samplesCacheIDs:k,samplesCacheSize:T,samplesCacheRotation:F,maxSampleCount:I,dataPattern:P,incomingDataReplacedCache:D}=this.Ic({appendCount:l,...0===v&&0===b&&0===a&&0===d&&0===f&&0===A&&0===g&&0===y?{incomingDataX:p,incomingDataY:S,incomingDataLookup:i,incomingDataIDs:e,incomingDataColors:x,incomingDataSize:h,incomingDataRotation:r}:{}});if(!D&&P&&this.vc&&this.Dc&&this.Bc){const t=p[v],s=S[b];if(!this.Lc(P,t,s)&&!this.Sc)return this.Rc(this.Dc,this.Bc,Yn(p,v,v+l),Yn(S,b,b+l),Yn(i,d,d+l),Yn(x,f,f+l),Yn(e,A,A+l),Yn(h,g,g+l),Yn(r,y,y+l),P),this}const B=I-this.Ac,L=Math.min(l,B);if(L>0&&(D||(Wn(M,p,v,L,this.Ac),Wn(_,S,b,L,this.Ac),i&&w&&Wn(w,i,d,L,this.Ac),e&&k&&Wn(k,e,A,L,this.Ac),x&&C&&Wn(C,x,f,L,this.Ac),h&&T&&Wn(T,h,g,L,this.Ac),r&&F&&Wn(F,r,y,L,this.Ac)),this.zc(this.Ac,this.Ac+L-1),this.Ac+=L,this.Ac>I-1&&(this.Ac=0,this.mc=!0)),this.gc=Math.min(this.gc+L,I),this.yc+=L,this.Vc(),l-L>0){const t={xValues:p?Yn(p,v+L,void 0):void 0,yValues:S?Yn(S,b+L,void 0):void 0,lookupValues:i?Yn(i,d+L,void 0):void 0,ids:e?Yn(e,A+L,void 0):void 0,colors:x?Yn(x,f+L,void 0):void 0,sizes:h?Yn(h,g+L,void 0):void 0,rotations:r?Yn(r,y+L,void 0):void 0};this.appendSamples(t)}return this}setSamples(t){return this.clear().appendSamples(t)}fill(t){const i=this.Dc||this.Bc;if(!i)return this;const s=i.length;if(void 0!==t.x&&(this.Dc=this.Dc||new this.Tc(s),this.Dc.fill(t.x)),void 0!==t.y&&(this.Bc=this.Bc||new this.Tc(s),this.Bc.fill(t.y)),void 0!==t.lookupValue&&(this.Nc=this.Nc||new Float32Array(s),this.Nc.fill(t.lookupValue)),void 0!==t.color){const i=this.Ec([t.color]);i&&(this.Gc=this.Gc||new Uint32Array(s),this.Gc.fill(i[0]))}return void 0!==t.size&&(this.Wc=this.Wc||new Float32Array(s),this.Wc.fill(t.size)),void 0!==t.rotation&&(this.Uc=this.Uc||new Float32Array(s),this.Uc.fill(t.rotation)),this.L.emit("cleared"),this}alterSamples(t,i){const{xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a}=i;let l=i.offset,u=i.count;const c=s||e||h||r||n||o||a,d=c?c.length:void 0!==i.x||void 0!==i.y?1:0;if(l=void 0!==l?l:0,u=void 0!==u?u:d-l,u<=0)return this;const f=void 0!==i.offsetLookupValues?i.offsetLookupValues:l,A=void 0!==i.offsetColors?i.offsetColors:l,g=void 0!==i.offsetIds?i.offsetIds:l,y=void 0!==i.offsetSizes?i.offsetSizes:l,m=void 0!==i.offsetRotations?i.offsetRotations:l,p=this.Ec(r),v=this.yc-1,S=void 0!==this.Yc?Math.max(this.yc-this.Yc,0):0,b=t+u-1,x=Math.max(t,S),M=Math.min(b,v),_=M-x+1;if(this.yc>0&&_>0){const{samplesCacheX:r,samplesCacheY:u,samplesCacheColors:c,samplesCacheIDs:d,samplesCacheLookup:v,samplesCacheSize:b,samplesCacheRotation:w}=this.Ic({appendCount:0}),C=r.length;if(void 0!==this.Yc&&this.mc&&this.yc%this.Yc!=0){const S=this.yc-this.yc%this.Yc,_=this.yc-1,k=this.yc-this.gc,T=S-1,F=Math.max(x,k),I=Math.min(M,T)-F+1;if(I>0){const S=F-t,x=On(F,this.yc,C,this.Ac);if(void 0!==i.x)for(let t=x;t<x+I;t+=1)r[t]=i.x;if(void 0!==i.y)for(let t=x;t<x+I;t+=1)u[t]=i.y;s&&Wn(r,s,l+S,I,x),e&&Wn(u,e,l+S,I,x),h&&v&&Wn(v,h,f+S,I,x),n&&d&&Wn(d,n,g+S,I,x),p&&c&&Wn(c,p,A+S,I,x),o&&b&&Wn(b,o,y+S,I,x),a&&w&&Wn(w,a,m+S,I,x)}const P=Math.max(x,S),D=Math.min(M,_)-P+1;if(D>0){const S=P-t,x=On(P,this.yc,C,this.Ac);if(void 0!==i.x)for(let t=x;t<x+D;t+=1)r[t]=i.x;if(void 0!==i.y)for(let t=x;t<x+D;t+=1)u[t]=i.y;s&&Wn(r,s,l+S,D,x),e&&Wn(u,e,l+S,D,x),h&&v&&Wn(v,h,f+S,D,x),n&&d&&Wn(d,n,g+S,D,x),p&&c&&Wn(c,p,A+S,D,x),o&&b&&Wn(b,o,y+S,D,x),a&&w&&Wn(w,a,m+S,D,x)}}else{const t=x-S;if(void 0!==i.x)for(let s=t;s<t+_;s+=1)r[s]=i.x;if(void 0!==i.y)for(let s=t;s<t+_;s+=1)u[s]=i.y;e&&Wn(u,e,l,_,t),s&&Wn(r,s,l,_,t),e&&Wn(u,e,l,_,t),h&&v&&Wn(v,h,f,_,t),n&&d&&Wn(d,n,g,_,t),p&&c&&Wn(c,p,A,_,t),o&&b&&Wn(b,o,y,_,t),a&&w&&Wn(w,a,m,_,t)}this.L.emit("cleared")}const w=t+u-1-v;if(w>0){const i=M+1-t;this.appendSamples({xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a,offset:l+i,offsetLookupValues:f+i,offsetColors:A+i,offsetIds:g+i,offsetSizes:y+i,offsetRotations:m+i,count:w})}return this}alterSamplesByID(t,i){if(!this.wc)throw new Error("LightningChart JS attempted to use alterSamplesByID on DataSetXY that doesn't have IDs enabled.");const s=t.length,e=this.Hc;if(s<=0||!e)return this;const h=(("object"==typeof i.color?this.Ec([i.color]):"number"==typeof i.color?[i.color]:[])||[])[0],r=Array.isArray(i.xValues)?new this.Tc(i.xValues):i.xValues,n=Array.isArray(i.yValues)?new this.Tc(i.yValues):i.yValues,o=Array.isArray(i.yValues)?new Float32Array(i.yValues):i.yValues,a=this.Ec(i.colors),l=Array.isArray(i.sizes)?new Float32Array(i.sizes):i.sizes,u=Array.isArray(i.rotations)?new Float32Array(i.rotations):i.rotations,c=e.length,d=this.gc,f=this.yc-1,A=Math.max(f-d+1,0);for(let d=0;d<s;d+=1){const s=t[d],g=Gn(s,A,f,(t=>e[On(t,this.yc,c,this.Ac)])),y=On(g,this.yc,c,this.Ac);e[y]===s&&(void 0!==i.x&&this.Dc&&(this.Dc[y]=i.x),void 0!==i.y&&this.Bc&&(this.Bc[y]=i.y),void 0!==i.lookupValue&&this.Nc&&(this.Nc[y]=i.lookupValue),void 0!==i.size&&this.Wc&&(this.Wc[y]=i.size),void 0!==i.rotation&&this.Uc&&(this.Uc[y]=i.rotation),void 0!==h&&this.Gc&&(this.Gc[y]=h),r&&this.Dc&&(this.Dc[y]=r[d]),n&&this.Bc&&(this.Bc[y]=n[d]),o&&this.Nc&&(this.Nc[y]=o[d]),a&&this.Gc&&(this.Gc[y]=a[d]),l&&this.Wc&&(this.Wc[y]=l[d]),u&&this.Uc&&(this.Uc[y]=u[d]))}return this.L.emit("cleared"),this}clear(){return this.Ac=0,this.gc=0,this.yc=0,this.mc=!1,this.L.emit("cleared"),this}getSampleCount(){return this.gc}getNextSampleIndex(){return this.yc}setMaxSampleCount(t){if("object"==typeof t){this.$c&&this.offMaxSampleCountExceeded(this.$c);const i=t.max,s=t.initial,e=t=>{const s=this.Yc||0;if(void 0!==i&&s>=i)return;let e=Math.max(2*s,t);void 0!==i&&(e=Math.min(e,i)),this.setMaxSampleCount(e)};this.$c=this.onMaxSampleCountExceeded(((t,i,s,h)=>{e(h)})),void 0===this.Yc&&(void 0!==s?this.setMaxSampleCount(s):this.setMaxSampleCount(Math.min(2*this.gc,void 0!==i?i:Number.MAX_SAFE_INTEGER)))}else if("number"==typeof t){const i=t;if(void 0!==this.Yc&&this.Yc>i)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to shrink data set. This is currently not supported.");if(!this.Dc||!this.Bc)return this.Yc=i,this;if(i===this.Yc)return this;if(this.mc&&0!==this.Ac)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to expand data set that has exceeded its max sample count. This is currently not supported.");this.Yc=i,this.gc<i?(this.Ac=this.gc,this.mc=!1):(this.Ac=0,this.mc=!0);const s=new this.Tc(this.Yc);s.set(this.Dc);const e=new this.Tc(this.Yc);if(e.set(this.Bc),this.Dc=s,this.Bc=e,this.Mc){const t=new Float32Array(this.Yc);this.Nc&&t.set(this.Nc),this.Nc=t}if(this.wc){const t=new Uint32Array(this.Yc);this.Hc&&t.set(this.Hc),this.Hc=t}if(this._c){const t=new Uint32Array(this.Yc);this.Gc&&t.set(this.Gc),this.Gc=t}if(this.Cc){const t=new Float32Array(this.Yc);this.Wc&&t.set(this.Wc),this.Wc=t}if(this.kc){const t=new Float32Array(this.Yc);this.Uc&&t.set(this.Uc),this.Uc=t}}return this}getMaxSampleCount(){return this.Yc}readBack(t){if(!this.Dc||!this.Bc)return{xValues:new this.Tc,yValues:new this.Tc,iSampleFirst:0};const i=this.Dc.length;let s,e=[];if(null==t?void 0:t.onlyInRange){const i=this.Xc();if(!i)throw new Error("LightningChart JS - attempted to use `DataSetXY.readBack` with `visibleOnly: true` without a data pattern.\nThis operation is only supported for patterned data (e.g. 'ProgressiveX')");const h=Math.min(t.onlyInRange.start,t.onlyInRange.end),r=Math.max(t.onlyInRange.start,t.onlyInRange.end),n=Nn(h,r,this.Dc,this.yc,this.gc,this.Ac,i,0);if(!n)return{xValues:new this.Tc,yValues:new this.Tc,iSampleFirst:0};e=n.dataRanges,s=n.iFirstSample}else if(void 0!==this.Yc&&this.mc&&this.yc%this.Yc!=0){const t=this.Ac,h=i-t,r=this.Ac-1;e.push({offset:t,count:h}),e.push({offset:0,count:r+1}),s=this.yc-i}else e.push({offset:0,count:this.gc}),s=0;const h=e.reduce(((t,i)=>t+i.count),0),r=new this.Tc(h),n=new this.Tc(h),o=this._c?new Uint32Array(h):void 0,a=this.Mc?new Float32Array(h):void 0,l=this.wc?new Uint32Array(h):void 0,u=this.Cc?new Float32Array(h):void 0,c=this.kc?new Float32Array(h):void 0;let d=0;for(const t of e)r.set(this.Dc.subarray(t.offset,t.offset+t.count),d),n.set(this.Bc.subarray(t.offset,t.offset+t.count),d),this._c&&o&&this.Gc&&o.set(this.Gc.subarray(t.offset,t.offset+t.count),d),this.Mc&&a&&this.Nc&&a.set(this.Nc.subarray(t.offset,t.offset+t.count),d),this.wc&&l&&this.Hc&&l.set(this.Hc.subarray(t.offset,t.offset+t.count),d),this.Cc&&u&&this.Wc&&u.set(this.Wc.subarray(t.offset,t.offset+t.count),d),this.kc&&c&&this.Uc&&c.set(this.Uc.subarray(t.offset,t.offset+t.count),d),d+=t.count;return{xValues:r,yValues:n,iSampleFirst:s,lookupValues:a,colors:o,ids:l,sizes:u,rotations:c}}onMaxSampleCountExceeded(t){return this.L.on("maxSampleCountExceeded",t)}offMaxSampleCountExceeded(t){return this.L.off(t)}Oc(t,i,s,e,h,r){if(void 0===i){const i=this.Pc();h=void 0!==h?h:1,e=void 0!==e?e:i?i[s]+h:0;const r=new this.Tc(t);for(let i=0;i<t;i+=1)r[i]=e+i*h;return[r,0]}const n=i[0]&&i[0]instanceof Date,o=i[0]&&"string"==typeof i[0];if(void 0!==e||void 0!==h){const a=this.Pc();h=void 0!==h?h:1,e=void 0!==e?e:a?a[s]+h:0;const l=new this.Tc(t);if(o)for(let s=0;s<t;s+=1)l[s]=e+new Date(i[s+r]).getTime()*h;else if(n)for(let s=0;s<t;s+=1)l[s]=e+i[s+r].getTime()*h;else for(let s=0;s<t;s+=1)l[s]=e+i[s+r]*h;return[l,0]}if(o){const s=new this.Tc(t);for(let e=0;e<t;e+=1)s[e]=new Date(i[e]).getTime();return[s,r]}if(n){const s=new this.Tc(t);for(let e=0;e<t;e+=1)s[e]=i[e].getTime();return[s,r]}return[i,r]}Ec(t){if(!t||0===t.length)return;const i=t[0];if(v(i)){const i=t.length,s=new Uint32Array(i);for(let e=0;e<i;e+=1){const i=t[e],h=255*i.a<<24|255*i.b<<16|255*i.g<<8|255*i.r;s[e]=h}return s}return t}jc(){return{min:0,max:void 0!==this.Yc&&this.mc?this.Yc-1:this.gc-1}}Zc(t){t=Math.min(t,this.gc),this.yc-=t,this.gc-=t,this.Ac-=t,this.Ac<0&&void 0!==this.Yc&&(this.Ac+=this.Yc)}Rc(t,i,s,e,h,r,n,o,a,l){var u;const c=s.length,d=s[0],f=s[c-1],A=e[c-1];if(this.Lc(l,f,A)){const t=(null===(u=this.Pc())||void 0===u?void 0:u.x)||0;let i=0;for(let e=0;e<c;e+=1)if(s[e]>t){i=e;break}const l={xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a,offset:i};this.Sc=!0,this.appendSamples(l),this.Sc=!1}else{const l=t.length,u=this.gc,f=this.yc-1,A=Math.max(f-u+1,0),g=Gn(d,A,f,(i=>t[On(i,this.yc,l,this.Ac)])),y=g-1,m=g+1,p=t[On(g,this.yc,l,this.Ac)],v=m<=this.yc-1?t[On(m,this.yc,l,this.Ac)]:void 0,S=void 0!==v&&v<d?m+1:p<d?g+1:y+1,b=f-S+1,x=new this.Tc(b),M=new this.Tc(b),_=this.Mc?new Float32Array(b):void 0,w=this._c?new Uint32Array(b):void 0,C=this.wc?new Uint32Array(b):void 0,k=this.Cc?new Float32Array(b):void 0,T=this.kc?new Float32Array(b):void 0;let F=0;for(let s=S;s<=f;s+=1){const e=On(s,this.yc,l,this.Ac);x[F]=t[e],M[F]=i[e],_&&this.Nc&&(_[F]=this.Nc[e]),w&&this.Gc&&(w[F]=this.Gc[e]),C&&this.Hc&&(C[F]=this.Hc[e]),k&&this.Wc&&(k[F]=this.Wc[e]),T&&this.Uc&&(T[F]=this.Uc[e]),F+=1}this.Zc(b);const I=new this.Tc(c+b);I.set(s),I.set(x,c);const P=new this.Tc(c+b);let D,B,L,R,E;P.set(e),P.set(M,c),h&&_&&(D=new Float32Array(c+b),D.set(h),D.set(_,c)),r&&w&&(B=new Uint32Array(c+b),B.set(r),B.set(w,c)),n&&C&&(L=new Uint32Array(c+b),L.set(n),L.set(C,c)),o&&k&&(R=new Float32Array(c+b),R.set(o),R.set(k,c)),a&&T&&(E=new Float32Array(c+b),E.set(a),E.set(T,c)),this.Sc=!0,this.appendSamples({xValues:I,yValues:P,lookupValues:D,colors:B,ids:L,sizes:R,rotations:E}),this.Sc=!1,this.L.emit("cleared")}}Xc(){return this.Vc()}Vc(t=!1){let i;if(this.xc&&"userSpecified"in this.xc)i=this.xc.userSpecified;else if(this.xc&&"autoDetectResult"in this.xc)i=this.xc.autoDetectResult;else if(this.Dc&&this.Bc&&this.yc>0&&!t){const t=void 0!==this.Yc&&this.mc?this.Ac:0,s=this.gc-1,e=void 0!==this.Yc&&this.mc?0:void 0,h=void 0!==this.Yc&&this.mc?this.Ac-1:void 0,[r,n]=void 0!==e&&void 0!==h&&Math.abs(h-e)>Math.abs(s-t)?[e,h]:[t,s];if(1+n-r>=2){let t,s,e=this.Dc[r],h=this.Bc[r];for(let i=r+1;i<=n;i+=1){if(!1!==t){const s=this.Dc[i],h=Math.sign(s-e);0!==h&&t&&t.direction!==h?t=!1:0===h||t||(t={direction:h}),e=s}if(!1!==s){const t=this.Bc[i],e=Math.sign(t-h);0!==e&&s&&s.direction!==e?s=!1:0===e||s||(s={direction:e}),h=t}}i=t&&t.direction>0?er.ProgressiveX:t&&t.direction<0?er.RegressiveX:s&&s.direction>0?er.ProgressiveY:s&&s.direction<0?er.RegressiveY:void 0,this.xc={autoDetectResult:i},i&&Ot.console.warn(`LightningChart JS DataSetXY warning | Data pattern was detected automatically (DataPatterns.${i}).\nAutomatic detection is only intended for kick-starting application development, not for production use.\nAdd { dataPattern: '${i}'} } to your application when creating series or DataSetXY to get clear this warning.`)}}if(i&&"ProgressiveX"!==i)throw new Error("LightningChart JS New XY rework beta features do not yet support other data patterns than ProgressiveX. This will be introduced in near future.");return i}Lc(t,i,s){const e=this.Pc();return!e||("ProgressiveX"===t?i>e.x:"RegressiveX"===t?i<e.x:"ProgressiveY"===t?s>e.y:"RegressiveY"!==t||s<e.y)}Ic(t){if(t.incomingDataX&&t.incomingDataY&&0===this.gc&&!this.Dc&&!this.Bc&&(void 0===this.Yc||this.Yc===t.appendCount)&&this.Fc)return this.Dc=Un(t.incomingDataX,this.Tc)||new this.Tc,this.Bc=Un(t.incomingDataY,this.Tc)||new this.Tc,this.Nc=this.Mc?Un(t.incomingDataLookup,Float32Array):void 0,this.Hc=this.wc?Un(t.incomingDataIDs,Uint32Array):void 0,this.Gc=this._c?Un(t.incomingDataColors,Uint32Array):void 0,this.Wc=this.Cc?Un(t.incomingDataSize,Float32Array):void 0,this.Uc=this.kc?Un(t.incomingDataRotation,Float32Array):void 0,{dataPattern:this.Vc(),samplesCacheX:this.Dc,samplesCacheY:this.Bc,samplesCacheLookup:this.Nc,samplesCacheIDs:this.Hc,samplesCacheColors:this.Gc,samplesCacheSize:this.Wc,samplesCacheRotation:this.Uc,maxSampleCount:t.appendCount,incomingDataReplacedCache:!0};if(void 0===this.Yc){const i=this.gc+t.appendCount;if(!this.Dc||!this.Bc)return this.Dc=new this.Tc(i),this.Bc=new this.Tc(i),this.Nc=this.Mc?new Float32Array(i):void 0,this.Hc=this.wc?new Uint32Array(i):void 0,this.Gc=this._c?new Uint32Array(i):void 0,this.Wc=this.Cc?new Float32Array(i):void 0,this.Uc=this.kc?new Float32Array(i):void 0,{dataPattern:this.Vc(),samplesCacheX:this.Dc,samplesCacheY:this.Bc,samplesCacheLookup:this.Nc,samplesCacheIDs:this.Hc,samplesCacheColors:this.Gc,samplesCacheSize:this.Wc,samplesCacheRotation:this.Uc,maxSampleCount:i};const s=this.Dc.length;if(s<i){if(!this.bc.warningDisplayed){const s=Ot.performance.now();if(this.bc.expandEvents=this.bc.expandEvents.filter((t=>s-t.timestamp<5e3)),i>1e3&&this.bc.expandEvents.push({timestamp:s}),this.bc.expandEvents.length>5)return Ot.console.warn("LightningChart JS warning - DataSetXY append operation was performed more than 5 times in 5 seconds.\nAutomatic max sample count control was enabled.\nFor streaming applications, DataSetXY.setMaxSampleCount() or Series.setMaxSampleCount() should be configured explicitly to get rid of this warning."),this.bc.warningDisplayed=!0,this.setMaxSampleCount({mode:"auto"}),this.Ic(t)}const s=new this.Tc(i);s.set(this.Dc),this.Dc=s;const e=new this.Tc(i);if(e.set(this.Bc),this.Bc=e,this.Mc){const t=new Float32Array(i);this.Nc&&t.set(this.Nc),this.Nc=t}if(this.wc){const t=new Uint32Array(i);this.Hc&&t.set(this.Hc),this.Hc=t}if(this._c){const t=new Uint32Array(i);this.Gc&&t.set(this.Gc),this.Gc=t}if(this.Cc){const t=new Float32Array(i);this.Wc&&t.set(this.Wc),this.Wc=t}if(this.kc){const t=new Float32Array(i);this.Uc&&t.set(this.Uc),this.Uc=t}return this.Ac=this.gc,{dataPattern:this.Vc(),samplesCacheX:this.Dc,samplesCacheY:this.Bc,samplesCacheLookup:this.Nc,samplesCacheIDs:this.Hc,samplesCacheColors:this.Gc,samplesCacheSize:this.Wc,samplesCacheRotation:this.Uc,maxSampleCount:i}}if(s>4*i){const t=new this.Tc(i);t.set(this.Dc.subarray(0,this.gc)),this.Dc=t;const s=new this.Tc(i);if(s.set(this.Bc.subarray(0,this.gc)),this.Bc=s,this.Mc){const t=new Float32Array(i);this.Nc&&t.set(this.Nc.subarray(0,this.gc)),this.Nc=t}if(this.wc){const t=new Uint32Array(i);this.Hc&&t.set(this.Hc.subarray(0,this.gc)),this.Hc=t}if(this._c){const t=new Uint32Array(i);this.Gc&&t.set(this.Gc.subarray(0,this.gc)),this.Gc=t}if(this.Cc){const t=new Float32Array(i);this.Wc&&t.set(this.Wc.subarray(0,this.gc)),this.Wc=t}if(this.kc){const t=new Float32Array(i);this.Uc&&t.set(this.Uc.subarray(0,this.gc)),this.Uc=t}return{dataPattern:this.Vc(),samplesCacheX:this.Dc,samplesCacheY:this.Bc,samplesCacheLookup:this.Nc,samplesCacheIDs:this.Hc,samplesCacheColors:this.Gc,samplesCacheSize:this.Wc,samplesCacheRotation:this.Uc,maxSampleCount:i}}return{dataPattern:this.Vc(),samplesCacheX:this.Dc,samplesCacheY:this.Bc,samplesCacheLookup:this.Nc,samplesCacheIDs:this.Hc,samplesCacheColors:this.Gc,samplesCacheSize:this.Wc,samplesCacheRotation:this.Uc,maxSampleCount:s}}return t.appendCount+this.gc>this.Yc&&this.L.emit("maxSampleCountExceeded",this,this.gc,this.Yc,this.gc+t.appendCount),this.Dc=this.Dc||new this.Tc(this.Yc),this.Bc=this.Bc||new this.Tc(this.Yc),this.Nc=this.Nc||(this.Mc?new Float32Array(this.Yc):void 0),this.Hc=this.Hc||(this.wc?new Uint32Array(this.Yc):void 0),this.Gc=this.Gc||(this._c?new Uint32Array(this.Yc):void 0),this.Wc=this.Wc||(this.Cc?new Float32Array(this.Yc):void 0),this.Uc=this.Uc||(this.kc?new Float32Array(this.Yc):void 0),{dataPattern:this.Vc(),samplesCacheX:this.Dc,samplesCacheY:this.Bc,samplesCacheLookup:this.Nc,samplesCacheIDs:this.Hc,samplesCacheColors:this.Gc,samplesCacheSize:this.Wc,samplesCacheRotation:this.Uc,maxSampleCount:this.Yc}}Qc(){if(!this.Dc||!this.Bc||0===this.gc)return;if(void 0===this.Yc)return this.yc>0?{x:this.Dc[0],y:this.Bc[0]}:void 0;if(!this.mc)return{x:this.Dc[0],y:this.Bc[0]};let t=this.Ac-this.gc;return t<0&&(t+=this.Yc),{x:this.Dc[t],y:this.Bc[t]}}Pc(){if(!this.Dc||!this.Bc||0===this.gc)return;if(void 0===this.Yc){const t=this.gc-1;return t>=0?{x:this.Dc[t],y:this.Bc[t]}:void 0}let t=this.Ac-1;return t<0&&(t+=this.Yc),{x:this.Dc[t],y:this.Bc[t]}}Jc(t){if(!this.Dc||!this.Bc)return;const i=this.Dc.length,s=this.gc,e=this.yc-1,h=Math.max(e-s+1,0)+t,r=On(h,this.yc,i,this.Ac);return{x:this.Dc[r],y:this.Bc[r],lookupValue:this.Mc&&this.Nc?this.Nc[r]:void 0,id:this.wc&&this.Hc?this.Hc[r]:void 0,color:this._c&&this.Gc?this.Gc[r]:void 0,size:this.Cc&&this.Wc?this.Wc[r]:void 0,rotation:this.kc&&this.Uc?this.Uc[r]:void 0,iSample:h}}Kc(t,i,s,e){const h=this.Vc(),r=this.Dc,n=this.Bc;if(!r||!n)return;const o=(t,i)=>({x:r[t],y:n[t],lookupValue:this.Mc&&this.Nc?this.Nc[t]:void 0,id:this.wc&&this.Hc?this.Hc[t]:void 0,color:this._c&&this.Gc?this.Gc[t]:void 0,size:this.Cc&&this.Wc?this.Wc[t]:void 0,rotation:this.kc&&this.Uc?this.Uc[t]:void 0,iSample:i}),a=r.length,l=this.gc,u=this.yc-1,c=Math.max(u-l+1,0);if(h){const s=this.Qc(),e=this.Pc();if(!(s&&e&&this.Dc&&this.Bc))return;const r="ProgressiveX"===h||"RegressiveX"===h?"x":"y",n="x"===r?"y":"x",l="x"===r?this.Dc:this.Bc,d="x"===n?this.Dc:this.Bc,f=t[r],A=Math.min(s[r],e[r]),g=Math.max(s[r],e[r]);if(f<A||f>g)return;const y=Gn(f,c,u,(t=>l[On(t,this.yc,a,this.Ac)])),m=On(y,this.yc,a,this.Ac);if(!i)return o(m,y);const p=y-1,v=y+1,S=f>=l[m]&&("ProgressiveX"===h||"ProgressiveY"===h)?v<=u?v:void 0:p>=c?p:void 0;if(void 0===S)return;const b=On(S,this.yc,a,this.Ac),x=l[m],M=d[m],_=l[b],w=d[b],C=Math.min(x,_),k=C===x?M:w,T=Math.max(x,_),F=C===x?y:S,I=(f-C)/(T-C),P=un(k,T===x?M:w,I);return"ProgressiveX"===h||"RegressiveX"===h?{x:f,y:P,iSample:F+I}:{x:P,y:f,iSample:F+I}}let d,f=Number.MAX_VALUE;const A=At(t,s,e),g=this.gc-1;for(let t=0;t<=g;t+=1){const i=r[t],h=n[t];if(!Number.isNaN(i)&&!Number.isNaN(h)){const r=ft(i,s.x,e.x),n=ft(h,s.y,e.y),o=(r-A.x)**2+(n-A.y)**2;o<f&&(f=o,d=t)}}return void 0===d?void 0:o(d,d)}zc(t,i){this.L.emit("changed",t,i)}Gt(t){return this.L.off(t)}qc(t){return this.L.on("changed",t)}td(t){return this.L.on("cleared",t)}}const On=(t,i,s,e)=>t%s,Nn=(t,i,s,e,h,r,n,o)=>{if(0===e||0===h)return;const a=s.length,l=e-1,u=Math.max(l-h+1,0),c=Gn(t,u,l,(t=>s[On(t,e,a)])),d=Gn(i,u,l,(t=>s[On(t,e,a)])),f=Math.max(c-o,u),A=Math.min(d+o,l),g=On(f,e,a),y=On(A,e,a);return g>y?{iFirstSample:f,iLastSample:A,iFirstSampleDataArray:g,iLastSampleDataArray:y,dataRanges:[{offset:g,count:a-g},{offset:0,count:y+1}]}:{iFirstSample:f,iLastSample:A,iFirstSampleDataArray:g,iLastSampleDataArray:y,dataRanges:[{offset:g,count:y-g+1}]}},Gn=(t,i,s,e)=>{const h=s;for(;i!==s;){const h=Math.ceil((i+s)/2);t<e(h)?s=h-1:i=h}const r=Math.abs(t-e(i));return i<h&&Math.abs(t-e(i+1))<r?i+1:i},Wn=(t,i,s,e,h)=>{const r=i.length;if(Array.isArray(i))for(let r=0;r<e;r+=1)t[h+r]=i[s+r];else t.set(r===e?i:i.subarray(s,s+e),h)},Un=(t,i)=>void 0===t?void 0:Array.isArray(t)?new i(t):t instanceof i?t:new i(t),Yn=(t,i,s)=>{if(void 0!==t)return Array.isArray(t)?t.slice(i,s):t.subarray(i,s)};class Hn extends on{constructor(t,i,s,e,h){super(t,i,s,e,h),this.pa="label",this.Za=this.Ds.Nr(this.renderingScale).yr(this.pa).De(O).Vr(Hi).Or(Hi),this.setMargin(5),this.Tu(this.Za)}Ru(){return[this.Za]}setFillStyle(t){return this.Za.De(t),this.Ds.xs(),this}getFillStyle(){return this.Za.$h()}Le(){const t=this.getPosition(n(0,0),Rt.Content),i=At(t,this.scale,this.renderingScale);return this.Za.Re(i),this}Es(){this.Za.Es();const t=0===this.pa.length?n(0,0):this.Za.sd();return this.setContentSize(t),super.Es()}setText(t){return this.pa=t,this.Za.yr(this.pa),this.Ds.xs(),this}getText(){return this.pa}setFont(t){return this.Za.Zh(t),this.Ds.xs(),this}getFont(){return this.Za.jh()}setTextRotation(t){return this.Za.Qh(t),this.Ds.xs(),this}getTextRotation(){return this.Za.Jh()}}const $n={...tn,...en,uiElement:Hn};class Xn extends an{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ed=!1,this.fitTo=this.Ou.bind(this),this.setSize=this.fitTo,this.Za=this.Ds.ac(i).De(O).Pe(at),this.Tu(this.Za)}Ru(){return[this.Za]}setFillStyle(t){return this.Za.De(t),this.Ds.xs(),this}getFillStyle(){return this.Za.$h()}setStrokeStyle(t){return this.Za.Pe(t),this.Ds.xs(),this}getStrokeStyle(){return this.Za.mo()}Le(){const t=As([this.getPosition(n(-1,-1),Rt.Content),this.getPosition(n(1,1),Rt.Content)].map((t=>At(t,this.scale,this.renderingScale))));return this.ed?this.Za.wl([{x:(t.min.x+t.max.x)/2,y:t.min.y},{x:t.min.x,y:(t.min.y+t.max.y)/2},{x:(t.min.x+t.max.x)/2,y:t.max.y},{x:t.max.x,y:(t.min.y+t.max.y)/2}]):this.Za.wl([t.min,{x:t.min.x,y:t.max.y},t.max,{x:t.max.x,y:t.min.y}]),this}Ou(t){return this.setContentSize(t),this.Ds.xs(),this}Nu(){return 0}Gu(){return 0}Uu(){return 0}Wu(){return 0}}class jn extends an{constructor(t,i,s,e,h){super(t,i,s,e,h),this.hd=n(0,0),this.Za=t.rd(i).uu(0).Ue(360).De(O).Pe(at),this.Tu(this.Za)}Ru(){return[this.Za]}setFillStyle(t){return this.Za.De(t),this.Ds.xs(),this}getFillStyle(){return this.Za.$h()}setStrokeStyle(t){return this.Za.Pe(t),this.Ds.xs(),this}getStrokeStyle(){return this.Za.mo()}Le(){const t=this.getSize(Rt.Content).x/2;return this.Za.du(t*this.renderingScale.Gi().x).fu(t*this.renderingScale.Gi().y).Re(At(this.getPosition(n(0,0),Rt.Content),this.scale,this.renderingScale)).gu(255).Es(),this}Ou(t){const i=Math.sqrt(t.x*t.x/4+t.y*t.y/4);return this.setContentSize(n(2*i,2*i)),this.hd=t,this.Ds.xs(),this}Nu(){return(this.getSize(Rt.Content).x-this.hd.x)/2}Gu(){return(this.getSize(Rt.Content).x-this.hd.x)/2}Uu(){return(this.getSize(Rt.Content).y-this.hd.y)/2}Wu(){return(this.getSize(Rt.Content).y-this.hd.y)/2}fitTo(t){const i=Math.min(t.x,t.y);return this.setContentSize(n(i,i)),this.hd=t,this}}class Zn extends ln{constructor(t,i,s,e,h){super(t,i,s,Pr.Simple,e,h),this.nd=f(n(0,0)),this.od=!1,this.Ds=t,this.lc()}uc(){const t=this.nd._();if(this.od){const i=Math.min(t.x,t.y);return[n(0,0),n(i/2,i/2),n(0,i),n(-i/2,i/2)]}const i=2*Math.sqrt(this.nd._().x*this.nd._().x/4+this.nd._().y*this.nd._().y/4),s=n(Math.cos(Math.PI/4)*i,0),e=n(0,Math.sin(Math.PI/4)*i),h=n(0,0),r=ws(h,ws(s,e)),o=ws(r,ws(e,_s(s,-1)));return[h,r,o,Cs(o,ws(s,e))]}Ru(){return[this.Za]}setFillStyle(t){return this.Za.De(t),this.Ds.xs(),this}getFillStyle(){return this.Za.$h()}setStrokeStyle(t){return this.Za.Pe(t),this.Ds.xs(),this}getStrokeStyle(){return this.Za.mo()}Ou(t){return this.nd.M(t),this.od=!1,this.Ds.xs(),this}Nu(){return this.od?0:(this.getSize(Rt.Content).x-this.nd._().x)/2}Gu(){return this.od?0:(this.getSize(Rt.Content).x-this.nd._().x)/2}Uu(){return this.od?0:(this.getSize(Rt.Content).y-this.nd._().y)/2}Wu(){return this.od?0:(this.getSize(Rt.Content).y-this.nd._().y)/2}fitTo(t){return this.nd.M(t),this.od=!0,this.Ds.xs(),this}}class Qn extends ln{constructor(t,i,s,e,h){super(t,i,s,Pr.Simple,e,h),this.ad=f(n(0,0)),this.ld=f(10),this.ud=f(void 0),this.Zu=f(Vt.Right),this.lc()}Ru(){return[this.Za]}setFillStyle(t){return this.Za.De(t),this.Ds.xs(),this}getFillStyle(){return this.Za.$h()}setStrokeStyle(t){return this.Za.Pe(t),this.Ds.xs(),this}getStrokeStyle(){return this.Za.mo()}setDirection(t){return this.Zu.M(t),this.Ds.xs(),this}getDirection(){return this.Zu._()}setPointerLength(t){return this.ld.M(t),this.Ds.xs(),this}getPointerLength(){return this.ld._()}setPointerAngle(t){return this.ud.M(t),this.Ds.xs(),this}getPointerAngle(){let t=this.ud._();if(void 0===t){const i=this.dd();if(0===i)return 0;t=0!==i?180*Math.atan(2*this.getPointerLength()/i)/Math.PI:0}return Math.min(Math.max(t,1),89)}Ou(t){return this.ad.M(t),this.Ds.xs(),this}fd(){const t=this.getPointerAngle();return 0===t?0:2*this.getPointerLength()/Math.tan(t*Math.PI/180)}Ad(){return ci(this.Zu._())?this.ad._().x:this.ad._().y}dd(){return ci(this.Zu._())?this.ad._().y:this.ad._().x}Nu(){switch(this.Zu._()){case Vt.Right:return 0;case Vt.Left:return this.getPointerLength();case Vt.Up:case Vt.Down:return Math.max(0,this.fd()-this.dd());default:return 0}}Gu(){switch(this.Zu._()){case Vt.Right:return this.getPointerLength();case Vt.Left:return 0;case Vt.Up:case Vt.Down:return Math.max(0,this.fd()-this.dd());default:return 0}}Uu(){switch(this.Zu._()){case Vt.Right:case Vt.Left:return Math.max(0,this.fd()-this.dd());case Vt.Up:return this.getPointerLength();case Vt.Down:default:return 0}}Wu(){switch(this.Zu._()){case Vt.Right:case Vt.Left:return Math.max(0,this.fd()-this.dd());case Vt.Up:return 0;case Vt.Down:return this.getPointerLength();default:return 0}}uc(){const t=ui(this.Zu._()),i=xs(n(0,0),t),s=this.getPointerLength(),e=this.fd(),h=this.Ad(),r=this.dd();if(!(0!==s&&0!==e||0!==h&&0!==r))return[];const o=n(0,0),a=ws(ws(o,_s(t,-s)),_s(i,e/2)),l=ws(a,_s(i,(r-e)/2)),u=ws(l,_s(t,-h)),c=ws(ws(o,_s(t,-s)),_s(i,-e/2)),d=ws(c,_s(i,-(r-e)/2)),f=ws(d,_s(t,-h));let A;return A=0===h||0===r?[o,a,c]:0===s||0===e?[l,u,f,d]:Ht(r,e)?[o,a,u,f,c]:[o,a,l,u,f,d,c],A}}class Jn extends on{constructor(t,i,s,e,h){super(t,i,s,e,h),this.fitTo=this.Ou.bind(this),this.setSize=this.fitTo,this.gd=new Vn,this.Za=this.Ds.vd(i).Ge(at).pd(O).md(O).yd(this.gd),this.Tu(this.Za)}Ru(){return[this.Za]}setShape(t){return this.Za.Sd(t),this}getShape(){return this.Za.bd()}setRotation(t){return this.Za.xd(t),this}getRotation(){return this.Za.Md()}setFillStyle(t){return this.Za.md(t),this.Ds.xs(),this}getFillStyle(){return this.Za._d()}Le(){const t=At(this.getPosition({x:0,y:0},Rt.Content),this.scale,this.renderingScale),i=Math.max(this.size.x,this.size.y);if(this.gd.clear(),i>0){const s=this.Za.bd(),e=this.Za._d(),h=Ln(s)&&s,r=kn(e)&&e;if(h){const t=i/h.ni().y;this.Za.wd(t)}else if(r){const t=r.source;if(t instanceof Image){const s=i/t.height;this.Za.wd(s)}}else this.Za.wd(i);this.gd.appendSample(t)}return this}Ou(t){return this.setContentSize(t),this.Ds.xs(),this}Nu(){return 0}Gu(){return 0}Uu(){return 0}Wu(){return 0}}const Kn={...tn,...en,uiElement:Jn};class qn extends rn{setSize(t){return this.setContentSize(t),this.Ds.xs(),this}}class to extends Xr{constructor(){super(...arguments),this.Cd=[],this.kd=0,this.Td=t=>{const i=this.Cd.indexOf(t);i>=0&&this.Cd.splice(i,1)}}getMembers(){return this.Cd}getMemberCount(){return this.Cd.length}setMinimumSize(t){return this.Fd=t,this.Ds.xs(),this}getMinimumSize(){return this.Fd}addElement(t,i=-1){const s=t.ic(this.Ds,this.renderingScale,this.scale,this.Td,this.qi,!1);return s.setMouseInteractions(this.getMouseInteractions()),i>=0?this.Cd.splice(i,0,s):this.Cd.push(s),s.setVisible(this.getVisible()),this.Tu(s),this.Xi&&(Di(0,(()=>{})),s.dispose()),s}dispose(){return super.dispose(),this.Cd.slice().forEach(Ut),this}setVisible(t){return super.setVisible(t),this.Cd.forEach((i=>i.setVisible(t))),this}setMouseInteractions(t){super.setMouseInteractions(t);for(let i=0;i<this.Cd.length;i+=1)this.Cd[i].setMouseInteractions(t);return this}getMouseInteractions(){if(super.getMouseInteractions())return!0;for(let t=0;t<this.Cd.length;t+=1)if(this.Cd[t].getMouseInteractions())return!0;return!1}setHighlight(t){super.setHighlight(t);for(let s=0;s<this.Cd.length;s+=1){const e=this.Cd[s];"getHighlight"in(i=e)&&"setHighlight"in i&&e.setHighlight(t)}var i;return this}}class io extends to{Le(){super.Le();const t=this.getPosition(n(-1,1),Rt.Content),i=this.Cd.reduce(((t,i)=>t+ +(i instanceof qn)),0),s=i>0?(this.size.x-this.kd)/i:0;return this.Cd.reduce(((i,e)=>e instanceof qn?this.scale.gi({x:i,y:t.y},{x:s+e.getSize().x,y:0}).x:e.setOrigin(n(-1,1)).setPosition(n(i,t.y)).Le().getPosition(n(1,0)).x),t.x),this}Es(){for(let t=0;t<this.Cd.length;t+=1){const i=this.Cd[t];i instanceof so&&i.setMinimumSize(0),i.Es()}const t=this.Cd.reduce(this.Id.bind(this),o(0,0));this.kd=t.x;const i=void 0===this.Fd?t:n(Math.max(t.x,this.Fd),t.y);this.setContentSize(i);for(let t=0;t<this.Cd.length;t+=1){const s=this.Cd[t];s instanceof so&&s.setMinimumSize(i.y).Es()}return super.Es()}Id(t,i){const s=i.getSize();return t.x+=s.x,t.y=Math.max(t.y,s.y),t}addGap(t=0,i=-1){return this.addElement(eo,i).setSize(n(0,t))}}class so extends to{Le(){super.Le();const t=this.getPosition(n(-1,1),Rt.Content),i=this.Cd.reduce(((t,i)=>t+ +(i instanceof qn)),0),s=i>0?(this.size.y-this.kd)/i:0;return this.Cd.reduce(((i,e)=>e instanceof qn?this.scale.gi({x:t.x,y:i},{x:0,y:-(s+e.getSize().y)}).y:e.setOrigin(n(-1,1)).setPosition(n(t.x,i)).Le().getPosition(n(0,-1)).y),t.y),this}Es(){for(let t=0;t<this.Cd.length;t+=1){const i=this.Cd[t];i instanceof io&&i.setMinimumSize(0),i.Es()}const t=this.Cd.reduce(this.Id.bind(this),o(0,0));this.kd=t.y;const i=void 0===this.Fd?t:n(t.x,Math.max(t.y,this.Fd));this.setContentSize(i);for(let t=0;t<this.Cd.length;t+=1){const s=this.Cd[t];s instanceof io&&s.setMinimumSize(i.x).Es()}return super.Es()}Id(t,i){const s=i.getSize();return t.y+=s.y,t.x=Math.max(t.x,s.x),t}addGap(t=0,i=-1){return this.addElement(eo,i).setSize(n(0,t))}}const eo={...tn,...en,uiElement:qn};class ho extends io{constructor(){super(...arguments),this.Cd=[]}addColumn(){return this.addElement(oo,void 0)}getColumn(t,i=!1){return i&&this.Cd.length<=t?(this.addColumn(),this.getColumn(t,!0)):this.Cd[t]}}class ro extends so{constructor(){super(...arguments),this.Cd=[]}addRow(){return this.addElement(ao,void 0)}getRow(t,i=!1){return i&&this.Cd.length<=t?(this.addRow(),this.getRow(t,!0)):this.Cd[t]}}const no={...tn,...sn,...hn},oo={...no,uiElement:so,background:Xn},ao={...no,uiElement:io,background:Xn},lo={setTextLabel:null,setText(t){return this.setTextLabel.setText(t),this},getText(){return this.setTextLabel.getText()}},uo=(t,i)=>{const s={},e=`stylable${t}s`;return s[e]=i,s[`set${t}FillStyle`]=function(t){return this[e].forEach((i=>i.setFillStyle(t))),this},s[`get${t}FillStyle`]=function(){return this[e][0].getFillStyle()},s[`set${t}Font`]=function(t){return this[e].forEach((i=>i.setFont(t))),this},s[`get${t}Font`]=function(){return this[e][0].getFont()},s[`set${t}Rotation`]=function(t){return this[e].forEach((i=>i.setTextRotation(t))),this},s[`get${t}Rotation`]=function(){return this[e][0].getTextRotation()},s},co=uo("Text",[]),fo={button:void 0,isLocked:!1,setOn(t){const i=this.button.getOn()!==t;return this.button.setOn(t),i&&this.L.emit("switch",t),this},getOn(){return this.button.getOn()},setLocked(t){return this.isLocked=t,this},getLocked(){return this.isLocked},onSwitch(t){return this.L.on("switch",(i=>t(this,i)))},offSwitch(t){return this.L.off(t,"switch")},setButtonOffFillStyle(t){return this.button.setOffFillStyle(t),this},getButtonOffFillStyle(){return this.button.getOffFillStyle()},setButtonOnFillStyle(t){return this.button.setOnFillStyle(t),this},getButtonOnFillStyle(){return this.button.getOnFillStyle()},setButtonSize(t){return this.button.setSize(t),this},getButtonSize(){return this.button.getSize()},setButtonShape(t){return this.button.setButtonShape(t),this},getButtonShape(){return this.button.getButtonShape()}},Ao={textFillStyleHidden:void 0,setTextFillStyleHidden(t){return this.textFillStyleHidden="function"==typeof t?t(this.textFillStyleHidden):t,this},getTextFillStyleHidden(){return this.textFillStyleHidden}},go={pointable:void 0,setDirection(t){return this.pointable.setDirection(t),this},getDirection(){return this.pointable.getDirection()},setPointerLength(t){return this.pointable.setPointerLength(t),this},getPointerLength(){return this.pointable.getPointerLength()}},yo={...tn,...sn,background:Xn,ic(t,i,s,e,h,r){const n=new io(t,i,s,this.background,e,h),o=n.addElement($n,void 0),a=Object.assign(n,lo,{setTextLabel:o},co,{stylableTexts:[o]});return qr(a,h,r),this.applyStylers(a,h)}}.addStyler(Jr),mo={...tn,...sn,background:Qn,direction:Vt.Up,setDirection(t){return this.direction=t,this},ic(t,i,s,e,h,r){const n=this.direction,o=new io(t,i,s,this.background,e,h),a=o.addElement($n,void 0),l=o.getBackground().setDirection(n),u=Object.assign(o,lo,{setTextLabel:a},co,{stylableTexts:[a]},go,{pointable:l},{setTickLabelPadding(t){return this.getDirection()===Vt.Up?(this.setPadding({top:t}),a.setMargin({top:0})):this.getDirection()===Vt.Down?(this.setPadding({bottom:t}),a.setMargin({bottom:0})):this.getDirection()===Vt.Right?(this.setPadding({right:t}),a.setMargin({right:0})):this.getDirection()===Vt.Left&&(this.setPadding({left:t}),a.setMargin({left:0})),this},getTickLabelPadding(){return this.getDirection()===Vt.Up?this.getPadding().top:this.getDirection()===Vt.Down?this.getPadding().bottom:this.getDirection()===Vt.Right?this.getPadding().right:this.getPadding().left}});return u.sc="other",u.setPointerLength(h.xAxisNumericTicks.majorTickStyle.getTickLength()).setTickLabelPadding(h.xAxisNumericTicks.majorTickStyle.getTickPadding()).setTextFont(h.uiTextFont).setTextFillStyle(h.uiTextFillStyle).setBackground((t=>t.setFillStyle(h.uiBackgroundFillStyle).setStrokeStyle(h.uiBackgroundStrokeStyle))),qr(u,h,r),this.applyStylers(u,h)}};class po extends $r{constructor(t,i,e,h,r,n){super(t,i,e,r,n),this.zs=!1,this.L=new s,this.Pd=O,this.Dd=O,this.getOn=()=>this.zs,this.Dd=n.uiButtonFillStyleHidden||n.uiButtonFillStyle,this.Bd=this.Tu(new Jn(this.Ds,this.renderingScale,this.scale,Yt,n).setShape(h)).setFillStyle(this.Dd)}Ru(){return[...this.Bd.Ru()]}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}setOn(t){return this.zs=t,this.Bd.setFillStyle(t?this.Pd:this.Dd),this.Ds.xs(),this}setOffFillStyle(t){return this.Dd="function"==typeof t?t(this.Dd):t,this.zs||this.Bd.setFillStyle(this.Dd),this}getOffFillStyle(){return this.Dd}setSize(t){return this.Bd.fitTo("number"==typeof t?n(t,t):t),this}getSize(){return this.Bd.getSize()}setOnFillStyle(t){return this.Pd="function"==typeof t?t(this.Pd):t,this.zs&&this.Bd.setFillStyle(this.Pd),this}getOnFillStyle(){return this.Pd}setButtonShape(t){return this.Bd.setShape(t),this.Ds.xs(),this}getButtonShape(){return this.Bd.getShape()}Le(){return super.Le(),this.Bd.setVisible(this.getVisible()).setPosition(this.getPosition(n(0,0),Rt.Content)).Le(),this}Es(){const t=this.Bd.Es().getSize();return this.setContentSize(t),super.Es()}dispose(){return super.dispose(),this.Bd.dispose(),this}setMouseInteractions(t){return this.Bd.setMouseInteractions(t),this}getMouseInteractions(){return this.Bd.getMouseInteractions()}setHighlight(t){const i=zi(t);return this.Bd.setHighlight(i),this.L.emit("highlight",this,t),this.Ds.xs(),this}getHighlight(){return this.Bd.getHighlight()}}const vo={...tn,uiElement:po,buttonShape:sr.Circle,setButtonShape(t){return{...this,buttonShape:t}},ic(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.buttonShape,e,h),h);return qr(n,h,r),n}},So={...tn,...sn,background:Xn,buttonBuilder:vo,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},ic(t,i,s,e,h,r){const n=new io(t,i,s,this.background,e,h),o=n.addElement(oo);o.addGap();const a=o.addElement(this.buttonBuilder);o.addGap();const l=n.addElement(oo);l.addGap();const u=l.addElement($n);l.addGap(),n.addGap();const c=Object.assign(n,lo,{setTextLabel:u},co,{stylableTexts:[u]},fo,{button:a},Ao);let d;return c.onMouseClick(((t,i)=>{c.getLocked()||c.setOn(!c.getOn())})),c.onMouseEnter((()=>c.setHighlight(!0))),c.onMouseLeave((()=>c.setHighlight(!1))),c.setMouseStyle(Xe.Point),c.setTextFillStyleHidden(h.uiTextFillStyleHidden||h.uiTextFillStyle),c.onSwitch(((t,i)=>{i?d&&c.setTextFillStyle(d):(d=c.getTextFillStyle(),c.setTextFillStyle(c.getTextFillStyleHidden()))})),c.setPadding({left:5}),qr(c,h,r),this.applyStylers(c,h)}}.addStyler(Jr).addStyler(Kr);class bo extends $r{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.Ld=[],this.Rd=2,this.Ed="",this.zd=(t,i)=>void 0!==t.label?t.label:i.percentageValues?`${(100*t.value).toFixed(0)}%`:$s(t.value,i.min,i.max),this.Vd=0,this.Od=0,this.Nd=!1,this.Ds=t,this.Gd=r,this.Wd=this.Tu(t.Be(i).Pe(at)),this.Ud=this.Tu(t.Nr(i).De(h.uiTextFillStyle).Zh(h.uiTextFont).setMouseInteractions(!1)),"vertical"===r?(this.Yd=140,this.Hd=25):(this.Yd=160,this.Hd=15)}Ru(){return[this.Wd,this.Ud]}$d(t){this.Xd=t;const i=_o(t,"vertical"===this.Gd?0:90,this.Nd);return this.Wd.De(i),this.Ds.xs(),this}jd(){return this.Xd}Zd(t){return this.Yd=t,this.Ds.xs(),this}Qd(){return this.Yd}Jd(t){return this.Hd=t,this.Ds.xs(),this}Kd(){return this.Hd}qd(t){return this.Ed=t,this.Ds.xs(),this}tf(){return this.Ed}if(t){return this.zd=t,this.Ds.xs(),this}setLUTDisplayProportionalSteps(t){if(this.Nd=t,this.Xd){const t=_o(this.Xd,"vertical"===this.Gd?0:90,this.Nd);this.Wd.De(t)}return this.Ds.xs(),this}getLUTDisplayProportionalSteps(){return this.Nd}setFillStyle(t){return this.Ud.De(t),this.Ds.xs(),this}getFillStyle(){return this.Ud.$h()}setFont(t){return this.Ud.Zh(t),this.Ds.xs(),this}getFont(){return this.Ud.jh()}setTextRotation(t){return this.Od=t,this.Ud.Qh(t),this.Ds.xs(),this}getTextRotation(){return this.Ud.Jh()}Le(){var t,i,s,e;if(super.Le(),this.Xi||!this.getVisible())return this;const h=this.Xd;if(h){const r=this.renderingScale.Gi(),n=h.min,o=h.max;if("vertical"===this.Gd){const s=this.getPosition({x:-1,y:-1},Rt.Content),e=ws(s,{x:this.Wd.ni().x+this.Rd*r.x,y:0}),a={x:e.x,y:e.y+(this.Ed.length>0?this.Vd*r.y+this.Ud.ni().y:0)+.5*((null===(t=this.Ld[0])||void 0===t?void 0:t.ni().y)||0)},l={x:a.x,y:this.getPosition({x:-1,y:1},Rt.Content).y-.5*((null===(i=this.Ld[this.Ld.length-1])||void 0===i?void 0:i.ni().y)||0)};this.Wd.Re({x:s.x,y:a.y}),this.Ud.Ha({x:-1,y:-1}).Re(e),h.getSteps().forEach(((t,i)=>{const s=ds(a,l,this.Nd?!0===h.getInterpolation()?(t.value-n)/(o-n):.9*(t.value-n)/(o-n):!0===h.getInterpolation()?i/(h.getSteps().length-1):i/h.getSteps().length);this.Ld[i].Ha({x:-1,y:0}).Re(s)}))}else{const t=this.getPosition({x:-1,y:-1},Rt.Content),i=this.getPosition({x:1,y:1},Rt.Content),a=this.Ld.reduce(((t,i)=>Math.max(t,i.ni().y)),0),l=ws(t,{x:.5*((null===(s=this.Ld[0])||void 0===s?void 0:s.ni().x)||0),y:a}),u={x:i.x,y:l.y},c={x:u.x-(.5*((null===(e=this.Ld[this.Ld.length-1])||void 0===e?void 0:e.ni().x)||0)+(this.Ed.length>0?this.Vd*r.x+this.Ud.ni().x:0)),y:l.y},d={x:l.x,y:l.y+this.Rd*r.y};this.Wd.Re(d),this.Ud.Ha({x:1,y:1}).Re(u),h.getSteps().forEach(((t,i)=>{const s=ds(l,c,this.Nd?!0===h.getInterpolation()?(t.value-n)/(o-n):.9*(t.value-n)/(o-n):!0===h.getInterpolation()?i/(h.getSteps().length-1):i/h.getSteps().length);this.Ld[i].Ha({x:0,y:1}).Re(s)}))}}return this}Es(){if(this.Xd&&this.getVisible()){const t=this.Xd.getSteps();for(let i=this.Ld.length;i<t.length;i+=1)this.Ld.push(this.Tu(this.Ds.Nr(this.renderingScale).setMouseInteractions(!1)));for(let i=0;i<t.length;i+=1)this.Ld[i].De(this.Ud.$h()).Zh(this.Ud.jh()).yr(this.zd(t[i],this.Xd)).Qh(this.Od);for(let i=t.length;i<this.Ld.length;i+=1)this.Ld[i].dispose();if(this.Ld.length=t.length,this.Ud.yr(this.Ed),"vertical"===this.Gd){const t=this.Hd,i=this.Yd;this.Wd.tt({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=t+Math.max(this.Ld.reduce(((t,i)=>Math.max(t,i.Es().sd().x)),0),this.Ud.Es().sd().x),e=(this.Ed.length>0?this.Vd+this.Ud.Es().sd().y:0)+i+.5*this.Ld[0].Es().sd().y+.5*this.Ld[this.Ld.length-1].Es().sd().y;this.setContentSize({x:s,y:e})}else{const t=this.Yd,i=this.Hd;this.Wd.tt({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=Math.max(this.Ed.length>0?this.Vd+this.Ud.Es().sd().x:0,.5*this.Ld[this.Ld.length-1].Es().sd().x),e=t+.5*this.Ld[0].Es().sd().x+s,h=i+this.Rd+this.Ld.reduce(((t,i)=>Math.max(t,i.Es().sd().y)),0);this.setContentSize({x:e,y:h})}}else this.Ld.forEach((t=>t.dispose())),this.Ld.length=0,this.Ud.setVisible(!1),this.Wd.setVisible(!1),this.setContentSize({x:0,y:0});return super.Es()}dispose(){return super.dispose(),this.Wd.dispose(),this.Ld.forEach(Ut),this.Ud.dispose(),this}setMouseInteractions(t){return this.Wd.setMouseInteractions(t),this}getMouseInteractions(){return this.Wd.getMouseInteractions()}}const xo={lutElement:{},setLUT(t){return this.lutElement.$d(t),this},getLUT(){return this.lutElement.jd()},setLUTLength(t){return this.lutElement.Zd(t),this},getLUTLength(){return this.lutElement.Qd()},setLUTThickness(t){return this.lutElement.Jd(t),this},getLUTThickness(){return this.lutElement.Kd()},setLookUpUnit(t){return this.lutElement.qd(t),this},getLookUpUnit(){return this.lutElement.tf()},setLUTStepValueFormatter(t){return this.lutElement.if(t),this},setLUTDisplayProportionalSteps(t){return this.lutElement.setLUTDisplayProportionalSteps(t),this},getLUTDisplayProportionalSteps(){return this.lutElement.getLUTDisplayProportionalSteps()}},Mo={...tn,...sn,background:Xn,alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},ic(t,i,s,e,h,r){const n=new so(t,i,s,this.background,e,h),o=n.addElement({ic:()=>new bo(t,i,s,Yt,h,this.alignment)}),a=Object.assign(n,co,{stylableTexts:[o]},xo,{lutElement:o});return qr(a,h,r),this.applyStylers(a,h)}}.addStyler(Jr),_o=(t,i,s)=>{const e=t.getSteps(),h=t.min,r=t.max-h;if(!0===t.getInterpolation())return new rt({angle:i,stops:e.map(((i,n)=>({offset:s?(i.value-h)/r:n/(e.length-1),color:i.color||t.color})))});const n=[];for(let i=0;i<e.length;i+=1){const o=e[i];n.push({offset:s?.9*(o.value-h)/r:i/e.length,color:o.color||t.color});const a=i<e.length-1?e[i+1]:void 0;n.push({offset:s?a?.9*(a.value-h)/r:1:a?(i+1)/e.length:1,color:o.color||t.color})}return new rt({angle:i,stops:n})},wo={...tn,...sn,background:Xn,buttonBuilder:vo,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},ic(t,i,s,e,h){const r=new so(t,i,s,this.background,e,h),n=r.addElement(ao),o=n.addElement(oo);o.addGap();const a=o.addElement(this.buttonBuilder);o.addGap();const l=n.addElement(oo);l.addGap();const u=l.addElement($n);l.addGap();const c=r.addElement({ic:()=>new bo(t,i,s,Yt,h,this.alignment)});"vertical"===this.alignment&&c.setMargin({left:h.uiButtonSize+6});const d=Object.assign(r,lo,{setTextLabel:u},co,{stylableTexts:[u,c]},uo("LUTText",[c]),fo,{button:a},xo,{lutElement:c},Ao);let f;return d.onMouseClick((()=>{d.getLocked()||d.setOn(!d.getOn())})),d.onMouseEnter((()=>d.setHighlight(!0))),d.onMouseLeave((()=>d.setHighlight(!1))),d.setMouseStyle(Xe.Point),d.setTextFillStyleHidden(h.uiTextFillStyleHidden||h.uiTextFillStyle),d.onSwitch(((t,i)=>{i?f&&d.setTextFillStyle(f):(f=d.getTextFillStyle(),d.setTextFillStyle(d.getTextFillStyleHidden()))})),d.setPadding({left:5}),this.applyStylers(d,h)}}.addStyler(Jr).addStyler(Kr),Co={alignment:null,title:null,entryStylers:null,legendBoxDisposed:null,entries:[],add(t,i){const s=!i||"object"!=typeof i||void 0===i.toggleVisibilityOnClick||i.toggleVisibilityOnClick,e=null==i?void 0:i.matchStyleExactly,h=i&&"object"==typeof i&&void 0!==i.builder?i.builder:void 0;return this.legendBoxDisposed()||(t instanceof La?this.addChart(t,s,h,e):"attach"in t?this.addAttachable(t,s,h,e):t&&this.addDashboard(t,s,h,e)),this},addAttachable(t,i,s,e){const h=t.jd&&t.jd(),r=t.Is&&t.Is(),n=void 0!==e&&e;let o=s;if(!o){let t=h?wo.setAlignment(this.alignment):So;void 0!==r&&(t=t.setButtonShape(r)),o=t}const a=this.addElement(o);if(h&&"setLUT"in a){a.setLUT(h.lut);const t=h.lut.getUnits(),i=h.lookUpProperty,s=t.length>0?t:"x"===i?"x":"y"===i?"y":"z"===i?"z":"";a.setLookUpUnit(s)}return this.entryStylers.forEach((t=>t(a))),this.entries.push({entry:a,component:t}),t.attach(a,i,n),i||a.setLocked(!0),this},addChart(t,i,s,e){return t.sf().forEach((t=>this.addAttachable(t,i,s,e))),this},addDashboard(t,i,s,e){return t.getCells().filter((t=>t.panel instanceof La)).forEach((t=>this.addChart(t.panel,i,s,e))),this},setTitle(t){return this.title.setText(t),this},getTitle(){return this.title.getText()},setTitleFillStyle(t){return this.title.setTextFillStyle(t),this},getTitleFillStyle(){return this.title.getTextFillStyle()},setTitleFont(t){return this.title.setTextFont(t),this},getTitleFont(){return this.title.getTextFont()},setTitleRotation(t){return this.title.setTextRotation(t),this},getTitleRotation(){return this.title.getTextRotation()},setEntries(t){return this.entries.forEach((i=>t(i.entry,i.component))),this}},ko={alignment:"vertical",layoutBuilder:oo,setAlignment(t){return{...this,alignment:t,layoutBuilder:"horizontal"===t?ao:oo}},getAlignment(){return this.alignment},titleBuilder:yo,styleTitle(t){return{...this,titleBuilder:this.titleBuilder.addStyler(t)}},entryStylers:[],styleEntries(t){return{...this,entryStylers:[...this.entryStylers,t]}}},To={...tn,...sn,...ko,background:Xn,ic(t,i,s,e,h,r){const n=this.layoutBuilder.setBackground(this.background).ic(t,i,s,e,h,!1);let o=Object.assign(n,Co,{alignment:this.alignment,entryStylers:this.entryStylers,legendBoxDisposed:()=>n.Xi});o.entries=[];const a=o.addElement("horizontal"===this.alignment?oo:ao),l=a.addElement(this.titleBuilder).setText("Legend").setTextFillStyle(h.legendTitleFillStyle).setTextFont(h.legendTitleFont);return a.addGap(),o=Object.assign(o,{title:l}),"horizontal"===this.alignment&&l.setMargin({right:6}),qr(o,h,r),this.applyStylers(o,h)}}.addStyler(((t,i)=>t.setPadding(5)));class Fo extends $r{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ef=10,this.hf=Vt.Up,this.rf=0,this.sc="major",this.pa=this.Tu(t.Nr(this.renderingScale).Vr(Hi).Or(Hi)),this.Ne=this.Tu(t.We(this.renderingScale))}Ru(){return[this.pa]}Le(){if(super.Le(),this.Xi)return this;const t=At(this.getPosition(),this.scale,this.renderingScale),i=this.renderingScale.gi(t,{x:this.hf===Vt.Right?-this.ef:this.hf===Vt.Left?this.ef:0,y:this.hf===Vt.Up?-this.ef:this.hf===Vt.Down?this.ef:0}),s=this.renderingScale.gi(i,{x:this.hf===Vt.Right?-this.rf:this.hf===Vt.Left?this.rf:0,y:this.hf===Vt.Up?-this.rf:this.hf===Vt.Down?this.rf:0});return this.Ne.Ye(t).Ue(i),this.pa.Re(s).Ha(this.hf===Vt.Up?{x:0,y:1}:this.hf===Vt.Down?{x:0,y:-1}:this.hf===Vt.Right?{x:1,y:0}:{x:-1,y:0}),this}Es(){const t=this.Ne.mu().getThickness();return this.size=this.hf===Vt.Left||this.hf===Vt.Right?{x:this.ef+this.rf+this.pa.Es().sd().x,y:t}:{y:this.ef+this.rf+this.pa.Es().sd().y,x:t},super.Es()}dispose(){return super.dispose(),this.pa.dispose(),this.Ne.dispose(),this}setVisible(t){return super.setVisible(t),this.pa.setVisible(t),this.Ne.setVisible(t),this}setMouseInteractions(t){return this.pa.setMouseInteractions(t),this.Ne.setMouseInteractions(t),this}getMouseInteractions(){return this.pa.getMouseInteractions()}getText(){return this.pa.wr()}setTextFillStyle(t){return this.pa.De(t),this.Ds.xs(),this}getTextFillStyle(){return this.pa.$h()}setTextFont(t){return this.pa.Zh(t),this}setTextRotation(t){return this.pa.Qh(t),this}getTextRotation(){return this.pa.Jh()}getTextFont(){return this.pa.jh()}setText(t){return this.pa.yr(t),this.Ds.xs(),this}setDirection(t){return this.hf=t,this.Ds.xs(),this}getDirection(){return this.hf}setPointerLength(t){return this.ef=t,this.Ds.xs(),this}getPointerLength(){return this.ef}setTickLabelPadding(t){return this.rf=t,this.Ds.xs(),this}getTickLabelPadding(){return this.rf}setTickStyle(t){return this.Ne.Ge(t),this.Ds.xs(),this}getTickStyle(){return this.Ne.mu()}}const Io={...tn,direction:Vt.Up,setDirection(t){return this.direction=t,this},ic(t,i,s,e,h,r){const n=this.direction,o=new Fo(t,i,s,e,h);return qr(o,h,r),o.setDirection(n),this.applyStylers(o,h)}}.addStyler(Jr),Po=Io.addStyler(((t,i)=>(t.sc="major",t.setPointerLength(i.xAxisNumericTicks.majorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.majorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.majorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.majorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.majorTickStyle.labelFillStyle)))),Do=Io.addStyler(((t,i)=>(t.sc="minor",t.setPointerLength(i.xAxisNumericTicks.minorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.minorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.minorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.minorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.minorTickStyle.labelFillStyle)))),Bo=So.addStyler((t=>t.onSwitch(((i,s)=>!0===s?setTimeout((()=>t.setOn(!1)),300):void 0)))),Lo=To.setAlignment("horizontal"),Ro=To.setAlignment("vertical"),Eo={TextBox:yo,CheckBox:So,ButtonBox:Bo,PointableTextBox:mo,AxisTickMajor:Po,AxisTickMinor:Do,LUTRange:Mo},zo={HorizontalLegendBox:Lo,VerticalLegendBox:Ro},Vo={nf:0,af:1,lf:2,uf:3,cf:4,df:5,ff:6,Af:7,gf:8,yf:9,mf:10,pf:11,vf:12,Sf:13,bf:14,xf:15,Mf:16,_f:17,wf:18,Cf:19,kf:20,Tf:21,Ff:22,If:23};class Oo extends Mh{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Pf=h}}class No extends xh{constructor(t,i,e,h,r,o,a,l,u,c,d,f,A,g,y,m){var p,v,S;super(c,u,a,g,y,{numeric:u.getWidth({x:g.xAxisNumericTicks,y:g.yAxisNumericTicks}),datetime:u.getWidth({x:g.xAxisDateTimeTicks,y:g.yAxisDateTimeTicks}),time:u.getWidth({x:g.xAxisTimeTicks,y:g.yAxisTimeTicks})},m),this.Df=new Map,this.Bf=void 0,this.Lf=0,this.Rf=[],this.Ef=[],this.oh=nh.fitting,this.zf=!0,this.Vf=8,this.Of=void 0,this.Nf=void 0,this.Gf=20,this.Wf=1,this.Uf=!0,this.Yf=!0,this.Hf=!0,this.$f=!0,this.Xf=!0,this.jf=!0,this.Zf=!0,this.Qf=!0,this.Jf=!0,this.Kf=!0,this.qf=this.Eh.defaultDragMouseStyle,this.tA=this.Eh.defaultDragMouseStyle,this.iA=this.Eh.defaultDragMouseStyle,this.sA=this.Eh.defaultDragMouseStyle,this.eA=this.Eh.defaultDragMouseStyle,this.L=new s,this.hA=[],this.rA=t=>{const i=this.Ef.indexOf(t);i>=0&&this.Ef.splice(i,1)},this.nA=t=>(this.Ef.indexOf(t)<0&&this.Ef.push(t),this.rA),this.oA="center",this.Lt=(t,i)=>this.L.emit("axisAreaTouch",this,i),this.aA=yi(this.hA),this.onAxisInteractionAreaMouseClick=t=>this.L.on("axisAreaMouseClick",t),this.onAxisInteractionAreaMouseDoubleClick=t=>this.L.on("axisAreaDoubleClick",t),this.onAxisInteractionAreaMouseDown=t=>this.L.on("axisAreaMouseDown",t),this.onAxisInteractionAreaMouseUp=t=>this.L.on("axisAreaMouseUp",t),this.onAxisInteractionAreaMouseEnter=t=>this.L.on("axisAreaMouseEnter",t),this.onAxisInteractionAreaMouseLeave=t=>this.L.on("axisAreaMouseLeave",t),this.onAxisInteractionAreaMouseMove=t=>this.L.on("axisAreaMouseMove",t),this.onAxisInteractionAreaMouseWheel=t=>this.L.on("axisAreaMouseWheel",t),this.onAxisInteractionAreaMouseDragStart=t=>this.L.on("axisAreaMouseDragStart",t),this.onAxisInteractionAreaMouseDrag=t=>this.L.on("axisAreaMouseDrag",t),this.onAxisInteractionAreaMouseDragStop=t=>this.L.on("axisAreaMouseDragStop",t),this.onAxisInteractionAreaTouchStart=t=>this.L.on("axisAreaTouchStart",t),this.onAxisInteractionAreaTouch=t=>this.L.on("axisAreaTouch",t),this.onAxisInteractionAreaTouchStop=t=>this.L.on("axisAreaTouchEnd",t),this.offAxisInteractionAreaMouseClick=t=>this.L.off(t,"axisAreaMouseClick"),this.offAxisInteractionAreaMouseDoubleClick=t=>this.L.off(t,"axisAreaDoubleClick"),this.offAxisInteractionAreaMouseDown=t=>this.L.off(t,"axisAreaMouseDown"),this.offAxisInteractionAreaMouseUp=t=>this.L.off(t,"axisAreaMouseUp"),this.offAxisInteractionAreaMouseEnter=t=>this.L.off(t,"axisAreaMouseEnter"),this.offAxisInteractionAreaMouseLeave=t=>this.L.off(t,"axisAreaMouseLeave"),this.offAxisInteractionAreaMouseMove=t=>this.L.off(t,"axisAreaMouseMove"),this.offAxisInteractionAreaMouseWheel=t=>this.L.off(t,"axisAreaMouseWheel"),this.offAxisInteractionAreaMouseDragStart=t=>this.L.off(t,"axisAreaMouseDragStart"),this.offAxisInteractionAreaMouseDrag=t=>this.L.off(t,"axisAreaMouseDrag"),this.offAxisInteractionAreaMouseDragStop=t=>this.L.off(t,"axisAreaMouseDragStop"),this.offAxisInteractionAreaTouchStart=t=>this.L.off(t,"axisAreaTouchStart"),this.offAxisInteractionAreaTouch=t=>this.L.off(t,"axisAreaTouch"),this.offAxisInteractionAreaTouchStop=t=>this.L.off(t,"axisAreaTouchEnd"),this.Yd={relative:1},this.lA=0,this.uA=0,this.cA=(t,i)=>i.getAllocatesAxisSpace()?Math.max(t,i.update().nc()):t,this.dA=t=>{const i=this.Rf.indexOf(t);-1!==i&&this.Rf.splice(i,1)},this.fA=(t,i)=>{this.L.emit("axisAreaDoubleClick",this,i),this.$f&&(this.setStopped(!1),di(i))},this.AA=t=>{this.L.emit("axisAreaMouseEnter",this),(this.Yf||this.Uf||this.Hf||this.$f)&&this.gA(t)},this.yA=t=>{this.mA(t),this.L.emit("axisAreaMouseLeave",this)},this.pA=(t,i,s)=>{var e,h;this.L.emit("axisAreaMouseDragStart",this,i,s);const r=jt(null===(e=this.chart.vA.Kn)||void 0===e?void 0:e.axisXYZoomMouseButton,0),o=jt(null===(h=this.chart.vA.Kn)||void 0===h?void 0:h.axisXYPanMouseButton,2),a=n(i.clientX,i.clientY);s===o&&this.Yf?(this.SA(t),di(i)):s===r&&this.Uf&&(this.bA(t,a),di(i))},this.xA=(t,i,s,e,h)=>{var r,o;this.L.emit("axisAreaMouseDrag",this,i,s,e,h);const a=jt(null===(r=this.chart.vA.Kn)||void 0===r?void 0:r.axisXYZoomMouseButton,0),l=jt(null===(o=this.chart.vA.Kn)||void 0===o?void 0:o.axisXYPanMouseButton,2),u=n(i.clientX,i.clientY);s===l&&this.Yf?(this.MA(t,h),di(i)):s===a&&this.Uf&&(this._A(t,e,u,h),di(i))},this.wA=(t,i,s,e)=>{var h,r;this.L.emit("axisAreaMouseDragStop",this,i,s,e);const o=jt(null===(h=this.chart.vA.Kn)||void 0===h?void 0:h.axisXYZoomMouseButton,0),a=jt(null===(r=this.chart.vA.Kn)||void 0===r?void 0:r.axisXYPanMouseButton,2),l=n(i.clientX,i.clientY);s===a&&this.Yf?(this.CA(t),di(i)):s===o&&this.Uf&&(this.kA(t,e,l),di(i)),t.getIsUnderMouse()&&(this.Yf||this.Uf||this.Hf||this.$f)&&this.gA(t)},this.TA=(t,i)=>{if(this.L.emit("axisAreaMouseWheel",this,i),this.Hf){this.setStopped(!0);const t=this.Eh.getWidth(this.FA.us.ze(i.clientX,i.clientY)),s=this.ft.ct(t);this.zoom(s,Pi(i)),di(i)}},this.IA=(t,i)=>this.L.emit("axisAreaMouseClick",this,i),this.PA=(t,i)=>this.L.emit("axisAreaMouseDown",this,i),this.DA=(t,i)=>this.L.emit("axisAreaMouseUp",this,i),this.BA=(t,i)=>this.L.emit("axisAreaMouseMove",this,i),this.LA=(t,i,s)=>{this.L.emit("axisAreaTouchStart",this,s),this.Uf&&(this.gA(t),this.bA(t,i),di(s))},this.RA=(t,i,s,e,h)=>{this.L.emit("axisAreaTouch",this,h),this.Uf&&(this._A(t,i,s,e),di(h))},this.EA=(t,i,s,e)=>{this.L.emit("axisAreaTouchEnd",this,e),this.Uf&&(this.kA(t,i,s),this.mA(t),di(e))},this.zA=(t,i,s,e)=>{(this.Yf||this.Hf)&&(this.gA(t),this.SA(t),di(e))},this.VA=(t,i,s,e,h,r)=>{if(this.Yf){const i=n((e.x+h.x)/2,(e.y+h.y)/2);this.MA(t,i),di(r)}if(this.Hf){const t=this.FA.us.ze(i.x,i.y),n=this.FA.us.ze(s.x,s.y),o=Math.abs(this.Eh.getWidth(Cs(t,e))-this.Eh.getWidth(Cs(n,h)))-Math.abs(this.Eh.getWidth(t)-this.Eh.getWidth(n)),a=this.ft.gi(this.Gh,-o),l=this.ft.gi(this.Wh,o);this.er(a,l,!0),di(r)}},this.OA=(t,i,s,e)=>{(this.Yf||this.Hf)&&(this.CA(t),this.mA(t),di(e))},this.NA=(t,i)=>{(this.Xf||this.jf)&&this.GA(t)},this.WA=(t,i)=>{this.UA(t)},this.YA=(t,i,s)=>{const e=n(i.clientX,i.clientY);this.Xf&&this.HA(t,e)},this.$A=(t,i,s,e,h)=>{const r=n(i.clientX,i.clientY);this.Xf&&this.XA(t,r,e,h)},this.jA=(t,i,s,e,h)=>{const r=n(i.clientX,i.clientY);this.Xf&&this.ZA(t,r,e,h)},this.QA=(t,i,s,e)=>{const h=n(i.clientX,i.clientY);(this.Xf||this.jf)&&this.JA(t,h,e),(this.Xf||this.jf)&&this.GA(t)},this.KA=(t,i)=>{this.jf&&(this.setStopped(!0),this.zoom(this.Gh,Pi(i)),di(i))},this.qA=(t,i)=>{this.jf&&(this.setStopped(!0),this.zoom(this.Wh,Pi(i)),di(i))},this.tg=(t,i,s)=>{this.Xf&&(this.GA(t),this.HA(t,i),di(s))},this.ig=(t,i,s,e,h)=>{this.Xf&&(this.XA(t,i,s,e),di(h))},this.sg=(t,i,s,e,h)=>{this.Xf&&(this.ZA(t,i,s,e),di(h))},this.eg=(t,i,s,e)=>{this.Xf&&(this.JA(t,i,s),this.UA(t),di(e))},this.hg=t,this.FA=i,this.rg=h,this.ng=r,this.chart=c,this.og=f,this.ag=e,this.ss=o,"logarithmic"===m.type&&this.chart.us.jn(Vo.Cf),A(this,this.nA),a.lg=this,this.ug=d,this.cg=this.ug>50?1:-1,this.dg=(S=this.Eh.toPoint(0,-this.cg),Math.abs(S.x)>=Math.abs(S.y)?S.x>=0?Vt.Right:Vt.Left:S.y>=0?Vt.Up:Vt.Down),this.Ag=l,this.gg=this.ft instanceof Zs?(new Ks).Li(this.Eh.toVec2(this.ft,this.Ag)):(new qs).Li(this.Eh.toVec2(this.ft,this.Ag)),this.yg=this.chart.mg,this.pg=(new Ks).Li(this.Eh.toVec2(this.Eh.getWidth(this.yg),this.Ag)),this.vg=this.FA.We(this.gg).setMouseInteractions(!1),this.Sg=this.FA.We(this.gg).setMouseInteractions(!1),this.bg=this.FA.We(this.gg).setMouseInteractions(!1),this.xg=this.ag.Be(this.yg).De(u.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).Pe(at).sa(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.Mg=this.ag.Be(this.yg).De(u.getWidth({x:g.xAxisZoomingBandFillStyle,y:g.yAxisZoomingBandFillStyle})).Pe(u.getWidth({x:g.xAxisZoomingBandStrokeStyle,y:g.yAxisZoomingBandStrokeStyle})),this._g=this.ag.Be(this.yg).De(u.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).Pe(at).sa(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.wg=this.ag.Be(this.yg).De(u.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).Pe(at).sa(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this._h=this.ag.Nr(this.gg).setMouseInteractions(!1).Qh(this.Eh.getTitleTextRotation(this.cg)).Or(Hi).Vr(Hi),this.chart.us.ls.os(this.xg,(t=>this.xg.cs(t)),{animationEnabled:this.uh}),this.chart.us.ls.os(this._g,(t=>this._g.cs(t)),{animationEnabled:this.uh}),this.chart.us.ls.os(this.wg,(t=>this.wg.cs(t)),{animationEnabled:this.uh});const b=Ae(new ye(this.LA,this.RA,this.EA,1),new me(this.zA,this.VA,this.OA),new ge(this.fA)),x=Ae(new ye(this.tg,this.ig,this.eg)),M=Ae(new ye(this.tg,this.sg,this.eg));this.xg.setMouseEnterEventHandler(this.AA).setMouseLeaveEventHandler(this.yA).setMouseDragStartEventHandler(this.pA).setMouseDragEventHandler(this.xA).setMouseDragStopEventHandler(this.wA).setMouseWheelEventHandler(this.TA).setMouseDoubleClickEventHandler(this.fA).setMouseClickEventHandler(this.IA).setMouseDownEventHandler(this.PA).setMouseUpEventHandler(this.DA).setMouseMoveEventHandler(this.BA).setTouchStartEventHandler(b.onTouchStart).setTouchMoveEventHandler(b.onTouchMove).setTouchEndEventHandler(b.onTouchEnd),this._g.setMouseEnterEventHandler(this.NA).setMouseLeaveEventHandler(this.WA).setMouseDragStartEventHandler(this.YA).setMouseDragEventHandler(this.$A).setMouseDragStopEventHandler(this.QA).setMouseWheelEventHandler(this.KA).setTouchStartEventHandler(x.onTouchStart).setTouchMoveEventHandler(x.onTouchMove).setTouchEndEventHandler(x.onTouchEnd),this.wg.setMouseEnterEventHandler(this.NA).setMouseLeaveEventHandler(this.WA).setMouseDragStartEventHandler(this.YA).setMouseDragEventHandler(this.jA).setMouseDragStopEventHandler(this.QA).setMouseWheelEventHandler(this.qA).setTouchStartEventHandler(M.onTouchStart).setTouchMoveEventHandler(M.onTouchMove).setTouchEndEventHandler(M.onTouchEnd),this.vg.Ge(u.getWidth({x:g.xAxisStrokeStyle,y:g.yAxisStrokeStyle})),this.Sg.Ge(u.getWidth({x:g.xAxisNibStyle,y:g.yAxisNibStyle})),this.bg.Ge(u.getWidth({x:g.xAxisNibStyle,y:g.yAxisNibStyle})),this._h.De(u.getWidth({x:g.xAxisTitleFillStyle,y:g.yAxisTitleFillStyle})).Zh(u.getWidth({x:g.xAxisTitleFont,y:g.yAxisTitleFont})),this.es=o.hs(this,{}),this.Kh=this.es.Cg([this._h]).bs(g.effectsText),this.kg=null!==(p=u.getWidth({x:g.xAxisMarginAfterTicks,y:g.yAxisMarginAfterTicks}))&&void 0!==p?p:7,this.Tg=null!==(v=u.getWidth({x:g.xAxisMarginAfterTitle,y:g.yAxisMarginAfterTitle}))&&void 0!==v?v:7}Er(){return this.Ah}zr(){return void 0!==this.sr}setTickStrategy(t,i){return super.Nh(t,i)}getTickStrategy(){return this.eh}addBand(t=!0){const i=t?this.ng:this.rg,s=new hh(i,this.chart,this.aA,this,this.gg,this.Eh,this.qi,this.ss);return this.hA.push(s),s}addConstantLine(t=!0){const i=t?this.ng:this.rg,s=new rh(i,this.chart,this.aA,this,this.gg,this.Eh,this.qi,this.ss);return this.hA.push(s),s}Fg(t){this.hA.forEach(t)}Ig(t){return this.hA.map(t)}getHighlighters(){return this.hA}setThickness(t){return"number"==typeof t?(this.Pg=t,this.Dg=t):"object"==typeof t&&(this.Pg=t.min,this.Dg=t.max),this.chart.us.xs(),this}getThickness(){return{min:this.Pg,max:this.Dg}}setMouseInteractions(t){return this.setAxisInteractionPanByDragging(t).setAxisInteractionReleaseByDoubleClicking(t).setAxisInteractionZoomByDragging(t).setAxisInteractionZoomByWheeling(t).setNibInteractionScaleByDragging(t).setNibInteractionScaleByWheeling(t)}Bg(){return this.Ef}vr(t,i){return new Oo(i,t,this.FA,this.gg,this.gg)}qh(){if(this.Df){for(const t of this.Df)t[1].grid.dispose(),t[1].tick.dispose();this.Df.clear()}super.qh()}Sr(t,i){const{tickStart:s}=i,e=t.Ph.pr,h=s+e.getTickLength()*this.cg+e.getTickPadding()*this.cg;t.th.Re(this.Eh.toPoint(t.S,h)).Ha(this.Eh.toPoint(e.getLabelAlignment(),-this.cg)).Qh(e.labelRotation).setVisible(this.getVisible())}Lg(t,i){const{startPosition:s,gridStrokeLen:e,gridStrokeStart:h,tickStart:r}=i,n=t.Ph.pr,o=s-e*n.getGridStrokeLength(),a=r+n.getTickLength()*this.cg;return{gridStroke:{start:this.Eh.toPoint(t.S,h),end:this.Eh.toPoint(t.S,o)},tickStroke:{start:this.Eh.toPoint(t.S,r),end:this.Eh.toPoint(t.S,a)}}}Br(t,i){return"linear"===this.Vh.type?ae(t,i,this.ft):le(t,i,this.ft)}Rg(t,i){return i instanceof Zs?ae:le}Rr(t,i,s){if("logarithmic"!==this.Vh.type){const e=this.ft.Bi(i-t);return{min:t-s*e,max:i+s*e}}const e=this.ft;return{min:e.gi(t,-s),max:e.gi(i,s)}}Es(){if(!this.ji)return{Eg:0,zg:0,Hd:0};const t=!(this.hh.size>0),i=this._h&&this._h.wr().length>0&&this.getTitleFillStyle()!==O,s=this.Eh.getHeight(i?this.chart.us.Og.Vg(this._h.wr(),this.getTitleFont(),this.getTitleRotation()):{x:0,y:0})+(i?this.Tg:0),e=ph(this.sh)?new Map:_h(this.sh,Math.min(this.Gh,this.Wh),Math.max(this.Gh,this.Wh),this.Gh,this.Wh,0),h=this.ft;let r=0;e.forEach(((i,s)=>{if((t=>void 0!==t.pr&&void 0!==t.gr)(s)){const e=Math.max(...i.map((i=>{if(!ls(i,this.Gh,this.Wh))return 0;const e=this.chart.us.Og.Vg(s.gr(i,h),s.pr.labelFont,s.pr.labelRotation);return t||!e.isEstimate?this.Eh.getHeight(e):0})))+s.pr.tickLength+s.pr.tickPadding;r=Math.max(r,e)}}));const n=this.Rf.reduce(this.cA,0);r=Math.max(r,n),r+=this.kg;const o=$t(s+r,void 0!==this.Pg?this.Pg:0,void 0!==this.Dg?this.Dg:Ki);return this.Lf=o,{Eg:r,zg:s,Hd:o}}Le(t){const i=this.getVisible()&&t.Ng>0;this.Gg=t;const s=this.vg.mu(),e=this.ft.getInnerStart()<this.ft.getInnerEnd()?this.ft.getInnerStart():this.ft.getInnerEnd(),h=this.ft.getInnerEnd()>this.ft.getInnerStart()?this.ft.getInnerEnd():this.ft.getInnerStart(),r=s.getThickness()*this.cg/2,n=this.Ag.getInnerInterval(),o=this.ug/100*n,a=o+t.Wg,l=n*this.cg,u=a+r;if(i||this.qh(),!ph(this.sh)&&i){const t=this.ft.hi();this.nr({physicalAxisSize:t,startPosition:o,gridStrokeLen:l,gridStrokeStart:a,tickStart:u});for(const[i,s]of this.hh){let e=this.Df.get(i);if(!e)if(i.He)e={grid:this.hg[0].Ug(this.gg).setMouseInteractions(!1),tick:this.hg[0].Ug(this.gg).setMouseInteractions(!1)};else if("Yg"in i){const t=Array.from(this.hh.keys()).filter((t=>"Yg"in t)).reverse().indexOf(i),s=this.hg[t];if(!s)throw new Error("Not enough tick layers. This is an internal LCJS error - if you see this, please contact Arction support.");e={grid:s.Ug(this.gg).setMouseInteractions(!1),tick:s.Ug(this.gg).setMouseInteractions(!1)}}if(e){e.grid.Vt(),e.tick.Vt();for(const[i,h]of s){const i=this.Lg(h,{physicalAxisSize:t,startPosition:o,gridStrokeLen:l,gridStrokeStart:a,tickStart:u});e.grid.$r().Hg(i.gridStroke.start,i.gridStroke.end),e.tick.$r().Hg(i.tickStroke.start,i.tickStroke.end)}e.grid.Ge(i.pr.getGridStrokeStyle()),e.tick.Ge(i.pr.getTickStyle()),this.Df.set(i,e)}}}const c=u,d=c+this.cg*t.$g,f=this.Xf||this.jf?Math.min(this.Gf,.25*t.Ng):0,A={start:this.Eh.toVec2(this.ft.gi(this.ft.getInnerStart(),f),c),end:this.Eh.toVec2(this.ft.gi(this.ft.getInnerEnd(),-f),d)},g=At(this.Eh.toVec2(this.ft.getInnerStart(),d),this.gg,this.yg),y=At(A.start,this.gg,this.yg),m=At(A.end,this.gg,this.yg),p=At(this.Eh.toVec2(this.ft.getInnerEnd(),c),this.gg,this.yg);this.vg.Ye(this.Eh.toPoint(e,a)).Ue(this.Eh.toPoint(h,a)).setVisible(i),this.Sg.Ye(this.Eh.toPoint(this.ft.gi(this.ft.getInnerStart(),this.Vf),a)).Ue(this.Eh.toPoint(this.ft.getInnerStart(),a)).setVisible(i),this.bg.Ye(this.Eh.toPoint(this.ft.gi(this.ft.getInnerEnd(),-this.Vf),a)).Ue(this.Eh.toPoint(this.ft.getInnerEnd(),a)).setVisible(i);const v=a+t.Eg*this.cg;if(this._h.Re(this.Eh.toPoint(this.Eh.getWidth(At("center"===this.oA?_s(ws(g,p),.5):"start"===this.oA?g:p,this.yg,this.gg)),v)).Ha(this.Eh.toPoint("center"===this.oA?0:"start"===this.oA?-1:1,-1*this.cg)).setVisible(i).setMouseInteractions(void 0!==["mouseEnterTitle","mouseMoveTitle","mouseLeaveTitle","mouseDownTitle","mouseUpTitle","mouseClickTitle","mouseDoubleClickTitle","mouseDragStartTitle","mouseDragTitle","mouseDragStopTitle","mouseWheelTitle","touchStartTitle","touchMoveTitle","touchEndTitle"].find((t=>this.L.listeners(t).size>0))),this.Bf){const i=this.ug/100*n+t.Wg,s=-this.cg*n-t.Wg,e={start:this.Eh.toVec2(this.Bf.min,u+this.cg*this.Lf),end:this.Eh.toVec2(this.Bf.max,i+s)},h=At(e.start,this.gg,this.yg),r=At(e.end,this.gg,this.yg);this.Mg.Re(h).tt(Cs(r,h)).setVisible(!0)}else this.Mg.setVisible(!1);this.xg.Re(y).tt(Cs(m,y)).setVisible(i),this._g.Re(g).tt(Cs(y,g)).setVisible(i),this.wg.Re(m).tt(Cs(p,m)).setVisible(i);for(const s of this.Rf)s.update().plot(i,a,l,t.Wg,u);for(const t of this.hA)t.Le()}setLength(t){return this.Yd=t,this.chart.us.xs(),this}getLength(){return this.Yd}setMargins(t,i){return this.lA=t,this.uA=i,this.chart.us.xs(),this}getMargins(){return{start:this.lA,end:this.uA}}getStackIndex(){var t,i;return null!==(i=null===(t=[...this.chart.Xg,...this.chart.jg,...this.chart.Zg,...this.chart.Qg].find((t=>t.axis===this)))||void 0===t?void 0:t.iStack)&&void 0!==i?i:0}getParallelIndex(){var t,i;return null!==(i=null===(t=[...this.chart.Xg,...this.chart.jg,...this.chart.Zg,...this.chart.Qg].find((t=>t.axis===this)))||void 0===t?void 0:t.iParallel)&&void 0!==i?i:0}Jg(){const t=this.Gg;if(!t)return;const i=this.getVisible()&&t.Ng>0,s=this.vg.mu().getThickness()*this.cg/2,e=this.Ag.getInnerInterval(),h=this.ug/100*e+t.Wg,r=e*this.cg,n=h+s;for(const s of this.Rf)s.update().plot(i,h,r,t.Wg,n);for(const t of this.hA)t.Le()}Kg(){return this.Lf}qg(t,i){i=i||Eo.AxisTickMajor;const s=new Qr(this,t?this.hg[0]:this.ag,this.ag,this.ft,this.pg,this.pg,this.Eh,this.dg,this.dA,this.qi,i).setTextFormatter(this.formatValue);return this.Rf.push(s),s}gA(t){this.chart.us.ls.Cs(t,1),this.Of=t.us.Jr(this.qf,this.Of)}mA(t){this.chart.us.ls.Cs(t,0),t.us.Kr(this.Of)}SA(t){this.setStopped(!0),t.us.Kr(this.Of)}MA(t,i){const s=-this.Eh.getWidth(i);this.pan(s),this.Of=t.us.Jr(this.tA,this.Of)}pan(t){const i=this.Gh,s=this.Wh,e=this.ft.gi(i,t),h=this.ft.gi(s,t);this.er(e,h,!1)}zoom(t,i){const s=this.ft.dt(this.Gh),e=this.ft.dt(this.Wh),h=this.ft.dt(t),r=$t((h-s)/(e-s),0,1),n=.2*this.ft.hi(),o=r*this.Wf*n*-i,a=(1-r)*this.Wf*n*i,l=this.ft.gi(this.Gh,o),u=this.ft.gi(this.Wh,a);this.er(l,u,!0)}CA(t){this.Bf=void 0,t.us.Kr(this.Of)}bA(t,i){this.setStopped(!0),t.us.Kr(this.Of),this.chart.us.ls.Cs(this.xg,0)}_A(t,i,s,e){const h=At(this.FA.us.ze(s.x,s.y),this.FA.us.ft,this.gg),r=$t(this.Eh.getWidth(h),this.Gh,this.Wh),n=this.Eh.getWidth(At(this.FA.us.ze(i.x,i.y),this.FA.us.ft,this.gg));Math.abs(this.ft.dt(r)-this.ft.dt(n))>10?(this.Bf=c(Math.min(r,n),Math.max(r,n)),this.Of=t.us.Jr(this.iA,this.Of)):(this.Bf=void 0,this.Of=t.us.Jr(this.qf,this.Of)),this.FA.xs()}kA(t,i,s){if(this.Bf){const t=this.Bf.min,i=this.Bf.max,s=this.Wh<this.Gh;this.At(s?i:t,s?t:i,!0,!0,"interactionSetInterval")}this.Bf=void 0,t.us.Kr(this.Of)}GA(t){this.chart.us.ls.Cs(t,1),this.Nf=t.us.Jr(this.sA,this.Nf)}UA(t){this.chart.us.ls.Cs(t,0),t.us.Kr(this.Nf)}HA(t,i){this.setStopped(!0),this.Nf=t.us.Jr(this.eA,this.Nf)}XA(t,i,s,e){const h=this.Eh.getWidth(e);this.er(this.ft.gi(this.Gh,h),this.Wh,!0)}ZA(t,i,s,e){const h=this.Eh.getWidth(e);this.er(this.Gh,this.ft.gi(this.Wh,h),!0)}JA(t,i,s){t.us.Kr(this.Nf),t.getIsUnderMouse()&&(this.Nf=t.us.Jr(this.sA)),this.FA.xs()}addCustomTick(t){return this.qg(!0,t)}setTitlePosition(t){return this.oA=t,this.chart.us.xs(),this}getTitlePosition(){return this.oA}getUiPosition(){return this.ug}setStrokeStyle(t){return this.vg.Ge(t),this.FA.xs(),this}getStrokeStyle(){return this.vg.mu()}getOverlayStyle(){return this.xg.$h()}setOverlayStyle(t){return this.xg.De(t),this.FA.xs(),this}setAxisInteractionZoomByDragging(t){return this.Uf=t,this}getAxisInteractionZoomByDragging(){return this.Uf}setAxisInteractionPanByDragging(t){return this.Yf=t,this}getAxisInteractionPanByDragging(){return this.Yf}setAxisInteractionZoomByWheeling(t){return this.Hf=t,this}getAxisInteractionZoomByWheeling(){return this.Hf}setAxisInteractionReleaseByDoubleClicking(t){return this.$f=t,this}getAxisInteractionReleaseByDoubleClicking(){return this.$f}setAxisMouseHoverStyle(t=this.Eh.defaultDragMouseStyle){return this.qf=t,this}getAxisMouseHoverStyle(){return this.qf}setAxisMousePanStyle(t=this.Eh.defaultDragMouseStyle){return this.tA=t,this}getAxisMousePanStyle(){return this.tA}setAxisMouseZoomStyle(t=this.Eh.defaultDragMouseStyle){return this.iA=t,this}getAxisMouseZoomStyle(){return this.iA}setAnimationHighlight(t){return this.chart.us.ls.ks(this.xg,t),this.chart.us.ls.ks(this._g,t),this.chart.us.ls.ks(this.wg,t),this}getAnimationHighlight(){return this.chart.us.ls.Ts(this.xg)}getMarginAfterTicks(){return this.kg}setMarginAfterTicks(t){return this.kg=t,this.FA.xs(),this}getMarginAfterTitle(){return this.Tg}setMarginAfterTitle(t){return this.Tg=t,this.FA.xs(),this}getNibLength(){return this.Vf}setNibLength(t){return this.Vf=t,this.FA.xs(),this}getNibStyle(){return this.Sg.mu()}setNibStyle(t){return this.Sg.Ge(t),this.bg.Ge(t),this.FA.xs(),this}getNibOverlayStyle(){return this._g.$h()}setNibOverlayStyle(t){return this._g.De(t),this.wg.De(t),this.FA.xs(),this}setNibMousePickingAreaSize(t){return this.Gf=t,this.FA.xs(),this}getNibMousePickingAreaSize(){return this.Gf}setNibInteractionScaleByDragging(t){return this.Xf=t,this}getNibInteractionScaleByDragging(){return this.Xf}setNibInteractionScaleByWheeling(t){return this.jf=t,this}getNibInteractionScaleByWheeling(){return this.jf}setNibMouseHoverStyle(t=this.Eh.defaultDragMouseStyle){return this.sA=t,this}getNibMouseHoverStyle(){return this.sA}setNibMouseScaleStyle(t=this.Eh.defaultDragMouseStyle){return this.eA=t,this}getNibMouseScaleStyle(){return this.eA}setChartInteractions(t){return this.setChartInteractionFitByDrag(t),this.setChartInteractionPanByDrag(t),this.setChartInteractionZoomByDrag(t),this.setChartInteractionZoomByWheel(t),this}setChartInteractionPanByDrag(t){return this.Zf=t,this}getChartInteractionPanByDrag(){return this.Zf}setChartInteractionZoomByWheel(t){return this.Qf=t,this}getChartInteractionZoomByWheel(){return this.Qf}setChartInteractionZoomByDrag(t){return this.Jf=t,this}getChartInteractionZoomByDrag(){return this.Jf}setChartInteractionFitByDrag(t){return this.Kf=t,this}getChartInteractionFitByDrag(){return this.Kf}Z(){return this.ft.Z(),this}J(){return this.ft.J(),this}dispose(){this.Sg.dispose(),this.bg.dispose(),this.vg.dispose(),this.xg.dispose(),this.Mg.dispose(),this._g.dispose(),this.wg.dispose(),this._h.dispose(),this.rr(Ut);for(const t of this.Df.values())t.grid.dispose(),t.tick.dispose();return this.Ef.slice().forEach(Ut),this.hA.slice().forEach(Ut),this.og(this),this.L.emit("dispose",this),this}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setVisible(t){this.Sg.setVisible(t),this.bg.setVisible(t),this.vg.setVisible(t),this._h.setVisible(t),this.xg.setVisible(t),this._g.setVisible(t),this.wg.setVisible(t),this.rr((i=>{i.ps(t)}));for(const i of this.Df.values())i.grid.setVisible(t),i.tick.setVisible(t);return super.setVisible(t),this.chart.us.xs(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationHighlight(this.uh),this}}var Go;!function(t){t.Start="start",t.Center="center",t.End="end"}(Go||(Go={}));const Wo={getWidth:t=>t.x,getHeight:t=>t.y,toVec2:(t,i)=>({x:t,y:i}),toPoint:(t,i)=>n(t,i)},Uo={getWidth:t=>t.y,getHeight:t=>t.x,toVec2:(t,i)=>({x:i,y:t}),toPoint:(t,i)=>n(i,t)},Yo=t=>!!(t&&"object"==typeof t&&"x"in t&&t.x instanceof No&&"y"in t&&t.y instanceof No),Ho=i({type:"tick-style",gridStrokeLength:1,gridStrokeStyle:new ve,tickLength:7,tickStyle:new ve,tickPadding:0,labelFont:new Fh,labelFillStyle:new U,labelAlignment:0,labelRotation:0});class $o extends Ho{constructor(t){super(t)}setGridStrokeLength(t){return this.set("gridStrokeLength",t)}getGridStrokeLength(){return this.get("gridStrokeLength")}setGridStrokeStyle(t){return this.set("gridStrokeStyle","function"==typeof t?t(this.get("gridStrokeStyle")):t)}getGridStrokeStyle(){return this.get("gridStrokeStyle")}setTickLength(t){return this.set("tickLength",t)}getTickLength(){return this.get("tickLength")}setTickStyle(t){return this.set("tickStyle","function"==typeof t?t(this.get("tickStyle")):t)}getTickStyle(){return this.get("tickStyle")}setTickPadding(t){return this.set("tickPadding",t)}getTickPadding(){return this.get("tickPadding")}setLabelFillStyle(t){return this.set("labelFillStyle","function"==typeof t?t(this.get("labelFillStyle")):t)}getLabelFillStyle(){return this.get("labelFillStyle")}setLabelFont(t){return this.set("labelFont","function"==typeof t?t(this.get("labelFont")):t)}getLabelFont(){return this.get("labelFont")}setLabelAlignment(t){return this.set("labelAlignment",t)}getLabelAlignment(){return this.get("labelAlignment")}setLabelRotation(t){return this.set("labelRotation",t)}getLabelRotation(){return this.get("labelRotation")}}const Xo=t=>!(!t||"object"!=typeof t||!("type"in t)||"tick-style"!==t.type),jo=new $o({labelFillStyle:O,gridStrokeStyle:at,tickStyle:at}),Zo=t=>Xo(t)&&N(t.labelFillStyle)&&lt(t.gridStrokeStyle)&&lt(t.tickStyle),Qo=i({type:"time-ticks",cursorFormatter:void 0,timeOrigin:void 0,majorTickStyle:new $o,minorTickStyle:new $o,majorFormattingFunction:void 0,minorFormattingFunction:void 0}),Jo=(t,i)=>{const s=i-t;return s>=864e5?"MajorHours12":s>=36e5?"MajorHours":s>=6e5?"MajorMinutes15":s>=9e4?"MajorMinutes":s>=10500?"MajorSeconds15":s>=1e3?"MajorSeconds":s>=100?"MajorMilliseconds100":s>=10?"MajorMilliseconds10":s>=1?"MajorMilliseconds":s>=.1?"MajorMicroseconds100":s>=.01?"MajorMicroseconds10":s>=.001?"MajorMicroseconds":s<=.001?"MajorNanoseconds100":"Unknown"},Ko={hhmmss:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/36e5);i%=36e5;const h=Math.floor(i/6e4);i%=6e4;const r=Math.floor(i/1e3);return`${s}${Fi(e,2)}:${Fi(h,2)}:${Fi(r,2)}`},hhmmssmmm:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/36e5);i%=36e5;const h=Math.floor(i/6e4);i%=6e4;const r=Math.floor(i/1e3);i%=1e3;const n=Math.floor(i/1);return`${s}${Fi(e,2)}:${Fi(h,2)}:${Fi(r,2)}.${Fi(n,3)}`},hhmmssmmmuuu:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/36e5),h=Math.floor(i/6e4)%60,r=Math.floor(i/1e3)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}).split(".")[1];return`${s}${Fi(e,2)}:${Fi(h,2)}:${Fi(r,2)}.${Fi(n,3)}${o}`},hhmmssmmmuuunnn:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/36e5),h=Math.floor(i/6e4)%60,r=Math.floor(i/1e3)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:6,maximumFractionDigits:6}).split(".")[1];return`${s}${Fi(e,2)}:${Fi(h,2)}:${Fi(r,2)}.${Fi(n,3)}${o}`}},qo={MajorHours12:{major:{format:Ko.hhmmss,getKeyValues:(t,i,s,e)=>{const h=432e5;return t=Math.floor(t/(4*h))*h*4,dh(t,i,h,void 0,1e6)},fitKeyValues:Ah({ignore:"first"},2,4)},minor:{format:Ko.hhmmss,getKeyValues:(t,i,s,e)=>ch(t,i,36e5,1e6),fitKeyValues:Ah({},2,3,4,6)},defaultValueFormatter:Ko.hhmmss},MajorHours:{major:{format:Ko.hhmmss,getKeyValues:(t,i,s,e)=>{const h=36e5;return t=Math.floor(t/(12*h))*h*12,dh(t,i,h,void 0,1e6)},fitKeyValues:Ah({ignore:"first"},2,6,12)},minor:{format:Ko.hhmmss,getKeyValues:(t,i,s,e)=>ch(t,i,3e5,1e6),fitKeyValues:Ah({},2,4,6)},defaultValueFormatter:Ko.hhmmss},MajorMinutes15:{major:{format:Ko.hhmmss,getKeyValues:(t,i,s,e)=>(t=36e5*Math.floor(t/36e5),dh(t,i,9e5,void 0,1e6)),fitKeyValues:Ah({ignore:"first"},2)},minor:{format:Ko.hhmmss,getKeyValues:(t,i,s,e)=>ch(t,i,6e4,1e6),fitKeyValues:Ah({},3,5)},defaultValueFormatter:Ko.hhmmss},MajorMinutes:{major:{format:Ko.hhmmss,getKeyValues:(t,i,s,e)=>{const h=6e4;return t=Math.floor(t/6e5)*h*10,dh(t,i,h,void 0,1e6)},fitKeyValues:Ah({ignore:"first"},2,5)},minor:{format:Ko.hhmmss,getKeyValues:(t,i,s,e)=>ch(t,i,5e3,1e6),fitKeyValues:Ah({},2,3,4,6)},defaultValueFormatter:Ko.hhmmss},MajorSeconds15:{major:{format:Ko.hhmmss,getKeyValues:(t,i,s,e)=>{const h=15e3;return t=Math.floor(t/6e4)*h*4,dh(t,i,h,void 0,1e6)},fitKeyValues:Ah({ignore:"first"},2,4)},minor:{format:Ko.hhmmss,getKeyValues:(t,i,s,e)=>ch(t,i,1e3,1e6),fitKeyValues:Ah({},3,5)},defaultValueFormatter:Ko.hhmmss},MajorSeconds:{major:{format:Ko.hhmmssmmm,getKeyValues:(t,i,s,e)=>{const h=1e3;return t=Math.floor(t/1e4)*h*10,dh(t,i,h,void 0,1e6)},fitKeyValues:Ah({ignore:"first"},2,5)},minor:{format:Ko.hhmmssmmm,getKeyValues:(t,i,s,e)=>ch(t,i,100,1e6),fitKeyValues:Ah({},2,3,5)},defaultValueFormatter:Ko.hhmmssmmm},MajorMilliseconds100:{major:{format:Ko.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=100*Math.floor(t/1e3)*10,dh(t,i,100,void 0,1e6)),fitKeyValues:Ah({ignore:"first"},2,5)},minor:{format:Ko.hhmmssmmm,getKeyValues:(t,i,s,e)=>ch(t,i,10,1e6),fitKeyValues:Ah({},2,3,5)},defaultValueFormatter:Ko.hhmmssmmm},MajorMilliseconds10:{major:{format:Ko.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=10*Math.floor(t/100)*10,dh(t,i,10,void 0,1e6)),fitKeyValues:Ah({ignore:"first"},2,5)},minor:{format:Ko.hhmmssmmm,getKeyValues:(t,i,s,e)=>ch(t,i,1,1e6),fitKeyValues:Ah({},2,3,5)},defaultValueFormatter:Ko.hhmmssmmm},MajorMilliseconds:{major:{format:Ko.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=1*Math.floor(t/10)*10,dh(t,i,1,void 0,1e6)),fitKeyValues:Ah({ignore:"first"},2,5)},minor:{format:Ko.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>ch(t,i,.1,1e6),fitKeyValues:Ah({},2)},defaultValueFormatter:Ko.hhmmssmmmuuu},MajorMicroseconds100:{major:{format:Ko.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=.1*Math.floor(t/1)*10,dh(t,i,.1,void 0,1e6)),fitKeyValues:Ah({ignore:"first"},2,5)},minor:{format:Ko.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>ch(t,i,.01,1e6),fitKeyValues:Ah({},2,3,5)},defaultValueFormatter:Ko.hhmmssmmmuuu},MajorMicroseconds10:{major:{format:Ko.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>{const h=.01;return t=Math.floor(t/.1)*h*10,dh(t,i,h,void 0,1e6)},fitKeyValues:Ah({ignore:"first"},2,5)},minor:{format:Ko.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>ch(t,i,.001,1e6),fitKeyValues:Ah({},2,3,5)},defaultValueFormatter:Ko.hhmmssmmmuuu},MajorMicroseconds:{major:{format:Ko.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=.001;return t=Math.floor(t/.01)*h*10,dh(t,i,h,void 0,1e6)},fitKeyValues:Ah({ignore:"first"},2,5)},minor:{format:Ko.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>ch(t,i,100*1e-6,1e6),fitKeyValues:Ah({},2,3,5)},defaultValueFormatter:Ko.hhmmssmmmuuunnn},MajorNanoseconds100:{major:{format:Ko.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=100*1e-6;return t=Math.floor(t/.001)*h*10,dh(t,i,h,void 0,1e6)},fitKeyValues:Ah({ignore:"first"},2,5)},minor:{format:Ko.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>ch(t,i,10*1e-6,1e6),fitKeyValues:Ah({},2,3,5)},defaultValueFormatter:Ko.hhmmssmmmuuunnn},Unknown:{major:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},minor:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},defaultValueFormatter:(t,i,s)=>""}};class ta extends Qo{Xe(t){const i=this.timeOrigin||0,s=[{th:"Major ticks",Yg:0,pr:this.majorTickStyle,gr:this.majorFormattingFunction?this.majorFormattingFunction:(t,s,e)=>{const h=Jo(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return(0,qo[h].major.format)(t+i,s,e)},Wr:(t,i,s,e)=>{const h=Jo(s,e);return(0,qo[h].major.getKeyValues)(t,i,s,e)},Dh:{br:(t,i,s,e,h,r)=>{const n=Jo(h,r),o=qo[n].major.fitKeyValues;if(o)return o(t,i,s,e,h,r)}},Ur:void 0}];return Xo(this.minorTickStyle)&&s.push({th:"Minor ticks",Yg:1,pr:this.minorTickStyle,gr:this.minorFormattingFunction?this.minorFormattingFunction:(t,s,e)=>{const h=Jo(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return(0,qo[h].minor.format)(t+i,s,e)},Wr:(t,i,s,e)=>{const h=Jo(s,e);return(0,qo[h].minor.getKeyValues)(t,i,s,e)},Dh:{br:(t,i,s,e,h,r)=>{const n=Jo(h,r),o=qo[n].minor.fitKeyValues;if(o)return o(t,i,s,e,h,r)}},Ur:void 0}),{je:[],Ze:s,Qe:this.cursorFormatter||((t,s,e)=>{const h=Jo(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return qo[h].defaultValueFormatter(t+i,s,e)}),Je:1e-4,Ke:864e6}}setTickStyle(t){return this.setMajorTickStyle(t).setMinorTickStyle(t)}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTimeOrigin(t){return this.set("timeOrigin",t)}getTimeOrigin(){return this.get("timeOrigin")}setFormattingFunction(t){return this.withMutations((i=>i.set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const ia=t=>!(!t||"object"!=typeof t||!("type"in t)||"time-ticks"!==t.type),sa=(t,i,s,e,h)=>(r,n)=>o=>{const a=new Date(o+r),l={year:n?a.getUTCFullYear():a.getFullYear(),monthIndex:n?a.getUTCMonth():a.getMonth(),day:n?a.getUTCDate():a.getDate(),hours:n?a.getUTCHours():a.getHours(),minutes:n?a.getUTCMinutes():a.getMinutes(),seconds:n?a.getUTCSeconds():a.getSeconds(),millis:n?a.getUTCMilliseconds():a.getMilliseconds()},u=e?e(l):void 0;if(0===t&&!0===u)return o;const c=l[i];h.includes("year")&&(l.year=Math.floor(l.year/s)*s),h.includes("monthIndex")&&(l.monthIndex=0),h.includes("day")&&(l.day=1),h.includes("hours")&&(l.hours=0),h.includes("minutes")&&(l.minutes=0),h.includes("seconds")&&(l.seconds=0),h.includes("millis")&&(l.millis=0);let d=(0===t?1:t)*s;return-1===t&&!1===u&&(d=0),0!==d&&(l[i]=s*(d>0?Math.floor((c+d)/s):Math.ceil((c+d)/s))),n?Date.UTC(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis)-r:new Date(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis).getTime()-r},ea=(t,i,s,...e)=>sa(-1,t,i,s,e),ha=(t,i,s,...e)=>sa(-1,t,i,s,e),ra=(t,i,s,...e)=>sa(0,t,i,s,e),na=(t,i,...s)=>sa(1,t,i,void 0,s),oa=t=>(i,s)=>e=>{const h=new Date(e+i),r=s?h.getUTCDay():h.getDay(),n=1===r&&0===(s?h.getUTCHours():h.getHours())&&0===(s?h.getUTCMinutes():h.getMinutes())&&0===h.getSeconds()&&0===h.getMilliseconds();if(0===t&&!0===n)return e;let o=s?h.getUTCDate():h.getDate();return-1===t&&1===r&&!1===n||(-1===t?o-=r>=2?r-1:r+6:o+=r>0?8-r:1),s?Date.UTC(h.getUTCFullYear(),h.getUTCMonth(),o,0,0,0,0)-i:new Date(h.getFullYear(),h.getMonth(),o,0,0,0,0).getTime()-i},aa=[{label:"MilliSecond1",unit:1,irregular:!1,greatTicks:void 0,majorTicks:{fitFunction:Ah({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Ah(void 0,2)}},{label:"MilliSecond10",unit:10,irregular:!1,greatTicks:{getReferenceKeyValue:ea("millis",10,(t=>t.millis%10==0),"millis")},majorTicks:{fitFunction:Ah({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Ah(void 0,2)}},{label:"MilliSecond100",unit:100,irregular:!1,greatTicks:{getReferenceKeyValue:ea("millis",100,(t=>t.millis%100==0),"millis")},majorTicks:{fitFunction:Ah({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Ah(void 0,2)}},{label:"Second",unit:1e3,irregular:!1,greatTicks:{getReferenceKeyValue:ea("seconds",1,(t=>0===t.millis),"millis")},majorTicks:{fitFunction:gh(5,10,15,30)},minorTicks:{amount:4,fitFunction:Ah(void 0,2)}},{label:"Minute",unit:6e4,irregular:!1,greatTicks:{getReferenceKeyValue:ea("minutes",1,(t=>0===t.seconds&&0===t.millis),"seconds","millis")},majorTicks:{fitFunction:gh(5,10,15,30)},minorTicks:{amount:12,fitFunction:Ah(void 0,3,6)}},{label:"Hour",unit:36e5,irregular:!1,greatTicks:{getReferenceKeyValue:ea("hours",1,(t=>0===t.minutes&&0===t.seconds&&0===t.millis),"minutes","seconds","millis")},majorTicks:{fitFunction:gh(3,6,12)},minorTicks:{amount:8,fitFunction:Ah(void 0,2,4)}},{label:"Day",unit:864e5,irregular:!1,greatTicks:{getReferenceKeyValue:ea("day",1,(t=>0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"hours","minutes","seconds","millis")},majorTicks:{fitFunction:Ah({ignore:"last"},2,4)},minorTicks:{amount:7,fitFunction:Ah({ignore:"last"},2,3)}},{label:"Week",unit:6048e5,irregular:!0,getPrevKeyValue:oa(-1),getNextKeyValueIncludingRef:oa(0),getNextKeyValue:oa(1),greatTicks:!0,majorTicks:{fitFunction:Ah(void 0,2)},minorTicks:{fitFunction:void 0}},{label:"Month",unit:2592e6,irregular:!0,getPrevKeyValue:ha("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ra("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValue:na("monthIndex",1,"day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Ah(void 0,2,3)},minorTicks:{fitFunction:Ah(void 0,2,4,6)}},{label:"Year",unit:31536e6,irregular:!0,getPrevKeyValue:ha("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ra("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:na("year",1,"monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Ah({ignore:"first"},2,5)},minorTicks:{fitFunction:Ah(void 0,2,5)}},{label:"Decade",unit:31536e7,irregular:!0,getPrevKeyValue:ha("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ra("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:na("year",10,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Ah(void 0,2,4)},minorTicks:{fitFunction:Ah(void 0,2,5)}},{label:"Century",unit:316224e7,irregular:!0,getPrevKeyValue:ha("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ra("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:na("year",100,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0},{label:"Millennium",unit:316224e8,irregular:!0,getPrevKeyValue:ha("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ra("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:na("year",1e3,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0}],la=(t,i,s,e,h)=>{const r=i-t;let n;for(let t=h?0:aa.length-1;h?t<aa.length:t>=0;h?t+=1:t-=1){const i=r/aa[t].unit;if((void 0===s||i>=s)&&(void 0===e||i<=e)){n=aa[t];break}}return n},ua=(t,i,s)=>{let e=la(i,s,void 0,1,!0);if(void 0!==e&&0===aa.indexOf(e)&&(e=aa[1]),void 0===e)return;if("great"===t)return e;const h="major"===t?1:2,r=aa[aa.indexOf(e)-h];return void 0===r?aa[0]:r},ca=(t,i,s)=>(e,h,r,n)=>{const o=ua("great",e,h);if(void 0===o)return[];if("Decade"===o.label||"Century"===o.label||"Millennium"===o.label)return[];const a=n>r?e:h,l=(e+h)/2,u=n>r?h:e;if(aa.indexOf(o)<=aa.findIndex((t=>"Hour"===t.label)))return"left"===s?[a]:[];let c;if(!0===o.irregular)c=fh(e,h,o.getPrevKeyValue(t,i),o.getNextKeyValue(t,i));else{const s=o.greatTicks.getReferenceKeyValue(t,i)(e);c=dh(e,h,o.unit,s,1)}const d=((t,i,s)=>{for(const e of s)if(e>=t&&e<=i)return e})(e,h,c);return"left"===s?void 0===d||ls(d,l,u)?[a]:[d]:void 0!==d&&ls(d,l,u)?[d]:[u]},da=(t,i,s)=>(e,h,r,n)=>{const o=ua(t,r,n);let a;if(void 0===o)return[];if("great"===t&&void 0!==o.greatTicks)if(!0===o.irregular)a=fh(e,h,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s));else{const t=o.greatTicks.getReferenceKeyValue(i,s)(e);a=dh(e,h,o.unit,t,1)}else if("major"===t&&void 0!==o.majorTicks)a=!0===o.irregular?((t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h})(e,h,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s)):((t,i,s)=>{const e=[];let h=t,r=0;for(;h<i;)if(e.push(h),h+=s,r+=1,r>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return e.push(h),e})(e,h,o.unit);else{if("minor"!==t||void 0===o.minorTicks)return[];if(!0===o.irregular)a=((t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h})(e,h,o.getNextKeyValueIncludingRef(i,s),o.getNextKeyValue(i,s));else{const t=(t=>{if(void 0!==t)return aa[aa.indexOf(t)+1]})(o);if(void 0===t)return[];a=ch(e,h,t.unit/o.minorTicks.amount,1)}}return a},fa=t=>(i,s,e,h,r,n)=>{const o=ua(t,r,n);if(void 0===o)return;let a;return"major"===t?a=o.majorTicks.fitFunction:o.minorTicks&&(a=o.minorTicks.fitFunction),a?a(i,s,e,h,r,n):void 0},Aa=i({type:"date-time-ticks",utc:!1,locale:void 0,dateOrigin:void 0,cursorFormatter:void 0,greatTickStyle:new $o,majorTickStyle:new $o,minorTickStyle:new $o,formatOptionsMajorCentury:{year:"numeric",hour12:!1},formatOptionsMinorDecade:{year:"numeric",hour12:!1},formatOptionsMajorDecade:{year:"numeric",hour12:!1},formatOptionsMinorYear:{year:"numeric",hour12:!1},formatOptionsMajorYear:{year:"numeric",hour12:!1},formatOptionsMinorMonth:{month:"short",hour12:!1},formatOptionsGreatYear:{year:"numeric",hour12:!1},formatOptionsMajorMonth:{month:"long",hour12:!1},formatOptionsMinorWeek:{day:"numeric",hour12:!1},formatOptionsGreatMonth:{year:"numeric",month:"long",hour12:!1},formatOptionsMajorWeek:{day:"numeric",weekday:"short",hour12:!1},formatOptionsMinorDay:{day:"numeric",weekday:"short",hour12:!1},formatOptionsGreatWeek:(t,i,s)=>{const e=new Date(t),h=(t=>{const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));i.setUTCDate(i.getUTCDate()+4-(i.getUTCDay()||7));const s=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i.getTime()-s.getTime())/864e5+1)/7)})(e);return`${new Intl.DateTimeFormat(s,{year:"numeric",month:"long",hour12:!1}).format(e)} Week ${h}`},formatOptionsMajorDay:{weekday:"long",day:"numeric",hour12:!1},formatOptionsMinorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatDay:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatHour:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsGreatMinute:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsMinorMillisecond:t=>{const i=new Date(t);return i.setHours(0,0,0,0),Ko.hhmmssmmm(t-i.getTime())},formatMillisecondRange:t=>{const i=new Date(t);return i.setHours(0,0,0,0),Ko.hhmmssmmm(t-i.getTime())},formatOptionsGreatSecond:{},formatOptionsMajorMilliSecond:{}});class ga extends Aa{Xe(t){const i=void 0!==this.dateOrigin?this.dateOrigin.getTime():0,s=t=>aa.map((i=>{const s=((t,i,s)=>{switch(s.label){case"MilliSecond1":case"MilliSecond10":case"MilliSecond100":return"Great"===i?t.formatOptionsGreatMinute:t.formatMillisecondRange;case"Second":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorSecond:t.formatOptionsMinorSecond;case"Minute":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorMinute:t.formatOptionsMinorMinute;default:case"Hour":return"Great"===i?t.formatOptionsGreatHour:"Major"===i?t.formatOptionsMajorHour:t.formatOptionsMinorHour;case"Day":return"Great"===i?t.formatOptionsGreatDay:"Major"===i?t.formatOptionsMajorDay:t.formatOptionsMinorDay;case"Week":return"Great"===i?t.formatOptionsGreatWeek:"Major"===i?t.formatOptionsMajorWeek:t.formatOptionsMinorWeek;case"Month":return"Great"===i?t.formatOptionsGreatMonth:"Major"===i?t.formatOptionsMajorMonth:t.formatOptionsMinorMonth;case"Year":return"Great"===i?t.formatOptionsGreatYear:"Major"===i?t.formatOptionsMajorYear:t.formatOptionsMinorYear;case"Decade":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorDecade:t.formatOptionsMinorDecade;case"Century":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorCentury:void 0;case"Millennium":return}})(this,t,i);if("object"!=typeof s)return s;try{return new Intl.DateTimeFormat(this.locale,s)}catch(t){let i="";for(const t in s)i+=` ${t}: ${s[t]},`;Ot.console.error(`Invalid Intl.DateTimeFormat ( locale: ${this.locale}, formatOptions {${i}} )`)}})),e=new Map;e.set("great",s("Great")),e.set("major",s("Major")),e.set("minor",s("Minor"));const h=t=>String(t),r=(t,s)=>(r,n)=>{let o=r+i;const a=n.getInnerStart(),l=n.getInnerEnd(),u=a>l,c=ua(t,u?l:a,u?a:l);if(void 0===c)return h(o);if("great"===t){const t=Ht(r,"left"===s?a:l);let e;if(e=!1===t?r:!1===c.irregular?"left"===s&&!1===u||"right"===s&&!0===u?c.greatTicks.getReferenceKeyValue(i,this.utc)(r):c.greatTicks.getReferenceKeyValue(i,this.utc)(r+1*c.unit):"left"===s&&!1===u||"right"===s&&!0===u?c.getPrevKeyValue(i,this.utc)(r):c.getNextKeyValue(i,this.utc)(r),o=e+i,"right"===s&&!0===t)return""}const d=e.get(t);if(void 0===d)return h(o);const f=d[aa.indexOf(c)];return void 0===f?"":"function"==typeof f?f(o,n,this.locale):f.format(o)},n=[],o=[{th:"Great ticks (directive)",Yg:0,$e:!0,Wr:da("great",i,this.utc),Ur:void 0},{th:"Major ticks",Yg:1,pr:this.majorTickStyle,gr:r("major"),Wr:da("major",i,this.utc),Dh:{br:fa("major")},Ur:void 0}];Zo(this.greatTickStyle)||(n.push({th:"Great ticks (left)",pr:this.greatTickStyle.setLabelAlignment(-1),gr:r("great","left"),Wr:ca(i,this.utc,"left"),He:!0,Cr:!1}),n.push({th:"Great ticks (right)",pr:this.greatTickStyle.setLabelAlignment(1),gr:r("great","right"),Wr:ca(i,this.utc,"right"),He:!0,Cr:!1})),Zo(this.minorTickStyle)||o.push({th:"Minor ticks",Yg:2,pr:this.minorTickStyle,gr:r("minor"),Wr:da("minor",i,this.utc),Dh:{br:fa("minor"),Bh:(t,i,s,e,h,r)=>{const n=ua("minor",h,r);return!n||"Week"!==n.label}},Ur:void 0});const a=this.cursorFormatter;return{je:n,Ze:o,Qe:a?(t,s,e)=>a(i+t,s,e):(t,s,e)=>{const h=la(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()),void 0,1,!0),r=h&&h.unit<=6e4,n=new Date(i+t),o=new Date(i+t);o.setHours(0,0,0,0);const a=r?Ko.hhmmssmmm:Ko.hhmmss;return`${new Intl.DateTimeFormat(e,{year:"numeric",month:"numeric",day:"numeric"}).format(n)} ${a(n.getTime()-o.getTime())}`},Je:1,Ke:31536e9}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTickStyle(t){return this.setGreatTickStyle(t).setMajorTickStyle(t).setMinorTickStyle(t)}setGreatTickStyle(t){if("function"==typeof t){const i=this.get("greatTickStyle");return this.set("greatTickStyle",t(i))}return this.set("greatTickStyle",t)}getGreatTickStyle(){return this.get("greatTickStyle")}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setUTC(t){return this.set("utc",t)}getUTC(){return this.get("utc")}setLocale(t){return this.set("locale",t)}getLocale(){return this.get("locale")}setDateOrigin(t){return this.set("dateOrigin",t)}getDateOrigin(){return this.get("dateOrigin")}setFormatting(t,i,s){return this.withMutations((e=>e.set("formatOptionsGreatYear",t||this.formatOptionsGreatYear).set("formatOptionsGreatMonth",t||this.formatOptionsGreatMonth).set("formatOptionsGreatWeek",t||this.formatOptionsGreatWeek).set("formatOptionsGreatDay",t||this.formatOptionsGreatDay).set("formatOptionsGreatHour",t||this.formatOptionsGreatHour).set("formatOptionsGreatMinute",t||this.formatOptionsGreatMinute).set("formatOptionsMajorCentury",i||this.formatOptionsMajorCentury).set("formatOptionsMajorDecade",i||this.formatOptionsMajorDecade).set("formatOptionsMajorYear",i||this.formatOptionsMajorYear).set("formatOptionsMajorMonth",i||this.formatOptionsMajorMonth).set("formatOptionsMajorWeek",i||this.formatOptionsMajorWeek).set("formatOptionsMajorDay",i||this.formatOptionsMajorDay).set("formatOptionsMajorHour",i||this.formatOptionsMajorHour).set("formatOptionsMajorMinute",i||this.formatOptionsMajorMinute).set("formatOptionsMajorSecond",i||this.formatOptionsMajorSecond).set("formatOptionsMinorDecade",s||this.formatOptionsMinorDecade).set("formatOptionsMinorYear",s||this.formatOptionsMinorYear).set("formatOptionsMinorMonth",s||this.formatOptionsMinorMonth).set("formatOptionsMinorWeek",s||this.formatOptionsMinorWeek).set("formatOptionsMinorDay",s||this.formatOptionsMinorDay).set("formatOptionsMinorHour",s||this.formatOptionsMinorHour).set("formatOptionsMinorMinute",s||this.formatOptionsMinorMinute).set("formatOptionsMinorSecond",s||this.formatOptionsMinorSecond)))}setFormattingDecade(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorDecade",t)),i&&(s=s.set("formatOptionsMinorYear",i)),s)))}setFormattingYear(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorYear",t)),i&&(s=s.set("formatOptionsMinorMonth",i)),s)))}setFormattingMonth(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatYear",t)),i&&(e=e.set("formatOptionsMajorMonth",i)),s&&(e=e.set("formatOptionsMinorWeek",s)),e)))}setFormattingWeek(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMonth",t)),i&&(e=e.set("formatOptionsMajorWeek",i)),s&&(e=e.set("formatOptionsMinorDay",s)),e)))}setFormattingDay(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatWeek",t)),i&&(e=e.set("formatOptionsMajorDay",i)),s&&(e=e.set("formatOptionsMinorHour",s)),e)))}setFormattingHour(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatDay",t)),i&&(e=e.set("formatOptionsMajorHour",i)),s&&(e=e.set("formatOptionsMinorMinute",s)),e)))}setFormattingMinute(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatHour",t)),i&&(e=e.set("formatOptionsMajorMinute",i)),s&&(e=e.set("formatOptionsMinorSecond",s)),e)))}setFormattingSecond(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMinute",t)),i&&(e=e.set("formatOptionsMajorSecond",i)),s&&(e=e.set("formatOptionsMinorMillisecond",s)),e)))}setFormattingMilliSecond(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatSecond",t)),i&&(s=s.set("formatOptionsMajorMilliSecond",i)),s)))}}const ya=t=>!(!t||"object"!=typeof t||!("type"in t)||"date-time-ticks"!==t.type),ma=(t,i)=>(s,e)=>{const h=e-s;if(i){const i=Math.log10(h/2);let r=10**Math.floor(i-t);const n=1/r;r=Math.round(r*n)/n;const o=Math.round(Math.floor(s/(10*r))*r*10*n)/n;return dh(o,e,r,void 0,n)}const r=Math.log10(h);let n=10**Math.round(r-t);const o=1/n;return n=Math.round(n*o)/o,ch(s,e,n,o)},pa=(t,i,s,e,h,r)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%5==0)):void 0,va=(t,i,s,e,h,r)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%3==0)):2===i?t.filter(((t,i)=>i%4==0)):3===i?t.filter(((t,i)=>i%5==0)):void 0,Sa=Ah(void 0,2,5),ba=(t,i,s,e,h,r)=>0===i?[t[1],t[3],t[5]]:1===i?[t[0],t[3]]:2===i?[t[1]]:void 0,xa=(t,i)=>{const s=Gs(t),e=Ws(t);if(i)return(t,i)=>{const h=[],r=Math.floor(s(t)),n=Math.ceil(s(i));for(let t=r-1;t<=n+1;t+=1){const i=e**t;h.push(i)}return h};const h=10===t?9:4;return(t,i)=>{const r=Math.round(s(t)),n=Math.round(s(i)),o=[],a=e**r,l=(e**n-a)/h;for(let s=1;s<=h;s+=1){const e=a+l*s;e>t&&e<i&&o.push(e)}return o}},Ma=i({type:"numeric-ticks",cursorFormatter:void 0,extremeTickStyle:new $o,majorTickStyle:new $o,minorTickStyle:new $o,formattingOffset:void 0,extremeFormattingFunction:void 0,majorFormattingFunction:void 0,minorFormattingFunction:void 0});class _a extends Ma{Xe(t){const i=this.formattingOffset,s=this.get("extremeFormattingFunction")||("logarithmic"===t.type?(i,s)=>Xs.LogarithmicNoExponents(i,s,void 0,t.base):Xs.Numeric),e=this.get("majorFormattingFunction")||("logarithmic"===t.type?(i,s)=>Xs.LogarithmicNoExponents(i,s,void 0,t.base):Xs.Numeric),h=this.get("minorFormattingFunction")||("logarithmic"===t.type?(i,s)=>Xs.LogarithmicNoExponents(i,s,void 0,t.base):Xs.Numeric),r=[],n=[];Zo(this.extremeTickStyle)||r.push({th:"Extreme ticks",pr:this.extremeTickStyle,gr:void 0===i?s:(t,e,h)=>s(i+t,e,h),Wr:uh,He:!0,Cr:!0}),n.push({th:"Major ticks",Yg:0,pr:this.majorTickStyle,gr:void 0===i?e:(t,s,h)=>e(i+t,s,h),Wr:"logarithmic"===t.type?xa(t.base,!0):ma(0,!0),Dh:"logarithmic"===t.type?{br:va}:{br:pa},Ur:void 0}),Zo(this.minorTickStyle)||n.push({th:"Minor ticks",Yg:1,pr:this.minorTickStyle,gr:void 0===i?h:(t,s,e)=>h(i+t,s,e),Wr:"logarithmic"===t.type?xa(t.base,!1):ma(1,!1),Dh:"logarithmic"===t.type?{br:ba}:{br:Sa},Ur:50});const o=this.cursorFormatter?this.cursorFormatter:Xs.Numeric;return{je:r,Ze:n,Qe:void 0===i?o:(t,s,e)=>o(i+t,s,e),Je:1e-9,Ke:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setExtremeTickStyle(t){if("function"==typeof t){const i=this.get("extremeTickStyle");return this.set("extremeTickStyle",t(i))}return this.set("extremeTickStyle",t)}getExtremeTickStyle(){return this.get("extremeTickStyle")}setFormattingOffset(t){return this.set("formattingOffset",t)}getFormattingOffset(){return this.get("formattingOffset")}setTickStyle(t){const i=this.setMajorTickStyle(t).setMinorTickStyle(t);return i.extremeTickStyle!==jo?i.setExtremeTickStyle(t):i}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setFormattingFunction(t){return this.withMutations((i=>i.set("extremeFormattingFunction",t).set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getExtremeFormattingFunction(){return this.get("extremeFormattingFunction")}setExtremeFormattingFunction(t){return this.set("extremeFormattingFunction",t)}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const wa=t=>!(!t||"object"!=typeof t||!("type"in t)||"numeric-ticks"!==t.type),Ca=(t,i,s="image/png",e)=>{i+=`.${s.slice(s.indexOf("image/")+6)}`;const h=t.captureFrame(s,e);if("image/png"!==s&&h.type.includes("image/png"))throw new Error(`saveToFile | type not supported by browser: ${s}\nCheck support table for HTMLCanvasElement.toDataURL`);if(Ot.navigator.msSaveBlob)Ot.navigator.msSaveBlob(h,i);else{const t=Ot.document.createElement("a");Ot.document.body.appendChild(t);const s=Ot.URL.createObjectURL(h);t.href=s,t.download=i,t.click(),setTimeout((()=>{Ot.URL.revokeObjectURL(s),Ot.document.body.removeChild(t)}),0)}},ka=(t,i,s,e,h,r)=>{const n=t.ic(i,s,e,h,r,!0);return n.setDraggingMode(zt.draggable),n},Ta=(t,i)=>{if("relative"===t)return i;if(t instanceof Js)return t;const s=t.x instanceof xh?t.x.ft:t.x.x,e=t.y instanceof xh?t.y.ft:t.y.y;return te(s,e)},Fa=(t,i,s,e,h)=>{if(s){const r=t,n=i,o=Yo(n)?n:ee(n)?e:void 0;if(o&&ie(s)){const t=At(r,o,h.ft);return h.No({engineX:t.x,engineY:t.y})}if(o&&ee(s))return At(r,o,e);if(o&&Yo(s))return At(r,o,s)}else{const s=t;if(ee(i)){const t=h.Oo(s);return At({x:t.engineX,y:t.engineY},h.ft,e)}if(Yo(i)){const t=i,e=h.Oo(s);return At({x:e.engineX,y:e.engineY},h.ft,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")};class Ia{constructor(t,i,e,h,r,o,a,l){this.coordsRelative="relative",this.coordsClient="client",this.ty=[],this.iy=[],this.L=new s,this.sy=void 0,this.ey=void 0,this.hy=void 0,this.$t=A(0,0,0,0),this.ny=!1,this.Xi=!1,this.oy=()=>{this.ly=!0,this.uy.xs()},this.Ay=t=>i=>{const s=this.ty.indexOf(i);-1!==s&&this.ty.splice(s,1),this.us.xs(),t.U()},this.gy=t=>{const i=this.iy.indexOf(t);-1!==i&&this.iy.splice(i,1),this.us.xs()},this.ly=!0,this.onInViewChange=t=>this.L.on("inViewChange",t),this.offInViewChange=t=>this.L.off(t,"inViewChange"),this.vA=t,this.yy=e,this.uy=h,this.removePanel=r,this.qi=i.us.qi;const u=i.us.ni();if(this.uiScale=e.d2({scaleXYConstructor:Ks}).zi(0,100).Vi(0,100).tt(u),this.mg=e.d2({scaleXYConstructor:Ks}).zi(0,this.uiScale.x.getCellSize()).Vi(0,this.uiScale.y.getCellSize()).tt(u),this.engine=i.us.my,this.us=i.us.py,this.es=this.us.es.hs(this,{}),this.vy=()=>i.Sy("unidentified ui"),this.by=i.xy(),this.My=this.uy.Be(this.uiScale).Re(n(0,0)).tt(n(100,100)).De(o).Pe(a).setMouseMoveEventHandler(((t,i)=>this.L.emit("mouseMovePanelBackground",this,i))).setMouseEnterEventHandler(((t,i)=>this.L.emit("mouseEnterPanelBackground",this,i))).setMouseLeaveEventHandler(((t,i)=>this.L.emit("mouseLeavePanelBackground",this,i))).setMouseDownEventHandler(((t,i)=>this.L.emit("mouseDownPanelBackground",this,i))).setMouseUpEventHandler(((t,i)=>this.L.emit("mouseUpPanelBackground",this,i))).setMouseClickEventHandler(((t,i)=>this.L.emit("mouseClickPanelBackground",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.L.emit("mouseDoubleClickPanelBackground",this,i))).setMouseWheelEventHandler(((t,i)=>this.L.emit("mouseWheelPanelBackground",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.L.emit("mouseDragStartPanelBackground",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.L.emit("mouseDragPanelBackground",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.L.emit("mouseDragStopPanelBackground",this,i,s,e))).setTouchStartEventHandler(((t,i)=>this.L.emit("touchStartPanelBackground",this,i))).setTouchMoveEventHandler(((t,i)=>this.L.emit("touchMovePanelBackground",this,i))).setTouchEndEventHandler(((t,i)=>this.L.emit("touchEndPanelBackground",this,i))),l){const t=l.on(this.oy);this._y=()=>l.off(t)}else{const t=i.us.Bo(this.oy);this.wy=i.us.Lo.bind(i.us,t)}const c=i.us.Eo((t=>{this.ny=t,this.L.emit("inViewChange",this,t)}));this.Cy=i.us.zo.bind(i.us,c),this.sy=r}getTheme(){return this.qi}getSizePixels(){return this.mg.getInnerIntervalPixels()}setBackgroundFillStyle(t){return this.My.De(t),this.uy.xs(),this}getBackgroundFillStyle(){return this.My.$h()}setBackgroundStrokeStyle(t){return this.My.Pe(t),this.uy.xs(),this}getBackgroundStrokeStyle(){return this.My.mo()}translateCoordinate(t,i,s){return Fa(t,i,s,this.mg,this.us)}ky(t){return this.ty.push(t),this.us.xs(),t}Ty(t){return this.iy.push(t),this.us.xs(),t}addUIElement(t=yo,i=this.uiScale){i=Ta(i,this.mg);const s=this.vy();return this.ky(ka(t,s,this.uiScale,i,this.Ay(s),this.qi))}addLegendBox(t=To,i=this.uiScale){i=Ta(i,this.mg);const s=this.Ty(ka(t,this.by,this.uiScale,i,this.gy,this.qi));return s.setDraggingMode(zt.notDraggable),void 0!==i&&i!==this.uiScale||(void 0===t||"vertical"===t.getAlignment()?s.setOrigin(je.RightCenter).setPosition({x:100,y:50}):s.setOrigin(je.CenterBottom).setPosition(this.uiScale.gi({x:50,y:0},{x:0,y:3}))),s}getLegendBoxes(){return this.iy}dispose(){return this.Xi||(this.Xi=!0,this.wy&&this.wy(),this._y&&this._y(),Pa(this.uiScale),Pa(this.mg),this.Cy&&this.Cy(),this.ey&&this.ey(),this.uy.U(),this.by.U(),this.ty.slice().forEach((t=>{t.dispose()})),this.iy.slice().forEach((t=>{t.dispose()})),this.us.xs(),this.sy&&this.sy(this),this.L.emit("dispose",this)),this}isDisposed(){return this.Xi}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}saveToFile(t,i,s){return Ca(this.engine,t,i,s),this}Vr(t){this.$t=t,this.oy()}Z(){return this.mg.Z(),this.uiScale.Z(),this}J(){return this.mg.J(),this.uiScale.J(),this}Le(t){if(this.ly){const t=this.uy.us.ni(),i=t.x,s=t.y;this.uiScale.tt(i,s),this.mg.tt(i,s);const e=[this.$t.left,this.$t.right],h=[this.$t.bottom,this.$t.top];this.uiScale.Ri(e),this.uiScale.Ei(h);const r=this.uiScale.getInnerIntervalPixels();this.mg.zi(0,r.x).Ri(e).Vi(0,r.y).Ei(h),this.L.emit("resize",this,r.x,r.y,i,s)}this.ly=!1}Fy(){for(let t=0;t<this.ty.length;t+=1)this.ty[t].Es().Le();for(let t=0;t<this.iy.length;t+=1)this.iy[t].Es().Le();this.hy&&this.hy()}Iy(t,i){if(t){const s=t(i);this.onResize(s.Es.bind(s)),this.ey=s.U.bind(s),this.hy=s.Es.bind(s)}}onBackgroundMouseEnter(t){return this.L.on("mouseEnterPanelBackground",t)}offBackgroundMouseEnter(t){return this.L.off(t,"mouseEnterPanelBackground")}onBackgroundMouseMove(t){return this.L.on("mouseMovePanelBackground",t)}offBackgroundMouseMove(t){return this.L.off(t,"mouseMovePanelBackground")}onBackgroundMouseLeave(t){return this.L.on("mouseLeavePanelBackground",t)}offBackgroundMouseLeave(t){return this.L.off(t,"mouseLeavePanelBackground")}onBackgroundMouseDown(t){return this.L.on("mouseDownPanelBackground",t)}offBackgroundMouseDown(t){return this.L.off(t,"mouseDownPanelBackground")}onBackgroundMouseUp(t){return this.L.on("mouseUpPanelBackground",t)}offBackgroundMouseUp(t){return this.L.off(t,"mouseUpPanelBackground")}onBackgroundMouseClick(t){return this.L.on("mouseClickPanelBackground",t)}offBackgroundMouseClick(t){return this.L.off(t,"mouseClickPanelBackground")}onBackgroundMouseDoubleClick(t){return this.L.on("mouseDoubleClickPanelBackground",t)}offBackgroundMouseDoubleClick(t){return this.L.off(t,"mouseDoubleClickPanelBackground")}onBackgroundMouseDragStart(t){return this.L.on("mouseDragStartPanelBackground",t)}offBackgroundMouseDragStart(t){return this.L.off(t,"mouseDragStartPanelBackground")}onBackgroundMouseDrag(t){return this.L.on("mouseDragPanelBackground",t)}offBackgroundMouseDrag(t){return this.L.off(t,"mouseDragPanelBackground")}onBackgroundMouseDragStop(t){return this.L.on("mouseDragStopPanelBackground",t)}offBackgroundMouseDragStop(t){return this.L.off(t,"mouseDragStopPanelBackground")}onBackgroundMouseWheel(t){return this.L.on("mouseWheelPanelBackground",t)}offBackgroundMouseWheel(t){return this.L.off(t,"mouseWheelPanelBackground")}onBackgroundTouchStart(t){return this.L.on("touchStartPanelBackground",t)}offBackgroundMouseTouchStart(t){return this.L.off(t,"touchStartPanelBackground")}onBackgroundTouchMove(t){return this.L.on("touchMovePanelBackground",t)}offBackgroundTouchMove(t){return this.L.off(t,"touchMovePanelBackground")}onBackgroundTouchEnd(t){return this.L.on("touchEndPanelBackground",t)}offBackgroundTouchEnd(t){return this.L.off(t,"touchEndPanelBackground")}onResize(t){return this.L.on("resize",t)}offResize(t){return this.L.off(t,"resize")}getIsInView(){return this.ny}}const Pa=t=>{t.ti&&t.ti()};class Da extends Ia{constructor(t,i,s,e,h,r){super(t,i,s,i.Py("uipanel bg",0),e,i.us.qi.uiPanelBackgroundFillStyle,i.us.qi.uiPanelBackgroundStrokeStyle,r),this.Iy(h,this.mg)}setMinimumSize(t){return this.Fd=t,this.us.xs(),this}getMinimumSize(){return this.Fd}Le(t){super.Le(t),super.Fy()}}const Ba=A(10,10,10,10);class La extends Ia{constructor(t,i,s,e,h,r,o,a,l,u){super(t,i,s,e,h,r,o,u),this.Dy={},this.Ca=Ba,this.uh=!0,this.By=i.Ly("chart internal ui",0),this.bh=this.By.Nr(this.uiScale).yr("Chart").Re(n(50,100)).Ha(n(0,1)).Zh(a).De(l).setMouseInteractions(!1),this.Ry=this.es.Cg([this.bh]).bs(this.qi.effectsText)}setAnimationsEnabled(t){return this.uh=t,this}getAnimationsEnabled(){return this.uh}setTitle(t){return this.bh.yr(t),this.us.xs(),this}getTitle(){return this.bh.wr()}getTitleSize(){return this.bh.Es().sd()}setTitleFillStyle(t){return this.bh.De(t),this.oy(),this}getTitleFillStyle(){return this.bh.$h()}setTitleFont(t){return this.bh.Zh(t),this.oy(),this}getTitleFont(){return this.bh.jh()}setTitleRotation(t){return this.bh.Qh(t),this.us.xs(),this}getTitleRotation(){return this.bh.Jh()}setTitleEffect(t){return this.Ry.bs(t),this.us.xs(),this}getTitleEffect(){return this.Ry.Ms()}setTitleMargin(t){var i,s;return this.Dy="object"==typeof t?this.Dy?(i=this.Dy,{left:void 0!==(s=t).left?s.left:i.left,top:void 0!==s.top?s.top:i.top,right:void 0!==s.right?s.right:i.right,bottom:void 0!==s.bottom?s.bottom:i.bottom}):t:{left:t,top:t,right:t,bottom:t},this.oy(),this}getTitleMargin(){return this.Dy}setPadding(t){return this.Ca="object"==typeof t?y(this.Ca,t):{left:t,top:t,right:t,bottom:t},this.oy(),this}getPadding(){return this.Ca}Ey(t){const i=t.zy(),s=null==i?void 0:i.height,e=null==i?void 0:i.width;if(void 0!==s&&void 0!==e)return{x:s/2,y:e/2}}dispose(){return super.dispose(),this.By.U(),this}}const Ra={Vy:(t,i)=>t.$h()!==O&&0!==t.wr().length&&t.getVisible()?t.Es().sd().y:0,Oy(t,i){t.Re(n(50,100)).Vr({top:void 0!==i.top?i.top:10,right:i.right||0,left:i.left||0,bottom:i.bottom||0})}},Ea=t=>"show-all-interpolated"===t||"show-nearest-interpolated"===t||"show-pointed-interpolated"===t,za=(t,i)=>{const s="series"in t?t.series:void 0;if(!s||!("getCursorFormattingOverride"in s))return i;const e=s.getCursorFormattingOverride();return e?e(t,i):i},Va=(t,i,e,h,r,n,o)=>{let a,l,u=r,c=n,d=null,f=!0;const A=new s;if(h){f=!1;const i=()=>{f=!0,t.getCursorMode()&&(l&&g?y.Le(...g):t.us.xs())},s=()=>{t.getCursorMode()&&(l&&g?y.Le(...g):t.us.xs())},e=()=>{f=!1,t.getCursorMode()&&(l&&g?y.Le(...g):t.us.xs())},r=()=>{f=!0,t.getCursorMode()&&(l&&g?y.Le(...g):t.us.xs())},n=()=>{t.getCursorMode()&&(l&&g?y.Le(...g):t.us.xs())},o=()=>{f=!1,t.getCursorMode()&&(l&&g?y.Le(...g):t.us.xs())};h.onSeriesBackgroundMouseEnter(i),h.onSeriesBackgroundMouseMove(s),h.onSeriesBackgroundMouseLeave(e),h.onSeriesBackgroundTouchStart(r),h.onSeriesBackgroundTouchMove(n),h.onSeriesBackgroundTouchEnd(o),h.Ny(((i,s)=>{s.onMouseEnter(((i,e,h)=>{s.getCursorEnabled()?(a=h||void 0,t.getCursorMode()&&(l&&g?y.Le(...g):t.us.xs())):l||t.us.xs()})),s.onMouseMove(((i,e,h)=>{s.getCursorEnabled()?(a=h||void 0,t.getCursorMode()&&(l&&g?y.Le(...g):t.us.xs())):l||t.us.xs()})),s.onMouseLeave((()=>{s.getCursorEnabled()?(a=void 0,t.getCursorMode()&&(l&&g?y.Le(...g):t.us.xs())):l||t.us.xs()}))}))}let g;const y={setCursor:i=>(i(e),t),getCursor:()=>e,setCursorMode:i=>(u=i,t.us.xs(),t),getCursorMode:()=>u,setCustomCursor:t=>{l=t},onCursorTargetChanged:t=>A.on("cursorTargetChanged",t),offCursorTargetChanged:t=>{A.off(t)},setCursorFormatting:i=>(c=i,t.us.xs(),t),getCursorFormatting:()=>c,U:()=>{e.dispose(),i.U()},Le:(i,s,h,r)=>{g=[i,s,h,r];const n=t.us.$n();let y=[];if((null==r?void 0:r.explicitTarget)&&u)y=[r.explicitTarget];else if(!i&&u){const t=s.find((t=>t.getIsUnderMouse())),i=n&&t&&t.getCursorEnabled&&t.getCursorEnabled()&&t.vs?t.vs(n):void 0;if(a=i||a,a&&"show-all"!==u&&"show-all-interpolated"!==u)y=[a];else if("show-all"===u||"show-all-interpolated"===u||"show-nearest"===u||"show-nearest-interpolated"===u){if((f||void 0!==t)&&n&&h){for(const t of s){if(t.getCursorEnabled&&!t.getCursorEnabled()||!t.getVisible())continue;const i=h(t,n,u);i&&y.push(i)}"show-nearest"!==u&&"show-nearest-interpolated"!==u||(y.sort(((t,i)=>o(t,n)-o(i,n))),y.length=1)}}else if(("show-pointed"===u||"show-pointed-interpolated"===u)&&n&&t&&t.getCursorEnabled&&t.getCursorEnabled()&&h){const i=h(t,n,u);i&&(y=[i])}}y=Ei(y.map((t=>Zi(t))));const m=(null==r?void 0:r.overrideCursorPositions)||((t,i)=>i),p=y[0],v=y.length>0?y:void 0;if(p!==d&&n&&(l&&l(p,v,n),A.emit("cursorTargetChanged",p,v,n),d=p),l)e.getVisible()&&(e.setVisible(!1),e.Es().Le());else{if(y&&y.length>0){const i=c(t,y[0],y);e.setVisible(!0).setPosition(...m(y,y.map((t=>t.cursorPosition)))).setResultTable((t=>t.setContent(i)))}else e.setVisible(!1);(null==r?void 0:r.afterCursorPointedAt)&&r.afterCursorPointedAt(y),e.Es().Le()}},solveNearest:(i,s,e,h)=>{const r=i||t.us.$n();if(!r)return[];let n=[];if("show-all"===s||"show-all-interpolated"===s||"show-nearest"===s||"show-nearest-interpolated"===s){for(const t of e){if(!t.getCursorEnabled()||!t.getVisible())continue;const i=h(t,r,s);i&&n.push(i)}"show-nearest"!==s&&"show-nearest-interpolated"!==s||(n.sort(((t,i)=>o(t,r)-o(i,r))),n.length=1)}return n=Ei(n.map((t=>Zi(t)))),n},Gy:e};return y};class Oa{constructor(t,i){this.Wy=t,this.Uy=i}alter(t){this.Yy=void 0!==this.Yy?this.Yy:this.Uy(),this.Hy=t,this.Wy(t)}resetValue(){void 0!==this.Hy&&(void 0!==this.Yy&&this.isAltered()&&this.Wy(this.Yy),this.Yy=void 0,this.Hy=void 0)}getNormalValue(){return void 0!==this.Yy?this.Yy:this.Uy()}isAltered(){return void 0!==this.Hy&&this.Uy()===this.Hy}}class Na{constructor(t,i){this.$y=[],this.Xy=t,this.ft=i}update(){return this.Xy.getVisible()?!(this.jy()&&(!this.Zy()||(this.resetTable(),this.Xy.Es(),this.jy()))&&(this.Qy(),this.Xy.Es(),this.jy()&&(this.resetTable(),this.Xy.Es(),1))):(this.Zy()&&this.resetTable(),!0)}Zy(){for(let t=0;t<this.$y.length;t+=1)if(this.$y[t].isAltered())return!0;return!1}resetTable(){for(let t=0;t<this.$y.length;t+=1)this.$y[t].resetValue();return this}jy(){return((t,i)=>{const s=At(t.getPosition(n(-1,-1),Rt.PaddedBackground),t.scale,i),e=At(t.getPosition(n(1,1),Rt.PaddedBackground),t.scale,i);return s.x<i.x.getInnerStart()||e.x>i.x.getInnerEnd()||s.y<i.y.getInnerStart()||e.y>i.y.getInnerEnd()})(this.Xy,this.ft)}Jy(){return((t,i)=>{const s=At(t.getPosition(n(-1,-1),Rt.PaddedBackground),t.scale,i),e=At(t.getPosition(n(1,1),Rt.PaddedBackground),t.scale,i);return s.x<i.x.getInnerStart()||e.x>i.x.getInnerEnd()})(this.Xy,this.ft)}Ky(){return((t,i)=>{const s=At(t.getPosition(n(-1,-1),Rt.PaddedBackground),t.scale,i),e=At(t.getPosition(n(1,1),Rt.PaddedBackground),t.scale,i);return s.y<i.y.getInnerStart()||e.y>i.y.getInnerEnd()})(this.Xy,this.ft)}qy(t){return this.$y.push(t),t}}class Ga extends Na{constructor(){super(...arguments),this.wa=this.qy(new Oa((t=>this.Xy.setOrigin(t)),(()=>this.Xy.getOrigin())))}Qy(){const t=this.wa.getNormalValue(),i=n(this.Jy()?-t.x:t.x,this.Ky()?-t.y:t.y);this.wa.alter(i)}}class Wa extends Na{constructor(t,i,s,e){super(t,i),this.tm=this.qy(new Oa((t=>this.Xy.setTextFont((i=>i.setSize(t)))),(()=>this.Xy.getTextFont().getSize()))),this.im=s,this.sm=e}Qy(){const t=this.tm.getNormalValue(),i=this.im;if(i<t)for(let s=1;s<=this.sm;s+=1){const e=t-(t-i)*(s/this.sm);if(this.tm.alter(e),this.Xy.Es(),!this.jy())return}}}const Ua={Flip:(t,i)=>new Ga(t,i),FontSize:(t=5,i=5)=>(s,e)=>new Wa(s,e,t,i)},Ya={None:nn,Rectangle:Xn,Circle:jn,Diamond:Zn,Pointer:Qn};class Ha extends ro{constructor(){super(...arguments),this.$u=this.qi.cursorResultTableTextFont,this.Od=0,this.hm=this.qi.cursorResultTableTextFillStyle}setContent(t){let i;void 0===t?i=[]:Array.isArray(t)?(i=[],t.forEach((t=>{i.push(Array.isArray(t)?t:[t])}))):i=[[t]];for(let t=0;t<i.length;t+=1){const s=i[t];let e=!1;for(let t=0;t<s.length;t+=1){const i=s[t],h="object"==typeof i&&"text"in i?i.text:"string"==typeof i?i:void 0,r="object"==typeof i&&"icon"in i?i.icon:Ln(i)?i:void 0,n=i instanceof ce&&i;if(!(h&&h.length>0||r||n)){e=!0;break}}e||(s.unshift(""),s.push(""))}const s=i.length;let e=this.getMembers().length;for(let t=0;t<Math.max(s,e);t+=1){const r=this.getRow(t,!0);if(t>=s)this.getMembers()[t].dispose(),t-=1,e-=1;else{const s=i[t].length;let e=r.getMembers().length;for(let n=0;n<Math.max(s,e);n+=1){const o=i[t][n],a="object"==typeof o&&"font"in o?o.font:void 0,l="object"==typeof o&&"fillStyle"in o?o.fillStyle:void 0,u="object"==typeof o&&"text"in o?o.text:"string"==typeof o?o:void 0,c="object"==typeof o&&"icon"in o?o.icon:Ln(o)?o:void 0,d=o instanceof ce&&o,f=r.getMembers();if(n>=s)r.getMembers()[n].dispose(),n-=1,e-=1;else if(void 0!==u&&u.length>0||c||d){const t=a?this.$u.withMutations((t=>{for(const i of Object.keys(a)){const s=a[i];void 0!==s&&t.set(i,s)}return t})):this.$u,i=l||this.hm,s=f[n];if(u){let e;s&&s instanceof Hn?e=s:(s&&s.dispose(),e=r.addElement($n,n)),e.setText(u).setFont(t).setFillStyle(i).setTextRotation(this.Od)}else if(c){let e;s&&s instanceof Jn?e=s:(s&&s.dispose(),e=r.addElement(Kn,n)),e.setFillStyle(i).setShape(c).setSize({y:t.size,x:t.size}),e.setMargin(5)}else if(d){let e;s&&"setTextFillStyleHidden"in(h=s)&&"setText"in h?e=s:(s&&s.dispose(),e=r.addElement(So.setBackground(Ya.None),n).setOn(!0));const o=d.Is();void 0!==o&&e.setButtonShape(o),e.setText(d.getName()).setTextFont(t).setTextFillStyle(i).setTextRotation(this.Od),d.styleLegendEntry(e)}}else{const t=f[n];t&&t instanceof qn||(t&&t.dispose(),r.addGap(void 0,n))}}}}var h;return this.Ds.xs(),this}setTextFillStyle(t){this.hm="function"==typeof t?t(this.hm):t;for(let t=0;t<this.getMemberCount();t+=1){const i=this.getRow(t);for(let t=0;t<i.getMembers().length;t+=1){const s=i.getMembers()[t];s instanceof Hn&&s.setFillStyle(this.hm)}}return this.Ds.xs(),this}getTextFillStyle(){return this.hm}setTextFont(t){return Ih(t)?this.$u=t:this.$u=t(this.$u),this.Ds.xs(),this}getTextFont(){return this.$u}setTextRotation(t){return this.Od=t,this.Ds.xs(),this}getTextRotation(){return this.Od}rm(){for(let t=0;t<this.Cd.length;t+=1)for(let i=0;i<this.Cd[t].getMembers().length;i+=1)this.Cd[t].getMembers()[i].dispose()}Es(){for(let t=0;t<this.Cd.length;t+=1)this.Cd[t].setMinimumSize(void 0);super.Es();for(let t=0;t<this.Cd.length;t+=1)this.Cd[t].setMinimumSize(this.size.x);return super.Es(),this}}class $a{constructor(t,i,e,h,r,n){this.nm=[],this.om=!0,this.am=!0,this.ny=!1,this.ji=!0,this.Xi=!1,this.lm=[],this.L=new s,this.Ds=t,this.renderingScale=i,this.scale=e,this.um=h,this.dm=r,this.qi=n,this.Xy=new Ha(this.Ds,this.renderingScale,this.scale,this.dm,Yt,n).setMouseInteractions(!1).setBackground((t=>t.setFillStyle(n.cursorResultTableFillStyle).setStrokeStyle(n.cursorResultTableStrokeStyle))).setTextFillStyle(n.cursorResultTableTextFillStyle).setTextFont(n.cursorResultTableTextFont),this.fm=Ua.Flip(this.Xy,this.scale)}isDisposed(){return this.Xi}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t)}setPointMarkerVisible(t){return this.om=t,this.nm.forEach((i=>i.pointMarker.setVisible(i.targetVisible&&t))),this.Ds.xs(),this}getPointMarkerVisible(){return this.om}setPointMarker(t){return this.nm.forEach((i=>t(i.pointMarker))),this.lm.push(t),this.Ds.xs(),this}setResultTableVisible(t){return this.am=t,this.Ds.xs(),this}getResultTableVisible(){return this.am}setResultTable(t){return t(this.Xy),this.Ds.xs(),this}setAutoFitStrategy(t){return this.fm&&this.fm.resetTable(),this.fm=t?t(this.Xy,this.Ds.us.ft):void 0,this.Ds.xs(),this}getAutoFitStrategy(){return void 0!==this.fm}setVisible(t){return this.ji=t,this.Ds.xs(),this}getVisible(){return this.ji}dispose(){return this.nm.forEach((t=>t.pointMarker.dispose())),this.Xy.dispose(),this.lm.length=0,this.um(this),this.L.emit("dispose"),this}Le(){return this.fm&&this.fm.update(),this.Xy.setVisible(this.ny&&this.ji&&this.am),this.nm.forEach((t=>t.pointMarker.setVisible(t.targetVisible&&this.ny&&this.ji&&this.om))),this.nm.forEach((t=>t.pointMarker.Le())),this.Xy.Le(),this}Es(){return this.nm.forEach((t=>t.pointMarker.Es())),this.Xy.Es(),this}Am(t,i){const s=i===this.scale?t:At(t,i,this.scale);this.Xy.setPosition(s)}}const Xa=t=>t.setResultTable((t=>t.setEffect(!0).setOrigin(n(-1,-1)).setMargin(5)));class ja extends $a{constructor(){super(...arguments),this.va={x:0,y:0}}setPosition(t){const i=this.renderingScale,s=Ta(t.resultTableScale,i),e=s===this.scale?t.resultTable:At(t.resultTable,s,this.scale),h=Ta(t.pointMarkerScale,i),r=h===this.scale?t.pointMarker:At(t.pointMarker,h,this.scale);this.va=r;let n=this.nm[0];if(!n){const t=new Jn(this.Ds,this.renderingScale,this.scale,Yt,this.qi).setMouseInteractions(!1).setFillStyle(this.qi.cursorPointMarkerFillStyle).setSize(this.qi.cursorPointMarkerSize).setShape(this.qi.cursorPointMarkerShape);n={pointMarker:t,targetVisible:!0},this.nm.push(n),this.lm.forEach((i=>i(t)))}return n.pointMarker.setPosition(r),this.Xy.setPosition(e),this.Ds.xs(),this}Es(){return super.Es(),this.ny=((t,i,s=i)=>{const e=i!==s?At(t,i,s):t;return e.x>=s.x.getInnerStart()&&e.x<=s.x.getInnerEnd()&&e.y>=s.y.getInnerStart()&&e.y<=s.y.getInnerEnd()})(this.va,this.scale),this}}class Za{constructor(t,i=[]){this.gm=[],this.ym=(t,i)=>(this.gm.forEach((s=>s(t,i))),t),this.addStyler=t=>new Za(this.dm,this.gm.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new Za(t,this.gm.map((t=>t))),this.pm=(t,i,s,e,h)=>this.ym(new ja(t,i,s,e,this.dm,h),h),this.dm=t,this.gm=i}}const Qa=new Za(Xn,[Xa]),Ja=new Za(Qn,[Xa,t=>t.setPointMarkerVisible(!1).setResultTable((t=>t.setOrigin(n(0,-1)).setMargin(0).setBackground((t=>{t instanceof Qn&&t.setDirection(Vt.Down).setPointerLength(10).setPointerAngle(60)}))))]),Ka=Qa,qa=Qa,tl=Qa,il=Ja,sl=new Za(Xn,[Xa,t=>t.setPointMarkerVisible(!1).setResultTable((t=>t.setOrigin(je.LeftBottom)))]);var el;!function(t){t[t.LabelsInsideSlices=0]="LabelsInsideSlices",t[t.LabelsOnSides=1]="LabelsOnSides"}(el||(el={}));const hl={SortByName:(t,i)=>t.getName().localeCompare(i.getName(),void 0,{numeric:!0}),SortByValueAscending:(t,i)=>t.getAnimatedValue()-i.getAnimatedValue(),SortByValueDescending:(t,i)=>i.getAnimatedValue()-t.getAnimatedValue(),None:()=>0},rl={Name:t=>`${t.getName()}`,NamePlusValue:t=>`${t.getName()}: ${Math.round(t.getAnimatedValue())}`,NamePlusRelativeValue:(t,i)=>`${t.getName()}: ${(100*i).toFixed(2)}%`};class nl extends ce{constructor(){super(...arguments),this.ws="Slice",this.S=0}}const ol=(t,i)=>{di(i),t.setExploded(!t.getExploded())};class al extends nl{}class ll extends al{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.vm=!1,this.Sm=O,this.bm=O,this.xm=this.S,this.Mm=this.vm?1:0,this._m=this.getVisible(),this.wm=K((()=>this.chart.us.xs())),this.Cm=K((()=>this.chart.us.xs())),this.km=()=>{this.Tm=void 0},this.Fm=()=>{this.Im=void 0},this.index=t,this.chart=e,this.scale=h,this.Ki=r,this.Pm=i.rd(h).cs(this.getHighlight()),this.fs(this.Pm),this.th=s.Nr(h).cs(this.getHighlight()),this.fs(this.th,{isText:!0}),this.onMouseClick(ol),this.onTouchEnd(ol)}setValue(t){return this.chart.getAnimationsEnabled()?this._m&&this.Dm(this.xm,t):this.xm=t,this.S=t,this.chart.us.xs(),this}getValue(){return this.S}setExploded(t){if(t&&!1===this.chart.getMultipleSliceExplosion()){const t=this.chart.getSlices();for(let i=0;i<t.length;i+=1)t[i]!==this&&t[i].getExploded()&&t[i].setExploded(!1)}return this.chart.getAnimationsEnabled()?(this.Im&&this.Im.finish(),this.Im=this.Cm(300,Q.ease)([[this.Mm,t?1:0]],(([t])=>{this.Mm=t,this.chart.us.xs()})),this.Im.onEveryAnimationEnd(this.Fm),this.vm=!this.vm):!1!==this.chart.getMultipleSliceExplosion()||t?(this.Mm=this.vm?0:1,this.vm=!this.vm):(this.Mm=0,this.vm=!this.vm),this.chart.us.xs(),this}getExploded(){return this.vm}setVisible(t){return this._m=t,!1===t?this.chart.getAnimationsEnabled()&&this.xm>0?(this.Tm&&(this.Tm.finish(!1),this.Tm=void 0),this.Dm(this.xm,0,(()=>super.setVisible(!1)))):(this.xm=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.Tm&&(this.Tm.finish(!1),this.Tm=void 0),super.setVisible(!0),this.Dm(this.xm,this.S)):(this.xm=this.S,super.setVisible(!0)),this}Dm(t,i,s){this.Tm=this.wm(300,Q.ease)([[t,i]],(([t])=>{this.xm=t,this.chart.us.xs()})),this.Tm.onEveryAnimationEnd(this.km),s&&this.Tm.onAnimationEnd(s)}setStyle(t,i,s,e){this.Sm=t,this.bm=s,this.Pm.De(this.Sm).Pe(i),this.th.De(this.bm).Zh(e);for(let t=0;t<this.Qi.length;t+=1)this.styleLegendEntry(this.Qi[t])}getAnimatedValue(){return this.xm}getAnimatedExplosion(){return this.Mm}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.Sm,stroke:this.Pm.mo()})}}const ul=(t,i,s)=>ws(i,_s(Rs(.5*(t.hu()+t.ki())*Math.PI/180),s)),cl=(t,i,s,e,h,r)=>{const n=t.length;let o=90;for(let a=0;a<n;a+=1){const l=t[a],u=o-360*i[a],c=l.getAnimatedExplosion();if(0===c||1===n)l.Pm.Re(s);else{const t=ws(s,_s(Rs(.5*(o+u)*Math.PI/180),r*c));l.Pm.Re(t)}l.Pm.uu(o).Ue(u).du(e).fu(e).Au(h),o=u}},dl=t=>{const i=t.getSlices();for(let t=0;t<i.length;t+=1)i[t].setExploded(!1)};class fl extends La{constructor(t,i,s,e,h,r,n){super(t,i,s,i.Py("pieChart bg",0),e,i.us.qi.pieChartBackgroundFillStyle,i.us.qi.pieChartBackgroundStrokeStyle,i.us.qi.pieChartTitleFont,i.us.qi.pieChartTitleFillStyle,r),this.Bm=[],this.Lm=hl.SortByName,this.Jl=0,this.Rm=this.qi.pieChartSliceFillStylePalette,this.Em=this.qi.pieChartSliceStrokeStyle,this.zm=!0,this.Vm=this.qi.pieChartSliceLabelFont,this.Om=this.qi.pieChartSliceLabelFillStyle,this.Nm=0,this.Gm=!1,this.Wm=20,this.Um=!0,this.Ym=!0,this.Hm=t=>{const i=this.Bm.indexOf(t);i>=0&&(this.Bm.splice(i,1),this.$m())},this.us.jn(Vo.gf),this.Xm=i.jm("pieChart bottom",0),this.Zm=i.jm("pieChart top",1),this.bh.yr("Pie Chart"),this.Iy(h,this.mg),this.onBackgroundMouseDoubleClick(dl);const o=Ae(new ge(dl));this.onBackgroundTouchStart(o.onTouchStart),this.onBackgroundTouchMove(o.onTouchMove),this.onBackgroundTouchEnd(o.onTouchEnd);const a=i.Qm(),l=jt(n?n.cursorBuilder:void 0,qa);this.Jm=Va(this,a,l.pm(a,this.uiScale,this.uiScale,Yt,this.qi),void 0,"show-pointed",Al,(()=>0)),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled))}setCursor(t){return this.Jm.setCursor(t),this}getCursor(){return this.Jm.getCursor()}setCursorMode(t){return this.Jm.setCursorMode(t),this}getCursorMode(){return this.Jm.getCursorMode()}setCustomCursor(t){return this.Jm.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.Jm.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.Jm.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Jm.setCursorFormatting(t),this}getCursorFormatting(){return this.Jm.getCursorFormatting()}addCursor(t=qa){const i=this.vy(),s=t.pm(i,this.uiScale,this.uiScale,this.Ay(i),this.qi);return this.ky(s),s}addSlice(t,i){const s=new ll(this.Nm,this.Xm,this.Zm,this,this.mg,this.Hm,this.qi,this.us.es);this.Nm+=1,s.setName(t);const e=this.uh;return this.uh=!1,s.setValue(i),this.uh=e,s.setEffect(this.Um),this.Km(s),this.Bm.push(s),this.$m(),s.setHighlightOnHover(this.zm),s.onMouseMove((()=>{this.getCursorMode()&&this.us.xs()})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Bm}setMultipleSliceExplosion(t){return this.Gm=t,this}getMultipleSliceExplosion(){return this.Gm}setInnerRadius(t){return this.Jl=t,this.us.xs(),this}getInnerRadius(){return this.Jl}setSliceExplosionOffset(t){return this.Wm=t,this.us.xs(),this}getSliceExplosionOffset(){return this.Wm}setLUT(t){return this.Xd=t,this.us.xs(),this}setSliceFillStyle(t){this.Rm=t;for(let t=0;t<this.Bm.length;t+=1)this.Km(this.Bm[t]);return this.us.xs(),this}getSliceFillStyle(){return this.Rm}setSliceStrokeStyle(t){this.Em="function"==typeof t?t(this.Em):t;for(let t=0;t<this.Bm.length;t+=1)this.Km(this.Bm[t]);return this.us.xs(),this}getSliceStrokeStyle(){return this.Em}setSliceEffect(t){return this.Um=t,this.Bm.forEach((i=>i.es.ns.bs(t))),this.us.xs(),this}getSliceEffect(){return this.Um}setSliceSorter(t){return this.Lm=t,this.Bm=this.Bm.sort(this.Lm),this.us.xs(),this}getSliceSorter(){return this.Lm}setLabelFillStyle(t){this.Om="function"==typeof t?t(this.Om):t;for(let t=0;t<this.Bm.length;t+=1)this.Km(this.Bm[t]);return this.us.xs(),this}getLabelFillStyle(){return this.Om}setLabelFont(t){this.Vm="function"==typeof t?t(this.Vm):t;for(let t=0;t<this.Bm.length;t+=1)this.Km(this.Bm[t]);return this.us.xs(),this}getLabelFont(){return this.Vm}setLabelEffect(t){return this.Ym=t,this.Bm.forEach((i=>i.es.rs.bs(t))),this.us.xs(),this}getLabelEffect(){return this.Ym}setLabelFormatter(t){return this.qm=t,this.us.xs(),this}getLabelFormatter(){return this.qm}setSliceHighlightOnHover(t){return this.zm=t,this.Bm.forEach((i=>i.setHighlightOnHover(t))),this}Le(t){super.Le(t),Ra.Oy(this.bh,this.Dy),super.Fy();const i=Ra.Vy(this.bh,this.Dy),s=n(this.mg.x.getInnerInterval()-(this.Ca.left+this.Ca.right),this.mg.y.getInnerInterval()-(this.Ca.bottom+this.Ca.top+i)),e=n(this.Ca.left+s.x/2,this.Ca.bottom+s.y/2);if(this.Xd){const t=this.Xd;this.Bm.forEach((i=>{this.Km(i,new U({color:t.getColors(i.getAnimatedValue())}))}))}for(let t=0;t<this.Bm.length;t+=1){const i=this.Bm[t].getAnimatedValue()>0;this.Bm[t].Pm.setVisible(i),this.Bm[t].th.setVisible(i)}this.Bm=this.Bm.sort(this.Lm);const h=this.Bm.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/r:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.th.yr(this.qm(i,o[t])).Es()}this.Jm.Le(!1,this.Bm,((t,i,s)=>{const e=o[h.indexOf(t)]||0,r=this.us.Oo(i);return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.us.ft,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.us.ft},slice:t,category:t.getName(),value:t.getValue(),relativeValue:e}})),this.tp(h,o,e,s)}Km(t,i=this.Rm(t.index,t)){t.setStyle(i,this.Em,this.Om,this.Vm)}$m(){this.Bm=this.Bm.sort(this.Lm),this.us.xs()}sf(){return this.Bm}dispose(){return super.dispose(),this.Bm.slice().forEach((t=>t.dispose())),this.Jm.U(),this.Zm.U(),this.Xm.U(),this}}const Al=(t,i,s)=>[[i.slice],[{text:i.value.toString(),font:{weight:"bold"}}]],gl={UserSeries:{type:"ApplicationType",args:{type:"UserSeries"}},InternalUI:{type:"ApplicationType",args:{type:"InternalUI"}}},yl=(...t)=>{const i=[];return t.forEach((t=>{var s;t&&"object"==typeof(s=t)&&s&&"pattern"in s&&i.push({type:"DataPattern",args:t})})),i};class ml extends fl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.qm=rl.NamePlusValue,this.ip=[],this.sp=40,this.ep=5,this.hp=10,this.rp=this.qi.pieChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.rp=t;for(let t=0;t<this.ip.length;t+=1)this.ip[t].Ge(this.rp);return this.us.xs(),this}getLabelConnectorStyle(){return this.rp}setLabelSliceOffset(t){return this.sp=t,this.us.xs(),this}getLabelSliceOffset(){return this.sp}setLabelConnectorGapStart(t){return this.ep=t,this.us.xs(),this}getLabelConnectorGapStart(){return this.ep}setLabelConnectorEndLength(t){return this.hp=t,this.us.xs(),this}getLabelConnectorEndLength(){return this.hp}tp(t,i,s,e){const h=this.Vm.getSize(),r=this.sp,n=this.hp,o=this.ep,a=Math.min(this.Wm,r-o);let l=0;if(1===t.length)l=t[0].th.sd().x;else for(let i=0;i<t.length;i+=1)l=Math.max(l,t[i].th.sd().x);const u=Math.max(.5*(Math.min(e.x-2*l-2*n,e.y-2*h)-2*r),0);if(u<50){const r=Math.max(.5*Math.min(e.x,e.y-2*h),0);cl(t,i,s,r,this.Jl,a),t.forEach((t=>t.th.setVisible(!1))),this.ip.forEach((t=>t.setVisible(!1)))}else{cl(t,i,s,u,this.Jl,a);let e=90;const h=t.map(((t,h)=>{const o=360*i[h],a=e-o,l=Rs(Bs(.5*(e+a))),c=l.x>=0?-1:1,d=ws(ws(s,_s(l,u+r)),{x:c*-n,y:0});e=a;const f={x:c,y:0};t.th.Re(d).Ha(f),t.th.Es();const A=As(t.th.qe());return{position:d,alignment:f,shape:t.th,boundaries:A,sliceAngleVec:l,slice:t}})),l=[];for(let t=0;t<h.length;t+=1){const i=h[t],s=l[l.length-1];s&&!1!==ns([s.boundaries,i.boundaries])?i.shape.setVisible(!1):(l.push(i),i.shape.setVisible(!0))}for(let t=0;t<this.ip.length;t+=1)this.ip[t].setVisible(!1);l.forEach(((t,i)=>{const e=t.slice.Pm,h=ul(e,s,u+o+a*t.slice.getAnimatedExplosion()),r=Ds(t.position.y,h,s),n=t.position;this.np([h,r,n])}))}}getMinimumSize(){return n(500,300)}np(t){let i;for(let t=0;t<this.ip.length;t+=1)if(!this.ip[t].getVisible()){i=this.ip[t].setVisible(!0);break}void 0===i&&(i=this.Zm.op(this.mg,void 0,[gl.InternalUI]).Ge(this.rp).setMouseInteractions(!1),this.ip.push(i)),i.Vt().fl(t)}}class pl extends fl{constructor(){super(...arguments),this.qm=rl.Name,this.ap=.5}tp(t,i,s,e){const h=this.Wm,r=Math.max(0,.5*Math.min(e.x,e.y)-h);cl(t,i,s,r,this.Jl,h);for(let i=0;i<t.length;i+=1){const e=t[i],n=e.Pm,o=e.th,a=this.Jl/100,l=((1-a)*this.ap+a)*r+e.getAnimatedExplosion()*h,u=ul(n,s,l);o.Re(u).Ga(0).Ua(0)}}getMinimumSize(){return n(200,200)}setLabelPosition(t){return this.ap=t,this.us.xs(),this}getLabelPosition(){return this.ap}}const vl={LabelsOnSides:ml,LabelsInsideSlices:pl},Sl=t=>{if(Se(t)){const i=t.getThickness(),s=t.getFillStyle();if(Y(s))return 1===i?Dh:new Lh({size:i,fillStyle:s,shape:"sphere"})}return Dh};class bl{constructor(t,i,e,h,r,n,o,a,l,u){this.L=new s,this.S=0,this.ji=!0,this.Xi=!1,this.xs=t,this.lp=i,this.up=e,this.cp=h,this.dp=r,this.fp=n,this.Od=o,this.hm=a,this.Ap=l,this.hc=u}setValue(t){return t===this.S||(this.S=t,this.xs(),this.L.emit("valueChange",this,this.S)),this}getValue(){return this.S}setTickStyle(t){return this.up="function"==typeof t?t(this.up):t,this.xs(),this}getTickStyle(){return this.up}setTickLength(t){return this.cp=t,this.xs(),this}getTickLength(){return this.cp}setGridStrokeStyle(t){return this.dp="function"==typeof t?t(this.dp):t,this.xs(),this}getGridStrokeStyle(){return this.dp}setTextPadding(t){return this.fp=t,this.xs(),this}getTextPadding(){return this.fp}setTextRotation(t){return this.Od=t,this.xs(),this}getTextRotation(){return this.Od}setTextFillStyle(t){return this.hm="function"==typeof t?t(this.hm):t,this.xs(),this}getTextFillStyle(){return this.hm}setTextFont(t){return this.Ap="function"==typeof t?t(this.Ap):t,this.xs(),this}getTextFont(){return this.Ap}setTextFormatter(t){return this.hc=t,this.xs(),this}onValueChange(t){return this.L.on("valueChange",t)}offValueChange(t){return this.L.off(t,"valueChange")}dispose(){return this.Xi||(this.Xi=!0,this.lp(),this.xs(),this.L.emit("dispose",this)),this}isDisposed(){return this.Xi}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setVisible(t){const i=this.ji!==t;return this.ji=t,i&&(this.L.emit("visibleStateChanged",this,this.ji),this.xs()),this}getVisible(){return this.ji}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}}class xl extends bl{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d){super(t,i,s,e,h,r,n,o,a,l),this.gp=u,this.yp=c,this.Ca=d}setBackgroundFillStyle(t){return this.gp="function"==typeof t?t(this.gp):t,this.xs(),this}getBackgroundFillStyle(){return this.gp}setBackgroundStrokeStyle(t){return this.yp="function"==typeof t?t(this.yp):t,this.xs(),this}getBackgroundStrokeStyle(){return this.yp}setPadding(t){return this.Ca="number"==typeof t?{left:t,top:t,right:t,bottom:t}:{...this.Ca,...t},this.xs(),this}getPadding(){return this.Ca}}class Ml{constructor(t,i,s,e){this.mp=[],this.pp=new Map,this.vp=t,this.Sp=i,this.bp=s,this.xp=e}Mp(){this.bp&&this.bp();const t=[];return{add:(i,s)=>{t.push({instanceUniqueProperties:i,instanceSharedProperties:s})},finishPlot:()=>{const i=[];let s=[];t.forEach((t=>{const s=i.find((i=>((t,i)=>{const s=Object.keys(t);for(const e of s)if(t[e]!==i[e])return!1;return!0})(i.sharedProperties,t.instanceSharedProperties)));s?s.instances.push(t.instanceUniqueProperties):i.push({sharedProperties:t.instanceSharedProperties,instances:[t.instanceUniqueProperties]})}));const e=this.mp.slice(),h=[];i.forEach((t=>{let i=e.pop();i||(i=this.vp(),this.mp.push(i));const r=[],n=i._p().slice();t.instances.forEach(((t,i)=>{const s=n.shift();r.push({...t,existingMember:s})}));const o=this.Sp(i,r,t.sharedProperties);s=xi(s,o,{canReturnB:!0});for(let s=0;s<t.instances.length;s+=1)h.push({jo:t.instances[s].jo,collection:i,member:o[s]});n.forEach((t=>{null==i||i.Td(t)}))})),e.forEach((t=>{t.dispose();const i=this.mp.indexOf(t);i<0?Di(0,(()=>{})):this.mp.splice(i,1)})),h.forEach((t=>{const i=this.pp.get(t.jo);i&&t.collection.us.ao({entity:i.collection,collectionMember:i.member},{entity:t.collection,collectionMember:t.member})})),this.pp.clear(),h.forEach((t=>{this.pp.set(t.jo,t)})),this.xp&&this.xp(this.mp,s)}}}wp(){this.mp.forEach((t=>{t.dispose()})),this.mp.length=0}}class _l{constructor(t){this.Cp=[],this.kp=t}Mp(){return this.Tp(),{add:()=>this.ll(),finishPlot:()=>{this.Fp()}}}ll(){let t=this.Cp.find((t=>t.isFree));return t||(t={isFree:!1,shape:this.kp()},this.Cp.push(t)),t.isFree=!1,t.shape}Tp(){this.Cp.forEach((t=>{t.isFree=!0}))}Fp(){this.Cp.filter((t=>t.isFree)).forEach((t=>{t.shape.dispose(),this.Cp.splice(this.Cp.indexOf(t),1)}))}wp(){this.Cp.forEach((t=>t.shape.dispose())),this.Cp.length=0}}class wl extends xh{constructor(t,i,s,e,h,r,n,o,a){super(t,i,s,e,o,{numeric:i.Ip({x:t.us.qi.xAxis3DNumericTicks,y:t.us.qi.yAxis3DNumericTicks,z:t.us.qi.zAxis3DNumericTicks}),datetime:i.Ip({x:t.us.qi.xAxis3DDateTimeTicks,y:t.us.qi.yAxis3DDateTimeTicks,z:t.us.qi.zAxis3DDateTimeTicks}),time:i.Ip({x:t.us.qi.xAxis3DTimeTicks,y:t.us.qi.yAxis3DTimeTicks,z:t.us.qi.zAxis3DTimeTicks})},{type:"linear"}),this.Rf=[],this.Pp=()=>{},this.Dp=()=>{},this.Bp=()=>{},this.Lp=()=>{},this.chart=t,this.Rp=h,this.Ep=r,this.zp=n,this.Vp=this.Rp.ft;const l=this.Eh.Ip({x:this.qi.xAxis3DStrokeStyle,y:this.qi.yAxis3DStrokeStyle,z:this.qi.zAxis3DStrokeStyle});this.Op=this.Rp.op([gl.InternalUI]).Ge(l).Np(Sl(l)).setMouseInteractions(!1),this._h=this.Ep.Nr(this.zp).setMouseInteractions(!1).De(i.Ip({x:t.us.qi.xAxis3DTitleFillStyle,y:t.us.qi.yAxis3DTitleFillStyle,z:t.us.qi.zAxis3DTitleFillStyle})).Zh(i.Ip({x:t.us.qi.xAxis3DTitleFont,y:t.us.qi.yAxis3DTitleFont,z:t.us.qi.zAxis3DTitleFont})).na(3),this.Gp=new _l((()=>this.Ep.Nr(this.zp).na(2).Or(Hi).Vr(Hi))),this.Wp=new Ml((()=>this.Ep.Yp(this.zp).setMouseInteractions(!1).na(1)),((t,i,s)=>(t.De(s.fillStyle).Pe(s.strokeStyle),i.map((({positions:i,existingMember:s})=>{const e=s||t.$r();return e.wl(i),e}))))),this.Hp=new Ml((()=>this.Rp.Ug().setMouseInteractions(!1)),((t,i,s)=>(t.Vt().Ge(s.lineStyle),i.map((({positions:i,existingMember:s})=>s||t.fl(i)))))),this.es=a,this.Kh=this.es.Cg([this._h]).bs(e.effectsText),this.Op.setMouseEnterEventHandler(this.Pp).setMouseLeaveEventHandler(this.Dp).setMouseDragEventHandler(this.Bp).setMouseDragStopEventHandler(this.Lp),s.lg=this}setTickStrategy(t,i){return super.Nh(t,i)}getTickStrategy(){return this.eh}addCustomTick(){const t=new xl((()=>this.chart.us.xs()),(()=>{const i=this.Rf.indexOf(t);i>=0&&this.Rf.splice(i,1)}),this.qi.xAxis3DNumericTicks.majorTickStyle.tickStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.tickLength,this.qi.xAxis3DNumericTicks.majorTickStyle.gridStrokeStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.tickPadding,this.qi.xAxis3DNumericTicks.majorTickStyle.labelRotation,this.qi.xAxis3DNumericTicks.majorTickStyle.labelFillStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.labelFont,(t=>this.formatValue(t)),O,at,{left:4,right:4,top:4,bottom:4});return this.Rf.push(t),this.chart.us.xs(),t}setStrokeStyle(t){return this.Op.Ge(t).Np(Sl(this.Op.mu())),this.chart.us.xs(),this}getStrokeStyle(){return this.Op.mu()}setMouseInteractions(t){return this}setVisible(t){return super.setVisible(t),this.Op.setVisible(t),!1===t&&(this.Hp.wp(),this.Gp.wp(),this.Wp.wp()),this.Rp.xs(),this}Bg(){return this.chart.getSeries()}$p(t){return Math.abs(this.ft.it(t)*this.Rp.Xp(1))}Rr(t,i,s){const e=Math.abs(this.ft.it(i-t)*this.Rp.Xp(1));return{min:t-s*e,max:i+s*e}}vr(t,i){const s=new Cl(i,t,this.Ep,this.zp,this.Rp);return s.th.na(0),s}Sr(t,i){const s=this.jp(i,t.S,t.Ph.pr.tickLength,t.Ph.pr.tickPadding);return t.th.Re(s.labelPosition).Ha(s.labelAlignment),s}jp(t,i,s,e){const{wuSize:h,start:r,end:o,tickDirection3D:a,tickDirection2D:l}=t,u=(i-this.ft.getInnerStart())/(this.ft.getInnerEnd()-this.ft.getInnerStart()),c=Ji.addVec(fs(r,o,u),Ji.multiplyVec(Ji.multiply(a,this.Rp.Xp(.5*this.Op.mu().getThickness())),h)),d=Ji.addVec(c,Ji.multiplyVec(Ji.multiply(a,this.Rp.Xp(s)),h)),f=this.Rp.Zp(d)||n(0,0);return{labelPosition:ws(At(f,this.chart.us.ft,this.zp),_s(l,e)),labelAlignment:{x:-l.x,y:-l.y},posTickEnd3D:d,posTickStart3D:c,tickPositionRelative:u}}Qp(t,i,s){const{wuSize:e,start:h,end:r,tickDirection3D:o}=i,a=(t-this.ft.getInnerStart())/(this.ft.getInnerEnd()-this.ft.getInnerStart()),l=Ji.addVec(fs(h,r,a),Ji.multiplyVec(Ji.multiply(o,this.Rp.Xp(.5*this.Op.mu().getThickness())),e)),u=Ji.addVec(l,Ji.multiplyVec(Ji.multiply(o,this.Rp.Xp(10)),e)),c=this.Rp.Zp(l)||n(0,0),d=this.Rp.Zp(u)||n(0,0);return this.Ep.We(this.zp).Ye(c).Ue(d).Ge(new ve({fillStyle:new U({color:x(120*s)}),thickness:1}))}Br(t,i){return kl(t,i,this.ft)}Le(t){if(!this.ji)return;const i=Math.min(this.Gh,this.Wh),s=Math.max(this.Gh,this.Wh),e=this.Vp,h=l(e.x.ht(),e.y.ht(),e.z.ht());let r,o;this.Jp()?(r=l(e.x.getInnerEnd(),e.y.getInnerStart(),e.z.getInnerStart()),o=l(e.x.getInnerEnd(),e.y.getInnerStart(),e.z.getInnerEnd())):(r=l(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),o=this.Eh.Kp(l(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),r));const a=this.Eh.hf,u=this.Rp.Zp(r)||n(0,0),c=this.Rp.Zp(o)||n(0,0),d=fs(r,o,.5),f=Ji.addVec(d,Ji.multiplyVec(Ji.multiply(a,-1),h)),A=this.Rp.Zp(d)||n(0,0),g=this.Rp.Zp(f)||n(0,0),y=bs(Cs(At(A,this.chart.us.ft,this.zp),At(g,this.chart.us.ft,this.zp)));this.Op.Vt().fl([r,o]);const{gridlinePositionA:m,gridlinePositionB:p,gridlinePositionC:v}=this.Eh.qp(t),S=t=>({x:-1===t.x?this.Vp.x.getInnerStart():1===t.x?this.Vp.x.getInnerEnd():0,y:-1===t.y?this.Vp.y.getInnerStart():1===t.y?this.Vp.y.getInnerEnd():0,z:-1===t.z?this.Vp.z.getInnerStart():1===t.z?this.Vp.z.getInnerEnd():0}),b=S(m),x=S(p),M=S(v),_={physicalAxisSize:Ms(Cs(u,c)),wuSize:h,start:r,end:o,tickDirection3D:a,tickDirection2D:y,gridlinePositionA:b,gridlinePositionB:x,gridlinePositionC:M},w=this.nr(_),C=this.Hp.Mp();for(const[t,i]of this.hh)for(const[,s]of i){const i=w.get(s);if(!i)continue;const e=this.tv(_,i);C.add({jo:0,positions:[e.tickStroke.start,e.tickStroke.end]},{lineStyle:t.pr.tickStyle}),e.gridStroke&&C.add({jo:0,positions:e.gridStroke},{lineStyle:t.pr.gridStrokeStyle})}const k=this.Gp.Mp(),T=this.Wp.Mp(),F={x:0,y:0};this.Rf.forEach((t=>{if(!t.ji||t.S<i||t.S>s)return;const e=this.jp(_,t.S,t.cp,t.fp),h=this.tv(_,e);if(t.hm!==O){const i=k.add().Re(e.labelPosition).Ha(e.labelAlignment).De(t.hm).Zh(t.Ap).yr(t.hc(t.S)).Qh(t.Od),s=i.Es().ni();if(F.x=Math.max(F.x,s.x),F.y=Math.max(F.y,s.y),t.gp!==O){const s=i.qe(),e=[{x:s[0].x-t.Ca.left,y:s[0].y+t.Ca.top},{x:s[1].x+t.Ca.right,y:s[1].y+t.Ca.top},{x:s[2].x+t.Ca.right,y:s[2].y-t.Ca.bottom},{x:s[3].x-t.Ca.left,y:s[3].y-t.Ca.bottom}];T.add({jo:0,positions:e},{fillStyle:t.gp,strokeStyle:t.yp})}}C.add({jo:0,positions:[h.tickStroke.start,h.tickStroke.end]},{lineStyle:t.up}),h.gridStroke&&C.add({jo:0,positions:h.gridStroke},{lineStyle:t.dp})})),k.finishPlot(),T.finishPlot(),C.finishPlot();const I=this._r(((t,i)=>{const s=i.th.ni();return t.x=Math.max(t.x,s.x),t.y=Math.max(t.y,s.y),t}),{x:F.x,y:F.y}),P=Math.atan((c.y-u.y)/(c.x-u.x));this._h.Ha({x:0,y:0}).Qh(180*-P/Math.PI);const D=Ji.addVec(d,Ji.multiplyVec(Ji.multiply(a,this.Rp.Xp(.5*this.Op.mu().getThickness()+this.kr(((t,i)=>Math.max(t,i.tickLength)),0))),h)),B=this.Rp.Zp(D)||n(0,0),L=ws(At(B,this.chart.us.ft,this.zp),ws(ws(ks(I,y),_s(y,this.kr(((t,i)=>Math.max(t)),0))),ks(_s(this._h.Es().ni(),.5),y)));this._h.Re(L),this.Op.sv={overrideFollowing:!1,skipMousePicking:!1}}tv(t,i){const{gridlinePositionA:s,gridlinePositionB:e,gridlinePositionC:h}=t,r=i.posTickStart3D,n=i.posTickEnd3D,o=i.tickPositionRelative;let a;return Ht(o,0)||Ht(o,1)||(a=[this.ev()?{...s,x:r.x}:this.hv()?{...s,y:r.y}:this.Jp()?{...s,z:r.z}:{x:0,y:0,z:0},this.ev()?{...e,x:r.x}:this.hv()?{...e,y:r.y}:this.Jp()?{...e,z:r.z}:{x:0,y:0,z:0},this.ev()?{...h,x:r.x}:this.hv()?{...h,y:r.y}:this.Jp()?{...h,z:r.z}:{x:0,y:0,z:0}]),{gridStroke:a,tickStroke:{start:r,end:n}}}qh(){super.qh(),this.Hp.wp(),this.Gp.wp(),this.Wp.wp()}ev(){return this.Eh.ev()}hv(){return this.Eh.hv()}Jp(){return this.Eh.Jp()}}class Cl extends Mh{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.rv=h}}const kl=(t,i,s)=>$t(t+.1*(i-t)+Math.abs(s.ht())/100*Math.sign(i-t),Math.min(t,i),Math.max(t,i)),Tl=(t,i,s,e)=>({Tr:()=>{const s=t();let e;for(const t of s){if(!t.nv())continue;const s=i(t);e=void 0===s?e:void 0!==e?Math.min(e,s):s}return e},Fr:()=>{const i=t();let e;for(const t of i){if(!t.nv())continue;const i=s(t);e=void 0===i?e:void 0!==e?Math.max(e,i):i}return e},Pr:()=>{const i=t();let s;for(const t of i){if(!t.nv())continue;const i=e(t);s=void 0===i?s:void 0!==s?Math.max(s,i):i}return s}}),Fl=t=>({...Tl(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.Pr().y)),Ip:t=>t.y,Kp:(t,i)=>({x:i.x,y:t.y,z:i.z}),hf:l(-1,0,0),qp:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:l(i.x,0,i.z),gridlinePositionB:l(i.x,0,-i.z),gridlinePositionC:l(-i.x,0,-i.z)}},ev:()=>!1,hv:()=>!0,Jp:()=>!1}),Il=t=>({...Tl(t,(t=>t.getZMin()),(t=>t.getZMax()),(t=>t.Pr().z)),Ip:t=>t.z,Kp:(t,i)=>({x:i.x,y:i.y,z:t.z}),hf:l(1,0,0),qp:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:l(i.x,-i.y,0),gridlinePositionB:l(i.x,i.y,0),gridlinePositionC:l(-i.x,i.y,0)}},ev:()=>!1,hv:()=>!1,Jp:()=>!0});class Pl extends ce{constructor(t,i,s,e,h){super(t,i,e,h),this.ov=xn,this.av=!0,this.lv=!0,this.uv=!0,this.chart=t,this.Rp=s,this.ts=new Map,this.onMouseWheel(this.chart.cv),this.onMouseDrag(this.chart.dv),this.onMouseDragStop(this.chart.fv),this.onTouchStart(this.chart.Av.onTouchStart),this.onTouchMove(this.chart.Av.onTouchMove),this.onTouchEnd(this.chart.Av.onTouchEnd)}Ji(t,i){const s=null==t?void 0:t.dataPoint;if(s)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.mg,axisLocation:s},...s,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ()}}setCursorEnabled(t){return this.av=t,this}getCursorEnabled(){return this.av}setCursorFormattingOverride(t){return this.gv=t,this}getCursorFormattingOverride(){return this.gv}setAutoScrollingEnabled(t){return this.lv=t,this.chart.us.xs(),this}getAutoScrollingEnabled(){return this.lv}setColorShadingStyle(t){return this.ov=t,this.ts.forEach(((i,s)=>s.yv(t))),this.Rp.xs(),this}getColorShadingStyle(){return this.ov}setDepthTestEnabled(t){return this.uv=t,this.ts.forEach(((i,s)=>s.mv(t))),this.Rp.xs(),this}getDepthTestEnabled(){return this.uv}pv(){}Le(){}xp(){}getXMax(){const t=this.Za;return t?t.vt():void 0}getXMin(){const t=this.Za;return t?t.yt():void 0}getYMax(){const t=this.Za;return t?t.bt():void 0}getYMin(){const t=this.Za;return t?t.St():void 0}getZMax(){const t=this.Za;return t?t.vv():void 0}getZMin(){const t=this.Za;return t?t.Sv():void 0}Pr(){const t=this.Za;return t?l(t.kl(),t.Tl(),t.bv()):l(0,0,0)}}class Dl extends Pl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.ws="Box Series 3D",this.xv=.25,this.Mv=!1,this.jd=()=>ki(this.ke),this.ke=Ii(this.qi.boxSeries3DFillStyle,h),this.Za=this.Rp.wv().mv(this.uv).De(this.ke)._v(this.xv).cs(this.getHighlight()),this.fs(this.Za)}invalidateData(t){const i=t.length;if(0===i)return this;this.Mv&&this.chart.us.jn(Vo.kf);const s=t[0];if(!s)return this;let e;if("xMin"in s||"yMin"in s||"zMin"in s||"xMax"in s||"yMax"in s||"zMax"in s){e=[];for(let s=0;s<i;s+=1){const i=t[s],h="xMin"in i&&"xMax"in i,r="yMin"in i&&"yMax"in i,n="zMin"in i&&"zMax"in i;e[s]={color:i.color,value:i.value,id:i.id,xCenter:h?(i.xMin+i.xMax)/2:void 0,yCenter:r?(i.yMin+i.yMax)/2:void 0,zCenter:n?(i.zMin+i.zMax)/2:void 0,xSize:h?i.xMax-i.xMin:void 0,ySize:r?i.yMax-i.yMin:void 0,zSize:n?i.zMax-i.zMin:void 0}}}else e=t;return this.Za.Cv(e.slice()),this.chart.us.xs(),this.Mv=!0,this}setFillStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.Za.De(t),this.chart.us.xs(),this}getFillStyle(){return this.ke}setRoundedEdges(t){return void 0!==t&&isNaN(t)&&(console.error("'BoxSeries3D.setRoundedEdges | NaN was supplied.'"),t=void 0),this.xv=void 0!==t?$t(t,0,1):void 0,this.Za._v(this.xv),this.Rp.xs(),this}getRoundedEdges(){return this.xv}nv(){return this.lv&&this.getVisible()}Ee(t,i){t.cs(i),this.chart.us.xs()}Le(){super.Le(),this.Za.Es(!1)}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke})}}class Bl extends Pl{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Mv=!1,this.jd=()=>ki(this.yu.getFillStyle())}setStrokeStyle(t){this.yu="function"==typeof t?t(this.yu):t;const i=this.yu;return this.Za.Ge(i),this.Rp.xs(),this}getStrokeStyle(){return this.yu}add(t){return this.Mv&&this.chart.us.jn(Vo.kf),this.Mv=!0,(t=Array.isArray(t)?t:[t])?(this.Za.fl(t.slice()),this.Rp.xs(),this):this}clear(){return this.Za.Vt(),this}getPointAmount(){const t=this.Za;return t.Al()+t.yl()}nv(){return this.lv&&this.getPointAmount()>0&&this.getVisible()}Ee(t,i){t.cs(i),this.Rp.xs()}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{stroke:this.yu})}}class Ll extends Bl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.ws="Line Series 3D",this.yu=Ii(e.lineSeries3DStrokeStyle,h),this.kv=Qh.pointStyle3D,this.Tv(this.yu),this.Za=this.Rp.op([gl.UserSeries]).mv(this.uv).Ge(this.yu).Np(this.kv).cs(this.getHighlight()),this.fs(this.Za)}setStrokeStyle(t){super.setStrokeStyle(t),this.Tv(this.yu);const i=this.kv;return this.Za.Np(i),this}Tv(t){const i=new Oh.Triangulated({shape:"sphere",fillStyle:t.getFillStyle(),size:t.getThickness()});this.kv=i}}class Rl extends Bl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.ws="Point Line Series 3D",this.jd=()=>ki(this.yu.getFillStyle())||ki(this.kv.getFillStyle()),this.kv=Ii(e.pointLineSeries3DPointStyle,h),this.yu=Ii(e.lineSeries3DStrokeStyle,h),this.Fv(),this.Za=this.Rp.op([gl.UserSeries]).mv(this.uv).Ge(this.yu).Np(this.kv).cs(this.getHighlight()),this.fs(this.Za)}setPointStyle(t){return this.kv="function"==typeof t?t(this.kv):t,this.Fv(),this.Za.Np(this.kv),this.Rp.xs(),this}getPointStyle(){return this.kv}setStrokeStyle(t){super.setStrokeStyle(t);const i=this.yu,s=Math.abs(i.getThickness()),e=this.kv,h=e.getSize();s>("object"==typeof h?Math.max(h.x,h.y,h.z):h)&&(this.kv=e.setSize(s)),this.Fv();const r=this.kv;return this.Za.Np(r),this.Rp.xs(),this}Fv(){const t=this.kv,i=t.getSize();this.kv=t.setSize(i)}Ee(t,i){t.cs(i),this.Rp.xs()}}class El extends Pl{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.Mv=!1,((null==r?void 0:r.individualPointSizeAxisEnabled)||(null==r?void 0:r.individualPointSizeEnabled))&&this.chart.us.jn(Vo.Tf)}add(t){return this.Mv&&this.chart.us.jn(Vo.kf),this.Mv=!0,(t=Array.isArray(t)?t:[t])?(this.Za.fl(t.slice()),this.Rp.xs(),this):this}clear(){return this.Za.Vt(),this}getPointAmount(){const t=this.Za;return t.Al()+t.yl()}nv(){return this.lv&&this.getPointAmount()>0&&this.getVisible()}Ee(t,i){t.cs(i),this.Rp.xs()}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{point3D:this.Iv})}}class zl extends El{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.ws="Point Series 3D",this.jd=()=>ki(this.Iv.getFillStyle());const n=void 0!==(null==r?void 0:r.automaticColorIndex)?r.automaticColorIndex:this.chart.getSeries().length;this.Iv=Ii(e.pointSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.Za=this.Rp.Dv(o).mv(this.uv).Pv(this.Iv).cs(this.getHighlight()),this.fs(this.Za)}setPointStyle(t){this.Iv="function"==typeof t?t(this.Iv):t;const i=this.Iv;return this.Za.Pv(i),this.Rp.xs(),this}getPointStyle(){return this.Iv}}class Vl extends El{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.ws="Point Cloud Series 3D",this.jd=()=>ki(this.Iv.getFillStyle());const n=this.chart.getSeries().length;this.Iv=Ii(e.pointCloudSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.Za=this.Rp.Dv(o).Pv(this.Iv).cs(this.getHighlight()),this.fs(this.Za)}setPointStyle(t){this.Iv="function"==typeof t?t(this.Iv):t;const i=this.Iv;return this.Za.Pv(i),this.Rp.xs(),this}getPointStyle(){return this.Iv}}const Ol={Triangulated:zl,Pixelated:Vl};class Nl extends La{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.Bv=[],this.Lv=0,this.Rv=t=>{const i=this.Bv.indexOf(t);i>=0&&(this.Bv.splice(i,1),this.L.emit("seriesDispose",this,t))},this.onSeriesBackgroundMouseEnter=t=>this.L.on("mouseEnterSeriesBackground",t),this.onSeriesBackgroundMouseLeave=t=>this.L.on("mouseLeaveSeriesBackground",t),this.onSeriesBackgroundMouseMove=t=>this.L.on("mouseMoveSeriesBackground",t),this.onSeriesBackgroundMouseDown=t=>this.L.on("mouseDownSeriesBackground",t),this.onSeriesBackgroundMouseUp=t=>this.L.on("mouseUpSeriesBackground",t),this.onSeriesBackgroundMouseClick=t=>this.L.on("mouseClickSeriesBackground",t),this.onSeriesBackgroundMouseDoubleClick=t=>this.L.on("mouseDoubleClickSeriesBackground",t),this.onSeriesBackgroundMouseDragStart=t=>this.L.on("mouseDragStartSeriesBackground",t),this.onSeriesBackgroundMouseDrag=t=>this.L.on("mouseDragSeriesBackground",t),this.onSeriesBackgroundMouseDragStop=t=>this.L.on("mouseDragStopSeriesBackground",t),this.onSeriesBackgroundMouseWheel=t=>this.L.on("mouseWheelSeriesBackground",t),this.onSeriesBackgroundTouchStart=t=>this.L.on("touchStartSeriesBackground",t),this.onSeriesBackgroundTouchMove=t=>this.L.on("touchMoveSeriesBackground",t),this.onSeriesBackgroundTouchEnd=t=>this.L.on("touchEndSeriesBackground",t),this.offSeriesBackgroundMouseEnter=t=>this.L.off(t,"mouseEnterSeriesBackground"),this.offSeriesBackgroundMouseLeave=t=>this.L.off(t,"mouseLeaveSeriesBackground"),this.offSeriesBackgroundMouseMove=t=>this.L.off(t,"mouseMoveSeriesBackground"),this.offSeriesBackgroundMouseDown=t=>this.L.off(t,"mouseDownSeriesBackground"),this.offSeriesBackgroundMouseUp=t=>this.L.off(t,"mouseUpSeriesBackground"),this.offSeriesBackgroundMouseClick=t=>this.L.off(t,"mouseClickSeriesBackground"),this.offSeriesBackgroundMouseDoubleClick=t=>this.L.off(t,"mouseDoubleClickSeriesBackground"),this.offSeriesBackgroundMouseDragStart=t=>this.L.off(t,"mouseDragStartSeriesBackground"),this.offSeriesBackgroundMouseDrag=t=>this.L.off(t,"mouseDragSeriesBackground"),this.offSeriesBackgroundMouseDragStop=t=>this.L.off(t,"mouseDragStopSeriesBackground"),this.offSeriesBackgroundMouseWheel=t=>this.L.off(t,"mouseWheelSeriesBackground"),this.offSeriesBackgroundTouchStart=t=>this.L.off(t,"touchStartSeriesBackground"),this.offSeriesBackgroundTouchMove=t=>this.L.off(t,"touchMoveSeriesBackground"),this.offSeriesBackgroundTouchEnd=t=>this.L.off(t,"touchEndSeriesBackground"),this.Ev=this.es.Cg()}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.Bv.forEach((i=>i.setAnimationHighlight(t))),this}zv(t,i){this.Ev.As([i]),t.setMouseMoveEventHandler(((t,i)=>{this.L.emit("mouseMoveSeriesBackground",this,i)})).setMouseEnterEventHandler(((t,i)=>{this.L.emit("mouseEnterSeriesBackground",this,i)})).setMouseLeaveEventHandler(((t,i)=>{this.L.emit("mouseLeaveSeriesBackground",this,i)})).setMouseDownEventHandler(((t,i)=>this.L.emit("mouseDownSeriesBackground",this,i))).setMouseUpEventHandler(((t,i)=>this.L.emit("mouseUpSeriesBackground",this,i))).setMouseClickEventHandler(((t,i)=>this.L.emit("mouseClickSeriesBackground",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.L.emit("mouseDoubleClickSeriesBackground",this,i))).setMouseWheelEventHandler(((t,i)=>this.L.emit("mouseWheelSeriesBackground",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.L.emit("mouseDragStartSeriesBackground",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.L.emit("mouseDragSeriesBackground",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.L.emit("mouseDragStopSeriesBackground",this,i,s,e))).setTouchStartEventHandler(((t,i)=>{this.L.emit("touchStartSeriesBackground",this,i)})).setTouchMoveEventHandler(((t,i)=>{this.L.emit("touchMoveSeriesBackground",this,i)})).setTouchEndEventHandler(((t,i)=>{this.L.emit("touchEndSeriesBackground",this,i)}))}setSeriesBackgroundFillStyle(t){return this.Vv.De(t),this.us.xs(),this}getSeriesBackgroundFillStyle(){return this.Vv.$h()}setSeriesBackgroundStrokeStyle(t){return this.Ov.Pe(t),this.us.xs(),this}getSeriesBackgroundStrokeStyle(){return this.Ov.mo()}setSeriesBackgroundEffect(t){return this.Ev.bs(t),this.us.xs(),this}getSeriesBackgroundEffect(){return this.Ev.Ms()}Nv(t){this.Bv.push(t),void 0!==this.Gv&&t.setHighlightOnHover(this.Gv),this.L.emit("seriesAdded",this,t)}sf(){return this.Bv}setSeriesHighlightOnHover(t){return this.Gv=t,this.Bv.forEach((i=>i.setHighlightOnHover(t))),this}dispose(){return this.Bv.slice().forEach(Ut),super.dispose()}Ny(t){return this.L.on("seriesAdded",t)}Wv(t){return this.L.off(t)}Uv(t){return this.L.on("seriesDispose",t)}Yv(t){return this.L.off(t)}}const Gl=Ji.normalize({x:-.5610788649579117,y:-.35242840511865414,z:-1.1349149375849081});class Wl{constructor(t,i,s,e){this.Hv=!0,this.$v=!0,this.Xv=2*-Math.PI/2160,this.jv=2*Math.PI/2160,this.Zv=.1,this.Qv=1*Math.PI/180,this.Jv=t,this.Kv=i,this.qv=s,this.Zp=e}getDefaultCameraConfiguration(t){const i={direction:Gl,location:Ji.multiply(Gl,-1)};return this.cameraLocationChanged({boundingBox:t,cameraDirection:i.direction,cameraLocation:i.location})||i}applyCameraInteractions(t,i){let s={direction:t.cameraDirection,location:t.cameraLocation};return i.forEach((t=>{"rotate"===t.type?s=this.tS(s,t):"wheel-zoom"===t.type?s=this.iS(s,t):"rotate+zoom"===t.type?s=this.sS(s,t):"fixed-rotate"===t.type?s=this.eS(s,t):"move"===t.type&&(s=this.hS(s,t))})),this.Hv?s=this.rS(t.boundingBox,s):this.$v&&(s=this.nS(t.boundingBox,s)),s}tS(t,i){const{rotation:s}=i,e=t.location,h=Ji.multiply(Ji.normalize(t.location),-1),{Right:r,Up:n}=this.oS(h);let o=e;const a=this.aS(h),l=s.x*this.Xv*a;o=Ji.rotateAroundAxis(o,n,l);const u=(s.y>0?1:-1)*Math.min(Math.abs(s.y)*this.jv,a-this.Qv);return 0!==u&&(o=Ji.rotateAroundAxis(o,r,u)),{location:o,direction:Ji.multiply(Ji.normalize(o),-1)}}iS(t,i){const{deltaY:s}=i;this.Hv&&this.lS(!1);const e=t.location,h=Ji.multiply(Ji.normalize(e),-1),r=s*this.Zv,n=Ji.length(e)*-r;return{direction:h,location:Ji.addVec(e,Ji.multiply(h,n))}}sS(t,i){const{rotation:s,cameraDistance:e}=i;this.Hv&&this.lS(!1);let h=this.tS(t,{type:"rotate",rotation:s});const r=h.location,n=Ji.multiply(Ji.normalize(r),-1),o=Ji.multiply(n,-e);return h={direction:Ji.multiply(Ji.normalize(o),-1),location:o},h}eS(t,i){this.Hv&&this.lS(!1);const{rotation:s}=i,e=t.location,h=t.direction,{Right:r,Up:n}=this.oS(h),o=s.x*this.Xv;let a=Ji.normalize(Ji.rotateAroundAxis(h,n,o));const l=s.y*this.jv;return a=Ji.normalize(Ji.rotateAroundAxis(a,r,l)),{location:e,direction:a}}hS(t,i){this.Hv&&this.lS(!1),this.$v=!1;const{amountRight:s,amountForward:e}=i,h=t.location,r=t.direction,{Right:n}=this.oS(r);return{location:Ji.addVec(h,Ji.multiply(r,.01*e),Ji.multiply(n,.01*s)),direction:r}}boundingBoxChanged(t){const i={location:t.cameraLocation,direction:Ji.multiply(Ji.normalize(t.cameraLocation),-1)};return this.Hv?this.rS(t.boundingBox,i):this.nS(t.boundingBox,i)}cameraLocationChanged(t){const i={location:t.cameraLocation,direction:Ji.multiply(Ji.normalize(t.cameraLocation),-1)};return this.Hv?this.rS(t.boundingBox,i):this.nS(t.boundingBox,i)}viewportChanged(t){const i={location:t.cameraLocation,direction:Ji.multiply(Ji.normalize(t.cameraLocation),-1)};if(this.Hv)return this.rS(t.boundingBox,i)}rS(t,i,s){let e=i;s=void 0!==s?s:0,e=this.uS(t,e,100,20,1,s,5);const h=this.aS(e.direction);return e=this.cS(e,this.dS(t,e,100,1),h),e}uS(t,i,s,e,h,r,n){return Ul(r,n,(t=>({direction:i.direction,location:Ji.multiply(i.direction,-t)})),(i=>this.fS(t,i)),s,h,"linear",e)}dS(t,i,s,e){const{Right:h,Left:r,Up:n,Down:o}=this.oS(i.direction),a=this.AS(t,!1,i);let l=i;const u=e,c=.1;return Math.abs(a.bottom-a.top)>u&&(l=a.bottom<a.top?Yl(0,c,(t=>({location:l.location,direction:Ji.normalize(Ji.lerp(l.direction,o,t))})),(i=>this.gS(t,i)),0,u,!0,s):Yl(0,c,(t=>({location:l.location,direction:Ji.normalize(Ji.lerp(l.direction,n,t))})),(i=>this.gS(t,i)),0,u,!0,s)),Math.abs(a.left-a.right)>u&&(l=a.left<a.right?Yl(0,c,(t=>({location:l.location,direction:Ji.normalize(Ji.lerp(l.direction,r,t))})),(i=>this.yS(t,i)),0,u,!0,s):Yl(0,c,(t=>({location:l.location,direction:Ji.normalize(Ji.lerp(l.direction,h,t))})),(i=>this.yS(t,i)),0,u,!0,s)),l}fS(t,i){const s=this.AS(t,!0,i);return Math.min(s.left+s.right,s.top+s.bottom)}yS(t,i){const s=this.AS(t,!1,i);return Math.abs(s.left-s.right)}gS(t,i){const s=this.AS(t,!1,i);return Math.abs(s.top-s.bottom)}AS(t,i,s){const e=As(this.mS(t,i,s).map((t=>At(t,this.Jv,this.Kv))));return{left:e.min.x,right:this.Kv.x.getInnerEnd()-e.max.x,top:this.Kv.y.getInnerEnd()-e.max.y,bottom:e.min.y}}mS(t,i,s){const e=this.qv,h=l(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),r=l(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),n=[],o=i?16:4,a=(h.x+r.x)/2,u=(h.z+r.z)/2,c=Math.sqrt(2)*(r.x-a),d=Math.sqrt(2)*(r.z-u);return[h.y,r.y].forEach((t=>{for(let i=0;i<o;i+=1){const s=Math.PI/4+2*Math.PI*i/o,e=a+Math.cos(s)*c,h=u+Math.sin(s)*d;n.push({x:e,y:t,z:h})}})),n.map((t=>this.Zp(t,s))).filter((t=>void 0!==t))}nS(t,i){const s=Ji.length(i.location),e=this.pS(t);return s<e?{direction:i.direction,location:Ji.multiply(i.direction,-e)}:i}pS(t){return.8*Math.sqrt(t.x**2+t.y**2+t.z**2)}oS(t){const i=l(0,1,0),s=Ji.normalize(Ji.cross(i,Ji.multiply(t,-1)));let e=Ji.cross(s,t);return e.y=Math.abs(e.y),e=Ji.normalize(e),{Right:s,Up:e,Down:Ji.multiply(e,-1),Left:Ji.multiply(s,-1)}}aS(t){const i={x:0,y:1,z:0},s=Ji.angle(t,i),e=Ji.angle(t,Ji.multiply(i,-1));return Math.min(s,e)}cS(t,i,s){return{location:Ji.lerp(t.location,i.location,s),direction:Ji.normalize(Ji.lerp(t.direction,i.direction,s))}}lS(t){return this.Hv=t,this}vS(){return this.Hv}}const Ul=(t,i,s,e,h,r,n,o)=>{let a,l=0,u=(i+t)/2;do{const o=s(u);if(a={value:u,result:o,score:e(o)},Math.abs(a.score-h)<=r)break;const c=a.score>h;c&&"linear"===n||!c&&"reversed"===n?(u=(a.value+t)/2,i=a.value):(u=(a.value+i)/2,t=a.value),l+=1}while(l<o);return a.result},Yl=(t,i,s,e,h,r,n,o)=>{let a,l=0,u=t;do{const c=s(u),d=e(c);if(void 0===a||Math.abs(d-h)<Math.abs(a.score-h)){if(a={value:u,result:c,score:e(c)},Math.abs(a.score-h)<=r)break}else if(n)break;l+=1,u+=1/(o-1)*(i-t)}while(l<o);return a.result};class Hl extends Pl{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.ws="Surface Grid Series 3D",this.SS={},this.Mv=!1,this.jd=()=>ki(this.ke),this.ov=vn;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.chart.getSeries().length;this.ke=Ii(this.qi.surfaceGridSeries3DFillStyle,n),this.bS=Ii(this.qi.surfaceGridSeries3DWireframeStyle,n);const o={heatmapDataType:"intensity",dataOrder:e.dataOrder||"columns",columns:e.columns,rows:e.rows};this.Jn=o,this.Za=this.Rp.MS(o).De(this.ke).xS(this.bS).yv(this.ov).cs(this.getHighlight()),this.fs(this.Za),this.setHighlightOnHover(!1)}Ji(t,i){const s=null==t?void 0:t.dataPoint;if(s)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.mg,axisLocation:s},...s,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:Z(this.ke)?this.ke.lut:void 0}}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke})}_S(){const t=this.SS.start||{x:0,z:0};let i;i=this.SS.end?{x:(this.SS.end.x-t.x)/this.Jn.columns,z:(this.SS.end.z-t.z)/this.Jn.rows}:this.SS.step?this.SS.step:{x:1,z:1},this.Za.wS(t,i),this.chart.us.xs()}setStart(t){return this.SS.start=t,this._S(),this}getStart(){return this.Za.CS().start}setStep(t){return this.SS.step=t,this._S(),this}getStep(){return this.Za.CS().step}setEnd(t){return this.SS.end=t,this._S(),this}getEnd(){return this.Za.CS().end}setFillStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.Za.De(this.ke),this.Rp.xs(),this}getFillStyle(){return this.ke}setWireframeStyle(t){return this.bS="function"==typeof t?t(this.bS):t,this.Za.xS(this.bS),this.Rp.xs(),this}getWireframeStyle(){return this.Za.kS()}setIntensityInterpolation(t){return t=t||"disabled",this.Za.TS(t),this.Rp.xs(),this}getIntensityInterpolation(){return this.Za.FS()}invalidateIntensityValues(t){if(this.Mv&&this.chart.us.jn(Vo.kf),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Jn.dataOrder?t.length:t[0].length,rows:"rows"===this.Jn.dataOrder?t.length:t[0].length},s="columns"===this.Jn.dataOrder?this.Jn.columns:this.Jn.rows,e="columns"===this.Jn.dataOrder?this.Jn.rows:this.Jn.columns;if(i.x>s||i.y>e){if(!0===this.chart.vA.qn){const t=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.Jn.columns}x${this.Jn.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;Ot.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.Za.IS({type:"intensity",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Jn.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Jn.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.Jn.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.Jn.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.Jn.dataOrder?this.Jn.columns:this.Jn.rows)-1,o=("columns"===this.Jn.dataOrder?this.Jn.rows:this.Jn.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.chart.vA.qn){const s=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.Jn.columns}x${this.Jn.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Ot.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),u=Math.max(e-n,0),c=Math.max(r-o,0),d=i.primary-(a+u),f=[];if(0===l&&0===c)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),h=Math.max(h,0)}this.Za.IS({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.Rp.xs(),this.Mv=!0,this}invalidateHeightMap(t){if(this.Mv&&this.chart.us.jn(Vo.kf),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Jn.dataOrder?t.length:t[0].length,rows:"rows"===this.Jn.dataOrder?t.length:t[0].length},s="columns"===this.Jn.dataOrder?this.Jn.columns:this.Jn.rows,e="columns"===this.Jn.dataOrder?this.Jn.rows:this.Jn.columns;if(i.x>s||i.y>e){if(!0===this.chart.vA.qn){const t=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.Jn.columns}x${this.Jn.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;Ot.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.Za.PS({type:"y",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Jn.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Jn.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.Jn.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.Jn.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.Jn.dataOrder?this.Jn.columns:this.Jn.rows)-1,o=("columns"===this.Jn.dataOrder?this.Jn.rows:this.Jn.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.chart.vA.qn){const s=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.Jn.columns}x${this.Jn.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Ot.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),u=Math.max(e-n,0),c=Math.max(r-o,0),d=i.primary-(a+u),f=[];if(0===l&&0===c)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),h=Math.max(h,0)}this.Za.PS({type:"y",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.Rp.xs(),this.Mv=!0,this}setCullMode(t){return this.Za.DS("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.Za.BS()}pv(){}Le(){}xp(){}nv(){return this.lv&&this.getVisible()}Ee(t,i){t.cs(i),this.Rp.xs()}}class $l extends Pl{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.ws="Surface Grid Series 3D",this.SS={},this.jd=()=>ki(this.ke),this.chart.us.jn(Vo.kf),this.ov=vn;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.chart.getSeries().length;this.ke=Ii(this.qi.surfaceScrollingGridSeries3DFillStyle,n),this.bS=Ii(this.qi.surfaceScrollingGridSeries3DWireframeStyle,n);const o={heatmapDataType:"intensity",scrollDimension:e.scrollDimension||"columns",columns:e.columns,rows:e.rows};this.Jn=o,this.Za=this.Rp.LS(o).De(this.ke).xS(this.bS).yv(this.ov).cs(this.getHighlight()),this.fs(this.Za),this.setHighlightOnHover(!1)}Ji(t,i){const s=null==t?void 0:t.dataPoint;if(s)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.mg,axisLocation:s},...s,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:Z(this.ke)?this.ke.lut:void 0}}_S(){const t=this.SS.start||{x:0,z:0};let i;i=this.SS.step?this.SS.step:{x:1,z:1},this.Za.wS(t,i),this.chart.us.xs()}setStart(t){return this.SS.start=t,this._S(),this}getStart(){return this.Za.CS().start}setStep(t){return this.SS.step=t,this._S(),this}getStep(){return this.Za.CS().step}setFillStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.Za.De(this.ke),this.Rp.xs(),this}getFillStyle(){return this.ke}setWireframeStyle(t){return this.bS="function"==typeof t?t(this.bS):t,this.Za.xS(this.bS),this.Rp.xs(),this}getWireframeStyle(){return this.Za.kS()}setIntensityInterpolation(t){return t=t||"disabled",this.Za.TS(t),this.Rp.xs(),this}getIntensityInterpolation(){return this.Za.FS()}clear(){return this.Za.Vt(),this.Rp.xs(),this}addValues(t){if(!t)return this;let i=t.yValues,s=t.intensityValues;if(!i&&!s)return this;if(i&&0===i.length&&(i=void 0),s&&0===s.length&&(s=void 0),i){const t=i[0].length,s=0+t-1,e="columns"===this.Jn.scrollDimension?this.Jn.rows:this.Jn.columns;if(s>e-1){if(!0===this.chart.vA.qn){const i=`SurfaceScrollingGridSeries3D.addValues input yValues overflow.\nGrid was created with ${e} ${"columns"===this.Jn.scrollDimension?"rows":"columns"}, input yValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Ot.console.warn(i)}const s=[];for(let t=0;t<i.length;t+=1)s[t]=i[t].slice(0,e+1);i=s}}if(s){const t=s[0].length,i=0+t-1,e="columns"===this.Jn.scrollDimension?this.Jn.rows:this.Jn.columns;if(i>e-1){if(!0===this.chart.vA.qn){const i=`SurfaceScrollingGridSeries3D.addValues intensityValues overflow.\nGrid was created with ${e} ${"columns"===this.Jn.scrollDimension?"rows":"columns"}, input intensityValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Ot.console.warn(i)}const i=[];for(let t=0;t<s.length;t+=1)i[t]=s[t].slice(0,e+1);s=i}}if(i&&s){const t=i.length,e=s.length;if(t!==e){if(!0===this.chart.vA.qn){const i=`SurfaceScrollingGridSeries3D.addValues input yValues and intensityValues size does not match.\nyValues: ${t}\nintensityValues: ${e}\nData will be automatically clipped according to the smaller supplied sample. This can result in sub-optimal performance.`;Ot.console.warn(i)}t>e?i=i.slice(0,e):s=s.slice(0,t)}}const e=i?i.length:null==s?void 0:s.length,h=i?i[0].length:null==s?void 0:s[0].length;return this.Za.RS({startPrimary:0,startSecondary:0,lengthPrimary:e,lengthSecondary:h,heightMapValues:i,intensityValues:s}),this.Rp.xs(),this}setCullMode(t){return this.Za.DS("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.Za.BS()}pv(){}Le(){}xp(){}nv(){return this.lv&&this.getVisible()}Ee(t,i){t.cs(i),this.Rp.xs()}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke})}}const Xl=t=>!!(t&&"object"==typeof t&&"id"in t&&"chart"in t&&t.chart instanceof ql),jl=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y&&"z"in t&&"number"==typeof t.z);class Zl extends Pl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.ws="Mesh Model 3D",this.ES=new Float32Array,this.ft={x:1,y:1,z:1},this.zS={x:0,y:0,z:0},this.VS={x:0,y:0,z:0},this.OS={x:0,y:0,z:0},this.NS={x:0,y:0,z:0},this.qa=is,this.jd=()=>ki(this.getFillStyle());const n=void 0!==(null==h?void 0:h.automaticColorIndex)?h.automaticColorIndex:this.chart.getSeries().length;this.Za=this.Rp.GS().mv(this.uv).De(Ii(this.qi.meshModel3DFillStyle||this.qi.pointSeriesFillStyle,n)).cs(this.getHighlight()),this.fs(this.Za)}Ji(t,i){const s=this.getFillStyle();return ji({series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:Z(s)?s.lut:void 0},{cursorPosition:0,index:0,x:0,y:0,z:0,value:0},(()=>{const e=this.Za.WS(t,i);if(e)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.mg,axisLocation:e.coordAxis},...e.coordAxis,index:e.index,value:e.value,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:Z(s)?s.lut:void 0}}))}setModelGeometry(t){const{indices:i,vertices:s,normals:e}=t;let h=qi,r=Ki,n=qi,o=Ki,a=qi,l=Ki;for(let t=0;t<s.length;t+=3){const i=s[t],e=s[t+1],u=s[t+2];h=Math.max(h,i),r=Math.min(r,i),n=Math.max(n,e),o=Math.min(o,e),a=Math.max(a,u),l=Math.min(l,u)}this.qa={min:{x:r,y:o,z:l},max:{x:h,y:n,z:a}};for(let t=0;t<s.length;t+=3)s[t]-=this.qa.min.x,s[t+1]-=this.qa.min.y,s[t+2]-=this.qa.min.z;return this.NS={x:this.qa.max.x-this.qa.min.x,y:this.qa.max.y-this.qa.min.y,z:this.qa.max.z-this.qa.min.z},this.ES=s instanceof Float32Array?s:new Float32Array(s),this.checkedNormals=e&&!Number.isNaN(e[0])?e instanceof Float32Array?e:new Float32Array(e):void 0,this.checkedNormals||this.setColorShadingStyle(vn),this.Za.US({vertices:this.ES,normals:this.checkedNormals,indices:i instanceof Uint16Array?i:new Uint16Array(i),modelSize:this.NS}),this.chart.us.xs(),this}setVertexValues(t){return this.Za.YS(t),this.chart.us.xs(),this}setScale(t){const i={x:"number"==typeof t?t:(null==t?void 0:t.x)||1,y:"number"==typeof t?t:(null==t?void 0:t.y)||1,z:"number"==typeof t?t:(null==t?void 0:t.z)||1};return this.ft=i,this.Za.HS(i),this.chart.us.xs(),this}getScale(){return this.ft}setModelLocation(t){return this.VS=t,this.Za.$S(t),this.chart.us.xs(),this}getModelLocation(){return this.VS}setModelAlignment(t){return this.zS=t,this.Za.XS(t),this.chart.us.xs(),this}getModelAlignment(){return this.zS}setModelRotation(t){const i={x:Bs(t.x),y:Bs(t.y),z:Bs(t.z)};return this.OS=i,this.Za.jS(this.OS),this.chart.us.xs(),this}getModelRotation(){return this.OS}setBackfaceCullingMode(t){return this.Za.ZS(t),this.chart.us.xs(),this}getBackfaceCullingMode(){return this.Za.QS()}setFillStyle(t){return this.Za.De(t),this.chart.us.xs(),this}getFillStyle(){return this.Za.$h()}setColorShadingStyle(t){return this.checkedNormals||t!==xn?super.setColorShadingStyle(t):(console.warn("Phong shading style is not supported without normals. Switching to Simple shading style."),super.setColorShadingStyle(new Mn.Simple))}nv(){return!1}Ee(t,i){t.cs(i),this.chart.us.xs()}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.getFillStyle()})}}class Ql extends $a{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r),this.chart=n,this.JS=this.chart.getDefaultAxisX().addCustomTick().setVisible(!1).setGridStrokeStyle(r.cursor3DGridStrokeStyleX).setTickStyle(r.cursor3DTickStrokeStyleX).setTextFillStyle(r.cursor3DTickLabelFillStyleX).setTextFont(r.cursor3DTickLabelFontX).setBackgroundFillStyle(r.cursor3DTickLabelBackgroundFillStyleX).setBackgroundStrokeStyle(r.cursor3DTickLabelBackgroundStrokeStyleX).setPadding(r.cursor3DTickLabelPaddingX),this.KS=this.chart.getDefaultAxisY().addCustomTick().setVisible(!1).setGridStrokeStyle(r.cursor3DGridStrokeStyleY).setTickStyle(r.cursor3DTickStrokeStyleY).setTextFillStyle(r.cursor3DTickLabelFillStyleY).setTextFont(r.cursor3DTickLabelFontY).setBackgroundFillStyle(r.cursor3DTickLabelBackgroundFillStyleY).setBackgroundStrokeStyle(r.cursor3DTickLabelBackgroundStrokeStyleY).setPadding(r.cursor3DTickLabelPaddingY),this.qS=this.chart.getDefaultAxisZ().addCustomTick().setVisible(!1).setGridStrokeStyle(r.cursor3DGridStrokeStyleZ).setTickStyle(r.cursor3DTickStrokeStyleZ).setTextFillStyle(r.cursor3DTickLabelFillStyleZ).setTextFont(r.cursor3DTickLabelFontZ).setBackgroundFillStyle(r.cursor3DTickLabelBackgroundFillStyleZ).setBackgroundStrokeStyle(r.cursor3DTickLabelBackgroundStrokeStyleZ).setPadding(r.cursor3DTickLabelPaddingZ)}setTickX(t){return t(this.JS),this.chart.us.xs(),this}setTickY(t){return t(this.KS),this.chart.us.xs(),this}setTickZ(t){return t(this.qS),this.chart.us.xs(),this}setTicks(t){return t(this.JS),t(this.KS),t(this.qS),this.chart.us.xs(),this}dispose(){return super.dispose(),this.JS.dispose(),this.KS.dispose(),this.qS.dispose(),this}Le(){return this.JS.setVisible(this.ji&&this.ny),this.KS.setVisible(this.ji&&this.ny),this.qS.setVisible(this.ji&&this.ny),super.Le()}setPosition(t){this.ny=!0;const i=this.renderingScale,s=Ta(t.resultTableScale,i),e=s===this.scale?t.resultTable:At(t.resultTable,s,this.scale);this.Xy.setPosition(e),this.JS.setValue(t.axisLocation.x),this.KS.setValue(t.axisLocation.y),this.qS.setValue(t.axisLocation.z);let h=this.nm[0];if(!h){const t=new Jn(this.Ds,this.renderingScale,this.scale,Yt,this.qi).setMouseInteractions(!1).setFillStyle(this.qi.cursorPointMarkerFillStyle).setSize(this.qi.cursorPointMarkerSize).setShape(this.qi.cursorPointMarkerShape);h={pointMarker:t,targetVisible:!0},this.nm.push(h),this.lm.forEach((i=>i(t)))}return h.pointMarker.setPosition(e),this.chart.us.xs(),this}}class Jl{constructor(t,i){this.gm=[],this.ym=(t,i)=>(this.gm.forEach((s=>s(t,i))),t),this.addStyler=t=>new Jl(this.dm,this.gm.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new Jl(t,this.gm.map((t=>t))),this.pm=(t,i,s,e,h,r)=>this.ym(new Ql(t,i,s,e,this.dm,h,r),h),this.dm=t,this.gm=i}}const Kl=new Jl(Xn,[(t,i)=>{Xa(t)}]);class ql extends Nl{constructor(t,i,s,e,h,r,o){var a;super(t,i,s,i.Py("chart3D bg",0),e,i.us.qi.chart3DBackgroundFillStyle,i.us.qi.chart3DBackgroundStrokeStyle,i.us.qi.chart3DTitleFont,i.us.qi.chart3DTitleFillStyle,r),this.tb=1,this.ib=[],this.sb=2,this.eb=!0,this.hb=!0,this.rb=!0,this.nb=0,this.coordsAxis={id:"axes",chart:this},this.coordsWorld={id:"world",chart:this},this.yn=[],this._n=()=>{const t=this.Rp.ob();this.lb.ab(t),this.ub.ab(t);const i=this.cb.viewportChanged(this.fb());i&&this.Ab(i),this.us.xs()},this.gb=!1,this.dv=(t,i,s,e,h)=>{if(this.gb=!0,this.rb){const t=h;this.ib.push({type:"rotate",rotation:t}),this.us.xs(),di(i)}},this.fv=(t,i,s,e,h)=>{this.gb=!1},this.cv=(t,i)=>{if(this.hb){if(this.eb)Math.sign(this.nb)!==Math.sign(i.deltaY)?this.nb=Pi(i):this.nb+=Pi(i);else{const t=Pi(i);this.ib.push({type:"wheel-zoom",deltaY:t})}this.us.xs(),di(i)}},this.us.jn(Vo.vf),this.bh.yr("Chart3D"),this.yb=s.d3(),this.yb.x.K(-1,1),this.yb.y.K(-1,1),this.yb.z.K(-1,1),this.Rp=i.mb("chart3D layer3D",0,this.yb),this.lb=i.pb("chart3D series bg",0),this.ub=i.jm("chart3D axis ui",1),this.vb={x:new wl(this,(a=()=>this.Bv,{...Tl(a,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.Pr().x)),Ip:t=>t.x,Kp:(t,i)=>({x:t.x,y:i.y,z:i.z}),hf:l(0,-1,0),qp:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:l(0,i.y,i.z),gridlinePositionB:l(0,i.y,-i.z),gridlinePositionC:l(0,-i.y,-i.z)}},ev:()=>!0,hv:()=>!1,Jp:()=>!1}),this.yb.x,this.qi,this.Rp,this.ub,this.mg,!1,this.es),y:new wl(this,Fl((()=>this.Bv)),this.yb.y,this.qi,this.Rp,this.ub,this.mg,!1,this.es),z:new wl(this,Il((()=>this.Bv)),this.yb.z,this.qi,this.Rp,this.ub,this.mg,!1,this.es)},this.Sb=this.Rp.op([gl.InternalUI]).setMouseInteractions(!1),this.setBoundingBoxStrokeStyle(this.qi.chart3DBoundingBoxStrokeStyle),this.Vv=this.lb.ac(this.us.ft,Pr.Simple).De(this.qi.chart3DSeriesBackgroundFillStyle).Pe(at).setMouseInteractions(!0),this.Ov=this.lb.ac(this.us.ft,Pr.Simple).De(O).Pe(this.qi.chart3DSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.zv(this.Vv,this.Ov),this.bb({x:1,y:1,z:1},!0),this.cb=new Wl(this.us.ft,this.mg,this.yb,((t,i)=>(i&&this.Ab(i),this.Rp.Zp(t)))),this.xb=this.cb.getDefaultCameraConfiguration(this.Mb(this._b)),this.Ab(this.xb);const u=jt(o?o.cursorBuilder:void 0,Kl),c=i.Qm();let d;this.Jm=Va(this,c,u.pm(c,this.mg,this.mg,Yt,this.qi,this),this,"show-pointed",tu,(()=>0)),this.Av=Ae(new me(((t,i,s)=>{d={locationOne:i,locationTwo:s,cameraLocation:this.Rp.getCameraLocation()}}),((t,i,s,e,h,r)=>{if(!this.rb&&!this.hb)return;const o=(d.locationOne.x-d.locationTwo.x)**2+(d.locationOne.y-d.locationTwo.y)**2,a=(i.x-s.x)**2+(i.y-s.y)**2,l=Ji.length(d.cameraLocation),u=o/a*l,c=n((e.x+h.x)/2,(e.y+h.y)/2);this.ib.push({type:"rotate+zoom",rotation:this.rb?c:{x:0,y:0},cameraDistance:this.hb?u:l}),this.us.xs(),di(r)}),(t=>{})),new ye((t=>{}),((t,i,s,e,h)=>{if(this.rb){const t=e;this.ib.push({type:"rotate",rotation:t}),this.us.xs(),di(h)}}),(t=>{}))),this.onBackgroundTouchStart(this.Av.onTouchStart),this.onBackgroundTouchMove(this.Av.onTouchMove),this.onBackgroundTouchEnd(this.Av.onTouchEnd),this.onSeriesBackgroundTouchStart(this.Av.onTouchStart),this.onSeriesBackgroundTouchMove(this.Av.onTouchMove),this.onSeriesBackgroundTouchEnd(this.Av.onTouchEnd),this.onBackgroundMouseDrag(this.dv),this.onBackgroundMouseDragStop(this.fv),this.onBackgroundMouseWheel(this.cv),this.onBackgroundMouseDown(((t,i)=>{di(i)})),this.onSeriesBackgroundMouseDrag(this.dv),this.onSeriesBackgroundMouseDragStop(this.fv),this.onSeriesBackgroundMouseWheel(this.cv),this.onSeriesBackgroundMouseDown(((t,i)=>{di(i)})),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled)),this.onResize(this._n),this._n(),this.Iy(h,this.mg)}setProjection(t){this.Rp.wb(t);const i=this.cb.viewportChanged(this.fb());return i&&this.Ab(i),this.us.xs(),this}getProjection(){return this.Rp.Cb()}setCursor(t){return this.Jm.setCursor(t),this}getCursor(){return this.Jm.getCursor()}setCursorMode(t){return this.Jm.setCursorMode(t),this}getCursorMode(){return this.Jm.getCursorMode()}setCustomCursor(t){return this.Jm.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.Jm.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.Jm.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Jm.setCursorFormatting(t),this}getCursorFormatting(){return this.Jm.getCursorFormatting()}addCursor(t=Kl){const i=this.vy(),s=t.pm(i,this.mg,this.mg,this.Ay(i),this.qi,this);return this.ky(s),s}addPointSeries(t){const i=new(t&&t.type||zl)(this,this.Rv,this.Rp,this.qi,this.us.es,t);return this.Nv(i),i}addLineSeries(t){const i=new Ll(this,this.Rv,this.Rp,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,this.us.es);return this.Nv(i),i}addPointLineSeries(t){const i=new Rl(this,this.Rv,this.Rp,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,this.us.es);return this.Nv(i),i}addSurfaceGridSeries(t){const i=new Hl(this,this.Rv,this.Rp,t,this.qi,this.us.es);return this.Nv(i),i}addSurfaceScrollingGridSeries(t){const i=new $l(this,this.Rv,this.Rp,t,this.qi,this.us.es);return this.Nv(i),i}addBoxSeries(t){const i=new Dl(this,this.Rv,this.Rp,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,this.us.es);return this.Nv(i),i}addMeshModel(t){const i=new Zl(this,this.Rv,this.Rp,this.qi,t,this.us.es);return this.Nv(i),i}translateCoordinate(t,i,s){if(Xl(i)||Xl(s)||jl(t)){if(Xl(i)&&Xl(s)&&jl(t)){if("axes"===i.id&&"world"===s.id)return this.Rp.kb(t);if("world"===i.id&&"axes"===s.id)return this.Rp.Tb(t);if(i.id===s.id)return t}if(Xl(i)&&ie(s)&&jl(t)){const i=this.Rp.Zp(t);return i?this.us.No({engineX:i.x,engineY:i.y}):{clientX:-1,clientY:-1}}if(Xl(i)&&ee(s)&&jl(t)){const i=this.Rp.Zp(t);return i?At(i,this.us.ft,this.mg):{clientX:-1,clientY:-1}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}return Fa(t,i,s,this.mg,this.us)}getDefaultAxisX(){return this.vb.x}getDefaultAxisY(){return this.vb.y}getDefaultAxisZ(){return this.vb.z}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}get axisZ(){return this.getDefaultAxisZ()}get zAxis(){return this.getDefaultAxisZ()}getDefaultAxes(){return[this.vb.x,this.vb.y,this.vb.z]}setCameraLocation(t){let i={location:t,direction:Ji.normalize(Ji.multiply(t,-1))};const s=this.cb.cameraLocationChanged(this.fb(i));return s&&(i=s),this.Ab(i),this.us.xs(),this}getCameraLocation(){return this.Rp.getCameraLocation()}getCameraDirection(){return this.Rp.getCameraDirection()}setCameraAutomaticFittingEnabled(t){this.cb.lS(t);const i=this.cb.cameraLocationChanged(this.fb());return i&&this.Ab(i),this}getCameraAutomaticFittingEnabled(){return this.cb.vS()}onCameraChange(t){return this.L.on("cameraChange",t)}offCameraChange(t){return this.L.off(t,"cameraChange")}setBoundingBoxStrokeStyle(t){return this.Sb.Ge(t).Np(Sl(this.Sb.mu())),this.Rp.xs(),this}getBoundingBoxStrokeStyle(){return this.Sb.mu()}setBoundingBox(t){return this.bb(t,!1),this}bb(t,i){this._b=t;const s=this.Mb(t);if(this.yb.x.tt(s.x),this.yb.y.tt(s.y),this.yb.z.tt(-s.z),!i){const t=this.cb.boundingBoxChanged(this.fb());t&&this.Ab(t)}this.us.xs()}getBoundingBox(){return this._b}Le(t){if(Ra.Oy(this.bh,this.Dy),0!==this.nb){const i=this.nb*t*.006;this.ib.push({type:"wheel-zoom",deltaY:i}),this.nb=Math.sign(this.nb)*Math.max(Math.abs(this.nb)-.01*t,0),0!==this.nb&&this.us.xs(!0)}const i=this.getCameraDirection();if(this.ib.length>0){const t=this.cb.applyCameraInteractions(this.fb(),this.ib);t&&this.Ab(t),this.ib.length=0}this.Fb&&Ji.equals(this.Fb.location,this.xb.location)&&Ji.equals(this.Fb.direction,this.xb.direction)||this.L.emit("cameraChange",this,this.getCameraLocation()),this.Fb=this.xb,super.Le(t);for(let t=0;t<this.Bv.length;t+=1)this.Bv[t].pv();for(let t=0;t<this.Bv.length;t+=1)this.Bv[t].Le();this.vb.x.Dr(),this.vb.y.Dr(),this.vb.z.Dr(),this.vb.x.Le(i),this.vb.y.Le(i),this.vb.z.Le(i),this.Jm.Le(this.gb,this.Bv,void 0),super.Fy();const s=this.yb,e=l(s.x.getInnerStart(),s.y.getInnerStart(),s.z.getInnerStart()),h=l(s.x.getInnerEnd(),s.y.getInnerEnd(),s.z.getInnerEnd());this.Sb.Vt().fl([l(h.x,e.y,e.z),l(h.x,h.y,e.z),l(h.x,h.y,h.z),l(h.x,e.y,h.z),l(e.x,e.y,h.z),l(e.x,h.y,h.z),l(h.x,h.y,h.z),l(h.x,h.y,e.z),l(e.x,h.y,e.z),l(e.x,h.y,h.z),l(e.x,e.y,h.z),l(e.x,e.y,e.z)]);const r=[l(e.x,e.y,e.z),l(h.x,e.y,e.z),l(e.x,h.y,e.z),l(h.x,h.y,e.z),l(e.x,e.y,h.z),l(h.x,e.y,h.z),l(e.x,h.y,h.z),l(h.x,h.y,h.z)].map((t=>this.Rp.Zp(t))),n=this.Rp.Zp(l((e.x+h.x)/2,(e.y+h.y)/2,(e.z+h.z)/2)),o=bi(r,n),a=[];for(let t=0;t<o.length;t+=1){const i=o[t];ps(i,n,o[t>0?t-1:o.length-1],o[t<o.length-1?t+1:0])||a.push(i)}const u=bi(a,n);this.Vv.wl(u),this.Ov.wl(u);for(let t=0;t<this.Bv.length;t+=1)this.Bv[t].xp()}dispose(){return this.yn.forEach((t=>{t()})),this.yn.length=0,this.yb.U(),this.Rp.U(),this.ub.U(),this.lb.U(),this.Jm.U(),super.dispose()}Z(){return this.yb.x.Z(),this.yb.y.Z(),this.yb.z.Z(),super.Z()}J(){return super.J()}Ab(t){this.Rp.setCameraLocation(t.location).setCameraDirection(t.direction).setLightLocation(Ji.addVec(t.location,Ji.multiply(t.direction,-this.sb))),this.xb=t,this.us.xs()}Mb(t){return Ji.divide(t,Ji.length(t)/this.tb)}fb(t=this.xb){return{boundingBox:this.Mb(this._b),cameraLocation:t.location,cameraDirection:t.direction}}setMouseInteractions(t){return this.setMouseInteractionZoom(t).setMouseInteractionRotate(t)}setMouseInteractionZoom(t){return this.hb=t,this}getMouseInteractionZoom(){return this.hb}setMouseInteractionRotate(t){return this.rb=t,this}getMouseInteractionRotate(){return this.rb}forEachAxis(t){return t(this.vb.x),t(this.vb.y),t(this.vb.z),this}getSeries(){return this.Bv}getMinimumSize(){}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationZoom(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}setAnimationZoom(t){return this.eb=!!t,this}getAnimationZoom(){return this.eb}}const tu=(t,i,s)=>{var e,h;return bt(i)?za(i,[[i.series],[t.getDefaultAxisX().getTitle()||"X","",{text:ne(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:ne(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],[t.getDefaultAxisZ().getTitle()||"Z","",{text:ne(i.axisZ.formatValue(i.z),i.axisZ),font:{weight:"bold"}}],void 0!==i.intensity?["Value","",{text:ne(i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]:[]]):_t(i)?za(i,[[i.series],void 0!==i.value?["Value","",{text:ne(i.value.toFixed(2),null===(h=i.lut)||void 0===h?void 0:h.units),font:{weight:"bold"}}]:[]]):za(i,[[i.series],[t.getDefaultAxisX().getTitle()||"X","",{text:ne(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:ne(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],[t.getDefaultAxisZ().getTitle()||"Z","",{text:ne(i.axisZ.formatValue(i.z),i.axisZ),font:{weight:"bold"}}]])},iu={Column:oo,Row:ao};class su extends Da{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.Ib=new Map,this.Pb=this.addUIElement(iu.Row).setPosition({x:0,y:100}).setOrigin(je.LeftTop).setBackground((t=>t.setFillStyle(O).setStrokeStyle(at)))}add(t,i){return(t instanceof La?[t]:t instanceof Kf?t.getCells().filter((t=>t.panel instanceof La)).map((t=>t.panel)):[]).forEach((t=>{const s=this.Pb.addElement(zo.VerticalLegendBox).setBackground((t=>t.setFillStyle(O).setStrokeStyle(at))).add(t,i).setTitle(t.getTitle());this.Ib.set(t,s)})),this.us.xs(),this}setLegendBoxes(t){return this.Ib.forEach(((i,s)=>t(i,s))),this}getMinimumSize(){return super.getMinimumSize()||this.Pb.getSize()}}const eu={World:"World",USA:"USA",NorthAmerica:"NorthAmerica",SouthAmerica:"SouthAmerica",Canada:"Canada",Europe:"Europe",Asia:"Asia",Africa:"Africa",Australia:"Australia"},hu=(t,i)=>!(!i.name||t.name.toLowerCase()!==i.name.toLowerCase())||"ISO_A3"in t&&"ISO_A3"in i&&t.ISO_A3.toLowerCase()===i.ISO_A3.toLowerCase(),ru=(t,i)=>{let s=i.geometry;return s=nu(t,i,s),s=ou(t,i,s),s},nu=(t,i,s)=>{if(t===eu.Asia){const t=[];for(let i=0;i<s.length;i+=1){t[i]=[];const e=s[i],h=t[i];for(let t=0;t<e.length;t+=1){const i=e[t];i.x<-100?h[t]={x:i.x+360,y:i.y}:h[t]=i}}return t}return s},ou=(t,i,s)=>{const e=i.name.toLowerCase();let h;if(t===eu.USA&&("alaska"===e?h={translate:{x:55,y:-25},scale:{x:.16,y:.16}}:"hawaii"===e&&(h={translate:{x:48,y:7},scale:{x:1,y:1}})),h){const{translate:t,scale:r}=h,n=As(Xt(s)),o=[];for(let i=0;i<s.length;i+=1){o[i]=[];const h=s[i],a=o[i];for(let i=0;i<h.length;i+=1){const s=h[i];let o=s.x;"alaska"===e&&1===Math.sign(o)&&(o=-180-(180-o)),a[i]={x:t.x+(o-n.min.x)*r.x+n.min.x,y:t.y+(s.y-n.min.y)*r.y+n.min.y}}}return i.outlier=!0,i.transform={...h,vertexBoundaries:n},o}return s},au={World:{min:{x:-180,y:-90},max:{x:180.0000000000002,y:83.63410065300012}},Europe:{min:{x:-25,y:34},max:{x:40,y:70}},Africa:{min:{x:-17,y:-40},max:{x:52,y:37.37549753800012}},Asia:{min:{x:27,y:-10.922621351999808},max:{x:180.0000000000002,y:81.85871002800009}},NorthAmerica:{min:{x:-179.1435033839999,y:5.515082098000121},max:{x:-50,y:83.11652252800009}},SouthAmerica:{min:{x:-85,y:-55.9185042229998},max:{x:-35,y:15}},USA:{min:{x:-125,y:24},max:{x:-68,y:50}},Canada:{min:{x:-141.0181,y:41.7297},max:{x:-52.6194,y:75}},Australia:{min:{x:111,y:-43.6586},max:{x:155,y:-9.2199}}},lu={World:.6,Europe:1/1.4,Africa:1.3,Asia:.8,NorthAmerica:.9,SouthAmerica:1.5,USA:3/4,Canada:6/8,Australia:11/12};class uu extends La{constructor(t,i,s,e,h,r,n){super(t,i,s,i.Py("mapChart bg",0),e,i.us.qi.mapChartBackgroundFillStyle,i.us.qi.mapChartBackgroundStrokeStyle,i.us.qi.mapChartTitleFont,i.us.qi.mapChartTitleFillStyle,n),this.Db=[],this.ft=this.yy.d2({scaleXYConstructor:Ks}),this.Hi=!0,this.Bb=this.qi.mapChartSeparateRegionFillStyle,this.Lb=this.qi.mapChartSeparateRegionStrokeStyle,this.uh=!0,this.Rb=0,this.Eb=!0,this.zb=new Map,this.onMouseEnter=t=>this.L.on("mouseEnter",t),this.onMouseLeave=t=>this.L.on("mouseLeave",t),this.onMouseClick=t=>this.L.on("mouseClick",t),this.onMouseDoubleClick=t=>this.L.on("mouseDoubleClick",t),this.onMouseDown=t=>this.L.on("mouseDown",t),this.onMouseUp=t=>this.L.on("mouseUp",t),this.onMouseMove=t=>this.L.on("mouseMove",t),this.offMouseEnter=t=>this.L.off(t,"mouseEnter"),this.offMouseLeave=t=>this.L.off(t,"mouseLeave"),this.offMouseClick=t=>this.L.off(t,"mouseClick"),this.offMouseDoubleClick=t=>this.L.off(t,"mouseDoubleClick"),this.offMouseDown=t=>this.L.off(t,"mouseDown"),this.offMouseUp=t=>this.L.off(t,"mouseUp"),this.offMouseMove=t=>this.L.off(t,"mouseMove"),this.offMouseDragStart=t=>this.L.off(t,"mouseDragStart"),this.offMouseDrag=t=>this.L.off(t,"mouseDrag"),this.offMouseDragStop=t=>this.L.off(t,"mouseDragStop"),this.offMouseWheel=t=>this.L.off(t,"mouseWheel"),this.onMapDataReady=t=>{const i=this.L.on("mapDataReady",t);return this.Vb&&Ot.setTimeout((()=>t())),i},this.onViewChange=t=>this.L.on("viewChange",t),this.Ob=(t,i,s,e,h)=>{this.ft.x.tt(e).ii([this.$t.left+this.Ca.left,this.$t.right+this.Ca.right]),this.ft.y.tt(h).ii([this.$t.bottom+this.Ca.bottom,this.$t.top+this.Ca.top+Ra.Vy(this.bh,this.Dy)]),this.Nb&&this.Gb(this.Wb,this.ft,this.Nb)},this.Mt=(t,i)=>{const s=i;if(!s||!this.Vb)return;const e=this.Ub(this.Vb,s),h=null==e?void 0:e.region;h&&(this.getCursorMode()&&(this.Yb(e),di(t)),this.Eb&&this.us.ls.Cs(h,!0),this.Hb=h,this.L.emit("mouseEnter",this,t,e))},this._t=(t,i)=>{const s=i;if(!s||!this.Vb)return;const e=this.Ub(this.Vb,s),h=null==e?void 0:e.region;this.$b(),h&&(this.Eb&&this.us.ls.Cs(h,!1),this.Hb=void 0,this.L.emit("mouseLeave",this,t,e),t&&di(t))},this.Ft=(t,i)=>{const s=i;if(!s||!this.Vb)return;const e=this.Ub(this.Vb,s),h=null==e?void 0:e.region;h&&(this.getCursorMode()&&(this.Yb(e),di(t)),this.Hb=h,this.L.emit("mouseMove",this,t,e))},this.wt=(t,i)=>{const s=i;if(!s||!this.Vb)return;const e=this.Ub(this.Vb,s);this.L.emit("mouseClick",this,t,e)},this.Ct=(t,i)=>{const s=i;if(!s||!this.Vb)return;const e=this.Ub(this.Vb,s);this.L.emit("mouseDoubleClick",this,t,e)},this.kt=(t,i)=>{const s=i;if(!s||!this.Vb)return;const e=this.Ub(this.Vb,s);this.L.emit("mouseDown",this,t,e)},this.Tt=(t,i)=>{const s=i;if(!s||!this.Vb)return;const e=this.Ub(this.Vb,s);this.L.emit("mouseUp",this,t,e)},this.Pt=(t,i,s)=>{const e=s;if(!e||!this.Vb)return;const h=this.Ub(this.Vb,e);this.L.emit("mouseDragStart",this,t,i,h)},this.It=(t,i,s,e,h)=>{const r=h;if(!r||!this.Vb)return;const n=this.Ub(this.Vb,r);this.L.emit("mouseDrag",this,t,i,s,e,n)},this.Dt=(t,i,s,e)=>{const h=e;if(!h||!this.Vb)return;const r=this.Ub(this.Vb,h);this.L.emit("mouseDragStop",this,t,i,s,r)},this.Bt=(t,i)=>{const s=i;if(!s||!this.Vb)return;const e=this.Ub(this.Vb,s);this.L.emit("mouseWheel",this,t,e)},this.Lt=(t,i)=>{const s=i;if(!s||!this.Vb)return;const e=this.Ub(this.Vb,s),h=null==e?void 0:e.region;h&&(this.Yb(e),this.Eb&&this.us.ls.Cs(h,!0),this.Hb=h,this.L.emit("touchStart",this,t,e),di(t))},this.Rt=(t,i)=>{const s=i;if(!s||!this.Vb)return;const e=this.Ub(this.Vb,s),h=null==e?void 0:e.region;h&&(this.Yb(e),this.Hb=h,this.L.emit("touchMove",this,t,e),di(t))},this.Et=(t,i)=>{const s=i;if(!s||!this.Vb)return;const e=this.Ub(this.Vb,s),h=null==e?void 0:e.region;this.$b(),h&&(this.Eb&&this.us.ls.Cs(h,!1),this.Hb=void 0,this.L.emit("touchEnd",this,t,e),di(t))},this.us.jn(Vo.bf),this.uh=!1!==(null==r?void 0:r.animationsEnabled),this.Xb=i.jm("mapChart plotting",0),this.onResize(this.Ob),this.bh.yr("Map Chart");const o=i.Qm(),a=jt(r?r.cursorBuilder:void 0,sl);this.Jm=Va(this,o,a.pm(o,this.uiScale,this.uiScale,Yt,this.qi),void 0,"show-pointed",du,(()=>0)),this.jb=this.es.Cg(),this.Iy(h,this.uiScale),this.Zb=this.Xb.Yp(this.ft).setMouseInteractions(this.Hi).setMouseEnterEventHandler(((t,i,s)=>this.Mt(i,s))).setMouseLeaveEventHandler(((t,i,s)=>this._t(i,s))).setMouseClickEventHandler(((t,i,s)=>this.wt(i,s))).setMouseDoubleClickEventHandler(((t,i,s)=>this.Ct(i,s))).setMouseDownEventHandler(((t,i,s)=>this.kt(i,s))).setMouseUpEventHandler(((t,i,s)=>this.Tt(i,s))).setMouseMoveEventHandler(((t,i,s)=>this.Ft(i,s))).setMouseDragStartEventHandler(((t,i,s,e)=>this.Pt(i,s,e))).setMouseDragEventHandler(((t,i,s,e,h,r)=>this.It(i,s,e,h,r))).setMouseDragStopEventHandler(((t,i,s,e,h)=>this.Dt(i,s,e,h))).setMouseWheelEventHandler(((t,i,s)=>this.Bt(i,s))).setTouchStartEventHandler(((t,i,s)=>this.Lt(i,s))).setTouchMoveEventHandler(((t,i,s)=>this.Rt(i,s))).setTouchEndEventHandler(((t,i,s)=>this.Et(i,s))).De(this.qi.mapChartFillStyle).Pe(this.qi.mapChartStrokeStyle),this.Qb=this.Xb.Yp(this.ft).setMouseInteractions(this.Hi).De(this.qi.mapChartOutlierRegionFillStyle).Pe(this.qi.mapChartOutlierRegionStrokeStyle);const l=jt(r&&r.type,eu.World);this.Wb=l,this.Jb(l).then((()=>{this.L.emit("mapDataReady")}))}getRegionUnderMouse(){return this.Hb}setFillStyle(t){return this.Zb.De(t),this.us.xs(),this}getFillStyle(){return this.Zb.$h()}setStrokeStyle(t){return this.Zb.Pe(t),this.us.xs(),this}getStrokeStyle(){return this.Zb.mo()}setEffect(t){return this.jb.bs(t),this.us.xs(),this}getEffect(){return this.jb.Ms()}setOutlierRegionFillStyle(t){return this.Qb.De(t),this.us.xs(),this}getOutlierRegionFillStyle(){return this.Qb.$h()}setOutlierRegionStrokeStyle(t){return this.Qb.Pe(t),this.us.xs(),this}getOutlierRegionStrokeStyle(){return this.Qb.mo()}setSeparateRegionFillStyle(t){return this.Bb="function"==typeof t?t(this.Bb):t,this.Db.forEach((t=>t.De(this.Bb))),this.us.xs(),this}getSeparateRegionFillStyle(){return this.Bb}setSeparateRegionStrokeStyle(t){return this.Lb="function"==typeof t?t(this.Lb):t,this.Db.forEach((t=>t.Pe(this.Lb))),this.us.xs(),this}getSeparateRegionStrokeStyle(){return this.Lb}invalidateRegionValues(t){if(!this.Vb||!this.Kb)return this.qb=this.qb||[],this.qb.push(t),this;if("function"==typeof t)for(let i=0;i<this.Vb.regions.length;i+=1){const s=this.Vb.regions[i],e=this.Kb[i],h=t({...s,geometry:void 0},e);if(void 0!==h&&h!==e){this.Kb[i]=h;const t=this.zb.get(s);null==t||t.forEach((t=>{t.tx(h)}))}}else for(const i of t)if(i)for(let t=0;t<this.Vb.regions.length;t+=1){const s=this.Vb.regions[t],e=this.Kb[t];if(void 0!==i.value&&i.value!==e&&hu(s,i)){this.Kb[t]=i.value;const e=this.zb.get(s);null==e||e.forEach((t=>{t.tx(i.value)}))}}return this.us.xs(),this}onMouseDragStart(t){return this.L.on("mouseDragStart",t)}onMouseDrag(t){return this.L.on("mouseDrag",t)}onMouseDragStop(t){return this.L.on("mouseDragStop",t)}onMouseWheel(t){return this.L.on("mouseWheel",t)}onTouchStart(t){return this.L.on("touchStart",t)}onTouchMove(t){return this.L.on("touchMove",t)}onTouchEnd(t){return this.L.on("touchEnd",t)}offTouchStart(t){return this.L.off(t,"touchStart")}offTouchMove(t){return this.L.off(t,"touchMove")}offTouchEnd(t){return this.L.off(t,"touchEnd")}setMouseInteractions(t){return this.Hi=t,this.Zb.setMouseInteractions(t),this}getMouseInteractions(){return this.Hi}setHighlight(t){var i;return t=zi(t),this.Rb=t,null===(i=this.Vb)||void 0===i||i.regions.forEach((i=>{this.us.ls.Cs(i,t)})),this.L.emit("highlight",this,t),this}getHighlight(){return this.Rb}setAnimationHighlight(t){var i;return null===(i=this.Vb)||void 0===i||i.regions.forEach((i=>{this.us.ls.ks(i,t)})),this}getAnimationHighlight(){var t;return this.us.ls.Ts(null===(t=this.Vb)||void 0===t?void 0:t.regions[0])}setHighlightOnHover(t){return this.Eb=t,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Eb}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}offMapDataReady(t){return this.L.off(t,"mapDataReady")}offViewChange(t){return this.L.off(t,"viewChange")}async Jb(t){const i=await((t,i)=>{let s;if(t===eu.World)s="countries_world.json";else if(t===eu.NorthAmerica)s="countries_northAmerica.json";else if(t===eu.SouthAmerica)s="countries_southAmerica.json";else if(t===eu.Africa)s="countries_africa.json";else if(t===eu.Europe)s="countries_europe.json";else if(t===eu.Asia)s="countries_asia.json";else if(t===eu.USA)s="states_usa.json";else if(t===eu.Canada)s="territoriesProvinces_canada.json";else{if(t!==eu.Australia){const i=`LCJS MapChart unidentified \`type\`: ${t}`;throw Ot.alert(i),new Error(i)}s="territories_australia.json"}const e=`${i}/maps/${s}`;return Ot.fetch(e).then((t=>t.json())).catch((t=>{Wi(i,e,"Map Chart",{shouldCrash:!0})}))})(t,this.vA.Js);this.Kb=new Array(i.regions.length).map((t=>{})).fill(void 0);const s=au[t];if(!s)throw new Error("Unidentified map type.");for(const t of i.outliers)for(const i of t.geometry)this.Qb.$r().wl(i);if(t===eu.USA){const t=25.8,i=29.7;this.Db.push(this.Xb.Be(this.ft).setMouseInteractions(!1).De(this.Bb).Pe(this.Lb).Re({x:-126,y:t}).tt({x:10,y:i-t}),this.Xb.Be(this.ft).setMouseInteractions(!1).De(this.Bb).Pe(this.Lb).Re({x:-113,y:t}).tt({x:7,y:i-t}))}const e=this.us.ls.Hr(this.Zb,{animationEnabled:this.uh});for(let s=0;s<i.regions.length;s+=1){const h=i.regions[s],r=ru(t,h),n=[];for(const t of r)t.length<3||n.push(this.Zb.$r().wl(t));this.zb.set(h,n),e.$r(h,(t=>{n.forEach((i=>i.cs(t)))}))}if(this.jb.As([this.Zb]),this.Nb=s,this.Gb(t,this.ft,s),this.Vb=i,this.qb){for(const t of this.qb)this.invalidateRegionValues(t);this.qb=void 0}this.us.xs()}Gb(t,i,s){const e=lu[t],h=i.x.getCellSize(),r=i.y.getCellSize()/h,n={min:{x:s.min.x,y:s.min.y},max:{x:s.max.x,y:s.max.y}};if(r<e){const t=(n.max.x-n.min.x)*(e/r-1);n.min.x-=t/2,n.max.x+=t/2}else if(r>e){const t=(n.max.y-n.min.y)*(r/e-1);n.min.y-=t/2,n.max.y+=t/2}i.x.K(n.min.x,n.max.x),i.y.K(n.min.y,n.max.y);const o=this.ft.x.ai(),a=this.ft.y.ai();this.L.emit("viewChange",{latitudeRange:{start:n.min.y,end:n.max.y},longitudeRange:{start:n.min.x,end:n.max.x},margin:{top:a[1],bottom:a[0],left:o[0],right:o[1]}})}Yb(t){this.ix=t,this.us.xs()}$b(){this.ix=void 0,this.us.xs()}Ub(t,i){const s=Array.from(this.zb.entries()).findIndex((([t,s])=>s.includes(i))),e=null==t?void 0:t.regions[s],h=this.us.$n();if(!h)return;const r=this.us.Oo(h),n=this.Kb&&this.Kb[s];let o=At({x:r.engineX,y:r.engineY},this.us.ft,this.ft);o={x:$t(o.x,this.ft.x.getInnerStart(),this.ft.x.getInnerEnd()),y:$t(o.y,this.ft.y.getInnerStart(),this.ft.y.getInnerEnd())};let a=o.x,l=o.y;const u=e.transform;e.outlier&&u&&(a=(a-u.translate.x-u.vertexBoundaries.min.x)/u.scale.x+u.vertexBoundaries.min.x,l=(l-u.translate.y-u.vertexBoundaries.min.y)/u.scale.y+u.vertexBoundaries.min.y);const c=this.getFillStyle();return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.us.ft,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.us.ft},region:e,value:n,longitude:l,latitude:a,lut:Z(c)?c.lut:void 0}}setCursor(t){return this.Jm.setCursor(t),this}getCursor(){return this.Jm.getCursor()}setCursorMode(t){return this.Jm.setCursorMode(t),this}getCursorMode(){return this.Jm.getCursorMode()}setCustomCursor(t){return this.Jm.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.Jm.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.Jm.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Jm.setCursorFormatting(t),this}getCursorFormatting(){return this.Jm.getCursorFormatting()}addCursor(t=sl){const i=this.vy(),s=t.pm(i,this.uiScale,this.uiScale,this.Ay(i),this.qi);return this.ky(s),s}setAnimationsEnabled(t){return this.uh=!t,this}getAnimationsEnabled(){return this.uh}getMinimumSize(){}sf(){return[this]}Le(t){super.Le(t),super.Fy(),Ra.Oy(this.bh,this.Dy);const i=d(this.ft.x.si(),this.ft.y.si(),this.ft.x.hi(),this.ft.y.hi());return this.Xb.ab(i),this.Jm.Le(!1,[],void 0,{explicitTarget:this.ix}),this}dispose(){return this.Xb.U(),this.Jm.U(),Pa(this.ft),super.dispose()}Z(){return super.Z(),this.ft.Z(),this}J(){return super.J(),this.ft.J(),this}jd(){return ki(this.getFillStyle())}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),t.onMouseEnter((()=>{this.setHighlight(!0)})),t.onMouseLeave((()=>{this.setHighlight(!1)})),this.onMouseEnter((()=>t.setHighlight(!0))),this.onMouseLeave((()=>t.setHighlight(!1))),this.onTouchStart((()=>t.setHighlight(!0))),this.onTouchEnd((()=>t.setHighlight(!1))),this.styleLegendEntry(t,s),this}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.getFillStyle()})}}const cu=(t,i)=>{const s=t>0,e=i>0;return`${[Fi(Math.abs(0|t),2),"° ",Fi(Math.abs(0|(t<0?t=-t:t)%1*60),2),"' "].join("")+(s?"E":"W")}, ${[Fi(Math.abs(0|i),2),"° ",Fi(Math.abs(0|(i<0?i=-i:i)%1*60),2),"' "].join("")+(e?"N":"S")}`},du=(t,i,s)=>{var e;const h=[[i.region.name],[cu(i.longitude,i.latitude)]];return void 0!==i.value&&h.push({text:ne(i.value.toFixed(1),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}),h};class fu extends xh{constructor(t,i,s,e,h,r,n,o,a){super(t,i,i.sx(s),e,h,{numeric:i.hx({amplitude:e.polarAmplitudeAxisNumericTicks,radial:e.polarAmplitudeAxisNumericTicks}),datetime:i.hx({amplitude:e.polarAmplitudeAxisDateTimeTicks,radial:e.polarAmplitudeAxisDateTimeTicks}),time:i.hx({amplitude:e.polarAmplitudeAxisTimeTicks,radial:e.polarAmplitudeAxisTimeTicks})},{type:"linear"}),this.nx=r,this.ox=n,this.lx=o,this.es=a,this.ux=s,this.Ax=i.hx({amplitude:e.polarAmplitudeAxisStrokeStyle,radial:e.polarRadialAxisStrokeStyle}),this._h=o.Nr(s).setMouseInteractions(!1).Zh(i.hx({amplitude:e.polarAmplitudeAxisTitleFont,radial:e.polarRadialAxisTitleFont})).De(i.hx({amplitude:e.polarAmplitudeAxisTitleFillStyle,radial:e.polarRadialAxisTitleFillStyle})),this.Kh=this.es.Cg([this._h]).bs(e.effectsText)}setTickStrategy(t,i){return super.Nh(t,i)}setStrokeStyle(t){return this.Ax="function"==typeof t?t(this.Ax):t,this.ox.xs(),this}getStrokeStyle(){return this.Ax}vr(t,i){return new Au(i,t,this.ux,this.lx,this.gx(this.nx,this.ux),this.lx.We(this.ux).setMouseInteractions(!1))}Sr(t,i){const s=this.yx(this.ux,t);this.mx&&!1===this.mx(t)?t.th.setVisible(!1):t.th.setVisible(!0).Re(ws(this.vx(this.ux,t.S),s.padding)).Ha(s.alignment).Qh(s.rotation).Oa(s.offset.x,s.offset.y),this.Sx(this.ux,t.bx,t.xx,t)}setMouseInteractions(t){return this}Le(){this.nr({physicalAxisSize:0});const t=this._r(((t,i)=>{const s=i.Ph.pr,e=.5*this.Ax.getThickness()+s.tickLength+s.tickPadding+Math.abs(i.th.Es().sd().y);return Math.max(t,e)}),0);return this.Mx(this.ux,this.Ax,t),this._x(this.ux,this._h,t),t}}class Au extends Mh{constructor(t,i,s,e,h,r,n){super(t,i,e,s,n),this.bx=h,this.xx=r,h.setMouseInteractions(!1),this.ts.push(h,r)}}class gu extends fu{constructor(t,i,s,e,h,r,n,o,a){super(t,yu((()=>this.Bg())),i,s,e,h,r,n,o),this.Op=this.ox.We(this.ux).setMouseInteractions(!1),this.wx=a,this.setScrollStrategy(nh.expansion),this.setTickStrategy(oh.Numeric),this.setTitle("Amplitude")}Bg(){return this.wx()}Br(t,i){return ae(t,i,this.ux.y)}Rr(t,i,s){const e=2*(i-t),h=this.ux.x.Bi(e);return{min:t-s*h,max:i+s*h}}vx(t,i){return{x:t.Cx()?i-t.kx().start:t.kx().start-i,y:0}}gx(t,i){return t.rd(i)}Sx(t,i,s,e){const h=e.Ph.pr,r=t.Cx()?e.S-t.kx().start:t.kx().start-e.S;Ht(e.S,t.kx().start)||Ht(e.S,t.kx().end)?i.setVisible(!1):i.setVisible(!0).uu(0).Ue(360).gu(void 0).Au(0).cu(r).gu(60).De(O).Pe(h.gridStrokeStyle);const n=.5*this.Ax.getThickness();s.Ye({x:r,y:-n*t.Gi().y}).Ue({x:r,y:-(n+h.tickLength)*t.Gi().y}).Ge(h.tickStyle)}yx(t,i){const s=i.Ph.pr;return{alignment:{x:0,y:1},padding:{x:0,y:t.Gi().y*-(.5*this.Ax.getThickness()+s.tickLength+s.tickPadding)},rotation:0,offset:{x:0,y:0}}}Mx(t,i,s){const e=t.Cx()?t.kx().end-t.kx().start:t.kx().start-t.kx().end;this.Op.Ye({x:0,y:0}).Ue({x:e,y:0}).Ge(i)}_x(t,i,s){const e=t.Cx()?(t.kx().start+t.kx().end)/2-t.kx().start:t.kx().start-(t.kx().start+t.kx().end)/2;i.Ha({x:0,y:1}).Re({x:e,y:-s*t.Gi().y})}}const yu=t=>({...Tl(t,(t=>t.getAmplitudeMin()),(t=>t.getAmplitudeMax()),(t=>{})),sx:t=>({getInnerStart:()=>t.kx().start,getInnerEnd:()=>t.kx().end,K:(i,s)=>t.Tx(i,s),ot:(i,s,e,h,r)=>t.y.ot(i,s,e,h,r)}),hx:t=>t.amplitude});class mu extends fu{constructor(t,i,s,e,h,r,n,o){super(t,vu,i,s,e,h,r,n,o),this.Fx=90,this.Ix=12,this.Px=pu,this.Op=this.ox.rd(this.ux).setMouseInteractions(!1),this.mx=t=>{let i=180*(t.S-this.ux.Dx())/Math.PI%360;for(;i<0;)i+=360;for(;i>360;)i-=360;if(i>=0&&i<=20||i>=340&&i<=360)return!1},this.oh=void 0,this.setTickStyle(s.polarRadialAxisTickStyle),this.setTitle("Degrees"),this.setNorth(this.Fx)}setTickStyle(t){return this.Bx="function"==typeof t?t(this.Bx):t,this.Lx(),this.ox.xs(),this}getTickStyle(){return this.Bx}setTickFormattingFunction(t){return this.Px=t,this.Lx(),this.ox.xs(),this}getTickFormattingFunction(){return this.Px}setClockwise(t){this.ux.Rx(t);const i=this.Fx*Math.PI/180;return t?this.ux.Ex(i+Math.PI/2):this.ux.Ex(i-Math.PI/2),this.ox.xs(),this}getClockwise(){return!this.ux.zx()}setNorth(t){for(;t<0;)t+=360;t%=360,this.Fx=t;const i=t*Math.PI/180;return this.getClockwise()?this.ux.Ex(i+Math.PI/2):this.ux.Ex(i-Math.PI/2),this.ox.xs(),this}getNorth(){return 180*this.ux.Dx()/Math.PI}setDivision(t){return this.Ix=t,this.Lx(),this.ox.xs(),this}getDivision(){return this.Ix}Bg(){return[]}Br(t,i){return i}Rr(t,i,s){return{min:t,max:i}}vx(t,i){const s=t.zx()?1:-1,e=t.Dx(),h=t.Cx()?t.kx().end-t.kx().start:t.kx().start-t.kx().end;return{x:Math.cos((i-e)*s)*h,y:Math.sin((i-e)*s)*h}}gx(t,i){return t.We(i)}Sx(t,i,s,e){const h=this.Bx,r=t.zx()?1:-1,n=t.Dx(),o=(e.S-n)*r,a=Math.cos(o),l=Math.sin(o),u=t.Cx()?t.kx().end-t.kx().start:t.kx().start-t.kx().end,c={x:a*u,y:l*u};i.Ye({x:0,y:0}).Ue(c);const d={x:c.x+a*h.tickLength*t.Gi().x,y:c.y+l*h.tickLength*t.Gi().y};s.Ye(c).Ue(d),i.Ge(h.gridStrokeStyle),s.Ge(h.tickStyle)}yx(t,i){const s=this.Bx,e=t.zx()?1:-1,h=t.Dx();let r,n=(i.S-h)*e;for(;n<0;)n+=2*Math.PI;for(;n>=2*Math.PI;)n-=2*Math.PI;r=n>0&&n<=Math.PI?-n+Math.PI/2:-n-Math.PI/2;const o=s.tickLength+s.tickPadding,a=Math.cos(n)*o*t.Gi().x,l=Math.sin(n)*o*t.Gi().y;return{alignment:{x:0,y:0},padding:{x:a,y:l},rotation:180*r/Math.PI,offset:{x:a,y:l}}}Mx(t,i,s){const e=t.Cx()?t.kx().end-t.kx().start:t.kx().start-t.kx().end;this.Op.uu(0).Ue(360).Au(0).cu(e+.5*i.getThickness()*t.Gi().x).gu(360).De(O).Pe(i)}_x(t,i,s){const e=t.Dx(),h=this.yx(t,{S:0+e}),r=t.Cx()?t.kx().end-t.kx().start:t.kx().start-t.kx().end;i.Ha(h.alignment).Qh(h.rotation).Oa(h.offset.x,h.offset.y).Re(ws({x:r,y:0},h.padding))}Lx(){this.ir({je:[],Ze:[{th:"Radial ticks",Yg:0,pr:this.Bx,gr:this.Px,Wr:(t,i,s,e)=>{const h=[],r=2*Math.PI/this.Ix;for(let t=0;t<2*Math.PI;t+=r)h.push(t);return h},Dh:{br:()=>{},Bh:()=>!1},Ur:void 0}],Qe:pu,Je:void 0,Ke:void 0})}}const pu=(t,i,s)=>(180*t/Math.PI).toFixed(0),vu={Tr:()=>{},Fr:()=>{},Pr:()=>{},sx:t=>({getInnerStart:()=>0,getInnerEnd:()=>2*Math.PI,K:(t,i)=>{},ot:(i,s,e,h,r)=>t.x.ot(i,s,e,h,r)}),hx:t=>t.radial},Su=t=>!!(t&&"object"==typeof t&&"axisAmplitude"in t&&"axisRadial"in t),bu=t=>!!(t&&"object"==typeof t&&"angle"in t&&"number"==typeof t.angle&&"amplitude"in t&&"number"==typeof t.amplitude);class xu extends ce{constructor(t,i,s,e,h,r){super(i,s,h,r),this.ws="Sector",this.Vx=0,this.Ox=1*Math.PI/2,this.Nx=void 0,this.Gx=void 0,this.Ds=t,this.ux=e,this.Pm=this.Ds.rd(this.ux).cs(this.getHighlight()),this.fs(this.Pm),this.ke=h.polarSectorFillStyle,this.Te=h.polarSectorStrokeStyle,this.setMouseInteractions(!1)}setAngleStart(t){return this.Vx=$t(t,0,360),this.Ds.xs(),this}getAngleStart(){return this.Vx}setAngleEnd(t){return this.Ox=$t(t,0,360),this.Ds.xs(),this}getAngleEnd(){return this.Ox}setAmplitudeStart(t){return this.Nx=t,this.Ds.xs(),this}getAmplitudeStart(){return this.Nx}setAmplitudeEnd(t){return this.Gx=t,this.Ds.xs(),this}getAmplitudeEnd(){return this.Gx}setFillStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.Ds.xs(),this}getFillStyle(){return this.ke}setStrokeStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.Ds.xs(),this}getStrokeStyle(){return this.Te}Le(){const t=this.ux.kx(),i=180*this.ux.Dx()/Math.PI,s=void 0!==this.Nx?$t(this.Nx,t.start,t.end):t.start,e=void 0!==this.Gx?$t(this.Gx,t.start,t.end):t.end,h=this.ux.Cx()?s-t.start:t.start-s,r=this.ux.Cx()?e-t.start:t.start-e,n=Math.min(h,r),o=Math.max(h,r),a=this.ux.zx()?1:-1,l=Math.abs(this.Ox-this.Vx);this.Pm.uu((this.Vx-i)*a).Ue((this.Ox-i)*a).Au(100*n/o).cu(o).De(this.ke).Pe(this.Te).gu(Math.ceil(l/2))}Ee(t,i){t.cs(i),this.Ds.xs()}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke,stroke:this.Te})}}class Mu extends ce{constructor(){super(...arguments),this.lv=!0,this.av=!0}setAutoScrollingEnabled(t){return this.lv=t,this.chart.us.xs(),this}getAutoScrollingEnabled(){return this.lv}pv(){}Le(){}xp(){}setCursorEnabled(t){return this.av=t,this}getCursorEnabled(){return this.av}setCursorFormattingOverride(t){return this.gv=t,this}getCursorFormattingOverride(){return this.gv}}class _u extends Mu{constructor(t,i,s,e,h,r){super(i,s,h,r),this.Ds=t,this.chart=i,this.scale=e}getAmplitudeMin(){return this.Wx?this.Wx.min:void 0}getAmplitudeMax(){return this.Wx?this.Wx.max:void 0}}const wu=(t,i)=>{const s=[],e=i.kx().start,h=i.kx().end,r=i.Cx(),n=i.zx()?1:-1,o=i.Dx(),a=Math.abs(h-e),l=Math.min(e,h)+.001*a,u=Math.max(e,h)-.001*a;for(const i of t){const t=$t(i.amplitude,l,u),h=i.angle*Math.PI/180-o,a=Math.cos(h*n)*(r?t-e:e-t),c=Math.sin(h*n)*(r?t-e:e-t),d=i.color;s.push({x:a,y:c,color:d})}return s},Cu=t=>{const i={min:Ki,max:qi};for(const s of t)i.min=Math.min(i.min,s.amplitude),i.max=Math.max(i.max,s.amplitude);return i},ku=t=>t.slice().map((t=>t.angle>=0&&t.angle<=360?t:{...t,angle:t.angle%360})),Tu=(t,i)=>{let s=Ls(t);for(i.zx()||(s*=-1),s+=180*i.Dx()/Math.PI;s<0;)s+=360;s%=360;const e=Ms(t),h=i.kx(),r=Math.abs(h.end-h.start);return{angle:s,amplitude:un(h.start,h.end,e/r)}};class Fu extends _u{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r),this.ws="Heatmap Series",this.Ux=!0,this.Mv=!1,this.jd=()=>ki(this.ke);const o=this.chart.getSeries().length;this.ke=Ii(this.qi.polarHeatmapSeriesFillStyle||this.qi.heatmapGridSeriesFillStyle,o);const a=n.amplitudeStart||0,l=n.amplitudeEnd?(n.amplitudeEnd-a)/(n.annuli-1):n.amplitudeStep||1,u={sectors:n.sectors,annuli:n.annuli,amplitudeStart:a,amplitudeStep:l,heatmapDataType:"intensity",dataOrder:n.dataOrder||"annuli"};this.Jn=u,this.Yx=t.Hx(e,[],u).De(this.ke).cs(this.getHighlight()),this.fs(this.Yx);const c=Math.min(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep),d=Math.max(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep);this.Wx={min:c,max:d},this.setHighlightOnHover(!1)}solveNearest(t,i="show-nearest"){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=At(e,this.chart.us.ft,this.scale),r=Tu(h,this.scale),n=Ea(i)?this.Yx.$x(r):this.Yx.Kc(r);if(!n)return;const o=wu([n],this.scale)[0];return{cursorPosition:{pointMarker:o,pointMarkerScale:this.scale,resultTable:o,resultTableScale:this.scale},series:this,angle:n.angle,amplitude:n.amplitude,intensity:n.cellValue,annulus:n.iAnnulus,sector:n.iSector,lut:Z(this.ke)?this.ke.lut:void 0}}Ji(t,i){return ji({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0,intensity:0,sector:0,annulus:0,lut:Z(this.ke)?this.ke.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}invalidateIntensityValues(t){if(this.Mv&&this.chart.us.jn(Vo.kf),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,sectors:"annuli"===this.Jn.dataOrder?t[0].length:t.length,annuli:"annuli"===this.Jn.dataOrder?t.length:t[0].length},s="annuli"===this.Jn.dataOrder?this.Jn.annuli:this.Jn.sectors,e="annuli"===this.Jn.dataOrder?this.Jn.sectors:this.Jn.annuli;if(i.x>s||i.y>e){if(!0===this.chart.vA.qn){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nHeatmap ${s}x${e}, input ${i.x}x${i.y}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Ot.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);if(0===(t=h).length||0===t[0].length)return this}this.Yx.IS({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iSector"in t&&"iAnnulus"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,sectors:"annuli"===this.Jn.dataOrder?t.values[0].length:t.values.length,annuli:"annuli"===this.Jn.dataOrder?t.values.length:t.values[0].length},s="annuli"===this.Jn.dataOrder?t.iAnnulus:t.iSector,e=s+i.primary-1,h="annuli"===this.Jn.dataOrder?t.iSector:t.iAnnulus,r=h+i.secondary-1,n="annuli"===this.Jn.dataOrder?this.Jn.annuli-1:this.Jn.sectors-1,o="annuli"===this.Jn.dataOrder?this.Jn.sectors-1:this.Jn.annuli-1;if(s<0||h<0){if(!0===this.chart.vA.qn){const i=`PolarHeatmapSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niSector: ${t.iSector}, iAnnuli: ${t.iAnnulus}.\nNo intensity values will be invalidated.`;Ot.console.warn(i)}return this}if(e>n||r>o){if(!0===this.chart.vA.qn){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nMax indexes ${n}x${o}, input ${i.primary}x${i.secondary} starting at [${s},${h}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Ot.console.warn(t)}const a=Math.max(e-n,0),l=i.primary-a,u=Math.max(r-o,0),c=[];for(let i=0;i<l;i+=1)c[i]=t.values[i].slice(0,u>0?-u:void 0);if(0===(t={iSector:t.iSector,iAnnulus:t.iAnnulus,values:c}).values.length||0===t.values[0].length)return this}this.Yx.IS({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.Ds.xs(),this.Mv=!0,this}setFillStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.Yx.De(this.ke),this.Ds.xs(),this}getFillStyle(){return this.ke}clear(){return this.Yx.Vt(),this.Ds.xs(),this}setIntensityInterpolation(t){return t=t||"disabled",this.Yx.TS(t),this.Ds.xs(),this}getIntensityInterpolation(){return this.Yx.FS()}nv(){return this.lv&&this.getVisible()}Ee(t,i){t.cs(i),this.Ds.xs()}Le(){}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke})}}class Iu extends _u{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.ws="Line Series",this.Xx=[],this.jx=!1,this.Zx=!1,this.yu=Ii(this.qi.polarLineSeriesStrokeStyle,r),this.Qx=t.op(e,void 0,[gl.UserSeries]).Ge(this.yu).cs(this.getHighlight()),this.fs(this.Qx)}solveNearest(t,i){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=this.Qx.Jx(e);if(!h)return;const r=Tu(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Ji(t,i){return ji({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,"show-nearest")))}setData(t){return 0!==this.Xx.length&&this.chart.us.jn(Vo.kf),this.Xx=ku(t),this.jx=!0,this.Wx=Cu(this.Xx),this.Ds.xs(),this}setStrokeStyle(t){this.yu="function"==typeof t?t(this.yu):t;const i=this.yu;return this.Qx.Ge(i),this.Ds.xs(),this}getStrokeStyle(){return this.yu}setConnectDataAutomaticallyEnabled(t){return this.Zx=t,this.Ds.xs(),this}getConnectDataAutomaticallyEnabled(){return this.Zx}nv(){return this.lv&&this.Xx.length>0&&this.getVisible()}Ee(t,i){t.cs(i),this.Ds.xs()}Le(){if(this.jx||this.scale.Kx()){const t=wu(this.Xx,this.scale),i=As(t);this.Zx?(t.push({...t[0]}),this.Qx.Yl(!0)):this.Qx.Yl(!1),this.Qx.Vt().fl(t).qo(i),this.jx=!1,this.Qx.Es()}}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{stroke:this.yu})}}class Pu extends _u{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.ws="Point Line Series",this.Xx=[],this.jx=!1,this.Zx=!1,this.qx=3,this.Ma=0,this.tM=sr.Circle,this.ke=Ii(this.qi.polarPointLineSeriesFillStyle,r),this.yu=Ii(this.qi.polarPointLineSeriesStrokeStyle,r),this.Qx=t.op(e,void 0,[gl.UserSeries]).Ge(this.yu).cs(this.getHighlight()),this.fs(this.Qx),this.iM=t.Dv(e).De(this.ke).al(this.tM).tt(this.qx).cs(this.getHighlight()),this.fs(this.iM)}solveNearest(t,i){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=this.Qx.Jx(e);if(!h)return;const r=Tu(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Ji(t,i){return ji({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}setData(t){return 0!==this.Xx.length&&this.chart.us.jn(Vo.kf),this.Xx=ku(t),this.jx=!0,this.Wx=Cu(this.Xx),this.Ds.xs(),this}setStrokeStyle(t){this.yu="function"==typeof t?t(this.yu):t;const i=this.yu;return this.Qx.Ge(i),this.Ds.xs(),this}getStrokeStyle(){return this.yu}setPointFillStyle(t){this.ke="function"==typeof t?t(this.ke):t;const i=this.ke;return this.iM.De(i),this.Ds.xs(),this}getPointFillStyle(){return this.ke}setPointSize(t){return this.qx=t,this.iM.tt(t),this.Ds.xs(),this}getPointSize(){return this.qx}setPointShape(t){return this.tM=t,this.iM.al(this.tM),this}getPointShape(){return this.tM}setPointRotation(t){return this.Ma=t,this.iM.Qh(t),this.Ds.xs(),this}getPointRotation(){return this.Ma}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke,stroke:this.yu})}setConnectDataAutomaticallyEnabled(t){return this.Zx=t,this.Ds.xs(),this}getConnectDataAutomaticallyEnabled(){return this.Zx}nv(){return this.lv&&this.Xx.length>0&&this.getVisible()}Ee(t,i){t.cs(i),this.Ds.xs()}Le(){if(this.jx||this.scale.Kx()){const t=wu(this.Xx,this.scale),i=As(t);this.Zx?(t.push({...t[0]}),this.Qx.Yl(!0)):this.Qx.Yl(!1),this.Qx.Vt().fl(t).qo(i),this.iM.Vt().fl(t).qo(i),this.jx=!1,this.Qx.Es(),this.iM.Es()}}Is(){return this._s||this.tM}}class Du extends Wr{constructor(t,i,e,h,r,n,o,a,l){super(),this.jo=$i(),this.L=new s,this.Xi=!1,this.sM=h,this.eM=r,this.hM=n,this.rM=o,this.nM=a,this.Ds=t,this.scale=i,this.oM=e,this.qi=l}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}dispose(){return this.oM&&this.oM(this),this.Ds.us.xs(),this.L.emit("dispose",this),this.Xi=!0,this}setVisible(t){return super.setVisible(t),this.hM(),this.Ds.us.xs(),this}isDisposed(){return this.Xi}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setMouseInteractions(t){return this.rM(this,t),this}getMouseInteractions(){return this.nM(this)}}class Bu extends Du{constructor(t,i,s,e,h,r,n,o,a,l,u,d,f,A,g,y,m){super(t,i,s,e,h,r,n,o,m),this.aM=1,this.lM=1,this.Ds=t,this.scale=i,this.dimensionStrategy=a,this.start=l,this.end=u,this.lowerExtreme=d,this.lowerQuartile=f,this.median=A,this.upperQuartile=g,this.upperExtreme=y,this.boundaries=c(this.dimensionStrategy.toPoint(l,d),this.dimensionStrategy.toPoint(u,y)),this.uM=this.qi.boxSeriesBodyFillStyle,this.cM=this.qi.boxSeriesBodyStrokeStyle,this.yu=this.qi.boxSeriesStrokeStyle,this.dM=this.qi.boxSeriesMedianStrokeStyle,this.Es()}getBoundaries(){return this.boundaries}setBodyWidth(t){return this.aM=t,this.Es(),this}getBodyWidth(){return this.aM}setBodyFillStyle(t){return this.uM="function"==typeof t?t(this.uM):t,this.eM(),this}getBodyFillStyle(){return this.uM}setBodyStrokeStyle(t){return this.cM="function"==typeof t?t(this.cM):t,this.eM(),this}getBodyStrokeStyle(){return this.cM}setTailWidth(t){return this.lM=t,this.Es(),this}getTailWidth(){return this.lM}setStrokeStyle(t){return this.yu="function"==typeof t?t(this.yu):t,this.eM(),this}getStrokeStyle(){return this.yu}setMedianStrokeStyle(t){return this.dM="function"==typeof t?t(this.dM):t,this.eM(),this}getMedianStrokeStyle(){return this.dM}Es(){this.sM()}getDominantStyle(){return this.getBodyFillStyle()}}class Lu extends Mu{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,a,l),this.Ps=!0,this.ts=new Map,this.chart=t,this.Ds=s,this.axisX=e,this.axisY=h,this.axisXAttachHandler=r,this.axisYAttachHandler=n,this.fM=o,this.scale=te(e.ft,h.ft),this.AM=t.gM,t.gM+=1,this.yM(this.scale),this.attacheAxis(),this.onMouseEnter(this.chart.mM),this.onMouseLeave(this.chart.pM),this.onMouseWheel(this.chart.cv),this.onMouseDragStart(this.chart.vM),this.onMouseDrag(this.chart.dv),this.onMouseDragStop(this.chart.fv),this.onTouchStart(this.chart.Av.onTouchStart),this.onTouchMove(this.chart.Av.onTouchMove),this.onTouchEnd(this.chart.Av.onTouchEnd)}get xAxis(){return this.axisX}get yAxis(){return this.axisY}SM(){const t=Array.from(this.ts.keys());for(const i of t)if(i.bM)return i.bM}setClipping(t){return this.Ps=t,this.Ds.xs(),this}getClipping(){return this.Ps}attacheAxis(){this.xM=this.axisXAttachHandler(this),this.MM=this.axisYAttachHandler(this)}fs(t,i){super.fs(t,i),t.na(this.AM)}getName(){const t=this.ds(),i="ProgressiveY"===t||"RegressiveY"===t?this.axisX.getTitle():this.axisY.getTitle();return this.ws||i.length>0&&i||"Series"}setDrawOrder(t){return this.AM=t.seriesDrawOrderIndex,this.ts.forEach(((t,i)=>{i.na(this.AM)})),this.chart.us.xs(),this}dispose(){return super.dispose(),this.xM(this),this.MM(this),this}xp(){super.xp(),re(this.Ps,Array.from(this.ts.keys()),this.scale)}getBoundaries(){return c(n(this.getXMin()||0,this.getYMin()||0),n(this.getXMax()||0,this.getYMax()||0))}setCursorEnabled(t){return super.setCursorEnabled(t)}}const Ru=(t,i,s,e)=>{const h=t.length;let r=0;if(void 0!==i){const h=s-i;if(h>0){const i=t.slice(r,h);r+=h,e(i,!0)}}for(;r<h;){const i=t.slice(r,r+s);r+=s,e(i,!1)}},Eu=(t,i=(t=>t))=>{const s=[];let e;for(let h=0;h<t.length;h+=1){e=t[h];const r=i(e.ol()),n=e.nl(),o=n?i(n):[];let a=!1,l=!1;"Ul"in e&&(a=e.Ul(),l=e.Hl()),s.push.apply(s,r.slice(a?1:0,r.length-(l&&0===o.length?1:0))),s.push.apply(s,o.slice(a&&0===r.length?1:0,o.length-(l?1:0)))}return s};class zu extends Lu{constructor(){super(...arguments),this._M=[],this.wM=void 0,this.CM=!1,this.oM=t=>{const i=this._M.findIndex((i=>i===t));i>=0&&this._M.splice(i,1),this.CM=!0,this.wM=void 0,this.Ds.xs()},this.sM=()=>{this.wM=void 0,this.CM=!0,this.chart.us.xs()},this.eM=()=>{this.CM=!0,this.chart.us.xs()},this.hM=()=>{this.wM=void 0,this.CM=!0,this.chart.us.xs()},this.rM=(t,i)=>{this.setMouseInteractions(i)},this.kM=t=>this.getMouseInteractions()}Le(){super.Le(),this.CM&&(this.TM(this._M),this.CM=!1)}clear(){return this._M.slice().forEach(Ut),this._M.length=0,this.CM=!0,this.wM=void 0,this.Ds.xs(),this}FM(t,i){void 0!==i?this._M.splice(i,0,t):this._M.push(t),this.CM=!0,this.IM&&this.IM(t),t.onMouseEnter(((t,i)=>this.Mt(t,i,void 0,{}))),t.onMouseLeave(((t,i)=>this._t(t,i,void 0))),t.onMouseClick(((t,i)=>this.wt(t,i,void 0,{}))),t.onMouseDoubleClick(((t,i)=>this.Ct(t,i,void 0,{}))),t.onMouseDown(((t,i)=>this.kt(t,i,void 0,{}))),t.onMouseUp(((t,i)=>this.Tt(t,i,void 0,{}))),t.onMouseMove(((t,i)=>this.Ft(t,i,void 0,{}))),t.onMouseDragStart(((t,i,s)=>this.Pt(t,i,s,void 0,{}))),t.onMouseDrag(((t,i,s,e,h)=>this.It(t,i,s,e,h,void 0,{}))),t.onMouseDragStop(((t,i,s,e)=>this.Dt(t,i,s,e,void 0,{}))),t.onMouseWheel(((t,i)=>this.Bt(t,i,void 0,{}))),t.onTouchStart(((t,i)=>this.Lt(t,i,void 0,{}))),t.onTouchMove(((t,i)=>this.Rt(t,i,void 0,{}))),t.onTouchEnd(((t,i)=>this.Et(t,i,void 0,{}))),this.Ds.xs()}nv(){return this.lv&&this._M.length>0&&this.getVisible()}setDefaultStyle(t){this.IM=t,this._M.forEach(t),t(this.PM);for(let t=0;t<this.Qi.length;t+=1)this.styleLegendEntry(this.Qi[t]);return this.CM=!0,this.chart.us.xs(),this}getXMax(){return this.wM||(this.wM=this.DM()),this.wM.max.x}getXMin(){return this.wM||(this.wM=this.DM()),this.wM.min.x}getYMax(){return this.wM||(this.wM=this.DM()),this.wM.max.y}getYMin(){return this.wM||(this.wM=this.DM()),this.wM.min.y}Pr(){return n(0,0)}DM(){const t=c(o(Ki,Ki),o(qi,qi));for(let i=0;i<this._M.length;i+=1)if(this._M[i].getVisible()){const s=this._M[i].getBoundaries();t.min.x=Math.min(t.min.x,s.min.x),t.min.y=Math.min(t.min.y,s.min.y),t.max.x=Math.max(t.max.x,s.max.x),t.max.y=Math.max(t.max.y,s.max.y)}return t}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this._M.length>0?this._M[0].getDominantStyle():this.PM.getDominantStyle()})}}const Vu=(t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:e+i*s,y:t[s]};return h};class Ou extends Lu{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,l,u),this.BM=[],this.Mu=[],this.LM=0,this.Fs=!1,this.$i=ue.onHover,this.chart.us.jn(Vo.Mf),this.RM=a}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.LM=void 0!==i&&i>0?i:0,this.Ds.xs(),this}add(t){if(0!==this.BM.length&&this.chart.us.jn(Vo.kf),Array.isArray(t)?this.EM(t):this.EM([t]),this.Mu.length>0){const t=this.Mu[this.Mu.length-1];this.zM={x:t.x,y:t.y}}return this}addArrayX(t,i=1,s){let e=s;return e||(e=this.zM?this.zM.y+i:0),this.add(((t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:t[s],y:e+i*s};return h})(t,i,e)),this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.zM?this.zM.x+i:0),this.add(Vu(t,i,e)),this}addArraysXY(t,i){if(t.length!==i.length)throw new Error("arrayX and arrayY lengths are not equal");return this.add(((t,i)=>{const s=new Array(t.length);for(let e=0;e<t.length;e+=1)s[e]={x:t[e],y:i[e]};return s})(t,i)),this}getPointAmount(){return this.BM.reduce(((t,i)=>t+i.Al()+i.yl()),this.Mu.length)}clear(){this.VM=void 0;for(let t=0;t<this.BM.length;t+=1)this.BM[t].Vt();return this.Mu.length=0,this.zM=void 0,this.Ds.xs(),this.L.emit("dataClear",this),this}getLastPoint(){return this.zM}nv(){return this.lv&&this.getPointAmount()>0&&this.getVisible()}getXMax(){return this.RM.getXMax(this.BM,this.VM)||0}getXMin(){return this.RM.getXMin(this.BM,this.VM)||0}getYMax(){return this.RM.getYMax(this.BM,this.VM)||0}getYMin(){return this.RM.getYMin(this.BM,this.VM)||0}Pr(){const t=n(0,0);for(const i of this.BM)t.x=Math.max(t.x,i.kl()),t.y=Math.max(t.y,i.Tl());return t}OM(t,i,s,e){this.RM.OM(t,i,s,e,this.scale,(t=>{}))}pv(){super.pv(),this.NM&&this.OM(this.BM,this.getPointAmount(),this.NM,this.LM)}Le(){super.Le();const t=this.getBoundaries();this.Mu.length>0&&(this.GM(this.Mu),this.Mu=[]);for(const i of this.BM)i.qo(t);return super.Le()}xp(){super.xp(),this.VM=void 0,this.Mu.length=0}EM(t){0!==t.length&&(this.VM?this.VM=ys(this.VM,As(t)):this.VM=As(t),this.L.emit("dataAdd",this,t,this.VM),this.Mu=xi(this.Mu,t,{canReturnB:!1}),this.Ds.xs())}WM(){return Eu(this.BM)}UM(t){return this.L.on("dataAdd",t)}YM(t){return this.L.off(t)}HM(t){return this.L.on("dataClear",t)}$M(t){return this.L.off(t)}}const Nu=(t,i,s,e)=>{let h,r,n=Number.MAX_VALUE;for(let o=0;o<i.length;o+=1){const a=i[o],l=s(a,t);if(l){const i=e(t,l);(void 0===h||i<n)&&(h=l,r=a,n=i)}}return h&&r?[h,r]:void 0};class Gu extends zu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.ws="Box Series",this.XM=Yi(),this.jM=t=>At(this.Bs.toPoint((t.start+t.end)/2,t.median),this.scale,this.Ds.us.ft),this.chart.us.jn(Vo.wf),this.Bs=a,this.PM=new Bu(this.Ds,this.scale,this.oM,Yt,Yt,Yt,Yt,(t=>!1),this.Bs,0,0,0,0,0,0,0,this.qi).dispose(),this.ZM=new Ml((()=>{const t=this.Ds.Ug(this.scale);return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ge(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.$r();return s.Hg(i.start,i.end),s}))))),this.QM=new Ml((()=>{const t=this.XM.xt(this.Ds.Yp(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.De(s.fillStyle).Pe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.$r();return s.wl(i.vertices),this.XM.zt(s,i.figure),s})))),(()=>{this.XM.Vt()}),((t,i)=>{this.ys(i)}))}solveNearest(t,i){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY};if(0===this._M.length)return;const h=Nu(e,this._M.filter((t=>t.getVisible())),this.jM,us);if(!h)return;const r=At(h[0],this.Ds.us.ft,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],start:h[1].start,end:h[1].end,lowerExtreme:h[1].lowerExtreme,lowerQuartile:h[1].lowerQuartile,median:h[1].median,upperQuartile:h[1].upperQuartile,upperExtreme:h[1].upperExtreme,series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return ji({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,median:0,lowerQuartile:0,upperQuartile:0,lowerExtreme:0,upperExtreme:0,start:0,end:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}yM(t){if(!(t instanceof Ks||t instanceof qs))throw new Error("BoxSeries only supports Linear Axes")}TM(t){const i=this.QM.Mp(),s=this.ZM.Mp();t.forEach((t=>{if(!t.getVisible())return;const e=this.Bs.toPoint((t.start+t.end-t.aM*(t.end-t.start))/2,t.lowerQuartile),h=this.Bs.toPoint((t.end-t.start)*t.aM,t.upperQuartile-t.lowerQuartile),r=this.Bs.toPoint((t.start+t.end)/2,t.lowerQuartile),n=this.Bs.toPoint((t.start+t.end)/2,t.lowerExtreme),o=this.Bs.toPoint((t.start+t.end)/2,t.upperQuartile),a=this.Bs.toPoint((t.start+t.end)/2,t.upperExtreme),l=this.Bs.toPoint((t.start+t.end-t.lM*(t.end-t.start))/2,t.lowerExtreme),u=this.Bs.toPoint((t.start+t.end+t.lM*(t.end-t.start))/2,t.lowerExtreme),c=this.Bs.toPoint((t.start+t.end-t.lM*(t.end-t.start))/2,t.upperExtreme),d=this.Bs.toPoint((t.start+t.end+t.lM*(t.end-t.start))/2,t.upperExtreme),f=this.Bs.toPoint((t.start+t.end-t.aM*(t.end-t.start))/2,t.median),A=this.Bs.toPoint((t.start+t.end+t.aM*(t.end-t.start))/2,t.median);i.add({jo:t.jo,vertices:[{x:e.x,y:e.y},{x:e.x,y:e.y+h.y},{x:e.x+h.x,y:e.y+h.y},{x:e.x+h.x,y:e.y}],figure:t},{fillStyle:t.uM,strokeStyle:t.cM}),s.add({jo:0,start:r,end:n,figure:t},{strokeStyle:t.yu}),s.add({jo:0,start:o,end:a,figure:t},{strokeStyle:t.yu}),s.add({jo:0,start:l,end:u,figure:t},{strokeStyle:t.yu}),s.add({jo:0,start:c,end:d,figure:t},{strokeStyle:t.yu}),s.add({jo:0,start:f,end:A,figure:t},{strokeStyle:t.dM})})),i.finishPlot(),s.finishPlot()}add(t){const i=new Bu(this.Ds,this.scale,this.oM,this.sM,this.eM,this.hM,this.rM,this.kM,this.Bs,t.start,t.end,t.lowerExtreme,t.lowerQuartile,t.median,t.upperQuartile,t.upperExtreme,this.qi);return this.FM(i),this.CM=!0,this.chart.us.xs(),i}}class Wu extends Du{constructor(t,i,s,e,h,r,o,a,l,u){super(t,i,s,e,h,r,o,a,l),this.dimensions={x:0,y:0,radiusX:0,radiusY:0},this.qa=c(n(0,0),n(0,0)),this.Ds=t,this.scale=i,this.ke=Ii(l.ellipseSeriesFillStyle,u),this.Te=Ii(l.ellipseSeriesStrokeStyle,u)}getBoundaries(){return this.qa}setDimensions(t){return this.dimensions=t,this.qa=c(n(t.x-t.radiusX,t.y-t.radiusY),n(t.x+t.radiusX,t.y+t.radiusY)),this.sM(),this.Ds.xs(),this}getDimensions(){return this.dimensions}setFillStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.eM(),this}getFillStyle(){return this.ke}setStrokeStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.eM(),this}getStrokeStyle(){return this.Te}getDominantStyle(){return this.ke}}class Uu extends zu{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.ws="Ellipse Series",this.XM=Yi(),this.jM=t=>{const i=t.getDimensions(),s=n(i.x,i.y);return At(s,this.scale,this.Ds.us.ft)},this.chart.us.jn(Vo.wf),this.JM=c,this.PM=new Wu(this.Ds,this.scale,Yt,Yt,Yt,Yt,Yt,(t=>!1),this.qi,this.JM).dispose(),this.QM=new Ml((()=>{const t=this.XM.xt(this.Ds.Yp(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.De(s.fillStyle).Pe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.$r();return s.wl(i.vertices),this.XM.zt(s,i.figure),s})))),(()=>{this.XM.Vt()}),((t,i)=>{this.ys(i)}))}solveNearest(t,i){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY};if(0===this._M.length)return;const h=Nu(e,this._M.filter((t=>t.getVisible())),this.jM,us);if(!h)return;const r=At(h[0],this.Ds.us.ft,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],...h[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return ji({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,radiusX:0,radiusY:0,drawSteps:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}yM(t){if(!(t instanceof Ks||t instanceof qs))throw new Error("EllipseSeries only supports Linear Axes")}TM(t){const i=this.QM.Mp();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=[],h=void 0!==s.drawSteps?s.drawSteps:72;for(let t=0;t<=h;t+=1){const i=t/h*2*Math.PI,r=s.x+s.radiusX*Math.cos(i),n=s.y+s.radiusY*Math.sin(i);e.push({x:r,y:n})}const r=t.getFillStyle(),n=t.getStrokeStyle();i.add({jo:t.jo,vertices:e,figure:t},{fillStyle:r,strokeStyle:n})})),i.finishPlot()}add(t){const i=new Wu(this.Ds,this.scale,this.oM,this.sM,this.eM,this.hM,this.rM,this.kM,this.qi,this.JM).setDimensions(t);return this.FM(i),this.CM=!0,this.chart.us.xs(),i}}class Yu extends Du{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a),this.KM=[],this.qa=ts,this.Ds=t,this.scale=i,this.ke=Ii(a.polygonSeriesFillStyle,l),this.Te=Ii(a.polygonSeriesStrokeStyle,l)}getBoundaries(){return this.qa}setDimensions(t){return this.KM=t,this.qa=As(this.KM),this.sM(),this.Ds.xs(),this}getDimensions(){return this.KM}setFillStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.eM(),this}getFillStyle(){return this.ke}setStrokeStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.eM(),this}getStrokeStyle(){return this.Te}getDominantStyle(){return this.ke}}class Hu extends zu{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.ws="Polygon Series",this.XM=Yi(),this.jM=t=>{const i=t.getBoundaries(),s=n((i.min.x+i.max.x)/2,(i.min.y+i.max.y)/2);return At(s,this.scale,this.Ds.us.ft)},this.chart.us.jn(Vo.wf),this.JM=c,this.PM=new Yu(this.Ds,this.scale,Yt,Yt,Yt,Yt,Yt,(t=>!1),this.qi,this.JM).dispose(),this.QM=new Ml((()=>{const t=this.XM.xt(this.Ds.Yp(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.De(s.fillStyle).Pe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.$r();return s.wl(i.vertices),this.XM.zt(s,i.figure),s})))),(()=>{this.XM.Vt()}),((t,i)=>{this.ys(i)}))}solveNearest(t,i){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY};if(0===this._M.length)return;const h=Nu(e,this._M.filter((t=>t.getVisible())),this.jM,us);if(!h)return;const r=At(h[0],this.Ds.us.ft,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],coordinates:h[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return ji({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,coordinates:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}yM(t){}TM(t){const i=this.QM.Mp();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=t.getFillStyle(),h=t.getStrokeStyle();i.add({jo:t.jo,vertices:s,figure:t},{fillStyle:e,strokeStyle:h})})),i.finishPlot()}add(t){const i=new Yu(this.Ds,this.scale,this.oM,this.sM,this.eM,this.hM,this.rM,this.kM,this.qi,this.JM).setDimensions(t);return this.FM(i),this.CM=!0,this.chart.us.xs(),i}}class $u extends Du{constructor(t,i,s,e,h,r,o,a,l,u){super(t,i,s,e,h,r,o,a,l),this.qM={x:0,y:0,width:0,height:0},this.t_={x1:0,y1:0,x2:0,y2:0},this.qa=c(n(0,0),n(0,0)),this.ke=Ii(l.rectangleSeriesFillStyle,u),this.Ds=t,this.scale=i,this.Te=Ii(l.rectangleSeriesStrokeStyle,u)}getBoundaries(){return this.qa}setDimensions(t){return"x"in t?(this.qM=t,this.t_={x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}):(this.t_=t,this.qM={x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}),this.qa=As([this.qM,n(this.qM.x+this.qM.width,this.qM.y+this.qM.height)]),this.sM(),this.Ds.xs(),this}getDimensionsPositionAndSize(){return this.qM}getDimensionsTwoPoints(){return this.t_}setFillStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.eM(),this}getFillStyle(){return this.ke}setStrokeStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.eM(),this}getStrokeStyle(){return this.Te}getDominantStyle(){return this.ke}}class Xu extends zu{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.ws="Rectangle Series",this.XM=Yi(),this.jM=t=>{const i=t.getDimensionsPositionAndSize(),s=n(i.x+i.width/2,i.y+i.height/2);return At(s,this.scale,this.Ds.us.ft)},this.chart.us.jn(Vo.wf),this.JM=c,this.PM=new $u(this.Ds,this.scale,Yt,Yt,Yt,Yt,Yt,(t=>!1),this.qi,this.JM).dispose(),this.QM=new Ml((()=>{const t=this.XM.xt(this.Ds.Yp(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.De(s.fillStyle).Pe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.$r();return s.wl(i.vertices),this.XM.zt(s,i.figure),s})))),(()=>{this.XM.Vt()}),((t,i)=>{this.ys(i)}))}solveNearest(t,i){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY};if(0===this._M.length)return;const h=Nu(e,this._M.filter((t=>t.getVisible())),this.jM,us);if(!h)return;const r=At(h[0],this.Ds.us.ft,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],...h[1].getDimensionsPositionAndSize(),...h[1].getDimensionsTwoPoints(),series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return ji({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,x1:0,y1:0,x2:0,y2:0,width:0,height:0,multiHit:0,figure:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}yM(t){}TM(t){const i=this.QM.Mp();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensionsTwoPoints(),e=[{x:s.x1,y:s.y1},{x:s.x1,y:s.y2},{x:s.x2,y:s.y2},{x:s.x2,y:s.y1}],h=t.getFillStyle(),r=t.getStrokeStyle();i.add({jo:t.jo,vertices:e,figure:t},{fillStyle:h,strokeStyle:r})})),i.finishPlot()}add(t){const i=new $u(this.Ds,this.scale,this.oM,this.sM,this.eM,this.hM,this.rM,this.kM,this.qi,this.JM).setDimensions(t);return this.FM(i),this.CM=!0,this.chart.us.xs(),i}}class ju extends Du{constructor(t,i,s,e,h,r,o,a,l,u){super(t,i,s,e,h,r,o,a,l),this.dimensions={startX:0,startY:0,endX:0,endY:0},this.qa=c(n(0,0),n(0,0)),this.qi=l,this.Ds=t,this.scale=i,this.Te=Ii(l.segmentSeriesStrokeStyle,u)}getBoundaries(){return this.qa}setDimensions(t){return this.dimensions=t,this.qa=c(n(Math.min(t.startX,t.endX),Math.min(t.startY,t.endY)),n(Math.max(t.startX,t.endX),Math.max(t.startY,t.endY))),this.sM(),this.Ds.xs(),this}getDimensions(){return this.dimensions}setStrokeStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.eM(),this}getStrokeStyle(){return this.Te}getDominantStyle(){const t=this.Te;return t!==at?t.getFillStyle():O}}class Zu extends zu{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.ws="Segment Series",this.i_=Yi(),this.jM=t=>{const i=t.getDimensions(),s=n((i.startX+i.endX)/2,(i.startY+i.endY)/2);return At(s,this.scale,this.Ds.us.ft)},this.chart.us.jn(Vo.wf),this.JM=c,this.PM=new ju(this.Ds,this.scale,Yt,Yt,Yt,Yt,Yt,(t=>!1),this.qi,this.JM).dispose(),this.ZM=new Ml((()=>{const t=this.i_.xt(this.Ds.Ug(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ge(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.$r();return s.Hg(i.start,i.end),this.i_.zt(s,i.figure),s})))),(()=>{this.i_.Vt()}),((t,i)=>{this.ys(i)}))}solveNearest(t,i){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY};if(0===this._M.length)return;const h=Nu(e,this._M.filter((t=>t.getVisible())),this.jM,us);if(!h)return;const r=At(h[0],this.Ds.us.ft,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],...h[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return ji({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,startX:0,startY:0,endX:0,endY:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}yM(t){}TM(t){const i=this.ZM.Mp();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e={x:s.startX,y:s.startY},h={x:s.endX,y:s.endY},r=t.getStrokeStyle();i.add({jo:t.jo,start:e,end:h,figure:t},{strokeStyle:r})})),i.finishPlot()}add(t){const i=new ju(this.Ds,this.scale,this.oM,this.sM,this.eM,this.hM,this.rM,this.kM,this.qi,this.JM).setDimensions(t);return this.FM(i),this.CM=!0,this.chart.us.xs(),i}}class Qu extends Lu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.ws="Heatmap Grid Series",this.SS={},this.chart.us.jn(Vo._f),this.s_=a,this.qi=l;const d=c;this.ke=Ii(l.heatmapGridSeriesFillStyle,d),this.bS=Ii(this.qi.heatmapGridSeriesWireframeStyle,d);const f={heatmapDataType:"intensity",dataOrder:a.dataOrder||"columns",columns:a.columns,rows:a.rows};this.Jn=f,this.e_=this.Ds.h_(this.scale,[],f).De(this.ke).xS(this.bS).cs(this.getHighlight()),this.fs(this.e_),this.setHighlightOnHover(!1)}solveNearest(t,i="show-nearest"){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=At(e,this.Ds.us.ft,this.scale),r=Ea(i)?this.e_.$x(h):this.e_.Kc(h);if(r)return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:r.x,y:r.y,column:r.column,row:r.row,intensity:r.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:Z(this.ke)?this.ke.lut:void 0}}Ji(t,i){return ji({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,intensity:0,column:0,row:0,lut:Z(this.ke)?this.ke.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}_S(){const t=this.SS.start||{x:0,y:0};let i;i=this.SS.end?{x:(this.SS.end.x-t.x)/this.Jn.columns,y:(this.SS.end.y-t.y)/this.Jn.rows}:this.SS.step?this.SS.step:{x:1,y:1},this.e_.wS(t,i),this.chart.us.xs()}setStart(t){return this.SS.start=t,this._S(),this}getStart(){return this.e_.CS().start}setStep(t){return this.SS.step=t,this._S(),this}getStep(){return this.e_.CS().step}setEnd(t){return this.SS.end=t,this._S(),this}getEnd(){return this.e_.CS().end}clear(){return this.e_.Vt(),this.Ds.xs(),this.L.emit("dataClear",this),this}setWireframeStyle(t){return this.bS="function"==typeof t?t(this.bS):t,this.e_.xS(this.bS),this.Ds.xs(),this.L.emit("styleChange",this),this}getWireframeStyle(){return this.bS}setIntensityInterpolation(t){return t=t||"disabled",this.e_.TS(t),this.Ds.xs(),this.L.emit("styleChange",this),this}getIntensityInterpolation(){return this.e_.FS()}nv(){return this.lv&&this.getVisible()}jd(){return ki(this.ke)}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke})}r_(t){this.e_.r_().forEach((i=>{t.e_.IS(i)}))}$M(t){return this.L.off(t)}HM(t){return this.L.on("dataClear",t)}n_(t){return this.L.on("styleChange",t)}o_(t){return this.L.off(t)}getXMax(){const t=this.e_;return t?t.vt():void 0}getXMin(){const t=this.e_;return t?t.yt():void 0}getYMax(){const t=this.e_;return t?t.bt():void 0}getYMin(){const t=this.e_;return t?t.St():void 0}Pr(){const t=n(0,0);return t.x=Math.max(t.x,this.e_.kl()),t.y=Math.max(t.y,this.e_.Tl()),t}yM(t){if(!(t instanceof Ks))throw new Error("HeatmapGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof Ks&&t.Mi())throw new Error("HeatmapGridSeries can not be attached to a high precision Axis.")}Ee(t,i){t.cs(i),this.Ds.xs()}Le(){return super.Le(),this.e_.qo(this.getBoundaries()),this}}class Ju extends Qu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u,c),this.Mv=!1}invalidateIntensityValues(t){if(this.Mv&&this.chart.us.jn(Vo.kf),Array.isArray(t)){if(0===t.length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Jn.dataOrder?t.length:t[0].length,rows:"rows"===this.Jn.dataOrder?t.length:t[0].length},s="columns"===this.Jn.dataOrder?this.Jn.columns:this.Jn.rows,e="columns"===this.Jn.dataOrder?this.Jn.rows:this.Jn.columns;if(i.x>s||i.y>e){if(!0===this.chart.vA.qn){const t=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Jn.columns}x${this.Jn.rows}, input ${i.columns}x${i.rows}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Ot.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.e_.IS({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Jn.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Jn.dataOrder?t.values.length:t.values[0].length},s="columns"===this.Jn.dataOrder?t.iColumn:t.iRow,e=s+i.primary-1,h="columns"===this.Jn.dataOrder?t.iRow:t.iColumn,r=h+i.secondary-1,n=("columns"===this.Jn.dataOrder?this.Jn.columns:this.Jn.rows)-1,o=("columns"===this.Jn.dataOrder?this.Jn.rows:this.Jn.columns)-1;if(s<0||h<0){if(!0===this.chart.vA.qn){const i=`HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niColumn: ${t.iColumn}, iRow: ${t.iRow}.\nNo intensity values will be invalidated.`;Ot.console.warn(i)}return this}if(e>n||r>o){if(!0===this.chart.vA.qn){const s=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Jn.columns}x${this.Jn.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Ot.console.warn(s)}const s=Math.max(e-n,0),h=i.primary-s,a=Math.max(r-o,0),l=[];for(let i=0;i<h;i+=1)l[i]=t.values[i].slice(0,a>0?-a:void 0);t={iColumn:t.iColumn,iRow:t.iRow,values:l}}this.e_.IS({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.L.emit("invalidateIntensity",this,t),this.Ds.xs(),this.Mv=!0,this}setFillStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.e_.De(this.ke),this.L.emit("styleChange",this),this.Ds.xs(),this}getFillStyle(){return this.ke}a_(t){return this.L.on("invalidateIntensity",t)}l_(t){return this.L.off(t)}}class Ku extends Lu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.ws="Scrolling Heatmap Grid Series",this.SS={},this.chart.us.jn(Vo._f),this.chart.us.jn(Vo.kf);const d=c;this.ke=Ii(l.heatmapScrollingGridSeriesFillStyle,d),this.bS=Ii(this.qi.heatmapScrollingGridSeriesWireframeStyle,d);const f={scrollDimension:"columns",heatmapDataType:"intensity",...a};this.Jn=f,this.u_=this.Ds.c_(this.scale,[],f).De(this.ke).xS(this.bS).cs(this.getHighlight()),this.fs(this.u_),this.setHighlightOnHover(!1)}solveNearest(t,i="show-nearest"){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=At(e,this.Ds.us.ft,this.scale),r=Ea(i)?this.u_.$x(h):this.u_.Kc(h);if(r)return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:r.x,y:r.y,column:r.column,row:r.row,intensity:r.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:Z(this.ke)?this.ke.lut:void 0}}Ji(t,i){return ji({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,intensity:0,multiHit:0,column:0,row:0,lut:Z(this.ke)?this.ke.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}_S(){const t=this.SS.start||{x:0,y:0};let i;i=this.SS.step?this.SS.step:{x:1,y:1},this.u_.wS(t,i),this.chart.us.xs()}setStart(t){return this.SS.start=t,this._S(),this}getStart(){return this.u_.CS().start}setStep(t){return this.SS.step=t,this._S(),this}getStep(){return this.u_.CS().step}clear(){return this.u_.Vt(),this.Ds.xs(),this}setWireframeStyle(t){return this.bS="function"==typeof t?t(this.bS):t,this.u_.xS(this.bS),this.Ds.xs(),this}getWireframeStyle(){return this.bS}setPixelInterpolationMode(t){return t=t||"disabled",this.u_.TS(t),this.Ds.xs(),this}getPixelInterpolationMode(){return this.u_.FS()}setDataCleaning(t){return this.u_.wu(t),this.Ds.xs(),this}nv(){return this.lv&&this.getVisible()}jd(){return ki(this.ke)}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke})}De(t){return this.ke="function"==typeof t?t(this.ke):t,this.u_.De(this.ke),this.Ds.xs(),this}yM(t){if(!(t instanceof Ks))throw new Error("HeatmapScrollingGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof Ks&&t.Mi())throw new Error("HeatmapScrollingGridSeries can not be attached to a high precision Axis.")}getXMax(){return this.u_.vt()||0}getXMin(){return this.u_.yt()||0}getYMax(){return this.u_.bt()||0}getYMin(){return this.u_.St()||0}Pr(){const t=n(0,0);return t.x=Math.max(t.x,this.u_.kl()),t.y=Math.max(t.y,this.u_.Tl()),t}Ee(t,i){t.cs(i),this.Ds.xs()}}class qu extends Ku{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u,c)}addIntensityValues(t){if(0===t.length||0===t[0].length)return this;const i=t.length,s=t[0].length,e=("columns"===this.Jn.scrollDimension?t.length:t[0].length,"rows"===this.Jn.scrollDimension?t.length:t[0].length,0+s-1),h=this.Jn.resolution-1;if(e>h){if(!0===this.chart.vA.qn){const t=`HeatmapScrollingGridSeries.addIntensityValues intensity matrix overflow.\nGrid resolution: ${this.Jn.resolution}, input ${i}x${s}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Ot.console.warn(t)}const e=[];for(let s=0;s<i;s+=1)e[s]=t[s].slice(0,h+1);t=e}return this.u_.RS(t),this.Ds.xs(),this}invalidateIntensityValues(t){return this.u_.IS(t.iSample,t.values),this.Ds.xs(),this}getSampleCount(){return this.u_.d_()}setFillStyle(t){return this.De(t),this}getFillStyle(){return this.ke}}const tc=(t,i,s)=>{let e,h,r=Number.MAX_VALUE;for(let n=0;n<i.length;n+=1){const o=i[n],a=s(o,t);if(a){const i=us(t,a[0]),s=us(t,a[1]);(void 0===e||i<r||s<r)&&(e=a,h=o,i<r?r=i:s<r&&(r=s))}}return e&&h?[e,h]:void 0};class ic extends Lu{constructor(){super(...arguments),this.BM=[],this.Mu=[],this.f_=[],this.A_=[],this.NM=1e3,this.LM=0,this.$i=ue.onHover,this.Pl={type:"disabled",packager:(t,i,s)=>t.slice()},this.g_=[],this.y_=[],this.m_=!1,this.p_=(t,i)=>{const s=t.Jx(i);if(s)return[At(s[0],this.scale,this.Ds.us.ft),At(s[1],this.scale,this.Ds.us.ft)]},this.v_=(t,i)=>{const s=t.S_(i);if(s)return[At(s[0],this.scale,this.Ds.us.ft),At(s[1],this.scale,this.Ds.us.ft)]},this.jd=()=>ki(this.b_)||ki(this.x_),this.M_=t=>{const i=t.length;if(this.BM.length>0){const s=this.BM.length-1,e=this.BM[s];if(i>0){const[i,s]=e.ol(),[h,r]=e.nl();if((h?i.length+h.length:i.length)>=this.NM){const o=h&&h.length>0?h[h.length-1]:i[i.length-1],l=r&&r.length>0?r[r.length-1]:s[i.length-1],u=(o.x+t[0].position)/2,d=Ps(u,o,n(t[0].position,t[0].high)).y,f=Ps(u,l,n(t[0].position,t[0].low)).y,A=a(u,d,f);e.fl(A,c(n(u,f),n(u,d))).Yl(!0),this.__([A].concat(t)).Wl(!0)}else e.fl(t)}}else i>0&&this.__(t)},this.w_=t=>{const i=this.g_,s=t.length;if(this.g_.length>0){if(s>0){const s=i[i.length-1],e=s.ol(),h=s.nl();if(e.length+h.length>=this.NM){const r=h.length>0?h[h.length-1]:e[e.length-1],o=(r.x+t[0].x)/2,a=Ps(o,r,n(t[0].x,t[0].y)).y,l=n(o,a);s.fl(l,c(n(o,a),n(o,a))).Yl(!0),i.push(this.C_([l].concat(t),this.VM).Wl(!0))}else s.fl(t)}}else s>0&&i.push(this.C_(t))},this.k_=t=>{const i=this.y_,s=t.length;if(this.y_.length>0){if(s>0){const s=i[i.length-1],e=s.ol(),h=s.nl();if(e.length+h.length>=this.NM){const r=h.length>0?h[h.length-1]:e[e.length-1],o=(r.x+t[0].x)/2,a=Ps(o,r,n(t[0].x,t[0].y)).y,l=n(o,a);s.fl(l,c(n(o,a),n(o,a))).Yl(!0),i.push(this.T_([l].concat(t)).Wl(!0))}else s.fl(t)}}else s>0&&i.push(this.T_(t))}}ds(){return"ProgressiveX"}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.LM=void 0!==i&&i>0?i:0,this.Ds.xs(),this}clear(){for(let t=0;t<this.BM.length;t+=1)this.BM[t].dispose();for(let t=0;t<this.g_.length;t+=1)this.g_[t].dispose();for(let t=0;t<this.y_.length;t+=1)this.y_[t].dispose();return this.Mu.length=0,this.f_.length=0,this.A_.length=0,this.VM=void 0,this.BM.length=0,this.g_.length=0,this.y_.length=0,this.Ds.xs(),this.L.emit("dataClear",this),this}getPointAmount(){return this.BM.reduce(((t,i)=>t+i.Al()+i.yl()),this.Mu.length)}getXMax(){return ei(this.BM,Qt,Math.max,ti,this.VM)||0}getXMin(){return ei(this.BM,Zt,Math.min,qt,this.VM)||0}getYMax(){return ei(this.BM,Kt,Math.max,si,this.VM)||0}getYMin(){return ei(this.BM,Jt,Math.min,ii,this.VM)||0}Pr(){const t=n(0,0);for(const i of this.BM)t.x=Math.max(t.x,i.kl()),t.y=Math.max(t.y,i.Tl());return t}nv(){return this.lv&&this.getPointAmount()>0&&this.getVisible()}yM(t){}EM(t,i,s){this.Mu=xi(this.Mu,t,{canReturnB:!1}),this.f_=xi(this.f_,i,{canReturnB:!1}),this.A_=xi(this.A_,s,{canReturnB:!1}),this.Ds.xs()}F_(t,i,s,e){this.I_(i,s,e),this.EM(Array.isArray(t)?t:[t],i,s)}I_(t,i,s){const e=ys(As(t),As(i));this.VM?this.VM=ys(this.VM,e):this.VM=e,s&&(this.VM=ys(this.VM,s))}P_(){const t=this.BM.length,i=Math.min(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd());let s=0;if(t>1)for(let e=0;e<t-1;e+=1)this.scale.x.gi(this.BM[e].vt(),this.BM[e].kl())<i&&(s+=1);return s}OM(t,i,s,e){if(s>0){const h=Math.ceil(s/i),r=t.length-h;if(r>0&&e>0){const i=r-e>0?e:r;if(i>0){for(let s=0;s<i;s+=1)t[s].dispose();t.splice(0,i)}}}}D_(t){const i=this.BM.length>0?this.BM[this.BM.length-1]:void 0,s=i?i.ol()[0].length+(i.nl()[0]?i.nl()[0].length:0):void 0;Ru(t,s,this.NM,this.M_)}B_(t){const i=this.g_.length>0?this.g_[this.g_.length-1].ol().length+this.g_[this.g_.length-1].nl().length:void 0;Ru(t,i,this.NM,this.w_)}L_(t,i){const s=this.g_.length>0?this.g_[this.g_.length-1].ol().length+this.g_[this.g_.length-1].nl().length:void 0;Ru(t,s,this.NM,this.w_),Ru(i,s,this.NM,this.k_)}__(t,i){const s=this.Ds.R_(this.scale).fl(t,i).De(this.b_).Nl(this.x_).Vl(this.Pl).cs(this.getHighlight());return this.BM.push(s),this.fs(s),s}E_(t,i,s){const e=this.Ds.op(this.scale,void 0,[gl.UserSeries]).fl(t,s).setMouseInteractions(!1).Ge(i).cs(this.getHighlight());return this.fs(e),e}C_(t,i){return this.E_(t,this.z_,i)}T_(t,i){return this.E_(t,this.V_,i)}O_(t){this.b_="function"==typeof t?t(this.b_):t;const i=this.b_;for(let t=0;t<this.BM.length;t+=1)this.BM[t].De(i);this.Ds.xs()}N_(t){this.x_="function"==typeof t?t(this.x_):t;const i=this.x_;for(let t=0;t<this.BM.length;t+=1)this.BM[t].Nl(i);this.Ds.xs()}G_(){return this.b_}Gl(){return this.x_}W_(t){this.z_="function"==typeof t?t(this.z_):t;const i=this.z_;for(let t=0;t<this.g_.length;t+=1)this.g_[t].Ge(i);this.Ds.xs()}U_(t){this.V_="function"==typeof t?t(this.V_):t;const i=this.V_;for(let t=0;t<this.y_.length;t+=1)this.y_[t].Ge(i);this.Ds.xs()}Y_(){return this.z_}H_(){return this.V_}Ee(t,i){t.cs(i),this.X_(i),this.Ds.xs()}X_(t){for(let i=0;i<this.g_.length;i+=1)this.g_[i].cs(t);for(let i=0;i<this.y_.length;i+=1)this.y_[i].cs(t)}pv(){if(super.pv(),this.m_=!1,this.LM>0){const t=this.P_();this.OM(this.BM,this.NM,this.LM,t),this.g_.length>0&&this.OM(this.g_,this.NM,this.LM,t),this.y_.length>0&&this.OM(this.y_,this.NM,this.LM,t),this.m_=!0}}Le(){if(super.Le(),this.Mu.length>0&&(this.D_(this.Mu),this.j_(this.f_,this.A_),this.m_=!0),this.m_){const t=this.getBoundaries();for(const i of this.BM)i.qo(t);for(const i of this.g_)i.qo(t);for(const i of this.y_)i.qo(t)}}xp(){super.xp(),this.VM=void 0,this.Mu.length=0,this.f_.length=0,this.A_.length=0}}class sc extends ic{constructor(t,i,s,e,h,r,n,o,a=0,l,u){super(t,i,s,e,h,r,n,o,l,u),this.chart.us.jn(Vo.Mf),this.Z_=a}add(t){0!==this.BM.length&&this.chart.us.jn(Vo.kf);const i=Array.isArray(t)?t:[t];if(i.length>0){const t=this.Q_(i),[s,e]=this.J_(t);this.F_(t,s,e,c(n(Ki,this.Z_),n(qi,this.Z_)));const h=this.Mu[this.Mu.length-1];this.zM=h?{position:h.position,high:h.high,low:h.low}:void 0,this.L.emit("dataAdd",this,i,this.VM)}return this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.zM?this.zM.position+i:0),this.add(Vu(t,i,e)),this}UM(t){return this.L.on("dataAdd",t)}YM(t){return this.L.off(t)}HM(t){return this.L.on("dataClear",t)}$M(t){return this.L.off(t)}}class ec extends sc{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l,u);const c=t.getSeries().length;this.b_=Ii(this.qi.areaSeriesBipolarHighFillStyle,c),this.z_=Ii(this.qi.areaSeriesBipolarHighStrokeStyle,c),this.x_=Ii(this.qi.areaSeriesBipolarLowFillStyle,c),this.V_=Ii(this.qi.areaSeriesBipolarLowStrokeStyle,c)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=tc(e,this.BM,Ea(i)?this.v_:this.p_);if(void 0!==h&&void 0!==h[0]){const t=At(h[0][0],this.Ds.us.ft,this.scale),i=At(h[0][1],this.Ds.us.ft,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY,multiHit:[t,i]}}}Q_(t){return this.K_(t)}j_(t,i){return this.L_(t,i)}K_(t){let i=0;const s=[],e=t.length,h=this.Z_;return e>0&&(this.q_&&(this.q_.y<=h&&h<=t[0].y||this.q_.y>=h&&h>=t[0].y)&&(s[i]=a(.5*(this.q_.x+t[0].x),h,h),i+=1),this.q_=t[e-1],1===e?this.tw(t[0],s,i):this.iw(t,s)),s}tw(t,i,s=0){return i[s]=a(t.x,t.y,this.Z_),s+1}iw(t,i){let s=0,e=0;const h=t.length-1,r=this.Z_;for(;e<h;){const h=t[e],n=t[e+=1],o=a(h.x,h.y,r);if(0!==s&&hi(i[s-1],o)||(i[s]=o,s+=1),h.y<=r&&r<=n.y||h.y>=r&&r>=n.y){const t=h.y,e=n.y,o=r,l=t===e?n.x:un(h.x,n.x,(o-t)/(e-t));i[s]=a(l,r,r),s+=1}i[s]=a(n.x,n.y,r),s+=1}return s}J_(t){const i=t.length,s=Array(i),e=Array(i),h=this.Z_;for(let r=0;r<i;r+=1){const i=t[r];i.high>h?(s[r]=n(i.position,i.high),e[r]=n(i.position,h)):i.high<h?(s[r]=n(i.position,h),e[r]=n(i.position,i.high)):(s[r]=n(i.position,i.high),e[r]=n(i.position,i.high))}return[s,e]}WM(){return Eu(this.BM,(t=>t[0]))}setPositiveFillStyle(t){return this.O_(t),this}setNegativeFillStyle(t){return this.N_(t),this}setPositiveStrokeStyle(t){return this.W_(t),this}setNegativeStrokeStyle(t){return this.U_(t),this}getPositiveFillStyle(){return this.G_()}getNegativeFillStyle(){return this.Gl()}getPositiveStrokeStyle(){return this.Y_()}getNegativeStrokeStyle(){return this.H_()}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.b_,fill2:this.x_,behavior:{colorStep:!0}})}}class hc extends sc{constructor(){super(...arguments),this.V_=at}j_(t){return this.B_(t)}J_(t){const i=t.length,s=Array(i);for(let e=0;e<i;e+=1){const i=t[e];s[e]=n(i.position,i.high)}return[s,[]]}setStrokeStyle(t){return this.W_(t),this}getStrokeStyle(){return this.Y_()}}class rc extends hc{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l,u);const c=t.getSeries().length;this.b_=O,this.x_=Ii(this.qi.areaSeriesNegativeFillStyle,c),this.z_=Ii(this.qi.areaSeriesNegativeStrokeStyle,c)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=tc(e,this.BM,Ea(i)?this.v_:this.p_);if(void 0!==h&&void 0!==h[0]){const t=At(h[0][0],this.Ds.us.ft,this.scale),i=At(h[0][1],this.Ds.us.ft,this.scale),s=t.y<i.y?t:i;return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.axisX,y:this.axisY}},...s,series:this,axisX:this.axisX,axisY:this.axisY}}}Q_(t){return this.sw(t)}sw(t){const i=[];return 1===t.length?this.tw(t[0],i):this.iw(t,i),i}tw(t,i,s=0){const e=this.Z_;return i[s]=t.y>e?a(t.x,e,e):a(t.x,t.y,e),s+1}iw(t,i,s=0){let e=0;const h=t.length-1,r=this.Z_;for(;e<h;){const h=t[e],o=t[e+=1];if(h.y<=r){const t=a(h.x,h.y,r);if(0!==s&&hi(i[s-1],t)||(i[s]=t,s+=1),o.y>r){const t=Es(n(qi,r),n(Ki,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,r,r),s+=1}else i[s]=a(o.x,o.y,r),s+=1}else{const t=a(h.x,r,r);if(0!==s&&hi(i[s-1],t)||(i[s]=t,s+=1),o.y<=r){const t=Es(n(qi,r),n(Ki,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,o.y,r),s+=1}else i[s]=a(o.x,r,r),s+=1}}return s}WM(){return Eu(this.BM,(t=>t[1]))}setFillStyle(t){return this.N_(t),this}getFillStyle(){return this.Gl()}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.x_,stroke:this.z_})}}class nc extends hc{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u);const d=c;this.b_=Ii(this.qi.areaSeriesPositiveFillStyle,d),this.x_=O,this.z_=Ii(this.qi.areaSeriesPositiveStrokeStyle,d)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=tc(e,this.BM,Ea(i)?this.v_:this.p_);if(void 0!==h&&void 0!==h[0]){const t=At(h[0][0],this.Ds.us.ft,this.scale),i=At(h[0][1],this.Ds.us.ft,this.scale),s=t.y<i.y?i:t;return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.axisX,y:this.axisY}},...s,series:this,axisX:this.axisX,axisY:this.axisY}}}Q_(t){return this.ew(t)}ew(t){const i=[];return 1===t.length?this.tw(t[0],i):this.iw(t,i),i}tw(t,i,s=0){const e=this.Z_;return i[s]=t.y<e?a(t.x,e,e):a(t.x,t.y,e),s+1}iw(t,i,s=0){let e=0;const h=t.length-1,r=this.Z_;for(;e<h;){const h=t[e],o=t[e+=1];if(h.y>=r){const t=a(h.x,h.y,r);if(0!==s&&hi(i[s-1],t)||(i[s]=t,s+=1),o.y<r){const t=Es(n(qi,r),n(Ki,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,r,r),s+=1}else i[s]=a(o.x,o.y,r),s+=1}else{const t=a(h.x,r,r);if(0!==s&&hi(i[s-1],t)||(i[s]=t,s+=1),o.y>=r){const t=Es(n(qi,r),n(Ki,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,o.y,r),s+=1}else i[s]=a(o.x,r,r),s+=1}}return s}WM(){return Eu(this.BM,(t=>t[0]||[]))}setFillStyle(t){return this.O_(t),this}getFillStyle(){return this.G_()}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.b_,stroke:this.z_})}}const oc={Positive:nc,Negative:rc,Bipolar:ec};class ac extends ic{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l),this.chart.us.jn(Vo.Mf);const c=u;this.b_=Ii(this.qi.areaRangeSeriesFillStyle,c),this.z_=Ii(this.qi.areaRangeSeriesStrokeStyle,c),this.x_=Ii(this.qi.areaRangeSeriesFillStyleInverted,c),this.V_=Ii(this.qi.areaRangeSeriesStrokeStyleInverted,c)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=tc(e,this.BM,Ea(i)?this.v_:this.p_);if(void 0!==h&&void 0!==h[0]){const t=At(h[0][0],this.Ds.us.ft,this.scale),i=At(h[0][1],this.Ds.us.ft,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY,multiHit:[t,i]}}}add(t){const i=Array.isArray(t)?t:[t],[s,e]=u(i);this.F_(t,s,e);const h=this.Mu[this.Mu.length-1];return this.zM=h?{position:h.position,high:h.high,low:h.low}:void 0,this.L.emit("dataAdd",this,i,this.VM),this}addArraysHighLow(t,i,s=1,e=0){if(t.length!==i.length)throw new Error("arrayHigh and arrayLow lengths are not equal");{let h=e;h||(h=this.zM?this.zM.position+s:0),this.add(((t,i,s=1,e)=>{const h=void 0!==e?e:0,r=new Array(t.length);for(let e=0;e<t.length;e+=1)r[e]={position:h+s*e,high:t[e],low:i[e]};return r})(t,i,s,h))}return this}j_(t,i){this.L_(t,i)}setHighFillStyle(t){return this.O_(t),this}setLowFillStyle(t){return this.N_(t),this}setHighStrokeStyle(t){return this.W_(t),this}setLowStrokeStyle(t){return this.U_(t),this}getHighFillStyle(){return this.G_()}getLowFillStyle(){return this.Gl()}getHighStrokeStyle(){return this.Y_()}getLowStrokeStyle(){return this.H_()}WM(){return Eu(this.BM,(t=>{const i=t[0],s=t[1];if(!i||!s)return[];const e=[],h=i.length;for(let t=0;t<h;t+=1)e[t]={position:i[t].x,high:i[t].y,low:s[t].y};return e}))}UM(t){return this.L.on("dataAdd",t)}YM(t){return this.L.off(t)}HM(t){return this.L.on("dataClear",t)}$M(t){return this.L.off(t)}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.b_,fill2:this.x_,behavior:{colorStep:!0}})}}var lc;!function(t){t[t.before=0]="before",t[t.middle=.5]="middle",t[t.after=1]="after"}(lc||(lc={}));const uc=(t,i)=>{const s=[],e=t.length,h=i;if(e>0){let i=0,r=t[0];s[i]=r,i+=1;for(let o=1;o<e;o+=1){const e=t[o];if(h<=0)s[i]=n(r.x,e.y),i+=1;else{const t=r.x*(1-h)+e.x*h;s[i]=n(t,r.y),i+=1,s[i]=n(t,e.y),i+=1}s[i]=e,i+=1,r=e}}return s},cc=(t,i)=>{const s=t*t,e=s*t,h=1-t,r=h*h,o=r*h;return n(o*i[0].x+3*t*r*i[1].x+3*s*h*i[2].x+e*i[3].x,o*i[0].y+3*t*r*i[1].y+3*s*h*i[2].y+e*i[3].y)},dc=(t,i=32)=>{if(2===t.length)return[t[0],t[1]];const s=(t=>{const i=1e-5,s=t.length-1,e=Array(s);if(s>1){let h=n(0,0),r=n(0,0),o=n(0,0),a=bs(Cs(t[1],t[0]));const l=3;let u=0,c=0;for(let d=0;d<s;d+=1){const f=Array(4);if(f[0]=t[d],f[1]=t[d],f[3]=t[d+1],f[2]=t[d+1],o=a,h=r,d+1<s?(a=t[d+2]===t[d+1]?n(0,0):bs(Cs(t[d+2],t[d+1])),r=bs(ws(o,a))):r=n(0,0),t[d+1].y===t[d].y)u=0,c=0;else{const s=t[d+1].x-t[d].x;u=Math.abs(h.x)>i?Math.abs(s/(l*h.x)):1,c=Math.abs(r.x)>i?Math.abs(s/(l*r.x)):1}f[1]=ws(_s(h,u),f[1]),f[2]=Cs(f[2],_s(r,c)),e[d]=f}}return e.length>0?e:[]})(t),e=s.length,h=Array(e*i);let r=0;for(let t=0;t<e;t+=1)for(let e=0;e<=i;e+=1)h[r]=cc(e/i,s[t]),r+=1;return h};class fc extends Ou{constructor(t,i,s,e,h,r,o,a,l,u,d,f,A,g,y){super(t,i,s,e,h,r,o,a,l,d,f),this.BM=[],this.NM=1e5,this.qx=5,this.Ma=0,this.Qa=!1,this.Ja=!1,this.Ka=!1,this.hw=1,this.rw=[],this.nw=(t,i)=>{const s=t.Kc(i);if(s)return At(s,this.scale,this.Ds.us.ft)},this.ow=(t,i)=>{const s=t.S_(i);if(s)return At(s,this.scale,this.Ds.us.ft)},this.aw=t=>{if(this.BM.length>0){const i=this.BM[this.BM.length-1];if(t.length>0){const s=i.ol(),e=i.nl(),h=s.length+e.length-+i.Ul();if(h>=this.NM){const r=e.length>0?e[e.length-1]:s[i.Ul()?h:h-1],o=n((r.x+t[0].x)/2,(r.y+t[0].y)/2);i.fl(o,c(n(o.x,o.y),n(o.x,o.y))).Yl(!0),this.lw([o].concat(t)).Wl(!0)}else i.fl(t,this.VM)}}else t.length>0&&this.lw(t)},this.uw=t=>{if(this.rw.length>0){const i=this.rw[this.rw.length-1];t.length>0&&((i.ol().length+i.nl().length)*this.hw>=this.NM?this.cw(t):i.fl(t))}else t.length>0&&this.cw(t)},this.Jn=y,this.tM=u,this.dw=A,this.fw=Ii(d.pointLineSeriesFillStyle,g),this.yu=Ii(this.qi.pointLineSeriesStrokeStyle,g)}add(t){return super.add(t),this}WM(){return Eu(this.rw)}setStrokeStyle(t){this.yu="function"==typeof t?t(this.yu):t;const i=this.yu;for(let t=0;t<this.BM.length;t+=1)this.BM[t].Ge(i);return this.Ds.xs(),this}getStrokeStyle(){return this.yu}setPointFillStyle(t){this.fw="function"==typeof t?t(this.fw):t;const i=this.fw;for(let t=0;t<this.rw.length;t+=1)this.rw[t].De(i);return this.Ds.xs(),this}getPointFillStyle(){return this.fw}setPointSize(t){this.qx=t;for(let i=0;i<this.rw.length;i+=1)this.rw[i].tt(t);return this.Ds.xs(),this}getPointSize(){return this.qx}getPointShape(){return this.tM}setPointRotation(t){this.Ma=t;for(let i=0;i<this.rw.length;i+=1)this.rw[i].Qh(t);return this.Ds.xs(),this}getPointRotation(){return this.Ma}setIndividualPointSizeEnabled(t){this.Qa=t,t&&this.chart.us.jn(Vo.Tf);for(let i=0;i<this.rw.length;i+=1)this.rw[i].ul(t);return this.Ds.xs(),this}getIndividualPointSizeEnabled(){return this.Qa}setIndividualPointRotationEnabled(t){this.Ja=t;for(let i=0;i<this.rw.length;i+=1)this.rw[i].cl(t);return this.Ds.xs(),this}getIndividualPointRotationEnabled(){return this.Ja}setIndividualPointValueEnabled(t){this.Ka=t;for(let i=0;i<this.rw.length;i+=1)this.rw[i].dl(t);return this.Ds.xs(),this}getIndividualPointValueEnabled(){return this.Ka}setVisible(t){return super.setVisible(t),this.rw.forEach((i=>i.setVisible(t))),this}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY};if(0===this.BM.length)return;const h=this.BM[0].Qo()||hr.NearestX,r=Ea(i)?Nu(e,this.BM,this.ow,h===hr.NearestX?(t,i)=>Math.abs(t.x-i.x):h===hr.NearestY?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2):Nu(e,this.rw,this.nw,h===hr.NearestX?(t,i)=>Math.abs(t.x-i.x):h===hr.NearestY?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==r){const t=At(r[0],this.Ds.us.ft,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}jd(){return ki(this.fw)||ki(this.yu.getFillStyle())}Is(){return this._s||this.tM}yM(t){}Ee(t,i){t.cs(i),this.Ds.xs()}GM(t){const i=this.BM.length>0?this.BM[this.BM.length-1].ol().length+this.BM[this.BM.length-1].nl().length-+this.BM[this.BM.length-1].Ul():void 0;Ru(t,i,this.NM,this.aw),Ru(t,i,this.NM,this.uw)}cw(t,i){const s=this.Ds.Dv(this.scale).fl(t,i).setMouseInteractions(this.Hi).De(this.fw).al(this.tM).tt(this.qx).Qh(this.Ma).ul(this.Qa).cl(this.Ja).dl(this.Ka).cs(this.getHighlight());return this.fs(s),this.rw.push(s),s}lw(t,i){const s=this.Ds.op(this.scale,void 0,[gl.UserSeries,...this.dw]).fl(t,i).setMouseInteractions(this.Hi).Ge(this.yu).cs(this.getHighlight());return this.fs(s),this.BM.push(s),s}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{stroke:this.yu,fill:this.fw})}getPointAmount(){return this.rw.reduce(((t,i)=>t+i.Al()+i.yl()),this.Mu.length)}clear(){super.clear();for(let t=0;t<this.BM.length;t+=1)this.BM[t].dispose();this.BM.length=0;for(let t=0;t<this.rw.length;t+=1)this.rw[t].dispose();return this.rw.length=0,this}OM(t,i,s,e){super.OM(t,i,s,e),this.RM.OM(this.rw,i,s,e,this.scale,(t=>{}))}}const Ac=(t,i)=>t.nl().length>=i?t.nl().slice(-i):Array.prototype.concat(t.ol(),t.nl()).slice(-i),gc=(t,i,s)=>{const e=Array.prototype.concat(t.ol(),t.nl()).slice(0,-s-1).concat(i.slice(s+1,2*s+2));t.Vt().fl(e).Es()};class yc extends fc{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d,f,A){super(t,i,s,e,h,r,n,o,a,l,u,c,d,f,A),this.hw=32,this.NM=8e3,this.Aw=t=>{if(0===t.length)return;const i=this.rw.length;if(i>0){const s=i>1,e=this.rw[i-1];if(s){const s=Array.prototype.concat(e.ol(),e.nl()),h=s.length;if(32*h>=this.NM){const s=Ac(e,3),h=Array.prototype.concat(s,t),r=dc(h,32);gc(this.BM[i-1],r,32),this.lw(r.slice(66))}else if(h<5){const e=this.rw[i-2],h=Ac(e,3),r=Array.prototype.concat(h,s,t),n=dc(r,32),o=this.BM[i-1],a=n.slice(66);o.Vt().fl(a).Es()}else{const s=this.BM[i-1],h=Array.prototype.concat(s.ol(),s.nl()),r=Ac(e,4),n=Array.prototype.concat(r,t),o=dc(n,32),a=h.slice(0,-66).concat(o.slice(33));s.Vt().fl(a).Es()}}else{const s=Array.prototype.concat(e.ol(),e.nl()),h=s.length,r=this.BM[i-1];if(32*h>=this.NM){const i=Ac(e,3),s=Array.prototype.concat(i,t),h=dc(s,32);gc(this.BM[0],h,32),this.lw(h.slice(66))}else if(h+t.length>1){const i=Array.prototype.concat(s,t),e=dc(i,32);r.Vt().fl(e).Es()}else r.fl(t)}}else{const i=t.length>0?dc(t,32):t,s=As(i);this.lw(i,s)}this.uw(t)}}GM(t){const i=this.rw.length,s=this.rw.length>0?this.rw[i-1].ol().length+this.rw[i-1].nl().length:void 0;Ru(t,s,Math.ceil(this.NM/this.hw),this.Aw)}}class mc{constructor(){this.Ni="FreeformPattern",this.Pl={type:"disabled",packager:(t,i,s)=>t.slice()}}OM(t,i,s,e,h,r){if(e>0){const h=Math.trunc((i-e)/s);if(h>0&&t.length>1){const i=t.splice(0,h);for(let t=0;t<i.length;t+=1)r(i[t]),i[t].dispose()}}}gw(t,i){const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)}getXMax(t=[],i){return ei(t,Qt,Math.max,ti,i)}getXMin(t=[],i){return ei(t,Zt,Math.min,qt,i)}getYMax(t=[],i){return ei(t,Kt,Math.max,si,i)}getYMin(t=[],i){return ei(t,Jt,Math.min,ii,i)}}const pc=t=>{switch(t){case"normal":default:return 1;case"high":return.25}},vc=i({Pl:{type:"disabled",packager:(t,i,s)=>t.slice()}});class Sc extends vc{OM(t,i,s,e,h,r){if(e>0){const i=Math.ceil(e/s),n=t.length-i;if(n>0){const i=this.P_(t,h);if(i>0){const s=n-i>0?i:n;if(s>0){for(let i=0;i<s;i+=1)r(t[i]),t[i].dispose();t.splice(0,s)}}}}}}const bc=(t,i)=>{const s=i.St();return t?Math.min(s,t):s},xc=(t,i)=>{const s=i.bt();return t?Math.max(s,t):s};class Mc extends Sc{gw(t,i){return Math.abs(t.x-i.x)}getYMax(t=[],i){return t.reduce(xc,i?i.max.y:void 0)}getYMin(t=[],i){return t.reduce(bc,i?i.min.y:void 0)}}const _c=(t,i)=>{const s=i.yt();return t?Math.min(s,t):s},wc=(t,i)=>{const s=i.vt();return t?Math.max(s,t):s};class Cc extends Sc{gw(t,i){return Math.abs(t.y-i.y)}getXMax(t=[],i){return t.reduce(wc,i?i.max.x:void 0)}getXMin(t=[],i){return t.reduce(_c,i?i.min.x:void 0)}}const kc={horizontalProgressive:new class extends Mc{constructor(){super({Pl:Kh()}),this.Ni="HorizontalProgressivePattern"}P_(t,i){const s=t.length,e=Math.min(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.x.gi(t[r].vt(),t[r].kl())<e&&(h+=1);return h}getXMax(t=[],i){return void 0!==i?i?i.max.x:void 0:t.length>0?t[t.length-1].vt():void 0}getXMin(t=[],i){return t.length>0&&t[0].Al()>0?t[0].yt():i?i.min.x:void 0}setPrecision(t){return this.set("_columnPackaging",Kh(pc(t)))}},horizontalRegressive:new class extends Mc{constructor(){super({Pl:qh()}),this.Ni="HorizontalRegressivePattern"}P_(t,i){const s=t.length,e=Math.max(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.x.gi(t[r].yt(),-t[r].kl())&&(h+=1);return h}getXMax(t=[],i){return t.length>0&&t[0].Al()>0?t[0].vt():i?i.max.x:void 0}getXMin(t=[],i){return void 0!==i?i?i.min.x:void 0:t.length>0?t[t.length-1].yt():void 0}setPrecision(t){return this.set("_columnPackaging",qh(pc(t)))}},verticalProgressive:new class extends Cc{constructor(){super({Pl:tr()}),this.Ni="VerticalProgressivePattern"}P_(t,i){const s=t.length,e=Math.min(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.y.gi(t[r].bt(),t[r].Tl())<e&&(h+=1);return h}getYMax(t=[],i){return void 0!==i?i?i.max.y:void 0:t.length>0?t[t.length-1].bt():void 0}getYMin(t=[],i){return t.length>0&&t[0].Al()>0?t[0].St():i?i.min.y:void 0}setPrecision(t){return this.set("_columnPackaging",tr(pc(t)))}},verticalRegressive:new class extends Cc{constructor(){super({Pl:ir()}),this.Ni="VerticalRegressivePattern"}P_(t,i){const s=t.length,e=Math.max(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.y.gi(t[r].St(),-t[r].Tl())&&(h+=1);return h}getYMax(t=[],i){return t.length>0&&t[0].Al()>0?t[0].bt():i?i.max.y:void 0}getYMin(t=[],i){return void 0!==i?i?i.min.y:void 0:t.length>0?t[t.length-1].St():void 0}setPrecision(t){return this.set("_columnPackaging",ir(pc(t)))}},freeform:new mc};class Tc extends fc{constructor(t,i,s,e,h,r,o,a,l,u,d,f,A,g,y){super(t,i,s,e,h,r,o,a,kc.horizontalProgressive,l,d,f,A,g,y),this.aw=t=>{const i=this.BM.length>0?this.BM[this.BM.length-1].ol().length+this.BM[this.BM.length-1].nl().length:void 0;Ru(t,i,this.NM,this.yw)},this.yw=t=>{const i=t.length;if(this.BM.length>0){const s=this.BM[this.BM.length-1];if(i>0){const i=s.ol(),e=s.nl(),h=e.length>0?e[e.length-1]:i[i.length-1],r=uc([h].concat(t),this.mw);r.shift();const o=n((h.x+r[0].x)/2,(h.y+r[0].y)/2),a=Array.prototype.concat(o,r);(e.length>0?i.length+e.length:i.length)>=this.NM?(s.fl(o,c(n(o.x,o.y),n(o.x,o.y))).Yl(!0),this.lw(a).Wl(!0),this.cw(t)):s.fl(a)}}else i>0&&this.lw(uc(t,this.mw));this.uw(t)},this.mw=u,void 0===this.dw.find((t=>"DataPattern"===t.type))&&this.dw.push({type:"DataPattern",args:{pattern:"ProgressiveX"}})}}class Fc extends Lu{constructor(t,i,s,e,h,r,n,a,l,u){super(t,i,s,e,h,r,n,a,l,u),this.pw=t=>t[4]>=t[1],this.wM=c(o(Ki,Ki),o(qi,qi)),this.Sw=[],this.bw=!1,this.xw=-1,this.Mw=[],this._w=!0,this.ww=!1,this.Cw=4,this.kw=[1e-7,1e-6,1e-5,1e-4,.001,.01,.1,1,5,10,30,60,300,600,1800,3600,7200,14400,28800,36e3,43200,50400,57600,64800,72e3,86400,172800,259200,345600,432e3,604800,1209600,2592e3,7776e3,10368e3,15552e3,31536e3,15768e4,31536e4,63072e4,7884e5,15768e5,31536e5,3942e6,47304e5,63072e5,7884e6,15768e6,31536e6,3942e7,47304e6,63072e6,7884e7,15768e7,31536e7,63072e7,7884e8,15768e8,31536e8,47304e8,63072e8],this.chart.us.jn(Vo.ff)}WM(){return this.Mw}UM(t){return this.L.on("dataAdd",t)}YM(t){return this.L.off(t)}HM(t){return this.L.on("dataClear",t)}$M(t){return this.L.off(t)}nv(){return this.lv&&this.Mw.length>0&&this.getVisible()}Tw(t){if(!(this.Mw.length<1))return[this.Mw[t][0],this.Mw[t][1],this.Mw[t][2],this.Mw[t][3],this.Mw[t][4]]}solveNearest(t,i){if(0===this.Mw.length)return;const s=this.chart.translateCoordinate(t,{x:this.axisX,y:this.axisY}).x,e=void 0!==this.getPackDataState();let h,r,o,a,l;if(e){const t=this.Fw;if(!t)return;const i=Ui(s,t.length-1,(i=>t[i][0])),e=void 0!==i&&t[i];if(!e)return;a=e[3],o=e[2],r=e[1],l=e[4],h=e[0]}else{const t=Ui(s,this.Mw.length-1,(t=>this.Mw[t][0])),i=void 0!==t&&this.Mw[t];if(!i)return;h=i[0],r=i[1],o=i[2],a=i[3],l=i[4]}return{cursorPosition:{resultTable:n(h,l),resultTableScale:this.scale,pointMarker:n(h,l),pointMarkerScale:{x:this.axisX,y:this.axisY}},x:h,y:l,open:r,high:o,low:a,close:l,position:h,isPacked:e,series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return ji({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,open:0,high:0,low:0,close:0,position:0,isPacked:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}yM(t){if(!(t.x instanceof Zs))throw new Error("OHLCSeries must be attached to a Linear X Axis.");this.Iw=t.x}Pr(){return n(5,5)}m_(t){const i=t.length-1;if(i<0)return this;for(let s=0;s<=i;s+=1)t[s][3]<this.wM.min.y&&(this.wM.min.y=t[s][3]),this.wM.max.y<t[s][2]&&(this.wM.max.y=t[s][2]);return this.wM.min.x=Math.min(this.wM.min.x,t[0][0]),this.wM.max.x=Math.max(this.wM.max.x,t[i][0]),this}getXMax(){return this.wM.max.x}getXMin(){return this.wM.min.x}getYMax(){return this.wM.max.y}getYMin(){return this.wM.min.y}add(t){this.Mw.length>0&&this.chart.us.jn(Vo.kf);const i=Array.isArray(t[0])?t:[t[0]];if(i.length>0){this.bw=!0;const t=this.Mw.length,s=this.Sw.length,e=i.length;this.Mw.length=t+e,this.Sw.length=s+e;for(let h=0;h<e;h+=1)this.Mw[t+h]=i[h],this.Sw[s+h]=this.Mw[t+h];this.m_(i),this.L.emit("dataAdd",this,i,void 0),this.Ds.xs()}return this}setPackData(t){return t!==this._w&&(this.ww=!0,this._w=t,this.chart.us.xs()),this}getPackData(){return this._w}getPackDataState(){const t=this.xw;if(!(t<0||void 0===this.Fw||this.Fw.length===this.Mw.length))return{figureAxisInterval:t}}setFigureWidth(t){return this.Pw=t,this.chart.us.xs(),this}getFigureWidth(){return this.Pw}setFigureMinimumGap(t){return this.Cw=t,this.chart.us.xs(),this}getFigureMinimumGap(){return this.Cw}clear(){return this.Mw=[],this.Sw=[],this.Fw=void 0,this.Dw(),this.wM.min.x=Ki,this.wM.min.y=Ki,this.wM.max.x=qi,this.wM.max.y=qi,this.L.emit("dataClear",this),this}Bw(t){return this.Iw.getPixelSize()*t/1e3}Lw(){const t=this.kw.length-1,i=this.Bw(this.Pw+this.Cw);let s=Ui(i,t,(t=>this.kw[t]));return void 0===s?s=i<this.kw[0]?0:this.kw[t]<i?t:this.kw.length/2:this.kw[s]<i&&(s+=1),this.kw.length<=s&&(s=t),1e3*this.kw[s]}Le(){if(super.Le(),!this._w){this.Fw=void 0;let t=null;if(this.ww?(this.ww=!1,t=this.Mw,this.Dw()):t=this.Sw,t.length>=1){for(let i=0;i<t.length;i+=1){const s=t[i],e=s[0];this.pw(s)?this.Rw(e,s):this.Ew(e,s)}this.Sw.length=0,this.bw=!1,this.xw=-1}}}xp(){super.xp();const t=this.Lw();if(this._w&&this.Mw.length>=1&&(t!==this.xw||this.bw||this.ww)){this.ww=!1,this.xw=t,this.bw=!1,this.Dw(),this.Fw=[];const i=this.Mw.length;let s=this.Mw[0][0]-this.Mw[0][0]%(t/2)+t,e=0;for(;e<i;){let h=this.Tw(e);if(void 0===h)break;let r=h[3],n=h[2];const o=e;for(e+=1;e<i&&this.Mw[e][0]<s;)h=this.Mw[e],this.Mw[e][3]<r&&(r=this.Mw[e][3]),n<this.Mw[e][2]&&(n=this.Mw[e][2]),e+=1;const a=e-1;let l=h[0];o<a&&(l=this.Mw[a][0],h=[l,this.Mw[o][1],n,r,this.Mw[a][4]]),h[1]<h[4]?this.Rw(l,h):this.Ew(l,h),this.Fw.push(h),s+=t}}}}class Ic extends Fc{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.zw=1175494351e-14,this.Pw=this.qi.ohlcCandleThicknessPixels||5,this.Vw=this.qi.ohlcCandleTailStrokeStylePositive,this.Ow=this.qi.ohlcCandleTailStrokeStyleNegative,this.Nw=this.qi.ohlcCandleBodyFillStylePositive,this.Gw=this.qi.ohlcCandleBodyFillStyleNegative,this.Ww=s.Ug(this.scale).Ge(new ve({thickness:this.Pw,fillStyle:this.Nw})),this.Ww.xu={x:0,y:1},this.Uw=s.Ug(this.scale).Ge(new ve({thickness:this.Pw,fillStyle:this.Gw})),this.Uw.xu={x:0,y:-1},this.Yw=s.Ug(this.scale).Ge(this.Vw),this.Hw=s.Ug(this.scale).Ge(this.Ow),this.fs(this.Ww),this.fs(this.Uw),this.fs(this.Yw),this.fs(this.Hw)}setBodyThickness(t){return this.Pw=t,this.Ww.Ge(new ve({thickness:this.Pw,fillStyle:this.Nw})),this.Uw.Ge(new ve({thickness:this.Pw,fillStyle:this.Gw})),this.chart.us.xs(),this}getBodyThickness(){return this.Pw}setBodyFillStylePositive(t){return this.Nw="function"==typeof t?t(this.Nw):t,this.Ww.Ge(new ve({thickness:this.Pw,fillStyle:this.Nw})),this.chart.us.xs(),this}getBodyFillStylePositive(){return this.Nw}setBodyFillStyleNegative(t){return this.Gw="function"==typeof t?t(this.Gw):t,this.Uw.Ge(new ve({thickness:this.Pw,fillStyle:this.Gw})),this.chart.us.xs(),this}getBodyFillStyleNegative(){return this.Gw}setTailStrokeStylePositive(t){return this.Vw="function"==typeof t?t(this.Vw):t,this.Yw.Ge(this.Vw),this.chart.us.xs(),this}getTailStrokeStylePositive(){return this.Vw}setTailStrokeStyleNegative(t){return this.Ow="function"==typeof t?t(this.Ow):t,this.Hw.Ge(this.Ow),this.chart.us.xs(),this}getTailStrokeStyleNegative(){return this.Ow}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.Nw,fill2:this.Gw,behavior:{colorStep:!0}})}Dw(){return this.Yw.Vt(),this.Hw.Vt(),this.Ww.Vt(),this.Uw.Vt(),this}Rw(t,i){return Math.abs(i[1]-i[4])<this.zw?this.Ww.$r().Hg({x:t,y:i[1]-this.zw},{x:t,y:i[1]+this.zw}):this.Ww.$r().Hg({x:t,y:i[1]},{x:t,y:i[4]}),i[4]<i[2]&&this.Yw.$r().Hg({x:t,y:i[4]},{x:t,y:i[2]}),i[3]<i[1]&&this.Yw.$r().Hg({x:t,y:i[3]},{x:t,y:i[1]}),this}Ew(t,i){return Math.abs(i[1]-i[4])<this.zw?this.Uw.$r().Hg({x:t,y:i[1]-this.zw},{x:t,y:i[1]+this.zw}):this.Uw.$r().Hg({x:t,y:i[1]},{x:t,y:i[4]}),i[3]<i[4]&&this.Hw.$r().Hg({x:t,y:i[3]},{x:t,y:i[4]}),i[1]<i[2]&&this.Hw.$r().Hg({x:t,y:i[1]},{x:t,y:i[2]}),this}}class Pc extends Fc{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.Pw=this.qi.ohlcBarThicknessPixels||10,this.$w=this.qi.ohlcBarStrokeStylePositive,this.Xw=this.qi.ohlcBarStrokeStyleNegative,this.jw=s.Ug(this.scale).Ge(this.$w),this.fs(this.jw),this.Zw=s.Ug(this.scale).Ge(this.$w),this.Zw.xu={x:-this.Pw/2,y:0},this.fs(this.Zw),this.Qw=s.Ug(this.scale).Ge(this.$w),this.Qw.xu={x:this.Pw/2,y:0},this.fs(this.Qw),this.Jw=s.Ug(this.scale).Ge(this.Xw),this.fs(this.Jw),this.Kw=s.Ug(this.scale).Ge(this.Xw),this.Kw.xu={x:-this.Pw/2,y:0},this.fs(this.Kw),this.qw=s.Ug(this.scale).Ge(this.Xw),this.qw.xu={x:this.Pw/2,y:0},this.fs(this.qw)}setStrokeStylePositive(t){return this.$w="function"==typeof t?t(this.$w):t,this.jw.Ge(this.$w),this.Zw.Ge(this.$w),this.Qw.Ge(this.$w),this.chart.us.xs(),this}getStrokeStylePositive(){return this.$w}setStrokeStyleNegative(t){return this.Xw="function"==typeof t?t(this.Xw):t,this.Jw.Ge(this.Xw),this.Kw.Ge(this.Xw),this.qw.Ge(this.Xw),this.chart.us.xs(),this}getStrokeStyleNegative(){return this.Xw}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.$w.getFillStyle(),fill2:this.Xw.getFillStyle(),behavior:{colorStep:!0}})}setFigureWidth(t){return super.setFigureWidth(t),this.Zw.xu={x:-t/2,y:0},this.Kw.xu={x:-t/2,y:0},this.Qw.xu={x:t/2,y:0},this.qw.xu={x:t/2,y:0},this}Dw(){return this.Jw.Vt(),this.jw.Vt(),this.Kw.Vt(),this.Zw.Vt(),this.qw.Vt(),this.Qw.Vt(),this}Rw(t,i){return this.jw.$r().Hg({x:t,y:i[3]},{x:t,y:i[2]}),this.Zw.$r().Hg({x:t,y:i[1]},{x:t,y:i[1]}),this.Qw.$r().Hg({x:t,y:i[4]},{x:t,y:i[4]}),this}Ew(t,i){return this.Jw.$r().Hg({x:t,y:i[3]},{x:t,y:i[2]}),this.Kw.$r().Hg({x:t,y:i[1]},{x:t,y:i[1]}),this.qw.$r().Hg({x:t,y:i[4]},{x:t,y:i[4]}),this}}const Dc={Candlesticks:Ic,Bars:Pc},Bc=t=>({defaultDragMouseStyle:Xe.Horizontal,getTitleTextRotation:()=>0,...Tl(t,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.Pr().x))}),Lc=t=>({defaultDragMouseStyle:Xe.Vertical,getTitleTextRotation:t=>90*t,...Tl(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.Pr().y))});class Rc extends $a{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,o),this.tC=!1,this.iC=!1,this.sC=!1,this.eC=!1,this.hC=new Map,this.rC=new Map,this.nC=[],this.oC=[],this.aC=!0,this.lC=!0,this.uC=[],this.cC=new Set,this.dC=!1,this.dm=h,this.fC=r,this.AC=n,this.gC=o.cursorGridStrokeStyleX,this.yC=o.cursorGridStrokeStyleY}dispose(){return super.dispose(),this.hC.forEach((t=>t.forEach((t=>t.dispose())))),this.rC.forEach((t=>t.forEach((t=>t.dispose())))),this.nC.length=0,this.oC.length=0,this.lm.length=0,this}Le(){return this.setPosition(...this.uC),this.nC.forEach((t=>t.setVisible(this.ji&&this.ny).setMarkerVisible(this.ji&&this.ny&&this.aC))),this.oC.forEach((t=>t.setVisible(this.ji&&this.ny).setMarkerVisible(this.ji&&this.ny&&this.lC))),super.Le()}setPosition(...t){if(this.uC=t,this.nC.forEach((t=>t.setVisible(!1))),this.oC.forEach((t=>t.setVisible(!1))),this.nC.length=0,this.oC.length=0,0===t.length)return this;const i=this.renderingScale,s=t[0].resultTable,e=Ta(t[0].resultTableScale,i),h=e===this.scale?s:At(s,e,this.scale);this.Xy.setPosition(h),this.ny=!1,this.nm.forEach((t=>{t.targetVisible=!1}));const r=new Map;return t.forEach(((t,s)=>{const e=t.pointMarkerScale.x,h=t.pointMarkerScale.y,o=r.get(e)||[],a=r.get(h)||[],l=!o.includes(t.pointMarker.x),u=!a.includes(t.pointMarker.y);o.push(t.pointMarker.x),a.push(t.pointMarker.y),r.set(e,o),r.set(h,a);const c=t.pointMarker,d=Vc(n(c.x,c.y),e,h);if(l){const t=this.Ch(e,!0);t.setValue(c.x),t.setGridStrokeLength(this.tC?d.x:1).setAllocatesAxisSpace(this.dC),this.nC.push(t)}if(u){const t=this.Ch(h,!1);t.setValue(c.y),t.setGridStrokeLength(this.iC?d.y:1).setAllocatesAxisSpace(this.dC),this.oC.push(t)}let f=this.nm[s];if(!f){const t=new Jn(this.Ds,this.renderingScale,this.scale,Yt,this.qi).setMouseInteractions(!1).setFillStyle(this.qi.cursorPointMarkerFillStyle).setSize(this.qi.cursorPointMarkerSize).setShape(this.qi.cursorPointMarkerShape);f={pointMarker:t,targetVisible:!0},this.nm.push(f),this.lm.forEach((i=>i(t)))}const A=Ta(t.pointMarkerScale,i),g=A===this.scale?t.pointMarker:At(t.pointMarker,A,this.scale);f.pointMarker.setPosition(g),f.targetVisible=!0;const y=e.getInterval(),m=h.getInterval(),p=Math.min(y.start,y.end),v=Math.max(y.start,y.end),S=Math.min(m.start,m.end),b=Math.max(m.start,m.end);c.x>=p&&c.x<=v&&c.y>=S&&c.y<=b&&(this.ny=!0)})),this}setTickMarkersAllocateAxisSpace(t){return this.dC=t,this.Ds.xs(),this}getTickMarkersAllocateAxisSpace(){return this.dC}Ch(t,i){this.cC.has(t)||(t.onDispose((()=>{var i;null===(i=s.get(t))||void 0===i||i.forEach((t=>t.dispose())),s.delete(t)})),this.cC.add(t));const s=i?this.hC:this.rC,e=i?this.nC:this.oC,h=s.get(t)||[];s.set(t,h);let r=h.find((t=>!e.includes(t)));return r||(r=i?t.qg(!1,this.fC):t.qg(!1,this.AC),h.push(r),this.mr(r,i),r.setMouseInteractions(!1)),r}mr(t,i){const s=i?this.gC:this.yC;return t.setGridStrokeStyle(s),t.setMouseInteractions(!1),(i?this.aC:this.lC)?t.setMarkerVisible(!0):t.setMarkerVisible(!1),t}setGridStrokeXCut(t){return this.tC=t,this.Ds.xs(),this}getGridStrokeXCut(){return this.tC}setGridStrokeYCut(t){return this.iC=t,this.Ds.xs(),this}getGridStrokeYCut(){return this.iC}setGridStrokeXStyle(t){return this.gC=t instanceof Function?t(this.getGridStrokeXStyle()):t,this.hC.forEach((t=>t.forEach((t=>t.setGridStrokeStyle(this.gC))))),this}getGridStrokeXStyle(){return this.gC}setGridStrokeYStyle(t){return this.yC=t instanceof Function?t(this.getGridStrokeYStyle()):t,this.rC.forEach((t=>t.forEach((t=>t.setGridStrokeStyle(this.yC))))),this}getGridStrokeYStyle(){return this.yC}setTickMarkerXVisible(t){return this.aC=t,this.Ds.xs(),this}getTickMarkerXVisible(){return this.aC}setTickMarkerYVisible(t){return this.lC=t,this.Ds.xs(),this}getTickMarkerYVisible(){return this.lC}setTickMarkerX(t){return this.hC.forEach((i=>i.forEach((i=>i.setMarker(t))))),this.fC=this.fC.addStyler(t),this.Ds.xs(),this}setTickMarkerY(t){return this.rC.forEach((i=>i.forEach((i=>i.setMarker(t))))),this.AC=this.AC.addStyler(t),this.Ds.xs(),this}}class Ec{constructor(t,i,s,e){this.gm=[],this.ym=(t,i)=>(this.gm.forEach((s=>s(t,i))),t),this.addStyler=t=>new Ec(this.dm,this.fC,this.AC,this.gm.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new Ec(t,this.fC,this.AC,this.gm.map((t=>t))),this.pm=(t,i,s,e,h)=>this.ym(new Rc(t,i,s,e,this.dm,this.fC,this.AC,h),h),this.dm=t,this.gm=e,this.fC=i,this.AC=s}}const zc=new Ec(Xn,Eo.PointableTextBox,Eo.PointableTextBox,[(t,i)=>{Xa(t),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),jr(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),jr(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),Vc=(t,i,s)=>{const e=i.ft,h=s.ft;let r=(t.x-e.getInnerStart())/(e.getInnerEnd()-e.getInnerStart()),o=(t.y-h.getInnerStart())/(h.getInnerEnd()-h.getInnerStart());return 1===s.cg&&(r=1-r),1===i.cg&&(o=1-o),n(o,r)};class Oc extends Ou{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d,f){super(t,i,s,e,h,r,n,o,a,l,u),this.BM=[],this.Ux=!0,this.NM=void 0,this._u=void 0,this.mC=(t,i)=>{const s=t.Jx(i);if(s)return At(s,this.scale,this.Ds.us.ft)},this.ow=(t,i)=>{const s=t.S_(i);if(s)return At(s,this.scale,this.Ds.us.ft)},this.jd=()=>ki(this.yu.getFillStyle()),this.dw=c,this.Jn=f,this.yu=Ii(this.qi.lineSeriesStrokeStyle,d),this.pC={individualLookupValuesEnabled:void 0!==(null==f?void 0:f.individualLookupValuesEnabled)&&f.individualLookupValuesEnabled}}ds(){var t,i;return null===(i=null===(t=this.Jn)||void 0===t?void 0:t.dataPattern)||void 0===i?void 0:i.pattern}add(t){return super.add(t),this}setMouseInteractions(t){return super.setMouseInteractions(t)}setStrokeStyle(t){this.yu="function"==typeof t?t(this.yu):t;const i=this.yu;for(let t=0;t<this.BM.length;t+=1)this.BM[t].Ge(i);return this.Ds.xs(),this}getStrokeStyle(){return this.yu}setDataCleaning(t){return this._u=t,this.BM.forEach((t=>t.wu(this._u))),this.Ds.xs(),this}setCursorInterpolationEnabled(t){return this.Ux=t,this.Ds.us.xs(),this}getCursorInterpolationEnabled(){return this.Ux}yM(t){}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY};if(0===this.BM.length)return;const h=this.BM[0].Qo()||hr.NearestX,r=Nu(e,this.BM,Ea(i)?this.ow:this.mC,h===hr.NearestX?(t,i)=>Math.abs(t.x-i.x):h===hr.NearestY?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==r){const t=At(r[0],this.Ds.us.ft,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}GM(t){let i=this.BM[0];i||(i=this.lw(),this.BM.push(i),this.fs(i)),i.fl(t,this.VM)}lw(){return this.Ds.op(this.scale,this.pC,[gl.UserSeries,...this.dw]).Ge(this.yu).wu(this._u).cs(this.getHighlight())}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{stroke:this.yu})}Ee(t,i){t.cs(i),this.Ds.xs()}OM(t,i,s,e){}}class Nc extends Ou{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d){super(t,i,s,e,h,r,n,o,new mc,l,u),this.BM=[],this.qx=5,this.Ma=0,this.Qa=!1,this.Ja=!1,this.Ka=!1,this.NM=void 0,this.nw=(t,i)=>{const s=t.Kc(i);if(s)return At(s,this.scale,this.Ds.us.ft)},this.Jn=d,this.tM=a,this.ke=Ii(l.pointSeriesFillStyle,c)}add(t){return super.add(t),this}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=Nu(e,this.BM,this.nw,us);if(void 0!==h){const t=At(h[0],this.Ds.us.ft,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}jd(){return ki(this.ke)}Is(){return this._s||this.tM}yM(t){}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke})}Ee(t,i){t.cs(i),this.Ds.xs()}setPointFillStyle(t){this.ke="function"==typeof t?t(this.ke):t;const i=this.ke;for(let t=0;t<this.BM.length;t+=1)this.BM[t].De(i);return this.Ds.xs(),this}getPointFillStyle(){return this.ke}setPointSize(t){this.qx=t;for(let i=0;i<this.BM.length;i+=1)this.BM[i].tt(t);return this.Ds.xs(),this}getPointSize(){return this.qx}getPointShape(){return this.tM}setPointRotation(t){this.Ma=t;for(let i=0;i<this.BM.length;i+=1)this.BM[i].Qh(t);return this.Ds.xs(),this}getPointRotation(){return this.Ma}setIndividualPointSizeEnabled(t){this.Qa=t,t&&this.chart.us.jn(Vo.Tf);for(let i=0;i<this.BM.length;i+=1)this.BM[i].ul(t);return this.Ds.xs(),this}getIndividualPointSizeEnabled(){return this.Qa}setIndividualPointRotationEnabled(t){this.Ja=t;for(let i=0;i<this.BM.length;i+=1)this.BM[i].cl(t);return this.Ds.xs(),this}getIndividualPointRotationEnabled(){return this.Ja}setIndividualPointValueEnabled(t){this.Ka=t;for(let i=0;i<this.BM.length;i+=1)this.BM[i].dl(t);return this.Ds.xs(),this}getIndividualPointValueEnabled(){return this.Ka}GM(t){let i=this.BM[0];i||(i=this.lw()),i.fl(t,this.VM)}lw(){const t=this.Ds.Dv(this.scale).al(this.tM).tt(this.qx).Qh(this.Ma).ul(this.Qa).cl(this.Ja).dl(this.Ka).De(this.ke).cs(this.getHighlight());return this.BM.push(t),this.fs(t),t}}class Gc{constructor(t,i,e,h){this.vC=!1,this.L=new s,this.chart=e,this.SC=h,this.Js=t.Js,this.he=h||ih,this.bC=Ot.document.createElement("div"),this.bC.style.position="absolute",this.bC.style.pointerEvents="none",Ot.document.body.append(this.bC);const r=()=>{const t=e.engine.container.getBoundingClientRect();this.bC.style.left=`${t.left}px`,this.bC.style.top=`${t.top}px`,this.bC.style.width=`${t.width}px`,this.bC.style.height=`${t.height}px`};r(),e.onResize(r),this.xC(this.bC),this.MC(),this._C(),this.wC(),this.CC(i),this.chart.kC().push(this)}xC(t){this.TC=Ot.document.createElement("div"),this.TC.style.pointerEvents="all",t.append(this.TC),this.FC=Ot.document.createElement("div"),this.IC=new $e(this.Js,this.he,this.chart,this.FC),this.PC=Ot.document.createElement("table"),this.PC.style.borderSpacing="0",this.TC.appendChild(this.IC.fe()),this.TC.appendChild(this.FC),this.FC.appendChild(this.PC)}_C(){let t=0,i=0,s=0,e=0,h=!1;this.vC=!1,this.TC.onmousedown=r=>{r=r||Ot.event,s=r.clientX,e=r.clientY,h=!0,Ot.document.onmouseup=t=>{this.vC?this.TC.addEventListener("click",di,!0):this.TC.removeEventListener("click",di,!0),h=!1,this.vC=!1,Ot.document.onmouseup=null,Ot.document.onmousemove=null},Ot.document.onmousemove=r=>{r=r||Ot.event,h&&(t=s-r.clientX,i=e-r.clientY,s=r.clientX,e=r.clientY,this.vC=!0,this.TC.style.top=this.TC.offsetTop-i+"px",this.TC.style.left=this.TC.offsetLeft-t+"px",this.TC.style.removeProperty("right"),this.TC.style.removeProperty("bottom"))}}}wC(){let t=0,i=0,s=0,e=0,h=!1;this.TC.ontouchstart=r=>{r=r||Ot.event,s=r.touches[0].clientX,e=r.touches[0].clientY,h=!0,this.TC.ontouchend=()=>{h=!1,Ot.document.ontouchend=null,Ot.document.ontouchmove=null},this.TC.ontouchmove=r=>{h&&(di(r),r=r||Ot.event,t=s-r.touches[0].clientX,i=e-r.touches[0].clientY,s=r.touches[0].clientX,e=r.touches[0].clientY,this.TC.style.top=this.TC.offsetTop-i+"px",this.TC.style.left=this.TC.offsetLeft-t+"px",this.TC.style.removeProperty("right"),this.TC.style.removeProperty("bottom"))}}}MC(){this.TC.style.setProperty("top","10px"),this.TC.style.setProperty("left","10px"),this.TC.style.position="absolute",this.TC.style.display="flex",this.TC.style.alignItems="flex-start",this.FC.style.setProperty("display","none")}removePositionProperty(){this.TC.style.removeProperty("top"),this.TC.style.removeProperty("left"),this.TC.style.removeProperty("bottom"),this.TC.style.removeProperty("right")}setPositionProperty(t){switch(this.removePositionProperty(),t){case eh.BottomLeft:this.TC.style.setProperty("bottom","10px"),this.TC.style.setProperty("left","10px");break;case eh.TopLeft:this.TC.style.setProperty("top","10px"),this.TC.style.setProperty("left","10px");break;case eh.BottomRight:this.TC.style.setProperty("bottom","10px"),this.TC.style.setProperty("right","10px");break;case eh.TopRight:default:this.TC.style.setProperty("top","10px"),this.TC.style.setProperty("right","10px")}}CC(t){for(let i=0;i<t.length;i+=1){const s=this.PC.insertRow();for(let e=0;e<t[i].length;e+=1){const h=s.insertCell(),r=t[i][e];"object"!=typeof r?this.DC(r,h):this.addCustomButton(r,h)}}}DC(t,i){switch(t){case xe.ZoomIn:this.BC(new ze(this.Js,this.chart,this.he),i);break;case xe.ZoomInX:this.BC(new Ve(this.Js,this.chart,this.he),i);break;case xe.ZoomInY:this.BC(new Oe(this.Js,this.chart,this.he),i);break;case xe.ZoomOut:this.BC(new Ne(this.Js,this.chart,this.he),i);break;case xe.ZoomOutX:this.BC(new Ge(this.Js,this.chart,this.he),i);break;case xe.ZoomOutY:this.BC(new We(this.Js,this.chart,this.he),i);break;case xe.ZoomToFit:this.BC(new Ye(this.Js,this.chart,this.he),i);break;case xe.ToggleAnimations:this.BC(new Ue(this.Js,this.chart,this.he),i);break;default:console.error(`No predefined button like "${xe[t]}" exists.`)}}BC(t,i){i.rowSpan=t.Ks.rows,i.colSpan=t.Ks.columns,t.de(i)}addCustomButton(t,i){const s=new He(this.Js,t,this.chart);return this.BC(s,i),this}dispose(){this.bC.remove(),this.L.emit("dispose",this)}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}}class Wc extends Lu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){var d;super(t,i,s,e,h,r,n,o,a,l),this.LC=0,this.Jn=c,this.Za=this.Ds.vd(this.scale).Ge(Ii(this.qi.lineSeriesStrokeStyle,u)).md(Ii(this.qi.pointSeriesFillStyle,u)).pd(Ii(this.qi.areaSeriesPositiveFillStyle,u)).RC(void 0).wd(7),this.Za.EC=!1!==(null===(d=this.Jn)||void 0===d?void 0:d.allowDataGrouping),this.fs(this.Za)}ds(){return this.getDataSet().Xc()}setDataSet(t){var i;return t===(null===(i=this.gd)||void 0===i?void 0:i.Nt)||(t._c&&this.chart.us.jn(Vo.Ff),t.Cc&&this.chart.us.jn(Vo.Tf),this.gd=Xi(t,this.gd,(()=>[t.qc((()=>{this.LC+=1,this.LC>1&&this.chart.us.jn(Vo.kf),this.chart.us.xs()})),t.td((()=>this.chart.us.xs()))])),this.Za.yd(t),this.chart.us.xs()),this}getDataSet(){return this.zC()}setStrokeStyle(t){return this.Za.Ge(t),this.Ds.xs(),this}getStrokeStyle(){return this.Za.mu()}setAreaFillStyle(t){return this.Za.pd(t),this.Ds.xs(),this}getAreaFillStyle(){return this.Za.VC()}setPointFillStyle(t){return this.Za.md(t),this.Ds.xs(),this}getPointFillStyle(){return this.Za._d()}setPointSize(t){return this.Za.wd(t),this.Ds.xs(),this}getPointSize(){return this.Za.OC()}setPointShape(t){return this.Za.Sd(t),this.Ds.xs(),this}getPointShape(){return this.Za.bd()}setPointRotation(t){return this.Za.xd(t),this.Ds.xs(),this}getPointRotation(){return this.Za.Md()}setPointAlignment(t){return this.Za.NC(t),this.chart.us.xs(),this}getPointAlignment(){return this.Za.GC()}setCurvePreprocessing(t){return this.Za.RC(t),this.Ds.xs(),this}getCurvePreprocessing(){return this.Za.WC()}add(t){return this.zC().add(t),this.Ds.xs(),this}addArraysXY(t,i){return this.zC().addArraysXY(t,i),this.Ds.xs(),this}appendJSON(t,i){return this.zC().appendJSON(t,i),this.Ds.xs(),this}appendSample(t){return this.zC().appendSample(t),this.Ds.xs(),this}appendSamples(t){return this.zC().appendSamples(t),this.Ds.xs(),this}fill(t){return this.zC().fill(t),this.Ds.xs(),this}setSamples(t){return this.zC().setSamples(t),this.Ds.xs(),this}alterSamples(t,i){return this.zC().alterSamples(t,i),this.Ds.xs(),this}alterSamplesByID(t,i){return this.zC().alterSamplesByID(t,i),this.Ds.xs(),this}getSampleCount(){return this.zC().getSampleCount()}getNextSampleIndex(){return this.zC().getNextSampleIndex()}clear(){return this.zC().clear(),this.Ds.xs(),this}setMaxSampleCount(t){return this.zC().setMaxSampleCount(t),this.Ds.xs(),this}getMaxSampleCount(){return this.zC().getMaxSampleCount()}readBack(t){return this.zC().readBack(t)}onMaxSampleCountExceeded(t){return this.zC().onMaxSampleCountExceeded(t)}offMaxSampleCountExceeded(t){return this.zC().offMaxSampleCountExceeded(t)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){let s=Ea(i);void 0!==this.getCurvePreprocessing()&&(s=!1);const e=this.UC(),h=this.chart.translateCoordinate(t,{x:this.axisX,y:this.axisY}),r=e.Kc(h,s,this.scale,this.chart.mg);if(void 0!==r)return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){const s=this.getDataSet(),e=null==t?void 0:t.dataPoint;return void 0===s.Xc()||e?e?{cursorPosition:{resultTable:e,resultTableScale:this.scale,pointMarker:e,pointMarkerScale:{x:this.axisX,y:this.axisY}},...e,series:this,axisX:this.axisX,axisY:this.axisY}:void 0:ji({series:this,axisX:this.axisX,axisY:this.axisY},{x:0,y:0,cursorPosition:0,id:0,rotation:0,size:0,color:0,lookupValue:0,multiHit:0,iSample:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}UC(){return this.zC()}jd(){return ki(this.getPointFillStyle())||ki(this.getStrokeStyle().getFillStyle())||ki(this.getAreaFillStyle())}nv(){var t;const i=null===(t=this.gd)||void 0===t?void 0:t.Nt;return this.getAutoScrollingEnabled()&&void 0!==i&&i.yc>0}yM(t){}getXMax(){return this.Za.vt()}getXMin(){return this.Za.yt()}getYMax(){return this.Za.bt()}getYMin(){return this.Za.St()}Pr(){return{x:this.Za.kl(),y:this.Za.Tl()}}zC(){if(!this.gd){const t=new Vn(this.Jn);t._c&&this.chart.us.jn(Vo.Ff),t.Cc&&this.chart.us.jn(Vo.Tf),this.gd=Xi(t,this.gd,(()=>[t.qc((()=>{this.LC+=1,this.LC>1&&this.chart.us.jn(Vo.kf),this.chart.us.xs()})),t.td((()=>{this.chart.us.xs()}))])),this.Za.yd(t)}return this.gd.Nt}styleLegendEntry(t,i=!1){const s=this.getPointFillStyle(),e=this.getAreaFillStyle();Ci(t,this.qi,i,{stroke:this.getStrokeStyle(),fill:s!==O?s:e,behavior:{priority:"stroke"}})}Is(){return this._s||this.getPointShape()}Ee(t,i){t.cs(i),this.Ds.xs()}}const Uc=(...t)=>(i,s)=>t.forEach((t=>t.forEach((t=>{t.axis.ft.tt(i),t.axis.Ag.tt(s)})))),Yc=n(10,10);var Hc;!function(t){t[t.Top=0]="Top",t[t.Bottom=1]="Bottom",t[t.Left=2]="Left",t[t.Right=3]="Right"}(Hc||(Hc={}));const $c=new Set([Hc.Top,Hc.Bottom,Hc.Left,Hc.Right]),Xc=t=>t.setStopped(!0),jc=t=>t.getChartInteractionFitByDrag()?t.fit(!0):void 0,Zc=(t,i)=>{const s="linear-highPrecision"===t.Vh.type||"linear-highPrecision"===i.Vh.type,e="logarithmic"===t.Vh.type||"logarithmic"===i.Vh.type;if(s&&e){const s=`Invalid Axis combination | 'logarithmic' can't be combined with 'linear-highPrecision' (x: ${t.Vh.type}, y: ${i.Vh.type})`;throw new Error(s)}};var Qc,Jc,Kc;!function(t){t[t.seriesBackground=0]="seriesBackground",t[t.gridLine0=1]="gridLine0",t[t.gridLine1=2]="gridLine1",t[t.gridLine2=3]="gridLine2",t[t.highlightersBelow=4]="highlightersBelow"}(Qc||(Qc={})),function(t){t[t.plotting=0]="plotting",t[t.highlightersAbove=1]="highlightersAbove",t[t.fg=2]="fg"}(Jc||(Jc={}));class qc extends Nl{constructor(t,i,s,e,h,r,o){super(t,i,s,i.Py("chartXY bg",0),e,i.us.qi.chartXYBackgroundFillStyle,i.us.qi.chartXYBackgroundStrokeStyle,i.us.qi.chartXYTitleFont,i.us.qi.chartXYTitleFillStyle,o),this.YC=this.yy.d2({scaleXYConstructor:Ks}),this.Xg=[],this.jg=[],this.Qg=[],this.Zg=[],this.HC=new Map,this.$C=!0,this.XC=!0,this.jC=!0,this.Wf=2,this.ZC=!0,this.QC=!0,this.JC=[],this.KC=this.By.Be(this.YC).De(O).Pe(at).setMouseInteractions(!1),this.qC=this.By.We(this.YC).Ge(at).setMouseInteractions(!1),this.tk=this.By.We(this.YC).Ge(at).setMouseInteractions(!1),this.ik=this.qi.chartXYZoomingRectangleFillStyle,this.sk=this.qi.chartXYZoomingRectangleStrokeStyle,this.ek=this.qi.chartXYFittingRectangleFillStyle,this.hk=this.qi.chartXYFittingRectangleStrokeStyle,this.rk=Xe.Default,this.nk=Xe.Move,this.ak=Xe.ZoomIn,this.lk=Xe.Default,this.uk=void 0,this.oA=td,this.gM=0,this.ck=(t,i,s)=>{const e=t.solveNearest(i,s);return e&&ls(e.cursorPosition.pointMarker.x,e.axisX.getInterval().start,e.axisX.getInterval().end)&&ls(e.cursorPosition.pointMarker.y,e.axisY.getInterval().start,e.axisY.getInterval().end)?e:void 0},this.dk=Uc(this.jg,this.Xg),this.fk=Uc(this.Qg,this.Zg),this.Ak=(t,i,s,e,h)=>{this.dk(e,h),this.fk(h,e),this.YC.tt(e,h),this.us.xs()},this.gk=(t,i)=>{this.HC.set(t,i)},this.og=t=>{const i=this.jg.findIndex((i=>i.axis===t)),s=this.Xg.findIndex((i=>i.axis===t)),e=this.Qg.findIndex((i=>i.axis===t)),h=this.Zg.findIndex((i=>i.axis===t));i>=0&&this.jg.splice(i,1),s>=0&&this.Xg.splice(s,1),e>=0&&this.Qg.splice(e,1),h>=0&&this.Zg.splice(h,1),this.HC.delete(t),this.us.xs()},this.addAreaSeries=t=>{const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=t&&t.baseline?t.baseline:0,h=new(t&&t.type?t.type:oc.Positive)(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,e,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length);return this.Nv(h),h},this.addAreaRangeSeries=t=>{const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=new ac(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length);return this.Nv(e),e},this.mk=!1,this.pk=!1,this.mM=()=>{(this.$C||this.XC)&&(this.uk=this.engine.setMouseStyle(this.rk))},this.pM=()=>{this.mk=!1,this.engine.restoreMouseStyle(this.uk)},this.vM=(t,i,s)=>{var e,h;const r=jt(null===(e=this.vA.Kn)||void 0===e?void 0:e.chartXYRectangleZoomFitMouseButton,0),n=jt(null===(h=this.vA.Kn)||void 0===h?void 0:h.chartXYPanMouseButton,2);this.engine.restoreMouseStyle(this.uk);const o=this.By.us.ze(i.clientX,i.clientY);s===r&&(this.$C||this.XC)?(this.vk(t,o),di(i)):s===n&&this.ZC&&(this.uk=this.engine.setMouseStyle(this.nk),this.pk=!0,di(i))},this.dv=(t,i,s,e,h)=>{var r,o;const a=n(i.clientX,i.clientY),l=jt(null===(r=this.vA.Kn)||void 0===r?void 0:r.chartXYRectangleZoomFitMouseButton,0),u=jt(null===(o=this.vA.Kn)||void 0===o?void 0:o.chartXYPanMouseButton,2);s===l&&(this.$C||this.XC)?(this.Sk(t,e,a),di(i)):s===u&&this.ZC&&(this.bk(_s(h,-1)),di(i)),this.us.xs()},this.fv=(t,i,s,e)=>{var h,r;const o=jt(null===(h=this.vA.Kn)||void 0===h?void 0:h.chartXYRectangleZoomFitMouseButton,0),a=jt(null===(r=this.vA.Kn)||void 0===r?void 0:r.chartXYPanMouseButton,2);if(s===o&&(this.$C||this.XC)){const s=n(i.clientX,i.clientY);this.xk(t,e,s),di(i)}else s===a&&this.ZC&&di(i);this.engine.restoreMouseStyle(this.uk),this.Vv.getIsUnderMouse()&&(this.uk=this.engine.setMouseStyle(this.rk)),this.mk=!1,this.pk=!1},this.cv=(t,i)=>{if(this.jC){const t=this.By.us.ze(i.clientX,i.clientY);this.Mk(t,n(Pi(i),Pi(i))),di(i)}},this._k=(t,i,s,e)=>{},this.wk=(t,i,s,e,h,r)=>{if(this.ZC){const t=n(-(e.x+h.x)/2,-(e.y+h.y)/2);this.bk(t),di(r),this.pk=!0}if(this.jC){const t=this.us.Oo({clientX:i.x,clientY:i.y}),o=this.us.Oo({clientX:s.x,clientY:s.y}),a=Cs(n(Math.abs(t.engineX-e.x-(o.engineX-h.x)),Math.abs(t.engineY-e.y-(o.engineY-h.y))),n(Math.abs(t.engineX-o.engineX),Math.abs(t.engineY-o.engineY)));this.forEachAxisX((t=>{t.getChartInteractionZoomByWheel()&&t.At(t.ft.gi(t.getInterval().start,-a.x),t.ft.gi(t.getInterval().end,a.x),!1,!0,"interactionZoom")})),this.forEachAxisY((t=>{t.getChartInteractionZoomByWheel()&&t.At(t.ft.gi(t.getInterval().start,-a.y),t.ft.gi(t.getInterval().end,a.y),!1,!0,"interactionZoom")})),di(r),this.mk=!0}},this.Ck=(t,i,s,e)=>{this.pk=!1,this.mk=!1},this.kk=(t,i,s)=>{(this.XC||this.$C)&&(this.vk(t,i),di(s))},this.Tk=(t,i,s,e,h)=>{(this.XC||this.$C)&&(this.Sk(t,i,s),di(h))},this.Fk=(t,i,s,e)=>{(this.XC||this.$C)&&(this.xk(t,i,s),di(e))},this.us.jn(Vo.xf),this.setPadding({right:24}),this.Ik=i.pb("chartXY series bg",Qc.seriesBackground),this.Pk=[Qc.gridLine0,Qc.gridLine1,Qc.gridLine2].map((t=>i.Dk(`chartXY gridline #${t}`,t))),this.rg=i.Dk("chartXY highlighters below",Qc.highlightersBelow),this.Xb=i.jm("chartXY plotting",Jc.plotting),this.ng=i.jm("chartXY highlighters above",Jc.highlightersAbove),this.FA=i.jm("chartXY fg",Jc.fg),this.YC.x.K(0,this.uiScale.x.getCellSize()-(this.$t.left+this.$t.right+this.Ca.left+this.Ca.right)),this.YC.y.K(0,this.uiScale.y.getCellSize()-(this.$t.bottom+this.$t.top+this.Ca.bottom+this.Ca.top)),this.YC.tt(this.uiScale.ni().x,this.uiScale.ni().y),this.Vv=this.Ik.Be(this.YC).De(this.qi.chartXYSeriesBackgroundFillStyle).Pe(at),this.Ov=this.FA.Be(this.YC).De(O).Pe(this.qi.chartXYSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.zv(this.Vv,this.Ov),this.setSeriesBackgroundEffect(!1);const a=jt(r?r.cursorBuilder:void 0,zc),l=i.Qm();this.Jm=Va(this,l,a.pm(l,this.YC,this.YC,Yt,this.qi),this,"show-all",hd,((t,i)=>{const s=this.translateCoordinate(t,{x:t.axisX,y:t.axisY},this.coordsClient);return Math.sqrt((s.clientX-i.clientX)**2+(s.clientY-i.clientY)**2)})),this.addAxisX(r&&r.defaultAxisX),this.addAxisY(r&&r.defaultAxisY),this.onResize(this.Ak),this.bh.yr("ChartXY"),this.Av=Ae(new ye(this.kk,this.Tk,this.Fk,1),new me(this._k,this.wk,this.Ck)),this.onSeriesBackgroundMouseEnter(this.mM),this.onSeriesBackgroundMouseLeave(this.pM),this.onSeriesBackgroundMouseWheel(this.cv),this.onSeriesBackgroundMouseDragStart(this.vM),this.onSeriesBackgroundMouseDrag(this.dv),this.onSeriesBackgroundMouseDragStop(this.fv),this.onSeriesBackgroundTouchStart(this.Av.onTouchStart),this.onSeriesBackgroundTouchMove(this.Av.onTouchMove),this.onSeriesBackgroundTouchEnd(this.Av.onTouchEnd),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled)),this.Iy(h,this.YC)}get coordsAxis(){return{x:this.getDefaultAxisX(),y:this.getDefaultAxisY()}}getSeries(){return this.Bv}setCursor(t){return this.Jm.setCursor(t),this}getCursor(){return this.Jm.getCursor()}setCursorMode(t){return this.Jm.setCursorMode(t),this}getCursorMode(){return this.Jm.getCursorMode()}setCustomCursor(t){return this.Jm.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.Jm.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.Jm.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Jm.setCursorFormatting(t),this}getCursorFormatting(){return this.Jm.getCursorFormatting()}solveNearest(t,i=this.getCursorMode()||"show-nearest"){return this.Jm.solveNearest(t,i,this.Bv,this.ck)}addCursor(t=zc){const i=this.vy(),s=t.pm(i,this.YC,this.YC,this.Ay(i),this.qi);return this.ky(s),s}getMinimumSize(){const t={x:0,y:0};t.x+=this.$t.left+this.$t.right+this.Ca.left+this.Ca.right,t.y+=this.$t.top+this.$t.bottom+this.Ca.top+this.Ca.bottom;const i=this.bh.Es().sd(),s=y(id(this.oA||td),this.Dy);return t.x+=i.x+s.left+s.right,t.y+=i.y+s.top+s.bottom,this.Bk&&(t.x+=this.Bk.left,t.x+=this.Bk.right,t.y+=this.Bk.top,t.y+=this.Bk.bottom),t.x+=Yc.x,t.y+=Yc.y,t}addAxisX(t){var i,s;const{opposite:e,type:h}=oe(t);let r;r="linear"===h.type?this.yy.d1({dimension:"x",scale1DConstructor:Zs}):"linear-highPrecision"===h.type?this.yy.d1({dimension:"x",scale1DConstructor:Zs}).xi():this.yy.d1({dimension:"x",scale1DConstructor:Ns}).fi(h.base),r.tt(this.YC.x.ni());const n=e?this.Xg:this.jg,o=new No(this.Pk,this.FA,this.By,this.rg,this.ng,this.us.es,r,this.YC.y,(a=()=>o.Bg(),{...Wo,...Bc(a)}),this,e?100:0,this.og,this.gk,this.qi,this.uh,h);var a;let l,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=n.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),u=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,u=null!==(s=t.iStack)&&void 0!==s?s:0),n.push({axis:o,iStack:u,iParallel:l}),this.us.xs(),o}addAxisY(t){var i,s;const{opposite:e,type:h}=oe(t);let r;r="linear"===h.type?this.yy.d1({dimension:"y",scale1DConstructor:Zs}):"linear-highPrecision"===h.type?this.yy.d1({dimension:"y",scale1DConstructor:Zs}).xi():this.yy.d1({dimension:"y",scale1DConstructor:Ns}).fi(h.base),r.tt(this.YC.y.ni());const n=e?this.Zg:this.Qg,o=new No(this.Pk,this.FA,this.By,this.rg,this.ng,this.us.es,r,this.YC.x,(a=()=>o.Bg(),{...Uo,...Lc(a)}),this,e?100:0,this.og,this.gk,this.qi,this.uh,h);var a;let l,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=n.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),u=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,u=null!==(s=t.iStack)&&void 0!==s?s:0),n.push({axis:o,iParallel:l,iStack:u}),this.us.xs(),o}swapAxes(t,i){const s=[this.jg,this.Qg,this.Zg,this.Xg],e=s.find((i=>void 0!==i.find((i=>i.axis===t)))),h=s.find((t=>void 0!==t.find((t=>t.axis===i))));if(!e||!h)return this;if(e!==h)throw new Error("LightningChart JS ChartXY.swapAxes does not support swapping Axes that are on different sides.");const r=e.find((i=>i.axis===t)),n=e.find((t=>t.axis===i));if(!r||!n)return this;const o=r.iParallel,a=r.iStack;return r.iParallel=n.iParallel,r.iStack=n.iStack,n.iParallel=o,n.iStack=a,this.us.xs(),this}dispose(){return this.Jm.U(),this.Ik.U(),this.Xb.U(),this.FA.U(),this.Pk.forEach((t=>t.U())),this.ng.U(),this.rg.U(),this.kC().forEach((t=>t.dispose())),Pa(this.YC),this.jg.slice().forEach((t=>t.axis.dispose())),this.Qg.slice().forEach((t=>t.axis.dispose())),this.Zg.slice().forEach((t=>t.axis.dispose())),this.Xg.slice().forEach((t=>t.axis.dispose())),this.Bv.slice().forEach((t=>{t.dispose()})),super.dispose()}getDefaultAxisX(){var t;return null===(t=[...this.jg,...this.Xg].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}getDefaultAxisY(){var t;return null===(t=[...this.Qg,...this.Zg].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}getDefaultAxes(){return[this.getDefaultAxisX(),this.getDefaultAxisY()]}getAxes(...t){const i=t&&t.length>0?new Set(t):$c;return Xt(Array.from(i).map((t=>{switch(t){default:case Hc.Top:return this.Xg.map((t=>t.axis));case Hc.Bottom:return this.jg.map((t=>t.axis));case Hc.Left:return this.Qg.map((t=>t.axis));case Hc.Right:return this.Zg.map((t=>t.axis))}})))}Lk(t){let i;return this.forEachAxisX((s=>{i=t===s?"x":i})),this.forEachAxisY((s=>{i=t===s?"y":i})),i}forEachAxisX(t){this.jg.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.Xg.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}forEachAxisY(t){this.Qg.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.Zg.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}setTitlePosition(t){return this.oA=t,this.us.xs(),this}getTitlePosition(){return this.oA}Rk(t,i,s,e){const h=this.oA||td;let r,n=y(id(h),this.Dy);this.getTitleFillStyle()===O||0===this.getTitle().length?(r={x:0,y:0},n={left:0,top:0,right:0,bottom:0}):r=this.bh.Es().sd();const o=Math.abs(e)+this.Ca.bottom+this.$t.bottom,a=Math.abs(s)+this.Ca.top+this.$t.top,l={left:Math.abs(t)+this.Ca.left+this.$t.left,right:Math.abs(i)+this.Ca.right+this.$t.right,top:a,bottom:o},u=this.uiScale.Gi(),{horizontalAlignment:c,verticalAlignment:d,position:f,marginsWithTitle:A}=sd(h,u,l,r,n,this.Ca);return this.bh.Re(f).Ga(c).Ua(d),A}Le(t){super.Le(t);for(const t of this.Bv)t.pv();for(const t of this.Bv)t.Le();const i=Ei(this.Bv.map((t=>t.SM()))),s=new Set(i.map((t=>t.Ek)));if(1===s.size){const t=Array.from(s)[0],e="x"===t?[this.jg,this.Xg]:[this.Qg,this.Zg],h="y"===t?[this.jg,this.Xg]:[this.Qg,this.Zg];e.forEach((t=>t.forEach((t=>t.axis.Dr())))),i.forEach((t=>t.zk())),h.forEach((t=>t.forEach((t=>t.axis.Dr()))))}else this.Qg.forEach((t=>t.axis.Dr())),this.jg.forEach((t=>t.axis.Dr())),this.Xg.forEach((t=>t.axis.Dr())),this.Zg.forEach((t=>t.axis.Dr()));const e=this.Qg.map((t=>t.axis.Es())),h=this.jg.map((t=>t.axis.Es())),r=this.Xg.map((t=>t.axis.Es())),o=this.Zg.map((t=>t.axis.Es()));let a=!1;this.forEachAxis((t=>{(t.Er()||t.zr())&&(a=!0)}));const l=this.mk||this.pk||!this.QC&&a,u=new Set(this.getAxes().map((t=>t.getStackIndex()))).size>1;this.Jm.Le(l,u?this.Bv.sort(((t,i)=>i.axisY.getStackIndex()-t.axisY.getStackIndex())):this.Bv,this.ck,{afterCursorPointedAt:t=>{const i=this.us.$n();if(t.length>1&&i){const t=this.us.Oo(i);this.Jm.Gy.Am({x:t.engineX,y:t.engineY},this.us.ft)}},overrideCursorPositions:(t,i)=>t.map((t=>t.multiHit?t.multiHit.map((i=>({...t.cursorPosition,pointMarker:i}))):[t.cursorPosition])).flat()});const c=ed(this.Qg,e),f=ed(this.jg,h),A=ed(this.Xg,r),g=ed(this.Zg,o),y=this.Rk(c.thicknessTotal,g.thicknessTotal,A.thicknessTotal,f.thicknessTotal),m=this.YC.x.getCellSize()-(y.left+y.right),p=this.YC.y.getCellSize()-(y.bottom+y.top),v=[y.left,y.right],S=[y.bottom,y.top];this.YC.x.K(0,m),this.YC.y.K(0,p),this.YC.x.ii(v),this.YC.y.ii(S);const b=(t,i,s,e)=>{let h=0;t.groups.forEach((t=>{let r=0;const n=t.stacks.reduce(((t,i)=>Math.max(t,i.Eg)),0),o=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()?i.axis.lA+i.axis.uA:0)),0),a=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"pixels"in i.axis.Yd?i.axis.Yd.pixels:0)),0),l=i-o-a;t.stacks.forEach((e=>{const o=e.axis,a=o.getVisible(),u=Math.max(i-r,0),c=Math.min(a?"pixels"in o.Yd?o.Yd.pixels:o.Yd.relative/t.sumRelativeSize*l:0,u),d=a?s[0]+r+o.lA:0,f=a?s[1]+(i-r)-c-o.lA:0;o.ft.ii([d,f]),o.Le({Eg:n,zg:e.zg,Ng:c,Vk:r,$g:n+e.zg,Wg:h}),a&&(r+=c+o.lA+o.uA)})),h+=e*t.thicknessMax}))};b(c,p,S,-1),b(g,p,S,1),b(f,m,v,-1),b(A,m,v,1),this.Bk={left:c.thicknessTotal,top:A.thicknessTotal,right:g.thicknessTotal,bottom:f.thicknessTotal},this.Vv.Re(n(0,0)).tt(n(m,p)),this.Ov.Re(n(0,0)).tt(n(m,p));const x=d(this.YC.x.si(),this.YC.y.si(),this.YC.x.hi(),this.YC.y.hi());this.Xb.ab(x),this.rg.ab(x),this.ng.ab(x),this.hy&&this.hy(),super.Fy(),this.jg.forEach((t=>t.axis.Jg())),this.Xg.forEach((t=>t.axis.Jg())),this.Qg.forEach((t=>t.axis.Jg())),this.Zg.forEach((t=>t.axis.Jg()));for(const t of this.Bv)t.xp()}Z(){for(let t=0;t<this.jg.length;t+=1)this.jg[t].axis.Z();for(let t=0;t<this.Xg.length;t+=1)this.Xg[t].axis.Z();for(let t=0;t<this.Qg.length;t+=1)this.Qg[t].axis.Z();for(let t=0;t<this.Zg.length;t+=1)this.Zg[t].axis.Z();return super.Z()}yk(t){if(this.HC.has(t))return this.HC.get(t);throw new Error("No attach handler for axis Make sure that passed axes definitely belong to this chart and that they haven't been disposed of.")}addLineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);let e=kc.freeform;t&&t.dataPattern&&(e="ProgressiveX"===t.dataPattern.pattern?kc.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?kc.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?kc.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?kc.verticalRegressive:kc.freeform);const h=new Oc(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,e,this.qi,this.us.es,yl(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,t);return this.Nv(h),h}addPointLineAreaSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=new Wc(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,t);return this.Nv(e),e}addPointSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=t&&t.pointShape&&Object.values(sr).includes(t.pointShape)?"string"==typeof t.pointShape?sr[t.pointShape]:t.pointShape:sr.Square,h=new Nc(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,e,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,t);return this.Nv(h),h}addPointLineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=t&&t.pointShape&&Object.values(sr).includes(t.pointShape)?"string"==typeof t.pointShape?sr[t.pointShape]:t.pointShape:sr.Square;let h=kc.freeform;t&&t.dataPattern&&(h="ProgressiveX"===t.dataPattern.pattern?kc.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?kc.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?kc.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?kc.verticalRegressive:kc.freeform);const r=new fc(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,h,e,this.qi,this.us.es,yl(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,t);return this.Nv(r),r}addStepSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=t&&t.pointShape?t.pointShape:sr.Square,h=t&&t.mode?t.mode:lc.before,r=new Tc(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,e,h,this.qi,this.us.es,yl(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,t);return this.Nv(r),r}addSplineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=t&&t.pointShape?t.pointShape:sr.Square;let h=kc.freeform;t&&t.dataPattern&&(h="ProgressiveX"===t.dataPattern.pattern?kc.horizontalProgressive:"RegressiveX"===t.dataPattern.pattern?kc.horizontalRegressive:kc.freeform);const r=new yc(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,h,e,this.qi,this.us.es,yl(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,t);return this.Nv(r),r}addRectangleSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=new Xu(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length);return this.Nv(e),e}addPolygonSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY(),e=new Hu(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length);return this.Nv(e),e}addSegmentSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=new Zu(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length);return this.Nv(e),e}addEllipseSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=new Uu(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length);return this.Nv(e),e}addBoxSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=t&&t.dimensionStrategy?t.dimensionStrategy:Wo,h=new Gu(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,e,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length);return this.Nv(h),h}addHeatmapGridSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new Ju(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,t,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length),this.Nv(e),e}addHeatmapScrollingGridSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new qu(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,t,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length),this.Nv(e),e}addOHLCSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zc(i,s);const e=new(t&&t.type?t.type:Dc.Candlesticks)(this,this.Rv,this.Xb,i,s,this.yk(i),this.yk(s),this.vy,this.qi,this.us.es);return this.Nv(e),e}addOnScreenMenu(t,i){return new Gc(this.vA,t,this,i)}setMouseBackgroundStyle(t=Xe.Default){return this.rk=t,this}setMouseZoomStyle(t=Xe.ZoomIn){return this.ak=t,this}setMouseFitStyle(t=Xe.Default){return this.lk=t,this}setMousePanStyle(t=Xe.Move){return this.nk=t,this}setMouseInteractions(t){return this.setMouseInteractionRectangleZoom(t).setMouseInteractionRectangleFit(t).setMouseInteractionWheelZoom(t).setMouseInteractionPan(t)}setMouseInteractionRectangleZoom(t){return this.$C=t,this}getMouseInteractionRectangleZoom(){return this.$C}setMouseInteractionRectangleFit(t){return this.XC=t,this}getMouseInteractionRectangleFit(){return this.XC}setMouseInteractionPan(t){return this.ZC=t,this}getMouseInteractionPan(){return this.ZC}setMouseInteractionWheelZoom(t){return this.jC=t,this}getMouseInteractionWheelZoom(){return this.jC}setZoomingRectangleFillStyle(t){return this.ik="function"==typeof t?t(this.ik):t,this.us.xs(),this}getZoomingRectangleFillStyle(){return this.ik}setZoomingRectangleStrokeStyle(t){return this.sk="function"==typeof t?t(this.sk):t,this.us.xs(),this}getZoomingRectangleStrokeStyle(){return this.sk}setFittingRectangleFillStyle(t){return this.ek="function"==typeof t?t(this.ek):t,this.us.xs(),this}getFittingRectangleFillStyle(){return this.ek}setFittingRectangleStrokeStyle(t){return this.hk="function"==typeof t?t(this.hk):t,this.us.xs(),this}getFittingRectangleStrokeStyle(){return this.hk}addLegendBox(t,i){const s=super.addLegendBox(t,i);if(void 0===i||i===this.uiScale)if(void 0===t||"vertical"===t.getAlignment())s.setOrigin(je.RightCenter).setPosition({x:this.uiScale.x.ct(this.uiScale.x.ei()-this.Ca.right),y:ft(this.YC.y.ct(this.YC.y.si()+this.YC.y.hi()/2),this.YC.y,this.uiScale.y)});else{const t=this.oA||td,i=sd(t,this.uiScale.Gi(),this.Ca,this.getTitleFillStyle()===O||0===this.getTitle().length?{x:0,y:0}:this.bh.Es().sd(),y(id(t),this.Dy),this.Ca).marginsWithTitle.top;s.setOrigin(je.RightTop).setPosition(At({x:this.mg.x.getInnerEnd()-this.Ca.right,y:this.mg.y.getInnerEnd()-i},this.mg,this.uiScale))}return s}vk(t,i){this.forEachAxis(Xc);const s=this.us.Oo({clientX:i.x,clientY:i.y}),e=At({x:s.engineX,y:s.engineY},this.By.us.ft,this.YC);this.KC.Re(e).tt(n(0,0))}Sk(t,i,s){const e=this.us.Oo({clientX:i.x,clientY:i.y}),h=At({x:e.engineX,y:e.engineY},this.By.us.ft,this.YC),r=this.us.Oo({clientX:s.x,clientY:s.y}),o=At({x:r.engineX,y:r.engineY},this.By.us.ft,this.YC),a=ls(o.x,this.YC.x.getInnerStart(),this.YC.x.getInnerEnd())&&ls(o.y,this.YC.y.getInnerStart(),this.YC.y.getInnerEnd()),l=n(Math.min(h.x,o.x),Math.min(h.y,o.y)),u=n(Math.max(h.x,o.x),Math.max(h.y,o.y));this.KC.Re(l).tt(Cs(u,l));const c=Math.min(u.x-l.x,u.y-l.y)>=10;a&&c&&u.x===h.x&&this.XC?(this.mk=!0,this.KC.De(this.ek).Pe(this.hk),this.qC.Ge(this.hk).Ye(h).Ue(o),this.tk.Ge(this.hk).Ye(n(h.x,o.y)).Ue(n(o.x,h.y)),this.uk=this.engine.setMouseStyle(this.lk,this.uk)):a&&c&&(this.$C||this.XC)?(this.mk=!0,this.KC.De(this.ik).Pe(this.sk),this.qC.Ge(at),this.tk.Ge(at),this.uk=this.engine.setMouseStyle(this.ak,this.uk)):(this.mk=!1,this.KC.Pe(at).De(O),this.qC.Ge(at),this.tk.Ge(at),this.engine.restoreMouseStyle(this.uk)),this.us.xs()}xk(t,i,s){if(this.mk){const t=this.us.Oo({clientX:s.x,clientY:s.y}),e=At({x:t.engineX,y:t.engineY},this.By.us.ft,this.YC),h=ls(e.x,this.YC.x.getInnerStart(),this.YC.x.getInnerEnd())&&ls(e.y,this.YC.y.getInnerStart(),this.YC.y.getInnerEnd()),r=s.x>=i.x||!this.XC?"zoom":"fit",n=this.KC.Va(),o=ws(n,this.KC.ni()),a=Math.min(this.KC.ni().x,this.KC.ni().y)>=10;h&&a&&"zoom"===r&&this.$C?(this.forEachAxisX((t=>{if(t.getChartInteractionZoomByDrag()){const i=At(n,this.YC,t.gg).x,s=At(o,this.YC,t.gg).x;t.At(i,s,!0,!0,"interactionSetInterval")}})),this.forEachAxisY((t=>{if(t.getChartInteractionZoomByDrag()){const i=At(n,this.YC,t.gg).y,s=At(o,this.YC,t.gg).y;t.At(i,s,!0,!0,"interactionSetInterval")}}))):h&&a&&"fit"===r&&this.XC&&this.forEachAxis(jc)}this.KC.Pe(at).De(O),this.qC.Ge(at),this.tk.Ge(at),this.us.xs()}pan(t){this.forEachAxisX((i=>{i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.setStopped(!0).pan(t.y)}))}bk(t){this.forEachAxisX((i=>{i.getChartInteractionPanByDrag()&&i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.getChartInteractionPanByDrag()&&i.setStopped(!0).pan(t.y)}))}zoom(t,i){this.forEachAxis(Xc),this.forEachAxisX((s=>{s.zoom(s.ft.ct(t.x),i.x)})),this.forEachAxisY((s=>{s.zoom(s.ft.ct(t.y),i.y)}))}Mk(t,i){this.forEachAxisX((s=>{s.getChartInteractionZoomByWheel()&&(Xc(s),s.zoom(s.ft.ct(t.x),i.x))})),this.forEachAxisY((s=>{s.getChartInteractionZoomByWheel()&&(Xc(s),s.zoom(s.ft.ct(t.y),i.y))}))}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}sf(){const t=[];return this.forEachAxis((i=>i.Fg((i=>t.push(i))))),super.sf().concat(t)}kC(){return this.JC}xe(){return this.Ey(this.Xb)}setCursorEnabledDuringAxisAnimation(t){return this.QC=t,this}getCursorEnabledDuringAxisAnimation(){return this.QC}forEachAxis(t){return this.forEachAxisX(t),this.forEachAxisY(t),this}translateCoordinate(t,i,s){if(s){const e=t,h=i,r=Yo(h)?h:ee(h)?this.mg:void 0;if(r&&ie(s)){const t=At(e,r,this.us.ft);return this.us.No({engineX:t.x,engineY:t.y})}if(r&&ee(s))return At(e,r,this.mg);if(r&&Yo(s))return At(e,r,s)}else{const s=t;if(ee(i)){const t=this.us.Oo(s);return At({x:t.engineX,y:t.engineY},this.us.ft,this.mg)}if(Yo(i)){const t=i,e=this.us.Oo(s);return At({x:e.engineX,y:e.engineY},this.us.ft,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}}!function(t){t.CenterTop="center-top",t.RightTop="right-top",t.LeftTop="left-top",t.CenterBottom="center-bottom",t.RightBottom="right-bottom",t.LeftBottom="left-bottom",t.SeriesCenterTop="series-center-top",t.SeriesRightTop="series-right-top",t.SeriesLeftTop="series-left-top",t.SeriesCenterBottom="series-center-bottom",t.SeriesRightBottom="series-right-bottom",t.SeriesLeftBottom="series-left-bottom"}(Kc||(Kc={}));const td=Kc.CenterTop,id=t=>{switch(t){case"center-top":case"series-center-bottom":return{left:0,right:0,top:0,bottom:5};case"left-top":return{left:20,right:0,top:0,bottom:5};case"right-top":return{left:0,right:20,top:0,bottom:5};case"center-bottom":return{left:0,right:0,top:0,bottom:0};case"left-bottom":return{left:20,right:0,top:0,bottom:0};case"right-bottom":return{left:0,right:20,top:0,bottom:0};case"series-center-top":return{left:0,right:0,top:5,bottom:0};case"series-left-top":return{left:5,right:0,top:5,bottom:0};case"series-right-top":return{left:0,right:5,top:5,bottom:0};case"series-left-bottom":return{left:5,right:0,top:0,bottom:5};case"series-right-bottom":return{left:0,right:5,top:0,bottom:5}}return Oi(0,`Unexpected ChartXY title position selection ${t}`)},sd=(t,i,s,e,h,r)=>{e.x,h.left,h.right;const n=e.y+h.bottom+h.top,o=(h.left-h.right)*i.x,a=(h.bottom-h.top)*i.y;switch(t){case"center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-(r.top+h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:o,y:100-(r.top-h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100+o,y:100-(r.top-h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50+o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100+o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"series-center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:s.left*i.x+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100-s.right*i.x+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50,y:s.bottom*i.y+a},marginsWithTitle:s};case"series-left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:s.left*i.x+o,y:s.bottom*i.y+a},marginsWithTitle:s};case"series-right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100-s.right*i.x+o,y:s.bottom*i.y+a},marginsWithTitle:s}}return Oi(0,`Unexpected ChartXY title position selection ${t}`)},ed=(t,i)=>{const s=[];t.forEach(((t,e)=>{const h=i[e],r=s.find((i=>i.iParallel===t.iParallel));r?(r.stacks.push({...t,...h}),r.stacks.sort(((t,i)=>t.iStack-i.iStack))):s.push({iParallel:t.iParallel,stacks:[{...t,...h}]})}));const e=s.map((t=>{const i=t.stacks.reduce(((t,i)=>Math.max(t,i.Eg)),0),s=t.stacks.reduce(((t,i)=>Math.max(t,i.zg)),0),e=t.stacks.reduce(((t,i)=>Math.max(t,i.Hd)),0),h=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"relative"in i.axis.Yd?i.axis.Yd.relative:0)),0);return{...t,ticksSizeMax:i,titleSizeMax:s,sumRelativeSize:h,thicknessMax:e}}));return e.sort(((t,i)=>t.iParallel-i.iParallel)),{groups:e,thicknessTotal:e.reduce(((t,i)=>t+i.thicknessMax),0)}},hd=(t,i,s)=>{var e;const h=Array.from(new Set(s.map((t=>t.series.ds())))),r=1===h.length&&void 0!==h[0]?h[0]:void 0,n="ProgressiveY"===r||"RegressiveY"===r?{progressiveDimension:"Y",progressiveAxis:i.axisY,valueDimension:"X",hitValueAxis:t=>t.axisX,value:t=>t.x,position:t=>t.y}:{progressiveDimension:"X",progressiveAxis:i.axisX,valueDimension:"Y",hitValueAxis:t=>t.axisY,value:t=>t.y,position:t=>t.x},o=n.progressiveAxis.getTickStrategy();return St(i)?za(i,[[i.series],[t.getDefaultAxisX().getTitle()||"X","",{text:ne(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:ne(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],void 0!==i.intensity?["Value","",{text:ne(i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]:[]]):1===s.length?"Time"===o||"DateTime"===o?i.multiHit?[[ne(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis)],...za(i,[[i.series,""],[`${n.valueDimension}1`,"",{text:ne(n.hitValueAxis(i).formatValue(n.value(i.multiHit[0])),n.hitValueAxis(i)),font:{weight:"bold"}}],[`${n.valueDimension}2`,"",{text:ne(n.hitValueAxis(i).formatValue(n.value(i.multiHit[1])),n.hitValueAxis(i)),font:{weight:"bold"}}]])]:[[ne(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis)],...za(i,[[i.series,"",{text:ne(n.hitValueAxis(i).formatValue(n.value(i)),n.hitValueAxis(i)),font:{weight:"bold"}}]])]:i.multiHit?za(i,[[i.series],[n.progressiveDimension,"",{text:ne(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),font:{weight:"bold"}}],[`${n.valueDimension}1`,"",{text:ne(n.hitValueAxis(i).formatValue(n.value(i.multiHit[0])),n.hitValueAxis(i)),font:{weight:"bold"}}],[`${n.valueDimension}2`,"",{text:ne(n.hitValueAxis(i).formatValue(n.value(i.multiHit[1])),n.hitValueAxis(i)),font:{weight:"bold"}}]]):za(i,[[i.series],[n.progressiveDimension,"",{text:ne(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),font:{weight:"bold"}}],[n.valueDimension,"",{text:ne(n.hitValueAxis(i).formatValue(n.value(i)),n.hitValueAxis(i)),font:{weight:"bold"}}]]):r?[ne(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),...s.map((t=>t.multiHit?za(t,[[t.series,""],[`${n.valueDimension}1`,"",{text:ne(n.hitValueAxis(t).formatValue(n.value(t.multiHit[0])),n.hitValueAxis(t)),font:{weight:"bold"}}],[`${n.valueDimension}2`,"",{text:ne(n.hitValueAxis(t).formatValue(n.value(t.multiHit[1])),n.hitValueAxis(t)),font:{weight:"bold"}}]]):za(t,[[t.series,"",{text:ne(n.hitValueAxis(t).formatValue(n.value(t)),n.hitValueAxis(t)),font:{weight:"bold"}}]]))).flat()]:s.map((t=>za(t,[[t.series],[n.progressiveDimension,"",{text:ne(n.progressiveAxis.formatValue(n.position(t)),n.progressiveAxis),font:{weight:"bold"}}],[n.valueDimension,"",{text:ne(n.hitValueAxis(t).formatValue(n.value(t)),n.hitValueAxis(t)),font:{weight:"bold"}}]]))).flat()},rd=t=>t instanceof Ou||t instanceof sc||t instanceof ac||t instanceof Ju||t instanceof Fc||t instanceof Tc||t instanceof Wc;class nd{constructor(t,i,e,h,r,n,o){this.coordsRelative="relative",this.coordsClient="client",this.L=new s,this.Ok=[],this.Nk=new Map,this.Bv=new Map,this.Gk=(t,i,s)=>{0!==this.Bv.size&&void 0!==[...this.Bv.values()].find((({series:t})=>!0===t.getVisible()))||this.Wk.At(i,s,!1,!1,"zoomBandChart"),this.Uk.us.xs()},i.us.jn(Vo.Sf),this.vA=t,this.Yk=(null==n?void 0:n.orientation)||"x",this.Hk=void 0!==(null==n?void 0:n.useSharedValueAxis)&&n.useSharedValueAxis,this.$k=h,this.ju="x"===this.Yk?Wo:Uo;const a={...n,defaultAxisX:this.ju.getWidth({x:null==n?void 0:n.defaultAxis,y:void 0}),defaultAxisY:this.ju.getHeight({x:null==n?void 0:n.defaultAxis,y:void 0})};this.Uk=new qc(t,i,e,Yt,r,a,o).setTitle("Zoom Band Chart").setMouseInteractions(!1).setCursorMode(void 0),this.engine=this.Uk.engine;const l=this.Uk.getDefaultAxisX().setMouseInteractions(!1),u=this.Uk.getDefaultAxisY().setMouseInteractions(!1);this.Wk=this.ju.getWidth({x:l,y:u}).setScrollStrategy(nh.fitting).setAnimationScroll(!1).setStrokeStyle(at).setTickStrategy(oh.Empty),(null==n?void 0:n.useSharedValueAxis)?this.Xk=this.ju.getHeight({x:l,y:u}):this.ju.getHeight({x:l,y:u}).dispose();const c=this.getTheme().zoomBandChartDefocusOverlayFillStyle||new U({color:this.getTheme().isDark?S(0,0,0,180):S(255,255,255,180)});this.jk=[this.Uk.FA.Be(this.Wk.gg).De(c).Pe(at),this.Uk.FA.Be(this.Wk.gg).De(c).Pe(at)];const d=this.Uk.FA.Ug(this.Wk.gg).Ge(this.getTheme().zoomBandChartSplitterStrokeStyle||this.getTheme().chartXYSeriesBackgroundStrokeStyle);this.Zk={collection:d,members:new Array(5).fill(0).map((t=>d.$r()))};const f=this.getTheme(),A="function"==typeof f.zoomBandChartKnobFillStyle?f.zoomBandChartKnobFillStyle(this.vA.Js):f.zoomBandChartKnobFillStyle||O;this.Qk=[this.Uk.FA.Be(this.Uk.mg).De(A).Pe(at),this.Uk.FA.Be(this.Uk.mg).De(A).Pe(at)],this.Jk=this.getTheme().zoomBandChartKnobSize||{x:0,y:0},this.Kk()}add(t){var i,s,e,h,r;const n=this.Ok.map((t=>t.axis)),o="x"===this.Yk?t.axisX:t.axisY;if(!n.includes(o)){const t=o.onIntervalChange(this.Gk);this.Ok.push({axis:o,deattach:()=>{o.offIntervalChange(t)}}),this.Wk.ir(o.tr()),this.qk&&this.qk.remove(),this.qk=pt(...this.Ok.map((t=>t.axis)))}const a=this.ju.getHeight({x:t.axisX,y:t.axisY});let l;if(this.Hk)l=this.Xk;else{const t=this.Nk.get(a);t?l=t:(l=this.ju.getHeight({x:this.Uk.addAxisX.bind(this.Uk),y:this.Uk.addAxisY.bind(this.Uk)})(),this.tT(l)),this.Nk.set(a,l)}const u=this.ju.getWidth({x:this.Wk,y:l}),c=this.ju.getHeight({x:this.Wk,y:l});let d;const f=[],A=(t,i)=>{const s=t=>{if(0!==t.length)if("x"in t[0]){const s=t;i.add(s)}else{const s=t,e=[];for(let t=0;t<s.length;t+=1){const i=s[t];e.push({x:i[0],y:i[4]})}i.add(e)}},e=t.WM();s(e);const h=t.UM(((t,i)=>s(i)));f.push((()=>t.YM(h)));const r=t.HM((()=>i.clear()));f.push((()=>{t.$M(r)}))};if(t instanceof Wc)d=this.Uk.addPointLineAreaSeries({...t.Jn,xAxis:u,yAxis:c}).setStrokeStyle(t.getStrokeStyle()).setAreaFillStyle(t.getAreaFillStyle()).setPointFillStyle(t.getPointFillStyle()).setPointAlignment(t.getPointAlignment()).setPointRotation(t.getPointRotation()).setPointShape(t.getPointShape()).setPointSize(t.getPointSize()).setCurvePreprocessing(t.getCurvePreprocessing()),d.setDataSet(t.UC());else if(t instanceof Oc||t instanceof Fc){const s=this.Uk.addLineSeries({xAxis:u,yAxis:c,dataPattern:t instanceof Oc?null===(i=t.Jn)||void 0===i?void 0:i.dataPattern:void 0});if(t instanceof Oc)s.setStrokeStyle(t.getStrokeStyle());else{const i=od(t);i&&s.setStrokeStyle(i)}A(t,s),d=s}else if(t instanceof hc){const i=this.Uk.addAreaSeries({xAxis:u,yAxis:c,baseline:t.Z_}).setFillStyle(t.getFillStyle()).setStrokeStyle(t.getStrokeStyle());A(t,i),d=i}else if(t instanceof Nc){const i=this.Uk.addPointSeries({xAxis:u,yAxis:c,pointShape:null===(s=t.Jn)||void 0===s?void 0:s.pointShape}).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof Tc){const i=this.Uk.addStepSeries({xAxis:u,yAxis:c,pointShape:null===(e=t.Jn)||void 0===e?void 0:e.pointShape,mode:t.mw}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof yc){const i=this.Uk.addSplineSeries({xAxis:u,yAxis:c,pointShape:null===(h=t.Jn)||void 0===h?void 0:h.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof fc){const i=this.Uk.addSplineSeries({xAxis:u,yAxis:c,pointShape:null===(r=t.Jn)||void 0===r?void 0:r.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof ac){const i=this.Uk.addAreaRangeSeries({xAxis:u,yAxis:c}).setLowFillStyle(t.getLowFillStyle()).setHighFillStyle(t.getHighFillStyle()).setLowStrokeStyle(t.getLowStrokeStyle()).setHighStrokeStyle(t.getHighStrokeStyle()).add(t.WM()),s=t.UM(((t,s)=>i.add(s)));f.push((()=>t.YM(s))),d=i;const e=t.HM((()=>i.clear()));f.push((()=>{t.$M(e)}))}else{if(!(t instanceof Qu))throw new Error("LightningChart JS Zoom Band Chart unsupported series type");{const i=this.Uk.addHeatmapGridSeries({xAxis:u,yAxis:c,...t.s_}),s=()=>{i.setWireframeStyle(t.getWireframeStyle()).setIntensityInterpolation(t.getIntensityInterpolation()).setFillStyle(t.getFillStyle())};s(),d=i,t.r_(d);const e=t.a_(((t,s)=>i.invalidateIntensityValues(s))),h=t.n_(s);f.push((()=>{t.l_(e),t.o_(h)}));const r=t.HM((()=>i.clear()));f.push((()=>{t.$M(r)}))}}d.setMouseInteractions(!1);const g=t.onVisibleStateChanged(((t,i)=>{d.setVisible(i)}));f.push((()=>{t.offVisibleStateChanged(g)}));const y=t.onHighlight(((t,i)=>d.setHighlight(i)));f.push((()=>{t.offHighlight(y)}));const m=t.onDispose((()=>{this.disposeSeries(t)}));return f.push((()=>{t.offDispose(m)})),this.Bv.set(t,{series:d,clearReferences:()=>f.forEach((t=>t()))}),d}disposeSeries(t){const i=this.Bv.get(t);if(i){const{clearReferences:s}=i;s(),this.Bv.delete(t),i.series.dispose();const e=this.ju.getHeight({x:t.axisX,y:t.axisY}),h=this.Nk.get(e);h&&0===h.Bg().length&&(this.Nk.delete(e),h.dispose())}const s="x"===this.Yk?t.axisX:t.axisY;if(!Array.from(this.Bv.keys()).find((t=>s===("x"===this.Yk?t.axisX:t.axisY)))){const t=this.Ok.findIndex((t=>t.axis===s));this.Ok[t].deattach(),this.Ok.splice(t,1)}return this}setDefocusOverlayFillStyle(t){return this.jk.forEach((i=>i.De(t))),this.Uk.us.xs(),this}getDefocusOverlayFillStyle(){return this.jk[0].$h()}setSplitterStrokeStyle(t){return this.Zk.collection.Ge(t),this.Uk.us.xs(),this}getSplitterStrokeStyle(){return this.Zk.collection.mu()}setKnobFillStyle(t){return this.Qk.forEach((i=>i.De(t))),this.Uk.us.xs(),this}getKnobFillStyle(){return this.Qk[0].$h()}setKnobStrokeStyle(t){return this.Qk.forEach((i=>i.Pe(t))),this.Uk.us.xs(),this}getKnobStrokeStyle(){return this.Qk[0].mo()}setKnobSize(t){return this.Jk=t,this.Uk.us.xs(),this}getKnobSize(){return this.Jk}getDefaultAxisX(){return this.Uk.getDefaultAxisX()}getDefaultAxisY(){return this.Uk.getDefaultAxisY()}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}tT(t){t.setTickStrategy(oh.Empty).setMouseInteractions(!1).setNibStyle(at).setStrokeStyle(at)}Kk(){let t;const i=(t,i,s)=>{var e,h;const r="x"===this.Yk?null===(e=Array.from(this.Bv.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this.Bv.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=r.getInterval(),o=this.Wk.getInterval();Math.abs(this.Wk.ft.dt(t)-this.Wk.ft.dt(i))<10||Math.sign(i-t)!==Math.sign(n.end-n.start)||Math.min(t,i)<Math.min(o.start,o.end)||Math.max(t,i)>Math.max(o.start,o.end)&&Math.max(n.start,n.end)<Math.max(t,i)||r.At(t,i,s,!0,"zoomBandChart")};this.Qk.forEach(((s,e)=>{s.setMouseEnterEventHandler((()=>{t=this.engine.setMouseStyle(this.ju.getWidth({x:Xe.Horizontal,y:Xe.Vertical}),t)})),s.setMouseLeaveEventHandler((()=>{this.engine.restoreMouseStyle(t)}));const h=t=>{var s,h;const r="x"===this.Yk?null===(s=Array.from(this.Bv.keys())[0])||void 0===s?void 0:s.axisX:null===(h=Array.from(this.Bv.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=this.ju.getWidth(this.Uk.translateCoordinate(t,this.Uk.coordsAxis)),o=r.getInterval(),a=0===e?n:o.start,l=1===e?n:o.end;i(a,l,!1),di(t)};s.setMouseDragEventHandler(((t,i,s,e,r)=>h(i)));const r=Ae(new ye(void 0,((t,i,s,e,r)=>h(r))));s.setTouchStartEventHandler(r.onTouchStart),s.setTouchMoveEventHandler(r.onTouchMove),s.setTouchEndEventHandler(r.onTouchEnd)})),this.Uk.onSeriesBackgroundMouseEnter((()=>{t=this.engine.setMouseStyle(Xe.Move,t)})),this.Uk.onSeriesBackgroundMouseLeave((()=>{this.engine.restoreMouseStyle(t)}));const s=(t,s)=>{var e,h;const r="x"===this.Yk?null===(e=Array.from(this.Bv.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this.Bv.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=r.getInterval(),o=this.Wk.ft.gi(n.start,this.ju.getWidth(t)),a=this.Wk.ft.gi(n.end,this.ju.getWidth(t));i(o,a,!1),di(s)};this.Uk.onSeriesBackgroundMouseDrag(((t,i,e,h,r)=>s(r,i)));const e=Ae(new ye(void 0,((t,i,e,h,r)=>s(h,r))));this.Uk.onSeriesBackgroundMouseWheel(((t,s)=>{var e,h;const r="x"===this.Yk?null===(e=Array.from(this.Bv.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this.Bv.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=r.getInterval(),o=this.Wk.getInterval(),a=this.ju.getWidth(this.Uk.translateCoordinate(s,this.Uk.coordsAxis)),l=this.Wk.ft.dt(n.start),u=this.Wk.ft.dt(n.end),c=this.Wk.ft.dt(a),d=$t((c-l)/(u-l),0,1),f=.2*Math.abs(u-l)*r.Wf,A=d*f*-Math.sign(s.deltaY),g=(1-d)*f*Math.sign(s.deltaY),y=$t(this.Wk.ft.gi(n.start,A),o.start,o.end),m=$t(this.Wk.ft.gi(n.end,g),o.start,o.end);i(y,m,!1),di(s)})),this.Uk.onSeriesBackgroundTouchStart(e.onTouchStart),this.Uk.onSeriesBackgroundTouchMove(e.onTouchMove),this.Uk.onSeriesBackgroundTouchEnd(e.onTouchEnd),this.jk.forEach(((s,e)=>{s.setMouseEnterEventHandler((()=>{t=this.engine.setMouseStyle(Xe.Point,t)})),s.setMouseLeaveEventHandler((()=>{this.engine.restoreMouseStyle(t)}));const h=t=>{var s,e;const h="x"===this.Yk?null===(s=Array.from(this.Bv.keys())[0])||void 0===s?void 0:s.axisX:null===(e=Array.from(this.Bv.keys())[0])||void 0===e?void 0:e.axisY;if(!h)return;const r=this.ju.getWidth(this.Uk.translateCoordinate(t,this.Uk.coordsAxis)),n=h.getInterval(),o=this.Wk.getInterval(),a=$t(r-(n.end-n.start)/2,Math.min(o.start,o.end),Math.max(o.start,o.end)-Math.abs(n.end-n.start)),l=a+(n.end-n.start);i(a,l,!0),di(t)};s.setMouseClickEventHandler(((t,i)=>h(i)));const r=Ae(new class{constructor(t,i=300){this.zs=!1,this.Vs=[],this.Os=300,this.Ns=t,this.Os=i}Rs(t,i){const s=Ot.performance.now();let e=!1;for(let t=0;t<this.Vs.length;t+=1)s-this.Vs[t].time>=this.Os?(this.Vs.splice(t,1),t-=1):this.Vs[t].state&&(e=!0);return this.zs?0===i.interactions.length&&(this.Vs.push({state:!1,time:s}),this.zs=!1):1===i.interactions.length&&"pointerdown"===i.type&&(this.Vs.push({state:!0,time:s}),e=!0,this.zs=!0),e}Es(t,i,s){if(s&&!this.zs){const s=this.Vs.reduce(((t,i)=>(i.state?t.on+=1:t.off+=1,t)),{on:0,off:0});s.on>=1&&s.off>=1&&(this.Ns(t,i),this.Vs.length=0)}}}(((t,i)=>h(i))));s.setTouchStartEventHandler(r.onTouchStart),s.setTouchMoveEventHandler(r.onTouchMove),s.setTouchEndEventHandler(r.onTouchEnd)}))}getSizePixels(){return this.Uk.getSizePixels()}onResize(t){return this.Uk.onResize(((i,s,e,h,r)=>t(this,s,e,h,r)))}offResize(t){return this.Uk.offResize(t)}Vr(t){this.Uk.Vr(t)}getMinimumSize(){return this.Uk.getMinimumSize()}Z(){return this.Uk.Z()}J(){return this.Uk.J()}Le(t){var i,s,e,h;const r=Ri(Array.from(this.Bv.keys()).map((t=>t.chart))),n="x"===this.Yk?null===(i=Array.from(this.Bv.keys())[0])||void 0===i?void 0:i.axisX:null===(s=Array.from(this.Bv.keys())[0])||void 0===s?void 0:s.axisY;if("x"===this.Yk){const t=r.reduce(((t,i)=>{const s=[];i.forEachAxisY((t=>{if(0!==t.ug)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.Kg())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),i=r.reduce(((t,i)=>{const s=[];i.forEachAxisY((t=>{if(100!==t.ug)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.Kg())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),s=r.reduce(((t,i)=>Math.max(t,i.getPadding().left)),0),h=r.reduce(((t,i)=>Math.max(t,i.getPadding().right)),0);this.Uk.forEachAxisY((t=>t.setThickness(0))),null===(e=this.getDefaultAxisY())||void 0===e||e.setThickness(t),this.Uk.setPadding({left:s+(0===r.length?10:0),right:h+i+(0===r.length?10:0)})}else{const t=r.reduce(((t,i)=>{const s=[];i.forEachAxisX((t=>{if(0!==t.ug)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.Kg())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),i=r.reduce(((t,i)=>{const s=[];i.forEachAxisX((t=>{if(100!==t.ug)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.Kg())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),s=r.reduce(((t,i)=>Math.max(t,i.getPadding().bottom)),0),e=r.reduce(((t,i)=>Math.max(t,i.getPadding().top)),0);this.Uk.forEachAxisX((t=>t.setThickness(0))),null===(h=this.getDefaultAxisX())||void 0===h||h.setThickness(t),this.Uk.setPadding({bottom:s+(0===r.length?10:0),top:e+i+(0===r.length?10:0)})}this.Uk.Le(t);const o=this.Wk.getInterval().start,a=this.Wk.getInterval().end,l=$t(n?n.getInterval().start:o,o,a),u=$t(n?n.getInterval().end:a,o,a),c=this.ju.getHeight(this.Uk.YC.getInnerIntervalPixels());this.jk[0].Re(this.ju.toPoint(o,0)).tt(this.ju.toPoint(l-o,c)),this.jk[1].Re(this.ju.toPoint(u,0)).tt(this.ju.toPoint(a-u,c)),this.Zk.members[0].Hg(this.ju.toPoint(o,c),this.ju.toPoint(l,c)),this.Zk.members[1].Hg(this.ju.toPoint(l,c),this.ju.toPoint(l,0)),this.Zk.members[2].Hg(this.ju.toPoint(l,0),this.ju.toPoint(u,0)),this.Zk.members[3].Hg(this.ju.toPoint(u,0),this.ju.toPoint(u,c)),this.Zk.members[4].Hg(this.ju.toPoint(u,c),this.ju.toPoint(a,c));const d=At(this.ju.toPoint(l,c/2),this.Wk.gg,this.Uk.mg),f=At(this.ju.toPoint(u,c/2),this.Wk.gg,this.Uk.mg),A=this.Jk;this.Qk[0].Re({x:d.x-A.x/2,y:d.y-A.y/2}).tt({x:A.x,y:A.y}).Qh(this.ju.getWidth({x:0,y:90})),this.Qk[1].Re({x:f.x-A.x/2,y:f.y-A.y/2}).tt({x:A.x,y:A.y}).Qh(this.ju.getWidth({x:0,y:90}))}setSeriesBackgroundFillStyle(t){return this.Uk.setSeriesBackgroundFillStyle(t),this.Uk.us.xs(),this}getSeriesBackgroundFillStyle(){return this.Uk.getSeriesBackgroundFillStyle()}setSeriesBackgroundStrokeStyle(t){return this.Uk.setSeriesBackgroundStrokeStyle(t),this.Uk.us.xs(),this}getSeriesBackgroundStrokeStyle(){return this.Uk.getSeriesBackgroundStrokeStyle()}setSeriesBackgroundEffect(t){return this.Uk.setSeriesBackgroundEffect(t),this.Uk.us.xs(),this}getSeriesBackgroundEffect(){return this.Uk.getSeriesBackgroundEffect()}getTheme(){return this.Uk.getTheme()}setTitle(t){return this.Uk.setTitle(t),this}getTitle(){return this.Uk.getTitle()}setTitleFillStyle(t){return this.Uk.setTitleFillStyle(t),this}getTitleFillStyle(){return this.Uk.getTitleFillStyle()}setTitleFont(t){return this.Uk.setTitleFont(t),this}getTitleFont(){return this.Uk.getTitleFont()}setTitleMargin(t){return this.Uk.setTitleMargin(t),this}getTitleMargin(){return this.Uk.getTitleMargin()}setPadding(t){return this.Uk.setPadding(t),this}getPadding(){return this.Uk.getPadding()}setBackgroundFillStyle(t){return this.Uk.setBackgroundFillStyle(t),this}getBackgroundFillStyle(){return this.Uk.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.Uk.setBackgroundStrokeStyle(t),this}getBackgroundStrokeStyle(){return this.Uk.getBackgroundStrokeStyle()}translateCoordinate(t,i,s){return Fa(t,i,s,this.Uk.mg,this.Uk.us)}addUIElement(t,i){return this.Uk.addUIElement(t,i)}addLegendBox(t,i){return this.Uk.addLegendBox(t,i)}getLegendBoxes(){return this.Uk.getLegendBoxes()}saveToFile(t,i,s){return this.Uk.saveToFile(t,i,s),this}dispose(){return this.Uk.dispose(),this.Nk.clear(),this.Bv.clear(),this.$k(this),this}isDisposed(){return this.Uk.isDisposed()}onDispose(t){return this.Uk.onDispose((()=>t(this)))}offDispose(t){return this.Uk.offDispose(t)}}const od=t=>{if("getStrokeStyle"in t)return t.getStrokeStyle();const i=(t=>t instanceof Oc||t instanceof hc?t.getStrokeStyle().getFillStyle():t instanceof Nc||t instanceof fc?t.getPointFillStyle():void 0)(t);return i?new ve({thickness:2,fillStyle:i}):void 0};class ad extends _u{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.ws="Point Series",this.Xx=[],this.jx=!1,this.qx=3,this.Ma=0,this.ke=Ii(this.qi.polarPointSeriesFillStyle,r),this.gd=new Vn({dataPattern:null}),this.Za=t.vd(e).Ge(at).pd(O).md(this.ke).Sd(sr.Circle).wd(this.qx).cs(this.getHighlight()).yd(this.gd),this.fs(this.Za)}solveNearest(t,i="show-nearest"){const s=this.chart.translateCoordinate(t,this.chart.coordsAxis),e=wu([s],this.scale)[0],h=this.gd.Kc(e,Ea(i),this.scale,this.chart.mg);if(!h)return;const r=Tu(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Ji(t,i){return ji({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}setData(t){return 0!==this.Xx.length&&this.chart.us.jn(Vo.kf),this.Xx=ku(t),this.jx=!0,this.Wx=Cu(this.Xx),this.Ds.xs(),this}setPointAlignment(t){return this.Za.NC(t),this.chart.us.xs(),this}getPointAlignment(){return this.Za.GC()}setPointFillStyle(t){this.ke="function"==typeof t?t(this.ke):t;const i=this.ke;return this.Za.md(i),this.Ds.xs(),this}getPointFillStyle(){return this.ke}setPointSize(t){return this.qx=t,this.Za.wd(t),this.Ds.xs(),this}getPointSize(){return this.qx}setPointShape(t){return this.Za.Sd(t),this.chart.us.xs(),this}getPointShape(){return this.Za.bd()}setPointRotation(t){return this.Ma=t,this.Za.xd(t),this.Ds.xs(),this}getPointRotation(){return this.Ma}nv(){return this.lv&&this.Xx.length>0&&this.getVisible()}Ee(t,i){t.cs(i),this.Ds.xs()}Le(){if(this.jx||this.scale.Kx()){const t=wu(this.Xx,this.scale),i=As(t);this.gd.clear().add(t),this.Za.qo(i),this.jx=!1,this.Za.Es()}}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke})}Is(){return this._s||this.getPointShape()}}class ld{constructor(t,i,e,h){this.L=new s,this.iT=!1,this.re=t,this.sT=i,this.Bv=e,this.Za=h}setGeometry(t){return this.eT=t,this.iT=!0,this.re.us.xs(),this}getGeometry(){return this.eT}setMouseInteractions(t){return this.Za.setMouseInteractions(t),this}dispose(){return this.Za.dispose(),this.sT(this),this.L.emit("dispose",this),this}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setVisible(t){const i=this.Za.getVisible()!==t;return this.Za.setVisible(t),i&&this.L.emit("visibleStateChanged",this,t),this.re.us.xs(),this}getVisible(){return this.Za.getVisible()}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}}class ud extends _u{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.ws="Polygon Series",this.hT=[],this.rT=[],this.nT=t=>{const i=this.rT.indexOf(t);i>=0&&this.rT.splice(i,1);const s=this.hT.findIndex((i=>i===t.Za));s>=0&&this.hT.splice(s,1),this.Ds.xs()},this.ke=Ii(this.qi.polarPolygonSeriesFillStyle,r),this.Te=Ii(this.qi.polarPolygonSeriesStrokeStyle,r)}solveNearest(t,i){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=Nu(e,this.hT,((t,i)=>{const s=t.Kc(i);if(s)return At(s,this.scale,t.us.ft)}),us);if(!h)return;const r=At(h[0],h[1].us.ft,this.scale);if(!this.oT(h[1]))return;const n=Tu(r,this.scale);return{cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this,...n}}Ji(t,i){return ji({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}addPolygon(){const t=new ld(this.chart,this.nT,this,this.aT());return this.rT.push(t),t}setFillStyle(t){this.ke="function"==typeof t?t(this.ke):t;const i=this.ke;for(const t of this.hT)t.De(i);return this.Ds.xs(),this}getFillStyle(){return this.ke}setStrokeStyle(t){this.Te="function"==typeof t?t(this.Te):t;const i=this.Te;for(const t of this.hT)t.Pe(i);return this.Ds.xs(),this}getStrokeStyle(){return this.Te}nv(){return this.lv&&void 0!==this.rT.find((t=>void 0!==t.lT))&&this.getVisible()}Le(){this.rT.forEach((t=>{(t.iT||this.scale.Kx())&&t.uT&&(t.Za.wl(wu(t.uT,this.scale)),t.iT=!1,t.Za.Es())}))}pv(){super.pv();const t=c(Ki,qi);this.rT.forEach((i=>{if(!i.eT)return;const s=!i.iT&&i.uT?i.uT:ku(i.eT);i.uT=s;const e=!i.iT&&i.lT?i.lT:Cu(s);i.lT=e,t.min=Math.min(t.min,e.min),t.max=Math.max(t.max,e.max)})),this.Wx=t}Ee(t,i){t.cs(i),this.Ds.xs()}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke,stroke:this.Te})}aT(){const t=this.Ds.ac(this.scale,Pr.Simple).De(this.ke).Pe(this.Te).cs(this.getHighlight());return this.hT.push(t),this.fs(t),t}oT(t){return this.rT.find((i=>i.Za===t))}}class cd extends _u{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.ws="Area Series",this.Xx=[],this.jx=!1,this.Zx=!1,this.cT=!1,this.ke=Ii(this.qi.polarAreaSeriesFillStyle,r),this.Te=Ii(this.qi.polarAreaSeriesStrokeStyle,r)}setData(t){0!==this.Xx.length&&this.chart.us.jn(Vo.kf);const i=(t=>{const i=[];let s,e,h=!1;for(let r=0;r<t.length;r+=1){const n=t[r];let o=!0;if(s){o=!1;const t=n.angle-s.angle;if(Ht(t,0))o=!0;else{const i=Math.sign(t);void 0===e?(e=i,o=!0):e===i&&(o=!0)}}o?i.push(n):h=!0,s=n}return{progressivePoints:i,userDataModified:h}})(t);return i.userDataModified&&!1===this.cT&&(console.warn(`${this.ws} setData data format is faulty. Consecutive 'angle' values should progress in the same direction! Invalid data points have been removed.`),this.cT=!0),this.Xx=i.progressivePoints,this.jx=!0,this.Wx=Cu(this.Xx),this.Ds.xs(),this}setFillStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.Ds.xs(),this}getFillStyle(){return this.ke}setStrokeStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.Ds.xs(),this}getStrokeStyle(){return this.Te}setConnectDataAutomaticallyEnabled(t){return this.Zx=t,this.Ds.xs(),this}getConnectDataAutomaticallyEnabled(){return this.Zx}nv(){return this.lv&&this.Xx.length>0&&this.getVisible()}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke,stroke:this.Te})}}class dd extends cd{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.dT=this.Ds.ac(this.scale,Pr.Simple).cs(this.getHighlight()),this.fs(this.dT)}solveNearest(t,i){const s=this.chart.us.Oo(t),e={x:s.engineX,y:s.engineY},h=this.dT.Kc(e);if(!h)return;const r=Tu(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Ji(t,i){return ji({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}Le(){if(this.jx||this.scale.Kx()){const t=this.Xx,i=!0===this.Zx?wu(t.concat((t=>{if(0===t.length)return t;const i=t[0],s=t[t.length-1];if(Ht(i.angle,s.angle))return t;const e=1*Math.sign(s.angle-i.angle);let h=0;const r=[];for(let t=s.angle+e;!Ht(t%360,i.angle%360);t+=e)if(r.push({angle:t,amplitude:0}),h+=1,h>360)return[];for(let t=0;t<r.length;t+=1)r[t].amplitude=un(s.amplitude,i.amplitude,(t+1)/(r.length+1));return r})(t)),this.scale):[...wu(t,this.scale),{x:0,y:0}];this.dT.wl(i).De(this.ke).Pe(this.Te),this.jx=!1,this.dT.Es()}}Ee(t,i){t.cs(i),this.Ds.xs()}}class fd extends Js{constructor(){super(...arguments),this.Ni="RadialScale",this.fT={start:0,end:1},this.AT=!1,this.gT=0,this.j=n(0,0),this.yT=[0,0],this.mT=[0,0],this.o=!0,this.vi=!0,this.pT=!0,this.vT=!0,this.ST={x:0,y:0},this.ci={x:{displacement:0,scaling:0,highPrecisionOffset:0},y:{displacement:0,scaling:0,highPrecisionOffset:0}}}Tx(t,i){return t===this.fT.start&&i===this.fT.end||(this.fT={start:t,end:i},this.pT=!0,this.bT()),this}kx(){return this.fT}Cx(){return this.fT.end>=this.fT.start}Rx(t){this.AT=t,this.vT=!0}zx(){return!1===this.AT}Ex(t){this.gT=t,this.vT=!0}Dx(){return this.gT}yi(){return this.vi}Mi(){return!1}ut(t,i,s,e){return this.x=new Zs(t.x,i.x,s.x,e?e.x:void 0),this.y=new Zs(t.y,i.y,s.y,e?e.y:void 0),this}mi(){return this.ci}Kx(){return this.pT}xT(){return this.vT}Gi(){return this.ST}Z(){return this.o=!1,this.vi=!1,this.pT=!1,this.vT=!1,this}J(){return this.o=!0,this.vi=!0,this.pT=!0,this.vT=!0,this}tt(t,i){return"object"==typeof t?(this.j.x=t.x,this.j.y=t.y):(this.j.x=t,this.j.y=i),this.bT(),this}Ri(t){return this.yT=t,this.bT(),this}Ei(t){return this.mT=t,this.bT(),this}ri(){return n(this.yT[0]+this.yT[1],this.mT[0]+this.mT[1])}ni(){return this.j}bT(){const t=this.fT,i=n(this.x.oi(this.j.x),this.y.oi(this.j.y)),s=this.yT[0]+this.yT[1],e=this.mT[0]+this.mT[1],h=Math.max(i.x-s,0),r=Math.max(i.y-e,0),o=.5*(h>r?r:h),a=[this.yT[0]+Math.max((h-2*o)/2,0),this.yT[1]+Math.max((h-2*o)/2,0)],l=[this.mT[0]+Math.max((r-2*o)/2,0),this.mT[1]+Math.max((r-2*o)/2,0)],u=Math.abs(t.end-t.start);this.x.tt(this.j.x).ii(a).K(-u,u),this.y.tt(this.j.y).ii(l).K(-u,u),this.ST={x:this.x.getPixelSize(),y:this.y.getPixelSize()},this.ci={x:this.x.mi(),y:this.y.mi()},this.J()}gi(t,i){const s=this.Gi();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}Wi(t,i,s,e){const h=this.Gi(),r=xs(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class Ad extends Nl{constructor(t,i,s,e,h,r,n){super(t,i,s,i.Py("polarChart bg",0),e,i.us.qi.polarChartBackgroundFillStyle,i.us.qi.polarChartBackgroundStrokeStyle,i.us.qi.polarChartTitleFont,i.us.qi.polarChartTitleFillStyle,n),this.coordsClient="client",this.hA=[],this.Go=!0,this.MT=(t,i,s,e,h)=>{this.ux.tt(e,h)},this.aA=yi(this.hA),this._T=t=>{this.hA.push(t)},this.wT=()=>this.Bv,this.us.jn(Vo.pf),this.Ik=i.pb("polarChart series bg",0),this.CT=i.jm("polarChart axis gridlines",0),this.kT=i.jm("polarChart series",1),this.TT=i.jm("polarChart axis lines",2),this.FT=i.jm("polarChart axis ticks",3),this.ux=s.d2({scaleXYConstructor:fd}),this.onResize(this.MT),this.bh.yr("Polar Chart"),this.Vv=this.Ik.rd(this.ux).De(this.qi.polarChartSeriesBackgroundFillStyle).Pe(at).uu(0).Ue(360).Au(0),this.Ov=this.Ik.rd(this.ux).De(O).Pe(this.qi.polarChartSeriesBackgroundStrokeStyle).uu(0).Ue(360).Au(0),super.zv(this.Vv,this.Ov),this.Iy(h,this.mg),this.IT=new gu(this,this.ux,this.qi,!1!==(null==r?void 0:r.animationsEnabled),this.CT,this.TT,this.FT,this.es,this.wT),this.PT=new mu(this,this.ux,this.qi,!1!==(null==r?void 0:r.animationsEnabled),this.CT,this.TT,this.FT,this.es),this.coordsAxis={axisAmplitude:this.IT,axisRadial:this.PT};const o=i.Qm(),a=jt(r?r.cursorBuilder:void 0,il);this.Jm=Va(this,o,a.pm(o,this.uiScale,this.uiScale,Yt,this.qi),this,"show-nearest",yd,((t,i)=>{const s=this.translateCoordinate(t,this.coordsClient);return Math.sqrt((s.clientX-i.clientX)**2+(s.clientY-i.clientY)**2)})),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled))}getSeries(){return this.Bv}setCursor(t){return this.Jm.setCursor(t),this}getCursor(){return this.Jm.getCursor()}setCursorMode(t){return this.Jm.setCursorMode(t),this}getCursorMode(){return this.Jm.getCursorMode()}setCustomCursor(t){return this.Jm.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.Jm.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.Jm.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Jm.setCursorFormatting(t),this}getCursorFormatting(){return this.Jm.getCursorFormatting()}solveNearest(t,i=this.getCursorMode()||"show-nearest"){return this.Jm.solveNearest(t,i,this.Bv,((t,i,s)=>t.solveNearest(i,s)))}addCursor(t=il){const i=this.vy(),s=t.pm(i,this.uiScale,this.uiScale,this.Ay(i),this.qi);return this.ky(s),s}translateCoordinate(t,i,s){if(s){const i=t,e=this.mg,h=s;if(ie(h)){const t=At(i,e,this.us.ft);return this.us.No({engineX:t.x,engineY:t.y})}if(ee(h))return i;if(Su(h)){const t=At(i,e,this.ux);return Tu(t,this.ux)}}else{const s=t,e=i;if(se(s)){if(Su(e)){const t=this.us.Oo(s),i=At({x:t.engineX,y:t.engineY},this.us.ft,this.ux);return Tu(i,this.ux)}if(ie(e))return s;if(ee(e)){const t=this.us.Oo(s);return At({x:t.engineX,y:t.engineY},this.us.ft,this.mg)}}else if(bu(s)){if(Su(e))return s;const t=wu([s],this.ux)[0];if(ie(e)){const i=At(t,this.ux,this.us.ft),s={engineX:i.x,engineY:i.y};return this.us.No(s)}if(ee(e))return At(t,this.ux,this.mg)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addLineSeries(t){const i=new Iu(this.kT,this,this.Rv,this.ux,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,this.us.es);return this.Nv(i),i}addPointSeries(t){const i=new ad(this.kT,this,this.Rv,this.ux,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,this.us.es);return this.Nv(i),i}addPointLineSeries(t){const i=new Pu(this.kT,this,this.Rv,this.ux,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,this.us.es);return this.Nv(i),i}addAreaSeries(t){const i=new dd(this.kT,this,this.Rv,this.ux,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,this.us.es);return this.Nv(i),i}addPolygonSeries(t){const i=new ud(this.kT,this,this.Rv,this.ux,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,this.us.es);return this.Nv(i),i}addHeatmapSeries(t){const i=new Fu(this.kT,this,this.Rv,this.ux,this.qi,this.us.es,t);return this.Nv(i),i}addSector(){const t=new xu(this.kT,this,this.aA,this.ux,this.qi,this.us.es);return this._T(t),t}getAmplitudeAxis(){return this.IT}get amplitudeAxis(){return this.IT}get axisAmplitude(){return this.IT}getRadialAxis(){return this.PT}get radialAxis(){return this.PT}get axisRadial(){return this.PT}Le(t){var i,s;super.Le(t),Ra.Oy(this.bh,this.Dy);for(const t of this.Bv)t.pv();this.IT.Dr(),this.PT.Dr();for(const t of this.Bv)t.Le();for(let t=1;t<=2;t+=1){const i=this.IT.Le(),s=this.PT.Le(),e=Ra.Vy(this.bh,this.Dy),h=[this.Ca.left+s,this.Ca.right+s],r=[this.Ca.bottom+s,this.Ca.top+s+e];this.ux.Ri(h).Ei(r);const n=4;if(!(!this.DT||Math.abs(this.DT.amplitude-i)>=n||Math.abs(this.DT.radial-s)>=n)||1!==t){this.DT={amplitude:i,radial:s};break}}const e=this.ux.kx().start,h=this.ux.kx().end,r=this.ux.Cx()?((null===(i=this.DT)||void 0===i?void 0:i.radial)||0)*this.ux.x.getPixelSize()+h-e:((null===(s=this.DT)||void 0===s?void 0:s.radial)||0)*this.ux.x.getPixelSize()+e-h;this.Vv.cu(r).gu(360),this.Ov.cu(r).gu(360);for(const t of this.hA)t.Le();this.Jm.Le(!1,this.Bv,((t,i,s)=>t.solveNearest(i,s)));for(const t of this.Bv)t.xp();return super.Fy(),this.BT(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.IT.setAnimationsEnabled(t),this.PT.setAnimationsEnabled(t),this}setMouseInteractions(t){return this.Go=t,this}getMouseInteractions(){return this.Go}getMinimumSize(){return n(gd,gd)}BT(){}forEachAxis(t){return t(this.IT),t(this.PT),this}dispose(){return this.hA.slice().forEach((t=>t.dispose())),this.Jm.U(),this.Ik.U(),this.CT.U(),this.kT.U(),this.TT.U(),this.FT.U(),super.dispose()}sf(){return[...this.Bv,...this.hA]}}const gd=300,yd=(t,i,s)=>{var e;return Mt(i)?za(i,[[i.series],["Angle","",{text:i.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:ne(t.getAmplitudeAxis().formatValue(i.amplitude),t.amplitudeAxis),font:{weight:"bold"}}],["Intensity","",{text:ne(i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]]):za(i,[[i.series],["Angle","",{text:i.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:ne(t.getAmplitudeAxis().formatValue(i.amplitude),t.amplitudeAxis),font:{weight:"bold"}}]])};class md extends nl{}class pd extends md{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.ws="Slice",this.S=0,this.vm=!1,this.LT=O,this.bm=O,this.xm=this.S,this.wm=K((()=>this.chart.us.xs())),this.km=()=>{this.Tm=void 0},this.index=t,this.chart=e,this.scale=h,this.Ki=r,this.dT=i.ac(h,Pr.Simple).cs(this.getHighlight()),this.fs(this.dT),this.th=s.Nr(h).cs(this.getHighlight()),this.fs(this.th,{isText:!0})}setValue(t){return this.chart.getAnimationsEnabled()?this.getVisible()&&this.Dm(this.xm,t):this.xm=t,this.S=t,this.chart.us.xs(),this}getValue(){return this.S}setVisible(t){return!1===t?this.chart.getAnimationsEnabled()&&this.xm>0?(this.Tm&&(this.Tm.finish(!1),this.Tm=void 0),this.Dm(this.xm,0,(()=>super.setVisible(!1)))):(this.xm=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.Tm&&(this.Tm.finish(!1),this.Tm=void 0),super.setVisible(!0),this.Dm(this.xm,this.S)):(this.xm=this.S,super.setVisible(!0)),this}Dm(t,i,s){this.Tm=this.wm(300,Q.ease)([[t,i]],(([t])=>{this.xm=t,this.chart.us.xs()})),this.Tm.onEveryAnimationEnd(this.km),s&&this.Tm.onAnimationEnd(s)}setStyle(t,i,s,e){this.LT=t,this.bm=s,this.dT.De(this.LT).Pe(i),this.th.De(this.bm).Zh(e);for(let t=0;t<this.Qi.length;t+=1)this.styleLegendEntry(this.Qi[t])}getAnimatedValue(){return this.xm}Ee(t,i){return t.cs(i),this.chart.us.xs(),this}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.LT,stroke:this.dT.mo()})}}var vd;!function(t){t[t.VariableHeight=0]="VariableHeight",t[t.VariableWidth=1]="VariableWidth"}(vd||(vd={}));const Sd=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},bd=(t,i,s,e,h,r=0,n=vd.VariableHeight,o)=>{i=Sd(i,e.x),s=Sd(s,e.x);const a=t.length;let l=0,u=0;l=t.reduce(((t,i)=>t+i.getAnimatedValue()),0);let c={x:o-i/2,y:e.y+h.bottom},d={x:o+i/2,y:e.y+h.bottom},f={x:0,y:h.bottom},A={x:0,y:h.bottom},g=0,y=0;if(r)for(let i=0;i<t.length;i+=1){const s=10;y+=t[i].getAnimatedValue();const o=n===vd.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-y/l*e.y;if(n===vd.VariableWidth){r=o-r<s?Math.max(20,o-s):r;break}0!==g&&g-o-r<s&&(r=Math.max(0,g-o-s)),g=o}const m=(i-s)/2/e.y;for(let g=0;g<a;g+=1){const y=t[g];u+=y.getAnimatedValue();const p=n===vd.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-u/l*e.y;let v=0;g>0&&(c={x:f.x+m*r,y:f.y-r},d={x:A.x-m*r,y:A.y-r}),v=(i+u/l*(s-i))/2,f={x:o-v,y:parseInt(`${n===vd.VariableWidth?c.y-p:p}`,10)},A={x:o+v,y:parseInt(`${n===vd.VariableWidth?d.y-p:p}`,10)},d.x>=c.x&&A.x>f.x&&y.dT.wl([f,c,d,A])}};class xd extends La{constructor(t,i,s,e,h,r,n){super(t,i,s,i.Py("funnelChart bg",0),e,i.us.qi.funnelChartBackgroundFillStyle,i.us.qi.funnelChartBackgroundStrokeStyle,i.us.qi.funnelChartTitleFont,i.us.qi.funnelChartTitleFillStyle,r),this.Bm=[],this.Lm=hl.None,this.zm=!0,this.Nm=0,this.RT=80,this.ET=20,this.zT=0,this.VT=vd.VariableHeight,this.Um=!0,this.Hm=t=>{const i=this.Bm.indexOf(t);i>=0&&(this.Bm.splice(i,1),this.$m())},this.us.jn(Vo.gf),this.Ym=this.qi.effectsText,this.Xm=i.jm("funnelChart bottom",0),this.Zm=i.jm("funnelChart top",1),this.bh.yr("Funnel Chart"),this.Rm=this.qi.funnelChartSliceFillStylePalette,this.Em=this.qi.funnelChartSliceStrokeStyle,this.Vm=this.qi.funnelChartSliceLabelFont,this.Om=this.qi.funnelChartSliceLabelFillStyle;const o=i.Qm(),a=jt(n?n.cursorBuilder:void 0,qa);this.Jm=Va(this,o,a.pm(o,this.uiScale,this.uiScale,Yt,this.qi),void 0,"show-pointed",Md,(()=>0)),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled)),this.Iy(h,this.mg)}setCursor(t){return this.Jm.setCursor(t),this}getCursor(){return this.Jm.getCursor()}setCursorMode(t){return this.Jm.setCursorMode(t),this}getCursorMode(){return this.Jm.getCursorMode()}setCustomCursor(t){return this.Jm.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.Jm.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.Jm.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Jm.setCursorFormatting(t),this}getCursorFormatting(){return this.Jm.getCursorFormatting()}addCursor(t=qa){const i=this.vy(),s=t.pm(i,this.uiScale,this.uiScale,this.Ay(i),this.qi);return this.ky(s),s}addSlice(t,i){const s=new pd(this.Nm,this.Xm,this.Zm,this,this.mg,this.Hm,this.qi,this.us.es);return this.Nm+=1,s.setName(t),s.setValue(i),s.es.rs.bs(this.Ym),s.es.ns.bs(this.Um),this.Bm.push(s),this.us.xs(),s.setHighlightOnHover(this.zm),s.onMouseMove((()=>{this.getCursorMode()&&this.us.xs()})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Bm}setHeadWidth(t){return this.RT=t,this.us.xs(),this}getHeadWidth(){return this.RT}setNeckWidth(t){return this.ET=t,this.us.xs(),this}getNeckWidth(){return this.ET}setSliceGap(t){return this.zT=Math.min(Math.max(t,0),20),this.us.xs(),this}setSliceMode(t){return this.VT=t,this.us.xs(),this}getFunnelSliceMode(){return this.VT}setLUT(t){return this.Xd=t,this.us.xs(),this}setSliceFillStyle(t){return this.Rm=t,this.us.xs(),this}getSliceFillStyle(){return this.Rm}setSliceStrokeStyle(t){return this.Em="function"==typeof t?t(this.Em):t,this.us.xs(),this}getSliceStrokeStyle(){return this.Em}setSliceEffect(t){return this.Um=t,this.Bm.forEach((i=>i.es.ns.bs(t))),this.us.xs(),this}getSliceEffect(){return this.Um}setSliceSorter(t){return this.Lm=t,this.Bm=this.Bm.sort(this.Lm),this.us.xs(),this}getSliceSorter(){return this.Lm}setLabelFillStyle(t){return this.Om="function"==typeof t?t(this.Om):t,this.us.xs(),this}getLabelFillStyle(){return this.Om}setLabelFont(t){return this.Vm="function"==typeof t?t(this.Vm):t,this.us.xs(),this}getLabelFont(){return this.Vm}setLabelEffect(t){return this.Ym=t,this.Bm.forEach((i=>i.es.rs.bs(t))),this.us.xs(),this}getLabelEffect(){return this.Ym}setLabelFormatter(t){return this.qm=t,this.us.xs(),this}getLabelFormatter(){return this.qm}setSliceHighlightOnHover(t){return this.zm=t,this.Bm.forEach((i=>i.setHighlightOnHover(t))),this}Le(t){super.Le(t),Ra.Oy(this.bh,this.Dy),super.Fy();const i=Ra.Vy(this.bh,this.Dy),s=n(this.mg.x.getInnerInterval()-(this.Ca.left+this.Ca.right),this.mg.y.getInnerInterval()-(this.Ca.bottom+this.Ca.top+i)),e=n(this.Ca.left+s.x/2,this.Ca.bottom+s.y/2);this.Bm=this.Bm.sort(this.Lm);for(let t=0,{length:i}=this.Bm;t<i;t+=1)this.Km(this.Bm[t],t);const h=this.Bm.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/r:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.th.yr(this.qm(i,o[t])).Es()}o.push(r),this.Jm.Le(!1,this.Bm,((t,i,s)=>{const e=o[h.indexOf(t)]||0,r=this.us.Oo(i);return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.us.ft,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.us.ft},slice:t,category:t.getName(),value:t.getValue(),relativeValue:e}})),this.tp(h,o,e,s)}Km(t,i){t.setStyle(this.Xd?new U({color:this.Xd.getColors(t.getAnimatedValue())}):this.Rm(i,t),this.Em,this.Om,this.Vm)}$m(){this.Bm=this.Bm.sort(this.Lm),this.us.xs()}sf(){return this.Bm}dispose(){return this.Bm.slice().forEach((t=>t.dispose())),this.Jm.U(),this.Xm.U(),this.Zm.U(),super.dispose()}}const Md=(t,i,s)=>[[i.slice],[{text:i.value.toString(),font:{weight:"bold"}}]],_d=(t,i,s)=>{const e=t.Cl();if(e.length>0){let t;const h=(e[1].y-e[0].y)/2+e[0].y;return t=i===Fd.Left?(e[0].x-e[1].x)/2+e[1].x-s:(e[2].x-(4===e.length?e[3].x:e[1].x))/2+(4===e.length?e[3].x:e[1].x)+s,{x:t,y:h}}},wd=t=>{const i=t.Cl();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class Cd extends xd{constructor(){super(...arguments),this.qm=rl.NamePlusValue,this.OT=10,this.NT=Fd.Left,this.GT=el.LabelsOnSides,this.ip=[],this.rp=this.qi.funnelChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.rp=t;for(let t=0;t<this.ip.length;t+=1)this.ip[t].Ge(this.rp);return this.us.xs(),this}getLabelConnectorStyle(){return this.rp}setLabelConnectorGap(t){return this.OT=t,this.us.xs(),this}getLabelConnectorGap(){return this.OT}setLabelSide(t){return this.NT=t,this.us.xs(),this}getLabelSide(){return this.NT}tp(t,i,s,e){const h=e.x+this.Ca.left+this.Ca.right,r=e.y+this.Ca.top+this.Ca.bottom<250||h<250,o=this.OT;let a,l=0;if(!r)for(let i=0;i<t.length;i+=1)l=Math.max(l,t[i].th.ni().x);a=r?h/2:this.NT===Fd.Right?(this.Ca.left+(h-(this.Ca.right+l)))/2:(this.Ca.left+l+(h-this.Ca.right))/2;const u=e.x-l,c=n(u,e.y);if(bd(t,this.RT,this.ET,c,this.Ca,this.zT,this.VT,a),r)return t.forEach((t=>t.th.setVisible(!1))),void this.ip.forEach((t=>t.setVisible(!1)));this.WT(t,this.NT===Fd.Left?-1:1,-1,s,e);for(let t=0;t<this.ip.length;t+=1)this.ip[t].setVisible(!1);for(let i=0;i<t.length;i+=1)t[i].getVisible()&&this.np(this.UT(t[i],-1,s,o))}getMinimumSize(){return n(500,300)}WT(t,i,s,e,h){if(0===t.length)return;const r=e.x+i*h.x*.5,o=1===s?Math.max:Math.min;let a;for(let e=0;e<t.length;e+=1){const h=t[e];if(0===h.dT.Cl().length)h.th.setVisible(!1);else{let t;h.th.setVisible(!0),a&&(t=a.th.Va().y+s*(a.th.ni().y+10));const e=(_d(h.dT,this.NT,0)||n(0,0)).y,l=void 0===t?e:o(e,t);h.th.Re(n(r,l)).Ga(i).Ua(0),a=h}}}UT(t,i,s,e){const h=t.dT,r=t.th,o=_d(h,this.NT,e);if(o){const t={x:Ps(this.NT===Fd.Left?r.Va().x-i*(e+r.ni().x):r.Va().x+i*(e+r.ni().x),o,s).x,y:Ds(r.Va().y,o,s).y};return[o,t,n(this.NT===Fd.Left?r.Va().x-i*(e+r.ni().x):r.Va().x+i*(e+r.ni().x),t.y)]}}np(t){if(t){let i;for(let t=0;t<this.ip.length;t+=1)if(!this.ip[t].getVisible()){i=this.ip[t].setVisible(!0);break}void 0===i&&(i=this.Zm.op(this.mg,void 0,[gl.InternalUI]).Ge(this.rp),this.ip.push(i)),i.Vt().fl(t)}}}class kd extends xd{constructor(){super(...arguments),this.qm=rl.Name,this.GT=el.LabelsInsideSlices}tp(t,i,s,e){const h=this.Ca.left+e.x/2;bd(t,this.RT,this.ET,e,this.Ca,this.zT,this.VT,h);for(let i=0;i<t.length;i+=1){const s=t[i],e=s.dT,h=s.th,r=wd(e);r&&h.Re(r).Ga(0).Ua(0)}}getMinimumSize(){return n(200,200)}}const Td={LabelsOnSides:Cd,LabelsInsideSlices:kd};var Fd,Id;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(Fd||(Fd={}));class Pd extends nl{}class Dd extends Pd{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.ws="Slice",this.S=0,this.vm=!1,this.LT=O,this.bm=O,this.xm=this.S,this.wm=K((()=>this.chart.us.xs())),this.km=()=>{this.Tm=void 0},this.index=t,this.chart=e,this.scale=h,this.Ki=r,this.dT=i.ac(h,Pr.Simple).cs(this.getHighlight()),this.fs(this.dT),this.th=s.Nr(h).cs(this.getHighlight()),this.fs(this.th,{isText:!0})}setValue(t){return this.chart.getAnimationsEnabled()?this.getVisible()&&this.Dm(this.xm,t):this.xm=t,this.S=t,this.chart.us.xs(),this}getValue(){return this.S}setVisible(t){return!1===t?this.chart.getAnimationsEnabled()&&this.xm>0?(this.Tm&&(this.Tm.finish(!1),this.Tm=void 0),this.Dm(this.xm,0,(()=>super.setVisible(!1)))):(this.xm=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.Tm&&(this.Tm.finish(!1),this.Tm=void 0),super.setVisible(!0),this.Dm(this.xm,this.S)):(this.xm=this.S,super.setVisible(!0)),this}Dm(t,i,s){this.Tm=this.wm(300,Q.ease)([[t,i]],(([t])=>{this.xm=t,this.chart.us.xs()})),this.Tm.onEveryAnimationEnd(this.km),s&&this.Tm.onAnimationEnd(s)}setStyle(t,i,s,e){this.LT=t,this.bm=s,this.dT.De(this.LT).Pe(i),this.th.De(this.bm).Zh(e);for(let t=0;t<this.Qi.length;t+=1)this.styleLegendEntry(this.Qi[t])}getAnimatedValue(){return this.xm}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.LT,stroke:this.dT.mo()})}}!function(t){t[t.VariableHeight=0]="VariableHeight",t[t.VariableWidth=1]="VariableWidth"}(Id||(Id={}));const Bd=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},Ld=(t,i,s,e,h,r=0,n=Id.VariableHeight,o)=>{i=Bd(i,e.x),s=Bd(s,e.x);const a=t.length;let l=0,u=0;l=t.reduce(((t,i)=>t+i.getAnimatedValue()),0);let c={x:o-i/2,y:e.y+h.bottom},d={x:o+i/2,y:e.y+h.bottom},f={x:0,y:h.bottom},A={x:0,y:h.bottom},g=0,y=0;if(r)for(let i=0;i<t.length;i+=1){const s=10;y+=t[i].getAnimatedValue();const o=n===Id.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-y/l*e.y;if(n===Id.VariableWidth){r=o-r<s?Math.max(20,o-s):r;break}0!==g&&g-o-r<s&&(r=Math.max(0,g-o-s)),g=o}const m=(i-s)/2/e.y;for(let g=0;g<a;g+=1){const y=t[g];u+=y.getAnimatedValue();const p=n===Id.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-u/l*e.y;let v=0;g>0&&(c={x:f.x+m*r,y:f.y-r},d={x:A.x-m*r,y:A.y-r}),v=(i+u/l*(s-i))/2,f={x:o-v,y:parseInt(`${n===Id.VariableWidth?c.y-p:p}`,10)},A={x:o+v,y:parseInt(`${n===Id.VariableWidth?d.y-p:p}`,10)},d.x>=c.x&&A.x>=f.x&&y.dT.wl([f,c,d,A])}};class Rd extends La{constructor(t,i,s,e,h,r,n){super(t,i,s,i.Py("pyramidChart bg",0),e,i.us.qi.pyramidChartBackgroundFillStyle,i.us.qi.pyramidChartBackgroundStrokeStyle,i.us.qi.pyramidChartTitleFont,i.us.qi.pyramidChartTitleFillStyle,r),this.Bm=[],this.Lm=hl.None,this.Rm=this.qi.pyramidChartSliceFillStylePalette,this.Em=this.qi.pyramidChartSliceStrokeStyle,this.zm=!0,this.Vm=this.qi.pyramidChartSliceLabelFont,this.Om=this.qi.pyramidChartSliceLabelFillStyle,this.Nm=0,this.RT=0,this.ET=80,this.zT=0,this.VT=Id.VariableHeight,this.Um=!0,this.Hm=t=>{const i=this.Bm.indexOf(t);i>=0&&(this.Bm.splice(i,1),this.$m())},this.us.jn(Vo.gf),this.Ym=this.qi.effectsText,this.Xm=i.jm("pyramidChart bottom",0),this.Zm=i.jm("pyramidChart top",1),this.bh.yr("Pyramid Chart");const o=i.Qm(),a=jt(n?n.cursorBuilder:void 0,qa);this.Jm=Va(this,o,a.pm(o,this.uiScale,this.uiScale,Yt,this.qi),void 0,"show-pointed",Ed,(()=>0)),this.Iy(h,this.mg),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled))}setCursor(t){return this.Jm.setCursor(t),this}getCursor(){return this.Jm.getCursor()}setCursorMode(t){return this.Jm.setCursorMode(t),this}getCursorMode(){return this.Jm.getCursorMode()}setCustomCursor(t){return this.Jm.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.Jm.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.Jm.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Jm.setCursorFormatting(t),this}getCursorFormatting(){return this.Jm.getCursorFormatting()}addCursor(t=qa){const i=this.vy(),s=t.pm(i,this.uiScale,this.uiScale,this.Ay(i),this.qi);return this.ky(s),s}addSlice(t,i){const s=new Dd(this.Nm,this.Xm,this.Zm,this,this.mg,this.Hm,this.qi,this.us.es);return this.Nm+=1,s.setName(t),s.setValue(i),s.es.rs.bs(this.Ym),s.es.ns.bs(this.Um),this.Bm.push(s),this.us.xs(),s.onMouseMove((()=>{this.getCursorMode()&&this.us.xs()})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Bm}setNeckWidth(t){return this.ET=t,this.us.xs(),this}getNeckWidth(){return this.ET}setSliceGap(t){return this.zT=Math.min(Math.max(t,0),20),this.us.xs(),this}setSliceMode(t){return this.VT=t,this.us.xs(),this}getPyramidSliceMode(){return this.VT}setLUT(t){return this.Xd=t,this.us.xs(),this}setSliceFillStyle(t){return this.Rm=t,this.us.xs(),this}getSliceFillStyle(){return this.Rm}setSliceStrokeStyle(t){return this.Em="function"==typeof t?t(this.Em):t,this.us.xs(),this}getSliceStrokeStyle(){return this.Em}setSliceEffect(t){return this.Um=t,this.Bm.forEach((i=>i.es.ns.bs(t))),this.us.xs(),this}getSliceEffect(){return this.Um}setSliceSorter(t){return this.Lm=t,this.Bm=this.Bm.sort(this.Lm),this.us.xs(),this}getSliceSorter(){return this.Lm}setLabelFillStyle(t){return this.Om="function"==typeof t?t(this.Om):t,this.us.xs(),this}getLabelFillStyle(){return this.Om}setLabelFont(t){return this.Vm="function"==typeof t?t(this.Vm):t,this.us.xs(),this}getLabelFont(){return this.Vm}setLabelEffect(t){return this.Ym=t,this.Bm.forEach((i=>i.es.rs.bs(t))),this.us.xs(),this}getLabelEffect(){return this.Ym}setLabelFormatter(t){return this.qm=t,this.us.xs(),this}getLabelFormatter(){return this.qm}setSliceHighlightOnHover(t){return this.zm=t,this.Bm.forEach((i=>i.setHighlightOnHover(t))),this}Le(t){super.Le(t),Ra.Oy(this.bh,this.Dy),super.Fy();const i=Ra.Vy(this.bh,this.Dy),s=n(this.mg.x.getInnerInterval()-(this.Ca.left+this.Ca.right),this.mg.y.getInnerInterval()-(this.Ca.bottom+this.Ca.top+i)),e=n(this.Ca.left+s.x/2,this.Ca.bottom+s.y/2);this.Bm=this.Bm.sort(this.Lm);for(let t=0,{length:i}=this.Bm;t<i;t+=1)this.Km(this.Bm[t],t);const h=this.Bm.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/r:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.th.yr(this.qm(i,o[t])).Es()}o.push(r),this.Jm.Le(!1,this.Bm,((t,i,s)=>{const e=o[h.indexOf(t)]||0,r=this.us.Oo(i);return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.us.ft,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.us.ft},slice:t,category:t.getName(),value:t.getValue(),relativeValue:e}})),this.tp(h,o,e,s)}Km(t,i){t.setStyle(this.Xd?new U({color:this.Xd.getColors(t.getAnimatedValue())}):this.Rm(i,t),this.Em,this.Om,this.Vm)}$m(){this.Bm=this.Bm.sort(this.Lm),this.us.xs()}sf(){return this.Bm}dispose(){return this.Bm.slice().forEach((t=>t.dispose())),this.Jm.U(),this.Xm.U(),this.Zm.U(),super.dispose()}}const Ed=(t,i,s)=>[[i.slice],[{text:i.value.toString(),font:{weight:"bold"}}]],zd=(t,i,s)=>{const e=t.Cl();if(e.length>0){let t;const h=(e[1].y-e[0].y)/2+e[0].y;return t=i===Wd.Left?(e[0].x-e[1].x)/2+e[1].x-s:(e[2].x-(4===e.length?e[3].x:e[1].x))/2+(4===e.length?e[3].x:e[1].x)+s,{x:t,y:h}}},Vd=t=>{const i=t.Cl();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class Od extends Rd{constructor(){super(...arguments),this.qm=rl.NamePlusValue,this.OT=10,this.NT=Wd.Left,this.GT=el.LabelsOnSides,this.ip=[],this.rp=this.qi.pyramidChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.rp=t;for(let t=0;t<this.ip.length;t+=1)this.ip[t].Ge(this.rp);return this.us.xs(),this}getLabelConnectorStyle(){return this.rp}setLabelConnectorGap(t){return this.OT=t,this.us.xs(),this}getLabelConnectorGap(){return this.OT}setLabelSide(t){return this.NT=t,this.us.xs(),this}getLabelSide(){return this.NT}tp(t,i,s,e){const h=e.x+this.Ca.left+this.Ca.right,r=e.y+this.Ca.top+this.Ca.bottom<250||h<250,o=this.OT;let a,l=0;if(!r)for(let i=0;i<t.length;i+=1)l=Math.max(l,t[i].th.ni().x);a=r?h/2:this.NT===Wd.Right?(this.Ca.left+(h-(this.Ca.right+l)))/2:(this.Ca.left+l+(h-this.Ca.right))/2;const u=e.x-l,c=n(u,e.y);if(Ld(t,this.RT,this.ET,c,this.Ca,this.zT,this.VT,a),r)return t.forEach((t=>t.th.setVisible(!1))),void this.ip.forEach((t=>t.setVisible(!1)));this.WT(t,this.NT===Wd.Left?-1:1,-1,s,e);for(let t=0;t<this.ip.length;t+=1)this.ip[t].setVisible(!1);for(let i=0;i<t.length;i+=1)if(t[i].getVisible()){const e=this.UT(t[i],-1,s,o);e&&this.np(e)}}getMinimumSize(){return n(500,300)}WT(t,i,s,e,h){if(0===t.length)return;const r=e.x+i*h.x*.5,o=1===s?Math.max:Math.min;let a;for(let e=0;e<t.length;e+=1){const h=t[e];let l;0===h.dT.Cl().length?h.th.setVisible(!1):h.th.setVisible(!0),a&&(l=a.th.Va().y+s*(a.th.ni().y+10));const u=zd(h.dT,this.NT,0);if(u){const t=u.y,s=void 0===l?t:o(t,l);h.th.Re(n(r,s)).Ga(i).Ua(0)}a=h}}UT(t,i,s,e){const h=t.dT,r=t.th,o=zd(h,this.NT,e);if(o){const t={x:Ps(this.NT===Wd.Left?r.Va().x-i*(e+r.ni().x):r.Va().x+i*(e+r.ni().x),o,s).x,y:Ds(r.Va().y,o,s).y};return[o,t,n(this.NT===Wd.Left?r.Va().x-i*(e+r.ni().x):r.Va().x+i*(e+r.ni().x),t.y)]}}np(t){let i;for(let t=0;t<this.ip.length;t+=1)if(!this.ip[t].getVisible()){i=this.ip[t].setVisible(!0);break}void 0===i&&(i=this.Zm.op(this.mg,void 0,[gl.InternalUI]).Ge(this.rp),this.ip.push(i)),i.Vt().fl(t)}}class Nd extends Rd{constructor(){super(...arguments),this.qm=rl.Name,this.GT=el.LabelsInsideSlices}tp(t,i,s,e){const h=this.Ca.left+e.x/2;Ld(t,this.RT,this.ET,e,this.Ca,this.zT,this.VT,h);for(let i=0;i<t.length;i+=1){const s=t[i].dT,e=t[i].th,h=Vd(s);h&&e.Re(h).Ga(0).Ua(0)}}getMinimumSize(){return n(200,200)}}const Gd={LabelsOnSides:Od,LabelsInsideSlices:Nd};var Wd;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(Wd||(Wd={}));const Ud=(t,i,s,e,h,r)=>(t.alignmentX=(h+Math.PI/2)%(2*Math.PI)<=Math.PI?-1:1,t.alignmentY=h%(2*Math.PI)<=Math.PI?-1:1,t.paddingX=Math.cos(h)*r,t.paddingY=Math.sin(h)*r,t),Yd=(t,i,s,e,h,r,n,o)=>{if(0===i)return t.paddingX=o,t.alignmentX=-1,t};var Hd;!function(t){t[t.Normal=0]="Normal",t[t.Circle=1]="Circle"}(Hd||(Hd={}));class $d{constructor(t,i,e,h,r,n,o,a){this.L=new s,this.YT=t,this.Gr=i,this.scale=e,this.chart=h,this.tag=r,this.axisScale=n,this.HT=o,this.$T=a,this.XT=this.YT.We(this.scale).setMouseInteractions(!1),this.jT=this.Gr.Nr(this.scale).yr(this.tag).setMouseInteractions(!1),this.ZT=this.HT(this,this.YT.op(this.scale,void 0,[gl.InternalUI])).Ge(this.chart.getNibStyle()),this.$T.As([this.jT])}tp(t,i,s,e,h,r,o){const a=i.length,l=i[s>0?s-1:a-1],u=i[s],c=i[s<a-1?s+1:0],d=this.chart.getNibLength();this.XT.Ye(t).Ue(u).Ge(this.chart.getAxisStyle()),this.ZT.Vt().fl(r===Hd.Normal?[ds(u,l,$t(.5*d/Ms(Cs(l,u)),0,1)),u,ds(u,c,$t(.5*d/Ms(Cs(c,u)),0,1))]:((t,i,s,e,h=2)=>{const r=e/s,o=[];for(let a=-e/2;a<=e/2;a+=h){const h=r*(a/e)+i,l=n(t.x+Math.cos(h)*s,t.y+Math.sin(h)*s);o.push(l)}return o})(t,e,h,d)),o?this.jT.setVisible(!0).Re(ws(u,n(o.paddingX,o.paddingY))).Ga(o.alignmentX).Ua(o.alignmentY):this.jT.setVisible(!1)}getLabelSize(){return this.jT.Zh(this.chart.getAxisLabelFont()).De(this.chart.getAxisLabelStyle()).Es().ni()}dispose(){this.XT&&this.XT.dispose(),this.jT&&this.jT.dispose(),this.ZT&&this.ZT.dispose()}}class Xd extends Mu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,a,l,c),this.ws="Spider Series",this.Mu=new Map,this.$i=ue.onHover,this.qx=8,this.Ma=0,this.QT=(()=>{const t=K((()=>{}));let i;return(s,e,h,r)=>{const n=null==r?void 0:r.onStart,o=null==r?void 0:r.onCompleted,a=(null==r?void 0:r.easing)||Q.ease,l=(null==r?void 0:r.durationMs)||1e3;let u;if(i)if(0===i.nextAnimations.length){const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);u=t}else{s=i.nextAnimations.pop().values[0][0];const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);u=t}else u=t(l,a)([[s,e]],(([t])=>{h(t)})),i=u;u.onAnimationEnd((()=>{i=void 0})),n&&u.onAnimationStart(n),o&&u.onAnimationEnd(o)}})(),this.JT={},this.KT={},this._m=this.getVisible(),this.qT=1,this.tF=((t,i)=>{const s=K((()=>{}));let e,h,r=1;return(n,o,a)=>{if(n===h)return;h=n;const l=(null==a?void 0:a.easing)||Q.ease,u=(null==a?void 0:a.durationMs)||1e3;e&&(e.finish(!1),e=void 0),!1===n?o&&r?(e=s(u,l)([[r,0]],(([i])=>{r=i,t(r)})),e.onAnimationEnd((()=>{e=void 0,i(!1)}))):(r=0,i(!1)):o?(i(!0),e=s(u,l)([[r,1]],(([i])=>{r=i,t(r)})),e.onAnimationEnd((()=>{e=void 0}))):(r=1,i(!0))}})((t=>{this.qT=t,this.Ds.us.xs()}),(t=>{super.setVisible(t)})),this.chart=t,this.Ds=i,this.tM=e,this.iF=h,this.vb=r,this.sF=n,this.eF=o,this.scale=s,this.hF=Ii(l.spiderSeriesFillStyle,u),this.rF=Ii(l.spiderSeriesStrokeStyle,u),this.nF=Ii(l.spiderSeriesPointFillStyle,u)}Ji(t,i){const s=this.eF(i);if(void 0!==s&&this.Mu.has(s.tag)){const t=this.Mu.get(s.tag),i=this.sF(s.tag,t);return{cursorPosition:{pointMarker:i,pointMarkerScale:this.scale,resultTable:i,resultTableScale:this.scale},series:this,axis:s.tag,value:t}}}nv(){return this.lv&&this.Mu.size>0&&this.getVisible()}addPoints(...t){this.Mu.size>0&&this.chart.us.jn(Vo.kf),t=t.filter((t=>void 0!==t.axis));for(let i=0;i<t.length;i+=1)this.iF(t[i].axis);if(this.chart.getAnimationsEnabled()&&void 0!==this.JT){const i=new Map;let s;t.forEach((t=>i.set(t.axis,t.value))),this.QT(0,1,(t=>{i.forEach(((i,e)=>{const h=(null==s?void 0:s.get(e))||0;this.Mu.set(e,h+t*(i-h)),this.Ds.us.xs()}))}),{easing:this.JT.easing,durationMs:this.JT.durationMs,onStart:()=>{s=new Map(this.Mu)}})}else for(let i=0;i<t.length;i+=1){const s=t[i].axis;this.Mu.set(s,t[i].value)}return this.Ds.xs(),this}getValue(t,i=!1){const s=this.Mu.get(t),e=this.chart.getOriginValue();if(void 0!==s)return i?e+this.qT*(s-e):s}setAnimationAddPoints(t,i){return this.JT=t?{easing:t,durationMs:i}:void 0,this.Ds.xs(),this}setVisibleStateChangedAnimation(t,i){return this.KT=t?{easing:t,durationMs:i}:void 0,this.Ds.xs(),this}setFillStyle(t){return this.hF="function"==typeof t?t(this.hF):t,this.dT&&(this.dT.De(this.hF),this.Ds.xs()),this}getFillStyle(){return this.hF}setStrokeStyle(t){return this.rF="function"==typeof t?t(this.rF):t,this.dT&&(this.dT.Pe(this.rF),this.Ds.xs()),this}getStrokeStyle(){return this.rF}setPointFillStyle(t){return this.nF="function"==typeof t?t(this.nF):t,this.iM&&(this.iM.De(this.nF),this.Ds.xs()),this}getPointFillStyle(){return this.nF}setPointSize(t){return this.qx=t,this.iM&&this.iM.tt(t),this}getPointSize(){return this.qx}getPointShape(){return this.tM}setPointRotation(t){return this.Ma=t,this.iM&&this.iM.Qh(t),this.Ds.xs(),this}getPointRotation(){return this.Ma}Le(){if(super.Le(),!this.Xi){const t=new Array(this.vb.length),i=this.chart.getOriginValue();for(let s=0;s<this.vb.length;s+=1){const e=this.Mu.get(this.vb[s].tag);t[s]=void 0!==e?this.sF(this.vb[s].tag,i+this.qT*(e-i)):this.sF(this.vb[s].tag,i)}mi(t),t.length>=3&&(this.dT||(this.dT=this.Ds.ac(this.scale,Pr.Simple).Pe(this.rF).De(this.hF).cs(this.getHighlight()),this.fs(this.dT)),this.dT.wl(t),this.iM||(this.iM=this.Ds.Dv(this.scale).tt(this.qx).al(this.tM).Qh(this.Ma).De(this.nF).cs(this.getHighlight()),this.fs(this.iM)),this.iM.Vt().fl(t))}}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.hF,stroke:this.rF})}Is(){return this._s||this.tM}oF(){for(let t=0;t<this.Qi.length;t+=1)Ci(this.Qi[t],this.qi,!1,{fill:this.hF,stroke:this.rF})}Ee(t,i){return t.cs(i),this.Ds.xs(),this}setVisible(t){var i,s;return this._m=t,this.tF(t,this.chart.getAnimationsEnabled()&&void 0!==this.KT,{easing:null===(i=this.KT)||void 0===i?void 0:i.easing,durationMs:null===(s=this.KT)||void 0===s?void 0:s.durationMs}),this}}const jd=(t,i)=>{const s=Math.PI/2-2*t*Math.PI/i;return s>=0?s:s+2*Math.PI},Zd=t=>As(t.jT.qe()),Qd=t=>As(t.qe()),Jd=(t,i,s,e)=>t.Au(0).Re(s).uu(90).Ue(-270).gu(i===Hd.Circle?void 0:e.length),Kd={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},qd={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},tf=()=>{qd.alignmentX=0,qd.alignmentY=0,qd.paddingX=0,qd.paddingY=0};class sf extends Nl{constructor(t,i,s,e,h,r,o){super(t,i,s,i.Py("spiderChart bg",0),e,i.us.qi.spiderChartBackgroundFillStyle,i.us.qi.spiderChartBackgroundStrokeStyle,i.us.qi.spiderChartTitleFont,i.us.qi.spiderChartTitleFillStyle,o),this.Ca=A(20,20,20,20),this.axisScale=dt.d1({scale1DConstructor:Zs,dimension:"x"}).K(0,1),this.vb=[],this.aF=[],this.lF=[],this.uF=nh.expansion,this.cF=!0,this.dF=Yd,this.fF=Ud,this.Go=!0,this.AF=Hd.Normal,this.gF=4,this.yF=this.qi.spiderChartWebStyle,this.mF=this.qi.spiderChartScaleLabelFillStyle,this.pF=this.qi.spiderChartScaleLabelFont,this.vF=5,this.SF=this.qi.spiderChartAxisLabelFillStyle,this.bF=this.qi.spiderChartAxisLabelFont,this.xF=5,this.MF=this.qi.spiderChartAxisStrokeStyle,this._F=this.qi.spiderChartAxisNibStrokeStyle,this.Vf=10,this.wF=A(),this.hasAxis=t=>this.vb.reduce(((i,s)=>i||s.tag===t),!1),this.formatValue=t=>this.axisScale.Pi(t,Xs.Numeric),this.CF=()=>{const t=this.vb.map(Zd).concat(this.lF.map(Qd));return ns(t)},this.kF=()=>this.TF.rd(this.mg).setMouseInteractions(!1),this.FF=t=>t.dispose(),this.IF=()=>this.FA.Nr(this.mg).setMouseInteractions(!1),this.PF=t=>t.dispose(),this.DF=t=>this.formatValue(this.axisScale.getInnerStart()+t*(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart())),this.BF=(t,i)=>{let s,e;const h=()=>{void 0!==this.LF&&this.LF.finish(),s=c(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),e=this.uF,this.uF=void 0},r=(i,e,h,r,o)=>{const a=n(h.x-e.x,e.y-h.y),l=this.vb.findIndex((i=>i===t));if(l>=0&&void 0!==s){const i=jd(l,this.vb.length),e=n(Math.cos(i),Math.sin(i)),h=a.x*e.x+a.y*e.y,r=Ms(Cs(t.XT.Fi(),t.XT.ki())),u=s.min+(s.max-s.min)*Math.max(1+h/r,.01);this.axisScale.K(s.min,u),di(o),this.us.xs()}},o=()=>{if(s=void 0,void 0!==e)if(this.uh){const t=c(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),i=this.RF(),s=e;if(void 0!==i){const e=s.start(t.min,t.max,i.min,i.max),h=s.end(t.min,t.max,i.min,i.max);this.LF=this.uy.us.cn(300,Q.ease)([[0,1]],(([i])=>{this.axisScale.K(t.min+i*(e-t.min),t.max+i*(h-t.max))})),this.LF.onAnimationEnd((()=>{this.LF=void 0,this.uF=s}))}else this.uF=e}else this.uF=e;e=void 0};i.setMouseEnterEventHandler(this.EF).setMouseLeaveEventHandler(this.zF).setMouseDragStartEventHandler(h).setMouseDragEventHandler(((t,i,s,e,h)=>r(0,n(i.clientX,i.clientY),e,0,i))).setMouseDragStopEventHandler(o);const a=Ae(new ye(((t,i,s)=>{this.EF(t),h(),di(s)}),r,((t,i,s,e)=>{this.zF(t),o(),di(e)})));return i.setTouchStartEventHandler(a.onTouchStart).setTouchMoveEventHandler(a.onTouchMove).setTouchEndEventHandler(a.onTouchEnd)},this.VF=t=>{this.cF&&!this.hasAxis(t)&&this.addAxis(t)},this.sF=(t,i)=>{for(const s of this.vb)if(s.tag===t){const t=Math.max(Math.min((i-this.axisScale.getInnerStart())/(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart()),1),0);return ds(s.XT.Fi(),s.XT.ki(),t)}},this.eF=t=>{if(0===this.vb.length)return;const i=Cs(this.translateCoordinate(t,this.coordsRelative),this.vb[0].XT.Fi()),s=Math.atan2(i.y,i.x);let e,h=Ki;for(const t of this.vb){const i=Cs(t.XT.ki(),t.XT.Fi()),r=Math.atan2(i.y,i.x),n=Math.abs(s-r);n<h&&(e=t,h=n)}return e},this.EF=t=>{this.Go&&(t.Ge(this._F),this.us.xs())},this.zF=t=>{t.Ge(this._F),this.us.xs()},this.us.jn(Vo.mf),this.Ik=i.pb("spiderChart series bg",0),this.TF=i.jm("spiderChart web shapes",0),this.OF=i.jm("spiderChart axis bg",1),this.Xb=i.jm("spiderChart plotting",2),this.FA=i.jm("spiderChart fg",3),this.$T=this.es.Cg().bs(this.qi.effectsText),this.bh.yr("Spider Chart"),this.Vv=this.Ik.rd(this.mg).De(this.qi.spiderChartSeriesBackgroundFillStyle).Pe(at).uu(90).Ue(-270).Au(0),this.Ov=this.Ik.rd(this.mg).De(O).Pe(this.qi.spiderChartSeriesBackgroundStrokeStyle).uu(90).Ue(-270).Au(0),super.zv(this.Vv,this.Ov);const a=i.Qm(),l=jt(r?r.cursorBuilder:void 0,Ja);this.Jm=Va(this,a,l.pm(a,this.uiScale,this.uiScale,Yt,this.qi),this,"show-pointed",ef,(()=>0)),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled)),this.Iy(h,this.mg)}getSeries(){return this.Bv}setCursor(t){return this.Jm.setCursor(t),this}getCursor(){return this.Jm.getCursor()}setCursorMode(t){return this.Jm.setCursorMode(t),this}getCursorMode(){return this.Jm.getCursorMode()}setCustomCursor(t){return this.Jm.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.Jm.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.Jm.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Jm.setCursorFormatting(t),this}getCursorFormatting(){return this.Jm.getCursorFormatting()}addCursor(t=Ja){const i=this.vy(),s=t.pm(i,this.uiScale,this.uiScale,this.Ay(i),this.qi);return this.ky(s),s}addAxis(t){if("string"==typeof t){if(!this.hasAxis(t)){const i=new $d(this.OF,this.FA,this.mg,this,t,this.axisScale,this.BF,this.$T);this.vb.push(i)}}else t&&this.vb.push(t);return this.$T.As(this.vb.map((t=>t.jT))),this.us.xs(),this}addSeries(t){const i=void 0!==(null==t?void 0:t.pointShape)?t.pointShape:sr.Circle,s=void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Bv.length,e=new Xd(this,this.Xb,this.mg,i,this.VF,this.vb,this.sF,this.eF,this.Rv,this.qi,s,this.us.es);return this.Nv(e),e}getSeriesCount(){return this.Bv.length}setWebMode(t){return this.AF=t,this.us.xs(),this}getWebMode(){return this.AF}setWebCount(t){return this.gF=t,this.us.xs(),this}getWebCount(){return this.gF}setWebStyle(t){return this.yF="function"==typeof t?t(this.yF):t,this.us.xs(),this}getWebStyle(){return this.yF}setScaleLabelStyle(t){return this.mF="function"==typeof t?t(this.mF):t,this.us.xs(),this}getScaleLabelStyle(){return this.mF}setScaleLabelFont(t){return this.pF="function"==typeof t?t(this.pF):t,this.us.xs(),this}getScaleLabelFont(){return this.pF}setScaleLabelPadding(t){return this.vF=t,this.us.xs(),this}getScaleLabelPadding(){return this.vF}setScaleLabelStrategy(t){return this.dF=t,this.us.xs(),this}setScaleLabelFormatter(t){return this.formatValue=t,this.us.xs(),this}setAxisLabelStyle(t){return this.SF="function"==typeof t?t(this.SF):t,this.us.xs(),this}getAxisLabelStyle(){return this.SF}setAxisLabelFont(t){return this.bF="function"==typeof t?t(this.bF):t,this.us.xs(),this}getAxisLabelFont(){return this.bF}setAxisLabelEffect(t){return this.$T.bs(t),this.us.xs(),this}getAxisLabelEffect(){return this.$T.Ms()}setAxisLabelPadding(t){return this.xF=t,this.us.xs(),this}getAxisLabelPadding(){return this.xF}setAxisLabelStrategy(t){return this.fF=t,this.us.xs(),this}setAxisStyle(t){return this.MF="function"==typeof t?t(this.MF):t,this.us.xs(),this}getAxisStyle(){return this.MF}setNibStyle(t){return this._F="function"==typeof t?t(this._F):t,this.us.xs(),this}getNibStyle(){return this._F}setNibLength(t){return this.Vf=t,this.us.xs(),this}getNibLength(){return this.Vf}setAutoAxis(t){return this.cF=t,this}getAutoAxis(){return this.cF}setMouseInteractions(t){return this.Go=t,this}getMouseInteractions(){return this.Go}setAxisScrollStrategy(t){return this.uF=t,this.us.xs(),this}getAxisScrollStrategy(){return this.uF}setAxisInterval(t,i=0){return this.axisScale.K(i,t),this.us.xs(),this}getOriginValue(){return this.axisScale.getInnerStart()}getEdgeValue(){return this.axisScale.getInnerEnd()}Le(t){super.Le(t),Ra.Oy(this.bh,this.Dy);const i=this.vb.length,s=Ra.Vy(this.bh,this.Dy),e=n(this.mg.x.getInnerInterval()-(this.Ca.left+this.Ca.right),this.mg.y.getInnerInterval()-(this.Ca.bottom+this.Ca.top+s)),h=((t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}))(0,0,0,0);if(void 0!==this.fF){const t=Math.min(e.x,e.y)/2;for(let s=0;s<i;s+=1){const e=jd(s,i),r=Math.cos(e),o=Math.sin(e),a=this.vb[s].getLabelSize();tf();const l=this.fF(qd,s,i,this.vb[s].tag,e,this.xF),u=n(r*t+l.paddingX,o*t+l.paddingY);r>0?h.right=Math.max(h.right,u.x+.5*(1-l.alignmentX)*a.x-t):h.left=Math.max(h.left,-u.x+.5*(l.alignmentX+1)*a.x-t),o>0?h.top=Math.max(h.top,u.y+.5*(1-l.alignmentY)*a.y-t):h.bottom=Math.max(h.bottom,-u.y+.5*(l.alignmentY+1)*a.y-t)}}if(this.uF){const t=this.RF();if(void 0!==t){const i=this.uF.start(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max),s=this.uF.end(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max);this.axisScale.K(i,s)}}const r=n(this.mg.x.getInnerStart()+(h.left+this.mg.x.getInnerInterval()-h.right)/2,this.mg.y.getInnerStart()+(h.bottom+this.mg.y.getInnerInterval()-h.top)/2),o=Math.min(e.x/2-(h.left+h.right)/2,e.y/2-(h.bottom+h.top)/2);this.wF=A(this.$t.left+this.Ca.left+h.left,this.$t.top+this.Ca.top+s+h.top,this.$t.right+this.Ca.right+h.right,this.$t.bottom+this.Ca.bottom+h.bottom),this.tp(r,o);for(const t of this.Bv)t.pv();for(const t of this.Bv)t.Le();super.Fy(),this.Jm.Le(!1,this.Bv,void 0);for(const t of this.Bv)t.xp()}dispose(){return this.Ik.U(),this.TF.U(),this.OF.U(),this.Xb.U(),this.FA.U(),this.Jm.U(),super.dispose()}getMinimumSize(){return n(this.wF.left+this.wF.right+100,this.wF.bottom+this.wF.top+100)}tp(t,i){const s=this.vb.length,e=[];for(let h=0;h<s;h+=1){const r=jd(h,s),o=n(t.x+Math.cos(r)*i,t.y+Math.sin(r)*i);e.push(o)}Jd(this.Vv,this.AF,t,e),Jd(this.Ov,this.AF,t,e),this.Vv.cu(i),this.Ov.cu(i),((t,i,s,e,h,r,n,o)=>{const a=t.length,l=r.length,u=i>0&&l>1;for(let l=0;l<Math.max(i,a);l+=1)if(u&&l<i){l>=a&&t.push(n());const o=t[l];Jd(o,s,e,r);const u=h*((l+1)/i);o.cu(u)}else l<t.length&&o(t[l]);t.length=u?i:0})(this.aF,this.gF,this.AF,t,i,e,this.kF,this.FF);for(const t of this.aF)t.De(O).Pe(this.yF);for(let h=0;h<s;h+=1){const r=this.vb[h],n=jd(h,s);tf();const o=void 0!==this.fF?this.fF(qd,h,s,this.vb[h].tag,n,this.xF):void 0;r.tp(t,e,h,n,i,this.AF,o)}((t,i,s,e,h,r,o,a,l,u)=>{const c=h.length,d=t.length;let f=0;if(void 0!==i)for(let l=0;l<c;l+=1){const A=h[l].tag,g=jd(l,c);for(let h=0;h<s+ +(0===l);h+=1){Kd.alignmentX=0,Kd.alignmentY=0,Kd.paddingX=0,Kd.paddingY=0;const y=i(Kd,l,c,A,g,h,s,e);if(void 0!==y){f>=d&&t.push(a());const i=t[f];f+=1;const e=(s-h)/s,c=ds(r,o[l],e);i.Re(ws(c,n(y.paddingX,y.paddingY))).Ga(y.alignmentX).Ua(y.alignmentY).yr(u(e))}}}for(let i=f;i<d;i+=1)l(t[i]);t.length=f})(this.lF,this.dF,this.gF,this.vF,this.vb,t,e,this.IF,this.PF,this.DF);for(const t of this.lF)t.De(this.mF).Zh(this.pF)}RF(){let t,i;const s=this.getSeriesCount()>1;for(const e of this.vb)for(const h of this.Bv){const r=h.getValue(e.tag,s);void 0!==r&&(t=void 0===t?r:Math.min(t,r),i=void 0===i?r:Math.max(i,r))}if(void 0!==t&&void 0!==i)return c(t,i)}}const ef=(t,i,s)=>za(i,[[i.series],[i.axis],[{text:t.formatValue(i.value),font:{weight:"bold"}}]]),hf=(t,i)=>{const s=Math.floor(99999/i),e=Math.floor(99999/i),h=Math.floor(99998/i),r=Math.floor(99998/i),n=Math.floor(99999/(i+1)),o=Math.floor(89999/(i+1)),a=510001+i*o;let l=0;return{NF:()=>{const i=t.GF("dashboard ui",a+l);return l+=1,i},WF:()=>t.GF("dashboard legend",51e4),UF:i=>{const a=1+i*s,l=100001+i*e,u=200002+i*h,c=300002+i*r,d=400001+i*n,f=510001+i*o;let A=0;return{us:t,Py:(i,s)=>{const e=a+s;return t.GF(i,e)},pb:(i,s)=>{const e=l+s;return t.GF(i,e)},Dk:(i,s)=>{const e=u+s;return t.GF(i,e)},jm:(i,s)=>{const e=c+s;return t.GF(i,e)},mb:(i,s,e)=>{const h=c+s;return t.YF(i,h,e)},Ly:(i,s)=>{const e=d+s;return t.GF(i,e)},Sy:i=>{const s=f+A,e=t.GF(i,s);return A+=1,e},xy:()=>t.GF("panel legend",500002+i),Qm:()=>t.GF("panel cursor",600001+i)}}}};class rf{constructor(t){this.L=new s,this.S=t}M(t){return this.S=t,this.L.emit("set",t),this}_(){return this.S}N(t){return this.L.on("set",t)}W(t){return this.L.off(t,"set")}}const nf={dh:!1,fh:0,Ah:!1,yh:0,gh:!1,mh:0,ph:0,oh:nh.fitting},of=t=>{if(!t||"object"!=typeof t||null===t)return!1;const i=t.type;return!(!i||!["spark-line","spark-bar","spark-win-loss","spark-area","spark-pie"].includes(i))},af=(t,i,s,e,h,r,n,o)=>{const{type:a,data:l}=t;if(0===l.length)return;const u=[e,h];"spark-line"===a&&mf(t,i,u,r,n,o),"spark-bar"===a&&pf({...t,winLoss:!1},i,u,r,n,o),"spark-win-loss"===a&&pf({...t,winLoss:!0},i,u,r,n,o),"spark-area"===a&&vf(t,i,u,r,n,o),"spark-pie"===a&&Sf(t,i,u,r,n,o)},lf=(t,i,s,e)=>({x:cf(t.x,i.x,s.x,e),y:df(t.y,i.y,s.y,e)}),uf=(t,i,s,e)=>({position:cf(t.position,i.x,s.x,e),high:df(t.high,i.y,s.y,e),low:df(t.low,i.y,s.y,e)}),cf=(t,i,s,e)=>{const h=$t(t,i,i+s);return e[0].x+e[1].x*(h-i)/s},df=(t,i,s,e)=>{const h=$t(t,i,i+s);return e[0].y+e[1].y*(h-i)/s},ff=(t,i,s,e,h,r,n,o)=>{for(const a of t)"point"===a.type&&Af(a,i,s,h,r,n,o),"axis-band"===a.type&&gf(a,s,h,r,n,o),"constant-line"===a.type&&yf(a,s,e,h,r,n,o)},Af=(t,i,s,e,h,r,n)=>{const{value:o,fillStyle:a,shape:l,size:u,rotation:c}=t;let d={x:NaN,y:NaN};if("start"===o&&(d=i[0]),"end"===o&&(d=i[i.length-1]),"min"===o){d=i[0];for(const t of i)d=d.y<t.y?d:t}if("max"===o){d=i[0];for(const t of i)d=d.y>t.y?d:t}("object"!=typeof o||(d=lf(o,s,e,h),((t,i)=>{const s=i[0],e=i[1],h=t.x,r=t.y;return s.x<=h&&h<=s.x+e.x&&s.y<=r&&r<=s.y+e.y})(d,h)))&&r.pointSet.add().Vt().al(void 0!==l?l:sr.Circle).Qh(c||0).tt(u||5).De(a||n.sparkPointChartFillStyle).fl(d)},gf=(t,i,s,e,h,r)=>{const{axis:o,start:a,end:l,fillStyle:u,strokeStyle:c}=t;let d=n(qi,Ki),f=n(qi,Ki);"x"===o&&(d=lf({x:a,y:qi},i,s,e),f=lf({x:l,y:Ki},i,s,e)),"y"===o&&(d=lf({x:qi,y:a},i,s,e),f=lf({x:Ki,y:l},i,s,e));const A=e[0],g=e[1],y=$t(d.x,A.x,A.x+g.x),m=$t(d.y,A.y,A.y+g.y),p=$t(f.x,A.x,A.x+g.x),v=$t(f.y,A.y,A.y+g.y);h.rect.add().vl(y).Sl(m).tt(n(p-y,v-m)).De(u||r.sparkChartBandFillStyle).Pe(c||r.sparkChartBandStrokeStyle).Pe(at)},yf=(t,i,s,e,h,r,o)=>{const{axis:a,value:l,strokeStyle:u}=t,c=l||0,d=i.y,f=s.y,A=i.x,g=s.x,y=[];if("y"===a&&d<=c&&c<=f){const t=lf(n(A,c),{x:A,y:d},e,h),i=lf(n(g,c),{x:A,y:d},e,h);y.push([t,i])}if("x"===a&&A<=c&&c<=g){const t=lf(n(c,d),{x:A,y:d},e,h),i=lf(n(c,f),{x:A,y:d},e,h);y.push([t,i])}y.length>0&&r.line.add().Ge(u||o.sparkChartConstantLineStrokeStyle).Ye(y[0][0]).Ue(y[0][1])},mf=(t,i,s,e,h,r)=>{const{strokeStyle:n,data:o,markers:a}=t,l=o.length;l>1e4&&h.qn&&Ot.console.warn("LightningChart JS warning: SparkLineChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let u=Ki,c=qi,d=Ki,f=qi;for(let t=0;t<l;t+=1){const i=o[t];u=Math.min(u,i.x),c=Math.max(c,i.x),d=Math.min(d,i.y),f=Math.max(f,i.y)}const A={x:c-u,y:f-d},g=o.map((t=>lf(t,{x:u,y:d},A,s)));i.lineSet.add().cs(r).Ge(n||e.sparkLineChartStrokeStyle).Vt().fl(g),a&&ff(a,g,{x:u,y:d},{x:c,y:f},A,s,i,e)},pf=(t,i,s,e,h,r)=>{const{data:n,fillStyle:o,strokeStyle:a,threshold:l,winFillStyle:u,lossFillStyle:c}=t,d=t.barSize||1,f=t.gap||1,A=t.winLoss,g=l||0,y=f/d*1;let m=Ki,p=qi;if(A)m=-1,p=1;else for(const t of n)m=Math.min(m,t),p=Math.max(p,t);const v={x:0,y:A?-1:Math.min(0,m)},S={x:1*n.length+(n.length-1)*y,y:A?2:Math.max(p,1e-5)};n.map(((t,i)=>{const e={x:1*(i+1)+i*y,y:A?t>=g?1:0:t},h=lf({x:1*i+i*y,y:A?t>=g?0:-1:0},v,S,s),r=lf(e,v,S,s);return{value:t,position:h,width:r.x-h.x,height:r.y-h.y}})).forEach((t=>{var s;i.rect.add().cs(r).Re(t.position).xl(t.height).bl(t.width).De((s=t.value,A?(s>=g?u:c)||e.sparkBarChartFillStyle:o||e.sparkBarChartFillStyle)).Pe(a||e.sparkBarChartStrokeStyle)}))},vf=(t,i,s,e,h,r)=>{const{data:n,fillStyle:o,strokeStyle:l,markers:u}=t,c=n.length;c>1e4&&h.qn&&Ot.console.warn("LightningChart JS warning: SparkAreaChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let d=Ki,f=qi,A=Ki,g=qi;for(let t=0;t<c;t+=1){const i=n[t];d=Math.min(d,i.x),f=Math.max(f,i.x),A=Math.min(A,i.y),g=Math.max(g,i.y)}const y={x:f-d,y:g-A},m=[],p=[];for(const t of n){const i=a(t.x,t.y,A);m.push(uf(i,{x:d,y:A},y,s)),p.push(lf(t,{x:d,y:A},y,s))}i.junction.add().cs(r).Vt().fl(m).De(o||e.sparkAreaChartFillStyle),i.lineSet.add().cs(r).Vt().fl(p).Ge(l||e.sparkAreaChartStrokeStyle),u&&ff(u,p,{x:d,y:A},{x:f,y:g},y,s,i,e)},Sf=(t,i,s,e,h,r)=>{const{data:o,strokeStyle:a}=t,l=o.map((t=>"number"==typeof t?t:t.value)),u=o.map((t=>"object"==typeof t?t.fillStyle:void 0)),c=l.reduce(((t,i)=>t+i),0),d=lf(n(50,50),{x:0,y:0},{x:100,y:100},s),f=s[1],A=f.x<=f.y?f.x/2:f.y/2;let g=90;l.forEach(((t,s)=>{const h=t/c*360;i.arc.add().cs(r).Re(d).cu(A).Au(0).uu(g).Ue(g+h).De(u[s]||Ii(e.sparkPieChartFillStyle,s)).Pe(a||e.sparkPieChartStrokeStyle),g+=h}))};var bf,xf,Mf;!function(t){t[t.UpToDown=0]="UpToDown",t[t.LeftToRight=1]="LeftToRight"}(bf||(bf={})),function(t){t[t.Vertical=0]="Vertical",t[t.Horizontal=1]="Horizontal",t[t.Both=2]="Both"}(xf||(xf={})),function(t){t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right"}(Mf||(Mf={}));class _f extends Wr{constructor(t,i,s,e,h){super(),this.zs=!1,this.qM={x:0,y:0,height:20,width:20},this.HF={x:10,y:10},this.Ds=t,this.$F=h,this.XF=new Xn(t,i,s,Yt,e).setMouseInteractions(!0),this.jF=t.ac(i,Pr.Simple).De(e.dataGridScrollBarButtonArrowFillStyle).Pe(e.dataGridScrollBarButtonArrowStrokeStyle).setMouseInteractions(!1),this.Tu(this),this.XF.onMouseEnter((t=>t.setHighlight(1))),this.XF.onMouseLeave((t=>t.setHighlight(0)))}ZF(){switch(this.$F){case Mf.Up:this.jF.wl([{x:this.qM.x,y:this.qM.y+this.HF.y/2},{x:this.qM.x+this.HF.x/2,y:this.qM.y-this.HF.y/2},{x:this.qM.x-this.HF.x/2,y:this.qM.y-this.HF.y/2}]);break;case Mf.Down:this.jF.wl([{x:this.qM.x-this.HF.x/2,y:this.qM.y+this.HF.y/2},{x:this.qM.x+this.HF.x/2,y:this.qM.y+this.HF.y/2},{x:this.qM.x,y:this.qM.y-this.HF.y/2}]);break;case Mf.Left:this.jF.wl([{x:this.qM.x-this.HF.x/2,y:this.qM.y},{x:this.qM.x+this.HF.x/2,y:this.qM.y+this.HF.y/2},{x:this.qM.x+this.HF.x/2,y:this.qM.y-this.HF.y/2}]);break;case Mf.Right:this.jF.wl([{x:this.qM.x-this.HF.x/2,y:this.qM.y+this.HF.y/2},{x:this.qM.x+this.HF.x/2,y:this.qM.y},{x:this.qM.x-this.HF.x/2,y:this.qM.y-this.HF.y/2}])}}Re(t){return this.qM.x=t.x,this.qM.y=t.y,this}Va(){return n(this.qM.x,this.qM.y)}tt(t){return this.qM.height=t.x,this.qM.width=t.y,this}ni(){return{x:this.qM.height,y:this.qM.width}}onMouseDown(t){return this.XF.onMouseDown(t)}onMouseUp(t){return this.XF.onMouseUp(t)}setFillStyle(t){return this.XF.setFillStyle(t),this}getFillStyle(){return this.XF.getFillStyle()}setStrokeStyle(t){return this.XF.setStrokeStyle(t),this}getStrokeStyle(){return this.XF.getStrokeStyle()}Le(){return this.XF.Le(),this.ZF(),this}Es(){return this.XF.setSize(n(this.qM.height,this.qM.width)).setPosition(n(this.qM.x,this.qM.y)),this}setVisible(t){return this.XF.setVisible(t),this.jF.setVisible(t),this}dispose(){return this.XF.dispose(),this.jF.dispose(),this}setMouseInteractions(t){return this.XF.setMouseInteractions(t),this}getMouseInteractions(){return this.XF.getMouseInteractions()}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}getHighlight(){return this.XF.getHighlight()}setHighlight(t){return this.XF.setHighlight(zi(t)),this.L.emit("highlight",this,Boolean(t)),this.Ds.xs(),this}}const wf=(t,i)=>Math.min(Math.max(t,i.getInnerStart()),i.getInnerEnd());class Cf{constructor(t,i,e,h,r,o,a){this.nd={x:0,y:0},this.qM={x:0,y:0,height:0,width:0},this.L=new s,this.QF={min:n(0,0),max:n(0,0)},this.JF=!1,this.KF=!1,this.qF={x:0,y:0},this.Iu=void 0,this.tI=n(0,0),this.iI={x:0,y:0},this.sI=0,this.eI=15,this.hI=(t,i)=>{this.JF=!0,this.FA.xs();const s=this.rI.getDraggingMode();this.Iu=this.FA.us.Jr(s===zt.notDraggable?Xe.Restricted:s===zt.draggable?Xe.Move:s===zt.onlyHorizontal?Xe.Horizontal:Xe.Vertical),this.nI&&clearInterval(this.nI)},this.oI=()=>{this.JF=!1,this.FA.xs(),this.FA.us.Kr(this.Iu)},this.aI=t=>(this.KF=!0,this.qF=At(this.FA.us.ze(t.x,t.y),this.FA.us.ft,this.scale),!0),this.lI=(t,i)=>(this.uI(i),this.nI=setInterval((()=>this.uI(i)),300),!0),this.cI=()=>(clearInterval(this.nI),!0),this.dI=(t,i)=>{const s=this.rI.getDraggingMode();if(s!==zt.notDraggable){const e=i||s,h=At(this.FA.us.ze(t.x,t.y),this.FA.us.ft,this.scale),r=n(e!==zt.onlyVertical?wf(h.x,this.scale.x):this.qM.x,e!==zt.onlyHorizontal?wf(h.y,this.scale.y):this.qM.y),o=n(r.x-this.qF.x,r.y-this.qF.y),a=n(this.rI.getPosition().x+o.x,this.rI.getPosition().y+o.y),l=this.fI(a),u={x:Math.abs(this.tI.x-l.x),y:Math.abs(this.tI.y-l.y)};return this.AI(u),this.iI.y>o.y&&(this.qF=h),this.Le(),!0}return!1},this.gI=(t,i)=>{this.KF=!1,di(i),this.FA.xs()},this.FA=t,this.uy=i,this.scale=h,this.contentScale=r,this.yI=a,this.mI=new _f(t,e,h,o,a===bf.UpToDown?Mf.Up:Mf.Left).setStrokeStyle(o.dataGridScrollBarButtonStrokeStyle).setFillStyle(o.dataGridScrollBarButtonFillStyle),this.pI=new _f(t,e,h,o,a===bf.UpToDown?Mf.Down:Mf.Right).setStrokeStyle(o.dataGridScrollBarButtonStrokeStyle).setFillStyle(o.dataGridScrollBarButtonFillStyle),this.rI=new Xn(t,e,h,Yt,o).setFillStyle(o.dataGridScrollBarFillStyle).setStrokeStyle(o.dataGridScrollBarStrokeStyle).setMouseInteractions(!0).setDraggingMode(a===bf.UpToDown?zt.onlyVertical:a===bf.LeftToRight?zt.onlyHorizontal:zt.notDraggable),this.vI=new Xn(i,e,h,Yt,o).setFillStyle(o.dataGridScrollBarBackgroundFillStyle).setStrokeStyle(o.dataGridScrollBarBackgroundStrokeStyle).setMouseInteractions(!0),this.rI.onMouseEnter(this.hI),this.rI.onMouseLeave(this.oI),this.rI.onMouseDragStart(((t,i)=>this.aI(n(i.clientX,i.clientY))&&di(i))),this.rI.onMouseDrag(((t,i)=>this.dI(n(i.clientX,i.clientY))&&di(i))),this.rI.onMouseDragStop(this.gI),this.rI.onTouchStart(((t,i)=>this.aI(n(i.clientX,i.clientY))&&di(i))),this.rI.onTouchMove(((t,i)=>this.dI(n(i.clientX,i.clientY))&&di(i))),this.rI.onTouchEnd(this.gI),this.mI.onMouseDown(((t,i)=>this.lI(t,i)&&di(i))),this.pI.onMouseDown(((t,i)=>this.lI(t,i)&&di(i))),this.mI.onMouseUp(((t,i)=>this.cI()&&di(i))),this.pI.onMouseUp(((t,i)=>this.cI()&&di(i))),this.vI.onMouseWheel(((t,i)=>this.SI(i))),this.rI.onMouseWheel(((t,i)=>this.SI(i))),this.vI.onMouseDown(((t,i)=>this.lI(t,i)&&di(i))),this.vI.onMouseUp(((t,i)=>this.cI()&&di(i)))}bI(t){return this.qM=t,this}bl(t){return this.qM.width=t,this}xI(){return this.qM.width}MI(t){return this.tI=t,this}_I(t){return this.nd=t,this}wI(){return this.nd}CI(t){return this.eI=t,this}kI(){return this.yI}TI(t){let i;switch(this.yI){case bf.UpToDown:return i=t>0?Math.min(this.tI.y-this.QF.max.y,this.iI.y+t):Math.max(0,this.iI.y+t),i!==this.iI.y&&(this.AI({x:0,y:i}),this.Le(),!0);case bf.LeftToRight:return i=Math.min(this.QF.max.x-this.tI.x,this.iI.x+t),i!==this.iI.x&&(this.AI({y:0,x:i}),this.Le(),!0);default:return!1}}FI(t){let i;switch(this.yI){case bf.UpToDown:return i=Math.max(0,this.iI.y-t),i!==this.iI.y&&(this.AI({x:0,y:i}),this.Le(),!0);case bf.LeftToRight:return i=t>0?Math.max(0,this.iI.x-t):Math.min(this.QF.max.x-this.tI.x,this.iI.x-t),i!==this.iI.x&&(this.AI({x:i,y:0}),this.Le(),!0);default:return!0}}II(t){switch(this.yI){case bf.UpToDown:return this.L.on("scrollY",t);case bf.LeftToRight:return this.L.on("scrollX",t)}return this.L.on("scrollY",t)}fI(t){switch(this.yI){case bf.UpToDown:if(t.y>this.QF.min.y)return n(t.x,this.QF.min.y);if(t.y<this.QF.max.y)return n(t.x,this.QF.max.y);break;case bf.LeftToRight:if(t.x<this.QF.min.x)return n(this.QF.min.x,t.y);if(t.x>this.QF.max.x)return n(this.QF.max.x,t.y)}return t}SI(t){t.deltaY>0&&this.DI()&&di(t),t.deltaY<0&&this.BI()&&di(t)}uI(t){const i=At(this.FA.us.ze(t.clientX,t.clientY),this.FA.us.ft,this.scale);let s;const e=this.rI.getPosition(),h=this.rI.getSize();this.LI(i,e,h)?clearInterval(this.nI):(s=this.yI===bf.UpToDown?n(0,i.y-e.y>0?this.eI:-this.eI):n(e.x-i.x>0?this.eI:-this.eI,0),(s.x>0||s.y>0)&&this.RI(0!==s.x?Math.abs(s.x):Math.abs(s.y)),(s.x<0||s.y<0)&&this.EI(0!==s.x?Math.abs(s.x):Math.abs(s.y)))}LI(t,i,s){return this.yI===bf.UpToDown?t.y<i.y+s.y/2&&t.y>i.y-s.y/2:t.x>i.x-s.x/2&&t.x<i.x+s.x/2}zI(t){this.QF=t}RI(t){switch(this.yI){case bf.UpToDown:{const i=Math.max(0,this.iI.y-t);return i!==this.iI.y&&(this.AI({x:0,y:i}),this.Le(),!0)}case bf.LeftToRight:{const i=Math.max(0,this.iI.x-t);return i!==this.iI.x&&(this.AI({x:i,y:0}),this.Le(),!0)}default:return!1}}EI(t){switch(this.yI){case bf.UpToDown:{let i;return i=this.nd.x>this.qM.height?Math.min(this.tI.y-this.QF.max.y,this.iI.y+t):0,i!==this.iI.y&&(this.AI({x:0,y:i}),this.Le(),!0)}case bf.LeftToRight:{const i=Math.min(this.QF.max.x-this.tI.x,this.iI.x+t);return i!==this.iI.x&&(this.AI({y:0,x:i}),this.Le(),!0)}default:return!1}}BI(){return this.RI(this.eI)}DI(){return this.EI(this.eI)}AI(t){if(t.x===this.iI.x&&t.y===this.iI.y)return;let i;switch(this.iI=t,this.yI){case bf.UpToDown:i=this.iI.y*this.sI*this.contentScale.Gi().y,this.L.emit("scrollY",xf.Vertical,i),this.FA.us.xs();break;case bf.LeftToRight:i=this.iI.x*this.sI*this.contentScale.Gi().x,this.L.emit("scrollX",xf.Horizontal,i)}}setVisible(t){return this.mI.setVisible(t),this.pI.setVisible(t),this.vI.setVisible(t),this.rI.setVisible(t),this}dispose(){return this.mI.dispose(),this.pI.dispose(),this.vI.dispose(),this.rI.dispose(),this.nI&&clearInterval(this.nI),this}Es(){switch(this.VI(),this.OI(),this.yI){case bf.UpToDown:this.mI.Re({x:this.qM.x,y:this.qM.y+this.qM.height-this.mI.ni().x/2}).tt(n(this.qM.width,this.qM.width)).Es(),this.pI.Re({x:this.qM.x,y:this.qM.y+10}).tt(n(this.qM.width,this.qM.width)).Es(),this.vI.setSize({x:this.qM.width,y:this.qM.height-2*this.mI.ni().x}).setPosition({x:this.qM.x,y:this.qM.y+this.pI.ni().y+this.vI.getSize().y/2}),this.rI.setSize(n(this.qM.width,this.NI())),this.tI={x:this.qM.x,y:this.mI.Va().y-this.mI.ni().y/2-this.rI.getSize().y/2},this.zI({min:{x:this.qM.x,y:this.mI.Va().y-this.mI.ni().y/2-this.rI.getSize().y/2},max:{x:this.qM.x,y:this.pI.Va().y+this.pI.ni().x/2+this.rI.getSize().y/2}});break;case bf.LeftToRight:this.mI.Re({x:this.qM.x,y:this.qM.y}).tt(n(this.qM.height,this.qM.height)).Es(),this.pI.Re({x:this.qM.x+this.qM.width-this.pI.ni().x,y:this.qM.y}).tt(n(this.qM.height,this.qM.height)).Es(),this.vI.setSize({y:this.qM.height,x:this.qM.width-2*this.mI.ni().y}).setPosition({x:this.qM.x+this.mI.ni().x/2+this.vI.getSize().x/2,y:this.qM.y}),this.rI.setSize(n(this.NI(),this.qM.height)),this.tI={x:this.mI.Va().x+this.mI.ni().x/2+this.rI.getSize().x/2,y:this.qM.y},this.zI({min:{x:this.mI.Va().x+this.mI.ni().x/2+this.rI.getSize().x/2,y:this.qM.y},max:{x:this.pI.Va().x-this.pI.ni().x/2-this.rI.getSize().x/2,y:this.qM.y}})}return this.GI(),this}VI(){switch(this.yI){case bf.UpToDown:this.WI()||this.setVisible(!1),this.WI()&&this.setVisible(!0);break;case bf.LeftToRight:this.UI()||this.setVisible(!1),this.UI()&&this.setVisible(!0)}}OI(){switch(this.yI){case bf.UpToDown:this.WI()||this.AI({x:0,y:0});break;case bf.LeftToRight:this.UI()||this.AI({x:0,y:0})}}WI(){return this.nd.x>this.qM.height}UI(){return this.nd.y>this.qM.width}NI(){switch(this.yI){case bf.UpToDown:return this.qM.height*(this.qM.height-2*this.mI.ni().x)/this.nd.x;case bf.LeftToRight:return this.qM.width*(this.qM.width-2*this.mI.ni().y)/this.nd.y;default:return 0}}GI(){switch(this.yI){case bf.UpToDown:this.sI=(this.nd.x-this.qM.height)/(this.QF.min.y-this.QF.max.y);break;case bf.LeftToRight:this.sI=(this.nd.y-this.qM.width)/(this.QF.max.x-this.QF.min.x)}}Le(){switch(this.mI.Le(),this.pI.Le(),this.vI.Le(),this.yI){case bf.UpToDown:this.rI.setPosition({x:this.qM.x,y:this.mI.Va().y-this.mI.ni().y/2-this.rI.getSize().y/2-this.iI.y}).Le();break;case bf.LeftToRight:this.rI.setPosition({y:this.qM.y,x:this.mI.Va().x+this.mI.ni().x/2+this.rI.getSize().x/2+this.iI.x}).Le()}return this}}class kf{constructor(t,i,s,e,h,r,n){switch(this.FA=t,this.uy=i,this.scale=e,this.contentScale=h,n){case xf.Vertical:this.YI=this.HI(s,r,bf.UpToDown);break;case xf.Horizontal:this.$I=this.HI(s,r,bf.LeftToRight);break;case xf.Both:this.YI=this.HI(s,r,bf.UpToDown),this.$I=this.HI(s,r,bf.LeftToRight)}this.XI=Ae(new ye(void 0,((t,i,s,e,h)=>{var r,n;0!==e.x&&(null===(r=this.$I)||void 0===r?void 0:r.FI(e.x))&&di(h),0!==e.y&&(null===(n=this.YI)||void 0===n?void 0:n.TI(e.y))&&di(h)})))}HI(t,i,s){return new Cf(this.FA,this.uy,t,this.scale,this.contentScale,i,s)}xI(){return 20}_I(t){var i,s;return null===(i=this.YI)||void 0===i||i._I(t),null===(s=this.$I)||void 0===s||s._I(t),this}jI(t){var i;return null===(i=this.$I)||void 0===i||i.CI(t),this}ZI(t){var i;return null===(i=this.YI)||void 0===i||i.CI(t),this}QI(t){const i=this.YI;return i&&i.SI(t),this}JI(t){return this.XI.onTouchStart(this,t),this}KI(t){return this.XI.onTouchMove(this,t),this}qI(t){return this.XI.onTouchEnd(this,t),this}onScroll(t){var i,s;return null===(i=this.$I)||void 0===i||i.II(t),null===(s=this.YI)||void 0===s||s.II(t),this}dispose(){var t,i;return null===(t=this.YI)||void 0===t||t.dispose(),null===(i=this.$I)||void 0===i||i.dispose(),this}Le(){var t,i;return null===(t=this.YI)||void 0===t||t.Le(),null===(i=this.$I)||void 0===i||i.Le(),this}Es(){var t,i,s,e;const h=this.scale.x,r=this.scale.y;return null===(t=this.YI)||void 0===t||t.bI({x:h.getInnerEnd()-10,y:r.getInnerStart()+20,height:r.getInnerEnd()-20,width:20}),null===(i=this.$I)||void 0===i||i.bI({x:h.getInnerStart()+10,y:r.getInnerStart()+10,height:20,width:h.getInnerEnd()-20}),null===(s=this.YI)||void 0===s||s.Es(),null===(e=this.$I)||void 0===e||e.Es(),this}}class Tf extends La{constructor(t,i,s,e,h,r){super(t,i,s,i.Py("dataGrid bg",0),e,i.us.qi.dataGridBackgroundFillStyle,i.us.qi.dataGridBackgroundStrokeStyle,i.us.qi.dataGridTitleFont,i.us.qi.dataGridTitleFillStyle,r),this.tP=[],this.iP=[],this.sP=[],this.eP=new Map,this.hP=!0,this.rP=!0,this.nP=!0,this.oP=!0,this.aP=!0,this.lP=!0,this.uP=!0,this.cP=!0,this.dP=!0,this.fP=!0,this.AP=!0,this.gP=!0,this.yP=!0,this.mP=!0,this.pP=!0,this.vP=!0,this.SP=new Set,this.bP=new Set,this.xP=!0,this.MP=!0,this._P=(t,i)=>{t.borders=void 0===i?Bf:{...t.borders,...i},this.wP(t),this.gP=!0,this.us.xs()},this.wP=t=>{t.borders&&(!1===t.borders.top&&this.CP(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!1}:{...this.kP,bottom:!1}})),!1===t.borders.bottom&&this.CP(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!1}:{...this.kP,top:!1}})),!1===t.borders.left&&this.CP(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!1}:{...this.kP,right:!1}})),!1===t.borders.right&&this.CP(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!1}:{...this.kP,left:!1}})),!0===t.borders.top&&this.CP(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!0}:{...this.kP,bottom:!0}})),!0===t.borders.bottom&&this.CP(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!0}:{...this.kP,top:!0}})),!0===t.borders.left&&this.CP(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!0}:{...this.kP,right:!0}})),!0===t.borders.right&&this.CP(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!0}:{...this.kP,left:!0}})))},this.TP=(t,i)=>{const s=this.eP.get(t);s&&this.L.emit(Ff.cellMouseEnter,s,i)},this.FP=(t,i)=>{const s=this.eP.get(t);s&&this.L.emit(Ff.cellMouseLeave,s,i)},this.IP=(t,i)=>{const s=this.eP.get(t);s&&this.L.emit(Ff.cellMouseClick,s,i)},this.PP=(t,i)=>{const s=this.eP.get(t);s&&this.L.emit(Ff.cellMouseDoubleClick,s,i)},this.DP=(t,i)=>{const s=this.eP.get(t);s&&this.L.emit(Ff.cellMouseDown,s,i)},this.BP=(t,i)=>{const s=this.eP.get(t);s&&this.L.emit(Ff.cellMouseUp,s,i)},this.LP=(t,i)=>{const s=this.eP.get(t);s&&this.L.emit(Ff.cellMouseMove,s,i)},this.RP=(t,i)=>{const s=this.eP.get(t);s&&this.L.emit(Ff.cellMouseDrag,s,i)},this.EP=(t,i)=>{const s=this.eP.get(t);s&&this.L.emit(Ff.cellMouseDragStart,s,i)},this.zP=(t,i)=>{const s=this.eP.get(t);s&&this.L.emit(Ff.cellMouseDragStop,s,i)},this.VP=(t,i)=>{const s=this.eP.get(t);s&&(this.L.emit(Ff.cellMouseWheel,s,i),!i.defaultPrevented&&this.xP&&this.OP.QI(i))},this.NP=(t,i)=>{const s=this.eP.get(t);s&&(this.L.emit(Ff.cellTouchStart,s,i),!i.defaultPrevented&&this.MP&&this.OP.JI(i))},this.GP=(t,i)=>{const s=this.eP.get(t);s&&(this.L.emit(Ff.cellTouchMove,s,i),!i.defaultPrevented&&this.MP&&this.OP.KI(i))},this.WP=(t,i)=>{const s=this.eP.get(t);s&&(this.L.emit(Ff.cellTouchEnd,s,i),!i.defaultPrevented&&this.MP&&this.OP.qI(i))},this.us.jn(Vo.lf),this.bh.yr("Data Grid"),this.UP=s.d2({scaleXYConstructor:Ks}),this.UP.x.lg=nf,this.YP=s.d2({scaleXYConstructor:Ks}),this.HP={x:0,y:0},this.$P=this.qi.dataGridTextFont,this.XP=this.qi.dataGridTextFillStyle,this.kP={top:!0,bottom:!0,left:!0,right:!0},this.jP=this.qi.dataGridCellBackgroundFillStyle,this.ZP=this.qi.dataGridBorderStrokeStyle,this.QP="left-center",this.JP={left:5,right:5,bottom:5,top:5},this.KP=i.pb("dataGrid grid bg",0),this.qP=i.pb("dataGrid cell bg",1),this.tD=i.jm("dataGrid cell content",0),this.iD=i.jm("dataGrid scrollbar bg",1),this.sD=i.jm("dataGrid scrollbar fg",2),this.OP=this.eD(),this.onBackgroundMouseWheel(((t,i)=>{this.xP&&this.OP.QI(i)})),this.onBackgroundTouchStart(((t,i)=>{this.MP&&this.OP.JI(i)})),this.onBackgroundTouchMove(((t,i)=>{this.MP&&this.OP.KI(i)})),this.onBackgroundTouchEnd(((t,i)=>{this.MP&&this.OP.qI(i)})),this.hD=this.KP.Be(this.UP).De(this.qi.dataGridBackgroundFillStyle).Pe(at).setMouseInteractions(!1),this.rD=this.tD.Ug(this.UP).setMouseInteractions(!1),this.nD=new _l((()=>this.qP.Be(this.UP).setMouseInteractions(!0).setMouseEnterEventHandler(this.TP).setMouseLeaveEventHandler(this.FP).setMouseClickEventHandler(this.IP).setMouseDoubleClickEventHandler(this.PP).setMouseDownEventHandler(this.DP).setMouseUpEventHandler(this.BP).setMouseMoveEventHandler(this.LP).setMouseDragEventHandler(this.RP).setMouseDragStartEventHandler(this.EP).setMouseDragStopEventHandler(this.zP).setMouseWheelEventHandler(this.VP).setTouchStartEventHandler(this.NP).setTouchMoveEventHandler(this.GP).setTouchEndEventHandler(this.WP))),this.oD=new _l((()=>this.tD.Be(this.UP).setMouseInteractions(!1))),this.aD=new _l((()=>this.tD.Nr(this.UP).setMouseInteractions(!1))),this.lD=new _l((()=>this.tD.op(this.UP,{},[gl.InternalUI,{type:"DataPattern",args:{pattern:"ProgressiveX"}}]).setMouseInteractions(!1))),this.uD=new _l((()=>this.tD.We(this.UP).setMouseInteractions(!1))),this.cD=new _l((()=>this.tD.Dv(this.UP).setMouseInteractions(!1))),this.dD=new _l((()=>this.tD.Be(this.UP).setMouseInteractions(!1))),this.fD=new _l((()=>this.tD.R_(this.UP).setMouseInteractions(!1))),this.AD=new _l((()=>this.tD.rd(this.UP).setMouseInteractions(!1))),this.Iy(h,this.uiScale),this.onResize((()=>{this.hP=!0,this.us.xs(),this.UP.tt(this.mg.ni()),this.YP.tt(this.mg.ni())})),this.gD=this.es.Cg([this.hD])}getMinimumSize(){return{x:200,y:200}}setAnimationsEnabled(t){return this}sf(){return[]}dispose(){return super.dispose(),this.KP.U(),this.qP.U(),this.tD.U(),this.iD.U(),this.sD.U(),Pa(this.UP),Pa(this.YP),this.OP.dispose(),this.aD.wp(),this.nD.wp(),this.oD.wp(),this.lD.wp(),this.uD.wp(),this.cD.wp(),this.dD.wp(),this.fD.wp(),this.AD.wp(),this}Z(){return super.Z(),this.UP.Z(),this.YP.Z(),this}J(){return super.J(),this.UP.J(),this.YP.J(),this}setBackgroundEffect(t){return this.gD.bs(t),this.us.xs(),this}getBackgroundEffect(){return this.gD.Ms()}setInteractionScrollOnWheel(t){return this.xP=t,this}getInteractionScrollOnWheel(){return this.xP}setInteractionPanOnTouch(t){return this.MP=t,this}getInteractionPanOnTouch(){return this.MP}onCellMouseEnter(t){return this.L.on(Ff.cellMouseEnter,t)}offCellMouseEnter(t){return this.L.off(t)}onCellMouseLeave(t){return this.L.on(Ff.cellMouseLeave,t)}offCellMouseLeave(t){return this.L.off(t)}onCellMouseClick(t){return this.L.on(Ff.cellMouseClick,t)}offCellMouseClick(t){return this.L.off(t)}onCellMouseDoubleClick(t){return this.L.on(Ff.cellMouseDoubleClick,t)}offCellMouseDoubleClick(t){return this.L.off(t)}onCellMouseDown(t){return this.L.on(Ff.cellMouseDown,t)}offCellMouseDown(t){return this.L.off(t)}onCellMouseUp(t){return this.L.on(Ff.cellMouseUp,t)}offCellMouseUp(t){return this.L.off(t)}onCellMouseMove(t){return this.L.on(Ff.cellMouseMove,t)}offCellMouseMove(t){return this.L.off(t)}onCellMouseDrag(t){return this.L.on(Ff.cellMouseDrag,t)}offCellMouseDrag(t){return this.L.off(t)}onCellMouseDragStart(t){return this.L.on(Ff.cellMouseDragStart,t)}offCellMouseDragStart(t){return this.L.off(t)}onCellMouseDragStop(t){return this.L.on(Ff.cellMouseDragStop,t)}offCellMouseDragStop(t){return this.L.off(t)}onCellMouseWheel(t){return this.L.on(Ff.cellMouseWheel,t)}offCellMouseWheel(t){return this.L.off(t)}onCellTouchStart(t){return this.L.on(Ff.cellTouchStart,t)}offCellTouchStart(t){return this.L.off(t)}onCellTouchMove(t){return this.L.on(Ff.cellTouchMove,t)}offCellTouchMove(t){return this.L.off(t)}onCellTouchEnd(t){return this.L.on(Ff.cellTouchEnd,t)}offCellTouchEnd(t){return this.L.off(t)}setGridBackgroundFillStyle(t){return this.hD.De(t),this.us.xs(),this}getGridBackgroundFillStyle(){return this.hD.$h()}setCellContent(t,i,s,e,h){if("number"==typeof s&&void 0!==e&&void 0!==h){const r=s,n=e,o=h;let a=[];for(let s=t;s<t+r;s+=1)for(let t=i;t<i+n;t+=1){const i=this.CP(s,t);i&&a.push(i)}a=Ri(a);let l={highlight:0};for(const t of a){const i=this.tP.indexOf(t);i<0||(l={...l,highlight:t.highlight,textFont:t.textFont,textFillStyle:t.textFillStyle,contentAlignment:t.contentAlignment,borders:t.borders,padding:t.padding,backgroundFillStyle:t.backgroundFillStyle},this.tP.splice(i,1))}const u={...l,column:t,row:i,columnSpan:r,rowSpan:n,content:o};this.tP.push(u),this.oP=!0,"string"==typeof u.content||"number"==typeof u.content?this.rP=!0:this.nP=!0,this.us.xs()}else this.yD(t,i,s);return this}setColumnContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.yD(t,e,s)}return this}setRowContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.yD(e,t,s)}return this}setTableContent(t){const i=t.length;if(0===i)return this;const s=t[0].length;if(0===s)return this;for(let e=0;e<s;e+=1)for(let s=0;s<i;s+=1){const i=t[s][e];this.yD(e,s,i)}return this}setColumnWidth(t,i){let s=this.iP.find((i=>i.column===t));return s||(s={column:t,min:void 0,max:void 0},this.iP.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.iP.splice(this.iP.indexOf(s),1):(s.min=i,s.max=i),this.lP=!0,this.us.xs(),this}setRowHeight(t,i){let s=this.sP.find((i=>i.row===t));return s||(s={row:t,min:void 0,max:void 0},this.sP.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.sP.splice(this.sP.indexOf(s),1):(s.min=i,s.max=i),this.lP=!0,this.us.xs(),this}setColumnPaddings(t,i){return"number"==typeof i&&(i=g(i,i,i,i)),this.mD(t,(t=>this.pD(t,i))),this}setRowPaddings(t,i){return"number"==typeof i&&(i=g(i,i,i,i)),this.vD(t,(t=>this.pD(t,i))),this}setCellPadding(t,i,s){return"number"==typeof s&&(s=g(s,s,s,s)),this.CP(t,i,(t=>this.pD(t,s))),this}setCellsPaddings(t){return"number"==typeof t&&(t=g(t,t,t,t)),this.JP={...this.JP,...t},this.SD((t=>this.pD(t,this.JP))),this}setCellBorders(t,i,s){return this.CP(t,i,(t=>this._P(t,s))),this}setRowBorders(t,i){return this.vD(t,(t=>this._P(t,i))),this}setColumnBorders(t,i){return this.mD(t,(t=>this._P(t,i))),this}setCellsBorders(t){return this.kP=void 0===t?Bf:t,this.SD((t=>this._P(t,this.kP))),this}setCellsBorderStrokeStyle(t){return this.ZP="function"==typeof t?t(this.ZP):t,this.mP=!0,this.us.xs(),this}setColumnTextFillStyle(t,i){return this.mD(t,(t=>this.bD(t,i))),this}setRowTextFillStyle(t,i){return this.vD(t,(t=>this.bD(t,i))),this}setCellTextFillStyle(t,i,s){return this.CP(t,i,(t=>this.bD(t,s))),this}setCellsTextFillStyle(t){return this.XP="function"==typeof t?t(this.XP):t,this.SD((t=>this.bD(t,this.XP))),this}setColumnTextFont(t,i){return this.mD(t,(t=>this.xD(t,i))),this}setRowTextFont(t,i){return this.vD(t,(t=>this.xD(t,i))),this}setCellTextFont(t,i,s){return this.CP(t,i,(t=>this.xD(t,s))),this}setCellsTextFont(t){return this.$P="function"==typeof t?t(this.$P):t,this.SD((t=>this.xD(t,this.$P))),this}setColumnContentAlignment(t,i){return this.mD(t,(t=>this.MD(t,i))),this}setRowContentAlignment(t,i){return this.vD(t,(t=>this.MD(t,i))),this}setCellContentAlignment(t,i,s){return this.CP(t,i,(t=>this.MD(t,s))),this}setCellsContentAlignment(t){return this.QP=t,this.SD((t=>this.MD(t,this.QP))),this}setCellBackgroundFillStyle(t,i,s){return this.CP(t,i,(t=>this._D(t,s))),this}setColumnBackgroundFillStyle(t,i){return this.mD(t,(t=>this._D(t,i))),this}setRowBackgroundFillStyle(t,i){return this.vD(t,(t=>this._D(t,i))),this}setCellsBackgroundFillStyle(t){return this.jP="function"==typeof t?t(this.jP):t,this.SD((t=>this._D(t,this.jP))),this}setCellHighlight(t,i,s){return this.CP(t,i,(t=>{t.highlight=zi(s)})),this.yP=!0,this.us.xs(),this}setColumnHighlight(t,i){const s=zi(i);return this.mD(t,(t=>{t.highlight=s})),this.yP=!0,this.us.xs(),this}setRowHighlight(t,i){const s=zi(i);return this.vD(t,(t=>{t.highlight=s})),this.yP=!0,this.us.xs(),this}removeCell(t,i){return this.CP(t,i,(t=>this.tP.splice(this.tP.indexOf(t),1))),this.aP=!0,this.us.xs(),this}removeRow(t){return this.vD(t,(t=>this.tP.splice(this.tP.indexOf(t),1))),this.tP.filter((i=>i.row>t)).forEach((t=>{t.row-=1})),this.aP=!0,this.us.xs(),this}removeColumn(t){return this.mD(t,(t=>this.tP.splice(this.tP.indexOf(t),1))),this.tP.filter((i=>i.column>t)).forEach((t=>{t.column-=1})),this.aP=!0,this.us.xs(),this}removeCells(){return this.tP.splice(0),this.aP=!0,this.us.xs(),this}getColumnMax(){return 0===this.tP.length?0:this.tP.reduce(((t,i)=>Math.max(t,i.column+i.columnSpan-1)),0)}getRowMax(){return 0===this.tP.length?0:this.tP.reduce(((t,i)=>Math.max(t,i.row+i.rowSpan-1)),0)}Le(t){super.Le(t),Ra.Oy(this.bh,this.Dy),super.Fy();const i=Math.round(this.ZP.O()),s=i/2;let e=this.rP||this.nP||this.oP||this.aP||this.lP||this.uP||this.AP||this.gP||this.mP||this.vP;if(e){this.tP.forEach((t=>{this.bP.add(t.column)})),this.tP.forEach((t=>{this.SP.add(t.row)}));const t=this.aD.Mp(),h=this.wD(s,t);t.finishPlot();const r=this.CD(this.bP.size,h),n=this.kD(this.SP.size,h),o=r.reduce(os,0)+i,a=n.reduce(os,0)+i,l=new Array(r.length+1).fill(0).map(((t,i)=>r.reduce(((t,s,e)=>t+(e<i?s:0)),0))),u=new Array(n.length+1).fill(0).map(((t,i)=>n.reduce(((t,s,e)=>t+(e<i?s:0)),0)));if(this.TD){const t=this.TD.columnWidths.every(((t,i)=>t===r[i])),i=this.TD.rowHeights.every(((t,i)=>t===n[i]));t&&i&&(e=!1)}this.TD={columnWidths:r,rowHeights:n,dataGridWidth:o,dataGridHeight:a,columnWidthsCumulative:l,rowHeightsCumulative:u,cellsContentSizes:h}}const h=e||this.nP||this.oP||this.aP||this.cP||this.dP||this.fP||this.gP||this.yP||this.mP||this.hP||this.vP;if((h||this.pP)&&this.TD){const t=this.mg.getInnerIntervalPixels(),e=Ra.Vy(this.bh,this.Dy),r=[this.Ca.left+s,this.Ca.right+s],n=[this.Ca.bottom+s,this.Ca.top+e+s],o={x:t.x-r[0]-r[1],y:t.y-n[0]-n[1]},a=[this.Ca.left,this.Ca.right],l=[this.Ca.bottom,this.Ca.top+e],u={x:Math.round(t.x-a[0]-a[1]),y:Math.round(t.y-l[0]-l[1])},c={x:Math.ceil(s),y:Math.floor(u.y-s)};this.YP.Ri(r).Ei(n).zi(0,o.x).Vi(0,o.y),this.OP._I({x:this.TD.dataGridHeight,y:this.TD.dataGridWidth}).Es().Le();const d={x:Math.round(this.HP.x),y:Math.round(Math.min(0,this.HP.y))};this.UP.Ri(a).Ei(l).zi(d.x,u.x+d.x).Vi(d.y,u.y+d.y),this.hD.Re({x:c.x,y:c.y});const f={x:this.UP.x.si(),y:this.UP.y.si()+this.OP.xI(),width:this.UP.x.hi()+i-this.OP.xI(),height:this.UP.y.hi()+i};this.tD.ab(f),this.qP.ab(f),this.KP.ab(f);const A=this.TD,g=[{x:this.UP.x.getInnerStart(),y:this.UP.y.getInnerStart()},{x:this.UP.x.getInnerEnd(),y:this.UP.y.getInnerStart()},{x:this.UP.x.getInnerEnd(),y:this.UP.y.getInnerEnd()},{x:this.UP.x.getInnerStart(),y:this.UP.y.getInnerEnd()}];A.cellsContentSizes.forEach((t=>{var i;const s={x:c.x+A.columnWidthsCumulative[t.cell.column],y:c.y-A.rowHeightsCumulative[t.cell.row+t.cell.rowSpan]},e={x:s.x+A.columnWidths[t.cell.column],y:s.y+A.rowHeights[t.cell.row]},h=hs([s,{x:e.x,y:s.y},e,{x:s.x,y:e.y}],g);null===(i=t.text)||void 0===i||i.setVisible(h)})),h&&this.FD(c,this.TD,i)}this.hP=!1,this.rP=!1,this.nP=!1,this.oP=!1,this.aP=!1,this.lP=!1,this.uP=!1,this.cP=!1,this.dP=!1,this.fP=!1,this.AP=!1,this.gP=!1,this.yP=!1,this.mP=!1,this.pP=!1,this.vP=!1}wD(t,i){const s=[],e={left:Math.ceil(t),right:Math.ceil(t),top:Math.ceil(t),bottom:Math.ceil(t)};for(const t of this.tP){const{content:h}=t,r={...this.JP,...t.padding};let n,o,a,l={x:0,y:0};if("string"==typeof h||"number"==typeof h){const s=String(h);n=i.add(),l=n.yr(s).Zh(t.textFont||this.$P).Es().sd()}if(of(h)&&(o=h,l={x:200,y:50}),Ln(h)){const t=this.us.ID(h);t.PD()?(a=h,l=a.ni()):t.DD((()=>{this.vP=!0,this.us.xs()}))}if(n||o||a){r.top=Math.round(r.top),r.left=Math.round(r.left),r.right=Math.round(r.right),r.bottom=Math.round(r.bottom);const i={x:Math.round(l.x+r.left+r.right+e.left+e.right),y:Math.round(l.y+r.top+r.bottom+e.top+e.bottom)};s.push({cell:t,contentSize:i,text:n,sparkChart:o,icon:a,cellPadding:r,cellMargin:e})}}return s}FD(t,i,s){const{dataGridWidth:e,dataGridHeight:h,cellsContentSizes:r,columnWidths:n,columnWidthsCumulative:o,rowHeights:a,rowHeightsCumulative:l}=i,u={x:e-s,y:-h+s};this.hD.tt(u),this.rD.Ge(this.ZP),this.eP.clear();const c={cellBackground:this.nD.Mp(),cellIconRect:this.oD.Mp(),lineSet:this.lD.Mp(),line:this.uD.Mp(),pointSet:this.cD.Mp(),rect:this.dD.Mp(),junction:this.fD.Mp(),arc:this.AD.Mp()},d=[];for(const i of r){const{cell:e,text:h,sparkChart:r,icon:u,cellPadding:f,cellMargin:A}=i,g={column:e.column,row:e.row},y={x:t.x+o[e.column],y:t.y-l[e.row+e.rowSpan]},m={x:y.x+A.left,y:y.y+A.bottom},p={x:m.x+f.left,y:m.y+f.bottom},v={x:new Array(e.columnSpan).fill(0).reduce(((t,i,s)=>t+n[e.column+s]),0),y:new Array(e.rowSpan).fill(0).reduce(((t,i,s)=>t+a[e.row+s]),0)},S={x:v.x-A.left-A.right,y:v.y-A.top-A.bottom},b={x:S.x-f.left-f.right,y:S.y-f.top-f.bottom};if(h){const t=Df(p,b,e.contentAlignment||this.QP);h.Re(t[0]).Ha({x:t[1],y:t[2]}).De(this.BD(e.textFillStyle||this.XP,e.content,this.XP)).cs(e.highlight)}const x=this.BD(e.backgroundFillStyle||this.jP,e.content);if(x!==O){const t=c.cellBackground.add();t.Re(y).tt(v).De(x).Pe(at).cs(e.highlight),this.eP.set(t,g)}const M=e.borders||this.kP;if(M&&Pf(y,v,M,s,d),r){const t=p,i=b;af(r,c,this.UP,t,i,this.qi,this.vA,e.highlight)}if(u){const t=u.ni(),i=Df(p,b,e.contentAlignment||this.QP);c.cellIconRect.add().Re({x:i[0].x+t.x*(-.5-i[1]/2),y:i[0].y+t.y*(-.5-i[2]/2)}).tt(t).De(new Cn({source:u.cc,fitMode:_n.Stretch})).Pe(at).cs(e.highlight)}}this.rD.Vt();for(const t of d)this.rD.$r().Hg(t[0],t[1]);c.cellBackground.finishPlot(),c.cellIconRect.finishPlot(),c.lineSet.finishPlot(),c.line.finishPlot(),c.pointSet.finishPlot(),c.rect.finishPlot(),c.junction.finishPlot(),c.arc.finishPlot()}CD(t,i){const s=new Array(t).fill(0);for(const t of this.bP.values()){const e=i.filter((i=>t>=i.cell.column&&t+1<=i.cell.column+i.cell.columnSpan)).reduce(((t,i)=>{const s=i.contentSize.x/i.cell.columnSpan;return Math.max(t,s)}),0),h=this.iP.find((i=>i.column===t)),r=h?$t(e,void 0!==h.min?h.min:qi,void 0!==h.max?h.max:Ki):e;s[t]=r}return s}kD(t,i){const s=new Array(t).fill(0);for(const t of this.SP.values()){const e=i.filter((i=>t>=i.cell.row&&t+1<=i.cell.row+i.cell.rowSpan)).reduce(((t,i)=>{const s=i.contentSize.y/i.cell.rowSpan;return Math.max(t,s)}),0),h=this.sP.find((i=>i.row===t)),r=h?$t(e,void 0!==h.min?h.min:qi,void 0!==h.max?h.max:Ki):e;s[t]=r}return s}BD(t,i,s){if(Z(t)){try{const s=Number(i);return new U({color:t.getPalette().getColors(s)})}catch(t){}return s||O}return t}bD(t,i){t.textFillStyle="function"==typeof i?i(t.textFillStyle||this.XP):i,this.fP=!0,this.us.xs()}xD(t,i){t.textFont="function"==typeof i?i(t.textFont||this.$P):i,this.AP=!0,this.us.xs()}_D(t,i){t.backgroundFillStyle="function"==typeof i?i(t.backgroundFillStyle||this.jP):i,this.dP=!0,this.us.xs()}MD(t,i){t.contentAlignment=i,this.cP=!0,this.us.xs()}pD(t,i){t.padding={...t.padding,...i},this.uP=!0,this.us.xs()}yD(t,i,s){let e=this.CP(t,i);e?e.content=s:(e={column:t,row:i,columnSpan:1,rowSpan:1,content:s,highlight:0},this.tP.push(e),this.oP=!0),"string"==typeof e.content||"number"==typeof e.content?this.rP=!0:this.nP=!0,this.us.xs()}SD(t){this.tP.forEach((i=>t(i)))}CP(t,i,s){const e=this.tP.find((s=>t>=s.column&&t+1<=s.column+s.columnSpan&&i>=s.row&&i+1<=s.row+s.rowSpan));return e&&s&&s(e),e}mD(t,i){const s=this.tP.filter((i=>t>=i.column&&t+1<=i.column+i.columnSpan));for(const t of s)t&&i(t)}vD(t,i){const s=this.tP.filter((i=>t>=i.row&&t+1<=i.row+i.rowSpan));for(const t of s)t&&i(t)}eD(){return new kf(this.sD,this.iD,this.YP,this.YP,this.UP,this.qi,xf.Both).onScroll(((t,i)=>{this.TD&&(t===xf.Vertical&&(this.HP.y=-i),t===xf.Horizontal&&(this.HP.x=i),this.pP=!0,this.us.xs())})).jI(50).ZI(12)}}const Ff={cellMouseEnter:"cellMouseEnter",cellMouseLeave:"cellMouseLeave",cellMouseClick:"cellMouseClick",cellMouseDoubleClick:"cellMouseDoubleClick",cellMouseDown:"cellMouseDown",cellMouseUp:"cellMouseUp",cellMouseMove:"cellMouseMove",cellMouseDrag:"cellMouseDrag",cellMouseDragStart:"cellMouseDragStart",cellMouseDragStop:"cellMouseDragStop",cellMouseWheel:"cellMouseWheel",cellTouchStart:"cellTouchStart",cellTouchMove:"cellTouchMove",cellTouchEnd:"cellTouchEnd"};var If;!function(t){t.Center="center",t.RightCenter="right-center",t.LeftCenter="left-center",t.RightTop="right-top",t.LeftTop="left-top",t.RightBottom="right-bottom",t.LeftBottom="left-bottom",t.CenterTop="center-top",t.CenterBottom="center-bottom"}(If||(If={}));const Pf=(t,i,s,e,h)=>{const r={x:t.x,y:t.y},n={x:t.x,y:t.y+i.y},o={x:t.x+i.x,y:t.y},a={x:t.x+i.x,y:t.y+i.y};s.top&&h.push([n,a]),s.bottom&&h.push([r,o]),s.left&&h.push([r,n]),s.right&&h.push([o,a])},Df=(t,i,s)=>{const e=t.x,h=t.x+i.x,r=t.x+i.x/2,o=t.y+i.y,a=t.y,l=t.y+i.y/2;switch(s){case"left-center":return[n(e,l),-1,0];case"right-center":return[n(h,l),1,0];case"center":return[n(r,l),0,0];case"left-bottom":return[n(e,a),-1,-1];case"right-bottom":return[n(h,a),1,-1];case"center-bottom":return[n(r,a),0,-1];case"left-top":return[n(e,o),-1,1];case"right-top":return[n(h,o),1,1];case"center-top":return[n(r,o),0,1]}return Oi(0,`Unidentified DataGrid cell content alignment option: ${s}`)},Bf={top:!1,bottom:!1,left:!1,right:!1};class Lf extends xh{constructor(t,i,s,e,h,r){super(t,{Fr(){},Tr(){},Pr(){}},e,i,s,{numeric:i.xAxisNumericTicks,datetime:i.xAxisDateTimeTicks,time:i.xAxisTimeTicks},{type:"linear"}),this.chart=t,this.es=r,this.Ds=h,this._h=h.Nr(t.LD).Zh(this.qi.barChartCategoryAxisTitleFont||this.qi.xAxisTitleFont).De(this.qi.barChartCategoryAxisTitleFillStyle||this.qi.xAxisTitleFillStyle),this.setTitleRotation(this.chart.Bs.getWidth({x:0,y:-90})),this.Kh=this.es.Cg([this._h]).bs(i.effectsText),this.RD=h.We(t.LD).Ge(i.barChartCategoryAxisStrokeStyle||i.xAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.Pg=t,this.Dg=t):"object"==typeof t&&(this.Pg=t.min,this.Dg=t.max),this.chart.us.xs(),this}getThickness(){return{min:this.Pg,max:this.Dg}}setStrokeStyle(t){return this.RD.Ge(t),this.chart.us.xs(),this}getStrokeStyle(){return this.RD.mu()}Es(){if(!this.ji)return{Eg:0,zg:0,Hd:$t(0,void 0!==this.Pg?this.Pg:0,void 0!==this.Dg?this.Dg:Ki)};const t=this.RD.mu().O()/2,i=this.chart.Bs.getHeight(this._h.Es().sd());return{Eg:t,zg:i,Hd:t+i}}Le(t,i,s,e){const h=this.getInterval(),r=this.chart.valueAxis.getInterval();this.RD.Ye(this.chart.Bs.toPoint(h.start,r.start)).Ue(this.chart.Bs.toPoint(h.end,r.start)).setVisible(this.ji),this._h.Re(this.chart.Bs.toPoint(.5*(h.start+h.end),this.chart.valueAxis.ft.gi(r.start,-(t.Eg+e.labelMarginBeforeCategoryAxisPixels)))).Ha(this.chart.Bs.toPoint(0,1)).setVisible(this.ji)}setMouseInteractions(t){return this}vr(t,i){return new Mh(i,t,this.Ds,this.chart.LD)}Sr(t,i){return{}}Br(t,i){return i}Rr(t,i,s){return{min:t,max:i}}}class Rf extends xh{constructor(t,i,s,e,h,r,n){super(t,{Fr:()=>{var i;if(t.ED){if("positive"===t.zD||"bipolar"===t.zD){if("after-bar"===(null===(i=t.VD)||void 0===i?void 0:i.position)){const i=this.ft.hi();return this.ft.gi(t.ED.max,Math.min(this.chart.Bs.getHeight(this.chart.OD())+t.VD.labelMargin,.3*i))}return t.ED.max}return t.ND?$t(-1,-1e-6,t.ED.max):0}},Tr:()=>{var i;if(t.ED){if("negative"===t.zD||"bipolar"===t.zD){if("after-bar"===(null===(i=t.VD)||void 0===i?void 0:i.position)){const i=this.ft.hi();return this.ft.gi(t.ED.min,-Math.min(this.chart.Bs.getHeight(this.chart.OD())+t.VD.labelMargin,.3*i))}return t.ED.min}return t.ND?$t(1,1e-6,t.ED.min):0}},Pr:()=>{}},e,i,s,{numeric:i.barChartValueAxisTicks||i.yAxisNumericTicks,datetime:i.yAxisDateTimeTicks,time:i.yAxisTimeTicks},n),this.chart=t,this.es=r,this.Ds=h,this._h=h.Nr(t.LD).Zh(this.qi.barChartValueAxisTitleFont||this.qi.yAxisTitleFont).De(this.qi.barChartValueAxisTitleFillStyle||this.qi.yAxisTitleFillStyle),this.setTitleRotation(this.chart.Bs.getHeight({x:0,y:-90})),this.Kh=this.es.Cg([this._h]).bs(i.effectsText),this.RD=h.We(t.LD).Ge(i.barChartValueAxisStrokeStyle||this.qi.yAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.Pg=t,this.Dg=t):"object"==typeof t&&(this.Pg=t.min,this.Dg=t.max),this.chart.us.xs(),this}getThickness(){return{min:this.Pg,max:this.Dg}}setStrokeStyle(t){return this.RD.Ge(t),this.chart.us.xs(),this}getStrokeStyle(){return this.RD.mu()}setTickStrategy(t,i){return super.Nh(t,i)}Es(t){if(!this.ji)return this.qh(),{Eg:0,zg:0,Hd:$t(0,void 0!==this.Pg?this.Pg:0,void 0!==this.Dg?this.Dg:Ki)};const i=this.chart.Bs.getWidth(this.chart.LD).hi(),s=this.ft.hi();this.nr({physicalAxisSize:s,oppositeAxisSize:i,plotLines:t});let e=0;for(const t of this.hh.values())for(const i of t.values()){const t=i.Ph.pr,s=this.chart.Bs.getWidth(i.th.sd()),h=t.getTickLength()+t.getTickPadding()+s;e=Math.max(e,h)}const h=e+this.RD.mu().O()/2,r=this.chart.Bs.getWidth(this._h.Es().sd());return{Eg:h,zg:r,Hd:$t(h+r,void 0!==this.Pg?this.Pg:0,void 0!==this.Dg?this.Dg:Ki)}}Le(t){const i=this.getInterval();this.RD.Ye(this.chart.Bs.toPoint(-.5,this.Gh)).Ue(this.chart.Bs.toPoint(-.5,this.Wh)).setVisible(this.ji);const s="logarithmic"===this.Vh.type?Math.sqrt(i.start+i.end):.5*(i.start+i.end),e=this.chart.Bs.toPoint(this.chart.categoryAxis.ft.gi(-.5,t.Eg*this.chart.Bs.GD),s),h=this.chart.Bs.toPoint(this.chart.Bs.WD,0);this._h.Re(e).Ha(h).setVisible(this.ji)}setMouseInteractions(t){return this}vr(t,i){return new Mh(i,t,this.Ds,this.chart.LD)}Sr(t,i){const s=t.Ph.pr,e=this.chart.Bs.toPoint(-.5,t.S),h=this.chart.LD.gi(e,this.chart.Bs.toPoint(s.getTickLength()*this.chart.Bs.GD,0)),r=this.chart.LD.gi(e,this.chart.Bs.toPoint(s.gridStrokeLength*i.oppositeAxisSize*-this.chart.Bs.GD,0)),n=this.chart.LD.gi(h,this.chart.Bs.toPoint(s.getTickPadding()*this.chart.Bs.GD,0));t.th.Re(n).Ha(this.chart.Bs.toPoint(this.chart.Bs.WD,s.getLabelAlignment())).Qh(s.getLabelRotation()),s.tickStyle!==at&&0!==s.tickLength&&i.plotLines.add({positions:[e,h]},{lineStyle:s.tickStyle}),s.gridStrokeStyle!==at&&s.gridStrokeLength>0&&i.plotLines.add({positions:[e,r]},{lineStyle:s.gridStrokeStyle})}Br(t,i){return"linear"===this.Vh.type?ae(t,i,this.ft):le(t,i,this.ft)}Rr(t,i,s){return{min:t,max:i}}}class Ef extends Mu{constructor(t,i,s,e,h,r,n){super(t,i,s,e),this.jo=$i(),this.S=0,this.UD=!1,this.chart=t,this.chart=t,this.category=h,this.subCategory=r,this.ws=h,this.ke=Ii(s.barChartBarFillStyle||s.rectangleSeriesFillStyle,n),this.Te=Ii(s.barChartBarStrokeStyle||s.rectangleSeriesStrokeStyle,n),this.onVisibleStateChanged((()=>{this.chart.YD()})),this.onDispose((()=>{this.chart.YD(),this.chart.HD.delete(this.category),this.chart.$D.delete(this)}))}Ji(t,i){const s=this.chart.us.Oo(i);return{cursorPosition:{pointMarker:{x:s.engineX,y:s.engineY},pointMarkerScale:this.chart.us.ft,resultTable:{x:s.engineX,y:s.engineY},resultTableScale:this.chart.us.ft},category:this.category,subCategory:this.subCategory,bar:this,value:this.getValue()}}setValue(t){return this.UD=!0,this.S=t,this.chart.YD(),this.chart.us.xs(),this.chart.HD.delete(this.category),this.chart.$D.delete(this),this}getValue(){return this.S}get value(){return this.S}setFillStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.chart.YD(),this}getFillStyle(){return this.ke}setStrokeStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.chart.YD(),this}getStrokeStyle(){return this.Te}nv(){return this.lv}setEffect(t){return this.chart.setBarsEffect(t),this}styleLegendEntry(t,i=!1){Ci(t,this.qi,i,{fill:this.ke})}}const zf=t=>!!(t&&"object"==typeof t&&"iCategory"in t&&"number"==typeof t.iCategory&&"value"in t&&"number"==typeof t.value),Vf=(t,i,s)=>{const e=t.Ld.filter((t=>void 0!==t)),h=e.map((t=>s(t.sizePixels))).reduce(((t,i)=>Math.max(t,i)),1),r=Math.ceil(h/(i/e.length));return r<=1?e:e.filter(((t,i)=>i%r==0))};class Of extends Nl{constructor(t,i,s,e,h,r,n){var o;let a;super(t,i,s,i.Py("barChart bg",0),e,i.us.qi.barChartBackgroundFillStyle||i.us.qi.chartXYBackgroundFillStyle,i.us.qi.barChartBackgroundStrokeStyle||i.us.qi.chartXYBackgroundStrokeStyle,i.us.qi.barChartTitleFont||i.us.qi.chartXYTitleFont,i.us.qi.barChartTitleFillStyle||i.us.qi.chartXYTitleFillStyle,r),this.coordsBars="barChart",this.XD=Gf.Descending,this.jD=this.qi.barChartCategoryLabels,this.VD=this.qi.barChartValueLabelsAfterBars,this.ZD=!1,this.XM=Yi(),this.HD=new Map,this.$D=new Map,this.zD="positive",this.QD="columns",this.JD=!0,this.KD=new Map,this.qD={speed:1},this.Tm={speed:1},this.tB=.08,this.iB=[],this._n=(t,i,s,e,h)=>{this.LD.tt(e,h)},this.us.jn(Vo.Af),this.Bs="horizontal"===(null==n?void 0:n.type)?Uf:Wf,this.bh.yr("Bar Chart"),this.sB=i.jm("barChart plotting 1",0),this.eB=i.jm("barChart plotting 2",1),this.ND="logarithmic"===(null===(o=null==n?void 0:n.valueAxis)||void 0===o?void 0:o.type),this.ND?"horizontal"===this.Bs.hB?(a=s.d1({scale1DConstructor:Zs,dimension:"y"}),this.LD=(new qs).Li(s.d1({scale1DConstructor:Ns,dimension:"x"}),a)):(a=s.d1({scale1DConstructor:Zs,dimension:"x"}),this.LD=(new qs).Li(a,s.d1({scale1DConstructor:Ns,dimension:"y"}))):(this.LD=s.d2({scaleXYConstructor:Ks}),a=this.Bs.getWidth(this.LD)),this.rB=this.es.Cg(),this.QM=new Ml((()=>this.XM.xt(this.sB.Yp(this.LD).na(0))),((t,i,s)=>(t.De(s.fillStyle).Pe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.$r();return s.wl(i.vertices),this.XM.zt(s,i.bar),i.bar.ys([s]),s})))),(()=>{this.XM.Vt()}),(t=>{this.rB.As(t)})),this.Vv=this.uy.Be(this.LD).De(this.qi.barChartSeriesBackgroundFillStyle||O).Pe(at),this.Ov=this.uy.Be(this.LD).De(O).Pe(this.qi.barChartSeriesBackgroundStrokeStyle||at).setMouseInteractions(!1),super.zv(this.Vv,this.Ov),this.categoryAxis=new Lf(this,this.qi,!1!==(null==n?void 0:n.animationsEnabled),a,this.eB,this.es);const l=oe(null==n?void 0:n.valueAxis);this.valueAxis=new Rf(this,this.qi,!1!==(null==n?void 0:n.animationsEnabled),this.Bs.getHeight(this.LD),this.eB,this.es,l.type),this.nB=new _l((()=>this.eB.Nr(this.LD).Or(Hi).Vr(Hi).na(1))),this.oB=new Ml((()=>this.uy.Ug(this.LD).setMouseInteractions(!1)),((t,i,s)=>(t.Ge(s.lineStyle),i.map((({positions:i,existingMember:s})=>(s||t.$r()).Hg(i[0],i[1]))))));const u=i.Qm(),c=jt(n?n.cursorBuilder:void 0,Ka);this.Jm=Va(this,u,c.pm(u,this.uiScale,this.uiScale,Yt,this.qi),this,"show-pointed",Yf,(()=>0)),this.onResize(this._n),this.Iy(h,this.LD),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled))}getSeries(){return this.Bv}setCursor(t){return this.Jm.setCursor(t),this}getCursor(){return this.Jm.getCursor()}setCursorMode(t){return this.Jm.setCursorMode(t),this}getCursorMode(){return this.Jm.getCursorMode()}setCustomCursor(t){return this.Jm.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.Jm.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.Jm.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Jm.setCursorFormatting(t),this}getCursorFormatting(){return this.Jm.getCursorFormatting()}addCursor(t=Ka){const i=this.vy(),s=t.pm(i,this.uiScale,this.uiScale,this.Ay(i),this.qi);return this.ky(s),s}setBarsMargin(t){return this.tB=$t(t,0,.49),this.ZD=!0,this.us.xs(),this}getBarsMargin(){return this.tB}setBarsEffect(t){return this.rB.bs(t),this.us.xs(),this}getBarsEffect(){return this.rB.Ms()}setData(t){let i;if(Array.isArray(t))i=[],t.forEach(((t,s)=>{"string"==typeof t?i.push({category:t}):"number"==typeof t?i.push({category:`Category ${s+1}`,value:t}):"object"==typeof t&&i.push(t)}));else{i=[];const s=Object.keys(t);for(const e of s){const s=t[e];i.push({category:e,value:"number"==typeof s?s:void 0})}}return this.aB("columns",i),this}setDataStacked(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:h}=i;h.forEach(((i,h)=>{const r=t[h];s.push({category:r,subCategory:e,value:i})}))})),this.aB("stacks",s),this}setDataGrouped(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:h}=i;h.forEach(((i,h)=>{const r=t[h];s.push({category:r,subCategory:e,value:i})}))})),this.aB("groups",s),this}aB(t,i){this.Bv.length>0&&this.us.jn(Vo.kf),this.QD=t,this.iB=i.map((t=>t.category)),this.lB(i);const s=Ri(i.map((t=>t.category))),e=s.length,h=Ri(i.map((t=>t.subCategory))).filter((t=>void 0!==t));if(i.forEach((t=>{let i=this.Bv.find((i=>i.category===t.category&&i.subCategory===t.subCategory));if(!i){const e=s.indexOf(t.category),r=h.includes(t.subCategory)?h.indexOf(t.subCategory):void 0;i=new Ef(this,this.Rv,this.qi,this.us.es,t.category,t.subCategory,jt(r,e)),this.Nv(i),this.KD.set(i,{category:e,valueStart:this.ND?1e-6:0,valueEnd:void 0!==t.value?t.value:0})}void 0!==t.value&&i.setValue(t.value)})),this.Bv.slice().forEach((t=>{void 0===i.find((i=>i.category===t.category&&i.subCategory===t.subCategory))&&(t.dispose(),this.KD.delete(t))})),this.categoryAxis.setInterval(this.Bs.getWidth({x:{start:-.5,end:e-.5},y:{start:e-.5,end:-.5}})),this.ED=0===this.Bv.length?void 0:"stacks"!==t?this.Bv.reduce(((t,i)=>({min:Math.min(t.min,i.getValue()),max:Math.max(t.max,i.getValue())})),{min:Ki,max:qi}):{min:0,max:s.reduce(((t,s)=>Math.max(t,i.reduce(((t,i)=>i.category!==s?t:void 0!==i.value?t+i.value:t),0))),0)},this.ED&&(this.zD=this.ED.min>=0?"positive":this.ED.max<=0?"negative":"bipolar",("bipolar"===this.zD||"negative"===this.zD)&&this.ND))throw new Error("LightningChart JS BarChart bipolar/negative data + logarithmic value axis combination not supported.");this.lB(this.Bv),this.HD.clear(),this.$D.clear(),this.ZD=!0,this.us.xs()}setCategoryLabels(t){const i="function"==typeof t?this.jD?t(this.jD):this.jD:t;return this.jD=i?{...this.qi.barChartCategoryLabels,...i}:void 0,this.HD.clear(),this.us.xs(),this}getCategoryLabels(){return this.jD}setValueLabels(t){var i;const s="function"==typeof t?this.VD?t(this.VD):this.VD:t,e=(null==s?void 0:s.position)||(null===(i=this.VD)||void 0===i?void 0:i.position);return s&&e?"after-bar"===e?this.VD={...this.qi.barChartValueLabelsAfterBars,...s}:"inside-bar"!==e&&"inside-bar-start"!==e&&"inside-bar-centered"!==e&&"inside-bar-end"!==e||(this.VD={...this.qi.barChartValueLabelsInsideBars,...s}):this.VD=void 0,this.$D.clear(),this.us.xs(),this}getValueLabels(){return this.VD}setLabelFittingEnabled(t){return this.JD=t,this.us.xs(),this}getLabelFittingEnabled(){return this.JD}getBar(t,i){if(("groups"===this.QD||"stacks"===this.QD)&&void 0===i)throw new Error("LightningChart JS BarChart.getBar() | `subCategory` parameter is required for grouped and stacked bar charts!");const s=this.Bv.find((s=>s.category===t&&(void 0===i||i===s.subCategory)));if(!s)throw new Error(`BarChart.getBar() no such bar: "${t}" ${i?`"${i}"`:""}`);return s}getBars(){return this.Bv}setSorting(t){this.XD=t;const i=this.Bv.slice();return this.Bv.length=0,this.Bv.push(...Ei(this.iB.map((t=>i.find((i=>i.category===t)))))),this.lB(this.Bv),this.us.xs(),this}getSorting(){return this.XD}setAnimationCategoryPosition(t,i=1){return this.qD=t?{speed:i}:void 0,this.us.xs(),this}setAnimationValues(t,i=1){return this.Tm=t?{speed:i}:void 0,this.us.xs(),this}translateCoordinate(t,i,s){if(s&&he(t)&&ee(i))return super.translateCoordinate(t,i,s);const e=i;let h;if(se(t))h=this.us.Oo(t);else if(he(t)){const i=At(t,this.mg,this.us.ft);h={engineX:i.x,engineY:i.y}}else{if(!zf(t))throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Input coordinate system not recognized.");{const i=At(this.Bs.toPoint(t.iCategory,t.value),this.LD,this.us.ft);h={engineX:i.x,engineY:i.y}}}if(ie(e))return this.us.No(h);if("barChart"===e){const t=At({x:h.engineX,y:h.engineY},this.us.ft,this.LD);return{iCategory:this.Bs.getWidth(t),value:this.Bs.getHeight(t)}}if(ee(e))return At({x:h.engineX,y:h.engineY},this.us.ft,this.mg);throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Target coordinate system not recognized.")}sf(){if("columns"===this.QD)return this.Bv;const t=Ri(Ei(this.Bv.map((t=>t.subCategory))));return Ei(t.map((t=>{const i=this.Bv.filter((i=>i.subCategory===t)),s=i[0];if(s)return(t=>{let i=!1;t.forEach((s=>s.onHighlight(((e,h)=>{i||(i=!0,t.forEach((t=>s!==t?t.setHighlight(h):void 0)),i=!1)})))),t.forEach((i=>i.onDispose((()=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)}))))})(i),{attach(e,h){return Vi(e,i,{toggleVisibilityOnClick:!0,label:t,style:s.getFillStyle()}),this}}})))}Le(t){var i,s;super.Le(t);const e=this.nB.Mp(),h=this.oB.Mp(),r=this.Bv.filter((t=>t.getVisible()&&t.UD)),n=Ri(r.map((t=>t.category))),o=Ri(Ei(r.map((t=>t.subCategory)))),a=5e-4*t*((null===(i=this.qD)||void 0===i?void 0:i.speed)||0),l=.003*t*((null===(s=this.qD)||void 0===s?void 0:s.speed)||0),u=this.valueAxis.ft,c=u instanceof Zs?(t,i)=>{var s;return ae(t,i,u,(null===(s=this.Tm)||void 0===s?void 0:s.speed)||0)}:(t,i)=>{var s;return le(t,i,u,(null===(s=this.Tm)||void 0===s?void 0:s.speed)||0)};let d;"columns"===this.QD?d=r.map((t=>({bar:t,position:{category:n.indexOf(t.category),valueStart:this.ND?1e-6:0,valueEnd:t.value}}))):"groups"===this.QD?d=r.map((t=>{const i=n.indexOf(t.category),s=o.indexOf(t.subCategory),e=1/(o.length+2*(o.length+1)*this.tB),h=this.tB*e;return{bar:t,position:{category:i+(s-(o.length-1)/2)*(e+h),valueStart:this.ND?1e-6:0,valueEnd:t.value}}})):(d=[],n.forEach(((t,i)=>{const s=r.filter((i=>i.category===t));let e=this.ND?1e-6:0;s.forEach(((i,s)=>{d.push({bar:i,position:{category:n.indexOf(t),valueStart:e,valueEnd:e+i.value}}),e+=i.value}))}))),d.forEach((t=>{const{bar:i,position:s}=t;let e,h,r=this.KD.get(i);void 0===r&&(r=s);const n=s.valueStart;if(this.qD&&r.category!==s.category){const t=Math.sign(s.category-r.category);e=r.category+a*t+l*(s.category-r.category),t!==Math.sign(s.category-e)&&(e=s.category)}else e=s.category;if(this.Tm&&r.valueEnd!==s.valueEnd){const t=Math.sign(s.valueEnd-r.valueEnd);h=c(r.valueEnd,s.valueEnd),t!==Math.sign(s.valueEnd-h)&&(h=s.valueEnd)}else h=s.valueEnd;this.KD.set(i,{category:e,valueStart:n,valueEnd:h}),e===s.category&&h===s.valueEnd||this.us.xs(!0),e===r.category&&h===r.valueEnd||(this.ZD=!0)})),Ra.Oy(this.bh,this.Dy);const f=r.length>0;this.categoryAxis.Dr(),this.valueAxis.Dr();const A=this.categoryAxis.setVisible(f).Es(),g=this.valueAxis.setVisible(f).Es(h),{labelMarginBeforeCategoryAxisPixels:y}=f?this.uB(n,r,e,h):{labelMarginBeforeCategoryAxisPixels:0};this.categoryAxis.Le(A,e,h,{labelMarginBeforeCategoryAxisPixels:y}),this.valueAxis.Le(g);const m=this.categoryAxis.getThickness(),p=$t(A.Hd+y,void 0!==m.min?m.min:0,void 0!==m.max?m.max:Ki),v={x:Math.min(this.LD.x.getInnerStart(),this.LD.x.getInnerEnd()),y:Math.min(this.LD.y.getInnerStart(),this.LD.y.getInnerEnd())},S=Math.max(this.LD.x.getInnerStart(),this.LD.x.getInnerEnd()),b=Math.max(this.LD.y.getInnerStart(),this.LD.y.getInnerEnd()),x={x:S-v.x,y:b-v.y};this.Vv.Re(v),this.Vv.tt(x),this.Ov.Re(v),this.Ov.tt(x),super.Fy(),this.Jm.Le(!1,this.Bv,void 0);const M=Ra.Vy(this.bh,this.Dy);if(this.LD.Ei([this.$t.bottom+this.Ca.bottom+("vertical"===this.Bs.hB?p:0),this.$t.top+this.Ca.top+M+("horizontal"===this.Bs.hB?g.Hd:0)]),this.LD.Ri([this.$t.left+this.Ca.left+this.Bs.getHeight({x:p,y:g.Hd}),this.$t.right+this.Ca.right]),this.sB.ab({x:this.LD.x.si(),y:this.LD.y.si(),width:this.LD.x.hi(),height:this.LD.y.hi()}),this.hy&&this.hy(),this.ZD){const t=this.QM.Mp(),i="groups"===this.QD?1/(o.length+2*(o.length+1)*this.tB):1-2*this.tB;r.forEach((s=>{const e=this.KD.get(s);if(void 0===e)return;const h=e.category-.5*i,r=e.category+.5*i,n=[this.Bs.toPoint(h,e.valueStart),this.Bs.toPoint(h,e.valueEnd),this.Bs.toPoint(r,e.valueEnd),this.Bs.toPoint(r,e.valueStart)];t.add({jo:s.jo,vertices:n,bar:s},{fillStyle:s.ke,strokeStyle:s.Te})})),t.finishPlot()}e.finishPlot(),h.finishPlot(),this.ZD=!1}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationCategoryPosition(t),this.setAnimationValues(t),this.valueAxis.setAnimationsEnabled(t),this.categoryAxis.setAnimationsEnabled(t),this}dispose(){return this.eB.U(),this.sB.U(),this.Jm.U(),super.dispose()}lB(t){const i=this.XD;i&&t.sort(((s,e)=>i({category:s.category,value:t.reduce(((t,i)=>t+(i.category===s.category&&i.value||0)),0)},{category:e.category,value:t.reduce(((t,i)=>t+(i.category===e.category&&i.value||0)),0)})))}uB(t,i,s,e){let h=0;const r=this.jD,n=this.VD,o=this.valueAxis.getInterval(),a=this.Bs.getWidth({x:this.LD.x.hi(),y:this.LD.y.hi()});if(r&&r.labelFillStyle!==O){const n=r.tickLength+r.labelMargin,l=this.Bs.toPoint(0,1),u={Ld:t.map(((t,s)=>{const e=i.reduce(((i,s)=>s.category!==t?i:i+s.value),0),h=r.formatter(t,e);if(!h)return;const a=s;return void 0!==a?{text:h,position:this.Bs.toPoint(a,this.valueAxis.ft.gi(o.start,-n)),alignment:l,rotation:r.labelRotation,sizePixels:this.cB(t,e)}:void 0})),$u:r.labelFont,ft:this.LD},c=u?this.JD?Vf(u,a,this.Bs.getWidth):u.Ld:[];c.forEach((t=>{t&&s.add().yr(t.text).Re(t.position).Ha(t.alignment).Qh(t.rotation).De(r.labelFillStyle).Zh(r.labelFont)})),r.tickStyle!==at&&0!==r.tickLength&&c.forEach((t=>{if(!t)return;const i=this.Bs.getWidth(t.position);e.add({positions:[this.Bs.toPoint(i,this.valueAxis.ft.getInnerStart()),this.Bs.toPoint(i,this.valueAxis.ft.gi(o.start,-r.tickLength))]},{lineStyle:r.tickStyle})})),h=c.reduce(((t,i)=>i?Math.max(t,this.Bs.getHeight(i.sizePixels)):t),0)+r.tickLength+r.labelMargin}if(n&&n.labelFillStyle!==O){let t;"after-bar"===n.position?t={Ld:i.map(((t,i)=>{const s=n.formatter(t,t.category,t.value);if(!s)return;const e=this.KD.get(t);return void 0!==e?{text:s,position:this.Bs.toPoint(e.category,this.valueAxis.ft.gi(e.valueEnd,n.labelMargin*Math.sign(e.valueEnd))),alignment:this.Bs.toPoint(0,-1*Math.sign(e.valueEnd)),rotation:n.labelRotation,sizePixels:this.dB(t)}:void 0})),$u:n.labelFont,ft:this.LD}:"inside-bar"!==n.position&&"inside-bar-start"!==n.position&&"inside-bar-centered"!==n.position&&"inside-bar-end"!==n.position||(t={Ld:i.map(((t,i)=>{const s=n.formatter(t,t.category,t.value);if(!s)return;const e=this.KD.get(t);if(void 0===e)return;const h="bipolar"===this.zD?Math.sign(e.valueEnd):"negative"===this.zD?-1:1,r=this.Bs.toPoint(0,"inside-bar"===n.position||"inside-bar-end"===n.position?1*h:"inside-bar-centered"===n.position?0:-1*h);return{text:s,position:this.Bs.toPoint(e.category,"inside-bar"===n.position||"inside-bar-end"===n.position?this.valueAxis.ft.gi(e.valueEnd,-n.labelMargin*h):"inside-bar-centered"===n.position?(e.valueStart+e.valueEnd)/2:this.valueAxis.ft.gi(e.valueStart,n.labelMargin*h)),alignment:r,rotation:n.labelRotation,sizePixels:this.dB(t)}})),$u:n.labelFont,ft:this.LD}),t&&(t?this.JD?Vf(t,a,this.Bs.getWidth):t.Ld:[]).forEach((t=>{t&&s.add().yr(t.text).Re(t.position).Ha(t.alignment).Qh(t.rotation).De(n.labelFillStyle).Zh(n.labelFont).setMouseInteractions(!1)}))}return{labelMarginBeforeCategoryAxisPixels:h}}cB(t,i){if(!this.jD||this.jD.labelFillStyle===O)return{x:0,y:0};const s=this.HD.get(t);if(s)return s;const e=this.jD.formatter(t,i),h=this.us.Og.Vg(e,this.jD.labelFont,this.jD.labelRotation);return h.isEstimate?this.us.xs(!0):this.HD.set(t,h),h}dB(t){if(!this.VD||this.VD.labelFillStyle===O)return{x:0,y:0};const i=this.$D.get(t);if(i)return i;const s=this.us.Og.Vg(this.VD.formatter(t,t.category,t.value),this.VD.labelFont,this.VD.labelRotation);return s.isEstimate?this.us.xs(!0):this.$D.set(t,s),s}OD(){return this.Bv.reduce(((t,i)=>{const s=this.dB(i);return{x:Math.max(t.x,s.x),y:Math.max(t.y,s.y)}}),{x:0,y:0})}YD(){this.ZD=!0,this.us.xs()}getMinimumSize(){return{x:200,y:200}}}const Nf={Horizontal:"horizontal",Vertical:"vertical"},Gf={Disabled:void 0,None:void 0,Ascending:(t,i)=>t.value-i.value,Descending:(t,i)=>i.value-t.value,Alphabetical:(t,i)=>t.category.localeCompare(i.category)},Wf={...Wo,hB:"vertical",GD:-1,WD:1},Uf={...Uo,hB:"horizontal",GD:1,WD:-1},Yf=(t,i,s)=>{const e=[[i.bar]],h=t.valueAxis.getTitle();return h&&e.push([h]),i.subCategory?e.push([i.subCategory,"",{text:ne(t.valueAxis.formatValue(i.bar.getValue()),t.valueAxis),font:{weight:"bold"}}]):e.push({text:ne(t.valueAxis.formatValue(i.bar.getValue()),t.valueAxis),font:{weight:"bold"}}),e};class Hf extends La{constructor(t,i,s,e,h,r,n){super(t,i,s,i.Py("gaugeChart bg",0),e,i.us.qi.gaugeChartBackgroundFillStyle,i.us.qi.gaugeChartBackgroundStrokeStyle,i.us.qi.gaugeChartTitleFont,i.us.qi.gaugeChartTitleFillStyle,r),this.tu=this.qi.gaugeChartStartAngle,this.iu=this.qi.gaugeChartEndAngle,this.fB={start:0,end:100},this.S=0,this.AB=[],this.gB=this.qi.gaugeChartBarThickness,this.yB=this.qi.gaugeChartValueIndicatorThickness,this.mB=this.qi.gaugeChartNeedleLength,this.pB=this.qi.gaugeChartNeedleThickness,this.vB=this.qi.gaugeChartNeedleFillStyle,this.SB=this.qi.gaugeChartNeedleStrokeStyle,this.bB=this.qi.gaugeChartRoundedEdges,this.xB=!0,this.MB=!0,this._B=!0,this.wB=[],this.CB=[],this.kB=!0,this.TB=!0,this.xm=this.S,this.FB=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.IB=this.qi.gaugeChartBarGradient,this.PB=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.DB=this.qi.gaugeChartTickFont,this.BB=this.qi.gaugeChartValueLabelFont,this.LB=this.qi.gaugeChartValueLabelFillStyle,this.RB=this.qi.gaugeChartUnitLabelFont,this.EB=this.qi.gaugeChartUnitLabelFillStyle,this.zB=this.qi.gaugeChartTickFillStyle,this.VB=this.qi.gaugeChartBarColor,this.OB=this.qi.gaugeChartGlowColor,this.NB=this.qi.gaugeChartGlowColor.getA(),this.GB=1,this.WB=1,this.UB=this.qi.gaugeChartNeedleAlignment,this.YB=!1,this.HB=this.qi.gaugeChartGapBetweenBarAndValueIndicators,this.$B=this.qi.gaugeChartBarStrokeStyle,this.XB=!1,this.us.jn(Vo.yf),this.bh.yr("Gauge Chart"),this.Iy(h,this.mg),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled)),this.jB=this.VB,this.ZB=this.OB,this.QB=S(0,0,0,0),this.JB=this.es.Cg(),this.KB=this.es.Cg().bs(this.qi.effectsText),this.qB=this.uy.ac(this.mg).Pe(this.$B).setMouseInteractions(!1),this.tL=this.uy.rd(this.mg).uu(0).Ue(360).Au(0).Pe(at).setMouseInteractions(!1),this.iL=this.By.We(this.mg).Ge(this.qi.gaugeChartNeedleStrokeStyle).setMouseInteractions(!1),this.sL=this.By.We(this.mg).Ge(new ve({thickness:this.pB,fillStyle:this.vB})).setMouseInteractions(!1),this.eL=this.By.Nr(this.mg).Zh(this.BB).De(this.LB).setMouseInteractions(!1),this.Ud=this.By.Nr(this.mg).Zh(this.RB).De(this.EB).yr("").setMouseInteractions(!1),this.hL=this.uy.Nr(this.mg).Zh(this.DB).De(this.zB).setMouseInteractions(!1),this.rL=this.uy.Nr(this.mg).Zh(this.DB).De(this.zB).setMouseInteractions(!1),this.JB.As([this.qB]),this.KB.As([this.eL,this.Ud,this.hL,this.rL]),this.nL(),this.onResize((()=>{this.YB=!0}))}nL(){this.sL.Ge((t=>t.setThickness(this.pB))),this.iL.Ge((t=>t.setThickness(2*this.SB.getThickness()+this.pB)))}setAnimationsEnabled(t){return this.uh=t,this.TB=t,this.kB=t,this}setInterval(t,i){return this.fB={start:t,end:i},this.YB=!0,this.us.xs(),this}getInterval(){return this.fB}setTickFillStyle(t){return this.zB="function"==typeof t?t(this.zB):t,this.CB.forEach((i=>{i.start.De(t),i.end.De(t)})),this.hL.De(t),this.rL.De(t),this.YB=!0,this.us.xs(),this}getTickFillStyle(){return this.zB}setTickFont(t){return this.DB="function"==typeof t?t(this.DB):t,this.CB.forEach((i=>{i.start.Zh(t),i.end.Zh(t)})),this.hL.Zh(t),this.rL.Zh(t),this.YB=!0,this.us.xs(),this}getTickFont(){return this.DB}setTickFormatter(t){return this.FB=t,this.YB=!0,this.us.xs(),this}getTickFormatter(){return this.FB}setValueLabelFillStyle(t){return this.LB="function"==typeof t?t(this.LB):t,this.eL.De(t),this.YB=!0,this.us.xs(),this}getValueLabelFillStyle(){return this.eL.$h()}setValueLabelFont(t){return this.BB="function"==typeof t?t(this.BB):t,this.eL.Zh(t),this.YB=!0,this.us.xs(),this}getValueLabelFont(){return this.eL.jh()}setValueFormatter(t){return this.PB="string"==typeof t?i=>t:t,this.YB=!0,this.us.xs(),this}getValueLabel(){return this.eL.wr()||this.PB}setUnitLabelFillStyle(t){return this.EB="function"==typeof t?t(this.EB):t,this.Ud.De(t),this.YB=!0,this.us.xs(),this}getUnitLabelFillStyle(){return this.Ud.$h()}setUnitLabelFont(t){return this.RB="function"==typeof t?t(this.RB):t,this.Ud.Zh(t),this.YB=!0,this.us.xs(),this}getUnitLabelFont(){return this.Ud.jh()}setUnitLabel(t){return this.Ud.yr(t),this.YB=!0,this.us.xs(),this}getUnitLabel(){return this.Ud.wr()}setNeedleFillStyle(t){return this.vB="function"==typeof t?t(this.vB):t,this.sL.Ge((i=>i.setFillStyle(t))),this.YB=!0,this.us.xs(),this}getNeedleFillStyle(){return this.sL.mu().getFillStyle()}setNeedleThickness(t){return this.pB=t,this.nL(),this.YB=!0,this.us.xs(),this}getNeedleThickness(){return this.pB}setNeedleStrokeStyle(t){return this.SB="function"==typeof t?t(this.SB):t,this.iL.Ge(t),this.nL(),this.YB=!0,this.us.xs(),this}getNeedleStrokeStyle(){return this.iL.mu()}setNeedleLength(t){return this.mB=t,this.YB=!0,this.us.xs(),this}getNeedleLength(){return this.mB}setBarColor(t){return this.VB=t,this.YB=!0,this.us.xs(),this}getBarColor(){return this.jB}setBarGradient(t){return this.IB=t,this.YB=!0,this.us.xs(),this}getBarGradient(){return this.IB}setBarStrokeStyle(t){return this.$B="function"==typeof t?t(this.$B):t,this.qB.Pe(t),this.YB=!0,this.us.xs(),this}getBarStrokeStyle(){return this.qB.mo()}setBarThickness(t){return this.gB=t,this.YB=!0,this.us.xs(),this}getBarThickness(){return this.gB}setAngleInterval(t,i){return Math.abs(t-i)>360&&(i=t<i?t+360:t-360),this.tu=t,this.iu=i,this.YB=!0,this.us.xs(),this}getAngleInterval(){return{start:this.tu,end:this.iu}}setValue(t){return this.XB&&this.us.jn(Vo.kf),this.XB=!0,this.S=t,this.kB||(this.xm=this.S),this.YB=!0,this.us.xs(),this}getValue(){return this.S}setValueAnimation(t,i=1){return this.kB=t,this.GB=Math.max(0,i),this.YB=!0,this.us.xs(),this}setColorAnimation(t,i=1){return this.TB=t,this.WB=Math.max(0,i),this.YB=!0,this.us.xs(),this}setRoundedEdges(t){return this.bB=t,this.YB=!0,this.us.xs(),this}getRoundedEdges(){return this.bB}setValueIndicators(t){return this.AB=t,this.wB.forEach((t=>{t.dispose()})),this.wB.length=0,this.CB.forEach((t=>{t.start.dispose(),t.end.dispose()})),this.CB.length=0,this.AB.forEach((t=>{const i=this.uy.ac(this.mg).Pe(at).De(new U({color:t.color})).setMouseInteractions(!1);this.wB.push(i);const s=this.uy.Nr(this.mg).Zh(this.DB).De(this.zB).setMouseInteractions(!1),e=this.uy.Nr(this.mg).Zh(this.DB).De(this.zB).setMouseInteractions(!1);this.CB.push({start:s,end:e})})),this.JB.As([this.qB,...this.wB]),this.KB.As([this.eL,this.Ud,this.hL,this.rL,...this.CB.map((t=>[t.start,t.end])).flat()]),this.YB=!0,this.us.xs(),this}getValueIndicators(){return this.AB}setValueIndicatorThickness(t){return this.yB=t,this.YB=!0,this.us.xs(),this}getValueIndicatorThickness(){return this.yB}setAutomaticBarColoring(t){return this._B=!!t,this.YB=!0,this.us.xs(),this}getAutomaticBarColoring(){return this._B}setGlowColor(t){return void 0===t?(this.xB=!1,this.ZB=void 0):"object"==typeof t&&"auto"in t?(this.MB=t.auto,t.auto&&(this.ZB=void 0),void 0!==t.alpha&&(this.NB=t.alpha),this.xB=!0):(this.ZB=t,this.NB=t.getA(),this.MB=!1,this.xB=!0),this.YB=!0,this.us.xs(),this}getAutomaticGlowColoring(){return this.MB}setNeedleAlignment(t){return this.UB=t,this.YB=!0,this.us.xs(),this}getNeedleAlignment(){return this.UB}setGapBetweenBarAndValueIndicators(t){return this.HB=t,this.YB=!0,this.us.xs(),this}getGapBetweenBarAndValueIndicators(){return this.HB}setBarEffect(t){return this.JB.bs(t),this.us.xs(),this}getBarEffect(){return this.JB.Ms()}setLabelEffect(t){return this.KB.bs(t),this.us.xs(),this}getLabelEffect(){return this.KB.Ms()}Le(t){var i;if(super.Le(t),Ra.Oy(this.bh,this.Dy),super.Fy(),this.xm!==this.S){if(this.kB){const i=5e-4*t,s=.003*t,e=Math.sign(this.S-this.xm);this.xm=this.xm+i*e+s*this.GB*(this.S-this.xm),e!==Math.sign(this.S-this.xm)?this.xm=this.S:this.us.xs(!0)}else this.xm=this.S;this.YB=!0}const s=this.AB.find((t=>this.xm>=t.start&&this.xm<=t.end));if(this.jB=this._B&&s?s.color:this.VB,this.TB){if(this.QB!==this.jB){const i=this.QB.getR(),s=this.QB.getG(),e=this.QB.getB(),h=this.jB.getR(),r=this.jB.getG(),n=this.jB.getB(),o=Math.sign(h-i),a=Math.sign(r-s),l=Math.sign(n-e),u=.005*t,c=.003*t;this.QB=S(i+u*o+c*this.WB*(h-i),s+u*a+c*this.WB*(r-s),e+u*l+c*this.WB*(n-e));const d=Math.abs(h-this.QB.getR()),f=Math.abs(r-this.QB.getG()),A=Math.abs(n-this.QB.getB());d<1&&f<1&&A<1?this.QB=this.jB:this.us.xs(!0),this.YB=!0}}else this.QB=this.jB;if(this.YB){let t=Ki,e=qi,h=Ki,r=qi;if(new Array(100).fill(0).forEach(((i,s,n)=>{const o=this.tu+s/n.length*(this.iu-this.tu),a=Math.sin(o*Math.PI/180),l=Math.cos(o*Math.PI/180);a<t&&(t=a),a>e&&(e=a),l<h&&(h=l),l>r&&(r=l)})),this.IB?this.qB.De(new st({stops:[{offset:0,color:b("#000000")},{offset:1,color:this.QB}],position:{x:.5,y:.5}})):this.qB.De(new U({color:this.QB})),this.xB){const t=this.MB&&s?this.QB:null!==(i=this.ZB)&&void 0!==i?i:this.OB;this.tL.De(new st({stops:[{offset:0,color:t.setA(this.NB)},{offset:1,color:t.setA(0)}],position:{x:.5,y:.5},extent:tt.farthestSide}))}else this.tL.De(O);const n=this.FB(this.fB.start),o=this.FB(this.fB.end);let a=0,l=0;const u=this.us.Og.Vg(n,this.hL.jh(),this.hL.Jh()),c=this.us.Og.Vg(o,this.rL.jh(),this.rL.Jh());u.x>a&&(a=u.x),u.y>l&&(l=u.y),c.x>a&&(a=c.x),c.y>l&&(l=c.y),this.CB.forEach(((t,i)=>{if(i>=this.AB.length)return;const s=this.AB[i],e=this.FB(s.start),h=this.FB(s.end),r=this.us.Og.Vg(e,t.start.jh(),t.start.Jh()),n=this.us.Og.Vg(h,t.end.jh(),t.end.Jh());r.x>a&&(a=r.x),r.y>l&&(l=r.y),n.x>a&&(a=n.x),n.y>l&&(l=n.y)}));const d=this.AB.length>0?this.yB:0,f=this.mg.getInnerIntervalPixels(),A=Ra.Vy(this.bh,this.Dy),g={x:f.x,y:f.y-A},y={x:.5*g.x,y:.5*g.y},m=d+2*this.HB+this.gB/2,p=a+m,v=l+m,S=v+A,x=f.y-(S+v),M=f.x-(p+p),_=.5*Math.max(this.gB/2,x<M?x:M),w=.5*_,C=(t+e)*w,k=(h+r)*w,T={x:y.x-k,y:y.y-C},F={x:y.x-.5*k,y:y.y-.5*C};this.tL.Re(y).cu(.5*Math.min(g.x,f.y)),this.eL.Re(F).yr(this.PB(this.xm)),this.Ud.Re({x:F.x,y:F.y-this.eL.sd().y-this.Ud.sd().y/4});const I=jf(this.fB,this.tu,this.iu,this.xm,T,_+this.UB*(this.mB/2+this.gB/2)),P=I.angle*(Math.PI/180),D=.5*this.mB,B=Math.cos(P),L=Math.sin(P);this.sL.Ye({x:I.x+D*B,y:I.y+D*L}).Ue({x:I.x-D*B,y:I.y-D*L}),this.iL.Ye({x:I.x+D*B,y:I.y+D*L}).Ue({x:I.x-D*B,y:I.y-D*L});const R=$f(T,_,this.tu,this.iu,this.gB,this.bB,!1,!1);this.qB.wl(R).qo({min:{x:T.x-_,y:T.y-_},max:{x:T.x+_,y:T.y+_}});const E=T.y+_,z=T.y-_,V=T.x+_,N=T.x-_,[G,W]=this.fB.start<this.fB.end?[this.fB.start,this.fB.end]:[this.fB.end,this.fB.start],Y=_+.5*this.gB+d/2+this.HB,H=Y+d/2;this.AB.forEach(((t,i)=>{var s,e;const h=t.start>=G&&t.end<=W;this.wB[i].setVisible(h),this.CB[i].start.setVisible(h),this.CB[i].end.setVisible(h);const r=jf(this.fB,this.tu,this.iu,t.start,T,H),n=jf(this.fB,this.tu,this.iu,t.end,T,H),o=$f(T,Y,r.angle,n.angle,this.yB,this.bB,!(0===i),!(i===this.AB.length-1));this.wB[i].wl(o);const a=this.fB.start===t.start||this.fB.end===t.start,l=this.fB.start===t.end||this.fB.end===t.end||this.AB.some((i=>i.start===t.end&&i!==t));this.CB[i].start.Re({x:r.x,y:r.y}).Ha({x:Math.min(1,Math.max(-1,2*(r.x-V)/(N-V)-1)),y:Math.min(1,Math.max(-1,2*(r.y-E)/(z-E)-1))}).yr(null!==(s=t.startLabel)&&void 0!==s?s:a?"":this.FB(t.start)),this.CB[i].end.Re({x:n.x,y:n.y}).Ha({x:Math.min(1,Math.max(-1,2*(n.x-V)/(N-V)-1)),y:Math.min(1,Math.max(-1,2*(n.y-E)/(z-E)-1))}).yr(null!==(e=t.endLabel)&&void 0!==e?e:l?"":this.FB(t.end))}));const $=this.AB.some((t=>t.start<t.end?this.fB.start>=t.start&&this.fB.start<=t.end:this.fB.start<=t.start&&this.fB.start>=t.end)),X=jf(this.fB,this.tu,this.iu,this.fB.start,T,$?H:Y-this.HB);this.hL.Re({x:X.x,y:X.y}).Ha({x:Math.min(1,Math.max(-1,2*(X.x-V)/(N-V)-1)),y:Math.min(1,Math.max(-1,2*(X.y-E)/(z-E)-1))}).yr(n);const j=this.AB.some((t=>t.start<t.end?this.fB.end>=t.start&&this.fB.end<=t.end:this.fB.end<=t.start&&this.fB.end>=t.end)),Z=jf(this.fB,this.tu,this.iu,this.fB.end,T,j?H:Y-this.HB);this.rL.Re({x:Z.x,y:Z.y}).Ha({x:Math.min(1,Math.max(-1,2*(Z.x-V)/(N-V)-1)),y:Math.min(1,Math.max(-1,2*(Z.y-E)/(z-E)-1))}).yr(o),this.YB=!1}}getMinimumSize(){return{x:150,y:150}}sf(){return[this]}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),t.setMouseInteractions(!1),Ci(t,this.qi,s,{fill:new U({color:this.getBarColor()})}),this}}const $f=(t,i,s,e,h,r=!0,n=!0,o=!0)=>{const a=[],l=.5*h,u=s>e,c=Math.sign(s-e),d=-1*c;if(r){const t=l/(2*Math.PI*i)*360+.1;n&&(s+=t*d),o&&(e+=t*c)}else s+=.1*d,e+=.1*c;const f=Xf(t,i+l,s,e,u);if(a.push(...f),r){const h={x:t.x+i*Math.cos(e*(Math.PI/180)),y:t.y+i*Math.sin(e*(Math.PI/180))};let r;r=s>e?Xf(h,l,e+180,e+360,u):Xf(h,l,e-180,e-360,u),a.push(...r)}const A=Xf(t,i-l,e,s,!u);if(a.push(...A),r){const h={x:t.x+i*Math.cos(s*(Math.PI/180)),y:t.y+i*Math.sin(s*(Math.PI/180))};let r;r=s>e?Xf(h,l,s-180,s-360,u):Xf(h,l,s+180,s+360,u),a.push(...r)}return a},Xf=(t,i,s,e,h)=>{s<e&&([s,e]=[e,s]);const r=[],n=h?-1:1,o=h?t=>t>e:t=>t<s;for(let a=h?s:e;o(a);a+=n){const s=a*(Math.PI/180),e=t.x+i*Math.cos(s),h=t.y+i*Math.sin(s);r.push({x:e,y:h})}const a=(h?e:s)*(Math.PI/180),l=t.x+i*Math.cos(a),u=t.y+i*Math.sin(a);return r.push({x:l,y:u}),r},jf=(t,i,s,e,h,r)=>{const[n,o]=t.start<t.end?[t.start,t.end]:[t.end,t.start],a=Math.max(n,Math.min(o,e)),l=t.start<t.end?s-i:i-s,u=t.start<t.end?i+(a-t.start)/(t.end-t.start)*l:i-(a-t.start)/(t.end-t.start)*l,c=u*(Math.PI/180);return{x:h.x+r*Math.cos(c),y:h.y+r*Math.sin(c),angle:Math.round(u)}},Zf=(t,i)=>i?t.x:t.y,Qf=(t,i,s,e)=>1===i&&e===(s?t.columnIndex:t.rowIndex)||-1===i&&e===(s?t.columnIndex+t.columnSpan:t.rowIndex+t.rowSpan),Jf=(t,i,s,e,h,r)=>{const n=i.length,o=Math.sign(e),a=[],l=i.reduce(((t,i)=>t+i));for(let t=1;t<=n-1;t+=1)a.push(Zf(h,r)*i.slice(0,t).reduce(((t,i)=>t+i),0)/l);const u=a.map((t=>0));let c=a[s-1]+e;for(let i=s;i>0&&i<n;i+=o){const e=t.filter((t=>Qf(t,o,r,i))).reduce(((t,i)=>Math.max(t,Zf(i.panel.getMinimumSize()||{x:0,y:0},r))),20),n=a[i-1];if(1===o&&c>Zf(h,r)-e||-1===o&&c<0+e){u.fill(0);break}if(i!==s&&(1===o?n>c:n<c))break;u[i-1]=c-n,c+=e*o}const d=u.map(((t,i)=>a[i]+t)),f=d.map(((t,i)=>(t-(i>0?d[i-1]:0))/Zf(h,r)));return f.push(1-f.reduce(((t,i)=>t+i),0)),f};class Kf{constructor(t,i,e,h,r){this.coordsRelative="relative",this.coordsClient="client",this.Xi=!1,this.tP=new Array,this.L=new s,this.oL=[],this.iy=[],this.aL=void 0,this.lL=!0,this.uL=!0,this.cL=!0,this.ny=!1,this.dL=!0,this.fL=()=>{this.dL=!0,this.us.xs()},this.AL=[],this.onInViewChange=t=>this.L.on("inViewChange",t),this.offInViewChange=t=>this.L.off(t,"inViewChange"),this.gL=t=>{for(let i=0;i<this.tP.length;i+=1)if(this.tP[i].panel===t){this.tP.splice(i,1),this.lL=!0,this.us.xs();break}},this.yL=t=>{const i=this.oL.indexOf(t);i>=0&&this.oL.splice(i,1)},this.gy=t=>{const i=this.iy.indexOf(t);i>=0&&this.iy.splice(i,1)},this.mL=(t,i,s,e,h)=>{if(this.pL(i,s,e,h)){const r={panel:t,columnIndex:i,rowIndex:s,columnSpan:e,rowSpan:h};return this.tP.push(r),this.vL(r),this.lL=!0,t}throw new Dt("Out of dashboard range.")},this.SL=i.numberOfRows,this.bL=i.numberOfColumns,this.vA=t,this.xL=i,this.ML=h;const n=this.bL*this.SL;this._L={x:new rf(new Array(this.bL).fill(1)),y:new rf(new Array(this.SL).fill(1))},this.qi=e.qi,this.wL=this.qi.dashboardSplitterStyle,this.uh=!1!==(null==i?void 0:i.animationsEnabled),this.CL=hf(e,n),this.kL=e.GF("dashboard splitters",500001),this.fM=()=>this.CL.NF(),this.by=this.CL.WF(),this.es=e.es.hs(this,{TL:{}}),this.es.TL.bs(this.qi.effectsDashboardSplitters);const o=e.ni();this.uiScale=dt.d2({scaleXYConstructor:Ks}).zi(0,100).Vi(0,100).tt(o),this.mg=dt.d2({scaleXYConstructor:Ks}).zi(0,this.uiScale.x.getCellSize()).Vi(0,this.uiScale.y.getCellSize()).tt(o),this.FL=e.IL.bind(e),this.PL=e.DL.bind(e),this.BL=e.LL.bind(e),this.RL=e.EL.bind(e),this.co=e.co.bind(e),this.fo=e.fo.bind(e),this.engine=e.my,this.us=e.py,e.Bo((()=>this.fL())),e.xs();const a=e.Eo((t=>{this.ny=t,this.L.emit("inViewChange",this,t)}));this.Cy=e.zo.bind(e,a),this.zL(),this.setAnimationsEnabled(this.uh);const l=("resize",{on:(u=this.L).on.bind(u,"resize"),off:u.off.bind(u)});var u;this.createChartXY=t=>{const i=qf(t,this.xL,this.uh);return this.mL(new qc(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createSpiderChart=t=>{const i=qf(t,this.xL,this.uh);return this.mL(new sf(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPolarChart=t=>{const i=qf(t,this.xL,this.uh);return this.mL(new Ad(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPieChart=t=>{const i=qf(t,this.xL,this.uh),s=i&&i.type?i.type:ml;return this.mL(new s(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,l,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createGaugeChart=t=>{const i=qf(t,this.xL,this.uh);return this.mL(new Hf(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,l,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createFunnelChart=t=>{const i=qf(t,this.xL,this.uh),s=i&&i.type?i.type:Cd;return this.mL(new s(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,l,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPyramidChart=t=>{const i=qf(t,this.xL,this.uh),s=t&&t.type?t.type:Od;return this.mL(new s(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,l,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createUIPanel=t=>{const i=qf(t,this.xL,this.uh);return this.mL(new Da(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createLegendBoxPanel=t=>{const i=qf(t,this.xL,this.uh);return this.mL(new su(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createZoomBandChart=t=>{const i=qf(t,this.xL,this.uh);return this.mL(new nd(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createMapChart=t=>{const i=qf(t,this.xL,this.uh);return this.mL(new uu(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createChart3D=t=>{const i=qf(t,this.xL,this.uh),s=new ql(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,l,i);return this.mL(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createDataGrid=t=>{const i=qf(t,this.xL,this.uh),s=new Tf(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,l);return this.mL(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createBarChart=t=>{const i=qf(t,this.xL,this.uh),s=new Of(this.vA,this.CL.UF(this.VL(t.columnIndex,t.rowIndex)),this.OL(i,this._L),this.gL,r,l,i);return this.mL(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)}}VL(t,i){return t+i*this.bL}OL(t,i){return{d1:s=>new s.scale1DConstructor("x"===s.dimension?t.columnIndex:t.rowIndex,"x"===s.dimension?t.columnSpan:t.rowSpan,"x"===s.dimension?this.bL:this.SL,"x"===s.dimension?i.x:i.y),d2:s=>(new s.scaleXYConstructor).ut({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.bL,y:this.SL},i),d3:()=>new ut({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.bL,y:this.SL},i)}}setWidth(t){return t instanceof Array||(t=[t,t]),this.FL(t[0]),this.PL(t[1]),this}setHeight(t){return t instanceof Array||(t=[t,t]),this.BL(t[0]),this.RL(t[1]),this}getWidth(){return this.co()}getHeight(){return this.fo()}setBackgroundFillStyle(t){return this.engine.setBackgroundFillStyle(t),this.kL.xs(),this}getBackgroundFillStyle(){return this.engine.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.engine.setBackgroundStrokeStyle(t),this.kL.xs(),this}getBackgroundStrokeStyle(){return this.engine.getBackgroundStrokeStyle()}getTheme(){return this.qi}setSplitterStyle(t){const i=this.wL;return this.wL="function"==typeof t?t(this.wL):t,this.NL(i),this}getSplitterStyle(){return this.wL}setSplitterEffect(t){return this.es.TL.bs(t),this.us.xs(),this}getSplitterEffect(){return this.es.TL.Ms()}setAnimationHighlight(t){return this.cL=t,this.AL.forEach((i=>this.us.ls.ks(i.line,t))),this}getAnimationHighlight(){return this.cL}NL(t){for(const t of this.AL)t.line.Ge(this.wL);this.zL()}setColumnWidth(t,i){const s=this._L.x._();return t>=0&&t<s.length&&(s[t]=i,this._L.x.M(s)),this.fL(),this}getColumnWidth(t){const i=this._L.x._();if(t>=i.length)throw new Dt("Column index is out of dashboard range.");return i[t]}setRowHeight(t,i){const s=this._L.y._();return t>=0&&t<s.length&&(s[Math.abs(s.length-1-t)]=i,this._L.y.M(s)),this.fL(),this}getRowHeight(t){const i=this._L.y._();if(t>=i.length)throw new Dt("Row index is out of dashboard range.");return i[Math.abs(i.length-1-t)]}getSizePixels(){return this.mg.getInnerIntervalPixels()}onResize(t){return this.L.on("resize",t)}offResize(t){return this.L.off(t,"resize")}GL(t,i,s){if(s&&Math.abs(t.x)>0)this.WL(i,t.x);else{if(s||!(Math.abs(t.y)>0))return;this.UL(i,t.y)}for(const t of this.tP)t.panel.J();this.fL()}UL(t,i){const s=Jf(this.tP,this._L.y._(),t,i,this.mg.ni(),!1);this._L.y.M(s),this.fL()}WL(t,i){const s=Jf(this.tP,this._L.x._(),t,i,this.mg.ni(),!0);this._L.x.M(s),this.fL()}YL(){this.AL.forEach((t=>t.line.dispose())),this.AL.length=0;for(let t=1;t<=this.bL-1;t+=1)for(let i=0;i<=this.SL-1;i+=1)if(void 0!==this.tP.find((s=>ls(i,s.rowIndex,s.rowIndex+s.rowSpan-1)&&(t===s.columnIndex||t===s.columnIndex+s.columnSpan)))){const s=Ae(new ye((()=>{this.HL(t)}),((i,s,e,h,r)=>{this.GL(h,t,!0),di(r)}),(()=>{this.$L(t)}))),e=this.kL.We(this.mg).Ge(this.wL).setMouseEnterEventHandler((()=>{this.HL(t)})).setMouseLeaveEventHandler((()=>{this.$L(t)})).setMouseDragEventHandler(((i,s,e,h,r)=>{this.GL(r,t,!0),di(s)})).setTouchStartEventHandler(s.onTouchStart).setTouchMoveEventHandler(s.onTouchMove).setTouchEndEventHandler(s.onTouchEnd);this.us.ls.os(e,(t=>e.cs(t)),{animationEnabled:this.cL}),this.AL.push({row:i,column:t,line:e,alignment:"vertical"})}for(let t=1;t<=this.SL-1;t+=1)for(let i=0;i<=this.bL-1;i+=1)if(void 0!==this.tP.find((s=>ls(i,s.columnIndex,s.columnIndex+s.columnSpan-1)&&(t===s.rowIndex||t===s.rowIndex+s.rowSpan)))){const s=Ae(new ye((()=>{this.XL(t)}),((i,s,e,h,r)=>{this.GL(h,t,!1),di(r)}),(()=>{this.jL(t)}))),e=this.kL.We(this.mg).Ge(this.wL).setMouseEnterEventHandler((()=>{this.XL(t)})).setMouseLeaveEventHandler((()=>{this.jL(t)})).setMouseDragEventHandler(((i,s,e,h,r)=>{this.GL(r,t,!1),di(s)})).setTouchStartEventHandler(s.onTouchStart).setTouchMoveEventHandler(s.onTouchMove).setTouchEndEventHandler(s.onTouchEnd);this.us.ls.os(e,(t=>e.cs(t)),{animationEnabled:this.cL}),this.AL.push({row:t,column:i,line:e,alignment:"horizontal"})}this.es.TL.As(this.AL.map((t=>t.line)))}ZL(){const t=this.mg.ni(),i=this._L.x._(),s=i.reduce(((t,i)=>t+i)),e=this._L.y._(),h=e.reduce(((t,i)=>t+i));this.AL.forEach((r=>{if("vertical"===r.alignment){const o=n(t.x*i.slice(0,r.column).reduce(((t,i)=>t+i),0)/s,t.y*e.slice(0,r.row).reduce(((t,i)=>t+i),0)/h),a=n(o.x,t.y*e.slice(0,r.row+1).reduce(((t,i)=>t+i),0)/h);r.line.Ye(o).Ue(a)}else{const o=n(t.x*i.slice(0,r.column).reduce(((t,i)=>t+i),0)/s,t.y*e.slice(0,r.row).reduce(((t,i)=>t+i),0)/h),a=n(t.x*i.slice(0,r.column+1).reduce(((t,i)=>t+i),0)/s,o.y);r.line.Ye(o).Ue(a)}}))}HL(t){this.AL.forEach((i=>{"vertical"===i.alignment&&i.column===t&&(this.us.ls.Cs(i.line,1),this.kL.QL(i.line))})),this.aL=this.engine.setMouseStyle(Xe.ResizeColumn),this.us.xs()}XL(t){this.AL.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&(this.us.ls.Cs(i.line,1),this.kL.QL(i.line))})),this.aL=this.engine.setMouseStyle(Xe.ResizeRow),this.us.xs()}$L(t){this.AL.forEach((i=>{"vertical"===i.alignment&&i.column===t&&this.us.ls.Cs(i.line,0)})),this.engine.restoreMouseStyle(this.aL),this.us.xs()}jL(t){this.AL.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&this.us.ls.Cs(i.line,0)})),this.engine.restoreMouseStyle(this.aL),this.us.xs()}setAnimationsEnabled(t){return this.uh=t,this.getCells().filter((t=>t.panel instanceof La)).forEach((i=>i.panel.setAnimationsEnabled(t))),this.setAnimationHighlight(this.uh),this}getAnimationsEnabled(){return this.uh}getCells(){return this.tP.slice()}dispose(){return this.Xi||(this.Cy&&this.Cy(),this.tP.slice().forEach((t=>t.panel.dispose())),this.oL.slice().forEach((t=>t.dispose())),this.iy.slice().forEach((t=>t.dispose())),this.Xi=!0,this.ML(),this.L.emit("dispose",this)),this}isDisposed(){return this.Xi}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}getIsInView(){return this.ny}saveToFile(t,i,s){return Ca(this.engine,t,i,s),this}JL(t){if(this.dL){const t=this.us.ft.ni(),i=t.x,s=t.y;this.uiScale.tt(i,s),this.mg.tt(i,s);const e=this.uiScale.getInnerIntervalPixels();this.mg.zi(0,e.x).Vi(0,e.y),this.L.emit("resize",this,e.x,e.y,i,s),this.uL=!0}this.lL&&(this.YL(),this.lL=!1,this.uL=!0),this.uL&&(this.ZL(),this.uL=!1);for(const i of this.tP)i.panel.Le(t);return this.oL.forEach((t=>t.Es())),this.oL.forEach((t=>t.Le())),this.iy.forEach((t=>t.Es())),this.iy.forEach((t=>t.Le())),this.dL=!1,this}Z(){for(const t of this.tP)t.panel.Z();return this.mg.x.Z(),this.mg.y.Z(),this.uiScale.x.Z(),this.uiScale.y.Z(),this}J(){for(const t of this.tP)t.panel.J();return this.mg.x.J(),this.mg.y.J(),this.uiScale.x.J(),this.uiScale.y.J(),this}translateCoordinate(t,i,s){return Fa(t,i,s,this.mg,this.us)}addUIElement(t=yo,i=this.uiScale){i=Ta(i,this.mg);const s=ka(t,this.fM(),this.uiScale,i,this.yL,this.qi);return this.oL.push(s),s}addLegendBox(t=To,i=this.uiScale){i=Ta(i,this.mg);const s=ka(t,this.by,this.uiScale,i,this.gy,this.qi);return s.setDraggingMode(zt.notDraggable),this.iy.push(s),s}getLegendBoxes(){return this.iy}pL(t,i,s,e){return i>=0&&t>=0&&i+e<=this.SL&&t+s<=this.bL}vL(t){const i=this.wL,s=i===at?0:i.getThickness()/2,e={left:t.columnIndex>0?s:0,top:t.rowIndex<this.SL-1?s:0,right:t.columnIndex<this.bL-1?s:0,bottom:t.rowIndex>0?s:0};t.panel.Vr(e)}zL(){this.uiScale.x.ii([0,0]),this.uiScale.y.ii([0,0]),this.mg.x.ii([0,0]),this.mg.y.ii([0,0]);for(const t of this.tP)this.vL(t);this.us.xs()}}const qf=(t,i,s)=>{const e={...t,columnSpan:t.columnSpan||1,rowSpan:t.rowSpan||1,animationsEnabled:void 0!==t.animationsEnabled?t.animationsEnabled:s};var h,r;return e.rowIndex=(h=e.rowIndex,r=e.rowSpan,i.numberOfRows-(h+r)),e},tA={XY:zc,Spider:Ja,BarChart:Ka,Map:sl,Polar:il,D3:Kl},iA={Angola:{name:"Angola",ISO_A3:"AGO"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Gabon:{name:"Gabon",ISO_A3:"GAB"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Namibia:{name:"Namibia",ISO_A3:"NAM"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Oman:{name:"Oman",ISO_A3:"OMN"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},Somalia:{name:"Somalia",ISO_A3:"SOM"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"}},sA={Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Armenia:{name:"Armenia",ISO_A3:"ARM"},Australia:{name:"Australia",ISO_A3:"AUS"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},China:{name:"China",ISO_A3:"CHN"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},India:{name:"India",ISO_A3:"IND"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Nepal:{name:"Nepal",ISO_A3:"NPL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Philippines:{name:"Philippines",ISO_A3:"PHL"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Palestine:{name:"Palestine",ISO_A3:"PSE"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Russia:{name:"Russia",ISO_A3:"RUS"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Singapore:{name:"Singapore",ISO_A3:"SGP"},Syria:{name:"Syria",ISO_A3:"SYR"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Yemen:{name:"Yemen",ISO_A3:"YEM"}},eA={"New South Wales":{name:"New South Wales"},Victoria:{name:"Victoria"},Queensland:{name:"Queensland"},"South Australia":{name:"South Australia"},"Western Australia":{name:"Western Australia"},Tasmania:{name:"Tasmania"},"Northern Territory":{name:"Northern Territory"},"Australian Capital Territory":{name:"Australian Capital Territory"},"Other Territories":{name:"Other Territories"}},hA={"British Columbia":{name:"British Columbia"},Quebec:{name:"Quebec"},Nunavut:{name:"Nunavut"},"Prince Edward Island":{name:"Prince Edward Island"},Saskatchewan:{name:"Saskatchewan"},Yukon:{name:"Yukon"},Manitoba:{name:"Manitoba"},Ontario:{name:"Ontario"},"New Brunswick":{name:"New Brunswick"},"Northwest Territories":{name:"Northwest Territories"},Alberta:{name:"Alberta"},"Newfoundland and Labrador":{name:"Newfoundland and Labrador"},"Nova Scotia":{name:"Nova Scotia"}},rA={Albania:{name:"Albania",ISO_A3:"ALB"},Austria:{name:"Austria",ISO_A3:"AUT"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Denmark:{name:"Denmark",ISO_A3:"DNK"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Finland:{name:"Finland",ISO_A3:"FIN"},France:{name:"France",ISO_A3:"FRA"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Greece:{name:"Greece",ISO_A3:"GRC"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Italy:{name:"Italy",ISO_A3:"ITA"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Malta:{name:"Malta",ISO_A3:"MLT"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Poland:{name:"Poland",ISO_A3:"POL"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Romania:{name:"Romania",ISO_A3:"ROU"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Russia:{name:"Russia",ISO_A3:"RUS"},Turkey:{name:"Turkey",ISO_A3:"TUR"}},nA={Aruba:{name:"Aruba",ISO_A3:"ABW"},Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},Angola:{name:"Angola",ISO_A3:"AGO"},Anguilla:{name:"Anguilla",ISO_A3:"AIA"},Albania:{name:"Albania",ISO_A3:"ALB"},Aland:{name:"Aland",ISO_A3:"ALA"},Andorra:{name:"Andorra",ISO_A3:"AND"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Argentina:{name:"Argentina",ISO_A3:"ARG"},Armenia:{name:"Armenia",ISO_A3:"ARM"},"American Samoa":{name:"American Samoa",ISO_A3:"ASM"},Antarctica:{name:"Antarctica",ISO_A3:"ATA"},"French Southern and Antarctic Lands":{name:"French Southern and Antarctic Lands",ISO_A3:"ATF"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},Australia:{name:"Australia",ISO_A3:"AUS"},Austria:{name:"Austria",ISO_A3:"AUT"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belize:{name:"Belize",ISO_A3:"BLZ"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},Canada:{name:"Canada",ISO_A3:"CAN"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Chile:{name:"Chile",ISO_A3:"CHL"},China:{name:"China",ISO_A3:"CHN"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Cyprus No Mans Area":{name:"Cyprus No Mans Area",ISO_A3:"-99"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},"Cook Islands":{name:"Cook Islands",ISO_A3:"COK"},Colombia:{name:"Colombia",ISO_A3:"COL"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Curaçao":{name:"Curaçao",ISO_A3:"CUW"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},"Northern Cyprus":{name:"Northern Cyprus",ISO_A3:"-99"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Dominica:{name:"Dominica",ISO_A3:"DMA"},Denmark:{name:"Denmark",ISO_A3:"DNK"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},"Dhekelia Sovereign Base Area":{name:"Dhekelia Sovereign Base Area",ISO_A3:"-99"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Finland:{name:"Finland",ISO_A3:"FIN"},Fiji:{name:"Fiji",ISO_A3:"FJI"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},France:{name:"France",ISO_A3:"FRA"},"Faroe Islands":{name:"Faroe Islands",ISO_A3:"FRO"},"Federated States of Micronesia":{name:"Federated States of Micronesia",ISO_A3:"FSM"},Gabon:{name:"Gabon",ISO_A3:"GAB"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Guernsey:{name:"Guernsey",ISO_A3:"GGY"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Greece:{name:"Greece",ISO_A3:"GRC"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},Guam:{name:"Guam",ISO_A3:"GUM"},Guyana:{name:"Guyana",ISO_A3:"GUY"},"Hong Kong S.A.R.":{name:"Hong Kong S.A.R.",ISO_A3:"HKG"},"Heard Island and McDonald Islands":{name:"Heard Island and McDonald Islands",ISO_A3:"HMD"},Honduras:{name:"Honduras",ISO_A3:"HND"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},"Isle of Man":{name:"Isle of Man",ISO_A3:"IMN"},India:{name:"India",ISO_A3:"IND"},"Indian Ocean Territories":{name:"Indian Ocean Territories",ISO_A3:"-99"},"British Indian Ocean Territory":{name:"British Indian Ocean Territory",ISO_A3:"IOT"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Israel:{name:"Israel",ISO_A3:"ISR"},Italy:{name:"Italy",ISO_A3:"ITA"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},Jersey:{name:"Jersey",ISO_A3:"JEY"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},"Baykonur Cosmodrome":{name:"Baykonur Cosmodrome",ISO_A3:"-99"},"Siachen Glacier":{name:"Siachen Glacier",ISO_A3:"-99"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},Kiribati:{name:"Kiribati",ISO_A3:"KIR"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},Liechtenstein:{name:"Liechtenstein",ISO_A3:"LIE"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},"Macao S.A.R":{name:"Macao S.A.R",ISO_A3:"MAC"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Mexico:{name:"Mexico",ISO_A3:"MEX"},"Marshall Islands":{name:"Marshall Islands",ISO_A3:"MHL"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},"Northern Mariana Islands":{name:"Northern Mariana Islands",ISO_A3:"MNP"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Namibia:{name:"Namibia",ISO_A3:"NAM"},"New Caledonia":{name:"New Caledonia",ISO_A3:"NCL"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Niue:{name:"Niue",ISO_A3:"NIU"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Nepal:{name:"Nepal",ISO_A3:"NPL"},"New Zealand":{name:"New Zealand",ISO_A3:"NZL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Panama:{name:"Panama",ISO_A3:"PAN"},"Pitcairn Islands":{name:"Pitcairn Islands",ISO_A3:"PCN"},Peru:{name:"Peru",ISO_A3:"PER"},"Spratly Islands":{name:"Spratly Islands",ISO_A3:"-99"},Philippines:{name:"Philippines",ISO_A3:"PHL"},Palau:{name:"Palau",ISO_A3:"PLW"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},Poland:{name:"Poland",ISO_A3:"POL"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Palestine:{name:"Palestine",ISO_A3:"PSE"},"French Polynesia":{name:"French Polynesia",ISO_A3:"PYF"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Romania:{name:"Romania",ISO_A3:"ROU"},Russia:{name:"Russia",ISO_A3:"RUS"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},Singapore:{name:"Singapore",ISO_A3:"SGP"},"South Georgia and South Sandwich Islands":{name:"South Georgia and South Sandwich Islands",ISO_A3:"SGS"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Solomon Islands":{name:"Solomon Islands",ISO_A3:"SLB"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Somalia:{name:"Somalia",ISO_A3:"SOM"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},"Sao Tome and Principe":{name:"Sao Tome and Principe",ISO_A3:"STP"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},"East Timor":{name:"East Timor",ISO_A3:"TLS"},Tonga:{name:"Tonga",ISO_A3:"TON"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Tuvalu:{name:"Tuvalu",ISO_A3:"TUV"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},"United States Minor Outlying Islands":{name:"United States Minor Outlying Islands",ISO_A3:"UMI"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"US Naval Base Guantanamo Bay":{name:"US Naval Base Guantanamo Bay",ISO_A3:"-99"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Vanuatu:{name:"Vanuatu",ISO_A3:"VUT"},"Wallis and Futuna":{name:"Wallis and Futuna",ISO_A3:"WLF"},"Akrotiri Sovereign Base Area":{name:"Akrotiri Sovereign Base Area",ISO_A3:"-99"},Samoa:{name:"Samoa",ISO_A3:"WSM"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"}},oA={Alabama:{name:"Alabama"},Alaska:{name:"Alaska"},Arizona:{name:"Arizona"},Arkansas:{name:"Arkansas"},California:{name:"California"},Colorado:{name:"Colorado"},Connecticut:{name:"Connecticut"},Delaware:{name:"Delaware"},"District of Columbia":{name:"District of Columbia"},Florida:{name:"Florida"},Georgia:{name:"Georgia"},Hawaii:{name:"Hawaii"},Idaho:{name:"Idaho"},Illinois:{name:"Illinois"},Indiana:{name:"Indiana"},Iowa:{name:"Iowa"},Kansas:{name:"Kansas"},Kentucky:{name:"Kentucky"},Louisiana:{name:"Louisiana"},Maine:{name:"Maine"},Maryland:{name:"Maryland"},Massachusetts:{name:"Massachusetts"},Michigan:{name:"Michigan"},Minnesota:{name:"Minnesota"},Mississippi:{name:"Mississippi"},Missouri:{name:"Missouri"},Montana:{name:"Montana"},Nebraska:{name:"Nebraska"},Nevada:{name:"Nevada"},"New Hampshire":{name:"New Hampshire"},"New Jersey":{name:"New Jersey"},"New Mexico":{name:"New Mexico"},"New York":{name:"New York"},"North Carolina":{name:"North Carolina"},"North Dakota":{name:"North Dakota"},Ohio:{name:"Ohio"},Oklahoma:{name:"Oklahoma"},Oregon:{name:"Oregon"},Pennsylvania:{name:"Pennsylvania"},"Rhode Island":{name:"Rhode Island"},"South Carolina":{name:"South Carolina"},"South Dakota":{name:"South Dakota"},Tennessee:{name:"Tennessee"},Texas:{name:"Texas"},Utah:{name:"Utah"},Vermont:{name:"Vermont"},Virginia:{name:"Virginia"},Washington:{name:"Washington"},"West Virginia":{name:"West Virginia"},Wisconsin:{name:"Wisconsin"},Wyoming:{name:"Wyoming"}},aA={Anguilla:{name:"Anguilla",ISO_A3:"AIA"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Canada:{name:"Canada",ISO_A3:"CAN"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},Dominica:{name:"Dominica",ISO_A3:"DMA"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Mexico:{name:"Mexico",ISO_A3:"MEX"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"}},lA={Argentina:{name:"Argentina",ISO_A3:"ARG"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Chile:{name:"Chile",ISO_A3:"CHL"},Colombia:{name:"Colombia",ISO_A3:"COL"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},Guyana:{name:"Guyana",ISO_A3:"GUY"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Panama:{name:"Panama",ISO_A3:"PAN"},Peru:{name:"Peru",ISO_A3:"PER"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Honduras:{name:"Honduras",ISO_A3:"HND"}},uA={World:nA,USA:oA,NorthAmerica:aA,SouthAmerica:lA,Canada:hA,Europe:rA,Asia:sA,Africa:iA,Australia:eA},cA=(t,i)=>Math.abs(t)+Math.abs(i);function dA(t,i){const s=t.reduce(cA,0),e=(h=t,Math.max(...h.map((t=>t))));var h;const r=(t=>Math.min(...t.map((t=>t))))(t);return Math.max(i**2*e/s**2,s**2/(i**2*r))}const fA=({height:t,width:i})=>t>i?{value:i,vertical:!1}:{value:t,vertical:!0},AA=({data:t,dimensions:i})=>{const{x:s,y:e,width:h,height:r}=i,n=t.map((t=>t.value)).reduce(cA,0),o=t.map((t=>t.animatedValue)).reduce(cA,0),a=t.map((t=>t.animatedValue*r*h/o)),l=a.reduce(((t,i)=>t+i),0),u=a.map((t=>t/l*100)),c=a.filter(((t,i)=>u[i])),d={children:[],id:0,parentID:-1,name:"Main Rectangle",value:n,animatedValue:o,x:s,y:e,width:h,height:r,nodeIndex:-1,userNode:{name:"Main Rectangle",value:n}};if(1===t.length){const s={...t[0],x:i.x,y:i.y,width:i.width,height:i.height,userNode:{...t[0].userNode,value:t[0].value}};d.children.push(s)}else yA(c,fA(d).value,t,d);return d.children},gA=(t,i,s,e,h)=>{const r=t.reduce(cA,0)/i;t.forEach(((t,i)=>{const n=Math.abs(t)/r,{x:o,y:a,children:l}=h,u=e[l.length],c={...u,x:o,y:a,width:s?r:n,height:s?n:r,userNode:{...u.userNode,value:u.value}};s?h.y-=n:h.x+=n,l.push(c)})),s?(h.x+=r,h.y+=i,h.width-=r):(h.x-=i,h.y-=r,h.height-=r)},yA=(t,i,s,e)=>{const h=[{children:t,width:i,row:[]}];for(;h.length>0;){const t=h.pop();if(!t)continue;const{children:i,width:r,row:n}=t;let o=0;const a=[...n];for(;o<i.length;){const t=[...a,i[o]],n=dA(a,r),l=dA(t,r);if(!(0===a.length||n>l)){gA(a,r,fA(e).vertical,s,e),h.push({children:i.slice(o),width:fA(e).value,row:[]});break}a.push(i[o]),o+=1}o===i.length&&gA(a,r,fA(e).vertical,s,e)}};class mA extends La{constructor(t,i,s,e,h,r,n){if(super(t,i,s,i.Py("treeMapChart bg",0),e,i.us.qi.treeMapChartBackgroundFillStyle||i.us.qi.chartXYSeriesBackgroundFillStyle,i.us.qi.treeMapChartBackgroundStrokeStyle||i.us.qi.chartXYBackgroundStrokeStyle,i.us.qi.treeMapChartTitleFont||i.us.qi.chartXYTitleFont,i.us.qi.treeMapChartTitleFillStyle||i.us.qi.chartXYTitleFillStyle,n),this.KL=new Map,this.qL=[],this.tR={},this.iR=f([]),this.Tm={speed:1},this.sR=Ki,this.eR=!0,this.hR="Go Back",this.rR=[],this.nR=this.qi.treeMapChartPathLabelFillStyle||this.qi.uiTextFillStyle,this.oR=this.qi.treeMapChartPathLabelFont||this.qi.uiTextFont,this.aR=this.qi.treeMapChartLabelHeaderFillStyle||this.qi.uiTextFillStyle,this.lR=this.qi.treeMapChartLabelHeaderFont||this.qi.uiTextFont,this.uR=this.qi.treeMapChartLabelFillStyle||this.qi.uiTextFillStyle,this.cR=this.qi.treeMapChartLabelFont||this.qi.uiTextFont,this.Hi=!0,this.Eb=!0,this.dR=!1,this.fR=this.qi.treeMapChartParentColor||F,this.AR=this.qi.treeMapChartNodeStrokeStyle||this.qi.uiBackgroundStrokeStyle,this.onNodeMouseEnter=t=>this.L.on("mouseEnter",t),this.onNodeMouseLeave=t=>this.L.on("mouseLeave",t),this.onNodeMouseClick=t=>this.L.on("mouseClick",t),this.onNodeMouseDoubleClick=t=>this.L.on("mouseDoubleClick",t),this.onNodeMouseDown=t=>this.L.on("mouseDown",t),this.onNodeMouseUp=t=>this.L.on("mouseUp",t),this.onNodeMouseMove=t=>this.L.on("mouseMove",t),this.offNodeMouseEnter=t=>this.L.off(t,"mouseEnter"),this.offNodeMouseLeave=t=>this.L.off(t,"mouseLeave"),this.offNodeMouseClick=t=>this.L.off(t,"mouseClick"),this.offNodeMouseDoubleClick=t=>this.L.off(t,"mouseDoubleClick"),this.offNodeMouseDown=t=>this.L.off(t,"mouseDown"),this.offNodeMouseUp=t=>this.L.off(t,"mouseUp"),this.offNodeMouseMove=t=>this.L.off(t,"mouseMove"),this.offNodeMouseDragStart=t=>this.L.off(t,"mouseDragStart"),this.offNodeMouseDrag=t=>this.L.off(t,"mouseDrag"),this.offNodeMouseDragStop=t=>this.L.off(t,"mouseDragStop"),this.offNodeMouseWheel=t=>this.L.off(t,"mouseWheel"),this.Ob=(t,i,s,e,h)=>{this.us.xs(),this.dR=!0},this.Mt=(t,i)=>{const s=this.gR(i);s&&(this.ix=this.yR(s,t),this.Eb&&this.us.ls.Cs(i,!0),this.eR&&this.engine.setMouseStyle(Xe.Point),this.L.emit("mouseEnter",this,t,this.ix),this.us.xs())},this._t=(t,i)=>{this.gR(i)&&(this.ix=void 0,this.Eb&&this.us.ls.Cs(i,!1),this.engine.setMouseStyle(Xe.Default),this.L.emit("mouseLeave",this,t,this.ix),this.us.xs())},this.Ft=(t,i)=>{const s=this.gR(i);s&&(this.ix=this.yR(s,t),this.Eb&&this.us.ls.Cs(i,!0),this.eR&&this.engine.setMouseStyle(Xe.Point),this.L.emit("mouseEnter",this,t,this.ix),this.us.xs())},this.wt=(t,i)=>{const s=this.gR(i);if(s){if(this.eR){const i=(null==s?void 0:s.children.length)?s:s.parentID?this.tR[s.parentID]:void 0;i&&(this.iR.M([i]),this.ix=void 0,this.L.emit("viewChange",this.iR._()),this.dR=!0),t&&di(t)}this.L.emit("mouseClick",this,t,this.yR(s,t)),this.us.xs()}},this.Ct=(t,i)=>{const s=this.gR(i);s&&this.L.emit("mouseDoubleClick",this,t,this.yR(s,t))},this.kt=(t,i)=>{const s=this.gR(i);s&&this.L.emit("mouseDown",this,t,this.yR(s,t))},this.Tt=(t,i)=>{const s=this.gR(i);s&&this.L.emit("mouseUp",this,t,this.yR(s,t))},this.Pt=(t,i,s)=>{const e=this.gR(s);e&&this.L.emit("mouseDragStart",this,t,i,this.yR(e,t))},this.It=(t,i,s,e,h)=>{const r=this.gR(h);r&&this.L.emit("mouseDrag",this,t,i,s,e,this.yR(r,t))},this.Dt=(t,i,s,e)=>{const h=this.gR(e);h&&this.L.emit("mouseDragStop",this,t,i,s,this.yR(h,t))},this.Bt=(t,i)=>{const s=this.gR(i);s&&this.L.emit("mouseWheel",this,t,this.yR(s,t))},this.Lt=(t,i)=>{const s=this.gR(i);s&&(this.ix=this.yR(s,t),this.Eb&&this.us.ls.Cs(i,!0),this.L.emit("touchStart",this,t,this.ix),this.us.xs(),di(t))},this.Rt=(t,i)=>{const s=this.gR(i);s&&(this.ix=this.yR(s,t),this.Eb&&this.us.ls.Cs(i,!0),this.L.emit("touchMove",this,t,this.ix),this.us.xs(),di(t))},this.Et=(t,i)=>{const s=this.gR(i);if(s){if(this.ix=void 0,this.eR){const i=(null==s?void 0:s.children.length)?s:s.parentID?this.tR[s.parentID]:void 0;i&&(this.iR.M([i]),this.L.emit("viewChange",this.iR._()),this.dR=!0),t&&di(t)}this.Eb&&this.us.ls.Cs(i,!1),this.L.emit("touchEnd",this,t,this.ix),this.us.xs(),di(t)}},this.mR=t=>{const i=this.tR[this.rR[t].id]?[this.tR[this.rR[t].id]]:this.qL;this.iR.M(i),this.L.emit("viewChange",i),this.dR=!0,this.us.xs()},this.qi.treeMapChartNodeColors)this.pR=this.qi.treeMapChartNodeColors;else{const t=this.qi.pointSeriesFillStyle,i=t=>Y(t)?t.getColor():F;this.pR="function"==typeof t?new Array(5).fill(0).map(((s,e)=>i(t(e)))):[i(t)]}this.us.jn(Vo.If),this.Xm=i.pb("TreeMapChart plotting",0),this.Zm=i.pb("TreeMap UI plotting",1),this.onResize(this.Ob),this.bh.yr("TreeMap Chart");const o=i.Qm(),a=jt(r?r.cursorBuilder:void 0,tl);this.Jm=Va(this,o,a.pm(o,this.uiScale,this.uiScale,Yt,this.qi),void 0,"show-pointed",pA,(()=>0)),this.vR=this.es.Cg(),this.Iy(h,this.uiScale),this.Zb=this.Xm.Yp(this.mg).De(new H).Pe(this.AR),this.SR=this.us.ls.Hr(this,{animationEnabled:!1!==(null==r?void 0:r.animationsEnabled)}),this.bR=new _l((()=>this.Zm.Nr(this.mg).setMouseInteractions(!1))),this.xR=new _l((()=>this.Zm.Nr(this.uiScale))),this.Zb.setMouseInteractions(this.Hi).setMouseEnterEventHandler(((t,i,s)=>this.Mt(i,s))).setMouseLeaveEventHandler(((t,i,s)=>this._t(i,s))).setMouseClickEventHandler(((t,i,s)=>this.wt(i,s))).setMouseDoubleClickEventHandler(((t,i,s)=>this.Ct(i,s))).setMouseDownEventHandler(((t,i,s)=>this.kt(i,s))).setMouseUpEventHandler(((t,i,s)=>this.Tt(i,s))).setMouseMoveEventHandler(((t,i,s)=>this.Ft(i,s))).setMouseDragStartEventHandler(((t,i,s,e)=>this.Pt(i,s,e))).setMouseDragEventHandler(((t,i,s,e,h,r)=>this.It(i,s,e,h,r))).setMouseDragStopEventHandler(((t,i,s,e,h)=>this.Dt(i,s,e,h))).setMouseWheelEventHandler(((t,i,s)=>this.Bt(i,s))).setTouchStartEventHandler(((t,i,s)=>this.Lt(i,s))).setTouchMoveEventHandler(((t,i,s)=>this.Rt(i,s))).setTouchEndEventHandler(((t,i,s)=>this.Et(i,s))),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled))}setData(t){t=Array.isArray(t)?t.slice():[t];const{MR:i}=(()=>{let t=0;return{MR:i=>{var s;const e=i.map(((t,i)=>({node:t,parent:null}))),h=[];for(;e.length>0;){const i=e.pop();if(!i)continue;const{node:r,parent:n}=i;t+=1;const o={id:t,parentID:null==n?void 0:n.id,name:r.name,value:Number(r.value)||0,animatedValue:Number(r.value)||0,children:[],nodeIndex:n?n.nodeIndex:-1,userNode:r};n?n.children.push(o):h.push(o),null===(s=r.children)||void 0===s||s.forEach((t=>{e.push({node:t,parent:o})}))}const r=t=>{t.children.forEach(r),t.children.length>0&&(t.value+=t.children.reduce(((t,i)=>t+i.value),0),t.animatedValue+=t.children.reduce(((t,i)=>t+i.animatedValue),0),t.children.sort(((t,i)=>i.animatedValue-t.animatedValue)))};h.forEach(r);const n=1===i.length?h[0].children:h;return n.sort(((t,i)=>i.animatedValue-t.animatedValue)),n.forEach(((t,i)=>{t.nodeIndex=i;const s=i=>{i.children.forEach((i=>{i.nodeIndex=t.nodeIndex,s(i)}))};s(t)})),h}}})(),s=i(t);return s.forEach((t=>{const i=this.tR[t.id];i&&this._R(t,i)})),this.ix=void 0,this.iR.M(s),this.qL=s,this.tR=this.wR(s),this.dR=!0,this.us.xs(),this}setAnimationValues(t,i=1){return this.Tm=t?{speed:i}:void 0,this.us.xs(),this}setInitPathButtonText(t){return this.hR=t,this.dR=!0,this.us.xs(),this}setDisplayedLevelsCount(t){return this.sR=t,this.dR=!0,this.us.xs(),this}setDrillDownEnabled(t){return this.eR=t,this.dR=!0,this.us.xs(),this}setDrillDownNode(t){var i,s;if(this.ix=void 0,void 0===t)this.iR.M(this.qL);else{const e=[...this.qL];for(;e.length>0;){const h=e.pop();if(h){if(void 0!==h.value&&h.userNode===t||h.parentID&&Array.isArray(t)&&(null===(s=null===(i=this.tR[h.parentID])||void 0===i?void 0:i.userNode)||void 0===s?void 0:s.children)===t){const t=h.children.length?h:h.parentID?this.tR[h.parentID]:this.qL[0];this.iR.M([t]);break}if(h.children)for(let t=h.children.length-1;t>=0;t-=1)e.push(h.children[t])}}}return this.L.emit("viewChange",this.iR._()),this.dR=!0,this.us.xs(),this}setNodeColoring(t){return t instanceof Array?(this.Zb.De(new H),this.pR=t):this.Zb.De(t),this.dR=!0,this.us.xs(),this}setParentNodeColor(t){return this.fR=t,this.dR=!0,this.us.xs(),this}setPathLabelFillStyle(t){return this.nR="function"==typeof t?t(this.nR):t,this.dR=!0,this.us.xs(),this}getPathLabelFillStyle(){return this.nR}setPathLabelFont(t){return Ih(t)?this.oR=t:this.oR=t(this.oR),this.dR=!0,this.us.xs(),this}getPathLabelFont(){return this.oR}setHeaderFont(t){return Ih(t)?this.lR=t:this.lR=t(this.lR),this.dR=!0,this.us.xs(),this}getHeaderFont(){return this.lR}setHeaderFillStyle(t){return this.aR="function"==typeof t?t(this.aR):t,this.dR=!0,this.us.xs(),this}getHeaderFillStyle(){return this.aR}setLabelFont(t){return Ih(t)?this.cR=t:this.cR=t(this.cR),this.dR=!0,this.us.xs(),this}getLabelFont(){return this.cR}setLabelFillStyle(t){return this.uR="function"==typeof t?t(this.uR):t,this.dR=!0,this.us.xs(),this}getLabelFillStyle(){return this.uR}setNodeBorderStyle(t){return this.Zb.Pe(t),this.dR=!0,this.us.xs(),this}getNodeBorderStyle(){return this.Zb.mo()}setNodeEffect(t){return this.vR.bs(t),this.us.xs(),this}getNodeEffect(){return this.vR.Ms()}setCursor(t){return this.Jm.setCursor(t),this}getCursor(){return this.Jm.getCursor()}setCursorMode(t){return this.Jm.setCursorMode(t),this}getCursorMode(){return this.Jm.getCursorMode()}setCustomCursor(t){return this.Jm.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.Jm.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.Jm.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Jm.setCursorFormatting(t),this}getCursorFormatting(){return this.Jm.getCursorFormatting()}addCursor(t=tl){const i=this.vy(),s=t.pm(i,this.uiScale,this.uiScale,this.Ay(i),this.qi);return this.ky(s),s}onNodeMouseDragStart(t){return this.L.on("mouseDragStart",t)}onNodeMouseDrag(t){return this.L.on("mouseDrag",t)}onNodeMouseDragStop(t){return this.L.on("mouseDragStop",t)}onNodeMouseWheel(t){return this.L.on("mouseWheel",t)}onNodeTouchStart(t){return this.L.on("touchStart",t)}onNodeTouchMove(t){return this.L.on("touchMove",t)}onNodeTouchEnd(t){return this.L.on("touchEnd",t)}onViewChange(t){return this.L.on("viewChange",t)}offNodeTouchStart(t){return this.L.off(t,"touchStart")}offNodeTouchMove(t){return this.L.off(t,"touchMove")}offNodeTouchEnd(t){return this.L.off(t,"touchEnd")}offViewChange(t){return this.L.off(t,"viewChange")}setMouseInteractions(t){return this.Hi=t,this.Zb.setMouseInteractions(t),this}getMouseInteractions(){return this.Hi}setAnimationHighlight(t){return this.SR.jr(t),this}getAnimationHighlight(){return this.SR.Zr()}setHighlightOnHover(t){return this.Eb=t,this}getHighlightOnHover(){return this.Eb}yR(t,i){const s=this.us.Oo(i);return{cursorPosition:{pointMarker:{x:s.engineX,y:s.engineY},pointMarkerScale:this.us.ft,resultTable:{x:s.engineX,y:s.engineY},resultTableScale:this.us.ft},name:t.name,value:t.value,node:t.userNode}}getMinimumSize(){}sf(){return[this]}Le(t){super.Le(t),super.Fy(),Ra.Oy(this.bh,this.Dy);const i=Ra.Vy(this.bh,this.Dy);if(this.dR&&this.iR._().length){this.Zb.Vt(),this.KL.clear(),this.SR.Xr(),this.uh&&this.CR(t);const s=AA({data:this.iR._(),dimensions:{x:0+this.Ca.left,y:this.mg.y.getInnerEnd()-i-this.Ca.top,width:this.mg.x.getInnerEnd()-this.Ca.right-this.Ca.left,height:this.mg.y.getInnerEnd()-i-this.Ca.top-this.Ca.bottom}}),e=this.bR.Mp();this.kR(s,e),e.finishPlot(),this.TR(),this.qL!==this.iR._()&&this.qL.length>1&&this.rR.unshift({name:this.hR,id:0});let h=0;const r=this.xR.Mp(),n=this.oR;this.rR.forEach(((t,i)=>{const s=r.add(),e=this.us.Og.Vg(t.name,n,0);s.yr(`← ${t.name}`).Zh(n).Re({x:0,y:100}).Ha({x:-1,y:1}).Vr({left:this.Ca.left+h,top:this.Ca.top,right:0,bottom:0}).De(this.nR).setMouseClickEventHandler((t=>this.mR(i))).setMouseEnterEventHandler((()=>this.engine.setMouseStyle(Xe.Point))).setMouseLeaveEventHandler((()=>this.engine.setMouseStyle(Xe.Default))),h+=e.x+25})),r.finishPlot(),this.iR._().every((t=>t.value===t.animatedValue))?this.dR=!1:this.us.xs(!0)}return this.Jm.Le(!1,[],void 0,{explicitTarget:this.ix}),this}dispose(){return this.Zm.U(),this.Xm.U(),this.Jm.U(),this.Zb.dispose(),this.KL.clear(),this.bR.wp(),this.xR.wp(),super.dispose()}Z(){return super.Z(),this}J(){return super.J(),this}jd(){return ki(this.Zb.$h())}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),Ci(t,this.qi,s,{}),this}kR(t,i,s=!1,e=0){const h=t.map(((t,i)=>({node:t,isChild:s,visibleDepth:e})));for(;h.length>0;){const t=h.pop();if(!t)continue;const{node:s,visibleDepth:e,opacity:r}=t,{x:n,y:o,height:a,width:l,children:u,animatedValue:c,name:d,nodeIndex:f}=s,A=this.pR,g=0===e&&1===this.iR._().length?this.fR:A[f%A.length],y=[{x:n,y:o},{x:n,y:o-a},{x:l+n,y:o-a},{x:l+n,y:o}],m=this.Zb.$r().wl(y).FR(g.setA(r||250)).tx(c);this.KL.set(m,s),this.SR.$r(m,(t=>m.cs(t)));const p=n+5,v=o+25+5,S=Math.max(a-25-5,0),b=Math.max(l-5-5,0);if(u&&u.length&&e<this.sR&&b>15&&S>15){const t=AA({data:u,dimensions:{x:b>0?p:n,y:S>0?o-25:v,width:b,height:S}});for(let i=0;i<t.length;i+=1){const n=(250-(u.length>7?50:150))/(u.length-1),o=1===s.id&&1===this.qL.length||this.qL===this.iR._()?250:r?r/(e+1):250-i*n;h.push({node:t[i],isChild:!0,visibleDepth:e+1,opacity:o})}}const x=0===e&&1===this.iR._().length?this.aR:this.uR,M=0===e?this.lR:this.cR,_=this.IR(d,l-25,M),w=this.us.Og.Vg(_,M,0),C=i.add();l-25>w.x&&a>25?C.yr(_).Re({x:n+5,y:o-2.5}).Ha({x:-1,y:1}).De(x).Zh(M):C.yr("")}}wR(t){const i={},s=[...t];for(;s.length>0;){const t=s.pop();t&&(i[t.id]=t,t.children&&s.push(...t.children))}return i}gR(t){if(!this.dR&&t)return this.KL.get(t)}TR(){this.rR=[];const t=this.iR._()[0].id;let i=this.tR[t].parentID;for(;i;)this.rR.push({name:this.tR[i].name,id:i}),i=this.tR[i].parentID;return this.rR.reverse()}IR(t,i,s){let e=this.us.Og.Vg(t,s,0).x;if(e<=i)return t;const h=t.split(" ");let r=t;for(;h.length>1&&e>i;)h.pop(),r=`${h.join(" ")}...`,e=this.us.Og.Vg(r,s,0).x;if(e>i)for(r=`${h[0]}...`,e=this.us.Og.Vg(r,s,0).x;r.length>3&&e>i;)r=`${r.substring(0,r.length-4)}...`,e=this.us.Og.Vg(r,s,0).x;return r.length<=3&&e>i?"":r}CR(t){var i;const s=[...this.qL];for(;s.length>0;){const e=s.pop();if(!e)continue;const h=e.value-e.animatedValue;if(Math.abs(h)<.0015*e.value||void 0===this.Tm)e.animatedValue=e.value;else{const s=h/250*((null===(i=this.Tm)||void 0===i?void 0:i.speed)||1)*t;e.animatedValue+=s,(h>0&&e.animatedValue>e.value||h<0&&e.animatedValue<e.value)&&(e.animatedValue=e.value)}e.children&&e.children.length>0&&s.push(...e.children)}}_R(t,i){const s=[{current:t,previous:i}];for(;s.length>0;){const t=s.pop();if(!t)continue;const{current:i,previous:e}=t;i.animatedValue=this.uh?e.animatedValue:i.value,e.nodeIndex<0?i.nodeIndex=0:i.nodeIndex=e.nodeIndex;const h=new Map(e.children.map((t=>[t.id,t])));i.children.forEach(((t,i)=>{const r=h.get(t.id);s.push({current:t,previous:r||e})}))}}}const pA=(t,i,s)=>[[i.name],[{text:i.value.toString(),font:{weight:"bold"}}]],vA=(t,i)=>{const s=(t=>{const i=new U({color:t.uiStrokeColorContrastHigh}),s=new U({color:t.uiStrokeColorContrastMedium}),e=new U({color:t.uiStrokeColorContrastLow}),h=new Fh({family:t.fontFamily,weight:"normal",style:"normal"}),r=h.setSize(18*t.fontScaler),n=h.setSize(16*t.fontScaler),o=h.setSize(14*t.fontScaler),a=h.setSize(10*t.fontScaler),l=h.withMutations((i=>i.set("size",14*t.fontScaler).set("weight","bold"))),u=h.setSize(13*t.fontScaler),c=new ve({thickness:2,fillStyle:e}),d=new U({color:t.dataHighlightOverlayColor}),f=new ve({thickness:2,fillStyle:t.legendBackgroundBorderFillStyle}),A=t.dataColorPalette.map((t=>new U({color:t.stroke}))),g=t=>A[t%A.length],y=A.map((t=>new ve({thickness:2,fillStyle:t}))),m=t=>y[t%y.length],p=t.dataColorPalette.map((t=>new U({color:t.border}))).map((t=>new ve({thickness:2,fillStyle:t}))),v=t=>p[t%p.length],x=t.dataColorPalette.map((t=>{const i=t.area;return new rt({angle:0,stops:[{offset:0,color:i.setA(0)},{offset:.8,color:i}]})})),M=t=>x[t%x.length],_=t.dataColorPaletteInverted.map((t=>{const i=t.area;return new rt({angle:180,stops:[{offset:0,color:i.setA(0)},{offset:.8,color:i}]})})),w=t=>_[t%_.length],C=t.dataColorPalette.map((t=>{const i=t.area;return new rt({angle:180,stops:[{color:Mi(i,S(255,255,255,i.getA()),.3),offset:0},{color:i,offset:.5},{color:Mi(i,S(0,0,0,i.getA()),.3),offset:1}]})})),k=t=>C[t%C.length],T=t.dataColorPaletteInverted.map((t=>new U({color:t.border}))).map((t=>new ve({thickness:2,fillStyle:t}))),F=t=>T[t%T.length],I=new U({color:t.dataColorPositive}),P=new U({color:t.dataColorNegative}),D=new ve({thickness:1,fillStyle:new U({color:t.dataStrokeColorContrastHigh.setA(50)})}),B=new ve({thickness:2,fillStyle:t.axisLineFillStyle}),L=at,R=new U({color:S(0,0,0,1)}),E=new ve({thickness:1,fillStyle:t.axisGridMajorFillStyle}),z=at,V=o,N=t.axisLabelMajorFillStyle,G=new ve({thickness:1,fillStyle:t.axisGridMajorFillStyle}),W=new ve({thickness:1,fillStyle:t.axisTickMajorFillStyle}),Y=o,H=t.axisLabelMajorFillStyle,$=new ve({thickness:1,fillStyle:t.axisGridMinorFillStyle}),X=new ve({thickness:1,fillStyle:t.axisTickMinorFillStyle}),j=a,Z=t.axisLabelMinorFillStyle,Q=jo,J=new $o({gridStrokeStyle:E,tickStyle:z,tickLength:50,tickPadding:-14,labelFont:V,labelFillStyle:N}),K=new $o({gridStrokeStyle:G,tickStyle:W,tickLength:7,tickPadding:5,labelFont:Y,labelFillStyle:H}),q=new $o({gridStrokeStyle:$,tickStyle:X,tickLength:4,tickPadding:10,labelFont:j,labelFillStyle:Z}),tt=new _a({extremeTickStyle:Q,majorTickStyle:K,minorTickStyle:q}),it=new ga({greatTickStyle:J,majorTickStyle:K,minorTickStyle:q}),st=new ta({majorTickStyle:K,minorTickStyle:q}),et=new U({color:t.dataHighlightOverlayColor}),ht=new ve({thickness:1,fillStyle:s}),nt=new ve({thickness:2,fillStyle:s}),ot=t=>new Oh.Triangulated({shape:"sphere",size:10,fillStyle:A[t%A.length]}),lt=A[0],ut=t.uiTextFillStyle,ct=t.legendBackgroundFillStyle,dt=new ve({thickness:1,fillStyle:t.legendBackgroundBorderFillStyle}),ft=wi(t.legendButtonDefaultColor),At=wi(t.isDark?S(70,70,70,255):S(170,170,170,255)),gt=new U({color:t.isDark?S(70,70,70,255):S(170,170,170,255)}),yt=new ve({thickness:1,fillStyle:i}),mt=new In({thickness:1,fillStyle:t.cursorGridFillStyle,pattern:Tn.DashedEqual,patternScale:3}),pt=new ve({thickness:1,fillStyle:t.cursorGridFillStyle}),vt=t.zoomBandChartDefocusOverlayFillStyle,St=new ve({thickness:2,fillStyle:new U({color:t.zoomBandChartSplitterColor})}),bt=new U({color:t.uiBackgroundColor});let xt={isDark:t.isDark,effect:t.effect,effectsText:t.effectsText,effectsDashboardSplitters:t.effectsDashboardSplitters,lcjsBackgroundFillStyle:t.lcjsBackgroundFillStyle,lcjsBackgroundStrokeStyle:at,highlightColorOffset:t.highlightColorOffset,highlightColorOffsetAxisOverlay:t.highlightColorOffsetAxisOverlay,dashboardSplitterStyle:new ve({thickness:4,fillStyle:t.dashboardSplitterFillStyle}),chartXYBackgroundFillStyle:t.panelBackgroundFillStyle,chartXYBackgroundStrokeStyle:at,chartXYTitleFont:r,chartXYTitleFillStyle:t.titleFillStyle,chartXYSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chartXYSeriesBackgroundStrokeStyle:c,chartXYZoomingRectangleFillStyle:d,chartXYZoomingRectangleStrokeStyle:f,chartXYFittingRectangleFillStyle:d,chartXYFittingRectangleStrokeStyle:f,lineSeriesStrokeStyle:m,pointLineSeriesStrokeStyle:m,pointLineSeriesFillStyle:g,pointSeriesFillStyle:g,ellipseSeriesFillStyle:g,ellipseSeriesStrokeStyle:m,polygonSeriesFillStyle:g,polygonSeriesStrokeStyle:m,rectangleSeriesFillStyle:g,rectangleSeriesStrokeStyle:at,segmentSeriesStrokeStyle:m,boxSeriesBodyFillStyle:g(0),boxSeriesBodyStrokeStyle:at,boxSeriesStrokeStyle:new ve({thickness:1,fillStyle:A[0]}),boxSeriesMedianStrokeStyle:new ve({thickness:1,fillStyle:new U({color:S(0,0,0)})}),ohlcCandleThicknessPixels:5,ohlcCandleBodyFillStylePositive:I,ohlcCandleBodyFillStyleNegative:P,ohlcCandleTailStrokeStylePositive:new ve({thickness:1,fillStyle:new U({color:t.uiStrokeColorContrastHigh})}),ohlcCandleTailStrokeStyleNegative:new ve({thickness:1,fillStyle:new U({color:t.uiStrokeColorContrastHigh})}),ohlcBarThicknessPixels:10,ohlcBarStrokeStylePositive:new ve({thickness:2,fillStyle:I}),ohlcBarStrokeStyleNegative:new ve({thickness:2,fillStyle:P}),heatmapGridSeriesFillStyle:g,heatmapGridSeriesWireframeStyle:D,heatmapScrollingGridSeriesFillStyle:g,heatmapScrollingGridSeriesWireframeStyle:D,areaRangeSeriesFillStyle:M,areaRangeSeriesStrokeStyle:v,areaRangeSeriesFillStyleInverted:w,areaRangeSeriesStrokeStyleInverted:F,areaSeriesBipolarHighFillStyle:M,areaSeriesBipolarHighStrokeStyle:v,areaSeriesBipolarLowFillStyle:w,areaSeriesBipolarLowStrokeStyle:F,areaSeriesPositiveFillStyle:M,areaSeriesPositiveStrokeStyle:v,areaSeriesNegativeFillStyle:w,areaSeriesNegativeStrokeStyle:F,xAxisTitleFont:n,xAxisTitleFillStyle:t.axisTitleFillStyle,xAxisStrokeStyle:B,xAxisNibStyle:L,xAxisOverlayStyle:R,xAxisZoomingBandFillStyle:d,xAxisZoomingBandStrokeStyle:at,xAxisNumericTicks:tt,xAxisDateTimeTicks:it,xAxisTimeTicks:st,yAxisTitleFont:n,yAxisTitleFillStyle:t.axisTitleFillStyle,yAxisStrokeStyle:B,yAxisNibStyle:L,yAxisOverlayStyle:R,yAxisZoomingBandFillStyle:d,yAxisZoomingBandStrokeStyle:at,yAxisNumericTicks:tt,yAxisDateTimeTicks:it,yAxisTimeTicks:st,bandFillStyle:et,bandStrokeStyle:ht,constantLineStrokeStyle:nt,barChartBackgroundFillStyle:t.panelBackgroundFillStyle,barChartBackgroundStrokeStyle:at,barChartTitleFont:r,barChartTitleFillStyle:t.titleFillStyle,barChartSeriesBackgroundFillStyle:O,barChartSeriesBackgroundStrokeStyle:at,barChartBarFillStyle:g,barChartBarStrokeStyle:new ve({thickness:1,fillStyle:e}),barChartValueAxisTitleFont:n,barChartValueAxisTitleFillStyle:t.axisTitleFillStyle,barChartValueAxisStrokeStyle:B,barChartValueAxisTicks:tt.setMajorTickStyle((t=>t.setGridStrokeStyle(at))).setMinorTickStyle((t=>t.setGridStrokeStyle(at))),barChartCategoryAxisTitleFont:n,barChartCategoryAxisTitleFillStyle:t.axisTitleFillStyle,barChartCategoryAxisStrokeStyle:B,barChartCategoryLabels:{formatter:(t,i)=>t,labelFillStyle:tt.majorTickStyle.labelFillStyle,labelFont:tt.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,tickStyle:tt.majorTickStyle.tickStyle,tickLength:0},barChartValueLabelsAfterBars:{position:"after-bar",formatter:(t,i,s)=>t.chart.valueAxis.formatValue(s),labelFillStyle:tt.majorTickStyle.labelFillStyle,labelFont:tt.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},barChartValueLabelsInsideBars:{position:"inside-bar",formatter:(t,i,s)=>t.chart.valueAxis.formatValue(s),labelFillStyle:tt.majorTickStyle.labelFillStyle,labelFont:tt.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},chart3DBackgroundFillStyle:t.panelBackgroundFillStyle,chart3DBackgroundStrokeStyle:at,chart3DTitleFont:r,chart3DTitleFillStyle:t.titleFillStyle,chart3DSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chart3DSeriesBackgroundStrokeStyle:c,chart3DBoundingBoxStrokeStyle:at,xAxis3DTitleFont:n,xAxis3DTitleFillStyle:t.axisTitleFillStyle,xAxis3DStrokeStyle:B,xAxis3DNumericTicks:tt,xAxis3DDateTimeTicks:it,xAxis3DTimeTicks:st,yAxis3DTitleFont:n,yAxis3DTitleFillStyle:t.axisTitleFillStyle,yAxis3DStrokeStyle:B,yAxis3DNumericTicks:tt,yAxis3DDateTimeTicks:it,yAxis3DTimeTicks:st,zAxis3DTitleFont:n,zAxis3DTitleFillStyle:t.axisTitleFillStyle,zAxis3DStrokeStyle:B,zAxis3DNumericTicks:tt,zAxis3DDateTimeTicks:it,zAxis3DTimeTicks:st,lineSeries3DStrokeStyle:m,pointLineSeries3DStrokeStyle:m,pointLineSeries3DPointStyle:ot,pointSeries3DPointStyle:ot,pointCloudSeries3DPointStyle:t=>new Oh.Pixelated({size:5,fillStyle:A[t%A.length]}),surfaceGridSeries3DFillStyle:g,surfaceGridSeries3DWireframeStyle:D,surfaceScrollingGridSeries3DFillStyle:g,surfaceScrollingGridSeries3DWireframeStyle:D,boxSeries3DFillStyle:g,meshModel3DFillStyle:g(0),polarChartBackgroundFillStyle:t.panelBackgroundFillStyle,polarChartBackgroundStrokeStyle:at,polarChartTitleFont:r,polarChartTitleFillStyle:t.titleFillStyle,polarChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,polarChartSeriesBackgroundStrokeStyle:c,polarSectorFillStyle:et,polarSectorStrokeStyle:ht,polarAmplitudeAxisTitleFont:n,polarAmplitudeAxisTitleFillStyle:t.axisTitleFillStyle,polarAmplitudeAxisStrokeStyle:B,polarAmplitudeAxisNumericTicks:tt,polarAmplitudeAxisDateTimeTicks:it,polarAmplitudeAxisTimeTicks:st,polarRadialAxisTitleFont:n,polarRadialAxisTitleFillStyle:t.axisTitleFillStyle,polarRadialAxisStrokeStyle:B,polarRadialAxisTickStyle:K,polarLineSeriesStrokeStyle:m,polarPointLineSeriesFillStyle:g,polarPointLineSeriesStrokeStyle:m,polarPointSeriesFillStyle:g,polarPolygonSeriesFillStyle:k,polarPolygonSeriesStrokeStyle:v,polarAreaSeriesFillStyle:k,polarAreaSeriesStrokeStyle:v,polarHeatmapSeriesFillStyle:g,mapChartBackgroundFillStyle:t.panelBackgroundFillStyle,mapChartBackgroundStrokeStyle:at,mapChartTitleFont:r,mapChartTitleFillStyle:t.titleFillStyle,mapChartFillStyle:lt,mapChartStrokeStyle:new ve({thickness:1,fillStyle:new U({color:t.dataStrokeColorContrastMedium})}),mapChartOutlierRegionFillStyle:O,mapChartOutlierRegionStrokeStyle:new ve({thickness:1,fillStyle:e}),mapChartSeparateRegionFillStyle:ct,mapChartSeparateRegionStrokeStyle:dt,dataGridBackgroundFillStyle:t.panelBackgroundFillStyle,dataGridBackgroundStrokeStyle:at,dataGridTitleFont:r,dataGridTitleFillStyle:t.titleFillStyle,dataGridTextFont:o,dataGridTextFillStyle:lt,dataGridCellBackgroundFillStyle:new U({color:t.uiBackgroundColor}),dataGridBorderStrokeStyle:new ve({thickness:.4,fillStyle:new U({color:t.uiBackgroundBorderColor})}),dataGridScrollBarBackgroundFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarBackgroundStrokeStyle:at,dataGridScrollBarFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarStrokeStyle:dt,dataGridScrollBarButtonFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarButtonStrokeStyle:dt,dataGridScrollBarButtonArrowFillStyle:ft,dataGridScrollBarButtonArrowStrokeStyle:dt,sparkLineChartStrokeStyle:m(0),sparkPointChartFillStyle:g(0),sparkBarChartFillStyle:g(0),sparkBarChartStrokeStyle:v(0),sparkAreaChartFillStyle:M(0),sparkAreaChartStrokeStyle:v(0),sparkPieChartFillStyle:g,sparkPieChartStrokeStyle:dt,sparkChartBandFillStyle:et,sparkChartBandStrokeStyle:ht,sparkChartConstantLineStrokeStyle:nt,spiderChartBackgroundFillStyle:t.panelBackgroundFillStyle,spiderChartBackgroundStrokeStyle:at,spiderChartTitleFont:r,spiderChartTitleFillStyle:t.titleFillStyle,spiderChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,spiderChartSeriesBackgroundStrokeStyle:c,spiderChartWebStyle:new ve({thickness:2,fillStyle:e}),spiderChartScaleLabelFillStyle:t.axisLabelMajorFillStyle,spiderChartScaleLabelFont:o,spiderChartAxisLabelFillStyle:t.axisTitleFillStyle,spiderChartAxisLabelFont:n,spiderChartAxisStrokeStyle:new ve({thickness:2,fillStyle:s}),spiderChartAxisNibStrokeStyle:new ve({thickness:2,fillStyle:i}),spiderSeriesFillStyle:k,spiderSeriesStrokeStyle:v,spiderSeriesPointFillStyle:g,pieChartBackgroundFillStyle:t.panelBackgroundFillStyle,pieChartBackgroundStrokeStyle:at,pieChartTitleFont:r,pieChartTitleFillStyle:t.titleFillStyle,pieChartSliceFillStylePalette:g,pieChartSliceStrokeStyle:dt,pieChartSliceLabelFont:u,pieChartSliceLabelFillStyle:t.uiTextFillStyle,pieChartConnectorStrokeStyle:yt,funnelChartBackgroundFillStyle:t.panelBackgroundFillStyle,funnelChartBackgroundStrokeStyle:at,funnelChartTitleFont:r,funnelChartTitleFillStyle:t.titleFillStyle,funnelChartSliceFillStylePalette:g,funnelChartSliceStrokeStyle:dt,funnelChartSliceLabelFont:u,funnelChartSliceLabelFillStyle:t.uiTextFillStyle,funnelChartConnectorStrokeStyle:yt,pyramidChartBackgroundFillStyle:t.panelBackgroundFillStyle,pyramidChartBackgroundStrokeStyle:at,pyramidChartTitleFont:r,pyramidChartTitleFillStyle:t.titleFillStyle,pyramidChartSliceFillStylePalette:g,pyramidChartSliceStrokeStyle:dt,pyramidChartSliceLabelFont:u,pyramidChartSliceLabelFillStyle:t.uiTextFillStyle,pyramidChartConnectorStrokeStyle:yt,gaugeChartValueLabelFont:u.setSize(60),gaugeChartUnitLabelFont:u.setSize(40),gaugeChartTickFont:u.setSize(30),gaugeChartBarThickness:40,gaugeChartValueIndicatorThickness:10,gaugeChartRoundedEdges:!0,gaugeChartNeedleLength:40,gaugeChartStartAngle:225,gaugeChartEndAngle:-45,gaugeChartNeedleAlignment:0,gaugeChartGapBetweenBarAndValueIndicators:10,gaugeChartTickFillStyle:t.uiTextFillStyle,gaugeChartBarGradient:!0,gaugeChartBarStrokeStyle:at,gaugeChartUnitLabelFillStyle:t.uiTextFillStyle,gaugeChartValueLabelFillStyle:t.uiTextFillStyle,gaugeChartBarColor:S(255,255,255),gaugeChartGlowColor:S(255,255,64),gaugeChartNeedleFillStyle:new U({color:S(255,255,255)}),gaugeChartNeedleThickness:10,gaugeChartNeedleStrokeStyle:new ve({thickness:2,fillStyle:new U({color:S(0,0,0)})}),gaugeChartBackgroundFillStyle:t.panelBackgroundFillStyle,gaugeChartBackgroundStrokeStyle:at,gaugeChartTitleFont:r,gaugeChartTitleFillStyle:t.titleFillStyle,treeMapChartBackgroundFillStyle:t.panelBackgroundFillStyle,treeMapChartBackgroundStrokeStyle:at,treeMapChartParentColor:t.treeMapChartParentColor,treeMapChartNodeColors:t.treeMapChartNodeColors,treeMapChartNodeStrokeStyle:new ve({thickness:1,fillStyle:new U({color:b("000")})}),treeMapChartTitleFillStyle:t.titleFillStyle,treeMapChartTitleFont:r,treeMapChartPathLabelFillStyle:ut,treeMapChartPathLabelFont:u,treeMapChartLabelHeaderFillStyle:t.treeMapChartLabelHeaderFillStyle,treeMapChartLabelHeaderFont:r,treeMapChartLabelFillStyle:t.treeMapChartLabelFillStyle,treeMapChartLabelFont:u,uiPanelBackgroundFillStyle:t.panelBackgroundFillStyle,uiPanelBackgroundStrokeStyle:at,zoomBandChartDefocusOverlayFillStyle:vt,zoomBandChartSplitterStrokeStyle:St,zoomBandChartKnobFillStyle:t.zoomBandChartKnobFillStyle,zoomBandChartKnobSize:t.zoomBandChartKnobSize,onScreenMenuBackgroundColor:S(254,204,0,.7),uiButtonFillStyle:ft,uiButtonFillStyleHidden:At,uiButtonStrokeStyle:dt,uiButtonSize:10,uiBackgroundFillStyle:ct,uiBackgroundStrokeStyle:dt,uiTextFillStyle:ut,uiTextFillStyleHidden:gt,uiTextFont:u,legendTitleFillStyle:ut,legendTitleFont:l,cursorTickMarkerXBackgroundFillStyle:ct,cursorTickMarkerXBackgroundStrokeStyle:dt,cursorTickMarkerXTextFillStyle:ut,cursorTickMarkerXTextFont:u,cursorTickMarkerYBackgroundFillStyle:ct,cursorTickMarkerYBackgroundStrokeStyle:dt,cursorTickMarkerYTextFillStyle:ut,cursorTickMarkerYTextFont:u,cursorPointMarkerFillStyle:mt.getFillStyle(),cursorPointMarkerSize:{x:9,y:9},cursorPointMarkerShape:sr.Cross,cursorResultTableFillStyle:ct,cursorResultTableStrokeStyle:dt,cursorResultTableTextFillStyle:ut,cursorResultTableTextFont:u,cursorGridStrokeStyleX:mt,cursorGridStrokeStyleY:mt,cursor3DGridStrokeStyleX:pt,cursor3DGridStrokeStyleY:pt,cursor3DGridStrokeStyleZ:pt,cursor3DTickStrokeStyleX:K.tickStyle,cursor3DTickStrokeStyleY:K.tickStyle,cursor3DTickStrokeStyleZ:K.tickStyle,cursor3DTickLabelFillStyleX:ut,cursor3DTickLabelFillStyleY:ut,cursor3DTickLabelFillStyleZ:ut,cursor3DTickLabelFontX:u,cursor3DTickLabelFontY:u,cursor3DTickLabelFontZ:u,cursor3DTickLabelBackgroundFillStyleX:bt,cursor3DTickLabelBackgroundFillStyleY:bt,cursor3DTickLabelBackgroundFillStyleZ:bt,cursor3DTickLabelBackgroundStrokeStyleX:dt,cursor3DTickLabelBackgroundStrokeStyleY:dt,cursor3DTickLabelBackgroundStrokeStyleZ:dt,cursor3DTickLabelPaddingX:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingY:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingZ:{left:4,right:4,top:4,bottom:4}};return t.overrideThemeProperties&&(xt={...xt,...t.overrideThemeProperties}),xt})(t),e={...i,header1Font:s.xAxisTitleFont,header2Font:s.xAxisNumericTicks.getMajorTickStyle().labelFont,header3Font:s.uiTextFont,mainDataColor:t.dataColorPalette[0].stroke};return{...s,examples:e}},SA=(t,i)=>{const s=new Image;s.crossOrigin="*";const e=`${t}/${i}`;return s.addEventListener("error",(i=>{Wi(t,e,"Theme resource",{shouldCrash:!1})})),s.src=e,s},bA=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:Mi(i[e%i.length].stroke,S(255,255,255),.5);return new st({stops:[{color:Mi(h,S(255,255,255),.5*s).setA(100),offset:0},{color:h.setA(100),offset:.5},{color:Mi(h,S(30,30,30),.5*s).setA(100),offset:1}]})},xA=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:Mi(i[e%i.length].stroke,S(255,255,255),.2);return new st({stops:[{color:Mi(h,S(255,255,255),.2*s),offset:0},{color:h,offset:.5},{color:Mi(h,S(0,0,0),.2*s),offset:1}]})},MA=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:Mi(i[e%i.length].stroke,S(255,255,255),.2);return new rt({angle:90,stops:[{color:Mi(h,S(255,255,255),.5*s),offset:0},{color:h,offset:.35},{color:Mi(h,S(30,30,30),.5*s),offset:1}]})},_A=(t,i,s)=>(s=>{const e=new Map;return s=>{const h=e.get(s);if(h)return h;const r=(s=>{const e=!0===t?i[s%i.length].stroke:Mi(i[s%i.length].stroke,S(255,255,255),.3);return new rt({angle:90,stops:[{color:Mi(e,S(255,255,255),.5),offset:0},{color:e,offset:.35},{color:Mi(e,S(30,30,30),.5),offset:1}]})})(s);return e.set(s,r),r}})(),wA=Ni((()=>{const t=S(255,255,255),i=new U({color:t}),s=!0,e=new En({spread:1,blur:9,offset:{x:0,y:0},color:S(0,0,0,150)}),h=new st({position:{x:.8,y:.8},extent:tt.farthestCorner,shape:q.ellipse,stops:[{offset:0,color:S(50,51,52)},{offset:.5,color:S(14,15,16)},{offset:1,color:S(0,0,0)}]}),r=new U({color:S(45,45,45)}),n=new st({position:{x:.5,y:.5},extent:tt.farthestCorner,shape:q.circle,stops:[{offset:0,color:S(120,120,120,100)},{offset:1,color:S(0,0,0,50)}]}),o=new st({position:{x:.5,y:.5},extent:tt.farthestCorner,shape:q.circle,stops:[{offset:0,color:S(30,30,30,200)},{offset:1,color:S(0,0,0,255)}]}),a=new U({color:S(255,255,220)}),l=new U({color:S(255,255,166)}),u=new U({color:S(255,255,220)}),c=new U({color:S(255,255,220,130)}),d=new U({color:S(255,255,200)}),f=d,A=f,g=new rt({angle:45,stops:[{offset:0,color:S(230,230,230)},{offset:1,color:S(150,150,150)}]}),y=new U({color:S(220,220,220)}),m=new U({color:S(200,200,200,50)}),p=new U({color:S(200,200,200,150)}),v=new U({color:S(200,200,200,20)}),x=new U({color:S(220,220,220)}),M=new rt({angle:0,stops:[{offset:0,color:S(10,10,10,220)},{offset:1,color:S(30,30,30,220)}]}),_=i,w=S(255,255,200),C=M,k=_,T=S(20,20,20),F=S(0,0,0),I=t,P=S(150,150,150),D=S(50,50,50),B=S(50,50,50),L=S(100,100,100),R=S(200,200,200),E=[S(255,255,91,255),S(255,205,91,255),S(255,155,91,255),S(255,196,188,255),S(255,148,184,255),S(219,148,198,255),S(235,196,224,255),S(169,148,198,255),S(148,226,198,255),S(148,255,176,255),S(180,255,165,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),z=t.setA(20),V=S(176,255,157,255),O=S(255,112,76,255),N={mapChartFillStyle:new rt({angle:135,stops:[{color:S(255,255,91,255),offset:0},{color:S(255,155,91,255),offset:1}]}),spiderSeriesFillStyle:bA(s,E,.5),pieChartSliceFillStylePalette:xA(s,E,1),funnelChartSliceFillStylePalette:MA(s,E,1),pyramidChartSliceFillStylePalette:MA(s,E,1),rectangleSeriesFillStyle:_A(s,E),gaugeChartBarColor:S(255,255,91,255),gaugeChartGlowColor:S(255,255,91,64)},G=new U({color:S(176,255,157,255)}),W=new U({color:S(255,146,146,255)}),Y=new U({color:S(176,255,157,255)}),H=new U({color:S(230,63,63,255)}),$=new U({color:S(176,255,157,120)}),X=new U({color:S(229,63,63,180)}),j=new U({color:S(27,37,36,255)}),Z=new U({color:S(62,27,27,255)}),Q=[S(255,0,0),S(255,255,0),S(0,255,0)],J=[S(10,10,255),S(10,190,255),S(251,255,0),S(255,38,0)],K=[S(255,255,0),S(255,204,0),S(255,128,0),S(255,0,0)],it=[S(0,0,0),S(167,4,69,255),S(255,0,0),S(252,252,168,255)],et=new st({stops:[{color:S(61,61,80,100),offset:0},{color:S(44,44,55,30),offset:1}]}),ht=new U({color:S(148,148,198,255)}),nt=$.getColor().setA(255),ot=S(100,100,100),at=[S(255,241,149,200),S(255,230,65,200),S(238,211,32,200),S(238,176,32,200),S(255,159,13,200),S(254,120,37,200),S(253,91,56,200),S(253,75,84,200),S(254,95,124,200),S(227,56,160,200),S(226,53,134,200),S(216,90,166,200),S(254,151,206,200),S(237,151,254,200),S(243,177,255,200),S(233,133,252,200),S(210,101,230,200),S(178,61,200,200),S(193,81,156,200),S(217,95,145,200)];return vA({isDark:s,highlightColorOffset:S(60,60,60,60),highlightColorOffsetAxisOverlay:S(255,255,255,40),effect:e,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:h,dashboardSplitterFillStyle:r,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:o,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:a,axisTitleFillStyle:l,axisLabelMajorFillStyle:u,axisLabelMinorFillStyle:c,uiTitleFillStyle:d,uiTextFillStyle:f,cursorTextFillStyle:A,axisLineFillStyle:g,axisTickMajorFillStyle:y,axisGridMajorFillStyle:m,axisTickMinorFillStyle:p,axisGridMinorFillStyle:v,cursorGridFillStyle:x,legendBackgroundFillStyle:M,legendBackgroundBorderFillStyle:_,legendButtonDefaultColor:w,resultTableBackgroundFillStyle:C,resultTableBackgroundBorderFillStyle:k,uiBackgroundColor:T,uiBackgroundBorderColor:F,uiStrokeColorContrastHigh:I,uiStrokeColorContrastMedium:P,uiStrokeColorContrastLow:D,dataStrokeColorContrastHigh:B,dataStrokeColorContrastMedium:L,dataStrokeColorContrastLow:R,dataColorPalette:E,dataColorPaletteInverted:[{area:S(190,50,50,100),border:S(210,80,80)}],dataHighlightOverlayColor:z,dataColorPositive:V,dataColorNegative:O,zoomBandChartDefocusOverlayFillStyle:new U({color:S(0,0,0,180)}),zoomBandChartSplitterColor:b("#FBFB5A"),zoomBandChartKnobFillStyle:t=>new Cn({source:SA(t,"zoomBandChart/darkgold-selector.png"),fitMode:_n.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:N,treeMapChartParentColor:b("#181E21"),treeMapChartNodeColors:at,treeMapChartLabelFillStyle:new U({color:S(33,33,33)}),treeMapChartLabelHeaderFillStyle:new U({color:S(250,250,250)})},{positiveTextFillStyle:G,negativeTextFillStyle:W,positiveFillStyle:Y,negativeFillStyle:H,positiveAreaFillStyle:$,negativeAreaFillStyle:X,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:Z,badGoodColorPalette:Q,coldHotColorPalette:J,intensityColorPalette:K,spectrogramColorPalette:it,bollingerFillStyle:et,bollingerBorderFillStyle:ht,highlightPointColor:t,highlightDataGridColor:nt,unfocusedDataColor:ot})})),CA=Ni((()=>{const t=S(255,255,255),i=new U({color:t}),s=!0,e=new En({spread:0,blur:9,offset:{x:0,y:0},color:S(105,255,236,40)}),h=new U({color:S(2,21,30)}),r=new st({stops:[{color:S(19,40,66,150),offset:0},{color:S(0,0,0,150),offset:1}]}),n=new U({color:S(0,5,8,150)}),o=i,a=i,l=i,u=new U({color:S(255,255,220,130)}),c=i,d=i,f=d,A=new U({color:S(20,224,250,255)}),g=i,y=new U({color:S(61,94,110,100)}),m=new U({color:S(61,94,110,255)}),p=new U({color:S(61,94,110,40)}),v=i,x=new U({color:S(0,18,23,255)}),M=i,_=t,w=new U({color:S(0,17,22,240)}),C=i,k=S(0,38,48,220),T=S(0,0,0),F=t,I=S(150,150,150),P=S(19,78,93),D=S(50,50,50),B=S(0,36,48),L=S(200,200,200),R=[S(45,253,253,255),S(44,172,247,255),S(46,100,248,255),S(96,84,199,255),S(184,104,245,255),S(98,160,218,255),S(43,238,245,255),S(38,140,206,255),S(112,96,224,255),S(206,157,255,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),E=t.setA(50),z=S(3,217,194,255),V=S(230,63,63,255),O={mapChartFillStyle:new rt({angle:135,stops:[{color:S(118,248,231,255),offset:0},{color:S(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:bA(s,R,1),pieChartSliceFillStylePalette:xA(s,R,1),funnelChartSliceFillStylePalette:MA(s,R,1),pyramidChartSliceFillStylePalette:MA(s,R,1),rectangleSeriesFillStyle:_A(s,R),gaugeChartBarColor:S(3,217,194,255),gaugeChartGlowColor:S(3,217,194,120)},N=new U({color:S(45,253,253,255)}),G=new U({color:S(255,146,146,255)}),W=new U({color:S(45,253,253,255)}),Y=new U({color:S(230,63,63,255)}),H=new U({color:S(1,190,164,120)}),$=new U({color:S(229,63,63,180)}),X=new U({color:S(1,53,57,255)}),j=new U({color:S(62,27,27,255)}),Z=[S(1,104,119,255),S(0,165,144,255),S(0,246,214,255)],Q=[S(0,87,95,255),S(0,125,124,255),S(1,209,182,255),S(0,255,221,255),S(218,112,112,255),S(172,47,47,255)],J=[S(126,255,253,255),S(50,233,230,255),S(0,196,193,255),S(62,138,178,255),S(139,88,191,255),S(162,55,143,255)],K=[S(13,31,52,255),S(101,50,118,255),S(1,142,172,255),S(2,196,170,255),S(0,255,221,255)],q=new st({stops:[{color:S(122,103,254,70),offset:0},{color:S(178,168,255,10),offset:1}]}),tt=new U({color:S(122,103,254,255)}),it=H.getColor().setA(255),et=S(15,83,83),ht=[S(139,252,252,150),S(60,239,239,150),S(2,201,201,150),S(26,159,159,150),S(15,146,187,150),S(65,168,200,150),S(67,146,207,150),S(64,108,209,150),S(189,64,233,150),S(219,84,238,150),S(192,55,212,150),S(212,98,229,150),S(248,110,211,150),S(251,154,225,150),S(251,154,184,150),S(233,105,144,150),S(255,133,170,150),S(249,110,135,150),S(245,72,101,150),S(210,57,84,150)];return vA({isDark:s,highlightColorOffset:S(60,60,60,60),highlightColorOffsetAxisOverlay:S(255,255,255,40),effect:e,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new Cn({source:SA(t,"themes/turquoiseHexagon.jpg"),fitMode:_n.Fill}),dashboardSplitterFillStyle:h,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,axisLabelMinorFillStyle:u,uiTitleFillStyle:c,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:A,axisTickMajorFillStyle:g,axisGridMajorFillStyle:y,axisTickMinorFillStyle:m,axisGridMinorFillStyle:p,cursorGridFillStyle:v,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:_,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:C,uiBackgroundColor:k,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:D,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:L,dataColorPalette:R,dataColorPaletteInverted:[{area:S(170,60,210,100),border:S(210,100,250)}],dataHighlightOverlayColor:E,dataColorPositive:z,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new U({color:S(0,0,0,180)}),zoomBandChartSplitterColor:b("#2BF4F4"),zoomBandChartKnobFillStyle:t=>new Cn({source:SA(t,"zoomBandChart/turquoise-selector.png"),fitMode:_n.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:O,treeMapChartParentColor:b("#002329"),treeMapChartNodeColors:ht,treeMapChartLabelFillStyle:new U({color:S(33,33,33)}),treeMapChartLabelHeaderFillStyle:new U({color:S(250,250,250)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:W,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:$,positiveBackgroundFillStyle:X,negativeBackgroundFillStyle:j,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:J,spectrogramColorPalette:K,bollingerFillStyle:q,bollingerBorderFillStyle:tt,highlightPointColor:t,highlightDataGridColor:it,unfocusedDataColor:et})})),kA=Ni((()=>{const t=!1,i=new En({spread:0,blur:6,offset:{x:2,y:-2},color:S(0,0,0,30)}),s=new st({position:{x:.8,y:.8},extent:tt.farthestCorner,shape:q.ellipse,stops:[{offset:0,color:S(255,255,255)},{offset:1,color:S(255,255,255)}]}),e=new U({color:S(219,227,233,255)}),h=new st({position:{x:.5,y:.5},extent:tt.farthestCorner,shape:q.circle,stops:[{offset:0,color:S(255,255,255,200)},{offset:1,color:S(240,244,246,200)}]}),r=new st({position:{x:.5,y:.5},extent:tt.farthestCorner,shape:q.circle,stops:[{offset:0,color:S(255,255,255,255)},{offset:1,color:S(255,255,255,255)}]}),n=new U({color:S(33,43,49)}),o=new U({color:S(33,43,49)}),a=new U({color:S(33,43,49)}),l=new U({color:S(33,43,49,150)}),u=new U({color:S(33,43,49)}),c=u,d=c,f=new rt({angle:45,stops:[{offset:0,color:S(225,225,225)},{offset:1,color:S(225,225,225)}]}),A=new U({color:S(150,150,150,255)}),g=new U({color:S(150,150,150,170)}),y=new U({color:S(150,150,150,150)}),m=new U({color:S(150,150,150,100)}),p=new U({color:S(60,70,80)}),v=new rt({angle:0,stops:[{offset:0,color:S(255,255,255,240)},{offset:1,color:S(255,255,255,240)}]}),x=new U({color:S(168,186,199)}),M=S(255,255,200),_=new U({color:S(255,255,255,240)}),w=new U({color:S(128,146,159,255)}),C=S(255,255,255,255),k=S(168,168,199,255),T=S(168,186,199,255),F=S(168,186,199,255),I=S(168,186,199,255),P=S(168,186,199,255),D=S(100,100,100),B=S(200,200,200),L=[S(28,181,140,255),S(255,132,0,255),S(240,39,39,255),S(86,121,251,255),S(2,181,213,255),S(13,212,158,255),S(22,167,3,255),S(234,103,232,255),S(62,183,179,255),S(140,93,3,255),S(155,158,186,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),R=S(150,150,150,80),E=S(46,182,120,255),z=S(255,66,66,255),V=new ve({thickness:2,fillStyle:new U({color:S(168,186,199,255)})}),O={mapChartFillStyle:new rt({angle:-45,stops:[{color:S(2,181,213,255),offset:0},{color:S(175,243,255,255),offset:1}]}),spiderSeriesFillStyle:bA(t,L,.8),pieChartSliceFillStylePalette:xA(t,L,.8),funnelChartSliceFillStylePalette:MA(t,L,.5),pyramidChartSliceFillStylePalette:MA(t,L,.5),rectangleSeriesFillStyle:_A(t,L),gaugeChartBarColor:S(46,182,120,255),gaugeChartGlowColor:S(46,182,120,120),chartXYSeriesBackgroundStrokeStyle:V,chart3DSeriesBackgroundStrokeStyle:V,polarChartSeriesBackgroundStrokeStyle:V,spiderChartSeriesBackgroundStrokeStyle:V,dataGridTextFillStyle:new U({color:S(0,88,64,255)})},N=new U({color:S(4,146,108,255)}),G=new U({color:S(240,39,39,255)}),W=new U({color:S(28,181,140,255)}),Y=new U({color:S(230,88,88,255)}),H=new U({color:S(28,181,140,180)}),$=new U({color:S(230,88,88,180)}),X=new U({color:S(229,243,228)}),j=new U({color:S(232,225,216)}),Z=[S(193,48,48,255),S(240,234,60,255),S(45,191,55,255)],Q=[S(10,19,255,255),S(15,191,250,255),S(249,255,2,255),S(253,133,0,255),S(255,24,0,255)],J=[S(50,99,213),S(8,179,77),S(255,246,0),S(255,126,0),S(189,36,30)],K=[S(16,64,176),S(8,179,77),S(255,246,0),S(255,126,0),S(168,6,0)],it=new U({color:S(185,198,207,255)}),et=new st({stops:[{color:S(151,190,220,10),offset:0},{color:S(151,190,220,50),offset:1}]}),ht=H.getColor().setA(255),nt=S(150,150,150),ot=[S(255,243,136,125),S(254,237,99,125),S(255,216,109,125),S(255,172,100,125),S(255,133,101,125),S(255,113,142,125),S(230,103,129,125),S(242,126,219,125),S(255,155,235,125),S(255,181,240,125),S(203,143,255,125),S(208,154,255,125),S(171,188,255,125),S(197,209,255,125),S(171,187,255,125),S(84,167,239,125),S(38,196,214,125),S(38,214,196,125),S(69,225,141,125),S(36,191,88,125)];return vA({isDark:t,highlightColorOffset:S(-60,-60,-60,60),highlightColorOffsetAxisOverlay:S(0,0,0,40),effect:i,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:s,dashboardSplitterFillStyle:e,panelBackgroundFillStyle:h,seriesBackgroundFillStyle:r,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:n,axisTitleFillStyle:o,axisLabelMajorFillStyle:a,axisLabelMinorFillStyle:l,uiTitleFillStyle:u,uiTextFillStyle:c,cursorTextFillStyle:d,axisLineFillStyle:f,axisTickMajorFillStyle:A,axisGridMajorFillStyle:g,axisTickMinorFillStyle:y,axisGridMinorFillStyle:m,cursorGridFillStyle:p,legendBackgroundFillStyle:v,legendBackgroundBorderFillStyle:x,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:_,resultTableBackgroundBorderFillStyle:w,uiBackgroundColor:C,uiBackgroundBorderColor:k,uiStrokeColorContrastHigh:T,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:I,dataStrokeColorContrastHigh:P,dataStrokeColorContrastMedium:D,dataStrokeColorContrastLow:B,dataColorPalette:L,dataColorPaletteInverted:[{area:S(190,50,50,100),border:S(210,80,80)}],dataHighlightOverlayColor:R,dataColorPositive:E,dataColorNegative:z,zoomBandChartDefocusOverlayFillStyle:new U({color:S(255,255,255,180)}),zoomBandChartSplitterColor:b("#505D65"),zoomBandChartKnobFillStyle:t=>new Cn({source:SA(t,"zoomBandChart/light-selector.png"),fitMode:_n.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:O,treeMapChartParentColor:b("#D9D9D9"),treeMapChartNodeColors:ot,treeMapChartLabelFillStyle:new U({color:S(0,0,0)}),treeMapChartLabelHeaderFillStyle:new U({color:S(33,33,33)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:W,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:$,positiveBackgroundFillStyle:X,negativeBackgroundFillStyle:j,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:J,spectrogramColorPalette:K,bollingerFillStyle:et,bollingerBorderFillStyle:it,highlightPointColor:S(0,0,0),highlightDataGridColor:ht,unfocusedDataColor:nt})})),TA=Ni((()=>{const t=!1,i=new st({position:{x:.8,y:.8},extent:tt.farthestCorner,shape:q.ellipse,stops:[{offset:0,color:S(255,255,255)},{offset:1,color:S(255,255,255)}]}),s=new U({color:S(214,236,216,255)}),e=new st({position:{x:.5,y:.5},extent:tt.farthestCorner,shape:q.circle,stops:[{offset:0,color:S(233,244,231,70)},{offset:1,color:S(233,244,231,200)}]}),h=new st({position:{x:.5,y:.5},extent:tt.farthestCorner,shape:q.circle,stops:[{offset:0,color:S(255,255,255,255)},{offset:1,color:S(255,255,255,255)}]}),r=new U({color:S(1,61,53)}),n=new U({color:S(1,61,53)}),o=new U({color:S(1,61,53)}),a=new U({color:S(1,61,53,150)}),l=new U({color:S(1,61,53)}),u=l,c=u,d=new rt({angle:45,stops:[{offset:0,color:S(225,225,225)},{offset:1,color:S(225,225,225)}]}),f=new U({color:S(188,211,186,255)}),A=new U({color:S(188,211,186,150)}),g=new U({color:S(188,211,186,50)}),y=new U({color:S(188,211,186,50)}),m=new U({color:S(104,148,111,255)}),p=new rt({angle:0,stops:[{offset:0,color:S(255,255,255,240)},{offset:1,color:S(255,255,255,240)}]}),v=new U({color:S(104,148,111)}),x=S(255,255,200),M=new U({color:S(255,255,255,240)}),_=new U({color:S(104,148,111,255)}),w=S(255,255,255,255),C=S(179,201,183,255),k=S(188,211,186,255),T=S(188,211,186,255),F=S(188,211,186,255),I=S(188,211,186,255),P=S(100,100,100),D=S(200,200,200),B=[S(138,195,142,255),S(193,161,114,255),S(178,99,99,255),S(142,156,210,255),S(154,209,219,255),S(164,212,199,255),S(104,156,97,255),S(196,147,195,255),S(92,190,187,255),S(126,100,51,255),S(136,138,157,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),L=S(150,150,150,80),R=S(46,182,84,255),E=S(232,96,96,255),z=new ve({thickness:2,fillStyle:new U({color:S(188,211,186,255)})}),V={mapChartFillStyle:new rt({angle:-45,stops:[{color:S(118,160,121,255),offset:0},{color:S(174,227,178,255),offset:1}]}),spiderSeriesFillStyle:bA(t,B,.8),pieChartSliceFillStylePalette:xA(t,B,.8),pyramidChartSliceFillStylePalette:MA(t,B,.5),funnelChartSliceFillStylePalette:MA(t,B,.5),rectangleSeriesFillStyle:_A(t,B),gaugeChartBarColor:S(46,182,84,255),gaugeChartGlowColor:S(46,182,84,120),chartXYSeriesBackgroundStrokeStyle:z,chart3DSeriesBackgroundStrokeStyle:z,polarChartSeriesBackgroundStrokeStyle:z,spiderChartSeriesBackgroundStrokeStyle:z,dataGridTextFillStyle:new U({color:S(77,66,21,255)})},O=new U({color:S(93,151,97,255)}),N=new U({color:S(178,99,99,255)}),G=new U({color:S(138,195,142,255)}),W=new U({color:S(178,99,99,255)}),Y=new U({color:S(138,195,142,180)}),H=new U({color:S(178,99,99,180)}),$=new U({color:S(224,240,237)}),X=new U({color:S(251,227,227)}),j=[S(178,99,99,255),S(215,224,111,255),S(80,186,88,255)],Z=[S(62,64,142,255),S(66,131,77,255),S(250,250,135,255),S(202,161,78,255),S(179,53,53,255)],Q=[S(64,86,138),S(123,192,205),S(255,252,149),S(220,155,92),S(184,78,74)],J=[S(64,86,138),S(123,192,205),S(255,252,149),S(220,155,92),S(132,60,57)],K=new U({color:S(185,198,207,255)}),it=new st({stops:[{color:S(151,190,220,10),offset:0},{color:S(151,190,220,50),offset:1}]}),et=Y.getColor().setA(255),ht=S(150,150,150),nt=[S(242,239,210,150),S(243,238,183,150),S(210,222,136,150),S(204,217,148,150),S(157,190,124,150),S(143,178,72,150),S(198,147,88,150),S(216,148,71,150),S(229,142,103,150),S(225,174,152,150),S(219,149,203,150),S(216,188,209,150),S(109,198,189,150),S(172,206,202,150),S(164,223,217,150),S(174,215,233,150),S(203,225,235,150),S(220,227,243,150),S(207,213,227,150),S(171,182,209,150)];return vA({isDark:t,highlightColorOffset:S(-60,-60,-60,60),highlightColorOffsetAxisOverlay:S(0,0,0,40),effect:void 0,effectsText:!1,effectsDashboardSplitters:!1,lcjsBackgroundFillStyle:i,dashboardSplitterFillStyle:s,panelBackgroundFillStyle:e,seriesBackgroundFillStyle:h,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:r,axisTitleFillStyle:n,axisLabelMajorFillStyle:o,axisLabelMinorFillStyle:a,uiTitleFillStyle:l,uiTextFillStyle:u,cursorTextFillStyle:c,axisLineFillStyle:d,axisTickMajorFillStyle:f,axisGridMajorFillStyle:A,axisTickMinorFillStyle:g,axisGridMinorFillStyle:y,cursorGridFillStyle:m,legendBackgroundFillStyle:p,legendBackgroundBorderFillStyle:v,legendButtonDefaultColor:x,resultTableBackgroundFillStyle:M,resultTableBackgroundBorderFillStyle:_,uiBackgroundColor:w,uiBackgroundBorderColor:C,uiStrokeColorContrastHigh:k,uiStrokeColorContrastMedium:T,uiStrokeColorContrastLow:F,dataStrokeColorContrastHigh:I,dataStrokeColorContrastMedium:P,dataStrokeColorContrastLow:D,dataColorPalette:B,dataColorPaletteInverted:[{area:S(210,70,70,100),border:S(200,110,110)}],dataHighlightOverlayColor:L,dataColorPositive:R,dataColorNegative:E,zoomBandChartDefocusOverlayFillStyle:new U({color:S(255,255,255,180)}),zoomBandChartSplitterColor:b("#446A40"),zoomBandChartKnobFillStyle:t=>new Cn({source:SA(t,"zoomBandChart/lightnature-selector.png"),fitMode:_n.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:V,treeMapChartParentColor:b("#EFF7EE"),treeMapChartNodeColors:nt,treeMapChartLabelFillStyle:new U({color:S(0,0,0)}),treeMapChartLabelHeaderFillStyle:new U({color:S(33,33,33)})},{positiveTextFillStyle:O,negativeTextFillStyle:N,positiveFillStyle:G,negativeFillStyle:W,positiveAreaFillStyle:Y,negativeAreaFillStyle:H,positiveBackgroundFillStyle:$,negativeBackgroundFillStyle:X,badGoodColorPalette:j,coldHotColorPalette:Z,intensityColorPalette:Q,spectrogramColorPalette:J,bollingerFillStyle:it,bollingerBorderFillStyle:K,highlightPointColor:S(0,0,0),highlightDataGridColor:et,unfocusedDataColor:ht})})),FA=Ni((()=>{const t=S(255,255,255),i=new U({color:t}),s=!0,e=new En({spread:1,blur:9,offset:{x:0,y:0},color:S(255,255,255,30)}),h=new U({color:S(6,15,36)}),r=new st({stops:[{color:S(46,13,87,50),offset:0},{color:S(0,0,0,150),offset:1}]}),n=new U({color:S(0,5,8,150)}),o=i,a=i,l=i,u=new U({color:S(255,255,220,130)}),c=i,d=i,f=d,A=new rt({angle:45,stops:[{offset:0,color:S(241,133,255,255)},{offset:1,color:S(115,207,238,255)}]}),g=i,y=new U({color:S(61,94,110,100)}),m=new U({color:S(61,94,110,255)}),p=new U({color:S(61,94,110,40)}),v=i,x=new U({color:S(0,18,23,255)}),M=i,_=S(115,207,238,255),w=new U({color:S(0,17,22,240)}),C=i,k=S(0,38,48,255),T=S(0,0,0),F=t,I=S(150,150,150),P=S(19,57,93),D=S(50,50,50),B=S(0,17,48),L=S(200,200,200),R=[S(20,211,237,255),S(98,147,252,255),S(164,73,250,255),S(129,117,253,255),S(95,134,252,255),S(22,133,212,255),S(35,200,242,255),S(104,121,233,255),S(137,69,232,255),S(70,72,241,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),E=t.setA(50),z=S(3,217,194,255),V=S(243,21,110,255),O={mapChartFillStyle:new rt({angle:135,stops:[{color:S(118,248,231,255),offset:0},{color:S(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:bA(s,R,.5),pieChartSliceFillStylePalette:xA(s,R,2),funnelChartSliceFillStylePalette:MA(s,R,1),pyramidChartSliceFillStylePalette:MA(s,R,1),rectangleSeriesFillStyle:_A(s,R),gaugeChartBarColor:S(3,217,194,255),gaugeChartGlowColor:S(3,217,194,150)},N=new U({color:S(20,211,237,255)}),G=new U({color:S(253,145,178,255)}),W=new U({color:S(20,211,237,255)}),Y=new U({color:S(239,68,121,255)}),H=new U({color:S(20,211,237,120)}),$=new U({color:S(239,68,121,180)}),X=new U({color:S(1,53,57,255)}),j=new U({color:S(94,19,42,255)}),Z=[S(174,51,132,255),S(204,107,218,255),S(189,215,253,255)],Q=[S(0,63,95,255),S(0,149,255,255),S(0,225,255,255),S(255,154,254,255),S(204,98,170,255),S(139,39,84,255)],J=[S(197,241,255,255),S(70,210,255,255),S(0,164,217,255),S(90,99,222,255),S(138,75,192,255),S(151,27,162,255)],K=[S(13,31,52,255),S(129,54,130,255),S(131,108,176,255),S(7,162,213,255),S(26,247,255,255)],q=new st({stops:[{color:S(219,42,235,60),offset:0},{color:S(237,73,252,10),offset:1}]}),tt=new U({color:S(237,73,252,255)}),it=H.getColor().setA(255),et=S(8,70,100),ht=[S(149,230,255,150),S(93,213,243,150),S(20,189,223,150),S(5,151,181,150),S(2,138,198,150),S(2,113,198,150),S(97,148,236,150),S(93,111,230,150),S(151,120,223,150),S(128,87,227,150),S(153,52,230,150),S(179,92,245,150),S(248,110,211,150),S(255,155,228,150),S(251,88,207,150),S(255,0,162,150),S(214,73,177,150),S(209,71,159,150),S(238,101,169,150),S(210,57,134,150)];return vA({isDark:s,highlightColorOffset:S(60,60,60,60),highlightColorOffsetAxisOverlay:S(255,255,255,40),effect:e,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new Cn({source:SA(t,"themes/cyberSpace.jpg"),fitMode:_n.Fill}),dashboardSplitterFillStyle:h,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,axisLabelMinorFillStyle:u,uiTitleFillStyle:c,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:A,axisTickMajorFillStyle:g,axisGridMajorFillStyle:y,axisTickMinorFillStyle:m,axisGridMinorFillStyle:p,cursorGridFillStyle:v,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:_,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:C,uiBackgroundColor:k,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:D,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:L,dataColorPalette:R,dataColorPaletteInverted:[{area:S(41,130,255,100),border:S(45,110,240)}],dataHighlightOverlayColor:E,dataColorPositive:z,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new U({color:S(0,0,0,180)}),zoomBandChartSplitterColor:b("#DB77FF"),zoomBandChartKnobFillStyle:t=>new Cn({source:SA(t,"zoomBandChart/cyberspace-selector.png"),fitMode:_n.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:O,treeMapChartParentColor:b("#1E1E3B"),treeMapChartNodeColors:ht,treeMapChartLabelFillStyle:new U({color:S(33,33,33)}),treeMapChartLabelHeaderFillStyle:new U({color:S(250,250,250)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:W,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:$,positiveBackgroundFillStyle:X,negativeBackgroundFillStyle:j,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:J,spectrogramColorPalette:K,bollingerFillStyle:q,bollingerBorderFillStyle:tt,highlightPointColor:t,highlightDataGridColor:it,unfocusedDataColor:et})})),IA={};Object.defineProperty(IA,"darkGold",{get:wA,enumerable:!0}),Object.defineProperty(IA,"turquoiseHexagon",{get:CA,enumerable:!0}),Object.defineProperty(IA,"light",{get:kA,enumerable:!0}),Object.defineProperty(IA,"lightNature",{get:TA,enumerable:!0}),Object.defineProperty(IA,"cyberSpace",{get:FA,enumerable:!0});const PA=IA,DA=PA.darkGold,BA=t=>({...t,effect:void 0}),LA=(t,i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAsa2NhQlgAACxranVtYgAAAB5qdW1kYzJwYQARABCAAACqADibcQNjMnBhAAAALEVqdW1iAAAAR2p1bWRjMm1hABEAEIAAAKoAOJtxA3Vybjp1dWlkOjlmZDBkZjkzLTVmMDMtNDczYi1hZThhLTFhNDM4NmMzNmJhYQAAAAGzanVtYgAAAClqdW1kYzJhcwARABCAAACqADibcQNjMnBhLmFzc2VydGlvbnMAAAAA12p1bWIAAAAmanVtZGNib3IAEQAQgAAAqgA4m3EDYzJwYS5hY3Rpb25zAAAAAKljYm9yoWdhY3Rpb25zgaNmYWN0aW9ua2MycGEuZWRpdGVkbXNvZnR3YXJlQWdlbnRtQWRvYmUgRmlyZWZseXFkaWdpdGFsU291cmNlVHlwZXhTaHR0cDovL2N2LmlwdGMub3JnL25ld3Njb2Rlcy9kaWdpdGFsc291cmNldHlwZS9jb21wb3NpdGVXaXRoVHJhaW5lZEFsZ29yaXRobWljTWVkaWEAAACranVtYgAAAChqdW1kY2JvcgARABCAAACqADibcQNjMnBhLmhhc2guZGF0YQAAAAB7Y2JvcqVqZXhjbHVzaW9uc4GiZXN0YXJ0GCFmbGVuZ3RoGSx3ZG5hbWVuanVtYmYgbWFuaWZlc3RjYWxnZnNoYTI1NmRoYXNoWCBvErgv+J0u7bVCYViyMUgw5yMb8idAv1erA3/DALx9NWNwYWRIAAAAAAAAAAAAAAIDanVtYgAAACRqdW1kYzJjbAARABCAAACqADibcQNjMnBhLmNsYWltAAAAAddjYm9yqGhkYzp0aXRsZW9HZW5lcmF0ZWQgaW1hZ2VpZGM6Zm9ybWF0aWltYWdlL3BuZ2ppbnN0YW5jZUlEeCh4bXAuaWlkOjI3NEMxQjdDN0E0MDExRUVBQkZFQUNFQjJDOTA0NzVCb2NsYWltX2dlbmVyYXRvcng2QWRvYmVfUGhvdG9zaG9wLzI1LjIuMCBhZG9iZV9jMnBhLzAuNy42IGMycGEtcnMvMC4yNS4ydGNsYWltX2dlbmVyYXRvcl9pbmZvgb9kbmFtZW9BZG9iZSBQaG90b3Nob3BndmVyc2lvbmYyNS4yLjD/aXNpZ25hdHVyZXgZc2VsZiNqdW1iZj1jMnBhLnNpZ25hdHVyZWphc3NlcnRpb25zgqJjdXJseCdzZWxmI2p1bWJmPWMycGEuYXNzZXJ0aW9ucy9jMnBhLmFjdGlvbnNkaGFzaFggSmnBvf+o3kEweL4k7cz4MTrB0WSVNFZxoA1rBrM31K+iY3VybHgpc2VsZiNqdW1iZj1jMnBhLmFzc2VydGlvbnMvYzJwYS5oYXNoLmRhdGFkaGFzaFggL2g6Dghd536quyA5vPlS/9NGA5WvLRkkKJmqn0VxCoFjYWxnZnNoYTI1NgAAKEBqdW1iAAAAKGp1bWRjMmNzABEAEIAAAKoAOJtxA2MycGEuc2lnbmF0dXJlAAAAKBBjYm9y0oREoQE4JKNmc2lnVHN0oWl0c3RUb2tlbnOBoWN2YWxZDjYwgg4yMAMCAQAwgg4pBgkqhkiG9w0BBwKggg4aMIIOFgIBAzEPMA0GCWCGSAFlAwQCAQUAMIGCBgsqhkiG9w0BCRABBKBzBHEwbwIBAQYJYIZIAYb9bAcBMDEwDQYJYIZIAWUDBAIBBQAEIHj4VpJDPzaO0x4hOPnj/w1GTHuwXU0IpBf4VVocIQzoAhB3SsxvHza2JR1fKj3Mjr0yGA8yMDIzMTEwMzExNTcyNloCCQCyOL6wAOGCbaCCC70wggUHMIIC76ADAgECAhAFHp6R1x6RCrvkPVzt0N3ZMA0GCSqGSIb3DQEBCwUAMGMxCzAJBgNVBAYTAlVTMRcwFQYDVQQKEw5EaWdpQ2VydCwgSW5jLjE7MDkGA1UEAxMyRGlnaUNlcnQgVHJ1c3RlZCBHNCBSU0E0MDk2IFNIQTI1NiBUaW1lU3RhbXBpbmcgQ0EwHhcNMjMwOTA4MDAwMDAwWhcNMzQxMjA3MjM1OTU5WjBYMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xMDAuBgNVBAMTJ0RpZ2lDZXJ0IEFkb2JlIEFBVEwgVGltZXN0YW1wIFJlc3BvbmRlcjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABE0srlH5A/+15/MFl1asNh8Q8TubOsEVfu0qlJrF0smjtwL1IeHZ/AB7J59u1Trpho1BDN85lfTY30rNBsfT+myjggGLMIIBhzAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH/BAIwADAWBgNVHSUBAf8EDDAKBggrBgEFBQcDCDAgBgNVHSAEGTAXMAgGBmeBDAEEAjALBglghkgBhv1sBwEwHwYDVR0jBBgwFoAUuhbZbU2FL3MpdpovdYxqII+eyG8wHQYDVR0OBBYEFLA1qlbDIamLztO4vIsWJVed7zThMFoGA1UdHwRTMFEwT6BNoEuGSWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcmwwgZAGCCsGAQUFBwEBBIGDMIGAMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wWAYIKwYBBQUHMAKGTGh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcnQwDQYJKoZIhvcNAQELBQADggIBAHgrjELHhBCEWJSCyRX7lsL0C9LJgbX1ryVYySNRxHkMR2LqC7PQZRJgDNR+kJop8P5v2Bzp/jMrzw4U4pY6rYv3I8HpFlJa4uBwUTIUgHWpi8Xxd1JEEX94POODi7HySekX60A055BozFb7GGVaxb0LreQTRXnkr6ggPNUPX9Gh+2ScOxlTdQQLgZbkdYvxo3Ap6cy9riZijRxOZqiOyWSxMUhgKxeKzwrFW6Xbe0awNhOUXZzIxc4ixpKzWSItpPJ30ZiBQn49U3ADYTnshbN9ZkTA1pHf/Nov2ZUvvddkZ8UYvwo9vBvLTDvnmABnRMBKaXYAs3ZCvw9CkDPOWTeUJMFRAtmUx52ohaA3nD8bCJ6UfpQ2pFfOdShwpb6GKv0g+BgcdIG2LHPJ0Ufmr+XmpgZgq/HIge0hjcCADpjDgq2z4B0L4xtAA1M8MrUx02hxb7104nFKqMuv5zJTQl3sgwqXUyP+9zHQP9y/Z5Fx/AQWrOXCW56dV7P4cFBJl8zHqinlhkOStZ1m22+9Hlq+eC0hJ2lkF1LuzRdJJb/51LXoPKRnopFDng6XpoD7eG6w4YpAx9+P00JuUoBsYSrdsuFiyWyQQGBAnjI69ggbSLcW+hJytuinaxawVlItJkS2eV5Z4XsxPg7f82uRkdtN0hTHeI93CN3OWeRebnK7MIIGrjCCBJagAwIBAgIQBzY3tyRUfNhHrP0oZipeWzANBgkqhkiG9w0BAQsFADBiMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29tMSEwHwYDVQQDExhEaWdpQ2VydCBUcnVzdGVkIFJvb3QgRzQwHhcNMjIwMzIzMDAwMDAwWhcNMzcwMzIyMjM1OTU5WjBjMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xOzA5BgNVBAMTMkRpZ2lDZXJ0IFRydXN0ZWQgRzQgUlNBNDA5NiBTSEEyNTYgVGltZVN0YW1waW5nIENBMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAxoY1BkmzwT1ySVFVxyUDxPKRN6mXUaHW0oPRnkyibaCwzIP5WvYRoUQVQl+kiPNo+n3znIkLf50fng8zH1ATCyZzlm34V6gCff1DtITaEfFzsbPuK4CEiiIY3+vaPcQXf6sZKz5C3GeO6lE98NZW1OcoLevTsbV15x8GZY2UKdPZ7Gnf2ZCHRgB720RBidx8ald68Dd5n12sy+iEZLRS8nZH92GDGd1ftFQLIWhuNyG7QKxfst5Kfc71ORJn7w6lY2zkpsUdzTYNXNXmG6jBZHRAp8ByxbpOH7G1WE15/tePc5OsLDnipUjW8LAxE6lXKZYnLvWHpo9OdhVVJnCYJn+gGkcgQ+NDY4B7dW4nJZCYOjgRs/b2nuY7W+yB3iIU2YIqx5K/oN7jPqJz+ucfWmyU8lKVEStYdEAoq3NDzt9KoRxrOMUp88qqlnNCaJ+2RrOdOqPVA+C/8KI8ykLcGEh/FDTP0kyr75s9/g64ZCr6dSgkQe1CvwWcZklSUPRR8zZJTYsg0ixXNXkrqPNFYLwjjVj33GHek/45wPmyMKVM1+mYSlg+0wOI/rOP015LdhJRk8mMDDtbiiKowSYI+RQQEgN9XyO7ZONj4KbhPvbCdLI/Hgl27KtdRnXiYKNYCQEoAA6EVO7O6V3IXjASvUaetdN2udIOa5kM0jO0zbECAwEAAaOCAV0wggFZMBIGA1UdEwEB/wQIMAYBAf8CAQAwHQYDVR0OBBYEFLoW2W1NhS9zKXaaL3WMaiCPnshvMB8GA1UdIwQYMBaAFOzX44LScV1kTN8uZz/nupiuHA9PMA4GA1UdDwEB/wQEAwIBhjATBgNVHSUEDDAKBggrBgEFBQcDCDB3BggrBgEFBQcBAQRrMGkwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBBBggrBgEFBQcwAoY1aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcnQwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcmwwIAYDVR0gBBkwFzAIBgZngQwBBAIwCwYJYIZIAYb9bAcBMA0GCSqGSIb3DQEBCwUAA4ICAQB9WY7Ak7ZvmKlEIgF+ZtbYIULhsBguEE0TzzBTzr8Y+8dQXeJLKftwig2qKWn8acHPHQfpPmDI2AvlXFvXbYf6hCAlNDFnzbYSlm/EUExiHQwIgqgWvalWzxVzjQEiJc6VaT9Hd/tydBTX/6tPiix6q4XNQ1/tYLaqT5Fmniye4Iqs5f2MvGQmh2ySvZ180HAKfO+ovHVPulr3qRCyXen/KFSJ8NWKcXZl2szwcqMj+sAngkSumScbqyQeJsG33irr9p6xeZmBo1aGqwpFyd/EjaDnmPv7pp1yr8THwcFqcdnGE4AJxLafzYeHJLtPo0m5d2aR8XKc6UsCUqc3fpNTrDsdCEkPlM05et3/JWOZJyw9P2un8WbDQc1PtkCbISFA0LcTJM3cHXg65J6t5TRxktcma+Q4c6umAU+9Pzt4rUyt+8SVe+0KXzM5h0F4ejjpnOHdI/0dKNPH+ejxmF/7K9h+8kaddSweJywm228Vex4Ziza4k9Tm8heZWcpw8De/mADfIBZPJ/tgZxahZrrdVcA6KYawmKAr7ZVBtzrVFZgxtGIJDwq9gdkT/r+k0fNX2bwE+oLeMt8EifAAzV3C+dAjfwAL5HYCJtnwZXZCpimHCUcr5n8apIUP/JiW9lVUKx+A+sDyDivl1vupL0QVSucTDh3bNzgaoSv27dZ8/DGCAbgwggG0AgEBMHcwYzELMAkGA1UEBhMCVVMxFzAVBgNVBAoTDkRpZ2lDZXJ0LCBJbmMuMTswOQYDVQQDEzJEaWdpQ2VydCBUcnVzdGVkIEc0IFJTQTQwOTYgU0hBMjU2IFRpbWVTdGFtcGluZyBDQQIQBR6ekdcekQq75D1c7dDd2TANBglghkgBZQMEAgEFAKCB0TAaBgkqhkiG9w0BCQMxDQYLKoZIhvcNAQkQAQQwHAYJKoZIhvcNAQkFMQ8XDTIzMTEwMzExNTcyNlowKwYLKoZIhvcNAQkQAgwxHDAaMBgwFgQU2Rq5M/4XremCHqYT9aQ6cU4+fn0wLwYJKoZIhvcNAQkEMSIEIGmY+GsCefCDmP0PFcYjdxBUfi0EgKYuEZb9pUMyLNuVMDcGCyqGSIb3DQEJEAIvMSgwJjAkMCIEIILa8ZSVezaEAkWP1ScAaf5ixxRW+p4Lhqv4J+hTICfZMAoGCCqGSM49BAMCBEcwRQIgcxxuf7QHV9Fkpj1VhPrFqhNFh8dZzl8qUU/2N3Sr4eoCIQDKu0KGYL++CSsDAXjJciMDbr5ImTy3jw0yQU5GYYeLimd4NWNoYWluglkGMzCCBi8wggQXoAMCAQICEBtbCzvasORd8vMNnlTR2tIwDQYJKoZIhvcNAQELBQAwdTELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEiMCAGA1UEAxMZQWRvYmUgUHJvZHVjdCBTZXJ2aWNlcyBHMzAeFw0yMzAyMDEwMDAwMDBaFw0yNDAyMDEyMzU5NTlaMIGhMREwDwYDVQQDDAhjYWktcHJvZDEcMBoGA1UECwwTQ29udGVudCBDcmVkZW50aWFsczETMBEGA1UECgwKQWRvYmUgSW5jLjERMA8GA1UEBwwIU2FuIEpvc2UxEzARBgNVBAgMCkNhbGlmb3JuaWExCzAJBgNVBAYTAlVTMSQwIgYJKoZIhvcNAQkBFhVncnAtY2FpLW9wc0BhZG9iZS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDv0wCnfYY9lkHDsykrTG7FYlnYHBcyualuD5u9ULjzv+FsTWOLg8Nhrz9RTxI9EeBbu3Wm7f4vqPsQYfxkEp0wIa6DVmEOZhbAeRfbhybWQ/D4Wvvck4mEZR+QZmTpIn7HX61gbtMFHlJUxkYBctIoAt9TBAFbz9d5Ig2WG0bsH39b6/8USXnIIk4FB6dtBRT1xeEwSDtwOd1YBpXXNBJmRWHXNJZZ85of2tBTesg/kMvTrOJJxYDZ97U416wcvbVomlees+NXUY3/ZB4xH+NsZils7m1bL2v2hSnHiLoqZeUKklbHUmT4ZpjrZCdtuIsWm5j2PPXKr7HKUuCbZSXBAgMBAAWjggGMMIIBiDAMBgNVHRMBAf8EAjAAMA4GA1UdDwEB/wQEAwIHgDAeBgNVHSUEFzAVBgkqhkiG9y8BAQwGCCsGAQUFBwMEMIGOBgNVHSAEgYYwgYMwgYAGCSqGSIb3LwECAzBzMHEGCCsGAQUFBwICMGUMY1lvdSBhcmUgbm90IHBlcm1pdHRlZCB0byB1c2UgdGhpcyBMaWNlbnNlIENlcnRpZmljYXRlIGV4Y2VwdCBhcyBwZXJtaXR0ZWQgYnkgdGhlIGxpY2Vuc2UgYWdyZWVtZW50LjBdBgNVHR8EVjBUMFKgUKBOhkxodHRwOi8vcGtpLWNybC5zeW1hdXRoLmNvbS9jYV83YTVjM2EwYzczMTE3NDA2YWRkMTkzMTJiYzFiYzIzZi9MYXRlc3RDUkwuY3JsMDcGCCsGAQUFBwEBBCswKTAnBggrBgEFBQcwAYYbaHR0cDovL3BraS1vY3NwLnN5bWF1dGguY29tMB8GA1UdIwQYMBaAFFcpejJNzP7kNU7AHyRzznNTq99qMA0GCSqGSIb3DQEBCwUAA4ICAQBXjlGa3yAK/Gijn6n/JNU9FZm72MP6vc5czrWe9y0T+EawuRvhpD5Edi1TnXkrpe8sMkgSjTGdbY+yGhq8zlCWQeXN1/aWo3L9Xr1uNxY/oVpLn0uWWfnfJ7yR9gKl/yoMfhjydT4t1fXHi/MhfhrWSVRHqX2U31UFGz/e298P2kv+vqhzpIUo1bj+jibtoPLMMQcCOTtKiJOTh4o3VSZpwQDERCzo91NkF+LnZjwYl6fE5USIkg/oCoomXxSPpowybDrcRJ9ilbtJcER48/LGgwzv/c7OYdron4PnEXm1FkOaVj+QRf7OwiNTizonhIzLR5Vfp0QHOWv/bPzvCjPQd+Xr0Q4032WlSxQwostNTAPtoVAU4OCwVH3Ech38emJ00/6fkDCdr7MN8/4n2LSNrMUvaBEZdmLqDCBnO02dbFrmpg3pTc0FqRQ4GL/88pjRNSMy5tU9SoQnSCGYqIsjfL8AzgPEGiXXRgABYc1uXecf4/eayb3K2MPs7hnWTbUKpHHJIwxpdN3vTGdZNWpz9Oxfuo3eELQlkTvACHgqkaXi/FAanHe5PChn6fr1/4cNF8goD0buPApgS3zzwqjRhxrH8ISwPfJn8JqzurMaLDMnnc18tHzUiMtX73jf6oXh7voCxX/T4D3nFPlxU3om2cpcLQ1Wd4026x18rlSGR1kGpTCCBqEwggSJoAMCAQICEAyotlR7iebSBol1zYubieIwDQYJKoZIhvcNAQELBQAwbDELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEZMBcGA1UEAxMQQWRvYmUgUm9vdCBDQSBHMjAeFw0xNjExMjkwMDAwMDBaFw00MTExMjgyMzU5NTlaMHUxCzAJBgNVBAYTAlVTMSMwIQYDVQQKExpBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZDEdMBsGA1UECxMUQWRvYmUgVHJ1c3QgU2VydmljZXMxIjAgBgNVBAMTGUFkb2JlIFByb2R1Y3QgU2VydmljZXMgRzMwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC3Hy69vQmzXEhs/gyDrmwB6lF4JaSAPomnsbKIZNr2iXaB+fkd85X8eJiNmI7P5O4cVT4Nc1p3zrESqBV4ZUyW8gcZ78QdwoHG8QNd2VNcHnMgSR+XT9Iafsnq9Nfww3Jt9KL3l5ANQ5n1+MJqr48EWNLll942bOL/JH4ywDSMoqhZqtJEIUUUGlQVBZ8CAvJc7LE6ddA5C52PE2Ppa7RfQgHXf4gfXVZwpxYRZcziPiOHqEvLb0J3cShUbejFxV6cwX8QyAPa1ePHg1RtM0HX+D34xHo3DkyGnmT+Ddq00TEDGG26AL5PdINKFIQl+zaq6KJFQe1fdGE5wrWzU4mBPmzaz3EbLn+7FWlwAhorYqIMldbfHE3ydc+aTU1JW7+bG19qmvhO9IluGtTtQDeqFBj2fg6faxsfVfVPD7stN6TwoIDlkOCE4RE+Iin8m3z3eqi/VsTmsmRqBxWDRaqOHz02EJoEDxXJG3ei+UbIIp01XZQvdufm90WxOTuqqan2ZqTPX9K5VdjEh/ovr7xFc5q1dZo+Sa5y4sTVM854/tLU3klOgUKzzSXYPYS3GhBcYJHjwr9xNRHnNX99D6F0g7OijScWfvtjxh13aTv/H0ETvymah4yfDpVdh9cK5YSCPqnuOlsujFAyhYwJXOWDvZZU2EkWVLDhoPx9zp7N4QIDAQABo4IBNDCCATAwEgYDVR0TAQH/BAgwBgEB/wIBADA1BgNVHR8ELjAsMCqgKKAmhiRodHRwOi8vY3JsLmFkb2JlLmNvbS9hZG9iZXJvb3RnMi5jcmwwDgYDVR0PAQH/BAQDAgEGMBQGA1UdJQQNMAsGCSqGSIb3LwEBBzBXBgNVHSAEUDBOMEwGCSqGSIb3LwECAzA/MD0GCCsGAQUFBwIBFjFodHRwczovL3d3dy5hZG9iZS5jb20vbWlzYy9wa2kvcHJvZF9zdmNlX2Nwcy5odG1sMCQGA1UdEQQdMBukGTAXMRUwEwYDVQQDEwxTWU1DLTQwOTYtMzMwHQYDVR0OBBYEFFcpejJNzP7kNU7AHyRzznNTq99qMB8GA1UdIwQYMBaAFKYc4W1UJEyoj0hyv26pjNXk7DHUMA0GCSqGSIb3DQEBCwUAA4ICAQBxzuUHjKbcLdzI4DtlXgCSgZXrlSAkr59pOF3JfPG42qVNAGU7JcEYXJ6+WbfcGwY7WYMl+jO7IvJPb7shXFYW9bnJgxX7lLU14KExchmcLNY1ee6IhBJ2Y8PzZMRUKSd5CkURPg0PBLGjz/KR/DofHx+G4rPTCOGORYxeYrd01lci5hVxvKccvIk7MD69ZTewfZPSM+0WnsU3f0Zmd7hgbRpUyWceG0eHFpdUKK/ZFWhHjDVC28odCnN885tHncKXviItK0ZUUo/AIthFKlhEXsnq9VL9fFbgvO83ZvpUQo5y8mY3cuGnEVGXdhjNb53CfC1u4dbpYmWaN99subUzEsUaUb3loLPfVfzDOpg2y9v37kBdy/wuXr20teY7U62xj/fAgs1QSnhUtlMTfCqbefyEycKVmKIrJkJLsvgTSYKVvH4FFIwfd5WjqOC97jX98rcVAzhAI0iSkazsWOMvL6m0L4nLJapx+85GsVX8Y6AHmEP4bmCElwil6KAP+UewJFiw5rmwV2pESHAhYuZJa03B8tl0nd2QJzvJGmbeBqXqpF9ORinFM3HErK8puRokOjFH2+1asLeI2tB31W/ELdNe27Ogduq6Z6qBwCp59YX27qydDhD0WRfN64kCs25K88iGAGNW2CAfTDS+b+WYJBiIL9jXYZ4LF+BiUvfdu2NwYWRZC70AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPZZAQBKX2Q2ihN2fLDLReHISpfOF0xIqNpOZXbBwZ0XanWG98erbIBdawl7r9nVma/uZjYH457wp00TVpKYUTJHMnzJMKskvM2Df4K6t5pUKGtJqEvMXLUy3g9kJq53aYDwikcUE+8wv+CYtu/+vii4XYSXQIxT4NN+JKoTDXmrNH1G46Nmpfq6SKk0g9GQ2brbkW3fzGR0xDxY3BXRy71guSBxN9TAbQGqUjMnkIyBcwV9wUQ2oCW9oIMNKASjW0CRkcFEzzmrQ+y+zHYpNvUaG7QehHcyhvOec3plzlyP6DZeQWp3PHA5bmonI8t5j6Qj15X1KnQiXuJ0rW+xoMA89aIVmpx4VgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAOSaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA5LjEtYzAwMSA3OS4xNDYyODk5Nzc3LCAyMDIzLzA2LzI1LTIzOjU3OjE0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjYyYTdmYWExLWJmZTMtMjE0Ny04MjAwLWMxM2NlMGU4ZTc1NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzRDMUI3RDdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzRDMUI3QzdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjUuMiAoMjAyMzEwMjQubS4yMzc0IDRhYjk0MzkpICAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphYjQzZjNjYy1hNTY4LTRkNGQtOTdiZC1iYjk0YjBlZjhjYmQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjJhN2ZhYTEtYmZlMy0yMTQ3LTgyMDAtYzEzY2UwZThlNzU0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HNvo5wAADZFJREFUeNrsXFtPVUkW3gc4yP0qDigKON517FFbHRGn1TamjaOJvvhsjIkvPplgfEKe1AefNDE+GP+AmWTszPTYcbpn2piJzc1GWwlOekRBEBFQ7jeZ9ZVrnVkUtfc5CGp3h5VU9qUuu3bVV9+67DonND4+7omEQiHPJaWlpYlxcXGLKX8epTCdB5aXNnHU6c2bN5POcaREp+O9dHxSX1/f5s3KL1ImYCkasMrKyvIISJspD+AyZSTpOrodDSaIBpQCkwtgSM8oVd2/f39M2quoqAijmcrKyjG/l7L77vde+v6sfCRgbdu2LY3AtJNSgg0qDa5oTOViKQtM9nXTgQMHaqmpPEoLKXUQqJpcYIqPj/cSEhLMUZgUbYyNjZkjRPpu50n+VEUvKtditMEb7Xom5OrVqzvpkOXIukFps5XXTunO4cOHR7heKp1/ye1gEX9BCcdv6H4330cbCyh9iXrRgJUQ1FmarFWUIqDS4ApiCT9AobxMpj24uI/209LSvMLCwiLKz6fyQModAlW73TeAac6cOV5SUpIBlasv9qKRvgBYIyMj3tDQkDmPdaLRPzwrHA6bhGsNWr9xsMfEZnC7XDSg+tzv4lRCCRPfjJtHjhzpu3LlCkDVx4BKZICsx9gy4PT4rmFQQbIpdfM5ynX7gWrS/Phl7NixI0SDWCCD52Is14vqAXIByoluAkl+fr43f/58Lyvr7cIaHh4OJSYmfkug6rXZApOamprqUb6vned3X4CBujj29/cbkEl/7EUj74o+og4S2gh6xkypk6mUPXnyZN25c+fCDKzm8vLyOuQzqCAtJ06cuH/+/PkwAytMLCR57VjQFy5cmKeAiXJZGOeLFy/iPBVt4Nqeb60dogKLBm9O/FvxXIwVxBAaUBpgixYt8np7e7329vYJZUtKSkwSefHihVdTU9N2586dXrtfmNj09HQz0dMRvAsYD0dhLryrvG8s7/w+ZCrPcJSdx8duAb+6l0WgWqeu/8uMZMoDWCTr+BpMVoZ8jLUq18XXgdohEFg0cXF6kF2s5Uf9NqBwxL0FCxaYSXz58qWZSNzr6+vzioqKIm01NTV5ZLgbT9HuExgGAzBdUOmJEeb6EKD5AJKt1KJ9TwAFNrpz6tSpljNnzgiQuuh8DbNSNx9HlF0mx26/cbTHLy6AsSKGcVCyjWepJwnS2trqbdiwwZyDJaDyUBbslZmZGTG6Hz9+7D18+NDdUSqTkpIyY6B6V5b4mYsBAIGm27rXR/f+DFXGKm5Ega6P7a5lqvw6sbMIcFkKlCUAI6esQI0QBCwBjxirNqCkDACSkZFhQKLVCSassbHR27Jli6kvsnDhQnN8/vy5t3Hjxsj95ubmSQ6CVoEA5a8IBO+LsSKgoskPKxaC1DKo1mmDXF1/AwAyCO+rNoX1FrANVqLA6V6sfuGGgwcPphBovrCBIuwCgRp7+vSpAUd2dra5bmtrM6pvdHTUu3fvnrGdNHhEbt265XV1dXn79+9/y8V0XltbGwkDkKpsqqqqqhG2AmgBrFn5+Qo0Uyw21gRm0kwCLwqAAgC2b99u2AQCVYWyACtUGkRUoC2bNm0yYBIBe/l5ncKaWmg1hrj/47TCRu32ebUam4LyAweEymK1QG+PUdk3PmXCrGZicrej9e99CD0znvs4NsPtRh2fmMMNLmBBYHgDmTC4ly1bNslWAbhu375tyh06dGgCw2kB+yDEAIEh39HR4RsjE+/NkgJKf0DwlNJ3jkndi2Yo/QXOZ5RxWElpOaUqSk99QLWPErzUr2OcD+j7T+GPUKqZocldyu2mWWbMv1mt4T3q2OObSVnNz46MD49xMfelE85ArOGGiA2FSR0cHDRggVe3fv16Lzc317cXCBeUlZUZu8sVBLUF7YrnaDMWygsjWpLJx1eOvCS8LKX+GFeYdPS1T356wLOC7NcOK/g4HSbaSmku2zZtlo0D6l8U5R2mIxmO91/F79iP8aY+lmhAR2Us09PXr439hAles2ZNoK2Tl5dnwgorV66clHfz5k1v165dk8CFuJYfWwm4/Twgn4FMZqO0U00OPg/lsgck0k3Ae6JACq8HamsAJgPl9fOAzef8VLpey1HtVGXUQoZ45b7QawzgojqpauJNZIYnpEXUFpWZw8ZxMqsdEdgUixlUqPMt1RlygE8mv4jO5/M7tFHZXs4HI+uJG4YFQvldnF+sAPRGjd8SSjl8fzGVG6I6Dxk76GcKl8uOlbESh4eHDVOBpWCcQ/1F88qQv2fPnknlnjx5YsIJOBYXF/9/NqhtANcV8ZbYlc8zswJYJJ8H5Eem7A3WxEYmjdVcigycyltBeV/RsVANbDKDrJnL5jom+Dsa+A5e0WDOn7g/Kx3PR/06qpPDjBS28gG6e6pfDT6gimeV5LF6iqh4focxHo84Ne8hzv8ng2sJA6tfjUedROkZbPkqRhbie8JauTEBi7y6ePncAQaaO3fulKLaWgDQgYEBoxrh+WlgiW3l9znFNtp5IBN5kv0YS6vJYgYVVlU120mfUPot58sqbeaBxJh8zqs7TIN+i573R2aMfykGQD2w21dcfx2DMI3yXjOosLqH6Fr6U8VqDHGhzVw2ns8T2BaTWNMefrc09a7PA1R1iNuuYibZwfXmUB8Qq/qrZa9tZjs1i65fcRswHf5O1zuYgZ7yeG1jdq3SbM9gauFF8yimOBYABaN66dKlUwKVS0TVQT2+evVqgjcIYAWxXxQ12O/jcWUq0MlqvwtQsIeo8zOUWoQHOcCTNMbqQsqPcTARE5PCk/+a64woB6HPYf/JMzq57KgqW8AAaKa8Jn4fbfOlKe92wGeoMq13GFQqdwD95aDmZ5Q+Z9AJwwwoYL5Wn3vqHH2JCOU9pkMjg7jWMgH8GYtspVx8cIwW6QYDrV271rccgATGAkhgm8GTfPDggbd161YTWIUqdLGVnPt4lQKsQQebJTCVj7CNlO4YmAwFlCUaBAo0XVR/nK6T+RqTNh5g7GuwLrTyMxlMfY760r/eKI4J+hJSffA1rlm9o989DK5SLtOmnpOm+pCr6zNoojpJVK6HnxFbuKGiomI5u5hRQVVdXW0+0UjowGa97u6Jn5ewewExMIAN3mA0lepjX8nLgsYXMy2P8SAmWJM6zGoJhnkrr7BEBRwbJLYHJJ/zQ5gwZhx7IkMMkEFWfZF8BcxOFU9zAes33L9+yzERMKLP66nMM8V4HjNFpgPI0r9kft4AmwLjzE4wD0Z58S0OMCvk/RMDgB1zHGtZtIoIgopKe/TokRNYnZ2dzroAIsAFo93Vrq0OAxgLdPZ7TZBsLOtBAl2vZbvqE1VWT4JWM/YkDfJk4P4+GtxqR5l07otrYjMdk6Ydj24ebxjwO23CZ6A+YGegiJOn+vY3xcC9jncY5TwA7E92+zGEW/r5+CnbUjdijbXYbJXs8E6ck11aWmp2G+B7oC1Qc2AsP+AAVHqT3RR3Vd5nQ9dO93hw6ik95hX9H7jonF/PIQBjj7ARC9f5rhUTQrlWrt/L9e/y/XbOq1ce0ihfy0A85useZop6K2gJ8P8A0FACo/7De7tV5Qd4sgIa8QDp2IBoDTNOvU7Mlo1sQ44rwNSzwS3t19l14WWq/tb4qLW76rn3Yp2gSd8KCVjwWMqC1JP6nmei8Ddu3DBRdgmI4jshDHbkByVpQ5+rY9P3339fk5OT46m9RVMNLGLQf2cxdCGff62M3I8m1EcY73nqVg4nhBYe/FK+EwJH+E4cpAozgxoQlhEQwGNctWqVUW2rV6+OGOx++96jbcm193bJBrx3lBQV3NRu8o+xgCrWvervsoddWD8pKamQ40Py9QEM00htNrzrnvxY3yeW/kUTIRlbO7kYa4OlxyMsZG87loQ8Yhdv9+7dJkIPYGk28mOrFStWGOMeux+wdx0foq9fvx7Z3QDGgmeK9D63y8j74D2QpI+unZHTAZdsgJzKxE33vfQzowEuluC3q57eyx/EWBn2DQQ3MdDa9bd/xrV8+fLIpx8beH4/HigoKHgbKi4u9s6ePeuVl5cbYOkOIxwB0M30Bj+0DRDhy4LE7KSfszJ9SbAMd0+5vxEjG6EB+SWMRq3eepycnGwMdq0mfX7aNWHbsrAhovvXrl2bpCKRB2DDSZjuKpd2AVa0qX9EMSszK3GOmEWCjopLgBMJE4GEyZajVh8OA9zJXBpUOL98+bJ37Ngxr6WlRbPbuIABrILPS+8KAtRD/3t6ekzsTBbLLKg+HLC0GrxLkzCmAaWTDSptm0QDGf92cMKvdy5duuQdPXpU6+sB7TAAWFCzOI8VTCiLOoinIeaGNqbyO8JZmXlg3a2srPyJANQqQHIBTIPLBlYQc8GTxM5SAdHevXvNr3NgSylGe2Z7owAG2AZHcSbshHJgOJQDoCSeNgumj2hjMbAMqHBBE/IAv0imiU6AjSUGvN9Pv1z2lAtc2AiILTg4r6mpMfGP48ePew0NDdJGU21t7SuXaysAt3e26l85z7LSx5cJ4YbTp0/PJVBN2G6wb9++PJrAzdif5fpBhTaK/f70I1qygPeMrqvq6upi0nmuPyWZlY8XJPWNY7mEVJX5GyNK8yiFg34J7fM3RYEgIyCN09H8jVF1dfXs3xj9CoD1PwEGAKorJqR4atjIAAAAAElFTkSuQmCC")=>{let s,e=0,h=0;const r=[],n=t=>{const i=new Ot.Image;i.src=t,i.onload=()=>{r.forEach((t=>{var s;const r=new Cn({source:i,fitMode:_n.Stretch});null===(s=t.Wd)||void 0===s||s.De(r),e=0,h=0,l(t)}))}};n(i);const o=t.Zn((t=>n(t)));let a;if(new Ot.Image instanceof Ot.HTMLImageElement){const t=new Ot.Image;t.src=i,a=new Cn({source:t,fitMode:_n.Stretch})}else if(Ot.lcjs_setup){const t=new Ot.Image;t.src=i;const s=Ot.lcjs_setup(t.naturalWidth,t.naturalHeight);s.getContext("2d").drawImage(t,0,0),a=new Cn({source:s,fitMode:_n.Stretch})}else a=new U({color:b("#f00")});const l=t=>{if(t.Wd){const i=t.ft.gi({x:t.ft.x.getInnerEnd(),y:t.ft.y.getInnerStart()},{x:-(3+e),y:3}),s=t.ft.gi({x:t.ft.x.getInnerEnd(),y:t.ft.y.getInnerStart()},{x:-3,y:3+h}),r={x:s.x-i.x,y:s.y-i.y};t.Wd.Re(i).tt(r)}s&&s.xs()};return s=t.GF("logo",Number.MAX_SAFE_INTEGER),i=>{const e={ft:i};return(i=>{i.Wd&&i.Wd.dispose(),s&&(i.Wd=s.Be(i.ft).De(a).setMouseInteractions(!0).Pe(at).setMouseEnterEventHandler((()=>{t.Jr(Xe.Point)})).setMouseLeaveEventHandler((()=>{t.Jr(Xe.None)})).setMouseClickEventHandler(RA).setTouchEndEventHandler(RA),l(i))})(e),r.push(e),{Es:()=>l(e),U:()=>(i=>{i.Wd&&(i.Wd.dispose(),i.Wd=void 0);const s=r.indexOf(i);s>=0&&r.splice(s,1),r.length<=0&&t.Qn(o)})(e)}}},RA=()=>Ot.open("https://lightningchart.com/lightningchart-js/");class EA{constructor(){this.PR=this.II.bind(this),Ot.addEventListener("scroll",this.PR,{passive:!0})}U(){this.PR&&Ot.removeEventListener("scroll",this.PR),this.PR=void 0}}class zA{constructor(t,i){this.wa=t,this.j=i,this.DR=!0,this.BR=null,this.LR=null}}class VA{constructor(t){this.RR=!1,this.ER=1,this.zR=t,this.VR={wa:n(0,0),j:n(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),DR:!0,BR:null,LR:null},this.OR=n(64,64),this.NR=new Uint8ClampedArray(this.OR.x*this.OR.y*this.ER)}GR(t,i){if(!t.DR)return null;if(t.BR&&t.LR){const s=this.GR(t.BR,i);return null!==s?s:this.GR(t.LR,i)}const s=o(t.j.x,t.j.y);if(t.wa.x+t.j.x>=Number.MAX_SAFE_INTEGER&&(s.x=this.OR.x-t.wa.x-1),t.wa.y+t.j.y>=Number.MAX_SAFE_INTEGER&&(s.y=this.OR.y-t.wa.y-1),t.j.x===i.x&&t.j.y===i.y)return t.DR=!1,t;if(s.x<i.x||s.y<i.y)return null;let e,h;const r=s.x-i.x,a=s.y-i.y;let l=r<a;return 0===r&&0===a&&(l=!(t.j.x>t.j.y)),l?(e=new zA(ws(t.wa,{x:0,y:1}),n(t.j.x,i.y)),h=new zA(ws(t.wa,{x:0,y:i.y+1}),n(t.j.x,t.j.y-1-i.y))):(e=new zA(ws(t.wa,{x:1,y:0}),n(i.x,t.j.y)),h=new zA(ws(t.wa,{x:i.x+1,y:0}),n(t.j.x-1-i.x,t.j.y))),t.BR=e,t.LR=h,this.GR(t.BR,i)}WR(t,i){const s={UR:!1,wa:null};let e=this.GR(this.VR,i);if(null===e)for(;null===e&&this.OR.x<this.zR&&this.OR.y<this.zR;){if(!this.YR(n(2*this.OR.x,2*this.OR.y)))return this.RR=!0,null;s.UR=!0,e=this.GR(this.VR,i)}if(null===e)return this.RR=!0,null;for(let s=0;s<i.y;s+=1)for(let h=0;h<i.x;h+=1){const r=e.wa.y+s,n=e.wa.x+h;this.NR[r*this.ER*this.OR.x+n*this.ER+0]=t[s*this.ER*i.x+h*this.ER+0]}return s.wa=e.wa,s}YR(t){if(t.x>this.zR||t.y>this.zR)return!1;const i=new Uint8ClampedArray(t.x*t.y*this.ER);for(let s=0;s<this.OR.y;s+=1)for(let e=0;e<this.OR.x;e+=1)i[s*t.x*this.ER+e*this.ER+0]=this.NR[s*this.OR.x*this.ER+e*this.ER+0];return this.OR=t,this.NR=i,!0}}class OA{constructor(t){this.HR=new Map,this.zR=t,this.HR.set(this.HR.size,new VA(this.zR))}$R(t){return this.HR.get(t)}WR(t,i){let s=-1;const e=Array.from(this.HR.values());for(let t=0;t<e.length;t+=1){const i=e[t];if(!i)break;if(!i.RR){s=t;break}}-1===s&&(s=this.HR.size,this.HR.set(this.HR.size,new VA(this.zR)));const h=this.HR.get(s);if(!h)return null;let r=h.WR(t,i);if(!r&&h.RR){const e=this.HR.size,h=new VA(this.zR);this.HR.set(e,h),s=e,r=h.WR(t,i)}return r?{XR:s,...r}:null}}var NA;!function(t){t[t.Fail=0]="Fail",t[t.Success=1]="Success",t[t.Resize=2]="Resize"}(NA||(NA={}));const GA=Ti("font-texture");class WA{constructor(t){this.jR=new Map,this.ZR=new Map,this.jo=GA(),this.QR=t,this.JR=new OA(this.QR.KR||4096)}qR(){return this.ZR.forEach((t=>{this.QR.tE(t)})),this.ZR.clear(),this}iE(t,i){const s=this.jR.get(i);if(s)return s.get(t)}sE(t,i,s){let e=this.jR.get(i);if(e||(e=new Map,this.jR.set(i,e)),e.has(t.glyph))return NA.Success;const h=this.JR.WR(s,t.size);if(!h||!h.wa)return NA.Fail;h.UR&&this.eE();const r=this.JR.$R(h.XR);if(!r)return NA.Fail;let n=this.ZR.get(h.XR);if(!n){const t=this.QR.gl.createTexture();if(!t)throw new Bt("Failed to create texture for font!");n=t,this.ZR.set(h.XR,t)}const o=h.wa,a=r.OR.x,l=r.OR.y,u=-t.offsetX,c=t.baseline-t.size.y,d=-t.offsetX+t.size.x,f=t.baseline,A=o.x/a,g=(o.y+t.size.y)/l,y=(o.x+t.size.x)/a,m=o.y/l,p=[A,g,y,g,A,m,A,m,y,g,y,m],v=[u,c,d,c,u,f,u,f,d,c,d,f],S={origin:o,size:t.size,advanceX:t.advance,baseline:t.baseline,vertices:v,texCoords:p,packerId:h.XR,texture:n};e.set(t.glyph,S);const b=this.QR.gl;return b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),b.bindTexture(b.TEXTURE_2D,n),b.texImage2D(b.TEXTURE_2D,0,b.LUMINANCE,r.OR.x,r.OR.y,0,b.LUMINANCE,b.UNSIGNED_BYTE,this.QR.hE?r.NR:new Uint8Array(r.NR)),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.bindTexture(b.TEXTURE_2D,null),h.UR?NA.Resize:NA.Success}eE(){this.jR.forEach((t=>{t.forEach(((i,s)=>{const e=this.JR.$R(i.packerId);if(!e)return;const h=i.origin,r=e.OR.x,n=e.OR.y,o=h.x/r,a=(h.y+i.size.y)/n,l=(h.x+i.size.x)/r,u=h.y/n,c=[o,a,l,a,o,u,o,u,l,a,l,u];i.texCoords=c,t.set(s,i)}))}))}}const UA=t=>{if(t instanceof Ks||t instanceof fd)return t.Mi()?"linear-highPrecision":"linear";if(t instanceof qs){const i={};return t.x instanceof Ns&&(i.x={base:t.x.Ai()}),t.y instanceof Ns&&(i.y={base:t.y.Ai()}),["logarithmic",i]}return"linear"},YA=t=>{const i=Object.keys(t),s={};return i.forEach((i=>{const e=t[i];let h=!1;s[i]=t=>{if(!t)return h;const i=e();return h=i,i}})),s},HA=(t,i,s)=>"value"===t.getLookUpProperty()?s:"x"===t.getLookUpProperty()?{min:i.yt(),max:i.vt()}:"y"===t.getLookUpProperty()?{min:i.St(),max:i.bt()}:"z"===t.getLookUpProperty()?{min:i.Sv(),max:i.vv()}:void 0,$A=t=>!(!t||"value"!==t.lookUpProperty||!t.lut.percentageValues),XA=t=>(i,s)=>s%2?i:i+t;class jA{constructor(t){this.rE=new Map,this.nE=Ti("font"),this.oE=new Map,this.aE=new Set,this.QR=t}qR(t=!1){return(t||0===this.aE.size)&&(this.rE.forEach(((t,i)=>{t.qR(),this.rE.delete(i)})),this.aE.clear()),this}lE(t){this.aE.add(t)}uE(t){this.aE.delete(t)}cE(t,i,s,e){const h=Ot.devicePixelRatio,r=`${e?"dark":"light"} - ${Wh(i,h).id}`,n=this.oE.get(r),o=this.rE.get(n);let a=0,l=0,u=0;const c=t.split(""),d=i.size,f=.45*i.size*h,A=Math.round(1*i.size);let g=!1;for(let t=0;t<c.length;t+=1){const i=c[t],s=o&&o.iE(i,d);if(s)""!==i.trim()&&(l=Math.max(l,s.baseline),a=Math.min(a,s.baseline-(s.size.y-1))),u+=s.advanceX;else{if(""!==i.trim()){const t=0;l=Math.max(l,t),a=Math.min(a,t-(A-1))}u+=f,g=!0}}const y=((t,i,s)=>{if(0===s||360===s||180===s||s%180==0)return{x:t,y:i};if(90===s||-90===s||(s+90)%180==0)return{x:i,y:t};const e=s*Math.PI/180,h=Math.cos(e),r=Math.sin(e);return{x:Math.abs(t*h)+Math.abs(i*r),y:Math.abs(t*r)+Math.abs(i*h)}})(u/h,(l-a+1)/h,s);return{x:y.x,y:y.y,isEstimate:g}}dE(t,i,s){const e=`${s?"dark":"light"} - ${i.id}`;let h=this.oE.get(e);h||(h=this.nE(),this.rE.set(h,new WA(this.QR)),this.oE.set(e,h));const r=this.rE.get(h);if(!r)throw new Bt("Failed to get font texture!");let o=0,a=0,l=0;const u=t.split(""),d=new Map;let f=0;const A=i.properties.size;for(let t=0;t<u.length;t+=1){const e=u[t],h=Math.ceil(f);let n=r.iE(e,A);if(!n){const h=this.QR.fE(e,i.properties,i.dpr,s);if(!h)continue;const l=r.sE(h[1],A,h[0]);if(l===NA.Resize){this.aE.forEach((t=>{t.pa.o=!0})),t=-1,f=0,a=0,o=0,d.clear(),this.QR.us.xs(!0);continue}if(l===NA.Fail)throw new Bt("Failed to create glyph");if(n=r.iE(e,A),!n)throw new Bt("Failed to get glyph after creation")}if(""!==e.trim()){let t=d.get(n.texture);t||(t={vertices:[],texCoords:[]},d.set(n.texture,t)),t.vertices.push(...n.vertices.map(XA(h))),t.texCoords.push(...n.texCoords),a=Math.max(a,n.baseline),o=Math.min(o,n.baseline-(n.size.y-1))}f+=n.advanceX}l=f;const g=c(n(0,o),n(l,a)),y=[];return d.forEach(((t,i)=>{y.push({texCoords:new Float32Array(t.texCoords),vertices:new Float32Array(t.vertices),texture:i})})),[y,g]}}class ZA{constructor(t){this.modifiers=[],this.modifiers=t}build(t){const i=this.modifiers.filter((t=>QA(t)));for(const s of i)t=s(t);return`${Ri(this.modifiers.filter((t=>JA(t)))).map((t=>t.AE)).join("\n")}\n${t}`}}const QA=t=>"function"==typeof t,JA=t=>t&&"object"==typeof t&&"gE"in t,KA=(...t)=>i=>{t=t.reverse();for(let s of t)"string"==typeof s&&(s=s.includes("{")||s.endsWith(";")?s:`${s};`,s=s.trim(),i=i.replace("void main(void)",`${s}\nvoid main(void)`));return i},qA=t=>i=>(t=t.endsWith(";")?t:`${t};`,i.replace(t,"")),tg=(...t)=>i=>{const s=t.filter((t=>t));for(let t=0;t<s.length;t+=1)s[t]=s[t].endsWith(";")?s[t]:`${s[t]};`,s[t]=s[t].startsWith("\t")?s[t]:`\t${s[t]}`;const e=s.join("\n");return i.replace("void main(void) {\n",`void main(void) {\n${e}\n`)},ig=(t,...i)=>s=>{for(let t=0;t<i.length;t+=1)i[t]=i[t].endsWith(";")?i[t]:`${i[t]};`,i[t]=i[t].startsWith("\t")?i[t]:`\t${i[t]}`;const e=i.join("\n"),h=new RegExp(`(.*${t}.*)`),r=s.replace(h,`${e}\n$1`);return i.forEach((i=>{if(!r.includes(i))throw new Error(`ShaderBefore misusage (not found: \n${i}\nmatch: \n${t}\nresult: \n${r}\n)`)})),r},sg=(t,...i)=>s=>{const e=i.filter((t=>"string"==typeof t));for(let t=0;t<e.length;t+=1)e[t]=e[t].endsWith(";")?e[t]:`${e[t]};`,e[t]=e[t].startsWith("\t")?e[t]:`\t${e[t]}`;const h=e.join("\n"),r=s.lastIndexOf(t),n=s.substring(r),o=n.indexOf("\n"),a=n.substring(o),l=`${s.substring(0,r+o)}\n${h}${a}`;return e.forEach((i=>{if(!l.includes(i))throw new Error(`ShaderAfter misusage (not found: "${i}", match: "${t}", result: "${l}")`)})),l},eg=(...t)=>i=>{for(let s of t)if("string"==typeof s){s=s.endsWith(";")?s:`${s};`,s=s.trim(),s=s.startsWith("\t")?s:`\t${s}`;const t=i.lastIndexOf("}");i=`${i.substring(0,t-1)}\n${s}\n}`}return i},hg=(t,i)=>s=>{let e,h;if(t.includes("uniform")||t.includes("attribute")){const i=t.endsWith(";")?t:`${t};`;s=KA(i)(s),e=t.split(" ")[2].replace(";","")}else e=t;if(i.includes(" ")){const t=i.endsWith(";")?i:`${i};`;s=KA(t)(s),h=i.split(" ")[2].replace(";","")}else h=i;return eg(`\t${h} = ${e};`)(s)},rg=(...t)=>i=>{t=t.reverse();for(const s of t)i=s+i;return i},ng={roundUnsigned:{gE:"roundUnsigned",AE:"float roundUnsigned(float number) {\n  return floor(number + 0.5);\n}"},linearStep:{gE:"linearStep",AE:"float linearStep(float step0, float step1, float step) {\n  return clamp((step - step0) / (step1 - step0), 0.0, 1.0);\n}"},decodeUbyteRGBAEncodedFloat:{gE:"decodeUbyteRGBAEncodedFloat",AE:"\n      // Denormalize 8-bit color channels to integers in the range 0 to 255.\n      ivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {\n        ivec4 bytes = ivec4(inputFloats * 255.0);\n        return (\n          littleEndian\n          ? bytes.abgr\n          : bytes\n        );\n      }\n      \n      // Break the four bytes down into an array of 32 bits.\n      void bytesToBits(const in ivec4 bytes, out bool bits[32]) {\n        for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {\n          float acc = float(bytes[channelIndex]);\n          for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {\n            float powerOfTwo = exp2(float(indexInByte));\n            bool bit = acc >= powerOfTwo;\n            bits[channelIndex * 8 + (7 - indexInByte)] = bit;\n            acc = mod(acc, powerOfTwo);\n          }\n        }\n      }\n      \n      // Compute the exponent of the 32-bit float.\n      float getExponent(bool bits[32]) {\n        const int startIndex = 1;\n        const int bitStringLength = 8;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        float acc = 0.0;\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Compute the mantissa of the 32-bit float.\n      float getMantissa(bool bits[32], bool subnormal) {\n        const int startIndex = 9;\n        const int bitStringLength = 23;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        // Leading/implicit/hidden bit convention:\n        // If the number is not subnormal (with exponent 0), we add a leading 1 digit.\n        float acc = float(!subnormal) * exp2(float(bitStringLength));\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Parse the float from its 32 bits.\n      float bitsToFloat(bool bits[32]) {\n        float signBit = float(bits[0]) * -2.0 + 1.0;\n        float exponent = getExponent(bits);\n        bool subnormal = abs(exponent - 0.0) < 0.01;\n        float mantissa = getMantissa(bits, subnormal);\n        float exponentBias = 127.0;\n        return signBit * mantissa * exp2(exponent - exponentBias - 23.0);\n      }\n      \n      // Decode a 32-bit float from the RGBA color channels of a texel.\n      float decodeUbyteRGBAEncodedFloat(vec4 rgba, bool littleEndian) {\n        ivec4 rgbaBytes = floatsToBytes(rgba, littleEndian);\n        bool bits[32];\n        bytesToBits(rgbaBytes, bits);\n        return bitsToFloat(bits);\n      }\n      "},texelFetchWithFallback:{webgl2:{gE:"texelFetchWithFallback",AE:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{gE:"texelFetchWithFallback",AE:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},texelFetchUnsignedWithFallback:{webgl2:{gE:"texelFetchUnsignedWithFallback",AE:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{gE:"texelFetchUnsignedWithFallback",AE:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},modulus:{gE:"modulus",AE:"int modulus(int a, int b) {\n  return (a)-((a)/(b))*(b);\n}"},computeScreenSpaceWireframe:{gE:"computeScreenSpaceWireframe",AE:"#extension GL_OES_standard_derivatives : enable\nfloat computeScreenSpaceWireframe (vec3 barycentric, float lineWidth) {\n  vec3 dist = fwidth(barycentric);\n  vec3 smoothed = smoothstep(dist * ((lineWidth * 0.5) - 0.5), dist * ((lineWidth * 0.5) + 0.5), barycentric);\n  return 1.0 - min(min(smoothed.x, smoothed.y), smoothed.z);\n}"}},og=(t,i)=>{const s=i.steps,e=s.length-1,h=[KA("uniform vec4 uFallbackColor")],r=[],n=[];for(let t=0;t<i.steps.length;t+=1)r.push(`uniform float uLUTValue${t}`),n.push(`uniform vec4 uLUTColor${t}`);return h.push(KA(...r,...n),i.percentageValues&&KA("uniform float uMinValue","uniform float uMaxValue")),i.interpolate?h.push(sg("colorFragment =","vec4 colorLookup = uLUTColor0","float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),"if (value <= -340282346638528859811704183484516925440.0) {\n                    colorLookup = uFallbackColor;\n                }",`if (value >= uLUTValue${e}) {\n                    colorLookup = uLUTColor${e};\n                }`,...s.slice(0,-1).map(((t,i)=>`if (value >= uLUTValue${i} && value <= uLUTValue${i+1}) {\ncolorLookup = uLUTColor${i} + vec4(uLUTColor${i+1}.r -  uLUTColor${i}.r, uLUTColor${i+1}.g -  uLUTColor${i}.g, uLUTColor${i+1}.b -  uLUTColor${i}.b, uLUTColor${i+1}.a -  uLUTColor${i}.a) * (value - uLUTValue${i})/(uLUTValue${i+1} - uLUTValue${i});} `)),"colorFragment = colorLookup")):h.push(sg("colorFragment =","vec4 colorLookup = vec4(uLUTValue0)","float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),`if (${t} <= -340282346638528859811704183484516925440.0) {\n                    colorLookup = uFallbackColor;\n                } else if (${t} < uLUTValue0) { colorLookup = uLUTColor0;} ${s.slice().reverse().map((t=>{const i=s.indexOf(t);return`else if (value >= uLUTValue${i}) { colorLookup = uLUTColor${i};} `})).join("")}`,"colorFragment = colorLookup")),h},ag=[KA("uniform sampler2D uMaskTexture"),KA("varying vec2 vMaskTextureCoord"),sg("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.r")],lg=[KA("uniform sampler2D uMaskTexture"),KA("varying vec2 vMaskTextureCoord"),sg("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.a")],ug=[KA("varying vec3 vPosWorld;","varying vec3 vNormal;","uniform vec3 uCameraLoc;","uniform vec3 uLightLoc;","uniform vec4 uLightColor;","uniform vec4 uAmbientColor;","uniform float uShininess;","uniform float uAmbientReflection;","uniform float uDiffuseReflection;","uniform float uSpecularReflection;"),sg("colorFragment =","float ambientReflection = uAmbientReflection","float diffuseReflection = uDiffuseReflection","float specularReflection = uSpecularReflection","vec3 ambientColor = uAmbientColor.rgb","vec3 diffuseColor = colorFragment.rgb","vec3 specularColor = uLightColor.rgb","vec3 vNormalNormalized = normalize(vNormal)","vNormalNormalized = (float(gl_FrontFacing) * 2.0 - 1.0) * vNormalNormalized","vec3 lightDir = normalize( uLightLoc - vPosWorld )","float lambertian = abs(dot(vNormalNormalized, lightDir))","float specular = 0.0","vec3 R =  reflect(-lightDir, vNormalNormalized)","vec3 V = normalize(uCameraLoc - vPosWorld)","float specAngle = max(dot(R,V),0.0)","specular = pow(specAngle, uShininess)","colorFragment = vec4(ambientReflection * ambientColor + diffuseReflection * lambertian * diffuseColor + specularReflection * specular * specularColor, colorFragment.a)")];class cg extends Error{constructor(t,i,s){super(`Dynamic shader generation error\n(id: ${i})\n ${s?`when applying feature: ${s.idVertex?`vert: ${s.idVertex}`:""} ${s.idFragment?`frag: ${s.idFragment}`:""}`:""} | ${t}`)}}const dg=(...t)=>{let i="";for(const s of t){if("object"!=typeof s){i+=`${String(s)},`;continue}const t=[{prefix:"",obj:s}];for(;t.length>0;){const{prefix:s,obj:e}=t.shift();i+=`${s}:`;const h=Object.keys(e).sort();for(const s of h){const h=e[s];"object"==typeof h&&h.__proto__===Object.prototype||Array.isArray(h)?t.push({prefix:s,obj:h}):i+=`${s}=${String(h)},`}}}return i},fg=t=>void 0!==t.find((t=>{var i;return null===(i=t.yE)||void 0===i?void 0:i.mE})),Ag=t=>void 0!==t.find((t=>{var i;return null===(i=t.yE)||void 0===i?void 0:i.pE})),gg=(t,i,...s)=>{const e=[],h=i?"vec3":"vec2",{axisWorldTranslation:r,scaling:n,translation:o,offset:a,flipXY:l,flipXZ:u,splitPosAttribute:c,normalSource:d}=t,f=[];if("attribute"===d&&e.push(KA("attribute vec3 aNormal"),tg("vec3 normal = aNormal")),"linear-highPrecision"!==r?s.forEach((t=>{void 0!==t.attributeNameAxisCoord&&void 0!==t.variableNameAxisCoord&&(!0!==c?e.push(tg(`${h} ${t.variableNameAxisCoord} = ${t.attributeNameAxisCoord}`)):e.push(tg(`${h} ${t.variableNameAxisCoord} = ${i?`vec3(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y, ${t.attributeNameAxisCoord}Z)`:`vec2(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y)`}`)))})):s.forEach((i=>{!0!==t.splitPosAttribute?e.push(tg(`${h} ${i.variableNameAxisCoord}_highpart = ${i.attributeNameAxisCoord}_highpart`),tg(`${h} ${i.variableNameAxisCoord}_lowpart = ${i.attributeNameAxisCoord}_lowpart`)):e.push(tg(`${h} ${i.variableNameAxisCoord}_highpart = vec2(${i.attributeNameAxisCoord}_highpartX, ${i.attributeNameAxisCoord}_highpartY)`),tg(`${h} ${i.variableNameAxisCoord}_lowpart = vec2(${i.attributeNameAxisCoord}_lowpartX, ${i.attributeNameAxisCoord}_lowpartY)`))})),a&&a.rotation){const t=a.rotation.dataType,i="uniform"===t?"u":"a";if("attribute-deg"===t){e.push(KA("attribute float aRotDeg"),KA("uniform float uBaseRotDeg"));const t="cRot",i="aInstanceGeo";e.push(tg(`vec2 ${t} = vec2(sin((aRotDeg + uBaseRotDeg) * 0.01745329252), cos((aRotDeg + uBaseRotDeg) * 0.01745329252))`,`vec2 rotatedGeo = vec2(${i}.x * ${t}.y + ${i}.y * ${t}.x, ${i}.y * ${t}.y - ${i}.x * ${t}.x)`))}else{const s=`${i}Rot`;e.push(KA(`${t} vec2 ${s}`));const h="aInstanceGeo";e.push(tg(`vec2 rotatedGeo = vec2(${h}.x * ${s}.y + ${h}.y * ${s}.x, ${h}.y * ${s}.y - ${h}.x * ${s}.x)`))}}if(a&&e.push(KA(`attribute ${h} aInstanceGeo`)),!0===l){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXY");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${i?`vec3(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x, ${t.variableNameAxisCoord}.z)`:`vec2(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`}`)}))}if(!0===u){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXZ");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = vec3(${t.variableNameAxisCoord}.z, ${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`)}))}if(n){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + scaling");const t=("attribute"===n.dataType?"a":"u")+"Scaling",h=i?"vec3":"vec2";e.push(KA(`${n.dataType} ${h} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} * ${t}`)}))}if(o&&"axis"===o.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + translation (axis)");const t=("attribute"===o.dataType?"a":"u")+"TranslationAxis",h=i?"vec3":"vec2";e.push(KA(`${o.dataType} ${h} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} + ${t}`)}))}if(a&&"axis"===a.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + offset (axis)");const t=("attribute"===a.dataType?"a":"u")+"OffsetAxis",n=!0===a.symmetric?"float":h;e.push(KA(`${a.dataType} ${n} ${t}`));const o=a.halved?" * 0.5":"",l=a.rotation?"rotatedGeo":"aInstanceGeo",u="offsetGeometry";f.push(`${h} ${u} = ${t} * ${l}${o} * sign(uScale)`),i&&"gpu-calculate"===d&&f.push(`${h} normal = ${l}`),s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${t.variableNameAxisCoord} + ${u}`)}))}if(void 0===r||"linear"===r)e.push(KA(`uniform ${h} uDisp`,`uniform ${h} uScale`)),s.forEach((t=>{f.push(`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord} - uDisp) / uScale`)}));else if("linear-highPrecision"===r)e.push(KA(`uniform ${h} uDisp`,`uniform ${h} uScale`,`uniform ${h} uScaleStart_highpart`,`uniform ${h} uScaleStart_lowpart`)),s.forEach((t=>{f.push(`${h} ${t.variableNameAxisCoord}_hprecision = (${t.variableNameAxisCoord}_highpart - uScaleStart_highpart) + (${t.variableNameAxisCoord}_lowpart - uScaleStart_lowpart)`,`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord}_hprecision - uDisp) / uScale`,`${h} ${t.variableNameAxisCoord} = ${t.variableNameAxisCoord}_highpart + ${t.variableNameAxisCoord}_lowpart`)}));else if("matrix"===r)e.push(KA("uniform mat3 uMatrix")),s.forEach((t=>{f.push(`vec2 ${t.variableNameWorldCoord} = (uMatrix * vec3(${t.variableNameAxisCoord}, 1.0)).xy`)}));else if("matrix4"===r)e.push(KA("uniform mat4 uMatrix")),s.forEach((t=>{f.push(`vec4 ${t.variableNameWorldCoord} = uMatrix * ${t.attributeNameAxisCoord}`)}));else if("logarithmic"===r[0]){e.push(KA(`uniform ${h} uScaleStart`,`uniform ${h} uScaleStartLog`,`uniform ${h} uScaleInterval`,`uniform ${h} uScaleIntervalLog`,`uniform ${h} uViewportStart`,`uniform ${h} uViewportSize`));const t=i?["x","y","z"]:["x","y"],n=[];t.forEach((t=>{const i=r[1][t];if(void 0!==i){const t=i.base;if("e"===t)return;const s=`float cLog${t} = 1.0 / log(${Ws(t).toFixed(1)})`;n.includes(s)||n.push(s)}})),e.push(KA(...n)),s.forEach(((i,s)=>{const e=`${s}`,n=[];t.forEach((t=>{const s=t.toUpperCase(),h=r[1][t];if(void 0===h)f.push(`float posPercent${s}${e} = (${i.variableNameAxisCoord}.${t} - uScaleStart.${t}) / uScaleInterval.${t}`);else{const r=h.base,n="e"===r;f.push(`float posLog${s}${e} = log(${i.variableNameAxisCoord}.${t})${n?"":` * cLog${r}`}`,`float posPercent${s}${e} = (posLog${s}${e} - uScaleStartLog.${t}) / uScaleIntervalLog.${t}`)}n.push(`posPercent${s}${e}`)})),f.push(`${h} ${i.variableNameWorldCoord} = uViewportStart + ${h}(${n.join(", ")}) * uViewportSize`)}))}if(a&&"px"===a.sizeUnit){e.push(KA("uniform vec2 uRatioPxClip"));let t="vec2(0.0, 0.0)";a.useAlignment&&(e.push(KA("uniform vec2 uOffsetAlignment")),t="uOffsetAlignment");const i=("attribute"===a.dataType?"a":"u")+"OffsetPixels",r=!0===a.symmetric?"float":h;e.push(KA(`${a.dataType} ${r} ${i}`));const n=a.halved?" * 0.5":"",o=`(${a.rotation?"rotatedGeo":"aInstanceGeo"} + ${t}) * ${i}${n} * uRatioPxClip`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${o}`)}))}if(a&&"scale"===a.sizeUnit){e.push(KA("uniform vec2 uRatioPxClip")),e.push(KA("uniform vec2 uSizePixels"));let t="vec2(0.0, 0.0)";a.useAlignment&&(e.push(KA("uniform vec2 uOffsetAlignment")),t="uOffsetAlignment");const i=("uniform"===a.dataType?"u":"a")+"OffsetScale";e.push(KA(`${a.dataType} float ${i}`));const h=`(${a.rotation?"rotatedGeo":"aInstanceGeo"} + ${t}) * ${i} * uSizePixels * uRatioPxClip`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${h}`)}))}if(a&&"wu"===a.sizeUnit){const t=("attribute"===a.dataType?"a":"u")+"OffsetWU",r=!0===a.symmetric?"float":h;e.push(KA(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?"rotatedGeo":"aInstanceGeo",l="offsetGeometry";f.push(`${h} ${l} = ${t} * ${o}${n}`),i&&"gpu-calculate"===d&&f.push(`${h} normal = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l}`)}))}if(a&&"nwu"===a.sizeUnit){e.push(KA("uniform float uRatioNwuWu"));const t=("attribute"===a.dataType?"a":"u")+"OffsetNWU",r=!0===a.symmetric?"float":h;e.push(KA(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?"rotatedGeo":"aInstanceGeo",l="offsetGeometry";f.push(`${h} ${l} = ${t} * ${o}${n}`),i&&"gpu-calculate"===d&&f.push(`${h} normal = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l} * uRatioNwuWu`)}))}return t.snapToNearestPixel&&(e.push(KA("uniform vec2 uViewportSizePx")),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = 2.0 * floor(((${t.variableNameWorldCoord} + 1.0) * 0.5) * uViewportSizePx + 0.5) / uViewportSizePx - 1.0`)}))),e.push(ig("gl_Position =",...f)),e},yg=(t,i,s,e)=>{const h=[],r=t.axisWorldTranslation,n=i?"vec3":"vec2";if("linear"===r)h.push(sg(s,`${n} ${e} = ${s} * uScale + uDisp`));else if("linear-highPrecision"===r)h.push(sg(s,`${n} ${e} = ${s} * uScale + uDisp + uScaleStart_highpart + uScaleStart_lowpart`));else{if("matrix"===r)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("matrix4"===r)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("logarithmic"!==r[0])throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");{const t=[`${n} ${s}_percent = (${s} - uViewportStart) / uViewportSize`];(i?["x","y","z"]:["x","y"]).forEach((i=>{const e=i.toUpperCase(),h=r[1][i];if(void 0===h)t.push(`float pos${e}Back = ${s}_percent.${i} * uScaleInterval.${i} + uScaleStart.${i}`);else{const r=h.base,n="e"===r?"1.0":`cLog${r}`;t.push(`float pos${e}Back = pow(2.71828, (${s}_percent.${i} * uScaleIntervalLog.${i} + uScaleStartLog.${i}) / ${n})`)}})),t.push(`${n} ${e} = ${n}(posXBack, posYBack${i?", posZBack":""})`),h.push(sg(s,...t))}}return h},mg=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.yE)||void 0===i?void 0:i.vE})))(t)?[qA("attribute vec4 aColor"),qA("vColor = aColor"),KA("attribute vec4 aColorA"),KA("attribute vec4 aColorB"),eg("vColor = mix(aColorA, aColorB, aSegmentSide)")]:[],pg=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.yE)||void 0===i?void 0:i.SE})))(t)?[qA("attribute float aLookupValue"),qA("vLookupValue = aLookupValue"),KA("attribute float aLookupValueA"),KA("attribute float aLookupValueB"),eg("vLookupValue = mix(aLookupValueA, aLookupValueB, aSegmentSide)")]:[],vg={"2D":{idFeature:"2D",apply:t=>({idVertex:"2D",idFragment:"2D",defaultVertexShader:"2D",defaultFragmentShader:"FragmentShader"})},"2DCompose":{idFeature:"2DCompose",apply:t=>({idVertex:"2DCompose",idFragment:"2DCompose",defaultVertexShader:"2DMatrix",defaultFragmentShader:"Empty"})},"3D":{idFeature:"3D",yE:{mE:!0},apply:t=>({idVertex:"3D",idFragment:"3D",defaultVertexShader:"3D",defaultFragmentShader:"FragmentShader"})},PointSize:t=>({idFeature:"PointSize",apply:i=>{const s="uniform"===t?"u":"a";return{idVertex:`SizePrimitive:${dg(t)}`,idFragment:void 0,vertexShaderModifiers:[KA(`${t} float ${s}PointSize`,"uniform float uDevicePixelRatio"),eg(`gl_PointSize = ${s}PointSize * uDevicePixelRatio`)]}}}),Color:t=>{const i=t&&t.dataType,s=t&&t.maskTextureText,e=t&&t.maskTexture,h=t&&t.overrideOpacity;return{idFeature:"Color",yE:{pE:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,SE:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0,vE:"attribute"===t.dataType||void 0},apply:(r,n)=>{let o,a=`Color:${dg(t)}`;const l=[];let u="FragmentShader";const c=[];if("uniform"===i)c.push(KA("uniform vec4 uColor"),sg("colorFragment =","colorFragment = uColor"),...s?ag:[],...e?lg:[]);else if("attribute"===i)o="colorAttribute",l.push(hg("attribute vec4 aColor","varying vec4 vColor")),c.push(KA("varying vec4 vColor"),sg("colorFragment =","colorFragment = vColor"),...s?ag:[],...e?lg:[]);else if("texture"===i)o="colorTexCoord",l.push(hg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),c.push(KA("varying vec2 vTextureCoord"),KA("uniform sampler2D uColorTexture"),KA("uniform vec4 uColor"),sg("colorFragment =","colorFragment = texture2D(uColorTexture, vTextureCoord)","if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.) {\n                        colorFragment = uColor;\n                    }"),...s?ag:[],...e?lg:[]);else if("texture-coord-calc-gpu"===i)o="colorTexCoord",u="Empty",l.push(KA("attribute vec2 aTextureCoord"),KA("varying vec2 vTextureCoord"),eg("vTextureCoord = gl_Position.xy * 0.5 + 0.5")),c.push(KA("varying vec2 vTextureCoord"),KA("uniform sampler2D uColorTexture"),tg("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord)","gl_FragColor = colorFragment;"));else if(Array.isArray(i)&&"image"===i[0])o="colorTexCoord",l.push(hg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),i[1].fitMode===_n.Tile?c.push(KA("uniform sampler2D uColorTexture"),KA("varying vec2 vTextureCoord"),sg("colorFragment =","colorFragment = texture2D(uColorTexture, vTextureCoord);")):c.push(KA("uniform sampler2D uColorTexture"),KA("varying vec2 vTextureCoord"),KA("uniform vec4 uColor"),sg("colorFragment =","colorFragment = texture2D(uColorTexture, vTextureCoord);","if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.){\n                                colorFragment = uColor;\n                            }"));else if(Array.isArray(i)&&"lookup"===i[0]){const t=i[1];if("value"===t)o="lookup:value",l.push(hg("attribute float aLookupValue","varying float vLookupValue"));else{const i=`posAxis.${t}`;o=`lookup:${t}`,l.push(hg(i,"varying float vLookupValue"))}c.push(KA("varying float vLookupValue"),...og("vLookupValue",i[2]),...s?ag:[],...e?lg:[])}else if(Array.isArray(i)&&"gradient"===i[0]){const t=i[1],h=t.getColorStops();et(t)?(a=`rgradient${h.length},${e},${s}`,c.push(KA("uniform vec4 uBounds","uniform vec2 uCenter","uniform vec2 uDistance","uniform float uAspect"),KA(...Xt(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),ng.linearStep,sg("colorFragment =","vec2 uv = vec2((((gl_FragCoord.x)-uBounds.x)/(uBounds.z))*uAspect,((gl_FragCoord.y)-uBounds.y)/(uBounds.w))","float mixVal = distance(uv/uDistance, uCenter/uDistance)","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, mixVal))",...h.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, mixVal));`)),"colorFragment = color"),...s?ag:[],...e?lg:[])):nt(t)&&(a=`lgradient${h.length},${e},${s}`,c.push(KA("uniform vec4 uBounds","uniform vec2 uStartPoint","uniform vec2 uEndPoint"),KA(...Xt(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),ng.linearStep,sg("colorFragment =","vec2 uv = gl_FragCoord.xy - uBounds.xy","float magnitude = ((uv.x-uStartPoint.x) * (uEndPoint.x-uStartPoint.x) + (uv.y-uStartPoint.y) * (uEndPoint.y-uStartPoint.y)) / (pow(uEndPoint.x - uStartPoint.x, 2.0) + pow(uEndPoint.y-uStartPoint.y,2.0))","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, magnitude))",...h.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, magnitude))`)),"colorFragment = color"),...s?ag:[],...e?lg:[]))}if(s||e){const t="maskTexture";o=o?`${o} ${t}`:`Color:${t}`,l.push(hg("attribute vec2 aMaskTextureCoord","varying vec2 vMaskTextureCoord"))}return h&&c.push(KA("uniform float uOpacity"),sg("colorFragment =","colorFragment.a *= uOpacity")),{vertexShaderModifiers:l,fragmentShader:u,fragmentShaderModifiers:c,idVertex:o,idFragment:a}}}},ColorShaded3D:t=>{const{dataType:i,shadingStyle:s,wireframe:e}=t;let h;const r=`ColorShaded3D:${dg(t)}`;return{idFeature:"ColorShaded3D",yE:{pE:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,SE:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0},apply:(t,n)=>{const o=[],a=[];if(o.push("phong"===s&&hg("normal","varying vec3 vNormal"),hg("posWorld","varying vec3 vPosWorld")),"uniform"===i)a.push(KA("uniform vec4 uColorDiffuse"),sg("colorFragment =","colorFragment = uColorDiffuse"));else if("attribute"===i)h="per-vertex-color",o.push(hg("attribute vec4 aColor","varying vec4 vColor")),a.push(KA("varying vec4 vColor"),sg("colorFragment =","colorFragment = vColor"));else if(Array.isArray(i)){const t=i[1];if("value"===t)h="lookup:value",o.push(hg("attribute float aLookupValue","varying float vLookupValue"));else{const i=`posAxis.${t}`;h=`lookup:${t}`,o.push(hg(i,"varying float vLookupValue"))}a.push(KA("varying float vLookupValue"),...og("vLookupValue",i[2]))}if(e){const t="wireframe";h=h?`${h},${t}`:t,o.push(hg("attribute vec3 aTriangleBary","varying vec3 vTriangleBary")),a.push(KA("varying vec3 vTriangleBary"),KA("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),ng.computeScreenSpaceWireframe,sg("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)","colorFragment = mix(colorFragment, uWireframeColor, edge)"))}return"phong"===s&&a.push(...ug),{idVertex:h,idFragment:r,vertexShaderModifiers:o,fragmentShader:"FragmentShader",fragmentShaderModifiers:a}}}},VertexLocation:t=>({idFeature:"VertexLocation",apply:i=>{const s=[],e=fg(i),h=t.coordType?t.coordType:e?"vec3":"vec2";return"linear-highPrecision"!==t.axisWorldTranslation?!0!==t.splitPosAttribute?s.push(KA(`attribute ${h} aPos`)):s.push(KA("attribute float aPosX"),KA("attribute float aPosY"),e&&KA("attribute float aPosZ")):!0===t.splitPosAttribute?s.push(KA("attribute float aPos_highpartX"),KA("attribute float aPos_lowpartX"),KA("attribute float aPos_highpartY"),KA("attribute float aPos_lowpartY")):s.push(KA(`attribute ${h} aPos_highpart`),KA(`attribute ${h} aPos_lowpart`)),s.push(...gg(t,e,{attributeNameAxisCoord:"aPos",variableNameAxisCoord:"vec4"===t.coordType?void 0:"posAxis",variableNameWorldCoord:"posWorld"})),{idVertex:`VertexLocation:${dg(t)}`,idFragment:void 0,vertexShaderModifiers:s}}}),Model3D:t=>({idFeature:"Model3D",apply:i=>{const s=[];return s.push(KA("attribute vec3 aGeoPos"),KA("uniform mat4 uModelRotation"),KA("uniform mat4 uModelRotationNormals"),KA("uniform vec3 uLocationAxis"),KA("uniform vec3 uModelAlignment"),KA("uniform vec3 uModelScale"),KA("uniform vec3 uModelSize"),...gg({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,{attributeNameAxisCoord:"uLocationAxis",variableNameAxisCoord:"locationAxis",variableNameWorldCoord:"locationWorld"}),ig("gl_Position =","vec3 posWorld = locationWorld + ((uModelRotation * vec4(aGeoPos, 1.0)).xyz  - (uModelAlignment + 1.0) * uModelSize/2.0) * uModelScale;"),"attribute"===t.normalSource&&sg("vec3 normal ="," normal = (uModelRotationNormals * vec4(normal, 1.0)).xyz;"),...Ag(i)?yg({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,"posWorld","posAxis"):[]),{vertexShaderModifiers:s,idVertex:`Model3D:${dg(t)}`,idFragment:void 0}}}),LineInstanced2D:t=>({idFeature:"LineInstanced2D",apply:i=>({idVertex:`LineInstanced2D:${dg(t)}`,idFragment:void 0,vertexShaderModifiers:[KA("uniform float uThicknessPixels"),KA("uniform vec2 uRatioPxClip"),..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[KA("attribute vec2 aLocationA"),KA("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[KA("attribute vec2 aLocationA_highpart"),KA("attribute vec2 aLocationB_highpart"),KA("attribute vec2 aLocationA_lowpart"),KA("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[KA("attribute float aLocationAX"),KA("attribute float aLocationAY"),KA("attribute float aLocationBX"),KA("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[KA("attribute float aLocationA_highpartX"),KA("attribute float aLocationA_highpartY"),KA("attribute float aLocationB_highpartX"),KA("attribute float aLocationB_highpartY"),KA("attribute float aLocationA_lowpartX"),KA("attribute float aLocationA_lowpartY"),KA("attribute float aLocationB_lowpartX"),KA("attribute float aLocationB_lowpartY")]:[],KA("attribute vec2 aSegmentPosition"),KA("attribute float aSegmentSide"),...gg(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),t.ensureMinimumSegmentLength&&KA("uniform vec2 uMinSegmentPixelVector"),sg("worldB = ",t.ensureMinimumSegmentLength&&"float segmentLengthPixels = sqrt(pow(worldB.x - worldA.x, 2.0) + pow(worldB.y - worldA.y, 2.0)) / length(uRatioPxClip)",t.ensureMinimumSegmentLength&&"if (segmentLengthPixels == 0.0 || segmentLengthPixels < length(uMinSegmentPixelVector)) {\n                        worldB = worldA + uMinSegmentPixelVector * uRatioPxClip;\n                    }","vec2 directionBasis = worldB - worldA","vec2 directionBasisNorm = normalize(directionBasis)","vec2 perpendBasisNorm = vec2(-directionBasisNorm.y, directionBasisNorm.x)","vec2 offset = mix(worldA, worldB, aSegmentSide)","vec2 thicknessDirection = aSegmentPosition.x * directionBasisNorm + aSegmentPosition.y * perpendBasisNorm","vec2 posWorld = offset + thicknessDirection * uThicknessPixels * uRatioPxClip"),...pg(i),...mg(i),...Ag(i)?yg(t,!1,"posWorld","posAxis"):[]]})}),Area2D:t=>({idFeature:"Area2D",apply:i=>({idVertex:`Area2D:${dg(t)}`,idFragment:void 0,vertexShaderModifiers:[..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[KA("attribute vec2 aLocationA"),KA("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[KA("attribute vec2 aLocationA_highpart"),KA("attribute vec2 aLocationB_highpart"),KA("attribute vec2 aLocationA_lowpart"),KA("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[KA("attribute float aLocationAX"),KA("attribute float aLocationAY"),KA("attribute float aLocationBX"),KA("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[KA("attribute float aLocationA_highpartX"),KA("attribute float aLocationA_highpartY"),KA("attribute float aLocationB_highpartX"),KA("attribute float aLocationB_highpartY"),KA("attribute float aLocationA_lowpartX"),KA("attribute float aLocationA_lowpartY"),KA("attribute float aLocationB_lowpartX"),KA("attribute float aLocationB_lowpartY")]:[],KA("attribute float aCurveOrBaseline"),KA("attribute float aSegmentSide"),...gg(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),sg("worldB = ","vec2 posCoord = mix(worldA, worldB, aSegmentSide)","float baseline = min(posCoord.y, -1.0)","vec2 posWorld = vec2(posCoord.x, mix(posCoord.y, baseline, aCurveOrBaseline))"),...pg(i),...mg(i),...Ag(i)?yg(t,!1,"posWorld","posAxis"):[]]})}),LineInstanced3D:t=>({idFeature:"LineInstanced3D",apply:i=>({idVertex:`LineInstanced3D:${dg(t)}`,idFragment:void 0,defaultFragmentShader:"FragmentShader",vertexShaderModifiers:[KA("uniform float uOffsetWU"),KA("attribute vec3 aLocationA"),KA("attribute vec3 aLocationB"),KA("attribute float aSegmentPosition"),KA("attribute float aPerpendHorizontal"),KA("attribute float aPerpendVertical"),...gg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},fg(i),{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),sg("worldB = ","vec3 directionBasis = worldB - worldA","vec3 directionBasisNorm = normalize(directionBasis)","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(directionBasis.y), 0.9 ) ))","vec3 horizontalBasis = normalize( cross( notParallel, directionBasisNorm ) )","vec3 verticalBasis = normalize( cross( horizontalBasis, directionBasisNorm ) )","vec3 normal = aPerpendHorizontal * horizontalBasis + aPerpendVertical * verticalBasis","vec3 posWorld = worldA + aSegmentPosition * directionBasis + normal * uOffsetWU * 0.5"),...Ag(i)?yg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,"posWorld","posAxis"):[]]})}),RoundedEdges3D:{idFeature:"RoundedEdges3D",apply:t=>({idVertex:"RoundedEdges3D",idFragment:void 0,vertexShaderModifiers:[KA("attribute vec3 aEdge"),KA("uniform float uEdgeRoundness"),sg("posWorld =","vec3 boxSizeWorld = abs( aOffsetAxis / uScale )","float boxMinDimensionWorldXZ = min( boxSizeWorld.x, boxSizeWorld.z )","vec3 edgeRoundAmount = uEdgeRoundness * vec3( boxMinDimensionWorldXZ, min( boxMinDimensionWorldXZ, boxSizeWorld.y ), boxMinDimensionWorldXZ )","posWorld = posWorld + aEdge * edgeRoundAmount")]})},ColorGrid2D:t=>{const i=t.flipXY,s=t.intensityTextureType,e=t.littleEndian;return{idFeature:"ColorGrid2D",apply:(h,r)=>({idVertex:void 0,idFragment:`ColorGrid2D:${dg(t)}`,fragmentShader:"FragmentShader",fragmentShaderModifiers:[KA("uniform vec4 uTileBounds","uniform vec2 uTileDimensions","uniform sampler2D uTileIntensityValues"),"ubyte"===s&&ng.decodeUbyteRGBAEncodedFloat,"bilinear"===t.interpolation?tg("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions - 1.0)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensions - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensions - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${i?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${i?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${i?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${i?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===s?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${e})`),"float intensity01 = "+("float"===s?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${e})`),"float intensity10 = "+("float"===s?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${e})`),"float intensity11 = "+("float"===s?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${e})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${i?"lerpFactors.y":"lerpFactors.x"})`):tg("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellIndexNormalized = cellIndex / uTileDimensions",`vec4 sample0 = texture2D(uTileIntensityValues, ${i?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = "+("float"===s?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${e})`)),...og("intensityP",t.lut)]})}},DrawToNormalTexture:t=>{const i=t.flipXZ,s=t.vertexIdSource,e=t.normalTextureType,h=t.heightmapTextureType,r=t.littleEndian;return{idFeature:"DrawToNormalTexture",apply:(n,o)=>{const a=[],l=[];return a.push(KA("uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB","attribute"===s&&"attribute float aVertexID"),void 0!==s&&ng.roundUnsigned,ng.modulus,ng.texelFetchWithFallback[o],"ubyte"===h&&ng.decodeUbyteRGBAEncodedFloat,tg(void 0===s?"int iVertex = gl_VertexID":"int iVertex = int(roundUnsigned(aVertexID))","int iSecondary = modulus(iVertex, (uTileDimensions.y - 1))","int iPrimary = iVertex / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(uTileDimensions) - 1.0","vec2 halfTexelWorld = 2.0 / (uTileDimensionsMinus1 * 2.0)","vec2 posWorld = vec2(-1.0 + halfTexelWorld.y + iCell.y * 2.0 * halfTexelWorld.y, -1.0 + halfTexelWorld.x + iCell.x * 2.0 * halfTexelWorld.x)","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec3 posAxis0 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`} ,\n                            uTileStartLocationAxisXZ.y + iCell.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell1 = iCell + vec2(1.0, 0.0)",`vec3 posAxis1 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell1.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell1.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell2 = iCell + vec2(0.0, 1.0)",`vec3 posAxis2 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell2.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell2.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell3 = iCell + vec2(1.0, 1.0)",`vec3 posAxis3 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell3.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell3.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec3 normal = normalize(cross(posAxis2 - posAxis0, posAxis1 - posAxis0) + cross(posAxis1 - posAxis3, posAxis2 - posAxis3))","uint"===e?"vNormalRGB = uvec3(((normal / 2.0) + 0.5) * float(-1u))":"vNormalRGB = (normal / 2.0) + 0.5","gl_PointSize = 1.0")),l.push(KA("uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB"),tg("uint"===e?"gl_FragColor = uvec4(vNormalRGB, -1u)":"gl_FragColor = vec4(vNormalRGB, 1.0)")),{idVertex:`DrawToNormalTexture:${dg(t)}`,idFragment:`DrawToNormalTexture:${dg(t)}`,vertexShaderModifiers:a,fragmentShaderModifiers:l,fragmentShader:"Empty",hints:["uint"===e&&{type:"fragOutput",fragOutput:"uvec4"}]}}}},SurfaceGrid:t=>{const i=t.fillColor,s=t.interpolation,e=t.flipXZ,h=t.shadingStyle,r=t.wireframe,n=t.normalTextureType,o=t.heightmapTextureType,a=t.intensityTextureType,l=t.littleEndian;return{idFeature:"SurfaceGrid",yE:{bE:!0},apply:(u,c)=>{const d=[],f=[];return d.push(KA("attribute vec2 aGeoCellOffset","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture"),ng.modulus,ng.texelFetchWithFallback[c],"ubyte"===o&&ng.decodeUbyteRGBAEncodedFloat,tg("int iSecondary = modulus(iInstance + uBaseInstance, (uTileDimensions.y - 1))","int iPrimary = (iInstance + uBaseInstance) / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 iCellVertex = iCell + aGeoCellOffset","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","vec2 ySampleCoordinate = vec2(iCellVertex.y, iCellVertex.x) / vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x)","float y = "+("float"===o?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${l})`),"vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)","vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * "+(e?"vec2(iCellVertex.y, iCellVertex.x)":"iCellVertex"),"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)")),d.push(...gg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:"posAxis",variableNameWorldCoord:"posWorld"})),"phong"===h&&d.push(hg("posWorld","varying vec3 vPosWorld"),..."uint"===n?[ng.texelFetchUnsignedWithFallback[c],eg("vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)")]:[eg("vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))")],eg("vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vNormal = normalize(normalAxis * uScale)"),KA("varying vec3 vNormal",..."uint"===n?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"])),f.push(KA("varying vec3 vTriangleBary")),"uniform"===i?f.push(KA("uniform vec4 uColorDiffuse"),sg("colorFragment =","colorFragment = uColorDiffuse")):Array.isArray(i)&&"lookup"===i[0]&&("value"===i[1]?(d.push(hg("posAxis.xz","varying vec2 vVertexLocationAxisXZ")),f.push(KA("uniform vec4 uTileBoundsAxisXZ","uniform vec2 uTileDimensionsXZ","varying vec2 vVertexLocationAxisXZ","uniform sampler2D uTileIntensityValues","uniform mat4 uViewProjectionMatrix","uniform vec3 uScale","uniform vec3 uDisp"),"ubyte"===a&&ng.decodeUbyteRGBAEncodedFloat,"bilinear"===s?tg("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = (vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensionsXZ - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensionsXZ - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${e?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${e?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${e?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${e?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===a?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${l})`),"float intensity01 = "+("float"===a?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${l})`),"float intensity10 = "+("float"===a?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${l})`),"float intensity11 = "+("float"===a?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${l})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${e?"lerpFactors.y":"lerpFactors.x"})`):tg("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = floor((vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ)","vec2 cellIndexNormalized = cellIndex / (uTileDimensionsXZ - 1.0)",`vec4 sample0 = texture2D(uTileIntensityValues, ${e?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = sample0.x"),...og("intensityP",i[2]))):(d.push(hg(`posAxis.${i[1]}`,"varying float vLookupValue")),f.push(KA("varying float vLookupValue"),...og("vLookupValue",i[2])))),"phong"===h&&f.push(...ug),r&&(d.push(KA("attribute vec3 aTriangleBary"),hg("aTriangleBary","varying vec3 vTriangleBary")),f.push(KA("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),ng.computeScreenSpaceWireframe,sg("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",i?"if (edge > 0.0) {\n                                    colorFragment = vec4(mix(colorFragment.rgb, uWireframeColor.rgb, edge * uWireframeColor.a), max(colorFragment.a, uWireframeColor.a));\n                                }":"if (edge > 0.0) {\n                                    colorFragment = uWireframeColor;\n                                  } else {\n                                      discard;\n                                  }"))),{idVertex:`SurfaceGrid:${dg(t)}`,idFragment:`SurfaceGrid:${dg(t)}`,vertexShaderModifiers:d,fragmentShader:"FragmentShader",fragmentShaderModifiers:f}}}},DebugSurfaceGridNormals:t=>({idFeature:"DebugSurfaceGridNormals",apply:(i,s)=>({idVertex:`DebugSurfaceGridNormals:${dg(t)}`,idFragment:`DebugSurfaceGridNormals:${dg(t)}`,vertexShaderModifiers:[KA("attribute float aNormalArrow","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===t.instanceIdSource&&"attribute float aInstanceID",..."uint"===t.normalTextureType?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"]),ng.roundUnsigned,ng.modulus,ng.texelFetchWithFallback[s],"ubyte"===t.heightmapTextureType&&ng.decodeUbyteRGBAEncodedFloat,tg(void 0===t.instanceIdSource?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","float y00 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y01 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y10 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y11 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y = (y00 + y01 + y10 + y11) / 4.0","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * (0.5 + ${t.flipXZ?"vec2(iCell.y, iCell.x)":"iCell"})`,"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)",..."uint"===t.normalTextureType?["vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)"]:["vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))"],"vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vec3 normalWorld = normalize(normalAxis * uScale)"),..."uint"===t.normalTextureType?[ng.texelFetchUnsignedWithFallback[s]]:[],...gg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:"posAxis",variableNameWorldCoord:"posWorld"}),sg("posWorld =","vec3 dirArrow = normalWorld","vec3 posArrowStart = posWorld","vec3 posArrowEnd = posWorld + dirArrow * 0.010","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(dirArrow.y), 0.9 ) ))","vec3 dirArrowLeft = normalize(-dirArrow + 0.50 * normalize(cross(dirArrow, notParallel)))","vec3 dirArrowRight = normalize(-dirArrow + 0.50 * normalize(cross(notParallel, dirArrow)))","vec3 posArrowLeft = posArrowEnd + dirArrowLeft * 0.0025","vec3 posArrowRight = posArrowEnd + dirArrowRight * 0.0025","if (aNormalArrow == 0.0) {\n                        posWorld = posArrowStart;\n                    } else if (aNormalArrow == 1.0) {\n                        posWorld = posArrowEnd;\n                    } else if (aNormalArrow == 2.0) {\n                        posWorld = posArrowLeft;\n                    } else if (aNormalArrow == 3.0) {\n                        posWorld = posArrowRight;\n                    }")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[eg("gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0)")]})}),OffsetTowardsCamera:()=>({idFeature:"OffsetTowardsCamera",apply:t=>({idVertex:"OffsetTowardsCamera",idFragment:void 0,vertexShaderModifiers:[KA("uniform vec3 uCameraLoc"),sg("posWorld =","posWorld = posWorld + normalize(uCameraLoc) * 0.0025")]})}),AliasedEdge:{idFeature:"AliasedEdge",apply:t=>({idVertex:"AliasedEdge",idFragment:"AliasedEdge",vertexShaderModifiers:[KA("attribute float aSegmentInside"),KA("varying float vSegmentInside"),KA("varying float vSegmentSide"),sg("gl_Position = ","\n                vSegmentInside = aSegmentInside;\n                vSegmentSide = aSegmentSide;\n                ")],fragmentShaderModifiers:[rg("#extension GL_OES_standard_derivatives : enable"),KA("uniform float uAALimit"),KA("varying float vSegmentInside"),KA("varying float vSegmentSide"),sg("antiAliasFactor = ","\n                float dist = (uAALimit - vSegmentInside);\n                vec2 ddist = vec2(dFdx(dist), dFdy(dist));\n                float pixelDist = dist / length(ddist);\n                // additional blurring\n                pixelDist *= 0.5;\n\n                float aa = clamp(0.5 - pixelDist, 0.0, 1.0);\n                if((vSegmentSide <= 0.0 || vSegmentSide >= 1.0) && aa <=0.99){\n                    aa *= 0.5;\n                }\n                antiAliasFactor = aa;\n                ")]})},Glow1D:t=>({idFeature:"Glow1D",apply:()=>{const i=Math.round(t.spreadPx),s=Math.round(t.blurPx),e=i+s,h=t.firstPass,r=[];for(let t=-e;t<=e;t+=1){const i=Math.abs(t);r.push(h?{x:t.toFixed(1),y:"0.0",distPx:i.toFixed(1)}:{x:"0.0",y:t.toFixed(1),distPx:i.toFixed(1)})}return{idVertex:`Glow1D:${dg(t)}`,idFragment:`Glow1D:${dg(t)}`,vertexShaderModifiers:[hg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[KA("uniform sampler2D uTexture"),KA("varying vec2 vTextureCoord"),KA("uniform vec2 uTextureSize"),h&&KA("uniform vec2 uOffsetPx"),!h&&KA("uniform sampler2D uTextureFirstGlowPass"),!h&&KA("uniform vec4 uGlowColor"),sg("antiAliasFactor =","vec2 oneTexel = vec2(1.0, 1.0) / uTextureSize",...h?[]:["float inverseIntensity =\n                        0.25 * texture2D(uTexture, vTextureCoord).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, 0.0)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, 0.0)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, -oneTexel.y)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, -oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, -oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, oneTexel.y)).a","antiAliasFactor *= 1.0 - (inverseIntensity * inverseIntensity)","if (antiAliasFactor <= 0.0) { discard; }"],"float distancePx = 255.0","vec2 sample_tx = vec2(0.0)",...h?["vec2 texCoordOffset = vTextureCoord - uOffsetPx * oneTexel",...r.map(((t,i)=>[`sample_tx = texCoordOffset + oneTexel * vec2(${t.x}, ${t.y})`,`if (distancePx > ${t.distPx} && sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0 && texture2D(uTexture, sample_tx).a > 0.0) { distancePx = ${t.distPx}; }`])).flat(),"colorFragment = vec4(distancePx / 255.0, 0.0, 0.0, 1.0)"]:["vec4 sample_horizontal = vec4(0.0)","float horizontal_dist = 255.0","float min_horizontal_dist = 255.0",...r.map(((t,i)=>[`sample_tx = vTextureCoord + oneTexel * vec2(${t.x}, ${t.y})`,"if (sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0) {\n                                            sample_horizontal = texture2D(uTextureFirstGlowPass, sample_tx);\n                                            horizontal_dist = sample_horizontal.r * 255.0;\n                                          }","if (sample_horizontal.a < 0.9) { horizontal_dist = 255.0; }","min_horizontal_dist = min(min_horizontal_dist, horizontal_dist)",`distancePx = min(distancePx, pow(horizontal_dist * horizontal_dist + ${t.y} * ${t.y}, 0.5))`])).flat(),`if (distancePx > ${e.toFixed(1)}) { discard; }`,"vec4 pixelGlowColor = vec4(0.0, 0.0, 0.0, 0.0)",`if (distancePx > ${i.toFixed(1)}) {\n                                        float lerpAmount = (distancePx - ${i.toFixed(1)}) / ${(s+1).toFixed(1)};\n                                        pixelGlowColor = mix(uGlowColor, vec4(uGlowColor.rgb, 0.0), 1.0 - (1.0 - lerpAmount) * (1.0 - lerpAmount));\n                                    } else {\n                                        pixelGlowColor = uGlowColor;\n                                    }`,"colorFragment = pixelGlowColor"])]}}}),MousePicking:t=>{const i=!!(null==t?void 0:t.customMousePickingIdInput),s=!i&&!!(null==t?void 0:t.useVertexId),e=!i&&!!(null==t?void 0:t.useAttribute),h=!i&&!s&&!e;return{idFeature:"MousePicking",yE:{bE:h,xE:s},apply:(r,n)=>{const o="webgl2"===n?"flat":"",a="webgl2"===n?"int":"float";return{idVertex:`MousePicking:${dg(t)}`,idFragment:`MousePicking:${dg(t)}`,vertexShaderModifiers:[...h?[KA(`${o} varying ${a} vPickingIdOffset`),eg(`vPickingIdOffset = ${a}(iInstance)`)]:[],...s?[KA(`${o} varying ${a} vPickingIdOffset`),eg(`vPickingIdOffset = ${a}(iVertex)`)]:[],...e?[KA("attribute float aPickingIdOffset",`${o} varying ${a} vPickingIdOffset`),eg(`vPickingIdOffset = ${a}(aPickingIdOffset)`)]:[]],fragmentShaderModifiers:[KA("uniform int uFirstId"),...i?[]:[KA(`${o} varying ${a} vPickingIdOffset`),tg("int mousePickingIdOffset = "+("int"===a?"vPickingIdOffset":"int(floor(vPickingIdOffset + 0.5))"))],sg("colorFragment =","int remainder = mousePickingIdOffset + uFirstId","int r = remainder / 16777216","remainder -= r * 16777216","int g = remainder / 65536","remainder -= g * 65536","int b = remainder / 256","remainder -= b * 256","int a = remainder","colorFragment = vec4(float(r) / 255.0, float(g) / 255.0, float(b) / 255.0, float(a) / 255.0)"),t=>t.replace("gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor)","if (antiAliasFactor <= 0.0) { discard; }\ngl_FragColor = fragColorEnd").replace("if (fragColorEnd.a <= 0.0) { discard; }","")]}}}},AttributeHighlight:{idFeature:"AttributeHighlight",apply:t=>({idVertex:"AttributeHighlight",idFragment:"AttributeHighlight",vertexShaderModifiers:[hg("attribute float aIsHighlighted","varying float vIsHighlighted")],fragmentShaderModifiers:[t=>t.replace("uniform float uIsHighlighted","varying float vIsHighlighted").replace("uIsHighlighted","vIsHighlighted")]})},StippleTexture:{idFeature:"StippleTexture",apply:(t,i)=>({idVertex:"StippleTexture",idFragment:"StippleTexture",vertexShaderModifiers:[KA("attribute vec2 aLengthSoFar"),KA("varying float vLengthSoFar"),KA("uniform vec2 uStippleCount"),eg("\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[KA("uniform sampler2D uStippleTexture"),KA("uniform float uStippleScale"),KA("varying float vLengthSoFar"),"webgl1"===i&&KA("uniform float uStippleTextureWidthLimiter"),sg("antiAliasFactor = ",`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    antiAliasFactor *= stippleAA;\n                    if (antiAliasFactor <= 0.0) { discard; }`)]})},StippleTextureInstanced:{idFeature:"StippleTextureInstanced",apply:(t,i)=>({idVertex:"StippleTextureInstanced",idFragment:"StippleTextureInstanced",vertexShaderModifiers:[KA("attribute vec2 aLengthSoFarA"),KA("attribute vec2 aLengthSoFarB"),KA("varying float vLengthSoFar"),KA("uniform vec2 uStippleCount"),eg("\n                vec2 aLengthSoFar = mix(aLengthSoFarA, aLengthSoFarB, aSegmentSide);\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[KA("uniform sampler2D uStippleTexture"),KA("uniform float uStippleScale"),KA("varying float vLengthSoFar"),"webgl1"===i&&KA("uniform float uStippleTextureWidthLimiter"),sg("antiAliasFactor = ",`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    antiAliasFactor *= stippleAA;\n                    if (antiAliasFactor <= 0.0) { discard; }`)]})},PolarHeatmap:t=>({idFeature:"PolarHeatmap",apply:(i,s)=>{const e="dataType"in t,h="interpolation"in t?t:void 0,r=h?h.flipXY:void 0,n="bilinear"===(null==h?void 0:h.interpolation),o=null==h?void 0:h.intensityTextureType,a=null==h?void 0:h.littleEndian;return{idVertex:void 0,idFragment:`PolarHeatmap:${dg(t)}`,vertexShaderModifiers:[],fragmentShaderModifiers:[KA("uniform vec2 uViewportSize","uniform vec2 uScale","uniform vec2 uDisp","uniform float uSectors","uniform float uAnnuli","uniform float uAmplitudeStart","uniform float uAmplitudeStep","uniform float uAmplitudeAxisStart","uniform float uAmplitudeAxisEnd","uniform float uAngleOffset","uniform float uAngleDirection",h&&"uniform sampler2D uTileIntensityValues",e&&"uniform vec4 uColor"),ng.texelFetchWithFallback[s],"ubyte"===o&&ng.decodeUbyteRGBAEncodedFloat,tg("vec2 posWorld = (2.0 * gl_FragCoord.xy / uViewportSize) - 1.0","vec2 posAxis = posWorld * uScale + uDisp","float amplitudeAxisInterval = uAmplitudeAxisEnd - uAmplitudeAxisStart","float amplitude = uAmplitudeAxisStart + sign(amplitudeAxisInterval) * sqrt(posAxis.x * posAxis.x + posAxis.y * posAxis.y)","float iAnnulus = (amplitude - uAmplitudeStart) / uAmplitudeStep"),h&&sg("iAnnulus","float angRad = atan(posAxis.y, posAxis.x) * uAngleDirection + uAngleOffset","if (angRad < 0.0) { angRad = angRad + 2.0 * 3.1415926538; }","if (angRad > 2.0 * 3.1415926538) { angRad = angRad - 2.0 * 3.1415926538; }","float iSector = uSectors * angRad / (2.0 * 3.1415926538)","vec2 cellIndex = vec2(iSector, iAnnulus)","ivec2 cellStart = ivec2(floor(cellIndex))","ivec2 cellEnd = cellStart + ivec2(1)","if (cellEnd.x >= int(uSectors)) { cellEnd = ivec2(0, cellEnd.y); }",r&&"cellIndex = vec2(cellIndex.y, cellIndex.x)",r&&"cellStart = ivec2(cellStart.y, cellStart.x)",r&&"cellEnd = ivec2(cellEnd.y, cellEnd.x)"),e&&sg("colorFragment =","colorFragment = uColor"),h&&sg("cellEnd","vec2 tileDimensions = "+(r?"vec2(uAnnuli, uSectors)":"vec2(uSectors, uAnnuli)"),n&&"vec4 sample00 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",n&&"vec4 sample01 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellStart.x, cellEnd.y), tileDimensions)",n&&"vec4 sample10 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellEnd.x, cellStart.y), tileDimensions)",n&&"vec4 sample11 = texelFetchWithFallback(uTileIntensityValues, cellEnd, tileDimensions)",n&&"float intensity00 = "+("float"===o?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${a})`),n&&"float intensity01 = "+("float"===o?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${a})`),n&&"float intensity10 = "+("float"===o?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${a})`),n&&"float intensity11 = "+("float"===o?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${a})`),n&&"vec2 lerpFactors = cellIndex - vec2(cellStart)",n&&"float intensityR1 = mix(intensity00, intensity10, lerpFactors.x)",n&&"float intensityR2 = mix(intensity01, intensity11, lerpFactors.x)",n&&"float intensityP = mix(intensityR1, intensityR2,  lerpFactors.y)",!n&&"vec4 sample0 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",!n&&"float intensityP = "+("float"===o?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${a})`)),...h?og("intensityP",h.lut):[]]}}})},Sg={"2D":"\nvoid main(void) {\n    gl_Position = vec4(posWorld, 0.0, 1.0 );\n}\n","2DMatrix":"\nvoid main(void) {\n    gl_Position = posWorld;\n}\n","3D":"\nuniform mat4 uViewProjectionMatrix;\nvoid main(void) {\n    gl_Position = uViewProjectionMatrix * vec4(posWorld, 1.0);\n}\n"},bg={FragmentShader:"\nuniform float uIsHighlighted;\nuniform vec4 uHighlightColorOffset;\nuniform float uRenderEffectMask;\nvoid main(void) {\n    vec4 colorFragment = vec4(0.0, 0.0, 0.0, 0.0);\n    float antiAliasFactor = 1.0;\n    vec4 fragColorEnd = colorFragment;\n    if (fragColorEnd.a <= 0.0) { discard; }\n    fragColorEnd = clamp(fragColorEnd + uIsHighlighted * uHighlightColorOffset, vec4(0.0), vec4(1.0));\n    fragColorEnd = mix(fragColorEnd, vec4(1.0), uRenderEffectMask * fragColorEnd.a * 1000.0);\n    gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor);\n}\n",Empty:"\nvoid main(void) {\n}\n"};class xg{constructor(t,i,s,e,h){if(this.id=t,this.shader=s,this.gl=e,this.info=h,!i||!s)throw new Lt(`Could not find ${this.ME()} ${this._E()} shader source code.`);this.gl.shaderSource(s,i),this.gl.compileShader(s)}get src(){return""}ME(){return this.id.toString()}_E(){return this.gl.getShaderParameter(this.shader,this.gl.SHADER_TYPE)===this.gl.FRAGMENT_SHADER?"fragment":"vertex"}}class Mg extends xg{constructor(t,i,s,e){super(t,i,s.createShader(s.VERTEX_SHADER),s,e)}}class _g extends xg{constructor(t,i,s,e){super(t,i,s.createShader(s.FRAGMENT_SHADER),s,e)}}class wg{constructor(t,i,s,e){this.wE=new Map,this.CE=new Map,this.kE=s,this.TE=s.createProgram(),this.FE=`${t.ME()} vertex`,this.IE=`${i.ME()} fragment`,s.attachShader(this.TE,t.shader),s.attachShader(this.TE,i.shader),s.bindAttribLocation(this.TE,0,"aPos"),s.linkProgram(this.TE),s.deleteShader(t.shader),s.deleteShader(i.shader),this.allAttributeNames=t.info.allAttributeNames,this.allUniformNames=Array.from(new Set(t.info.allUniformNames.concat(i.info.allUniformNames)).values()),this.vertexSharedRemovedVariables=t.info.removedVariableNames,this.fragmentSharedRemovedVariables=i.info.removedVariableNames}get vertexShaderSrc(){return""}get fragmentShaderSrc(){return""}PE(t){return Di(0,(()=>Bi()))}DE(t){const i=this.BE(t);if(void 0===i)throw this.PE(`Could not get ${t} uniform from ${this.FE} and ${this.IE} shaders.`);return i}BE(t){const i=this.wE.get(t);if(i)return i;const s=this.kE.getUniformLocation(this.TE,t);return s?(this.wE.set(t,s),s):void 0}LE(t){const i=this.RE(t);if(void 0===i)throw this.PE(`Could not get ${t} attribute from ${this.FE} and ${this.IE} shaders.`);return i}RE(t){const i=this.CE.get(t);if(i||0===i)return i;const s=this.kE.getAttribLocation(this.TE,t);return s>=0?(this.CE.set(t,s),s):void 0}U(){this.kE.deleteProgram(this.TE)}}const Cg=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/,kg=t=>{let i;try{i=Ot.getComputedStyle(t)}catch(t){return null}return i};
 /**
  * stacking-order by Rich Harris
  * https://github.com/Rich-Harris/stacking-order
