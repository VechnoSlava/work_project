diff --git a/node_modules/@lightningchart/lcjs/dist/lcjs.mjs b/node_modules/@lightningchart/lcjs/dist/lcjs.mjs
index f2d072c..83cb4e4 100644
--- a/node_modules/@lightningchart/lcjs/dist/lcjs.mjs
+++ b/node_modules/@lightningchart/lcjs/dist/lcjs.mjs
@@ -1,5 +1,5 @@
 /* LightningChart JS v6.1.0 */
-import*as t from"immutable";import{Record as i}from"immutable";import{Eventer as s}from"@lightningchart/eventer";import e from"earcut";class h{constructor(){this.o=!0}u(){return this.o}}class r extends h{constructor(t,i){super(),this.S=t,this.o=i}M(t){return t!==this.S&&(this.S=t,this.o=!0),this}_(){return this.S}u(){return super.u()}}const n=(t,i)=>({x:t,y:i}),o=(t,i)=>({x:t,y:i}),a=(t,i,s)=>({position:t,high:i,low:s}),l=(t,i,s)=>({x:t,y:i,z:s}),u=t=>{const i=Array(0),s=Array(0);return t.length>0&&t.forEach((t=>{i.push(n(t.position,t.high)),s.push(n(t.position,t.low))})),[i,s]},c=(t,i)=>({min:t,max:i}),d=(t,i,s,e)=>({x:t,y:i,width:s,height:e}),f=(t,i=!0)=>new r(t,i),A=(t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}),g=A,y=(t,i)=>({left:void 0!==i.left?i.left:t.left,top:void 0!==i.top?i.top:t.top,right:void 0!==i.right?i.right:t.right,bottom:void 0!==i.bottom?i.bottom:t.bottom}),m=i({type:"color",r:1,g:1,b:1,a:1});class p extends m{constructor(t){super(t)}toUint32(){return void 0!==this.C||(this.C=I(this.getR(),this.getG(),this.getB(),this.getA())),this.C}toString(){return`color:${this.r},${this.g},${this.b},${this.a}`}setA(t){return this.set("a",t/255)}setR(t){return this.set("r",t/255)}setG(t){return this.set("g",t/255)}setB(t){return this.set("b",t/255)}getA(){return 255*this.get("a")}getR(){return 255*this.get("r")}getG(){return 255*this.get("g")}getB(){return 255*this.get("b")}getHighlight(){return this.T||(this.T=new p({r:this.r+.45*(1-this.r),g:this.g+.45*(1-this.g),b:this.b+.45*(1-this.b),a:this.a<1?this.a+.45*(1-this.a):1})),this.T}getLighter(){return this.F||(this.F=new p({r:this.r+.4*(1-this.r),g:this.g+.4*(1-this.g),b:this.b+.4*(1-this.b),a:this.a})),this.F}getDarker(){return this.I||(this.I=new p({r:this.r-.4*(1-this.r),g:this.g-.4*(1-this.g),b:this.b-.4*(1-this.b),a:this.a})),this.I}toRGBAString(){return`rgba( ${255*this.r}, ${255*this.g}, ${255*this.b}, ${255*this.a} )`}}const v=t=>!(!t||"object"!=typeof t||!("type"in t)||"color"!==t.type),S=(t,i,s,e=255)=>new p({r:t/255,g:i/255,b:s/255,a:e/255}),b=t=>{const i=t.startsWith("#")?t.substring(1):t.startsWith("0x")?t.substr(2):t;switch(i.length){case 8:return new p({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255,a:Number(`0x${i.substring(6,8)}`)/255});case 6:return new p({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255});case 4:return new p({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255,a:Number(`0x${i.charAt(3)}${i.charAt(3)}`)/255});case 3:return new p({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255});default:throw new Error(`ColorHEX parsing error | input: ${t}`)}},x=(t,i=1,s=1)=>{let e,h,r;t/=360;const n=Math.floor(6*t),o=6*t-n,a=s*(1-i),l=s*(1-o*i),u=s*(1-(1-o)*i);switch(n%6){case 0:e=s,h=u,r=a;break;case 1:e=l,h=s,r=a;break;case 2:e=a,h=s,r=u;break;case 3:e=a,h=l,r=s;break;case 4:e=u,h=a,r=s;break;default:e=s,h=a,r=l}return new p({r:e,g:h,b:r})},M=t=>{try{if(t.startsWith("rgba")){const i=t.substr(5).slice(0,-1),s=JSON.parse(`[${i}]`);return S(s[0],s[1],s[2],255*s[3])}if(t.startsWith("rgb")){const i=t.substr(4).slice(0,-1),s=JSON.parse(`[${i}]`);return S(s[0],s[1],s[2])}if(t.startsWith("hsl")){const i=t.substr(4).slice(0,-1).split(",").map(parseFloat),s=w(i[0],i[1],i[2]);return S(s[0],s[1],s[2])}return t.startsWith("#")||t.startsWith("0x")?b(t):b(k(t))}catch(t){}return console.warn(`ColorCSS parsing error: ${t}`),b("#fff")},_=t=>S(255&t,255&(t>>=8),255&(t>>=8),255&(t>>=8)),w=(t,i,s)=>{i/=100,s/=100;const e=(1-Math.abs(2*s-1))*i,h=t/60,r=e*(1-Math.abs(h%2-1));let n=[];isNaN(t)?n=[0,0,0]:h<=1?n=[e,r,0]:h<=2?n=[r,e,0]:h<=3?n=[0,e,r]:h<=4?n=[0,r,e]:h<=5?n=[r,0,e]:h<=6&&(n=[e,0,r]);const o=s-.5*e;return[Math.round(255*(n[0]+o)),Math.round(255*(n[1]+o)),Math.round(255*(n[2]+o))]},C={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},k=t=>{const i=C[t.toLowerCase()];if(i)return i;throw new Error(`Unknown color code: ${t}`)},T=new p({}),F=S(0,0,0,0),I=(t,i,s,e=255)=>(e<<24|s<<16|i<<8|t)>>>0,P=t=>I(255*t.r,255*t.g,255*t.b,255*t.a),D=(t,i)=>t.value-i.value,B=i({type:"lut",steps:[],title:"",units:"",interpolate:!0,color:S(0,0,0,255),length:0,min:0,max:0,subranges:[],isValid:!1,percentageValues:!1}),L=t=>{const{steps:i}=t,s=i.length;i.sort(D);const[e,h]=s>0?[i[0].value,i[s-1].value]:[0,0],r=s>0?s-1:0,n=Array(r);for(let t=0;t<r;t+=1)n[t]={min:i[t],max:i[t+1]};return{min:e,max:h,length:s,steps:i,subranges:n,isValid:s>0&&e!==h}};class R extends B{constructor(t){super(((t,i)=>({steps:t.steps,title:t.title,units:t.units,interpolate:t.interpolate,percentageValues:t.percentageValues,color:t.color,length:i.length,min:i.min,max:i.max,subranges:i.subranges,isValid:i.isValid}))(t,L(t)))}toString(){return`LUT:interpolate=${this.interpolate},steps=${this.steps.length},percentage=${this.percentageValues}`}setSteps(t){return this.merge(L({...this,steps:t}))}getSteps(){return this.get("steps")}setTitle(t){return this.set("title",t)}getTitle(){return this.get("title")}setUnits(t){return this.set("units",t)}getUnits(){return this.get("units")}setInterpolation(t){return this.set("interpolate",t)}getInterpolation(){return this.get("interpolate")}setFallbackColor(t){return this.set("color",t)}getFallbackColor(){return this.get("color")}setPercentageValues(t){return this.set("percentageValues",t)}getPercentageValues(){return this.get("percentageValues")}getColors(t){if(Array.isArray(t)){if(Array.isArray(t[0])){const i=t,s=i.length,e=i[0].length,h=[...Array(s)].map((()=>Array(e)));for(let t=0;t<s;t+=1)for(let s=0;s<e;s+=1)h[t][s]=this.P(i[t][s]);return h}const i=t,s=i.length,e=Array(s);for(let t=0;t<s;t+=1)e[t]=this.P(i[t]);return e}return this.P(t)}P(t){const{steps:i}=this,s=i.length;if(0===s)return this.getFallbackColor();if(1===s)return i[0].color||this.color;if(this.interpolate){for(let n=0;n<s-1;n+=1){const s=i[n],o=i[n+1],a=Math.min(s.value,o.value),l=Math.max(s.value,o.value);if(t>=a&&t<=l){if(a===l)return s.color;const i=(t-s.value)/(o.value-s.value);return e=s.color,h=o.color,r=i,new p({r:e.r+(h.r-e.r)*r,g:e.g+(h.g-e.g)*r,b:e.b+(h.b-e.b)*r,a:e.a+(h.a-e.a)*r})}}return t<i[0].value?i[0].color:i[s-1].color}var e,h,r;for(let e=s-1;e>=0;e-=1)if(t>=i[e].value)return i[e].color;return i[0].color}}const E=t=>!(!t||"object"!=typeof t||!("type"in t)||"lut"!==t.type),z=i({type:"fillstyle",fillType:"empty"});class V extends z{toString(){return"emptyFill"}}const O=new V,N=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"empty"===t.fillType),G=i({type:"fillstyle",fillType:"solid",color:S(255,255,255)});class U extends G{}class W extends U{constructor(t){super({...t,fillType:"solid"})}toString(){return`solidFill:${this.color.toString()}`}setColor(t){return v(t)?this.set("color",t):this.set("color",t(this.get("color")))}getColor(){return this.get("color")}setA(t){return this.setColor(this.getColor().setA(t))}setR(t){return this.setColor(this.getColor().setR(t))}setG(t){return this.setColor(this.getColor().setG(t))}setB(t){return this.setColor(this.getColor().setB(t))}}const Y=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"solid"===t.fillType);class H extends U{constructor(t){super({...t,fillType:"individual"})}toString(){return`individualPointFill:${this.color.toString()}`}setFallbackColor(t){return v(t)?this.set("color",t):this.set("color",t(this.get("color")))}getFallbackColor(){return this.get("color")}}const X=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"individual"===t.fillType),$=i({type:"fillstyle",fillType:"palette",lut:new R({steps:[]}),lookUpProperty:"value"});class j extends ${constructor(t){super({...t,fillType:"palette"})}toString(){return`palettedFill:lut=${this.lut.toString()},lookUpProperty=${this.lookUpProperty}`}getPalette(){return this.get("lut")}setLookUpProperty(t){return"function"==typeof t?this.set("lookUpProperty",t(this.get("lookUpProperty"))):this.set("lookUpProperty",t)}getLookUpProperty(){return this.get("lookUpProperty")}}const Z=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"palette"===t.fillType),Q={linear:(t,i,s)=>{const e=i-t;return h=>h<s?t+e/s*h:i},easeIn:(t,i,s)=>e=>e<s?t+Math.abs(2*(Math.sqrt(.5)*e/s)**2)*(i-t):i,easeOut:(t,i,s)=>e=>e<s?t+Math.abs(1-2*(Math.sqrt(.5)*(1-e/s))**2)*(i-t):i,ease:(t,i,s)=>e=>e<s?t+(e<s/2?.5*(e/s*2)**2.5:.5+.5*(1-(1-2*(e/s-.5))**2.5))*(i-t):i,logarithmic:t=>{const i=Mi(t);return(s,e,h)=>{const r=i(s),n=i(e);return i=>i<h?t**(r+Math.abs(1-2*(Math.sqrt(.5)*(1-i/h))**2)*(n-r)):e}}};class J{constructor(t,i,e,h=Q.linear,r){this.delta=0,this.nextAnimations=new Array,this.D=!1,this.easing=Q.linear,this.L=new s,this.isOver=()=>(this.delta===this.duration||this.D)&&0===this.nextAnimations.length,this.values=t,this.action=i,this.duration=e,this.easing=h,this.R=r,this.eases=t.map((([t,i])=>h(t,i,e)))}V(){this.L.emit("start")}start(){return this.R.includes(this)||this.R.push(this),this}addNextAnimations(t){return t instanceof Array?t.forEach((t=>this.nextAnimations.push(t))):this.nextAnimations.push(t),this}NextAnimation(t,i,s=this.duration,e=this.easing){const h=new J(t,i,s,e,this.R);return this.nextAnimations.push(h),h}onAnimationStart(t,i){return this.L.on("start",t,i)}onAnimationEnd(t,i){return this.L.on("end",t,i)}onEveryAnimationEnd(t,i){return this.L.on("everyEnd",t,i)}onAllAnimationEnd(t,i){return this.L.on("allEnd",t,i)}allOffAnimationEnd(){return this.L.topicOff("end"),this}allOffEveryAnimationEnd(){return this.L.topicOff("everyEnd"),this}allOffAllAnimationEnd(){return this.L.topicOff("allEnd"),this}offAnimationEnd(t){return this.L.off(t,"end")}offEveryAnimationEnd(t){return this.L.off(t,"everyEnd")}offAllAnimationEnd(t){return this.L.off(t,"allEnd")}finish(t=!0){if(this.D=!0,this.R.splice(this.R.indexOf(this),1),this.nextAnimations.length>0){const i=this.nextAnimations[0];return t&&(this.L.listeners("allEnd").forEach(((t,s)=>i.onAllAnimationEnd(t,s))),this.L.listeners("everyEnd").forEach(((t,s)=>i.onEveryAnimationEnd(t,s)))),i.addNextAnimations(this.nextAnimations.slice(1)),i.start(),t&&(this.L.emit("end",i),this.L.emit("everyEnd",i)),i}t&&(this.L.emit("end",void 0),this.L.emit("everyEnd",void 0),this.L.emit("allEnd"))}finishAll(t=!0){let i=this;for(;i;)i=i.finish(t)}getFinalValues(){return this.nextAnimations.length>0?this.nextAnimations[this.nextAnimations.length-1].values.map($t):this.values.map($t)}getTimeUntilFinish(){let t=this.duration-this.delta;for(let i=0;i<this.nextAnimations.length;i+=1)t+=this.nextAnimations[i].duration-this.nextAnimations[i].delta;return t}}const K=(t,i=60)=>{i>60&&console.log("Note: Animator FPS is usually capped at 60 by the browser!");const s=[];let e,h,r=0;const n=()=>{e=void 0;const o=Date.now();h=h||o,r=o-h,r/1e3>=1/i&&(h=Date.now()-r%(1e3/i),s.forEach((t=>{0===t.delta&&t.V(),t.delta+=r-r%(1e3/i),t.delta>t.duration&&(t.delta=t.duration),t.action(t.eases.map((i=>i(t.delta)))),t.delta===t.duration&&t.finish()})),t()),s.length>0?e=Yt.requestAnimationFrame(n):(e=void 0,h=void 0)};return(t=1e3,i=Q.linear)=>(h,r,o=t)=>{const a=new J(h,r,o,i,s).start();return e||(e=Yt.requestAnimationFrame(n)),a}};var q;!function(t){t[t.Fill=0]="Fill",t[t.Fit=1]="Fit",t[t.Stretch=2]="Stretch",t[t.Center=3]="Center",t[t.Tile=4]="Tile"}(q||(q={}));const tt=i({type:"fillstyle",fillType:"image",source:void 0,surroundingColor:S(0,0,0,0),sourceMissingColor:S(0,0,0,0),fitMode:q.Fill});class it extends tt{constructor(t){super(t)}setSource(t){return this.set("source",t)}getSource(){return this.get("source")}setSurroundingColor(t){return v(t)?this.set("surroundingColor",t):this.set("surroundingColor",t(this.get("surroundingColor")))}getSurroundingColor(){return this.get("surroundingColor")}setSourceMissingColor(t){return v(t)?this.set("sourceMissingColor",t):this.set("sourceMissingColor",t(this.get("sourceMissingColor")))}getSourceMissingColor(){return this.get("sourceMissingColor")}setFitMode(t){return this.set("fitMode",t)}getFitMode(){return this.get("fitMode")}toString(){return`imagefill:${this.fitMode}`}}const st=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"image"===t.fillType);var et,ht;!function(t){t.circle="circle",t.ellipse="ellipse"}(et||(et={})),function(t){t.closestSide="closest-side",t.closestCorner="closest-corner",t.farthestSide="farthest-side",t.farthestCorner="farthest-corner"}(ht||(ht={}));const rt=i({type:"fillstyle",fillType:"radial-gradient",stops:[{color:b("#f00"),offset:0},{color:b("#0f0"),offset:1}],position:n(.5,.5),shape:et.ellipse,extent:ht.farthestCorner});class nt extends rt{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("RadialGradientFill requires minimum two color stops to be defined.")}toString(){return`radialGradientFill:${this.shape},${this.extent},${this.position.x},${this.position.y},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");return this.set("stops",t)}getColorStops(){return this.get("stops")}setPosition(t){return this.set("position",t)}getPosition(){return this.get("position")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}setExtent(t){return this.set("extent",t)}getExtent(){return this.get("extent")}}const ot=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"radial-gradient"===t.fillType),at=i({type:"fillstyle",fillType:"linear-gradient",stops:[{color:b("#f00"),offset:0},{color:b("#0f0"),offset:1}],angle:0});class lt extends at{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("LinearGradientFill requires minimum two color stops to be defined.")}toString(){return`linearGradientFill:${this.angle},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");const i=t.sort(((t,i)=>t.offset-i.offset));return this.set("stops",i)}getColorStops(){return this.get("stops")}setAngle(t,i){return this.set("angle",i?function(t){return 180*t/Math.PI}(t):t)}getAngle(t){return t?Vs(this.get("angle")):this.get("angle")}}const ut=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"linear-gradient"===t.fillType),ct=i({type:"linestyle",lineType:"empty"}),dt=new class extends ct{constructor(){super(...arguments),this.thickness=0}setThickness(t){return this}getThickness(){return 0}O(){return 0}setFillStyle(t){return this}getFillStyle(){return O}},ft=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"empty"!==t.lineType);class At{constructor(t,i,e,h){this.cellIndex=t,this.cellSpan=i,this.cellsAmount=e,this.observedAmount=h,this.x=new gt,this.y=new gt,this.z=new gt,this.L=new s;const r={...t},n={...i};if(h){const t=t=>{this.cellsAmount.x=t.reduce(ds,0),this.cellIndex.x=t.reduce(((t,i,s)=>s>=r.x?t:t+i),0),this.cellSpan.x=t.reduce(((t,i,s)=>s>=r.x&&s<r.x+n.x?t+i:t),0),this.L.emit("cell-resize")},i=h.x.N(t);t(h.x._());const s=t=>{this.cellsAmount.y=t.reduce(ds,0),this.cellIndex.y=t.reduce(((t,i,s)=>s>=r.y?t:t+i),0),this.cellSpan.y=t.reduce(((t,i,s)=>s>=r.y&&s<r.y+n.y?t+i:t),0),this.L.emit("cell-resize")},e=h.y.N(s);s(h.y._()),this.G=()=>{h.x.U(i),h.y.U(e)}}}W(){return this.G&&(this.G(),this.G=void 0),this}Y(t){return this.L.on("cell-resize",t)}H(t){return this.L.off(t,"cell-resize")}}class gt extends h{constructor(){super(...arguments),this.X=0,this.$=10,this.j=1}Z(){return this.o=!1,this}J(){return this.o=!0,this}getInnerStart(){return this.X}getInnerEnd(){return this.$}getInnerInterval(){return Math.abs(this.getInnerEnd()-this.getInnerStart())}K(t,i){return this.X=t,this.$=i,this.q(),this}tt(t){return this.j=t,this.q(),this}it(t){return t/this.j}q(){const t=this.it(this.$-this.X),i=this.j;void 0!==this.st&&!1!==Qt(t,this.st)||(this.o=!0,this.et=i,this.st=t)}ht(){return this.st}rt(){return this.et}nt(){return this.$<this.X}ot(t,i){return!0}}const yt={d1:t=>new t.scale1DConstructor(0,1,1,void 0),d2:t=>(new t.scaleXYConstructor).ut({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0),d3:()=>new At({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0)},mt=(t,i,s)=>i===s?t:s.ct(i.dt(t)),pt=(t,i,s)=>{if(i===s)return t;const e=i instanceof se?i.x:i.x instanceof se?i.x.x:i.x.ft,h=i instanceof se?i.y:i.y instanceof se?i.y.y:i.y.ft,r=s instanceof se?s.x:s.x instanceof se?s.x.x:s.x.ft,n=s instanceof se?s.y:s.y instanceof se?s.y.y:s.y.ft;return{...t,x:mt(t.x,e,r),y:mt(t.y,h,n)}},vt=(t,i,s)=>{const e=t(i,s);return t=>new W({color:e(t)})},St=(t,i,s)=>{const e=t(i+1,s);return t=>new nt({stops:[{offset:0,color:e(t)},{offset:1,color:e(t).getDarker()}]})},bt=(t,i,s,e)=>{const h=t(i+1,e);return t=>new lt({stops:[{offset:0,color:h(t).getDarker()},{offset:.5,color:h(t)},{offset:1,color:h(t).getDarker()}],angle:s||90})},xt=(...t)=>{if(0===t.length)return{remove:Zt};let i=!1;const s=t.map((s=>s.onIntervalChange(((e,h,r)=>((s,e,h)=>{i||(i=!0,t.filter((t=>t!==s)).forEach((t=>t.At(e,h,!1,s.getStopped(),"synchronizedAxis"))),i=!1)})(s,h,r)))));let e=!1;const h=t.map((i=>i.onStoppedStateChanged(((s,h)=>((i,s)=>{e||(e=!0,t.filter((t=>t!==i)).forEach((t=>t.setStopped(s))),e=!1)})(i,h)))));return{remove:()=>{t.forEach(((t,i)=>{t.offIntervalChange(s[i]),t.offStoppedStateChanged(h[i])}))}}},Mt=(t,i,s,e)=>{if(!s||0===s.length)throw new Error("Invalid use regularColorSteps 'colorPalette' is undefined or empty");const h=null==e?void 0:e.formatLabels,r=null==e?void 0:e.alpha;return s.map(((e,n)=>{const o=t+n/(s.length-1)*(i-t);return{color:void 0!==r?e.setA(r):e,value:o,label:h?h(o):void 0}}))},_t=t=>t&&"object"==typeof t&&"column"in t&&"row"in t,wt=t=>t&&"object"==typeof t&&"z"in t&&"column"in t&&"row"in t,Ct=t=>t&&"object"==typeof t&&"position"in t&&"open"in t&&"high"in t&&"isPacked"in t,kt=t=>t&&"object"==typeof t&&"annulus"in t&&"sector"in t,Tt=t=>t&&"object"==typeof t&&"index"in t,Ft=t=>t&&"object"==typeof t&&"xSize"in t&&"ySize"in t&&"zSize"in t,It=t=>t&&"object"==typeof t&&"figure"in t&&"x1"in t&&"y2"in t&&"height"in t,Pt=t=>t&&"object"==typeof t&&"figure"in t&&"start"in t&&"end"in t&&"median"in t&&"upperQuartile"in t,Dt=t=>t&&"object"==typeof t&&"figure"in t&&"x"in t&&"radiusX"in t&&"radiusY"in t,Bt=t=>t&&"object"==typeof t&&"figure"in t&&"x"in t&&"coordinates"in t,Lt=t=>t&&"object"==typeof t&&"figure"in t&&"startX"in t&&"endX"in t,Rt=t=>t&&"object"==typeof t&&"x"in t&&"y"in t;class Et extends Error{constructor(t,i){super(`ChartError: ${t} ${i?`in ${i.constructor.name}`:""}`),Object.setPrototypeOf(this,Et.prototype)}}class zt extends Error{constructor(t,i,s=!1){const e=`EngineError: ${t} ${i?`in ${i.constructor.name}`:""}`;super(e),s&&Yt.alert(e),Object.setPrototypeOf(this,zt.prototype)}}class Vt extends zt{constructor(t){super(t),Object.setPrototypeOf(this,Vt.prototype)}}var Ot,Nt,Gt,Ut;!function(t){t[t.Content=0]="Content",t[t.PaddedContent=1]="PaddedContent",t[t.PaddedBackground=2]="PaddedBackground",t[t.Everything=3]="Everything"}(Ot||(Ot={})),function(t){t[t.never=0]="never",t[t.always=1]="always",t[t.whenHovered=2]="whenHovered",t[t.whenDragged=3]="whenDragged",t[t.whenNotDragged=4]="whenNotDragged",t[t.whenHoveredOrDragged=5]="whenHoveredOrDragged"}(Nt||(Nt={})),function(t){t[t.notDraggable=0]="notDraggable",t[t.draggable=1]="draggable",t[t.onlyHorizontal=2]="onlyHorizontal",t[t.onlyVertical=3]="onlyVertical"}(Gt||(Gt={})),function(t){t[t.Up=0]="Up",t[t.Right=1]="Right",t[t.Down=2]="Down",t[t.Left=3]="Left"}(Ut||(Ut={}));const Wt=t=>{if(t.resourcesBaseUrl){const i=t.styleFactory(t.resourcesBaseUrl),s=st(i)&&i.getSource(),e=s&&s instanceof Image?s:void 0;return null==e||e.addEventListener("error",(()=>{$i(t.resourcesBaseUrl,e.src,"Theme resource",{shouldCrash:!1})})),i}const i=`${Yt.location.origin}/resources`,s=t.styleFactory(i);if(st(s)){const i=s.getSource();i instanceof Image&&i.addEventListener("error",(()=>{const s=t.styleFactory("https://lcjs-resources.lightningchart.com/v1"),e=st(s)&&s.getSource(),h=e&&e instanceof Image?e:void 0;Yt.console.warn("LightningChart JS warning | fallbacking to publicly hosted asset resources.\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/warning-using-publicly-hosted-resources/"),null==h||h.addEventListener("load",(()=>{t.apply(s)})),null==h||h.addEventListener("error",(()=>{$i(t.resourcesBaseUrl,i.src,"Theme resource",{shouldCrash:!1})}))}))}return s},Yt="undefined"!=typeof window?window:"undefined"!=typeof global&&global._lcjs?global._lcjs:{},Ht=(t,i)=>t.x===i.x&&t.y===i.y,Xt=t=>t!==es&&t!==hs&&!Number.isNaN(t)&&Number.isFinite(t)&&t!==1/0&&t!==-1/0,$t=t=>t[1],jt=t=>t.dispose(),Zt=()=>{},Qt=(t,i)=>t===i,Jt=(t,i,s)=>s>i?Math.min(Math.max(t,i),s):Math.min(Math.max(t,s),i),Kt=t=>Array.prototype.concat.apply([],t),qt=(t,i)=>void 0===t||Number.isNaN(t)?i:t,ti=t=>t.yt(),ii=t=>t.vt(),si=t=>t.St(),ei=t=>t.bt(),hi=t=>t.min.x,ri=t=>t.max.x,ni=t=>t.min.y,oi=t=>t.max.y,ai=(t,i,s,e,h)=>{if(t.length>0){let r=h?e(h):void 0;for(let e=0;e<t.length;e+=1){const h=i(t[e]);void 0!==h&&(r=void 0!==r?s(r,h):h)}return r}if(h)return e(h)},li=(t,i)=>t.position===i.position&&t.high===i.high&&t.low===i.low,ui=n(0,1),ci=n(1,0),di=n(0,-1),fi=n(-1,0),Ai=n(0,0),gi=t=>{switch(t){case Ut.Up:return ui;case Ut.Right:return ci;case Ut.Down:return di;case Ut.Left:return fi;default:return Ai}},yi=t=>t===Ut.Left||t===Ut.Right,mi=t=>{t.stopPropagation(),t.preventDefault()},pi=(t,i)=>{if(!i)return t;const s=t.length,e=new Float32Array(2*s);let h=0;for(let i=0;i<s;i+=1){const s=t[i],r=Math.fround(s);e[h+0]=r,e[h+1]=s-r,h+=2}return e},vi=(t,i,s=Float32Array)=>{if(!i){const i=t.length,e=new s(2*i);let h=0;for(let s=0;s<i;s+=1){const i=t[s];e[h+0]=i.x,e[h+1]=i.y,h+=2}return e}const e=t.length,h=new s(4*e);let r=0;for(let i=0;i<e;i+=1){const s=t[i],e=Math.fround(s.x),n=Math.fround(s.y);h[r+0]=e,h[r+1]=n,h[r+2]=s.x-e,h[r+3]=s.y-n,r+=4}return h},Si=t=>{const i=t.length,s=new Float32Array(3*i);let e=0;for(let h=0;h<i;h+=1){const i=t[h];s[e+0]=i.x,s[e+1]=i.y,s[e+2]=i.z,e+=3}return s},bi=t=>i=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)},xi=t=>{let i=t.length;for(let s=0;s<i-1;s+=1)t[s].x===t[s+1].x&&t[s].y===t[s+1].y&&(t.splice(s,1),s-=1,i-=1);return t},Mi=t=>{const i=Math.log(t);return t=>Math.log(t)/i},_i=Mi(Math.E),wi=(t,i)=>{const s=i[t];return s?s():void 0},Ci=(t,i)=>{let s;if(i)s=i;else{const i={x:0,y:0};for(let s=0;s<t.length;s+=1)i.x+=t[s].x/t.length,i.y+=t[s].y/t.length;s=i}return t.sort(((t,i)=>Os(Ps(t,s))-Os(Ps(i,s))))},ki=(t,i,s)=>{if(0===t.length)return!1===s.canReturnB?i.slice():i;const e=i.length;if(e<1e5)return t.push.apply(t,i),t;for(let s=0;s<e;s+=1)t.push(i[s]);return t},Ti=(t,i,s)=>s<0?t:s>1?i:S(t.getR()+s*(i.getR()-t.getR()),t.getG()+s*(i.getG()-t.getG()),t.getB()+s*(i.getB()-t.getB()),t.getA()+s*(i.getA()-t.getA())),Fi=t=>255===t.getA()?t:t.setA(255),Ii=(()=>{const t=S(0,0,0);return i=>(i=Fi(i),new nt({shape:et.circle,extent:ht.farthestCorner,position:{x:.2,y:.8},stops:[{offset:0,color:i},{offset:1,color:Ti(i,t,.5)}]}))})(),Pi=(()=>{const t=t=>{var i;if(t){if(Y(t)){if(0===t.getColor().getA())return;return t.getColor()}if(ot(t)||ut(t)){const s=t.getColorStops();return 3===s.length?s[1].color:null===(i=s[0])||void 0===i?void 0:i.color}Z(t)}};return(i,s,e,h)=>{var r;const n=[];if(h.fill&&n.push(h.fill),h.fill2&&n.push(h.fill2),h.stroke){const t=h.stroke.getFillStyle();t!==O&&("stroke"===(null===(r=h.behavior)||void 0===r?void 0:r.priority)?n.unshift(t):n.push(t))}if(h.point3D){const t=h.point3D;n.push(t.getFillStyle())}let o;if(h.behavior&&!0===h.behavior.colorStep){const[i,e]=n.reduce(((i,s)=>{if(i[0]&&i[1])return i;const e=t(s);return e&&(void 0===i[0]?i[0]=e:i[1]=e),i}),[void 0,void 0]);o=i&&e?(a=i)===(l=e)||a.getR()===l.getR()&&a.getG()===l.getG()&&a.getB()===l.getB()?Ii(a):(a=Fi(a),l=Fi(l),new lt({angle:0,stops:[{offset:0,color:l},{offset:.5,color:l},{offset:.5,color:a},{offset:1,color:a}]})):s.uiButtonFillStyle}else{const i=n.reduce(((i,s)=>i||t(s)),void 0);o=i?e?new W({color:i}):Ii(i):s.uiButtonFillStyle}var a,l;i.setButtonOnFillStyle(o)}})(),Di=t=>{const i=t;if(Z(i))return{lut:i.getPalette(),lookUpProperty:i.getLookUpProperty()}},Bi=t=>{let i=0;return()=>(i+=1,`${t}-${i}`)},Li=(t,i)=>{let s="string"==typeof t?t:String(t);const e=s.indexOf(".");let h=e>=0?e:s.length;for(;h<i;h+=1)s=`0${s}`;return s},Ri=(t,i)=>"function"==typeof t?t(i):t,Ei=t=>t.ctrlKey?Math.sign(t.deltaY)*Math.min(.05*Math.abs(t.deltaY),1):Math.sign(t.deltaY),zi=(t,i)=>i(),Vi=()=>new Error("LightningChart JS encountered an unexpected error.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact");new W({color:S(255,255,255,1)});const Oi=t=>t===rs||t.min.x===rs.min.x&&t.max.x===rs.max.x&&t.min.y===rs.min.y&&t.max.y===rs.max.y,Ni=t=>Array.from(new Set(t)),Gi=t=>t.filter((t=>void 0!==t)),Ui=t=>"boolean"==typeof t?t?1:0:t>1?1:t<0?0:t,Wi=(t,i,s)=>{i.length<=0||(t.setText(s.label).setOn(i[0].getVisible()),s.style&&t.setButtonOnFillStyle(s.style),s.toggleVisibilityOnClick&&t.onSwitch(((t,s)=>i.forEach((t=>t.setVisible(s))))),t.onMouseEnter((()=>i.forEach((t=>t.setHighlight(!0))))),t.onMouseLeave((()=>i.forEach((t=>t.setHighlight(!1))))),i.forEach((i=>i.onMouseEnter((()=>t.setHighlight(!0))))),i.forEach((i=>i.onMouseLeave((()=>t.setHighlight(!1))))),i.forEach((i=>i.onTouchStart((()=>t.setHighlight(!0))))),i.forEach((i=>i.onTouchEnd((()=>t.setHighlight(!1))))))},Yi=(t,i)=>{throw new Error(i)},Hi=t=>{let i;return()=>i||(i=t(),i)},Xi=t=>{if(t===dt)return 0;const i=t.getThickness();return i<0?1:1*i},$i=(t,i,s,e)=>{const h=`LightningChart JS Resources not found.\nresourcesBaseUrl: "${t}"\ninitiator: ${s}\nresource url: ${i}\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/error-resources-not-found/`;if(e.shouldCrash)throw Yt.alert(h),new Error(h);Yt.console.warn(h)},ji=(t,i,s,e=0)=>{if(t<s(e)||s(i)<t)return;const h=i;for(;e!==i;){const h=Math.ceil((e+i)/2);t<s(h)?i=h-1:e=h}const r=Math.abs(t-s(e));return e<h&&Math.abs(t-s(e+1))<r?e+1:e},Zi=()=>{const t=new Map;return{xt:i=>(i.setMouseEnterEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Mt(i,s,e,h)})),i.setMouseLeaveEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h._t(i,s,e)})),i.setMouseClickEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.wt(i,s,e,h)})),i.setMouseDoubleClickEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Ct(i,s,e,h)})),i.setMouseDownEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.kt(i,s,e,h)})),i.setMouseUpEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Tt(i,s,e,h)})),i.setMouseMoveEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Ft(i,s,e,h)})),i.setMouseDragEventHandler(((i,s,e,h,r,n,o)=>{const a=n&&t.get(n);a&&a.It(i,s,e,h,r,n,o)})),i.setMouseDragStartEventHandler(((i,s,e,h,r)=>{const n=h&&t.get(h);n&&n.Pt(i,s,e,h,r)})),i.setMouseDragStopEventHandler(((i,s,e,h,r,n)=>{const o=r&&t.get(r);o&&o.Dt(i,s,e,h,r,n)})),i.setMouseWheelEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Bt(i,s,e,h)})),i.setTouchStartEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Lt(i,s,e,h)})),i.setTouchMoveEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Rt(i,s,e,h)})),i.setTouchEndEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Et(i,s,e,h)})),i),zt:(i,s)=>{t.set(i,s)},Vt:()=>{t.clear()}}},Qi={left:0,right:0,top:0,bottom:0},Ji=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER),Ki=(t,i,s)=>{i&&i.Ot();const e=s();return{Nt:t,Ot:()=>{e.forEach((i=>t.Gt(i)))}}},qi=(t,i,s)=>{let e;const h=()=>(e=s(),e),r={...t,resolve:()=>e||h()};for(const t of Object.keys(i))Object.defineProperty(r,t,{get:function(){return e?e[t]:h()[t]}});return r},ts=t=>{if(t)return"resolve"in t?t.resolve():t},is=t=>{let i=t;return{Ut:t=>{const s=i;return i=s+t,[s,t]}}},ss={add:(t,i)=>l(t.x+i,t.y+i,t.z+i),addVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x+=t.x,s.y+=t.y,s.z+=t.z;return s},subtract:(t,i)=>l(t.x-i,t.y-i,t.z-i),subtractVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x-=t.x,s.y-=t.y,s.z-=t.z;return s},multiply:(t,i)=>l(t.x*i,t.y*i,t.z*i),divide:(t,i)=>l(t.x/i,t.y/i,t.z/i),multiplyVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x*=t.x,s.y*=t.y,s.z*=t.z;return s},divideVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x/=t.x,s.y/=t.y,s.z/=t.z;return s},length:t=>Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),normalize:t=>ss.divide(t,ss.length(t)),dot:(t,i)=>t.x*i.x+t.y*i.y+t.z*i.z,cross:(t,i)=>l(t.y*i.z-t.z*i.y,t.z*i.x-t.x*i.z,t.x*i.y-t.y*i.x),angle:(t,i)=>Math.acos(ss.dot(t,i)/(ss.length(t)*ss.length(i))),rotateAroundAxis(t,i,s){const e=Math.cos(s),h=Math.sin(s),r=ss.dot(i,t),n=ss.cross(i,t);return ss.addVec(ss.multiply(t,e),ss.addVec(ss.multiply(i,(1-e)*r),ss.multiply(n,h)))},lerp:(t,i,s)=>(s=Jt(s,0,1),ss.addVec(ss.multiply(t,1-s),ss.multiply(i,s))),equals:(t,i)=>Qt(t.x,i.x)&&Qt(t.y,i.y)&&Qt(t.z,i.z),abs:t=>({x:Math.abs(t.x),y:Math.abs(t.y),z:Math.abs(t.z)}),sign:t=>({x:Math.sign(t.x),y:Math.sign(t.y),z:Math.sign(t.z)})},es=Number.MAX_SAFE_INTEGER,hs=-Number.MAX_SAFE_INTEGER,rs=c(n(es,es),n(hs,hs)),ns=c(l(es,es,es),l(hs,hs,hs)),os=(t,i)=>{const s=Math.log(t)/Math.log(i);return Math.floor((t=>(Math.ceil(t)-t<1e-4?t=Math.ceil(t):t-Math.floor(t)<1e-4&&(t=Math.floor(t)),t))(s))},as=(t,i)=>!(i.min.x>t.max.x||i.max.x<t.min.x||i.min.y>t.max.y||i.max.y<t.min.y),ls=(t,i)=>!(t[1].x<i[0].x||t[0].x>i[1].x||t[3].y<i[0].y||t[0].y>i[3].y),us=(t,i)=>({min:{x:Math.min(t[0].x,i[0].x),y:Math.min(t[0].y,i[0].y)},max:{x:Math.max(t[2].x,i[2].x),y:Math.max(t[2].y,i[2].y)}}),cs=t=>{const i=t.length;for(let s=0;s<i;s+=1)for(let e=s+1;e<i;e+=1)if(as(t[s],t[e]))return!0;return!1},ds=(t,i)=>i+t,fs=(t,i,s)=>{const e=Ps(i,t),h=e.x*e.x+e.y*e.y;if(0===h)return t;const r=Ps(s,t),o=(r.x*e.x+r.y*e.y)/h;return o<=0?t:o>=1?i:n(t.x+o*e.x,t.y+o*e.y)},As=(t,i,s)=>s>i?t>=i&&t<=s:t>=s&&t<=i,gs=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)},ys=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return s*s+e*e},ms=(t,i,s)=>Is(t,Fs(Ps(i,t),s)),ps=(t,i,s)=>ss.addVec(t,ss.multiply(ss.subtractVec(i,t),s));function vs(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,h=t[0].y,r=t[0].y;for(let n=0;n<i;n+=1){const i=t[n];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>h&&(h=i.y),i.y<r&&(r=i.y)}return c(n(e,r),n(s,h))}return rs}function Ss(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,h=t[0].y,r=t[0].y,n=t[0].z,o=t[0].z;for(let a=0;a<i;a+=1){const i=t[a];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>h&&(h=i.y),i.y<r&&(r=i.y),i.z>n&&(n=i.z),i.z<o&&(o=i.z)}return c(l(e,r,o),l(s,h,n))}return ns}const bs=(...t)=>{const i={min:{x:es,y:es},max:{x:hs,y:hs}};for(const s of t)i.min.x=i.min.x<s.min.x?i.min.x:s.min.x,i.max.x=i.max.x>s.max.x?i.max.x:s.max.x,i.min.y=i.min.y<s.min.y?i.min.y:s.min.y,i.max.y=i.max.y>s.max.y?i.max.y:s.max.y;return i},xs=(t,i)=>c(l(t.min.x<i.min.x?t.min.x:i.min.x,t.min.y<i.min.y?t.min.y:i.min.y,t.min.z<i.min.z?t.min.z:i.min.z),l(t.max.x>i.max.x?t.max.x:i.max.x,t.max.y>i.max.y?t.max.y:i.max.y,t.max.z>i.max.z?t.max.z:i.max.z));function Ms(t,i,s,e){const h=t.x-e.x,r=t.y-e.y,n=e.x-s.x,o=s.y-e.y,a=o*h+n*r,l=(e.y-i.y)*h+(i.x-e.x)*r,u=o*(i.x-e.x)+n*(i.y-e.y);return u<0?a<=0&&l<=0&&a+l>=u:a>=0&&l>=0&&a+l<=u}function _s(t,i,s){return n(Math.cos(s)*(t.x-i.x)+Math.sin(s)*(t.y-i.y)+i.x,-Math.sin(s)*(t.x-i.x)+Math.cos(s)*(t.y-i.y)+i.y)}function ws(t,i){return n(t.x-i.x,t.y-i.y)}function Cs(t){const i=Ts(t);return 0===i?n(0,0):n(t.x/i,t.y/i)}function ks(t,i){let s={x:i.x-t.x,y:i.y-t.y};s=Cs(s);const e=Math.PI/2,h=s.x;return s.x=-Math.sin(e)*s.y,s.y=h*Math.sin(e),s}function Ts(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function Fs(t,i){return n(t.x*i,t.y*i)}function Is(t,i){return n(t.x+i.x,t.y+i.y)}function Ps(t,i){return n(t.x-i.x,t.y-i.y)}function Ds(t,i){return n(t.x*i.x,t.y*i.y)}function Bs(t,i){return n(t.x/i.x,t.y/i.y)}function Ls(t){return Fs(t,-1)}function Rs(t,i){return t.x*i.x+t.y*i.y}const Es=(t,i,s)=>{const e=(s.y-i.y)/(s.x-i.x),h=i.y+(t-i.x)*e;return n(t,h)},zs=(t,i,s)=>{const e=(s.y-i.y)/(s.x-i.x),h=i.x+(t-i.y)/e;return n(h,t)};function Vs(t){return t*Math.PI/180}function Os(t){return 180*Math.atan2(t.y,t.x)/Math.PI}function Ns(t){return n(Math.cos(t),Math.sin(t))}const Gs=(t,i,s,e)=>{let h,r,o,a;if(i.x-t.x!=0||e.x-s.x!=0)return i.x-t.x==0?(o=i.x,r=(e.y-s.y)/(e.x-s.x),a=r*(o-s.x)+s.y):e.x-s.x==0?(o=e.x,h=(i.y-t.y)/(i.x-t.x),a=h*(o-t.x)+t.y):(h=(i.y-t.y)/(i.x-t.x),r=(e.y-s.y)/(e.x-s.x),o=(s.y-r*s.x+h*t.x-t.y)/(h-r),a=h*(o-t.x)+t.y),n(o,a)},Us=(t,i)=>{const s=t.length,e=i.length,h=new Uint16Array(s+e);return h.set(t,0),h.set(i,s),h};class Ws{constructor(){this.Wt=!0}getInnerStart(){return this.X}getInnerEnd(){return this.$}getInnerInterval(){return Math.abs(this.$-this.X)}K(t,i){return this.Wt=t!==this.X||i!==this.$,this.X=t,this.$=i,this}Z(){return this.Wt=!1,this}J(){return this.Wt=!0,this}}class Ys extends Ws{constructor(t,i,s,e){if(super(),this.Yt=!0,this.Ht=!0,this.Xt=[0,0],this.$t=!0,this.jt=t,this.Zt=i,this.Qt=s,this.Jt=t,this.Kt=i,e){const t=e.N(this.qt.bind(this));this.qt(e._()),this.ti=()=>e.U(t)}}tt(t){return this.j=t,this.Ht=!0,this}ii(t){return this.Xt=t.map(Math.abs),this.$t=!0,this}si(){return this.jt/this.Qt*this.j+this.Xt[0]}ei(){return(this.jt+this.Zt)/this.Qt*this.j-this.Xt[1]}hi(){return this.getCellSize()-this.ri()}ni(){return this.j}getCellSize(){return this.oi(this.j)}ri(){return this.Xt[0]+this.Xt[1]}ai(){return this.Xt}qt(t){this.Qt=t.reduce(ds,0),this.jt=t.reduce(((t,i,s)=>s>=this.Jt?t:t+i),0),this.Zt=t.reduce(((t,i,s)=>s>=this.Jt&&s<this.Jt+this.Kt?t+i:t),0),this.Yt=!0,this.li()}oi(t){return t*this.Zt/this.Qt}Z(){return super.Z(),this.Ht=!1,this.$t=!1,this.Yt=!1,this}J(){return super.J(),this.Ht=!0,this.$t=!0,this.Yt=!0,this}}class Hs extends Ys{constructor(t,i,s,e){super(t,i,s,e),this.ui={internal:10,function:Xs(10),number:10},this.j=1e3,this.K(1,1e3),this.ci=this.di()}ot(t,i,s,e,h){if(t===i)return!1;const r=Math.min(t,i)<js,n=Math.max(t,i)>Zs;return!r&&!n||!!h&&(i>t?{start:r?js:t,end:n?Zs:i}:{start:n?Zs:t,end:r?js:i})}dt(t){const i=this.si(),s=this.ei(),e=Math.max(t,js);return i+(this.ui.function(e)-this.ci.scaleStartLog)/this.ci.scaleIntervalLog*(s-i)}ct(t){const i=this.si(),s=(t-i)/(this.ei()-i),e=this.ci.scaleStartLog+s*this.ci.scaleIntervalLog;return this.ui.number**e}li(){this.ui&&this.di()}K(t,i){return super.K(t,i),this.ui&&this.di(),this}ii(t){return super.ii(t),this.ui&&this.di(),this}tt(t){return super.tt(t),this.ui&&this.di(),this}fi(t){return this.ui={internal:t,function:Xs(t),number:$s(t)},this}Ai(){return this.ui.internal}gi(t,i){const s=this.dt(t)+i;return this.ct(s)}yi(){return this.Ht||this.Wt||this.$t||this.Yt}di(){const t=this.ui.function(this.X),i=this.ui.function(this.$)-t,s=2*this.si()/this.j-1,e=2*this.ei()/this.j-1-s;return this.ci={scaleStartLog:t,scaleIntervalLog:i,viewportStart:s,viewportSize:e},this.ci}mi(){return this.ci}}const Xs=t=>"e"===t?_i:Mi(t),$s=t=>"e"===t?Math.E:t,js=.9*10**-20,Zs=1.1*10**25,Qs=[{prefix:"T",unit:10**12},{prefix:"B",unit:10**9},{prefix:"M",unit:1e6},{prefix:"K",unit:1e3}],Js=(t,i,s)=>{const e=Math.abs(s-i),h=Math.max(2-os(e,10),0);return t.toFixed(h)},Ks={Numeric:(t,i)=>Js(t,i.getInnerStart(),i.getInnerEnd()),NumericUnits:(t,i)=>{const s=Math.abs(i.getInnerEnd()-i.getInnerStart()),e=t<0;t=Math.abs(t);let h="",r="";if(s>=1e3&&t>1e3){let i="";for(const s of Qs){const e=Math.round(1e3*t/s.unit)/1e3;if(e>=1){i=e.toString(),r=s.prefix;break}}h=(e?"-":"")+i}else{let i=String(Math.floor(t));const r=os(t,1e3);for(let t=1;t<=r;t+=1){const s=i.length-(3*t+(t-1));i=`${i.substring(0,s)} ${i.substring(s,i.length)}`}h=(e?"-":"")+i+(s<=10?((t,i)=>{if(0===i)return"";let s=(Math.abs(t)-Math.abs(Math.floor(t))).toString().substring(1);return s.length>i&&(s=s.substring(0,i+1)),s})(t,2-os(s,10)):"")}return h+=r,h},LogarithmicExponentsRounded:(t,i,s,e=10)=>{const h=Xs(e)(t);return`${e}${qs(h)}`},LogarithmicExponents:(t,i,s,e=10)=>{const h=Xs(e),r=Math.floor(h(t)),n=t/$s(e)**r;return`${Math.round(n)}×${e}${qs(r)}`},LogarithmicExtreme:(t,i,s,e=10)=>{const h=Xs(e),r=Math.floor(h(t));return`${(t/$s(e)**r).toFixed(2)}×${e}${qs(r)}`},LogarithmicNoExponents:(t,i,s,e=10)=>{const h=Xs(e);if("e"===e)return`${Math.floor(h(t))}e`;const r=t.toString();if(t>1)return r;const n=Math.floor(h(t));return t.toFixed(Math.abs(n))},Scientific:(t,i)=>{const s=Math.max(Math.abs(i.getInnerStart()),Math.abs(i.getInnerEnd())),e=Math.floor(Math.log10(s));return 0===t?`0.00e${e<0?"":"+"}${e}`:t.toExponential(2)}},qs=t=>Math.round(t).toString().split("").map((t=>{switch(t){case"0":return"⁰";case"1":return"¹";case"2":return"²";case"3":return"³";case"4":return"⁴";case"5":return"⁵";case"6":return"⁶";case"7":return"⁷";case"8":return"⁸";case"9":return"⁹";case"-":return"⁻";default:return t}})).join("");class te extends Ys{constructor(t,i,s,e){super(t,i,s,e),this.pi=!1,this.vi=!1,this.Si=0,this.j=1e3,this.K(0,10),this.q()}yi(){return this.vi}ot(t,i,s,e,h){if(t===i)return!1;const r=Math.abs(e-s),n=Math.abs(i-t);if(!this.pi){const s=((t,i,s)=>{const e=((t,i)=>{if(i<es&&i>hs&&t<es&&t>hs){const s=Math.abs(t/2**23),e=Math.abs(i/2**23),h=Math.min(s,e);return 10**Math.floor(Math.log10(h))}})(t,i);if(void 0!==e)return e*s})(t,i,this.getCellSize());if(void 0===s)return!1;if(n>s)return!0;const e=(i+t)/2,o=(h?s/2:r/2)*(t>i?-1:1);return{start:e-o,end:e+o}}const o=10**-(12-Math.log10(Math.max(Math.abs(t),1)));if(n>o)return!0;const a=(i+t)/2,l=(h?o/2:r/2)*(t>i?-1:1);return{start:a-l,end:a+l}}li(){this.q()}dt(t){return this.si()+(t-this.X)/(this.$-this.X)*(this.ei()-this.si())}ct(t){return this.X+(t-this.si())/(this.ei()-this.si())*(this.$-this.X)}K(t,i){return super.K(t,i),this.q(),this}ii(t){return super.ii(t),this.q(),this}tt(t){return super.tt(t),this.bi=ie(this.$-this.X,this.Xt,this.j,this.Zt,this.Qt),this.q(),this}xi(){return this.pi=!0,this}Mi(){return this.pi}_i(){return Math.abs(this.wi)}Ci(){return this._i()/this.bi}ki(){return this.Ti}Fi(){return this.Ii}getPixelSize(){return this.bi}mi(){return this.ci}J(){return super.J(),this.vi=!0,this}Z(){return super.Z(),this.vi=!1,this}Pi(t,i=Ks.Numeric){return i(t,this)}Di(){const t=Math.abs(this.getInnerEnd()).toString().length,i=Math.abs(this.getInnerStart()).toString().length;return t>i?t:i}Bi(t){return ie(t,this.Xt,this.j,this.Zt,this.Qt)}q(){let t=this.X,i=this.$,s=0;this.pi&&(t=0,i=this.$-this.X,s=this.X);const e=i-t,h=ie(e,this.Xt,this.j,this.Zt,this.Qt);this.Ii=t-this.Xt[0]*h,this.Ti=i+this.Xt[1]*h;const r=this.Ti-this.Ii,n=r-this.wi,o=Math.abs(n/h),a=e-this.Si,l=Math.abs(a/h);(!this.ci||o>=.4||l>=.4)&&(this.Si=e,this.wi=r,this.bi=h,this.vi=!0);const u=this.wi*this.Qt/(2*this.Zt),c=-(this.Ii-this.wi*this.jt/this.Zt)-u,d=2*this.si()/this.j-1,f=2*this.ei()/this.j-1-d;this.ci={displacement:c,scaling:u,highPrecisionOffset:s,viewportStart:d,viewportSize:f,scaleStartLog:0,scaleIntervalLog:0}}gi(t,i){return t+this.bi*i}}const ie=(t,i,s,e=1,h=1)=>t/(s*e/h-(i[0]+i[1]));class se{Li(t,i){return"x"in t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=i),this}Z(){return this.x.Z(),this.y.Z(),this}J(){return this.x.J(),this.y.J(),this}tt(t,i){return"object"==typeof t?(this.x.tt(t.x),this.y.tt(t.y)):(this.x.tt(t),this.y.tt(i)),this}ni(){return n(this.x.ni(),this.y.ni())}Ri(t){return this.x.ii(t),this}Ei(t){return this.y.ii(t),this}ri(){return n(this.x.ri(),this.y.ri())}zi(t,i){return this.x.K(t,i),this}Vi(t,i){return this.y.K(t,i),this}getInnerIntervalPixels(){const t=this.x.getCellSize(),i=this.y.getCellSize();return{x:t-this.x.ri(),y:i-this.y.ri()}}Oi(){return this.x.yi()||this.y.yi()}}class ee extends se{constructor(){super(...arguments),this.Ni="LinearScaleXY"}ut(t,i,s,e){return this.x=new te(t.x,i.x,s.x,e?e.x:void 0),this.y=new te(t.y,i.y,s.y,e?e.y:void 0),this}Mi(){return this.x.Mi()||this.y.Mi()}Gi(){return n(this.x.getPixelSize(),this.y.getPixelSize())}mi(){return{x:this.x.mi(),y:this.y.mi()}}gi(t,i){const s=this.Gi();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}Ui(t,i,s,e){const h=this.Gi(),r=ks(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class he extends se{constructor(){super(...arguments),this.Ni="MixedScaleXY"}Mi(){return!1}gi(t,i){const s=this.x.dt(t.x),e=this.y.dt(t.y),h={x:s+i.x,y:e+i.y};return{x:this.x.ct(h.x),y:this.y.ct(h.y)}}Ui(t,i,s,e){const h={x:this.x.dt(t.x),y:this.y.dt(t.y)},r={x:this.x.dt(i.x),y:this.y.dt(i.y)},n=Cs(Ps(r,h)),o=ks(r,h),a={x:h.x+n.x*e+o.x*s,y:h.y+n.y*e+o.y*s};return{x:this.x.ct(a.x),y:this.y.ct(a.y)}}mi(){const t=this.x.mi(),i=this.y.mi();return{uScaleStart:[this.x.X,this.y.X],uScaleInterval:[this.x.getInnerInterval(),this.y.getInnerInterval()],uScaleStartLog:[t.scaleStartLog,i.scaleStartLog],uScaleIntervalLog:[t.scaleIntervalLog,i.scaleIntervalLog],uViewportStart:[t.viewportStart,i.viewportStart],uViewportSize:[t.viewportSize,i.viewportSize]}}}const re=(t,i)=>t instanceof Hs||i instanceof Hs?(new he).Li(t,i):(new ee).Li(t,i),ne=t=>"client"===t,oe=t=>!!(t&&"object"==typeof t&&"clientX"in t&&"number"==typeof t.clientX&&"clientY"in t&&"number"==typeof t.clientY),ae=t=>"relative"===t,le=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y),ue=(t,i,s)=>{if(t){const t={x:s.x.si(),y:s.y.si(),width:s.x.hi(),height:s.y.hi()};i.forEach((i=>{i.Wi=t}))}else i.forEach((t=>{t.Wi=void 0}))},ce=(t,i)=>{var s;return i?"string"==typeof i?`${t} ${i}`:!1!==(null===(s=i.Yi)||void 0===s?void 0:s.displayInCursor)&&i.getUnits()?`${t} ${i.getUnits()}`:t:t},de=t=>{let i=!1,s={type:"linear"};if(t&&(void 0!==t.opposite&&(i=t.opposite),t.type&&"linear-highPrecision"===t.type&&(s={type:"linear-highPrecision"}),t.type&&"logarithmic"===t.type)){let i=10;if(t.base)if("E"===t.base||"e"===t.base||"natural"===t.base)i="e";else if("number"==typeof t.base)i=t.base;else if("string"==typeof t.base)try{i=Number(t.base)}catch(i){console.warn(`Unidentified logarithmic base "${t.base}"`)}s={base:i,type:"logarithmic"}}return{opposite:i,type:s}},fe=(t,i,s,e=1)=>Jt(t+.1*e*(i-t)+.5*e*s.getPixelSize()*Math.sign(i-t),t,i),Ae=(t,i,s,e=1)=>{const h=s.dt(t),r=s.dt(i);return Jt(s.ct(h+.1*e*(r-h)+.5*e*Math.sign(r-h)),t,i)};var ge;!function(t){t[t.noHighlighting=0]="noHighlighting",t[t.onHover=1]="onHover"}(ge||(ge={}));class ye{constructor(t,i,e,h){this.Hi=!0,this.Xi=ge.onHover,this.$i=!1,this.ji=!0,this.L=new s,this.Zi=[],this.Qi=[],this.onMouseEnter=t=>this.L.on("mouseEnter",t),this.onMouseLeave=t=>this.L.on("mouseLeave",t),this.onMouseClick=t=>this.L.on("mouseClick",t),this.onMouseDoubleClick=t=>this.L.on("mouseDoubleClick",t),this.onMouseDown=t=>this.L.on("mouseDown",t),this.onMouseUp=t=>this.L.on("mouseUp",t),this.onMouseMove=t=>this.L.on("mouseMove",t),this.offMouseEnter=t=>this.L.off(t,"mouseEnter"),this.offMouseLeave=t=>this.L.off(t,"mouseLeave"),this.offMouseClick=t=>this.L.off(t,"mouseClick"),this.offMouseDoubleClick=t=>this.L.off(t,"mouseDoubleClick"),this.offMouseDown=t=>this.L.off(t,"mouseDown"),this.offMouseUp=t=>this.L.off(t,"mouseUp"),this.offMouseMove=t=>this.L.off(t,"mouseMove"),this.offMouseDragStart=t=>this.L.off(t,"mouseDragStart"),this.offMouseDrag=t=>this.L.off(t,"mouseDrag"),this.offMouseDragStop=t=>this.L.off(t,"mouseDragStop"),this.offMouseWheel=t=>this.L.off(t,"mouseWheel"),this.Mt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseEnter",this,i,h),this.Xi===ge.onHover&&this.setHighlight(!0)},this._t=(t,i,s)=>{this.L.emit("mouseLeave",this,i,void 0),this.Xi===ge.onHover&&this.setHighlight(!1)},this.Ft=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseMove",this,i,h)},this.wt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseClick",this,i,h)},this.Ct=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseDoubleClick",this,i,h)},this.kt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseDown",this,i,h)},this.Tt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseUp",this,i,h)},this.Pt=(t,i,s,e,h)=>{const r=this.Ji(h,i);this.L.emit("mouseDragStart",this,i,s,r)},this.It=(t,i,s,e,h,r,n)=>{const o=this.Ji(n,i);this.L.emit("mouseDrag",this,i,s,e,h,o)},this.Dt=(t,i,s,e,h,r)=>{const n=this.Ji(r,i);this.L.emit("mouseDragStop",this,i,s,e,n)},this.Bt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseWheel",this,i,h)},this.Lt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("touchStart",this,i,h),this.Xi===ge.onHover&&this.setHighlight(!0)},this.Rt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("touchMove",this,i,h)},this.Et=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("touchEnd",this,i,h),this.Xi===ge.onHover&&this.setHighlight(!1)},this.chart=t,this.Ki=i,this.qi=e,this.ts=new Map,this.ss=h,this.es=this.ss.hs(this,{rs:{themeEffectEnabled:this.qi.effectsText},ns:{}}),this.chart.us.ls.os(this,(t=>{this.ts.forEach(((i,s)=>s.cs(t))),this.Qi.forEach((i=>i.setHighlight(t))),this.Zi.forEach((i=>i.cs(t)))}),{animationEnabled:this.chart.getAnimationsEnabled()})}ds(){}fs(t,i){const s=void 0===(null==i?void 0:i.setEventHandlers)||i.setEventHandlers,e=void 0!==(null==i?void 0:i.isText)&&i.isText;this.ts.set(t,{isText:e});const h=Array.from(this.ts);this.es.rs.As(h.filter((t=>t[1].isText)).map((t=>t[0]))),this.es.ns.As(h.filter((t=>!t[1].isText)).map((t=>t[0]))),t.setMouseInteractions(this.Hi).setVisible(this.ji).cs(this.chart.us.ls.gs(this,!0)),s&&t.setMouseEnterEventHandler(this.Mt).setMouseLeaveEventHandler(this._t).setMouseClickEventHandler(this.wt).setMouseDoubleClickEventHandler(this.Ct).setMouseDownEventHandler(this.kt).setMouseUpEventHandler(this.Tt).setMouseMoveEventHandler(this.Ft).setMouseDragStartEventHandler(this.Pt).setMouseDragEventHandler(this.It).setMouseDragStopEventHandler(this.Dt).setMouseWheelEventHandler(this.Bt).setTouchStartEventHandler(this.Lt).setTouchMoveEventHandler(this.Rt).setTouchEndEventHandler(this.Et);const r=t.onDispose((()=>{t.offDispose(r),this.ts.delete(t)}))}ys(t){this.Zi=t;const i=this.chart.us.ls.gs(this,!0);t.forEach((t=>{t.cs(i).ps(this.ji)}))}Ji(t,i){}vs(t){const i=this.chart.us.Ss(t);if(i&&Array.from(this.ts.keys()).includes(i.entity))return this.Ji(i.info,t)}setEffect(t){return this.es.rs.bs(t&&this.qi.effectsText),this.es.ns.bs(t),this.chart.us.xs(),this}getEffect(){return this.es.rs.Ms()||this.es.ns.Ms()}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}setIcon(t){return this._s=t,this.chart.us.xs(),this}getIcon(){return this._s}setName(t){return this.ws=t,this.Qi.forEach((i=>i.setText(t))),this}getName(){return this.ws||"Component"}dispose(){return this.$i||(this.$i=!0,this.ts.forEach(((t,i)=>i.dispose())),this.Ki(this),this.Qi.forEach((t=>{t.dispose()})),this.Qi.length=0,this.L.emit("dispose",this),this.chart.us.xs()),this}setVisible(t){return t===this.ji||(this.ji=t,this.ts.forEach(((i,s)=>s.setVisible(t))),this.Zi.forEach((i=>i.ps(t))),this.Qi.forEach((i=>i.setOn(t))),this.L.emit("visibleStateChanged",this,this.ji),this.chart.us.xs()),this}getVisible(){return this.ji}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}setHighlight(t){return this.chart.us.ls.Cs(this,t),this.L.emit("highlight",this,t),this}getHighlight(){return this.chart.us.ls.gs(this)}setAnimationHighlight(t){return this.chart.us.ls.ks(this,t),this}getAnimationHighlight(){return this.chart.us.ls.Ts(this)}setMouseInteractions(t){return this.Hi=t,this.ts.forEach(((i,s)=>s.setMouseInteractions(t))),this.chart.us.xs(),this}getMouseInteractions(){return this.Hi}getIsUnderMouse(){if(!this.chart.us.Fs())return!1;for(const t of this.ts)if(t[0].Is)return!0;for(const t of this.Zi)if(this.chart.us.Ps(t))return!0;return!1}setHighlightOnHover(t){return this.Xi=t?ge.onHover:ge.noHighlighting,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Xi!==ge.noHighlighting}attach(t,i=!0,s=!1){return this.styleLegendEntry(t,s),Wi(t,[this],{toggleVisibilityOnClick:i,label:this.getName(),style:void 0}),this.Qi.push(t),t.onDispose((()=>{const i=this.Qi.indexOf(t);i>=0&&this.Qi.splice(i,1)})),this}Ds(){return this._s}onMouseDragStart(t){return this.L.on("mouseDragStart",t)}onMouseDrag(t){return this.L.on("mouseDrag",t)}onMouseDragStop(t){return this.L.on("mouseDragStop",t)}onMouseWheel(t){return this.L.on("mouseWheel",t)}onTouchStart(t){return this.L.on("touchStart",t)}onTouchMove(t){return this.L.on("touchMove",t)}onTouchEnd(t){return this.L.on("touchEnd",t)}isDisposed(){return this.$i}onDispose(t){return this.L.on("dispose",t)}offTouchStart(t){return this.L.off(t,"touchStart")}offTouchMove(t){return this.L.off(t,"touchMove")}offTouchEnd(t){return this.L.off(t,"touchEnd")}offDispose(t){return this.L.off(t,"dispose")}}class me extends ye{constructor(t,i,s,e,h,r,n,o){super(i,s,n,o),this.Bs=!0,this.Ls=t,this.axis=e,this.ft=h,this.Rs=r,this.Es()}setClipping(t){return this.Bs=t,this.Ls.xs(),this}getClipping(){return this.Bs}}const pe=t=>{const i=t.length;if(i>0){let s=0,e=0;for(let h=0;h<i;h+=1)s+=t[h].x,e+=t[h].y;return n(s/i,e/i)}return n(0,0)},ve=(...t)=>{const i=t.length,s=new Array(i).fill(!1),e=(e,h)=>{for(let r=0;r<i;r+=1){const i=t[r],n=i.zs(e,h);n?i.Vs(e,h,!0):s[r]&&s[r]&&i.Vs(e,h,!1),s[r]=n}return!1};return{onTouchStart:e,onTouchMove:e,onTouchEnd:e}},Se=class{constructor(t,i=300){this.Os=!1,this.Ns=[],this.Gs=300,this.Us=t,this.Gs=i}zs(t,i){const s=Yt.performance.now();let e=!1;for(let t=0;t<this.Ns.length;t+=1)s-this.Ns[t].time>=this.Gs?(this.Ns.splice(t,1),t-=1):this.Ns[t].state&&(e=!0);return this.Os?0===i.interactions.length&&(this.Ns.push({state:!1,time:s}),this.Os=!1):1===i.interactions.length&&"pointerdown"===i.type&&(this.Ns.push({state:!0,time:s}),e=!0,this.Os=!0),e}Vs(t,i,s){if(s){const s=this.Ns.reduce(((t,i)=>(i.state?t.on+=1:t.off+=1,t)),{on:0,off:0});s.on>=2&&s.off>=1&&(this.Us(t,i),this.Ns.length=0)}}},be=class{constructor(t,i,s,e=1,h=100){this.Ws=t,this.Ys=i,this.Hs=s,this.Xs=e,this.$s=h}zs(t,i){const s=i.interactions.length;if(s===this.Xs){if(void 0!==this.js)return!0;if("pointerdown"===i.type&&(1===s||(t=>{const i=t.length;if(i>0){const s=pe(t);let e=0;for(let h=0;h<i;h+=1)e=Math.max(e,gs(s,n(t[h].x,t[h].y)));return e}return es})(i.interactions)<=this.$s))return this.js=pe(i.interactions),!0}return!1}Vs(t,i,s){const e=this.Zs;if(!s||i.forceTouchEnd||"pointerup"===i.type)this.Hs&&this.Hs(t,this.js,e,i),this.js=void 0,this.Zs=void 0;else{const s=pe(i.interactions);"pointerdown"===i.type?this.Ws&&this.Ws(t,this.js,i):"pointermove"===i.type&&this.Ys&&this.Ys(t,this.js,s,n(s.x-e.x,e.y-s.y),i),this.Zs=s}}},xe=class{constructor(t,i,s){this.Qs=!1,this.Ws=t,this.Ys=i,this.Hs=s}zs(t,i){return this.Qs?2!==i.interactions.length&&(this.Qs=!1):2===i.interactions.length&&"pointerdown"===i.type&&(this.Qs=!0),this.Qs}Vs(t,i,s){let e,h;if(s&&"pointerup"!==i.type){if("pointerdown"===i.type){const s=i.interactions;e=s[0],h=s[1],this.Ws(t,e,h,i)}else if("pointermove"===i.type){e=i.interactions[0],h=i.interactions[1];const s=this.Js,r=this.Ks,o=n(e.x-s.x,s.y-e.y),a=n(h.x-r.x,r.y-h.y);this.Ys(t,e,h,o,a,i)}}else{const s=i.interactions;this.Hs(t,s[0],s[1],i)}this.Js=e,this.Ks=h}},Me=i({type:"linestyle",lineType:"solid",fillStyle:new W({color:S(255,255,255)}),thickness:1});class _e extends Me{constructor(t){super({...t,lineType:"solid"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}O(){const t=this.getThickness();return t<0?1:t}}const we=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"solid"!==t.lineType);class Ce{constructor(t,i){this.qs=t,this.te=i,this.ie=i.rows*sh,this.se=i.columns*eh}}var ke,Te;!function(t){t[t.ZoomIn=0]="ZoomIn",t[t.ZoomInX=1]="ZoomInX",t[t.ZoomInY=2]="ZoomInY",t[t.ZoomOut=3]="ZoomOut",t[t.ZoomOutX=4]="ZoomOutX",t[t.ZoomOutY=5]="ZoomOutY",t[t.ZoomToFit=6]="ZoomToFit",t[t.ToggleAnimations=7]="ToggleAnimations"}(ke||(ke={})),function(t){t[t.Circle=0]="Circle",t[t.Rectangle=1]="Rectangle",t[t.RoundedRectangle=2]="RoundedRectangle"}(Te||(Te={}));const Fe={x:-43,y:0},Ie={x:-65,y:0},Pe={x:-86,y:0},De={x:-107,y:-1},Be={x:-128,y:-3},Le={x:-150,y:0},Re={x:-171,y:0},Ee={x:-276,y:0},ze={x:-298,y:0},Ve={x:0,y:0},Oe={x:-21,y:0};class Ne extends Ce{constructor(t,i,s,e){super(t,s),this.ee=Yt.document.createElement("button"),this.he=Yt.document.createElement("div"),this.re=Yt.document.createElement("label"),this.te=s,this.ne=i,this.oe=e}ae(t,i,s,e){this.le(t,e),this.ue(),this.ce(i),this.de(),this.re.textContent=s||"";const h=Yt.document.createElement("div");this.fe(h),this.ee.onclick=this.onClick.bind(this),h.appendChild(this.he),h.appendChild(this.re),this.ee.appendChild(h)}de(){this.ee.style.cursor="pointer"}fe(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignContent="center",t.style.flexDirection="column"}ce(t){"string"==typeof t?(this.he.style.backgroundImage=`url(${t})`,this.he.style.backgroundSize="100%",this.he.style.backgroundRepeat="no-repeat",this.he.style.backgroundPosition="center",this.he.style.width="20px",this.he.style.height="20px"):this.applyStyleForSprite(t),this.he.style.margin="auto"}ue(){switch(this.ne){case Te.RoundedRectangle:this.ee.style.borderRadius="10px";break;case Te.Rectangle:this.ee.style.borderRadius="0px";break;case Te.Circle:default:this.ee.style.borderRadius="31px"}}le(t,i){this.ee.style.width=`${this.se.toString()}px`,this.ee.style.height=`${this.ie.toString()}px`,this.ee.style.backgroundColor=t,this.ee.style.opacity=i||hh,this.ee.style.alignItems="center",this.ee.style.border="2px solid #707070",this.ee.style.transition="background-color .8s ease"}applyStyleForSprite(t){this.he.style.backgroundImage=`url(${this.qs}/${rh})`,this.he.style.backgroundPositionX=`${t.x}px`,this.he.style.backgroundPositionY=`${t.y}px`,this.he.style.backgroundSize="1600%",this.he.style.backgroundRepeat="no-repeat",this.he.style.width="20px",this.he.style.height="20px"}Ae(t){return t.appendChild(this.ee),t}ge(){return this.ee}}class Ge extends Ne{constructor(t,i,s,e){super(t,i,s,e),this.ye="",this.me="",this.pe=!1,this.oe=e}ve(){this.Se(),this.onToggledStateAction()}be(){this.xe(),this.onInitialStateAction()}xe(){this.Me(this.ye)}Se(){this.Me(this.me)}Me(t){"string"==typeof t?this.he.style.background=t:(this.he.style.backgroundImage=`url(${this.qs}/${rh})`,this.he.style.backgroundPositionX=`${t.x}px`,this.he.style.backgroundPositionY=`${t.y}px`)}onClick(){this.pe?this.be():this.ve(),this.pe=!this.pe}}class Ue extends Ne{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.oe=i;const e=this.oe.getTheme();this.ae(e.onScreenMenuBackgroundColor.toRGBAString(),Fe)}onClick(){const t=this.oe._e();t&&this.oe.zoom(t,{x:-1,y:-1})}}class We extends Ne{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.oe=i;const e=this.oe.getTheme();this.ae(e.onScreenMenuBackgroundColor.toRGBAString(),De)}onClick(){const t=this.oe._e();t&&this.oe.zoom(t,{x:-1,y:0})}}class Ye extends Ne{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.oe=i;const e=this.oe.getTheme();this.ae(e.onScreenMenuBackgroundColor.toRGBAString(),Le)}onClick(){const t=this.oe._e();t&&this.oe.zoom(t,{x:0,y:-1})}}class He extends Ne{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.oe=i;const e=this.oe.getTheme();this.ae(e.onScreenMenuBackgroundColor.toRGBAString(),Ie)}onClick(){const t=this.oe._e();t&&this.oe.zoom(t,{x:1,y:1})}}class Xe extends Ne{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.oe=i;const e=this.oe.getTheme();this.ae(e.onScreenMenuBackgroundColor.toRGBAString(),Be)}onClick(){const t=this.oe._e();t&&this.oe.zoom(t,{x:1,y:0})}}class $e extends Ne{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.oe=i;const e=this.oe.getTheme();this.ae(e.onScreenMenuBackgroundColor.toRGBAString(),Re)}onClick(){const t=this.oe._e();t&&this.oe.zoom(t,{x:0,y:1})}}class je extends Ge{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.oe=i;const e=this.oe.getTheme();this.ye=Ee,this.me=ze,this.ae(e.onScreenMenuBackgroundColor.toRGBAString(),this.ye)}onToggledStateAction(){this.oe.setAnimationsEnabled(!1)}onInitialStateAction(){this.oe.setAnimationsEnabled(!0)}}class Ze extends Ne{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.oe=i;const e=this.oe.getTheme();this.ae(e.onScreenMenuBackgroundColor.toRGBAString(),Pe)}onClick(){this.oe.forEachAxis((t=>{t.fit(!0)}))}}class Qe extends Ne{constructor(t,i,s){super(t,i.shape||nh,i.dimensions||{rows:1,columns:1},s);const e=s.getTheme(),h=i.color||e.onScreenMenuBackgroundColor.toRGBAString(),r=i.icon||"",n=i.label||"",o=i.opacity||"";this.ae(h,r,n,o),this.we=i.action}onClick(){this.we(this.oe)}}class Je extends Ge{constructor(t,i,s,e){super(t,i,{rows:1,columns:1},s),this.oe=s,this.Ce=e,this.ye=Oe,this.me=Ve,this.ae(oh,this.ye)}xe(){this.Me(this.ye),this.ee.style.backgroundColor=oh,this.ee.style.border="2px solid #707070",this.ee.style.margin="0px"}Se(){this.Me(this.me),this.ee.style.background="#FECC00 0% 0% no-repeat padding-box",this.ee.style.border="10px solid #BCBCBC12",this.ee.style.margin="1px"}onToggledStateAction(){var t;null===(t=this.Ce)||void 0===t||t.style.setProperty("display","block")}onInitialStateAction(){var t;null===(t=this.Ce)||void 0===t||t.style.setProperty("display","none")}}var Ke;!function(t){t.Move="move",t.ResizeColumn="col-resize",t.ResizeRow="row-resize",t.Horizontal="ew-resize",t.Vertical="ns-resize",t.NorthWest="nw-resize",t.NorthEast="ne-resize",t.Copy="copy",t.CrossHair="crosshair",t.Default="default",t.Help="help",t.Restricted="not-allowed",t.None="none",t.Point="pointer",t.Text="text",t.Wait="wait",t.ZoomIn="zoom-in",t.ZoomOut="zoom-out"}(Ke||(Ke={}));const qe={LeftBottom:n(-1,-1),CenterBottom:n(0,-1),RightBottom:n(1,-1),LeftCenter:n(-1,0),Center:n(0,0),RightCenter:n(1,0),LeftTop:n(-1,1),CenterTop:n(0,1),RightTop:n(1,1)},th=new W({color:S(255,255,255,0)}),ih=new _e({thickness:1,fillStyle:th}),sh=60,eh=60,hh="1.0",rh="osm/osm-sprite-transparent.png",nh=Te.Circle,oh="#363636";var ah;!function(t){t[t.TopRight=0]="TopRight",t[t.TopLeft=1]="TopLeft",t[t.BottomLeft=2]="BottomLeft",t[t.BottomRight=3]="BottomRight"}(ah||(ah={}));class lh extends me{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.ws="Band",this.ke=0,this.Te=0,this.Fe=this.qi.bandFillStyle,this.Ie=this.qi.bandStrokeStyle,this.Pe=!0,this.De=this.Ls.Re(this.ft).Le(this.Fe).Be(this.Ie).cs(this.getHighlight()),this.fs(this.De)}setValueStart(t){return this.ke=t,this.L.emit("valueChange",this,this.ke,this.Te),this.Ls.xs(),this}getValueStart(){return this.ke}setValueEnd(t){return this.Te=t,this.L.emit("valueChange",this,this.ke,this.Te),this.Ls.xs(),this}getValueEnd(){return this.Te}setFillStyle(t){this.Fe="function"==typeof t?t(this.Fe):t;const i=this.Fe;return this.De.Le(i),this.Ls.xs(),this}getFillStyle(){return this.Fe}setStrokeStyle(t){this.Ie="function"==typeof t?t(this.Ie):t;const i=this.Ie;return this.De.Be(i),this.Ls.xs(),this}getStrokeStyle(){return this.Ie}onValueChange(t){return this.L.on("valueChange",t)}offValueChange(t){return this.L.off(t,"valueChange")}Ee(){return this.De.ze(this.Rs.toVec2(this.ke,this.Rs.getHeight(this.ft).getInnerStart())).tt(this.Rs.toVec2(this.Te-this.ke,this.Rs.getHeight(this.ft).getInnerInterval())),ue(this.Bs,[this.De],this.ft),this}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe,stroke:this.Ie})}Ve(t,i){t.cs(i),this.Ls.xs()}setDefaultMouseInteractions(t){return this.Pe=t,this}Es(){let t,i;const s=(s,e)=>{if(!this.Pe)return;const h=pt(this.Ls.us.Oe(e.x,e.y),this.Ls.us.ft,this.ft),r=this.Rs.getWidth(h),n=this.axis.ft.dt(this.ke),o=this.axis.ft.dt(this.Te),a=(this.axis.ft.dt(r)-n)/(o-n);t=!(a<.1||a>.9),!1===t&&(i=a<.5)},e=(s,e,h,r,n)=>{if(!this.Pe)return;const o=this.Rs.getWidth(r);t?(this.ke=this.axis.ft.gi(this.ke,o),this.Te=this.axis.ft.gi(this.Te,o)):i?this.ke=this.axis.ft.gi(this.ke,o):this.Te=this.axis.ft.gi(this.Te,o),mi(n),this.L.emit("valueChange",this,this.ke,this.Te),this.Ls.xs()};this.onMouseMove(((i,e)=>{if(!this.Pe)return;s(0,n(e.clientX,e.clientY));const h=t?Ke.Point:this.Rs.getWidth({x:Ke.Horizontal,y:Ke.Vertical});this.Ne=this.chart.engine.setMouseStyle(h,this.Ne)})),this.onMouseLeave((()=>{this.Pe&&(this.chart.engine.restoreMouseStyle(this.Ne),this.Ne=void 0)})),this.onMouseDrag(((t,i,s,h,r)=>{this.Pe&&0===s&&e(0,0,0,r,i)}));const h=ve(new be(s,e));this.onTouchStart(h.onTouchStart),this.onTouchMove(h.onTouchMove),this.onTouchEnd(h.onTouchEnd)}}class uh extends me{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.ws="Constant Line",this.S=0,this.Ie=this.qi.constantLineStrokeStyle,this.Ge=!0,this.Pe=!0,this.Ue=this.Ls.Ye(this.ft).We(this.Ie).cs(this.getHighlight()),this.fs(this.Ue)}setValue(t){return this.S=t,this.L.emit("valueChange",this,this.S),this.Ls.xs(),this}getValue(){return this.S}setStrokeStyle(t){this.Ie="function"==typeof t?t(this.Ie):t;const i=this.Ie;return this.Ue.We(i),this.Ls.xs(),this}getStrokeStyle(){return this.Ie}setInteractionMoveByDragging(t){return this.Ge=t,this}getInteractionMoveByDragging(){return this.Ge}onValueChange(t){return this.L.on("valueChange",t)}offValueChange(t){return this.L.off(t,"valueChange")}Ee(){return this.Ue.Xe(this.Rs.toVec2(this.S,this.Rs.getHeight(this.ft).getInnerStart())).He(this.Rs.toVec2(this.S,this.Rs.getHeight(this.ft).getInnerEnd())),ue(this.Bs,[this.Ue],this.ft),this}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{stroke:this.Ie})}Ve(t,i){t.cs(i),this.Ls.xs()}setDefaultMouseInteractions(t){return this.Pe=t,this}Es(){const t=(t,i)=>{this.Pe&&this.Ge&&(this.S=this.axis.ft.gi(this.S,this.Rs.getWidth(i)),this.L.emit("valueChange",this,this.S),this.Ls.xs(),mi(t))};this.onMouseMove((()=>{if(this.Pe&&this.Ge){const t=this.Rs.getWidth({x:Ke.Horizontal,y:Ke.Vertical});this.Ne=this.chart.engine.setMouseStyle(t,this.Ne)}})),this.onMouseLeave((()=>{this.Pe&&this.Ge&&(this.chart.engine.restoreMouseStyle(this.Ne),this.Ne=void 0)})),this.onMouseDrag(((i,s,e,h,r)=>{this.Pe&&this.Ge&&0===e&&t(s,r)}));const i=ve(new be(void 0,((i,s,e,h,r)=>t(r,h))));this.onTouchStart(i.onTouchStart),this.onTouchMove(i.onTouchMove),this.onTouchEnd(i.onTouchEnd)}}const ch={fitting:{start:(t,i,s,e)=>i>=t?s:e,end:(t,i,s,e)=>i>=t?e:s,allowIntervalLengthChange:!0},expansion:{start:(t,i,s,e)=>i>=t?s<t?s:t:e>t?e:t,end:(t,i,s,e)=>i>=t?e>i?e:i:s<i?s:i,allowIntervalLengthChange:!0},progressive:{start:(t,i,s,e)=>i>t?ch.progressive.end(t,i,s,e)+(t-i):e>t?e:t,end:(t,i,s,e)=>i>t?e>i?e:i:ch.progressive.start(t,i,s,e)+(i-t),allowIntervalLengthChange:!1},regressive:{start:(t,i,s,e)=>i>t?s<t?s:t:ch.regressive.end(t,i,s,e)+(t-i),end:(t,i,s,e)=>i>t?ch.regressive.start(t,i,s,e)+(i-t):s<i?s:i,allowIntervalLengthChange:!1},fittingStepped:{start:(t,i,s,e)=>{if(i>=t){if(s<t)return t-(i-t);const e=t+.5*(i-t);return s>e?e:t}if(e>t)return t+(t-i);const h=t-.5*(t-i);return e<h?h:t},end:(t,i,s,e)=>{if(i>=t){if(e>i)return i+(i-t);const s=i-.5*(i-t);return e<s?s:i}if(s<i)return i-(t-i);const h=i+.5*(t-i);return s>h?h:i},allowIntervalLengthChange:!0}},dh={Empty:"Empty",Numeric:"Numeric",DateTime:"DateTime",Time:"Time"},fh=t=>void 0!==t.$e&&void 0!==t.je,Ah=t=>void 0!==t.Ze,gh=t=>void 0!==t.Qe,yh=(t,i)=>[t,i],mh=(t,i,s,e)=>{const h=[],r=Math.round(Math.abs((t-i)/s));for(let n=1;n<r;n+=1){const r=Math.round((t+s*n)*e)/e;r<i&&h.push(r)}return h},ph=(t,i,s,e,h)=>{Qt(t,0)&&(t=0),Qt(i,0)&&(i=0);const r=[];let n=void 0!==e?((t,i,s)=>t-(t-s)%i)(t,s,e):t;if(s<=0)throw new Error(`_getRegularGreatKeyValues unit less than or equal to 0, unit: ${s}`);for(;n<i&&!1===Qt(n,i);)r.push(n),n+=s,n=Math.round(n*h)/h;return r.push(n),r},vh=(t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i&&!1===Qt(r,i);)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h},Sh=(t,...i)=>{const s=i.length>0?i.length:t?1:0;return(e,h,r,n,o,a)=>{if(h>=s)return;const l=i[h]||1;let u=!1,c=!1,d=1;return t&&(u="ignore"in t?"first"===t.ignore||"both"===t.ignore:u,c="ignore"in t?"last"===t.ignore||"both"===t.ignore:c,d="offset"in t&&void 0!==t.offset?t.offset:d),((t,i,s,e,h)=>(s&&(t=t.filter(((t,i)=>i>0))),e&&(t=t.filter(((i,s)=>s<t.length-1))),t.filter(((t,s)=>(s+h)%i==0))))(e,l,u,c,d)}},bh=(...t)=>{const i=t.length>0?t.length:0;return(s,e,h,r,n,o)=>{if(e>=i)return;const a=t[e]||1;return s.filter(((t,i)=>i%a==0))}},xh=i({type:"empty-ticks",cursorFormatter:void 0});class Mh extends xh{Je(t){return{Ke:[],qe:[],th:this.cursorFormatter?this.cursorFormatter:Ks.Numeric,ih:void 0,sh:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}}const _h=t=>!(!t||"object"!=typeof t||!("type"in t)||"empty-ticks"!==t.type),wh=(t,i)=>{if(i.has(t))return i.get(t);const s=vs(t.hh.eh());if(Oi(s))return s;const e=t.rh.gi(s.min,{x:-5,y:-5}),h=t.rh.gi(s.min,{x:5,y:5}),r=t.rh.gi(s.max,{x:-5,y:-5}),n=t.rh.gi(s.max,{x:5,y:5}),o={min:{x:Math.min(e.x,h.x,r.x,n.x),y:Math.min(e.y,h.y,r.y,n.y)},max:{x:Math.max(e.x,h.x,r.x,n.x),y:Math.max(e.y,h.y,r.y,n.y)}};return i.set(t,o),o},Ch=t=>{const i=new Map;if(!_h(t)){for(const s of t.Ke)i.set(s,new Map);for(const s of t.qe)i.set(s,new Map)}return i},kh=(new Mh).Je({type:"linear"});class Th{constructor(t,i,e,h,r,n,o){this.L=new s,this.oh=kh,this.ah=dh.Empty,this.lh=new Map,this.uh=new Map,this.dh=ch.fitting,this.fh=!0,this.Ah=K((()=>this.chart.us.xs()))(300,Q.linear),this.gh=!0,this.ji=!0,this.yh=!1,this.mh=hs,this.ph=!1,this.Sh=!1,this.bh=hs,this.xh=hs,this.Mh=hs,this._h=!1,this.wh="",this.Ch={},this.kh=()=>{this.Th.setMouseInteractions(!0).setMouseMoveEventHandler(((t,i)=>this.L.emit("mouseMoveTitle",this,i))).setMouseEnterEventHandler(((t,i)=>this.L.emit("mouseEnterTitle",this,i))).setMouseLeaveEventHandler(((t,i)=>this.L.emit("mouseLeaveTitle",this,i))).setMouseDownEventHandler(((t,i)=>this.L.emit("mouseDownTitle",this,i))).setMouseUpEventHandler(((t,i)=>this.L.emit("mouseUpTitle",this,i))).setMouseClickEventHandler(((t,i)=>this.L.emit("mouseClickTitle",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.L.emit("mouseDoubleClickTitle",this,i))).setMouseWheelEventHandler(((t,i)=>this.L.emit("mouseWheelTitle",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.L.emit("mouseDragStartTitle",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.L.emit("mouseDragTitle",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.L.emit("mouseDragStopTitle",this,i,s,e))).setTouchStartEventHandler(((t,i)=>this.L.emit("touchStartTitle",this,i))).setTouchMoveEventHandler(((t,i)=>this.L.emit("touchMoveTitle",this,i))).setTouchEndEventHandler(((t,i)=>this.L.emit("touchEndTitle",this,i))),this.kh=void 0},this.Fh=(t,i,s,e,h,r)=>{const n=[],o=[];for(const a of t){if(a<s||a>e){n.push(a);continue}const t=this.lh.get(i),l=(t?t.get(a):void 0)||this.Ih(a,i);l.Ph=!1;const u=this.Dh(l,h);r.set(l,u),n.push(a),o.push(l)}return{displayedKeyValues:n,createdTicks:o}},this.Bh=(t,i,s,e,h,r,n,o,a,l,u)=>{const c=[];for(let d=0;d<t.length;d+=1){const f=t[d],A=i[d];let g,y,m;if(this.Lh(f,s)){const i=wh(f,a);y=[t[d-1],t[d+1]],m=y.concat(l).concat(u).filter((t=>void 0!==t)).filter((i=>i.Rh!==s||!!t.find((t=>t===i)))).map((t=>as(i,wh(t,a))?t:void 0)),g=m.some((t=>void 0!==t))}else g=!1;if(g){let t=!0;const i=m.filter((t=>void 0!==t));if(t&&i.every((t=>Ah(t.Rh)))&&(t=!1),t&&s.Eh&&s.Eh.zh&&!1===s.Eh.zh(A,e,h,r,n,o)&&(t=!1),!1===t)continue;return!0}c.push(f)}return c},this.formatValue=t=>this.oh.th(t,this.ft),this.Vh=!0,this.Oh=!0,this.chart=t,this.Nh=i,this.qi=h,this.Gh=n,this.ft=e,this.Uh=o,"logarithmic"===o.type&&this.setAnimationZoom(Q.logarithmic($s(o.base))),this.Wh=n.numeric,this.Yh("Numeric"),this.Hh=e.getInnerStart(),this.Xh=e.getInnerEnd(),this.setAnimationsEnabled(r)}setUnits(t,i={}){return this.$h=t,this.Yi=i,this.jh(),this}getUnits(){return this.$h}setDefaultInterval(t,i){return this.Zh=t,!1!==(null==i?void 0:i.applyImmediately)&&(this._h=!0,this.chart.us.xs()),this}getDefaultInterval(){return this.Zh}getTitle(){return this.wh}setTitle(t){return this.wh=t,this.jh(),this}getTitleFillStyle(){return this.Th.Qh()}setIntervalRestrictions(t){return this.Jh=t,this.chart.us.xs(),this}getIntervalRestrictions(){if("function"==typeof this.Jh){const t=this.Kh();return this.Jh({curStart:this.Hh,curEnd:this.Xh,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max})}return this.Jh}setTitleFillStyle(t){return this.Th.Le(t),this.chart.us.xs(),this}getTitleFont(){return this.Th.qh()}setTitleFont(t){return this.Th.tr(t),this.chart.us.xs(),this}setTitleRotation(t){return this.Th.ir(t),this.chart.us.xs(),this}getTitleRotation(){return this.Th.sr()}setTitleEffect(t){return this.er.bs(t),this.chart.us.xs(),this}getTitleEffect(){return this.er.Ms()}Yh(t,i){if(this.lh.size>0&&this.hr(),"Empty"===t){const s=i||(t=>t);this.Wh=s(new Mh),this.oh=this.Wh.Je(this.Uh),this.ah=t}else if("Numeric"===t){"Numeric"!==this.ah&&(this.Wh=this.Gh.numeric);const s=i||(t=>t);this.Wh=s(this.Wh),this.oh=this.Wh.Je(this.Uh),this.ah=t}else if("DateTime"===t){"DateTime"!==this.ah&&(this.Wh=this.Gh.datetime);const s=i||(t=>t);this.Wh=s(this.Wh),this.oh=this.Wh.Je(this.Uh),this.ah=t}else if("Time"===t){"Time"!==this.ah&&(this.Wh=this.Gh.time);const s=i||(t=>t);this.Wh=s(this.Wh),this.oh=this.Wh.Je(this.Uh),this.ah=t}return this.uh.forEach((t=>Array.from(t.values()).forEach((t=>t.dispose())))),this.uh=Ch(this.oh),this.chart.us.xs(),this}rr(){return this.oh}nr(t){this.oh=t,this.uh.forEach((t=>Array.from(t.values()).forEach((t=>t.dispose())))),this.uh=Ch(this.oh),this.chart.us.xs()}setInterval(t){const{start:i,end:s,animate:e,stopAxisAfter:h}=t;return this.At(void 0!==i?i:this.Hh,void 0!==s?s:this.Xh,void 0!==e&&e,void 0===h||h,"userSetInterval"),this}At(t,i,s=!1,e=!0,h){let r={start:t,end:i};const n=!0,o=Math.abs(i-t);if(Math.abs(this.Xh-this.Hh),void 0!==this.oh.ih&&this.oh.ih>o){const s=(i+t)/2,e=this.oh.ih/2*(t>i?-1:1);r={start:s-e,end:s+e}}if(void 0!==this.oh.sh&&this.oh.sh<o){const s=(i+t)/2,e=this.oh.sh/2*(t>i?-1:1);r={start:s-e,end:s+e}}const a=this.ft.ot(r.start,r.end,this.Hh,this.Xh,n);if(!1===a)return this;if(!0===a);else if(r=a,"zoomBandChart"===h)return this;let l;switch(h){case"userSetInterval":case"userFit":case"interactionSetInterval":case"interactionZoom":l=!0;break;case"zoomBandChart":case"synchronizedAxis":l=!1;break;default:return Yi(0,""),this}if(this.ar&&this.ar.finishAll(!1),this.Ah&&(!0===s||s>0)){this.setStopped(!0);const t=!0===s?void 0:s,i=!this.ar||this.ar.isOver()?this.Ah:this.ar.NextAnimation.bind(this);this.ar=i([[this.Hh,r.start],[this.Xh,r.end]],(([t,i])=>{this.lr(t,i,n)}),t),this.ar.onAnimationEnd((()=>{this.ar=void 0,l&&(this.Mh=Yt.performance.now())})),this.ar.onAnimationEnd((()=>this.setStopped(e)))}else this.lr(r.start,r.end,n),this.setStopped(e),l&&(this.Mh=Yt.performance.now());return this}getInterval(){return{start:this.Hh,end:this.Xh}}setStopped(t){return t===this.yh||(t&&(this.ar&&this.ar.finishAll(!1),this.ar=void 0),this.yh=t,this.L.emit("stoppedStateChanged",this,this.yh),this.mh=Yt.performance.now(),this.chart.us.xs()),this}getStopped(){return this.yh}onStoppedStateChanged(t){return this.L.on("stoppedStateChanged",t)}offStoppedStateChanged(t){return this.L.off(t,"stoppedStateChanged")}fit(t,i){const s=this.Kh(),e=this.Zh||Bh,h="function"==typeof e?e({curStart:this.Hh,curEnd:this.Xh,dataMin:null==s?void 0:s.min,dataMax:null==s?void 0:s.max}):e;return this.At(void 0!==h.start?h.start:this.Hh,void 0!==h.end?h.end:this.Xh,void 0!==h.animate?h.animate:void 0===t||t,void 0!==h.stopAxisAfter?h.stopAxisAfter:void 0===i||i,"userFit"),this}setScrollStrategy(t){return this.dh=t,this.chart.us.xs(),this}getScrollStrategy(){return this.dh}setAnimationScroll(t){return this.fh=Boolean(t),this.chart.us.xs(),this}setAnimationZoom(t,i=300){return this.ar&&(this.ar.finishAll(!1),this.ar=void 0),this.Ah=t?K((()=>this.chart.us.xs()))(i,t):void 0,this}setAnimationsEnabled(t){return this.gh=t,t?(this.setAnimationScroll(!0),this.setAnimationZoom(Q.ease,void 0)):(this.setAnimationScroll(void 0),this.setAnimationZoom(void 0)),this}getAnimationsEnabled(){return this.gh}setVisible(t){const i=this.ji!==t;return this.ji=t,this.Th.setVisible(t),this.ur((i=>{i.hh.setVisible(t)})),i&&this.L.emit("visibleStateChanged",this,this.ji),this}getVisible(){return this.ji}onIntervalChange(t){return this.L.on("scaleChange",t)}offIntervalChange(t){return this.L.off(t,"scaleChange")}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}cr(t,i){this.kh&&this.kh();const s=new Map;if(_h(this.oh)||!this.ji)return this.hr(),s;i=i||new Map;const e=this.dr(),h=e.min,r=e.max,n=r-h,o=t.physicalAxisSize;this.Ch.physicalAxisSize=o;const a=Ih(this.oh,h,r,this.Hh,this.Xh,o),l=[];if(this.Ar(),l.push(...this.gr(this.oh,h,r,a,i,t,s)),this.yr(this.oh,h,r,a,i,t,l,s),this.mr(),a)for(const[t,i]of this.uh){const s=a.get(t);if(void 0!==s)for(const[t,e]of i)s.includes(t)||(null==e||e.dispose(),i.delete(t))}return this.Ch.min=h,this.Ch.max=r,this.Ch.scaleInterval=n,this.Ch.physicalAxisSize=o,s}pr(t){const i=t.Rh.je;t.hh.vr(i(t.S,this.ft)).Vs()}Sr(t,i){const s=i.$e;t.hh.Le(s.getLabelFillStyle()).tr(s.getLabelFont()).ir(s.getLabelRotation())}Ih(t,i){const s=this.uh.get(i);let e=s.get(t);e?(s.delete(t),e.Rh=i,e.ps(!0)):e=this.br(t,i);const h=this.lh.get(i)||new Map;return h.set(t,e),this.lh.set(i,h),this.Sr(e,i),e}Dh(t,i){const s=this.Mr(t,i);return this.pr(t),s}gr(t,i,s,e,h,r,n){const o=[];for(const a of t.Ke){const t=e.get(a);for(const e of t){if(e<i||e>s)continue;const t=this.lh.get(a),l=(t?t.get(e):void 0)||this.Ih(e,a),u=this.Dh(l,r),c=wh(l,h);o.find((t=>as(c,wh(t,h))))&&l.hh.setVisible(!1),l.Ph=!1,n.set(l,u),o.push(l)}}return o}yr(t,i,s,e,h,r,n,o){let a,l=[];for(const u of t.qe){const t=e.get(u);if(!t)break;let c;if(void 0===a)c=[{start:i,end:s,keyValues:t}];else{c=[];for(let i=0;i<a.length-1;i+=1){const s=a[i],e=a[i+1],h={start:s,end:e,keyValues:[]};for(const i of t)i>=s&&i<e&&h.keyValues.push(i);c.push(h)}}if(a=t,gh(u))continue;let d=0,f=-1,A=[],g=[];for(let t=0;t<c.length;t+=1){const e=this.Fh(c[t].keyValues,u,i,s,r,o);A=A.concat(e.displayedKeyValues),g=g.concat(e.createdTicks)}let y=g,m=!0;if(u.$e.getLabelFillStyle()!==O){let t=[];for(;++f<c.length;){const e=c[f],r=e.start,o=e.end;let a=e.keyValues;if(d>0){if(void 0===u.Eh){m=!1;break}const t=u.Eh._r;if(a=t(a,d-1,r,o,i,s),void 0===a)break}const y=this.Bh(g.filter((t=>a.some((i=>Qt(t.S,i))))),A,u,d,r,o,i,s,h,n,l);!0!==y?t=t.concat(y):(d+=1,f=-1,t=[])}y=t,g.forEach((i=>{t.find((t=>t===i))||this.wr(i)}))}if(l=y,!m)break}}wr(t){const i=this.lh.get(t.Rh);null==i||i.delete(t.S);const s=this.uh.get(t.Rh);s&&s.has(t.S)?t.dispose():s&&(t.ps(!1),s.set(t.S,t))}ur(t){for(const i of this.lh.values())for(const s of i.values())t(s)}Cr(t,i){for(const s of this.lh.values())for(const e of s.values())i=t(i,e);return i}hr(){this.lh.forEach(((t,i)=>{t.forEach((t=>this.wr(t)))})),this.lh.clear()}Ar(){for(const t of this.lh.values())for(const i of t.values())i.Ph=!0}mr(){for(const t of this.lh.values())for(const[i,s]of t.entries())s.Ph&&(s.dispose(),t.delete(i))}dr(){const t=this.ft.getInnerStart()<this.ft.getInnerEnd()?this.ft.getInnerStart():this.ft.getInnerEnd(),i=this.ft.getInnerEnd()>this.ft.getInnerStart()?this.ft.getInnerEnd():this.ft.getInnerStart();return c(t,i)}Lh(t,i){return!(t.Ph||0===t.hh.kr().length||Ah(i)&&!0!==i.Tr)}Fr(t,i){return _h(this.oh)||(this.oh.Ke.forEach((s=>{i=t(i,s.$e)})),this.oh.qe.forEach((s=>{(t=>void 0!==t.je)(s)&&(i=t(i,s.$e))}))),i}Kh(){let t=this.Nh.Ir();const i=this.Nh.Pr();let s;if(void 0!==t&&Xt(t)&&void 0!==i&&Xt(i)&&("logarithmic"===this.Uh.type&&(0===t&&(t=Math.min(1,i)),Math.sign(t)!==Math.sign(i)&&(t=Math.min(1,i-.1))),s?(s.min=Math.min(s.min,t),s.max=Math.max(s.max,i)):s=c(t,i)),s&&Xt(s.min)&&Xt(s.max))return Qt(s.min,s.max)?{min:s.min-1,max:s.max+1}:s}Dr(){if(!this.Vh)return 0;let t=0;const i=this.Nh.Br();return i&&(t=Math.max(t,i)),t}setAutoRegionsEnabled(t){return this.Vh=t,this.chart.us.xs(),this}Lr(){var t;const i=this.ph;let s=!1;if(this._h&&this.Zh){const t=this.Kh();if(t){const i="function"==typeof this.Zh?this.Zh({curStart:this.Hh,curEnd:this.Xh,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max}):this.Zh;this.setInterval(i),this._h=!1}}if(this.dh&&!this.yh){const i=this.Kh();if(i){const e=this.Hh,h=this.Xh;let r=this.dh.start(e,h,i.min,i.max),n=this.dh.end(e,h,i.min,i.max);const o=null===(t=this.dh.allowIntervalLengthChange)||void 0===t||t,a=Dh(this.Jh,i,{start:r,end:n},{start:e,end:h},o);r=a.start,n=a.end;const l=!1===Qt(e,r),u=!1===Qt(h,n);if(r=l?r:e,n=u?n:h,l||u){let t=!1;if(this.fh&&!this.Oh)if(this.fh){t=!0;const i=l?this.Rr(e,r):e,a=u?this.Rr(h,n):h;if(!0===this.lr(i,a,o)&&(l&&!1===Qt(i,r)||u&&!1===Qt(a,n))){this.chart.us.xs(!0),s=!0;let t=Math.abs(n-r)/Math.abs(i-a);t<1&&(t=1/t),this.Sh=t>=1.4}}else t=!1;t||this.lr(r,n,o),this.Oh=!1}}}return s?(this.ph!==s&&(this.ph=s,this.bh=Yt.performance.now()),this.Er&&(clearTimeout(this.Er),this.Er=void 0)):!0===i&&void 0===this.Er&&(this.Sh=!1,this.Er=setTimeout((()=>{!1!==this.ph&&(this.ph=!1,this.bh=Yt.performance.now()),this.Er=void 0,this.chart.us.xs()}),200)),this}lr(t,i,s){let e={start:t,end:i},h=!0;if(this.Jh){const t=this.Kh();e=Dh(this.Jh,t,e,{start:this.Hh,end:this.Xh},s)}const r=Math.abs(i-t),n=Math.abs(this.Xh-this.Hh);if(void 0!==this.oh.ih&&this.oh.ih>r){const r=(i+t)/2,o=(s?this.oh.ih/2:n/2)*(t>i?-1:1);e={start:r-o,end:r+o},h=!1}if(void 0!==this.oh.sh&&this.oh.sh<r){const r=(i+t)/2,o=(s?this.oh.sh/2:n/2)*(t>i?-1:1);e={start:r-o,end:r+o},h=!1}let o=this.ft.ot(e.start,e.end,this.Hh,this.Xh,s);if(!1===o)return!1;!0!==o&&(e=o);const a=this.Dr(),l=this.zr(Math.min(e.start,e.end),Math.max(e.start,e.end),a);return o=this.ft.ot(e.end>e.start?l.min:l.max,e.end>e.start?l.max:l.min,this.Hh,this.Xh,!1),!!o&&(!0===o?this.ft.K(e.end>e.start?l.min:l.max,e.end>e.start?l.max:l.min):this.ft.K(e.start,e.end),this.Hh=e.start,this.Xh=e.end,this.L.emit("scaleChange",this,e.start,e.end),this.xh=Yt.performance.now(),this.chart.us.xs(),h)}Vr(){return this.ph}Or(){return void 0!==this.ar}jh(){var t;const i=!1!==(null===(t=this.Yi)||void 0===t?void 0:t.displayOnAxis);this.Th.vr(this.$h&&i&&this.wh?`${this.wh} (${this.$h})`:this.wh),this.chart.us.xs()}onTitleMouseEnter(t){return this.L.on("mouseEnterTitle",t)}offTitleMouseEnter(t){return this.L.off(t,"mouseEnterTitle")}onTitleMouseMove(t){return this.L.on("mouseMoveTitle",t)}offTitleMouseMove(t){return this.L.off(t,"mouseMoveTitle")}onTitleMouseLeave(t){return this.L.on("mouseLeaveTitle",t)}offTitleMouseLeave(t){return this.L.off(t,"mouseLeaveTitle")}onTitleMouseDown(t){return this.L.on("mouseDownTitle",t)}offTitleMouseDown(t){return this.L.off(t,"mouseDownTitle")}onTitleMouseUp(t){return this.L.on("mouseUpTitle",t)}offTitleMouseUp(t){return this.L.off(t,"mouseUpTitle")}onTitleMouseClick(t){return this.L.on("mouseClickTitle",t)}offTitleMouseClick(t){return this.L.off(t,"mouseClickTitle")}onTitleMouseDoubleClick(t){return this.L.on("mouseDoubleClickTitle",t)}offTitleMouseDoubleClick(t){return this.L.off(t,"mouseDoubleClickTitle")}onTitleMouseDragStart(t){return this.L.on("mouseDragStartTitle",t)}offTitleMouseDragStart(t){return this.L.off(t,"mouseDragStartTitle")}onTitleMouseDrag(t){return this.L.on("mouseDragTitle",t)}offTitleMouseDrag(t){return this.L.off(t,"mouseDragTitle")}onTitleMouseDragStop(t){return this.L.on("mouseDragStopTitle",t)}offTitleMouseDragStop(t){return this.L.off(t,"mouseDragStopTitle")}onTitleMouseWheel(t){return this.L.on("mouseWheelTitle",t)}offTitleMouseWheel(t){return this.L.off(t,"mouseWheelTitle")}onTitleTouchStart(t){return this.L.on("touchStartTitle",t)}offTitleMouseTouchStart(t){return this.L.off(t,"touchStartTitle")}onTitleTouchMove(t){return this.L.on("touchMoveTitle",t)}offTitleTouchMove(t){return this.L.off(t,"touchMoveTitle")}onTitleTouchEnd(t){return this.L.on("touchEndTitle",t)}offTitleTouchEnd(t){return this.L.off(t,"touchEndTitle")}}class Fh{constructor(t,i,s,e,h=s.Ur(e).Gr(Qi).Nr(Qi).setMouseInteractions(!1)){this.Ph=!1,this.$i=!1,this.ts=[],this.Rh=t,this.S=i,this.Wr=s,this.rh=e,this.hh=h,this.ts.push(h)}ps(t){this.ts.forEach((i=>i.setVisible(t)))}dispose(){return this.$i||(this.$i=!0,this.ts.forEach((t=>t.dispose()))),this}}const Ih=(t,i,s,e,h,r)=>{const n=new Map;for(const r of t.Ke){let t=r.Yr(i,s,e,h);t=Ph(t),n.set(r,t)}let o;for(const e of t.qe){let t;if(void 0===o)t=e.Yr(i,s,i,s);else{let h=[];const n=o.filter((t=>i<=t&&t<=s)).length;if(n>0){const t=r/(n-1);if(void 0!==e.Hr&&e.Hr>t)break}for(let t=0;t<o.length-1;t+=1){const r=e.Yr(o[t],o[t+1],i,s);h=h.concat(r)}t=h}t=Ph(t),n.set(e,t),o=t}return n},Ph=t=>(t=(t=>{const i={},s=[],e=t.length;let h=0;for(let r=0;r<e;r+=1){const e=t[r];1!==i[e]&&(i[e]=1,s[h]=e,h+=1)}return s})(t)).sort(((t,i)=>t-i)),Dh=(t,i,s,e,h)=>{const r="function"==typeof t?t({curStart:e.start,curEnd:e.end,dataMin:null==i?void 0:i.min,dataMax:null==i?void 0:i.max}):t;if(!r)return s;const n={start:s.start,end:s.end};let o=Math.abs(s.end-s.start);if(void 0!==r.intervalMin&&o<r.intervalMin){const t=(n.start+n.end)/2;n.start=t+.5*Math.sign(s.start-t)*r.intervalMin,n.end=t+.5*Math.sign(s.end-t)*r.intervalMin}if(o=Math.abs(s.end-s.start),void 0!==r.intervalMax&&o>r.intervalMax){const t=(n.start+n.end)/2;n.start=t+.5*Math.sign(s.start-t)*r.intervalMax,n.end=t+.5*Math.sign(s.end-t)*r.intervalMax}return o=Math.abs(s.end-s.start),void 0!==r.startMin&&(n.start=Math.max(n.start,r.startMin),h||Qt(Math.abs(n.start-n.end),o)||(n.end=n.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==r.startMax&&(n.start=Math.min(n.start,r.startMax),h||Qt(Math.abs(n.start-n.end),o)||(n.end=n.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==r.endMin&&(n.end=Math.max(n.end,r.endMin),h||Qt(Math.abs(n.start-n.end),o)||(n.start=n.end+Math.sign(s.start-s.end)*o)),o=Math.abs(s.end-s.start),void 0!==r.endMax&&(n.end=Math.min(n.end,r.endMax),h||Qt(Math.abs(n.start-n.end),o)||(n.start=n.end+Math.sign(s.start-s.end)*o)),n},Bh=t=>{if(void 0===t.dataMin||void 0===t.dataMax)return{stopAxisAfter:!1};const i=t.curEnd>=t.curStart;return{start:i?t.dataMin:t.dataMax,end:i?t.dataMax:t.dataMin,stopAxisAfter:!1}},Lh=i({type:"font",size:14,family:"Arial",weight:"normal",style:"normal",variant:!1});class Rh extends Lh{constructor(t){super(t)}setSize(t){return this.set("size",t)}setFamily(t){return this.set("family",t)}setWeight(t){return this.set("weight",t)}setStyle(t){return this.set("style",t)}setVariant(t){return this.set("variant",t)}getSize(){return this.get("size")}getFamily(){return this.get("family")}getWeight(){return this.get("weight")}getStyle(){return this.get("style")}getVariant(){return this.get("variant")}}const Eh=t=>!(!t||"object"!=typeof t||!("type"in t)||"font"!==t.type),zh=new Rh,Vh=new class{getFillStyle(){return O}},Oh=i({type:"triangulated-points-3d",shape:"sphere",size:10,fillStyle:new W,wireframeStyle:dt});class Nh extends Oh{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setWireframeStyle(t){return"function"==typeof t?this.set("wireframeStyle",t(this.get("wireframeStyle"))):this.set("wireframeStyle",t)}getWireframeStyle(){return this.get("wireframeStyle")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}}const Gh=t=>!(!t||"object"!=typeof t||!("type"in t)||"triangulated-points-3d"!==t.type),Uh=i({type:"pixelated-points-3d",size:5,fillStyle:new W});class Wh extends Uh{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}}const Yh=t=>!(!t||"object"!=typeof t||!("type"in t)||"pixelated-points-3d"!==t.type),Hh={Triangulated:Nh,Pixelated:Wh};class Xh{constructor(t){this.Xr=new Map,this.us=t}os(t,i,s){const e=s.animationEnabled;this.Xr.set(t,{applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:e,curAnimatedHighlightValue:0});const h=t.onDispose((()=>{this.Xr.delete(t),t.offDispose(h)}))}$r(t,i){let s=i.animationEnabled;const e=[],h=t.onDispose((()=>{e.forEach((t=>{this.Xr.delete(t)})),t.offDispose(h)}));return{jr:(t,i)=>{const h={applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:s,curAnimatedHighlightValue:0};e.push(t),this.Xr.set(t,h)},Zr:()=>{e.forEach((t=>{this.Xr.delete(t)})),e.length=0},Qr:t=>{s=t,e.forEach((t=>{this.ks(t,s)}))},Jr:()=>s}}Cs(t,i){const s=this.Xr.get(t);s&&(s.curUnanimatedHighlightValue=Ui(i),this.us.xs())}gs(t,i=!1){const s=this.Xr.get(t);return s?i?s.curAnimatedHighlightValue:s.curUnanimatedHighlightValue:0}ks(t,i){const s=this.Xr.get(t);s&&(s.animationEnabled=i)}Ts(t){const i=this.Xr.get(t);return!!i&&i.animationEnabled}Vs(t){let i=!1;this.Xr.forEach(((s,e)=>{let h;if(s.animationEnabled){const e=1e3;if(s.curUnanimatedHighlightValue>0){const r=s.curAnimationPositionMillis/e;h=s.curUnanimatedHighlightValue*Math.abs(Math.sin(r*Math.PI/2+.5));const n=0===s.curAnimatedHighlightValue?1:t;s.curAnimationPositionMillis+=n,i=!0}else s.curAnimatedHighlightValue>0&&0===s.curUnanimatedHighlightValue?(h=Math.max(s.curAnimatedHighlightValue-t/e,0),i=i||h>0):h=0,s.curAnimationPositionMillis=0}else h=s.curUnanimatedHighlightValue;h!==s.curAnimatedHighlightValue&&(s.applyHighlight(h),s.curAnimatedHighlightValue=h)})),i&&this.us.xs(!0)}}const $h=new Map,jh=(t,i)=>{const s=t.getSize(),e=t.getFamily(),h=t.getWeight(),r=t.getStyle(),n=t.getVariant(),o=`${r} ${n?"small-caps":"normal"} ${h} ${s}px ${e}`,a=`${o} ${i.toFixed(2)}`;let l=$h.get(a);return l||(l=((t,i,s,e)=>({font:t,properties:i,dpr:s,id:e}))(o,{type:"font",size:s,family:e,style:r,variant:n,weight:h},i,a),$h.set(a,l)),l};var Zh,Qh;!function(t){t[t.click=0]="click",t[t.dbclick=1]="dbclick",t[t.mouseDown=2]="mouseDown",t[t.mouseUp=3]="mouseUp",t[t.contextmenu=4]="contextmenu",t[t.wheel=5]="wheel"}(Zh||(Zh={})),function(t){t[t.touchStart=0]="touchStart",t[t.touchMove=1]="touchMove",t[t.touchEnd=2]="touchEnd"}(Qh||(Qh={}));const Jh=t=>({container:t.Kr,setMouseStyle:(i,s)=>t.qr(i,s),restoreMouseStyle:i=>t.tn(i),captureFrame:(i,s,e)=>t.sn(i,s,e),renderFrame:(i,s,e=!1)=>t.en(i,s,e),layout:()=>{t.hn(),t.rn(),t.an.nn(),t.xs()},setBackgroundFillStyle(i){return t.setBackgroundFillStyle(i),this},setBackgroundStrokeStyle(i){return t.setBackgroundStrokeStyle(i),this},getBackgroundFillStyle:()=>t.getBackgroundFillStyle(),getBackgroundStrokeStyle:()=>t.getBackgroundStrokeStyle(),addCustomIcon:(i,s)=>t.ln(i,s),onRenderFrame:i=>t.un(i),offRenderFrame:i=>t.cn(i)}),Kh=[];let qh;const tr=()=>{if(void 0!==qh){const t=Yt.getComputedStyle(Yt.document.body),i=Number(t.getPropertyValue("margin-top").replace("px",""))+Number(t.getPropertyValue("margin-bottom").replace("px",""));qh.style.height=Yt.innerHeight-i+"px",(()=>{for(let t=0;t<Kh.length;t+=1)Kh[t]()})()}},ir=new W({color:S(255,255,255)}),sr={font:jh(zh,0),fillStyle:ir,lineStyle:new _e({fillStyle:ir,thickness:1}),pointStyle3D:new Hh.Triangulated};class er{constructor(t,i,e){this.L=new s,this.ft=yt.d2({scaleXYConstructor:ee}),this.dn=new Map,this.fn=K((()=>this.xs()),60),this.An=n(0,0),this.gn=!1,this.yn=Zt,this.mn=()=>{},this.pn=[],this.vn=-1,this.Sn=[],this.bn=!0,this.$i=!1,this.xn=!1,this.rn=()=>{const{bottom:t,left:i}=this.Kr.getBoundingClientRect();return this.An=n(Math.floor(i),Math.floor(t)),this},this.Mn=t=>{if(this._n){const i=this._n.entity.wn;i&&i(this._n.entity,t,this._n.button,this._n.startLocation,this._n.collectionMember,this._n.info),this._n=void 0}},this.hn=()=>{this.Cn&&this.Cn()},this.qr=(t,i)=>{if(!i){this.Kr.style.cursor=t;const i=this.vn;return this.vn+=1,this.Sn.push([i,t]),i}return this.tn(i),this.qr(t)},this.tn=t=>{const i=t?this.Sn.findIndex((i=>i[0]===t)):-1;i>=0?(this.Sn.splice(i,1),this.Sn.length>0?this.Kr.style.cursor=this.Sn[this.Sn.length-1][1]:this.Kr.style.cursor="default"):(this.Sn.push([0,"default"]),this.Kr.style.cursor="default")},this.kn=t=>(this.Tn.M(t),this),this.Fn=()=>this.Tn._(),this.In=()=>{this.yn&&this.yn(1e3/60),this.Pn(),this.Dn(),this.mn&&this.mn()},this.Bn=t=>(this.dn.set(t.Ln(),t),this.dn=new Map([...this.dn.entries()].sort(((t,i)=>t[0]-i[0]))),t),this.Rn=t=>(this.dn.delete(t),this),this.Z=()=>(this.Tn.o=!1,this),this.J=()=>(this.Tn.o=!0,this),this.En=t=>{if(!this.bn)return;const i=this.zn,s=i&&i.clientX===t.clientX&&i.clientY===t.clientY,e=this.Ss({x:t.clientX,y:t.clientY});if(this.Vn&&((null==e?void 0:e.entity)!==this.Vn.entity||e.collectionMember!==this.Vn.collectionMember)&&!this._n){this.Vn.entity.Is=!1;const i=this.Vn.entity.On;i&&i(this.Vn.entity,t,this.Vn.collectionMember)}if(e&&e.entity.getMouseInteractions()&&!this._n)if(e.entity.Is){if(!s){const i=e.entity.Nn;i&&i(e.entity,t,e.collectionMember,e.info)}}else{e.entity.Is=!0;const i=e.entity.Gn;i&&i(e.entity,t,e.collectionMember,e.info)}if(this._n){const s=this._n.entity.Un,e=i?n(t.clientX-i.clientX,i.clientY-t.clientY):{x:0,y:0};!s||0===e.x&&0===e.y||s(this._n.entity,t,this._n.button,this._n.startLocation,e,this._n.collectionMember,this._n.info)}this.Wn=t,this.zn=t,this.Vn=e?{...e,event:t}:void 0},this.Yn=t=>{if(this.bn=!1,this.Wn=t,this.Vn&&!this.Hn&&!this._n){this.Vn.entity.Is=!1;const i=this.Vn.entity.On;i&&i(this.Vn.entity,t,this.Vn.collectionMember),this.Vn=void 0}},this.Xn=t=>{if(this.bn=!0,this.Wn=t,this._n&&t.buttons<=0){const i=this._n.entity.wn;i&&i(this._n.entity,t,this._n.button,this._n.startLocation,this._n.collectionMember,this._n.info),this._n=void 0}if(this.Hn&&t.buttons<=0){const i=this.Hn.entity.$n;i&&i(this.Hn.entity,t,this.Hn.collectionMember,this.Hn.info),this.Hn=void 0}},this.jn=()=>this.Wn&&this.Zn?this.Wn.timeStamp>this.Zn.timeStamp?this.Wn:this.Zn:this.Wn||this.Zn,this.an=t,this.qi=i.theme,this.Qn=e.Qn,this.Jn=e.Jn,this.Kn=e.Kn,this.qn={io:i&&i.overrideInteractionMouseButtons?i.overrideInteractionMouseButtons:void 0,qs:i&&void 0!==i.resourcesBaseUrl&&null!==i.resourcesBaseUrl?i.resourcesBaseUrl:void 0,so:!i||!("warnings"in i)||"boolean"!=typeof i.warnings||i.warnings,eo:(()=>{const t=null==i?void 0:i.pickingPrecision;if("string"==typeof t){const i=t.toLowerCase();if("best"===i)return 1;if("high"===i)return.5;if("low"===i)return 1/8}return 1/4})(),ho:void 0===(null==i?void 0:i.interactable)||i.interactable,ro:void 0===i.textPixelSnappingEnabled||i.textPixelSnappingEnabled};const h=i?i.container:void 0;if(h){if("string"==typeof h){const t=Yt.document.getElementById(h);if(!t)throw new Error(`Container "${h}" doesn't exist.`);this.Kr=t}else this.Kr=h;Yt.addEventListener("resize",this.hn),this.pn.push((()=>{Yt.removeEventListener("resize",this.hn)}))}else{if(void 0===qh){const t=Yt.document.createElement("div");t.id="lcjs-auto-flexbox",t.style.position="relative",t.style.width="100%",t.style.display="flex",t.style.flexDirection="column",Yt.document.body.appendChild(t),qh=t,Yt.addEventListener("resize",tr)}let t=1;for(;null!==Yt.document.getElementById(`chart-${t}`);)t+=1;this.Kr=Yt.document.createElement("div"),this.Kr.id=`chart-${t}`,this.Kr.style.flex="1",this.Kr.style.height="100%",qh.appendChild(this.Kr),tr(),Kh.push(this.hn),this.pn.push((()=>{qh&&qh.removeChild(this.Kr),Kh.includes(this.hn)&&Kh.splice(Kh.indexOf(this.hn),1),0===Kh.length&&qh&&(Yt.document.body.removeChild(qh),qh=void 0,Yt.removeEventListener("resize",tr))}))}if(Yt.ResizeObserver){const t=t=>{for(const i of t)i.target===this.Kr&&this.hn()};this.no=new Yt.ResizeObserver(t.bind(this)),this.no.observe(this.Kr)}""===this.Kr.style.position&&(this.Kr.style.position="relative"),this.Kr.style.boxSizing="content-box",this.Kr.addEventListener("fullscreenchange",this.hn),this.Kr.addEventListener("webkitfullscreenchange",this.hn);const r=i?i.maxFps:void 0;this.oo=r?-1===r?-1:0!==r?1e3/r:0:0;const o=new Map;let a=!1;const l=(t,i)=>s=>{const e=function(t){return{x:t.clientX,y:t.clientY}}(s);switch(s.type){case"pointerover":case"pointerenter":case"pointermove":case"pointerdown":o.set(s.pointerId,e);break;default:o.delete(s.pointerId),a=!1}switch(s.interactions=Array.from(o.values()),s.pointerType){case"pen":case"mouse":default:t&&t(s);break;case"touch":i&&i(s)}s.defaultPrevented&&(a=!0)};this.Kr.onwheel=this.ao(Zh.wheel),this.Kr.oncontextmenu=this.ao(Zh.contextmenu),this.Kr.onclick=this.ao(Zh.click),this.Kr.ondblclick=this.ao(Zh.dbclick),this.Kr.onlostpointercapture=()=>{a=!1},this.Kr.ontouchmove=t=>{a&&t.preventDefault()},this.Kr.onpointerover=l(),this.Kr.onpointerenter=l(this.Xn),this.Kr.onpointerdown=l(this.ao(Zh.mouseDown),this.lo(Qh.touchStart)),this.Kr.onpointermove=l(this.En,this.lo(Qh.touchMove)),this.Kr.onpointerup=l(this.ao(Zh.mouseUp),this.lo(Qh.touchEnd)),this.Kr.onpointercancel=l(),this.Kr.onpointerout=l(),this.Kr.onpointerleave=l(this.Yn,this.lo(Qh.touchEnd)),Yt.addEventListener("dragstart",this.Mn),Yt.addEventListener("scroll",this.rn,{passive:!0}),this.Tn=f(new p({r:0,g:0,b:0,a:0})),this.ls=new Xh(this)}uo(t,i){var s,e,h,r;(null===(s=this.Vn)||void 0===s?void 0:s.entity)===t.entity&&this.Vn.collectionMember===t.collectionMember&&(this.Vn={...i,info:this.Vn.info,event:this.Vn.event}),(null===(e=this.co)||void 0===e?void 0:e.entity)===t.entity&&this.co.collectionMember===t.collectionMember&&(this.co={...i,info:this.co.info}),(null===(h=this.Hn)||void 0===h?void 0:h.entity)===t.entity&&this.Hn.collectionMember===t.collectionMember&&(this.Hn={...i,info:this.Hn.info,event:this.Hn.event}),(null===(r=this._n)||void 0===r?void 0:r.entity)===t.entity&&this._n.collectionMember===t.collectionMember&&(this._n={...i,info:this._n.info,button:this._n.button,startLocation:this._n.startLocation})}do(){this.xn=!0,this.yn=void 0,this.mn=void 0}un(t){return this.L.on("render",t)}cn(t){return this.L.off(t)}fo(){return this.Ao}yo(){return this.mo}setBackgroundFillStyle(t){return this.po.Le(t),this.xs(),this}getBackgroundFillStyle(){return this.po.Qh()}setBackgroundStrokeStyle(t){return this.po.Be(t),this.xs(),this}getBackgroundStrokeStyle(){return this.po.vo()}So(t){return this.mn=t,this}bo(t){return this.yn=t,this}xo(t){return this.dn.get(t)}Mo(){return Array.from(this.dn.keys()).reverse().reduce(((t,i)=>i!==Number.MAX_SAFE_INTEGER&&i>t?i:t),0)+1}ao(t){return i=>this._o(t,i)}_o(t,i){if(!this.bn)return;t===Zh.contextmenu&&mi(i);const s=this.Ss({x:i.clientX,y:i.clientY});if(t===Zh.mouseUp){if(this._n){const t=this._n.entity.wn;if(t&&t(this._n.entity,i,this._n.button,this._n.startLocation,this._n.collectionMember,this._n.info),(null==s?void 0:s.entity)!==this._n.entity||s.collectionMember!==this._n.collectionMember){this._n.entity.Is=!1;const t=this._n.entity.On;t&&t(this._n.entity,i,this._n.collectionMember)}this._n=void 0}if(this.Hn){const t=this.Hn.entity.getMouseInteractions()&&this.Hn.entity.$n;t&&t(this.Hn.entity,i,this.Hn.collectionMember,this.Hn.info),this.Hn=void 0}}else if(s&&s.entity.getMouseInteractions()){const e=t===Zh.click?s.entity.wo:t===Zh.dbclick?s.entity.Co:t===Zh.mouseDown?s.entity.ko:t===Zh.wheel?s.entity.To:t===Zh.contextmenu?s.entity.Fo:void 0;if(e&&e(s.entity,i,s.collectionMember,s.info),t===Zh.mouseDown){this.Hn={entity:s.entity,collectionMember:s.collectionMember,event:i,info:s.info};const t=this.Hn.event.button,e=s.entity.Io;e&&e(s.entity,i,t,s.collectionMember,s.info),this._n={entity:s.entity,collectionMember:s.collectionMember,button:t,startLocation:n(i.clientX,i.clientY),info:s.info}}}this.Wn=i,this.Vn=s?{...s,event:i}:void 0}lo(t){return i=>this.Po(t,i)}Po(t,i){const s=i.interactions.length;if(this.Zn=i,this.co){const e=t===Qh.touchMove?this.co.entity.Do:t===Qh.touchEnd?this.co.entity.Bo:t===Qh.touchStart?this.co.entity.Lo:void 0;e&&e(this.co.entity,i,this.co.collectionMember,this.co.info),t===Qh.touchEnd&&0===s&&(this.co.entity.Is=!1,this.co=void 0)}else if(t===Qh.touchStart){for(let t=0;t<s&&(this.co=this.Ss({x:i.interactions[t].x,y:i.interactions[t].y}),!this.co);t+=1);if(this.co){this.co.entity.Is=!0;const t=this.co.entity.Lo;t&&t(this.co.entity,i,this.co.collectionMember,this.co.info)}}}Ro(t){return this.L.on("resize",t)}Eo(t){return this.L.off(t,"resize")}zo(){return this.L.topicOff("resize"),this}Vo(t){return this.L.on("inViewChange",t)}Oo(t){return this.L.off(t)}W(){if(!this.$i){if(this.$i=!0,this.dn)for(const t of this.dn.values())t.W();this.yn=void 0,this.mn=void 0,Yt.removeEventListener("dragstart",this.Mn),Yt.removeEventListener("scroll",this.rn),this.Kr.removeEventListener("fullscreenchange",this.hn),this.Kr.removeEventListener("webkitfullscreenchange",this.hn),this.no&&(this.no.disconnect(),this.no=void 0),this.pn.forEach((t=>{t()})),this.pn.length=0}}Oe(t,i){return n(t-this.An.x,this.An.y-i)}No(t,i){return n(t+this.An.x,this.An.y-i)}Go(t){const i=this.Oe(t.clientX,t.clientY);return{engineX:i.x,engineY:i.y}}Uo(t){const i=this.No(t.engineX,t.engineY);return{clientX:i.x,clientY:i.y}}}const hr=(t=1)=>({type:"horizontalProgressive",packager:(i,s,e)=>{if(i.length>1){const h=Fs(s,e*t),r=Math.abs(h.x),o=i.length,a=[];let l=0,u=0,c=i[0].x+r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.x<c&&u<o){const s=u;let e=t.y,h=t.y;for(;u<o&&i[u].x<=c;)i[u].y>e&&(e=i[u].y),i[u].y<h&&(h=i[u].y),u+=1;if(s!==u){const t=(a[l-1].x+i[u-1].x)/2;a[l+0]=n(t,h),a[l+1]=n(t,e),a[l+2]=i[u-1],l+=3}}c+=r}return a}return i.slice()}}),rr=(t=1)=>({type:"horizontalRegressive",packager:(i,s,e)=>{if(i.length>1){const h=Fs(s,e*t),r=Math.abs(h.x),o=i.length,a=[];let l=0,u=0,c=i[0].x-r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.x>c&&u<o){const s=u;let e=t.y,h=t.y;for(;u<o&&i[u].x>=c;)i[u].y>e&&(e=i[u].y),i[u].y<h&&(h=i[u].y),u+=1;if(s!==u){const t=(a[l-1].x+i[u-1].x)/2;a[l+0]=n(t,h),a[l+1]=n(t,e),a[l+2]=i[u-1],l+=3}}c-=r}return a}return i.slice()}}),nr=(t=1)=>({type:"verticalProgressive",packager:(i,s,e)=>{if(i.length>1){const h=Fs(s,e*t),r=Math.abs(h.y),o=i.length,a=[];let l=0,u=0,c=i[0].y+r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.y<c&&u<o){const s=u;let e=t.x,h=t.x;for(;u<o&&i[u].y<=c;)i[u].x>e&&(e=i[u].x),i[u].x<h&&(h=i[u].x),u+=1;if(s!==u){const t=(a[l-1].y+i[u-1].y)/2;a[l+0]=n(h,t),a[l+1]=n(e,t),a[l+2]=i[u-1],l+=3}}c+=r}return a}return i.slice()}}),or=(t=1)=>({type:"verticalRegressive",packager:(i,s,e)=>{if(i.length>1){const h=Fs(s,e*t),r=Math.abs(h.y),o=i.length,a=[];let l=0,u=0,c=i[0].y-r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.y>c&&u<o){const s=u;let e=t.x,h=t.x;for(;u<o&&i[u].y>=c;)i[u].x>e&&(e=i[u].x),i[u].x<h&&(h=i[u].x),u+=1;if(s!==u){const t=(a[l-1].y+i[u-1].y)/2;a[l+0]=n(h,t),a[l+1]=n(e,t),a[l+2]=i[u-1],l+=3}}c-=r}return a}return i.slice()}});var ar;!function(t){t[t.Square=0]="Square",t[t.Circle=1]="Circle",t[t.HollowCircle=2]="HollowCircle",t[t.Triangle=3]="Triangle",t[t.Cross=4]="Cross",t[t.Diamond=5]="Diamond",t[t.Plus=6]="Plus",t[t.Minus=7]="Minus",t[t.Arrow=8]="Arrow",t[t.Star=9]="Star"}(ar||(ar={}));const lr={ProgressiveX:"ProgressiveX",ProgressiveY:"ProgressiveY",RegressiveX:"RegressiveX",RegressiveY:"RegressiveY"},ur=t=>"ProgressiveX"===t||"RegressiveX"===t?"x":"y",cr=t=>"ProgressiveX"===t||"ProgressiveY"===t;var dr;!function(t){t[t.Nearest=0]="Nearest",t[t.NearestX=1]="NearestX",t[t.NearestY=2]="NearestY"}(dr||(dr={}));const fr=(t,i,s,e,h,r,n,o,a,l)=>{const u=t.length;if(0===u)return;const c=e?1:0,d=u-(h?2:1);if(s===dr.Nearest)return Ar(t,i,r,n,c,d);if(s===dr.NearestX||s===dr.NearestY){if("boolean"==typeof l&&("x"===a&&s===dr.NearestX||"y"===a&&s===dr.NearestY))return mr(t,pt(i,n,r),a,l,c,d);if(s===dr.NearestX)return gr(t,pt(i,n,r),o,c,d);if(s===dr.NearestY)return yr(t,pt(i,n,r),o,c,d)}},Ar=(t,i,s,e,h,r)=>{let n,o=Number.MAX_VALUE;for(let a=h;a<=r;a+=1){const h=t[a];if(!Number.isNaN(h.x)&&!Number.isNaN(h.y)){const t=pt(h,s,e),r=(t.x-i.x)**2+(t.y-i.y)**2;r<o&&(o=r,n=a)}}return n},gr=(t,i,s,e,h)=>{if(i.x<s.min.x||i.x>s.max.x)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.x>i.x?e.x-i.x:i.x-e.x;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},yr=(t,i,s,e,h)=>{if(i.y<s.min.y||i.y>s.max.y)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.y>i.y?e.y-i.y:i.y-e.y;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},mr=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<u||o>d)||!n&&(o<c||o>f))return;let A=h,g=Math.floor((h+r)/2),y=r,m=-1;for(;;){const i=o-(n?t[g].x:t[g].y);if(i*(e?-1:1)>0)A=Math.min(g+1,y),m=Math.floor((A+y)/2);else{if(0===Math.abs(i))return g;y=Math.max(g-1,A),m=Math.floor((A+y)/2)}if(m===g){const s=g>h?Math.abs(o-(n?t[g-1].x:t[g-1].y)):es,e=g<r?Math.abs(o-(n?t[g+1].x:t[g+1].y)):es,a=Math.abs(i);switch(Math.min(a,s,e)){case s:return g-1;case e:return g+1;default:return g}}else g=m}},pr=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<u||o>d)||!n&&(o<c||o>f))return;let A=h,g=Math.floor((h+r)/2),y=r,m=-1;for(;;){const s=o-(n?t[g].x:t[g].y);if(s*(e?-1:1)>0)A=Math.min(g+1,y),m=Math.floor((A+y)/2);else{if(0===Math.abs(s))return{a:g,b:g,lerpAmount:0};y=Math.max(g-1,A),m=Math.floor((A+y)/2)}if(m===g){if(s*(e?-1:1)<0&&g>h){const s=t[g-1],e=t[g];return{a:g-1,b:g,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}if(g<r){const s=t[g],e=t[g+1];return{a:g,b:g+1,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}return{a:g,b:g,lerpAmount:0}}g=m}};let vr=0;class Sr{constructor(t,i,e){this.Wo=f(!0),this.Yo=!1,this.Is=!1,this.Ho=!1,this.$i=!1,this.ji=!0,this.Xo=void 0,this.$o=0,this.L=new s,this.Nn=void 0,this.Gn=void 0,this.On=void 0,this.wo=void 0,this.To=void 0,this.Fo=void 0,this.Co=void 0,this.ko=void 0,this.$n=void 0,this.Io=void 0,this.Un=void 0,this.wn=void 0,this.Lo=void 0,this.Do=void 0,this.Bo=void 0,this.onDispose=t=>this.L.on("dispose",t),this.offDispose=t=>this.L.off(t,"dispose"),this.us=t,this.jo=i,this.Zo=e,this.Qo=vr,vr+=1,this.Jo=t.qi.highlightColorOffset}Ko(){let t;return this.qo("DataPattern",(i=>(t=i.pattern,!0))),"ProgressiveX"===t||"RegressiveX"===t?dr.NearestX:"ProgressiveY"===t||"RegressiveY"===t?dr.NearestY:dr.Nearest}ta(t){return void 0!==this.Zo.find((i=>i.type===t))}qo(t,i){var s;return!!this.ta(t)&&!0===i(null===(s=this.Zo.find((i=>i.type===t)))||void 0===s?void 0:s.args)}dispose(){return this.$i||(this.Is&&this.On&&this.On(this,void 0,void 0),this.$i=!0,this.jo(this),this.L.emit("dispose",this)),this}isDisposed(){return this.$i}setVisible(t){const i=this.ji;return this.ji=t,!t&&i&&(this.Is&&this.On&&this.On(this,void 0,void 0),this.Is=!1),this}getVisible(){return this.ji}setMouseInteractions(t){const i=this.Wo._();return this.Wo.M(t),t||(i&&this.Is&&this.On&&this.On(this,void 0,void 0),this.Is=!1),this}getMouseInteractions(){return this.Wo._()}getIsUnderMouse(){return this.Is}getIsGrabbed(){return this.Ho}setMouseMoveEventHandler(t){return this.Nn=t,this}setMouseEnterEventHandler(t){return this.Gn=t,this}setMouseLeaveEventHandler(t){return this.On=t,this}setMouseClickEventHandler(t){return this.wo=t,this}setMouseDoubleClickEventHandler(t){return this.Co=t,this}setMouseDownEventHandler(t){return this.ko=t,this}setMouseUpEventHandler(t){return this.$n=t,this}setMouseWheelEventHandler(t){return this.To=t,this}setMouseContextMenuEventHandler(t){return this.Fo=t,this}setMouseDragEventHandler(t){return this.Un=t,this}setMouseDragStartEventHandler(t){return this.Io=t,this}setMouseDragStopEventHandler(t){return this.wn=t,this}setTouchStartEventHandler(t){return this.Lo=t,this}setTouchMoveEventHandler(t){return this.Do=t,this}setTouchEndEventHandler(t){return this.Bo=t,this}ia(t){return this.Xo=t,this}sa(){return this.Xo?this.Xo:br}cs(t){return this.$o=t,this}ea(){return this.$o}ha(t){return this.Jo=t,this}ra(){return this.Jo}}const br=c(n(0,0),n(0,0));class xr extends Sr{constructor(t,i,s,e){super(t,s,e),this.na=0,this.Ls=i,this.Ls.oa=!0}aa(){}la(t){return this.na===t||(this.na=t,this.Ls.oa=!0),this}ua(){return this.na}}class Mr extends xr{constructor(t,i,s,e,h){super(t,i,e,h),this.ca=!0,this.ft=s}}const _r=(t,i,s)=>{if(s instanceof ee){const e=s.Gi(),h=Ds(i,{x:Math.abs(e.x),y:Math.abs(e.y)});return c(n(t.min.x-h.x,t.min.y-h.y),n(t.max.x+h.x,t.max.y+h.y))}return c(s.gi(n(t.min.x,t.min.y),Fs(i,-1)),s.gi(n(t.max.x,t.max.y),i))},wr=(t,i)=>"function"==typeof i?i(t):i,Cr=(t,i)=>!t||t!==i,kr=(t,i)=>t===O&&i!==O,Tr=t=>t!==O;class Fr extends Mr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Fe=sr.fillStyle,this.us=t}Le(t){return this.Fe=wr(this.Fe,t),this}Qh(){return this.Fe}da(){return Cr(this.fa,this.Fe)}Aa(){return kr(this.fa,this.Fe)}ga(){return Tr(this.Fe)}ya(t){this.fa=t}}class Ir extends Fr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Ie=sr.lineStyle,this.us=t}Be(t){return this.Ie="function"==typeof t?t(this.Ie):t,this}vo(){return this.Ie}ma(){return!this.pa||this.pa!==this.Ie}va(t){return!this.pa||this.pa.getThickness()!==t}ga(){return this.Ie!==dt||super.ga()}Aa(){return(this.Ie!==dt||this.Fe!==O)&&this.pa===dt&&this.fa===O}Sa(t){this.pa=t}}class Pr extends Fr{constructor(t,i,s,e,h,r=f(5)){super(t,i,s,e,h),this.size=f(5),this.size=r}tt(t){return this.size.M(t),this}}class Dr extends Fr{constructor(t,i,s,e,h,r=f(sr.font)){super(t,i,s,e,h),this.ba=f(""),this.xa=f(n(0,0)),this.Ma=f(0),this._a=f(0),this.wa=f(n(0,0)),this.Ca=f(0),this.ka=f(zh),this.Ta=n(0,0),this.Xt=f(A(1,1,1,1)),this.Fa=f(g(4,4,4,4)),this.font=f(sr.font),this.Ia=!1,this.font=r}ga(){return Tr(this.Fe)&&this.ba._().length>0}Aa(){return!1===this.Ia&&this.ga()}vr(t){return this.ba.M(t),this}kr(){return this.ba._()}tr(t){return Eh(t)?this.ka.M(t):this.ka.M(t(this.ka._())),this}qh(){return this.ka._()}Pa(t){return this.ka.M(this.ka._().setFamily(t)),this}Da(){return this.ka._().getFamily()}Ba(t){return this.ka.M(this.ka._().setSize(t)),this}La(){return this.ka._().getSize()}Ra(t){return this.ka.M(this.ka._().setWeight(t)),this}Ea(){return this.ka._().getWeight()}za(t){return this.ka.M(this.ka._().setStyle(t)),this}Va(){return this.ka._().getStyle()}Oa(t){return this.ka.M(this.ka._().setVariant(t)),this}Na(){return this.ka._().getVariant()}ze(t){return this.xa.M(t),this}Ga(){return this.xa._()}ir(t){return this.Ca.M(t),this}sr(){return this.Ca._()}Ua(t,i){return this.wa.M(n(t,i)),this}Wa(){return this.wa._()}Ya(t){return this._a.M(t),this}Ha(){return this._a._()}Xa(t){return this.Ma.M(t),this}$a(){return this.Ma._()}ja(t){return this._a.M(t.x),this.Ma.M(t.y),this}Nr(t){return this.Xt.M(t),this}Za(){return this.Xt._()}Gr(t){return this.Fa.M(t),this}Qa(){return this.Fa._()}}class Br extends Pr{constructor(t,i,s,e,h,r=5){super(t,i,s,e,h,f(r)),this.Ja=[],this.Ka=f(ar.Square),this.Ca=f(0),this.qa=f(!1),this.tl=f(!1),this.il=f(!1),this.sl=rs,this.el=0,this.hl=[],this.rl=0,this.nl=rs,this.ol=!1,this.al=void 0}ll(){return this.hl}ul(){return this.Ja}cl(t){return this.Ka.M(t),this}dl(){return this.Ka._()}ir(t){return this.Ca.M(t),this}sr(){return this.Ca._()}fl(t){return this.qa.M(t),this}Al(t){return this.tl.M(t),this}yl(t){return this.il.M(t),this}ml(t,i){return Array.isArray(t)||(t=[t]),this.rl+=t.length,this.hl=ki(this.hl,t,{canReturnB:!0}),this.nl&&(this.nl=i?bs(this.nl,i):void 0),this.al=void 0,this}Vt(){return this.ol=!0,this.Ja.length=0,this.el=0,this.sl=rs,this.hl=[],this.rl=0,this.al=void 0,this}pl(){return this.el}vl(){return this.rl}}class Lr extends Ir{constructor(t,i,s,e,h){super(t,i,s,e,h),this.xa=f(n(0,0)),this.j=f(n(100,100)),this.Ca=f(0),this.Ta=f(n(0,0)),this.Sl=!1}Vs(){return this.bl(),this}ze(t){const i=this.xa._();return t.x===i.x&&t.y===i.y||(this.xa.M(t),this.bl()),this}Ga(){return this.xa._()}xl(t){const i=this.xa._();return t!==i.x&&(this.xa.M(n(t,i.y)),this.bl()),this}Ml(t){const i=this.xa._();return t!==i.y&&(this.xa.M(n(i.x,t)),this.bl()),this}tt(t){const i=this.j._();return t.x===i.x&&t.y===i.y||(this.j.M(n(t.x,t.y)),this.bl()),this}ni(){return this.j._()}_l(t){const i=this.j._();return t!==i.x&&(this.j.M(n(t,i.y)),this.bl()),this}wl(t){const i=this.j._();return t!==i.x&&(this.j.M(n(i.x,t)),this.bl()),this}ir(t){return this.Ca.M(t),this}sr(){return this.Ca._()}Cl(t){const i=this.Ta._();return t===i&&i.x===t.x&&i.y===t.y||(void 0===t?(this.Sl=!1,this.bl()):(this.Sl=!0,this.Ta.M(t))),this}bl(){if(!this.Sl){const t=this.xa._(),i=this.j._(),s=n(t.x+i.x/2,t.y+i.y/2),e=this.Ta._();s.x===e.x&&s.y===e.y||this.Ta.M(s)}}}class Rr extends Ir{constructor(){super(...arguments),this.Ja=[],this.xa=f(n(0,0)),this.sl=rs,this.kl=!1}Tl(t){return t=xi(t),this.Ja=t,this.kl=!0,this}Fl(){return this.Ja}vt(){return this.sl.max.x}yt(){return this.sl.min.x}bt(){return this.sl.max.y}St(){return this.sl.min.y}Il(){return 0}Pl(){return 0}}class Er extends Rr{}class zr extends Fr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Dl=new Array,this.Bl=new Array,this.Ll=f({type:"disabled",packager:(t,i,s)=>t.slice()}),this.sl=rs,this.Rl=0,this.El=!1,this.hl=[Array(),Array()],this.zl=!1,this.Vl=(new W).setColor(S(42,171,240)),this.ol=!1,this.Ol=!1,this.Nl=!1}ml(t,i){const s=this.Rl-1,e=s>0&&!this.zl;let[h,r]=e?[[this.Dl[s]],[this.Bl[s]]]:[[],[]];if(t instanceof Array){const[i,s]=u(t);h=ki(h,i,{canReturnB:!0}),r=ki(r,s,{canReturnB:!0})}else{const i=t.position;h.push(n(i,t.high)),r.push(n(i,t.low))}return this.zl?(this.hl[0]=ki(this.hl[0],h,{canReturnB:!0}),this.hl[1]=ki(this.hl[1],r,{canReturnB:!0})):(this.hl=[h,r],this.zl=!0),this.sl=bs(this.sl,i||bs(vs(h),vs(r))),this}Vt(){return this.ol=!0,this.Dl.length=0,this.Bl.length=0,this.Rl=0,this.sl=rs,this}ul(){return[this.Dl,this.Bl]}ll(){return[this.hl[0],this.hl[1]]}Gl(t){return this.Ll.M(t),this}Ul(){return this.Ll._()}Wl(t){return this.Vl="function"==typeof t?t(this.Vl):t,this}Yl(){return this.Vl}pl(){return this.Rl-(Number(this.Ol)+Number(this.Nl))}vl(){return this.hl.length}Hl(t){return this.Ol=t,this}Xl(){return this.Ol}$l(t){return this.Nl=t,this}jl(){return this.Nl}Aa(){return this.fa===O&&this.Zl===O&&(this.Fe!==O||this.Vl!==O)}Ql(t){this.Zl=t}ga(){return this.Vl!==O||super.ga()}da(){return super.da()||!this.Zl||this.Zl!==this.Vl}}class Vr extends Ir{constructor(t,i,s,e,h){super(t,i,s,e,h),this.xa=f(n(0,0)),this.Jl=f(0),this.Ti=f(360),this.Kl=f(100),this.ql=f(100),this.tu=f(0),this.iu=f(void 0),this.su=n(0,0),this.eu=n(0,0),this.hu=n(0,0)}ru(){return this.Kl._()}nu(){return this.ql._()}Ga(){return this.xa._()}ou(){return this.Jl._()}ki(){return this.Ti._()}au(){return this.tu._()}lu(){return this.iu._()}uu(){return this.su}cu(){return this.eu}du(){return this.hu}ze(t){return this.xa.M(t),this}fu(t){return this.Jl.M(t),this}He(t){return this.Ti.M(t),this}Au(t){return this.ql.M(t),this.Kl.M(t),this}gu(t){return this.Kl.M(t),this}yu(t){return this.ql.M(t),this}mu(t){return this.tu.M(t<0?0:t),this}pu(t){return this.iu.M(void 0!==t&&t<=0?void 0:t),this}}var Or;!function(t){t[t.Complex=0]="Complex",t[t.Simple=1]="Simple"}(Or||(Or={}));const Nr=(t,i)=>"function"==typeof i?i(t):i,Gr=(t,i)=>!t||t!==i,Ur=(t,i)=>!t||t.getThickness()!==i,Wr=(t,i)=>t===dt&&i!==dt,Yr=t=>t!==dt&&t.getFillStyle()!==O;class Hr extends Mr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.vu=sr.lineStyle,this.engine=t}We(t){return this.vu=Nr(this.vu,t),this}Su(){return this.vu}ma(){return Gr(this.bu,this.vu)}xu(t){return Ur(this.bu,t)}Aa(){return Wr(this.bu,this.vu)}ga(){return Yr(this.vu)}Mu(t){this.bu=t}}class Xr extends Hr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Ii=n(0,0),this.Ti=n(0,0),this._u=!1}M({min:t,max:i}){return t.x===this.Ii.x&&t.y===this.Ii.y&&i.x===this.Ti.x&&i.y===this.Ti.y||(this._u=!0,this.Ii=t,this.Ti=i),this}Fi(){return this.Ii}ki(){return this.Ti}Xe(t){return t.x===this.Ii.x&&t.y===this.Ii.y||(this._u=!0,this.Ii=t),this}He(t){return t.x===this.Ti.x&&t.y===this.Ti.y||(this._u=!0,this.Ti=t),this}}class $r extends Hr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.wu=void 0,this.Cu=0}}class jr extends Hr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ku=[],this.sl=rs,this.hl=new Array,this.el=0,this.ol=!1,this.Tu=f(void 0),this.Ol=!1,this.Nl=!1}Fu(t){return this.Tu.M(t),this}Iu(){return this.Tu._()}ll(){return this.hl}ul(){return this.ku}Vt(){return this.ol=!0,this.ku.length=0,this.el=0,this.hl=[],this.sl=rs,this}pl(){return this.el-(Number(this.Ol)+Number(this.Nl))}vl(){return this.hl.length}Hl(t){return this.Ol=t,this}Xl(){return this.Ol}$l(t){return this.Nl=t,this}jl(){return this.Nl}}const Zr=t=>{const i=t.getDraggingMode();return void 0!==i&&i!==Gt.notDraggable?i===Gt.draggable?Ke.Move:i===Gt.onlyHorizontal?Ke.Horizontal:Ke.Vertical:void 0};class Qr{constructor(){this.ji=!0,this.L=new s,this.Pu=0,this.Mt=(t,i,s)=>{0===this.Pu&&this.L.emit("mouseEnter",this,i),this.Pu+=1},this._t=(t,i,s)=>{this.Pu-=1,this.Pu<1&&(this.L.emit("mouseLeave",this,i),this.Pu=0)},this.wt=(t,i,s)=>{this.L.emit("mouseClick",this,i)},this.Ct=(t,i,s)=>{this.L.emit("mouseDoubleClick",this,i)},this.kt=(t,i,s)=>{this.L.emit("mouseDown",this,i)},this.Tt=(t,i,s)=>{this.L.emit("mouseUp",this,i)},this.Ft=(t,i,s)=>{this.L.emit("mouseMove",this,i)},this.Pt=(t,i,s,e)=>{this.L.emit("mouseDragStart",this,i,s)},this.It=(t,i,s,e,h,r)=>{this.L.emit("mouseDrag",this,i,s,e,h)},this.Dt=(t,i,s,e,h)=>{this.L.emit("mouseDragStop",this,i,s,e)},this.Bt=(t,i,s)=>{this.L.emit("mouseWheel",this,i)},this.Lt=(t,i)=>{this.Pu+=1,this.L.emit("touchStart",this,i)},this.Rt=(t,i)=>{this.L.emit("touchMove",this,i)},this.Et=(t,i)=>{this.Pu-=1,this.L.emit("touchEnd",this,i)},this.Du=t=>(t instanceof Mr?t.setMouseEnterEventHandler(this.Mt).setMouseLeaveEventHandler(this._t).setMouseClickEventHandler(this.wt).setMouseDoubleClickEventHandler(this.Ct).setMouseDownEventHandler(this.kt).setMouseUpEventHandler(this.Tt).setMouseMoveEventHandler(this.Ft).setMouseDragEventHandler(this.It).setMouseDragStartEventHandler(this.Pt).setMouseDragStopEventHandler(this.Dt).setMouseWheelEventHandler(this.Bt).setTouchStartEventHandler(this.Lt).setTouchMoveEventHandler(this.Rt).setTouchEndEventHandler(this.Et):(t.onMouseEnter(((t,i)=>this.Mt(t,i))),t.onMouseLeave(((t,i)=>this._t(t,i))),t.onMouseClick(((t,i)=>this.wt(t,i))),t.onMouseDoubleClick(((t,i)=>this.Ct(t,i))),t.onMouseDown(((t,i)=>this.kt(t,i))),t.onMouseUp(((t,i)=>this.Tt(t,i))),t.onMouseMove(((t,i)=>this.Ft(t,i))),t.onMouseDrag(((t,i,s,e,h)=>this.It(t,i,s,e,h))),t.onMouseDragStart(((t,i,s)=>this.Pt(t,i,s))),t.onMouseDragStop(((t,i,s,e)=>this.Dt(t,i,s,e))),t.onMouseWheel(((t,i)=>this.Bt(t,i))),t.onTouchStart(((t,i)=>this.Lt(t,i))),t.onTouchMove(((t,i)=>this.Rt(t,i))),t.onTouchEnd(((t,i)=>this.Et(t,i)))),t)}onMouseEnter(t){return this.L.on("mouseEnter",t)}onMouseLeave(t){return this.L.on("mouseLeave",t)}onMouseClick(t){return this.L.on("mouseClick",t)}onMouseDoubleClick(t){return this.L.on("mouseDoubleClick",t)}onMouseDown(t){return this.L.on("mouseDown",t)}onMouseUp(t){return this.L.on("mouseUp",t)}onMouseMove(t){return this.L.on("mouseMove",t)}onMouseDragStart(t){return this.L.on("mouseDragStart",t)}onMouseDrag(t){return this.L.on("mouseDrag",t)}onMouseDragStop(t){return this.L.on("mouseDragStop",t)}onMouseWheel(t){return this.L.on("mouseWheel",t)}onTouchStart(t){return this.L.on("touchStart",t)}onTouchMove(t){return this.L.on("touchMove",t)}onTouchEnd(t){return this.L.on("touchEnd",t)}offMouseEnter(t){return this.L.off(t,"mouseEnter")}offMouseLeave(t){return this.L.off(t,"mouseLeave")}offMouseClick(t){return this.L.off(t,"mouseClick")}offMouseDoubleClick(t){return this.L.off(t,"mouseDoubleClick")}offMouseDown(t){return this.L.off(t,"mouseDown")}offMouseUp(t){return this.L.off(t,"mouseUp")}offMouseMove(t){return this.L.off(t,"mouseMove")}offMouseDragStart(t){return this.L.off(t,"mouseDragStart")}offMouseDrag(t){return this.L.off(t,"mouseDrag")}offMouseDragStop(t){return this.L.off(t,"mouseDragStop")}offMouseWheel(t){return this.L.off(t,"mouseWheel")}offTouchStart(t){return this.L.off(t,"touchStart")}offTouchMove(t){return this.L.off(t,"touchMove")}offTouchEnd(t){return this.L.off(t,"touchEnd")}getIsUnderMouse(){return this.Pu>0}setVisible(t){const i=this.ji!==t;return this.ji=t,i&&this.L.emit("visibleStateChanged",this,this.ji),this}getVisible(){return this.ji}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}}const Jr=(t,i,s)=>{const e=t.getDraggingMode();if(e!==Gt.notDraggable){const h=t.scale.gi(t.getPosition(),{x:e!==Gt.onlyVertical?i.x:0,y:e!==Gt.onlyHorizontal?i.y:0}),r=t.scale,n=t.getSize(),o=t.getOrigin(),a=r.gi({x:r.x.getInnerStart(),y:r.y.getInnerStart()},Ds({x:(1+o.x)/2,y:(1+o.y)/2},n)),l=r.gi({x:r.x.getInnerEnd(),y:r.y.getInnerEnd()},Ds({x:(o.x-1)/2,y:(o.y-1)/2},n)),u={x:Math.min(Math.max(h.x,a.x),l.x),y:Math.min(Math.max(h.y,a.y),l.y)};t.setPosition(u),mi(s)}},Kr=(t,i,s,e,h)=>{Jr(t,h,i)},qr=(t,i,s,e,h)=>{Jr(t,e,h)};class tn extends Qr{constructor(t,i,s,e,h){super(),this.position=n(50,50),this.origin=n(0,0),this.size=n(0,0),this.$i=!1,this.Bu=void 0,this.Lu=void 0,this.Ru=Zr,this.Eu=void 0,this.Wo=!0,this.zu=()=>{const t="function"==typeof this.Ru?this.Ru(this):this.Ru;t&&(this.Lu=this.Ls.us.qr(t))},this.Vu=()=>{this.Ls.us.tn(this.Lu)},this.Xt=A(0,0,0,0),this.Ls=t,this.renderingScale=i,this.scale=s,this.jo=e,this.qi=h,this.Ls.xs(),this.onMouseEnter(this.zu),this.onMouseLeave(this.Vu),this.onMouseDrag(Kr);const r=ve(new be(Zt,qr,Zt));this.onTouchStart(r.onTouchStart),this.onTouchMove(r.onTouchMove),this.onTouchEnd(r.onTouchEnd),this.qi=h}setMouseInteractions(t){return this.Ou().forEach((i=>i.setMouseInteractions(t))),this.Wo=t,this}getMouseInteractions(){return this.Wo}setEffect(t){return this.es=this.es||this.Ls.us.es.hs(this,{Nu:{shapes:this.Ou()}}),this.es.Nu.bs(t),this}getEffect(){return!!this.es&&this.es.Nu.Ms()}setAutoDispose(t){return this.Eu=t,this.Ls.xs(),this}getAutoDispose(){return this.Eu}getSize(t=Ot.Everything){return t===Ot.Everything?n(this.size.x+(this.Xt.left+this.Xt.right),this.size.y+(this.Xt.bottom+this.Xt.top)):this.size}setContentSize(t){this.size=t}setMargin(t){return this.Xt="object"==typeof t?y(this.Xt,t):{left:t,top:t,right:t,bottom:t},this.Ls.xs(),this}getMargin(){return this.Xt}Ee(){if(this.Eu){const t=this.size,i=this.renderingScale.ni(),s={x:t.x/i.x,y:t.y/i.y};("max-width"===this.Eu.type&&s.x>=this.Eu.maxWidth||"max-height"===this.Eu.type&&s.y>=this.Eu.maxHeight)&&this.dispose()}return this}Vs(){return this}dispose(){return this.$i||(this.Ls.xs(),this.$i=!0,this.jo(this),this.L.emit("dispose",this),this.Ou().forEach((t=>t.dispose()))),this}setVisible(t){return super.setVisible(t),this.Ou().forEach((i=>i.setVisible(t))),this.Ls.xs(),this}isDisposed(){return this.$i}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setPosition(t){return this.position=t,this.Ls.xs(),this}getPosition(t=this.origin,i=Ot.Everything){const s=this.getSize(Ot.Everything),e=this.scale.gi(this.position,Ds({x:-(this.origin.x+1)/2,y:-(this.origin.y+1)/2},s));if(i===Ot.Everything)return this.scale.gi(e,Ds({x:(t.x+1)/2,y:(t.y+1)/2},s));const h=this.scale.gi(e,{x:this.Xt.left,y:this.Xt.bottom}),r=this.getSize(Ot.Content);return this.scale.gi(h,Ds({x:(t.x+1)/2,y:(t.y+1)/2},r))}setOrigin(t){return this.origin=t,this.Ls.xs(),this}getOrigin(){return this.origin}setDraggingMode(t=Gt.notDraggable){return this.Bu=t,this.Ls.xs(),this}getDraggingMode(){return void 0!==this.Bu?this.Bu:Gt.notDraggable}setMouseStyle(t){return this.Ru=t,this}getMouseStyle(){return this.Ru}}class sn extends tn{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Fa=A(),this.Gu=0,this.Ls=t,this.Uu=e,this.backgroundElement=new this.Uu(this.Ls,this.renderingScale,this.scale,Zt,r),this.Du(this.backgroundElement)}Ou(){return this.backgroundElement.Ou()}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}setBackground(t){return t(this.backgroundElement),this}getBackground(){return this.backgroundElement}Ee(){return super.Ee(),this.$i||(void 0!==this.na&&(this.backgroundElement.na=this.na-.01),this.backgroundElement.setOrigin(this.origin).setPosition(this.getPosition(this.origin,Ot.PaddedBackground)).Ee()),this}Vs(){const t=this.getSize(Ot.PaddedContent);return this.backgroundElement.Wu(t).Vs(),super.Vs()}dispose(){return super.dispose(),this.backgroundElement.dispose(),this}setVisible(t){return super.setVisible(t),this.backgroundElement.setVisible(t),this}setPadding(t){return this.Fa="object"==typeof t?y(this.Fa,t):{left:t,top:t,right:t,bottom:t},this.Ls.xs(),this}getPadding(){return this.Fa}getSize(t=Ot.Everything){let i=super.getSize(t);return t>=Ot.PaddedContent&&(i=n(i.x+this.Fa.left+this.Fa.right,i.y+this.Fa.bottom+this.Fa.top)),t>=Ot.PaddedBackground&&(i=n(i.x+this.backgroundElement.Yu()+this.backgroundElement.Hu(),i.y+this.backgroundElement.Xu()+this.backgroundElement.$u())),i}getPosition(t=this.origin,i=Ot.Everything){if(i===Ot.Everything)return super.getPosition(t,i);const s=super.getPosition(n(-1,-1),Ot.Everything),e=this.getMargin(),h=this.scale.gi(s,{x:e.left,y:e.bottom});if(i===Ot.PaddedBackground){const i=this.getSize(Ot.PaddedBackground);return this.scale.gi(h,Ds({x:(t.x+1)/2,y:(t.y+1)/2},i))}const r=this.scale.gi(h,{x:this.backgroundElement.Yu(),y:this.backgroundElement.Xu()});if(i===Ot.PaddedContent){const i=this.getSize(Ot.PaddedContent);return this.scale.gi(r,Ds({x:(t.x+1)/2,y:(t.y+1)/2},i))}const o=this.getPadding(),a=this.scale.gi(r,{x:o.left,y:o.bottom}),l=this.getSize(Ot.Content);return this.scale.gi(a,Ds({x:(t.x+1)/2,y:(t.y+1)/2},l))}setMouseInteractions(t){return super.setMouseInteractions(t),this.backgroundElement.setMouseInteractions(t),this}getHighlight(){return this.Gu}setHighlight(t){return this.Gu=Ui(t),this.backgroundElement.setHighlight(t),this.L.emit("highlight",this,t),this}}const en=t=>"setBackground"in t;class hn extends Qr{constructor(t,i,s,e,h,r,n,o,a,l,u){super(),this.S=0,this.ju=1,this.Zu=!0,this.Qu=new Rh,this.Ju=!0,this.$i=!1,this.axisScale=e,this.renderingScale=h,this.Ku=n,this.qu=o,this.tc=a,this.jo=l,this.ic=i,this.sc=s,this.hc=this.Du(this.ic.Ye(this.renderingScale)),this.qi=u,this.rc=this.Du(this.tc.setDirection(this.qu).nc(this.sc,this.renderingScale,r,Zt,this.qi,!1).setOrigin(gi(this.qu))),this.axis=t,this.setMouseInteractions(!1),"major"===this.rc.oc?this.hc.We(u.xAxisNumericTicks.majorTickStyle.gridStrokeStyle):"minor"===this.rc.oc?this.hc.We(u.xAxisNumericTicks.minorTickStyle.gridStrokeStyle):"other"===this.rc.oc&&this.hc.We(u.cursorGridStrokeStyleX)}setValue(t){return this.S=t,this.sc.xs(),this.L.emit("valueChange",this,this.S),this}getValue(){return this.S}setTextFormatter(t){return this.ac=t,this.sc.xs(),this}setTickLength(t){return this.rc.setPointerLength(t),this.ic.xs(),this}getTickLength(){return this.rc.getPointerLength()}setTickLabelPadding(t){return this.rc.setTickLabelPadding(t),this.ic.xs(),this}setTickLabelRotation(t){return this.rc.setTextRotation(t),this.ic.xs(),this}getTickLabelRotation(){return this.rc.getTextRotation()}getTickLabelPadding(){return this.rc.getTickLabelPadding()}setGridStrokeLength(t){return this.ju=t,this.ic.xs(),this}getGridStrokeLength(){return this.ju}setGridStrokeStyle(t){return this.hc.We(t),this.ic.xs(),this}getGridStrokeStyle(){return this.hc.Su()}dispose(){return this.$i||(this.$i=!0,this.hc.dispose(),this.rc.dispose(),this.jo(this),this.ic.us.xs(),this.L.emit("dispose",this)),this}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setMarkerVisible(t){return this.Zu=t,this.sc.xs(),this}getMarkerVisible(){return this.Zu}setMarker(t){return t(this.rc),this.sc.xs(),this}getMarker(){return this.rc}setMouseInteractions(t){return this.rc.setMouseInteractions(t),this.hc.setMouseInteractions(t),this}getMouseInteractions(){return this.hc.getMouseInteractions()}setAllocatesAxisSpace(t){return this.Ju=t,this.sc.xs(),this}getAllocatesAxisSpace(){return this.Ju}isInScale(){return As(this.S,this.axisScale.getInnerStart(),this.axisScale.getInnerEnd())}onValueChange(t){return this.L.on("valueChange",t)}offValueChange(t){return this.L.off(t,"valueChange")}}class rn extends hn{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,u,a,l),this.lc=!1,this.jo=a,this.ic=i,this.sc=s}dispose(){return this.lc=!1,super.dispose()}update(){return this}plot(t,i,s,e,h){if(this.isInScale()&&this.getVisible()&&t){this.lc=!1;const t=mt(this.S,this.axisScale,this.Ku.getWidth(this.renderingScale));this.hc.setVisible(!0).Xe(this.Ku.toPoint(t,i)).He(this.Ku.toPoint(t,i-(e+s*this.ju))),this.Zu?(this.ac&&this.rc.setText(this.ac(this.S,this)),this.rc.setVisible(!0).setPosition(this.Ku.toPoint(t,h))):this.rc.setVisible(!1)}else this.hc.setVisible(!1),this.rc.setVisible(!1);return this.rc.Vs().Ee(),this}uc(){const t=this.rc.Vs().getSize();return this.Ku.getHeight(t)}}const nn=(t,i)=>t.setTextFillStyle(i.uiTextFillStyle).setTextFont(i.uiTextFont),on=(t,i)=>(Pi(t.setButtonSize(i.uiButtonSize),i,!1,{fill:i.uiButtonFillStyle}),t),an=(t,i,s)=>{s&&en(t)&&t.setBackground((t=>t.setFillStyle(i.uiBackgroundFillStyle).setStrokeStyle(i.uiBackgroundStrokeStyle))).setEffect(!0)},ln={uiElement:void 0,stylers:t.List(),addStyler(t){return{...this,stylers:this.stylers.push(t)}},applyStylers(t,i){return this.stylers.forEach((s=>void 0!==s?s(t,i):void 0)),t}},un={background:void 0,setBackground(t){return{...this,background:t}}},cn={nc(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,e,h),h);return an(n,h,r),n}},dn={nc(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.background,e,h),h);return an(n,h,r),n}};class fn extends tn{constructor(){super(...arguments),this.cc=!0}Ee(){return super.Ee(),this}setMouseInteractions(t){return this.cc=t,this}getMouseInteractions(){return this.cc}Ou(){return[]}}class An extends fn{onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}Wu(t){return this.size=t,this}Yu(){return 0}Hu(){return 0}$u(){return 0}Xu(){return 0}setHighlight(t){return this}getHighlight(){return 0}setFillStyle(){return this}getFillStyle(){return O}setStrokeStyle(){return this}getStrokeStyle(){return dt}setStrokeThickness(){return this}getStrokeThickness(){return 0}}class gn extends tn{constructor(){super(...arguments),this.L=new s,this.Gu=0}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}getHighlight(){return this.Gu}setHighlight(t){return this.Gu=t,this.Ou().forEach((i=>i.cs(t))),this.L.emit("highlight",this,t),this.Ls.xs(),this}}class yn extends gn{}class mn extends yn{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Ls=t,this.Ka=this.Ls.dc(this.renderingScale,Or.Simple).setVisible(!1).Le(O).Be(dt),this.Du(this.Ka)}fc(){const t=this.Ac();if(t.length>2){const i=vs(t),s=n(i.max.x-i.min.x,i.max.y-i.min.y);this.setContentSize(s);const e=t.map((t=>{const e=Is(t,Fs(i.min,-1));return this.scale.gi(this.position,Is(e,Ds(Fs(Is(this.origin,n(1,1)),-.5),s)))})).map((t=>pt(t,this.scale,this.renderingScale)));this.Ka.Tl(e).setVisible(this.getVisible()).setVisible(this.getVisible())}else this.Ka&&this.Ka.setVisible(!1),this.setContentSize(n(0,0))}Ee(){return super.Ee(),this.$i||(this.fc(),void 0!==this.na&&this.Ka.la(this.na)),this}Vs(){return this.fc(),super.Vs()}setVisible(t){return super.setVisible(t),this.Ka.setVisible(t),this}}const pn=(t,i,s)=>t*(1-s)+i*s,vn=(t,i,s,e,h)=>{if(void 0===i.value||void 0===s.value||void 0===e.value||void 0===h.value)return;const r=(t.x-s.point.x)/(h.point.x-s.point.x),n=(h.point.y-s.point.y)*r+s.point.y,o=(t.x-i.point.x)/(e.point.x-i.point.x),a=(e.point.y-i.point.y)*o+i.point.y,l=(t.y-a)/(n-a),u=pn(s.value,h.value,r),c=pn(i.value,e.value,o);return pn(c,u,l)},Sn={warm:t=>i=>x(60/(t-1)*i,.8,.8),cold:t=>i=>x(60/(t-1)*i+180,.8,.8),fullSpectrum:t=>i=>x(360/t*i,.8,.8),reverseSpectrum:t=>i=>x(360/t*(t-i),.8,.8),flatUI:t=>i=>x(360/t*i+8,.8,.8-.15/t*i),arction:t=>i=>{const s=1-.2/t*i;return x(360/t*i+51,s,s)},arctionWarm:t=>i=>{const s=t-1,e=1-.2/s*i;return x(46-46/s*i+4,e,e)},sunset:t=>i=>{const s=[170,320];return x(i%2?s[0]:s[1],.8,.5+.5/(t-1)*i)},dynamic:t=>i=>{const s=i%2,e=[234,346];return x(s?e[0]:e[1],s?.3:.9,.5+.5/(t-1)*i)},magenta:t=>i=>{const s=[.9,.6];return x(354,i%2?s[0]:s[1],.5+.5/(t-1)*i)},greyscale:t=>i=>x(0,0,.25+.5/(t-1)*i),frozen:t=>i=>{const s=[.8,.6];return x(160+80/(t-1)*i,.6,i%2?s[0]:s[1])},retro:t=>i=>{const s=[6,183];return x(i%2?s[0]:s[1],.7,.5+.5/(t-1)*i)},crayons:t=>i=>{let s=180+230/(t-1)*i;return s>360&&(s-=360),x(s,.9,.8)},custom:(t,i)=>s=>{const e=.25+.5/(t-1)*s;if(!i)return x(0,0,e);const h=i.getR()/255,r=i.getG()/255,n=i.getB()/255,o=Math.max(h,r,n),a=Math.min(h,r,n);let l=0;if(o!==a){const t=o-a;switch(o){case h:l=(r-n)/t+(r<n?6:0);break;case r:l=(n-h)/t+2;break;case n:l=(h-r)/t+4;break;default:l=0}return l=l/6*360,x(l,.8,e)}return x(0,0,e)},sector:(t,i,s=.8,e=.8)=>h=>r=>x(t+(i-t)/h*r,s,e),auroraBorealis:t=>i=>bn([{value:0,hex:"#23FF7A"},{value:1/9,hex:"#03E65D"},{value:2/9,hex:"#04D155"},{value:3/9,hex:"#00B849"},{value:4/9,hex:"#00A869"},{value:5/9,hex:"#008F68"},{value:6/9,hex:"#00815E"},{value:7/9,hex:"#017153"},{value:8/9,hex:"#704A85"},{value:1,hex:"#743A70"}],t,i),blueSciFi:t=>i=>bn([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#E2E7FF"},{value:2/9,hex:"#ACB9F8"},{value:3/9,hex:"#889DFF"},{value:4/9,hex:"#547EEF"},{value:5/9,hex:"#4068D8"},{value:6/9,hex:"#2B50B7"},{value:7/9,hex:"#1B3E9F"},{value:8/9,hex:"#8D1395"},{value:1,hex:"#780A74"}],t,i),light:t=>i=>bn([{value:0,hex:"#FECC00"},{value:1/9,hex:"#F7B300"},{value:2/9,hex:"#EF9900"},{value:3/9,hex:"#E88000"},{value:4/9,hex:"#E06600"},{value:5/9,hex:"#DD5A00"},{value:6/9,hex:"#D94D00"},{value:7/9,hex:"#D13300"},{value:8/9,hex:"#C91A00"},{value:1,hex:"#C10000"}],t,i),monochrome:t=>i=>bn([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#EEEEEE"},{value:2/9,hex:"#DCDCDC"},{value:3/9,hex:"#C1C1C1"},{value:4/9,hex:"#A4A2A2"},{value:5/9,hex:"#8B8B8B"},{value:6/9,hex:"#787878"},{value:7/9,hex:"#656565"},{value:8/9,hex:"#565555"},{value:1,hex:"#434343"}],t,i),night:t=>i=>bn([{value:0,hex:"#F0F9E0"},{value:1/9,hex:"#C9DFA4"},{value:2/9,hex:"#B5C796"},{value:3/9,hex:"#8998B7"},{value:4/9,hex:"#6E7E9E"},{value:5/9,hex:"#5C6D8F"},{value:6/9,hex:"#47587A"},{value:7/9,hex:"#374B72"},{value:8/9,hex:"#273C65"},{value:1,hex:"#192847"}],t,i),sunset2:t=>i=>bn([{value:0,hex:"#22334D"},{value:1/9,hex:"#82062C"},{value:2/9,hex:"#AB001D"},{value:3/9,hex:"#D80428"},{value:4/9,hex:"#CF5D1B"},{value:5/9,hex:"#CF8229"},{value:6/9,hex:"#CF9D29"},{value:7/9,hex:"#C4BE25"},{value:8/9,hex:"#E1DC49"},{value:1,hex:"#FFFA67"}],t,i)},bn=(t,i,s)=>{const e=Mn(i,s),[h,r]=_n(e,t),n=xn(t[h]),o=xn(t[r]),a=0!==n.value?(o.value-e)/n.value:0,l={value:a,h:pn(n.h,o.h,a),s:pn(n.s,o.s,a),v:pn(n.v,o.v,a)};return x(l.h,l.s,l.v)},xn=t=>{const i=(t=>{const i=t.r,s=t.g,e=t.b,h=Math.max(i,s,e),r=Math.min(i,s,e);let n=0;const o=h,a=h-r,l=0===h?0:a/h;if(h===r)n=0;else{switch(h){case i:n=(s-e)/a+(s<e?6:0);break;case s:n=(e-i)/a+2;break;case e:n=(i-s)/a+4}n/=6}return[360*n,l,o]})(b(t.hex));return{value:t.value,h:i[0],s:i[1],v:i[2]}},Mn=(t,i)=>{const s=i/t;return s<0?0:s>1?1:s},_n=(t,i)=>{if(i.length<2)throw new Error("Invalid palette size");for(let s=0;s<i.length;s+=1)if(t<i[s].value)return[s-1,s];return[i.length-2,i.length-1]};class wn{constructor(){this.type="simple"}}const Cn=t=>!(!t||"object"!=typeof t||!("type"in t)||"simple"!==t.type),kn=new wn;class Tn{constructor(t){this.type="phong",this.ambientReflection=1,this.specularReflection=.1,this.diffuseReflection=1,this.ambientColor=b("#000"),this.specularColor=b("#fff"),this.shininess=32,t&&(this.ambientReflection=Number.isNaN(Number(t.ambientReflection))?this.ambientReflection:Number(t.ambientReflection),this.specularReflection=Number.isNaN(Number(t.specularReflection))?this.specularReflection:Number(t.specularReflection),this.diffuseReflection=Number.isNaN(Number(t.diffuseReflection))?this.diffuseReflection:Number(t.diffuseReflection),this.ambientColor=t.ambientColor||this.ambientColor,this.specularColor=t.specularColor||this.specularColor,this.shininess=t.shininess||this.shininess)}}const Fn=t=>!(!t||"object"!=typeof t||!("type"in t)||"phong"!==t.type),In=new Tn,Pn={Simple:wn,Phong:Tn},Dn={Dotted:[1,3],DottedDense:[1,1],Dashed:[3,1],DashedEqual:[2,2],DashedLoose:[2,4],DashDotted:[3,2,1,2]},Bn=i({type:"linestyle",lineType:"dashed",pattern:Dn.DashedEqual,fillStyle:new W({color:S(255,255,255)}),thickness:1,patternScale:3});class Ln extends Bn{constructor(t){super({...t,lineType:"dashed"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}O(){const t=this.getThickness();return t<0?1:t}setPattern(t){return"function"==typeof t?this.set("pattern",t(this.getPattern())):this.set("pattern",t)}getPattern(){return this.get("pattern")}setPatternScale(t){return"function"==typeof t?this.set("patternScale",t(this.getPatternScale())):this.set("patternScale",t)}getPatternScale(){return this.get("patternScale")}}const Rn=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"dashed"!==t.lineType),En=i({type:"icon",width:void 0,height:void 0,gc:void 0,yc:Zt,mc:Zt});class zn extends En{constructor(t,i,s,e){super({...e,gc:t,yc:i,mc:s})}dispose(){return this.mc(this),this}setWidth(t){const i=this.set("width",t);return this.yc(i),i}getWidth(){return this.get("width")}setHeight(t){const i=this.set("height",t);return this.yc(i),i}getHeight(){return this.get("height")}setSize(t,i){const s=this.withMutations((s=>{s.set("width",t).set("height",i)}));return this.yc(s),s}ni(){if(!this.gc)return{x:0,y:0};const t=this.gc.width,i=this.gc.height;if(0===t||0===i)return{x:0,y:0};const s=this.width,e=this.height;return"number"==typeof s&&"number"==typeof e?{x:s,y:e}:"number"==typeof s?{x:s,y:i*s/t}:"number"==typeof e?{x:t*e/i,y:e}:{x:t,y:i}}}const Vn=t=>!(!t||"object"!=typeof t||!("type"in t)||"icon"!==t.type),On=i({type:"glow",color:S(255,255,255,50),spread:1,blur:4,offset:{x:0,y:0}});class Nn extends On{constructor(t){super(t)}setSpread(t){return this.set("spread","function"==typeof t?t(this.get("spread")):t)}getSpread(){return this.get("spread")}setBlur(t){return this.set("blur","function"==typeof t?t(this.get("blur")):t)}getBlur(){return this.get("blur")}setColor(t){return this.set("color","function"==typeof t?t(this.get("color")):t)}getColor(){return this.get("color")}setOffset(t){return this.set("offset","function"==typeof t?t(this.get("offset")):t)}getOffset(){return this.get("offset")}}const Gn=t=>!(!t||"object"!=typeof t||!("type"in t)||"glow"!==t.type);class Un{constructor(t){this.vc=0,this.Sc=0,this.bc=0,this.xc=!1,this.Mc=!0,this._c=!1,this.wc={warningDisplayed:!1,expandEvents:[]},this.L=new s,this.Mc=!t||void 0===t.autoSortingEnabled||t.autoSortingEnabled,void 0!==(null==t?void 0:t.dataPattern)&&(this.Cc={userSpecified:null===t.dataPattern?void 0:t.dataPattern}),this.kc=void 0!==(null==t?void 0:t.lookupValues)&&t.lookupValues,this.Tc=void 0!==(null==t?void 0:t.colors)&&t.colors,this.Fc=void 0!==(null==t?void 0:t.ids)&&t.ids,this.Ic=void 0!==(null==t?void 0:t.sizes)&&t.sizes,this.Pc=void 0!==(null==t?void 0:t.rotations)&&t.rotations,this.Dc=(null==t?void 0:t.dataStorage)?t.dataStorage:Float64Array,this.Bc=!1!==(null==t?void 0:t.allowInputModification)}add(t){return Array.isArray(t)?this.appendJSON(t,{x:"x",y:"y"}):this.appendSample(t),this}addArraysXY(t,i){return this.appendSamples({xValues:t,yValues:i}),this}appendJSON(t,i={x:"x",y:"y"}){const s=t.length,e=i.x,h=i.y,r=i.lookupValue,n=i.size,o=i.rotation,a=i.color,l=i.id;let u,c,d,f,A,g,y;if(e){u=new this.Dc(s);const i=t[0]&&t[0][e]instanceof Date,h=t[0]&&Qn(t[0][e]);if(!h&&t[0]&&"string"==typeof t[0][e])throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(h)for(let i=0;i<s;i+=1){const s=t[i];u[i]=new Date(s[e]).getTime()}else if(i)for(let i=0;i<s;i+=1){const s=t[i];u[i]=s[e].getTime()}else for(let i=0;i<s;i+=1){const s=t[i];u[i]=s[e]}}if(h){c=new this.Dc(s);const i=t[0]&&t[0][h]instanceof Date,e=t[0]&&Qn(t[0][h]);if(!e&&t[0]&&"string"==typeof t[0][h])throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(e)for(let i=0;i<s;i+=1){const s=t[i];c[i]=new Date(s[h]).getTime()}else if(i)for(let i=0;i<s;i+=1){const s=t[i];c[i]=s[h].getTime()}else for(let i=0;i<s;i+=1){const s=t[i];c[i]=s[h]}}if(r){d=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];d[i]=s[r]}}if(a){f=[];for(let i=0;i<s;i+=1){const s=t[i];f[i]=s[a]}}if(l){A=new Uint32Array(s);for(let i=0;i<s;i+=1){const s=t[i];A[i]=s[l]}}if(n){g=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];g[i]=s[n]}}if(o){y=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];y[i]=s[o]}}return this.appendSamples({xValues:u,yValues:c,ids:A,colors:f,lookupValues:d,sizes:g,rotations:y,start:i.start,step:i.step}),this}appendSample(t){const{samplesCacheX:i,samplesCacheY:s,samplesCacheColors:e,samplesCacheIDs:h,samplesCacheLookup:r,samplesCacheSize:n,samplesCacheRotation:o,maxSampleCount:a,dataPattern:l}=this.Lc({appendCount:1}),u=this.Rc(),c=void 0!==t.step?t.step:l?cr(l)?1:-1:1,d=t.x&&t.x instanceof Date&&t.x,f=t.x&&Qn(t.x)&&t.x,A=t.y&&t.y instanceof Date&&t.y,g=t.y&&Qn(t.y)&&t.y;if(!f&&"string"==typeof t.x)throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(!g&&"string"==typeof t.y)throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");const y=d?d.getTime():f?Date.parse(f):"number"==typeof t.x?t.x:u?u.x+c:0,m=A?A.getTime():g?Date.parse(g):"number"==typeof t.y?t.y:u?u.y+c:0;if(l&&this.Mc&&this.Ec&&this.zc&&!this.Vc(l,y,m)&&!this._c)return this.Oc(this.Ec,this.zc,new this.Dc([y]),new this.Dc([m]),void 0!==t.lookupValue?new Float32Array([t.lookupValue]):void 0,void 0!==t.color?this.Nc((t.color,[t.color])):void 0,void 0!==t.id?new Uint32Array([t.id]):void 0,void 0!==t.size?new Float32Array([t.size]):void 0,void 0!==t.rotation?new Float32Array([t.rotation]):void 0,l),this;if(i[this.vc]=y,s[this.vc]=m,void 0!==t.lookupValue&&r&&(r[this.vc]=t.lookupValue),void 0!==t.color&&e){const i=this.Nc((t.color,[t.color]));void 0!==i&&(e[this.vc]=i[0])}return void 0!==t.id&&h&&(h[this.vc]=t.id),void 0!==t.size&&n&&(n[this.vc]=t.size),void 0!==t.rotation&&o&&(o[this.vc]=t.rotation),this.Gc(this.vc,this.vc),this.vc+=1,this.vc>a-1&&(this.vc=0,this.xc=!0),this.Sc=Math.min(this.Sc+1,a),this.bc+=1,this}appendSamples(t){const{lookupValues:i,colors:s,ids:e,sizes:h,rotations:r,start:n,step:o}=t;let a=t.offset,l=t.count;const u=t.xValues||t.yValues;if(!u)return this;const c=u.length;if(a=void 0!==a?a:0,l=void 0!==l?l:c-a,l<=0)return this;const d=void 0!==t.offsetLookupValues?t.offsetLookupValues:a,f=void 0!==t.offsetColors?t.offsetColors:a,A=void 0!==t.offsetIds?t.offsetIds:a,g=void 0!==t.offsetSizes?t.offsetSizes:a,y=void 0!==t.offsetRotations?t.offsetRotations:a,m=this.Uc(!0),[p,v]=this.Wc(l,t.xValues,"x","ProgressiveX"===m||"RegressiveX"===m||void 0===m?n:void 0,"ProgressiveX"===m||"RegressiveX"===m||void 0===m?o:void 0,a,m),[S,b]=this.Wc(l,t.yValues,"y","ProgressiveY"===m||"RegressiveY"===m?n:void 0,"ProgressiveY"===m||"RegressiveY"===m?o:void 0,a,m),x=this.Nc(s),{samplesCacheX:M,samplesCacheY:_,samplesCacheLookup:w,samplesCacheColors:C,samplesCacheIDs:k,samplesCacheSize:T,samplesCacheRotation:F,maxSampleCount:I,dataPattern:P,incomingDataReplacedCache:D}=this.Lc({appendCount:l,...0===v&&0===b&&0===a&&0===d&&0===f&&0===A&&0===g&&0===y?{incomingDataX:p,incomingDataY:S,incomingDataLookup:i,incomingDataIDs:e,incomingDataColors:x,incomingDataSize:h,incomingDataRotation:r}:{}});if(!D&&P&&this.Mc&&this.Ec&&this.zc){const t=p[v],s=S[b];if(!this.Vc(P,t,s)&&!this._c)return this.Oc(this.Ec,this.zc,jn(p,v,v+l),jn(S,b,b+l),jn(i,d,d+l),jn(x,f,f+l),jn(e,A,A+l),jn(h,g,g+l),jn(r,y,y+l),P),this}const B=I-this.vc,L=Math.min(l,B);if(L>0&&(D||(Xn(M,p,v,L,this.vc),Xn(_,S,b,L,this.vc),i&&w&&Xn(w,i,d,L,this.vc),e&&k&&Xn(k,e,A,L,this.vc),x&&C&&Xn(C,x,f,L,this.vc),h&&T&&Xn(T,h,g,L,this.vc),r&&F&&Xn(F,r,y,L,this.vc)),this.Gc(this.vc,this.vc+L-1),this.vc+=L,this.vc>I-1&&(this.vc=0,this.xc=!0)),this.Sc=Math.min(this.Sc+L,I),this.bc+=L,this.Uc(),l-L>0){const t={xValues:p?jn(p,v+L,void 0):void 0,yValues:S?jn(S,b+L,void 0):void 0,lookupValues:i?jn(i,d+L,void 0):void 0,ids:e?jn(e,A+L,void 0):void 0,colors:x?jn(x,f+L,void 0):void 0,sizes:h?jn(h,g+L,void 0):void 0,rotations:r?jn(r,y+L,void 0):void 0};this.appendSamples(t)}return this}setSamples(t){return this.clear().appendSamples(t)}fill(t){const i=this.Ec||this.zc;if(!i)return this;const s=i.length;if(void 0!==t.x&&(this.Ec=this.Ec||new this.Dc(s),this.Ec.fill(t.x)),void 0!==t.y&&(this.zc=this.zc||new this.Dc(s),this.zc.fill(t.y)),void 0!==t.lookupValue&&(this.Yc=this.Yc||new Float32Array(s),this.Yc.fill(t.lookupValue)),void 0!==t.color){const i=this.Nc([t.color]);i&&(this.Hc=this.Hc||new Uint32Array(s),this.Hc.fill(i[0]))}return void 0!==t.size&&(this.Xc=this.Xc||new Float32Array(s),this.Xc.fill(t.size)),void 0!==t.rotation&&(this.$c=this.$c||new Float32Array(s),this.$c.fill(t.rotation)),this.L.emit("cleared"),this}alterSamples(t,i){const{xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a}=i;let l=i.offset,u=i.count;const c=s||e||h||r||n||o||a,d=c?c.length:void 0!==i.x||void 0!==i.y?1:0;if(l=void 0!==l?l:0,u=void 0!==u?u:d-l,u<=0)return this;const f=void 0!==i.offsetLookupValues?i.offsetLookupValues:l,A=void 0!==i.offsetColors?i.offsetColors:l,g=void 0!==i.offsetIds?i.offsetIds:l,y=void 0!==i.offsetSizes?i.offsetSizes:l,m=void 0!==i.offsetRotations?i.offsetRotations:l,p=this.Nc(r),v=this.bc-1,S=void 0!==this.jc?Math.max(this.bc-this.jc,0):0,b=t+u-1,x=Math.max(t,S),M=Math.min(b,v),_=M-x+1;if(this.bc>0&&_>0){const{samplesCacheX:r,samplesCacheY:u,samplesCacheColors:c,samplesCacheIDs:d,samplesCacheLookup:v,samplesCacheSize:b,samplesCacheRotation:w}=this.Lc({appendCount:0}),C=r.length;if(void 0!==this.jc&&this.xc&&this.bc%this.jc!=0){const S=this.bc-this.bc%this.jc,_=this.bc-1,k=this.bc-this.Sc,T=S-1,F=Math.max(x,k),I=Math.min(M,T)-F+1;if(I>0){const S=F-t,x=Wn(F,this.bc,C,this.vc);if(void 0!==i.x)for(let t=x;t<x+I;t+=1)r[t]=i.x;if(void 0!==i.y)for(let t=x;t<x+I;t+=1)u[t]=i.y;s&&Xn(r,s,l+S,I,x),e&&Xn(u,e,l+S,I,x),h&&v&&Xn(v,h,f+S,I,x),n&&d&&Xn(d,n,g+S,I,x),p&&c&&Xn(c,p,A+S,I,x),o&&b&&Xn(b,o,y+S,I,x),a&&w&&Xn(w,a,m+S,I,x)}const P=Math.max(x,S),D=Math.min(M,_)-P+1;if(D>0){const S=P-t,x=Wn(P,this.bc,C,this.vc);if(void 0!==i.x)for(let t=x;t<x+D;t+=1)r[t]=i.x;if(void 0!==i.y)for(let t=x;t<x+D;t+=1)u[t]=i.y;s&&Xn(r,s,l+S,D,x),e&&Xn(u,e,l+S,D,x),h&&v&&Xn(v,h,f+S,D,x),n&&d&&Xn(d,n,g+S,D,x),p&&c&&Xn(c,p,A+S,D,x),o&&b&&Xn(b,o,y+S,D,x),a&&w&&Xn(w,a,m+S,D,x)}}else{const t=x-S;if(void 0!==i.x)for(let s=t;s<t+_;s+=1)r[s]=i.x;if(void 0!==i.y)for(let s=t;s<t+_;s+=1)u[s]=i.y;e&&Xn(u,e,l,_,t),s&&Xn(r,s,l,_,t),e&&Xn(u,e,l,_,t),h&&v&&Xn(v,h,f,_,t),n&&d&&Xn(d,n,g,_,t),p&&c&&Xn(c,p,A,_,t),o&&b&&Xn(b,o,y,_,t),a&&w&&Xn(w,a,m,_,t)}this.L.emit("cleared")}const w=t+u-1-v;if(w>0){const i=M+1-t;this.appendSamples({xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a,offset:l+i,offsetLookupValues:f+i,offsetColors:A+i,offsetIds:g+i,offsetSizes:y+i,offsetRotations:m+i,count:w})}return this}alterSamplesByID(t,i){if(!this.Fc)throw new Error("LightningChart JS attempted to use alterSamplesByID on DataSetXY that doesn't have IDs enabled.");const s=t.length,e=this.Zc;if(s<=0||!e)return this;const h=(("object"==typeof i.color?this.Nc([i.color]):"number"==typeof i.color?[i.color]:[])||[])[0],r=Array.isArray(i.xValues)?new this.Dc(i.xValues):i.xValues,n=Array.isArray(i.yValues)?new this.Dc(i.yValues):i.yValues,o=Array.isArray(i.yValues)?new Float32Array(i.yValues):i.yValues,a=this.Nc(i.colors),l=Array.isArray(i.sizes)?new Float32Array(i.sizes):i.sizes,u=Array.isArray(i.rotations)?new Float32Array(i.rotations):i.rotations,c=e.length,d=this.Sc,f=this.bc-1,A=Math.max(f-d+1,0);for(let d=0;d<s;d+=1){const s=t[d],g=Hn(s,A,f,!0,(t=>e[Wn(t,this.bc,c,this.vc)])),y=Wn(g,this.bc,c,this.vc);e[y]===s&&(void 0!==i.x&&this.Ec&&(this.Ec[y]=i.x),void 0!==i.y&&this.zc&&(this.zc[y]=i.y),void 0!==i.lookupValue&&this.Yc&&(this.Yc[y]=i.lookupValue),void 0!==i.size&&this.Xc&&(this.Xc[y]=i.size),void 0!==i.rotation&&this.$c&&(this.$c[y]=i.rotation),void 0!==h&&this.Hc&&(this.Hc[y]=h),r&&this.Ec&&(this.Ec[y]=r[d]),n&&this.zc&&(this.zc[y]=n[d]),o&&this.Yc&&(this.Yc[y]=o[d]),a&&this.Hc&&(this.Hc[y]=a[d]),l&&this.Xc&&(this.Xc[y]=l[d]),u&&this.$c&&(this.$c[y]=u[d]))}return this.L.emit("cleared"),this}clear(){return this.vc=0,this.Sc=0,this.bc=0,this.xc=!1,this.L.emit("cleared"),this}getSampleCount(){return this.Sc}getNextSampleIndex(){return this.bc}setMaxSampleCount(t){if("object"==typeof t){this.Qc&&this.offMaxSampleCountExceeded(this.Qc);const i=t.max,s=t.initial,e=t=>{const s=this.jc||0;if(void 0!==i&&s>=i)return;let e=Math.max(2*s,t);void 0!==i&&(e=Math.min(e,i)),this.setMaxSampleCount(e)};this.Qc=this.onMaxSampleCountExceeded(((t,i,s,h)=>{e(h)})),void 0===this.jc&&(void 0!==s?this.setMaxSampleCount(s):this.setMaxSampleCount(Math.min(2*this.Sc,void 0!==i?i:Number.MAX_SAFE_INTEGER)))}else if("number"==typeof t){const i=t;if(void 0!==this.jc&&this.jc>i)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to shrink data set. This is currently not supported.");if(!this.Ec||!this.zc)return this.jc=i,this;if(i===this.jc)return this;if(this.xc&&0!==this.vc)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to expand data set that has exceeded its max sample count. This is currently not supported.");this.jc=i,this.Sc<i?(this.vc=this.Sc,this.xc=!1):(this.vc=0,this.xc=!0);const s=new this.Dc(this.jc);s.set(this.Ec);const e=new this.Dc(this.jc);if(e.set(this.zc),this.Ec=s,this.zc=e,this.kc){const t=new Float32Array(this.jc);this.Yc&&t.set(this.Yc),this.Yc=t}if(this.Fc){const t=new Uint32Array(this.jc);this.Zc&&t.set(this.Zc),this.Zc=t}if(this.Tc){const t=new Uint32Array(this.jc);this.Hc&&t.set(this.Hc),this.Hc=t}if(this.Ic){const t=new Float32Array(this.jc);this.Xc&&t.set(this.Xc),this.Xc=t}if(this.Pc){const t=new Float32Array(this.jc);this.$c&&t.set(this.$c),this.$c=t}}return this}getMaxSampleCount(){return this.jc}readBack(t){if(!this.Ec||!this.zc)return{xValues:new this.Dc,yValues:new this.Dc,iSampleFirst:0};const i=this.Ec.length;let s,e=[];if(null==t?void 0:t.onlyInRange){const i=this.Jc();if(!i)throw new Error("LightningChart JS - attempted to use `DataSetXY.readBack` with `visibleOnly: true` without a data pattern.\nThis operation is only supported for patterned data (e.g. 'ProgressiveX')");const h=Math.min(t.onlyInRange.start,t.onlyInRange.end),r=Math.max(t.onlyInRange.start,t.onlyInRange.end),n=Yn(h,r,"x"===ur(i)?this.Ec:this.zc,this.bc,this.Sc,this.vc,i,0);if(!n)return{xValues:new this.Dc,yValues:new this.Dc,iSampleFirst:0};e=n.dataRanges,s=n.iFirstSample}else if(void 0!==this.jc&&this.xc&&this.bc%this.jc!=0){const t=this.vc,h=i-t,r=this.vc-1;e.push({offset:t,count:h}),e.push({offset:0,count:r+1}),s=this.bc-i}else e.push({offset:0,count:this.Sc}),s=0;const h=e.reduce(((t,i)=>t+i.count),0),r=new this.Dc(h),n=new this.Dc(h),o=this.Tc?new Uint32Array(h):void 0,a=this.kc?new Float32Array(h):void 0,l=this.Fc?new Uint32Array(h):void 0,u=this.Ic?new Float32Array(h):void 0,c=this.Pc?new Float32Array(h):void 0;let d=0;for(const t of e)r.set(this.Ec.subarray(t.offset,t.offset+t.count),d),n.set(this.zc.subarray(t.offset,t.offset+t.count),d),this.Tc&&o&&this.Hc&&o.set(this.Hc.subarray(t.offset,t.offset+t.count),d),this.kc&&a&&this.Yc&&a.set(this.Yc.subarray(t.offset,t.offset+t.count),d),this.Fc&&l&&this.Zc&&l.set(this.Zc.subarray(t.offset,t.offset+t.count),d),this.Ic&&u&&this.Xc&&u.set(this.Xc.subarray(t.offset,t.offset+t.count),d),this.Pc&&c&&this.$c&&c.set(this.$c.subarray(t.offset,t.offset+t.count),d),d+=t.count;return{xValues:r,yValues:n,iSampleFirst:s,lookupValues:a,colors:o,ids:l,sizes:u,rotations:c}}onMaxSampleCountExceeded(t){return this.L.on("maxSampleCountExceeded",t)}offMaxSampleCountExceeded(t){return this.L.off(t)}Wc(t,i,s,e,h,r,n){if(void 0===i){const i=this.Rc();h=void 0!==h?h:n&&ur(n)===s?cr(n)?1:-1:1,e=void 0!==e?e:i?i[s]+h:0;const r=new this.Dc(t);for(let i=0;i<t;i+=1)r[i]=e+i*h;return[r,0]}const o=i[0]&&i[0]instanceof Date,a=i[0]&&Qn(i[0]);if(!a&&i[0]&&"string"==typeof i[0])throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(void 0!==e||void 0!==h){const l=this.Rc();h=void 0!==h?h:n&&ur(n)===s?cr(n)?1:-1:1,e=void 0!==e?e:l?l[s]+h:0;const u=new this.Dc(t);if(a)for(let s=0;s<t;s+=1)u[s]=e+new Date(i[s+r]).getTime()*h;else if(o)for(let s=0;s<t;s+=1)u[s]=e+i[s+r].getTime()*h;else for(let s=0;s<t;s+=1)u[s]=e+i[s+r]*h;return[u,0]}if(a){const s=new this.Dc(t);for(let e=0;e<t;e+=1)s[e]=new Date(i[e]).getTime();return[s,r]}if(o){const s=new this.Dc(t);for(let e=0;e<t;e+=1)s[e]=i[e].getTime();return[s,r]}return[i,r]}Nc(t){if(!t||0===t.length)return;const i=t[0];if(v(i)){const i=t.length,s=new Uint32Array(i);for(let e=0;e<i;e+=1){const i=t[e],h=255*i.a<<24|255*i.b<<16|255*i.g<<8|255*i.r;s[e]=h}return s}return t}Kc(){return{min:0,max:void 0!==this.jc&&this.xc?this.jc-1:this.Sc-1}}qc(t){t=Math.min(t,this.Sc),this.bc-=t,this.Sc-=t,this.vc-=t,this.vc<0&&void 0!==this.jc&&(this.vc+=this.jc)}Oc(t,i,s,e,h,r,n,o,a,l){const u=ur(l),c=cr(l),d="x"===u?t:i,f="x"===u?s:e,A=s.length,g=f[0];if(this.Vc(l,s[A-1],e[A-1])){const t=this.Rc(),i=t?t[u]:0;let l=0;for(let t=0;t<A;t+=1)if(f[t]>i){l=t;break}const c={xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a,offset:l};this._c=!0,this.appendSamples(c),this._c=!1}else{const l=t.length,u=this.Sc,f=this.bc-1,y=Math.max(f-u+1,0),m=Hn(g,y,f,c,(t=>d[Wn(t,this.bc,l,this.vc)])),p=m-1,v=m+1,S=d[Wn(m,this.bc,l,this.vc)],b=v<=this.bc-1?d[Wn(v,this.bc,l,this.vc)]:void 0,x=void 0!==b&&(c&&b<g||!c&&b>g)?v+1:c&&S<g||!c&&S>g?m+1:p+1,M=f-x+1,_=new this.Dc(M),w=new this.Dc(M),C=this.kc?new Float32Array(M):void 0,k=this.Tc?new Uint32Array(M):void 0,T=this.Fc?new Uint32Array(M):void 0,F=this.Ic?new Float32Array(M):void 0,I=this.Pc?new Float32Array(M):void 0;let P=0;for(let s=x;s<=f;s+=1){const e=Wn(s,this.bc,l,this.vc);_[P]=t[e],w[P]=i[e],C&&this.Yc&&(C[P]=this.Yc[e]),k&&this.Hc&&(k[P]=this.Hc[e]),T&&this.Zc&&(T[P]=this.Zc[e]),F&&this.Xc&&(F[P]=this.Xc[e]),I&&this.$c&&(I[P]=this.$c[e]),P+=1}this.qc(M);const D=new this.Dc(A+M);D.set(s),D.set(_,A);const B=new this.Dc(A+M);let L,R,E,z,V;B.set(e),B.set(w,A),h&&C&&(L=new Float32Array(A+M),L.set(h),L.set(C,A)),r&&k&&(R=new Uint32Array(A+M),R.set(r),R.set(k,A)),n&&T&&(E=new Uint32Array(A+M),E.set(n),E.set(T,A)),o&&F&&(z=new Float32Array(A+M),z.set(o),z.set(F,A)),a&&I&&(V=new Float32Array(A+M),V.set(a),V.set(I,A)),this._c=!0,this.appendSamples({xValues:D,yValues:B,lookupValues:L,colors:R,ids:E,sizes:z,rotations:V}),this._c=!1,this.L.emit("cleared")}}Jc(){return this.Uc()}Uc(t=!1){let i;if(this.Cc&&"userSpecified"in this.Cc)i=this.Cc.userSpecified;else if(this.Cc&&"autoDetectResult"in this.Cc)i=this.Cc.autoDetectResult;else if(this.Ec&&this.zc&&this.bc>0&&!t){const t=void 0!==this.jc&&this.xc?this.vc:0,s=this.Sc-1,e=void 0!==this.jc&&this.xc?0:void 0,h=void 0!==this.jc&&this.xc?this.vc-1:void 0,[r,n]=void 0!==e&&void 0!==h&&Math.abs(h-e)>Math.abs(s-t)?[e,h]:[t,s];if(1+n-r>=2){let t,s,e=this.Ec[r],h=this.zc[r];for(let i=r+1;i<=n;i+=1){if(!1!==t){const s=this.Ec[i],h=Math.sign(s-e);0!==h&&t&&t.direction!==h?t=!1:0===h||t||(t={direction:h}),e=s}if(!1!==s){const t=this.zc[i],e=Math.sign(t-h);0!==e&&s&&s.direction!==e?s=!1:0===e||s||(s={direction:e}),h=t}}i=t&&t.direction>0?lr.ProgressiveX:t&&t.direction<0?lr.RegressiveX:s&&s.direction>0?lr.ProgressiveY:s&&s.direction<0?lr.RegressiveY:void 0,this.Cc={autoDetectResult:i},i&&Yt.console.warn(`LightningChart JS DataSetXY warning | Data pattern was detected automatically (DataPatterns.${i}).\nAutomatic detection is only intended for kick-starting application development, not for production use.\nAdd { dataPattern: '${i}'} } to your application when creating series or DataSetXY to clear this warning.`)}}return i}Vc(t,i,s){const e=this.Rc();return!e||("ProgressiveX"===t?i>e.x:"RegressiveX"===t?i<e.x:"ProgressiveY"===t?s>e.y:"RegressiveY"!==t||s<e.y)}Lc(t){if(t.incomingDataX&&t.incomingDataY&&0===this.Sc&&!this.Ec&&!this.zc&&(void 0===this.jc||this.jc===t.appendCount)&&this.Bc)return this.Ec=$n(t.incomingDataX,this.Dc)||new this.Dc,this.zc=$n(t.incomingDataY,this.Dc)||new this.Dc,this.Yc=this.kc?$n(t.incomingDataLookup,Float32Array):void 0,this.Zc=this.Fc?$n(t.incomingDataIDs,Uint32Array):void 0,this.Hc=this.Tc?$n(t.incomingDataColors,Uint32Array):void 0,this.Xc=this.Ic?$n(t.incomingDataSize,Float32Array):void 0,this.$c=this.Pc?$n(t.incomingDataRotation,Float32Array):void 0,{dataPattern:this.Uc(),samplesCacheX:this.Ec,samplesCacheY:this.zc,samplesCacheLookup:this.Yc,samplesCacheIDs:this.Zc,samplesCacheColors:this.Hc,samplesCacheSize:this.Xc,samplesCacheRotation:this.$c,maxSampleCount:t.appendCount,incomingDataReplacedCache:!0};if(void 0===this.jc){const i=this.Sc+t.appendCount;if(!this.Ec||!this.zc)return this.Ec=new this.Dc(i),this.zc=new this.Dc(i),this.Yc=this.kc?new Float32Array(i):void 0,this.Zc=this.Fc?new Uint32Array(i):void 0,this.Hc=this.Tc?new Uint32Array(i):void 0,this.Xc=this.Ic?new Float32Array(i):void 0,this.$c=this.Pc?new Float32Array(i):void 0,{dataPattern:this.Uc(),samplesCacheX:this.Ec,samplesCacheY:this.zc,samplesCacheLookup:this.Yc,samplesCacheIDs:this.Zc,samplesCacheColors:this.Hc,samplesCacheSize:this.Xc,samplesCacheRotation:this.$c,maxSampleCount:i};const s=this.Ec.length;if(s<i){if(!this.wc.warningDisplayed){const s=Yt.performance.now();if(this.wc.expandEvents=this.wc.expandEvents.filter((t=>s-t.timestamp<5e3)),i>1e3&&this.wc.expandEvents.push({timestamp:s}),this.wc.expandEvents.length>5)return Yt.console.warn("LightningChart JS warning - DataSetXY append operation was performed more than 5 times in 5 seconds.\nAutomatic max sample count control was enabled.\nFor streaming applications, DataSetXY.setMaxSampleCount() or Series.setMaxSampleCount() should be configured explicitly to get rid of this warning."),this.wc.warningDisplayed=!0,this.setMaxSampleCount({mode:"auto"}),this.Lc(t)}const s=new this.Dc(i);s.set(this.Ec),this.Ec=s;const e=new this.Dc(i);if(e.set(this.zc),this.zc=e,this.kc){const t=new Float32Array(i);this.Yc&&t.set(this.Yc),this.Yc=t}if(this.Fc){const t=new Uint32Array(i);this.Zc&&t.set(this.Zc),this.Zc=t}if(this.Tc){const t=new Uint32Array(i);this.Hc&&t.set(this.Hc),this.Hc=t}if(this.Ic){const t=new Float32Array(i);this.Xc&&t.set(this.Xc),this.Xc=t}if(this.Pc){const t=new Float32Array(i);this.$c&&t.set(this.$c),this.$c=t}return this.vc=this.Sc,{dataPattern:this.Uc(),samplesCacheX:this.Ec,samplesCacheY:this.zc,samplesCacheLookup:this.Yc,samplesCacheIDs:this.Zc,samplesCacheColors:this.Hc,samplesCacheSize:this.Xc,samplesCacheRotation:this.$c,maxSampleCount:i}}if(s>4*i){const t=new this.Dc(i);t.set(this.Ec.subarray(0,this.Sc)),this.Ec=t;const s=new this.Dc(i);if(s.set(this.zc.subarray(0,this.Sc)),this.zc=s,this.kc){const t=new Float32Array(i);this.Yc&&t.set(this.Yc.subarray(0,this.Sc)),this.Yc=t}if(this.Fc){const t=new Uint32Array(i);this.Zc&&t.set(this.Zc.subarray(0,this.Sc)),this.Zc=t}if(this.Tc){const t=new Uint32Array(i);this.Hc&&t.set(this.Hc.subarray(0,this.Sc)),this.Hc=t}if(this.Ic){const t=new Float32Array(i);this.Xc&&t.set(this.Xc.subarray(0,this.Sc)),this.Xc=t}if(this.Pc){const t=new Float32Array(i);this.$c&&t.set(this.$c.subarray(0,this.Sc)),this.$c=t}return{dataPattern:this.Uc(),samplesCacheX:this.Ec,samplesCacheY:this.zc,samplesCacheLookup:this.Yc,samplesCacheIDs:this.Zc,samplesCacheColors:this.Hc,samplesCacheSize:this.Xc,samplesCacheRotation:this.$c,maxSampleCount:i}}return{dataPattern:this.Uc(),samplesCacheX:this.Ec,samplesCacheY:this.zc,samplesCacheLookup:this.Yc,samplesCacheIDs:this.Zc,samplesCacheColors:this.Hc,samplesCacheSize:this.Xc,samplesCacheRotation:this.$c,maxSampleCount:s}}return t.appendCount+this.Sc>this.jc&&this.L.emit("maxSampleCountExceeded",this,this.Sc,this.jc,this.Sc+t.appendCount),this.Ec=this.Ec||new this.Dc(this.jc),this.zc=this.zc||new this.Dc(this.jc),this.Yc=this.Yc||(this.kc?new Float32Array(this.jc):void 0),this.Zc=this.Zc||(this.Fc?new Uint32Array(this.jc):void 0),this.Hc=this.Hc||(this.Tc?new Uint32Array(this.jc):void 0),this.Xc=this.Xc||(this.Ic?new Float32Array(this.jc):void 0),this.$c=this.$c||(this.Pc?new Float32Array(this.jc):void 0),{dataPattern:this.Uc(),samplesCacheX:this.Ec,samplesCacheY:this.zc,samplesCacheLookup:this.Yc,samplesCacheIDs:this.Zc,samplesCacheColors:this.Hc,samplesCacheSize:this.Xc,samplesCacheRotation:this.$c,maxSampleCount:this.jc}}td(){if(!this.Ec||!this.zc||0===this.Sc)return;if(void 0===this.jc)return this.bc>0?{x:this.Ec[0],y:this.zc[0]}:void 0;if(!this.xc)return{x:this.Ec[0],y:this.zc[0]};let t=this.vc-this.Sc;return t<0&&(t+=this.jc),{x:this.Ec[t],y:this.zc[t]}}Rc(){if(!this.Ec||!this.zc||0===this.Sc)return;if(void 0===this.jc){const t=this.Sc-1;return t>=0?{x:this.Ec[t],y:this.zc[t]}:void 0}let t=this.vc-1;return t<0&&(t+=this.jc),{x:this.Ec[t],y:this.zc[t]}}sd(t){if(!this.Ec||!this.zc)return;const i=this.Ec.length,s=this.Sc,e=this.bc-1,h=Math.max(e-s+1,0)+t,r=Wn(h,this.bc,i,this.vc);return{x:this.Ec[r],y:this.zc[r],lookupValue:this.kc&&this.Yc?this.Yc[r]:void 0,id:this.Fc&&this.Zc?this.Zc[r]:void 0,color:this.Tc&&this.Hc?this.Hc[r]:void 0,size:this.Ic&&this.Xc?this.Xc[r]:void 0,rotation:this.Pc&&this.$c?this.$c[r]:void 0,iSample:h}}ed(t,i,s,e){const h=this.Uc(),r=this.Ec,n=this.zc;if(!r||!n)return;const o=(t,i)=>({x:r[t],y:n[t],lookupValue:this.kc&&this.Yc?this.Yc[t]:void 0,id:this.Fc&&this.Zc?this.Zc[t]:void 0,color:this.Tc&&this.Hc?this.Hc[t]:void 0,size:this.Ic&&this.Xc?this.Xc[t]:void 0,rotation:this.Pc&&this.$c?this.$c[t]:void 0,iSample:i}),a=r.length,l=this.Sc,u=this.bc-1,c=Math.max(u-l+1,0);if(h){const s=cr(h),e=this.td(),r=this.Rc();if(!(e&&r&&this.Ec&&this.zc))return;const n="ProgressiveX"===h||"RegressiveX"===h?"x":"y",l="x"===n?"y":"x",d="x"===n?this.Ec:this.zc,f="x"===l?this.Ec:this.zc,A=t[n],g=Math.min(e[n],r[n]),y=Math.max(e[n],r[n]);if(A<g||A>y)return;const m=Hn(A,c,u,s,(t=>d[Wn(t,this.bc,a,this.vc)])),p=Wn(m,this.bc,a,this.vc);if(!i)return o(p,m);const v=m-1,S=m+1,b=d[p],x=s?A>=b?S<=u?S:void 0:v>=c?v:void 0:A<=b?S<=u?S:void 0:v>=c?v:void 0;if(void 0===x)return;const M=Wn(x,this.bc,a,this.vc),_=m<x?{pos:d[p],val:f[p],iSample:m}:{pos:d[M],val:f[M],iSample:x},w=m>x?{pos:d[p],val:f[p],iSample:m}:{pos:d[M],val:f[M],iSample:x},C=(A-_.pos)/(w.pos-_.pos),k=pn(_.val,w.val,C);return"x"===ur(h)?{x:A,y:k,iSample:pn(_.iSample,w.iSample,C)}:{y:A,x:k,iSample:pn(_.iSample,w.iSample,C)}}let d,f=Number.MAX_VALUE;const A=pt(t,s,e),g=this.Sc-1;for(let t=0;t<=g;t+=1){const i=r[t],h=n[t];if(!Number.isNaN(i)&&!Number.isNaN(h)){const r=mt(i,s.x,e.x),n=mt(h,s.y,e.y),o=(r-A.x)**2+(n-A.y)**2;o<f&&(f=o,d=t)}}return void 0===d?void 0:o(d,d)}Gc(t,i){this.L.emit("changed",t,i)}Gt(t){return this.L.off(t)}hd(t){return this.L.on("changed",t)}rd(t){return this.L.on("cleared",t)}}const Wn=(t,i,s,e)=>t%s,Yn=(t,i,s,e,h,r,n,o)=>{if(0===e||0===h)return;const a=cr(n),l=s.length,u=e-1,c=Math.max(u-h+1,0),d=Hn(t,c,u,a,(t=>s[Wn(t,e,l)])),f=Hn(i,c,u,a,(t=>s[Wn(t,e,l)])),A=Math.min(d,f),g=Math.max(d,f),y=Math.max(A-o,c),m=Math.min(g+o,u),p=Wn(y,e,l),v=Wn(m,e,l);return p>v?{iFirstSample:y,iLastSample:m,iFirstSampleDataArray:p,iLastSampleDataArray:v,dataRanges:[{offset:p,count:l-p},{offset:0,count:v+1}]}:{iFirstSample:y,iLastSample:m,iFirstSampleDataArray:p,iLastSampleDataArray:v,dataRanges:[{offset:p,count:v-p+1}]}},Hn=(t,i,s,e,h)=>{const r=s;for(;i!==s;){const r=Math.ceil((i+s)/2),n=h(r);e&&t<n||!e&&t>n?s=r-1:i=r}const n=Math.abs(t-h(i));return i<r&&Math.abs(t-h(i+1))<n?i+1:i},Xn=(t,i,s,e,h)=>{const r=i.length;if(Array.isArray(i))for(let r=0;r<e;r+=1)t[h+r]=i[s+r];else t.set(r===e?i:i.subarray(s,s+e),h)},$n=(t,i)=>void 0===t?void 0:Array.isArray(t)?new i(t):t instanceof i?t:new i(t),jn=(t,i,s)=>{if(void 0!==t)return Array.isArray(t)?t.slice(i,s):t.subarray(i,s)},Zn=/^(\d{4}-\d{2}-\d{2})(?:T(\d{2}:\d{2}:\d{2}(?:\.\d+)?)(Z|[+-]\d{2}:\d{2})?)?$/,Qn=t=>"string"==typeof t&&Zn.test(t)&&!Yt.isNaN(Date.parse(t));class Jn extends gn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ba="label",this.Ka=this.Ls.Ur(this.renderingScale).vr(this.ba).Le(O).Nr(Qi).Gr(Qi),this.setMargin(5),this.Du(this.Ka)}Ou(){return[this.Ka]}setFillStyle(t){return this.Ka.Le(t),this.Ls.xs(),this}getFillStyle(){return this.Ka.Qh()}Ee(){const t=this.getPosition(n(0,0),Ot.Content),i=pt(t,this.scale,this.renderingScale);return this.Ka.ze(i),this}Vs(){this.Ka.Vs(),void 0!==this.na&&this.Ka.la(this.na);const t=0===this.ba.length?n(0,0):this.Ka.nd();return this.setContentSize(t),super.Vs()}setText(t){return this.ba=t,this.Ka.vr(this.ba),this.Ls.xs(),this}getText(){return this.ba}setFont(t){return this.Ka.tr(t),this.Ls.xs(),this}getFont(){return this.Ka.qh()}setTextRotation(t){return this.Ka.ir(t),this.Ls.xs(),this}getTextRotation(){return this.Ka.sr()}}const Kn={...ln,...cn,uiElement:Jn};class qn extends yn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.od=!1,this.fitTo=this.Wu.bind(this),this.setSize=this.fitTo,this.Ka=this.Ls.dc(i).Le(O).Be(dt),this.Du(this.Ka)}Ou(){return[this.Ka]}setFillStyle(t){return this.Ka.Le(t),this.Ls.xs(),this}getFillStyle(){return this.Ka.Qh()}setStrokeStyle(t){return this.Ka.Be(t),this.Ls.xs(),this}getStrokeStyle(){return this.Ka.vo()}Ee(){void 0!==this.na&&this.Ka.la(this.na);const t=vs([this.getPosition(n(-1,-1),Ot.Content),this.getPosition(n(1,1),Ot.Content)].map((t=>pt(t,this.scale,this.renderingScale))));return this.od?this.Ka.Tl([{x:(t.min.x+t.max.x)/2,y:t.min.y},{x:t.min.x,y:(t.min.y+t.max.y)/2},{x:(t.min.x+t.max.x)/2,y:t.max.y},{x:t.max.x,y:(t.min.y+t.max.y)/2}]):this.Ka.Tl([t.min,{x:t.min.x,y:t.max.y},t.max,{x:t.max.x,y:t.min.y}]),this}Wu(t){return this.setContentSize(t),this.Ls.xs(),this}Yu(){return 0}Hu(){return 0}$u(){return 0}Xu(){return 0}}class to extends yn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ad=n(0,0),this.Ka=t.ld(i).fu(0).He(360).Le(O).Be(dt),this.Du(this.Ka)}Ou(){return[this.Ka]}setFillStyle(t){return this.Ka.Le(t),this.Ls.xs(),this}getFillStyle(){return this.Ka.Qh()}setStrokeStyle(t){return this.Ka.Be(t),this.Ls.xs(),this}getStrokeStyle(){return this.Ka.vo()}Ee(){void 0!==this.na&&this.Ka.la(this.na);const t=this.getSize(Ot.Content).x/2;return this.Ka.gu(t*this.renderingScale.Gi().x).yu(t*this.renderingScale.Gi().y).ze(pt(this.getPosition(n(0,0),Ot.Content),this.scale,this.renderingScale)).pu(255).Vs(),this}Wu(t){const i=Math.sqrt(t.x*t.x/4+t.y*t.y/4);return this.setContentSize(n(2*i,2*i)),this.ad=t,this.Ls.xs(),this}Yu(){return(this.getSize(Ot.Content).x-this.ad.x)/2}Hu(){return(this.getSize(Ot.Content).x-this.ad.x)/2}$u(){return(this.getSize(Ot.Content).y-this.ad.y)/2}Xu(){return(this.getSize(Ot.Content).y-this.ad.y)/2}fitTo(t){const i=Math.min(t.x,t.y);return this.setContentSize(n(i,i)),this.ad=t,this}}class io extends mn{constructor(t,i,s,e,h){super(t,i,s,Or.Simple,e,h),this.ud=f(n(0,0)),this.dd=!1,this.Ls=t,this.fc()}Ac(){const t=this.ud._();if(this.dd){const i=Math.min(t.x,t.y);return[n(0,0),n(i/2,i/2),n(0,i),n(-i/2,i/2)]}const i=2*Math.sqrt(this.ud._().x*this.ud._().x/4+this.ud._().y*this.ud._().y/4),s=n(Math.cos(Math.PI/4)*i,0),e=n(0,Math.sin(Math.PI/4)*i),h=n(0,0),r=Is(h,Is(s,e)),o=Is(r,Is(e,Fs(s,-1)));return[h,r,o,Ps(o,Is(s,e))]}Ou(){return[this.Ka]}setFillStyle(t){return this.Ka.Le(t),this.Ls.xs(),this}getFillStyle(){return this.Ka.Qh()}setStrokeStyle(t){return this.Ka.Be(t),this.Ls.xs(),this}getStrokeStyle(){return this.Ka.vo()}Wu(t){return this.ud.M(t),this.dd=!1,this.Ls.xs(),this}Yu(){return this.dd?0:(this.getSize(Ot.Content).x-this.ud._().x)/2}Hu(){return this.dd?0:(this.getSize(Ot.Content).x-this.ud._().x)/2}$u(){return this.dd?0:(this.getSize(Ot.Content).y-this.ud._().y)/2}Xu(){return this.dd?0:(this.getSize(Ot.Content).y-this.ud._().y)/2}fitTo(t){return this.ud.M(t),this.dd=!0,this.Ls.xs(),this}}class so extends mn{constructor(t,i,s,e,h){super(t,i,s,Or.Simple,e,h),this.fd=f(n(0,0)),this.Ad=f(10),this.gd=f(void 0),this.qu=f(Ut.Right),this.fc()}Ou(){return[this.Ka]}setFillStyle(t){return this.Ka.Le(t),this.Ls.xs(),this}getFillStyle(){return this.Ka.Qh()}setStrokeStyle(t){return this.Ka.Be(t),this.Ls.xs(),this}getStrokeStyle(){return this.Ka.vo()}setDirection(t){return this.qu.M(t),this.Ls.xs(),this}getDirection(){return this.qu._()}setPointerLength(t){return this.Ad.M(t),this.Ls.xs(),this}getPointerLength(){return this.Ad._()}setPointerAngle(t){return this.gd.M(t),this.Ls.xs(),this}getPointerAngle(){let t=this.gd._();if(void 0===t){const i=this.yd();if(0===i)return 0;t=0!==i?180*Math.atan(2*this.getPointerLength()/i)/Math.PI:0}return Math.min(Math.max(t,1),89)}Wu(t){return this.fd.M(t),this.Ls.xs(),this}md(){const t=this.getPointerAngle();return 0===t?0:2*this.getPointerLength()/Math.tan(t*Math.PI/180)}pd(){return yi(this.qu._())?this.fd._().x:this.fd._().y}yd(){return yi(this.qu._())?this.fd._().y:this.fd._().x}Yu(){switch(this.qu._()){case Ut.Right:return 0;case Ut.Left:return this.getPointerLength();case Ut.Up:case Ut.Down:return Math.max(0,this.md()-this.yd());default:return 0}}Hu(){switch(this.qu._()){case Ut.Right:return this.getPointerLength();case Ut.Left:return 0;case Ut.Up:case Ut.Down:return Math.max(0,this.md()-this.yd());default:return 0}}$u(){switch(this.qu._()){case Ut.Right:case Ut.Left:return Math.max(0,this.md()-this.yd());case Ut.Up:return this.getPointerLength();case Ut.Down:default:return 0}}Xu(){switch(this.qu._()){case Ut.Right:case Ut.Left:return Math.max(0,this.md()-this.yd());case Ut.Up:return 0;case Ut.Down:return this.getPointerLength();default:return 0}}Ac(){const t=gi(this.qu._()),i=ks(n(0,0),t),s=this.getPointerLength(),e=this.md(),h=this.pd(),r=this.yd();if(!(0!==s&&0!==e||0!==h&&0!==r))return[];const o=n(0,0),a=Is(Is(o,Fs(t,-s)),Fs(i,e/2)),l=Is(a,Fs(i,(r-e)/2)),u=Is(l,Fs(t,-h)),c=Is(Is(o,Fs(t,-s)),Fs(i,-e/2)),d=Is(c,Fs(i,-(r-e)/2)),f=Is(d,Fs(t,-h));let A;return A=0===h||0===r?[o,a,c]:0===s||0===e?[l,u,f,d]:Qt(r,e)?[o,a,u,f,c]:[o,a,l,u,f,d,c],A}}class eo extends gn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.fitTo=this.Wu.bind(this),this.setSize=this.fitTo,this.vd=new Un,this.Ka=this.Ls.Md(i).We(dt).xd(O).bd(O).Sd(this.vd),this.Du(this.Ka)}Ou(){return[this.Ka]}setShape(t){return this.Ka._d(t),this}getShape(){return this.Ka.wd()}setRotation(t){return this.Ka.Cd(t),this}getRotation(){return this.Ka.kd()}setFillStyle(t){return this.Ka.bd(t),this.Ls.xs(),this}getFillStyle(){return this.Ka.Td()}Ee(){void 0!==this.na&&this.Ka.la(this.na);const t=pt(this.getPosition({x:0,y:0},Ot.Content),this.scale,this.renderingScale),i=Math.max(this.size.x,this.size.y);if(this.vd.clear(),i>0){const s=this.Ka.wd(),e=this.Ka.Td(),h=Vn(s)&&s,r=st(e)&&e;if(h){const t=i/h.ni().y;this.Ka.Fd(t)}else if(r){const t=r.source;if(t instanceof Image){const s=i/t.height;this.Ka.Fd(s)}}else this.Ka.Fd(i);this.vd.appendSample(t)}return this}Wu(t){return this.setContentSize(t),this.Ls.xs(),this}Yu(){return 0}Hu(){return 0}$u(){return 0}Xu(){return 0}}const ho={...ln,...cn,uiElement:eo};class ro extends fn{setSize(t){return this.setContentSize(t),this.Ls.xs(),this}}class no extends sn{constructor(){super(...arguments),this.Id=[],this.Pd=0,this.Dd=t=>{const i=this.Id.indexOf(t);i>=0&&this.Id.splice(i,1)}}getMembers(){return this.Id}getMemberCount(){return this.Id.length}setMinimumSize(t){return this.Bd=t,this.Ls.xs(),this}getMinimumSize(){return this.Bd}addElement(t,i=-1){const s=t.nc(this.Ls,this.renderingScale,this.scale,this.Dd,this.qi,!1);return s.setMouseInteractions(this.getMouseInteractions()),i>=0?this.Id.splice(i,0,s):this.Id.push(s),s.setVisible(this.getVisible()),this.Du(s),this.$i&&(zi(0,(()=>{})),s.dispose()),s}dispose(){return super.dispose(),this.Id.slice().forEach(jt),this}Vs(){super.Vs();const t=this.na;return void 0!==t&&this.Id.forEach(((i,s)=>{i.na=t+1+.01*s})),this}setVisible(t){return super.setVisible(t),this.Id.forEach((i=>i.setVisible(t))),this}setMouseInteractions(t){super.setMouseInteractions(t);for(let i=0;i<this.Id.length;i+=1)this.Id[i].setMouseInteractions(t);return this}getMouseInteractions(){if(super.getMouseInteractions())return!0;for(let t=0;t<this.Id.length;t+=1)if(this.Id[t].getMouseInteractions())return!0;return!1}setHighlight(t){super.setHighlight(t);for(let s=0;s<this.Id.length;s+=1){const e=this.Id[s];"getHighlight"in(i=e)&&"setHighlight"in i&&e.setHighlight(t)}var i;return this}}class oo extends no{Ee(){super.Ee();const t=this.getPosition(n(-1,1),Ot.Content),i=this.Id.reduce(((t,i)=>t+ +(i instanceof ro)),0),s=i>0?(this.size.x-this.Pd)/i:0;return this.Id.reduce(((i,e)=>e instanceof ro?this.scale.gi({x:i,y:t.y},{x:s+e.getSize().x,y:0}).x:e.setOrigin(n(-1,1)).setPosition(n(i,t.y)).Ee().getPosition(n(1,0)).x),t.x),this}Vs(){for(let t=0;t<this.Id.length;t+=1){const i=this.Id[t];i instanceof ao&&i.setMinimumSize(0),i.Vs()}const t=this.Id.reduce(this.Ld.bind(this),o(0,0));this.Pd=t.x;const i=void 0===this.Bd?t:n(Math.max(t.x,this.Bd),t.y);this.setContentSize(i);for(let t=0;t<this.Id.length;t+=1){const s=this.Id[t];s instanceof ao&&s.setMinimumSize(i.y).Vs()}return super.Vs()}Ld(t,i){const s=i.getSize();return t.x+=s.x,t.y=Math.max(t.y,s.y),t}addGap(t=0,i=-1){return this.addElement(lo,i).setSize(n(0,t))}}class ao extends no{Ee(){super.Ee();const t=this.getPosition(n(-1,1),Ot.Content),i=this.Id.reduce(((t,i)=>t+ +(i instanceof ro)),0),s=i>0?(this.size.y-this.Pd)/i:0;return this.Id.reduce(((i,e)=>e instanceof ro?this.scale.gi({x:t.x,y:i},{x:0,y:-(s+e.getSize().y)}).y:e.setOrigin(n(-1,1)).setPosition(n(t.x,i)).Ee().getPosition(n(0,-1)).y),t.y),this}Vs(){for(let t=0;t<this.Id.length;t+=1){const i=this.Id[t];i instanceof oo&&i.setMinimumSize(0),i.Vs()}const t=this.Id.reduce(this.Ld.bind(this),o(0,0));this.Pd=t.y;const i=void 0===this.Bd?t:n(t.x,Math.max(t.y,this.Bd));this.setContentSize(i);for(let t=0;t<this.Id.length;t+=1){const s=this.Id[t];s instanceof oo&&s.setMinimumSize(i.x).Vs()}return super.Vs()}Ld(t,i){const s=i.getSize();return t.y+=s.y,t.x=Math.max(t.x,s.x),t}addGap(t=0,i=-1){return this.addElement(lo,i).setSize(n(0,t))}}const lo={...ln,...cn,uiElement:ro};class uo extends oo{constructor(){super(...arguments),this.Id=[]}addColumn(){return this.addElement(Ao,void 0)}getColumn(t,i=!1){return i&&this.Id.length<=t?(this.addColumn(),this.getColumn(t,!0)):this.Id[t]}}class co extends ao{constructor(){super(...arguments),this.Id=[]}addRow(){return this.addElement(go,void 0)}getRow(t,i=!1){return i&&this.Id.length<=t?(this.addRow(),this.getRow(t,!0)):this.Id[t]}}const fo={...ln,...un,...dn},Ao={...fo,uiElement:ao,background:qn},go={...fo,uiElement:oo,background:qn},yo={setTextLabel:null,setText(t){return this.setTextLabel.setText(t),this},getText(){return this.setTextLabel.getText()}},mo=(t,i)=>{const s={},e=`stylable${t}s`;return s[e]=i,s[`set${t}FillStyle`]=function(t){return this[e].forEach((i=>i.setFillStyle(t))),this},s[`get${t}FillStyle`]=function(){return this[e][0].getFillStyle()},s[`set${t}Font`]=function(t){return this[e].forEach((i=>i.setFont(t))),this},s[`get${t}Font`]=function(){return this[e][0].getFont()},s[`set${t}Rotation`]=function(t){return this[e].forEach((i=>i.setTextRotation(t))),this},s[`get${t}Rotation`]=function(){return this[e][0].getTextRotation()},s},po=mo("Text",[]),vo={button:void 0,isLocked:!1,setOn(t){const i=this.button.getOn()!==t;return this.button.setOn(t),i&&this.L.emit("switch",t),this},getOn(){return this.button.getOn()},setLocked(t){return this.isLocked=t,this},getLocked(){return this.isLocked},onSwitch(t){return this.L.on("switch",(i=>t(this,i)))},offSwitch(t){return this.L.off(t,"switch")},setButtonOffFillStyle(t){return this.button.setOffFillStyle(t),this},getButtonOffFillStyle(){return this.button.getOffFillStyle()},setButtonOnFillStyle(t){return this.button.setOnFillStyle(t),this},getButtonOnFillStyle(){return this.button.getOnFillStyle()},setButtonSize(t){return this.button.setSize(t),this},getButtonSize(){return this.button.getSize()},setButtonShape(t){return this.button.setButtonShape(t),this},getButtonShape(){return this.button.getButtonShape()}},So={textFillStyleHidden:void 0,setTextFillStyleHidden(t){return this.textFillStyleHidden="function"==typeof t?t(this.textFillStyleHidden):t,this},getTextFillStyleHidden(){return this.textFillStyleHidden}},bo={pointable:void 0,setDirection(t){return this.pointable.setDirection(t),this},getDirection(){return this.pointable.getDirection()},setPointerLength(t){return this.pointable.setPointerLength(t),this},getPointerLength(){return this.pointable.getPointerLength()}},xo={...ln,...un,background:qn,nc(t,i,s,e,h,r){const n=new oo(t,i,s,this.background,e,h),o=n.addElement(Kn,void 0),a=Object.assign(n,yo,{setTextLabel:o},po,{stylableTexts:[o]});return an(a,h,r),this.applyStylers(a,h)}}.addStyler(nn),Mo={...ln,...un,background:so,direction:Ut.Up,setDirection(t){return this.direction=t,this},nc(t,i,s,e,h,r){const n=this.direction,o=new oo(t,i,s,this.background,e,h),a=o.addElement(Kn,void 0),l=o.getBackground().setDirection(n),u=Object.assign(o,yo,{setTextLabel:a},po,{stylableTexts:[a]},bo,{pointable:l},{setTickLabelPadding(t){return this.getDirection()===Ut.Up?(this.setPadding({top:t}),a.setMargin({top:0})):this.getDirection()===Ut.Down?(this.setPadding({bottom:t}),a.setMargin({bottom:0})):this.getDirection()===Ut.Right?(this.setPadding({right:t}),a.setMargin({right:0})):this.getDirection()===Ut.Left&&(this.setPadding({left:t}),a.setMargin({left:0})),this},getTickLabelPadding(){return this.getDirection()===Ut.Up?this.getPadding().top:this.getDirection()===Ut.Down?this.getPadding().bottom:this.getDirection()===Ut.Right?this.getPadding().right:this.getPadding().left}});return u.oc="other",u.setPointerLength(h.xAxisNumericTicks.majorTickStyle.getTickLength()).setTickLabelPadding(h.xAxisNumericTicks.majorTickStyle.getTickPadding()).setTextFont(h.uiTextFont).setTextFillStyle(h.uiTextFillStyle).setBackground((t=>t.setFillStyle(h.uiBackgroundFillStyle).setStrokeStyle(h.uiBackgroundStrokeStyle))),an(u,h,r),this.applyStylers(u,h)}};class _o extends tn{constructor(t,i,e,h,r,n){super(t,i,e,r,n),this.Os=!1,this.L=new s,this.Rd=O,this.Ed=O,this.getOn=()=>this.Os,this.Ed=n.uiButtonFillStyleHidden||n.uiButtonFillStyle,this.zd=this.Du(new eo(this.Ls,this.renderingScale,this.scale,Zt,n).setShape(h)).setFillStyle(this.Ed)}Ou(){return[...this.zd.Ou()]}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}setOn(t){return this.Os=t,this.zd.setFillStyle(t?this.Rd:this.Ed),this.Ls.xs(),this}setOffFillStyle(t){return this.Ed="function"==typeof t?t(this.Ed):t,this.Os||this.zd.setFillStyle(this.Ed),this}getOffFillStyle(){return this.Ed}setSize(t){return this.zd.fitTo("number"==typeof t?n(t,t):t),this}getSize(){return this.zd.getSize()}setOnFillStyle(t){return this.Rd="function"==typeof t?t(this.Rd):t,this.Os&&this.zd.setFillStyle(this.Rd),this}getOnFillStyle(){return this.Rd}setButtonShape(t){return this.zd.setShape(t),this.Ls.xs(),this}getButtonShape(){return this.zd.getShape()}Ee(){return super.Ee(),this.zd.na=this.na,this.zd.setVisible(this.getVisible()).setPosition(this.getPosition(n(0,0),Ot.Content)).Ee(),this}Vs(){const t=this.zd.Vs().getSize();return this.setContentSize(t),super.Vs()}dispose(){return super.dispose(),this.zd.dispose(),this}setMouseInteractions(t){return this.zd.setMouseInteractions(t),this}getMouseInteractions(){return this.zd.getMouseInteractions()}setHighlight(t){const i=Ui(t);return this.zd.setHighlight(i),this.L.emit("highlight",this,t),this.Ls.xs(),this}getHighlight(){return this.zd.getHighlight()}}const wo={...ln,uiElement:_o,buttonShape:ar.Circle,setButtonShape(t){return{...this,buttonShape:t}},nc(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.buttonShape,e,h),h);return an(n,h,r),n}},Co={...ln,...un,background:qn,buttonBuilder:wo,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},nc(t,i,s,e,h,r){const n=new oo(t,i,s,this.background,e,h),o=n.addElement(Ao);o.addGap();const a=o.addElement(this.buttonBuilder);o.addGap();const l=n.addElement(Ao);l.addGap();const u=l.addElement(Kn);l.addGap(),n.addGap();const c=Object.assign(n,yo,{setTextLabel:u},po,{stylableTexts:[u]},vo,{button:a},So);let d;return c.onMouseClick(((t,i)=>{c.getLocked()||c.setOn(!c.getOn())})),c.onMouseEnter((()=>c.setHighlight(!0))),c.onMouseLeave((()=>c.setHighlight(!1))),c.setMouseStyle(Ke.Point),c.setTextFillStyleHidden(h.uiTextFillStyleHidden||h.uiTextFillStyle),c.onSwitch(((t,i)=>{i?d&&c.setTextFillStyle(d):(d=c.getTextFillStyle(),c.setTextFillStyle(c.getTextFillStyleHidden()))})),c.setPadding({left:5}),an(c,h,r),this.applyStylers(c,h)}}.addStyler(nn).addStyler(on);class ko extends tn{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.Vd=[],this.Od=2,this.Nd="",this.Gd=(t,i)=>void 0!==t.label?t.label:i.percentageValues?`${(100*t.value).toFixed(0)}%`:Js(t.value,i.min,i.max),this.Ud=0,this.Wd=0,this.Yd=!1,this.Ls=t,this.Hd=r,this.Xd=this.Du(t.Re(i).Be(dt)),this.$d=this.Du(t.Ur(i).Le(h.uiTextFillStyle).tr(h.uiTextFont).setMouseInteractions(!1)),"vertical"===r?(this.jd=140,this.Zd=25):(this.jd=160,this.Zd=15)}Ou(){return[this.Xd,this.$d]}Qd(t){this.Jd=t;const i=Io(t,"vertical"===this.Hd?0:90,this.Yd);return this.Xd.Le(i),this.Ls.xs(),this}Kd(){return this.Jd}qd(t){return this.jd=t,this.Ls.xs(),this}tf(){return this.jd}if(t){return this.Zd=t,this.Ls.xs(),this}sf(){return this.Zd}ef(t){return this.Nd=t,this.Ls.xs(),this}hf(){return this.Nd}rf(t){return this.Gd=t,this.Ls.xs(),this}setLUTDisplayProportionalSteps(t){if(this.Yd=t,this.Jd){const t=Io(this.Jd,"vertical"===this.Hd?0:90,this.Yd);this.Xd.Le(t)}return this.Ls.xs(),this}getLUTDisplayProportionalSteps(){return this.Yd}setFillStyle(t){return this.$d.Le(t),this.Ls.xs(),this}getFillStyle(){return this.$d.Qh()}setFont(t){return this.$d.tr(t),this.Ls.xs(),this}getFont(){return this.$d.qh()}setTextRotation(t){return this.Wd=t,this.$d.ir(t),this.Ls.xs(),this}getTextRotation(){return this.$d.sr()}Ee(){var t,i,s,e;if(super.Ee(),this.$i||!this.getVisible())return this;const h=this.Jd;if(h){const r=this.renderingScale.Gi(),n=h.min,o=h.max;if("vertical"===this.Hd){const s=this.getPosition({x:-1,y:-1},Ot.Content),e=Is(s,{x:this.Xd.ni().x+this.Od*r.x,y:0}),a={x:e.x,y:e.y+(this.Nd.length>0?this.Ud*r.y+this.$d.ni().y:0)+.5*((null===(t=this.Vd[0])||void 0===t?void 0:t.ni().y)||0)},l={x:a.x,y:this.getPosition({x:-1,y:1},Ot.Content).y-.5*((null===(i=this.Vd[this.Vd.length-1])||void 0===i?void 0:i.ni().y)||0)};this.Xd.ze({x:s.x,y:a.y}),this.$d.ja({x:-1,y:-1}).ze(e),h.getSteps().forEach(((t,i)=>{const s=ms(a,l,this.Yd?!0===h.getInterpolation()?(t.value-n)/(o-n):.9*(t.value-n)/(o-n):!0===h.getInterpolation()?i/(h.getSteps().length-1):i/h.getSteps().length);this.Vd[i].ja({x:-1,y:0}).ze(s)}))}else{const t=this.getPosition({x:-1,y:-1},Ot.Content),i=this.getPosition({x:1,y:1},Ot.Content),a=this.Vd.reduce(((t,i)=>Math.max(t,i.ni().y)),0),l=Is(t,{x:.5*((null===(s=this.Vd[0])||void 0===s?void 0:s.ni().x)||0),y:a}),u={x:i.x,y:l.y},c={x:u.x-(.5*((null===(e=this.Vd[this.Vd.length-1])||void 0===e?void 0:e.ni().x)||0)+(this.Nd.length>0?this.Ud*r.x+this.$d.ni().x:0)),y:l.y},d={x:l.x,y:l.y+this.Od*r.y};this.Xd.ze(d),this.$d.ja({x:1,y:1}).ze(u),h.getSteps().forEach(((t,i)=>{const s=ms(l,c,this.Yd?!0===h.getInterpolation()?(t.value-n)/(o-n):.9*(t.value-n)/(o-n):!0===h.getInterpolation()?i/(h.getSteps().length-1):i/h.getSteps().length);this.Vd[i].ja({x:0,y:1}).ze(s)}))}}return this}Vs(){if(this.Jd&&this.getVisible()){const t=this.Jd.getSteps();for(let i=this.Vd.length;i<t.length;i+=1)this.Vd.push(this.Du(this.Ls.Ur(this.renderingScale).setMouseInteractions(!1)));for(let i=0;i<t.length;i+=1)this.Vd[i].Le(this.$d.Qh()).tr(this.$d.qh()).vr(this.Gd(t[i],this.Jd)).ir(this.Wd);for(let i=t.length;i<this.Vd.length;i+=1)this.Vd[i].dispose();if(this.Vd.length=t.length,this.$d.vr(this.Nd),"vertical"===this.Hd){const t=this.Zd,i=this.jd;this.Xd.tt({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=t+Math.max(this.Vd.reduce(((t,i)=>Math.max(t,i.Vs().nd().x)),0),this.$d.Vs().nd().x),e=(this.Nd.length>0?this.Ud+this.$d.Vs().nd().y:0)+i+.5*this.Vd[0].Vs().nd().y+.5*this.Vd[this.Vd.length-1].Vs().nd().y;this.setContentSize({x:s,y:e})}else{const t=this.jd,i=this.Zd;this.Xd.tt({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=Math.max(this.Nd.length>0?this.Ud+this.$d.Vs().nd().x:0,.5*this.Vd[this.Vd.length-1].Vs().nd().x),e=t+.5*this.Vd[0].Vs().nd().x+s,h=i+this.Od+this.Vd.reduce(((t,i)=>Math.max(t,i.Vs().nd().y)),0);this.setContentSize({x:e,y:h})}}else this.Vd.forEach((t=>t.dispose())),this.Vd.length=0,this.$d.setVisible(!1),this.Xd.setVisible(!1),this.setContentSize({x:0,y:0});return super.Vs()}dispose(){return super.dispose(),this.Xd.dispose(),this.Vd.forEach(jt),this.$d.dispose(),this}setMouseInteractions(t){return this.Xd.setMouseInteractions(t),this}getMouseInteractions(){return this.Xd.getMouseInteractions()}}const To={lutElement:{},setLUT(t){return this.lutElement.Qd(t),this},getLUT(){return this.lutElement.Kd()},setLUTLength(t){return this.lutElement.qd(t),this},getLUTLength(){return this.lutElement.tf()},setLUTThickness(t){return this.lutElement.if(t),this},getLUTThickness(){return this.lutElement.sf()},setLookUpUnit(t){return this.lutElement.ef(t),this},getLookUpUnit(){return this.lutElement.hf()},setLUTStepValueFormatter(t){return this.lutElement.rf(t),this},setLUTDisplayProportionalSteps(t){return this.lutElement.setLUTDisplayProportionalSteps(t),this},getLUTDisplayProportionalSteps(){return this.lutElement.getLUTDisplayProportionalSteps()}},Fo={...ln,...un,background:qn,alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},nc(t,i,s,e,h,r){const n=new ao(t,i,s,this.background,e,h),o=n.addElement({nc:()=>new ko(t,i,s,Zt,h,this.alignment)}),a=Object.assign(n,po,{stylableTexts:[o]},To,{lutElement:o});return an(a,h,r),this.applyStylers(a,h)}}.addStyler(nn),Io=(t,i,s)=>{const e=t.getSteps(),h=t.min,r=t.max-h;if(!0===t.getInterpolation())return new lt({angle:i,stops:e.map(((i,n)=>({offset:s?(i.value-h)/r:n/(e.length-1),color:i.color||t.color})))});const n=[];for(let i=0;i<e.length;i+=1){const o=e[i];n.push({offset:s?.9*(o.value-h)/r:i/e.length,color:o.color||t.color});const a=i<e.length-1?e[i+1]:void 0;n.push({offset:s?a?.9*(a.value-h)/r:1:a?(i+1)/e.length:1,color:o.color||t.color})}return new lt({angle:i,stops:n})},Po={...ln,...un,background:qn,buttonBuilder:wo,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},nc(t,i,s,e,h){const r=new ao(t,i,s,this.background,e,h),n=r.addElement(go),o=n.addElement(Ao);o.addGap();const a=o.addElement(this.buttonBuilder);o.addGap();const l=n.addElement(Ao);l.addGap();const u=l.addElement(Kn);l.addGap();const c=r.addElement({nc:()=>new ko(t,i,s,Zt,h,this.alignment)});"vertical"===this.alignment&&c.setMargin({left:h.uiButtonSize+6});const d=Object.assign(r,yo,{setTextLabel:u},po,{stylableTexts:[u,c]},mo("LUTText",[c]),vo,{button:a},To,{lutElement:c},So);let f;return d.onMouseClick((()=>{d.getLocked()||d.setOn(!d.getOn())})),d.onMouseEnter((()=>d.setHighlight(!0))),d.onMouseLeave((()=>d.setHighlight(!1))),d.setMouseStyle(Ke.Point),d.setTextFillStyleHidden(h.uiTextFillStyleHidden||h.uiTextFillStyle),d.onSwitch(((t,i)=>{i?f&&d.setTextFillStyle(f):(f=d.getTextFillStyle(),d.setTextFillStyle(d.getTextFillStyleHidden()))})),d.setPadding({left:5}),this.applyStylers(d,h)}}.addStyler(nn).addStyler(on),Do={alignment:null,title:null,entryStylers:null,legendBoxDisposed:null,entries:[],add(t,i){const s=!i||"object"!=typeof i||void 0===i.toggleVisibilityOnClick||i.toggleVisibilityOnClick,e=null==i?void 0:i.matchStyleExactly,h=i&&"object"==typeof i&&void 0!==i.builder?i.builder:void 0;return this.legendBoxDisposed()||(t instanceof Na?this.addChart(t,s,h,e):"attach"in t?this.addAttachable(t,s,h,e):t&&this.addDashboard(t,s,h,e)),this},addAttachable(t,i,s,e){const h=t.Kd&&t.Kd(),r=t.Ds&&t.Ds(),n=void 0!==e&&e;let o=s;if(!o){let t=h?Po.setAlignment(this.alignment):Co;void 0!==r&&(t=t.setButtonShape(r)),o=t}const a=this.addElement(o);if(h&&"setLUT"in a){a.setLUT(h.lut);const t=h.lut.getUnits(),i=h.lookUpProperty,s=t.length>0?t:"x"===i?"x":"y"===i?"y":"z"===i?"z":"";a.setLookUpUnit(s)}return this.entryStylers.forEach((t=>t(a))),this.entries.push({entry:a,component:t}),t.attach(a,i,n),i||a.setLocked(!0),this},addChart(t,i,s,e){return t.nf().forEach((t=>this.addAttachable(t,i,s,e))),this},addDashboard(t,i,s,e){return t.getCells().filter((t=>t.panel instanceof Na)).forEach((t=>this.addChart(t.panel,i,s,e))),this},setTitle(t){return this.title.setText(t),this},getTitle(){return this.title.getText()},setTitleFillStyle(t){return this.title.setTextFillStyle(t),this},getTitleFillStyle(){return this.title.getTextFillStyle()},setTitleFont(t){return this.title.setTextFont(t),this},getTitleFont(){return this.title.getTextFont()},setTitleRotation(t){return this.title.setTextRotation(t),this},getTitleRotation(){return this.title.getTextRotation()},setEntries(t){return this.entries.forEach((i=>t(i.entry,i.component))),this}},Bo={alignment:"vertical",layoutBuilder:Ao,setAlignment(t){return{...this,alignment:t,layoutBuilder:"horizontal"===t?go:Ao}},getAlignment(){return this.alignment},titleBuilder:xo,styleTitle(t){return{...this,titleBuilder:this.titleBuilder.addStyler(t)}},entryStylers:[],styleEntries(t){return{...this,entryStylers:[...this.entryStylers,t]}}},Lo={...ln,...un,...Bo,background:qn,nc(t,i,s,e,h,r){const n=this.layoutBuilder.setBackground(this.background).nc(t,i,s,e,h,!1);let o=Object.assign(n,Do,{alignment:this.alignment,entryStylers:this.entryStylers,legendBoxDisposed:()=>n.$i});o.entries=[];const a=o.addElement("horizontal"===this.alignment?Ao:go),l=a.addElement(this.titleBuilder).setText("Legend").setTextFillStyle(h.legendTitleFillStyle).setTextFont(h.legendTitleFont);return a.addGap(),o=Object.assign(o,{title:l}),"horizontal"===this.alignment&&l.setMargin({right:6}),an(o,h,r),this.applyStylers(o,h)}}.addStyler(((t,i)=>t.setPadding(5)));class Ro extends tn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.af=10,this.lf=Ut.Up,this.uf=0,this.oc="major",this.ba=this.Du(t.Ur(this.renderingScale).Nr(Qi).Gr(Qi)),this.Ue=this.Du(t.Ye(this.renderingScale))}Ou(){return[this.ba]}Ee(){if(super.Ee(),this.$i)return this;const t=pt(this.getPosition(),this.scale,this.renderingScale),i=this.renderingScale.gi(t,{x:this.lf===Ut.Right?-this.af:this.lf===Ut.Left?this.af:0,y:this.lf===Ut.Up?-this.af:this.lf===Ut.Down?this.af:0}),s=this.renderingScale.gi(i,{x:this.lf===Ut.Right?-this.uf:this.lf===Ut.Left?this.uf:0,y:this.lf===Ut.Up?-this.uf:this.lf===Ut.Down?this.uf:0});return this.Ue.Xe(t).He(i),this.ba.ze(s).ja(this.lf===Ut.Up?{x:0,y:1}:this.lf===Ut.Down?{x:0,y:-1}:this.lf===Ut.Right?{x:1,y:0}:{x:-1,y:0}),this}Vs(){const t=this.Ue.Su().getThickness();return this.size=this.lf===Ut.Left||this.lf===Ut.Right?{x:this.af+this.uf+this.ba.Vs().nd().x,y:t}:{y:this.af+this.uf+this.ba.Vs().nd().y,x:t},super.Vs()}dispose(){return super.dispose(),this.ba.dispose(),this.Ue.dispose(),this}setVisible(t){return super.setVisible(t),this.ba.setVisible(t),this.Ue.setVisible(t),this}setMouseInteractions(t){return this.ba.setMouseInteractions(t),this.Ue.setMouseInteractions(t),this}getMouseInteractions(){return this.ba.getMouseInteractions()}getText(){return this.ba.kr()}setTextFillStyle(t){return this.ba.Le(t),this.Ls.xs(),this}getTextFillStyle(){return this.ba.Qh()}setTextFont(t){return this.ba.tr(t),this}setTextRotation(t){return this.ba.ir(t),this}getTextRotation(){return this.ba.sr()}getTextFont(){return this.ba.qh()}setText(t){return this.ba.vr(t),this.Ls.xs(),this}setDirection(t){return this.lf=t,this.Ls.xs(),this}getDirection(){return this.lf}setPointerLength(t){return this.af=t,this.Ls.xs(),this}getPointerLength(){return this.af}setTickLabelPadding(t){return this.uf=t,this.Ls.xs(),this}getTickLabelPadding(){return this.uf}setTickStyle(t){return this.Ue.We(t),this.Ls.xs(),this}getTickStyle(){return this.Ue.Su()}}const Eo={...ln,direction:Ut.Up,setDirection(t){return this.direction=t,this},nc(t,i,s,e,h,r){const n=this.direction,o=new Ro(t,i,s,e,h);return an(o,h,r),o.setDirection(n),this.applyStylers(o,h)}}.addStyler(nn),zo=Eo.addStyler(((t,i)=>(t.oc="major",t.setPointerLength(i.xAxisNumericTicks.majorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.majorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.majorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.majorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.majorTickStyle.labelFillStyle)))),Vo=Eo.addStyler(((t,i)=>(t.oc="minor",t.setPointerLength(i.xAxisNumericTicks.minorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.minorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.minorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.minorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.minorTickStyle.labelFillStyle)))),Oo=Co.addStyler((t=>t.onSwitch(((i,s)=>!0===s?setTimeout((()=>t.setOn(!1)),300):void 0)))),No=Lo.setAlignment("horizontal"),Go=Lo.setAlignment("vertical"),Uo={TextBox:xo,CheckBox:Co,ButtonBox:Oo,PointableTextBox:Mo,AxisTickMajor:zo,AxisTickMinor:Vo,LUTRange:Fo},Wo={HorizontalLegendBox:No,VerticalLegendBox:Go},Yo={cf:"X0Z1bGxBY2Nlc3M=",df:"X0Jhc2VDaGFydHM=",ff:"RGF0YSBHcmlk",Af:"X0hhc0hhcmRFeHBpcmF0aW9u",gf:"X0lzVHJpYWw=",yf:"X0lzQ29tbXVuaXR5",mf:"T0hMQyBTZXJpZXM=",pf:"QmFyIENoYXJ0",vf:"c2xpY2VkIGNoYXJ0cw==",Sf:"R2F1Z2UgQ2hhcnQ=",bf:"U3BpZGVyIENoYXJ0",xf:"UG9sYXIgQ2hhcnQ=",Mf:"M0QgQ2hhcnQ=",_f:"Wm9vbSBCYW5kIENoYXJ0",wf:"TWFwIENoYXJ0",Cf:"WFkgQ2hhcnQ=",kf:"WFkgU2VyaWVz",Tf:"SGVhdG1hcCBTZXJpZXM=",Ff:"RmlndXJlIFNlcmllcw==",If:"bG9nYXJpdGhtaWMgYXhpcw==",Pf:"cmVhbC10aW1lIHZpc3VhbGl6YXRpb24=",Df:"aW5kaXZpZHVhbCBwb2ludCBzaXpl",Bf:"aW5kaXZpZHVhbCBwb2ludCBjb2xvcg==",Lf:"VHJlZU1hcCBDaGFydA==",Rf:"UGFyYWxsZWwgQ29vcmRpbmF0ZSBDaGFydA==",Ef:"X1B5dGhvbkxpY2Vuc2U="};class Ho extends Fh{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.zf=h}}class Xo extends Th{constructor(t,i,e,h,r,o,a,l,u,c,d,f,A,g,y,m){var p,v,S;super(c,u,a,g,y,{numeric:u.getWidth({x:g.xAxisNumericTicks,y:g.yAxisNumericTicks}),datetime:u.getWidth({x:g.xAxisDateTimeTicks,y:g.yAxisDateTimeTicks}),time:u.getWidth({x:g.xAxisTimeTicks,y:g.yAxisTimeTicks})},m),this.Vf=new Map,this.Of=void 0,this.Nf=0,this.Gf=[],this.Uf=[],this.dh=ch.fitting,this.Wf=!0,this.Yf=8,this.Hf=void 0,this.Xf=void 0,this.$f=20,this.jf=1,this.Zf=!0,this.Qf=!0,this.Jf=!0,this.Kf=!0,this.qf=!0,this.tA=!0,this.iA=!0,this.sA=!0,this.eA=!0,this.hA=!0,this.rA=this.Nh.defaultDragMouseStyle,this.nA=this.Nh.defaultDragMouseStyle,this.oA=this.Nh.defaultDragMouseStyle,this.aA=this.Nh.defaultDragMouseStyle,this.lA=this.Nh.defaultDragMouseStyle,this.L=new s,this.uA=[],this.cA=t=>{const i=this.Uf.indexOf(t);i>=0&&this.Uf.splice(i,1)},this.dA=t=>(this.Uf.indexOf(t)<0&&this.Uf.push(t),this.cA),this.fA="center",this.Lt=(t,i)=>this.L.emit("axisAreaTouch",this,i),this.AA=bi(this.uA),this.onAxisInteractionAreaMouseClick=t=>this.L.on("axisAreaMouseClick",t),this.onAxisInteractionAreaMouseDoubleClick=t=>this.L.on("axisAreaDoubleClick",t),this.onAxisInteractionAreaMouseDown=t=>this.L.on("axisAreaMouseDown",t),this.onAxisInteractionAreaMouseUp=t=>this.L.on("axisAreaMouseUp",t),this.onAxisInteractionAreaMouseEnter=t=>this.L.on("axisAreaMouseEnter",t),this.onAxisInteractionAreaMouseLeave=t=>this.L.on("axisAreaMouseLeave",t),this.onAxisInteractionAreaMouseMove=t=>this.L.on("axisAreaMouseMove",t),this.onAxisInteractionAreaMouseWheel=t=>this.L.on("axisAreaMouseWheel",t),this.onAxisInteractionAreaMouseDragStart=t=>this.L.on("axisAreaMouseDragStart",t),this.onAxisInteractionAreaMouseDrag=t=>this.L.on("axisAreaMouseDrag",t),this.onAxisInteractionAreaMouseDragStop=t=>this.L.on("axisAreaMouseDragStop",t),this.onAxisInteractionAreaTouchStart=t=>this.L.on("axisAreaTouchStart",t),this.onAxisInteractionAreaTouch=t=>this.L.on("axisAreaTouch",t),this.onAxisInteractionAreaTouchStop=t=>this.L.on("axisAreaTouchEnd",t),this.offAxisInteractionAreaMouseClick=t=>this.L.off(t,"axisAreaMouseClick"),this.offAxisInteractionAreaMouseDoubleClick=t=>this.L.off(t,"axisAreaDoubleClick"),this.offAxisInteractionAreaMouseDown=t=>this.L.off(t,"axisAreaMouseDown"),this.offAxisInteractionAreaMouseUp=t=>this.L.off(t,"axisAreaMouseUp"),this.offAxisInteractionAreaMouseEnter=t=>this.L.off(t,"axisAreaMouseEnter"),this.offAxisInteractionAreaMouseLeave=t=>this.L.off(t,"axisAreaMouseLeave"),this.offAxisInteractionAreaMouseMove=t=>this.L.off(t,"axisAreaMouseMove"),this.offAxisInteractionAreaMouseWheel=t=>this.L.off(t,"axisAreaMouseWheel"),this.offAxisInteractionAreaMouseDragStart=t=>this.L.off(t,"axisAreaMouseDragStart"),this.offAxisInteractionAreaMouseDrag=t=>this.L.off(t,"axisAreaMouseDrag"),this.offAxisInteractionAreaMouseDragStop=t=>this.L.off(t,"axisAreaMouseDragStop"),this.offAxisInteractionAreaTouchStart=t=>this.L.off(t,"axisAreaTouchStart"),this.offAxisInteractionAreaTouch=t=>this.L.off(t,"axisAreaTouch"),this.offAxisInteractionAreaTouchStop=t=>this.L.off(t,"axisAreaTouchEnd"),this.jd={relative:1},this.gA=0,this.yA=0,this.mA=(t,i)=>i.getAllocatesAxisSpace()?Math.max(t,i.update().uc()):t,this.pA=t=>{const i=this.Gf.indexOf(t);-1!==i&&this.Gf.splice(i,1)},this.vA=(t,i)=>{this.L.emit("axisAreaDoubleClick",this,i),this.Kf&&(this.setStopped(!1),mi(i))},this.SA=t=>{this.L.emit("axisAreaMouseEnter",this),(this.Qf||this.Zf||this.Jf||this.Kf)&&this.bA(t)},this.xA=t=>{this.MA(t),this.L.emit("axisAreaMouseLeave",this)},this._A=(t,i,s)=>{var e,h;this.L.emit("axisAreaMouseDragStart",this,i,s);const r=qt(null===(e=this.chart.wA.io)||void 0===e?void 0:e.axisXYZoomMouseButton,0),o=qt(null===(h=this.chart.wA.io)||void 0===h?void 0:h.axisXYPanMouseButton,2),a=n(i.clientX,i.clientY);s===o&&this.Qf?(this.CA(t),mi(i)):s===r&&this.Zf&&(this.kA(t,a),mi(i))},this.TA=(t,i,s,e,h)=>{var r,o;this.L.emit("axisAreaMouseDrag",this,i,s,e,h);const a=qt(null===(r=this.chart.wA.io)||void 0===r?void 0:r.axisXYZoomMouseButton,0),l=qt(null===(o=this.chart.wA.io)||void 0===o?void 0:o.axisXYPanMouseButton,2),u=n(i.clientX,i.clientY);s===l&&this.Qf?(this.FA(t,h),mi(i)):s===a&&this.Zf&&(this.IA(t,e,u,h),mi(i))},this.PA=(t,i,s,e)=>{var h,r;this.L.emit("axisAreaMouseDragStop",this,i,s,e);const o=qt(null===(h=this.chart.wA.io)||void 0===h?void 0:h.axisXYZoomMouseButton,0),a=qt(null===(r=this.chart.wA.io)||void 0===r?void 0:r.axisXYPanMouseButton,2),l=n(i.clientX,i.clientY);s===a&&this.Qf?(this.DA(t),mi(i)):s===o&&this.Zf&&(this.BA(t,e,l),mi(i)),t.getIsUnderMouse()&&(this.Qf||this.Zf||this.Jf||this.Kf)&&this.bA(t)},this.LA=(t,i)=>{if(this.L.emit("axisAreaMouseWheel",this,i),this.Jf){this.setStopped(!0);const t=this.Nh.getWidth(this.RA.us.Oe(i.clientX,i.clientY)),s=this.ft.ct(t);this.zoom(s,Ei(i)),mi(i)}},this.EA=(t,i)=>this.L.emit("axisAreaMouseClick",this,i),this.zA=(t,i)=>this.L.emit("axisAreaMouseDown",this,i),this.VA=(t,i)=>this.L.emit("axisAreaMouseUp",this,i),this.OA=(t,i)=>this.L.emit("axisAreaMouseMove",this,i),this.NA=(t,i,s)=>{this.L.emit("axisAreaTouchStart",this,s),this.Zf&&(this.bA(t),this.kA(t,i),mi(s))},this.GA=(t,i,s,e,h)=>{this.L.emit("axisAreaTouch",this,h),this.Zf&&(this.IA(t,i,s,e),mi(h))},this.UA=(t,i,s,e)=>{this.L.emit("axisAreaTouchEnd",this,e),this.Zf&&(this.BA(t,i,s),this.MA(t),mi(e))},this.WA=(t,i,s,e)=>{(this.Qf||this.Jf)&&(this.bA(t),this.CA(t),mi(e))},this.YA=(t,i,s,e,h,r)=>{if(this.Qf){const i=n((e.x+h.x)/2,(e.y+h.y)/2);this.FA(t,i),mi(r)}if(this.Jf){const t=this.RA.us.Oe(i.x,i.y),n=this.RA.us.Oe(s.x,s.y),o=Math.abs(this.Nh.getWidth(Ps(t,e))-this.Nh.getWidth(Ps(n,h)))-Math.abs(this.Nh.getWidth(t)-this.Nh.getWidth(n)),a=this.ft.gi(this.Hh,-o),l=this.ft.gi(this.Xh,o);this.lr(a,l,!0),mi(r)}},this.HA=(t,i,s,e)=>{(this.Qf||this.Jf)&&(this.DA(t),this.MA(t),mi(e))},this.XA=(t,i)=>{(this.qf||this.tA)&&this.$A(t)},this.jA=(t,i)=>{this.ZA(t)},this.QA=(t,i,s)=>{const e=n(i.clientX,i.clientY);this.qf&&this.JA(t,e)},this.KA=(t,i,s,e,h)=>{const r=n(i.clientX,i.clientY);this.qf&&this.qA(t,r,e,h)},this.tg=(t,i,s,e,h)=>{const r=n(i.clientX,i.clientY);this.qf&&this.ig(t,r,e,h)},this.sg=(t,i,s,e)=>{const h=n(i.clientX,i.clientY);(this.qf||this.tA)&&this.eg(t,h,e),(this.qf||this.tA)&&this.$A(t)},this.hg=(t,i)=>{this.tA&&(this.setStopped(!0),this.zoom(this.Hh,Ei(i)),mi(i))},this.rg=(t,i)=>{this.tA&&(this.setStopped(!0),this.zoom(this.Xh,Ei(i)),mi(i))},this.ng=(t,i,s)=>{this.qf&&(this.$A(t),this.JA(t,i),mi(s))},this.og=(t,i,s,e,h)=>{this.qf&&(this.qA(t,i,s,e),mi(h))},this.ag=(t,i,s,e,h)=>{this.qf&&(this.ig(t,i,s,e),mi(h))},this.lg=(t,i,s,e)=>{this.qf&&(this.eg(t,i,s),this.ZA(t),mi(e))},this.ug=t,this.RA=i,this.cg=h,this.dg=r,this.chart=c,this.Ag=f,this.gg=e,this.ss=o,"logarithmic"===m.type&&this.chart.us.Qn(Yo.If),A(this,this.dA),a.yg=this,this.mg=d,this.pg=this.mg>50?1:-1,this.vg=(S=this.Nh.toPoint(0,-this.pg),Math.abs(S.x)>=Math.abs(S.y)?S.x>=0?Ut.Right:Ut.Left:S.y>=0?Ut.Up:Ut.Down),this.Sg=l,this.bg=this.ft instanceof te?(new ee).Li(this.Nh.toVec2(this.ft,this.Sg)):(new he).Li(this.Nh.toVec2(this.ft,this.Sg)),this.xg=this.chart.Mg,this._g=(new ee).Li(this.Nh.toVec2(this.Nh.getWidth(this.xg),this.Sg)),this.wg=this.RA.Ye(this.bg).setMouseInteractions(!1),this.Cg=this.RA.Ye(this.bg).setMouseInteractions(!1),this.kg=this.RA.Ye(this.bg).setMouseInteractions(!1),this.Tg=this.gg.Re(this.xg).Le(u.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).Be(dt).ha(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.Fg=this.gg.Re(this.xg).Le(u.getWidth({x:g.xAxisZoomingBandFillStyle,y:g.yAxisZoomingBandFillStyle})).Be(u.getWidth({x:g.xAxisZoomingBandStrokeStyle,y:g.yAxisZoomingBandStrokeStyle})),this.Ig=this.gg.Re(this.xg).Le(u.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).Be(dt).ha(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.Pg=this.gg.Re(this.xg).Le(u.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).Be(dt).ha(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.Th=this.gg.Ur(this.bg).setMouseInteractions(!1).ir(this.Nh.getTitleTextRotation(this.pg)).Gr(Qi).Nr(Qi),this.chart.us.ls.os(this.Tg,(t=>this.Tg.cs(t)),{animationEnabled:this.gh}),this.chart.us.ls.os(this.Ig,(t=>this.Ig.cs(t)),{animationEnabled:this.gh}),this.chart.us.ls.os(this.Pg,(t=>this.Pg.cs(t)),{animationEnabled:this.gh});const b=ve(new be(this.NA,this.GA,this.UA,1),new xe(this.WA,this.YA,this.HA),new Se(this.vA)),x=ve(new be(this.ng,this.og,this.lg)),M=ve(new be(this.ng,this.ag,this.lg));this.Tg.setMouseEnterEventHandler(this.SA).setMouseLeaveEventHandler(this.xA).setMouseDragStartEventHandler(this._A).setMouseDragEventHandler(this.TA).setMouseDragStopEventHandler(this.PA).setMouseWheelEventHandler(this.LA).setMouseDoubleClickEventHandler(this.vA).setMouseClickEventHandler(this.EA).setMouseDownEventHandler(this.zA).setMouseUpEventHandler(this.VA).setMouseMoveEventHandler(this.OA).setTouchStartEventHandler(b.onTouchStart).setTouchMoveEventHandler(b.onTouchMove).setTouchEndEventHandler(b.onTouchEnd),this.Ig.setMouseEnterEventHandler(this.XA).setMouseLeaveEventHandler(this.jA).setMouseDragStartEventHandler(this.QA).setMouseDragEventHandler(this.KA).setMouseDragStopEventHandler(this.sg).setMouseWheelEventHandler(this.hg).setTouchStartEventHandler(x.onTouchStart).setTouchMoveEventHandler(x.onTouchMove).setTouchEndEventHandler(x.onTouchEnd),this.Pg.setMouseEnterEventHandler(this.XA).setMouseLeaveEventHandler(this.jA).setMouseDragStartEventHandler(this.QA).setMouseDragEventHandler(this.tg).setMouseDragStopEventHandler(this.sg).setMouseWheelEventHandler(this.rg).setTouchStartEventHandler(M.onTouchStart).setTouchMoveEventHandler(M.onTouchMove).setTouchEndEventHandler(M.onTouchEnd),this.wg.We(u.getWidth({x:g.xAxisStrokeStyle,y:g.yAxisStrokeStyle})),this.Cg.We(u.getWidth({x:g.xAxisNibStyle,y:g.yAxisNibStyle})),this.kg.We(u.getWidth({x:g.xAxisNibStyle,y:g.yAxisNibStyle})),this.Th.Le(u.getWidth({x:g.xAxisTitleFillStyle,y:g.yAxisTitleFillStyle})).tr(u.getWidth({x:g.xAxisTitleFont,y:g.yAxisTitleFont})),this.es=o.hs(this,{}),this.er=this.es.Dg([this.Th]).bs(g.effectsText),this.Bg=null!==(p=u.getWidth({x:g.xAxisMarginAfterTicks,y:g.yAxisMarginAfterTicks}))&&void 0!==p?p:7,this.Lg=null!==(v=u.getWidth({x:g.xAxisMarginAfterTitle,y:g.yAxisMarginAfterTitle}))&&void 0!==v?v:7}Vr(){return this.ph}Or(){return void 0!==this.ar}setTickStrategy(t,i){return super.Yh(t,i)}getTickStrategy(){return this.ah}addBand(t=!0){const i=t?this.dg:this.cg,s=new lh(i,this.chart,this.AA,this,this.bg,this.Nh,this.qi,this.ss);return this.uA.push(s),s}addConstantLine(t=!0){const i=t?this.dg:this.cg,s=new uh(i,this.chart,this.AA,this,this.bg,this.Nh,this.qi,this.ss);return this.uA.push(s),s}Rg(t){this.uA.forEach(t)}Eg(t){return this.uA.map(t)}getHighlighters(){return this.uA}setThickness(t){return"number"==typeof t?(this.zg=t,this.Vg=t):"object"==typeof t&&(this.zg=t.min,this.Vg=t.max),this.chart.us.xs(),this}getThickness(){return{min:this.zg,max:this.Vg}}setMouseInteractions(t){return this.setAxisInteractionPanByDragging(t).setAxisInteractionReleaseByDoubleClicking(t).setAxisInteractionZoomByDragging(t).setAxisInteractionZoomByWheeling(t).setNibInteractionScaleByDragging(t).setNibInteractionScaleByWheeling(t)}Og(){return this.Uf}br(t,i){return new Ho(i,t,this.RA,this.bg,this.bg)}hr(){if(this.Vf){for(const t of this.Vf)t[1].grid.dispose(),t[1].tick.dispose();this.Vf.clear()}super.hr()}Mr(t,i){const{tickStart:s}=i,e=t.Rh.$e,h=s+e.getTickLength()*this.pg+e.getTickPadding()*this.pg;t.hh.ze(this.Nh.toPoint(t.S,h)).ja(this.Nh.toPoint(e.getLabelAlignment(),-this.pg)).ir(e.labelRotation).setVisible(this.getVisible())}Ng(t,i){const{startPosition:s,gridStrokeLen:e,gridStrokeStart:h,tickStart:r}=i,n=t.Rh.$e,o=s-e*n.getGridStrokeLength(),a=r+n.getTickLength()*this.pg;return{gridStroke:{start:this.Nh.toPoint(t.S,h),end:this.Nh.toPoint(t.S,o)},tickStroke:{start:this.Nh.toPoint(t.S,r),end:this.Nh.toPoint(t.S,a)}}}Rr(t,i){return"linear"===this.Uh.type?fe(t,i,this.ft):Ae(t,i,this.ft)}Gg(t,i){return i instanceof te?fe:Ae}zr(t,i,s){if("logarithmic"!==this.Uh.type){const e=this.ft.Bi(i-t);return{min:t-s*e,max:i+s*e}}const e=this.ft,h={start:e.X,end:e.$};e.K(t,i).di();const r={min:e.gi(t,-s),max:e.gi(i,s)};return e.K(h.start,h.end).di(),r}Vs(){if(!this.ji)return{Ug:0,Wg:0,Zd:0};const t=!(this.lh.size>0),i=this.Th&&this.Th.kr().length>0&&this.getTitleFillStyle()!==O,s=this.Nh.getHeight(i?this.chart.us.Hg.Yg(this.Th.kr(),this.getTitleFont(),this.getTitleRotation()):{x:0,y:0})+(i?this.Lg:0),e=_h(this.oh)?new Map:Ih(this.oh,Math.min(this.Hh,this.Xh),Math.max(this.Hh,this.Xh),this.Hh,this.Xh,0),h=this.ft;let r=0;e.forEach(((i,s)=>{if(fh(s)){const e=Math.max(...i.map((i=>{if(!As(i,this.Hh,this.Xh))return 0;const e=this.chart.us.Hg.Yg(s.je(i,h),s.$e.labelFont,s.$e.labelRotation);return t||!e.isEstimate?this.Nh.getHeight(e):0})))+s.$e.tickLength+s.$e.tickPadding;r=Math.max(r,e)}}));const n=this.Gf.reduce(this.mA,0);r=Math.max(r,n),r+=this.Bg;const o=Jt(s+r,void 0!==this.zg?this.zg:0,void 0!==this.Vg?this.Vg:es);return this.Nf=o,{Ug:r,Wg:s,Zd:o}}Ee(t){const i=this.getVisible()&&t.Xg>0;this.$g=t;const s=this.wg.Su(),e=this.ft.getInnerStart()<this.ft.getInnerEnd()?this.ft.getInnerStart():this.ft.getInnerEnd(),h=this.ft.getInnerEnd()>this.ft.getInnerStart()?this.ft.getInnerEnd():this.ft.getInnerStart(),r=s.getThickness()*this.pg/2,n=this.Sg.getInnerInterval(),o=this.mg/100*n,a=o+t.jg,l=n*this.pg,u=a+r;if(i||this.hr(),!_h(this.oh)&&i){const t=this.ft.hi();this.cr({physicalAxisSize:t,startPosition:o,gridStrokeLen:l,gridStrokeStart:a,tickStart:u});for(const[i,s]of this.lh){let e=this.Vf.get(i);if(!e)if(i.Ze)e={grid:this.ug[0].Zg(this.bg).setMouseInteractions(!1),tick:this.ug[0].Zg(this.bg).setMouseInteractions(!1)};else if("Qg"in i){const t=Array.from(this.lh.keys()).filter((t=>"Qg"in t)).reverse().indexOf(i),s=this.ug[t];if(!s)throw new Error("Not enough tick layers. This is an internal LCJS error - if you see this, please contact Arction support.");e={grid:s.Zg(this.bg).setMouseInteractions(!1),tick:s.Zg(this.bg).setMouseInteractions(!1)}}if(e){e.grid.Vt(),e.tick.Vt();for(const[i,h]of s){const i=this.Ng(h,{physicalAxisSize:t,startPosition:o,gridStrokeLen:l,gridStrokeStart:a,tickStart:u});e.grid.jr().Jg(i.gridStroke.start,i.gridStroke.end),e.tick.jr().Jg(i.tickStroke.start,i.tickStroke.end)}e.grid.We(i.$e.getGridStrokeStyle()),e.tick.We(i.$e.getTickStyle()),this.Vf.set(i,e)}}}const c=u,d=c+this.pg*t.Kg,f=this.qf||this.tA?Math.min(this.$f,.25*t.Xg):0,A={start:this.Nh.toVec2(this.ft.gi(this.ft.getInnerStart(),f),c),end:this.Nh.toVec2(this.ft.gi(this.ft.getInnerEnd(),-f),d)},g=pt(this.Nh.toVec2(this.ft.getInnerStart(),d),this.bg,this.xg),y=pt(A.start,this.bg,this.xg),m=pt(A.end,this.bg,this.xg),p=pt(this.Nh.toVec2(this.ft.getInnerEnd(),c),this.bg,this.xg);this.wg.Xe(this.Nh.toPoint(e,a)).He(this.Nh.toPoint(h,a)).setVisible(i),this.Cg.Xe(this.Nh.toPoint(this.ft.gi(this.ft.getInnerStart(),this.Yf),a)).He(this.Nh.toPoint(this.ft.getInnerStart(),a)).setVisible(i),this.kg.Xe(this.Nh.toPoint(this.ft.gi(this.ft.getInnerEnd(),-this.Yf),a)).He(this.Nh.toPoint(this.ft.getInnerEnd(),a)).setVisible(i);const v=a+t.Ug*this.pg;if(this.Th.ze(this.Nh.toPoint(this.Nh.getWidth(pt("center"===this.fA?Fs(Is(g,p),.5):"start"===this.fA?g:p,this.xg,this.bg)),v)).ja(this.Nh.toPoint("center"===this.fA?0:"start"===this.fA?-1:1,-1*this.pg)).setVisible(i).setMouseInteractions(void 0!==["mouseEnterTitle","mouseMoveTitle","mouseLeaveTitle","mouseDownTitle","mouseUpTitle","mouseClickTitle","mouseDoubleClickTitle","mouseDragStartTitle","mouseDragTitle","mouseDragStopTitle","mouseWheelTitle","touchStartTitle","touchMoveTitle","touchEndTitle"].find((t=>this.L.listeners(t).size>0))),this.Of){const i=this.mg/100*n+t.jg,s=-this.pg*n-t.jg,e={start:this.Nh.toVec2(this.Of.min,u+this.pg*this.Nf),end:this.Nh.toVec2(this.Of.max,i+s)},h=pt(e.start,this.bg,this.xg),r=pt(e.end,this.bg,this.xg);this.Fg.ze(h).tt(Ps(r,h)).setVisible(!0)}else this.Fg.setVisible(!1);this.Tg.ze(y).tt(Ps(m,y)).setVisible(i),this.Ig.ze(g).tt(Ps(y,g)).setVisible(i),this.Pg.ze(m).tt(Ps(p,m)).setVisible(i);for(const s of this.Gf)s.update().plot(i,a,l,t.jg,u);for(const t of this.uA)t.Ee()}setLength(t){return this.jd=t,this.chart.us.xs(),this}getLength(){return this.jd}setMargins(t,i){return this.gA=t,this.yA=i,this.chart.us.xs(),this}getMargins(){return{start:this.gA,end:this.yA}}getStackIndex(){var t,i;return null!==(i=null===(t=[...this.chart.qg,...this.chart.ty,...this.chart.iy,...this.chart.sy].find((t=>t.axis===this)))||void 0===t?void 0:t.iStack)&&void 0!==i?i:0}getParallelIndex(){var t,i;return null!==(i=null===(t=[...this.chart.qg,...this.chart.ty,...this.chart.iy,...this.chart.sy].find((t=>t.axis===this)))||void 0===t?void 0:t.iParallel)&&void 0!==i?i:0}ey(){const t=this.$g;if(!t)return;const i=this.getVisible()&&t.Xg>0,s=this.wg.Su().getThickness()*this.pg/2,e=this.Sg.getInnerInterval(),h=this.mg/100*e+t.jg,r=e*this.pg,n=h+s;for(const s of this.Gf)s.update().plot(i,h,r,t.jg,n);for(const t of this.uA)t.Ee()}hy(){return this.Nf}ny(t,i){i=i||Uo.AxisTickMajor;const s=new rn(this,t?this.ug[0]:this.gg,this.gg,this.ft,this._g,this._g,this.Nh,this.vg,this.pA,this.qi,i).setTextFormatter(this.formatValue);return this.Gf.push(s),s}bA(t){this.chart.us.ls.Cs(t,1),this.Hf=t.us.qr(this.rA,this.Hf)}MA(t){this.chart.us.ls.Cs(t,0),t.us.tn(this.Hf)}CA(t){this.setStopped(!0),t.us.tn(this.Hf)}FA(t,i){const s=-this.Nh.getWidth(i);this.pan(s),this.Hf=t.us.qr(this.nA,this.Hf)}pan(t){const i=this.Hh,s=this.Xh,e=this.ft.gi(i,t),h=this.ft.gi(s,t);this.lr(e,h,!1)}zoom(t,i){const s=this.ft.dt(this.Hh),e=this.ft.dt(this.Xh),h=this.ft.dt(t),r=Jt((h-s)/(e-s),0,1),n=.2*this.ft.hi(),o=r*this.jf*n*-i,a=(1-r)*this.jf*n*i,l=this.ft.gi(this.Hh,o),u=this.ft.gi(this.Xh,a);this.lr(l,u,!0)}DA(t){this.Of=void 0,t.us.tn(this.Hf)}kA(t,i){this.setStopped(!0),t.us.tn(this.Hf),this.chart.us.ls.Cs(this.Tg,0)}IA(t,i,s,e){const h=pt(this.RA.us.Oe(s.x,s.y),this.RA.us.ft,this.bg),r=Jt(this.Nh.getWidth(h),this.Hh,this.Xh),n=this.Nh.getWidth(pt(this.RA.us.Oe(i.x,i.y),this.RA.us.ft,this.bg));Math.abs(this.ft.dt(r)-this.ft.dt(n))>10?(this.Of=c(Math.min(r,n),Math.max(r,n)),this.Hf=t.us.qr(this.oA,this.Hf)):(this.Of=void 0,this.Hf=t.us.qr(this.rA,this.Hf)),this.RA.xs()}BA(t,i,s){if(this.Of){const t=this.Of.min,i=this.Of.max,s=this.Xh<this.Hh;this.At(s?i:t,s?t:i,!0,!0,"interactionSetInterval")}this.Of=void 0,t.us.tn(this.Hf)}$A(t){this.chart.us.ls.Cs(t,1),this.Xf=t.us.qr(this.aA,this.Xf)}ZA(t){this.chart.us.ls.Cs(t,0),t.us.tn(this.Xf)}JA(t,i){this.setStopped(!0),this.Xf=t.us.qr(this.lA,this.Xf)}qA(t,i,s,e){const h=this.Nh.getWidth(e);this.lr(this.ft.gi(this.Hh,h),this.Xh,!0)}ig(t,i,s,e){const h=this.Nh.getWidth(e);this.lr(this.Hh,this.ft.gi(this.Xh,h),!0)}eg(t,i,s){t.us.tn(this.Xf),t.getIsUnderMouse()&&(this.Xf=t.us.qr(this.aA)),this.RA.xs()}addCustomTick(t){return this.ny(!0,t)}setTitlePosition(t){return this.fA=t,this.chart.us.xs(),this}getTitlePosition(){return this.fA}getUiPosition(){return this.mg}setStrokeStyle(t){return this.wg.We(t),this.RA.xs(),this}getStrokeStyle(){return this.wg.Su()}getOverlayStyle(){return this.Tg.Qh()}setOverlayStyle(t){return this.Tg.Le(t),this.RA.xs(),this}setAxisInteractionZoomByDragging(t){return this.Zf=t,this}getAxisInteractionZoomByDragging(){return this.Zf}setAxisInteractionPanByDragging(t){return this.Qf=t,this}getAxisInteractionPanByDragging(){return this.Qf}setAxisInteractionZoomByWheeling(t){return this.Jf=t,this}getAxisInteractionZoomByWheeling(){return this.Jf}setAxisInteractionReleaseByDoubleClicking(t){return this.Kf=t,this}getAxisInteractionReleaseByDoubleClicking(){return this.Kf}setAxisMouseHoverStyle(t=this.Nh.defaultDragMouseStyle){return this.rA=t,this}getAxisMouseHoverStyle(){return this.rA}setAxisMousePanStyle(t=this.Nh.defaultDragMouseStyle){return this.nA=t,this}getAxisMousePanStyle(){return this.nA}setAxisMouseZoomStyle(t=this.Nh.defaultDragMouseStyle){return this.oA=t,this}getAxisMouseZoomStyle(){return this.oA}setAnimationHighlight(t){return this.chart.us.ls.ks(this.Tg,t),this.chart.us.ls.ks(this.Ig,t),this.chart.us.ls.ks(this.Pg,t),this}getAnimationHighlight(){return this.chart.us.ls.Ts(this.Tg)}getMarginAfterTicks(){return this.Bg}setMarginAfterTicks(t){return this.Bg=t,this.RA.xs(),this}getMarginAfterTitle(){return this.Lg}setMarginAfterTitle(t){return this.Lg=t,this.RA.xs(),this}getNibLength(){return this.Yf}setNibLength(t){return this.Yf=t,this.RA.xs(),this}getNibStyle(){return this.Cg.Su()}setNibStyle(t){return this.Cg.We(t),this.kg.We(t),this.RA.xs(),this}getNibOverlayStyle(){return this.Ig.Qh()}setNibOverlayStyle(t){return this.Ig.Le(t),this.Pg.Le(t),this.RA.xs(),this}setNibMousePickingAreaSize(t){return this.$f=t,this.RA.xs(),this}getNibMousePickingAreaSize(){return this.$f}setNibInteractionScaleByDragging(t){return this.qf=t,this}getNibInteractionScaleByDragging(){return this.qf}setNibInteractionScaleByWheeling(t){return this.tA=t,this}getNibInteractionScaleByWheeling(){return this.tA}setNibMouseHoverStyle(t=this.Nh.defaultDragMouseStyle){return this.aA=t,this}getNibMouseHoverStyle(){return this.aA}setNibMouseScaleStyle(t=this.Nh.defaultDragMouseStyle){return this.lA=t,this}getNibMouseScaleStyle(){return this.lA}setChartInteractions(t){return this.setChartInteractionFitByDrag(t),this.setChartInteractionPanByDrag(t),this.setChartInteractionZoomByDrag(t),this.setChartInteractionZoomByWheel(t),this}setChartInteractionPanByDrag(t){return this.iA=t,this}getChartInteractionPanByDrag(){return this.iA}setChartInteractionZoomByWheel(t){return this.sA=t,this}getChartInteractionZoomByWheel(){return this.sA}setChartInteractionZoomByDrag(t){return this.eA=t,this}getChartInteractionZoomByDrag(){return this.eA}setChartInteractionFitByDrag(t){return this.hA=t,this}getChartInteractionFitByDrag(){return this.hA}Z(){return this.ft.Z(),this}J(){return this.ft.J(),this}dispose(){this.Cg.dispose(),this.kg.dispose(),this.wg.dispose(),this.Tg.dispose(),this.Fg.dispose(),this.Ig.dispose(),this.Pg.dispose(),this.Th.dispose(),this.ur(jt);for(const t of this.Vf.values())t.grid.dispose(),t.tick.dispose();return this.Uf.slice().forEach(jt),this.uA.slice().forEach(jt),this.Ag(this),this.L.emit("dispose",this),this}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setVisible(t){this.Cg.setVisible(t),this.kg.setVisible(t),this.wg.setVisible(t),this.Th.setVisible(t),this.Tg.setVisible(t),this.Ig.setVisible(t),this.Pg.setVisible(t),this.ur((i=>{i.ps(t)}));for(const i of this.Vf.values())i.grid.setVisible(t),i.tick.setVisible(t);return super.setVisible(t),this.chart.us.xs(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationHighlight(this.gh),this}}var $o;!function(t){t.Start="start",t.Center="center",t.End="end"}($o||($o={}));const jo={getWidth:t=>t.x,getHeight:t=>t.y,toVec2:(t,i)=>({x:t,y:i}),toPoint:(t,i)=>n(t,i)},Zo={getWidth:t=>t.y,getHeight:t=>t.x,toVec2:(t,i)=>({x:i,y:t}),toPoint:(t,i)=>n(i,t)},Qo=t=>!!(t&&"object"==typeof t&&"x"in t&&t.x instanceof Xo&&"y"in t&&t.y instanceof Xo),Jo=i({type:"tick-style",gridStrokeLength:1,gridStrokeStyle:new _e,tickLength:7,tickStyle:new _e,tickPadding:0,labelFont:new Rh,labelFillStyle:new W,labelAlignment:0,labelRotation:0});class Ko extends Jo{constructor(t){super(t)}setGridStrokeLength(t){return this.set("gridStrokeLength",t)}getGridStrokeLength(){return this.get("gridStrokeLength")}setGridStrokeStyle(t){return this.set("gridStrokeStyle","function"==typeof t?t(this.get("gridStrokeStyle")):t)}getGridStrokeStyle(){return this.get("gridStrokeStyle")}setTickLength(t){return this.set("tickLength",t)}getTickLength(){return this.get("tickLength")}setTickStyle(t){return this.set("tickStyle","function"==typeof t?t(this.get("tickStyle")):t)}getTickStyle(){return this.get("tickStyle")}setTickPadding(t){return this.set("tickPadding",t)}getTickPadding(){return this.get("tickPadding")}setLabelFillStyle(t){return this.set("labelFillStyle","function"==typeof t?t(this.get("labelFillStyle")):t)}getLabelFillStyle(){return this.get("labelFillStyle")}setLabelFont(t){return this.set("labelFont","function"==typeof t?t(this.get("labelFont")):t)}getLabelFont(){return this.get("labelFont")}setLabelAlignment(t){return this.set("labelAlignment",t)}getLabelAlignment(){return this.get("labelAlignment")}setLabelRotation(t){return this.set("labelRotation",t)}getLabelRotation(){return this.get("labelRotation")}}const qo=t=>!(!t||"object"!=typeof t||!("type"in t)||"tick-style"!==t.type),ta=new Ko({labelFillStyle:O,gridStrokeStyle:dt,tickStyle:dt}),ia=t=>qo(t)&&N(t.labelFillStyle)&&ft(t.gridStrokeStyle)&&ft(t.tickStyle),sa=i({type:"time-ticks",cursorFormatter:void 0,timeOrigin:void 0,majorTickStyle:new Ko,minorTickStyle:new Ko,majorFormattingFunction:void 0,minorFormattingFunction:void 0}),ea=(t,i)=>{const s=i-t;return s>=864e5?"MajorHours12":s>=36e5?"MajorHours":s>=6e5?"MajorMinutes15":s>=9e4?"MajorMinutes":s>=10500?"MajorSeconds15":s>=1e3?"MajorSeconds":s>=100?"MajorMilliseconds100":s>=10?"MajorMilliseconds10":s>=1?"MajorMilliseconds":s>=.1?"MajorMicroseconds100":s>=.01?"MajorMicroseconds10":s>=.001?"MajorMicroseconds":s<=.001?"MajorNanoseconds100":"Unknown"},ha={hhmmss:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/36e5);i%=36e5;const h=Math.floor(i/6e4);i%=6e4;const r=Math.floor(i/1e3);return`${s}${Li(e,2)}:${Li(h,2)}:${Li(r,2)}`},hhmmssmmm:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/36e5);i%=36e5;const h=Math.floor(i/6e4);i%=6e4;const r=Math.floor(i/1e3);i%=1e3;const n=Math.floor(i/1);return`${s}${Li(e,2)}:${Li(h,2)}:${Li(r,2)}.${Li(n,3)}`},hhmmssmmmuuu:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/36e5),h=Math.floor(i/6e4)%60,r=Math.floor(i/1e3)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}).split(".")[1];return`${s}${Li(e,2)}:${Li(h,2)}:${Li(r,2)}.${Li(n,3)}${o}`},hhmmssmmmuuunnn:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/36e5),h=Math.floor(i/6e4)%60,r=Math.floor(i/1e3)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:6,maximumFractionDigits:6}).split(".")[1];return`${s}${Li(e,2)}:${Li(h,2)}:${Li(r,2)}.${Li(n,3)}${o}`}},ra={MajorHours12:{major:{format:ha.hhmmss,getKeyValues:(t,i,s,e)=>{const h=432e5;return t=Math.floor(t/(4*h))*h*4,ph(t,i,h,void 0,1e6)},fitKeyValues:Sh({ignore:"first"},2,4)},minor:{format:ha.hhmmss,getKeyValues:(t,i,s,e)=>mh(t,i,36e5,1e6),fitKeyValues:Sh({},2,3,4,6)},defaultValueFormatter:ha.hhmmss},MajorHours:{major:{format:ha.hhmmss,getKeyValues:(t,i,s,e)=>{const h=36e5;return t=Math.floor(t/(12*h))*h*12,ph(t,i,h,void 0,1e6)},fitKeyValues:Sh({ignore:"first"},2,6,12)},minor:{format:ha.hhmmss,getKeyValues:(t,i,s,e)=>mh(t,i,3e5,1e6),fitKeyValues:Sh({},2,4,6)},defaultValueFormatter:ha.hhmmss},MajorMinutes15:{major:{format:ha.hhmmss,getKeyValues:(t,i,s,e)=>(t=36e5*Math.floor(t/36e5),ph(t,i,9e5,void 0,1e6)),fitKeyValues:Sh({ignore:"first"},2)},minor:{format:ha.hhmmss,getKeyValues:(t,i,s,e)=>mh(t,i,6e4,1e6),fitKeyValues:Sh({},3,5)},defaultValueFormatter:ha.hhmmss},MajorMinutes:{major:{format:ha.hhmmss,getKeyValues:(t,i,s,e)=>{const h=6e4;return t=Math.floor(t/6e5)*h*10,ph(t,i,h,void 0,1e6)},fitKeyValues:Sh({ignore:"first"},2,5)},minor:{format:ha.hhmmss,getKeyValues:(t,i,s,e)=>mh(t,i,5e3,1e6),fitKeyValues:Sh({},2,3,4,6)},defaultValueFormatter:ha.hhmmss},MajorSeconds15:{major:{format:ha.hhmmss,getKeyValues:(t,i,s,e)=>{const h=15e3;return t=Math.floor(t/6e4)*h*4,ph(t,i,h,void 0,1e6)},fitKeyValues:Sh({ignore:"first"},2,4)},minor:{format:ha.hhmmss,getKeyValues:(t,i,s,e)=>mh(t,i,1e3,1e6),fitKeyValues:Sh({},3,5)},defaultValueFormatter:ha.hhmmss},MajorSeconds:{major:{format:ha.hhmmssmmm,getKeyValues:(t,i,s,e)=>{const h=1e3;return t=Math.floor(t/1e4)*h*10,ph(t,i,h,void 0,1e6)},fitKeyValues:Sh({ignore:"first"},2,5)},minor:{format:ha.hhmmssmmm,getKeyValues:(t,i,s,e)=>mh(t,i,100,1e6),fitKeyValues:Sh({},2,3,5)},defaultValueFormatter:ha.hhmmssmmm},MajorMilliseconds100:{major:{format:ha.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=100*Math.floor(t/1e3)*10,ph(t,i,100,void 0,1e6)),fitKeyValues:Sh({ignore:"first"},2,5)},minor:{format:ha.hhmmssmmm,getKeyValues:(t,i,s,e)=>mh(t,i,10,1e6),fitKeyValues:Sh({},2,3,5)},defaultValueFormatter:ha.hhmmssmmm},MajorMilliseconds10:{major:{format:ha.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=10*Math.floor(t/100)*10,ph(t,i,10,void 0,1e6)),fitKeyValues:Sh({ignore:"first"},2,5)},minor:{format:ha.hhmmssmmm,getKeyValues:(t,i,s,e)=>mh(t,i,1,1e6),fitKeyValues:Sh({},2,3,5)},defaultValueFormatter:ha.hhmmssmmm},MajorMilliseconds:{major:{format:ha.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=1*Math.floor(t/10)*10,ph(t,i,1,void 0,1e6)),fitKeyValues:Sh({ignore:"first"},2,5)},minor:{format:ha.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>mh(t,i,.1,1e6),fitKeyValues:Sh({},2)},defaultValueFormatter:ha.hhmmssmmmuuu},MajorMicroseconds100:{major:{format:ha.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=.1*Math.floor(t/1)*10,ph(t,i,.1,void 0,1e6)),fitKeyValues:Sh({ignore:"first"},2,5)},minor:{format:ha.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>mh(t,i,.01,1e6),fitKeyValues:Sh({},2,3,5)},defaultValueFormatter:ha.hhmmssmmmuuu},MajorMicroseconds10:{major:{format:ha.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>{const h=.01;return t=Math.floor(t/.1)*h*10,ph(t,i,h,void 0,1e6)},fitKeyValues:Sh({ignore:"first"},2,5)},minor:{format:ha.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>mh(t,i,.001,1e6),fitKeyValues:Sh({},2,3,5)},defaultValueFormatter:ha.hhmmssmmmuuu},MajorMicroseconds:{major:{format:ha.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=.001;return t=Math.floor(t/.01)*h*10,ph(t,i,h,void 0,1e6)},fitKeyValues:Sh({ignore:"first"},2,5)},minor:{format:ha.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>mh(t,i,100*1e-6,1e6),fitKeyValues:Sh({},2,3,5)},defaultValueFormatter:ha.hhmmssmmmuuunnn},MajorNanoseconds100:{major:{format:ha.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=100*1e-6;return t=Math.floor(t/.001)*h*10,ph(t,i,h,void 0,1e6)},fitKeyValues:Sh({ignore:"first"},2,5)},minor:{format:ha.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>mh(t,i,10*1e-6,1e6),fitKeyValues:Sh({},2,3,5)},defaultValueFormatter:ha.hhmmssmmmuuunnn},Unknown:{major:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},minor:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},defaultValueFormatter:(t,i,s)=>""}};class na extends sa{Je(t){const i=this.timeOrigin||0,s=[{hh:"Major ticks",Qg:0,$e:this.majorTickStyle,je:this.majorFormattingFunction?this.majorFormattingFunction:(t,s,e)=>{const h=ea(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return(0,ra[h].major.format)(t+i,s,e)},Yr:(t,i,s,e)=>{const h=ea(s,e);return(0,ra[h].major.getKeyValues)(t,i,s,e)},Eh:{_r:(t,i,s,e,h,r)=>{const n=ea(h,r),o=ra[n].major.fitKeyValues;if(o)return o(t,i,s,e,h,r)}},Hr:void 0}];return qo(this.minorTickStyle)&&s.push({hh:"Minor ticks",Qg:1,$e:this.minorTickStyle,je:this.minorFormattingFunction?this.minorFormattingFunction:(t,s,e)=>{const h=ea(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return(0,ra[h].minor.format)(t+i,s,e)},Yr:(t,i,s,e)=>{const h=ea(s,e);return(0,ra[h].minor.getKeyValues)(t,i,s,e)},Eh:{_r:(t,i,s,e,h,r)=>{const n=ea(h,r),o=ra[n].minor.fitKeyValues;if(o)return o(t,i,s,e,h,r)}},Hr:void 0}),{Ke:[],qe:s,th:this.cursorFormatter||((t,s,e)=>{const h=ea(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return ra[h].defaultValueFormatter(t+i,s,e)}),ih:1e-4,sh:864e6}}setTickStyle(t){return this.setMajorTickStyle(t).setMinorTickStyle(t)}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTimeOrigin(t){return this.set("timeOrigin",t)}getTimeOrigin(){return this.get("timeOrigin")}setFormattingFunction(t){return this.withMutations((i=>i.set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const oa=t=>!(!t||"object"!=typeof t||!("type"in t)||"time-ticks"!==t.type),aa=(t,i,s,e,h)=>(r,n)=>o=>{const a=new Date(o+r),l={year:n?a.getUTCFullYear():a.getFullYear(),monthIndex:n?a.getUTCMonth():a.getMonth(),day:n?a.getUTCDate():a.getDate(),hours:n?a.getUTCHours():a.getHours(),minutes:n?a.getUTCMinutes():a.getMinutes(),seconds:n?a.getUTCSeconds():a.getSeconds(),millis:n?a.getUTCMilliseconds():a.getMilliseconds()},u=e?e(l):void 0;if(0===t&&!0===u)return o;const c=l[i];h.includes("year")&&(l.year=Math.floor(l.year/s)*s),h.includes("monthIndex")&&(l.monthIndex=0),h.includes("day")&&(l.day=1),h.includes("hours")&&(l.hours=0),h.includes("minutes")&&(l.minutes=0),h.includes("seconds")&&(l.seconds=0),h.includes("millis")&&(l.millis=0);let d=(0===t?1:t)*s;return-1===t&&!1===u&&(d=0),0!==d&&(l[i]=s*(d>0?Math.floor((c+d)/s):Math.ceil((c+d)/s))),n?Date.UTC(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis)-r:new Date(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis).getTime()-r},la=(t,i,s,...e)=>aa(-1,t,i,s,e),ua=(t,i,s,...e)=>aa(-1,t,i,s,e),ca=(t,i,s,...e)=>aa(0,t,i,s,e),da=(t,i,...s)=>aa(1,t,i,void 0,s),fa=t=>(i,s)=>e=>{const h=new Date(e+i),r=s?h.getUTCDay():h.getDay(),n=1===r&&0===(s?h.getUTCHours():h.getHours())&&0===(s?h.getUTCMinutes():h.getMinutes())&&0===h.getSeconds()&&0===h.getMilliseconds();if(0===t&&!0===n)return e;let o=s?h.getUTCDate():h.getDate();return-1===t&&1===r&&!1===n||(-1===t?o-=r>=2?r-1:r+6:o+=r>0?8-r:1),s?Date.UTC(h.getUTCFullYear(),h.getUTCMonth(),o,0,0,0,0)-i:new Date(h.getFullYear(),h.getMonth(),o,0,0,0,0).getTime()-i},Aa=[{label:"MilliSecond1",unit:1,irregular:!1,greatTicks:void 0,majorTicks:{fitFunction:Sh({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Sh(void 0,2)}},{label:"MilliSecond10",unit:10,irregular:!1,greatTicks:{getReferenceKeyValue:la("millis",10,(t=>t.millis%10==0),"millis")},majorTicks:{fitFunction:Sh({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Sh(void 0,2)}},{label:"MilliSecond100",unit:100,irregular:!1,greatTicks:{getReferenceKeyValue:la("millis",100,(t=>t.millis%100==0),"millis")},majorTicks:{fitFunction:Sh({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Sh(void 0,2)}},{label:"Second",unit:1e3,irregular:!1,greatTicks:{getReferenceKeyValue:la("seconds",1,(t=>0===t.millis),"millis")},majorTicks:{fitFunction:bh(5,10,15,30)},minorTicks:{amount:4,fitFunction:Sh(void 0,2)}},{label:"Minute",unit:6e4,irregular:!1,greatTicks:{getReferenceKeyValue:la("minutes",1,(t=>0===t.seconds&&0===t.millis),"seconds","millis")},majorTicks:{fitFunction:bh(5,10,15,30)},minorTicks:{amount:12,fitFunction:Sh(void 0,3,6)}},{label:"Hour",unit:36e5,irregular:!1,greatTicks:{getReferenceKeyValue:la("hours",1,(t=>0===t.minutes&&0===t.seconds&&0===t.millis),"minutes","seconds","millis")},majorTicks:{fitFunction:bh(3,6,12)},minorTicks:{amount:8,fitFunction:Sh(void 0,2,4)}},{label:"Day",unit:864e5,irregular:!1,greatTicks:{getReferenceKeyValue:la("day",1,(t=>0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"hours","minutes","seconds","millis")},majorTicks:{fitFunction:Sh({ignore:"last"},2,4)},minorTicks:{amount:7,fitFunction:Sh({ignore:"last"},2,3)}},{label:"Week",unit:6048e5,irregular:!0,getPrevKeyValue:fa(-1),getNextKeyValueIncludingRef:fa(0),getNextKeyValue:fa(1),greatTicks:!0,majorTicks:{fitFunction:Sh(void 0,2)},minorTicks:{fitFunction:void 0}},{label:"Month",unit:2592e6,irregular:!0,getPrevKeyValue:ua("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ca("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValue:da("monthIndex",1,"day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Sh(void 0,2,3)},minorTicks:{fitFunction:Sh(void 0,2,4,6)}},{label:"Year",unit:31536e6,irregular:!0,getPrevKeyValue:ua("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ca("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:da("year",1,"monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Sh({ignore:"first"},2,5)},minorTicks:{fitFunction:Sh(void 0,2,5)}},{label:"Decade",unit:31536e7,irregular:!0,getPrevKeyValue:ua("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ca("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:da("year",10,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Sh(void 0,2,4)},minorTicks:{fitFunction:Sh(void 0,2,5)}},{label:"Century",unit:316224e7,irregular:!0,getPrevKeyValue:ua("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ca("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:da("year",100,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0},{label:"Millennium",unit:316224e8,irregular:!0,getPrevKeyValue:ua("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ca("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:da("year",1e3,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0}],ga=(t,i,s,e,h)=>{const r=i-t;let n;for(let t=h?0:Aa.length-1;h?t<Aa.length:t>=0;h?t+=1:t-=1){const i=r/Aa[t].unit;if((void 0===s||i>=s)&&(void 0===e||i<=e)){n=Aa[t];break}}return n},ya=(t,i,s)=>{let e=ga(i,s,void 0,1,!0);if(void 0!==e&&0===Aa.indexOf(e)&&(e=Aa[1]),void 0===e)return;if("great"===t)return e;const h="major"===t?1:2,r=Aa[Aa.indexOf(e)-h];return void 0===r?Aa[0]:r},ma=(t,i,s)=>(e,h,r,n)=>{const o=ya("great",e,h);if(void 0===o)return[];if("Decade"===o.label||"Century"===o.label||"Millennium"===o.label)return[];const a=n>r?e:h,l=(e+h)/2,u=n>r?h:e;if(Aa.indexOf(o)<=Aa.findIndex((t=>"Hour"===t.label)))return"left"===s?[a]:[];let c;if(!0===o.irregular)c=vh(e,h,o.getPrevKeyValue(t,i),o.getNextKeyValue(t,i));else{const s=o.greatTicks.getReferenceKeyValue(t,i)(e);c=ph(e,h,o.unit,s,1)}const d=((t,i,s)=>{for(const e of s)if(e>=t&&e<=i)return e})(e,h,c);return"left"===s?void 0===d||As(d,l,u)?[a]:[d]:void 0!==d&&As(d,l,u)?[d]:[u]},pa=(t,i,s)=>(e,h,r,n)=>{const o=ya(t,r,n);let a;if(void 0===o)return[];if("great"===t&&void 0!==o.greatTicks)if(!0===o.irregular)a=vh(e,h,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s));else{const t=o.greatTicks.getReferenceKeyValue(i,s)(e);a=ph(e,h,o.unit,t,1)}else if("major"===t&&void 0!==o.majorTicks)a=!0===o.irregular?((t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h})(e,h,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s)):((t,i,s)=>{const e=[];let h=t,r=0;for(;h<i;)if(e.push(h),h+=s,r+=1,r>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return e.push(h),e})(e,h,o.unit);else{if("minor"!==t||void 0===o.minorTicks)return[];if(!0===o.irregular)a=((t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h})(e,h,o.getNextKeyValueIncludingRef(i,s),o.getNextKeyValue(i,s));else{const t=(t=>{if(void 0!==t)return Aa[Aa.indexOf(t)+1]})(o);if(void 0===t)return[];a=mh(e,h,t.unit/o.minorTicks.amount,1)}}return a},va=t=>(i,s,e,h,r,n)=>{const o=ya(t,r,n);if(void 0===o)return;let a;return"major"===t?a=o.majorTicks.fitFunction:o.minorTicks&&(a=o.minorTicks.fitFunction),a?a(i,s,e,h,r,n):void 0},Sa=i({type:"date-time-ticks",utc:!1,locale:void 0,dateOrigin:void 0,cursorFormatter:void 0,greatTickStyle:new Ko,majorTickStyle:new Ko,minorTickStyle:new Ko,formatOptionsMajorCentury:{year:"numeric",hour12:!1},formatOptionsMinorDecade:{year:"numeric",hour12:!1},formatOptionsMajorDecade:{year:"numeric",hour12:!1},formatOptionsMinorYear:{year:"numeric",hour12:!1},formatOptionsMajorYear:{year:"numeric",hour12:!1},formatOptionsMinorMonth:{month:"short",hour12:!1},formatOptionsGreatYear:{year:"numeric",hour12:!1},formatOptionsMajorMonth:{month:"long",hour12:!1},formatOptionsMinorWeek:{day:"numeric",hour12:!1},formatOptionsGreatMonth:{year:"numeric",month:"long",hour12:!1},formatOptionsMajorWeek:{day:"numeric",weekday:"short",hour12:!1},formatOptionsMinorDay:{day:"numeric",weekday:"short",hour12:!1},formatOptionsGreatWeek:(t,i,s)=>{const e=new Date(t),h=(t=>{const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));i.setUTCDate(i.getUTCDate()+4-(i.getUTCDay()||7));const s=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i.getTime()-s.getTime())/864e5+1)/7)})(e);return`${new Intl.DateTimeFormat(s,{year:"numeric",month:"long",hour12:!1}).format(e)} Week ${h}`},formatOptionsMajorDay:{weekday:"long",day:"numeric",hour12:!1},formatOptionsMinorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatDay:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatHour:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsGreatMinute:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsMinorMillisecond:t=>{const i=new Date(t);return i.setHours(0,0,0,0),ha.hhmmssmmm(t-i.getTime())},formatMillisecondRange:t=>{const i=new Date(t);return i.setHours(0,0,0,0),ha.hhmmssmmm(t-i.getTime())},formatOptionsGreatSecond:{},formatOptionsMajorMilliSecond:{}});class ba extends Sa{Je(t){const i=void 0!==this.dateOrigin?this.dateOrigin.getTime():0,s=t=>Aa.map((i=>{const s=((t,i,s)=>{switch(s.label){case"MilliSecond1":case"MilliSecond10":case"MilliSecond100":return"Great"===i?t.formatOptionsGreatMinute:t.formatMillisecondRange;case"Second":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorSecond:t.formatOptionsMinorSecond;case"Minute":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorMinute:t.formatOptionsMinorMinute;default:case"Hour":return"Great"===i?t.formatOptionsGreatHour:"Major"===i?t.formatOptionsMajorHour:t.formatOptionsMinorHour;case"Day":return"Great"===i?t.formatOptionsGreatDay:"Major"===i?t.formatOptionsMajorDay:t.formatOptionsMinorDay;case"Week":return"Great"===i?t.formatOptionsGreatWeek:"Major"===i?t.formatOptionsMajorWeek:t.formatOptionsMinorWeek;case"Month":return"Great"===i?t.formatOptionsGreatMonth:"Major"===i?t.formatOptionsMajorMonth:t.formatOptionsMinorMonth;case"Year":return"Great"===i?t.formatOptionsGreatYear:"Major"===i?t.formatOptionsMajorYear:t.formatOptionsMinorYear;case"Decade":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorDecade:t.formatOptionsMinorDecade;case"Century":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorCentury:void 0;case"Millennium":return}})(this,t,i);if("object"!=typeof s)return s;try{return new Intl.DateTimeFormat(this.locale,s)}catch(t){let i="";for(const t in s)i+=` ${t}: ${s[t]},`;Yt.console.error(`Invalid Intl.DateTimeFormat ( locale: ${this.locale}, formatOptions {${i}} )`)}})),e=new Map;e.set("great",s("Great")),e.set("major",s("Major")),e.set("minor",s("Minor"));const h=t=>String(t),r=(t,s)=>(r,n)=>{let o=r+i;const a=n.getInnerStart(),l=n.getInnerEnd(),u=a>l,c=ya(t,u?l:a,u?a:l);if(void 0===c)return h(o);if("great"===t){const t=Qt(r,"left"===s?a:l);let e;if(e=!1===t?r:!1===c.irregular?"left"===s&&!1===u||"right"===s&&!0===u?c.greatTicks.getReferenceKeyValue(i,this.utc)(r):c.greatTicks.getReferenceKeyValue(i,this.utc)(r+1*c.unit):"left"===s&&!1===u||"right"===s&&!0===u?c.getPrevKeyValue(i,this.utc)(r):c.getNextKeyValue(i,this.utc)(r),o=e+i,"right"===s&&!0===t)return""}const d=e.get(t);if(void 0===d)return h(o);const f=d[Aa.indexOf(c)];return void 0===f?"":"function"==typeof f?f(o,n,this.locale):f.format(o)},n=[],o=[{hh:"Great ticks (directive)",Qg:0,Qe:!0,Yr:pa("great",i,this.utc),Hr:void 0},{hh:"Major ticks",Qg:1,$e:this.majorTickStyle,je:r("major"),Yr:pa("major",i,this.utc),Eh:{_r:va("major")},Hr:void 0}];ia(this.greatTickStyle)||(n.push({hh:"Great ticks (left)",$e:this.greatTickStyle.setLabelAlignment(-1),je:r("great","left"),Yr:ma(i,this.utc,"left"),Ze:!0,Tr:!1}),n.push({hh:"Great ticks (right)",$e:this.greatTickStyle.setLabelAlignment(1),je:r("great","right"),Yr:ma(i,this.utc,"right"),Ze:!0,Tr:!1})),ia(this.minorTickStyle)||o.push({hh:"Minor ticks",Qg:2,$e:this.minorTickStyle,je:r("minor"),Yr:pa("minor",i,this.utc),Eh:{_r:va("minor"),zh:(t,i,s,e,h,r)=>{const n=ya("minor",h,r);return!n||"Week"!==n.label}},Hr:void 0});const a=this.cursorFormatter;return{Ke:n,qe:o,th:a?(t,s,e)=>a(i+t,s,e):(t,s,e)=>{const h=ga(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()),void 0,1,!0),r=h&&h.unit<=6e4,n=new Date(i+t),o=new Date(i+t);o.setHours(0,0,0,0);const a=r?ha.hhmmssmmm:ha.hhmmss;return`${new Intl.DateTimeFormat(e,{year:"numeric",month:"numeric",day:"numeric"}).format(n)} ${a(n.getTime()-o.getTime())}`},ih:1,sh:31536e9}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTickStyle(t){return this.setGreatTickStyle(t).setMajorTickStyle(t).setMinorTickStyle(t)}setGreatTickStyle(t){if("function"==typeof t){const i=this.get("greatTickStyle");return this.set("greatTickStyle",t(i))}return this.set("greatTickStyle",t)}getGreatTickStyle(){return this.get("greatTickStyle")}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setUTC(t){return this.set("utc",t)}getUTC(){return this.get("utc")}setLocale(t){return this.set("locale",t)}getLocale(){return this.get("locale")}setDateOrigin(t){return this.set("dateOrigin",t)}getDateOrigin(){return this.get("dateOrigin")}setFormatting(t,i,s){return this.withMutations((e=>e.set("formatOptionsGreatYear",t||this.formatOptionsGreatYear).set("formatOptionsGreatMonth",t||this.formatOptionsGreatMonth).set("formatOptionsGreatWeek",t||this.formatOptionsGreatWeek).set("formatOptionsGreatDay",t||this.formatOptionsGreatDay).set("formatOptionsGreatHour",t||this.formatOptionsGreatHour).set("formatOptionsGreatMinute",t||this.formatOptionsGreatMinute).set("formatOptionsMajorCentury",i||this.formatOptionsMajorCentury).set("formatOptionsMajorDecade",i||this.formatOptionsMajorDecade).set("formatOptionsMajorYear",i||this.formatOptionsMajorYear).set("formatOptionsMajorMonth",i||this.formatOptionsMajorMonth).set("formatOptionsMajorWeek",i||this.formatOptionsMajorWeek).set("formatOptionsMajorDay",i||this.formatOptionsMajorDay).set("formatOptionsMajorHour",i||this.formatOptionsMajorHour).set("formatOptionsMajorMinute",i||this.formatOptionsMajorMinute).set("formatOptionsMajorSecond",i||this.formatOptionsMajorSecond).set("formatOptionsMinorDecade",s||this.formatOptionsMinorDecade).set("formatOptionsMinorYear",s||this.formatOptionsMinorYear).set("formatOptionsMinorMonth",s||this.formatOptionsMinorMonth).set("formatOptionsMinorWeek",s||this.formatOptionsMinorWeek).set("formatOptionsMinorDay",s||this.formatOptionsMinorDay).set("formatOptionsMinorHour",s||this.formatOptionsMinorHour).set("formatOptionsMinorMinute",s||this.formatOptionsMinorMinute).set("formatOptionsMinorSecond",s||this.formatOptionsMinorSecond)))}setFormattingDecade(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorDecade",t)),i&&(s=s.set("formatOptionsMinorYear",i)),s)))}setFormattingYear(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorYear",t)),i&&(s=s.set("formatOptionsMinorMonth",i)),s)))}setFormattingMonth(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatYear",t)),i&&(e=e.set("formatOptionsMajorMonth",i)),s&&(e=e.set("formatOptionsMinorWeek",s)),e)))}setFormattingWeek(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMonth",t)),i&&(e=e.set("formatOptionsMajorWeek",i)),s&&(e=e.set("formatOptionsMinorDay",s)),e)))}setFormattingDay(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatWeek",t)),i&&(e=e.set("formatOptionsMajorDay",i)),s&&(e=e.set("formatOptionsMinorHour",s)),e)))}setFormattingHour(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatDay",t)),i&&(e=e.set("formatOptionsMajorHour",i)),s&&(e=e.set("formatOptionsMinorMinute",s)),e)))}setFormattingMinute(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatHour",t)),i&&(e=e.set("formatOptionsMajorMinute",i)),s&&(e=e.set("formatOptionsMinorSecond",s)),e)))}setFormattingSecond(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMinute",t)),i&&(e=e.set("formatOptionsMajorSecond",i)),s&&(e=e.set("formatOptionsMinorMillisecond",s)),e)))}setFormattingMilliSecond(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatSecond",t)),i&&(s=s.set("formatOptionsMajorMilliSecond",i)),s)))}}const xa=t=>!(!t||"object"!=typeof t||!("type"in t)||"date-time-ticks"!==t.type),Ma=(t,i)=>(s,e)=>{const h=e-s;if(i){const i=Math.log10(h/2);let r=10**Math.floor(i-t);const n=1/r;r=Math.round(r*n)/n;const o=Math.round(Math.floor(s/(10*r))*r*10*n)/n;return ph(o,e,r,void 0,n)}const r=Math.log10(h);let n=10**Math.round(r-t);const o=1/n;return n=Math.round(n*o)/o,mh(s,e,n,o)},_a=(t,i,s,e,h,r)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%5==0)):void 0,wa=(t,i,s,e,h,r)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%3==0)):2===i?t.filter(((t,i)=>i%4==0)):3===i?t.filter(((t,i)=>i%5==0)):void 0,Ca=Sh(void 0,2,5),ka=(t,i,s,e,h,r)=>0===i?[t[1],t[3],t[5]]:1===i?[t[0],t[3]]:2===i?[t[1]]:void 0,Ta=(t,i)=>{const s=Xs(t),e=$s(t);if(i)return(t,i)=>{const h=[],r=Math.floor(s(t)),n=Math.ceil(s(i));for(let t=r-1;t<=n+1;t+=1){const i=e**t;h.push(i)}return h};const h=10===t?9:4;return(t,i)=>{const r=Math.round(s(t)),n=Math.round(s(i)),o=[],a=e**r,l=(e**n-a)/h;for(let s=1;s<=h;s+=1){const e=a+l*s;e>t&&e<i&&o.push(e)}return o}},Fa=i({type:"numeric-ticks",cursorFormatter:void 0,extremeTickStyle:new Ko,majorTickStyle:new Ko,minorTickStyle:new Ko,formattingOffset:void 0,extremeFormattingFunction:void 0,majorFormattingFunction:void 0,minorFormattingFunction:void 0});class Ia extends Fa{Je(t){const i=this.formattingOffset,s=this.get("extremeFormattingFunction")||("logarithmic"===t.type?(i,s)=>Ks.LogarithmicNoExponents(i,s,void 0,t.base):Ks.Numeric),e=this.get("majorFormattingFunction")||("logarithmic"===t.type?(i,s)=>Ks.LogarithmicNoExponents(i,s,void 0,t.base):Ks.Numeric),h=this.get("minorFormattingFunction")||("logarithmic"===t.type?(i,s)=>Ks.LogarithmicNoExponents(i,s,void 0,t.base):Ks.Numeric),r=[],n=[];ia(this.extremeTickStyle)||r.push({hh:"Extreme ticks",$e:this.extremeTickStyle,je:void 0===i?s:(t,e,h)=>s(i+t,e,h),Yr:yh,Ze:!0,Tr:!0}),n.push({hh:"Major ticks",Qg:0,$e:this.majorTickStyle,je:void 0===i?e:(t,s,h)=>e(i+t,s,h),Yr:"logarithmic"===t.type?Ta(t.base,!0):Ma(0,!0),Eh:"logarithmic"===t.type?{_r:wa}:{_r:_a},Hr:void 0}),ia(this.minorTickStyle)||n.push({hh:"Minor ticks",Qg:1,$e:this.minorTickStyle,je:void 0===i?h:(t,s,e)=>h(i+t,s,e),Yr:"logarithmic"===t.type?Ta(t.base,!1):Ma(1,!1),Eh:"logarithmic"===t.type?{_r:ka}:{_r:Ca},Hr:50});const o=this.cursorFormatter?this.cursorFormatter:Ks.Numeric;return{Ke:r,qe:n,th:void 0===i?o:(t,s,e)=>o(i+t,s,e),ih:1e-9,sh:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setExtremeTickStyle(t){if("function"==typeof t){const i=this.get("extremeTickStyle");return this.set("extremeTickStyle",t(i))}return this.set("extremeTickStyle",t)}getExtremeTickStyle(){return this.get("extremeTickStyle")}setFormattingOffset(t){return this.set("formattingOffset",t)}getFormattingOffset(){return this.get("formattingOffset")}setTickStyle(t){const i=this.setMajorTickStyle(t).setMinorTickStyle(t);return i.extremeTickStyle!==ta?i.setExtremeTickStyle(t):i}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setFormattingFunction(t){return this.withMutations((i=>i.set("extremeFormattingFunction",t).set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getExtremeFormattingFunction(){return this.get("extremeFormattingFunction")}setExtremeFormattingFunction(t){return this.set("extremeFormattingFunction",t)}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const Pa=t=>!(!t||"object"!=typeof t||!("type"in t)||"numeric-ticks"!==t.type),Da=(t,i,s="image/png",e)=>{i+=`.${s.slice(s.indexOf("image/")+6)}`;const h=t.captureFrame(s,e);if("image/png"!==s&&h.type.includes("image/png"))throw new Error(`saveToFile | type not supported by browser: ${s}\nCheck support table for HTMLCanvasElement.toDataURL`);if(Yt.navigator.msSaveBlob)Yt.navigator.msSaveBlob(h,i);else{const t=Yt.document.createElement("a");Yt.document.body.appendChild(t);const s=Yt.URL.createObjectURL(h);t.href=s,t.download=i,t.click(),setTimeout((()=>{Yt.URL.revokeObjectURL(s),Yt.document.body.removeChild(t)}),0)}},Ba=(t,i,s,e,h,r)=>{const n=t.nc(i,s,e,h,r,!0);return n.setDraggingMode(Gt.draggable),n},La=(t,i)=>{if("relative"===t)return i;if(t instanceof se)return t;const s=t.x instanceof Th?t.x.ft:t.x.x,e=t.y instanceof Th?t.y.ft:t.y.y;return re(s,e)},Ra=(t,i,s,e,h)=>{if(s){const r=t,n=i,o=Qo(n)?n:ae(n)?e:void 0;if(o&&ne(s)){const t=pt(r,o,h.ft);return h.Uo({engineX:t.x,engineY:t.y})}if(o&&ae(s))return pt(r,o,e);if(o&&Qo(s))return pt(r,o,s)}else{const s=t;if(ae(i)){const t=h.Go(s);return pt({x:t.engineX,y:t.engineY},h.ft,e)}if(Qo(i)){const t=i,e=h.Go(s);return pt({x:e.engineX,y:e.engineY},h.ft,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")};class Ea{constructor(t,i,e,h,r,o,a,l){this.coordsRelative="relative",this.coordsClient="client",this.oy=[],this.ly=[],this.L=new s,this.uy=void 0,this.Ay=void 0,this.gy=void 0,this.Xt=A(0,0,0,0),this.yy=!1,this.$i=!1,this.my=()=>{this.py=!0,this.vy.xs()},this.Sy=t=>i=>{const s=this.oy.indexOf(i);-1!==s&&this.oy.splice(s,1),this.us.xs(),t.W()},this.by=t=>{const i=this.ly.indexOf(t);-1!==i&&this.ly.splice(i,1),this.us.xs()},this.py=!0,this.onInViewChange=t=>this.L.on("inViewChange",t),this.offInViewChange=t=>this.L.off(t,"inViewChange"),this.wA=t,this.xy=e,this.vy=h,this.removePanel=r,this.qi=i.us.qi;const u=i.us.ni();if(this.uiScale=e.d2({scaleXYConstructor:ee}).zi(0,100).Vi(0,100).tt(u),this.Mg=e.d2({scaleXYConstructor:ee}).zi(0,this.uiScale.x.getCellSize()).Vi(0,this.uiScale.y.getCellSize()).tt(u),this.engine=i.us.My,this.us=i.us._y,this.es=this.us.es.hs(this,{}),this.wy=()=>i.Cy("unidentified ui"),this.ky=i.Ty(),this.Fy=this.vy.Re(this.uiScale).ze(n(0,0)).tt(n(100,100)).Le(o).Be(a).setMouseMoveEventHandler(((t,i)=>this.L.emit("mouseMovePanelBackground",this,i))).setMouseEnterEventHandler(((t,i)=>this.L.emit("mouseEnterPanelBackground",this,i))).setMouseLeaveEventHandler(((t,i)=>this.L.emit("mouseLeavePanelBackground",this,i))).setMouseDownEventHandler(((t,i)=>this.L.emit("mouseDownPanelBackground",this,i))).setMouseUpEventHandler(((t,i)=>this.L.emit("mouseUpPanelBackground",this,i))).setMouseClickEventHandler(((t,i)=>this.L.emit("mouseClickPanelBackground",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.L.emit("mouseDoubleClickPanelBackground",this,i))).setMouseWheelEventHandler(((t,i)=>this.L.emit("mouseWheelPanelBackground",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.L.emit("mouseDragStartPanelBackground",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.L.emit("mouseDragPanelBackground",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.L.emit("mouseDragStopPanelBackground",this,i,s,e))).setTouchStartEventHandler(((t,i)=>this.L.emit("touchStartPanelBackground",this,i))).setTouchMoveEventHandler(((t,i)=>this.L.emit("touchMovePanelBackground",this,i))).setTouchEndEventHandler(((t,i)=>this.L.emit("touchEndPanelBackground",this,i))),l){const t=l.on(this.my);this.Iy=()=>l.off(t)}else{const t=i.us.Ro(this.my);this.Py=i.us.Eo.bind(i.us,t)}const c=i.us.Vo((t=>{this.yy=t,this.L.emit("inViewChange",this,t)}));this.Dy=i.us.Oo.bind(i.us,c),this.uy=r}getTheme(){return this.qi}getSizePixels(){return this.Mg.getInnerIntervalPixels()}setBackgroundFillStyle(t){return this.Fy.Le(t),this.vy.xs(),this}getBackgroundFillStyle(){return this.Fy.Qh()}setBackgroundStrokeStyle(t){return this.Fy.Be(t),this.vy.xs(),this}getBackgroundStrokeStyle(){return this.Fy.vo()}translateCoordinate(t,i,s){return Ra(t,i,s,this.Mg,this.us)}By(t){return this.oy.push(t),this.us.xs(),t}Ly(t){return this.ly.push(t),this.us.xs(),t}addUIElement(t=xo,i=this.uiScale){i=La(i,this.Mg);const s=this.wy();return this.By(Ba(t,s,this.uiScale,i,this.Sy(s),this.qi))}addLegendBox(t=Lo,i=this.uiScale){i=La(i,this.Mg);const s=this.Ly(Ba(t,this.ky,this.uiScale,i,this.by,this.qi));return s.setDraggingMode(Gt.notDraggable),void 0!==i&&i!==this.uiScale||(void 0===t||"vertical"===t.getAlignment()?s.setOrigin(qe.RightCenter).setPosition({x:100,y:50}):s.setOrigin(qe.CenterBottom).setPosition(this.uiScale.gi({x:50,y:0},{x:0,y:3}))),s}getLegendBoxes(){return this.ly}dispose(){return this.$i||(this.$i=!0,this.Py&&this.Py(),this.Iy&&this.Iy(),za(this.uiScale),za(this.Mg),this.Dy&&this.Dy(),this.Ay&&this.Ay(),this.vy.W(),this.ky.W(),this.oy.slice().forEach((t=>{t.dispose()})),this.ly.slice().forEach((t=>{t.dispose()})),this.us.xs(),this.uy&&this.uy(this),this.L.emit("dispose",this)),this}isDisposed(){return this.$i}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}saveToFile(t,i,s){return Da(this.engine,t,i,s),this}Nr(t){this.Xt=t,this.my()}Z(){return this.Mg.Z(),this.uiScale.Z(),this}J(){return this.Mg.J(),this.uiScale.J(),this}Ee(t){if(this.py){const t=this.vy.us.ni(),i=t.x,s=t.y;this.uiScale.tt(i,s),this.Mg.tt(i,s);const e=[this.Xt.left,this.Xt.right],h=[this.Xt.bottom,this.Xt.top];this.uiScale.Ri(e),this.uiScale.Ei(h);const r=this.uiScale.getInnerIntervalPixels();this.Mg.zi(0,r.x).Ri(e).Vi(0,r.y).Ei(h),this.L.emit("resize",this,r.x,r.y,i,s)}this.py=!1}Ry(){for(let t=0;t<this.oy.length;t+=1)this.oy[t].Vs().Ee();for(let t=0;t<this.ly.length;t+=1)this.ly[t].Vs().Ee();this.gy&&this.gy()}Ey(t,i){if(t){const s=t(i);this.onResize(s.Vs.bind(s)),this.Ay=s.W.bind(s),this.gy=s.Vs.bind(s)}}onBackgroundMouseEnter(t){return this.L.on("mouseEnterPanelBackground",t)}offBackgroundMouseEnter(t){return this.L.off(t,"mouseEnterPanelBackground")}onBackgroundMouseMove(t){return this.L.on("mouseMovePanelBackground",t)}offBackgroundMouseMove(t){return this.L.off(t,"mouseMovePanelBackground")}onBackgroundMouseLeave(t){return this.L.on("mouseLeavePanelBackground",t)}offBackgroundMouseLeave(t){return this.L.off(t,"mouseLeavePanelBackground")}onBackgroundMouseDown(t){return this.L.on("mouseDownPanelBackground",t)}offBackgroundMouseDown(t){return this.L.off(t,"mouseDownPanelBackground")}onBackgroundMouseUp(t){return this.L.on("mouseUpPanelBackground",t)}offBackgroundMouseUp(t){return this.L.off(t,"mouseUpPanelBackground")}onBackgroundMouseClick(t){return this.L.on("mouseClickPanelBackground",t)}offBackgroundMouseClick(t){return this.L.off(t,"mouseClickPanelBackground")}onBackgroundMouseDoubleClick(t){return this.L.on("mouseDoubleClickPanelBackground",t)}offBackgroundMouseDoubleClick(t){return this.L.off(t,"mouseDoubleClickPanelBackground")}onBackgroundMouseDragStart(t){return this.L.on("mouseDragStartPanelBackground",t)}offBackgroundMouseDragStart(t){return this.L.off(t,"mouseDragStartPanelBackground")}onBackgroundMouseDrag(t){return this.L.on("mouseDragPanelBackground",t)}offBackgroundMouseDrag(t){return this.L.off(t,"mouseDragPanelBackground")}onBackgroundMouseDragStop(t){return this.L.on("mouseDragStopPanelBackground",t)}offBackgroundMouseDragStop(t){return this.L.off(t,"mouseDragStopPanelBackground")}onBackgroundMouseWheel(t){return this.L.on("mouseWheelPanelBackground",t)}offBackgroundMouseWheel(t){return this.L.off(t,"mouseWheelPanelBackground")}onBackgroundTouchStart(t){return this.L.on("touchStartPanelBackground",t)}offBackgroundMouseTouchStart(t){return this.L.off(t,"touchStartPanelBackground")}onBackgroundTouchMove(t){return this.L.on("touchMovePanelBackground",t)}offBackgroundTouchMove(t){return this.L.off(t,"touchMovePanelBackground")}onBackgroundTouchEnd(t){return this.L.on("touchEndPanelBackground",t)}offBackgroundTouchEnd(t){return this.L.off(t,"touchEndPanelBackground")}onResize(t){return this.L.on("resize",t)}offResize(t){return this.L.off(t,"resize")}getIsInView(){return this.yy}}const za=t=>{t.ti&&t.ti()};class Va extends Ea{constructor(t,i,s,e,h,r){super(t,i,s,i.zy("uipanel bg",0),e,i.us.qi.uiPanelBackgroundFillStyle,i.us.qi.uiPanelBackgroundStrokeStyle,r),this.Ey(h,this.Mg)}setMinimumSize(t){return this.Bd=t,this.us.xs(),this}getMinimumSize(){return this.Bd}Ee(t){super.Ee(t),super.Ry()}}const Oa=A(10,10,10,10);class Na extends Ea{constructor(t,i,s,e,h,r,o,a,l,u){super(t,i,s,e,h,r,o,u),this.Vy={},this.Fa=Oa,this.gh=!0,this.Oy=i.Ny("chart internal ui",0),this.wh=this.Oy.Ur(this.uiScale).vr("Chart").ze(n(50,100)).ja(n(0,1)).tr(a).Le(l).setMouseInteractions(!1),this.Gy=this.es.Dg([this.wh]).bs(this.qi.effectsText)}setAnimationsEnabled(t){return this.gh=t,this}getAnimationsEnabled(){return this.gh}setTitle(t){return this.wh.vr(t),this.us.xs(),this}getTitle(){return this.wh.kr()}getTitleSize(){return this.wh.Vs().nd()}setTitleFillStyle(t){return this.wh.Le(t),this.my(),this}getTitleFillStyle(){return this.wh.Qh()}setTitleFont(t){return this.wh.tr(t),this.my(),this}getTitleFont(){return this.wh.qh()}setTitleRotation(t){return this.wh.ir(t),this.us.xs(),this}getTitleRotation(){return this.wh.sr()}setTitleEffect(t){return this.Gy.bs(t),this.us.xs(),this}getTitleEffect(){return this.Gy.Ms()}setTitleMargin(t){var i,s;return this.Vy="object"==typeof t?this.Vy?(i=this.Vy,{left:void 0!==(s=t).left?s.left:i.left,top:void 0!==s.top?s.top:i.top,right:void 0!==s.right?s.right:i.right,bottom:void 0!==s.bottom?s.bottom:i.bottom}):t:{left:t,top:t,right:t,bottom:t},this.my(),this}getTitleMargin(){return this.Vy}setPadding(t){return this.Fa="object"==typeof t?y(this.Fa,t):{left:t,top:t,right:t,bottom:t},this.my(),this}getPadding(){return this.Fa}Uy(t){const i=t.Wy(),s=null==i?void 0:i.height,e=null==i?void 0:i.width;if(void 0!==s&&void 0!==e)return{x:s/2,y:e/2}}dispose(){return super.dispose(),this.Oy.W(),this}}const Ga={Yy:(t,i)=>t.Qh()!==O&&0!==t.kr().length&&t.getVisible()?t.Vs().nd().y:0,Hy(t,i){t.ze(n(50,100)).Nr({top:void 0!==i.top?i.top:10,right:i.right||0,left:i.left||0,bottom:i.bottom||0})}},Ua=t=>"show-all-interpolated"===t||"show-nearest-interpolated"===t||"show-pointed-interpolated"===t,Wa=(t,i)=>{const s="series"in t?t.series:void 0;if(!s||!("getCursorFormattingOverride"in s))return i;const e=s.getCursorFormattingOverride();return e?e(t,i):i},Ya=(t,i,e,h,r,n,o)=>{let a,l,u=r,c=n,d=null,f=!0;const A=new s;if(h){f=!1;const i=()=>{f=!0,t.getCursorMode()&&(l&&g?y.Ee(...g):t.us.xs())},s=()=>{t.getCursorMode()&&(l&&g?y.Ee(...g):t.us.xs())},e=()=>{f=!1,t.getCursorMode()&&(l&&g?y.Ee(...g):t.us.xs())},r=()=>{f=!0,t.getCursorMode()&&(l&&g?y.Ee(...g):t.us.xs())},n=()=>{t.getCursorMode()&&(l&&g?y.Ee(...g):t.us.xs())},o=()=>{f=!1,t.getCursorMode()&&(l&&g?y.Ee(...g):t.us.xs())};h.onSeriesBackgroundMouseEnter(i),h.onSeriesBackgroundMouseMove(s),h.onSeriesBackgroundMouseLeave(e),h.onSeriesBackgroundTouchStart(r),h.onSeriesBackgroundTouchMove(n),h.onSeriesBackgroundTouchEnd(o),h.Xy(((i,s)=>{s.onMouseEnter(((i,e,h)=>{s.$y()&&(l||t.us.xs(),a=h||void 0),t.getCursorMode()&&(l&&g?y.Ee(...g):t.us.xs())})),s.onMouseMove(((i,e,h)=>{s.$y()&&(l||t.us.xs(),a=h||void 0),t.getCursorMode()&&(l&&g?y.Ee(...g):t.us.xs())})),s.onMouseLeave((()=>{s.$y()&&(l||t.us.xs(),a=void 0),t.getCursorMode()&&(l&&g?y.Ee(...g):t.us.xs())}))}))}let g;const y={setCursor:i=>(i(e),t),getCursor:()=>e,setCursorMode:i=>(u=i,t.us.xs(),t),getCursorMode:()=>u,setCustomCursor:t=>{l=t},onCursorTargetChanged:t=>A.on("cursorTargetChanged",t),offCursorTargetChanged:t=>{A.off(t)},setCursorFormatting:i=>(c=i,t.us.xs(),t),getCursorFormatting:()=>c,W:()=>{e.dispose(),i.W()},Ee:(i,s,h,r)=>{g=[i,s,h,r];const n=t.us.jn();let y=[];if((null==r?void 0:r.explicitTarget)&&u)y=Array.isArray(r.explicitTarget)?r.explicitTarget:[r.explicitTarget];else if(!i&&u){const t=s.find((t=>t.getIsUnderMouse())),i=n&&t&&(!t.getCursorEnabled||t.getCursorEnabled())&&t.vs?t.vs(n):void 0;if(a=i||a,a&&"show-all"!==u&&"show-all-interpolated"!==u)y=[a];else if("show-all"===u||"show-all-interpolated"===u||"show-nearest"===u||"show-nearest-interpolated"===u){if((f||void 0!==t)&&n&&h){for(const t of s){if(!t.getVisible()||t.getCursorEnabled&&!t.getCursorEnabled())continue;if(t.getCursorEnabled&&!t.getCursorEnabled()||!t.getVisible())continue;const i=h(t,n,u);i&&y.push(i)}"show-nearest"!==u&&"show-nearest-interpolated"!==u||(y.sort(((t,i)=>o(t,n)-o(i,n))),y.length=1)}}else if(("show-pointed"===u||"show-pointed-interpolated"===u)&&n&&t&&(!t.getCursorEnabled||t.getCursorEnabled())&&h){const i=h(t,n,u);i&&(y=[i])}}y=Gi(y.map((t=>ts(t))));const m=(null==r?void 0:r.overrideCursorPositions)||((t,i)=>i),p=y[0],v=y.length>0?y:void 0;if(p!==d&&n&&(l&&l(p,v,n),A.emit("cursorTargetChanged",p,v,n),d=p),l)e.getVisible()&&(e.setVisible(!1),e.Vs().Ee());else{if(y&&y.length>0){const i=c(t,y[0],y);e.setVisible(!0).setPosition(...m(y,y.map((t=>t.cursorPosition)))).setResultTable((t=>t.setContent(i)))}else e.setVisible(!1);(null==r?void 0:r.afterCursorPointedAt)&&r.afterCursorPointedAt(y),e.Vs().Ee()}},solveNearest:(i,s,e,h)=>{const r=i||t.us.jn();if(!r)return[];let n=[];if("show-all"===s||"show-all-interpolated"===s||"show-nearest"===s||"show-nearest-interpolated"===s){for(const t of e){if(!t.getCursorEnabled()||!t.getVisible())continue;const i=h(t,r,s);i&&n.push(i)}"show-nearest"!==s&&"show-nearest-interpolated"!==s||(n.sort(((t,i)=>o(t,r)-o(i,r))),n.length=1)}return n=Gi(n.map((t=>ts(t)))),n},jy:e};return y};class Ha{constructor(t,i){this.Zy=t,this.Qy=i}alter(t){this.Jy=void 0!==this.Jy?this.Jy:this.Qy(),this.Ky=t,this.Zy(t)}resetValue(){void 0!==this.Ky&&(void 0!==this.Jy&&this.isAltered()&&this.Zy(this.Jy),this.Jy=void 0,this.Ky=void 0)}getNormalValue(){return void 0!==this.Jy?this.Jy:this.Qy()}isAltered(){return void 0!==this.Ky&&this.Qy()===this.Ky}}class Xa{constructor(t){this.qy=[],this.jy=t,this.tm=t.tm}update(){return this.tm.getVisible()?!(this.im()&&(!this.sm()||(this.resetTable(),this.tm.Vs(),this.im()))&&(this.hm(),this.tm.Vs(),this.im()&&(this.resetTable(),this.tm.Vs(),1))):(this.sm()&&this.resetTable(),!0)}sm(){for(let t=0;t<this.qy.length;t+=1)if(this.qy[t].isAltered())return!0;return!1}resetTable(){for(let t=0;t<this.qy.length;t+=1)this.qy[t].resetValue();return this}im(){const t=this.jy.im();return t.x||t.y}rm(){return this.jy.im().x}nm(){return this.jy.im().y}om(t){return this.qy.push(t),t}}class $a extends Xa{constructor(){super(...arguments),this.Ta=this.om(new Ha((t=>this.tm.setOrigin(t)),(()=>this.tm.getOrigin())))}hm(){const t=this.Ta.getNormalValue(),i=n(this.rm()?-t.x:t.x,this.nm()?-t.y:t.y);this.Ta.alter(i)}}class ja extends Xa{constructor(t,i,s){super(t),this.am=this.om(new Ha((t=>this.tm.setTextFont((i=>i.setSize(t)))),(()=>this.tm.getTextFont().getSize()))),this.lm=i,this.um=s}hm(){const t=this.am.getNormalValue(),i=this.lm;if(i<t)for(let s=1;s<=this.um;s+=1){const e=t-(t-i)*(s/this.um);if(this.am.alter(e),this.tm.Vs(),!this.im())return}}}const Za={Flip:t=>new $a(t),FontSize:(t=5,i=5)=>s=>new ja(s,t,i)},Qa={None:An,Rectangle:qn,Circle:to,Diamond:io,Pointer:so};class Ja extends co{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.Qu=this.qi.cursorResultTableTextFont,this.Wd=0,this.dm=this.qi.cursorResultTableTextFillStyle,this.na=100}setContent(t){let i;void 0===t?i=[]:Array.isArray(t)?(i=[],t.forEach((t=>{i.push(Array.isArray(t)?t:[t])}))):i=[[t]];for(let t=0;t<i.length;t+=1){const s=i[t];let e=!1;for(let t=0;t<s.length;t+=1){const i=s[t],h="object"==typeof i&&"text"in i?i.text:"string"==typeof i?i:void 0,r="object"==typeof i&&"icon"in i?i.icon:Vn(i)?i:void 0,n=i instanceof ye&&i;if(!(h&&h.length>0||r||n)){e=!0;break}}e||(s.unshift(""),s.push(""))}const s=i.length;let e=this.getMembers().length;for(let t=0;t<Math.max(s,e);t+=1){const r=this.getRow(t,!0);if(t>=s)this.getMembers()[t].dispose(),t-=1,e-=1;else{const s=i[t].length;let e=r.getMembers().length;for(let n=0;n<Math.max(s,e);n+=1){const o=i[t][n],a="object"==typeof o&&"font"in o?o.font:void 0,l="object"==typeof o&&"fillStyle"in o?o.fillStyle:void 0,u="object"==typeof o&&"text"in o?o.text:"string"==typeof o?o:void 0,c="object"==typeof o&&"icon"in o?o.icon:Vn(o)?o:void 0,d=o instanceof ye&&o,f=r.getMembers();if(n>=s)r.getMembers()[n].dispose(),n-=1,e-=1;else if(void 0!==u&&u.length>0||c||d){const t=a?this.Qu.withMutations((t=>{for(const i of Object.keys(a)){const s=a[i];void 0!==s&&t.set(i,s)}return t})):this.Qu,i=l||this.dm,s=f[n];if(u){let e;s&&s instanceof Jn?e=s:(s&&s.dispose(),e=r.addElement(Kn,n)),e.setText(u).setFont(t).setFillStyle(i).setTextRotation(this.Wd)}else if(c){let e;s&&s instanceof eo?e=s:(s&&s.dispose(),e=r.addElement(ho,n)),e.setFillStyle(i).setShape(c).setSize({y:t.size,x:t.size}),e.setMargin(5)}else if(d){let e;s&&"setTextFillStyleHidden"in(h=s)&&"setText"in h?e=s:(s&&s.dispose(),e=r.addElement(Co.setBackground(Qa.None),n).setOn(!0));const o=d.Ds();void 0!==o&&e.setButtonShape(o),e.setText(d.getName()).setTextFont(t).setTextFillStyle(i).setTextRotation(this.Wd),d.styleLegendEntry(e)}}else{const t=f[n];t&&t instanceof ro||(t&&t.dispose(),r.addGap(void 0,n))}}}}var h;return this.Ls.xs(),this}setTextFillStyle(t){this.dm="function"==typeof t?t(this.dm):t;for(let t=0;t<this.getMemberCount();t+=1){const i=this.getRow(t);for(let t=0;t<i.getMembers().length;t+=1){const s=i.getMembers()[t];s instanceof Jn&&s.setFillStyle(this.dm)}}return this.Ls.xs(),this}getTextFillStyle(){return this.dm}setTextFont(t){return Eh(t)?this.Qu=t:this.Qu=t(this.Qu),this.Ls.xs(),this}getTextFont(){return this.Qu}setTextRotation(t){return this.Wd=t,this.Ls.xs(),this}getTextRotation(){return this.Wd}fm(){for(let t=0;t<this.Id.length;t+=1)for(let i=0;i<this.Id[t].getMembers().length;i+=1)this.Id[t].getMembers()[i].dispose()}Vs(){for(let t=0;t<this.Id.length;t+=1)this.Id[t].setMinimumSize(void 0);super.Vs();for(let t=0;t<this.Id.length;t+=1)this.Id[t].setMinimumSize(this.size.x);return super.Vs(),this}}class Ka{constructor(t,i,e,h,r,n){this.Am=[],this.gm=!0,this.ym=!0,this.yy=!1,this.ji=!0,this.$i=!1,this.pm=[],this.L=new s,this.Ls=t,this.renderingScale=i,this.scale=e,this.vm=h,this.Sm=r,this.qi=n,this.tm=new Ja(this.Ls,this.renderingScale,this.scale,this.Sm,Zt,n).setMouseInteractions(!1).setBackground((t=>t.setFillStyle(n.cursorResultTableFillStyle).setStrokeStyle(n.cursorResultTableStrokeStyle))).setTextFillStyle(n.cursorResultTableTextFillStyle).setTextFont(n.cursorResultTableTextFont),this.bm=Za.Flip(this)}isDisposed(){return this.$i}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t)}setPointMarkerVisible(t){return this.gm=t,this.Am.forEach((i=>i.pointMarker.setVisible(i.targetVisible&&t))),this.Ls.xs(),this}getPointMarkerVisible(){return this.gm}setPointMarker(t){return this.Am.forEach((i=>t(i.pointMarker))),this.pm.push(t),this.Ls.xs(),this}setResultTableVisible(t){return this.ym=t,this.Ls.xs(),this}getResultTableVisible(){return this.ym}setResultTable(t){return t(this.tm),this.Ls.xs(),this}setAutoFitStrategy(t){return this.bm&&this.bm.resetTable(),this.bm=t?t(this):void 0,this.Ls.xs(),this}getAutoFitStrategy(){return void 0!==this.bm}setVisible(t){return this.ji=t,this.Ls.xs(),this}getVisible(){return this.ji}dispose(){return this.Am.forEach((t=>t.pointMarker.dispose())),this.tm.dispose(),this.pm.length=0,this.vm(this),this.L.emit("dispose"),this}im(){const t=this.tm,i=this.Ls.us.ft,s=pt(t.getPosition(n(-1,-1),Ot.PaddedBackground),t.scale,i),e=pt(t.getPosition(n(1,1),Ot.PaddedBackground),t.scale,i);return{x:s.x<i.x.getInnerStart()||e.x>i.x.getInnerEnd(),y:s.y<i.y.getInnerStart()||e.y>i.y.getInnerEnd()}}Ee(){return this.bm&&this.bm.update(),this.tm.setVisible(this.yy&&this.ji&&this.ym),this.Am.forEach((t=>t.pointMarker.setVisible(t.targetVisible&&this.yy&&this.ji&&this.gm))),this.Am.forEach((t=>t.pointMarker.Ee())),this.tm.Ee(),this}Vs(){return this.Am.forEach((t=>t.pointMarker.Vs())),this.tm.Vs(),this}xm(t,i){const s=i===this.scale?t:pt(t,i,this.scale);this.tm.setPosition(s)}}const qa=t=>t.setResultTable((t=>t.setEffect(!0).setOrigin(n(-1,-1)).setMargin(5)));class tl extends Ka{setPosition(...t){const i=this.renderingScale,s=La(t[0].resultTableScale,i),e=s===this.scale?t[0].resultTable:pt(t[0].resultTable,s,this.scale);return this.yy=!1,this.Am.forEach((t=>{t.targetVisible=!1})),t.forEach(((t,s)=>{const e=La(t.pointMarkerScale,i),h=e===this.scale?t.pointMarker:pt(t.pointMarker,e,this.scale);let r=this.Am[s];if(!r){const t=new eo(this.Ls,this.renderingScale,this.scale,Zt,this.qi).setMouseInteractions(!1).setFillStyle(this.qi.cursorPointMarkerFillStyle).setSize(this.qi.cursorPointMarkerSize).setShape(this.qi.cursorPointMarkerShape);r={pointMarker:t,targetVisible:!0},this.Am.push(r),this.pm.forEach((i=>i(t)))}r.pointMarker.setPosition(h),r.targetVisible=((t,i,s=i)=>{const e=i!==s?pt(t,i,s):t;return e.x>=s.x.getInnerStart()&&e.x<=s.x.getInnerEnd()&&e.y>=s.y.getInnerStart()&&e.y<=s.y.getInnerEnd()})(t.pointMarker,e),r.targetVisible&&(this.yy=!0)})),this.tm.setPosition(e),this.Ls.xs(),this}}class il{constructor(t,i=[]){this.Mm=[],this._m=(t,i)=>(this.Mm.forEach((s=>s(t,i))),t),this.addStyler=t=>new il(this.Sm,this.Mm.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new il(t,this.Mm.map((t=>t))),this.wm=(t,i,s,e,h)=>this._m(new tl(t,i,s,e,this.Sm,h),h),this.Sm=t,this.Mm=i}}const sl=new il(qn,[qa]),el=new il(so,[qa,t=>t.setPointMarkerVisible(!1).setResultTable((t=>t.setOrigin(n(0,-1)).setMargin(0).setBackground((t=>{t instanceof so&&t.setDirection(Ut.Down).setPointerLength(10).setPointerAngle(60)}))))]),hl=sl,rl=sl,nl=sl,ol=el,al=new il(qn,[qa,t=>t.setPointMarkerVisible(!1).setResultTable((t=>t.setOrigin(qe.LeftBottom)))]),ll=sl;var ul;!function(t){t[t.LabelsInsideSlices=0]="LabelsInsideSlices",t[t.LabelsOnSides=1]="LabelsOnSides"}(ul||(ul={}));const cl={SortByName:(t,i)=>t.getName().localeCompare(i.getName(),void 0,{numeric:!0}),SortByValueAscending:(t,i)=>t.getAnimatedValue()-i.getAnimatedValue(),SortByValueDescending:(t,i)=>i.getAnimatedValue()-t.getAnimatedValue(),None:()=>0},dl={Name:t=>`${t.getName()}`,NamePlusValue:t=>`${t.getName()}: ${Math.round(t.getAnimatedValue())}`,NamePlusRelativeValue:(t,i)=>`${t.getName()}: ${(100*i).toFixed(2)}%`};class fl extends ye{constructor(){super(...arguments),this.ws="Slice",this.S=0}}const Al=(t,i)=>{mi(i),t.setExploded(!t.getExploded())};class gl extends fl{}class yl extends gl{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.Cm=!1,this.km=O,this.Tm=O,this.Fm=this.S,this.Im=this.Cm?1:0,this.Pm=this.getVisible(),this.Dm=K((()=>this.chart.us.xs())),this.Bm=K((()=>this.chart.us.xs())),this.Lm=()=>{this.Rm=void 0},this.Em=()=>{this.zm=void 0},this.index=t,this.chart=e,this.scale=h,this.Ki=r,this.Vm=i.ld(h).cs(this.getHighlight()),this.fs(this.Vm),this.hh=s.Ur(h).cs(this.getHighlight()),this.fs(this.hh,{isText:!0}),this.onMouseClick(Al),this.onTouchEnd(Al)}setValue(t){return this.chart.getAnimationsEnabled()?this.Pm&&this.Om(this.Fm,t):this.Fm=t,this.S=t,this.chart.us.xs(),this}getValue(){return this.S}setExploded(t){if(t&&!1===this.chart.getMultipleSliceExplosion()){const t=this.chart.getSlices();for(let i=0;i<t.length;i+=1)t[i]!==this&&t[i].getExploded()&&t[i].setExploded(!1)}return this.chart.getAnimationsEnabled()?(this.zm&&this.zm.finish(),this.zm=this.Bm(300,Q.ease)([[this.Im,t?1:0]],(([t])=>{this.Im=t,this.chart.us.xs()})),this.zm.onEveryAnimationEnd(this.Em),this.Cm=!this.Cm):!1!==this.chart.getMultipleSliceExplosion()||t?(this.Im=this.Cm?0:1,this.Cm=!this.Cm):(this.Im=0,this.Cm=!this.Cm),this.chart.us.xs(),this}getExploded(){return this.Cm}setVisible(t){return this.Pm=t,!1===t?this.chart.getAnimationsEnabled()&&this.Fm>0?(this.Rm&&(this.Rm.finish(!1),this.Rm=void 0),this.Om(this.Fm,0,(()=>super.setVisible(!1)))):(this.Fm=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.Rm&&(this.Rm.finish(!1),this.Rm=void 0),super.setVisible(!0),this.Om(this.Fm,this.S)):(this.Fm=this.S,super.setVisible(!0)),this}Om(t,i,s){this.Rm=this.Dm(300,Q.ease)([[t,i]],(([t])=>{this.Fm=t,this.chart.us.xs()})),this.Rm.onEveryAnimationEnd(this.Lm),s&&this.Rm.onAnimationEnd(s)}setStyle(t,i,s,e){this.km=t,this.Tm=s,this.Vm.Le(this.km).Be(i),this.hh.Le(this.Tm).tr(e);for(let t=0;t<this.Qi.length;t+=1)this.styleLegendEntry(this.Qi[t])}getAnimatedValue(){return this.Fm}getAnimatedExplosion(){return this.Im}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.km,stroke:this.Vm.vo()})}}const ml=(t,i,s)=>Is(i,Fs(Ns(.5*(t.ou()+t.ki())*Math.PI/180),s)),pl=(t,i,s,e,h,r)=>{const n=t.length;let o=90;for(let a=0;a<n;a+=1){const l=t[a],u=o-360*i[a],c=l.getAnimatedExplosion();if(0===c||1===n)l.Vm.ze(s);else{const t=Is(s,Fs(Ns(.5*(o+u)*Math.PI/180),r*c));l.Vm.ze(t)}l.Vm.fu(o).He(u).gu(e).yu(e).mu(h),o=u}},vl=t=>{const i=t.getSlices();for(let t=0;t<i.length;t+=1)i[t].setExploded(!1)};class Sl extends Na{constructor(t,i,s,e,h,r,n){super(t,i,s,i.zy("pieChart bg",0),e,i.us.qi.pieChartBackgroundFillStyle,i.us.qi.pieChartBackgroundStrokeStyle,i.us.qi.pieChartTitleFont,i.us.qi.pieChartTitleFillStyle,r),this.Nm=[],this.Gm=cl.SortByName,this.tu=0,this.Um=this.qi.pieChartSliceFillStylePalette,this.Wm=this.qi.pieChartSliceStrokeStyle,this.Ym=!0,this.Hm=this.qi.pieChartSliceLabelFont,this.Xm=this.qi.pieChartSliceLabelFillStyle,this.$m=0,this.jm=!1,this.Zm=20,this.Qm=!0,this.Jm=!0,this.Km=t=>{const i=this.Nm.indexOf(t);i>=0&&(this.Nm.splice(i,1),this.qm())},this.us.Qn(Yo.vf),this.tp=i.ip("pieChart bottom",0),this.sp=i.ip("pieChart top",1),this.wh.vr("Pie Chart"),this.Ey(h,this.Mg),this.onBackgroundMouseDoubleClick(vl);const o=ve(new Se(vl));this.onBackgroundTouchStart(o.onTouchStart),this.onBackgroundTouchMove(o.onTouchMove),this.onBackgroundTouchEnd(o.onTouchEnd);const a=i.ep(),l=qt(n?n.cursorBuilder:void 0,rl);this.hp=Ya(this,a,l.wm(a,this.uiScale,this.uiScale,Zt,this.qi),void 0,"show-pointed",bl,(()=>0)),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled))}setCursor(t){return this.hp.setCursor(t),this}getCursor(){return this.hp.getCursor()}setCursorMode(t){return this.hp.setCursorMode(t),this}getCursorMode(){return this.hp.getCursorMode()}setCustomCursor(t){return this.hp.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.hp.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.hp.offCursorTargetChanged(t)}setCursorFormatting(t){return this.hp.setCursorFormatting(t),this}getCursorFormatting(){return this.hp.getCursorFormatting()}addCursor(t=rl){const i=this.wy(),s=t.wm(i,this.uiScale,this.uiScale,this.Sy(i),this.qi);return this.By(s),s}addSlice(t,i){const s=new yl(this.$m,this.tp,this.sp,this,this.Mg,this.Km,this.qi,this.us.es);this.$m+=1,s.setName(t);const e=this.gh;return this.gh=!1,s.setValue(i),this.gh=e,s.setEffect(this.Qm),this.rp(s),this.Nm.push(s),this.qm(),s.setHighlightOnHover(this.Ym),s.onMouseMove((()=>{this.getCursorMode()&&this.us.xs()})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Nm}setMultipleSliceExplosion(t){return this.jm=t,this}getMultipleSliceExplosion(){return this.jm}setInnerRadius(t){return this.tu=t,this.us.xs(),this}getInnerRadius(){return this.tu}setSliceExplosionOffset(t){return this.Zm=t,this.us.xs(),this}getSliceExplosionOffset(){return this.Zm}setLUT(t){return this.Jd=t,this.us.xs(),this}setSliceFillStyle(t){this.Um=t;for(let t=0;t<this.Nm.length;t+=1)this.rp(this.Nm[t]);return this.us.xs(),this}getSliceFillStyle(){return this.Um}setSliceStrokeStyle(t){this.Wm="function"==typeof t?t(this.Wm):t;for(let t=0;t<this.Nm.length;t+=1)this.rp(this.Nm[t]);return this.us.xs(),this}getSliceStrokeStyle(){return this.Wm}setSliceEffect(t){return this.Qm=t,this.Nm.forEach((i=>i.es.ns.bs(t))),this.us.xs(),this}getSliceEffect(){return this.Qm}setSliceSorter(t){return this.Gm=t,this.Nm=this.Nm.sort(this.Gm),this.us.xs(),this}getSliceSorter(){return this.Gm}setLabelFillStyle(t){this.Xm="function"==typeof t?t(this.Xm):t;for(let t=0;t<this.Nm.length;t+=1)this.rp(this.Nm[t]);return this.us.xs(),this}getLabelFillStyle(){return this.Xm}setLabelFont(t){this.Hm="function"==typeof t?t(this.Hm):t;for(let t=0;t<this.Nm.length;t+=1)this.rp(this.Nm[t]);return this.us.xs(),this}getLabelFont(){return this.Hm}setLabelEffect(t){return this.Jm=t,this.Nm.forEach((i=>i.es.rs.bs(t))),this.us.xs(),this}getLabelEffect(){return this.Jm}setLabelFormatter(t){return this.np=t,this.us.xs(),this}getLabelFormatter(){return this.np}setSliceHighlightOnHover(t){return this.Ym=t,this.Nm.forEach((i=>i.setHighlightOnHover(t))),this}Ee(t){super.Ee(t),Ga.Hy(this.wh,this.Vy),super.Ry();const i=Ga.Yy(this.wh,this.Vy),s=n(this.Mg.x.getInnerInterval()-(this.Fa.left+this.Fa.right),this.Mg.y.getInnerInterval()-(this.Fa.bottom+this.Fa.top+i)),e=n(this.Fa.left+s.x/2,this.Fa.bottom+s.y/2);if(this.Jd){const t=this.Jd;this.Nm.forEach((i=>{this.rp(i,new W({color:t.getColors(i.getAnimatedValue())}))}))}for(let t=0;t<this.Nm.length;t+=1){const i=this.Nm[t].getAnimatedValue()>0;this.Nm[t].Vm.setVisible(i),this.Nm[t].hh.setVisible(i)}this.Nm=this.Nm.sort(this.Gm);const h=this.Nm.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/r:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.hh.vr(this.np(i,o[t])).Vs()}this.hp.Ee(!1,this.Nm,((t,i,s)=>{const e=o[h.indexOf(t)]||0,r=this.us.Go(i);return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.us.ft,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.us.ft},slice:t,category:t.getName(),value:t.getValue(),relativeValue:e}})),this.op(h,o,e,s)}rp(t,i=this.Um(t.index,t)){t.setStyle(i,this.Wm,this.Xm,this.Hm)}qm(){this.Nm=this.Nm.sort(this.Gm),this.us.xs()}nf(){return this.Nm}dispose(){return super.dispose(),this.Nm.slice().forEach((t=>t.dispose())),this.hp.W(),this.sp.W(),this.tp.W(),this}}const bl=(t,i,s)=>[[i.slice],[{text:i.value.toString(),font:{weight:"bold"}}]],xl={UserSeries:{type:"ApplicationType",args:{type:"UserSeries"}},InternalUI:{type:"ApplicationType",args:{type:"InternalUI"}}},Ml=(...t)=>{const i=[];return t.forEach((t=>{var s;t&&"object"==typeof(s=t)&&s&&"pattern"in s&&i.push({type:"DataPattern",args:t})})),i};class _l extends Sl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.np=dl.NamePlusValue,this.ap=[],this.lp=40,this.up=5,this.cp=10,this.dp=this.qi.pieChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.dp=t;for(let t=0;t<this.ap.length;t+=1)this.ap[t].We(this.dp);return this.us.xs(),this}getLabelConnectorStyle(){return this.dp}setLabelSliceOffset(t){return this.lp=t,this.us.xs(),this}getLabelSliceOffset(){return this.lp}setLabelConnectorGapStart(t){return this.up=t,this.us.xs(),this}getLabelConnectorGapStart(){return this.up}setLabelConnectorEndLength(t){return this.cp=t,this.us.xs(),this}getLabelConnectorEndLength(){return this.cp}op(t,i,s,e){const h=this.Hm.getSize(),r=this.lp,n=this.cp,o=this.up,a=Math.min(this.Zm,r-o);let l=0;if(1===t.length)l=t[0].hh.nd().x;else for(let i=0;i<t.length;i+=1)l=Math.max(l,t[i].hh.nd().x);const u=Math.max(.5*(Math.min(e.x-2*l-2*n,e.y-2*h)-2*r),0);if(u<50){const r=Math.max(.5*Math.min(e.x,e.y-2*h),0);pl(t,i,s,r,this.tu,a),t.forEach((t=>t.hh.setVisible(!1))),this.ap.forEach((t=>t.setVisible(!1)))}else{pl(t,i,s,u,this.tu,a);let e=90;const h=t.map(((t,h)=>{const o=360*i[h],a=e-o,l=Ns(Vs(.5*(e+a))),c=l.x>=0?-1:1,d=Is(Is(s,Fs(l,u+r)),{x:c*-n,y:0});e=a;const f={x:c,y:0};t.hh.ze(d).ja(f),t.hh.Vs();const A=vs(t.hh.eh());return{position:d,alignment:f,shape:t.hh,boundaries:A,sliceAngleVec:l,slice:t}})),l=[];for(let t=0;t<h.length;t+=1){const i=h[t],s=l[l.length-1];s&&!1!==cs([s.boundaries,i.boundaries])?i.shape.setVisible(!1):(l.push(i),i.shape.setVisible(!0))}for(let t=0;t<this.ap.length;t+=1)this.ap[t].setVisible(!1);l.forEach(((t,i)=>{const e=t.slice.Vm,h=ml(e,s,u+o+a*t.slice.getAnimatedExplosion()),r=zs(t.position.y,h,s),n=t.position;this.fp([h,r,n])}))}}getMinimumSize(){return n(500,300)}fp(t){let i;for(let t=0;t<this.ap.length;t+=1)if(!this.ap[t].getVisible()){i=this.ap[t].setVisible(!0);break}void 0===i&&(i=this.sp.Ap(this.Mg,void 0,[xl.InternalUI]).We(this.dp).setMouseInteractions(!1),this.ap.push(i)),i.Vt().ml(t)}}class wl extends Sl{constructor(){super(...arguments),this.np=dl.Name,this.gp=.5}op(t,i,s,e){const h=this.Zm,r=Math.max(0,.5*Math.min(e.x,e.y)-h);pl(t,i,s,r,this.tu,h);for(let i=0;i<t.length;i+=1){const e=t[i],n=e.Vm,o=e.hh,a=this.tu/100,l=((1-a)*this.gp+a)*r+e.getAnimatedExplosion()*h,u=ml(n,s,l);o.ze(u).Ya(0).Xa(0)}}getMinimumSize(){return n(200,200)}setLabelPosition(t){return this.gp=t,this.us.xs(),this}getLabelPosition(){return this.gp}}const Cl={LabelsOnSides:_l,LabelsInsideSlices:wl},kl=t=>{if(we(t)){const i=t.getThickness(),s=t.getFillStyle();if(Y(s))return 1===i?Vh:new Nh({size:i,fillStyle:s,shape:"sphere"})}return Vh};class Tl{constructor(t,i,e,h,r,n,o,a,l,u){this.L=new s,this.S=0,this.ji=!0,this.$i=!1,this.Wo=!0,this.xs=t,this.yp=i,this.mp=e,this.pp=h,this.vp=r,this.Sp=n,this.Wd=o,this.dm=a,this.bp=l,this.ac=u}setValue(t){return t===this.S||(this.S=t,this.xs(),this.L.emit("valueChange",this,this.S)),this}getValue(){return this.S}setTickStyle(t){return this.mp="function"==typeof t?t(this.mp):t,this.xs(),this}getTickStyle(){return this.mp}setTickLength(t){return this.pp=t,this.xs(),this}getTickLength(){return this.pp}setGridStrokeStyle(t){return this.vp="function"==typeof t?t(this.vp):t,this.xs(),this}getGridStrokeStyle(){return this.vp}setTextPadding(t){return this.Sp=t,this.xs(),this}getTextPadding(){return this.Sp}setTextRotation(t){return this.Wd=t,this.xs(),this}getTextRotation(){return this.Wd}setTextFillStyle(t){return this.dm="function"==typeof t?t(this.dm):t,this.xs(),this}getTextFillStyle(){return this.dm}setTextFont(t){return this.bp="function"==typeof t?t(this.bp):t,this.xs(),this}getTextFont(){return this.bp}setTextFormatter(t){return this.ac=t,this.xs(),this}onValueChange(t){return this.L.on("valueChange",t)}offValueChange(t){return this.L.off(t,"valueChange")}dispose(){return this.$i||(this.$i=!0,this.yp(),this.xs(),this.L.emit("dispose",this)),this}isDisposed(){return this.$i}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setVisible(t){const i=this.ji!==t;return this.ji=t,i&&(this.L.emit("visibleStateChanged",this,this.ji),this.xs()),this}getVisible(){return this.ji}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}setMouseInteractions(t){return this.Wo=t,this.xs(),this}getMouseInteractions(){return this.Wo}}class Fl extends Tl{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d){super(t,i,s,e,h,r,n,o,a,l),this.xp=u,this.Mp=c,this.Fa=d}setBackgroundFillStyle(t){return this.xp="function"==typeof t?t(this.xp):t,this.xs(),this}getBackgroundFillStyle(){return this.xp}setBackgroundStrokeStyle(t){return this.Mp="function"==typeof t?t(this.Mp):t,this.xs(),this}getBackgroundStrokeStyle(){return this.Mp}setPadding(t){return this.Fa="number"==typeof t?{left:t,top:t,right:t,bottom:t}:{...this.Fa,...t},this.xs(),this}getPadding(){return this.Fa}}class Il{constructor(t,i,s,e){this._p=[],this.wp=new Map,this.Cp=t,this.kp=i,this.Tp=s,this.Fp=e}Ip(){this.Tp&&this.Tp();const t=[];return{add:(i,s)=>{t.push({instanceUniqueProperties:i,instanceSharedProperties:s})},finishPlot:()=>{const i=[];let s=[];t.forEach((t=>{const s=i.find((i=>((t,i)=>{const s=Object.keys(t);for(const e of s)if(t[e]!==i[e])return!1;return!0})(i.sharedProperties,t.instanceSharedProperties)));s?s.instances.push(t.instanceUniqueProperties):i.push({sharedProperties:t.instanceSharedProperties,instances:[t.instanceUniqueProperties]})}));const e=this._p.slice(),h=[];i.forEach((t=>{let i=e.pop();i||(i=this.Cp(),this._p.push(i));const r=[],n=i.Pp().slice();t.instances.forEach(((t,i)=>{const s=n.shift();r.push({...t,existingMember:s})}));const o=this.kp(i,r,t.sharedProperties);s=ki(s,o,{canReturnB:!0});for(let s=0;s<t.instances.length;s+=1)h.push({Qo:t.instances[s].Qo,collection:i,member:o[s]});n.forEach((t=>{null==i||i.Dd(t)}))})),e.forEach((t=>{t.dispose();const i=this._p.indexOf(t);i<0?zi(0,(()=>{})):this._p.splice(i,1)})),h.forEach((t=>{const i=this.wp.get(t.Qo);i&&t.collection.us.uo({entity:i.collection,collectionMember:i.member},{entity:t.collection,collectionMember:t.member})})),this.wp.clear(),h.forEach((t=>{this.wp.set(t.Qo,t)})),this.Fp&&this.Fp(this._p,s)}}}Dp(){this._p.forEach((t=>{t.dispose()})),this._p.length=0}}class Pl{constructor(t){this.Bp=[],this.Lp=t}Ip(){return this.Rp(),{add:()=>this.dl(),finishPlot:()=>{this.Ep()}}}dl(){let t=this.Bp.find((t=>t.isFree));return t||(t={isFree:!1,shape:this.Lp()},this.Bp.push(t)),t.isFree=!1,t.shape}Rp(){this.Bp.forEach((t=>{t.isFree=!0}))}Ep(){this.Bp.filter((t=>t.isFree)).forEach((t=>{t.shape.dispose(),this.Bp.splice(this.Bp.indexOf(t),1)}))}Dp(){this.Bp.forEach((t=>t.shape.dispose())),this.Bp.length=0}}class Dl extends Th{constructor(t,i,s,e,h,r,n,o,a){super(t,i,s,e,o,{numeric:i.zp({x:t.us.qi.xAxis3DNumericTicks,y:t.us.qi.yAxis3DNumericTicks,z:t.us.qi.zAxis3DNumericTicks}),datetime:i.zp({x:t.us.qi.xAxis3DDateTimeTicks,y:t.us.qi.yAxis3DDateTimeTicks,z:t.us.qi.zAxis3DDateTimeTicks}),time:i.zp({x:t.us.qi.xAxis3DTimeTicks,y:t.us.qi.yAxis3DTimeTicks,z:t.us.qi.zAxis3DTimeTicks})},{type:"linear"}),this.Gf=[],this.Vp=()=>{},this.Op=()=>{},this.Np=()=>{},this.Gp=()=>{},this.chart=t,this.Wp=h,this.Yp=r,this.Hp=n,this.Xp=this.Wp.ft;const l=this.Nh.zp({x:this.qi.xAxis3DStrokeStyle,y:this.qi.yAxis3DStrokeStyle,z:this.qi.zAxis3DStrokeStyle});this.$p=this.Wp.Ap([xl.InternalUI]).We(l).jp(kl(l)).setMouseInteractions(!1),this.Th=this.Yp.Ur(this.Hp).setMouseInteractions(!1).Le(i.zp({x:t.us.qi.xAxis3DTitleFillStyle,y:t.us.qi.yAxis3DTitleFillStyle,z:t.us.qi.zAxis3DTitleFillStyle})).tr(i.zp({x:t.us.qi.xAxis3DTitleFont,y:t.us.qi.yAxis3DTitleFont,z:t.us.qi.zAxis3DTitleFont})).la(3),this.Zp=new Pl((()=>this.Yp.Ur(this.Hp).la(2).Gr(Qi).Nr(Qi))),this.Qp=new Il((()=>this.Yp.Jp(this.Hp).setMouseInteractions(!1).la(1)),((t,i,s)=>(t.Le(s.fillStyle).Be(s.strokeStyle),i.map((({positions:i,existingMember:s})=>{const e=s||t.jr();return e.Tl(i),e}))))),this.Kp=new Il((()=>this.Wp.Zg().setMouseInteractions(!1)),((t,i,s)=>(t.Vt().We(s.lineStyle),i.map((({positions:i,existingMember:s})=>s||t.ml(i)))))),this.es=a,this.er=this.es.Dg([this.Th]).bs(e.effectsText),this.$p.setMouseEnterEventHandler(this.Vp).setMouseLeaveEventHandler(this.Op).setMouseDragEventHandler(this.Np).setMouseDragStopEventHandler(this.Gp),s.yg=this}setTickStrategy(t,i){return super.Yh(t,i)}getTickStrategy(){return this.ah}addCustomTick(){const t=new Fl((()=>this.chart.us.xs()),(()=>{const i=this.Gf.indexOf(t);i>=0&&this.Gf.splice(i,1)}),this.qi.xAxis3DNumericTicks.majorTickStyle.tickStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.tickLength,this.qi.xAxis3DNumericTicks.majorTickStyle.gridStrokeStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.tickPadding,this.qi.xAxis3DNumericTicks.majorTickStyle.labelRotation,this.qi.xAxis3DNumericTicks.majorTickStyle.labelFillStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.labelFont,(t=>this.formatValue(t)),O,dt,{left:4,right:4,top:4,bottom:4});return this.Gf.push(t),this.chart.us.xs(),t}setStrokeStyle(t){return this.$p.We(t).jp(kl(this.$p.Su())),this.chart.us.xs(),this}getStrokeStyle(){return this.$p.Su()}setMouseInteractions(t){return this}setVisible(t){return super.setVisible(t),this.$p.setVisible(t),!1===t&&(this.Kp.Dp(),this.Zp.Dp(),this.Qp.Dp()),this.Wp.xs(),this}Og(){return this.chart.getSeries()}qp(t){return Math.abs(this.ft.it(t)*this.Wp.tv(1))}zr(t,i,s){const e=Math.abs(this.ft.it(i-t)*this.Wp.tv(1));return{min:t-s*e,max:i+s*e}}br(t,i){const s=new Bl(i,t,this.Yp,this.Hp,this.Wp);return s.hh.la(0),s}Mr(t,i){const s=this.sv(i,t.S,t.Rh.$e.tickLength,t.Rh.$e.tickPadding);return t.hh.ze(s.labelPosition).ja(s.labelAlignment),s}sv(t,i,s,e){const{wuSize:h,start:r,end:o,tickDirection3D:a,tickDirection2D:l}=t,u=(i-this.ft.getInnerStart())/(this.ft.getInnerEnd()-this.ft.getInnerStart()),c=ss.addVec(ps(r,o,u),ss.multiplyVec(ss.multiply(a,this.Wp.tv(.5*this.$p.Su().getThickness())),h)),d=ss.addVec(c,ss.multiplyVec(ss.multiply(a,this.Wp.tv(s)),h)),f=this.Wp.ev(d)||n(0,0);return{labelPosition:Is(pt(f,this.chart.us.ft,this.Hp),Fs(l,e)),labelAlignment:{x:-l.x,y:-l.y},posTickEnd3D:d,posTickStart3D:c,tickPositionRelative:u}}hv(t,i,s){const{wuSize:e,start:h,end:r,tickDirection3D:o}=i,a=(t-this.ft.getInnerStart())/(this.ft.getInnerEnd()-this.ft.getInnerStart()),l=ss.addVec(ps(h,r,a),ss.multiplyVec(ss.multiply(o,this.Wp.tv(.5*this.$p.Su().getThickness())),e)),u=ss.addVec(l,ss.multiplyVec(ss.multiply(o,this.Wp.tv(10)),e)),c=this.Wp.ev(l)||n(0,0),d=this.Wp.ev(u)||n(0,0);return this.Yp.Ye(this.Hp).Xe(c).He(d).We(new _e({fillStyle:new W({color:x(120*s)}),thickness:1}))}Rr(t,i){return Ll(t,i,this.ft)}Ee(t){if(!this.ji)return;const i=Math.min(this.Hh,this.Xh),s=Math.max(this.Hh,this.Xh),e=this.Xp,h=l(e.x.ht(),e.y.ht(),e.z.ht());let r,o;this.rv()?(r=l(e.x.getInnerEnd(),e.y.getInnerStart(),e.z.getInnerStart()),o=l(e.x.getInnerEnd(),e.y.getInnerStart(),e.z.getInnerEnd())):(r=l(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),o=this.Nh.nv(l(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),r));const a=this.Nh.lf,u=this.Wp.ev(r)||n(0,0),c=this.Wp.ev(o)||n(0,0),d=ps(r,o,.5),f=ss.addVec(d,ss.multiplyVec(ss.multiply(a,-1),h)),A=this.Wp.ev(d)||n(0,0),g=this.Wp.ev(f)||n(0,0),y=Cs(Ps(pt(A,this.chart.us.ft,this.Hp),pt(g,this.chart.us.ft,this.Hp)));this.$p.Vt().ml([r,o]);const{gridlinePositionA:m,gridlinePositionB:p,gridlinePositionC:v}=this.Nh.ov(t),S=t=>({x:-1===t.x?this.Xp.x.getInnerStart():1===t.x?this.Xp.x.getInnerEnd():0,y:-1===t.y?this.Xp.y.getInnerStart():1===t.y?this.Xp.y.getInnerEnd():0,z:-1===t.z?this.Xp.z.getInnerStart():1===t.z?this.Xp.z.getInnerEnd():0}),b=S(m),x=S(p),M=S(v),_={physicalAxisSize:Ts(Ps(u,c)),wuSize:h,start:r,end:o,tickDirection3D:a,tickDirection2D:y,gridlinePositionA:b,gridlinePositionB:x,gridlinePositionC:M},w=this.cr(_),C=this.Kp.Ip();for(const[t,i]of this.lh)for(const[,s]of i){const i=w.get(s);if(!i)continue;const e=this.av(_,i);C.add({Qo:0,positions:[e.tickStroke.start,e.tickStroke.end]},{lineStyle:t.$e.tickStyle}),e.gridStroke&&C.add({Qo:0,positions:e.gridStroke},{lineStyle:t.$e.gridStrokeStyle})}const k=this.Zp.Ip(),T=this.Qp.Ip(),F={x:0,y:0};this.Gf.forEach((t=>{if(!t.ji||t.S<i||t.S>s)return;const e=this.sv(_,t.S,t.pp,t.Sp),h=this.av(_,e);if(t.dm!==O){const i=k.add().ze(e.labelPosition).ja(e.labelAlignment).Le(t.dm).tr(t.bp).vr(t.ac(t.S)).ir(t.Wd).setMouseInteractions(t.Wo),s=i.Vs().ni();if(F.x=Math.max(F.x,s.x),F.y=Math.max(F.y,s.y),t.xp!==O){const s=i.eh(),e=[{x:s[0].x-t.Fa.left,y:s[0].y+t.Fa.top},{x:s[1].x+t.Fa.right,y:s[1].y+t.Fa.top},{x:s[2].x+t.Fa.right,y:s[2].y-t.Fa.bottom},{x:s[3].x-t.Fa.left,y:s[3].y-t.Fa.bottom}];T.add({Qo:0,positions:e},{fillStyle:t.xp,strokeStyle:t.Mp})}}C.add({Qo:0,positions:[h.tickStroke.start,h.tickStroke.end]},{lineStyle:t.mp}),h.gridStroke&&C.add({Qo:0,positions:h.gridStroke},{lineStyle:t.vp})})),k.finishPlot(),T.finishPlot(),C.finishPlot();const I=this.Cr(((t,i)=>{const s=i.hh.ni();return t.x=Math.max(t.x,s.x),t.y=Math.max(t.y,s.y),t}),{x:F.x,y:F.y}),P=Math.atan((c.y-u.y)/(c.x-u.x));this.Th.ja({x:0,y:0}).ir(180*-P/Math.PI);const D=ss.addVec(d,ss.multiplyVec(ss.multiply(a,this.Wp.tv(.5*this.$p.Su().getThickness()+this.Fr(((t,i)=>Math.max(t,i.tickLength)),0))),h)),B=this.Wp.ev(D)||n(0,0),L=Is(pt(B,this.chart.us.ft,this.Hp),Is(Is(Ds(I,y),Fs(y,this.Fr(((t,i)=>Math.max(t)),0))),Ds(Fs(this.Th.Vs().ni(),.5),y)));this.Th.ze(L),this.$p.lv={overrideFollowing:!1,skipMousePicking:!1}}av(t,i){const{gridlinePositionA:s,gridlinePositionB:e,gridlinePositionC:h}=t,r=i.posTickStart3D,n=i.posTickEnd3D,o=i.tickPositionRelative;let a;return Qt(o,0)||Qt(o,1)||(a=[this.uv()?{...s,x:r.x}:this.cv()?{...s,y:r.y}:this.rv()?{...s,z:r.z}:{x:0,y:0,z:0},this.uv()?{...e,x:r.x}:this.cv()?{...e,y:r.y}:this.rv()?{...e,z:r.z}:{x:0,y:0,z:0},this.uv()?{...h,x:r.x}:this.cv()?{...h,y:r.y}:this.rv()?{...h,z:r.z}:{x:0,y:0,z:0}]),{gridStroke:a,tickStroke:{start:r,end:n}}}hr(){super.hr(),this.Kp.Dp(),this.Zp.Dp(),this.Qp.Dp()}uv(){return this.Nh.uv()}cv(){return this.Nh.cv()}rv(){return this.Nh.rv()}}class Bl extends Fh{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.dv=h}}const Ll=(t,i,s)=>Jt(t+.1*(i-t)+Math.abs(s.ht())/100*Math.sign(i-t),Math.min(t,i),Math.max(t,i)),Rl=(t,i,s,e)=>({Ir:()=>{const s=t();let e;for(const t of s){if(!t.fv())continue;const s=i(t);e=void 0===s?e:void 0!==e?Math.min(e,s):s}return e},Pr:()=>{const i=t();let e;for(const t of i){if(!t.fv())continue;const i=s(t);e=void 0===i?e:void 0!==e?Math.max(e,i):i}return e},Br:()=>{const i=t();let s;for(const t of i){if(!t.fv())continue;const i=e(t);s=void 0===i?s:void 0!==s?Math.max(s,i):i}return s}}),El=t=>({...Rl(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.Br().y)),zp:t=>t.y,nv:(t,i)=>({x:i.x,y:t.y,z:i.z}),lf:l(-1,0,0),ov:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:l(i.x,0,i.z),gridlinePositionB:l(i.x,0,-i.z),gridlinePositionC:l(-i.x,0,-i.z)}},uv:()=>!1,cv:()=>!0,rv:()=>!1}),zl=t=>({...Rl(t,(t=>t.getZMin()),(t=>t.getZMax()),(t=>t.Br().z)),zp:t=>t.z,nv:(t,i)=>({x:i.x,y:i.y,z:t.z}),lf:l(1,0,0),ov:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:l(i.x,-i.y,0),gridlinePositionB:l(i.x,i.y,0),gridlinePositionC:l(-i.x,i.y,0)}},uv:()=>!1,cv:()=>!1,rv:()=>!0});class Vl extends ye{constructor(t,i,s,e,h){super(t,i,e,h),this.Av=In,this.gv=!0,this.yv=!0,this.mv=!0,this.chart=t,this.Wp=s,this.ts=new Map,this.onMouseWheel(this.chart.pv),this.onMouseDrag(this.chart.vv),this.onMouseDragStop(this.chart.Sv),this.onTouchStart(this.chart.bv.onTouchStart),this.onTouchMove(this.chart.bv.onTouchMove),this.onTouchEnd(this.chart.bv.onTouchEnd)}Ji(t,i){const s=null==t?void 0:t.dataPoint;if(s)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.Mg,axisLocation:s},...s,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ()}}setCursorEnabled(t){return this.gv=t,this}getCursorEnabled(){return this.gv}setCursorFormattingOverride(t){return this.xv=t,this}getCursorFormattingOverride(){return this.xv}$y(){return this.getCursorEnabled()}setAutoScrollingEnabled(t){return this.yv=t,this.chart.us.xs(),this}getAutoScrollingEnabled(){return this.yv}setColorShadingStyle(t){return this.Av=t,this.ts.forEach(((i,s)=>s.Mv(t))),this.Wp.xs(),this}getColorShadingStyle(){return this.Av}setDepthTestEnabled(t){return this.mv=t,this.ts.forEach(((i,s)=>s._v(t))),this.Wp.xs(),this}getDepthTestEnabled(){return this.mv}wv(){}Ee(){}Fp(){}getXMax(){const t=this.Ka;return t?t.vt():void 0}getXMin(){const t=this.Ka;return t?t.yt():void 0}getYMax(){const t=this.Ka;return t?t.bt():void 0}getYMin(){const t=this.Ka;return t?t.St():void 0}getZMax(){const t=this.Ka;return t?t.Cv():void 0}getZMin(){const t=this.Ka;return t?t.kv():void 0}Br(){const t=this.Ka;return t?l(t.Il(),t.Pl(),t.Tv()):l(0,0,0)}}class Ol extends Vl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.ws="Box Series 3D",this.Fv=.25,this.Iv=!1,this.Kd=()=>Di(this.Fe),this.Fe=Ri(this.qi.boxSeries3DFillStyle,h),this.Ka=this.Wp.Dv()._v(this.mv).Le(this.Fe).Pv(this.Fv).cs(this.getHighlight()),this.fs(this.Ka)}invalidateData(t){const i=t.length;if(0===i)return this;this.Iv&&this.chart.us.Qn(Yo.Pf);const s=t[0];if(!s)return this;let e;if("xMin"in s||"yMin"in s||"zMin"in s||"xMax"in s||"yMax"in s||"zMax"in s){e=[];for(let s=0;s<i;s+=1){const i=t[s],h="xMin"in i&&"xMax"in i,r="yMin"in i&&"yMax"in i,n="zMin"in i&&"zMax"in i;e[s]={color:i.color,value:i.value,id:i.id,xCenter:h?(i.xMin+i.xMax)/2:void 0,yCenter:r?(i.yMin+i.yMax)/2:void 0,zCenter:n?(i.zMin+i.zMax)/2:void 0,xSize:h?i.xMax-i.xMin:void 0,ySize:r?i.yMax-i.yMin:void 0,zSize:n?i.zMax-i.zMin:void 0}}}else e=t;return this.Ka.Bv(e.slice()),this.chart.us.xs(),this.Iv=!0,this}setFillStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.Ka.Le(t),this.chart.us.xs(),this}getFillStyle(){return this.Fe}setRoundedEdges(t){return void 0!==t&&isNaN(t)&&(console.error("'BoxSeries3D.setRoundedEdges | NaN was supplied.'"),t=void 0),this.Fv=void 0!==t?Jt(t,0,1):void 0,this.Ka.Pv(this.Fv),this.Wp.xs(),this}getRoundedEdges(){return this.Fv}fv(){return this.yv&&this.getVisible()}Ve(t,i){t.cs(i),this.chart.us.xs()}Ee(){super.Ee(),this.Ka.Vs(!1)}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe})}}class Nl extends Vl{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Iv=!1,this.Kd=()=>Di(this.vu.getFillStyle())}setStrokeStyle(t){this.vu="function"==typeof t?t(this.vu):t;const i=this.vu;return this.Ka.We(i),this.Wp.xs(),this}getStrokeStyle(){return this.vu}add(t){return this.Iv&&this.chart.us.Qn(Yo.Pf),this.Iv=!0,(t=Array.isArray(t)?t:[t])?(this.Ka.ml(t.slice()),this.Wp.xs(),this):this}clear(){return this.Ka.Vt(),this}getPointAmount(){const t=this.Ka;return t.pl()+t.vl()}fv(){return this.yv&&this.getPointAmount()>0&&this.getVisible()}Ve(t,i){t.cs(i),this.Wp.xs()}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{stroke:this.vu})}}class Gl extends Nl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.ws="Line Series 3D",this.vu=Ri(e.lineSeries3DStrokeStyle,h),this.Lv=sr.pointStyle3D,this.Rv(this.vu),this.Ka=this.Wp.Ap([xl.UserSeries])._v(this.mv).We(this.vu).jp(this.Lv).cs(this.getHighlight()),this.fs(this.Ka)}setStrokeStyle(t){super.setStrokeStyle(t),this.Rv(this.vu);const i=this.Lv;return this.Ka.jp(i),this}Rv(t){const i=new Hh.Triangulated({shape:"sphere",fillStyle:t.getFillStyle(),size:t.getThickness()});this.Lv=i}}class Ul extends Nl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.ws="Point Line Series 3D",this.Kd=()=>Di(this.vu.getFillStyle())||Di(this.Lv.getFillStyle()),this.Lv=Ri(e.pointLineSeries3DPointStyle,h),this.vu=Ri(e.lineSeries3DStrokeStyle,h),this.Ev(),this.Ka=this.Wp.Ap([xl.UserSeries])._v(this.mv).We(this.vu).jp(this.Lv).cs(this.getHighlight()),this.fs(this.Ka)}setPointStyle(t){return this.Lv="function"==typeof t?t(this.Lv):t,this.Ev(),this.Ka.jp(this.Lv),this.Wp.xs(),this}getPointStyle(){return this.Lv}setStrokeStyle(t){super.setStrokeStyle(t);const i=this.vu,s=Math.abs(i.getThickness()),e=this.Lv,h=e.getSize();s>("object"==typeof h?Math.max(h.x,h.y,h.z):h)&&(this.Lv=e.setSize(s)),this.Ev();const r=this.Lv;return this.Ka.jp(r),this.Wp.xs(),this}Ev(){const t=this.Lv,i=t.getSize();this.Lv=t.setSize(i)}Ve(t,i){t.cs(i),this.Wp.xs()}}class Wl extends Vl{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.Iv=!1,((null==r?void 0:r.individualPointSizeAxisEnabled)||(null==r?void 0:r.individualPointSizeEnabled))&&this.chart.us.Qn(Yo.Df)}add(t){return this.Iv&&this.chart.us.Qn(Yo.Pf),this.Iv=!0,(t=Array.isArray(t)?t:[t])?(this.Ka.ml(t.slice()),this.Wp.xs(),this):this}clear(){return this.Ka.Vt(),this}getPointAmount(){const t=this.Ka;return t.pl()+t.vl()}fv(){return this.yv&&this.getPointAmount()>0&&this.getVisible()}Ve(t,i){t.cs(i),this.Wp.xs()}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{point3D:this.zv})}}class Yl extends Wl{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.ws="Point Series 3D",this.Kd=()=>Di(this.zv.getFillStyle());const n=void 0!==(null==r?void 0:r.automaticColorIndex)?r.automaticColorIndex:this.chart.getSeries().length;this.zv=Ri(e.pointSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.Ka=this.Wp.Ov(o)._v(this.mv).Vv(this.zv).cs(this.getHighlight()),this.fs(this.Ka)}setPointStyle(t){this.zv="function"==typeof t?t(this.zv):t;const i=this.zv;return this.Ka.Vv(i),this.Wp.xs(),this}getPointStyle(){return this.zv}}class Hl extends Wl{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.ws="Point Cloud Series 3D",this.Kd=()=>Di(this.zv.getFillStyle());const n=this.chart.getSeries().length;this.zv=Ri(e.pointCloudSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.Ka=this.Wp.Ov(o).Vv(this.zv).cs(this.getHighlight()),this.fs(this.Ka)}setPointStyle(t){this.zv="function"==typeof t?t(this.zv):t;const i=this.zv;return this.Ka.Vv(i),this.Wp.xs(),this}getPointStyle(){return this.zv}}const Xl={Triangulated:Yl,Pixelated:Hl};class $l extends Na{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.Nv=[],this.Gv=0,this.Uv=t=>{const i=this.Nv.indexOf(t);i>=0&&(this.Nv.splice(i,1),this.L.emit("seriesDispose",this,t))},this.onSeriesBackgroundMouseEnter=t=>this.L.on("mouseEnterSeriesBackground",t),this.onSeriesBackgroundMouseLeave=t=>this.L.on("mouseLeaveSeriesBackground",t),this.onSeriesBackgroundMouseMove=t=>this.L.on("mouseMoveSeriesBackground",t),this.onSeriesBackgroundMouseDown=t=>this.L.on("mouseDownSeriesBackground",t),this.onSeriesBackgroundMouseUp=t=>this.L.on("mouseUpSeriesBackground",t),this.onSeriesBackgroundMouseClick=t=>this.L.on("mouseClickSeriesBackground",t),this.onSeriesBackgroundMouseDoubleClick=t=>this.L.on("mouseDoubleClickSeriesBackground",t),this.onSeriesBackgroundMouseDragStart=t=>this.L.on("mouseDragStartSeriesBackground",t),this.onSeriesBackgroundMouseDrag=t=>this.L.on("mouseDragSeriesBackground",t),this.onSeriesBackgroundMouseDragStop=t=>this.L.on("mouseDragStopSeriesBackground",t),this.onSeriesBackgroundMouseWheel=t=>this.L.on("mouseWheelSeriesBackground",t),this.onSeriesBackgroundTouchStart=t=>this.L.on("touchStartSeriesBackground",t),this.onSeriesBackgroundTouchMove=t=>this.L.on("touchMoveSeriesBackground",t),this.onSeriesBackgroundTouchEnd=t=>this.L.on("touchEndSeriesBackground",t),this.offSeriesBackgroundMouseEnter=t=>this.L.off(t,"mouseEnterSeriesBackground"),this.offSeriesBackgroundMouseLeave=t=>this.L.off(t,"mouseLeaveSeriesBackground"),this.offSeriesBackgroundMouseMove=t=>this.L.off(t,"mouseMoveSeriesBackground"),this.offSeriesBackgroundMouseDown=t=>this.L.off(t,"mouseDownSeriesBackground"),this.offSeriesBackgroundMouseUp=t=>this.L.off(t,"mouseUpSeriesBackground"),this.offSeriesBackgroundMouseClick=t=>this.L.off(t,"mouseClickSeriesBackground"),this.offSeriesBackgroundMouseDoubleClick=t=>this.L.off(t,"mouseDoubleClickSeriesBackground"),this.offSeriesBackgroundMouseDragStart=t=>this.L.off(t,"mouseDragStartSeriesBackground"),this.offSeriesBackgroundMouseDrag=t=>this.L.off(t,"mouseDragSeriesBackground"),this.offSeriesBackgroundMouseDragStop=t=>this.L.off(t,"mouseDragStopSeriesBackground"),this.offSeriesBackgroundMouseWheel=t=>this.L.off(t,"mouseWheelSeriesBackground"),this.offSeriesBackgroundTouchStart=t=>this.L.off(t,"touchStartSeriesBackground"),this.offSeriesBackgroundTouchMove=t=>this.L.off(t,"touchMoveSeriesBackground"),this.offSeriesBackgroundTouchEnd=t=>this.L.off(t,"touchEndSeriesBackground"),this.Wv=this.es.Dg()}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.Nv.forEach((i=>i.setAnimationHighlight(t))),this}Yv(t,i){this.Wv.As([i]),t.setMouseMoveEventHandler(((t,i)=>{this.L.emit("mouseMoveSeriesBackground",this,i)})).setMouseEnterEventHandler(((t,i)=>{this.L.emit("mouseEnterSeriesBackground",this,i)})).setMouseLeaveEventHandler(((t,i)=>{this.L.emit("mouseLeaveSeriesBackground",this,i)})).setMouseDownEventHandler(((t,i)=>this.L.emit("mouseDownSeriesBackground",this,i))).setMouseUpEventHandler(((t,i)=>this.L.emit("mouseUpSeriesBackground",this,i))).setMouseClickEventHandler(((t,i)=>this.L.emit("mouseClickSeriesBackground",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.L.emit("mouseDoubleClickSeriesBackground",this,i))).setMouseWheelEventHandler(((t,i)=>this.L.emit("mouseWheelSeriesBackground",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.L.emit("mouseDragStartSeriesBackground",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.L.emit("mouseDragSeriesBackground",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.L.emit("mouseDragStopSeriesBackground",this,i,s,e))).setTouchStartEventHandler(((t,i)=>{this.L.emit("touchStartSeriesBackground",this,i)})).setTouchMoveEventHandler(((t,i)=>{this.L.emit("touchMoveSeriesBackground",this,i)})).setTouchEndEventHandler(((t,i)=>{this.L.emit("touchEndSeriesBackground",this,i)}))}setSeriesBackgroundFillStyle(t){return this.Hv.Le(t),this.us.xs(),this}getSeriesBackgroundFillStyle(){return this.Hv.Qh()}setSeriesBackgroundStrokeStyle(t){return this.Xv.Be(t),this.us.xs(),this}getSeriesBackgroundStrokeStyle(){return this.Xv.vo()}setSeriesBackgroundEffect(t){return this.Wv.bs(t),this.us.xs(),this}getSeriesBackgroundEffect(){return this.Wv.Ms()}$v(t){this.Nv.push(t),void 0!==this.jv&&t.setHighlightOnHover(this.jv),this.L.emit("seriesAdded",this,t)}nf(){return this.Nv}setSeriesHighlightOnHover(t){return this.jv=t,this.Nv.forEach((i=>i.setHighlightOnHover(t))),this}dispose(){return this.Nv.slice().forEach(jt),super.dispose()}Xy(t){return this.L.on("seriesAdded",t)}Zv(t){return this.L.off(t)}Qv(t){return this.L.on("seriesDispose",t)}Jv(t){return this.L.off(t)}}const jl=ss.normalize({x:-.5610788649579117,y:-.35242840511865414,z:-1.1349149375849081});class Zl{constructor(t,i,s,e){this.Kv=!0,this.qv=!0,this.tS=2*-Math.PI/2160,this.iS=2*Math.PI/2160,this.sS=.1,this.eS=1*Math.PI/180,this.hS=t,this.rS=i,this.nS=s,this.ev=e}getDefaultCameraConfiguration(t,i){const s={direction:jl,location:ss.multiply(jl,-1)};return this.cameraLocationChanged({boundingBox:t,cameraDirection:s.direction,cameraLocation:s.location,projection:i})||s}applyCameraInteractions(t,i){let s={direction:t.cameraDirection,location:t.cameraLocation};return i.forEach((t=>{"rotate"===t.type?s=this.oS(s,t):"wheel-zoom"===t.type?s=this.aS(s,t):"rotate+zoom"===t.type?s=this.lS(s,t):"fixed-rotate"===t.type?s=this.uS(s,t):"move"===t.type&&(s=this.cS(s,t))})),this.Kv?s=this.dS(t.boundingBox,s):this.qv&&(s=this.fS(t.boundingBox,t.projection,s)),s}oS(t,i){const{rotation:s}=i,e=t.location,h=ss.multiply(ss.normalize(t.location),-1),{Right:r,Up:n}=this.AS(h);let o=e;const a=this.gS(h),l=s.x*this.tS*a;o=ss.rotateAroundAxis(o,n,l);const u=(s.y>0?1:-1)*Math.min(Math.abs(s.y)*this.iS,a-this.eS);return 0!==u&&(o=ss.rotateAroundAxis(o,r,u)),{location:o,direction:ss.multiply(ss.normalize(o),-1)}}aS(t,i){const{deltaY:s}=i;this.Kv&&this.yS(!1);const e=t.location,h=ss.multiply(ss.normalize(e),-1),r=s*this.sS,n=ss.length(e)*-r;return{direction:h,location:ss.addVec(e,ss.multiply(h,n))}}lS(t,i){const{rotation:s,cameraDistance:e}=i;this.Kv&&this.yS(!1);let h=this.oS(t,{type:"rotate",rotation:s});const r=h.location,n=ss.multiply(ss.normalize(r),-1),o=ss.multiply(n,-e);return h={direction:ss.multiply(ss.normalize(o),-1),location:o},h}uS(t,i){this.Kv&&this.yS(!1);const{rotation:s}=i,e=t.location,h=t.direction,{Right:r,Up:n}=this.AS(h),o=s.x*this.tS;let a=ss.normalize(ss.rotateAroundAxis(h,n,o));const l=s.y*this.iS;return a=ss.normalize(ss.rotateAroundAxis(a,r,l)),{location:e,direction:a}}cS(t,i){this.Kv&&this.yS(!1),this.qv=!1;const{amountRight:s,amountForward:e}=i,h=t.location,r=t.direction,{Right:n}=this.AS(r);return{location:ss.addVec(h,ss.multiply(r,.01*e),ss.multiply(n,.01*s)),direction:r}}projectionChanged(t,i){return this.viewportChanged(t)}boundingBoxChanged(t){const i={location:t.cameraLocation,direction:ss.multiply(ss.normalize(t.cameraLocation),-1)};return this.Kv?this.dS(t.boundingBox,i):this.fS(t.boundingBox,t.projection,i)}cameraLocationChanged(t){const i={location:t.cameraLocation,direction:ss.multiply(ss.normalize(t.cameraLocation),-1)};return this.Kv?this.dS(t.boundingBox,i):this.fS(t.boundingBox,t.projection,i)}viewportChanged(t){const i={location:t.cameraLocation,direction:ss.multiply(ss.normalize(t.cameraLocation),-1)};if(this.Kv)return this.dS(t.boundingBox,i)}dS(t,i,s){let e=i;s=void 0!==s?s:0,e=this.mS(t,e,100,20,1,s,5);const h=this.gS(e.direction);return e=this.pS(e,this.vS(t,e,100,1),h),e}mS(t,i,s,e,h,r,n){return Ql(r,n,(t=>({direction:i.direction,location:ss.multiply(i.direction,-t)})),(i=>this.SS(t,i)),s,h,"linear",e)}vS(t,i,s,e){const{Right:h,Left:r,Up:n,Down:o}=this.AS(i.direction),a=this.bS(t,!1,i);let l=i;const u=e,c=.1;return Math.abs(a.bottom-a.top)>u&&(l=a.bottom<a.top?Jl(0,c,(t=>({location:l.location,direction:ss.normalize(ss.lerp(l.direction,o,t))})),(i=>this.xS(t,i)),0,u,!0,s):Jl(0,c,(t=>({location:l.location,direction:ss.normalize(ss.lerp(l.direction,n,t))})),(i=>this.xS(t,i)),0,u,!0,s)),Math.abs(a.left-a.right)>u&&(l=a.left<a.right?Jl(0,c,(t=>({location:l.location,direction:ss.normalize(ss.lerp(l.direction,r,t))})),(i=>this.MS(t,i)),0,u,!0,s):Jl(0,c,(t=>({location:l.location,direction:ss.normalize(ss.lerp(l.direction,h,t))})),(i=>this.MS(t,i)),0,u,!0,s)),l}SS(t,i){const s=this.bS(t,!0,i);return Math.min(s.left+s.right,s.top+s.bottom)}MS(t,i){const s=this.bS(t,!1,i);return Math.abs(s.left-s.right)}xS(t,i){const s=this.bS(t,!1,i);return Math.abs(s.top-s.bottom)}bS(t,i,s){const e=vs(this._S(t,i,s).map((t=>pt(t,this.hS,this.rS))));return{left:e.min.x,right:this.rS.x.getInnerEnd()-e.max.x,top:this.rS.y.getInnerEnd()-e.max.y,bottom:e.min.y}}_S(t,i,s){const e=this.nS,h=l(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),r=l(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),n=[],o=i?16:4,a=(h.x+r.x)/2,u=(h.z+r.z)/2,c=Math.sqrt(2)*(r.x-a),d=Math.sqrt(2)*(r.z-u);return[h.y,r.y].forEach((t=>{for(let i=0;i<o;i+=1){const s=Math.PI/4+2*Math.PI*i/o,e=a+Math.cos(s)*c,h=u+Math.sin(s)*d;n.push({x:e,y:t,z:h})}})),n.map((t=>this.ev(t,s))).filter((t=>void 0!==t))}fS(t,i,s){const e=ss.length(s.location),h=this.wS(t,i);return e<h.min?{direction:s.direction,location:ss.multiply(s.direction,-h.min)}:e>h.max?{direction:s.direction,location:ss.multiply(s.direction,-h.max)}:s}wS(t,i){return{min:("perspective"===i?.8:.5)*Math.sqrt(t.x**2+t.y**2+t.z**2),max:3*Math.sqrt(t.x**2+t.y**2+t.z**2)}}AS(t){const i=l(0,1,0),s=ss.normalize(ss.cross(i,ss.multiply(t,-1)));let e=ss.cross(s,t);return e.y=Math.abs(e.y),e=ss.normalize(e),{Right:s,Up:e,Down:ss.multiply(e,-1),Left:ss.multiply(s,-1)}}gS(t){const i={x:0,y:1,z:0},s=ss.angle(t,i),e=ss.angle(t,ss.multiply(i,-1));return Math.min(s,e)}pS(t,i,s){return{location:ss.lerp(t.location,i.location,s),direction:ss.normalize(ss.lerp(t.direction,i.direction,s))}}yS(t){return this.Kv=t,this}CS(){return this.Kv}}const Ql=(t,i,s,e,h,r,n,o)=>{let a,l=0,u=(i+t)/2;do{const o=s(u);if(a={value:u,result:o,score:e(o)},Math.abs(a.score-h)<=r)break;const c=a.score>h;c&&"linear"===n||!c&&"reversed"===n?(u=(a.value+t)/2,i=a.value):(u=(a.value+i)/2,t=a.value),l+=1}while(l<o);return a.result},Jl=(t,i,s,e,h,r,n,o)=>{let a,l=0,u=t;do{const c=s(u),d=e(c);if(void 0===a||Math.abs(d-h)<Math.abs(a.score-h)){if(a={value:u,result:c,score:e(c)},Math.abs(a.score-h)<=r)break}else if(n)break;l+=1,u+=1/(o-1)*(i-t)}while(l<o);return a.result};class Kl extends Vl{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.ws="Surface Grid Series 3D",this.kS={},this.Iv=!1,this.Kd=()=>Di(this.Fe),this.Av=kn;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.chart.getSeries().length;this.Fe=Ri(this.qi.surfaceGridSeries3DFillStyle,n),this.TS=Ri(this.qi.surfaceGridSeries3DWireframeStyle,n);const o={heatmapDataType:"intensity",dataOrder:e.dataOrder||"columns",columns:e.columns,rows:e.rows};this.qn=o,this.Ka=this.Wp.IS(o).Le(this.Fe).FS(this.TS).Mv(this.Av).cs(this.getHighlight()),this.fs(this.Ka),this.setHighlightOnHover(!1)}Ji(t,i){const s=null==t?void 0:t.dataPoint;if(s)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.Mg,axisLocation:s},...s,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:Z(this.Fe)?this.Fe.lut:void 0}}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe})}PS(){const t=this.kS.start||{x:0,z:0};let i;i=this.kS.end?{x:(this.kS.end.x-t.x)/this.qn.columns,z:(this.kS.end.z-t.z)/this.qn.rows}:this.kS.step?this.kS.step:{x:1,z:1},this.Ka.DS(t,i),this.chart.us.xs()}setStart(t){return this.kS.start=t,this.PS(),this}getStart(){return this.Ka.BS().start}setStep(t){return this.kS.step=t,this.PS(),this}getStep(){return this.Ka.BS().step}setEnd(t){return this.kS.end=t,this.PS(),this}getEnd(){return this.Ka.BS().end}setFillStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.Ka.Le(this.Fe),this.Wp.xs(),this}getFillStyle(){return this.Fe}setWireframeStyle(t){return this.TS="function"==typeof t?t(this.TS):t,this.Ka.FS(this.TS),this.Wp.xs(),this}getWireframeStyle(){return this.Ka.LS()}setIntensityInterpolation(t){return t=t||"disabled",this.Ka.RS(t),this.Wp.xs(),this}getIntensityInterpolation(){return this.Ka.ES()}invalidateIntensityValues(t){if(this.Iv&&this.chart.us.Qn(Yo.Pf),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.qn.dataOrder?t.length:t[0].length,rows:"rows"===this.qn.dataOrder?t.length:t[0].length},s="columns"===this.qn.dataOrder?this.qn.columns:this.qn.rows,e="columns"===this.qn.dataOrder?this.qn.rows:this.qn.columns;if(i.x>s||i.y>e){if(!0===this.chart.wA.so){const t=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.qn.columns}x${this.qn.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;Yt.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.Ka.zS({type:"intensity",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.qn.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.qn.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.qn.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.qn.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.qn.dataOrder?this.qn.columns:this.qn.rows)-1,o=("columns"===this.qn.dataOrder?this.qn.rows:this.qn.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.chart.wA.so){const s=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.qn.columns}x${this.qn.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Yt.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),u=Math.max(e-n,0),c=Math.max(r-o,0),d=i.primary-(a+u),f=[];if(0===l&&0===c)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),h=Math.max(h,0)}this.Ka.zS({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.Wp.xs(),this.Iv=!0,this}invalidateHeightMap(t){if(this.Iv&&this.chart.us.Qn(Yo.Pf),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.qn.dataOrder?t.length:t[0].length,rows:"rows"===this.qn.dataOrder?t.length:t[0].length},s="columns"===this.qn.dataOrder?this.qn.columns:this.qn.rows,e="columns"===this.qn.dataOrder?this.qn.rows:this.qn.columns;if(i.x>s||i.y>e){if(!0===this.chart.wA.so){const t=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.qn.columns}x${this.qn.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;Yt.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.Ka.VS({type:"y",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.qn.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.qn.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.qn.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.qn.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.qn.dataOrder?this.qn.columns:this.qn.rows)-1,o=("columns"===this.qn.dataOrder?this.qn.rows:this.qn.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.chart.wA.so){const s=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.qn.columns}x${this.qn.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Yt.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),u=Math.max(e-n,0),c=Math.max(r-o,0),d=i.primary-(a+u),f=[];if(0===l&&0===c)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),h=Math.max(h,0)}this.Ka.VS({type:"y",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.Wp.xs(),this.Iv=!0,this}setCullMode(t){return this.Ka.OS("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.Ka.NS()}wv(){}Ee(){}Fp(){}fv(){return this.yv&&this.getVisible()}Ve(t,i){t.cs(i),this.Wp.xs()}}class ql extends Vl{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.ws="Surface Grid Series 3D",this.kS={},this.Kd=()=>Di(this.Fe),this.chart.us.Qn(Yo.Pf),this.Av=kn;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.chart.getSeries().length;this.Fe=Ri(this.qi.surfaceScrollingGridSeries3DFillStyle,n),this.TS=Ri(this.qi.surfaceScrollingGridSeries3DWireframeStyle,n);const o={heatmapDataType:"intensity",scrollDimension:e.scrollDimension||"columns",columns:e.columns,rows:e.rows};this.qn=o,this.Ka=this.Wp.GS(o).Le(this.Fe).FS(this.TS).Mv(this.Av).cs(this.getHighlight()),this.fs(this.Ka),this.setHighlightOnHover(!1)}Ji(t,i){const s=null==t?void 0:t.dataPoint;if(s)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.Mg,axisLocation:s},...s,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:Z(this.Fe)?this.Fe.lut:void 0}}PS(){const t=this.kS.start||{x:0,z:0};let i;i=this.kS.step?this.kS.step:{x:1,z:1},this.Ka.DS(t,i),this.chart.us.xs()}setStart(t){return this.kS.start=t,this.PS(),this}getStart(){return this.Ka.BS().start}setStep(t){return this.kS.step=t,this.PS(),this}getStep(){return this.Ka.BS().step}setFillStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.Ka.Le(this.Fe),this.Wp.xs(),this}getFillStyle(){return this.Fe}setWireframeStyle(t){return this.TS="function"==typeof t?t(this.TS):t,this.Ka.FS(this.TS),this.Wp.xs(),this}getWireframeStyle(){return this.Ka.LS()}setIntensityInterpolation(t){return t=t||"disabled",this.Ka.RS(t),this.Wp.xs(),this}getIntensityInterpolation(){return this.Ka.ES()}clear(){return this.Ka.Vt(),this.Wp.xs(),this}addValues(t){if(!t)return this;let i=t.yValues,s=t.intensityValues;if(!i&&!s)return this;if(i&&0===i.length&&(i=void 0),s&&0===s.length&&(s=void 0),i){const t=i[0].length,s=0+t-1,e="columns"===this.qn.scrollDimension?this.qn.rows:this.qn.columns;if(s>e-1){if(!0===this.chart.wA.so){const i=`SurfaceScrollingGridSeries3D.addValues input yValues overflow.\nGrid was created with ${e} ${"columns"===this.qn.scrollDimension?"rows":"columns"}, input yValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Yt.console.warn(i)}const s=[];for(let t=0;t<i.length;t+=1)s[t]=i[t].slice(0,e+1);i=s}}if(s){const t=s[0].length,i=0+t-1,e="columns"===this.qn.scrollDimension?this.qn.rows:this.qn.columns;if(i>e-1){if(!0===this.chart.wA.so){const i=`SurfaceScrollingGridSeries3D.addValues intensityValues overflow.\nGrid was created with ${e} ${"columns"===this.qn.scrollDimension?"rows":"columns"}, input intensityValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Yt.console.warn(i)}const i=[];for(let t=0;t<s.length;t+=1)i[t]=s[t].slice(0,e+1);s=i}}if(i&&s){const t=i.length,e=s.length;if(t!==e){if(!0===this.chart.wA.so){const i=`SurfaceScrollingGridSeries3D.addValues input yValues and intensityValues size does not match.\nyValues: ${t}\nintensityValues: ${e}\nData will be automatically clipped according to the smaller supplied sample. This can result in sub-optimal performance.`;Yt.console.warn(i)}t>e?i=i.slice(0,e):s=s.slice(0,t)}}const e=i?i.length:null==s?void 0:s.length,h=i?i[0].length:null==s?void 0:s[0].length;return this.Ka.US({startPrimary:0,startSecondary:0,lengthPrimary:e,lengthSecondary:h,heightMapValues:i,intensityValues:s}),this.Wp.xs(),this}setCullMode(t){return this.Ka.OS("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.Ka.NS()}wv(){}Ee(){}Fp(){}fv(){return this.yv&&this.getVisible()}Ve(t,i){t.cs(i),this.Wp.xs()}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe})}}const tu=t=>!!(t&&"object"==typeof t&&"id"in t&&"chart"in t&&t.chart instanceof nu),iu=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y&&"z"in t&&"number"==typeof t.z);class su extends Vl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.ws="Mesh Model 3D",this.WS=new Float32Array,this.ft={x:1,y:1,z:1},this.YS={x:0,y:0,z:0},this.HS={x:0,y:0,z:0},this.XS={x:0,y:0,z:0},this.$S={w:1,x:0,y:0,z:0},this.jS={x:0,y:0,z:0},this.sl=ns,this.Kd=()=>Di(this.getFillStyle());const n=void 0!==(null==h?void 0:h.automaticColorIndex)?h.automaticColorIndex:this.chart.getSeries().length;this.Ka=this.Wp.ZS()._v(this.mv).Le(Ri(this.qi.meshModel3DFillStyle||this.qi.pointSeriesFillStyle,n)).cs(this.getHighlight()),this.fs(this.Ka)}Ji(t,i){const s=this.getFillStyle();return qi({series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:Z(s)?s.lut:void 0},{cursorPosition:0,index:0,x:0,y:0,z:0,value:0},(()=>{const e=this.Ka.QS(t,i);if(e)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.Mg,axisLocation:e.coordAxis},...e.coordAxis,index:e.index,value:e.value,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:Z(s)?s.lut:void 0}}))}setModelGeometry(t){const{indices:i,vertices:s,normals:e}=t;let h=hs,r=es,n=hs,o=es,a=hs,l=es;for(let t=0;t<s.length;t+=3){const i=s[t],e=s[t+1],u=s[t+2];h=Math.max(h,i),r=Math.min(r,i),n=Math.max(n,e),o=Math.min(o,e),a=Math.max(a,u),l=Math.min(l,u)}this.sl={min:{x:r,y:o,z:l},max:{x:h,y:n,z:a}};for(let t=0;t<s.length;t+=3)s[t]-=this.sl.min.x,s[t+1]-=this.sl.min.y,s[t+2]-=this.sl.min.z;return this.jS={x:this.sl.max.x-this.sl.min.x,y:this.sl.max.y-this.sl.min.y,z:this.sl.max.z-this.sl.min.z},this.WS=s instanceof Float32Array?s:new Float32Array(s),this.checkedNormals=e&&!Number.isNaN(e[0])?e instanceof Float32Array?e:new Float32Array(e):void 0,this.checkedNormals||this.setColorShadingStyle(kn),this.Ka.JS({vertices:this.WS,normals:this.checkedNormals,indices:i instanceof Uint16Array?i:new Uint16Array(i),modelSize:this.jS}),this.chart.us.xs(),this}setVertexValues(t){return this.Ka.KS(t),this.chart.us.xs(),this}setScale(t){const i={x:"number"==typeof t?t:(null==t?void 0:t.x)||1,y:"number"==typeof t?t:(null==t?void 0:t.y)||1,z:"number"==typeof t?t:(null==t?void 0:t.z)||1};return this.ft=i,this.Ka.qS(i),this.chart.us.xs(),this}getScale(){return this.ft}setModelLocation(t){return this.HS=t,this.Ka.tb(t),this.chart.us.xs(),this}getModelLocation(){return this.HS}setModelAlignment(t){return this.YS=t,this.Ka.ib(t),this.chart.us.xs(),this}getModelAlignment(){return this.YS}setModelRotation(t){return this.setModelRotationEuler(t)}getModelRotation(){return this.XS}setModelRotationEuler(t){const i={x:Vs(t.x),y:Vs(t.y),z:Vs(t.z)};return this.XS=i,this.Ka.sb(this.XS),this.chart.us.xs(),this}getModelRotationEuler(){return this.XS}setModelRotationQuaternion(t){return this.$S=t,this.Ka.eb(this.$S),this.chart.us.xs(),this}getModelRotationQuaternion(){return this.$S}setBackfaceCullingMode(t){return this.Ka.hb(t),this.chart.us.xs(),this}getBackfaceCullingMode(){return this.Ka.rb()}setFillStyle(t){return this.Ka.Le(t),this.chart.us.xs(),this}getFillStyle(){return this.Ka.Qh()}setColorShadingStyle(t){return this.checkedNormals||t!==In?super.setColorShadingStyle(t):(console.warn("Phong shading style is not supported without normals. Switching to Simple shading style."),super.setColorShadingStyle(new Pn.Simple))}fv(){return!1}Ve(t,i){t.cs(i),this.chart.us.xs()}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.getFillStyle()})}}class eu extends Ka{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r),this.chart=n,this.nb=this.chart.getDefaultAxisX().addCustomTick().setVisible(!1).setGridStrokeStyle(r.cursor3DGridStrokeStyleX).setTickStyle(r.cursor3DTickStrokeStyleX).setTextFillStyle(r.cursor3DTickLabelFillStyleX).setTextFont(r.cursor3DTickLabelFontX).setBackgroundFillStyle(r.cursor3DTickLabelBackgroundFillStyleX).setBackgroundStrokeStyle(r.cursor3DTickLabelBackgroundStrokeStyleX).setPadding(r.cursor3DTickLabelPaddingX),this.ob=this.chart.getDefaultAxisY().addCustomTick().setVisible(!1).setGridStrokeStyle(r.cursor3DGridStrokeStyleY).setTickStyle(r.cursor3DTickStrokeStyleY).setTextFillStyle(r.cursor3DTickLabelFillStyleY).setTextFont(r.cursor3DTickLabelFontY).setBackgroundFillStyle(r.cursor3DTickLabelBackgroundFillStyleY).setBackgroundStrokeStyle(r.cursor3DTickLabelBackgroundStrokeStyleY).setPadding(r.cursor3DTickLabelPaddingY),this.ab=this.chart.getDefaultAxisZ().addCustomTick().setVisible(!1).setGridStrokeStyle(r.cursor3DGridStrokeStyleZ).setTickStyle(r.cursor3DTickStrokeStyleZ).setTextFillStyle(r.cursor3DTickLabelFillStyleZ).setTextFont(r.cursor3DTickLabelFontZ).setBackgroundFillStyle(r.cursor3DTickLabelBackgroundFillStyleZ).setBackgroundStrokeStyle(r.cursor3DTickLabelBackgroundStrokeStyleZ).setPadding(r.cursor3DTickLabelPaddingZ)}setTickX(t){return t(this.nb),this.chart.us.xs(),this}setTickY(t){return t(this.ob),this.chart.us.xs(),this}setTickZ(t){return t(this.ab),this.chart.us.xs(),this}setTicks(t){return t(this.nb),t(this.ob),t(this.ab),this.chart.us.xs(),this}dispose(){return super.dispose(),this.nb.dispose(),this.ob.dispose(),this.ab.dispose(),this}Ee(){return this.nb.setVisible(this.ji&&this.yy),this.ob.setVisible(this.ji&&this.yy),this.ab.setVisible(this.ji&&this.yy),super.Ee()}setPosition(t){this.yy=!0;const i=this.renderingScale,s=La(t.resultTableScale,i),e=s===this.scale?t.resultTable:pt(t.resultTable,s,this.scale);this.tm.setPosition(e),this.nb.setValue(t.axisLocation.x),this.ob.setValue(t.axisLocation.y),this.ab.setValue(t.axisLocation.z);let h=this.Am[0];if(!h){const t=new eo(this.Ls,this.renderingScale,this.scale,Zt,this.qi).setMouseInteractions(!1).setFillStyle(this.qi.cursorPointMarkerFillStyle).setSize(this.qi.cursorPointMarkerSize).setShape(this.qi.cursorPointMarkerShape);h={pointMarker:t,targetVisible:!0},this.Am.push(h),this.pm.forEach((i=>i(t)))}return h.pointMarker.setPosition(e),this.chart.us.xs(),this}}class hu{constructor(t,i){this.Mm=[],this._m=(t,i)=>(this.Mm.forEach((s=>s(t,i))),t),this.addStyler=t=>new hu(this.Sm,this.Mm.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new hu(t,this.Mm.map((t=>t))),this.wm=(t,i,s,e,h,r)=>this._m(new eu(t,i,s,e,this.Sm,h,r),h),this.Sm=t,this.Mm=i}}const ru=new hu(qn,[(t,i)=>{qa(t)}]);class nu extends $l{constructor(t,i,s,e,h,r,o){var a;super(t,i,s,i.zy("chart3D bg",0),e,i.us.qi.chart3DBackgroundFillStyle,i.us.qi.chart3DBackgroundStrokeStyle,i.us.qi.chart3DTitleFont,i.us.qi.chart3DTitleFillStyle,r),this.lb=1,this.ub=[],this.cb=2,this.fb=!0,this.Ab=!0,this.gb=!0,this.yb=0,this.coordsAxis={id:"axes",chart:this},this.coordsWorld={id:"world",chart:this},this.pn=[],this.Cn=()=>{const t=this.Wp.mb();this.vb.pb(t),this.Sb.pb(t);const i=this.bb.viewportChanged(this.xb());i&&this.Mb(i),this.us.xs()},this._b=!1,this.vv=(t,i,s,e,h)=>{if(this._b=!0,this.gb){const t=h;this.ub.push({type:"rotate",rotation:t}),this.us.xs(),mi(i)}},this.Sv=(t,i,s,e,h)=>{this._b=!1},this.pv=(t,i)=>{if(this.Ab){if(this.fb)Math.sign(this.yb)!==Math.sign(i.deltaY)?this.yb=Ei(i):this.yb+=Ei(i);else{const t=Ei(i);this.ub.push({type:"wheel-zoom",deltaY:t})}this.us.xs(),mi(i)}},this.us.Qn(Yo.Mf),this.wh.vr("Chart3D"),this.wb=s.d3(),this.wb.x.K(-1,1),this.wb.y.K(-1,1),this.wb.z.K(-1,1),this.Wp=i.Cb("chart3D layer3D",0,this.wb),this.vb=i.kb("chart3D series bg",0),this.Sb=i.ip("chart3D axis ui",1),this.Tb={x:new Dl(this,(a=()=>this.Nv,{...Rl(a,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.Br().x)),zp:t=>t.x,nv:(t,i)=>({x:t.x,y:i.y,z:i.z}),lf:l(0,-1,0),ov:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:l(0,i.y,i.z),gridlinePositionB:l(0,i.y,-i.z),gridlinePositionC:l(0,-i.y,-i.z)}},uv:()=>!0,cv:()=>!1,rv:()=>!1}),this.wb.x,this.qi,this.Wp,this.Sb,this.Mg,!1,this.es),y:new Dl(this,El((()=>this.Nv)),this.wb.y,this.qi,this.Wp,this.Sb,this.Mg,!1,this.es),z:new Dl(this,zl((()=>this.Nv)),this.wb.z,this.qi,this.Wp,this.Sb,this.Mg,!1,this.es)},this.Fb=this.Wp.Ap([xl.InternalUI]).setMouseInteractions(!1),this.setBoundingBoxStrokeStyle(this.qi.chart3DBoundingBoxStrokeStyle),this.Hv=this.vb.dc(this.us.ft,Or.Simple).Le(this.qi.chart3DSeriesBackgroundFillStyle).Be(dt).setMouseInteractions(!0),this.Xv=this.vb.dc(this.us.ft,Or.Simple).Le(O).Be(this.qi.chart3DSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.Yv(this.Hv,this.Xv),this.Ib({x:1,y:1,z:1},!0),this.bb=new Zl(this.us.ft,this.Mg,this.wb,((t,i)=>(i&&this.Mb(i),this.Wp.ev(t)))),this.Pb=this.bb.getDefaultCameraConfiguration(this.Db(this.Bb),this.getProjection()),this.Mb(this.Pb);const u=qt(o?o.cursorBuilder:void 0,ru),c=i.ep();let d;this.hp=Ya(this,c,u.wm(c,this.Mg,this.Mg,Zt,this.qi,this),this,"show-pointed",ou,(()=>0)),this.bv=ve(new xe(((t,i,s)=>{d={locationOne:i,locationTwo:s,cameraLocation:this.Wp.getCameraLocation()}}),((t,i,s,e,h,r)=>{if(!this.gb&&!this.Ab)return;const o=(d.locationOne.x-d.locationTwo.x)**2+(d.locationOne.y-d.locationTwo.y)**2,a=(i.x-s.x)**2+(i.y-s.y)**2,l=ss.length(d.cameraLocation),u=o/a*l,c=n((e.x+h.x)/2,(e.y+h.y)/2);this.ub.push({type:"rotate+zoom",rotation:this.gb?c:{x:0,y:0},cameraDistance:this.Ab?u:l}),this.us.xs(),mi(r)}),(t=>{})),new be((t=>{}),((t,i,s,e,h)=>{if(this.gb){const t=e;this.ub.push({type:"rotate",rotation:t}),this.us.xs(),mi(h)}}),(t=>{}))),this.onBackgroundTouchStart(this.bv.onTouchStart),this.onBackgroundTouchMove(this.bv.onTouchMove),this.onBackgroundTouchEnd(this.bv.onTouchEnd),this.onSeriesBackgroundTouchStart(this.bv.onTouchStart),this.onSeriesBackgroundTouchMove(this.bv.onTouchMove),this.onSeriesBackgroundTouchEnd(this.bv.onTouchEnd),this.onBackgroundMouseDrag(this.vv),this.onBackgroundMouseDragStop(this.Sv),this.onBackgroundMouseWheel(this.pv),this.onBackgroundMouseDown(((t,i)=>{mi(i)})),this.onSeriesBackgroundMouseDrag(this.vv),this.onSeriesBackgroundMouseDragStop(this.Sv),this.onSeriesBackgroundMouseWheel(this.pv),this.onSeriesBackgroundMouseDown(((t,i)=>{mi(i)})),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled)),this.onResize(this.Cn),this.Cn(),this.Ey(h,this.Mg)}setProjection(t){this.Wp.Lb(t);const i=this.bb.projectionChanged(this.xb(),t);return i&&this.Mb(i),this.us.xs(),this}getProjection(){return this.Wp.Rb()}setCursor(t){return this.hp.setCursor(t),this}getCursor(){return this.hp.getCursor()}setCursorMode(t){return this.hp.setCursorMode(t),this}getCursorMode(){return this.hp.getCursorMode()}setCustomCursor(t){return this.hp.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.hp.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.hp.offCursorTargetChanged(t)}setCursorFormatting(t){return this.hp.setCursorFormatting(t),this}getCursorFormatting(){return this.hp.getCursorFormatting()}addCursor(t=ru){const i=this.wy(),s=t.wm(i,this.Mg,this.Mg,this.Sy(i),this.qi,this);return this.By(s),s}addPointSeries(t){const i=new(t&&t.type||Yl)(this,this.Uv,this.Wp,this.qi,this.us.es,t);return this.$v(i),i}addLineSeries(t){const i=new Gl(this,this.Uv,this.Wp,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,this.us.es);return this.$v(i),i}addPointLineSeries(t){const i=new Ul(this,this.Uv,this.Wp,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,this.us.es);return this.$v(i),i}addSurfaceGridSeries(t){const i=new Kl(this,this.Uv,this.Wp,t,this.qi,this.us.es);return this.$v(i),i}addSurfaceScrollingGridSeries(t){const i=new ql(this,this.Uv,this.Wp,t,this.qi,this.us.es);return this.$v(i),i}addBoxSeries(t){const i=new Ol(this,this.Uv,this.Wp,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,this.us.es);return this.$v(i),i}addMeshModel(t){const i=new su(this,this.Uv,this.Wp,this.qi,t,this.us.es);return this.$v(i),i}translateCoordinate(t,i,s){if(tu(i)||tu(s)||iu(t)){if(tu(i)&&tu(s)&&iu(t)){if("axes"===i.id&&"world"===s.id)return this.Wp.Eb(t);if("world"===i.id&&"axes"===s.id)return this.Wp.zb(t);if(i.id===s.id)return t}if(tu(i)&&ne(s)&&iu(t)){const i=this.Wp.ev(t);return i?this.us.Uo({engineX:i.x,engineY:i.y}):{clientX:-1,clientY:-1}}if(tu(i)&&ae(s)&&iu(t)){const i=this.Wp.ev(t);return i?pt(i,this.us.ft,this.Mg):{clientX:-1,clientY:-1}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}return Ra(t,i,s,this.Mg,this.us)}getDefaultAxisX(){return this.Tb.x}getDefaultAxisY(){return this.Tb.y}getDefaultAxisZ(){return this.Tb.z}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}get axisZ(){return this.getDefaultAxisZ()}get zAxis(){return this.getDefaultAxisZ()}getDefaultAxes(){return[this.Tb.x,this.Tb.y,this.Tb.z]}setCameraLocation(t){let i={location:t,direction:ss.normalize(ss.multiply(t,-1))};const s=this.bb.cameraLocationChanged(this.xb(i));return s&&(i=s),this.Mb(i),this.us.xs(),this}getCameraLocation(){return this.Wp.getCameraLocation()}getCameraDirection(){return this.Wp.getCameraDirection()}setCameraAutomaticFittingEnabled(t){this.bb.yS(t);const i=this.bb.cameraLocationChanged(this.xb());return i&&this.Mb(i),this}getCameraAutomaticFittingEnabled(){return this.bb.CS()}onCameraChange(t){return this.L.on("cameraChange",t)}offCameraChange(t){return this.L.off(t,"cameraChange")}setBoundingBoxStrokeStyle(t){return this.Fb.We(t).jp(kl(this.Fb.Su())),this.Wp.xs(),this}getBoundingBoxStrokeStyle(){return this.Fb.Su()}setBoundingBox(t){return this.Ib(t,!1),this}Ib(t,i){this.Bb=t;const s=this.Db(t);if(this.wb.x.tt(s.x),this.wb.y.tt(s.y),this.wb.z.tt(-s.z),!i){const t=this.bb.boundingBoxChanged(this.xb());t&&this.Mb(t)}this.us.xs()}getBoundingBox(){return this.Bb}Ee(t){if(Ga.Hy(this.wh,this.Vy),0!==this.yb){const i=this.yb*t*.006;this.ub.push({type:"wheel-zoom",deltaY:i}),this.yb=Math.sign(this.yb)*Math.max(Math.abs(this.yb)-.01*t,0),0!==this.yb&&this.us.xs(!0)}const i=this.getCameraDirection();if(this.ub.length>0){const t=this.bb.applyCameraInteractions(this.xb(),this.ub);t&&this.Mb(t),this.ub.length=0}this.Vb&&ss.equals(this.Vb.location,this.Pb.location)&&ss.equals(this.Vb.direction,this.Pb.direction)||this.L.emit("cameraChange",this,this.getCameraLocation()),this.Vb=this.Pb,super.Ee(t);for(let t=0;t<this.Nv.length;t+=1)this.Nv[t].wv();for(let t=0;t<this.Nv.length;t+=1)this.Nv[t].Ee();this.Tb.x.Lr(),this.Tb.y.Lr(),this.Tb.z.Lr(),this.Tb.x.Ee(i),this.Tb.y.Ee(i),this.Tb.z.Ee(i),this.hp.Ee(this._b,this.Nv,void 0),super.Ry();const s=this.wb,e=l(s.x.getInnerStart(),s.y.getInnerStart(),s.z.getInnerStart()),h=l(s.x.getInnerEnd(),s.y.getInnerEnd(),s.z.getInnerEnd());this.Fb.Vt().ml([l(h.x,e.y,e.z),l(h.x,h.y,e.z),l(h.x,h.y,h.z),l(h.x,e.y,h.z),l(e.x,e.y,h.z),l(e.x,h.y,h.z),l(h.x,h.y,h.z),l(h.x,h.y,e.z),l(e.x,h.y,e.z),l(e.x,h.y,h.z),l(e.x,e.y,h.z),l(e.x,e.y,e.z)]);const r=[l(e.x,e.y,e.z),l(h.x,e.y,e.z),l(e.x,h.y,e.z),l(h.x,h.y,e.z),l(e.x,e.y,h.z),l(h.x,e.y,h.z),l(e.x,h.y,h.z),l(h.x,h.y,h.z)].map((t=>this.Wp.ev(t))),n=this.Wp.ev(l((e.x+h.x)/2,(e.y+h.y)/2,(e.z+h.z)/2)),o=Ci(r,n),a=[];for(let t=0;t<o.length;t+=1){const i=o[t];Ms(i,n,o[t>0?t-1:o.length-1],o[t<o.length-1?t+1:0])||a.push(i)}const u=Ci(a,n);this.Hv.Tl(u),this.Xv.Tl(u);for(let t=0;t<this.Nv.length;t+=1)this.Nv[t].Fp()}dispose(){return this.pn.forEach((t=>{t()})),this.pn.length=0,this.wb.W(),this.Wp.W(),this.Sb.W(),this.vb.W(),this.hp.W(),super.dispose()}Z(){return this.wb.x.Z(),this.wb.y.Z(),this.wb.z.Z(),super.Z()}J(){return super.J()}Mb(t){this.Wp.setCameraLocation(t.location).setCameraDirection(t.direction).setLightLocation(ss.addVec(t.location,ss.multiply(t.direction,-this.cb))),this.Pb=t,this.us.xs()}Db(t){return ss.divide(t,ss.length(t)/this.lb)}xb(t=this.Pb){return{boundingBox:this.Db(this.Bb),cameraLocation:t.location,cameraDirection:t.direction,projection:this.getProjection()}}setMouseInteractions(t){return this.setMouseInteractionZoom(t).setMouseInteractionRotate(t)}setMouseInteractionZoom(t){return this.Ab=t,this}getMouseInteractionZoom(){return this.Ab}setMouseInteractionRotate(t){return this.gb=t,this}getMouseInteractionRotate(){return this.gb}forEachAxis(t){return t(this.Tb.x),t(this.Tb.y),t(this.Tb.z),this}getSeries(){return this.Nv}getMinimumSize(){}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationZoom(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}setAnimationZoom(t){return this.fb=!!t,this}getAnimationZoom(){return this.fb}}const ou=(t,i,s)=>{var e,h;return wt(i)?Wa(i,[[i.series],[t.getDefaultAxisX().getTitle()||"X","",{text:ce(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:ce(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],[t.getDefaultAxisZ().getTitle()||"Z","",{text:ce(i.axisZ.formatValue(i.z),i.axisZ),font:{weight:"bold"}}],void 0!==i.intensity?["Value","",{text:ce(i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]:[]]):Tt(i)?Wa(i,[[i.series],void 0!==i.value?["Value","",{text:ce(i.value.toFixed(2),null===(h=i.lut)||void 0===h?void 0:h.units),font:{weight:"bold"}}]:[]]):Wa(i,[[i.series],[t.getDefaultAxisX().getTitle()||"X","",{text:ce(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:ce(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],[t.getDefaultAxisZ().getTitle()||"Z","",{text:ce(i.axisZ.formatValue(i.z),i.axisZ),font:{weight:"bold"}}]])},au={Column:Ao,Row:go};class lu extends Va{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.Ob=new Map,this.Nb=this.addUIElement(au.Row).setPosition({x:0,y:100}).setOrigin(qe.LeftTop).setBackground((t=>t.setFillStyle(O).setStrokeStyle(dt)))}add(t,i){return(t instanceof Na?[t]:t instanceof YA?t.getCells().filter((t=>t.panel instanceof Na)).map((t=>t.panel)):[]).forEach((t=>{const s=this.Nb.addElement(Wo.VerticalLegendBox).setBackground((t=>t.setFillStyle(O).setStrokeStyle(dt))).add(t,i).setTitle(t.getTitle());this.Ob.set(t,s)})),this.us.xs(),this}setLegendBoxes(t){return this.Ob.forEach(((i,s)=>t(i,s))),this}getMinimumSize(){return super.getMinimumSize()||this.Nb.getSize()}}const uu={World:"World",USA:"USA",NorthAmerica:"NorthAmerica",SouthAmerica:"SouthAmerica",Canada:"Canada",Europe:"Europe",Asia:"Asia",Africa:"Africa",Australia:"Australia"},cu=(t,i)=>!(!i.name||t.name.toLowerCase()!==i.name.toLowerCase())||"ISO_A3"in t&&"ISO_A3"in i&&t.ISO_A3.toLowerCase()===i.ISO_A3.toLowerCase(),du=(t,i)=>{let s=i.geometry;return s=fu(t,i,s),s=Au(t,i,s),s},fu=(t,i,s)=>{if(t===uu.Asia){const t=[];for(let i=0;i<s.length;i+=1){t[i]=[];const e=s[i],h=t[i];for(let t=0;t<e.length;t+=1){const i=e[t];i.x<-100?h[t]={x:i.x+360,y:i.y}:h[t]=i}}return t}return s},Au=(t,i,s)=>{const e=i.name.toLowerCase();let h;if(t===uu.USA&&("alaska"===e?h={translate:{x:55,y:-25},scale:{x:.16,y:.16}}:"hawaii"===e&&(h={translate:{x:48,y:7},scale:{x:1,y:1}})),h){const{translate:t,scale:r}=h,n=vs(Kt(s)),o=[];for(let i=0;i<s.length;i+=1){o[i]=[];const h=s[i],a=o[i];for(let i=0;i<h.length;i+=1){const s=h[i];let o=s.x;"alaska"===e&&1===Math.sign(o)&&(o=-180-(180-o)),a[i]={x:t.x+(o-n.min.x)*r.x+n.min.x,y:t.y+(s.y-n.min.y)*r.y+n.min.y}}}return i.outlier=!0,i.transform={...h,vertexBoundaries:n},o}return s},gu={World:{min:{x:-180,y:-90},max:{x:180.0000000000002,y:83.63410065300012}},Europe:{min:{x:-25,y:34},max:{x:40,y:70}},Africa:{min:{x:-17,y:-40},max:{x:52,y:37.37549753800012}},Asia:{min:{x:27,y:-10.922621351999808},max:{x:180.0000000000002,y:81.85871002800009}},NorthAmerica:{min:{x:-179.1435033839999,y:5.515082098000121},max:{x:-50,y:83.11652252800009}},SouthAmerica:{min:{x:-85,y:-55.9185042229998},max:{x:-35,y:15}},USA:{min:{x:-125,y:24},max:{x:-68,y:50}},Canada:{min:{x:-141.0181,y:41.7297},max:{x:-52.6194,y:75}},Australia:{min:{x:111,y:-43.6586},max:{x:155,y:-9.2199}}},yu={World:.6,Europe:1/1.4,Africa:1.3,Asia:.8,NorthAmerica:.9,SouthAmerica:1.5,USA:3/4,Canada:6/8,Australia:11/12};class mu extends Na{constructor(t,i,s,e,h,r,n){super(t,i,s,i.zy("mapChart bg",0),e,i.us.qi.mapChartBackgroundFillStyle,i.us.qi.mapChartBackgroundStrokeStyle,i.us.qi.mapChartTitleFont,i.us.qi.mapChartTitleFillStyle,n),this.Gb=[],this.ft=this.xy.d2({scaleXYConstructor:ee}),this.Hi=!0,this.Ub=this.qi.mapChartSeparateRegionFillStyle,this.Wb=this.qi.mapChartSeparateRegionStrokeStyle,this.gh=!0,this.Yb=0,this.Hb=!0,this.Xb=new Map,this.onMouseEnter=t=>this.L.on("mouseEnter",t),this.onMouseLeave=t=>this.L.on("mouseLeave",t),this.onMouseClick=t=>this.L.on("mouseClick",t),this.onMouseDoubleClick=t=>this.L.on("mouseDoubleClick",t),this.onMouseDown=t=>this.L.on("mouseDown",t),this.onMouseUp=t=>this.L.on("mouseUp",t),this.onMouseMove=t=>this.L.on("mouseMove",t),this.offMouseEnter=t=>this.L.off(t,"mouseEnter"),this.offMouseLeave=t=>this.L.off(t,"mouseLeave"),this.offMouseClick=t=>this.L.off(t,"mouseClick"),this.offMouseDoubleClick=t=>this.L.off(t,"mouseDoubleClick"),this.offMouseDown=t=>this.L.off(t,"mouseDown"),this.offMouseUp=t=>this.L.off(t,"mouseUp"),this.offMouseMove=t=>this.L.off(t,"mouseMove"),this.offMouseDragStart=t=>this.L.off(t,"mouseDragStart"),this.offMouseDrag=t=>this.L.off(t,"mouseDrag"),this.offMouseDragStop=t=>this.L.off(t,"mouseDragStop"),this.offMouseWheel=t=>this.L.off(t,"mouseWheel"),this.onMapDataReady=t=>{const i=this.L.on("mapDataReady",t);return this.$b&&Yt.setTimeout((()=>t())),i},this.onViewChange=t=>this.L.on("viewChange",t),this.jb=(t,i,s,e,h)=>{this.ft.x.tt(e).ii([this.Xt.left+this.Fa.left,this.Xt.right+this.Fa.right]),this.ft.y.tt(h).ii([this.Xt.bottom+this.Fa.bottom,this.Xt.top+this.Fa.top+Ga.Yy(this.wh,this.Vy)]),this.Zb&&this.Qb(this.Jb,this.ft,this.Zb)},this.Mt=(t,i)=>{const s=i;if(!s||!this.$b)return;const e=this.Kb(this.$b,s),h=null==e?void 0:e.region;h&&(this.getCursorMode()&&(this.qb(e),mi(t)),this.Hb&&this.us.ls.Cs(h,!0),this.tx=h,this.L.emit("mouseEnter",this,t,e))},this._t=(t,i)=>{const s=i;if(!s||!this.$b)return;const e=this.Kb(this.$b,s),h=null==e?void 0:e.region;this.ix(),h&&(this.Hb&&this.us.ls.Cs(h,!1),this.tx=void 0,this.L.emit("mouseLeave",this,t,e),t&&mi(t))},this.Ft=(t,i)=>{const s=i;if(!s||!this.$b)return;const e=this.Kb(this.$b,s),h=null==e?void 0:e.region;h&&(this.getCursorMode()&&(this.qb(e),mi(t)),this.tx=h,this.L.emit("mouseMove",this,t,e))},this.wt=(t,i)=>{const s=i;if(!s||!this.$b)return;const e=this.Kb(this.$b,s);this.L.emit("mouseClick",this,t,e)},this.Ct=(t,i)=>{const s=i;if(!s||!this.$b)return;const e=this.Kb(this.$b,s);this.L.emit("mouseDoubleClick",this,t,e)},this.kt=(t,i)=>{const s=i;if(!s||!this.$b)return;const e=this.Kb(this.$b,s);this.L.emit("mouseDown",this,t,e)},this.Tt=(t,i)=>{const s=i;if(!s||!this.$b)return;const e=this.Kb(this.$b,s);this.L.emit("mouseUp",this,t,e)},this.Pt=(t,i,s)=>{const e=s;if(!e||!this.$b)return;const h=this.Kb(this.$b,e);this.L.emit("mouseDragStart",this,t,i,h)},this.It=(t,i,s,e,h)=>{const r=h;if(!r||!this.$b)return;const n=this.Kb(this.$b,r);this.L.emit("mouseDrag",this,t,i,s,e,n)},this.Dt=(t,i,s,e)=>{const h=e;if(!h||!this.$b)return;const r=this.Kb(this.$b,h);this.L.emit("mouseDragStop",this,t,i,s,r)},this.Bt=(t,i)=>{const s=i;if(!s||!this.$b)return;const e=this.Kb(this.$b,s);this.L.emit("mouseWheel",this,t,e)},this.Lt=(t,i)=>{const s=i;if(!s||!this.$b)return;const e=this.Kb(this.$b,s),h=null==e?void 0:e.region;h&&(this.qb(e),this.Hb&&this.us.ls.Cs(h,!0),this.tx=h,this.L.emit("touchStart",this,t,e),mi(t))},this.Rt=(t,i)=>{const s=i;if(!s||!this.$b)return;const e=this.Kb(this.$b,s),h=null==e?void 0:e.region;h&&(this.qb(e),this.tx=h,this.L.emit("touchMove",this,t,e),mi(t))},this.Et=(t,i)=>{const s=i;if(!s||!this.$b)return;const e=this.Kb(this.$b,s),h=null==e?void 0:e.region;this.ix(),h&&(this.Hb&&this.us.ls.Cs(h,!1),this.tx=void 0,this.L.emit("touchEnd",this,t,e),mi(t))},this.us.Qn(Yo.wf),this.gh=!1!==(null==r?void 0:r.animationsEnabled),this.sx=i.ip("mapChart plotting",0),this.onResize(this.jb),this.wh.vr("Map Chart");const o=i.ep(),a=qt(r?r.cursorBuilder:void 0,al);this.hp=Ya(this,o,a.wm(o,this.uiScale,this.uiScale,Zt,this.qi),void 0,"show-pointed",vu,(()=>0)),this.hx=this.es.Dg(),this.Ey(h,this.uiScale),this.nx=this.sx.Jp(this.ft).setMouseInteractions(this.Hi).setMouseEnterEventHandler(((t,i,s)=>this.Mt(i,s))).setMouseLeaveEventHandler(((t,i,s)=>this._t(i,s))).setMouseClickEventHandler(((t,i,s)=>this.wt(i,s))).setMouseDoubleClickEventHandler(((t,i,s)=>this.Ct(i,s))).setMouseDownEventHandler(((t,i,s)=>this.kt(i,s))).setMouseUpEventHandler(((t,i,s)=>this.Tt(i,s))).setMouseMoveEventHandler(((t,i,s)=>this.Ft(i,s))).setMouseDragStartEventHandler(((t,i,s,e)=>this.Pt(i,s,e))).setMouseDragEventHandler(((t,i,s,e,h,r)=>this.It(i,s,e,h,r))).setMouseDragStopEventHandler(((t,i,s,e,h)=>this.Dt(i,s,e,h))).setMouseWheelEventHandler(((t,i,s)=>this.Bt(i,s))).setTouchStartEventHandler(((t,i,s)=>this.Lt(i,s))).setTouchMoveEventHandler(((t,i,s)=>this.Rt(i,s))).setTouchEndEventHandler(((t,i,s)=>this.Et(i,s))).Le(this.qi.mapChartFillStyle).Be(this.qi.mapChartStrokeStyle),this.ox=this.sx.Jp(this.ft).setMouseInteractions(this.Hi).Le(this.qi.mapChartOutlierRegionFillStyle).Be(this.qi.mapChartOutlierRegionStrokeStyle);const l=qt(r&&r.type,uu.World);this.Jb=l,this.lx(l).then((()=>{this.L.emit("mapDataReady")}))}getRegionUnderMouse(){return this.tx}setFillStyle(t){return this.nx.Le(t),this.us.xs(),this}getFillStyle(){return this.nx.Qh()}setStrokeStyle(t){return this.nx.Be(t),this.us.xs(),this}getStrokeStyle(){return this.nx.vo()}setEffect(t){return this.hx.bs(t),this.us.xs(),this}getEffect(){return this.hx.Ms()}setOutlierRegionFillStyle(t){return this.ox.Le(t),this.us.xs(),this}getOutlierRegionFillStyle(){return this.ox.Qh()}setOutlierRegionStrokeStyle(t){return this.ox.Be(t),this.us.xs(),this}getOutlierRegionStrokeStyle(){return this.ox.vo()}setSeparateRegionFillStyle(t){return this.Ub="function"==typeof t?t(this.Ub):t,this.Gb.forEach((t=>t.Le(this.Ub))),this.us.xs(),this}getSeparateRegionFillStyle(){return this.Ub}setSeparateRegionStrokeStyle(t){return this.Wb="function"==typeof t?t(this.Wb):t,this.Gb.forEach((t=>t.Be(this.Wb))),this.us.xs(),this}getSeparateRegionStrokeStyle(){return this.Wb}invalidateRegionValues(t){if(!this.$b||!this.ux)return this.Ax=this.Ax||[],this.Ax.push(t),this;if("function"==typeof t)for(let i=0;i<this.$b.regions.length;i+=1){const s=this.$b.regions[i],e=this.ux[i],h=t({...s,geometry:void 0},e);if(void 0!==h&&h!==e){this.ux[i]=h;const t=this.Xb.get(s);null==t||t.forEach((t=>{t.gx(h)}))}}else for(const i of t)if(i)for(let t=0;t<this.$b.regions.length;t+=1){const s=this.$b.regions[t],e=this.ux[t];if(void 0!==i.value&&i.value!==e&&cu(s,i)){this.ux[t]=i.value;const e=this.Xb.get(s);null==e||e.forEach((t=>{t.gx(i.value)}))}}return this.us.xs(),this}onMouseDragStart(t){return this.L.on("mouseDragStart",t)}onMouseDrag(t){return this.L.on("mouseDrag",t)}onMouseDragStop(t){return this.L.on("mouseDragStop",t)}onMouseWheel(t){return this.L.on("mouseWheel",t)}onTouchStart(t){return this.L.on("touchStart",t)}onTouchMove(t){return this.L.on("touchMove",t)}onTouchEnd(t){return this.L.on("touchEnd",t)}offTouchStart(t){return this.L.off(t,"touchStart")}offTouchMove(t){return this.L.off(t,"touchMove")}offTouchEnd(t){return this.L.off(t,"touchEnd")}setMouseInteractions(t){return this.Hi=t,this.nx.setMouseInteractions(t),this}getMouseInteractions(){return this.Hi}setHighlight(t){var i;return t=Ui(t),this.Yb=t,null===(i=this.$b)||void 0===i||i.regions.forEach((i=>{this.us.ls.Cs(i,t)})),this.L.emit("highlight",this,t),this}getHighlight(){return this.Yb}setAnimationHighlight(t){var i;return null===(i=this.$b)||void 0===i||i.regions.forEach((i=>{this.us.ls.ks(i,t)})),this}getAnimationHighlight(){var t;return this.us.ls.Ts(null===(t=this.$b)||void 0===t?void 0:t.regions[0])}setHighlightOnHover(t){return this.Hb=t,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Hb}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}offMapDataReady(t){return this.L.off(t,"mapDataReady")}offViewChange(t){return this.L.off(t,"viewChange")}async lx(t){const i=await((t,i)=>{let s;if(t===uu.World)s="countries_world.json";else if(t===uu.NorthAmerica)s="countries_northAmerica.json";else if(t===uu.SouthAmerica)s="countries_southAmerica.json";else if(t===uu.Africa)s="countries_africa.json";else if(t===uu.Europe)s="countries_europe.json";else if(t===uu.Asia)s="countries_asia.json";else if(t===uu.USA)s="states_usa.json";else if(t===uu.Canada)s="territoriesProvinces_canada.json";else{if(t!==uu.Australia){const i=`LCJS MapChart unidentified \`type\`: ${t}`;throw Yt.alert(i),new Error(i)}s="territories_australia.json"}return new Promise(((t,e)=>{(t=>{if(t.resourcesBaseUrl){const i=`${t.resourcesBaseUrl}${t.fileName}`;return void Yt.fetch(i).then((i=>{t.success(i)})).catch((()=>{t.error({url:i})}))}const i=`${Yt.location.origin}/resources${t.fileName}`;Yt.fetch(i).then((i=>{if(!i.ok)throw new Error;t.success(i)})).catch((()=>{const s=`https://lcjs-resources.lightningchart.com/v1${t.fileName}`;Yt.fetch(s).then((i=>{Yt.console.warn("LightningChart JS warning | fallbacking publicly hosted asset resources.\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/warning-using-publicly-hosted-resources/"),t.success(i)})).catch((()=>{t.error({url:i})}))}))})({fileName:`/maps/${s}`,resourcesBaseUrl:i,success:i=>i.json().then(t),error:({url:t})=>$i(i,t,"Map Chart",{shouldCrash:!0})})}))})(t,this.wA.qs);this.ux=new Array(i.regions.length).map((t=>{})).fill(void 0);const s=gu[t];if(!s)throw new Error("Unidentified map type.");for(const t of i.outliers)for(const i of t.geometry)this.ox.jr().Tl(i);if(t===uu.USA){const t=25.8,i=29.7;this.Gb.push(this.vy.Re(this.ft).setMouseInteractions(!1).Le(this.Ub).Be(this.Wb).ze({x:-126,y:t}).tt({x:10,y:i-t}),this.vy.Re(this.ft).setMouseInteractions(!1).Le(this.Ub).Be(this.Wb).ze({x:-113,y:t}).tt({x:7,y:i-t}))}const e=this.us.ls.$r(this.nx,{animationEnabled:this.gh});for(let s=0;s<i.regions.length;s+=1){const h=i.regions[s],r=du(t,h),n=[];for(const t of r)t.length<3||n.push(this.nx.jr().Tl(t));this.Xb.set(h,n),e.jr(h,(t=>{n.forEach((i=>i.cs(t)))}))}if(this.hx.As([this.nx]),this.Zb=s,this.Qb(t,this.ft,s),this.$b=i,this.Ax){for(const t of this.Ax)this.invalidateRegionValues(t);this.Ax=void 0}this.us.xs()}Qb(t,i,s){const e=yu[t],h=i.x.getCellSize(),r=i.y.getCellSize()/h,n={min:{x:s.min.x,y:s.min.y},max:{x:s.max.x,y:s.max.y}};if(r<e){const t=(n.max.x-n.min.x)*(e/r-1);n.min.x-=t/2,n.max.x+=t/2}else if(r>e){const t=(n.max.y-n.min.y)*(r/e-1);n.min.y-=t/2,n.max.y+=t/2}i.x.K(n.min.x,n.max.x),i.y.K(n.min.y,n.max.y);const o=this.ft.x.ai(),a=this.ft.y.ai();this.L.emit("viewChange",{latitudeRange:{start:n.min.y,end:n.max.y},longitudeRange:{start:n.min.x,end:n.max.x},margin:{top:a[1],bottom:a[0],left:o[0],right:o[1]}})}qb(t){this.yx=t,this.us.xs()}ix(){this.yx=void 0,this.us.xs()}Kb(t,i){const s=Array.from(this.Xb.entries()).findIndex((([t,s])=>s.includes(i))),e=null==t?void 0:t.regions[s],h=this.us.jn();if(!h)return;const r=this.us.Go(h),n=this.ux&&this.ux[s];let o=pt({x:r.engineX,y:r.engineY},this.us.ft,this.ft);o={x:Jt(o.x,this.ft.x.getInnerStart(),this.ft.x.getInnerEnd()),y:Jt(o.y,this.ft.y.getInnerStart(),this.ft.y.getInnerEnd())};let a=o.x,l=o.y;const u=e.transform;e.outlier&&u&&(a=(a-u.translate.x-u.vertexBoundaries.min.x)/u.scale.x+u.vertexBoundaries.min.x,l=(l-u.translate.y-u.vertexBoundaries.min.y)/u.scale.y+u.vertexBoundaries.min.y);const c=this.getFillStyle();return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.us.ft,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.us.ft},region:e,value:n,longitude:l,latitude:a,lut:Z(c)?c.lut:void 0}}setCursor(t){return this.hp.setCursor(t),this}getCursor(){return this.hp.getCursor()}setCursorMode(t){return this.hp.setCursorMode(t),this}getCursorMode(){return this.hp.getCursorMode()}setCustomCursor(t){return this.hp.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.hp.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.hp.offCursorTargetChanged(t)}setCursorFormatting(t){return this.hp.setCursorFormatting(t),this}getCursorFormatting(){return this.hp.getCursorFormatting()}addCursor(t=al){const i=this.wy(),s=t.wm(i,this.uiScale,this.uiScale,this.Sy(i),this.qi);return this.By(s),s}setAnimationsEnabled(t){return this.gh=!t,this}getAnimationsEnabled(){return this.gh}getMinimumSize(){}nf(){return[this]}Ee(t){super.Ee(t),super.Ry(),Ga.Hy(this.wh,this.Vy);const i=d(this.ft.x.si(),this.ft.y.si(),this.ft.x.hi(),this.ft.y.hi());return this.sx.pb(i),this.hp.Ee(!1,[],void 0,{explicitTarget:this.yx}),this}dispose(){return this.sx.W(),this.hp.W(),za(this.ft),super.dispose()}Z(){return super.Z(),this.ft.Z(),this}J(){return super.J(),this.ft.J(),this}Kd(){return Di(this.getFillStyle())}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),t.onMouseEnter((()=>{this.setHighlight(!0)})),t.onMouseLeave((()=>{this.setHighlight(!1)})),this.onMouseEnter((()=>t.setHighlight(!0))),this.onMouseLeave((()=>t.setHighlight(!1))),this.onTouchStart((()=>t.setHighlight(!0))),this.onTouchEnd((()=>t.setHighlight(!1))),this.styleLegendEntry(t,s),this}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.getFillStyle()})}}const pu=(t,i)=>{const s=t>0,e=i>0;return`${[Li(Math.abs(0|t),2),"° ",Li(Math.abs(0|(t<0?t=-t:t)%1*60),2),"' "].join("")+(s?"E":"W")}, ${[Li(Math.abs(0|i),2),"° ",Li(Math.abs(0|(i<0?i=-i:i)%1*60),2),"' "].join("")+(e?"N":"S")}`},vu=(t,i,s)=>{var e;const h=[[i.region.name],[pu(i.longitude,i.latitude)]];return void 0!==i.value&&h.push({text:ce(i.value.toFixed(1),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}),h};class Su extends Th{constructor(t,i,s,e,h,r,n,o,a){super(t,i,i.mx(s),e,h,{numeric:i.vx({amplitude:e.polarAmplitudeAxisNumericTicks,radial:e.polarAmplitudeAxisNumericTicks}),datetime:i.vx({amplitude:e.polarAmplitudeAxisDateTimeTicks,radial:e.polarAmplitudeAxisDateTimeTicks}),time:i.vx({amplitude:e.polarAmplitudeAxisTimeTicks,radial:e.polarAmplitudeAxisTimeTicks})},{type:"linear"}),this.Sx=r,this.bx=n,this.xx=o,this.es=a,this.Mx=s,this._x=i.vx({amplitude:e.polarAmplitudeAxisStrokeStyle,radial:e.polarRadialAxisStrokeStyle}),this.Th=o.Ur(s).setMouseInteractions(!1).tr(i.vx({amplitude:e.polarAmplitudeAxisTitleFont,radial:e.polarRadialAxisTitleFont})).Le(i.vx({amplitude:e.polarAmplitudeAxisTitleFillStyle,radial:e.polarRadialAxisTitleFillStyle})),this.er=this.es.Dg([this.Th]).bs(e.effectsText)}setTickStrategy(t,i){return super.Yh(t,i)}setStrokeStyle(t){return this._x="function"==typeof t?t(this._x):t,this.bx.xs(),this}getStrokeStyle(){return this._x}br(t,i){return new bu(i,t,this.Mx,this.xx,this.wx(this.Sx,this.Mx),this.xx.Ye(this.Mx).setMouseInteractions(!1))}Mr(t,i){const s=this.Cx(this.Mx,t);this.kx&&!1===this.kx(t)?t.hh.setVisible(!1):t.hh.setVisible(!0).ze(Is(this.Tx(this.Mx,t.S),s.padding)).ja(s.alignment).ir(s.rotation).Ua(s.offset.x,s.offset.y),this.Fx(this.Mx,t.Ix,t.Px,t)}setMouseInteractions(t){return this}Ee(){this.cr({physicalAxisSize:0});const t=this.Cr(((t,i)=>{const s=i.Rh.$e,e=.5*this._x.getThickness()+s.tickLength+s.tickPadding+Math.abs(i.hh.Vs().nd().y);return Math.max(t,e)}),0);return this.Dx(this.Mx,this._x,t),this.Bx(this.Mx,this.Th,t),t}}class bu extends Fh{constructor(t,i,s,e,h,r,n){super(t,i,e,s,n),this.Ix=h,this.Px=r,h.setMouseInteractions(!1),this.ts.push(h,r)}}class xu extends Su{constructor(t,i,s,e,h,r,n,o,a){super(t,Mu((()=>this.Og())),i,s,e,h,r,n,o),this.$p=this.bx.Ye(this.Mx).setMouseInteractions(!1),this.Lx=a,this.setScrollStrategy(ch.expansion),this.setTickStrategy(dh.Numeric),this.setTitle("Amplitude")}Og(){return this.Lx()}Rr(t,i){return fe(t,i,this.Mx.y)}zr(t,i,s){const e=2*(i-t),h=this.Mx.x.Bi(e);return{min:t-s*h,max:i+s*h}}Tx(t,i){return{x:t.Rx()?i-t.Ex().start:t.Ex().start-i,y:0}}wx(t,i){return t.ld(i)}Fx(t,i,s,e){const h=e.Rh.$e,r=t.Rx()?e.S-t.Ex().start:t.Ex().start-e.S;Qt(e.S,t.Ex().start)||Qt(e.S,t.Ex().end)?i.setVisible(!1):i.setVisible(!0).fu(0).He(360).pu(void 0).mu(0).Au(r).pu(60).Le(O).Be(h.gridStrokeStyle);const n=.5*this._x.getThickness();s.Xe({x:r,y:-n*t.Gi().y}).He({x:r,y:-(n+h.tickLength)*t.Gi().y}).We(h.tickStyle)}Cx(t,i){const s=i.Rh.$e;return{alignment:{x:0,y:1},padding:{x:0,y:t.Gi().y*-(.5*this._x.getThickness()+s.tickLength+s.tickPadding)},rotation:0,offset:{x:0,y:0}}}Dx(t,i,s){const e=t.Rx()?t.Ex().end-t.Ex().start:t.Ex().start-t.Ex().end;this.$p.Xe({x:0,y:0}).He({x:e,y:0}).We(i)}Bx(t,i,s){const e=t.Rx()?(t.Ex().start+t.Ex().end)/2-t.Ex().start:t.Ex().start-(t.Ex().start+t.Ex().end)/2;i.ja({x:0,y:1}).ze({x:e,y:-s*t.Gi().y})}}const Mu=t=>({...Rl(t,(t=>t.getAmplitudeMin()),(t=>t.getAmplitudeMax()),(t=>{})),mx:t=>({getInnerStart:()=>t.Ex().start,getInnerEnd:()=>t.Ex().end,K:(i,s)=>t.zx(i,s),ot:(i,s,e,h,r)=>t.y.ot(i,s,e,h,r)}),vx:t=>t.amplitude});class _u extends Su{constructor(t,i,s,e,h,r,n,o){super(t,Cu,i,s,e,h,r,n,o),this.Vx=90,this.Ox=12,this.Nx=wu,this.$p=this.bx.ld(this.Mx).setMouseInteractions(!1),this.kx=t=>{let i=180*(t.S-this.Mx.Gx())/Math.PI%360;for(;i<0;)i+=360;for(;i>360;)i-=360;if(i>=0&&i<=20||i>=340&&i<=360)return!1},this.dh=void 0,this.setTickStyle(s.polarRadialAxisTickStyle),this.setTitle("Degrees"),this.setNorth(this.Vx)}setTickStyle(t){return this.Ux="function"==typeof t?t(this.Ux):t,this.Wx(),this.bx.xs(),this}getTickStyle(){return this.Ux}setTickFormattingFunction(t){return this.Nx=t,this.Wx(),this.bx.xs(),this}getTickFormattingFunction(){return this.Nx}setClockwise(t){this.Mx.Yx(t);const i=this.Vx*Math.PI/180;return t?this.Mx.Hx(i+Math.PI/2):this.Mx.Hx(i-Math.PI/2),this.bx.xs(),this}getClockwise(){return!this.Mx.Xx()}setNorth(t){for(;t<0;)t+=360;t%=360,this.Vx=t;const i=t*Math.PI/180;return this.getClockwise()?this.Mx.Hx(i+Math.PI/2):this.Mx.Hx(i-Math.PI/2),this.bx.xs(),this}getNorth(){return 180*this.Mx.Gx()/Math.PI}setDivision(t){return this.Ox=t,this.Wx(),this.bx.xs(),this}getDivision(){return this.Ox}Og(){return[]}Rr(t,i){return i}zr(t,i,s){return{min:t,max:i}}Tx(t,i){const s=t.Xx()?1:-1,e=t.Gx(),h=t.Rx()?t.Ex().end-t.Ex().start:t.Ex().start-t.Ex().end;return{x:Math.cos((i-e)*s)*h,y:Math.sin((i-e)*s)*h}}wx(t,i){return t.Ye(i)}Fx(t,i,s,e){const h=this.Ux,r=t.Xx()?1:-1,n=t.Gx(),o=(e.S-n)*r,a=Math.cos(o),l=Math.sin(o),u=t.Rx()?t.Ex().end-t.Ex().start:t.Ex().start-t.Ex().end,c={x:a*u,y:l*u};i.Xe({x:0,y:0}).He(c);const d={x:c.x+a*h.tickLength*t.Gi().x,y:c.y+l*h.tickLength*t.Gi().y};s.Xe(c).He(d),i.We(h.gridStrokeStyle),s.We(h.tickStyle)}Cx(t,i){const s=this.Ux,e=t.Xx()?1:-1,h=t.Gx();let r,n=(i.S-h)*e;for(;n<0;)n+=2*Math.PI;for(;n>=2*Math.PI;)n-=2*Math.PI;r=n>0&&n<=Math.PI?-n+Math.PI/2:-n-Math.PI/2;const o=s.tickLength+s.tickPadding,a=Math.cos(n)*o*t.Gi().x,l=Math.sin(n)*o*t.Gi().y;return{alignment:{x:0,y:0},padding:{x:a,y:l},rotation:180*r/Math.PI,offset:{x:a,y:l}}}Dx(t,i,s){const e=t.Rx()?t.Ex().end-t.Ex().start:t.Ex().start-t.Ex().end;this.$p.fu(0).He(360).mu(0).Au(e+.5*i.getThickness()*t.Gi().x).pu(360).Le(O).Be(i)}Bx(t,i,s){const e=t.Gx(),h=this.Cx(t,{S:0+e}),r=t.Rx()?t.Ex().end-t.Ex().start:t.Ex().start-t.Ex().end;i.ja(h.alignment).ir(h.rotation).Ua(h.offset.x,h.offset.y).ze(Is({x:r,y:0},h.padding))}Wx(){this.nr({Ke:[],qe:[{hh:"Radial ticks",Qg:0,$e:this.Ux,je:this.Nx,Yr:(t,i,s,e)=>{const h=[],r=2*Math.PI/this.Ox;for(let t=0;t<2*Math.PI;t+=r)h.push(t);return h},Eh:{_r:()=>{},zh:()=>!1},Hr:void 0}],th:wu,ih:void 0,sh:void 0})}}const wu=(t,i,s)=>(180*t/Math.PI).toFixed(0),Cu={Ir:()=>{},Pr:()=>{},Br:()=>{},mx:t=>({getInnerStart:()=>0,getInnerEnd:()=>2*Math.PI,K:(t,i)=>{},ot:(i,s,e,h,r)=>t.x.ot(i,s,e,h,r)}),vx:t=>t.radial},ku=t=>!!(t&&"object"==typeof t&&"axisAmplitude"in t&&"axisRadial"in t),Tu=t=>!!(t&&"object"==typeof t&&"angle"in t&&"number"==typeof t.angle&&"amplitude"in t&&"number"==typeof t.amplitude);class Fu extends ye{constructor(t,i,s,e,h,r){super(i,s,h,r),this.ws="Sector",this.$x=0,this.jx=1*Math.PI/2,this.Zx=void 0,this.Qx=void 0,this.Ls=t,this.Mx=e,this.Vm=this.Ls.ld(this.Mx).cs(this.getHighlight()),this.fs(this.Vm),this.Fe=h.polarSectorFillStyle,this.Ie=h.polarSectorStrokeStyle,this.setMouseInteractions(!1)}setAngleStart(t){return this.$x=Jt(t,0,360),this.Ls.xs(),this}getAngleStart(){return this.$x}setAngleEnd(t){return this.jx=Jt(t,0,360),this.Ls.xs(),this}getAngleEnd(){return this.jx}setAmplitudeStart(t){return this.Zx=t,this.Ls.xs(),this}getAmplitudeStart(){return this.Zx}setAmplitudeEnd(t){return this.Qx=t,this.Ls.xs(),this}getAmplitudeEnd(){return this.Qx}setFillStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.Ls.xs(),this}getFillStyle(){return this.Fe}setStrokeStyle(t){return this.Ie="function"==typeof t?t(this.Ie):t,this.Ls.xs(),this}getStrokeStyle(){return this.Ie}Ee(){const t=this.Mx.Ex(),i=180*this.Mx.Gx()/Math.PI,s=void 0!==this.Zx?Jt(this.Zx,t.start,t.end):t.start,e=void 0!==this.Qx?Jt(this.Qx,t.start,t.end):t.end,h=this.Mx.Rx()?s-t.start:t.start-s,r=this.Mx.Rx()?e-t.start:t.start-e,n=Math.min(h,r),o=Math.max(h,r),a=this.Mx.Xx()?1:-1,l=Math.abs(this.jx-this.$x);this.Vm.fu((this.$x-i)*a).He((this.jx-i)*a).mu(100*n/o).Au(o).Le(this.Fe).Be(this.Ie).pu(Math.ceil(l/2))}Ve(t,i){t.cs(i),this.Ls.xs()}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe,stroke:this.Ie})}}class Iu extends ye{constructor(){super(...arguments),this.yv=!0,this.gv=!0}setAutoScrollingEnabled(t){return this.yv=t,this.chart.us.xs(),this}getAutoScrollingEnabled(){return this.yv}wv(){}Ee(){}Fp(){}setCursorEnabled(t){return this.gv=t,this}getCursorEnabled(){return this.gv}$y(){return this.getVisible()&&this.getCursorEnabled()}setCursorFormattingOverride(t){return this.xv=t,this}getCursorFormattingOverride(){return this.xv}}class Pu extends Iu{constructor(t,i,s,e,h,r){super(i,s,h,r),this.Ls=t,this.chart=i,this.scale=e}getAmplitudeMin(){return this.Jx?this.Jx.min:void 0}getAmplitudeMax(){return this.Jx?this.Jx.max:void 0}}const Du=(t,i)=>{const s=[],e=i.Ex().start,h=i.Ex().end,r=i.Rx(),n=i.Xx()?1:-1,o=i.Gx(),a=Math.abs(h-e),l=Math.min(e,h)+.001*a,u=Math.max(e,h)-.001*a;for(const i of t){const t=Jt(i.amplitude,l,u),h=i.angle*Math.PI/180-o,a=Math.cos(h*n)*(r?t-e:e-t),c=Math.sin(h*n)*(r?t-e:e-t),d=i.color;s.push({x:a,y:c,color:d})}return s},Bu=t=>{const i={min:es,max:hs};for(const s of t)i.min=Math.min(i.min,s.amplitude),i.max=Math.max(i.max,s.amplitude);return i},Lu=t=>t.slice().map((t=>t.angle>=0&&t.angle<=360?t:{...t,angle:t.angle%360})),Ru=(t,i)=>{let s=Os(t);for(i.Xx()||(s*=-1),s+=180*i.Gx()/Math.PI;s<0;)s+=360;s%=360;const e=Ts(t),h=i.Ex(),r=Math.abs(h.end-h.start);return{angle:s,amplitude:pn(h.start,h.end,e/r)}};class Eu extends Pu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r),this.ws="Heatmap Series",this.Kx=!0,this.Iv=!1,this.Kd=()=>Di(this.Fe);const o=this.chart.getSeries().length;this.Fe=Ri(this.qi.polarHeatmapSeriesFillStyle||this.qi.heatmapGridSeriesFillStyle,o);const a=n.amplitudeStart||0,l=n.amplitudeEnd?(n.amplitudeEnd-a)/(n.annuli-1):n.amplitudeStep||1,u={sectors:n.sectors,annuli:n.annuli,amplitudeStart:a,amplitudeStep:l,heatmapDataType:"intensity",dataOrder:n.dataOrder||"annuli"};this.qn=u,this.qx=t.tM(e,[],u).Le(this.Fe).cs(this.getHighlight()),this.fs(this.qx);const c=Math.min(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep),d=Math.max(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep);this.Jx={min:c,max:d},this.setHighlightOnHover(!1)}solveNearest(t,i="show-nearest"){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=pt(e,this.chart.us.ft,this.scale),r=Ru(h,this.scale),n=Ua(i)?this.qx.iM(r):this.qx.ed(r);if(!n)return;const o=Du([n],this.scale)[0];return{cursorPosition:{pointMarker:o,pointMarkerScale:this.scale,resultTable:o,resultTableScale:this.scale},series:this,angle:n.angle,amplitude:n.amplitude,intensity:n.cellValue,annulus:n.iAnnulus,sector:n.iSector,lut:Z(this.Fe)?this.Fe.lut:void 0}}Ji(t,i){return qi({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0,intensity:0,sector:0,annulus:0,lut:Z(this.Fe)?this.Fe.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}invalidateIntensityValues(t){if(this.Iv&&this.chart.us.Qn(Yo.Pf),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,sectors:"annuli"===this.qn.dataOrder?t[0].length:t.length,annuli:"annuli"===this.qn.dataOrder?t.length:t[0].length},s="annuli"===this.qn.dataOrder?this.qn.annuli:this.qn.sectors,e="annuli"===this.qn.dataOrder?this.qn.sectors:this.qn.annuli;if(i.x>s||i.y>e){if(!0===this.chart.wA.so){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nHeatmap ${s}x${e}, input ${i.x}x${i.y}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Yt.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);if(0===(t=h).length||0===t[0].length)return this}this.qx.zS({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iSector"in t&&"iAnnulus"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,sectors:"annuli"===this.qn.dataOrder?t.values[0].length:t.values.length,annuli:"annuli"===this.qn.dataOrder?t.values.length:t.values[0].length},s="annuli"===this.qn.dataOrder?t.iAnnulus:t.iSector,e=s+i.primary-1,h="annuli"===this.qn.dataOrder?t.iSector:t.iAnnulus,r=h+i.secondary-1,n="annuli"===this.qn.dataOrder?this.qn.annuli-1:this.qn.sectors-1,o="annuli"===this.qn.dataOrder?this.qn.sectors-1:this.qn.annuli-1;if(s<0||h<0){if(!0===this.chart.wA.so){const i=`PolarHeatmapSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niSector: ${t.iSector}, iAnnuli: ${t.iAnnulus}.\nNo intensity values will be invalidated.`;Yt.console.warn(i)}return this}if(e>n||r>o){if(!0===this.chart.wA.so){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nMax indexes ${n}x${o}, input ${i.primary}x${i.secondary} starting at [${s},${h}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Yt.console.warn(t)}const a=Math.max(e-n,0),l=i.primary-a,u=Math.max(r-o,0),c=[];for(let i=0;i<l;i+=1)c[i]=t.values[i].slice(0,u>0?-u:void 0);if(0===(t={iSector:t.iSector,iAnnulus:t.iAnnulus,values:c}).values.length||0===t.values[0].length)return this}this.qx.zS({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.Ls.xs(),this.Iv=!0,this}setFillStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.qx.Le(this.Fe),this.Ls.xs(),this}getFillStyle(){return this.Fe}clear(){return this.qx.Vt(),this.Ls.xs(),this}setIntensityInterpolation(t){return t=t||"disabled",this.qx.RS(t),this.Ls.xs(),this}getIntensityInterpolation(){return this.qx.ES()}fv(){return this.yv&&this.getVisible()}Ve(t,i){t.cs(i),this.Ls.xs()}Ee(){}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe})}}class zu extends Pu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.ws="Line Series",this.sM=[],this.eM=!1,this.hM=!1,this.vu=Ri(this.qi.polarLineSeriesStrokeStyle,r),this.rM=t.Ap(e,void 0,[xl.UserSeries]).We(this.vu).cs(this.getHighlight()),this.fs(this.rM)}solveNearest(t,i){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=this.rM.nM(e);if(!h)return;const r=Ru(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Ji(t,i){return qi({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,"show-nearest")))}setData(t){return 0!==this.sM.length&&this.chart.us.Qn(Yo.Pf),this.sM=Lu(t),this.eM=!0,this.Jx=Bu(this.sM),this.Ls.xs(),this}setStrokeStyle(t){this.vu="function"==typeof t?t(this.vu):t;const i=this.vu;return this.rM.We(i),this.Ls.xs(),this}getStrokeStyle(){return this.vu}setConnectDataAutomaticallyEnabled(t){return this.hM=t,this.Ls.xs(),this}getConnectDataAutomaticallyEnabled(){return this.hM}fv(){return this.yv&&this.sM.length>0&&this.getVisible()}Ve(t,i){t.cs(i),this.Ls.xs()}Ee(){if(this.eM||this.scale.oM()){const t=Du(this.sM,this.scale),i=vs(t);this.hM?(t.push({...t[0]}),this.rM.$l(!0)):this.rM.$l(!1),this.rM.Vt().ml(t).ia(i),this.eM=!1,this.rM.Vs()}}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{stroke:this.vu})}}class Vu extends Pu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.ws="Point Line Series",this.sM=[],this.eM=!1,this.hM=!1,this.aM=3,this.Ca=0,this.lM=ar.Circle,this.Fe=Ri(this.qi.polarPointLineSeriesFillStyle,r),this.vu=Ri(this.qi.polarPointLineSeriesStrokeStyle,r),this.rM=t.Ap(e,void 0,[xl.UserSeries]).We(this.vu).cs(this.getHighlight()),this.fs(this.rM),this.uM=t.Ov(e).Le(this.Fe).cl(this.lM).tt(this.aM).cs(this.getHighlight()),this.fs(this.uM)}solveNearest(t,i){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=this.rM.nM(e);if(!h)return;const r=Ru(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Ji(t,i){return qi({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}setData(t){return 0!==this.sM.length&&this.chart.us.Qn(Yo.Pf),this.sM=Lu(t),this.eM=!0,this.Jx=Bu(this.sM),this.Ls.xs(),this}setStrokeStyle(t){this.vu="function"==typeof t?t(this.vu):t;const i=this.vu;return this.rM.We(i),this.Ls.xs(),this}getStrokeStyle(){return this.vu}setPointFillStyle(t){this.Fe="function"==typeof t?t(this.Fe):t;const i=this.Fe;return this.uM.Le(i),this.Ls.xs(),this}getPointFillStyle(){return this.Fe}setPointSize(t){return this.aM=t,this.uM.tt(t),this.Ls.xs(),this}getPointSize(){return this.aM}setPointShape(t){return this.lM=t,this.uM.cl(this.lM),this}getPointShape(){return this.lM}setPointRotation(t){return this.Ca=t,this.uM.ir(t),this.Ls.xs(),this}getPointRotation(){return this.Ca}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe,stroke:this.vu})}setConnectDataAutomaticallyEnabled(t){return this.hM=t,this.Ls.xs(),this}getConnectDataAutomaticallyEnabled(){return this.hM}fv(){return this.yv&&this.sM.length>0&&this.getVisible()}Ve(t,i){t.cs(i),this.Ls.xs()}Ee(){if(this.eM||this.scale.oM()){const t=Du(this.sM,this.scale),i=vs(t);this.hM?(t.push({...t[0]}),this.rM.$l(!0)):this.rM.$l(!1),this.rM.Vt().ml(t).ia(i),this.uM.Vt().ml(t).ia(i),this.eM=!1,this.rM.Vs(),this.uM.Vs()}}Ds(){return this._s||this.lM}}class Ou extends Qr{constructor(t,i,e,h,r,n,o,a,l){super(),this.Qo=Ji(),this.L=new s,this.$i=!1,this.cM=h,this.dM=r,this.fM=n,this.AM=o,this.gM=a,this.Ls=t,this.scale=i,this.yM=e,this.qi=l}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}dispose(){return this.yM&&this.yM(this),this.Ls.us.xs(),this.L.emit("dispose",this),this.$i=!0,this}setVisible(t){return super.setVisible(t),this.fM(),this.Ls.us.xs(),this}isDisposed(){return this.$i}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setMouseInteractions(t){return this.AM(this,t),this}getMouseInteractions(){return this.gM(this)}}class Nu extends Ou{constructor(t,i,s,e,h,r,n,o,a,l,u,d,f,A,g,y,m){super(t,i,s,e,h,r,n,o,m),this.mM=1,this.pM=1,this.Ls=t,this.scale=i,this.dimensionStrategy=a,this.start=l,this.end=u,this.lowerExtreme=d,this.lowerQuartile=f,this.median=A,this.upperQuartile=g,this.upperExtreme=y,this.boundaries=c(this.dimensionStrategy.toPoint(l,d),this.dimensionStrategy.toPoint(u,y)),this.vM=this.qi.boxSeriesBodyFillStyle,this.SM=this.qi.boxSeriesBodyStrokeStyle,this.vu=this.qi.boxSeriesStrokeStyle,this.bM=this.qi.boxSeriesMedianStrokeStyle,this.Vs()}getBoundaries(){return this.boundaries}setBodyWidth(t){return this.mM=t,this.Vs(),this}getBodyWidth(){return this.mM}setBodyFillStyle(t){return this.vM="function"==typeof t?t(this.vM):t,this.dM(),this}getBodyFillStyle(){return this.vM}setBodyStrokeStyle(t){return this.SM="function"==typeof t?t(this.SM):t,this.dM(),this}getBodyStrokeStyle(){return this.SM}setTailWidth(t){return this.pM=t,this.Vs(),this}getTailWidth(){return this.pM}setStrokeStyle(t){return this.vu="function"==typeof t?t(this.vu):t,this.dM(),this}getStrokeStyle(){return this.vu}setMedianStrokeStyle(t){return this.bM="function"==typeof t?t(this.bM):t,this.dM(),this}getMedianStrokeStyle(){return this.bM}Vs(){this.cM()}getDominantStyle(){return this.getBodyFillStyle()}}class Gu extends Iu{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,a,l),this.Bs=!0,this.ts=new Map,this.chart=t,this.Ls=s,this.axisX=e,this.axisY=h,this.axisXAttachHandler=r,this.axisYAttachHandler=n,this.xM=o,this.scale=re(e.ft,h.ft),this.MM=t._M,t._M+=1,this.wM(this.scale),this.attacheAxis(),this.onMouseEnter(this.chart.CM),this.onMouseLeave(this.chart.kM),this.onMouseWheel(this.chart.pv),this.onMouseDragStart(this.chart.TM),this.onMouseDrag(this.chart.vv),this.onMouseDragStop(this.chart.Sv),this.onTouchStart(this.chart.bv.onTouchStart),this.onTouchMove(this.chart.bv.onTouchMove),this.onTouchEnd(this.chart.bv.onTouchEnd)}get xAxis(){return this.axisX}get yAxis(){return this.axisY}aa(){const t=Array.from(this.ts.keys());for(const i of t){const t=i.aa();if(t)return t}}setClipping(t){return this.Bs=t,this.Ls.xs(),this}getClipping(){return this.Bs}attacheAxis(){this.FM=this.axisXAttachHandler(this),this.IM=this.axisYAttachHandler(this)}fs(t,i){super.fs(t,i),t.la(this.MM)}getName(){const t=this.ds(),i="ProgressiveY"===t||"RegressiveY"===t?this.axisX.getTitle():this.axisY.getTitle();return this.ws||i.length>0&&i||"Series"}setDrawOrder(t){return this.MM=t.seriesDrawOrderIndex,this.ts.forEach(((t,i)=>{i.la(this.MM)})),this.chart.us.xs(),this}dispose(){return super.dispose(),this.FM(this),this.IM(this),this}Fp(){super.Fp(),ue(this.Bs,Array.from(this.ts.keys()),this.scale)}getBoundaries(){return c(n(this.getXMin()||0,this.getYMin()||0),n(this.getXMax()||0,this.getYMax()||0))}setCursorEnabled(t){return super.setCursorEnabled(t)}}const Uu=(t,i,s,e)=>{const h=t.length;let r=0;if(void 0!==i){const h=s-i;if(h>0){const i=t.slice(r,h);r+=h,e(i,!0)}}for(;r<h;){const i=t.slice(r,r+s);r+=s,e(i,!1)}},Wu=(t,i=(t=>t))=>{const s=[];let e;for(let h=0;h<t.length;h+=1){e=t[h];const r=i(e.ul()),n=e.ll(),o=n?i(n):[];let a=!1,l=!1;"Xl"in e&&(a=e.Xl(),l=e.jl()),s.push.apply(s,r.slice(a?1:0,r.length-(l&&0===o.length?1:0))),s.push.apply(s,o.slice(a&&0===r.length?1:0,o.length-(l?1:0)))}return s};class Yu extends Gu{constructor(){super(...arguments),this.PM=[],this.DM=void 0,this.BM=!1,this.yM=t=>{const i=this.PM.findIndex((i=>i===t));i>=0&&this.PM.splice(i,1),this.BM=!0,this.DM=void 0,this.Ls.xs()},this.cM=()=>{this.DM=void 0,this.BM=!0,this.chart.us.xs()},this.dM=()=>{this.BM=!0,this.chart.us.xs()},this.fM=()=>{this.DM=void 0,this.BM=!0,this.chart.us.xs()},this.AM=(t,i)=>{this.setMouseInteractions(i)},this.LM=t=>this.getMouseInteractions()}Ee(){super.Ee(),this.BM&&(this.RM(this.PM),this.BM=!1)}clear(){return this.PM.slice().forEach(jt),this.PM.length=0,this.BM=!0,this.DM=void 0,this.Ls.xs(),this}EM(t,i){void 0!==i?this.PM.splice(i,0,t):this.PM.push(t),this.BM=!0,this.zM&&this.zM(t),t.onMouseEnter(((t,i)=>this.Mt(t,i,void 0,{}))),t.onMouseLeave(((t,i)=>this._t(t,i,void 0))),t.onMouseClick(((t,i)=>this.wt(t,i,void 0,{}))),t.onMouseDoubleClick(((t,i)=>this.Ct(t,i,void 0,{}))),t.onMouseDown(((t,i)=>this.kt(t,i,void 0,{}))),t.onMouseUp(((t,i)=>this.Tt(t,i,void 0,{}))),t.onMouseMove(((t,i)=>this.Ft(t,i,void 0,{}))),t.onMouseDragStart(((t,i,s)=>this.Pt(t,i,s,void 0,{}))),t.onMouseDrag(((t,i,s,e,h)=>this.It(t,i,s,e,h,void 0,{}))),t.onMouseDragStop(((t,i,s,e)=>this.Dt(t,i,s,e,void 0,{}))),t.onMouseWheel(((t,i)=>this.Bt(t,i,void 0,{}))),t.onTouchStart(((t,i)=>this.Lt(t,i,void 0,{}))),t.onTouchMove(((t,i)=>this.Rt(t,i,void 0,{}))),t.onTouchEnd(((t,i)=>this.Et(t,i,void 0,{}))),this.Ls.xs()}fv(){return this.yv&&this.PM.length>0&&this.getVisible()}setDefaultStyle(t){this.zM=t,this.PM.forEach(t),t(this.VM);for(let t=0;t<this.Qi.length;t+=1)this.styleLegendEntry(this.Qi[t]);return this.BM=!0,this.chart.us.xs(),this}getXMax(){return this.DM||(this.DM=this.OM()),this.DM.max.x}getXMin(){return this.DM||(this.DM=this.OM()),this.DM.min.x}getYMax(){return this.DM||(this.DM=this.OM()),this.DM.max.y}getYMin(){return this.DM||(this.DM=this.OM()),this.DM.min.y}Br(){return n(0,0)}OM(){const t=c(o(es,es),o(hs,hs));for(let i=0;i<this.PM.length;i+=1)if(this.PM[i].getVisible()){const s=this.PM[i].getBoundaries();t.min.x=Math.min(t.min.x,s.min.x),t.min.y=Math.min(t.min.y,s.min.y),t.max.x=Math.max(t.max.x,s.max.x),t.max.y=Math.max(t.max.y,s.max.y)}return t}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.PM.length>0?this.PM[0].getDominantStyle():this.VM.getDominantStyle()})}}const Hu=(t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:e+i*s,y:t[s]};return h};class Xu extends Gu{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,l,u),this.NM=[],this.ku=[],this.GM=0,this.Is=!1,this.Xi=ge.onHover,this.chart.us.Qn(Yo.kf),this.UM=a}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.GM=void 0!==i&&i>0?i:0,this.Ls.xs(),this}add(t){if(0!==this.NM.length&&this.chart.us.Qn(Yo.Pf),Array.isArray(t)?this.WM(t):this.WM([t]),this.ku.length>0){const t=this.ku[this.ku.length-1];this.YM={x:t.x,y:t.y}}return this}addArrayX(t,i=1,s){let e=s;return e||(e=this.YM?this.YM.y+i:0),this.add(((t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:t[s],y:e+i*s};return h})(t,i,e)),this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.YM?this.YM.x+i:0),this.add(Hu(t,i,e)),this}addArraysXY(t,i){if(t.length!==i.length)throw new Error("arrayX and arrayY lengths are not equal");return this.add(((t,i)=>{const s=new Array(t.length);for(let e=0;e<t.length;e+=1)s[e]={x:t[e],y:i[e]};return s})(t,i)),this}getPointAmount(){return this.NM.reduce(((t,i)=>t+i.pl()+i.vl()),this.ku.length)}clear(){this.HM=void 0;for(let t=0;t<this.NM.length;t+=1)this.NM[t].Vt();return this.ku.length=0,this.YM=void 0,this.Ls.xs(),this.L.emit("dataClear",this),this}getLastPoint(){return this.YM}fv(){return this.yv&&this.getPointAmount()>0&&this.getVisible()}getXMax(){return this.UM.getXMax(this.NM,this.HM)||0}getXMin(){return this.UM.getXMin(this.NM,this.HM)||0}getYMax(){return this.UM.getYMax(this.NM,this.HM)||0}getYMin(){return this.UM.getYMin(this.NM,this.HM)||0}Br(){const t=n(0,0);for(const i of this.NM)t.x=Math.max(t.x,i.Il()),t.y=Math.max(t.y,i.Pl());return t}XM(t,i,s,e){this.UM.XM(t,i,s,e,this.scale,(t=>{}))}wv(){super.wv(),this.$M&&this.XM(this.NM,this.getPointAmount(),this.$M,this.GM)}Ee(){super.Ee();const t=this.getBoundaries();this.ku.length>0&&(this.jM(this.ku),this.ku=[]);for(const i of this.NM)i.ia(t);return super.Ee()}Fp(){super.Fp(),this.HM=void 0,this.ku.length=0}WM(t){0!==t.length&&(this.HM?this.HM=bs(this.HM,vs(t)):this.HM=vs(t),this.L.emit("dataAdd",this,t,this.HM),this.ku=ki(this.ku,t,{canReturnB:!1}),this.Ls.xs())}ZM(){return Wu(this.NM)}QM(t){return this.L.on("dataAdd",t)}JM(t){return this.L.off(t)}KM(t){return this.L.on("dataClear",t)}qM(t){return this.L.off(t)}}const $u=(t,i,s,e)=>{let h,r,n=Number.MAX_VALUE;for(let o=0;o<i.length;o+=1){const a=i[o],l=s(a,t);if(l){const i=e(t,l);(void 0===h||i<n)&&(h=l,r=a,n=i)}}return h&&r?[h,r]:void 0};class ju extends Yu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.ws="Box Series",this.t_=Zi(),this.i_=t=>pt(this.Rs.toPoint((t.start+t.end)/2,t.median),this.scale,this.Ls.us.ft),this.chart.us.Qn(Yo.Ff),this.Rs=a,this.VM=new Nu(this.Ls,this.scale,this.yM,Zt,Zt,Zt,Zt,(t=>!1),this.Rs,0,0,0,0,0,0,0,this.qi).dispose(),this.s_=new Il((()=>{const t=this.Ls.Zg(this.scale);return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.We(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.jr();return s.Jg(i.start,i.end),s}))))),this.e_=new Il((()=>{const t=this.t_.xt(this.Ls.Jp(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Le(s.fillStyle).Be(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.jr();return s.Tl(i.vertices),this.t_.zt(s,i.figure),s})))),(()=>{this.t_.Vt()}),((t,i)=>{this.ys(i)}))}solveNearest(t,i){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY};if(0===this.PM.length)return;const h=$u(e,this.PM.filter((t=>t.getVisible())),this.i_,gs);if(!h)return;const r=pt(h[0],this.Ls.us.ft,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],start:h[1].start,end:h[1].end,lowerExtreme:h[1].lowerExtreme,lowerQuartile:h[1].lowerQuartile,median:h[1].median,upperQuartile:h[1].upperQuartile,upperExtreme:h[1].upperExtreme,series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return qi({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,median:0,lowerQuartile:0,upperQuartile:0,lowerExtreme:0,upperExtreme:0,start:0,end:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}wM(t){if(!(t instanceof ee||t instanceof he))throw new Error("BoxSeries only supports Linear Axes")}RM(t){const i=this.e_.Ip(),s=this.s_.Ip();t.forEach((t=>{if(!t.getVisible())return;const e=this.Rs.toPoint((t.start+t.end-t.mM*(t.end-t.start))/2,t.lowerQuartile),h=this.Rs.toPoint((t.end-t.start)*t.mM,t.upperQuartile-t.lowerQuartile),r=this.Rs.toPoint((t.start+t.end)/2,t.lowerQuartile),n=this.Rs.toPoint((t.start+t.end)/2,t.lowerExtreme),o=this.Rs.toPoint((t.start+t.end)/2,t.upperQuartile),a=this.Rs.toPoint((t.start+t.end)/2,t.upperExtreme),l=this.Rs.toPoint((t.start+t.end-t.pM*(t.end-t.start))/2,t.lowerExtreme),u=this.Rs.toPoint((t.start+t.end+t.pM*(t.end-t.start))/2,t.lowerExtreme),c=this.Rs.toPoint((t.start+t.end-t.pM*(t.end-t.start))/2,t.upperExtreme),d=this.Rs.toPoint((t.start+t.end+t.pM*(t.end-t.start))/2,t.upperExtreme),f=this.Rs.toPoint((t.start+t.end-t.mM*(t.end-t.start))/2,t.median),A=this.Rs.toPoint((t.start+t.end+t.mM*(t.end-t.start))/2,t.median);i.add({Qo:t.Qo,vertices:[{x:e.x,y:e.y},{x:e.x,y:e.y+h.y},{x:e.x+h.x,y:e.y+h.y},{x:e.x+h.x,y:e.y}],figure:t},{fillStyle:t.vM,strokeStyle:t.SM}),s.add({Qo:0,start:r,end:n,figure:t},{strokeStyle:t.vu}),s.add({Qo:0,start:o,end:a,figure:t},{strokeStyle:t.vu}),s.add({Qo:0,start:l,end:u,figure:t},{strokeStyle:t.vu}),s.add({Qo:0,start:c,end:d,figure:t},{strokeStyle:t.vu}),s.add({Qo:0,start:f,end:A,figure:t},{strokeStyle:t.bM})})),i.finishPlot(),s.finishPlot()}add(t){const i=new Nu(this.Ls,this.scale,this.yM,this.cM,this.dM,this.fM,this.AM,this.LM,this.Rs,t.start,t.end,t.lowerExtreme,t.lowerQuartile,t.median,t.upperQuartile,t.upperExtreme,this.qi);return this.EM(i),this.BM=!0,this.chart.us.xs(),i}}class Zu extends Ou{constructor(t,i,s,e,h,r,o,a,l,u){super(t,i,s,e,h,r,o,a,l),this.dimensions={x:0,y:0,radiusX:0,radiusY:0},this.sl=c(n(0,0),n(0,0)),this.Ls=t,this.scale=i,this.Fe=Ri(l.ellipseSeriesFillStyle,u),this.Ie=Ri(l.ellipseSeriesStrokeStyle,u)}getBoundaries(){return this.sl}setDimensions(t){return this.dimensions=t,this.sl=c(n(t.x-t.radiusX,t.y-t.radiusY),n(t.x+t.radiusX,t.y+t.radiusY)),this.cM(),this.Ls.xs(),this}getDimensions(){return this.dimensions}setFillStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.dM(),this}getFillStyle(){return this.Fe}setStrokeStyle(t){return this.Ie="function"==typeof t?t(this.Ie):t,this.dM(),this}getStrokeStyle(){return this.Ie}getDominantStyle(){return this.Fe}}class Qu extends Yu{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.ws="Ellipse Series",this.t_=Zi(),this.i_=t=>{const i=t.getDimensions(),s=n(i.x,i.y);return pt(s,this.scale,this.Ls.us.ft)},this.chart.us.Qn(Yo.Ff),this.h_=c,this.VM=new Zu(this.Ls,this.scale,Zt,Zt,Zt,Zt,Zt,(t=>!1),this.qi,this.h_).dispose(),this.e_=new Il((()=>{const t=this.t_.xt(this.Ls.Jp(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Le(s.fillStyle).Be(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.jr();return s.Tl(i.vertices),this.t_.zt(s,i.figure),s})))),(()=>{this.t_.Vt()}),((t,i)=>{this.ys(i)}))}solveNearest(t,i){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY};if(0===this.PM.length)return;const h=$u(e,this.PM.filter((t=>t.getVisible())),this.i_,gs);if(!h)return;const r=pt(h[0],this.Ls.us.ft,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],...h[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return qi({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,radiusX:0,radiusY:0,drawSteps:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}wM(t){if(!(t instanceof ee||t instanceof he))throw new Error("EllipseSeries only supports Linear Axes")}RM(t){const i=this.e_.Ip();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=[],h=void 0!==s.drawSteps?s.drawSteps:72;for(let t=0;t<=h;t+=1){const i=t/h*2*Math.PI,r=s.x+s.radiusX*Math.cos(i),n=s.y+s.radiusY*Math.sin(i);e.push({x:r,y:n})}const r=t.getFillStyle(),n=t.getStrokeStyle();i.add({Qo:t.Qo,vertices:e,figure:t},{fillStyle:r,strokeStyle:n})})),i.finishPlot()}add(t){const i=new Zu(this.Ls,this.scale,this.yM,this.cM,this.dM,this.fM,this.AM,this.LM,this.qi,this.h_).setDimensions(t);return this.EM(i),this.BM=!0,this.chart.us.xs(),i}}class Ju extends Ou{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a),this.r_=[],this.sl=rs,this.Ls=t,this.scale=i,this.Fe=Ri(a.polygonSeriesFillStyle,l),this.Ie=Ri(a.polygonSeriesStrokeStyle,l)}getBoundaries(){return this.sl}setDimensions(t){return this.r_=t,this.sl=vs(this.r_),this.cM(),this.Ls.xs(),this}getDimensions(){return this.r_}setFillStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.dM(),this}getFillStyle(){return this.Fe}setStrokeStyle(t){return this.Ie="function"==typeof t?t(this.Ie):t,this.dM(),this}getStrokeStyle(){return this.Ie}getDominantStyle(){return this.Fe}}class Ku extends Yu{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.ws="Polygon Series",this.t_=Zi(),this.i_=t=>{const i=t.getBoundaries(),s=n((i.min.x+i.max.x)/2,(i.min.y+i.max.y)/2);return pt(s,this.scale,this.Ls.us.ft)},this.chart.us.Qn(Yo.Ff),this.h_=c,this.VM=new Ju(this.Ls,this.scale,Zt,Zt,Zt,Zt,Zt,(t=>!1),this.qi,this.h_).dispose(),this.e_=new Il((()=>{const t=this.t_.xt(this.Ls.Jp(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Le(s.fillStyle).Be(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.jr();return s.Tl(i.vertices),this.t_.zt(s,i.figure),s})))),(()=>{this.t_.Vt()}),((t,i)=>{this.ys(i)}))}solveNearest(t,i){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY};if(0===this.PM.length)return;const h=$u(e,this.PM.filter((t=>t.getVisible())),this.i_,gs);if(!h)return;const r=pt(h[0],this.Ls.us.ft,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],coordinates:h[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return qi({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,coordinates:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}wM(t){}RM(t){const i=this.e_.Ip();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=t.getFillStyle(),h=t.getStrokeStyle();i.add({Qo:t.Qo,vertices:s,figure:t},{fillStyle:e,strokeStyle:h})})),i.finishPlot()}add(t){const i=new Ju(this.Ls,this.scale,this.yM,this.cM,this.dM,this.fM,this.AM,this.LM,this.qi,this.h_).setDimensions(t);return this.EM(i),this.BM=!0,this.chart.us.xs(),i}}class qu extends Ou{constructor(t,i,s,e,h,r,o,a,l,u){super(t,i,s,e,h,r,o,a,l),this.n_={x:0,y:0,width:0,height:0},this.o_={x1:0,y1:0,x2:0,y2:0},this.sl=c(n(0,0),n(0,0)),this.Fe=Ri(l.rectangleSeriesFillStyle,u),this.Ls=t,this.scale=i,this.Ie=Ri(l.rectangleSeriesStrokeStyle,u)}getBoundaries(){return this.sl}setDimensions(t){return"x"in t?(this.n_=t,this.o_={x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}):(this.o_=t,this.n_={x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}),this.sl=vs([this.n_,n(this.n_.x+this.n_.width,this.n_.y+this.n_.height)]),this.cM(),this.Ls.xs(),this}getDimensionsPositionAndSize(){return this.n_}getDimensionsTwoPoints(){return this.o_}setFillStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.dM(),this}getFillStyle(){return this.Fe}setStrokeStyle(t){return this.Ie="function"==typeof t?t(this.Ie):t,this.dM(),this}getStrokeStyle(){return this.Ie}getDominantStyle(){return this.Fe}}class tc extends Yu{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.ws="Rectangle Series",this.t_=Zi(),this.i_=t=>{const i=t.getDimensionsPositionAndSize(),s=n(i.x+i.width/2,i.y+i.height/2);return pt(s,this.scale,this.Ls.us.ft)},this.chart.us.Qn(Yo.Ff),this.h_=c,this.VM=new qu(this.Ls,this.scale,Zt,Zt,Zt,Zt,Zt,(t=>!1),this.qi,this.h_).dispose(),this.e_=new Il((()=>{const t=this.t_.xt(this.Ls.Jp(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Le(s.fillStyle).Be(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.jr();return s.Tl(i.vertices),this.t_.zt(s,i.figure),s})))),(()=>{this.t_.Vt()}),((t,i)=>{this.ys(i)}))}solveNearest(t,i){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY};if(0===this.PM.length)return;const h=$u(e,this.PM.filter((t=>t.getVisible())),this.i_,gs);if(!h)return;const r=pt(h[0],this.Ls.us.ft,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],...h[1].getDimensionsPositionAndSize(),...h[1].getDimensionsTwoPoints(),series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return qi({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,x1:0,y1:0,x2:0,y2:0,width:0,height:0,multiHit:0,figure:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}wM(t){}RM(t){const i=this.e_.Ip();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensionsTwoPoints(),e=[{x:s.x1,y:s.y1},{x:s.x1,y:s.y2},{x:s.x2,y:s.y2},{x:s.x2,y:s.y1}],h=t.getFillStyle(),r=t.getStrokeStyle();i.add({Qo:t.Qo,vertices:e,figure:t},{fillStyle:h,strokeStyle:r})})),i.finishPlot()}add(t){const i=new qu(this.Ls,this.scale,this.yM,this.cM,this.dM,this.fM,this.AM,this.LM,this.qi,this.h_).setDimensions(t);return this.EM(i),this.BM=!0,this.chart.us.xs(),i}}class ic extends Ou{constructor(t,i,s,e,h,r,o,a,l,u){super(t,i,s,e,h,r,o,a,l),this.dimensions={startX:0,startY:0,endX:0,endY:0},this.sl=c(n(0,0),n(0,0)),this.qi=l,this.Ls=t,this.scale=i,this.Ie=Ri(l.segmentSeriesStrokeStyle,u)}getBoundaries(){return this.sl}setDimensions(t){return this.dimensions=t,this.sl=c(n(Math.min(t.startX,t.endX),Math.min(t.startY,t.endY)),n(Math.max(t.startX,t.endX),Math.max(t.startY,t.endY))),this.cM(),this.Ls.xs(),this}getDimensions(){return this.dimensions}setStrokeStyle(t){return this.Ie="function"==typeof t?t(this.Ie):t,this.dM(),this}getStrokeStyle(){return this.Ie}getDominantStyle(){const t=this.Ie;return t!==dt?t.getFillStyle():O}}class sc extends Yu{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.ws="Segment Series",this.a_=Zi(),this.i_=t=>{const i=t.getDimensions(),s=n((i.startX+i.endX)/2,(i.startY+i.endY)/2);return pt(s,this.scale,this.Ls.us.ft)},this.chart.us.Qn(Yo.Ff),this.h_=c,this.VM=new ic(this.Ls,this.scale,Zt,Zt,Zt,Zt,Zt,(t=>!1),this.qi,this.h_).dispose(),this.s_=new Il((()=>{const t=this.a_.xt(this.Ls.Zg(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.We(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.jr();return s.Jg(i.start,i.end),this.a_.zt(s,i.figure),s})))),(()=>{this.a_.Vt()}),((t,i)=>{this.ys(i)}))}solveNearest(t,i){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY};if(0===this.PM.length)return;const h=$u(e,this.PM.filter((t=>t.getVisible())),this.i_,gs);if(!h)return;const r=pt(h[0],this.Ls.us.ft,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],...h[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return qi({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,startX:0,startY:0,endX:0,endY:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}wM(t){}RM(t){const i=this.s_.Ip();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e={x:s.startX,y:s.startY},h={x:s.endX,y:s.endY},r=t.getStrokeStyle();i.add({Qo:t.Qo,start:e,end:h,figure:t},{strokeStyle:r})})),i.finishPlot()}add(t){const i=new ic(this.Ls,this.scale,this.yM,this.cM,this.dM,this.fM,this.AM,this.LM,this.qi,this.h_).setDimensions(t);return this.EM(i),this.BM=!0,this.chart.us.xs(),i}}class ec extends Gu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.ws="Heatmap Grid Series",this.kS={},this.chart.us.Qn(Yo.Tf),this.l_=a,this.qi=l;const d=c;this.Fe=Ri(l.heatmapGridSeriesFillStyle,d),this.TS=Ri(this.qi.heatmapGridSeriesWireframeStyle,d);const f={heatmapDataType:"intensity",dataOrder:a.dataOrder||"columns",columns:a.columns,rows:a.rows};this.qn=f,this.u_=this.Ls.c_(this.scale,[],f).Le(this.Fe).FS(this.TS).cs(this.getHighlight()),this.fs(this.u_),this.setHighlightOnHover(!1)}solveNearest(t,i="show-nearest"){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=pt(e,this.Ls.us.ft,this.scale),r=Ua(i)?this.u_.iM(h):this.u_.ed(h);if(r)return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:r.x,y:r.y,column:r.column,row:r.row,intensity:r.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:Z(this.Fe)?this.Fe.lut:void 0}}Ji(t,i){return qi({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,intensity:0,column:0,row:0,lut:Z(this.Fe)?this.Fe.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}PS(){const t=this.kS.start||{x:0,y:0};let i;i=this.kS.end?{x:(this.kS.end.x-t.x)/this.qn.columns,y:(this.kS.end.y-t.y)/this.qn.rows}:this.kS.step?this.kS.step:{x:1,y:1},this.u_.DS(t,i),this.chart.us.xs()}setStart(t){return this.kS.start=t,this.PS(),this}getStart(){return this.u_.BS().start}setStep(t){return this.kS.step=t,this.PS(),this}getStep(){return this.u_.BS().step}setEnd(t){return this.kS.end=t,this.PS(),this}getEnd(){return this.u_.BS().end}clear(){return this.u_.Vt(),this.Ls.xs(),this.L.emit("dataClear",this),this}setWireframeStyle(t){return this.TS="function"==typeof t?t(this.TS):t,this.u_.FS(this.TS),this.Ls.xs(),this.L.emit("styleChange",this),this}getWireframeStyle(){return this.TS}setIntensityInterpolation(t){return t=t||"disabled",this.u_.RS(t),this.Ls.xs(),this.L.emit("styleChange",this),this}getIntensityInterpolation(){return this.u_.ES()}fv(){return this.yv&&this.getVisible()}Kd(){return Di(this.Fe)}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe})}d_(t){this.u_.d_().forEach((i=>{t.u_.zS(i)}))}qM(t){return this.L.off(t)}KM(t){return this.L.on("dataClear",t)}f_(t){return this.L.on("styleChange",t)}A_(t){return this.L.off(t)}getXMax(){const t=this.u_;return t?t.vt():void 0}getXMin(){const t=this.u_;return t?t.yt():void 0}getYMax(){const t=this.u_;return t?t.bt():void 0}getYMin(){const t=this.u_;return t?t.St():void 0}Br(){const t=n(0,0);return t.x=Math.max(t.x,this.u_.Il()),t.y=Math.max(t.y,this.u_.Pl()),t}wM(t){if(!(t instanceof ee))throw new Error("HeatmapGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof ee&&t.Mi())throw new Error("HeatmapGridSeries can not be attached to a high precision Axis.")}Ve(t,i){t.cs(i),this.Ls.xs()}Ee(){return super.Ee(),this.u_.ia(this.getBoundaries()),this}}class hc extends ec{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u,c),this.Iv=!1}invalidateIntensityValues(t){if(this.Iv&&this.chart.us.Qn(Yo.Pf),Array.isArray(t)){if(0===t.length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.qn.dataOrder?t.length:t[0].length,rows:"rows"===this.qn.dataOrder?t.length:t[0].length},s="columns"===this.qn.dataOrder?this.qn.columns:this.qn.rows,e="columns"===this.qn.dataOrder?this.qn.rows:this.qn.columns;if(i.x>s||i.y>e){if(!0===this.chart.wA.so){const t=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.qn.columns}x${this.qn.rows}, input ${i.columns}x${i.rows}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Yt.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.u_.zS({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.qn.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.qn.dataOrder?t.values.length:t.values[0].length},s="columns"===this.qn.dataOrder?t.iColumn:t.iRow,e=s+i.primary-1,h="columns"===this.qn.dataOrder?t.iRow:t.iColumn,r=h+i.secondary-1,n=("columns"===this.qn.dataOrder?this.qn.columns:this.qn.rows)-1,o=("columns"===this.qn.dataOrder?this.qn.rows:this.qn.columns)-1;if(s<0||h<0){if(!0===this.chart.wA.so){const i=`HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niColumn: ${t.iColumn}, iRow: ${t.iRow}.\nNo intensity values will be invalidated.`;Yt.console.warn(i)}return this}if(e>n||r>o){if(!0===this.chart.wA.so){const s=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.qn.columns}x${this.qn.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Yt.console.warn(s)}const s=Math.max(e-n,0),h=i.primary-s,a=Math.max(r-o,0),l=[];for(let i=0;i<h;i+=1)l[i]=t.values[i].slice(0,a>0?-a:void 0);t={iColumn:t.iColumn,iRow:t.iRow,values:l}}this.u_.zS({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.L.emit("invalidateIntensity",this,t),this.Ls.xs(),this.Iv=!0,this}setFillStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.u_.Le(this.Fe),this.L.emit("styleChange",this),this.Ls.xs(),this}getFillStyle(){return this.Fe}g_(t){return this.L.on("invalidateIntensity",t)}y_(t){return this.L.off(t)}}class rc extends Gu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.ws="Scrolling Heatmap Grid Series",this.kS={},this.chart.us.Qn(Yo.Tf),this.chart.us.Qn(Yo.Pf);const d=c;this.Fe=Ri(l.heatmapScrollingGridSeriesFillStyle,d),this.TS=Ri(this.qi.heatmapScrollingGridSeriesWireframeStyle,d);const f={scrollDimension:"columns",heatmapDataType:"intensity",...a};this.qn=f,this.m_=this.Ls.p_(this.scale,[],f).Le(this.Fe).FS(this.TS).cs(this.getHighlight()),this.fs(this.m_),this.setHighlightOnHover(!1)}solveNearest(t,i="show-nearest"){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=pt(e,this.Ls.us.ft,this.scale),r=Ua(i)?this.m_.iM(h):this.m_.ed(h);if(r)return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:r.x,y:r.y,column:r.column,row:r.row,intensity:r.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:Z(this.Fe)?this.Fe.lut:void 0}}Ji(t,i){return qi({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,intensity:0,multiHit:0,column:0,row:0,lut:Z(this.Fe)?this.Fe.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}PS(){const t=this.kS.start||{x:0,y:0};let i;i=this.kS.step?this.kS.step:{x:1,y:1},this.m_.DS(t,i),this.chart.us.xs()}setStart(t){return this.kS.start=t,this.PS(),this}getStart(){return this.m_.BS().start}setStep(t){return this.kS.step=t,this.PS(),this}getStep(){return this.m_.BS().step}clear(){return this.m_.Vt(),this.Ls.xs(),this}setWireframeStyle(t){return this.TS="function"==typeof t?t(this.TS):t,this.m_.FS(this.TS),this.Ls.xs(),this}getWireframeStyle(){return this.TS}setPixelInterpolationMode(t){return t=t||"disabled",this.m_.RS(t),this.Ls.xs(),this}getPixelInterpolationMode(){return this.m_.ES()}setDataCleaning(t){return this.m_.Fu(t),this.Ls.xs(),this}fv(){return this.yv&&this.getVisible()}Kd(){return Di(this.Fe)}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe})}Le(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.m_.Le(this.Fe),this.Ls.xs(),this}wM(t){if(!(t instanceof ee))throw new Error("HeatmapScrollingGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof ee&&t.Mi())throw new Error("HeatmapScrollingGridSeries can not be attached to a high precision Axis.")}getXMax(){return this.m_.vt()||0}getXMin(){return this.m_.yt()||0}getYMax(){return this.m_.bt()||0}getYMin(){return this.m_.St()||0}Br(){const t=n(0,0);return t.x=Math.max(t.x,this.m_.Il()),t.y=Math.max(t.y,this.m_.Pl()),t}Ve(t,i){t.cs(i),this.Ls.xs()}}class nc extends rc{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u,c)}addIntensityValues(t){if(0===t.length||0===t[0].length)return this;const i=t.length,s=t[0].length,e=("columns"===this.qn.scrollDimension?t.length:t[0].length,"rows"===this.qn.scrollDimension?t.length:t[0].length,0+s-1),h=this.qn.resolution-1;if(e>h){if(!0===this.chart.wA.so){const t=`HeatmapScrollingGridSeries.addIntensityValues intensity matrix overflow.\nGrid resolution: ${this.qn.resolution}, input ${i}x${s}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Yt.console.warn(t)}const e=[];for(let s=0;s<i;s+=1)e[s]=t[s].slice(0,h+1);t=e}return this.m_.US(t),this.Ls.xs(),this}invalidateIntensityValues(t){return this.m_.zS(t.iSample,t.values),this.Ls.xs(),this}getSampleCount(){return this.m_.v_()}setFillStyle(t){return this.Le(t),this}getFillStyle(){return this.Fe}}const oc=(t,i,s)=>{let e,h,r=Number.MAX_VALUE;for(let n=0;n<i.length;n+=1){const o=i[n],a=s(o,t);if(a){const i=gs(t,a[0]),s=gs(t,a[1]);(void 0===e||i<r||s<r)&&(e=a,h=o,i<r?r=i:s<r&&(r=s))}}return e&&h?[e,h]:void 0};class ac extends Gu{constructor(){super(...arguments),this.NM=[],this.ku=[],this.S_=[],this.b_=[],this.$M=1e3,this.GM=0,this.Xi=ge.onHover,this.Ll={type:"disabled",packager:(t,i,s)=>t.slice()},this.x_=[],this.M_=[],this.__=!1,this.w_=(t,i)=>{const s=t.nM(i);if(s)return[pt(s[0],this.scale,this.Ls.us.ft),pt(s[1],this.scale,this.Ls.us.ft)]},this.C_=(t,i)=>{const s=t.k_(i);if(s)return[pt(s[0],this.scale,this.Ls.us.ft),pt(s[1],this.scale,this.Ls.us.ft)]},this.Kd=()=>Di(this.T_)||Di(this.F_),this.I_=t=>{const i=t.length;if(this.NM.length>0){const s=this.NM.length-1,e=this.NM[s];if(i>0){const[i,s]=e.ul(),[h,r]=e.ll();if((h?i.length+h.length:i.length)>=this.$M){const o=h&&h.length>0?h[h.length-1]:i[i.length-1],l=r&&r.length>0?r[r.length-1]:s[i.length-1],u=(o.x+t[0].position)/2,d=Es(u,o,n(t[0].position,t[0].high)).y,f=Es(u,l,n(t[0].position,t[0].low)).y,A=a(u,d,f);e.ml(A,c(n(u,f),n(u,d))).$l(!0),this.P_([A].concat(t)).Hl(!0)}else e.ml(t)}}else i>0&&this.P_(t)},this.D_=t=>{const i=this.x_,s=t.length;if(this.x_.length>0){if(s>0){const s=i[i.length-1],e=s.ul(),h=s.ll();if(e.length+h.length>=this.$M){const r=h.length>0?h[h.length-1]:e[e.length-1],o=(r.x+t[0].x)/2,a=Es(o,r,n(t[0].x,t[0].y)).y,l=n(o,a);s.ml(l,c(n(o,a),n(o,a))).$l(!0),i.push(this.B_([l].concat(t),this.HM).Hl(!0))}else s.ml(t)}}else s>0&&i.push(this.B_(t))},this.L_=t=>{const i=this.M_,s=t.length;if(this.M_.length>0){if(s>0){const s=i[i.length-1],e=s.ul(),h=s.ll();if(e.length+h.length>=this.$M){const r=h.length>0?h[h.length-1]:e[e.length-1],o=(r.x+t[0].x)/2,a=Es(o,r,n(t[0].x,t[0].y)).y,l=n(o,a);s.ml(l,c(n(o,a),n(o,a))).$l(!0),i.push(this.R_([l].concat(t)).Hl(!0))}else s.ml(t)}}else s>0&&i.push(this.R_(t))}}ds(){return"ProgressiveX"}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.GM=void 0!==i&&i>0?i:0,this.Ls.xs(),this}clear(){for(let t=0;t<this.NM.length;t+=1)this.NM[t].dispose();for(let t=0;t<this.x_.length;t+=1)this.x_[t].dispose();for(let t=0;t<this.M_.length;t+=1)this.M_[t].dispose();return this.ku.length=0,this.S_.length=0,this.b_.length=0,this.HM=void 0,this.NM.length=0,this.x_.length=0,this.M_.length=0,this.Ls.xs(),this.L.emit("dataClear",this),this}getPointAmount(){return this.NM.reduce(((t,i)=>t+i.pl()+i.vl()),this.ku.length)}getXMax(){return ai(this.NM,ii,Math.max,ri,this.HM)||0}getXMin(){return ai(this.NM,ti,Math.min,hi,this.HM)||0}getYMax(){return ai(this.NM,ei,Math.max,oi,this.HM)||0}getYMin(){return ai(this.NM,si,Math.min,ni,this.HM)||0}Br(){const t=n(0,0);for(const i of this.NM)t.x=Math.max(t.x,i.Il()),t.y=Math.max(t.y,i.Pl());return t}fv(){return this.yv&&this.getPointAmount()>0&&this.getVisible()}wM(t){}WM(t,i,s){this.ku=ki(this.ku,t,{canReturnB:!1}),this.S_=ki(this.S_,i,{canReturnB:!1}),this.b_=ki(this.b_,s,{canReturnB:!1}),this.Ls.xs()}E_(t,i,s,e){this.z_(i,s,e),this.WM(Array.isArray(t)?t:[t],i,s)}z_(t,i,s){const e=bs(vs(t),vs(i));this.HM?this.HM=bs(this.HM,e):this.HM=e,s&&(this.HM=bs(this.HM,s))}V_(){const t=this.NM.length,i=Math.min(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd());let s=0;if(t>1)for(let e=0;e<t-1;e+=1)this.scale.x.gi(this.NM[e].vt(),this.NM[e].Il())<i&&(s+=1);return s}XM(t,i,s,e){if(s>0){const h=Math.ceil(s/i),r=t.length-h;if(r>0&&e>0){const i=r-e>0?e:r;if(i>0){for(let s=0;s<i;s+=1)t[s].dispose();t.splice(0,i)}}}}O_(t){const i=this.NM.length>0?this.NM[this.NM.length-1]:void 0,s=i?i.ul()[0].length+(i.ll()[0]?i.ll()[0].length:0):void 0;Uu(t,s,this.$M,this.I_)}N_(t){const i=this.x_.length>0?this.x_[this.x_.length-1].ul().length+this.x_[this.x_.length-1].ll().length:void 0;Uu(t,i,this.$M,this.D_)}G_(t,i){const s=this.x_.length>0?this.x_[this.x_.length-1].ul().length+this.x_[this.x_.length-1].ll().length:void 0;Uu(t,s,this.$M,this.D_),Uu(i,s,this.$M,this.L_)}P_(t,i){const s=this.Ls.U_(this.scale).ml(t,i).Le(this.T_).Wl(this.F_).Gl(this.Ll).cs(this.getHighlight());return this.NM.push(s),this.fs(s),s}W_(t,i,s){const e=this.Ls.Ap(this.scale,void 0,[xl.UserSeries]).ml(t,s).setMouseInteractions(!1).We(i).cs(this.getHighlight());return this.fs(e),e}B_(t,i){return this.W_(t,this.Y_,i)}R_(t,i){return this.W_(t,this.H_,i)}X_(t){this.T_="function"==typeof t?t(this.T_):t;const i=this.T_;for(let t=0;t<this.NM.length;t+=1)this.NM[t].Le(i);this.Ls.xs()}j_(t){this.F_="function"==typeof t?t(this.F_):t;const i=this.F_;for(let t=0;t<this.NM.length;t+=1)this.NM[t].Wl(i);this.Ls.xs()}Z_(){return this.T_}Yl(){return this.F_}Q_(t){this.Y_="function"==typeof t?t(this.Y_):t;const i=this.Y_;for(let t=0;t<this.x_.length;t+=1)this.x_[t].We(i);this.Ls.xs()}J_(t){this.H_="function"==typeof t?t(this.H_):t;const i=this.H_;for(let t=0;t<this.M_.length;t+=1)this.M_[t].We(i);this.Ls.xs()}K_(){return this.Y_}q_(){return this.H_}Ve(t,i){t.cs(i),this.tw(i),this.Ls.xs()}tw(t){for(let i=0;i<this.x_.length;i+=1)this.x_[i].cs(t);for(let i=0;i<this.M_.length;i+=1)this.M_[i].cs(t)}wv(){if(super.wv(),this.__=!1,this.GM>0){const t=this.V_();this.XM(this.NM,this.$M,this.GM,t),this.x_.length>0&&this.XM(this.x_,this.$M,this.GM,t),this.M_.length>0&&this.XM(this.M_,this.$M,this.GM,t),this.__=!0}}Ee(){if(super.Ee(),this.ku.length>0&&(this.O_(this.ku),this.iw(this.S_,this.b_),this.__=!0),this.__){const t=this.getBoundaries();for(const i of this.NM)i.ia(t);for(const i of this.x_)i.ia(t);for(const i of this.M_)i.ia(t)}}Fp(){super.Fp(),this.HM=void 0,this.ku.length=0,this.S_.length=0,this.b_.length=0}}class lc extends ac{constructor(t,i,s,e,h,r,n,o,a=0,l,u){super(t,i,s,e,h,r,n,o,l,u),this.chart.us.Qn(Yo.kf),this.sw=a}add(t){0!==this.NM.length&&this.chart.us.Qn(Yo.Pf);const i=Array.isArray(t)?t:[t];if(i.length>0){const t=this.ew(i),[s,e]=this.hw(t);this.E_(t,s,e,c(n(es,this.sw),n(hs,this.sw)));const h=this.ku[this.ku.length-1];this.YM=h?{position:h.position,high:h.high,low:h.low}:void 0,this.L.emit("dataAdd",this,i,this.HM)}return this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.YM?this.YM.position+i:0),this.add(Hu(t,i,e)),this}QM(t){return this.L.on("dataAdd",t)}JM(t){return this.L.off(t)}KM(t){return this.L.on("dataClear",t)}qM(t){return this.L.off(t)}}class uc extends lc{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l,u);const c=t.getSeries().length;this.T_=Ri(this.qi.areaSeriesBipolarHighFillStyle,c),this.Y_=Ri(this.qi.areaSeriesBipolarHighStrokeStyle,c),this.F_=Ri(this.qi.areaSeriesBipolarLowFillStyle,c),this.H_=Ri(this.qi.areaSeriesBipolarLowStrokeStyle,c)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=oc(e,this.NM,Ua(i)?this.C_:this.w_);if(void 0!==h&&void 0!==h[0]){const t=pt(h[0][0],this.Ls.us.ft,this.scale),i=pt(h[0][1],this.Ls.us.ft,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY,multiHit:[t,i]}}}ew(t){return this.rw(t)}iw(t,i){return this.G_(t,i)}rw(t){let i=0;const s=[],e=t.length,h=this.sw;return e>0&&(this.nw&&(this.nw.y<=h&&h<=t[0].y||this.nw.y>=h&&h>=t[0].y)&&(s[i]=a(.5*(this.nw.x+t[0].x),h,h),i+=1),this.nw=t[e-1],1===e?this.ow(t[0],s,i):this.aw(t,s)),s}ow(t,i,s=0){return i[s]=a(t.x,t.y,this.sw),s+1}aw(t,i){let s=0,e=0;const h=t.length-1,r=this.sw;for(;e<h;){const h=t[e],n=t[e+=1],o=a(h.x,h.y,r);if(0!==s&&li(i[s-1],o)||(i[s]=o,s+=1),h.y<=r&&r<=n.y||h.y>=r&&r>=n.y){const t=h.y,e=n.y,o=r,l=t===e?n.x:pn(h.x,n.x,(o-t)/(e-t));i[s]=a(l,r,r),s+=1}i[s]=a(n.x,n.y,r),s+=1}return s}hw(t){const i=t.length,s=Array(i),e=Array(i),h=this.sw;for(let r=0;r<i;r+=1){const i=t[r];i.high>h?(s[r]=n(i.position,i.high),e[r]=n(i.position,h)):i.high<h?(s[r]=n(i.position,h),e[r]=n(i.position,i.high)):(s[r]=n(i.position,i.high),e[r]=n(i.position,i.high))}return[s,e]}ZM(){return Wu(this.NM,(t=>t[0]))}setPositiveFillStyle(t){return this.X_(t),this}setNegativeFillStyle(t){return this.j_(t),this}setPositiveStrokeStyle(t){return this.Q_(t),this}setNegativeStrokeStyle(t){return this.J_(t),this}getPositiveFillStyle(){return this.Z_()}getNegativeFillStyle(){return this.Yl()}getPositiveStrokeStyle(){return this.K_()}getNegativeStrokeStyle(){return this.q_()}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.T_,fill2:this.F_,behavior:{colorStep:!0}})}}class cc extends lc{constructor(){super(...arguments),this.H_=dt}iw(t){return this.N_(t)}hw(t){const i=t.length,s=Array(i);for(let e=0;e<i;e+=1){const i=t[e];s[e]=n(i.position,i.high)}return[s,[]]}setStrokeStyle(t){return this.Q_(t),this}getStrokeStyle(){return this.K_()}}class dc extends cc{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l,u);const c=t.getSeries().length;this.T_=O,this.F_=Ri(this.qi.areaSeriesNegativeFillStyle,c),this.Y_=Ri(this.qi.areaSeriesNegativeStrokeStyle,c)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=oc(e,this.NM,Ua(i)?this.C_:this.w_);if(void 0!==h&&void 0!==h[0]){const t=pt(h[0][0],this.Ls.us.ft,this.scale),i=pt(h[0][1],this.Ls.us.ft,this.scale),s=t.y<i.y?t:i;return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.axisX,y:this.axisY}},...s,series:this,axisX:this.axisX,axisY:this.axisY}}}ew(t){return this.lw(t)}lw(t){const i=[];return 1===t.length?this.ow(t[0],i):this.aw(t,i),i}ow(t,i,s=0){const e=this.sw;return i[s]=t.y>e?a(t.x,e,e):a(t.x,t.y,e),s+1}aw(t,i,s=0){let e=0;const h=t.length-1,r=this.sw;for(;e<h;){const h=t[e],o=t[e+=1];if(h.y<=r){const t=a(h.x,h.y,r);if(0!==s&&li(i[s-1],t)||(i[s]=t,s+=1),o.y>r){const t=Gs(n(hs,r),n(es,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,r,r),s+=1}else i[s]=a(o.x,o.y,r),s+=1}else{const t=a(h.x,r,r);if(0!==s&&li(i[s-1],t)||(i[s]=t,s+=1),o.y<=r){const t=Gs(n(hs,r),n(es,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,o.y,r),s+=1}else i[s]=a(o.x,r,r),s+=1}}return s}ZM(){return Wu(this.NM,(t=>t[1]))}setFillStyle(t){return this.j_(t),this}getFillStyle(){return this.Yl()}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.F_,stroke:this.Y_})}}class fc extends cc{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u);const d=c;this.T_=Ri(this.qi.areaSeriesPositiveFillStyle,d),this.F_=O,this.Y_=Ri(this.qi.areaSeriesPositiveStrokeStyle,d)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=oc(e,this.NM,Ua(i)?this.C_:this.w_);if(void 0!==h&&void 0!==h[0]){const t=pt(h[0][0],this.Ls.us.ft,this.scale),i=pt(h[0][1],this.Ls.us.ft,this.scale),s=t.y<i.y?i:t;return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.axisX,y:this.axisY}},...s,series:this,axisX:this.axisX,axisY:this.axisY}}}ew(t){return this.uw(t)}uw(t){const i=[];return 1===t.length?this.ow(t[0],i):this.aw(t,i),i}ow(t,i,s=0){const e=this.sw;return i[s]=t.y<e?a(t.x,e,e):a(t.x,t.y,e),s+1}aw(t,i,s=0){let e=0;const h=t.length-1,r=this.sw;for(;e<h;){const h=t[e],o=t[e+=1];if(h.y>=r){const t=a(h.x,h.y,r);if(0!==s&&li(i[s-1],t)||(i[s]=t,s+=1),o.y<r){const t=Gs(n(hs,r),n(es,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,r,r),s+=1}else i[s]=a(o.x,o.y,r),s+=1}else{const t=a(h.x,r,r);if(0!==s&&li(i[s-1],t)||(i[s]=t,s+=1),o.y>=r){const t=Gs(n(hs,r),n(es,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,o.y,r),s+=1}else i[s]=a(o.x,r,r),s+=1}}return s}ZM(){return Wu(this.NM,(t=>t[0]||[]))}setFillStyle(t){return this.X_(t),this}getFillStyle(){return this.Z_()}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.T_,stroke:this.Y_})}}const Ac={Positive:fc,Negative:dc,Bipolar:uc};class gc extends ac{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l),this.chart.us.Qn(Yo.kf);const c=u;this.T_=Ri(this.qi.areaRangeSeriesFillStyle,c),this.Y_=Ri(this.qi.areaRangeSeriesStrokeStyle,c),this.F_=Ri(this.qi.areaRangeSeriesFillStyleInverted,c),this.H_=Ri(this.qi.areaRangeSeriesStrokeStyleInverted,c)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=oc(e,this.NM,Ua(i)?this.C_:this.w_);if(void 0!==h&&void 0!==h[0]){const t=pt(h[0][0],this.Ls.us.ft,this.scale),i=pt(h[0][1],this.Ls.us.ft,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY,multiHit:[t,i]}}}add(t){const i=Array.isArray(t)?t:[t],[s,e]=u(i);this.E_(t,s,e);const h=this.ku[this.ku.length-1];return this.YM=h?{position:h.position,high:h.high,low:h.low}:void 0,this.L.emit("dataAdd",this,i,this.HM),this}addArraysHighLow(t,i,s=1,e=0){if(t.length!==i.length)throw new Error("arrayHigh and arrayLow lengths are not equal");{let h=e;h||(h=this.YM?this.YM.position+s:0),this.add(((t,i,s=1,e)=>{const h=void 0!==e?e:0,r=new Array(t.length);for(let e=0;e<t.length;e+=1)r[e]={position:h+s*e,high:t[e],low:i[e]};return r})(t,i,s,h))}return this}iw(t,i){this.G_(t,i)}setHighFillStyle(t){return this.X_(t),this}setLowFillStyle(t){return this.j_(t),this}setHighStrokeStyle(t){return this.Q_(t),this}setLowStrokeStyle(t){return this.J_(t),this}getHighFillStyle(){return this.Z_()}getLowFillStyle(){return this.Yl()}getHighStrokeStyle(){return this.K_()}getLowStrokeStyle(){return this.q_()}ZM(){return Wu(this.NM,(t=>{const i=t[0],s=t[1];if(!i||!s)return[];const e=[],h=i.length;for(let t=0;t<h;t+=1)e[t]={position:i[t].x,high:i[t].y,low:s[t].y};return e}))}QM(t){return this.L.on("dataAdd",t)}JM(t){return this.L.off(t)}KM(t){return this.L.on("dataClear",t)}qM(t){return this.L.off(t)}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.T_,fill2:this.F_,behavior:{colorStep:!0}})}}var yc;!function(t){t[t.before=0]="before",t[t.middle=.5]="middle",t[t.after=1]="after"}(yc||(yc={}));const mc=(t,i)=>{const s=[],e=t.length,h=i;if(e>0){let i=0,r=t[0];s[i]=r,i+=1;for(let o=1;o<e;o+=1){const e=t[o];if(h<=0)s[i]=n(r.x,e.y),i+=1;else{const t=r.x*(1-h)+e.x*h;s[i]=n(t,r.y),i+=1,s[i]=n(t,e.y),i+=1}s[i]=e,i+=1,r=e}}return s},pc=(t,i)=>{const s=t*t,e=s*t,h=1-t,r=h*h,o=r*h;return n(o*i[0].x+3*t*r*i[1].x+3*s*h*i[2].x+e*i[3].x,o*i[0].y+3*t*r*i[1].y+3*s*h*i[2].y+e*i[3].y)},vc=(t,i=32)=>{if(2===t.length)return[t[0],t[1]];const s=(t=>{const i=1e-5,s=t.length-1,e=Array(s);if(s>1){let h=n(0,0),r=n(0,0),o=n(0,0),a=Cs(Ps(t[1],t[0]));const l=3;let u=0,c=0;for(let d=0;d<s;d+=1){const f=Array(4);if(f[0]=t[d],f[1]=t[d],f[3]=t[d+1],f[2]=t[d+1],o=a,h=r,d+1<s?(a=t[d+2]===t[d+1]?n(0,0):Cs(Ps(t[d+2],t[d+1])),r=Cs(Is(o,a))):r=n(0,0),t[d+1].y===t[d].y)u=0,c=0;else{const s=t[d+1].x-t[d].x;u=Math.abs(h.x)>i?Math.abs(s/(l*h.x)):1,c=Math.abs(r.x)>i?Math.abs(s/(l*r.x)):1}f[1]=Is(Fs(h,u),f[1]),f[2]=Ps(f[2],Fs(r,c)),e[d]=f}}return e.length>0?e:[]})(t),e=s.length,h=Array(e*i);let r=0;for(let t=0;t<e;t+=1)for(let e=0;e<=i;e+=1)h[r]=pc(e/i,s[t]),r+=1;return h};class Sc extends Xu{constructor(t,i,s,e,h,r,o,a,l,u,d,f,A,g,y){super(t,i,s,e,h,r,o,a,l,d,f),this.NM=[],this.$M=1e5,this.aM=5,this.Ca=0,this.qa=!1,this.tl=!1,this.il=!1,this.cw=1,this.dw=[],this.fw=(t,i)=>{const s=t.ed(i);if(s)return pt(s,this.scale,this.Ls.us.ft)},this.Aw=(t,i)=>{const s=t.k_(i);if(s)return pt(s,this.scale,this.Ls.us.ft)},this.gw=t=>{if(this.NM.length>0){const i=this.NM[this.NM.length-1];if(t.length>0){const s=i.ul(),e=i.ll(),h=s.length+e.length-+i.Xl();if(h>=this.$M){const r=e.length>0?e[e.length-1]:s[i.Xl()?h:h-1],o=n((r.x+t[0].x)/2,(r.y+t[0].y)/2);i.ml(o,c(n(o.x,o.y),n(o.x,o.y))).$l(!0),this.yw([o].concat(t)).Hl(!0)}else i.ml(t,this.HM)}}else t.length>0&&this.yw(t)},this.mw=t=>{if(this.dw.length>0){const i=this.dw[this.dw.length-1];t.length>0&&((i.ul().length+i.ll().length)*this.cw>=this.$M?this.pw(t):i.ml(t))}else t.length>0&&this.pw(t)},this.qn=y,this.lM=u,this.Sw=A,this.bw=Ri(d.pointLineSeriesFillStyle,g),this.vu=Ri(this.qi.pointLineSeriesStrokeStyle,g)}add(t){return super.add(t),this}ZM(){return Wu(this.dw)}setStrokeStyle(t){this.vu="function"==typeof t?t(this.vu):t;const i=this.vu;for(let t=0;t<this.NM.length;t+=1)this.NM[t].We(i);return this.Ls.xs(),this}getStrokeStyle(){return this.vu}setPointFillStyle(t){this.bw="function"==typeof t?t(this.bw):t;const i=this.bw;for(let t=0;t<this.dw.length;t+=1)this.dw[t].Le(i);return this.Ls.xs(),this}getPointFillStyle(){return this.bw}setPointSize(t){this.aM=t;for(let i=0;i<this.dw.length;i+=1)this.dw[i].tt(t);return this.Ls.xs(),this}getPointSize(){return this.aM}getPointShape(){return this.lM}setPointRotation(t){this.Ca=t;for(let i=0;i<this.dw.length;i+=1)this.dw[i].ir(t);return this.Ls.xs(),this}getPointRotation(){return this.Ca}setIndividualPointSizeEnabled(t){this.qa=t,t&&this.chart.us.Qn(Yo.Df);for(let i=0;i<this.dw.length;i+=1)this.dw[i].fl(t);return this.Ls.xs(),this}getIndividualPointSizeEnabled(){return this.qa}setIndividualPointRotationEnabled(t){this.tl=t;for(let i=0;i<this.dw.length;i+=1)this.dw[i].Al(t);return this.Ls.xs(),this}getIndividualPointRotationEnabled(){return this.tl}setIndividualPointValueEnabled(t){this.il=t;for(let i=0;i<this.dw.length;i+=1)this.dw[i].yl(t);return this.Ls.xs(),this}getIndividualPointValueEnabled(){return this.il}setVisible(t){return super.setVisible(t),this.dw.forEach((i=>i.setVisible(t))),this}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY};if(0===this.NM.length)return;const h=this.NM[0].Ko()||dr.NearestX,r=Ua(i)?$u(e,this.NM,this.Aw,h===dr.NearestX?(t,i)=>Math.abs(t.x-i.x):h===dr.NearestY?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2):$u(e,this.dw,this.fw,h===dr.NearestX?(t,i)=>Math.abs(t.x-i.x):h===dr.NearestY?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==r){const t=pt(r[0],this.Ls.us.ft,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}Kd(){return Di(this.bw)||Di(this.vu.getFillStyle())}Ds(){return this._s||this.lM}wM(t){}Ve(t,i){t.cs(i),this.Ls.xs()}jM(t){const i=this.NM.length>0?this.NM[this.NM.length-1].ul().length+this.NM[this.NM.length-1].ll().length-+this.NM[this.NM.length-1].Xl():void 0;Uu(t,i,this.$M,this.gw),Uu(t,i,this.$M,this.mw)}pw(t,i){const s=this.Ls.Ov(this.scale).ml(t,i).setMouseInteractions(this.Hi).Le(this.bw).cl(this.lM).tt(this.aM).ir(this.Ca).fl(this.qa).Al(this.tl).yl(this.il).cs(this.getHighlight());return this.fs(s),this.dw.push(s),s}yw(t,i){const s=this.Ls.Ap(this.scale,void 0,[xl.UserSeries,...this.Sw]).ml(t,i).setMouseInteractions(this.Hi).We(this.vu).cs(this.getHighlight());return this.fs(s),this.NM.push(s),s}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{stroke:this.vu,fill:this.bw})}getPointAmount(){return this.dw.reduce(((t,i)=>t+i.pl()+i.vl()),this.ku.length)}clear(){super.clear();for(let t=0;t<this.NM.length;t+=1)this.NM[t].dispose();this.NM.length=0;for(let t=0;t<this.dw.length;t+=1)this.dw[t].dispose();return this.dw.length=0,this}XM(t,i,s,e){super.XM(t,i,s,e),this.UM.XM(this.dw,i,s,e,this.scale,(t=>{}))}}const bc=(t,i)=>t.ll().length>=i?t.ll().slice(-i):Array.prototype.concat(t.ul(),t.ll()).slice(-i),xc=(t,i,s)=>{const e=Array.prototype.concat(t.ul(),t.ll()).slice(0,-s-1).concat(i.slice(s+1,2*s+2));t.Vt().ml(e).Vs()};class Mc extends Sc{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d,f,A){super(t,i,s,e,h,r,n,o,a,l,u,c,d,f,A),this.cw=32,this.$M=8e3,this.xw=t=>{if(0===t.length)return;const i=this.dw.length;if(i>0){const s=i>1,e=this.dw[i-1];if(s){const s=Array.prototype.concat(e.ul(),e.ll()),h=s.length;if(32*h>=this.$M){const s=bc(e,3),h=Array.prototype.concat(s,t),r=vc(h,32);xc(this.NM[i-1],r,32),this.yw(r.slice(66))}else if(h<5){const e=this.dw[i-2],h=bc(e,3),r=Array.prototype.concat(h,s,t),n=vc(r,32),o=this.NM[i-1],a=n.slice(66);o.Vt().ml(a).Vs()}else{const s=this.NM[i-1],h=Array.prototype.concat(s.ul(),s.ll()),r=bc(e,4),n=Array.prototype.concat(r,t),o=vc(n,32),a=h.slice(0,-66).concat(o.slice(33));s.Vt().ml(a).Vs()}}else{const s=Array.prototype.concat(e.ul(),e.ll()),h=s.length,r=this.NM[i-1];if(32*h>=this.$M){const i=bc(e,3),s=Array.prototype.concat(i,t),h=vc(s,32);xc(this.NM[0],h,32),this.yw(h.slice(66))}else if(h+t.length>1){const i=Array.prototype.concat(s,t),e=vc(i,32);r.Vt().ml(e).Vs()}else r.ml(t)}}else{const i=t.length>0?vc(t,32):t,s=vs(i);this.yw(i,s)}this.mw(t)}}jM(t){const i=this.dw.length,s=this.dw.length>0?this.dw[i-1].ul().length+this.dw[i-1].ll().length:void 0;Uu(t,s,Math.ceil(this.$M/this.cw),this.xw)}}class _c{constructor(){this.Ni="FreeformPattern",this.Ll={type:"disabled",packager:(t,i,s)=>t.slice()}}XM(t,i,s,e,h,r){if(e>0){const h=Math.trunc((i-e)/s);if(h>0&&t.length>1){const i=t.splice(0,h);for(let t=0;t<i.length;t+=1)r(i[t]),i[t].dispose()}}}Mw(t,i){const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)}getXMax(t=[],i){return ai(t,ii,Math.max,ri,i)}getXMin(t=[],i){return ai(t,ti,Math.min,hi,i)}getYMax(t=[],i){return ai(t,ei,Math.max,oi,i)}getYMin(t=[],i){return ai(t,si,Math.min,ni,i)}}const wc=t=>{switch(t){case"normal":default:return 1;case"high":return.25}},Cc=i({Ll:{type:"disabled",packager:(t,i,s)=>t.slice()}});class kc extends Cc{XM(t,i,s,e,h,r){if(e>0){const i=Math.ceil(e/s),n=t.length-i;if(n>0){const i=this.V_(t,h);if(i>0){const s=n-i>0?i:n;if(s>0){for(let i=0;i<s;i+=1)r(t[i]),t[i].dispose();t.splice(0,s)}}}}}}const Tc=(t,i)=>{const s=i.St();return t?Math.min(s,t):s},Fc=(t,i)=>{const s=i.bt();return t?Math.max(s,t):s};class Ic extends kc{Mw(t,i){return Math.abs(t.x-i.x)}getYMax(t=[],i){return t.reduce(Fc,i?i.max.y:void 0)}getYMin(t=[],i){return t.reduce(Tc,i?i.min.y:void 0)}}const Pc=(t,i)=>{const s=i.yt();return t?Math.min(s,t):s},Dc=(t,i)=>{const s=i.vt();return t?Math.max(s,t):s};class Bc extends kc{Mw(t,i){return Math.abs(t.y-i.y)}getXMax(t=[],i){return t.reduce(Dc,i?i.max.x:void 0)}getXMin(t=[],i){return t.reduce(Pc,i?i.min.x:void 0)}}const Lc={horizontalProgressive:new class extends Ic{constructor(){super({Ll:hr()}),this.Ni="HorizontalProgressivePattern"}V_(t,i){const s=t.length,e=Math.min(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.x.gi(t[r].vt(),t[r].Il())<e&&(h+=1);return h}getXMax(t=[],i){return void 0!==i?i?i.max.x:void 0:t.length>0?t[t.length-1].vt():void 0}getXMin(t=[],i){return t.length>0&&t[0].pl()>0?t[0].yt():i?i.min.x:void 0}setPrecision(t){return this.set("_columnPackaging",hr(wc(t)))}},horizontalRegressive:new class extends Ic{constructor(){super({Ll:rr()}),this.Ni="HorizontalRegressivePattern"}V_(t,i){const s=t.length,e=Math.max(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.x.gi(t[r].yt(),-t[r].Il())&&(h+=1);return h}getXMax(t=[],i){return t.length>0&&t[0].pl()>0?t[0].vt():i?i.max.x:void 0}getXMin(t=[],i){return void 0!==i?i?i.min.x:void 0:t.length>0?t[t.length-1].yt():void 0}setPrecision(t){return this.set("_columnPackaging",rr(wc(t)))}},verticalProgressive:new class extends Bc{constructor(){super({Ll:nr()}),this.Ni="VerticalProgressivePattern"}V_(t,i){const s=t.length,e=Math.min(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.y.gi(t[r].bt(),t[r].Pl())<e&&(h+=1);return h}getYMax(t=[],i){return void 0!==i?i?i.max.y:void 0:t.length>0?t[t.length-1].bt():void 0}getYMin(t=[],i){return t.length>0&&t[0].pl()>0?t[0].St():i?i.min.y:void 0}setPrecision(t){return this.set("_columnPackaging",nr(wc(t)))}},verticalRegressive:new class extends Bc{constructor(){super({Ll:or()}),this.Ni="VerticalRegressivePattern"}V_(t,i){const s=t.length,e=Math.max(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.y.gi(t[r].St(),-t[r].Pl())&&(h+=1);return h}getYMax(t=[],i){return t.length>0&&t[0].pl()>0?t[0].bt():i?i.max.y:void 0}getYMin(t=[],i){return void 0!==i?i?i.min.y:void 0:t.length>0?t[t.length-1].St():void 0}setPrecision(t){return this.set("_columnPackaging",or(wc(t)))}},freeform:new _c};class Rc extends Sc{constructor(t,i,s,e,h,r,o,a,l,u,d,f,A,g,y){super(t,i,s,e,h,r,o,a,Lc.horizontalProgressive,l,d,f,A,g,y),this.gw=t=>{const i=this.NM.length>0?this.NM[this.NM.length-1].ul().length+this.NM[this.NM.length-1].ll().length:void 0;Uu(t,i,this.$M,this._w)},this._w=t=>{const i=t.length;if(this.NM.length>0){const s=this.NM[this.NM.length-1];if(i>0){const i=s.ul(),e=s.ll(),h=e.length>0?e[e.length-1]:i[i.length-1],r=mc([h].concat(t),this.ww);r.shift();const o=n((h.x+r[0].x)/2,(h.y+r[0].y)/2),a=Array.prototype.concat(o,r);(e.length>0?i.length+e.length:i.length)>=this.$M?(s.ml(o,c(n(o.x,o.y),n(o.x,o.y))).$l(!0),this.yw(a).Hl(!0),this.pw(t)):s.ml(a)}}else i>0&&this.yw(mc(t,this.ww));this.mw(t)},this.ww=u,void 0===this.Sw.find((t=>"DataPattern"===t.type))&&this.Sw.push({type:"DataPattern",args:{pattern:"ProgressiveX"}})}}class Ec extends Gu{constructor(t,i,s,e,h,r,n,a,l,u){super(t,i,s,e,h,r,n,a,l,u),this.Cw=t=>t[4]>=t[1],this.DM=c(o(es,es),o(hs,hs)),this.kw=[],this.Tw=!1,this.Fw=-1,this.Iw=[],this.Pw=!0,this.Dw=!1,this.Bw=4,this.Lw=[1e-7,1e-6,1e-5,1e-4,.001,.01,.1,1,5,10,30,60,300,600,1800,3600,7200,14400,28800,36e3,43200,50400,57600,64800,72e3,86400,172800,259200,345600,432e3,604800,1209600,2592e3,7776e3,10368e3,15552e3,31536e3,15768e4,31536e4,63072e4,7884e5,15768e5,31536e5,3942e6,47304e5,63072e5,7884e6,15768e6,31536e6,3942e7,47304e6,63072e6,7884e7,15768e7,31536e7,63072e7,7884e8,15768e8,31536e8,47304e8,63072e8],this.chart.us.Qn(Yo.mf)}ZM(){return this.Iw}QM(t){return this.L.on("dataAdd",t)}JM(t){return this.L.off(t)}KM(t){return this.L.on("dataClear",t)}qM(t){return this.L.off(t)}fv(){return this.yv&&this.Iw.length>0&&this.getVisible()}Rw(t){if(!(this.Iw.length<1))return[this.Iw[t][0],this.Iw[t][1],this.Iw[t][2],this.Iw[t][3],this.Iw[t][4]]}solveNearest(t,i){if(0===this.Iw.length)return;const s=this.chart.translateCoordinate(t,{x:this.axisX,y:this.axisY}).x,e=void 0!==this.getPackDataState();let h,r,o,a,l;if(e){const t=this.Ew;if(!t)return;const i=ji(s,t.length-1,(i=>t[i][0])),e=void 0!==i&&t[i];if(!e)return;a=e[3],o=e[2],r=e[1],l=e[4],h=e[0]}else{const t=ji(s,this.Iw.length-1,(t=>this.Iw[t][0])),i=void 0!==t&&this.Iw[t];if(!i)return;h=i[0],r=i[1],o=i[2],a=i[3],l=i[4]}return{cursorPosition:{resultTable:n(h,l),resultTableScale:this.scale,pointMarker:n(h,l),pointMarkerScale:{x:this.axisX,y:this.axisY}},x:h,y:l,open:r,high:o,low:a,close:l,position:h,isPacked:e,series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return qi({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,open:0,high:0,low:0,close:0,position:0,isPacked:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}wM(t){if(!(t.x instanceof te))throw new Error("OHLCSeries must be attached to a Linear X Axis.");this.zw=t.x}Br(){return n(5,5)}__(t){const i=t.length-1;if(i<0)return this;for(let s=0;s<=i;s+=1)t[s][3]<this.DM.min.y&&(this.DM.min.y=t[s][3]),this.DM.max.y<t[s][2]&&(this.DM.max.y=t[s][2]);return this.DM.min.x=Math.min(this.DM.min.x,t[0][0]),this.DM.max.x=Math.max(this.DM.max.x,t[i][0]),this}getXMax(){return this.DM.max.x}getXMin(){return this.DM.min.x}getYMax(){return this.DM.max.y}getYMin(){return this.DM.min.y}add(t){this.Iw.length>0&&this.chart.us.Qn(Yo.Pf);const i=Array.isArray(t[0])?t:[t[0]];if(i.length>0){this.Tw=!0;const t=this.Iw.length,s=this.kw.length,e=i.length;this.Iw.length=t+e,this.kw.length=s+e;for(let h=0;h<e;h+=1)this.Iw[t+h]=i[h],this.kw[s+h]=this.Iw[t+h];this.__(i),this.L.emit("dataAdd",this,i,void 0),this.Ls.xs()}return this}setPackData(t){return t!==this.Pw&&(this.Dw=!0,this.Pw=t,this.chart.us.xs()),this}getPackData(){return this.Pw}getPackDataState(){const t=this.Fw;if(!(t<0||void 0===this.Ew||this.Ew.length===this.Iw.length))return{figureAxisInterval:t}}setFigureWidth(t){return this.Vw=t,this.chart.us.xs(),this}getFigureWidth(){return this.Vw}setFigureMinimumGap(t){return this.Bw=t,this.chart.us.xs(),this}getFigureMinimumGap(){return this.Bw}clear(){return this.Iw=[],this.kw=[],this.Ew=void 0,this.Ow(),this.DM.min.x=es,this.DM.min.y=es,this.DM.max.x=hs,this.DM.max.y=hs,this.L.emit("dataClear",this),this}Nw(t){return this.zw.getPixelSize()*t/1e3}Gw(){const t=this.Lw.length-1,i=this.Nw(this.Vw+this.Bw);let s=ji(i,t,(t=>this.Lw[t]));return void 0===s?s=i<this.Lw[0]?0:this.Lw[t]<i?t:this.Lw.length/2:this.Lw[s]<i&&(s+=1),this.Lw.length<=s&&(s=t),1e3*this.Lw[s]}Ee(){if(super.Ee(),!this.Pw){this.Ew=void 0;let t=null;if(this.Dw?(this.Dw=!1,t=this.Iw,this.Ow()):t=this.kw,t.length>=1){for(let i=0;i<t.length;i+=1){const s=t[i],e=s[0];this.Cw(s)?this.Uw(e,s):this.Ww(e,s)}this.kw.length=0,this.Tw=!1,this.Fw=-1}}}Fp(){super.Fp();const t=this.Gw();if(this.Pw&&this.Iw.length>=1&&(t!==this.Fw||this.Tw||this.Dw)){this.Dw=!1,this.Fw=t,this.Tw=!1,this.Ow(),this.Ew=[];const i=this.Iw.length;let s=this.Iw[0][0]-this.Iw[0][0]%(t/2)+t,e=0;for(;e<i;){let h=this.Rw(e);if(void 0===h)break;let r=h[3],n=h[2];const o=e;for(e+=1;e<i&&this.Iw[e][0]<s;)h=this.Iw[e],this.Iw[e][3]<r&&(r=this.Iw[e][3]),n<this.Iw[e][2]&&(n=this.Iw[e][2]),e+=1;const a=e-1;let l=h[0];o<a&&(l=this.Iw[a][0],h=[l,this.Iw[o][1],n,r,this.Iw[a][4]]),h[1]<h[4]?this.Uw(l,h):this.Ww(l,h),this.Ew.push(h),s+=t}}}}class zc extends Ec{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.Yw=1175494351e-14,this.Vw=this.qi.ohlcCandleThicknessPixels||5,this.Hw=this.qi.ohlcCandleTailStrokeStylePositive,this.Xw=this.qi.ohlcCandleTailStrokeStyleNegative,this.$w=this.qi.ohlcCandleBodyFillStylePositive,this.jw=this.qi.ohlcCandleBodyFillStyleNegative,this.Zw=s.Zg(this.scale).We(new _e({thickness:this.Vw,fillStyle:this.$w})),this.Zw.wu={x:0,y:1},this.Qw=s.Zg(this.scale).We(new _e({thickness:this.Vw,fillStyle:this.jw})),this.Qw.wu={x:0,y:-1},this.Jw=s.Zg(this.scale).We(this.Hw),this.Kw=s.Zg(this.scale).We(this.Xw),this.fs(this.Zw),this.fs(this.Qw),this.fs(this.Jw),this.fs(this.Kw)}setBodyThickness(t){return this.Vw=t,this.Zw.We(new _e({thickness:this.Vw,fillStyle:this.$w})),this.Qw.We(new _e({thickness:this.Vw,fillStyle:this.jw})),this.chart.us.xs(),this}getBodyThickness(){return this.Vw}setBodyFillStylePositive(t){return this.$w="function"==typeof t?t(this.$w):t,this.Zw.We(new _e({thickness:this.Vw,fillStyle:this.$w})),this.chart.us.xs(),this}getBodyFillStylePositive(){return this.$w}setBodyFillStyleNegative(t){return this.jw="function"==typeof t?t(this.jw):t,this.Qw.We(new _e({thickness:this.Vw,fillStyle:this.jw})),this.chart.us.xs(),this}getBodyFillStyleNegative(){return this.jw}setTailStrokeStylePositive(t){return this.Hw="function"==typeof t?t(this.Hw):t,this.Jw.We(this.Hw),this.chart.us.xs(),this}getTailStrokeStylePositive(){return this.Hw}setTailStrokeStyleNegative(t){return this.Xw="function"==typeof t?t(this.Xw):t,this.Kw.We(this.Xw),this.chart.us.xs(),this}getTailStrokeStyleNegative(){return this.Xw}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.$w,fill2:this.jw,behavior:{colorStep:!0}})}Ow(){return this.Jw.Vt(),this.Kw.Vt(),this.Zw.Vt(),this.Qw.Vt(),this}Uw(t,i){return Math.abs(i[1]-i[4])<this.Yw?this.Zw.jr().Jg({x:t,y:i[1]-this.Yw},{x:t,y:i[1]+this.Yw}):this.Zw.jr().Jg({x:t,y:i[1]},{x:t,y:i[4]}),i[4]<i[2]&&this.Jw.jr().Jg({x:t,y:i[4]},{x:t,y:i[2]}),i[3]<i[1]&&this.Jw.jr().Jg({x:t,y:i[3]},{x:t,y:i[1]}),this}Ww(t,i){return Math.abs(i[1]-i[4])<this.Yw?this.Qw.jr().Jg({x:t,y:i[1]-this.Yw},{x:t,y:i[1]+this.Yw}):this.Qw.jr().Jg({x:t,y:i[1]},{x:t,y:i[4]}),i[3]<i[4]&&this.Kw.jr().Jg({x:t,y:i[3]},{x:t,y:i[4]}),i[1]<i[2]&&this.Kw.jr().Jg({x:t,y:i[1]},{x:t,y:i[2]}),this}}class Vc extends Ec{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.Vw=this.qi.ohlcBarThicknessPixels||10,this.qw=this.qi.ohlcBarStrokeStylePositive,this.tC=this.qi.ohlcBarStrokeStyleNegative,this.iC=s.Zg(this.scale).We(this.qw),this.fs(this.iC),this.sC=s.Zg(this.scale).We(this.qw),this.sC.wu={x:-this.Vw/2,y:0},this.fs(this.sC),this.eC=s.Zg(this.scale).We(this.qw),this.eC.wu={x:this.Vw/2,y:0},this.fs(this.eC),this.hC=s.Zg(this.scale).We(this.tC),this.fs(this.hC),this.rC=s.Zg(this.scale).We(this.tC),this.rC.wu={x:-this.Vw/2,y:0},this.fs(this.rC),this.nC=s.Zg(this.scale).We(this.tC),this.nC.wu={x:this.Vw/2,y:0},this.fs(this.nC)}setStrokeStylePositive(t){return this.qw="function"==typeof t?t(this.qw):t,this.iC.We(this.qw),this.sC.We(this.qw),this.eC.We(this.qw),this.chart.us.xs(),this}getStrokeStylePositive(){return this.qw}setStrokeStyleNegative(t){return this.tC="function"==typeof t?t(this.tC):t,this.hC.We(this.tC),this.rC.We(this.tC),this.nC.We(this.tC),this.chart.us.xs(),this}getStrokeStyleNegative(){return this.tC}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.qw.getFillStyle(),fill2:this.tC.getFillStyle(),behavior:{colorStep:!0}})}setFigureWidth(t){return super.setFigureWidth(t),this.sC.wu={x:-t/2,y:0},this.rC.wu={x:-t/2,y:0},this.eC.wu={x:t/2,y:0},this.nC.wu={x:t/2,y:0},this}Ow(){return this.hC.Vt(),this.iC.Vt(),this.rC.Vt(),this.sC.Vt(),this.nC.Vt(),this.eC.Vt(),this}Uw(t,i){return this.iC.jr().Jg({x:t,y:i[3]},{x:t,y:i[2]}),this.sC.jr().Jg({x:t,y:i[1]},{x:t,y:i[1]}),this.eC.jr().Jg({x:t,y:i[4]},{x:t,y:i[4]}),this}Ww(t,i){return this.hC.jr().Jg({x:t,y:i[3]},{x:t,y:i[2]}),this.rC.jr().Jg({x:t,y:i[1]},{x:t,y:i[1]}),this.nC.jr().Jg({x:t,y:i[4]},{x:t,y:i[4]}),this}}const Oc={Candlesticks:zc,Bars:Vc},Nc=t=>({defaultDragMouseStyle:Ke.Horizontal,getTitleTextRotation:()=>0,...Rl(t,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.Br().x))}),Gc=t=>({defaultDragMouseStyle:Ke.Vertical,getTitleTextRotation:t=>90*t,...Rl(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.Br().y))});class Uc extends Ka{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,o),this.oC=!1,this.aC=!1,this.lC=!1,this.uC=!1,this.cC=!1,this.dC=new Map,this.fC=new Map,this.AC=[],this.gC=[],this.yC=!0,this.mC=!0,this.pC=!1,this.vC=[],this.SC=new Set,this.bC=!1,this.Sm=h,this.xC=r,this.MC=n,this._C=o.cursorGridStrokeStyleX,this.wC=o.cursorGridStrokeStyleY}setKeepWithinAxisBoundaries(t){return this.oC=t,this.Ls.xs(),this}getKeepWithinAxisBoundaries(){return this.oC}dispose(){return super.dispose(),this.dC.forEach((t=>t.forEach((t=>t.dispose())))),this.fC.forEach((t=>t.forEach((t=>t.dispose())))),this.AC.length=0,this.gC.length=0,this.pm.length=0,this}Ee(){return this.pC&&this.setPosition(...this.vC),this.AC.forEach((t=>t.setVisible(this.ji&&this.yy).setMarkerVisible(this.ji&&this.yy&&this.yC))),this.gC.forEach((t=>t.setVisible(this.ji&&this.yy).setMarkerVisible(this.ji&&this.yy&&this.mC))),super.Ee()}im(){if(!this.oC)return super.im();const t={x:!0,y:!0},i=this.tm,s=i.getPosition(n(-1,-1),Ot.PaddedBackground),e=i.getPosition(n(1,1),Ot.PaddedBackground);return this.vC.forEach(((h,r)=>{const n=h.pointMarkerScale.x,o=h.pointMarkerScale.y,a=pt(s,i.scale,{x:n,y:o}),l=pt(e,i.scale,{x:n,y:o});As(a.x,n.Hh,n.Xh)&&As(l.x,n.Hh,n.Xh)&&(t.x=!1),As(a.y,o.Hh,o.Xh)&&As(l.y,o.Hh,o.Xh)&&(t.y=!1)})),t}setPosition(...t){if(this.vC=t,this.AC.forEach((t=>t.setVisible(!1))),this.gC.forEach((t=>t.setVisible(!1))),this.AC.length=0,this.gC.length=0,0===t.length)return this;const i=this.renderingScale,s=t[0].resultTable,e=La(t[0].resultTableScale,i),h=e===this.scale?s:pt(s,e,this.scale);this.tm.setPosition(h),this.yy=!1,this.Am.forEach((t=>{t.targetVisible=!1}));const r=new Map;return t.forEach(((t,s)=>{const e=t.pointMarkerScale.x,h=t.pointMarkerScale.y,o=r.get(e)||[],a=r.get(h)||[],l=!o.includes(t.pointMarker.x),u=!a.includes(t.pointMarker.y);o.push(t.pointMarker.x),a.push(t.pointMarker.y),r.set(e,o),r.set(h,a);const c=t.pointMarker,d=Hc(n(c.x,c.y),e,h);if(l){const t=this.Ih(e,!0);t.setValue(c.x),t.setGridStrokeLength(this.aC?d.x:1).setAllocatesAxisSpace(this.bC),this.AC.push(t)}if(u){const t=this.Ih(h,!1);t.setValue(c.y),t.setGridStrokeLength(this.lC?d.y:1).setAllocatesAxisSpace(this.bC),this.gC.push(t)}let f=this.Am[s];if(!f){const t=new eo(this.Ls,this.renderingScale,this.scale,Zt,this.qi).setMouseInteractions(!1).setFillStyle(this.qi.cursorPointMarkerFillStyle).setSize(this.qi.cursorPointMarkerSize).setShape(this.qi.cursorPointMarkerShape);f={pointMarker:t,targetVisible:!0},this.Am.push(f),this.pm.forEach((i=>i(t)))}const A=La(t.pointMarkerScale,i),g=A===this.scale?t.pointMarker:pt(t.pointMarker,A,this.scale);f.pointMarker.setPosition(g),f.targetVisible=!0;const y=e.getInterval(),m=h.getInterval(),p=Math.min(y.start,y.end),v=Math.max(y.start,y.end),S=Math.min(m.start,m.end),b=Math.max(m.start,m.end);c.x>=p&&c.x<=v&&c.y>=S&&c.y<=b&&(this.yy=!0)})),this}setTickMarkersAllocateAxisSpace(t){return this.bC=t,this.Ls.xs(),this}getTickMarkersAllocateAxisSpace(){return this.bC}Ih(t,i){this.SC.has(t)||(t.onDispose((()=>{var i;null===(i=s.get(t))||void 0===i||i.forEach((t=>t.dispose())),s.delete(t)})),this.SC.add(t));const s=i?this.dC:this.fC,e=i?this.AC:this.gC,h=s.get(t)||[];s.set(t,h);let r=h.find((t=>!e.includes(t)));return r||(r=i?t.ny(!1,this.xC):t.ny(!1,this.MC),h.push(r),this.Sr(r,i),r.setMouseInteractions(!1)),r}Sr(t,i){const s=i?this._C:this.wC;return t.setGridStrokeStyle(s),t.setMouseInteractions(!1),(i?this.yC:this.mC)?t.setMarkerVisible(!0):t.setMarkerVisible(!1),t}setGridStrokeXCut(t){return this.aC=t,this.Ls.xs(),this}getGridStrokeXCut(){return this.aC}setGridStrokeYCut(t){return this.lC=t,this.Ls.xs(),this}getGridStrokeYCut(){return this.lC}setGridStrokeXStyle(t){return this._C=t instanceof Function?t(this.getGridStrokeXStyle()):t,this.dC.forEach((t=>t.forEach((t=>t.setGridStrokeStyle(this._C))))),this}getGridStrokeXStyle(){return this._C}setGridStrokeYStyle(t){return this.wC=t instanceof Function?t(this.getGridStrokeYStyle()):t,this.fC.forEach((t=>t.forEach((t=>t.setGridStrokeStyle(this.wC))))),this}getGridStrokeYStyle(){return this.wC}setTickMarkerXVisible(t){return this.yC=t,this.Ls.xs(),this}getTickMarkerXVisible(){return this.yC}setTickMarkerYVisible(t){return this.mC=t,this.Ls.xs(),this}getTickMarkerYVisible(){return this.mC}setTickMarkerX(t){return this.dC.forEach((i=>i.forEach((i=>i.setMarker(t))))),this.xC=this.xC.addStyler(t),this.Ls.xs(),this}setTickMarkerY(t){return this.fC.forEach((i=>i.forEach((i=>i.setMarker(t))))),this.MC=this.MC.addStyler(t),this.Ls.xs(),this}}class Wc{constructor(t,i,s,e){this.Mm=[],this._m=(t,i)=>(this.Mm.forEach((s=>s(t,i))),t),this.addStyler=t=>new Wc(this.Sm,this.xC,this.MC,this.Mm.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new Wc(t,this.xC,this.MC,this.Mm.map((t=>t))),this.wm=(t,i,s,e,h)=>this._m(new Uc(t,i,s,e,this.Sm,this.xC,this.MC,h),h),this.Sm=t,this.Mm=e,this.xC=i,this.MC=s}}const Yc=new Wc(qn,Uo.PointableTextBox,Uo.PointableTextBox,[(t,i)=>{qa(t),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),en(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),en(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),Hc=(t,i,s)=>{const e=i.ft,h=s.ft;let r=(t.x-e.getInnerStart())/(e.getInnerEnd()-e.getInnerStart()),o=(t.y-h.getInnerStart())/(h.getInnerEnd()-h.getInnerStart());return 1===s.pg&&(r=1-r),1===i.pg&&(o=1-o),n(o,r)};class Xc extends Xu{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d,f){super(t,i,s,e,h,r,n,o,a,l,u),this.NM=[],this.Kx=!0,this.$M=void 0,this.Tu=void 0,this.CC=(t,i)=>{const s=t.nM(i);if(s)return pt(s,this.scale,this.Ls.us.ft)},this.Aw=(t,i)=>{const s=t.k_(i);if(s)return pt(s,this.scale,this.Ls.us.ft)},this.Kd=()=>Di(this.vu.getFillStyle()),this.Sw=c,this.qn=f,this.vu=Ri(this.qi.lineSeriesStrokeStyle,d),this.kC={individualLookupValuesEnabled:void 0!==(null==f?void 0:f.individualLookupValuesEnabled)&&f.individualLookupValuesEnabled}}ds(){var t,i;return null===(i=null===(t=this.qn)||void 0===t?void 0:t.dataPattern)||void 0===i?void 0:i.pattern}add(t){return super.add(t),this}setMouseInteractions(t){return super.setMouseInteractions(t)}setStrokeStyle(t){this.vu="function"==typeof t?t(this.vu):t;const i=this.vu;for(let t=0;t<this.NM.length;t+=1)this.NM[t].We(i);return this.Ls.xs(),this}getStrokeStyle(){return this.vu}setDataCleaning(t){return this.Tu=t,this.NM.forEach((t=>t.Fu(this.Tu))),this.Ls.xs(),this}setCursorInterpolationEnabled(t){return this.Kx=t,this.Ls.us.xs(),this}getCursorInterpolationEnabled(){return this.Kx}wM(t){}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY};if(0===this.NM.length)return;const h=this.NM[0].Ko()||dr.NearestX,r=$u(e,this.NM,Ua(i)?this.Aw:this.CC,h===dr.NearestX?(t,i)=>Math.abs(t.x-i.x):h===dr.NearestY?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==r){const t=pt(r[0],this.Ls.us.ft,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}jM(t){let i=this.NM[0];i||(i=this.yw(),this.NM.push(i),this.fs(i)),i.ml(t,this.HM)}yw(){return this.Ls.Ap(this.scale,this.kC,[xl.UserSeries,...this.Sw]).We(this.vu).Fu(this.Tu).cs(this.getHighlight())}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{stroke:this.vu})}Ve(t,i){t.cs(i),this.Ls.xs()}XM(t,i,s,e){}}class $c extends Xu{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d){super(t,i,s,e,h,r,n,o,new _c,l,u),this.NM=[],this.aM=5,this.Ca=0,this.qa=!1,this.tl=!1,this.il=!1,this.$M=void 0,this.fw=(t,i)=>{const s=t.ed(i);if(s)return pt(s,this.scale,this.Ls.us.ft)},this.qn=d,this.lM=a,this.Fe=Ri(l.pointSeriesFillStyle,c)}add(t){return super.add(t),this}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=$u(e,this.NM,this.fw,gs);if(void 0!==h){const t=pt(h[0],this.Ls.us.ft,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}Kd(){return Di(this.Fe)}Ds(){return this._s||this.lM}wM(t){}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe})}Ve(t,i){t.cs(i),this.Ls.xs()}setPointFillStyle(t){this.Fe="function"==typeof t?t(this.Fe):t;const i=this.Fe;for(let t=0;t<this.NM.length;t+=1)this.NM[t].Le(i);return this.Ls.xs(),this}getPointFillStyle(){return this.Fe}setPointSize(t){this.aM=t;for(let i=0;i<this.NM.length;i+=1)this.NM[i].tt(t);return this.Ls.xs(),this}getPointSize(){return this.aM}getPointShape(){return this.lM}setPointRotation(t){this.Ca=t;for(let i=0;i<this.NM.length;i+=1)this.NM[i].ir(t);return this.Ls.xs(),this}getPointRotation(){return this.Ca}setIndividualPointSizeEnabled(t){this.qa=t,t&&this.chart.us.Qn(Yo.Df);for(let i=0;i<this.NM.length;i+=1)this.NM[i].fl(t);return this.Ls.xs(),this}getIndividualPointSizeEnabled(){return this.qa}setIndividualPointRotationEnabled(t){this.tl=t;for(let i=0;i<this.NM.length;i+=1)this.NM[i].Al(t);return this.Ls.xs(),this}getIndividualPointRotationEnabled(){return this.tl}setIndividualPointValueEnabled(t){this.il=t;for(let i=0;i<this.NM.length;i+=1)this.NM[i].yl(t);return this.Ls.xs(),this}getIndividualPointValueEnabled(){return this.il}jM(t){let i=this.NM[0];i||(i=this.yw()),i.ml(t,this.HM)}yw(){const t=this.Ls.Ov(this.scale).cl(this.lM).tt(this.aM).ir(this.Ca).fl(this.qa).Al(this.tl).yl(this.il).Le(this.Fe).cs(this.getHighlight());return this.NM.push(t),this.fs(t),t}}class jc{constructor(t,i,e,h){this.TC=!1,this.L=new s,this.chart=e,this.FC=h,this.qs=t.qs,this.ne=h||nh,this.IC=Yt.document.createElement("div"),this.IC.style.position="absolute",this.IC.style.pointerEvents="none",Yt.document.body.append(this.IC);const r=()=>{const t=e.engine.container.getBoundingClientRect();this.IC.style.left=`${t.left}px`,this.IC.style.top=`${t.top}px`,this.IC.style.width=`${t.width}px`,this.IC.style.height=`${t.height}px`};r(),e.onResize(r),this.PC(this.IC),this.DC(),this.BC(),this.LC(),this.RC(i),this.chart.EC().push(this)}PC(t){this.zC=Yt.document.createElement("div"),this.zC.style.pointerEvents="all",t.append(this.zC),this.VC=Yt.document.createElement("div"),this.OC=new Je(this.qs,this.ne,this.chart,this.VC),this.NC=Yt.document.createElement("table"),this.NC.style.borderSpacing="0",this.zC.appendChild(this.OC.ge()),this.zC.appendChild(this.VC),this.VC.appendChild(this.NC)}BC(){let t=0,i=0,s=0,e=0,h=!1;this.TC=!1,this.zC.onmousedown=r=>{r=r||Yt.event,s=r.clientX,e=r.clientY,h=!0,Yt.document.onmouseup=t=>{this.TC?this.zC.addEventListener("click",mi,!0):this.zC.removeEventListener("click",mi,!0),h=!1,this.TC=!1,Yt.document.onmouseup=null,Yt.document.onmousemove=null},Yt.document.onmousemove=r=>{r=r||Yt.event,h&&(t=s-r.clientX,i=e-r.clientY,s=r.clientX,e=r.clientY,this.TC=!0,this.zC.style.top=this.zC.offsetTop-i+"px",this.zC.style.left=this.zC.offsetLeft-t+"px",this.zC.style.removeProperty("right"),this.zC.style.removeProperty("bottom"))}}}LC(){let t=0,i=0,s=0,e=0,h=!1;this.zC.ontouchstart=r=>{r=r||Yt.event,s=r.touches[0].clientX,e=r.touches[0].clientY,h=!0,this.zC.ontouchend=()=>{h=!1,Yt.document.ontouchend=null,Yt.document.ontouchmove=null},this.zC.ontouchmove=r=>{h&&(mi(r),r=r||Yt.event,t=s-r.touches[0].clientX,i=e-r.touches[0].clientY,s=r.touches[0].clientX,e=r.touches[0].clientY,this.zC.style.top=this.zC.offsetTop-i+"px",this.zC.style.left=this.zC.offsetLeft-t+"px",this.zC.style.removeProperty("right"),this.zC.style.removeProperty("bottom"))}}}DC(){this.zC.style.setProperty("top","10px"),this.zC.style.setProperty("left","10px"),this.zC.style.position="absolute",this.zC.style.display="flex",this.zC.style.alignItems="flex-start",this.VC.style.setProperty("display","none")}removePositionProperty(){this.zC.style.removeProperty("top"),this.zC.style.removeProperty("left"),this.zC.style.removeProperty("bottom"),this.zC.style.removeProperty("right")}setPositionProperty(t){switch(this.removePositionProperty(),t){case ah.BottomLeft:this.zC.style.setProperty("bottom","10px"),this.zC.style.setProperty("left","10px");break;case ah.TopLeft:this.zC.style.setProperty("top","10px"),this.zC.style.setProperty("left","10px");break;case ah.BottomRight:this.zC.style.setProperty("bottom","10px"),this.zC.style.setProperty("right","10px");break;case ah.TopRight:default:this.zC.style.setProperty("top","10px"),this.zC.style.setProperty("right","10px")}}RC(t){for(let i=0;i<t.length;i+=1){const s=this.NC.insertRow();for(let e=0;e<t[i].length;e+=1){const h=s.insertCell(),r=t[i][e];"object"!=typeof r?this.GC(r,h):this.addCustomButton(r,h)}}}GC(t,i){switch(t){case ke.ZoomIn:this.UC(new Ue(this.qs,this.chart,this.ne),i);break;case ke.ZoomInX:this.UC(new We(this.qs,this.chart,this.ne),i);break;case ke.ZoomInY:this.UC(new Ye(this.qs,this.chart,this.ne),i);break;case ke.ZoomOut:this.UC(new He(this.qs,this.chart,this.ne),i);break;case ke.ZoomOutX:this.UC(new Xe(this.qs,this.chart,this.ne),i);break;case ke.ZoomOutY:this.UC(new $e(this.qs,this.chart,this.ne),i);break;case ke.ZoomToFit:this.UC(new Ze(this.qs,this.chart,this.ne),i);break;case ke.ToggleAnimations:this.UC(new je(this.qs,this.chart,this.ne),i);break;default:console.error(`No predefined button like "${ke[t]}" exists.`)}}UC(t,i){i.rowSpan=t.te.rows,i.colSpan=t.te.columns,t.Ae(i)}addCustomButton(t,i){const s=new Qe(this.qs,t,this.chart);return this.UC(s,i),this}dispose(){this.IC.remove(),this.L.emit("dispose",this)}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}}class Zc extends Gu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){var d;super(t,i,s,e,h,r,n,o,a,l),this.WC=0,this.qn=c,this.Ka=this.Ls.Md(this.scale).We(Ri(this.qi.lineSeriesStrokeStyle,u)).bd(Ri(this.qi.pointSeriesFillStyle,u)).xd(Ri(this.qi.areaSeriesPositiveFillStyle,u)).YC(void 0).Fd(7),this.Ka.HC=!1!==(null===(d=this.qn)||void 0===d?void 0:d.allowDataGrouping),this.fs(this.Ka)}ds(){return this.getDataSet().Jc()}setDataSet(t){var i;return t===(null===(i=this.vd)||void 0===i?void 0:i.Nt)||(t.Tc&&this.chart.us.Qn(Yo.Bf),t.Ic&&this.chart.us.Qn(Yo.Df),this.vd=Ki(t,this.vd,(()=>[t.hd((()=>{this.WC+=1,this.WC>1&&this.chart.us.Qn(Yo.Pf),this.chart.us.xs()})),t.rd((()=>this.chart.us.xs()))])),this.Ka.Sd(t),this.chart.us.xs()),this}getDataSet(){return this.XC()}setStrokeStyle(t){return this.Ka.We(t),this.Ls.xs(),this}getStrokeStyle(){return this.Ka.Su()}setAreaFillStyle(t){return this.Ka.xd(t),this.Ls.xs(),this}getAreaFillStyle(){return this.Ka.$C()}setPointFillStyle(t){return this.Ka.bd(t),this.Ls.xs(),this}getPointFillStyle(){return this.Ka.Td()}setPointSize(t){return this.Ka.Fd(t),this.Ls.xs(),this}getPointSize(){return this.Ka.jC()}setPointShape(t){return this.Ka._d(t),this.Ls.xs(),this}getPointShape(){return this.Ka.wd()}setPointRotation(t){return this.Ka.Cd(t),this.Ls.xs(),this}getPointRotation(){return this.Ka.kd()}setPointAlignment(t){return this.Ka.ZC(t),this.chart.us.xs(),this}getPointAlignment(){return this.Ka.QC()}setCurvePreprocessing(t){return this.Ka.YC(t),this.Ls.xs(),this}getCurvePreprocessing(){return this.Ka.JC()}add(t){return this.XC().add(t),this.Ls.xs(),this}addArraysXY(t,i){return this.XC().addArraysXY(t,i),this.Ls.xs(),this}appendJSON(t,i){return this.XC().appendJSON(t,i),this.Ls.xs(),this}appendSample(t){return this.XC().appendSample(t),this.Ls.xs(),this}appendSamples(t){return this.XC().appendSamples(t),this.Ls.xs(),this}fill(t){return this.XC().fill(t),this.Ls.xs(),this}setSamples(t){return this.XC().setSamples(t),this.Ls.xs(),this}alterSamples(t,i){return this.XC().alterSamples(t,i),this.Ls.xs(),this}alterSamplesByID(t,i){return this.XC().alterSamplesByID(t,i),this.Ls.xs(),this}getSampleCount(){return this.XC().getSampleCount()}getNextSampleIndex(){return this.XC().getNextSampleIndex()}clear(){return this.XC().clear(),this.Ls.xs(),this}setMaxSampleCount(t){return this.XC().setMaxSampleCount(t),this.Ls.xs(),this}getMaxSampleCount(){return this.XC().getMaxSampleCount()}readBack(t){return this.XC().readBack(t)}onMaxSampleCountExceeded(t){return this.XC().onMaxSampleCountExceeded(t)}offMaxSampleCountExceeded(t){return this.XC().offMaxSampleCountExceeded(t)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){let s=Ua(i);void 0!==this.getCurvePreprocessing()&&(s=!1);const e=this.KC(),h=this.chart.translateCoordinate(t,{x:this.axisX,y:this.axisY}),r=e.ed(h,s,this.scale,this.chart.Mg);if(void 0!==r)return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){const s=this.getDataSet(),e=null==t?void 0:t.dataPoint;return void 0===s.Jc()||e?e?{cursorPosition:{resultTable:e,resultTableScale:this.scale,pointMarker:e,pointMarkerScale:{x:this.axisX,y:this.axisY}},...e,series:this,axisX:this.axisX,axisY:this.axisY}:void 0:qi({series:this,axisX:this.axisX,axisY:this.axisY},{x:0,y:0,cursorPosition:0,id:0,rotation:0,size:0,color:0,lookupValue:0,multiHit:0,iSample:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}KC(){return this.XC()}Kd(){return Di(this.getPointFillStyle())||Di(this.getStrokeStyle().getFillStyle())||Di(this.getAreaFillStyle())}fv(){var t;const i=null===(t=this.vd)||void 0===t?void 0:t.Nt;return this.getVisible()&&this.getAutoScrollingEnabled()&&void 0!==i&&i.bc>0}wM(t){}getXMax(){return this.Ka.vt()}getXMin(){return this.Ka.yt()}getYMax(){return this.Ka.bt()}getYMin(){return this.Ka.St()}Br(){return{x:this.Ka.Il(),y:this.Ka.Pl()}}wv(){var t;super.wv();const i=ur(null!==(t=this.ds())&&void 0!==t?t:"ProgressiveX");this.Ka.qC("x"===i?0===this.xAxis.mg?"bottom":"top":0===this.yAxis.mg?"left":"right")}XC(){if(!this.vd){const t=new Un(this.qn);t.Tc&&this.chart.us.Qn(Yo.Bf),t.Ic&&this.chart.us.Qn(Yo.Df),this.vd=Ki(t,this.vd,(()=>[t.hd((()=>{this.WC+=1,this.WC>1&&this.chart.us.Qn(Yo.Pf),this.chart.us.xs()})),t.rd((()=>{this.chart.us.xs()}))])),this.Ka.Sd(t)}return this.vd.Nt}styleLegendEntry(t,i=!1){const s=this.getPointFillStyle(),e=this.getAreaFillStyle();Pi(t,this.qi,i,{stroke:this.getStrokeStyle(),fill:s!==O?s:e,behavior:{priority:"stroke"}})}Ds(){return this._s||this.getPointShape()}Ve(t,i){t.cs(i),this.Ls.xs()}}const Qc=(...t)=>(i,s)=>t.forEach((t=>t.forEach((t=>{t.axis.ft.tt(i),t.axis.Sg.tt(s)})))),Jc=n(10,10);var Kc;!function(t){t[t.Top=0]="Top",t[t.Bottom=1]="Bottom",t[t.Left=2]="Left",t[t.Right=3]="Right"}(Kc||(Kc={}));const qc=new Set([Kc.Top,Kc.Bottom,Kc.Left,Kc.Right]),td=t=>t.setStopped(!0),id=t=>t.getChartInteractionFitByDrag()?t.fit(!0):void 0,sd=(t,i)=>{const s="linear-highPrecision"===t.Uh.type||"linear-highPrecision"===i.Uh.type,e="logarithmic"===t.Uh.type||"logarithmic"===i.Uh.type;if(s&&e){const s=`Invalid Axis combination | 'logarithmic' can't be combined with 'linear-highPrecision' (x: ${t.Uh.type}, y: ${i.Uh.type})`;throw new Error(s)}};var ed,hd,rd;!function(t){t[t.seriesBackground=0]="seriesBackground",t[t.gridLine0=1]="gridLine0",t[t.gridLine1=2]="gridLine1",t[t.gridLine2=3]="gridLine2",t[t.highlightersBelow=4]="highlightersBelow"}(ed||(ed={})),function(t){t[t.plotting=0]="plotting",t[t.highlightersAbove=1]="highlightersAbove",t[t.fg=2]="fg"}(hd||(hd={}));class nd extends $l{constructor(t,i,s,e,h,r,o){super(t,i,s,i.zy("chartXY bg",0),e,i.us.qi.chartXYBackgroundFillStyle,i.us.qi.chartXYBackgroundStrokeStyle,i.us.qi.chartXYTitleFont,i.us.qi.chartXYTitleFillStyle,o),this.tk=this.xy.d2({scaleXYConstructor:ee}),this.qg=[],this.ty=[],this.sy=[],this.iy=[],this.ik=new Map,this.sk=!0,this.ek=!0,this.hk=!0,this.jf=2,this.rk=!0,this.nk=!0,this.ak=[],this.lk=this.Oy.Re(this.tk).Le(O).Be(dt).setMouseInteractions(!1),this.uk=this.Oy.Ye(this.tk).We(dt).setMouseInteractions(!1),this.ck=this.Oy.Ye(this.tk).We(dt).setMouseInteractions(!1),this.dk=this.qi.chartXYZoomingRectangleFillStyle,this.fk=this.qi.chartXYZoomingRectangleStrokeStyle,this.Ak=this.qi.chartXYFittingRectangleFillStyle,this.gk=this.qi.chartXYFittingRectangleStrokeStyle,this.yk=Ke.Default,this.mk=Ke.Move,this.pk=Ke.ZoomIn,this.vk=Ke.Default,this.Sk=void 0,this.fA=od,this._M=0,this.bk=(t,i,s)=>{const e=t.solveNearest(i,s);return e&&As(e.cursorPosition.pointMarker.x,e.axisX.getInterval().start,e.axisX.getInterval().end)&&As(e.cursorPosition.pointMarker.y,e.axisY.getInterval().start,e.axisY.getInterval().end)?e:void 0},this.xk=Qc(this.ty,this.qg),this.Mk=Qc(this.sy,this.iy),this._k=(t,i,s,e,h)=>{this.xk(e,h),this.Mk(h,e),this.tk.tt(e,h),this.us.xs()},this.wk=(t,i)=>{this.ik.set(t,i)},this.Ag=t=>{const i=this.ty.findIndex((i=>i.axis===t)),s=this.qg.findIndex((i=>i.axis===t)),e=this.sy.findIndex((i=>i.axis===t)),h=this.iy.findIndex((i=>i.axis===t));i>=0&&this.ty.splice(i,1),s>=0&&this.qg.splice(s,1),e>=0&&this.sy.splice(e,1),h>=0&&this.iy.splice(h,1),this.ik.delete(t),this.us.xs()},this.addAreaSeries=t=>{const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=t&&t.baseline?t.baseline:0,h=new(t&&t.type?t.type:Ac.Positive)(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,e,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length);return this.$v(h),h},this.addAreaRangeSeries=t=>{const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=new gc(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length);return this.$v(e),e},this.kk=!1,this.Tk=!1,this.CM=()=>{(this.sk||this.ek)&&(this.Sk=this.engine.setMouseStyle(this.yk))},this.kM=()=>{this.kk=!1,this.engine.restoreMouseStyle(this.Sk)},this.TM=(t,i,s)=>{var e,h;const r=qt(null===(e=this.wA.io)||void 0===e?void 0:e.chartXYRectangleZoomFitMouseButton,0),n=qt(null===(h=this.wA.io)||void 0===h?void 0:h.chartXYPanMouseButton,2);this.engine.restoreMouseStyle(this.Sk);const o=this.Oy.us.Oe(i.clientX,i.clientY);s===r&&(this.sk||this.ek)?(this.Fk(t,o),mi(i)):s===n&&this.rk&&(this.Sk=this.engine.setMouseStyle(this.mk),this.Tk=!0,mi(i))},this.vv=(t,i,s,e,h)=>{var r,o;const a=n(i.clientX,i.clientY),l=qt(null===(r=this.wA.io)||void 0===r?void 0:r.chartXYRectangleZoomFitMouseButton,0),u=qt(null===(o=this.wA.io)||void 0===o?void 0:o.chartXYPanMouseButton,2);s===l&&(this.sk||this.ek)?(this.Ik(t,e,a),mi(i)):s===u&&this.rk&&(this.Pk(Fs(h,-1)),mi(i)),this.us.xs()},this.Sv=(t,i,s,e)=>{var h,r;const o=qt(null===(h=this.wA.io)||void 0===h?void 0:h.chartXYRectangleZoomFitMouseButton,0),a=qt(null===(r=this.wA.io)||void 0===r?void 0:r.chartXYPanMouseButton,2);if(s===o&&(this.sk||this.ek)){const s=n(i.clientX,i.clientY);this.Dk(t,e,s),mi(i)}else s===a&&this.rk&&mi(i);this.engine.restoreMouseStyle(this.Sk),this.Hv.getIsUnderMouse()&&(this.Sk=this.engine.setMouseStyle(this.yk)),this.kk=!1,this.Tk=!1},this.pv=(t,i)=>{if(this.hk){const t=this.Oy.us.Oe(i.clientX,i.clientY);this.Bk(t,n(Ei(i),Ei(i))),mi(i)}},this.Lk=(t,i,s,e)=>{},this.Rk=(t,i,s,e,h,r)=>{if(this.rk){const t=n(-(e.x+h.x)/2,-(e.y+h.y)/2);this.Pk(t),mi(r),this.Tk=!0}if(this.hk){const t=this.us.Go({clientX:i.x,clientY:i.y}),o=this.us.Go({clientX:s.x,clientY:s.y}),a=Ps(n(Math.abs(t.engineX-e.x-(o.engineX-h.x)),Math.abs(t.engineY-e.y-(o.engineY-h.y))),n(Math.abs(t.engineX-o.engineX),Math.abs(t.engineY-o.engineY)));this.forEachAxisX((t=>{t.getChartInteractionZoomByWheel()&&t.At(t.ft.gi(t.getInterval().start,-a.x),t.ft.gi(t.getInterval().end,a.x),!1,!0,"interactionZoom")})),this.forEachAxisY((t=>{t.getChartInteractionZoomByWheel()&&t.At(t.ft.gi(t.getInterval().start,-a.y),t.ft.gi(t.getInterval().end,a.y),!1,!0,"interactionZoom")})),mi(r),this.kk=!0}},this.Ek=(t,i,s,e)=>{this.Tk=!1,this.kk=!1},this.zk=(t,i,s)=>{(this.ek||this.sk)&&(this.Fk(t,i),mi(s))},this.Vk=(t,i,s,e,h)=>{(this.ek||this.sk)&&(this.Ik(t,i,s),mi(h))},this.Ok=(t,i,s,e)=>{(this.ek||this.sk)&&(this.Dk(t,i,s),mi(e))},this.us.Qn(Yo.Cf),this.setPadding({right:24}),this.Nk=i.kb("chartXY series bg",ed.seriesBackground),this.Gk=[ed.gridLine0,ed.gridLine1,ed.gridLine2].map((t=>i.Uk(`chartXY gridline #${t}`,t))),this.cg=i.Uk("chartXY highlighters below",ed.highlightersBelow),this.sx=i.ip("chartXY plotting",hd.plotting),this.dg=i.ip("chartXY highlighters above",hd.highlightersAbove),this.RA=i.ip("chartXY fg",hd.fg),this.tk.x.K(0,this.uiScale.x.getCellSize()-(this.Xt.left+this.Xt.right+this.Fa.left+this.Fa.right)),this.tk.y.K(0,this.uiScale.y.getCellSize()-(this.Xt.bottom+this.Xt.top+this.Fa.bottom+this.Fa.top)),this.tk.tt(this.uiScale.ni().x,this.uiScale.ni().y),this.Hv=this.Nk.Re(this.tk).Le(this.qi.chartXYSeriesBackgroundFillStyle).Be(dt),this.Xv=this.RA.Re(this.tk).Le(O).Be(this.qi.chartXYSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.Yv(this.Hv,this.Xv),this.setSeriesBackgroundEffect(!1);const a=qt(r?r.cursorBuilder:void 0,Yc),l=i.ep();this.hp=Ya(this,l,a.wm(l,this.tk,this.tk,Zt,this.qi),this,"show-all",cd,((t,i)=>{const s=this.translateCoordinate(t,{x:t.axisX,y:t.axisY},this.coordsClient);return Math.sqrt((s.clientX-i.clientX)**2+(s.clientY-i.clientY)**2)})),this.addAxisX(r&&r.defaultAxisX),this.addAxisY(r&&r.defaultAxisY),this.onResize(this._k),this.wh.vr("ChartXY"),this.bv=ve(new be(this.zk,this.Vk,this.Ok,1),new xe(this.Lk,this.Rk,this.Ek)),this.onSeriesBackgroundMouseEnter(this.CM),this.onSeriesBackgroundMouseLeave(this.kM),this.onSeriesBackgroundMouseWheel(this.pv),this.onSeriesBackgroundMouseDragStart(this.TM),this.onSeriesBackgroundMouseDrag(this.vv),this.onSeriesBackgroundMouseDragStop(this.Sv),this.onSeriesBackgroundTouchStart(this.bv.onTouchStart),this.onSeriesBackgroundTouchMove(this.bv.onTouchMove),this.onSeriesBackgroundTouchEnd(this.bv.onTouchEnd),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled)),this.Ey(h,this.tk)}get coordsAxis(){return{x:this.getDefaultAxisX(),y:this.getDefaultAxisY()}}getSeries(){return this.Nv}setCursor(t){return this.hp.setCursor(t),this}getCursor(){return this.hp.getCursor()}setCursorMode(t){return this.hp.setCursorMode(t),this}getCursorMode(){return this.hp.getCursorMode()}setCustomCursor(t){return this.hp.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.hp.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.hp.offCursorTargetChanged(t)}setCursorFormatting(t){return this.hp.setCursorFormatting(t),this}getCursorFormatting(){return this.hp.getCursorFormatting()}solveNearest(t,i=this.getCursorMode()||"show-nearest"){return this.hp.solveNearest(t,i,this.Nv,this.bk)}addCursor(t=Yc){const i=this.wy(),s=t.wm(i,this.tk,this.tk,this.Sy(i),this.qi);return s.pC=!0,this.By(s),s}getMinimumSize(){const t={x:0,y:0};t.x+=this.Xt.left+this.Xt.right+this.Fa.left+this.Fa.right,t.y+=this.Xt.top+this.Xt.bottom+this.Fa.top+this.Fa.bottom;const i=this.wh.Vs().nd(),s=y(ad(this.fA||od),this.Vy);return t.x+=i.x+s.left+s.right,t.y+=i.y+s.top+s.bottom,this.Wk&&(t.x+=this.Wk.left,t.x+=this.Wk.right,t.y+=this.Wk.top,t.y+=this.Wk.bottom),t.x+=Jc.x,t.y+=Jc.y,t}addAxisX(t){var i,s;const{opposite:e,type:h}=de(t);let r;r="linear"===h.type?this.xy.d1({dimension:"x",scale1DConstructor:te}):"linear-highPrecision"===h.type?this.xy.d1({dimension:"x",scale1DConstructor:te}).xi():this.xy.d1({dimension:"x",scale1DConstructor:Hs}).fi(h.base),r.tt(this.tk.x.ni());const n=e?this.qg:this.ty,o=new Xo(this.Gk,this.RA,this.Oy,this.cg,this.dg,this.us.es,r,this.tk.y,(a=()=>o.Og(),{...jo,...Nc(a)}),this,e?100:0,this.Ag,this.wk,this.qi,this.gh,h);var a;let l,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=n.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),u=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,u=null!==(s=t.iStack)&&void 0!==s?s:0),n.push({axis:o,iStack:u,iParallel:l}),this.us.xs(),o}addAxisY(t){var i,s;const{opposite:e,type:h}=de(t);let r;r="linear"===h.type?this.xy.d1({dimension:"y",scale1DConstructor:te}):"linear-highPrecision"===h.type?this.xy.d1({dimension:"y",scale1DConstructor:te}).xi():this.xy.d1({dimension:"y",scale1DConstructor:Hs}).fi(h.base),r.tt(this.tk.y.ni());const n=e?this.iy:this.sy,o=new Xo(this.Gk,this.RA,this.Oy,this.cg,this.dg,this.us.es,r,this.tk.x,(a=()=>o.Og(),{...Zo,...Gc(a)}),this,e?100:0,this.Ag,this.wk,this.qi,this.gh,h);var a;let l,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=n.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),u=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,u=null!==(s=t.iStack)&&void 0!==s?s:0),n.push({axis:o,iParallel:l,iStack:u}),this.us.xs(),o}swapAxes(t,i){const s=[this.ty,this.sy,this.iy,this.qg],e=s.find((i=>void 0!==i.find((i=>i.axis===t)))),h=s.find((t=>void 0!==t.find((t=>t.axis===i))));if(!e||!h)return this;if(e!==h)throw new Error("LightningChart JS ChartXY.swapAxes does not support swapping Axes that are on different sides.");const r=e.find((i=>i.axis===t)),n=e.find((t=>t.axis===i));if(!r||!n)return this;const o=r.iParallel,a=r.iStack;return r.iParallel=n.iParallel,r.iStack=n.iStack,n.iParallel=o,n.iStack=a,this.us.xs(),this}dispose(){return this.hp.W(),this.Nk.W(),this.sx.W(),this.RA.W(),this.Gk.forEach((t=>t.W())),this.dg.W(),this.cg.W(),this.EC().forEach((t=>t.dispose())),za(this.tk),this.ty.slice().forEach((t=>t.axis.dispose())),this.sy.slice().forEach((t=>t.axis.dispose())),this.iy.slice().forEach((t=>t.axis.dispose())),this.qg.slice().forEach((t=>t.axis.dispose())),this.Nv.slice().forEach((t=>{t.dispose()})),super.dispose()}getDefaultAxisX(){var t;return null===(t=[...this.ty,...this.qg].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}getDefaultAxisY(){var t;return null===(t=[...this.sy,...this.iy].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}getDefaultAxes(){return[this.getDefaultAxisX(),this.getDefaultAxisY()]}getAxes(...t){const i=t&&t.length>0?new Set(t):qc;return Kt(Array.from(i).map((t=>{switch(t){default:case Kc.Top:return this.qg.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis));case Kc.Bottom:return this.ty.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis));case Kc.Left:return this.sy.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis));case Kc.Right:return this.iy.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis))}})))}Yk(t){let i;return this.forEachAxisX((s=>{i=t===s?"x":i})),this.forEachAxisY((s=>{i=t===s?"y":i})),i}forEachAxisX(t){this.ty.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.qg.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}forEachAxisY(t){this.sy.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.iy.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}setTitlePosition(t){return this.fA=t,this.us.xs(),this}getTitlePosition(){return this.fA}Hk(t,i,s,e){const h=this.fA||od;let r,n=y(ad(h),this.Vy);this.getTitleFillStyle()===O||0===this.getTitle().length?(r={x:0,y:0},n={left:0,top:0,right:0,bottom:0}):r=this.wh.Vs().nd();const o=Math.abs(e)+this.Fa.bottom+this.Xt.bottom,a=Math.abs(s)+this.Fa.top+this.Xt.top,l={left:Math.abs(t)+this.Fa.left+this.Xt.left,right:Math.abs(i)+this.Fa.right+this.Xt.right,top:a,bottom:o},u=this.uiScale.Gi(),{horizontalAlignment:c,verticalAlignment:d,position:f,marginsWithTitle:A}=ld(h,u,l,r,n,this.Fa);return this.wh.ze(f).Ya(c).Xa(d),A}Ee(t){super.Ee(t);for(const t of this.Nv)t.wv();for(const t of this.Nv)t.Ee();const i=Gi(this.Nv.map((t=>t.aa()))),s=new Set(i.map((t=>t.Xk)));if(1===s.size){const t=Array.from(s)[0],e="x"===t?[this.ty,this.qg]:[this.sy,this.iy],h="y"===t?[this.ty,this.qg]:[this.sy,this.iy];e.forEach((t=>t.forEach((t=>t.axis.Lr())))),i.forEach((t=>t.$k())),h.forEach((t=>t.forEach((t=>t.axis.Lr()))))}else this.sy.forEach((t=>t.axis.Lr())),this.ty.forEach((t=>t.axis.Lr())),this.qg.forEach((t=>t.axis.Lr())),this.iy.forEach((t=>t.axis.Lr()));const e=this.sy.map((t=>t.axis.Vs())),h=this.ty.map((t=>t.axis.Vs())),r=this.qg.map((t=>t.axis.Vs())),o=this.iy.map((t=>t.axis.Vs()));let a=!1;this.forEachAxis((t=>{(t.Vr()||t.Or())&&(a=!0)}));const l=this.kk||this.Tk||!this.nk&&a,u=new Set(this.getAxes().map((t=>t.getStackIndex()))).size>1;this.hp.Ee(l,u?this.Nv.sort(((t,i)=>i.axisY.getStackIndex()-t.axisY.getStackIndex())):this.Nv,this.bk,{afterCursorPointedAt:t=>{const i=this.us.jn();if(t.length>1&&i){const t=this.us.Go(i);this.hp.jy.xm({x:t.engineX,y:t.engineY},this.us.ft)}},overrideCursorPositions:(t,i)=>t.map((t=>t.multiHit?t.multiHit.map((i=>({...t.cursorPosition,pointMarker:i}))):[t.cursorPosition])).flat()});const c=ud(this.sy,e),f=ud(this.ty,h),A=ud(this.qg,r),g=ud(this.iy,o),y=this.Hk(c.thicknessTotal,g.thicknessTotal,A.thicknessTotal,f.thicknessTotal),m=this.tk.x.getCellSize()-(y.left+y.right),p=this.tk.y.getCellSize()-(y.bottom+y.top),v=[y.left,y.right],S=[y.bottom,y.top];this.tk.x.K(0,m),this.tk.y.K(0,p),this.tk.x.ii(v),this.tk.y.ii(S);const b=(t,i,s,e)=>{let h=0;t.groups.forEach((t=>{let r=0;const n=t.stacks.reduce(((t,i)=>Math.max(t,i.Ug)),0),o=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()?i.axis.gA+i.axis.yA:0)),0),a=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"pixels"in i.axis.jd?i.axis.jd.pixels:0)),0),l=i-o-a;t.stacks.forEach((e=>{const o=e.axis,a=o.getVisible(),u=Math.max(i-r,0),c=Math.min(a?"pixels"in o.jd?o.jd.pixels:o.jd.relative/t.sumRelativeSize*l:0,u),d=a?s[0]+r+o.gA:0,f=a?s[1]+(i-r)-c-o.gA:0;o.ft.ii([d,f]),o.Ee({Ug:n,Wg:e.Wg,Xg:c,jk:r,Kg:n+e.Wg,jg:h}),a&&(r+=c+o.gA+o.yA)})),h+=e*t.thicknessMax}))};b(c,p,S,-1),b(g,p,S,1),b(f,m,v,-1),b(A,m,v,1),this.Wk={left:c.thicknessTotal,top:A.thicknessTotal,right:g.thicknessTotal,bottom:f.thicknessTotal},this.Hv.ze(n(0,0)).tt(n(m,p)),this.Xv.ze(n(0,0)).tt(n(m,p));const x=d(this.tk.x.si(),this.tk.y.si(),this.tk.x.hi(),this.tk.y.hi());this.sx.pb(x),this.cg.pb(x),this.dg.pb(x),this.gy&&this.gy(),super.Ry(),this.ty.forEach((t=>t.axis.ey())),this.qg.forEach((t=>t.axis.ey())),this.sy.forEach((t=>t.axis.ey())),this.iy.forEach((t=>t.axis.ey()));for(const t of this.Nv)t.Fp()}Z(){for(let t=0;t<this.ty.length;t+=1)this.ty[t].axis.Z();for(let t=0;t<this.qg.length;t+=1)this.qg[t].axis.Z();for(let t=0;t<this.sy.length;t+=1)this.sy[t].axis.Z();for(let t=0;t<this.iy.length;t+=1)this.iy[t].axis.Z();return super.Z()}Ck(t){if(this.ik.has(t))return this.ik.get(t);throw new Error("No attach handler for axis Make sure that passed axes definitely belong to this chart and that they haven't been disposed of.")}addLineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);let e=Lc.freeform;t&&t.dataPattern&&(e="ProgressiveX"===t.dataPattern.pattern?Lc.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?Lc.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?Lc.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?Lc.verticalRegressive:Lc.freeform);const h=new Xc(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,e,this.qi,this.us.es,Ml(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,t);return this.$v(h),h}addPointLineAreaSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=new Zc(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,t);return this.$v(e),e}addPointSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=t&&t.pointShape&&Object.values(ar).includes(t.pointShape)?"string"==typeof t.pointShape?ar[t.pointShape]:t.pointShape:ar.Square,h=new $c(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,e,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,t);return this.$v(h),h}addPointLineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=t&&t.pointShape&&Object.values(ar).includes(t.pointShape)?"string"==typeof t.pointShape?ar[t.pointShape]:t.pointShape:ar.Square;let h=Lc.freeform;t&&t.dataPattern&&(h="ProgressiveX"===t.dataPattern.pattern?Lc.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?Lc.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?Lc.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?Lc.verticalRegressive:Lc.freeform);const r=new Sc(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,h,e,this.qi,this.us.es,Ml(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,t);return this.$v(r),r}addStepSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=t&&t.pointShape?t.pointShape:ar.Square,h=t&&t.mode?t.mode:yc.before,r=new Rc(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,e,h,this.qi,this.us.es,Ml(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,t);return this.$v(r),r}addSplineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=t&&t.pointShape?t.pointShape:ar.Square;let h=Lc.freeform;t&&t.dataPattern&&(h="ProgressiveX"===t.dataPattern.pattern?Lc.horizontalProgressive:"RegressiveX"===t.dataPattern.pattern?Lc.horizontalRegressive:Lc.freeform);const r=new Mc(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,h,e,this.qi,this.us.es,Ml(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,t);return this.$v(r),r}addRectangleSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=new tc(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length);return this.$v(e),e}addPolygonSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY(),e=new Ku(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length);return this.$v(e),e}addSegmentSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=new sc(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length);return this.$v(e),e}addEllipseSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=new Qu(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length);return this.$v(e),e}addBoxSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=t&&t.dimensionStrategy?t.dimensionStrategy:jo,h=new ju(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,e,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length);return this.$v(h),h}addHeatmapGridSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new hc(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,t,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length),this.$v(e),e}addHeatmapScrollingGridSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new nc(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,t,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length),this.$v(e),e}addOHLCSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=new(t&&t.type?t.type:Oc.Candlesticks)(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,this.qi,this.us.es);return this.$v(e),e}addOnScreenMenu(t,i){return new jc(this.wA,t,this,i)}setMouseBackgroundStyle(t=Ke.Default){return this.yk=t,this}setMouseZoomStyle(t=Ke.ZoomIn){return this.pk=t,this}setMouseFitStyle(t=Ke.Default){return this.vk=t,this}setMousePanStyle(t=Ke.Move){return this.mk=t,this}setMouseInteractions(t){return this.setMouseInteractionRectangleZoom(t).setMouseInteractionRectangleFit(t).setMouseInteractionWheelZoom(t).setMouseInteractionPan(t)}setMouseInteractionRectangleZoom(t){return this.sk=t,this}getMouseInteractionRectangleZoom(){return this.sk}setMouseInteractionRectangleFit(t){return this.ek=t,this}getMouseInteractionRectangleFit(){return this.ek}setMouseInteractionPan(t){return this.rk=t,this}getMouseInteractionPan(){return this.rk}setMouseInteractionWheelZoom(t){return this.hk=t,this}getMouseInteractionWheelZoom(){return this.hk}setZoomingRectangleFillStyle(t){return this.dk="function"==typeof t?t(this.dk):t,this.us.xs(),this}getZoomingRectangleFillStyle(){return this.dk}setZoomingRectangleStrokeStyle(t){return this.fk="function"==typeof t?t(this.fk):t,this.us.xs(),this}getZoomingRectangleStrokeStyle(){return this.fk}setFittingRectangleFillStyle(t){return this.Ak="function"==typeof t?t(this.Ak):t,this.us.xs(),this}getFittingRectangleFillStyle(){return this.Ak}setFittingRectangleStrokeStyle(t){return this.gk="function"==typeof t?t(this.gk):t,this.us.xs(),this}getFittingRectangleStrokeStyle(){return this.gk}addLegendBox(t,i){const s=super.addLegendBox(t,i);if(void 0===i||i===this.uiScale)if(void 0===t||"vertical"===t.getAlignment())s.setOrigin(qe.RightCenter).setPosition({x:this.uiScale.x.ct(this.uiScale.x.ei()-this.Fa.right),y:mt(this.tk.y.ct(this.tk.y.si()+this.tk.y.hi()/2),this.tk.y,this.uiScale.y)});else{const t=this.fA||od,i=ld(t,this.uiScale.Gi(),this.Fa,this.getTitleFillStyle()===O||0===this.getTitle().length?{x:0,y:0}:this.wh.Vs().nd(),y(ad(t),this.Vy),this.Fa).marginsWithTitle.top;s.setOrigin(qe.RightTop).setPosition(pt({x:this.Mg.x.getInnerEnd()-this.Fa.right,y:this.Mg.y.getInnerEnd()-i},this.Mg,this.uiScale))}return s}Fk(t,i){this.forEachAxis(td);const s=this.us.Go({clientX:i.x,clientY:i.y}),e=pt({x:s.engineX,y:s.engineY},this.Oy.us.ft,this.tk);this.lk.ze(e).tt(n(0,0))}Ik(t,i,s){const e=this.us.Go({clientX:i.x,clientY:i.y}),h=pt({x:e.engineX,y:e.engineY},this.Oy.us.ft,this.tk),r=this.us.Go({clientX:s.x,clientY:s.y}),o=pt({x:r.engineX,y:r.engineY},this.Oy.us.ft,this.tk),a=As(o.x,this.tk.x.getInnerStart(),this.tk.x.getInnerEnd())&&As(o.y,this.tk.y.getInnerStart(),this.tk.y.getInnerEnd()),l=n(Math.min(h.x,o.x),Math.min(h.y,o.y)),u=n(Math.max(h.x,o.x),Math.max(h.y,o.y));this.lk.ze(l).tt(Ps(u,l));const c=Math.min(u.x-l.x,u.y-l.y)>=10;a&&c&&u.x===h.x&&this.ek?(this.kk=!0,this.lk.Le(this.Ak).Be(this.gk),this.uk.We(this.gk).Xe(h).He(o),this.ck.We(this.gk).Xe(n(h.x,o.y)).He(n(o.x,h.y)),this.Sk=this.engine.setMouseStyle(this.vk,this.Sk)):a&&c&&(this.sk||this.ek)?(this.kk=!0,this.lk.Le(this.dk).Be(this.fk),this.uk.We(dt),this.ck.We(dt),this.Sk=this.engine.setMouseStyle(this.pk,this.Sk)):(this.kk=!1,this.lk.Be(dt).Le(O),this.uk.We(dt),this.ck.We(dt),this.engine.restoreMouseStyle(this.Sk)),this.us.xs()}Dk(t,i,s){if(this.kk){const t=this.us.Go({clientX:s.x,clientY:s.y}),e=pt({x:t.engineX,y:t.engineY},this.Oy.us.ft,this.tk),h=As(e.x,this.tk.x.getInnerStart(),this.tk.x.getInnerEnd())&&As(e.y,this.tk.y.getInnerStart(),this.tk.y.getInnerEnd()),r=s.x>=i.x||!this.ek?"zoom":"fit",n=this.lk.Ga(),o=Is(n,this.lk.ni()),a=Math.min(this.lk.ni().x,this.lk.ni().y)>=10;h&&a&&"zoom"===r&&this.sk?(this.forEachAxisX((t=>{if(t.getChartInteractionZoomByDrag()){const i=pt(n,this.tk,t.bg).x,s=pt(o,this.tk,t.bg).x;t.At(i,s,!0,!0,"interactionSetInterval")}})),this.forEachAxisY((t=>{if(t.getChartInteractionZoomByDrag()){const i=pt(n,this.tk,t.bg).y,s=pt(o,this.tk,t.bg).y;t.At(i,s,!0,!0,"interactionSetInterval")}}))):h&&a&&"fit"===r&&this.ek&&this.forEachAxis(id)}this.lk.Be(dt).Le(O),this.uk.We(dt),this.ck.We(dt),this.us.xs()}pan(t){this.forEachAxisX((i=>{i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.setStopped(!0).pan(t.y)}))}Pk(t){this.forEachAxisX((i=>{i.getChartInteractionPanByDrag()&&i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.getChartInteractionPanByDrag()&&i.setStopped(!0).pan(t.y)}))}zoom(t,i){this.forEachAxis(td),this.forEachAxisX((s=>{s.zoom(s.ft.ct(t.x),i.x)})),this.forEachAxisY((s=>{s.zoom(s.ft.ct(t.y),i.y)}))}Bk(t,i){this.forEachAxisX((s=>{s.getChartInteractionZoomByWheel()&&(td(s),s.zoom(s.ft.ct(t.x),i.x))})),this.forEachAxisY((s=>{s.getChartInteractionZoomByWheel()&&(td(s),s.zoom(s.ft.ct(t.y),i.y))}))}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}nf(){const t=[];return this.forEachAxis((i=>i.Rg((i=>t.push(i))))),super.nf().concat(t)}EC(){return this.ak}_e(){return this.Uy(this.sx)}setCursorEnabledDuringAxisAnimation(t){return this.nk=t,this}getCursorEnabledDuringAxisAnimation(){return this.nk}forEachAxis(t){return this.forEachAxisX(t),this.forEachAxisY(t),this}translateCoordinate(t,i,s){if(s){const e=t,h=i,r=Qo(h)?h:ae(h)?this.Mg:void 0;if(r&&ne(s)){const t=pt(e,r,this.us.ft);return this.us.Uo({engineX:t.x,engineY:t.y})}if(r&&ae(s))return pt(e,r,this.Mg);if(r&&Qo(s))return pt(e,r,s)}else{const s=t;if(ae(i)){const t=this.us.Go(s);return pt({x:t.engineX,y:t.engineY},this.us.ft,this.Mg)}if(Qo(i)){const t=i,e=this.us.Go(s);return pt({x:e.engineX,y:e.engineY},this.us.ft,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}}!function(t){t.CenterTop="center-top",t.RightTop="right-top",t.LeftTop="left-top",t.CenterBottom="center-bottom",t.RightBottom="right-bottom",t.LeftBottom="left-bottom",t.SeriesCenterTop="series-center-top",t.SeriesRightTop="series-right-top",t.SeriesLeftTop="series-left-top",t.SeriesCenterBottom="series-center-bottom",t.SeriesRightBottom="series-right-bottom",t.SeriesLeftBottom="series-left-bottom"}(rd||(rd={}));const od=rd.CenterTop,ad=t=>{switch(t){case"center-top":case"series-center-bottom":return{left:0,right:0,top:0,bottom:5};case"left-top":return{left:20,right:0,top:0,bottom:5};case"right-top":return{left:0,right:20,top:0,bottom:5};case"center-bottom":return{left:0,right:0,top:0,bottom:0};case"left-bottom":return{left:20,right:0,top:0,bottom:0};case"right-bottom":return{left:0,right:20,top:0,bottom:0};case"series-center-top":return{left:0,right:0,top:5,bottom:0};case"series-left-top":return{left:5,right:0,top:5,bottom:0};case"series-right-top":return{left:0,right:5,top:5,bottom:0};case"series-left-bottom":return{left:5,right:0,top:0,bottom:5};case"series-right-bottom":return{left:0,right:5,top:0,bottom:5}}return Yi(0,`Unexpected ChartXY title position selection ${t}`)},ld=(t,i,s,e,h,r)=>{e.x,h.left,h.right;const n=e.y+h.bottom+h.top,o=(h.left-h.right)*i.x,a=(h.bottom-h.top)*i.y;switch(t){case"center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-(r.top+h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:o,y:100-(r.top-h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100+o,y:100-(r.top-h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50+o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100+o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"series-center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:s.left*i.x+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100-s.right*i.x+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50,y:s.bottom*i.y+a},marginsWithTitle:s};case"series-left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:s.left*i.x+o,y:s.bottom*i.y+a},marginsWithTitle:s};case"series-right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100-s.right*i.x+o,y:s.bottom*i.y+a},marginsWithTitle:s}}return Yi(0,`Unexpected ChartXY title position selection ${t}`)},ud=(t,i)=>{const s=[];t.forEach(((t,e)=>{const h=i[e],r=s.find((i=>i.iParallel===t.iParallel));r?(r.stacks.push({...t,...h}),r.stacks.sort(((t,i)=>t.iStack-i.iStack))):s.push({iParallel:t.iParallel,stacks:[{...t,...h}]})}));const e=s.map((t=>{const i=t.stacks.reduce(((t,i)=>Math.max(t,i.Ug)),0),s=t.stacks.reduce(((t,i)=>Math.max(t,i.Wg)),0),e=t.stacks.reduce(((t,i)=>Math.max(t,i.Zd)),0),h=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"relative"in i.axis.jd?i.axis.jd.relative:0)),0);return{...t,ticksSizeMax:i,titleSizeMax:s,sumRelativeSize:h,thicknessMax:e}}));return e.sort(((t,i)=>t.iParallel-i.iParallel)),{groups:e,thicknessTotal:e.reduce(((t,i)=>t+i.thicknessMax),0)}},cd=(t,i,s)=>{var e;const h=Array.from(new Set(s.map((t=>t.series.ds())))),r=1===h.length&&void 0!==h[0]?h[0]:void 0,n="ProgressiveY"===r||"RegressiveY"===r?{progressiveDimension:"Y",progressiveAxis:i.axisY,valueDimension:"X",hitValueAxis:t=>t.axisX,value:t=>t.x,position:t=>t.y}:{progressiveDimension:"X",progressiveAxis:i.axisX,valueDimension:"Y",hitValueAxis:t=>t.axisY,value:t=>t.y,position:t=>t.x},o=n.progressiveAxis.getTickStrategy();return _t(i)?Wa(i,[[i.series],[t.getDefaultAxisX().getTitle()||"X","",{text:ce(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:ce(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],void 0!==i.intensity?["Value","",{text:ce(i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]:[]]):1===s.length?"Time"===o||"DateTime"===o?i.multiHit?[[ce(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis)],...Wa(i,[[i.series,""],[`${n.valueDimension}1`,"",{text:ce(n.hitValueAxis(i).formatValue(n.value(i.multiHit[0])),n.hitValueAxis(i)),font:{weight:"bold"}}],[`${n.valueDimension}2`,"",{text:ce(n.hitValueAxis(i).formatValue(n.value(i.multiHit[1])),n.hitValueAxis(i)),font:{weight:"bold"}}]])]:[[ce(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis)],...Wa(i,[[i.series,"",{text:ce(n.hitValueAxis(i).formatValue(n.value(i)),n.hitValueAxis(i)),font:{weight:"bold"}}]])]:i.multiHit?Wa(i,[[i.series],[n.progressiveDimension,"",{text:ce(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),font:{weight:"bold"}}],[`${n.valueDimension}1`,"",{text:ce(n.hitValueAxis(i).formatValue(n.value(i.multiHit[0])),n.hitValueAxis(i)),font:{weight:"bold"}}],[`${n.valueDimension}2`,"",{text:ce(n.hitValueAxis(i).formatValue(n.value(i.multiHit[1])),n.hitValueAxis(i)),font:{weight:"bold"}}]]):Wa(i,[[i.series],[n.progressiveDimension,"",{text:ce(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),font:{weight:"bold"}}],[n.valueDimension,"",{text:ce(n.hitValueAxis(i).formatValue(n.value(i)),n.hitValueAxis(i)),font:{weight:"bold"}}]]):r?[ce(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),...s.map((t=>t.multiHit?Wa(t,[[t.series,""],[`${n.valueDimension}1`,"",{text:ce(n.hitValueAxis(t).formatValue(n.value(t.multiHit[0])),n.hitValueAxis(t)),font:{weight:"bold"}}],[`${n.valueDimension}2`,"",{text:ce(n.hitValueAxis(t).formatValue(n.value(t.multiHit[1])),n.hitValueAxis(t)),font:{weight:"bold"}}]]):Wa(t,[[t.series,"",{text:ce(n.hitValueAxis(t).formatValue(n.value(t)),n.hitValueAxis(t)),font:{weight:"bold"}}]]))).flat()]:s.map((t=>Wa(t,[[t.series],[n.progressiveDimension,"",{text:ce(n.progressiveAxis.formatValue(n.position(t)),n.progressiveAxis),font:{weight:"bold"}}],[n.valueDimension,"",{text:ce(n.hitValueAxis(t).formatValue(n.value(t)),n.hitValueAxis(t)),font:{weight:"bold"}}]]))).flat()},dd=t=>t instanceof Xu||t instanceof lc||t instanceof gc||t instanceof hc||t instanceof Ec||t instanceof Rc||t instanceof Zc;class fd{constructor(t,i,e,h,r,n,o){this.coordsRelative="relative",this.coordsClient="client",this.L=new s,this.Zk=[],this.Qk=new Map,this.Nv=new Map,this.Jk=(t,i,s)=>{0!==this.Nv.size&&void 0!==[...this.Nv.values()].find((({series:t})=>!0===t.getVisible()))||this.Kk.At(i,s,!1,!1,"zoomBandChart"),this.qk.us.xs()},i.us.Qn(Yo._f),this.wA=t,this.tT=(null==n?void 0:n.orientation)||"x",this.iT=void 0!==(null==n?void 0:n.useSharedValueAxis)&&n.useSharedValueAxis,this.sT=h,this.Ku="x"===this.tT?jo:Zo;const a={...n,defaultAxisX:this.Ku.getWidth({x:null==n?void 0:n.defaultAxis,y:void 0}),defaultAxisY:this.Ku.getHeight({x:null==n?void 0:n.defaultAxis,y:void 0})};this.qk=new nd(t,i,e,Zt,r,a,o).setTitle("Zoom Band Chart").setMouseInteractions(!1).setCursorMode(void 0),this.engine=this.qk.engine;const l=this.qk.getDefaultAxisX().setMouseInteractions(!1),u=this.qk.getDefaultAxisY().setMouseInteractions(!1);this.Kk=this.Ku.getWidth({x:l,y:u}).setScrollStrategy(ch.fitting).setAnimationScroll(!1).setStrokeStyle(dt).setTickStrategy(dh.Empty),(null==n?void 0:n.useSharedValueAxis)?this.eT=this.Ku.getHeight({x:l,y:u}):this.Ku.getHeight({x:l,y:u}).dispose();const c=this.getTheme().zoomBandChartDefocusOverlayFillStyle||new W({color:this.getTheme().isDark?S(0,0,0,180):S(255,255,255,180)});this.hT=[this.qk.RA.Re(this.Kk.bg).Le(c).Be(dt),this.qk.RA.Re(this.Kk.bg).Le(c).Be(dt)];const d=this.qk.RA.Zg(this.Kk.bg).We(this.getTheme().zoomBandChartSplitterStrokeStyle||this.getTheme().chartXYSeriesBackgroundStrokeStyle);this.rT={collection:d,members:new Array(5).fill(0).map((t=>d.jr()))};const f=this.getTheme(),A="function"==typeof f.zoomBandChartKnobFillStyle?Wt({resourcesBaseUrl:this.wA.qs,styleFactory:f.zoomBandChartKnobFillStyle,apply:t=>this.setKnobFillStyle(t)}):f.zoomBandChartKnobFillStyle||O;this.nT=[this.qk.RA.Re(this.qk.Mg).Le(A).Be(dt),this.qk.RA.Re(this.qk.Mg).Le(A).Be(dt)],this.oT=this.getTheme().zoomBandChartKnobSize||{x:0,y:0},this.aT()}add(t){var i,s,e,h,r;const n=this.Zk.map((t=>t.axis)),o="x"===this.tT?t.axisX:t.axisY;if(!n.includes(o)){const t=o.onIntervalChange(this.Jk);this.Zk.push({axis:o,deattach:()=>{o.offIntervalChange(t)}}),this.Kk.nr(o.rr()),this.lT&&this.lT.remove(),this.lT=xt(...this.Zk.map((t=>t.axis)))}const a=this.Ku.getHeight({x:t.axisX,y:t.axisY});let l;if(this.iT)l=this.eT;else{const t=this.Qk.get(a);t?l=t:(l=this.Ku.getHeight({x:this.qk.addAxisX.bind(this.qk),y:this.qk.addAxisY.bind(this.qk)})(),this.uT(l)),this.Qk.set(a,l)}const u=this.Ku.getWidth({x:this.Kk,y:l}),c=this.Ku.getHeight({x:this.Kk,y:l});let d;const f=[],A=(t,i)=>{const s=t=>{if(0!==t.length)if("x"in t[0]){const s=t;i.add(s)}else{const s=t,e=[];for(let t=0;t<s.length;t+=1){const i=s[t];e.push({x:i[0],y:i[4]})}i.add(e)}},e=t.ZM();s(e);const h=t.QM(((t,i)=>s(i)));f.push((()=>t.JM(h)));const r=t.KM((()=>i.clear()));f.push((()=>{t.qM(r)}))};if(t instanceof Zc)d=this.qk.addPointLineAreaSeries({...t.qn,xAxis:u,yAxis:c}).setStrokeStyle(t.getStrokeStyle()).setAreaFillStyle(t.getAreaFillStyle()).setPointFillStyle(t.getPointFillStyle()).setPointAlignment(t.getPointAlignment()).setPointRotation(t.getPointRotation()).setPointShape(t.getPointShape()).setPointSize(t.getPointSize()).setCurvePreprocessing(t.getCurvePreprocessing()),d.setDataSet(t.KC());else if(t instanceof Xc||t instanceof Ec){const s=this.qk.addLineSeries({xAxis:u,yAxis:c,dataPattern:t instanceof Xc?null===(i=t.qn)||void 0===i?void 0:i.dataPattern:void 0});if(t instanceof Xc)s.setStrokeStyle(t.getStrokeStyle());else{const i=Ad(t);i&&s.setStrokeStyle(i)}A(t,s),d=s}else if(t instanceof cc){const i=this.qk.addAreaSeries({xAxis:u,yAxis:c,baseline:t.sw}).setFillStyle(t.getFillStyle()).setStrokeStyle(t.getStrokeStyle());A(t,i),d=i}else if(t instanceof $c){const i=this.qk.addPointSeries({xAxis:u,yAxis:c,pointShape:null===(s=t.qn)||void 0===s?void 0:s.pointShape}).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof Rc){const i=this.qk.addStepSeries({xAxis:u,yAxis:c,pointShape:null===(e=t.qn)||void 0===e?void 0:e.pointShape,mode:t.ww}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof Mc){const i=this.qk.addSplineSeries({xAxis:u,yAxis:c,pointShape:null===(h=t.qn)||void 0===h?void 0:h.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof Sc){const i=this.qk.addSplineSeries({xAxis:u,yAxis:c,pointShape:null===(r=t.qn)||void 0===r?void 0:r.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof gc){const i=this.qk.addAreaRangeSeries({xAxis:u,yAxis:c}).setLowFillStyle(t.getLowFillStyle()).setHighFillStyle(t.getHighFillStyle()).setLowStrokeStyle(t.getLowStrokeStyle()).setHighStrokeStyle(t.getHighStrokeStyle()).add(t.ZM()),s=t.QM(((t,s)=>i.add(s)));f.push((()=>t.JM(s))),d=i;const e=t.KM((()=>i.clear()));f.push((()=>{t.qM(e)}))}else{if(!(t instanceof ec))throw new Error("LightningChart JS Zoom Band Chart unsupported series type");{const i=this.qk.addHeatmapGridSeries({xAxis:u,yAxis:c,...t.l_}),s=()=>{i.setWireframeStyle(t.getWireframeStyle()).setIntensityInterpolation(t.getIntensityInterpolation()).setFillStyle(t.getFillStyle())};s(),d=i,t.d_(d);const e=t.g_(((t,s)=>i.invalidateIntensityValues(s))),h=t.f_(s);f.push((()=>{t.y_(e),t.A_(h)}));const r=t.KM((()=>i.clear()));f.push((()=>{t.qM(r)}))}}d.setMouseInteractions(!1);const g=t.onVisibleStateChanged(((t,i)=>{d.setVisible(i)}));f.push((()=>{t.offVisibleStateChanged(g)}));const y=t.onHighlight(((t,i)=>d.setHighlight(i)));f.push((()=>{t.offHighlight(y)}));const m=t.onDispose((()=>{this.disposeSeries(t)}));return f.push((()=>{t.offDispose(m)})),this.Nv.set(t,{series:d,clearReferences:()=>f.forEach((t=>t()))}),d}disposeSeries(t){const i=this.Nv.get(t);if(i){const{clearReferences:s}=i;s(),this.Nv.delete(t),i.series.dispose();const e=this.Ku.getHeight({x:t.axisX,y:t.axisY}),h=this.Qk.get(e);h&&0===h.Og().length&&(this.Qk.delete(e),h.dispose())}const s="x"===this.tT?t.axisX:t.axisY;if(!Array.from(this.Nv.keys()).find((t=>s===("x"===this.tT?t.axisX:t.axisY)))){const t=this.Zk.findIndex((t=>t.axis===s));this.Zk[t].deattach(),this.Zk.splice(t,1)}return this}setDefocusOverlayFillStyle(t){return this.hT.forEach((i=>i.Le(t))),this.qk.us.xs(),this}getDefocusOverlayFillStyle(){return this.hT[0].Qh()}setSplitterStrokeStyle(t){return this.rT.collection.We(t),this.qk.us.xs(),this}getSplitterStrokeStyle(){return this.rT.collection.Su()}setKnobFillStyle(t){return this.nT.forEach((i=>i.Le(t))),this.qk.us.xs(),this}getKnobFillStyle(){return this.nT[0].Qh()}setKnobStrokeStyle(t){return this.nT.forEach((i=>i.Be(t))),this.qk.us.xs(),this}getKnobStrokeStyle(){return this.nT[0].vo()}setKnobSize(t){return this.oT=t,this.qk.us.xs(),this}getKnobSize(){return this.oT}getDefaultAxisX(){return this.qk.getDefaultAxisX()}getDefaultAxisY(){return this.qk.getDefaultAxisY()}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}uT(t){t.setTickStrategy(dh.Empty).setMouseInteractions(!1).setNibStyle(dt).setStrokeStyle(dt)}aT(){let t;const i=(t,i,s)=>{var e,h;const r="x"===this.tT?null===(e=Array.from(this.Nv.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this.Nv.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=r.getInterval(),o=this.Kk.getInterval();Math.abs(this.Kk.ft.dt(t)-this.Kk.ft.dt(i))<10||Math.sign(i-t)!==Math.sign(n.end-n.start)||Math.min(t,i)<Math.min(o.start,o.end)||Math.max(t,i)>Math.max(o.start,o.end)&&Math.max(n.start,n.end)<Math.max(t,i)||r.At(t,i,s,!0,"zoomBandChart")};this.nT.forEach(((s,e)=>{s.setMouseEnterEventHandler((()=>{t=this.engine.setMouseStyle(this.Ku.getWidth({x:Ke.Horizontal,y:Ke.Vertical}),t)})),s.setMouseLeaveEventHandler((()=>{this.engine.restoreMouseStyle(t)}));const h=t=>{var s,h;const r="x"===this.tT?null===(s=Array.from(this.Nv.keys())[0])||void 0===s?void 0:s.axisX:null===(h=Array.from(this.Nv.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=this.Ku.getWidth(this.qk.translateCoordinate(t,this.qk.coordsAxis)),o=r.getInterval(),a=0===e?n:o.start,l=1===e?n:o.end;i(a,l,!1),mi(t)};s.setMouseDragEventHandler(((t,i,s,e,r)=>h(i)));const r=ve(new be(void 0,((t,i,s,e,r)=>h(r))));s.setTouchStartEventHandler(r.onTouchStart),s.setTouchMoveEventHandler(r.onTouchMove),s.setTouchEndEventHandler(r.onTouchEnd)})),this.qk.onSeriesBackgroundMouseEnter((()=>{t=this.engine.setMouseStyle(Ke.Move,t)})),this.qk.onSeriesBackgroundMouseLeave((()=>{this.engine.restoreMouseStyle(t)}));const s=(t,s)=>{var e,h;const r="x"===this.tT?null===(e=Array.from(this.Nv.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this.Nv.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=r.getInterval(),o=this.Kk.ft.gi(n.start,this.Ku.getWidth(t)),a=this.Kk.ft.gi(n.end,this.Ku.getWidth(t));i(o,a,!1),mi(s)};this.qk.onSeriesBackgroundMouseDrag(((t,i,e,h,r)=>s(r,i)));const e=ve(new be(void 0,((t,i,e,h,r)=>s(h,r))));this.qk.onSeriesBackgroundMouseWheel(((t,s)=>{var e,h;const r="x"===this.tT?null===(e=Array.from(this.Nv.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this.Nv.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=r.getInterval(),o=this.Kk.getInterval(),a=this.Ku.getWidth(this.qk.translateCoordinate(s,this.qk.coordsAxis)),l=this.Kk.ft.dt(n.start),u=this.Kk.ft.dt(n.end),c=this.Kk.ft.dt(a),d=Jt((c-l)/(u-l),0,1),f=.2*Math.abs(u-l)*r.jf,A=d*f*-Math.sign(s.deltaY),g=(1-d)*f*Math.sign(s.deltaY),y=Jt(this.Kk.ft.gi(n.start,A),o.start,o.end),m=Jt(this.Kk.ft.gi(n.end,g),o.start,o.end);i(y,m,!1),mi(s)})),this.qk.onSeriesBackgroundTouchStart(e.onTouchStart),this.qk.onSeriesBackgroundTouchMove(e.onTouchMove),this.qk.onSeriesBackgroundTouchEnd(e.onTouchEnd),this.hT.forEach(((s,e)=>{s.setMouseEnterEventHandler((()=>{t=this.engine.setMouseStyle(Ke.Point,t)})),s.setMouseLeaveEventHandler((()=>{this.engine.restoreMouseStyle(t)}));const h=t=>{var s,e;const h="x"===this.tT?null===(s=Array.from(this.Nv.keys())[0])||void 0===s?void 0:s.axisX:null===(e=Array.from(this.Nv.keys())[0])||void 0===e?void 0:e.axisY;if(!h)return;const r=this.Ku.getWidth(this.qk.translateCoordinate(t,this.qk.coordsAxis)),n=h.getInterval(),o=this.Kk.getInterval(),a=Jt(r-(n.end-n.start)/2,Math.min(o.start,o.end),Math.max(o.start,o.end)-Math.abs(n.end-n.start)),l=a+(n.end-n.start);i(a,l,!0),mi(t)};s.setMouseClickEventHandler(((t,i)=>h(i)));const r=ve(new class{constructor(t,i=300){this.Os=!1,this.Ns=[],this.Gs=300,this.Us=t,this.Gs=i}zs(t,i){const s=Yt.performance.now();let e=!1;for(let t=0;t<this.Ns.length;t+=1)s-this.Ns[t].time>=this.Gs?(this.Ns.splice(t,1),t-=1):this.Ns[t].state&&(e=!0);return this.Os?0===i.interactions.length&&(this.Ns.push({state:!1,time:s}),this.Os=!1):1===i.interactions.length&&"pointerdown"===i.type&&(this.Ns.push({state:!0,time:s}),e=!0,this.Os=!0),e}Vs(t,i,s){if(s&&!this.Os){const s=this.Ns.reduce(((t,i)=>(i.state?t.on+=1:t.off+=1,t)),{on:0,off:0});s.on>=1&&s.off>=1&&(this.Us(t,i),this.Ns.length=0)}}}(((t,i)=>h(i))));s.setTouchStartEventHandler(r.onTouchStart),s.setTouchMoveEventHandler(r.onTouchMove),s.setTouchEndEventHandler(r.onTouchEnd)}))}getSizePixels(){return this.qk.getSizePixels()}onResize(t){return this.qk.onResize(((i,s,e,h,r)=>t(this,s,e,h,r)))}offResize(t){return this.qk.offResize(t)}Nr(t){this.qk.Nr(t)}getMinimumSize(){return this.qk.getMinimumSize()}Z(){return this.qk.Z()}J(){return this.qk.J()}Ee(t){var i,s,e,h;const r=Ni(Array.from(this.Nv.keys()).map((t=>t.chart))),n="x"===this.tT?null===(i=Array.from(this.Nv.keys())[0])||void 0===i?void 0:i.axisX:null===(s=Array.from(this.Nv.keys())[0])||void 0===s?void 0:s.axisY;if("x"===this.tT){const t=r.reduce(((t,i)=>{const s=[];i.forEachAxisY((t=>{if(0!==t.mg)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.hy())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),i=r.reduce(((t,i)=>{const s=[];i.forEachAxisY((t=>{if(100!==t.mg)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.hy())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),s=r.reduce(((t,i)=>Math.max(t,i.getPadding().left)),0),h=r.reduce(((t,i)=>Math.max(t,i.getPadding().right)),0);this.qk.forEachAxisY((t=>t.setThickness(0))),null===(e=this.getDefaultAxisY())||void 0===e||e.setThickness(t),this.qk.setPadding({left:s+(0===r.length?10:0),right:h+i+(0===r.length?10:0)})}else{const t=r.reduce(((t,i)=>{const s=[];i.forEachAxisX((t=>{if(0!==t.mg)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.hy())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),i=r.reduce(((t,i)=>{const s=[];i.forEachAxisX((t=>{if(100!==t.mg)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.hy())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),s=r.reduce(((t,i)=>Math.max(t,i.getPadding().bottom)),0),e=r.reduce(((t,i)=>Math.max(t,i.getPadding().top)),0);this.qk.forEachAxisX((t=>t.setThickness(0))),null===(h=this.getDefaultAxisX())||void 0===h||h.setThickness(t),this.qk.setPadding({bottom:s+(0===r.length?10:0),top:e+i+(0===r.length?10:0)})}this.qk.Ee(t);const o=this.Kk.getInterval().start,a=this.Kk.getInterval().end,l=Jt(n?n.getInterval().start:o,o,a),u=Jt(n?n.getInterval().end:a,o,a),c=this.Ku.getHeight(this.qk.tk.getInnerIntervalPixels());this.hT[0].ze(this.Ku.toPoint(o,0)).tt(this.Ku.toPoint(l-o,c)),this.hT[1].ze(this.Ku.toPoint(u,0)).tt(this.Ku.toPoint(a-u,c)),this.rT.members[0].Jg(this.Ku.toPoint(o,c),this.Ku.toPoint(l,c)),this.rT.members[1].Jg(this.Ku.toPoint(l,c),this.Ku.toPoint(l,0)),this.rT.members[2].Jg(this.Ku.toPoint(l,0),this.Ku.toPoint(u,0)),this.rT.members[3].Jg(this.Ku.toPoint(u,0),this.Ku.toPoint(u,c)),this.rT.members[4].Jg(this.Ku.toPoint(u,c),this.Ku.toPoint(a,c));const d=pt(this.Ku.toPoint(l,c/2),this.Kk.bg,this.qk.Mg),f=pt(this.Ku.toPoint(u,c/2),this.Kk.bg,this.qk.Mg),A=this.oT;this.nT[0].ze({x:d.x-A.x/2,y:d.y-A.y/2}).tt({x:A.x,y:A.y}).ir(this.Ku.getWidth({x:0,y:90})),this.nT[1].ze({x:f.x-A.x/2,y:f.y-A.y/2}).tt({x:A.x,y:A.y}).ir(this.Ku.getWidth({x:0,y:90}))}setSeriesBackgroundFillStyle(t){return this.qk.setSeriesBackgroundFillStyle(t),this.qk.us.xs(),this}getSeriesBackgroundFillStyle(){return this.qk.getSeriesBackgroundFillStyle()}setSeriesBackgroundStrokeStyle(t){return this.qk.setSeriesBackgroundStrokeStyle(t),this.qk.us.xs(),this}getSeriesBackgroundStrokeStyle(){return this.qk.getSeriesBackgroundStrokeStyle()}setSeriesBackgroundEffect(t){return this.qk.setSeriesBackgroundEffect(t),this.qk.us.xs(),this}getSeriesBackgroundEffect(){return this.qk.getSeriesBackgroundEffect()}getTheme(){return this.qk.getTheme()}setTitle(t){return this.qk.setTitle(t),this}getTitle(){return this.qk.getTitle()}setTitleFillStyle(t){return this.qk.setTitleFillStyle(t),this}getTitleFillStyle(){return this.qk.getTitleFillStyle()}setTitleFont(t){return this.qk.setTitleFont(t),this}getTitleFont(){return this.qk.getTitleFont()}setTitleMargin(t){return this.qk.setTitleMargin(t),this}getTitleMargin(){return this.qk.getTitleMargin()}setPadding(t){return this.qk.setPadding(t),this}getPadding(){return this.qk.getPadding()}setBackgroundFillStyle(t){return this.qk.setBackgroundFillStyle(t),this}getBackgroundFillStyle(){return this.qk.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.qk.setBackgroundStrokeStyle(t),this}getBackgroundStrokeStyle(){return this.qk.getBackgroundStrokeStyle()}translateCoordinate(t,i,s){return Ra(t,i,s,this.qk.Mg,this.qk.us)}addUIElement(t,i){return this.qk.addUIElement(t,i)}addLegendBox(t,i){return this.qk.addLegendBox(t,i)}getLegendBoxes(){return this.qk.getLegendBoxes()}saveToFile(t,i,s){return this.qk.saveToFile(t,i,s),this}dispose(){return this.qk.dispose(),this.Qk.clear(),this.Nv.clear(),this.sT(this),this}isDisposed(){return this.qk.isDisposed()}onDispose(t){return this.qk.onDispose((()=>t(this)))}offDispose(t){return this.qk.offDispose(t)}}const Ad=t=>{if("getStrokeStyle"in t)return t.getStrokeStyle();const i=(t=>t instanceof Xc||t instanceof cc?t.getStrokeStyle().getFillStyle():t instanceof $c||t instanceof Sc?t.getPointFillStyle():void 0)(t);return i?new _e({thickness:2,fillStyle:i}):void 0};class gd extends Pu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.ws="Point Series",this.sM=[],this.eM=!1,this.aM=3,this.Ca=0,this.Fe=Ri(this.qi.polarPointSeriesFillStyle,r),this.vd=new Un({dataPattern:null}),this.Ka=t.Md(e).We(dt).xd(O).bd(this.Fe)._d(ar.Circle).Fd(this.aM).cs(this.getHighlight()).Sd(this.vd),this.fs(this.Ka)}solveNearest(t,i="show-nearest"){const s=this.chart.translateCoordinate(t,this.chart.coordsAxis),e=Du([s],this.scale)[0],h=this.vd.ed(e,Ua(i),this.scale,this.chart.Mg);if(!h)return;const r=Ru(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Ji(t,i){return qi({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}setData(t){return 0!==this.sM.length&&this.chart.us.Qn(Yo.Pf),this.sM=Lu(t),this.eM=!0,this.Jx=Bu(this.sM),this.Ls.xs(),this}setPointAlignment(t){return this.Ka.ZC(t),this.chart.us.xs(),this}getPointAlignment(){return this.Ka.QC()}setPointFillStyle(t){this.Fe="function"==typeof t?t(this.Fe):t;const i=this.Fe;return this.Ka.bd(i),this.Ls.xs(),this}getPointFillStyle(){return this.Fe}setPointSize(t){return this.aM=t,this.Ka.Fd(t),this.Ls.xs(),this}getPointSize(){return this.aM}setPointShape(t){return this.Ka._d(t),this.chart.us.xs(),this}getPointShape(){return this.Ka.wd()}setPointRotation(t){return this.Ca=t,this.Ka.Cd(t),this.Ls.xs(),this}getPointRotation(){return this.Ca}fv(){return this.yv&&this.sM.length>0&&this.getVisible()}Ve(t,i){t.cs(i),this.Ls.xs()}Ee(){if(this.eM||this.scale.oM()){const t=Du(this.sM,this.scale),i=vs(t);this.vd.clear().add(t),this.Ka.ia(i),this.eM=!1,this.Ka.Vs()}}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe})}Ds(){return this._s||this.getPointShape()}}class yd{constructor(t,i,e,h){this.L=new s,this.cT=!1,this.oe=t,this.dT=i,this.Nv=e,this.Ka=h}setGeometry(t){return this.fT=t,this.cT=!0,this.oe.us.xs(),this}getGeometry(){return this.fT}setMouseInteractions(t){return this.Ka.setMouseInteractions(t),this}dispose(){return this.Ka.dispose(),this.dT(this),this.L.emit("dispose",this),this}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setVisible(t){const i=this.Ka.getVisible()!==t;return this.Ka.setVisible(t),i&&this.L.emit("visibleStateChanged",this,t),this.oe.us.xs(),this}getVisible(){return this.Ka.getVisible()}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}}class md extends Pu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.ws="Polygon Series",this.AT=[],this.gT=[],this.yT=t=>{const i=this.gT.indexOf(t);i>=0&&this.gT.splice(i,1);const s=this.AT.findIndex((i=>i===t.Ka));s>=0&&this.AT.splice(s,1),this.Ls.xs()},this.Fe=Ri(this.qi.polarPolygonSeriesFillStyle,r),this.Ie=Ri(this.qi.polarPolygonSeriesStrokeStyle,r)}solveNearest(t,i){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=$u(e,this.AT,((t,i)=>{const s=t.ed(i);if(s)return pt(s,this.scale,t.us.ft)}),gs);if(!h)return;const r=pt(h[0],h[1].us.ft,this.scale);if(!this.mT(h[1]))return;const n=Ru(r,this.scale);return{cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this,...n}}Ji(t,i){return qi({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}addPolygon(){const t=new yd(this.chart,this.yT,this,this.pT());return this.gT.push(t),t}setFillStyle(t){this.Fe="function"==typeof t?t(this.Fe):t;const i=this.Fe;for(const t of this.AT)t.Le(i);return this.Ls.xs(),this}getFillStyle(){return this.Fe}setStrokeStyle(t){this.Ie="function"==typeof t?t(this.Ie):t;const i=this.Ie;for(const t of this.AT)t.Be(i);return this.Ls.xs(),this}getStrokeStyle(){return this.Ie}fv(){return this.yv&&void 0!==this.gT.find((t=>void 0!==t.vT))&&this.getVisible()}Ee(){this.gT.forEach((t=>{(t.cT||this.scale.oM())&&t.ST&&(t.Ka.Tl(Du(t.ST,this.scale)),t.cT=!1,t.Ka.Vs())}))}wv(){super.wv();const t=c(es,hs);this.gT.forEach((i=>{if(!i.fT)return;const s=!i.cT&&i.ST?i.ST:Lu(i.fT);i.ST=s;const e=!i.cT&&i.vT?i.vT:Bu(s);i.vT=e,t.min=Math.min(t.min,e.min),t.max=Math.max(t.max,e.max)})),this.Jx=t}Ve(t,i){t.cs(i),this.Ls.xs()}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe,stroke:this.Ie})}pT(){const t=this.Ls.dc(this.scale,Or.Simple).Le(this.Fe).Be(this.Ie).cs(this.getHighlight());return this.AT.push(t),this.fs(t),t}mT(t){return this.gT.find((i=>i.Ka===t))}}class pd extends Pu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.ws="Area Series",this.sM=[],this.eM=!1,this.hM=!1,this.bT=!1,this.Fe=Ri(this.qi.polarAreaSeriesFillStyle,r),this.Ie=Ri(this.qi.polarAreaSeriesStrokeStyle,r)}setData(t){0!==this.sM.length&&this.chart.us.Qn(Yo.Pf);const i=(t=>{const i=[];let s,e,h=!1;for(let r=0;r<t.length;r+=1){const n=t[r];let o=!0;if(s){o=!1;const t=n.angle-s.angle;if(Qt(t,0))o=!0;else{const i=Math.sign(t);void 0===e?(e=i,o=!0):e===i&&(o=!0)}}o?i.push(n):h=!0,s=n}return{progressivePoints:i,userDataModified:h}})(t);return i.userDataModified&&!1===this.bT&&(console.warn(`${this.ws} setData data format is faulty. Consecutive 'angle' values should progress in the same direction! Invalid data points have been removed.`),this.bT=!0),this.sM=i.progressivePoints,this.eM=!0,this.Jx=Bu(this.sM),this.Ls.xs(),this}setFillStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.Ls.xs(),this}getFillStyle(){return this.Fe}setStrokeStyle(t){return this.Ie="function"==typeof t?t(this.Ie):t,this.Ls.xs(),this}getStrokeStyle(){return this.Ie}setConnectDataAutomaticallyEnabled(t){return this.hM=t,this.Ls.xs(),this}getConnectDataAutomaticallyEnabled(){return this.hM}fv(){return this.yv&&this.sM.length>0&&this.getVisible()}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe,stroke:this.Ie})}}class vd extends pd{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.xT=this.Ls.dc(this.scale,Or.Simple).cs(this.getHighlight()),this.fs(this.xT)}solveNearest(t,i){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=this.xT.ed(e);if(!h)return;const r=Ru(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Ji(t,i){return qi({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}Ee(){if(this.eM||this.scale.oM()){const t=this.sM,i=!0===this.hM?Du(t.concat((t=>{if(0===t.length)return t;const i=t[0],s=t[t.length-1];if(Qt(i.angle,s.angle))return t;const e=1*Math.sign(s.angle-i.angle);let h=0;const r=[];for(let t=s.angle+e;!Qt(t%360,i.angle%360);t+=e)if(r.push({angle:t,amplitude:0}),h+=1,h>360)return[];for(let t=0;t<r.length;t+=1)r[t].amplitude=pn(s.amplitude,i.amplitude,(t+1)/(r.length+1));return r})(t)),this.scale):[...Du(t,this.scale),{x:0,y:0}];this.xT.Tl(i).Le(this.Fe).Be(this.Ie),this.eM=!1,this.xT.Vs()}}Ve(t,i){t.cs(i),this.Ls.xs()}}class Sd extends se{constructor(){super(...arguments),this.Ni="RadialScale",this.MT={start:0,end:1},this._T=!1,this.wT=0,this.j=n(0,0),this.CT=[0,0],this.kT=[0,0],this.o=!0,this.vi=!0,this.TT=!0,this.FT=!0,this.IT={x:0,y:0},this.ci={x:{displacement:0,scaling:0,highPrecisionOffset:0},y:{displacement:0,scaling:0,highPrecisionOffset:0}}}zx(t,i){return t===this.MT.start&&i===this.MT.end||(this.MT={start:t,end:i},this.TT=!0,this.PT()),this}Ex(){return this.MT}Rx(){return this.MT.end>=this.MT.start}Yx(t){this._T=t,this.FT=!0}Xx(){return!1===this._T}Hx(t){this.wT=t,this.FT=!0}Gx(){return this.wT}yi(){return this.vi}Mi(){return!1}ut(t,i,s,e){return this.x=new te(t.x,i.x,s.x,e?e.x:void 0),this.y=new te(t.y,i.y,s.y,e?e.y:void 0),this}mi(){return this.ci}oM(){return this.TT}DT(){return this.FT}Gi(){return this.IT}Z(){return this.o=!1,this.vi=!1,this.TT=!1,this.FT=!1,this}J(){return this.o=!0,this.vi=!0,this.TT=!0,this.FT=!0,this}tt(t,i){return"object"==typeof t?(this.j.x=t.x,this.j.y=t.y):(this.j.x=t,this.j.y=i),this.PT(),this}Ri(t){return this.CT=t,this.PT(),this}Ei(t){return this.kT=t,this.PT(),this}ri(){return n(this.CT[0]+this.CT[1],this.kT[0]+this.kT[1])}ni(){return this.j}PT(){const t=this.MT,i=n(this.x.oi(this.j.x),this.y.oi(this.j.y)),s=this.CT[0]+this.CT[1],e=this.kT[0]+this.kT[1],h=Math.max(i.x-s,0),r=Math.max(i.y-e,0),o=.5*(h>r?r:h),a=[this.CT[0]+Math.max((h-2*o)/2,0),this.CT[1]+Math.max((h-2*o)/2,0)],l=[this.kT[0]+Math.max((r-2*o)/2,0),this.kT[1]+Math.max((r-2*o)/2,0)],u=Math.abs(t.end-t.start);this.x.tt(this.j.x).ii(a).K(-u,u),this.y.tt(this.j.y).ii(l).K(-u,u),this.IT={x:this.x.getPixelSize(),y:this.y.getPixelSize()},this.ci={x:this.x.mi(),y:this.y.mi()},this.J()}gi(t,i){const s=this.Gi();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}Ui(t,i,s,e){const h=this.Gi(),r=ks(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class bd extends $l{constructor(t,i,s,e,h,r,n){super(t,i,s,i.zy("polarChart bg",0),e,i.us.qi.polarChartBackgroundFillStyle,i.us.qi.polarChartBackgroundStrokeStyle,i.us.qi.polarChartTitleFont,i.us.qi.polarChartTitleFillStyle,n),this.coordsClient="client",this.uA=[],this.Wo=!0,this.BT=(t,i,s,e,h)=>{this.Mx.tt(e,h)},this.AA=bi(this.uA),this.LT=t=>{this.uA.push(t)},this.RT=()=>this.Nv,this.us.Qn(Yo.xf),this.Nk=i.kb("polarChart series bg",0),this.ET=i.ip("polarChart axis gridlines",0),this.zT=i.ip("polarChart series",1),this.VT=i.ip("polarChart axis lines",2),this.OT=i.ip("polarChart axis ticks",3),this.Mx=s.d2({scaleXYConstructor:Sd}),this.onResize(this.BT),this.wh.vr("Polar Chart"),this.Hv=this.Nk.ld(this.Mx).Le(this.qi.polarChartSeriesBackgroundFillStyle).Be(dt).fu(0).He(360).mu(0),this.Xv=this.Nk.ld(this.Mx).Le(O).Be(this.qi.polarChartSeriesBackgroundStrokeStyle).fu(0).He(360).mu(0),super.Yv(this.Hv,this.Xv),this.Ey(h,this.Mg),this.NT=new xu(this,this.Mx,this.qi,!1!==(null==r?void 0:r.animationsEnabled),this.ET,this.VT,this.OT,this.es,this.RT),this.GT=new _u(this,this.Mx,this.qi,!1!==(null==r?void 0:r.animationsEnabled),this.ET,this.VT,this.OT,this.es),this.coordsAxis={axisAmplitude:this.NT,axisRadial:this.GT};const o=i.ep(),a=qt(r?r.cursorBuilder:void 0,ol);this.hp=Ya(this,o,a.wm(o,this.uiScale,this.uiScale,Zt,this.qi),this,"show-nearest",Md,((t,i)=>{const s=this.translateCoordinate(t,this.coordsClient);return Math.sqrt((s.clientX-i.clientX)**2+(s.clientY-i.clientY)**2)})),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled))}getSeries(){return this.Nv}setCursor(t){return this.hp.setCursor(t),this}getCursor(){return this.hp.getCursor()}setCursorMode(t){return this.hp.setCursorMode(t),this}getCursorMode(){return this.hp.getCursorMode()}setCustomCursor(t){return this.hp.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.hp.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.hp.offCursorTargetChanged(t)}setCursorFormatting(t){return this.hp.setCursorFormatting(t),this}getCursorFormatting(){return this.hp.getCursorFormatting()}solveNearest(t,i=this.getCursorMode()||"show-nearest"){return this.hp.solveNearest(t,i,this.Nv,((t,i,s)=>t.solveNearest(i,s)))}addCursor(t=ol){const i=this.wy(),s=t.wm(i,this.uiScale,this.uiScale,this.Sy(i),this.qi);return this.By(s),s}translateCoordinate(t,i,s){if(s){const i=t,e=this.Mg,h=s;if(ne(h)){const t=pt(i,e,this.us.ft);return this.us.Uo({engineX:t.x,engineY:t.y})}if(ae(h))return i;if(ku(h)){const t=pt(i,e,this.Mx);return Ru(t,this.Mx)}}else{const s=t,e=i;if(oe(s)){if(ku(e)){const t=this.us.Go(s),i=pt({x:t.engineX,y:t.engineY},this.us.ft,this.Mx);return Ru(i,this.Mx)}if(ne(e))return s;if(ae(e)){const t=this.us.Go(s);return pt({x:t.engineX,y:t.engineY},this.us.ft,this.Mg)}}else if(Tu(s)){if(ku(e))return s;const t=Du([s],this.Mx)[0];if(ne(e)){const i=pt(t,this.Mx,this.us.ft),s={engineX:i.x,engineY:i.y};return this.us.Uo(s)}if(ae(e))return pt(t,this.Mx,this.Mg)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addLineSeries(t){const i=new zu(this.zT,this,this.Uv,this.Mx,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,this.us.es);return this.$v(i),i}addPointSeries(t){const i=new gd(this.zT,this,this.Uv,this.Mx,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,this.us.es);return this.$v(i),i}addPointLineSeries(t){const i=new Vu(this.zT,this,this.Uv,this.Mx,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,this.us.es);return this.$v(i),i}addAreaSeries(t){const i=new vd(this.zT,this,this.Uv,this.Mx,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,this.us.es);return this.$v(i),i}addPolygonSeries(t){const i=new md(this.zT,this,this.Uv,this.Mx,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,this.us.es);return this.$v(i),i}addHeatmapSeries(t){const i=new Eu(this.zT,this,this.Uv,this.Mx,this.qi,this.us.es,t);return this.$v(i),i}addSector(){const t=new Fu(this.zT,this,this.AA,this.Mx,this.qi,this.us.es);return this.LT(t),t}getAmplitudeAxis(){return this.NT}get amplitudeAxis(){return this.NT}get axisAmplitude(){return this.NT}getRadialAxis(){return this.GT}get radialAxis(){return this.GT}get axisRadial(){return this.GT}Ee(t){var i,s;super.Ee(t),Ga.Hy(this.wh,this.Vy);for(const t of this.Nv)t.wv();this.NT.Lr(),this.GT.Lr();for(const t of this.Nv)t.Ee();for(let t=1;t<=2;t+=1){const i=this.NT.Ee(),s=this.GT.Ee(),e=Ga.Yy(this.wh,this.Vy),h=[this.Fa.left+s,this.Fa.right+s],r=[this.Fa.bottom+s,this.Fa.top+s+e];this.Mx.Ri(h).Ei(r);const n=4;if(!(!this.UT||Math.abs(this.UT.amplitude-i)>=n||Math.abs(this.UT.radial-s)>=n)||1!==t){this.UT={amplitude:i,radial:s};break}}const e=this.Mx.Ex().start,h=this.Mx.Ex().end,r=this.Mx.Rx()?((null===(i=this.UT)||void 0===i?void 0:i.radial)||0)*this.Mx.x.getPixelSize()+h-e:((null===(s=this.UT)||void 0===s?void 0:s.radial)||0)*this.Mx.x.getPixelSize()+e-h;this.Hv.Au(r).pu(360),this.Xv.Au(r).pu(360);for(const t of this.uA)t.Ee();this.hp.Ee(!1,this.Nv,((t,i,s)=>t.solveNearest(i,s)));for(const t of this.Nv)t.Fp();return super.Ry(),this.WT(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.NT.setAnimationsEnabled(t),this.GT.setAnimationsEnabled(t),this}setMouseInteractions(t){return this.Wo=t,this}getMouseInteractions(){return this.Wo}getMinimumSize(){return n(xd,xd)}WT(){}forEachAxis(t){return t(this.NT),t(this.GT),this}dispose(){return this.uA.slice().forEach((t=>t.dispose())),this.hp.W(),this.Nk.W(),this.ET.W(),this.zT.W(),this.VT.W(),this.OT.W(),super.dispose()}nf(){return[...this.Nv,...this.uA]}}const xd=300,Md=(t,i,s)=>{var e;return kt(i)?Wa(i,[[i.series],["Angle","",{text:i.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:ce(t.getAmplitudeAxis().formatValue(i.amplitude),t.amplitudeAxis),font:{weight:"bold"}}],["Intensity","",{text:ce(i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]]):Wa(i,[[i.series],["Angle","",{text:i.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:ce(t.getAmplitudeAxis().formatValue(i.amplitude),t.amplitudeAxis),font:{weight:"bold"}}]])};class _d extends fl{}class wd extends _d{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.ws="Slice",this.S=0,this.Cm=!1,this.YT=O,this.Tm=O,this.Fm=this.S,this.Dm=K((()=>this.chart.us.xs())),this.Lm=()=>{this.Rm=void 0},this.index=t,this.chart=e,this.scale=h,this.Ki=r,this.xT=i.dc(h,Or.Simple).cs(this.getHighlight()),this.fs(this.xT),this.hh=s.Ur(h).cs(this.getHighlight()),this.fs(this.hh,{isText:!0})}setValue(t){return this.chart.getAnimationsEnabled()?this.getVisible()&&this.Om(this.Fm,t):this.Fm=t,this.S=t,this.chart.us.xs(),this}getValue(){return this.S}setVisible(t){return!1===t?this.chart.getAnimationsEnabled()&&this.Fm>0?(this.Rm&&(this.Rm.finish(!1),this.Rm=void 0),this.Om(this.Fm,0,(()=>super.setVisible(!1)))):(this.Fm=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.Rm&&(this.Rm.finish(!1),this.Rm=void 0),super.setVisible(!0),this.Om(this.Fm,this.S)):(this.Fm=this.S,super.setVisible(!0)),this}Om(t,i,s){this.Rm=this.Dm(300,Q.ease)([[t,i]],(([t])=>{this.Fm=t,this.chart.us.xs()})),this.Rm.onEveryAnimationEnd(this.Lm),s&&this.Rm.onAnimationEnd(s)}setStyle(t,i,s,e){this.YT=t,this.Tm=s,this.xT.Le(this.YT).Be(i),this.hh.Le(this.Tm).tr(e);for(let t=0;t<this.Qi.length;t+=1)this.styleLegendEntry(this.Qi[t])}getAnimatedValue(){return this.Fm}Ve(t,i){return t.cs(i),this.chart.us.xs(),this}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.YT,stroke:this.xT.vo()})}}var Cd;!function(t){t[t.VariableHeight=0]="VariableHeight",t[t.VariableWidth=1]="VariableWidth"}(Cd||(Cd={}));const kd=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},Td=(t,i,s,e,h,r=0,n=Cd.VariableHeight,o)=>{i=kd(i,e.x),s=kd(s,e.x);const a=t.length;let l=0,u=0;l=t.reduce(((t,i)=>t+i.getAnimatedValue()),0);let c={x:o-i/2,y:e.y+h.bottom},d={x:o+i/2,y:e.y+h.bottom},f={x:0,y:h.bottom},A={x:0,y:h.bottom},g=0,y=0;if(r)for(let i=0;i<t.length;i+=1){const s=10;y+=t[i].getAnimatedValue();const o=n===Cd.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-y/l*e.y;if(n===Cd.VariableWidth){r=o-r<s?Math.max(20,o-s):r;break}0!==g&&g-o-r<s&&(r=Math.max(0,g-o-s)),g=o}const m=(i-s)/2/e.y;for(let g=0;g<a;g+=1){const y=t[g];u+=y.getAnimatedValue();const p=n===Cd.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-u/l*e.y;let v=0;g>0&&(c={x:f.x+m*r,y:f.y-r},d={x:A.x-m*r,y:A.y-r}),v=(i+u/l*(s-i))/2,f={x:o-v,y:parseInt(`${n===Cd.VariableWidth?c.y-p:p}`,10)},A={x:o+v,y:parseInt(`${n===Cd.VariableWidth?d.y-p:p}`,10)},d.x>=c.x&&A.x>f.x&&y.xT.Tl([f,c,d,A])}};class Fd extends Na{constructor(t,i,s,e,h,r,n){super(t,i,s,i.zy("funnelChart bg",0),e,i.us.qi.funnelChartBackgroundFillStyle,i.us.qi.funnelChartBackgroundStrokeStyle,i.us.qi.funnelChartTitleFont,i.us.qi.funnelChartTitleFillStyle,r),this.Nm=[],this.Gm=cl.None,this.Ym=!0,this.$m=0,this.HT=80,this.XT=20,this.$T=0,this.jT=Cd.VariableHeight,this.Qm=!0,this.Km=t=>{const i=this.Nm.indexOf(t);i>=0&&(this.Nm.splice(i,1),this.qm())},this.us.Qn(Yo.vf),this.Jm=this.qi.effectsText,this.tp=i.ip("funnelChart bottom",0),this.sp=i.ip("funnelChart top",1),this.wh.vr("Funnel Chart"),this.Um=this.qi.funnelChartSliceFillStylePalette,this.Wm=this.qi.funnelChartSliceStrokeStyle,this.Hm=this.qi.funnelChartSliceLabelFont,this.Xm=this.qi.funnelChartSliceLabelFillStyle;const o=i.ep(),a=qt(n?n.cursorBuilder:void 0,rl);this.hp=Ya(this,o,a.wm(o,this.uiScale,this.uiScale,Zt,this.qi),void 0,"show-pointed",Id,(()=>0)),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled)),this.Ey(h,this.Mg)}setCursor(t){return this.hp.setCursor(t),this}getCursor(){return this.hp.getCursor()}setCursorMode(t){return this.hp.setCursorMode(t),this}getCursorMode(){return this.hp.getCursorMode()}setCustomCursor(t){return this.hp.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.hp.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.hp.offCursorTargetChanged(t)}setCursorFormatting(t){return this.hp.setCursorFormatting(t),this}getCursorFormatting(){return this.hp.getCursorFormatting()}addCursor(t=rl){const i=this.wy(),s=t.wm(i,this.uiScale,this.uiScale,this.Sy(i),this.qi);return this.By(s),s}addSlice(t,i){const s=new wd(this.$m,this.tp,this.sp,this,this.Mg,this.Km,this.qi,this.us.es);return this.$m+=1,s.setName(t),s.setValue(i),s.es.rs.bs(this.Jm),s.es.ns.bs(this.Qm),this.Nm.push(s),this.us.xs(),s.setHighlightOnHover(this.Ym),s.onMouseMove((()=>{this.getCursorMode()&&this.us.xs()})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Nm}setHeadWidth(t){return this.HT=t,this.us.xs(),this}getHeadWidth(){return this.HT}setNeckWidth(t){return this.XT=t,this.us.xs(),this}getNeckWidth(){return this.XT}setSliceGap(t){return this.$T=Math.min(Math.max(t,0),20),this.us.xs(),this}setSliceMode(t){return this.jT=t,this.us.xs(),this}getFunnelSliceMode(){return this.jT}setLUT(t){return this.Jd=t,this.us.xs(),this}setSliceFillStyle(t){return this.Um=t,this.us.xs(),this}getSliceFillStyle(){return this.Um}setSliceStrokeStyle(t){return this.Wm="function"==typeof t?t(this.Wm):t,this.us.xs(),this}getSliceStrokeStyle(){return this.Wm}setSliceEffect(t){return this.Qm=t,this.Nm.forEach((i=>i.es.ns.bs(t))),this.us.xs(),this}getSliceEffect(){return this.Qm}setSliceSorter(t){return this.Gm=t,this.Nm=this.Nm.sort(this.Gm),this.us.xs(),this}getSliceSorter(){return this.Gm}setLabelFillStyle(t){return this.Xm="function"==typeof t?t(this.Xm):t,this.us.xs(),this}getLabelFillStyle(){return this.Xm}setLabelFont(t){return this.Hm="function"==typeof t?t(this.Hm):t,this.us.xs(),this}getLabelFont(){return this.Hm}setLabelEffect(t){return this.Jm=t,this.Nm.forEach((i=>i.es.rs.bs(t))),this.us.xs(),this}getLabelEffect(){return this.Jm}setLabelFormatter(t){return this.np=t,this.us.xs(),this}getLabelFormatter(){return this.np}setSliceHighlightOnHover(t){return this.Ym=t,this.Nm.forEach((i=>i.setHighlightOnHover(t))),this}Ee(t){super.Ee(t),Ga.Hy(this.wh,this.Vy),super.Ry();const i=Ga.Yy(this.wh,this.Vy),s=n(this.Mg.x.getInnerInterval()-(this.Fa.left+this.Fa.right),this.Mg.y.getInnerInterval()-(this.Fa.bottom+this.Fa.top+i)),e=n(this.Fa.left+s.x/2,this.Fa.bottom+s.y/2);this.Nm=this.Nm.sort(this.Gm);for(let t=0,{length:i}=this.Nm;t<i;t+=1)this.rp(this.Nm[t],t);const h=this.Nm.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/r:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.hh.vr(this.np(i,o[t])).Vs()}o.push(r),this.hp.Ee(!1,this.Nm,((t,i,s)=>{const e=o[h.indexOf(t)]||0,r=this.us.Go(i);return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.us.ft,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.us.ft},slice:t,category:t.getName(),value:t.getValue(),relativeValue:e}})),this.op(h,o,e,s)}rp(t,i){t.setStyle(this.Jd?new W({color:this.Jd.getColors(t.getAnimatedValue())}):this.Um(i,t),this.Wm,this.Xm,this.Hm)}qm(){this.Nm=this.Nm.sort(this.Gm),this.us.xs()}nf(){return this.Nm}dispose(){return this.Nm.slice().forEach((t=>t.dispose())),this.hp.W(),this.tp.W(),this.sp.W(),super.dispose()}}const Id=(t,i,s)=>[[i.slice],[{text:i.value.toString(),font:{weight:"bold"}}]],Pd=(t,i,s)=>{const e=t.Fl();if(e.length>0){let t;const h=(e[1].y-e[0].y)/2+e[0].y;return t=i===Ed.Left?(e[0].x-e[1].x)/2+e[1].x-s:(e[2].x-(4===e.length?e[3].x:e[1].x))/2+(4===e.length?e[3].x:e[1].x)+s,{x:t,y:h}}},Dd=t=>{const i=t.Fl();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class Bd extends Fd{constructor(){super(...arguments),this.np=dl.NamePlusValue,this.ZT=10,this.QT=Ed.Left,this.JT=ul.LabelsOnSides,this.ap=[],this.dp=this.qi.funnelChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.dp=t;for(let t=0;t<this.ap.length;t+=1)this.ap[t].We(this.dp);return this.us.xs(),this}getLabelConnectorStyle(){return this.dp}setLabelConnectorGap(t){return this.ZT=t,this.us.xs(),this}getLabelConnectorGap(){return this.ZT}setLabelSide(t){return this.QT=t,this.us.xs(),this}getLabelSide(){return this.QT}op(t,i,s,e){const h=e.x+this.Fa.left+this.Fa.right,r=e.y+this.Fa.top+this.Fa.bottom<250||h<250,o=this.ZT;let a,l=0;if(!r)for(let i=0;i<t.length;i+=1)l=Math.max(l,t[i].hh.ni().x);a=r?h/2:this.QT===Ed.Right?(this.Fa.left+(h-(this.Fa.right+l)))/2:(this.Fa.left+l+(h-this.Fa.right))/2;const u=e.x-l,c=n(u,e.y);if(Td(t,this.HT,this.XT,c,this.Fa,this.$T,this.jT,a),r)return t.forEach((t=>t.hh.setVisible(!1))),void this.ap.forEach((t=>t.setVisible(!1)));this.KT(t,this.QT===Ed.Left?-1:1,-1,s,e);for(let t=0;t<this.ap.length;t+=1)this.ap[t].setVisible(!1);for(let i=0;i<t.length;i+=1)t[i].getVisible()&&this.fp(this.qT(t[i],-1,s,o))}getMinimumSize(){return n(500,300)}KT(t,i,s,e,h){if(0===t.length)return;const r=e.x+i*h.x*.5,o=1===s?Math.max:Math.min;let a;for(let e=0;e<t.length;e+=1){const h=t[e];if(0===h.xT.Fl().length)h.hh.setVisible(!1);else{let t;h.hh.setVisible(!0),a&&(t=a.hh.Ga().y+s*(a.hh.ni().y+10));const e=(Pd(h.xT,this.QT,0)||n(0,0)).y,l=void 0===t?e:o(e,t);h.hh.ze(n(r,l)).Ya(i).Xa(0),a=h}}}qT(t,i,s,e){const h=t.xT,r=t.hh,o=Pd(h,this.QT,e);if(o){const t={x:Es(this.QT===Ed.Left?r.Ga().x-i*(e+r.ni().x):r.Ga().x+i*(e+r.ni().x),o,s).x,y:zs(r.Ga().y,o,s).y};return[o,t,n(this.QT===Ed.Left?r.Ga().x-i*(e+r.ni().x):r.Ga().x+i*(e+r.ni().x),t.y)]}}fp(t){if(t){let i;for(let t=0;t<this.ap.length;t+=1)if(!this.ap[t].getVisible()){i=this.ap[t].setVisible(!0);break}void 0===i&&(i=this.sp.Ap(this.Mg,void 0,[xl.InternalUI]).We(this.dp),this.ap.push(i)),i.Vt().ml(t)}}}class Ld extends Fd{constructor(){super(...arguments),this.np=dl.Name,this.JT=ul.LabelsInsideSlices}op(t,i,s,e){const h=this.Fa.left+e.x/2;Td(t,this.HT,this.XT,e,this.Fa,this.$T,this.jT,h);for(let i=0;i<t.length;i+=1){const s=t[i],e=s.xT,h=s.hh,r=Dd(e);r&&h.ze(r).Ya(0).Xa(0)}}getMinimumSize(){return n(200,200)}}const Rd={LabelsOnSides:Bd,LabelsInsideSlices:Ld};var Ed,zd;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(Ed||(Ed={}));class Vd extends fl{}class Od extends Vd{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.ws="Slice",this.S=0,this.Cm=!1,this.YT=O,this.Tm=O,this.Fm=this.S,this.Dm=K((()=>this.chart.us.xs())),this.Lm=()=>{this.Rm=void 0},this.index=t,this.chart=e,this.scale=h,this.Ki=r,this.xT=i.dc(h,Or.Simple).cs(this.getHighlight()),this.fs(this.xT),this.hh=s.Ur(h).cs(this.getHighlight()),this.fs(this.hh,{isText:!0})}setValue(t){return this.chart.getAnimationsEnabled()?this.getVisible()&&this.Om(this.Fm,t):this.Fm=t,this.S=t,this.chart.us.xs(),this}getValue(){return this.S}setVisible(t){return!1===t?this.chart.getAnimationsEnabled()&&this.Fm>0?(this.Rm&&(this.Rm.finish(!1),this.Rm=void 0),this.Om(this.Fm,0,(()=>super.setVisible(!1)))):(this.Fm=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.Rm&&(this.Rm.finish(!1),this.Rm=void 0),super.setVisible(!0),this.Om(this.Fm,this.S)):(this.Fm=this.S,super.setVisible(!0)),this}Om(t,i,s){this.Rm=this.Dm(300,Q.ease)([[t,i]],(([t])=>{this.Fm=t,this.chart.us.xs()})),this.Rm.onEveryAnimationEnd(this.Lm),s&&this.Rm.onAnimationEnd(s)}setStyle(t,i,s,e){this.YT=t,this.Tm=s,this.xT.Le(this.YT).Be(i),this.hh.Le(this.Tm).tr(e);for(let t=0;t<this.Qi.length;t+=1)this.styleLegendEntry(this.Qi[t])}getAnimatedValue(){return this.Fm}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.YT,stroke:this.xT.vo()})}}!function(t){t[t.VariableHeight=0]="VariableHeight",t[t.VariableWidth=1]="VariableWidth"}(zd||(zd={}));const Nd=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},Gd=(t,i,s,e,h,r=0,n=zd.VariableHeight,o)=>{i=Nd(i,e.x),s=Nd(s,e.x);const a=t.length;let l=0,u=0;l=t.reduce(((t,i)=>t+i.getAnimatedValue()),0);let c={x:o-i/2,y:e.y+h.bottom},d={x:o+i/2,y:e.y+h.bottom},f={x:0,y:h.bottom},A={x:0,y:h.bottom},g=0,y=0;if(r)for(let i=0;i<t.length;i+=1){const s=10;y+=t[i].getAnimatedValue();const o=n===zd.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-y/l*e.y;if(n===zd.VariableWidth){r=o-r<s?Math.max(20,o-s):r;break}0!==g&&g-o-r<s&&(r=Math.max(0,g-o-s)),g=o}const m=(i-s)/2/e.y;for(let g=0;g<a;g+=1){const y=t[g];u+=y.getAnimatedValue();const p=n===zd.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-u/l*e.y;let v=0;g>0&&(c={x:f.x+m*r,y:f.y-r},d={x:A.x-m*r,y:A.y-r}),v=(i+u/l*(s-i))/2,f={x:o-v,y:parseInt(`${n===zd.VariableWidth?c.y-p:p}`,10)},A={x:o+v,y:parseInt(`${n===zd.VariableWidth?d.y-p:p}`,10)},d.x>=c.x&&A.x>=f.x&&y.xT.Tl([f,c,d,A])}};class Ud extends Na{constructor(t,i,s,e,h,r,n){super(t,i,s,i.zy("pyramidChart bg",0),e,i.us.qi.pyramidChartBackgroundFillStyle,i.us.qi.pyramidChartBackgroundStrokeStyle,i.us.qi.pyramidChartTitleFont,i.us.qi.pyramidChartTitleFillStyle,r),this.Nm=[],this.Gm=cl.None,this.Um=this.qi.pyramidChartSliceFillStylePalette,this.Wm=this.qi.pyramidChartSliceStrokeStyle,this.Ym=!0,this.Hm=this.qi.pyramidChartSliceLabelFont,this.Xm=this.qi.pyramidChartSliceLabelFillStyle,this.$m=0,this.HT=0,this.XT=80,this.$T=0,this.jT=zd.VariableHeight,this.Qm=!0,this.Km=t=>{const i=this.Nm.indexOf(t);i>=0&&(this.Nm.splice(i,1),this.qm())},this.us.Qn(Yo.vf),this.Jm=this.qi.effectsText,this.tp=i.ip("pyramidChart bottom",0),this.sp=i.ip("pyramidChart top",1),this.wh.vr("Pyramid Chart");const o=i.ep(),a=qt(n?n.cursorBuilder:void 0,rl);this.hp=Ya(this,o,a.wm(o,this.uiScale,this.uiScale,Zt,this.qi),void 0,"show-pointed",Wd,(()=>0)),this.Ey(h,this.Mg),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled))}setCursor(t){return this.hp.setCursor(t),this}getCursor(){return this.hp.getCursor()}setCursorMode(t){return this.hp.setCursorMode(t),this}getCursorMode(){return this.hp.getCursorMode()}setCustomCursor(t){return this.hp.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.hp.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.hp.offCursorTargetChanged(t)}setCursorFormatting(t){return this.hp.setCursorFormatting(t),this}getCursorFormatting(){return this.hp.getCursorFormatting()}addCursor(t=rl){const i=this.wy(),s=t.wm(i,this.uiScale,this.uiScale,this.Sy(i),this.qi);return this.By(s),s}addSlice(t,i){const s=new Od(this.$m,this.tp,this.sp,this,this.Mg,this.Km,this.qi,this.us.es);return this.$m+=1,s.setName(t),s.setValue(i),s.es.rs.bs(this.Jm),s.es.ns.bs(this.Qm),this.Nm.push(s),this.us.xs(),s.onMouseMove((()=>{this.getCursorMode()&&this.us.xs()})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Nm}setNeckWidth(t){return this.XT=t,this.us.xs(),this}getNeckWidth(){return this.XT}setSliceGap(t){return this.$T=Math.min(Math.max(t,0),20),this.us.xs(),this}setSliceMode(t){return this.jT=t,this.us.xs(),this}getPyramidSliceMode(){return this.jT}setLUT(t){return this.Jd=t,this.us.xs(),this}setSliceFillStyle(t){return this.Um=t,this.us.xs(),this}getSliceFillStyle(){return this.Um}setSliceStrokeStyle(t){return this.Wm="function"==typeof t?t(this.Wm):t,this.us.xs(),this}getSliceStrokeStyle(){return this.Wm}setSliceEffect(t){return this.Qm=t,this.Nm.forEach((i=>i.es.ns.bs(t))),this.us.xs(),this}getSliceEffect(){return this.Qm}setSliceSorter(t){return this.Gm=t,this.Nm=this.Nm.sort(this.Gm),this.us.xs(),this}getSliceSorter(){return this.Gm}setLabelFillStyle(t){return this.Xm="function"==typeof t?t(this.Xm):t,this.us.xs(),this}getLabelFillStyle(){return this.Xm}setLabelFont(t){return this.Hm="function"==typeof t?t(this.Hm):t,this.us.xs(),this}getLabelFont(){return this.Hm}setLabelEffect(t){return this.Jm=t,this.Nm.forEach((i=>i.es.rs.bs(t))),this.us.xs(),this}getLabelEffect(){return this.Jm}setLabelFormatter(t){return this.np=t,this.us.xs(),this}getLabelFormatter(){return this.np}setSliceHighlightOnHover(t){return this.Ym=t,this.Nm.forEach((i=>i.setHighlightOnHover(t))),this}Ee(t){super.Ee(t),Ga.Hy(this.wh,this.Vy),super.Ry();const i=Ga.Yy(this.wh,this.Vy),s=n(this.Mg.x.getInnerInterval()-(this.Fa.left+this.Fa.right),this.Mg.y.getInnerInterval()-(this.Fa.bottom+this.Fa.top+i)),e=n(this.Fa.left+s.x/2,this.Fa.bottom+s.y/2);this.Nm=this.Nm.sort(this.Gm);for(let t=0,{length:i}=this.Nm;t<i;t+=1)this.rp(this.Nm[t],t);const h=this.Nm.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/r:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.hh.vr(this.np(i,o[t])).Vs()}o.push(r),this.hp.Ee(!1,this.Nm,((t,i,s)=>{const e=o[h.indexOf(t)]||0,r=this.us.Go(i);return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.us.ft,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.us.ft},slice:t,category:t.getName(),value:t.getValue(),relativeValue:e}})),this.op(h,o,e,s)}rp(t,i){t.setStyle(this.Jd?new W({color:this.Jd.getColors(t.getAnimatedValue())}):this.Um(i,t),this.Wm,this.Xm,this.Hm)}qm(){this.Nm=this.Nm.sort(this.Gm),this.us.xs()}nf(){return this.Nm}dispose(){return this.Nm.slice().forEach((t=>t.dispose())),this.hp.W(),this.tp.W(),this.sp.W(),super.dispose()}}const Wd=(t,i,s)=>[[i.slice],[{text:i.value.toString(),font:{weight:"bold"}}]],Yd=(t,i,s)=>{const e=t.Fl();if(e.length>0){let t;const h=(e[1].y-e[0].y)/2+e[0].y;return t=i===Zd.Left?(e[0].x-e[1].x)/2+e[1].x-s:(e[2].x-(4===e.length?e[3].x:e[1].x))/2+(4===e.length?e[3].x:e[1].x)+s,{x:t,y:h}}},Hd=t=>{const i=t.Fl();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class Xd extends Ud{constructor(){super(...arguments),this.np=dl.NamePlusValue,this.ZT=10,this.QT=Zd.Left,this.JT=ul.LabelsOnSides,this.ap=[],this.dp=this.qi.pyramidChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.dp=t;for(let t=0;t<this.ap.length;t+=1)this.ap[t].We(this.dp);return this.us.xs(),this}getLabelConnectorStyle(){return this.dp}setLabelConnectorGap(t){return this.ZT=t,this.us.xs(),this}getLabelConnectorGap(){return this.ZT}setLabelSide(t){return this.QT=t,this.us.xs(),this}getLabelSide(){return this.QT}op(t,i,s,e){const h=e.x+this.Fa.left+this.Fa.right,r=e.y+this.Fa.top+this.Fa.bottom<250||h<250,o=this.ZT;let a,l=0;if(!r)for(let i=0;i<t.length;i+=1)l=Math.max(l,t[i].hh.ni().x);a=r?h/2:this.QT===Zd.Right?(this.Fa.left+(h-(this.Fa.right+l)))/2:(this.Fa.left+l+(h-this.Fa.right))/2;const u=e.x-l,c=n(u,e.y);if(Gd(t,this.HT,this.XT,c,this.Fa,this.$T,this.jT,a),r)return t.forEach((t=>t.hh.setVisible(!1))),void this.ap.forEach((t=>t.setVisible(!1)));this.KT(t,this.QT===Zd.Left?-1:1,-1,s,e);for(let t=0;t<this.ap.length;t+=1)this.ap[t].setVisible(!1);for(let i=0;i<t.length;i+=1)if(t[i].getVisible()){const e=this.qT(t[i],-1,s,o);e&&this.fp(e)}}getMinimumSize(){return n(500,300)}KT(t,i,s,e,h){if(0===t.length)return;const r=e.x+i*h.x*.5,o=1===s?Math.max:Math.min;let a;for(let e=0;e<t.length;e+=1){const h=t[e];let l;0===h.xT.Fl().length?h.hh.setVisible(!1):h.hh.setVisible(!0),a&&(l=a.hh.Ga().y+s*(a.hh.ni().y+10));const u=Yd(h.xT,this.QT,0);if(u){const t=u.y,s=void 0===l?t:o(t,l);h.hh.ze(n(r,s)).Ya(i).Xa(0)}a=h}}qT(t,i,s,e){const h=t.xT,r=t.hh,o=Yd(h,this.QT,e);if(o){const t={x:Es(this.QT===Zd.Left?r.Ga().x-i*(e+r.ni().x):r.Ga().x+i*(e+r.ni().x),o,s).x,y:zs(r.Ga().y,o,s).y};return[o,t,n(this.QT===Zd.Left?r.Ga().x-i*(e+r.ni().x):r.Ga().x+i*(e+r.ni().x),t.y)]}}fp(t){let i;for(let t=0;t<this.ap.length;t+=1)if(!this.ap[t].getVisible()){i=this.ap[t].setVisible(!0);break}void 0===i&&(i=this.sp.Ap(this.Mg,void 0,[xl.InternalUI]).We(this.dp),this.ap.push(i)),i.Vt().ml(t)}}class $d extends Ud{constructor(){super(...arguments),this.np=dl.Name,this.JT=ul.LabelsInsideSlices}op(t,i,s,e){const h=this.Fa.left+e.x/2;Gd(t,this.HT,this.XT,e,this.Fa,this.$T,this.jT,h);for(let i=0;i<t.length;i+=1){const s=t[i].xT,e=t[i].hh,h=Hd(s);h&&e.ze(h).Ya(0).Xa(0)}}getMinimumSize(){return n(200,200)}}const jd={LabelsOnSides:Xd,LabelsInsideSlices:$d};var Zd;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(Zd||(Zd={}));const Qd=(t,i,s,e,h,r)=>(t.alignmentX=(h+Math.PI/2)%(2*Math.PI)<=Math.PI?-1:1,t.alignmentY=h%(2*Math.PI)<=Math.PI?-1:1,t.paddingX=Math.cos(h)*r,t.paddingY=Math.sin(h)*r,t),Jd=(t,i,s,e,h,r,n,o)=>{if(0===i)return t.paddingX=o,t.alignmentX=-1,t};var Kd;!function(t){t[t.Normal=0]="Normal",t[t.Circle=1]="Circle"}(Kd||(Kd={}));class qd{constructor(t,i,e,h,r,n,o,a){this.L=new s,this.tF=t,this.Wr=i,this.scale=e,this.chart=h,this.tag=r,this.axisScale=n,this.iF=o,this.sF=a,this.eF=this.tF.Ye(this.scale).setMouseInteractions(!1),this.hF=this.Wr.Ur(this.scale).vr(this.tag).setMouseInteractions(!1),this.rF=this.iF(this,this.tF.Ap(this.scale,void 0,[xl.InternalUI])).We(this.chart.getNibStyle()),this.sF.As([this.hF])}op(t,i,s,e,h,r,o){const a=i.length,l=i[s>0?s-1:a-1],u=i[s],c=i[s<a-1?s+1:0],d=this.chart.getNibLength();this.eF.Xe(t).He(u).We(this.chart.getAxisStyle()),this.rF.Vt().ml(r===Kd.Normal?[ms(u,l,Jt(.5*d/Ts(Ps(l,u)),0,1)),u,ms(u,c,Jt(.5*d/Ts(Ps(c,u)),0,1))]:((t,i,s,e,h=2)=>{const r=e/s,o=[];for(let a=-e/2;a<=e/2;a+=h){const h=r*(a/e)+i,l=n(t.x+Math.cos(h)*s,t.y+Math.sin(h)*s);o.push(l)}return o})(t,e,h,d)),o?this.hF.setVisible(!0).ze(Is(u,n(o.paddingX,o.paddingY))).Ya(o.alignmentX).Xa(o.alignmentY):this.hF.setVisible(!1)}getLabelSize(){return this.hF.tr(this.chart.getAxisLabelFont()).Le(this.chart.getAxisLabelStyle()).Vs().ni()}dispose(){this.eF&&this.eF.dispose(),this.hF&&this.hF.dispose(),this.rF&&this.rF.dispose()}}class tf extends Iu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,a,l,c),this.ws="Spider Series",this.ku=new Map,this.Xi=ge.onHover,this.aM=8,this.Ca=0,this.nF=(()=>{const t=K((()=>{}));let i;return(s,e,h,r)=>{const n=null==r?void 0:r.onStart,o=null==r?void 0:r.onCompleted,a=(null==r?void 0:r.easing)||Q.ease,l=(null==r?void 0:r.durationMs)||1e3;let u;if(i)if(0===i.nextAnimations.length){const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);u=t}else{s=i.nextAnimations.pop().values[0][0];const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);u=t}else u=t(l,a)([[s,e]],(([t])=>{h(t)})),i=u;u.onAnimationEnd((()=>{i=void 0})),n&&u.onAnimationStart(n),o&&u.onAnimationEnd(o)}})(),this.oF={},this.aF={},this.Pm=this.getVisible(),this.lF=1,this.uF=((t,i)=>{const s=K((()=>{}));let e,h,r=1;return(n,o,a)=>{if(n===h)return;h=n;const l=(null==a?void 0:a.easing)||Q.ease,u=(null==a?void 0:a.durationMs)||1e3;e&&(e.finish(!1),e=void 0),!1===n?o&&r?(e=s(u,l)([[r,0]],(([i])=>{r=i,t(r)})),e.onAnimationEnd((()=>{e=void 0,i(!1)}))):(r=0,i(!1)):o?(i(!0),e=s(u,l)([[r,1]],(([i])=>{r=i,t(r)})),e.onAnimationEnd((()=>{e=void 0}))):(r=1,i(!0))}})((t=>{this.lF=t,this.Ls.us.xs()}),(t=>{super.setVisible(t)})),this.chart=t,this.Ls=i,this.lM=e,this.cF=h,this.Tb=r,this.dF=n,this.fF=o,this.scale=s,this.AF=Ri(l.spiderSeriesFillStyle,u),this.gF=Ri(l.spiderSeriesStrokeStyle,u),this.yF=Ri(l.spiderSeriesPointFillStyle,u)}Ji(t,i){const s=this.fF(i);if(void 0!==s&&this.ku.has(s.tag)){const t=this.ku.get(s.tag),i=this.dF(s.tag,t);return{cursorPosition:{pointMarker:i,pointMarkerScale:this.scale,resultTable:i,resultTableScale:this.scale},series:this,axis:s.tag,value:t}}}fv(){return this.yv&&this.ku.size>0&&this.getVisible()}addPoints(...t){this.ku.size>0&&this.chart.us.Qn(Yo.Pf),t=t.filter((t=>void 0!==t.axis));for(let i=0;i<t.length;i+=1)this.cF(t[i].axis);if(this.chart.getAnimationsEnabled()&&void 0!==this.oF){const i=new Map;let s;t.forEach((t=>i.set(t.axis,t.value))),this.nF(0,1,(t=>{i.forEach(((i,e)=>{const h=(null==s?void 0:s.get(e))||0;this.ku.set(e,h+t*(i-h)),this.Ls.us.xs()}))}),{easing:this.oF.easing,durationMs:this.oF.durationMs,onStart:()=>{s=new Map(this.ku)}})}else for(let i=0;i<t.length;i+=1){const s=t[i].axis;this.ku.set(s,t[i].value)}return this.Ls.xs(),this}getValue(t,i=!1){const s=this.ku.get(t),e=this.chart.getOriginValue();if(void 0!==s)return i?e+this.lF*(s-e):s}setAnimationAddPoints(t,i){return this.oF=t?{easing:t,durationMs:i}:void 0,this.Ls.xs(),this}setVisibleStateChangedAnimation(t,i){return this.aF=t?{easing:t,durationMs:i}:void 0,this.Ls.xs(),this}setFillStyle(t){return this.AF="function"==typeof t?t(this.AF):t,this.xT&&(this.xT.Le(this.AF),this.Ls.xs()),this}getFillStyle(){return this.AF}setStrokeStyle(t){return this.gF="function"==typeof t?t(this.gF):t,this.xT&&(this.xT.Be(this.gF),this.Ls.xs()),this}getStrokeStyle(){return this.gF}setPointFillStyle(t){return this.yF="function"==typeof t?t(this.yF):t,this.uM&&(this.uM.Le(this.yF),this.Ls.xs()),this}getPointFillStyle(){return this.yF}setPointSize(t){return this.aM=t,this.uM&&this.uM.tt(t),this}getPointSize(){return this.aM}getPointShape(){return this.lM}setPointRotation(t){return this.Ca=t,this.uM&&this.uM.ir(t),this.Ls.xs(),this}getPointRotation(){return this.Ca}Ee(){if(super.Ee(),!this.$i){const t=new Array(this.Tb.length),i=this.chart.getOriginValue();for(let s=0;s<this.Tb.length;s+=1){const e=this.ku.get(this.Tb[s].tag);t[s]=void 0!==e?this.dF(this.Tb[s].tag,i+this.lF*(e-i)):this.dF(this.Tb[s].tag,i)}xi(t),t.length>=3&&(this.xT||(this.xT=this.Ls.dc(this.scale,Or.Simple).Be(this.gF).Le(this.AF).cs(this.getHighlight()),this.fs(this.xT)),this.xT.Tl(t),this.uM||(this.uM=this.Ls.Ov(this.scale).tt(this.aM).cl(this.lM).ir(this.Ca).Le(this.yF).cs(this.getHighlight()),this.fs(this.uM)),this.uM.Vt().ml(t))}}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.AF,stroke:this.gF})}Ds(){return this._s||this.lM}mF(){for(let t=0;t<this.Qi.length;t+=1)Pi(this.Qi[t],this.qi,!1,{fill:this.AF,stroke:this.gF})}Ve(t,i){return t.cs(i),this.Ls.xs(),this}setVisible(t){var i,s;return this.Pm=t,this.uF(t,this.chart.getAnimationsEnabled()&&void 0!==this.aF,{easing:null===(i=this.aF)||void 0===i?void 0:i.easing,durationMs:null===(s=this.aF)||void 0===s?void 0:s.durationMs}),this}}const sf=(t,i)=>{const s=Math.PI/2-2*t*Math.PI/i;return s>=0?s:s+2*Math.PI},ef=t=>vs(t.hF.eh()),hf=t=>vs(t.eh()),rf=(t,i,s,e)=>t.mu(0).ze(s).fu(90).He(-270).pu(i===Kd.Circle?void 0:e.length),nf={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},of={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},af=()=>{of.alignmentX=0,of.alignmentY=0,of.paddingX=0,of.paddingY=0};class lf extends $l{constructor(t,i,s,e,h,r,o){super(t,i,s,i.zy("spiderChart bg",0),e,i.us.qi.spiderChartBackgroundFillStyle,i.us.qi.spiderChartBackgroundStrokeStyle,i.us.qi.spiderChartTitleFont,i.us.qi.spiderChartTitleFillStyle,o),this.Fa=A(20,20,20,20),this.axisScale=yt.d1({scale1DConstructor:te,dimension:"x"}).K(0,1),this.Tb=[],this.pF=[],this.vF=[],this.SF=ch.expansion,this.bF=!0,this.xF=Jd,this.MF=Qd,this.Wo=!0,this._F=Kd.Normal,this.wF=4,this.CF=this.qi.spiderChartWebStyle,this.kF=this.qi.spiderChartScaleLabelFillStyle,this.TF=this.qi.spiderChartScaleLabelFont,this.FF=5,this.IF=this.qi.spiderChartAxisLabelFillStyle,this.PF=this.qi.spiderChartAxisLabelFont,this.DF=5,this.BF=this.qi.spiderChartAxisStrokeStyle,this.LF=this.qi.spiderChartAxisNibStrokeStyle,this.Yf=10,this.RF=A(),this.hasAxis=t=>this.Tb.reduce(((i,s)=>i||s.tag===t),!1),this.formatValue=t=>this.axisScale.Pi(t,Ks.Numeric),this.EF=()=>{const t=this.Tb.map(ef).concat(this.vF.map(hf));return cs(t)},this.zF=()=>this.VF.ld(this.Mg).setMouseInteractions(!1),this.OF=t=>t.dispose(),this.NF=()=>this.RA.Ur(this.Mg).setMouseInteractions(!1),this.GF=t=>t.dispose(),this.UF=t=>this.formatValue(this.axisScale.getInnerStart()+t*(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart())),this.WF=(t,i)=>{let s,e;const h=()=>{void 0!==this.YF&&this.YF.finish(),s=c(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),e=this.SF,this.SF=void 0},r=(i,e,h,r,o)=>{const a=n(h.x-e.x,e.y-h.y),l=this.Tb.findIndex((i=>i===t));if(l>=0&&void 0!==s){const i=sf(l,this.Tb.length),e=n(Math.cos(i),Math.sin(i)),h=a.x*e.x+a.y*e.y,r=Ts(Ps(t.eF.Fi(),t.eF.ki())),u=s.min+(s.max-s.min)*Math.max(1+h/r,.01);this.axisScale.K(s.min,u),mi(o),this.us.xs()}},o=()=>{if(s=void 0,void 0!==e)if(this.gh){const t=c(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),i=this.HF(),s=e;if(void 0!==i){const e=s.start(t.min,t.max,i.min,i.max),h=s.end(t.min,t.max,i.min,i.max);this.YF=this.vy.us.fn(300,Q.ease)([[0,1]],(([i])=>{this.axisScale.K(t.min+i*(e-t.min),t.max+i*(h-t.max))})),this.YF.onAnimationEnd((()=>{this.YF=void 0,this.SF=s}))}else this.SF=e}else this.SF=e;e=void 0};i.setMouseEnterEventHandler(this.XF).setMouseLeaveEventHandler(this.$F).setMouseDragStartEventHandler(h).setMouseDragEventHandler(((t,i,s,e,h)=>r(0,n(i.clientX,i.clientY),e,0,i))).setMouseDragStopEventHandler(o);const a=ve(new be(((t,i,s)=>{this.XF(t),h(),mi(s)}),r,((t,i,s,e)=>{this.$F(t),o(),mi(e)})));return i.setTouchStartEventHandler(a.onTouchStart).setTouchMoveEventHandler(a.onTouchMove).setTouchEndEventHandler(a.onTouchEnd)},this.jF=t=>{this.bF&&!this.hasAxis(t)&&this.addAxis(t)},this.dF=(t,i)=>{for(const s of this.Tb)if(s.tag===t){const t=Math.max(Math.min((i-this.axisScale.getInnerStart())/(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart()),1),0);return ms(s.eF.Fi(),s.eF.ki(),t)}},this.fF=t=>{if(0===this.Tb.length)return;const i=Ps(this.translateCoordinate(t,this.coordsRelative),this.Tb[0].eF.Fi()),s=Math.atan2(i.y,i.x);let e,h=es;for(const t of this.Tb){const i=Ps(t.eF.ki(),t.eF.Fi()),r=Math.atan2(i.y,i.x),n=Math.abs(s-r);n<h&&(e=t,h=n)}return e},this.XF=t=>{this.Wo&&(t.We(this.LF),this.us.xs())},this.$F=t=>{t.We(this.LF),this.us.xs()},this.us.Qn(Yo.bf),this.Nk=i.kb("spiderChart series bg",0),this.VF=i.ip("spiderChart web shapes",0),this.ZF=i.ip("spiderChart axis bg",1),this.sx=i.ip("spiderChart plotting",2),this.RA=i.ip("spiderChart fg",3),this.sF=this.es.Dg().bs(this.qi.effectsText),this.wh.vr("Spider Chart"),this.Hv=this.Nk.ld(this.Mg).Le(this.qi.spiderChartSeriesBackgroundFillStyle).Be(dt).fu(90).He(-270).mu(0),this.Xv=this.Nk.ld(this.Mg).Le(O).Be(this.qi.spiderChartSeriesBackgroundStrokeStyle).fu(90).He(-270).mu(0),super.Yv(this.Hv,this.Xv);const a=i.ep(),l=qt(r?r.cursorBuilder:void 0,el);this.hp=Ya(this,a,l.wm(a,this.uiScale,this.uiScale,Zt,this.qi),this,"show-pointed",uf,(()=>0)),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled)),this.Ey(h,this.Mg)}getSeries(){return this.Nv}setCursor(t){return this.hp.setCursor(t),this}getCursor(){return this.hp.getCursor()}setCursorMode(t){return this.hp.setCursorMode(t),this}getCursorMode(){return this.hp.getCursorMode()}setCustomCursor(t){return this.hp.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.hp.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.hp.offCursorTargetChanged(t)}setCursorFormatting(t){return this.hp.setCursorFormatting(t),this}getCursorFormatting(){return this.hp.getCursorFormatting()}addCursor(t=el){const i=this.wy(),s=t.wm(i,this.uiScale,this.uiScale,this.Sy(i),this.qi);return this.By(s),s}addAxis(t){if("string"==typeof t){if(!this.hasAxis(t)){const i=new qd(this.ZF,this.RA,this.Mg,this,t,this.axisScale,this.WF,this.sF);this.Tb.push(i)}}else t&&this.Tb.push(t);return this.sF.As(this.Tb.map((t=>t.hF))),this.us.xs(),this}addSeries(t){const i=void 0!==(null==t?void 0:t.pointShape)?t.pointShape:ar.Circle,s=void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,e=new tf(this,this.sx,this.Mg,i,this.jF,this.Tb,this.dF,this.fF,this.Uv,this.qi,s,this.us.es);return this.$v(e),e}getSeriesCount(){return this.Nv.length}setWebMode(t){return this._F=t,this.us.xs(),this}getWebMode(){return this._F}setWebCount(t){return this.wF=t,this.us.xs(),this}getWebCount(){return this.wF}setWebStyle(t){return this.CF="function"==typeof t?t(this.CF):t,this.us.xs(),this}getWebStyle(){return this.CF}setScaleLabelStyle(t){return this.kF="function"==typeof t?t(this.kF):t,this.us.xs(),this}getScaleLabelStyle(){return this.kF}setScaleLabelFont(t){return this.TF="function"==typeof t?t(this.TF):t,this.us.xs(),this}getScaleLabelFont(){return this.TF}setScaleLabelPadding(t){return this.FF=t,this.us.xs(),this}getScaleLabelPadding(){return this.FF}setScaleLabelStrategy(t){return this.xF=t,this.us.xs(),this}setScaleLabelFormatter(t){return this.formatValue=t,this.us.xs(),this}setAxisLabelStyle(t){return this.IF="function"==typeof t?t(this.IF):t,this.us.xs(),this}getAxisLabelStyle(){return this.IF}setAxisLabelFont(t){return this.PF="function"==typeof t?t(this.PF):t,this.us.xs(),this}getAxisLabelFont(){return this.PF}setAxisLabelEffect(t){return this.sF.bs(t),this.us.xs(),this}getAxisLabelEffect(){return this.sF.Ms()}setAxisLabelPadding(t){return this.DF=t,this.us.xs(),this}getAxisLabelPadding(){return this.DF}setAxisLabelStrategy(t){return this.MF=t,this.us.xs(),this}setAxisStyle(t){return this.BF="function"==typeof t?t(this.BF):t,this.us.xs(),this}getAxisStyle(){return this.BF}setNibStyle(t){return this.LF="function"==typeof t?t(this.LF):t,this.us.xs(),this}getNibStyle(){return this.LF}setNibLength(t){return this.Yf=t,this.us.xs(),this}getNibLength(){return this.Yf}setAutoAxis(t){return this.bF=t,this}getAutoAxis(){return this.bF}setMouseInteractions(t){return this.Wo=t,this}getMouseInteractions(){return this.Wo}setAxisScrollStrategy(t){return this.SF=t,this.us.xs(),this}getAxisScrollStrategy(){return this.SF}setAxisInterval(t,i=0){return this.axisScale.K(i,t),this.us.xs(),this}getOriginValue(){return this.axisScale.getInnerStart()}getEdgeValue(){return this.axisScale.getInnerEnd()}Ee(t){super.Ee(t),Ga.Hy(this.wh,this.Vy);const i=this.Tb.length,s=Ga.Yy(this.wh,this.Vy),e=n(this.Mg.x.getInnerInterval()-(this.Fa.left+this.Fa.right),this.Mg.y.getInnerInterval()-(this.Fa.bottom+this.Fa.top+s)),h=((t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}))(0,0,0,0);if(void 0!==this.MF){const t=Math.min(e.x,e.y)/2;for(let s=0;s<i;s+=1){const e=sf(s,i),r=Math.cos(e),o=Math.sin(e),a=this.Tb[s].getLabelSize();af();const l=this.MF(of,s,i,this.Tb[s].tag,e,this.DF),u=n(r*t+l.paddingX,o*t+l.paddingY);r>0?h.right=Math.max(h.right,u.x+.5*(1-l.alignmentX)*a.x-t):h.left=Math.max(h.left,-u.x+.5*(l.alignmentX+1)*a.x-t),o>0?h.top=Math.max(h.top,u.y+.5*(1-l.alignmentY)*a.y-t):h.bottom=Math.max(h.bottom,-u.y+.5*(l.alignmentY+1)*a.y-t)}}if(this.SF){const t=this.HF();if(void 0!==t){const i=this.SF.start(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max),s=this.SF.end(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max);this.axisScale.K(i,s)}}const r=n(this.Mg.x.getInnerStart()+(h.left+this.Mg.x.getInnerInterval()-h.right)/2,this.Mg.y.getInnerStart()+(h.bottom+this.Mg.y.getInnerInterval()-h.top)/2),o=Math.min(e.x/2-(h.left+h.right)/2,e.y/2-(h.bottom+h.top)/2);this.RF=A(this.Xt.left+this.Fa.left+h.left,this.Xt.top+this.Fa.top+s+h.top,this.Xt.right+this.Fa.right+h.right,this.Xt.bottom+this.Fa.bottom+h.bottom),this.op(r,o);for(const t of this.Nv)t.wv();for(const t of this.Nv)t.Ee();super.Ry(),this.hp.Ee(!1,this.Nv,void 0);for(const t of this.Nv)t.Fp()}dispose(){return this.Nk.W(),this.VF.W(),this.ZF.W(),this.sx.W(),this.RA.W(),this.hp.W(),super.dispose()}getMinimumSize(){return n(this.RF.left+this.RF.right+100,this.RF.bottom+this.RF.top+100)}op(t,i){const s=this.Tb.length,e=[];for(let h=0;h<s;h+=1){const r=sf(h,s),o=n(t.x+Math.cos(r)*i,t.y+Math.sin(r)*i);e.push(o)}rf(this.Hv,this._F,t,e),rf(this.Xv,this._F,t,e),this.Hv.Au(i),this.Xv.Au(i),((t,i,s,e,h,r,n,o)=>{const a=t.length,l=r.length,u=i>0&&l>1;for(let l=0;l<Math.max(i,a);l+=1)if(u&&l<i){l>=a&&t.push(n());const o=t[l];rf(o,s,e,r);const u=h*((l+1)/i);o.Au(u)}else l<t.length&&o(t[l]);t.length=u?i:0})(this.pF,this.wF,this._F,t,i,e,this.zF,this.OF);for(const t of this.pF)t.Le(O).Be(this.CF);for(let h=0;h<s;h+=1){const r=this.Tb[h],n=sf(h,s);af();const o=void 0!==this.MF?this.MF(of,h,s,this.Tb[h].tag,n,this.DF):void 0;r.op(t,e,h,n,i,this._F,o)}((t,i,s,e,h,r,o,a,l,u)=>{const c=h.length,d=t.length;let f=0;if(void 0!==i)for(let l=0;l<c;l+=1){const A=h[l].tag,g=sf(l,c);for(let h=0;h<s+ +(0===l);h+=1){nf.alignmentX=0,nf.alignmentY=0,nf.paddingX=0,nf.paddingY=0;const y=i(nf,l,c,A,g,h,s,e);if(void 0!==y){f>=d&&t.push(a());const i=t[f];f+=1;const e=(s-h)/s,c=ms(r,o[l],e);i.ze(Is(c,n(y.paddingX,y.paddingY))).Ya(y.alignmentX).Xa(y.alignmentY).vr(u(e))}}}for(let i=f;i<d;i+=1)l(t[i]);t.length=f})(this.vF,this.xF,this.wF,this.FF,this.Tb,t,e,this.NF,this.GF,this.UF);for(const t of this.vF)t.Le(this.kF).tr(this.TF)}HF(){let t,i;const s=this.getSeriesCount()>1;for(const e of this.Tb)for(const h of this.Nv){const r=h.getValue(e.tag,s);void 0!==r&&(t=void 0===t?r:Math.min(t,r),i=void 0===i?r:Math.max(i,r))}if(void 0!==t&&void 0!==i)return c(t,i)}}const uf=(t,i,s)=>Wa(i,[[i.series],[i.axis],[{text:t.formatValue(i.value),font:{weight:"bold"}}]]),cf=(t,i)=>{const s=Math.floor(99999/i),e=Math.floor(99999/i),h=Math.floor(99998/i),r=Math.floor(99998/i),n=Math.floor(99999/(i+1)),o=Math.floor(89999/(i+1)),a=510001+i*o;let l=0;return{QF:()=>{const i=t.JF("dashboard ui",a+l);return l+=1,i},KF:()=>t.JF("dashboard legend",51e4),qF:i=>{const a=1+i*s,l=100001+i*e,u=200002+i*h,c=300002+i*r,d=400001+i*n,f=510001+i*o;let A=0;return{us:t,zy:(i,s)=>{const e=a+s;return t.JF(i,e)},kb:(i,s)=>{const e=l+s;return t.JF(i,e)},Uk:(i,s)=>{const e=u+s;return t.JF(i,e)},ip:(i,s)=>{const e=c+s;return t.JF(i,e)},Cb:(i,s,e)=>{const h=c+s;return t.tI(i,h,e)},Ny:(i,s)=>{const e=d+s;return t.JF(i,e)},Cy:i=>{const s=f+A,e=t.JF(i,s);return A+=1,e},Ty:()=>t.JF("panel legend",500002+i),ep:()=>t.JF("panel cursor",600001+i)}}}};class df{constructor(t){this.L=new s,this.S=t}M(t){return this.S=t,this.L.emit("set",t),this}_(){return this.S}N(t){return this.L.on("set",t)}U(t){return this.L.off(t,"set")}}const ff={yh:!1,mh:0,ph:!1,bh:0,Sh:!1,xh:0,Mh:0,dh:ch.fitting},Af=t=>{if(!t||"object"!=typeof t||null===t)return!1;const i=t.type;return!(!i||!["spark-line","spark-bar","spark-win-loss","spark-area","spark-pie"].includes(i))},gf=(t,i,s,e,h,r,n,o)=>{const{type:a,data:l}=t;if(0===l.length)return;const u=[e,h];"spark-line"===a&&_f(t,i,u,r,n,o),"spark-bar"===a&&wf({...t,winLoss:!1},i,u,r,n,o),"spark-win-loss"===a&&wf({...t,winLoss:!0},i,u,r,n,o),"spark-area"===a&&Cf(t,i,u,r,n,o),"spark-pie"===a&&kf(t,i,u,r,n,o)},yf=(t,i,s,e)=>({x:pf(t.x,i.x,s.x,e),y:vf(t.y,i.y,s.y,e)}),mf=(t,i,s,e)=>({position:pf(t.position,i.x,s.x,e),high:vf(t.high,i.y,s.y,e),low:vf(t.low,i.y,s.y,e)}),pf=(t,i,s,e)=>{const h=Jt(t,i,i+s);return e[0].x+e[1].x*(h-i)/s},vf=(t,i,s,e)=>{const h=Jt(t,i,i+s);return e[0].y+e[1].y*(h-i)/s},Sf=(t,i,s,e,h,r,n,o)=>{for(const a of t)"point"===a.type&&bf(a,i,s,h,r,n,o),"axis-band"===a.type&&xf(a,s,h,r,n,o),"constant-line"===a.type&&Mf(a,s,e,h,r,n,o)},bf=(t,i,s,e,h,r,n)=>{const{value:o,fillStyle:a,shape:l,size:u,rotation:c}=t;let d={x:NaN,y:NaN};if("start"===o&&(d=i[0]),"end"===o&&(d=i[i.length-1]),"min"===o){d=i[0];for(const t of i)d=d.y<t.y?d:t}if("max"===o){d=i[0];for(const t of i)d=d.y>t.y?d:t}("object"!=typeof o||(d=yf(o,s,e,h),((t,i)=>{const s=i[0],e=i[1],h=t.x,r=t.y;return s.x<=h&&h<=s.x+e.x&&s.y<=r&&r<=s.y+e.y})(d,h)))&&r.pointSet.add().Vt().cl(void 0!==l?l:ar.Circle).ir(c||0).tt(u||5).Le(a||n.sparkPointChartFillStyle).ml(d)},xf=(t,i,s,e,h,r)=>{const{axis:o,start:a,end:l,fillStyle:u,strokeStyle:c}=t;let d=n(hs,es),f=n(hs,es);"x"===o&&(d=yf({x:a,y:hs},i,s,e),f=yf({x:l,y:es},i,s,e)),"y"===o&&(d=yf({x:hs,y:a},i,s,e),f=yf({x:es,y:l},i,s,e));const A=e[0],g=e[1],y=Jt(d.x,A.x,A.x+g.x),m=Jt(d.y,A.y,A.y+g.y),p=Jt(f.x,A.x,A.x+g.x),v=Jt(f.y,A.y,A.y+g.y);h.rect.add().xl(y).Ml(m).tt(n(p-y,v-m)).Le(u||r.sparkChartBandFillStyle).Be(c||r.sparkChartBandStrokeStyle).Be(dt)},Mf=(t,i,s,e,h,r,o)=>{const{axis:a,value:l,strokeStyle:u}=t,c=l||0,d=i.y,f=s.y,A=i.x,g=s.x,y=[];if("y"===a&&d<=c&&c<=f){const t=yf(n(A,c),{x:A,y:d},e,h),i=yf(n(g,c),{x:A,y:d},e,h);y.push([t,i])}if("x"===a&&A<=c&&c<=g){const t=yf(n(c,d),{x:A,y:d},e,h),i=yf(n(c,f),{x:A,y:d},e,h);y.push([t,i])}y.length>0&&r.line.add().We(u||o.sparkChartConstantLineStrokeStyle).Xe(y[0][0]).He(y[0][1])},_f=(t,i,s,e,h,r)=>{const{strokeStyle:n,data:o,markers:a}=t,l=o.length;l>1e4&&h.so&&Yt.console.warn("LightningChart JS warning: SparkLineChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let u=es,c=hs,d=es,f=hs;for(let t=0;t<l;t+=1){const i=o[t];u=Math.min(u,i.x),c=Math.max(c,i.x),d=Math.min(d,i.y),f=Math.max(f,i.y)}const A={x:c-u,y:f-d},g=o.map((t=>yf(t,{x:u,y:d},A,s)));i.lineSet.add().cs(r).We(n||e.sparkLineChartStrokeStyle).Vt().ml(g),a&&Sf(a,g,{x:u,y:d},{x:c,y:f},A,s,i,e)},wf=(t,i,s,e,h,r)=>{const{data:n,fillStyle:o,strokeStyle:a,threshold:l,winFillStyle:u,lossFillStyle:c}=t,d=t.barSize||1,f=t.gap||1,A=t.winLoss,g=l||0,y=f/d*1;let m=es,p=hs;if(A)m=-1,p=1;else for(const t of n)m=Math.min(m,t),p=Math.max(p,t);const v={x:0,y:A?-1:Math.min(0,m)},S={x:1*n.length+(n.length-1)*y,y:A?2:Math.max(p,1e-5)};n.map(((t,i)=>{const e={x:1*(i+1)+i*y,y:A?t>=g?1:0:t},h=yf({x:1*i+i*y,y:A?t>=g?0:-1:0},v,S,s),r=yf(e,v,S,s);return{value:t,position:h,width:r.x-h.x,height:r.y-h.y}})).forEach((t=>{var s;i.rect.add().cs(r).ze(t.position).wl(t.height)._l(t.width).Le((s=t.value,A?(s>=g?u:c)||e.sparkBarChartFillStyle:o||e.sparkBarChartFillStyle)).Be(a||e.sparkBarChartStrokeStyle)}))},Cf=(t,i,s,e,h,r)=>{const{data:n,fillStyle:o,strokeStyle:l,markers:u}=t,c=n.length;c>1e4&&h.so&&Yt.console.warn("LightningChart JS warning: SparkAreaChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let d=es,f=hs,A=es,g=hs;for(let t=0;t<c;t+=1){const i=n[t];d=Math.min(d,i.x),f=Math.max(f,i.x),A=Math.min(A,i.y),g=Math.max(g,i.y)}const y={x:f-d,y:g-A},m=[],p=[];for(const t of n){const i=a(t.x,t.y,A);m.push(mf(i,{x:d,y:A},y,s)),p.push(yf(t,{x:d,y:A},y,s))}i.junction.add().cs(r).Vt().ml(m).Le(o||e.sparkAreaChartFillStyle),i.lineSet.add().cs(r).Vt().ml(p).We(l||e.sparkAreaChartStrokeStyle),u&&Sf(u,p,{x:d,y:A},{x:f,y:g},y,s,i,e)},kf=(t,i,s,e,h,r)=>{const{data:o,strokeStyle:a}=t,l=o.map((t=>"number"==typeof t?t:t.value)),u=o.map((t=>"object"==typeof t?t.fillStyle:void 0)),c=l.reduce(((t,i)=>t+i),0),d=yf(n(50,50),{x:0,y:0},{x:100,y:100},s),f=s[1],A=f.x<=f.y?f.x/2:f.y/2;let g=90;l.forEach(((t,s)=>{const h=t/c*360;i.arc.add().cs(r).ze(d).Au(A).mu(0).fu(g).He(g+h).Le(u[s]||Ri(e.sparkPieChartFillStyle,s)).Be(a||e.sparkPieChartStrokeStyle),g+=h}))};var Tf,Ff,If;!function(t){t[t.UpToDown=0]="UpToDown",t[t.LeftToRight=1]="LeftToRight"}(Tf||(Tf={})),function(t){t[t.Vertical=0]="Vertical",t[t.Horizontal=1]="Horizontal",t[t.Both=2]="Both"}(Ff||(Ff={})),function(t){t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right"}(If||(If={}));class Pf extends Qr{constructor(t,i,s,e,h){super(),this.Os=!1,this.n_={x:0,y:0,height:20,width:20},this.iI={x:10,y:10},this.Ls=t,this.sI=h,this.eI=new qn(t,i,s,Zt,e).setMouseInteractions(!0),this.hI=t.dc(i,Or.Simple).Le(e.dataGridScrollBarButtonArrowFillStyle).Be(e.dataGridScrollBarButtonArrowStrokeStyle).setMouseInteractions(!1),this.Du(this),this.eI.onMouseEnter((t=>t.setHighlight(1))),this.eI.onMouseLeave((t=>t.setHighlight(0)))}rI(){switch(this.sI){case If.Up:this.hI.Tl([{x:this.n_.x,y:this.n_.y+this.iI.y/2},{x:this.n_.x+this.iI.x/2,y:this.n_.y-this.iI.y/2},{x:this.n_.x-this.iI.x/2,y:this.n_.y-this.iI.y/2}]);break;case If.Down:this.hI.Tl([{x:this.n_.x-this.iI.x/2,y:this.n_.y+this.iI.y/2},{x:this.n_.x+this.iI.x/2,y:this.n_.y+this.iI.y/2},{x:this.n_.x,y:this.n_.y-this.iI.y/2}]);break;case If.Left:this.hI.Tl([{x:this.n_.x-this.iI.x/2,y:this.n_.y},{x:this.n_.x+this.iI.x/2,y:this.n_.y+this.iI.y/2},{x:this.n_.x+this.iI.x/2,y:this.n_.y-this.iI.y/2}]);break;case If.Right:this.hI.Tl([{x:this.n_.x-this.iI.x/2,y:this.n_.y+this.iI.y/2},{x:this.n_.x+this.iI.x/2,y:this.n_.y},{x:this.n_.x-this.iI.x/2,y:this.n_.y-this.iI.y/2}])}}ze(t){return this.n_.x=t.x,this.n_.y=t.y,this}Ga(){return n(this.n_.x,this.n_.y)}tt(t){return this.n_.height=t.x,this.n_.width=t.y,this}ni(){return{x:this.n_.height,y:this.n_.width}}onMouseDown(t){return this.eI.onMouseDown(t)}onMouseUp(t){return this.eI.onMouseUp(t)}setFillStyle(t){return this.eI.setFillStyle(t),this}getFillStyle(){return this.eI.getFillStyle()}setStrokeStyle(t){return this.eI.setStrokeStyle(t),this}getStrokeStyle(){return this.eI.getStrokeStyle()}Ee(){return this.eI.Ee(),this.rI(),this}Vs(){return this.eI.setSize(n(this.n_.height,this.n_.width)).setPosition(n(this.n_.x,this.n_.y)),this}setVisible(t){return this.eI.setVisible(t),this.hI.setVisible(t),this}dispose(){return this.eI.dispose(),this.hI.dispose(),this}setMouseInteractions(t){return this.eI.setMouseInteractions(t),this}getMouseInteractions(){return this.eI.getMouseInteractions()}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}getHighlight(){return this.eI.getHighlight()}setHighlight(t){return this.eI.setHighlight(Ui(t)),this.L.emit("highlight",this,Boolean(t)),this.Ls.xs(),this}}const Df=(t,i)=>Math.min(Math.max(t,i.getInnerStart()),i.getInnerEnd());class Bf{constructor(t,i,e,h,r,o,a){this.ud={x:0,y:0},this.n_={x:0,y:0,height:0,width:0},this.L=new s,this.nI={min:n(0,0),max:n(0,0)},this.oI=!1,this.aI=!1,this.lI={x:0,y:0},this.Lu=void 0,this.uI=n(0,0),this.cI={x:0,y:0},this.dI=0,this.fI=15,this.AI=(t,i)=>{this.oI=!0,this.RA.xs();const s=this.gI.getDraggingMode();this.Lu=this.RA.us.qr(s===Gt.notDraggable?Ke.Restricted:s===Gt.draggable?Ke.Move:s===Gt.onlyHorizontal?Ke.Horizontal:Ke.Vertical),this.yI&&clearInterval(this.yI)},this.mI=()=>{this.oI=!1,this.RA.xs(),this.RA.us.tn(this.Lu)},this.pI=t=>(this.aI=!0,this.lI=pt(this.RA.us.Oe(t.x,t.y),this.RA.us.ft,this.scale),!0),this.vI=(t,i)=>(this.SI(i),this.yI=setInterval((()=>this.SI(i)),300),!0),this.bI=()=>(clearInterval(this.yI),!0),this.xI=(t,i)=>{const s=this.gI.getDraggingMode();if(s!==Gt.notDraggable){const e=i||s,h=pt(this.RA.us.Oe(t.x,t.y),this.RA.us.ft,this.scale),r=n(e!==Gt.onlyVertical?Df(h.x,this.scale.x):this.n_.x,e!==Gt.onlyHorizontal?Df(h.y,this.scale.y):this.n_.y),o=n(r.x-this.lI.x,r.y-this.lI.y),a=n(this.gI.getPosition().x+o.x,this.gI.getPosition().y+o.y),l=this.MI(a),u={x:Math.abs(this.uI.x-l.x),y:Math.abs(this.uI.y-l.y)};return this._I(u),this.cI.y>o.y&&(this.lI=h),this.Ee(),!0}return!1},this.wI=(t,i)=>{this.aI=!1,mi(i),this.RA.xs()},this.RA=t,this.vy=i,this.scale=h,this.contentScale=r,this.CI=a,this.kI=new Pf(t,e,h,o,a===Tf.UpToDown?If.Up:If.Left).setStrokeStyle(o.dataGridScrollBarButtonStrokeStyle).setFillStyle(o.dataGridScrollBarButtonFillStyle),this.TI=new Pf(t,e,h,o,a===Tf.UpToDown?If.Down:If.Right).setStrokeStyle(o.dataGridScrollBarButtonStrokeStyle).setFillStyle(o.dataGridScrollBarButtonFillStyle),this.gI=new qn(t,e,h,Zt,o).setFillStyle(o.dataGridScrollBarFillStyle).setStrokeStyle(o.dataGridScrollBarStrokeStyle).setMouseInteractions(!0).setDraggingMode(a===Tf.UpToDown?Gt.onlyVertical:a===Tf.LeftToRight?Gt.onlyHorizontal:Gt.notDraggable),this.FI=new qn(i,e,h,Zt,o).setFillStyle(o.dataGridScrollBarBackgroundFillStyle).setStrokeStyle(o.dataGridScrollBarBackgroundStrokeStyle).setMouseInteractions(!0),this.gI.onMouseEnter(this.AI),this.gI.onMouseLeave(this.mI),this.gI.onMouseDragStart(((t,i)=>this.pI(n(i.clientX,i.clientY))&&mi(i))),this.gI.onMouseDrag(((t,i)=>this.xI(n(i.clientX,i.clientY))&&mi(i))),this.gI.onMouseDragStop(this.wI),this.gI.onTouchStart(((t,i)=>this.pI(n(i.clientX,i.clientY))&&mi(i))),this.gI.onTouchMove(((t,i)=>this.xI(n(i.clientX,i.clientY))&&mi(i))),this.gI.onTouchEnd(this.wI),this.kI.onMouseDown(((t,i)=>this.vI(t,i)&&mi(i))),this.TI.onMouseDown(((t,i)=>this.vI(t,i)&&mi(i))),this.kI.onMouseUp(((t,i)=>this.bI()&&mi(i))),this.TI.onMouseUp(((t,i)=>this.bI()&&mi(i))),this.FI.onMouseWheel(((t,i)=>this.II(i))),this.gI.onMouseWheel(((t,i)=>this.II(i))),this.FI.onMouseDown(((t,i)=>this.vI(t,i)&&mi(i))),this.FI.onMouseUp(((t,i)=>this.bI()&&mi(i)))}DI(t){return this.n_=t,this}_l(t){return this.n_.width=t,this}BI(){return this.n_.width}LI(t){return this.uI=t,this}RI(t){return this.ud=t,this}EI(){return this.ud}zI(t){return this.fI=t,this}VI(){return this.CI}OI(t){let i;switch(this.CI){case Tf.UpToDown:return i=t>0?Math.min(this.uI.y-this.nI.max.y,this.cI.y+t):Math.max(0,this.cI.y+t),i!==this.cI.y&&(this._I({x:0,y:i}),this.Ee(),!0);case Tf.LeftToRight:return i=Math.min(this.nI.max.x-this.uI.x,this.cI.x+t),i!==this.cI.x&&(this._I({y:0,x:i}),this.Ee(),!0);default:return!1}}NI(t){let i;switch(this.CI){case Tf.UpToDown:return i=Math.max(0,this.cI.y-t),i!==this.cI.y&&(this._I({x:0,y:i}),this.Ee(),!0);case Tf.LeftToRight:return i=t>0?Math.max(0,this.cI.x-t):Math.min(this.nI.max.x-this.uI.x,this.cI.x-t),i!==this.cI.x&&(this._I({x:i,y:0}),this.Ee(),!0);default:return!0}}GI(t){switch(this.CI){case Tf.UpToDown:return this.L.on("scrollY",t);case Tf.LeftToRight:return this.L.on("scrollX",t)}return this.L.on("scrollY",t)}MI(t){switch(this.CI){case Tf.UpToDown:if(t.y>this.nI.min.y)return n(t.x,this.nI.min.y);if(t.y<this.nI.max.y)return n(t.x,this.nI.max.y);break;case Tf.LeftToRight:if(t.x<this.nI.min.x)return n(this.nI.min.x,t.y);if(t.x>this.nI.max.x)return n(this.nI.max.x,t.y)}return t}II(t){t.deltaY>0&&this.UI()&&mi(t),t.deltaY<0&&this.WI()&&mi(t)}SI(t){const i=pt(this.RA.us.Oe(t.clientX,t.clientY),this.RA.us.ft,this.scale);let s;const e=this.gI.getPosition(),h=this.gI.getSize();this.YI(i,e,h)?clearInterval(this.yI):(s=this.CI===Tf.UpToDown?n(0,i.y-e.y>0?this.fI:-this.fI):n(e.x-i.x>0?this.fI:-this.fI,0),(s.x>0||s.y>0)&&this.HI(0!==s.x?Math.abs(s.x):Math.abs(s.y)),(s.x<0||s.y<0)&&this.XI(0!==s.x?Math.abs(s.x):Math.abs(s.y)))}YI(t,i,s){return this.CI===Tf.UpToDown?t.y<i.y+s.y/2&&t.y>i.y-s.y/2:t.x>i.x-s.x/2&&t.x<i.x+s.x/2}$I(t){this.nI=t}HI(t){switch(this.CI){case Tf.UpToDown:{const i=Math.max(0,this.cI.y-t);return i!==this.cI.y&&(this._I({x:0,y:i}),this.Ee(),!0)}case Tf.LeftToRight:{const i=Math.max(0,this.cI.x-t);return i!==this.cI.x&&(this._I({x:i,y:0}),this.Ee(),!0)}default:return!1}}XI(t){switch(this.CI){case Tf.UpToDown:{let i;return i=this.ud.x>this.n_.height?Math.min(this.uI.y-this.nI.max.y,this.cI.y+t):0,i!==this.cI.y&&(this._I({x:0,y:i}),this.Ee(),!0)}case Tf.LeftToRight:{const i=Math.min(this.nI.max.x-this.uI.x,this.cI.x+t);return i!==this.cI.x&&(this._I({y:0,x:i}),this.Ee(),!0)}default:return!1}}WI(){return this.HI(this.fI)}UI(){return this.XI(this.fI)}_I(t){if(t.x===this.cI.x&&t.y===this.cI.y)return;let i;switch(this.cI=t,this.CI){case Tf.UpToDown:i=this.cI.y*this.dI*this.contentScale.Gi().y,this.L.emit("scrollY",Ff.Vertical,i),this.RA.us.xs();break;case Tf.LeftToRight:i=this.cI.x*this.dI*this.contentScale.Gi().x,this.L.emit("scrollX",Ff.Horizontal,i)}}setVisible(t){return this.kI.setVisible(t),this.TI.setVisible(t),this.FI.setVisible(t),this.gI.setVisible(t),this}dispose(){return this.kI.dispose(),this.TI.dispose(),this.FI.dispose(),this.gI.dispose(),this.yI&&clearInterval(this.yI),this}Vs(){switch(this.jI(),this.ZI(),this.CI){case Tf.UpToDown:this.kI.ze({x:this.n_.x,y:this.n_.y+this.n_.height-this.kI.ni().x/2}).tt(n(this.n_.width,this.n_.width)).Vs(),this.TI.ze({x:this.n_.x,y:this.n_.y+10}).tt(n(this.n_.width,this.n_.width)).Vs(),this.FI.setSize({x:this.n_.width,y:this.n_.height-2*this.kI.ni().x}).setPosition({x:this.n_.x,y:this.n_.y+this.TI.ni().y+this.FI.getSize().y/2}),this.gI.setSize(n(this.n_.width,this.QI())),this.uI={x:this.n_.x,y:this.kI.Ga().y-this.kI.ni().y/2-this.gI.getSize().y/2},this.$I({min:{x:this.n_.x,y:this.kI.Ga().y-this.kI.ni().y/2-this.gI.getSize().y/2},max:{x:this.n_.x,y:this.TI.Ga().y+this.TI.ni().x/2+this.gI.getSize().y/2}});break;case Tf.LeftToRight:this.kI.ze({x:this.n_.x,y:this.n_.y}).tt(n(this.n_.height,this.n_.height)).Vs(),this.TI.ze({x:this.n_.x+this.n_.width-this.TI.ni().x,y:this.n_.y}).tt(n(this.n_.height,this.n_.height)).Vs(),this.FI.setSize({y:this.n_.height,x:this.n_.width-2*this.kI.ni().y}).setPosition({x:this.n_.x+this.kI.ni().x/2+this.FI.getSize().x/2,y:this.n_.y}),this.gI.setSize(n(this.QI(),this.n_.height)),this.uI={x:this.kI.Ga().x+this.kI.ni().x/2+this.gI.getSize().x/2,y:this.n_.y},this.$I({min:{x:this.kI.Ga().x+this.kI.ni().x/2+this.gI.getSize().x/2,y:this.n_.y},max:{x:this.TI.Ga().x-this.TI.ni().x/2-this.gI.getSize().x/2,y:this.n_.y}})}return this.JI(),this}jI(){switch(this.CI){case Tf.UpToDown:this.KI()||this.setVisible(!1),this.KI()&&this.setVisible(!0);break;case Tf.LeftToRight:this.qI()||this.setVisible(!1),this.qI()&&this.setVisible(!0)}}ZI(){switch(this.CI){case Tf.UpToDown:this.KI()||this._I({x:0,y:0});break;case Tf.LeftToRight:this.qI()||this._I({x:0,y:0})}}KI(){return this.ud.x>this.n_.height}qI(){return this.ud.y>this.n_.width}QI(){switch(this.CI){case Tf.UpToDown:return this.n_.height*(this.n_.height-2*this.kI.ni().x)/this.ud.x;case Tf.LeftToRight:return this.n_.width*(this.n_.width-2*this.kI.ni().y)/this.ud.y;default:return 0}}JI(){switch(this.CI){case Tf.UpToDown:this.dI=(this.ud.x-this.n_.height)/(this.nI.min.y-this.nI.max.y);break;case Tf.LeftToRight:this.dI=(this.ud.y-this.n_.width)/(this.nI.max.x-this.nI.min.x)}}Ee(){switch(this.kI.Ee(),this.TI.Ee(),this.FI.Ee(),this.CI){case Tf.UpToDown:this.gI.setPosition({x:this.n_.x,y:this.kI.Ga().y-this.kI.ni().y/2-this.gI.getSize().y/2-this.cI.y}).Ee();break;case Tf.LeftToRight:this.gI.setPosition({y:this.n_.y,x:this.kI.Ga().x+this.kI.ni().x/2+this.gI.getSize().x/2+this.cI.x}).Ee()}return this}}class Lf{constructor(t,i,s,e,h,r,n){switch(this.RA=t,this.vy=i,this.scale=e,this.contentScale=h,n){case Ff.Vertical:this.tP=this.iP(s,r,Tf.UpToDown);break;case Ff.Horizontal:this.sP=this.iP(s,r,Tf.LeftToRight);break;case Ff.Both:this.tP=this.iP(s,r,Tf.UpToDown),this.sP=this.iP(s,r,Tf.LeftToRight)}this.eP=ve(new be(void 0,((t,i,s,e,h)=>{var r,n;0!==e.x&&(null===(r=this.sP)||void 0===r?void 0:r.NI(e.x))&&mi(h),0!==e.y&&(null===(n=this.tP)||void 0===n?void 0:n.OI(e.y))&&mi(h)})))}iP(t,i,s){return new Bf(this.RA,this.vy,t,this.scale,this.contentScale,i,s)}BI(){return 20}RI(t){var i,s;return null===(i=this.tP)||void 0===i||i.RI(t),null===(s=this.sP)||void 0===s||s.RI(t),this}hP(t){var i;return null===(i=this.sP)||void 0===i||i.zI(t),this}rP(t){var i;return null===(i=this.tP)||void 0===i||i.zI(t),this}nP(t){const i=this.tP;return i&&i.II(t),this}oP(t){return this.eP.onTouchStart(this,t),this}aP(t){return this.eP.onTouchMove(this,t),this}lP(t){return this.eP.onTouchEnd(this,t),this}onScroll(t){var i,s;return null===(i=this.sP)||void 0===i||i.GI(t),null===(s=this.tP)||void 0===s||s.GI(t),this}dispose(){var t,i;return null===(t=this.tP)||void 0===t||t.dispose(),null===(i=this.sP)||void 0===i||i.dispose(),this}Ee(){var t,i;return null===(t=this.tP)||void 0===t||t.Ee(),null===(i=this.sP)||void 0===i||i.Ee(),this}Vs(){var t,i,s,e;const h=this.scale.x,r=this.scale.y;return null===(t=this.tP)||void 0===t||t.DI({x:h.getInnerEnd()-10,y:r.getInnerStart()+20,height:r.getInnerEnd()-20,width:20}),null===(i=this.sP)||void 0===i||i.DI({x:h.getInnerStart()+10,y:r.getInnerStart()+10,height:20,width:h.getInnerEnd()-20}),null===(s=this.tP)||void 0===s||s.Vs(),null===(e=this.sP)||void 0===e||e.Vs(),this}}class Rf extends Na{constructor(t,i,s,e,h,r){super(t,i,s,i.zy("dataGrid bg",0),e,i.us.qi.dataGridBackgroundFillStyle,i.us.qi.dataGridBackgroundStrokeStyle,i.us.qi.dataGridTitleFont,i.us.qi.dataGridTitleFillStyle,r),this.uP=[],this.cP=[],this.dP=[],this.fP=new Map,this.AP=!0,this.gP=!0,this.yP=!0,this.mP=!0,this.pP=!0,this.vP=!0,this.SP=!0,this.bP=!0,this.xP=!0,this.MP=!0,this._P=!0,this.wP=!0,this.CP=!0,this.kP=!0,this.TP=!0,this.FP=!0,this.IP=new Set,this.PP=new Set,this.DP=!0,this.BP=!0,this.LP=(t,i)=>{t.borders=void 0===i?Nf:{...t.borders,...i},this.RP(t),this.wP=!0,this.us.xs()},this.RP=t=>{t.borders&&(!1===t.borders.top&&this.EP(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!1}:{...this.zP,bottom:!1}})),!1===t.borders.bottom&&this.EP(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!1}:{...this.zP,top:!1}})),!1===t.borders.left&&this.EP(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!1}:{...this.zP,right:!1}})),!1===t.borders.right&&this.EP(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!1}:{...this.zP,left:!1}})),!0===t.borders.top&&this.EP(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!0}:{...this.zP,bottom:!0}})),!0===t.borders.bottom&&this.EP(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!0}:{...this.zP,top:!0}})),!0===t.borders.left&&this.EP(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!0}:{...this.zP,right:!0}})),!0===t.borders.right&&this.EP(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!0}:{...this.zP,left:!0}})))},this.VP=(t,i)=>{const s=this.fP.get(t);s&&this.L.emit(Ef.cellMouseEnter,s,i)},this.OP=(t,i)=>{const s=this.fP.get(t);s&&this.L.emit(Ef.cellMouseLeave,s,i)},this.NP=(t,i)=>{const s=this.fP.get(t);s&&this.L.emit(Ef.cellMouseClick,s,i)},this.GP=(t,i)=>{const s=this.fP.get(t);s&&this.L.emit(Ef.cellMouseDoubleClick,s,i)},this.UP=(t,i)=>{const s=this.fP.get(t);s&&this.L.emit(Ef.cellMouseDown,s,i)},this.WP=(t,i)=>{const s=this.fP.get(t);s&&this.L.emit(Ef.cellMouseUp,s,i)},this.YP=(t,i)=>{const s=this.fP.get(t);s&&this.L.emit(Ef.cellMouseMove,s,i)},this.HP=(t,i)=>{const s=this.fP.get(t);s&&this.L.emit(Ef.cellMouseDrag,s,i)},this.XP=(t,i)=>{const s=this.fP.get(t);s&&this.L.emit(Ef.cellMouseDragStart,s,i)},this.$P=(t,i)=>{const s=this.fP.get(t);s&&this.L.emit(Ef.cellMouseDragStop,s,i)},this.jP=(t,i)=>{const s=this.fP.get(t);s&&(this.L.emit(Ef.cellMouseWheel,s,i),!i.defaultPrevented&&this.DP&&this.ZP.nP(i))},this.QP=(t,i)=>{const s=this.fP.get(t);s&&(this.L.emit(Ef.cellTouchStart,s,i),!i.defaultPrevented&&this.BP&&this.ZP.oP(i))},this.JP=(t,i)=>{const s=this.fP.get(t);s&&(this.L.emit(Ef.cellTouchMove,s,i),!i.defaultPrevented&&this.BP&&this.ZP.aP(i))},this.KP=(t,i)=>{const s=this.fP.get(t);s&&(this.L.emit(Ef.cellTouchEnd,s,i),!i.defaultPrevented&&this.BP&&this.ZP.lP(i))},this.us.Qn(Yo.ff),this.wh.vr("Data Grid"),this.qP=s.d2({scaleXYConstructor:ee}),this.qP.x.yg=ff,this.tD=s.d2({scaleXYConstructor:ee}),this.iD={x:0,y:0},this.sD=this.qi.dataGridTextFont,this.eD=this.qi.dataGridTextFillStyle,this.zP={top:!0,bottom:!0,left:!0,right:!0},this.hD=this.qi.dataGridCellBackgroundFillStyle,this.rD=this.qi.dataGridBorderStrokeStyle,this.nD="left-center",this.oD={left:5,right:5,bottom:5,top:5},this.aD=i.kb("dataGrid grid bg",0),this.lD=i.kb("dataGrid cell bg",1),this.uD=i.ip("dataGrid cell content",0),this.cD=i.ip("dataGrid scrollbar bg",1),this.dD=i.ip("dataGrid scrollbar fg",2),this.ZP=this.fD(),this.onBackgroundMouseWheel(((t,i)=>{this.DP&&this.ZP.nP(i)})),this.onBackgroundTouchStart(((t,i)=>{this.BP&&this.ZP.oP(i)})),this.onBackgroundTouchMove(((t,i)=>{this.BP&&this.ZP.aP(i)})),this.onBackgroundTouchEnd(((t,i)=>{this.BP&&this.ZP.lP(i)})),this.AD=this.aD.Re(this.qP).Le(this.qi.dataGridBackgroundFillStyle).Be(dt).setMouseInteractions(!1),this.gD=this.uD.Zg(this.qP).setMouseInteractions(!1),this.yD=new Pl((()=>this.lD.Re(this.qP).setMouseInteractions(!0).setMouseEnterEventHandler(this.VP).setMouseLeaveEventHandler(this.OP).setMouseClickEventHandler(this.NP).setMouseDoubleClickEventHandler(this.GP).setMouseDownEventHandler(this.UP).setMouseUpEventHandler(this.WP).setMouseMoveEventHandler(this.YP).setMouseDragEventHandler(this.HP).setMouseDragStartEventHandler(this.XP).setMouseDragStopEventHandler(this.$P).setMouseWheelEventHandler(this.jP).setTouchStartEventHandler(this.QP).setTouchMoveEventHandler(this.JP).setTouchEndEventHandler(this.KP))),this.mD=new Pl((()=>this.uD.Re(this.qP).setMouseInteractions(!1))),this.pD=new Pl((()=>this.uD.Ur(this.qP).setMouseInteractions(!1))),this.vD=new Pl((()=>this.uD.Ap(this.qP,{},[xl.InternalUI,{type:"DataPattern",args:{pattern:"ProgressiveX"}}]).setMouseInteractions(!1))),this.SD=new Pl((()=>this.uD.Ye(this.qP).setMouseInteractions(!1))),this.bD=new Pl((()=>this.uD.Ov(this.qP).setMouseInteractions(!1))),this.xD=new Pl((()=>this.uD.Re(this.qP).setMouseInteractions(!1))),this.MD=new Pl((()=>this.uD.U_(this.qP).setMouseInteractions(!1))),this._D=new Pl((()=>this.uD.ld(this.qP).setMouseInteractions(!1))),this.Ey(h,this.uiScale),this.onResize((()=>{this.AP=!0,this.us.xs(),this.qP.tt(this.Mg.ni()),this.tD.tt(this.Mg.ni())})),this.wD=this.es.Dg([this.AD])}getMinimumSize(){return{x:200,y:200}}setAnimationsEnabled(t){return this}nf(){return[]}dispose(){return super.dispose(),this.aD.W(),this.lD.W(),this.uD.W(),this.cD.W(),this.dD.W(),za(this.qP),za(this.tD),this.ZP.dispose(),this.pD.Dp(),this.yD.Dp(),this.mD.Dp(),this.vD.Dp(),this.SD.Dp(),this.bD.Dp(),this.xD.Dp(),this.MD.Dp(),this._D.Dp(),this}Z(){return super.Z(),this.qP.Z(),this.tD.Z(),this}J(){return super.J(),this.qP.J(),this.tD.J(),this}setBackgroundEffect(t){return this.wD.bs(t),this.us.xs(),this}getBackgroundEffect(){return this.wD.Ms()}setInteractionScrollOnWheel(t){return this.DP=t,this}getInteractionScrollOnWheel(){return this.DP}setInteractionPanOnTouch(t){return this.BP=t,this}getInteractionPanOnTouch(){return this.BP}onCellMouseEnter(t){return this.L.on(Ef.cellMouseEnter,t)}offCellMouseEnter(t){return this.L.off(t)}onCellMouseLeave(t){return this.L.on(Ef.cellMouseLeave,t)}offCellMouseLeave(t){return this.L.off(t)}onCellMouseClick(t){return this.L.on(Ef.cellMouseClick,t)}offCellMouseClick(t){return this.L.off(t)}onCellMouseDoubleClick(t){return this.L.on(Ef.cellMouseDoubleClick,t)}offCellMouseDoubleClick(t){return this.L.off(t)}onCellMouseDown(t){return this.L.on(Ef.cellMouseDown,t)}offCellMouseDown(t){return this.L.off(t)}onCellMouseUp(t){return this.L.on(Ef.cellMouseUp,t)}offCellMouseUp(t){return this.L.off(t)}onCellMouseMove(t){return this.L.on(Ef.cellMouseMove,t)}offCellMouseMove(t){return this.L.off(t)}onCellMouseDrag(t){return this.L.on(Ef.cellMouseDrag,t)}offCellMouseDrag(t){return this.L.off(t)}onCellMouseDragStart(t){return this.L.on(Ef.cellMouseDragStart,t)}offCellMouseDragStart(t){return this.L.off(t)}onCellMouseDragStop(t){return this.L.on(Ef.cellMouseDragStop,t)}offCellMouseDragStop(t){return this.L.off(t)}onCellMouseWheel(t){return this.L.on(Ef.cellMouseWheel,t)}offCellMouseWheel(t){return this.L.off(t)}onCellTouchStart(t){return this.L.on(Ef.cellTouchStart,t)}offCellTouchStart(t){return this.L.off(t)}onCellTouchMove(t){return this.L.on(Ef.cellTouchMove,t)}offCellTouchMove(t){return this.L.off(t)}onCellTouchEnd(t){return this.L.on(Ef.cellTouchEnd,t)}offCellTouchEnd(t){return this.L.off(t)}setGridBackgroundFillStyle(t){return this.AD.Le(t),this.us.xs(),this}getGridBackgroundFillStyle(){return this.AD.Qh()}setCellContent(t,i,s,e,h){if("number"==typeof s&&void 0!==e&&void 0!==h){const r=s,n=e,o=h;let a=[];for(let s=t;s<t+r;s+=1)for(let t=i;t<i+n;t+=1){const i=this.EP(s,t);i&&a.push(i)}a=Ni(a);let l={highlight:0};for(const t of a){const i=this.uP.indexOf(t);i<0||(l={...l,highlight:t.highlight,textFont:t.textFont,textFillStyle:t.textFillStyle,contentAlignment:t.contentAlignment,borders:t.borders,padding:t.padding,backgroundFillStyle:t.backgroundFillStyle},this.uP.splice(i,1))}const u={...l,column:t,row:i,columnSpan:r,rowSpan:n,content:o};this.uP.push(u),this.mP=!0,"string"==typeof u.content||"number"==typeof u.content?this.gP=!0:this.yP=!0,this.us.xs()}else this.CD(t,i,s);return this}setColumnContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.CD(t,e,s)}return this}setRowContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.CD(e,t,s)}return this}setTableContent(t){const i=t.length;if(0===i)return this;const s=t[0].length;if(0===s)return this;for(let e=0;e<s;e+=1)for(let s=0;s<i;s+=1){const i=t[s][e];this.CD(e,s,i)}return this}setColumnWidth(t,i){let s=this.cP.find((i=>i.column===t));return s||(s={column:t,min:void 0,max:void 0},this.cP.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.cP.splice(this.cP.indexOf(s),1):(s.min=i,s.max=i),this.vP=!0,this.us.xs(),this}setRowHeight(t,i){let s=this.dP.find((i=>i.row===t));return s||(s={row:t,min:void 0,max:void 0},this.dP.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.dP.splice(this.dP.indexOf(s),1):(s.min=i,s.max=i),this.vP=!0,this.us.xs(),this}setColumnPaddings(t,i){return"number"==typeof i&&(i=g(i,i,i,i)),this.kD(t,(t=>this.TD(t,i))),this}setRowPaddings(t,i){return"number"==typeof i&&(i=g(i,i,i,i)),this.FD(t,(t=>this.TD(t,i))),this}setCellPadding(t,i,s){return"number"==typeof s&&(s=g(s,s,s,s)),this.EP(t,i,(t=>this.TD(t,s))),this}setCellsPaddings(t){return"number"==typeof t&&(t=g(t,t,t,t)),this.oD={...this.oD,...t},this.ID((t=>this.TD(t,this.oD))),this}setCellBorders(t,i,s){return this.EP(t,i,(t=>this.LP(t,s))),this}setRowBorders(t,i){return this.FD(t,(t=>this.LP(t,i))),this}setColumnBorders(t,i){return this.kD(t,(t=>this.LP(t,i))),this}setCellsBorders(t){return this.zP=void 0===t?Nf:t,this.ID((t=>this.LP(t,this.zP))),this}setCellsBorderStrokeStyle(t){return this.rD="function"==typeof t?t(this.rD):t,this.kP=!0,this.us.xs(),this}setColumnTextFillStyle(t,i){return this.kD(t,(t=>this.PD(t,i))),this}setRowTextFillStyle(t,i){return this.FD(t,(t=>this.PD(t,i))),this}setCellTextFillStyle(t,i,s){return this.EP(t,i,(t=>this.PD(t,s))),this}setCellsTextFillStyle(t){return this.eD="function"==typeof t?t(this.eD):t,this.ID((t=>this.PD(t,this.eD))),this}setColumnTextFont(t,i){return this.kD(t,(t=>this.DD(t,i))),this}setRowTextFont(t,i){return this.FD(t,(t=>this.DD(t,i))),this}setCellTextFont(t,i,s){return this.EP(t,i,(t=>this.DD(t,s))),this}setCellsTextFont(t){return this.sD="function"==typeof t?t(this.sD):t,this.ID((t=>this.DD(t,this.sD))),this}setColumnContentAlignment(t,i){return this.kD(t,(t=>this.BD(t,i))),this}setRowContentAlignment(t,i){return this.FD(t,(t=>this.BD(t,i))),this}setCellContentAlignment(t,i,s){return this.EP(t,i,(t=>this.BD(t,s))),this}setCellsContentAlignment(t){return this.nD=t,this.ID((t=>this.BD(t,this.nD))),this}setCellBackgroundFillStyle(t,i,s){return this.EP(t,i,(t=>this.LD(t,s))),this}setColumnBackgroundFillStyle(t,i){return this.kD(t,(t=>this.LD(t,i))),this}setRowBackgroundFillStyle(t,i){return this.FD(t,(t=>this.LD(t,i))),this}setCellsBackgroundFillStyle(t){return this.hD="function"==typeof t?t(this.hD):t,this.ID((t=>this.LD(t,this.hD))),this}setCellHighlight(t,i,s){return this.EP(t,i,(t=>{t.highlight=Ui(s)})),this.CP=!0,this.us.xs(),this}setColumnHighlight(t,i){const s=Ui(i);return this.kD(t,(t=>{t.highlight=s})),this.CP=!0,this.us.xs(),this}setRowHighlight(t,i){const s=Ui(i);return this.FD(t,(t=>{t.highlight=s})),this.CP=!0,this.us.xs(),this}removeCell(t,i){return this.EP(t,i,(t=>this.uP.splice(this.uP.indexOf(t),1))),this.pP=!0,this.us.xs(),this}removeRow(t){return this.FD(t,(t=>this.uP.splice(this.uP.indexOf(t),1))),this.uP.filter((i=>i.row>t)).forEach((t=>{t.row-=1})),this.pP=!0,this.us.xs(),this}removeColumn(t){return this.kD(t,(t=>this.uP.splice(this.uP.indexOf(t),1))),this.uP.filter((i=>i.column>t)).forEach((t=>{t.column-=1})),this.pP=!0,this.us.xs(),this}removeCells(){return this.uP.splice(0),this.pP=!0,this.us.xs(),this}getColumnMax(){return 0===this.uP.length?0:this.uP.reduce(((t,i)=>Math.max(t,i.column+i.columnSpan-1)),0)}getRowMax(){return 0===this.uP.length?0:this.uP.reduce(((t,i)=>Math.max(t,i.row+i.rowSpan-1)),0)}Ee(t){super.Ee(t),Ga.Hy(this.wh,this.Vy),super.Ry();const i=Math.round(this.rD.O()),s=i/2;let e=this.gP||this.yP||this.mP||this.pP||this.vP||this.SP||this._P||this.wP||this.kP||this.FP;if(e){this.uP.forEach((t=>{this.PP.add(t.column)})),this.uP.forEach((t=>{this.IP.add(t.row)}));const t=this.pD.Ip(),h=this.RD(s,t);t.finishPlot();const r=this.ED(this.PP.size,h),n=this.zD(this.IP.size,h),o=r.reduce(ds,0)+i,a=n.reduce(ds,0)+i,l=new Array(r.length+1).fill(0).map(((t,i)=>r.reduce(((t,s,e)=>t+(e<i?s:0)),0))),u=new Array(n.length+1).fill(0).map(((t,i)=>n.reduce(((t,s,e)=>t+(e<i?s:0)),0)));if(this.VD){const t=this.VD.columnWidths.every(((t,i)=>t===r[i])),i=this.VD.rowHeights.every(((t,i)=>t===n[i]));t&&i&&(e=!1)}this.VD={columnWidths:r,rowHeights:n,dataGridWidth:o,dataGridHeight:a,columnWidthsCumulative:l,rowHeightsCumulative:u,cellsContentSizes:h}}const h=e||this.yP||this.mP||this.pP||this.bP||this.xP||this.MP||this.wP||this.CP||this.kP||this.AP||this.FP;if((h||this.TP)&&this.VD){const t=this.Mg.getInnerIntervalPixels(),e=Ga.Yy(this.wh,this.Vy),r=[this.Fa.left+s,this.Fa.right+s],n=[this.Fa.bottom+s,this.Fa.top+e+s],o={x:t.x-r[0]-r[1],y:t.y-n[0]-n[1]},a=[this.Fa.left,this.Fa.right],l=[this.Fa.bottom,this.Fa.top+e],u={x:Math.round(t.x-a[0]-a[1]),y:Math.round(t.y-l[0]-l[1])},c={x:Math.ceil(s),y:Math.floor(u.y-s)};this.tD.Ri(r).Ei(n).zi(0,o.x).Vi(0,o.y),this.ZP.RI({x:this.VD.dataGridHeight,y:this.VD.dataGridWidth}).Vs().Ee();const d={x:Math.round(this.iD.x),y:Math.round(Math.min(0,this.iD.y))};this.qP.Ri(a).Ei(l).zi(d.x,u.x+d.x).Vi(d.y,u.y+d.y),this.AD.ze({x:c.x,y:c.y});const f={x:this.qP.x.si(),y:this.qP.y.si()+this.ZP.BI(),width:this.qP.x.hi()+i-this.ZP.BI(),height:this.qP.y.hi()+i};this.uD.pb(f),this.lD.pb(f),this.aD.pb(f);const A=this.VD,g=[{x:this.qP.x.getInnerStart(),y:this.qP.y.getInnerStart()},{x:this.qP.x.getInnerEnd(),y:this.qP.y.getInnerStart()},{x:this.qP.x.getInnerEnd(),y:this.qP.y.getInnerEnd()},{x:this.qP.x.getInnerStart(),y:this.qP.y.getInnerEnd()}];A.cellsContentSizes.forEach((t=>{var i;const s={x:c.x+A.columnWidthsCumulative[t.cell.column],y:c.y-A.rowHeightsCumulative[t.cell.row+t.cell.rowSpan]},e={x:s.x+A.columnWidths[t.cell.column],y:s.y+A.rowHeights[t.cell.row]},h=ls([s,{x:e.x,y:s.y},e,{x:s.x,y:e.y}],g);null===(i=t.text)||void 0===i||i.setVisible(h)})),h&&this.OD(c,this.VD,i)}this.AP=!1,this.gP=!1,this.yP=!1,this.mP=!1,this.pP=!1,this.vP=!1,this.SP=!1,this.bP=!1,this.xP=!1,this.MP=!1,this._P=!1,this.wP=!1,this.CP=!1,this.kP=!1,this.TP=!1,this.FP=!1}RD(t,i){const s=[],e={left:Math.ceil(t),right:Math.ceil(t),top:Math.ceil(t),bottom:Math.ceil(t)};for(const t of this.uP){const{content:h}=t,r={...this.oD,...t.padding};let n,o,a,l={x:0,y:0};if("string"==typeof h||"number"==typeof h){const s=String(h);n=i.add(),l=n.vr(s).tr(t.textFont||this.sD).Vs().nd()}if(Af(h)&&(o=h,l={x:200,y:50}),Vn(h)){const t=this.us.ND(h);t.GD()?(a=h,l=a.ni()):t.UD((()=>{this.FP=!0,this.us.xs()}))}if(n||o||a){r.top=Math.round(r.top),r.left=Math.round(r.left),r.right=Math.round(r.right),r.bottom=Math.round(r.bottom);const i={x:Math.round(l.x+r.left+r.right+e.left+e.right),y:Math.round(l.y+r.top+r.bottom+e.top+e.bottom)};s.push({cell:t,contentSize:i,text:n,sparkChart:o,icon:a,cellPadding:r,cellMargin:e})}}return s}OD(t,i,s){const{dataGridWidth:e,dataGridHeight:h,cellsContentSizes:r,columnWidths:n,columnWidthsCumulative:o,rowHeights:a,rowHeightsCumulative:l}=i,u={x:e-s,y:-h+s};this.AD.tt(u),this.gD.We(this.rD),this.fP.clear();const c={cellBackground:this.yD.Ip(),cellIconRect:this.mD.Ip(),lineSet:this.vD.Ip(),line:this.SD.Ip(),pointSet:this.bD.Ip(),rect:this.xD.Ip(),junction:this.MD.Ip(),arc:this._D.Ip()},d=[];for(const i of r){const{cell:e,text:h,sparkChart:r,icon:u,cellPadding:f,cellMargin:A}=i,g={column:e.column,row:e.row},y={x:t.x+o[e.column],y:t.y-l[e.row+e.rowSpan]},m={x:y.x+A.left,y:y.y+A.bottom},p={x:m.x+f.left,y:m.y+f.bottom},v={x:new Array(e.columnSpan).fill(0).reduce(((t,i,s)=>t+n[e.column+s]),0),y:new Array(e.rowSpan).fill(0).reduce(((t,i,s)=>t+a[e.row+s]),0)},S={x:v.x-A.left-A.right,y:v.y-A.top-A.bottom},b={x:S.x-f.left-f.right,y:S.y-f.top-f.bottom};if(h){const t=Of(p,b,e.contentAlignment||this.nD);h.ze(t[0]).ja({x:t[1],y:t[2]}).Le(this.WD(e.textFillStyle||this.eD,e.content,this.eD)).cs(e.highlight)}const x=this.WD(e.backgroundFillStyle||this.hD,e.content);if(x!==O){const t=c.cellBackground.add();t.ze(y).tt(v).Le(x).Be(dt).cs(e.highlight),this.fP.set(t,g)}const M=e.borders||this.zP;if(M&&Vf(y,v,M,s,d),r){const t=p,i=b;gf(r,c,this.qP,t,i,this.qi,this.wA,e.highlight)}if(u){const t=u.ni(),i=Of(p,b,e.contentAlignment||this.nD);c.cellIconRect.add().ze({x:i[0].x+t.x*(-.5-i[1]/2),y:i[0].y+t.y*(-.5-i[2]/2)}).tt(t).Le(new it({source:u.gc,fitMode:q.Stretch})).Be(dt).cs(e.highlight)}}this.gD.Vt();for(const t of d)this.gD.jr().Jg(t[0],t[1]);c.cellBackground.finishPlot(),c.cellIconRect.finishPlot(),c.lineSet.finishPlot(),c.line.finishPlot(),c.pointSet.finishPlot(),c.rect.finishPlot(),c.junction.finishPlot(),c.arc.finishPlot()}ED(t,i){const s=new Array(t).fill(0);for(const t of this.PP.values()){const e=i.filter((i=>t>=i.cell.column&&t+1<=i.cell.column+i.cell.columnSpan)).reduce(((t,i)=>{const s=i.contentSize.x/i.cell.columnSpan;return Math.max(t,s)}),0),h=this.cP.find((i=>i.column===t)),r=h?Jt(e,void 0!==h.min?h.min:hs,void 0!==h.max?h.max:es):e;s[t]=r}return s}zD(t,i){const s=new Array(t).fill(0);for(const t of this.IP.values()){const e=i.filter((i=>t>=i.cell.row&&t+1<=i.cell.row+i.cell.rowSpan)).reduce(((t,i)=>{const s=i.contentSize.y/i.cell.rowSpan;return Math.max(t,s)}),0),h=this.dP.find((i=>i.row===t)),r=h?Jt(e,void 0!==h.min?h.min:hs,void 0!==h.max?h.max:es):e;s[t]=r}return s}WD(t,i,s){if(Z(t)){try{const s=Number(i);return new W({color:t.getPalette().getColors(s)})}catch(t){}return s||O}return t}PD(t,i){t.textFillStyle="function"==typeof i?i(t.textFillStyle||this.eD):i,this.MP=!0,this.us.xs()}DD(t,i){t.textFont="function"==typeof i?i(t.textFont||this.sD):i,this._P=!0,this.us.xs()}LD(t,i){t.backgroundFillStyle="function"==typeof i?i(t.backgroundFillStyle||this.hD):i,this.xP=!0,this.us.xs()}BD(t,i){t.contentAlignment=i,this.bP=!0,this.us.xs()}TD(t,i){t.padding={...t.padding,...i},this.SP=!0,this.us.xs()}CD(t,i,s){let e=this.EP(t,i);e?e.content=s:(e={column:t,row:i,columnSpan:1,rowSpan:1,content:s,highlight:0},this.uP.push(e),this.mP=!0),"string"==typeof e.content||"number"==typeof e.content?this.gP=!0:this.yP=!0,this.us.xs()}ID(t){this.uP.forEach((i=>t(i)))}EP(t,i,s){const e=this.uP.find((s=>t>=s.column&&t+1<=s.column+s.columnSpan&&i>=s.row&&i+1<=s.row+s.rowSpan));return e&&s&&s(e),e}kD(t,i){const s=this.uP.filter((i=>t>=i.column&&t+1<=i.column+i.columnSpan));for(const t of s)t&&i(t)}FD(t,i){const s=this.uP.filter((i=>t>=i.row&&t+1<=i.row+i.rowSpan));for(const t of s)t&&i(t)}fD(){return new Lf(this.dD,this.cD,this.tD,this.tD,this.qP,this.qi,Ff.Both).onScroll(((t,i)=>{this.VD&&(t===Ff.Vertical&&(this.iD.y=-i),t===Ff.Horizontal&&(this.iD.x=i),this.TP=!0,this.us.xs())})).hP(50).rP(12)}}const Ef={cellMouseEnter:"cellMouseEnter",cellMouseLeave:"cellMouseLeave",cellMouseClick:"cellMouseClick",cellMouseDoubleClick:"cellMouseDoubleClick",cellMouseDown:"cellMouseDown",cellMouseUp:"cellMouseUp",cellMouseMove:"cellMouseMove",cellMouseDrag:"cellMouseDrag",cellMouseDragStart:"cellMouseDragStart",cellMouseDragStop:"cellMouseDragStop",cellMouseWheel:"cellMouseWheel",cellTouchStart:"cellTouchStart",cellTouchMove:"cellTouchMove",cellTouchEnd:"cellTouchEnd"};var zf;!function(t){t.Center="center",t.RightCenter="right-center",t.LeftCenter="left-center",t.RightTop="right-top",t.LeftTop="left-top",t.RightBottom="right-bottom",t.LeftBottom="left-bottom",t.CenterTop="center-top",t.CenterBottom="center-bottom"}(zf||(zf={}));const Vf=(t,i,s,e,h)=>{const r={x:t.x,y:t.y},n={x:t.x,y:t.y+i.y},o={x:t.x+i.x,y:t.y},a={x:t.x+i.x,y:t.y+i.y};s.top&&h.push([n,a]),s.bottom&&h.push([r,o]),s.left&&h.push([r,n]),s.right&&h.push([o,a])},Of=(t,i,s)=>{const e=t.x,h=t.x+i.x,r=t.x+i.x/2,o=t.y+i.y,a=t.y,l=t.y+i.y/2;switch(s){case"left-center":return[n(e,l),-1,0];case"right-center":return[n(h,l),1,0];case"center":return[n(r,l),0,0];case"left-bottom":return[n(e,a),-1,-1];case"right-bottom":return[n(h,a),1,-1];case"center-bottom":return[n(r,a),0,-1];case"left-top":return[n(e,o),-1,1];case"right-top":return[n(h,o),1,1];case"center-top":return[n(r,o),0,1]}return Yi(0,`Unidentified DataGrid cell content alignment option: ${s}`)},Nf={top:!1,bottom:!1,left:!1,right:!1};class Gf extends Th{constructor(t,i,s,e,h,r){super(t,{Pr(){},Ir(){},Br(){}},e,i,s,{numeric:i.xAxisNumericTicks,datetime:i.xAxisDateTimeTicks,time:i.xAxisTimeTicks},{type:"linear"}),this.chart=t,this.es=r,this.Ls=h,this.Th=h.Ur(t.YD).tr(this.qi.barChartCategoryAxisTitleFont||this.qi.xAxisTitleFont).Le(this.qi.barChartCategoryAxisTitleFillStyle||this.qi.xAxisTitleFillStyle),this.setTitleRotation(this.chart.Rs.getWidth({x:0,y:-90})),this.er=this.es.Dg([this.Th]).bs(i.effectsText),this.HD=h.Ye(t.YD).We(i.barChartCategoryAxisStrokeStyle||i.xAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.zg=t,this.Vg=t):"object"==typeof t&&(this.zg=t.min,this.Vg=t.max),this.chart.us.xs(),this}getThickness(){return{min:this.zg,max:this.Vg}}setStrokeStyle(t){return this.HD.We(t),this.chart.us.xs(),this}getStrokeStyle(){return this.HD.Su()}Vs(){if(!this.ji)return{Ug:0,Wg:0,Zd:Jt(0,void 0!==this.zg?this.zg:0,void 0!==this.Vg?this.Vg:es)};const t=this.HD.Su().O()/2,i=this.chart.Rs.getHeight(this.Th.Vs().nd());return{Ug:t,Wg:i,Zd:t+i}}Ee(t,i,s,e){const h=this.getInterval(),r=this.chart.valueAxis.getInterval();this.HD.Xe(this.chart.Rs.toPoint(h.start,r.start)).He(this.chart.Rs.toPoint(h.end,r.start)).setVisible(this.ji),this.Th.ze(this.chart.Rs.toPoint(.5*(h.start+h.end),this.chart.valueAxis.ft.gi(r.start,-(t.Ug+e.labelMarginBeforeCategoryAxisPixels)))).ja(this.chart.Rs.toPoint(0,1)).setVisible(this.ji)}setMouseInteractions(t){return this}br(t,i){return new Fh(i,t,this.Ls,this.chart.YD)}Mr(t,i){return{}}Rr(t,i){return i}zr(t,i,s){return{min:t,max:i}}}class Uf extends Th{constructor(t,i,s,e,h,r,n){super(t,{Pr:()=>{var i;if(t.XD){if("positive"===t.$D||"bipolar"===t.$D){if("after-bar"===(null===(i=t.jD)||void 0===i?void 0:i.position)){const i=this.ft.hi();return this.ft.gi(t.XD.max,Math.min(this.chart.Rs.getHeight(this.chart.ZD())+t.jD.labelMargin,.3*i))}return t.XD.max}return t.QD?Jt(-1,-1e-6,t.XD.max):0}},Ir:()=>{var i;if(t.XD){if("negative"===t.$D||"bipolar"===t.$D){if("after-bar"===(null===(i=t.jD)||void 0===i?void 0:i.position)){const i=this.ft.hi();return this.ft.gi(t.XD.min,-Math.min(this.chart.Rs.getHeight(this.chart.ZD())+t.jD.labelMargin,.3*i))}return t.XD.min}return t.QD?Jt(1,1e-6,t.XD.min):0}},Br:()=>{}},e,i,s,{numeric:i.barChartValueAxisTicks||i.yAxisNumericTicks,datetime:i.yAxisDateTimeTicks,time:i.yAxisTimeTicks},n),this.chart=t,this.es=r,this.Ls=h,this.Th=h.Ur(t.YD).tr(this.qi.barChartValueAxisTitleFont||this.qi.yAxisTitleFont).Le(this.qi.barChartValueAxisTitleFillStyle||this.qi.yAxisTitleFillStyle),this.setTitleRotation(this.chart.Rs.getHeight({x:0,y:-90})),this.er=this.es.Dg([this.Th]).bs(i.effectsText),this.HD=h.Ye(t.YD).We(i.barChartValueAxisStrokeStyle||this.qi.yAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.zg=t,this.Vg=t):"object"==typeof t&&(this.zg=t.min,this.Vg=t.max),this.chart.us.xs(),this}getThickness(){return{min:this.zg,max:this.Vg}}setStrokeStyle(t){return this.HD.We(t),this.chart.us.xs(),this}getStrokeStyle(){return this.HD.Su()}setTickStrategy(t,i){return super.Yh(t,i)}Vs(t){if(!this.ji)return this.hr(),{Ug:0,Wg:0,Zd:Jt(0,void 0!==this.zg?this.zg:0,void 0!==this.Vg?this.Vg:es)};const i=this.chart.Rs.getWidth(this.chart.YD).hi(),s=this.ft.hi();this.cr({physicalAxisSize:s,oppositeAxisSize:i,plotLines:t});let e=0;for(const t of this.lh.values())for(const i of t.values()){const t=i.Rh.$e,s=this.chart.Rs.getWidth(i.hh.nd()),h=t.getTickLength()+t.getTickPadding()+s;e=Math.max(e,h)}const h=e+this.HD.Su().O()/2,r=this.chart.Rs.getWidth(this.Th.Vs().nd());return{Ug:h,Wg:r,Zd:Jt(h+r,void 0!==this.zg?this.zg:0,void 0!==this.Vg?this.Vg:es)}}Ee(t){const i=this.getInterval();this.HD.Xe(this.chart.Rs.toPoint(-.5,this.Hh)).He(this.chart.Rs.toPoint(-.5,this.Xh)).setVisible(this.ji);const s="logarithmic"===this.Uh.type?Math.sqrt(i.start+i.end):.5*(i.start+i.end),e=this.chart.Rs.toPoint(this.chart.categoryAxis.ft.gi(-.5,t.Ug*this.chart.Rs.JD),s),h=this.chart.Rs.toPoint(this.chart.Rs.KD,0);this.Th.ze(e).ja(h).setVisible(this.ji)}setMouseInteractions(t){return this}br(t,i){return new Fh(i,t,this.Ls,this.chart.YD)}Mr(t,i){const s=t.Rh.$e,e=this.chart.Rs.toPoint(-.5,t.S),h=this.chart.YD.gi(e,this.chart.Rs.toPoint(s.getTickLength()*this.chart.Rs.JD,0)),r=this.chart.YD.gi(e,this.chart.Rs.toPoint(s.gridStrokeLength*i.oppositeAxisSize*-this.chart.Rs.JD,0)),n=this.chart.YD.gi(h,this.chart.Rs.toPoint(s.getTickPadding()*this.chart.Rs.JD,0));t.hh.ze(n).ja(this.chart.Rs.toPoint(this.chart.Rs.KD,s.getLabelAlignment())).ir(s.getLabelRotation()),s.tickStyle!==dt&&0!==s.tickLength&&i.plotLines.add({positions:[e,h]},{lineStyle:s.tickStyle}),s.gridStrokeStyle!==dt&&s.gridStrokeLength>0&&i.plotLines.add({positions:[e,r]},{lineStyle:s.gridStrokeStyle})}Rr(t,i){return"linear"===this.Uh.type?fe(t,i,this.ft):Ae(t,i,this.ft)}zr(t,i,s){return{min:t,max:i}}}class Wf extends Iu{constructor(t,i,s,e,h,r,n){super(t,i,s,e),this.Qo=Ji(),this.S=0,this.qD=!1,this.chart=t,this.chart=t,this.category=h,this.subCategory=r,this.ws=h,this.Fe=Ri(s.barChartBarFillStyle||s.rectangleSeriesFillStyle,n),this.Ie=Ri(s.barChartBarStrokeStyle||s.rectangleSeriesStrokeStyle,n),this.onVisibleStateChanged((()=>{this.chart.tB()})),this.onDispose((()=>{this.chart.tB(),this.chart.iB.delete(this.category),this.chart.sB.delete(this)}))}Ji(t,i){const s=this.chart.us.Go(i);return{cursorPosition:{pointMarker:{x:s.engineX,y:s.engineY},pointMarkerScale:this.chart.us.ft,resultTable:{x:s.engineX,y:s.engineY},resultTableScale:this.chart.us.ft},category:this.category,subCategory:this.subCategory,bar:this,value:this.getValue()}}setValue(t){return this.qD=!0,this.S=t,this.chart.tB(),this.chart.us.xs(),this.chart.iB.delete(this.category),this.chart.sB.delete(this),this}getValue(){return this.S}get value(){return this.S}setFillStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.chart.tB(),this}getFillStyle(){return this.Fe}setStrokeStyle(t){return this.Ie="function"==typeof t?t(this.Ie):t,this.chart.tB(),this}getStrokeStyle(){return this.Ie}fv(){return this.yv}setEffect(t){return this.chart.setBarsEffect(t),this}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe})}}const Yf=t=>!!(t&&"object"==typeof t&&"iCategory"in t&&"number"==typeof t.iCategory&&"value"in t&&"number"==typeof t.value),Hf=(t,i,s)=>{const e=t.Vd.filter((t=>void 0!==t)),h=e.map((t=>s(t.sizePixels))).reduce(((t,i)=>Math.max(t,i)),1),r=Math.ceil(h/(i/e.length));return r<=1?e:e.filter(((t,i)=>i%r==0))};class Xf extends $l{constructor(t,i,s,e,h,r,n){var o;let a;super(t,i,s,i.zy("barChart bg",0),e,i.us.qi.barChartBackgroundFillStyle||i.us.qi.chartXYBackgroundFillStyle,i.us.qi.barChartBackgroundStrokeStyle||i.us.qi.chartXYBackgroundStrokeStyle,i.us.qi.barChartTitleFont||i.us.qi.chartXYTitleFont,i.us.qi.barChartTitleFillStyle||i.us.qi.chartXYTitleFillStyle,r),this.coordsBars="barChart",this.eB=jf.Descending,this.hB=this.qi.barChartCategoryLabels,this.jD=this.qi.barChartValueLabelsAfterBars,this.rB=!1,this.t_=Zi(),this.iB=new Map,this.sB=new Map,this.$D="positive",this.nB="columns",this.oB=!0,this.aB=new Map,this.lB={speed:1},this.Rm={speed:1},this.uB=.08,this.cB=[],this.Cn=(t,i,s,e,h)=>{this.YD.tt(e,h)},this.us.Qn(Yo.pf),this.Rs="horizontal"===(null==n?void 0:n.type)?Qf:Zf,this.wh.vr("Bar Chart"),this.dB=i.ip("barChart plotting 1",0),this.fB=i.ip("barChart plotting 2",1),this.QD="logarithmic"===(null===(o=null==n?void 0:n.valueAxis)||void 0===o?void 0:o.type),this.QD?"horizontal"===this.Rs.AB?(a=s.d1({scale1DConstructor:te,dimension:"y"}),this.YD=(new he).Li(s.d1({scale1DConstructor:Hs,dimension:"x"}),a)):(a=s.d1({scale1DConstructor:te,dimension:"x"}),this.YD=(new he).Li(a,s.d1({scale1DConstructor:Hs,dimension:"y"}))):(this.YD=s.d2({scaleXYConstructor:ee}),a=this.Rs.getWidth(this.YD)),this.gB=this.es.Dg(),this.e_=new Il((()=>this.t_.xt(this.dB.Jp(this.YD).la(0))),((t,i,s)=>(t.Le(s.fillStyle).Be(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.jr();return s.Tl(i.vertices),this.t_.zt(s,i.bar),i.bar.ys([s]),s})))),(()=>{this.t_.Vt()}),(t=>{this.gB.As(t)})),this.Hv=this.vy.Re(this.YD).Le(this.qi.barChartSeriesBackgroundFillStyle||O).Be(dt),this.Xv=this.vy.Re(this.YD).Le(O).Be(this.qi.barChartSeriesBackgroundStrokeStyle||dt).setMouseInteractions(!1),super.Yv(this.Hv,this.Xv),this.categoryAxis=new Gf(this,this.qi,!1!==(null==n?void 0:n.animationsEnabled),a,this.fB,this.es);const l=de(null==n?void 0:n.valueAxis);this.valueAxis=new Uf(this,this.qi,!1!==(null==n?void 0:n.animationsEnabled),this.Rs.getHeight(this.YD),this.fB,this.es,l.type),this.yB=new Pl((()=>this.fB.Ur(this.YD).Gr(Qi).Nr(Qi).la(1))),this.mB=new Il((()=>this.vy.Zg(this.YD).setMouseInteractions(!1)),((t,i,s)=>(t.We(s.lineStyle),i.map((({positions:i,existingMember:s})=>(s||t.jr()).Jg(i[0],i[1]))))));const u=i.ep(),c=qt(n?n.cursorBuilder:void 0,hl);this.hp=Ya(this,u,c.wm(u,this.uiScale,this.uiScale,Zt,this.qi),this,"show-pointed",Jf,(()=>0)),this.onResize(this.Cn),this.Ey(h,this.YD),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled))}getSeries(){return this.Nv}setCursor(t){return this.hp.setCursor(t),this}getCursor(){return this.hp.getCursor()}setCursorMode(t){return this.hp.setCursorMode(t),this}getCursorMode(){return this.hp.getCursorMode()}setCustomCursor(t){return this.hp.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.hp.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.hp.offCursorTargetChanged(t)}setCursorFormatting(t){return this.hp.setCursorFormatting(t),this}getCursorFormatting(){return this.hp.getCursorFormatting()}addCursor(t=hl){const i=this.wy(),s=t.wm(i,this.uiScale,this.uiScale,this.Sy(i),this.qi);return this.By(s),s}setBarsMargin(t){return this.uB=Jt(t,0,.49),this.rB=!0,this.us.xs(),this}getBarsMargin(){return this.uB}setBarsEffect(t){return this.gB.bs(t),this.us.xs(),this}getBarsEffect(){return this.gB.Ms()}setData(t){let i;if(Array.isArray(t))i=[],t.forEach(((t,s)=>{"string"==typeof t?i.push({category:t}):"number"==typeof t?i.push({category:`Category ${s+1}`,value:t}):"object"==typeof t&&i.push(t)}));else{i=[];const s=Object.keys(t);for(const e of s){const s=t[e];i.push({category:e,value:"number"==typeof s?s:void 0})}}return this.pB("columns",i),this}setDataStacked(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:h}=i;h.forEach(((i,h)=>{const r=t[h];s.push({category:r,subCategory:e,value:i})}))})),this.pB("stacks",s),this}setDataGrouped(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:h}=i;h.forEach(((i,h)=>{const r=t[h];s.push({category:r,subCategory:e,value:i})}))})),this.pB("groups",s),this}pB(t,i){this.Nv.length>0&&this.us.Qn(Yo.Pf),this.nB=t,this.cB=i.map((t=>({category:t.category,subCategory:t.subCategory}))),this.vB(i);const s=Ni(i.map((t=>t.category))),e=s.length,h=Ni(i.map((t=>t.subCategory))).filter((t=>void 0!==t));if(i.forEach((t=>{let i=this.Nv.find((i=>i.category===t.category&&i.subCategory===t.subCategory));if(!i){const e=s.indexOf(t.category),r=h.includes(t.subCategory)?h.indexOf(t.subCategory):void 0;i=new Wf(this,this.Uv,this.qi,this.us.es,t.category,t.subCategory,qt(r,e)),this.$v(i),this.aB.set(i,{category:e,valueStart:this.QD?1e-6:0,valueEnd:void 0!==t.value?t.value:0})}void 0!==t.value&&i.setValue(t.value)})),this.Nv.slice().forEach((t=>{void 0===i.find((i=>i.category===t.category&&i.subCategory===t.subCategory))&&(t.dispose(),this.aB.delete(t))})),this.categoryAxis.setInterval(this.Rs.getWidth({x:{start:-.5,end:e-.5},y:{start:e-.5,end:-.5}})),this.XD=0===this.Nv.length?void 0:"stacks"!==t?this.Nv.reduce(((t,i)=>({min:Math.min(t.min,i.getValue()),max:Math.max(t.max,i.getValue())})),{min:es,max:hs}):{min:0,max:s.reduce(((t,s)=>Math.max(t,i.reduce(((t,i)=>i.category!==s?t:void 0!==i.value?t+i.value:t),0))),0)},this.XD&&(this.$D=this.XD.min>=0?"positive":this.XD.max<=0?"negative":"bipolar",("bipolar"===this.$D||"negative"===this.$D)&&this.QD))throw new Error("LightningChart JS BarChart bipolar/negative data + logarithmic value axis combination not supported.");this.vB(this.Nv),this.iB.clear(),this.sB.clear(),this.rB=!0,this.us.xs()}setCategoryLabels(t){const i="function"==typeof t?this.hB?t(this.hB):this.hB:t;return this.hB=i?{...this.qi.barChartCategoryLabels,...i}:void 0,this.iB.clear(),this.us.xs(),this}getCategoryLabels(){return this.hB}setValueLabels(t){var i;const s="function"==typeof t?this.jD?t(this.jD):this.jD:t,e=(null==s?void 0:s.position)||(null===(i=this.jD)||void 0===i?void 0:i.position);return s&&e?"after-bar"===e?this.jD={...this.qi.barChartValueLabelsAfterBars,...s}:"inside-bar"!==e&&"inside-bar-start"!==e&&"inside-bar-centered"!==e&&"inside-bar-end"!==e||(this.jD={...this.qi.barChartValueLabelsInsideBars,...s}):this.jD=void 0,this.sB.clear(),this.us.xs(),this}getValueLabels(){return this.jD}setLabelFittingEnabled(t){return this.oB=t,this.us.xs(),this}getLabelFittingEnabled(){return this.oB}getBar(t,i){if(("groups"===this.nB||"stacks"===this.nB)&&void 0===i)throw new Error("LightningChart JS BarChart.getBar() | `subCategory` parameter is required for grouped and stacked bar charts!");const s=this.Nv.find((s=>s.category===t&&(void 0===i||i===s.subCategory)));if(!s)throw new Error(`BarChart.getBar() no such bar: "${t}" ${i?`"${i}"`:""}`);return s}getBars(){return this.Nv}setSorting(t){this.eB=t;const i=this.Nv.slice();return this.Nv.length=0,this.Nv.push(...Gi(this.cB.map((t=>i.find((i=>i.category===t.category&&(void 0===t.subCategory||t.subCategory===i.subCategory))))))),this.vB(this.Nv),this.us.xs(),this}getSorting(){return this.eB}setAnimationCategoryPosition(t,i=1){return this.lB=t?{speed:i}:void 0,this.us.xs(),this}setAnimationValues(t,i=1){return this.Rm=t?{speed:i}:void 0,this.us.xs(),this}translateCoordinate(t,i,s){if(s&&le(t)&&ae(i))return super.translateCoordinate(t,i,s);const e=i;let h;if(oe(t))h=this.us.Go(t);else if(le(t)){const i=pt(t,this.Mg,this.us.ft);h={engineX:i.x,engineY:i.y}}else{if(!Yf(t))throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Input coordinate system not recognized.");{const i=pt(this.Rs.toPoint(t.iCategory,t.value),this.YD,this.us.ft);h={engineX:i.x,engineY:i.y}}}if(ne(e))return this.us.Uo(h);if("barChart"===e){const t=pt({x:h.engineX,y:h.engineY},this.us.ft,this.YD);return{iCategory:this.Rs.getWidth(t),value:this.Rs.getHeight(t)}}if(ae(e))return pt({x:h.engineX,y:h.engineY},this.us.ft,this.Mg);throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Target coordinate system not recognized.")}nf(){if("columns"===this.nB)return this.Nv;const t=Ni(Gi(this.Nv.map((t=>t.subCategory))));return Gi(t.map((t=>{const i=this.Nv.filter((i=>i.subCategory===t)),s=i[0];if(s)return(t=>{let i=!1;t.forEach((s=>s.onHighlight(((e,h)=>{i||(i=!0,t.forEach((t=>s!==t?t.setHighlight(h):void 0)),i=!1)})))),t.forEach((i=>i.onDispose((()=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)}))))})(i),{attach(e,h){return Wi(e,i,{toggleVisibilityOnClick:!0,label:t,style:s.getFillStyle()}),this}}})))}Ee(t){var i,s;super.Ee(t);const e=this.yB.Ip(),h=this.mB.Ip(),r=this.Nv.filter((t=>t.getVisible()&&t.qD)),n=Ni(r.map((t=>t.category))),o=Ni(Gi(r.map((t=>t.subCategory)))),a=5e-4*t*((null===(i=this.lB)||void 0===i?void 0:i.speed)||0),l=.003*t*((null===(s=this.lB)||void 0===s?void 0:s.speed)||0),u=this.valueAxis.ft,c=u instanceof te?(t,i)=>{var s;return fe(t,i,u,(null===(s=this.Rm)||void 0===s?void 0:s.speed)||0)}:(t,i)=>{var s;return Ae(t,i,u,(null===(s=this.Rm)||void 0===s?void 0:s.speed)||0)};let d;"columns"===this.nB?d=r.map((t=>({bar:t,position:{category:n.indexOf(t.category),valueStart:this.QD?1e-6:0,valueEnd:t.value}}))):"groups"===this.nB?d=r.map((t=>{const i=n.indexOf(t.category),s=o.indexOf(t.subCategory),e=1/(o.length+2*(o.length+1)*this.uB),h=this.uB*e;return{bar:t,position:{category:i+(s-(o.length-1)/2)*(e+h),valueStart:this.QD?1e-6:0,valueEnd:t.value}}})):(d=[],n.forEach(((t,i)=>{const s=r.filter((i=>i.category===t));let e=this.QD?1e-6:0;s.forEach(((i,s)=>{d.push({bar:i,position:{category:n.indexOf(t),valueStart:e,valueEnd:e+i.value}}),e+=i.value}))}))),d.forEach((t=>{const{bar:i,position:s}=t;let e,h,r=this.aB.get(i);void 0===r&&(r=s);const n=s.valueStart;if(this.lB&&r.category!==s.category){const t=Math.sign(s.category-r.category);e=r.category+a*t+l*(s.category-r.category),t!==Math.sign(s.category-e)&&(e=s.category)}else e=s.category;if(this.Rm&&r.valueEnd!==s.valueEnd){const t=Math.sign(s.valueEnd-r.valueEnd);h=c(r.valueEnd,s.valueEnd),t!==Math.sign(s.valueEnd-h)&&(h=s.valueEnd)}else h=s.valueEnd;this.aB.set(i,{category:e,valueStart:n,valueEnd:h}),e===s.category&&h===s.valueEnd||this.us.xs(!0),e===r.category&&h===r.valueEnd||(this.rB=!0)})),Ga.Hy(this.wh,this.Vy);const f=r.length>0;this.categoryAxis.Lr(),this.valueAxis.Lr();const A=this.categoryAxis.setVisible(f).Vs(),g=this.valueAxis.setVisible(f).Vs(h),{labelMarginBeforeCategoryAxisPixels:y}=f?this.SB(n,r,e,h):{labelMarginBeforeCategoryAxisPixels:0};this.categoryAxis.Ee(A,e,h,{labelMarginBeforeCategoryAxisPixels:y}),this.valueAxis.Ee(g);const m=this.categoryAxis.getThickness(),p=Jt(A.Zd+y,void 0!==m.min?m.min:0,void 0!==m.max?m.max:es),v={x:Math.min(this.YD.x.getInnerStart(),this.YD.x.getInnerEnd()),y:Math.min(this.YD.y.getInnerStart(),this.YD.y.getInnerEnd())},S=Math.max(this.YD.x.getInnerStart(),this.YD.x.getInnerEnd()),b=Math.max(this.YD.y.getInnerStart(),this.YD.y.getInnerEnd()),x={x:S-v.x,y:b-v.y};this.Hv.ze(v),this.Hv.tt(x),this.Xv.ze(v),this.Xv.tt(x),super.Ry(),this.hp.Ee(!1,this.Nv,void 0);const M=Ga.Yy(this.wh,this.Vy);if(this.YD.Ei([this.Xt.bottom+this.Fa.bottom+("vertical"===this.Rs.AB?p:0),this.Xt.top+this.Fa.top+M+("horizontal"===this.Rs.AB?g.Zd:0)]),this.YD.Ri([this.Xt.left+this.Fa.left+this.Rs.getHeight({x:p,y:g.Zd}),this.Xt.right+this.Fa.right]),this.dB.pb({x:this.YD.x.si(),y:this.YD.y.si(),width:this.YD.x.hi(),height:this.YD.y.hi()}),this.gy&&this.gy(),this.rB){const t=this.e_.Ip(),i="groups"===this.nB?1/(o.length+2*(o.length+1)*this.uB):1-2*this.uB;r.forEach((s=>{const e=this.aB.get(s);if(void 0===e)return;const h=e.category-.5*i,r=e.category+.5*i,n=[this.Rs.toPoint(h,e.valueStart),this.Rs.toPoint(h,e.valueEnd),this.Rs.toPoint(r,e.valueEnd),this.Rs.toPoint(r,e.valueStart)];t.add({Qo:s.Qo,vertices:n,bar:s},{fillStyle:s.Fe,strokeStyle:s.Ie})})),t.finishPlot()}e.finishPlot(),h.finishPlot(),this.rB=!1}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationCategoryPosition(t),this.setAnimationValues(t),this.valueAxis.setAnimationsEnabled(t),this.categoryAxis.setAnimationsEnabled(t),this}dispose(){return this.fB.W(),this.dB.W(),this.hp.W(),super.dispose()}vB(t){const i=this.eB;i&&t.sort(((s,e)=>i({category:s.category,value:t.reduce(((t,i)=>t+(i.category===s.category&&i.value||0)),0)},{category:e.category,value:t.reduce(((t,i)=>t+(i.category===e.category&&i.value||0)),0)})))}SB(t,i,s,e){let h=0;const r=this.hB,n=this.jD,o=this.valueAxis.getInterval(),a=this.Rs.getWidth({x:this.YD.x.hi(),y:this.YD.y.hi()});if(r&&r.labelFillStyle!==O){const n=r.tickLength+r.labelMargin,l=this.Rs.toPoint(0,1),u={Vd:t.map(((t,s)=>{const e=i.reduce(((i,s)=>s.category!==t?i:i+s.value),0),h=r.formatter(t,e);if(!h)return;const a=s;return void 0!==a?{text:h,position:this.Rs.toPoint(a,this.valueAxis.ft.gi(o.start,-n)),alignment:l,rotation:r.labelRotation,sizePixels:this.bB(t,e)}:void 0})),Qu:r.labelFont,ft:this.YD},c=u?this.oB?Hf(u,a,this.Rs.getWidth):u.Vd:[];c.forEach((t=>{t&&s.add().vr(t.text).ze(t.position).ja(t.alignment).ir(t.rotation).Le(r.labelFillStyle).tr(r.labelFont)})),r.tickStyle!==dt&&0!==r.tickLength&&c.forEach((t=>{if(!t)return;const i=this.Rs.getWidth(t.position);e.add({positions:[this.Rs.toPoint(i,this.valueAxis.ft.getInnerStart()),this.Rs.toPoint(i,this.valueAxis.ft.gi(o.start,-r.tickLength))]},{lineStyle:r.tickStyle})})),h=c.reduce(((t,i)=>i?Math.max(t,this.Rs.getHeight(i.sizePixels)):t),0)+r.tickLength+r.labelMargin}if(n&&n.labelFillStyle!==O){let t;"after-bar"===n.position?t={Vd:i.map(((t,i)=>{const s=n.formatter(t,t.category,t.value);if(!s)return;const e=this.aB.get(t);return void 0!==e?{text:s,position:this.Rs.toPoint(e.category,this.valueAxis.ft.gi(e.valueEnd,n.labelMargin*Math.sign(e.valueEnd))),alignment:this.Rs.toPoint(0,-1*Math.sign(e.valueEnd)),rotation:n.labelRotation,sizePixels:this.xB(t)}:void 0})),Qu:n.labelFont,ft:this.YD}:"inside-bar"!==n.position&&"inside-bar-start"!==n.position&&"inside-bar-centered"!==n.position&&"inside-bar-end"!==n.position||(t={Vd:i.map(((t,i)=>{const s=n.formatter(t,t.category,t.value);if(!s)return;const e=this.aB.get(t);if(void 0===e)return;const h="bipolar"===this.$D?Math.sign(e.valueEnd):"negative"===this.$D?-1:1,r=this.Rs.toPoint(0,"inside-bar"===n.position||"inside-bar-end"===n.position?1*h:"inside-bar-centered"===n.position?0:-1*h);return{text:s,position:this.Rs.toPoint(e.category,"inside-bar"===n.position||"inside-bar-end"===n.position?this.valueAxis.ft.gi(e.valueEnd,-n.labelMargin*h):"inside-bar-centered"===n.position?(e.valueStart+e.valueEnd)/2:this.valueAxis.ft.gi(e.valueStart,n.labelMargin*h)),alignment:r,rotation:n.labelRotation,sizePixels:this.xB(t)}})),Qu:n.labelFont,ft:this.YD}),t&&(t?this.oB?Hf(t,a,this.Rs.getWidth):t.Vd:[]).forEach((t=>{t&&s.add().vr(t.text).ze(t.position).ja(t.alignment).ir(t.rotation).Le(n.labelFillStyle).tr(n.labelFont).setMouseInteractions(!1)}))}return{labelMarginBeforeCategoryAxisPixels:h}}bB(t,i){if(!this.hB||this.hB.labelFillStyle===O)return{x:0,y:0};const s=this.iB.get(t);if(s)return s;const e=this.hB.formatter(t,i),h=this.us.Hg.Yg(e,this.hB.labelFont,this.hB.labelRotation);return h.isEstimate?this.us.xs(!0):this.iB.set(t,h),h}xB(t){if(!this.jD||this.jD.labelFillStyle===O)return{x:0,y:0};const i=this.sB.get(t);if(i)return i;const s=this.us.Hg.Yg(this.jD.formatter(t,t.category,t.value),this.jD.labelFont,this.jD.labelRotation);return s.isEstimate?this.us.xs(!0):this.sB.set(t,s),s}ZD(){return this.Nv.reduce(((t,i)=>{const s=this.xB(i);return{x:Math.max(t.x,s.x),y:Math.max(t.y,s.y)}}),{x:0,y:0})}tB(){this.rB=!0,this.us.xs()}getMinimumSize(){return{x:200,y:200}}}const $f={Horizontal:"horizontal",Vertical:"vertical"},jf={Disabled:void 0,None:void 0,Ascending:(t,i)=>t.value-i.value,Descending:(t,i)=>i.value-t.value,Alphabetical:(t,i)=>t.category.localeCompare(i.category)},Zf={...jo,AB:"vertical",JD:-1,KD:1},Qf={...Zo,AB:"horizontal",JD:1,KD:-1},Jf=(t,i,s)=>{const e=[[i.bar]],h=t.valueAxis.getTitle();return h&&e.push([h]),i.subCategory?e.push([i.subCategory,"",{text:ce(t.valueAxis.formatValue(i.bar.getValue()),t.valueAxis),font:{weight:"bold"}}]):e.push({text:ce(t.valueAxis.formatValue(i.bar.getValue()),t.valueAxis),font:{weight:"bold"}}),e},Kf={XY:Yc,Spider:el,BarChart:hl,Map:al,Polar:ol,D3:ru},qf={Angola:{name:"Angola",ISO_A3:"AGO"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Gabon:{name:"Gabon",ISO_A3:"GAB"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Namibia:{name:"Namibia",ISO_A3:"NAM"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Oman:{name:"Oman",ISO_A3:"OMN"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},Somalia:{name:"Somalia",ISO_A3:"SOM"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"}},tA={Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Armenia:{name:"Armenia",ISO_A3:"ARM"},Australia:{name:"Australia",ISO_A3:"AUS"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},China:{name:"China",ISO_A3:"CHN"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},India:{name:"India",ISO_A3:"IND"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Nepal:{name:"Nepal",ISO_A3:"NPL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Philippines:{name:"Philippines",ISO_A3:"PHL"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Palestine:{name:"Palestine",ISO_A3:"PSE"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Russia:{name:"Russia",ISO_A3:"RUS"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Singapore:{name:"Singapore",ISO_A3:"SGP"},Syria:{name:"Syria",ISO_A3:"SYR"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Yemen:{name:"Yemen",ISO_A3:"YEM"}},iA={"New South Wales":{name:"New South Wales"},Victoria:{name:"Victoria"},Queensland:{name:"Queensland"},"South Australia":{name:"South Australia"},"Western Australia":{name:"Western Australia"},Tasmania:{name:"Tasmania"},"Northern Territory":{name:"Northern Territory"},"Australian Capital Territory":{name:"Australian Capital Territory"},"Other Territories":{name:"Other Territories"}},sA={"British Columbia":{name:"British Columbia"},Quebec:{name:"Quebec"},Nunavut:{name:"Nunavut"},"Prince Edward Island":{name:"Prince Edward Island"},Saskatchewan:{name:"Saskatchewan"},Yukon:{name:"Yukon"},Manitoba:{name:"Manitoba"},Ontario:{name:"Ontario"},"New Brunswick":{name:"New Brunswick"},"Northwest Territories":{name:"Northwest Territories"},Alberta:{name:"Alberta"},"Newfoundland and Labrador":{name:"Newfoundland and Labrador"},"Nova Scotia":{name:"Nova Scotia"}},eA={Albania:{name:"Albania",ISO_A3:"ALB"},Austria:{name:"Austria",ISO_A3:"AUT"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Denmark:{name:"Denmark",ISO_A3:"DNK"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Finland:{name:"Finland",ISO_A3:"FIN"},France:{name:"France",ISO_A3:"FRA"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Greece:{name:"Greece",ISO_A3:"GRC"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Italy:{name:"Italy",ISO_A3:"ITA"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Malta:{name:"Malta",ISO_A3:"MLT"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Poland:{name:"Poland",ISO_A3:"POL"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Romania:{name:"Romania",ISO_A3:"ROU"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Russia:{name:"Russia",ISO_A3:"RUS"},Turkey:{name:"Turkey",ISO_A3:"TUR"}},hA={Aruba:{name:"Aruba",ISO_A3:"ABW"},Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},Angola:{name:"Angola",ISO_A3:"AGO"},Anguilla:{name:"Anguilla",ISO_A3:"AIA"},Albania:{name:"Albania",ISO_A3:"ALB"},Aland:{name:"Aland",ISO_A3:"ALA"},Andorra:{name:"Andorra",ISO_A3:"AND"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Argentina:{name:"Argentina",ISO_A3:"ARG"},Armenia:{name:"Armenia",ISO_A3:"ARM"},"American Samoa":{name:"American Samoa",ISO_A3:"ASM"},Antarctica:{name:"Antarctica",ISO_A3:"ATA"},"French Southern and Antarctic Lands":{name:"French Southern and Antarctic Lands",ISO_A3:"ATF"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},Australia:{name:"Australia",ISO_A3:"AUS"},Austria:{name:"Austria",ISO_A3:"AUT"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belize:{name:"Belize",ISO_A3:"BLZ"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},Canada:{name:"Canada",ISO_A3:"CAN"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Chile:{name:"Chile",ISO_A3:"CHL"},China:{name:"China",ISO_A3:"CHN"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Cyprus No Mans Area":{name:"Cyprus No Mans Area",ISO_A3:"-99"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},"Cook Islands":{name:"Cook Islands",ISO_A3:"COK"},Colombia:{name:"Colombia",ISO_A3:"COL"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Curaçao":{name:"Curaçao",ISO_A3:"CUW"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},"Northern Cyprus":{name:"Northern Cyprus",ISO_A3:"-99"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Dominica:{name:"Dominica",ISO_A3:"DMA"},Denmark:{name:"Denmark",ISO_A3:"DNK"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},"Dhekelia Sovereign Base Area":{name:"Dhekelia Sovereign Base Area",ISO_A3:"-99"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Finland:{name:"Finland",ISO_A3:"FIN"},Fiji:{name:"Fiji",ISO_A3:"FJI"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},France:{name:"France",ISO_A3:"FRA"},"Faroe Islands":{name:"Faroe Islands",ISO_A3:"FRO"},"Federated States of Micronesia":{name:"Federated States of Micronesia",ISO_A3:"FSM"},Gabon:{name:"Gabon",ISO_A3:"GAB"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Guernsey:{name:"Guernsey",ISO_A3:"GGY"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Greece:{name:"Greece",ISO_A3:"GRC"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},Guam:{name:"Guam",ISO_A3:"GUM"},Guyana:{name:"Guyana",ISO_A3:"GUY"},"Hong Kong S.A.R.":{name:"Hong Kong S.A.R.",ISO_A3:"HKG"},"Heard Island and McDonald Islands":{name:"Heard Island and McDonald Islands",ISO_A3:"HMD"},Honduras:{name:"Honduras",ISO_A3:"HND"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},"Isle of Man":{name:"Isle of Man",ISO_A3:"IMN"},India:{name:"India",ISO_A3:"IND"},"Indian Ocean Territories":{name:"Indian Ocean Territories",ISO_A3:"-99"},"British Indian Ocean Territory":{name:"British Indian Ocean Territory",ISO_A3:"IOT"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Israel:{name:"Israel",ISO_A3:"ISR"},Italy:{name:"Italy",ISO_A3:"ITA"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},Jersey:{name:"Jersey",ISO_A3:"JEY"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},"Baykonur Cosmodrome":{name:"Baykonur Cosmodrome",ISO_A3:"-99"},"Siachen Glacier":{name:"Siachen Glacier",ISO_A3:"-99"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},Kiribati:{name:"Kiribati",ISO_A3:"KIR"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},Liechtenstein:{name:"Liechtenstein",ISO_A3:"LIE"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},"Macao S.A.R":{name:"Macao S.A.R",ISO_A3:"MAC"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Mexico:{name:"Mexico",ISO_A3:"MEX"},"Marshall Islands":{name:"Marshall Islands",ISO_A3:"MHL"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},"Northern Mariana Islands":{name:"Northern Mariana Islands",ISO_A3:"MNP"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Namibia:{name:"Namibia",ISO_A3:"NAM"},"New Caledonia":{name:"New Caledonia",ISO_A3:"NCL"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Niue:{name:"Niue",ISO_A3:"NIU"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Nepal:{name:"Nepal",ISO_A3:"NPL"},"New Zealand":{name:"New Zealand",ISO_A3:"NZL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Panama:{name:"Panama",ISO_A3:"PAN"},"Pitcairn Islands":{name:"Pitcairn Islands",ISO_A3:"PCN"},Peru:{name:"Peru",ISO_A3:"PER"},"Spratly Islands":{name:"Spratly Islands",ISO_A3:"-99"},Philippines:{name:"Philippines",ISO_A3:"PHL"},Palau:{name:"Palau",ISO_A3:"PLW"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},Poland:{name:"Poland",ISO_A3:"POL"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Palestine:{name:"Palestine",ISO_A3:"PSE"},"French Polynesia":{name:"French Polynesia",ISO_A3:"PYF"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Romania:{name:"Romania",ISO_A3:"ROU"},Russia:{name:"Russia",ISO_A3:"RUS"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},Singapore:{name:"Singapore",ISO_A3:"SGP"},"South Georgia and South Sandwich Islands":{name:"South Georgia and South Sandwich Islands",ISO_A3:"SGS"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Solomon Islands":{name:"Solomon Islands",ISO_A3:"SLB"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Somalia:{name:"Somalia",ISO_A3:"SOM"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},"Sao Tome and Principe":{name:"Sao Tome and Principe",ISO_A3:"STP"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},"East Timor":{name:"East Timor",ISO_A3:"TLS"},Tonga:{name:"Tonga",ISO_A3:"TON"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Tuvalu:{name:"Tuvalu",ISO_A3:"TUV"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},"United States Minor Outlying Islands":{name:"United States Minor Outlying Islands",ISO_A3:"UMI"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"US Naval Base Guantanamo Bay":{name:"US Naval Base Guantanamo Bay",ISO_A3:"-99"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Vanuatu:{name:"Vanuatu",ISO_A3:"VUT"},"Wallis and Futuna":{name:"Wallis and Futuna",ISO_A3:"WLF"},"Akrotiri Sovereign Base Area":{name:"Akrotiri Sovereign Base Area",ISO_A3:"-99"},Samoa:{name:"Samoa",ISO_A3:"WSM"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"}},rA={Alabama:{name:"Alabama"},Alaska:{name:"Alaska"},Arizona:{name:"Arizona"},Arkansas:{name:"Arkansas"},California:{name:"California"},Colorado:{name:"Colorado"},Connecticut:{name:"Connecticut"},Delaware:{name:"Delaware"},"District of Columbia":{name:"District of Columbia"},Florida:{name:"Florida"},Georgia:{name:"Georgia"},Hawaii:{name:"Hawaii"},Idaho:{name:"Idaho"},Illinois:{name:"Illinois"},Indiana:{name:"Indiana"},Iowa:{name:"Iowa"},Kansas:{name:"Kansas"},Kentucky:{name:"Kentucky"},Louisiana:{name:"Louisiana"},Maine:{name:"Maine"},Maryland:{name:"Maryland"},Massachusetts:{name:"Massachusetts"},Michigan:{name:"Michigan"},Minnesota:{name:"Minnesota"},Mississippi:{name:"Mississippi"},Missouri:{name:"Missouri"},Montana:{name:"Montana"},Nebraska:{name:"Nebraska"},Nevada:{name:"Nevada"},"New Hampshire":{name:"New Hampshire"},"New Jersey":{name:"New Jersey"},"New Mexico":{name:"New Mexico"},"New York":{name:"New York"},"North Carolina":{name:"North Carolina"},"North Dakota":{name:"North Dakota"},Ohio:{name:"Ohio"},Oklahoma:{name:"Oklahoma"},Oregon:{name:"Oregon"},Pennsylvania:{name:"Pennsylvania"},"Rhode Island":{name:"Rhode Island"},"South Carolina":{name:"South Carolina"},"South Dakota":{name:"South Dakota"},Tennessee:{name:"Tennessee"},Texas:{name:"Texas"},Utah:{name:"Utah"},Vermont:{name:"Vermont"},Virginia:{name:"Virginia"},Washington:{name:"Washington"},"West Virginia":{name:"West Virginia"},Wisconsin:{name:"Wisconsin"},Wyoming:{name:"Wyoming"}},nA={Anguilla:{name:"Anguilla",ISO_A3:"AIA"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Canada:{name:"Canada",ISO_A3:"CAN"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},Dominica:{name:"Dominica",ISO_A3:"DMA"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Mexico:{name:"Mexico",ISO_A3:"MEX"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"}},oA={Argentina:{name:"Argentina",ISO_A3:"ARG"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Chile:{name:"Chile",ISO_A3:"CHL"},Colombia:{name:"Colombia",ISO_A3:"COL"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},Guyana:{name:"Guyana",ISO_A3:"GUY"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Panama:{name:"Panama",ISO_A3:"PAN"},Peru:{name:"Peru",ISO_A3:"PER"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Honduras:{name:"Honduras",ISO_A3:"HND"}},aA={World:hA,USA:rA,NorthAmerica:nA,SouthAmerica:oA,Canada:sA,Europe:eA,Asia:tA,Africa:qf,Australia:iA},lA=(t,i)=>Math.abs(t)+Math.abs(i);function uA(t,i){const s=t.reduce(lA,0),e=(h=t,Math.max(...h.map((t=>t))));var h;const r=(t=>Math.min(...t.map((t=>t))))(t);return Math.max(i**2*e/s**2,s**2/(i**2*r))}const cA=({height:t,width:i})=>t>i?{value:i,vertical:!1}:{value:t,vertical:!0},dA=({data:t,dimensions:i})=>{const{x:s,y:e,width:h,height:r}=i,n=t.map((t=>t.value)).reduce(lA,0),o=t.map((t=>t.animatedValue)).reduce(lA,0),a=t.map((t=>t.animatedValue*r*h/o)),l=a.reduce(((t,i)=>t+i),0),u=a.map((t=>t/l*100)),c=a.filter(((t,i)=>u[i])),d={children:[],id:0,parentID:-1,name:"Main Rectangle",value:n,animatedValue:o,x:s,y:e,width:h,height:r,nodeIndex:-1,userNode:{name:"Main Rectangle",value:n}};if(1===t.length){const s={...t[0],x:i.x,y:i.y,width:i.width,height:i.height,userNode:{...t[0].userNode,value:t[0].value}};d.children.push(s)}else AA(c,cA(d).value,t,d);return d.children},fA=(t,i,s,e,h)=>{const r=t.reduce(lA,0)/i;t.forEach(((t,i)=>{const n=Math.abs(t)/r,{x:o,y:a,children:l}=h,u=e[l.length],c={...u,x:o,y:a,width:s?r:n,height:s?n:r,userNode:{...u.userNode,value:u.value}};s?h.y-=n:h.x+=n,l.push(c)})),s?(h.x+=r,h.y+=i,h.width-=r):(h.x-=i,h.y-=r,h.height-=r)},AA=(t,i,s,e)=>{const h=[{children:t,width:i,row:[]}];for(;h.length>0;){const t=h.pop();if(!t)continue;const{children:i,width:r,row:n}=t;let o=0;const a=[...n];for(;o<i.length;){const t=[...a,i[o]],n=uA(a,r),l=uA(t,r);if(!(0===a.length||n>l)){fA(a,r,cA(e).vertical,s,e),h.push({children:i.slice(o),width:cA(e).value,row:[]});break}a.push(i[o]),o+=1}o===i.length&&fA(a,r,cA(e).vertical,s,e)}};class gA extends Na{constructor(t,i,s,e,h,r,n){if(super(t,i,s,i.zy("treeMapChart bg",0),e,i.us.qi.treeMapChartBackgroundFillStyle||i.us.qi.chartXYSeriesBackgroundFillStyle,i.us.qi.treeMapChartBackgroundStrokeStyle||i.us.qi.chartXYBackgroundStrokeStyle,i.us.qi.treeMapChartTitleFont||i.us.qi.chartXYTitleFont,i.us.qi.treeMapChartTitleFillStyle||i.us.qi.chartXYTitleFillStyle,n),this.MB=new Map,this._B=[],this.wB={},this.CB=f([]),this.Rm={speed:1},this.kB=es,this.TB=!0,this.FB="Go Back",this.IB=[],this.PB=this.qi.treeMapChartPathLabelFillStyle||this.qi.uiTextFillStyle,this.DB=this.qi.treeMapChartPathLabelFont||this.qi.uiTextFont,this.BB=this.qi.treeMapChartLabelHeaderFillStyle||this.qi.uiTextFillStyle,this.LB=this.qi.treeMapChartLabelHeaderFont||this.qi.uiTextFont,this.RB=this.qi.treeMapChartLabelFillStyle||this.qi.uiTextFillStyle,this.EB=this.qi.treeMapChartLabelFont||this.qi.uiTextFont,this.Hi=!0,this.Hb=!0,this.zB=!1,this.VB=this.qi.treeMapChartParentColor||F,this.OB=this.qi.treeMapChartNodeStrokeStyle||this.qi.uiBackgroundStrokeStyle,this.onNodeMouseEnter=t=>this.L.on("mouseEnter",t),this.onNodeMouseLeave=t=>this.L.on("mouseLeave",t),this.onNodeMouseClick=t=>this.L.on("mouseClick",t),this.onNodeMouseDoubleClick=t=>this.L.on("mouseDoubleClick",t),this.onNodeMouseDown=t=>this.L.on("mouseDown",t),this.onNodeMouseUp=t=>this.L.on("mouseUp",t),this.onNodeMouseMove=t=>this.L.on("mouseMove",t),this.offNodeMouseEnter=t=>this.L.off(t,"mouseEnter"),this.offNodeMouseLeave=t=>this.L.off(t,"mouseLeave"),this.offNodeMouseClick=t=>this.L.off(t,"mouseClick"),this.offNodeMouseDoubleClick=t=>this.L.off(t,"mouseDoubleClick"),this.offNodeMouseDown=t=>this.L.off(t,"mouseDown"),this.offNodeMouseUp=t=>this.L.off(t,"mouseUp"),this.offNodeMouseMove=t=>this.L.off(t,"mouseMove"),this.offNodeMouseDragStart=t=>this.L.off(t,"mouseDragStart"),this.offNodeMouseDrag=t=>this.L.off(t,"mouseDrag"),this.offNodeMouseDragStop=t=>this.L.off(t,"mouseDragStop"),this.offNodeMouseWheel=t=>this.L.off(t,"mouseWheel"),this.jb=(t,i,s,e,h)=>{this.us.xs(),this.zB=!0},this.Mt=(t,i)=>{const s=this.NB(i);s&&(this.yx=this.GB(s,t),this.Hb&&this.us.ls.Cs(i,!0),this.TB&&this.engine.setMouseStyle(Ke.Point),this.L.emit("mouseEnter",this,t,this.yx),this.us.xs())},this._t=(t,i)=>{this.NB(i)&&(this.yx=void 0,this.Hb&&this.us.ls.Cs(i,!1),this.engine.setMouseStyle(Ke.Default),this.L.emit("mouseLeave",this,t,this.yx),this.us.xs())},this.Ft=(t,i)=>{const s=this.NB(i);s&&(this.yx=this.GB(s,t),this.Hb&&this.us.ls.Cs(i,!0),this.TB&&this.engine.setMouseStyle(Ke.Point),this.L.emit("mouseEnter",this,t,this.yx),this.us.xs())},this.wt=(t,i)=>{const s=this.NB(i);if(s){if(this.TB){const i=(null==s?void 0:s.children.length)?s:s.parentID?this.wB[s.parentID]:void 0;i&&(this.CB.M([i]),this.yx=void 0,this.L.emit("viewChange",this.CB._()),this.zB=!0),t&&mi(t)}this.L.emit("mouseClick",this,t,this.GB(s,t)),this.us.xs()}},this.Ct=(t,i)=>{const s=this.NB(i);s&&this.L.emit("mouseDoubleClick",this,t,this.GB(s,t))},this.kt=(t,i)=>{const s=this.NB(i);s&&this.L.emit("mouseDown",this,t,this.GB(s,t))},this.Tt=(t,i)=>{const s=this.NB(i);s&&this.L.emit("mouseUp",this,t,this.GB(s,t))},this.Pt=(t,i,s)=>{const e=this.NB(s);e&&this.L.emit("mouseDragStart",this,t,i,this.GB(e,t))},this.It=(t,i,s,e,h)=>{const r=this.NB(h);r&&this.L.emit("mouseDrag",this,t,i,s,e,this.GB(r,t))},this.Dt=(t,i,s,e)=>{const h=this.NB(e);h&&this.L.emit("mouseDragStop",this,t,i,s,this.GB(h,t))},this.Bt=(t,i)=>{const s=this.NB(i);s&&this.L.emit("mouseWheel",this,t,this.GB(s,t))},this.Lt=(t,i)=>{const s=this.NB(i);s&&(this.yx=this.GB(s,t),this.Hb&&this.us.ls.Cs(i,!0),this.L.emit("touchStart",this,t,this.yx),this.us.xs(),mi(t))},this.Rt=(t,i)=>{const s=this.NB(i);s&&(this.yx=this.GB(s,t),this.Hb&&this.us.ls.Cs(i,!0),this.L.emit("touchMove",this,t,this.yx),this.us.xs(),mi(t))},this.Et=(t,i)=>{const s=this.NB(i);if(s){if(this.yx=void 0,this.TB){const i=(null==s?void 0:s.children.length)?s:s.parentID?this.wB[s.parentID]:void 0;i&&(this.CB.M([i]),this.L.emit("viewChange",this.CB._()),this.zB=!0),t&&mi(t)}this.Hb&&this.us.ls.Cs(i,!1),this.L.emit("touchEnd",this,t,this.yx),this.us.xs(),mi(t)}},this.UB=t=>{const i=this.wB[this.IB[t].id]?[this.wB[this.IB[t].id]]:this._B;this.CB.M(i),this.L.emit("viewChange",i),this.zB=!0,this.us.xs()},this.qi.treeMapChartNodeColors)this.WB=this.qi.treeMapChartNodeColors;else{const t=this.qi.pointSeriesFillStyle,i=t=>Y(t)?t.getColor():F;this.WB="function"==typeof t?new Array(5).fill(0).map(((s,e)=>i(t(e)))):[i(t)]}this.us.Qn(Yo.Lf),this.tp=i.kb("TreeMapChart plotting",0),this.sp=i.kb("TreeMap UI plotting",1),this.onResize(this.jb),this.wh.vr("TreeMap Chart");const o=i.ep(),a=qt(r?r.cursorBuilder:void 0,nl);this.hp=Ya(this,o,a.wm(o,this.uiScale,this.uiScale,Zt,this.qi),void 0,"show-pointed",yA,(()=>0)),this.YB=this.es.Dg(),this.Ey(h,this.uiScale),this.nx=this.tp.Jp(this.Mg).Le(new H).Be(this.OB),this.HB=this.us.ls.$r(this,{animationEnabled:!1!==(null==r?void 0:r.animationsEnabled)}),this.XB=new Pl((()=>this.sp.Ur(this.Mg).setMouseInteractions(!1))),this.$B=new Pl((()=>this.sp.Ur(this.uiScale))),this.nx.setMouseInteractions(this.Hi).setMouseEnterEventHandler(((t,i,s)=>this.Mt(i,s))).setMouseLeaveEventHandler(((t,i,s)=>this._t(i,s))).setMouseClickEventHandler(((t,i,s)=>this.wt(i,s))).setMouseDoubleClickEventHandler(((t,i,s)=>this.Ct(i,s))).setMouseDownEventHandler(((t,i,s)=>this.kt(i,s))).setMouseUpEventHandler(((t,i,s)=>this.Tt(i,s))).setMouseMoveEventHandler(((t,i,s)=>this.Ft(i,s))).setMouseDragStartEventHandler(((t,i,s,e)=>this.Pt(i,s,e))).setMouseDragEventHandler(((t,i,s,e,h,r)=>this.It(i,s,e,h,r))).setMouseDragStopEventHandler(((t,i,s,e,h)=>this.Dt(i,s,e,h))).setMouseWheelEventHandler(((t,i,s)=>this.Bt(i,s))).setTouchStartEventHandler(((t,i,s)=>this.Lt(i,s))).setTouchMoveEventHandler(((t,i,s)=>this.Rt(i,s))).setTouchEndEventHandler(((t,i,s)=>this.Et(i,s))),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled))}setData(t){t=Array.isArray(t)?t.slice():[t];const{jB:i}=(()=>{let t=0;return{jB:i=>{var s;const e=i.map(((t,i)=>({node:t,parent:null}))),h=[];for(;e.length>0;){const i=e.pop();if(!i)continue;const{node:r,parent:n}=i;t+=1;const o={id:t,parentID:null==n?void 0:n.id,name:r.name,value:Number(r.value)||0,animatedValue:Number(r.value)||0,children:[],nodeIndex:n?n.nodeIndex:-1,userNode:r};n?n.children.push(o):h.push(o),null===(s=r.children)||void 0===s||s.forEach((t=>{e.push({node:t,parent:o})}))}const r=t=>{t.children.forEach(r),t.children.length>0&&(t.value+=t.children.reduce(((t,i)=>t+i.value),0),t.animatedValue+=t.children.reduce(((t,i)=>t+i.animatedValue),0),t.children.sort(((t,i)=>i.animatedValue-t.animatedValue)))};h.forEach(r);const n=1===i.length?h[0].children:h;return n.sort(((t,i)=>i.animatedValue-t.animatedValue)),n.forEach(((t,i)=>{t.nodeIndex=i;const s=i=>{i.children.forEach((i=>{i.nodeIndex=t.nodeIndex,s(i)}))};s(t)})),h}}})(),s=i(t);return s.forEach((t=>{const i=this.wB[t.id];i&&this.ZB(t,i)})),this.yx=void 0,this.CB.M(s),this._B=s,this.wB=this.QB(s),this.zB=!0,this.us.xs(),this}setAnimationValues(t,i=1){return this.Rm=t?{speed:i}:void 0,this.us.xs(),this}setInitPathButtonText(t){return this.FB=t,this.zB=!0,this.us.xs(),this}setDisplayedLevelsCount(t){return this.kB=t,this.zB=!0,this.us.xs(),this}setDrillDownEnabled(t){return this.TB=t,this.zB=!0,this.us.xs(),this}setDrillDownNode(t){var i,s;if(this.yx=void 0,void 0===t)this.CB.M(this._B);else{const e=[...this._B];for(;e.length>0;){const h=e.pop();if(h){if(void 0!==h.value&&h.userNode===t||h.parentID&&Array.isArray(t)&&(null===(s=null===(i=this.wB[h.parentID])||void 0===i?void 0:i.userNode)||void 0===s?void 0:s.children)===t){const t=h.children.length?h:h.parentID?this.wB[h.parentID]:this._B[0];this.CB.M([t]);break}if(h.children)for(let t=h.children.length-1;t>=0;t-=1)e.push(h.children[t])}}}return this.L.emit("viewChange",this.CB._()),this.zB=!0,this.us.xs(),this}setNodeColoring(t){return t instanceof Array?(this.nx.Le(new H),this.WB=t):this.nx.Le(t),this.zB=!0,this.us.xs(),this}setParentNodeColor(t){return this.VB=t,this.zB=!0,this.us.xs(),this}setPathLabelFillStyle(t){return this.PB="function"==typeof t?t(this.PB):t,this.zB=!0,this.us.xs(),this}getPathLabelFillStyle(){return this.PB}setPathLabelFont(t){return Eh(t)?this.DB=t:this.DB=t(this.DB),this.zB=!0,this.us.xs(),this}getPathLabelFont(){return this.DB}setHeaderFont(t){return Eh(t)?this.LB=t:this.LB=t(this.LB),this.zB=!0,this.us.xs(),this}getHeaderFont(){return this.LB}setHeaderFillStyle(t){return this.BB="function"==typeof t?t(this.BB):t,this.zB=!0,this.us.xs(),this}getHeaderFillStyle(){return this.BB}setLabelFont(t){return Eh(t)?this.EB=t:this.EB=t(this.EB),this.zB=!0,this.us.xs(),this}getLabelFont(){return this.EB}setLabelFillStyle(t){return this.RB="function"==typeof t?t(this.RB):t,this.zB=!0,this.us.xs(),this}getLabelFillStyle(){return this.RB}setNodeBorderStyle(t){return this.nx.Be(t),this.zB=!0,this.us.xs(),this}getNodeBorderStyle(){return this.nx.vo()}setNodeEffect(t){return this.YB.bs(t),this.us.xs(),this}getNodeEffect(){return this.YB.Ms()}setCursor(t){return this.hp.setCursor(t),this}getCursor(){return this.hp.getCursor()}setCursorMode(t){return this.hp.setCursorMode(t),this}getCursorMode(){return this.hp.getCursorMode()}setCustomCursor(t){return this.hp.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.hp.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.hp.offCursorTargetChanged(t)}setCursorFormatting(t){return this.hp.setCursorFormatting(t),this}getCursorFormatting(){return this.hp.getCursorFormatting()}addCursor(t=nl){const i=this.wy(),s=t.wm(i,this.uiScale,this.uiScale,this.Sy(i),this.qi);return this.By(s),s}onNodeMouseDragStart(t){return this.L.on("mouseDragStart",t)}onNodeMouseDrag(t){return this.L.on("mouseDrag",t)}onNodeMouseDragStop(t){return this.L.on("mouseDragStop",t)}onNodeMouseWheel(t){return this.L.on("mouseWheel",t)}onNodeTouchStart(t){return this.L.on("touchStart",t)}onNodeTouchMove(t){return this.L.on("touchMove",t)}onNodeTouchEnd(t){return this.L.on("touchEnd",t)}onViewChange(t){return this.L.on("viewChange",t)}offNodeTouchStart(t){return this.L.off(t,"touchStart")}offNodeTouchMove(t){return this.L.off(t,"touchMove")}offNodeTouchEnd(t){return this.L.off(t,"touchEnd")}offViewChange(t){return this.L.off(t,"viewChange")}setMouseInteractions(t){return this.Hi=t,this.nx.setMouseInteractions(t),this}getMouseInteractions(){return this.Hi}setAnimationHighlight(t){return this.HB.Qr(t),this}getAnimationHighlight(){return this.HB.Jr()}setHighlightOnHover(t){return this.Hb=t,this}getHighlightOnHover(){return this.Hb}GB(t,i){const s=this.us.Go(i);return{cursorPosition:{pointMarker:{x:s.engineX,y:s.engineY},pointMarkerScale:this.us.ft,resultTable:{x:s.engineX,y:s.engineY},resultTableScale:this.us.ft},name:t.name,value:t.value,node:t.userNode}}getMinimumSize(){}nf(){return[this]}Ee(t){super.Ee(t),super.Ry(),Ga.Hy(this.wh,this.Vy);const i=Ga.Yy(this.wh,this.Vy);if(this.zB&&this.CB._().length){this.nx.Vt(),this.MB.clear(),this.HB.Zr(),this.gh&&this.JB(t);const s=dA({data:this.CB._(),dimensions:{x:0+this.Fa.left,y:this.Mg.y.getInnerEnd()-i-this.Fa.top,width:this.Mg.x.getInnerEnd()-this.Fa.right-this.Fa.left,height:this.Mg.y.getInnerEnd()-i-this.Fa.top-this.Fa.bottom}}),e=this.XB.Ip();this.KB(s,e),e.finishPlot(),this.qB(),this._B!==this.CB._()&&this._B.length>1&&this.IB.unshift({name:this.FB,id:0});let h=0;const r=this.$B.Ip(),n=this.DB;this.IB.forEach(((t,i)=>{const s=r.add(),e=this.us.Hg.Yg(t.name,n,0);s.vr(`← ${t.name}`).tr(n).ze({x:0,y:100}).ja({x:-1,y:1}).Nr({left:this.Fa.left+h,top:this.Fa.top,right:0,bottom:0}).Le(this.PB).setMouseClickEventHandler((t=>this.UB(i))).setMouseEnterEventHandler((()=>this.engine.setMouseStyle(Ke.Point))).setMouseLeaveEventHandler((()=>this.engine.setMouseStyle(Ke.Default))),h+=e.x+25})),r.finishPlot(),this.CB._().every((t=>t.value===t.animatedValue))?this.zB=!1:this.us.xs(!0)}return this.hp.Ee(!1,[],void 0,{explicitTarget:this.yx}),this}dispose(){return this.sp.W(),this.tp.W(),this.hp.W(),this.nx.dispose(),this.MB.clear(),this.XB.Dp(),this.$B.Dp(),super.dispose()}Z(){return super.Z(),this}J(){return super.J(),this}Kd(){return Di(this.nx.Qh())}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),Pi(t,this.qi,s,{}),this}KB(t,i,s=!1,e=0){const h=t.map(((t,i)=>({node:t,isChild:s,visibleDepth:e})));for(;h.length>0;){const t=h.pop();if(!t)continue;const{node:s,visibleDepth:e,opacity:r}=t,{x:n,y:o,height:a,width:l,children:u,animatedValue:c,name:d,nodeIndex:f}=s,A=this.WB,g=0===e&&1===this.CB._().length?this.VB:A[f%A.length],y=[{x:n,y:o},{x:n,y:o-a},{x:l+n,y:o-a},{x:l+n,y:o}],m=this.nx.jr().Tl(y).tL(g.setA(g.getA()*((null!=r?r:255)/255))).gx(c);this.MB.set(m,s),this.HB.jr(m,(t=>m.cs(t)));const p=n+5,v=o+25+5,S=Math.max(a-25-5,0),b=Math.max(l-5-5,0);if(u&&u.length&&e<this.kB&&b>15&&S>15){const t=dA({data:u,dimensions:{x:b>0?p:n,y:S>0?o-25:v,width:b,height:S}});for(let i=0;i<t.length;i+=1){const n=(255-(u.length>7?50:150))/(u.length-1),o=1===s.id&&1===this._B.length||this._B===this.CB._()?255:r?r/(e+1):255-i*n;h.push({node:t[i],isChild:!0,visibleDepth:e+1,opacity:o})}}const x=0===e&&1===this.CB._().length?this.BB:this.RB,M=0===e?this.LB:this.EB,_=this.iL(d,l-25,M),w=this.us.Hg.Yg(_,M,0),C=i.add();l-25>w.x&&a>25?C.vr(_).ze({x:n+5,y:o-2.5}).ja({x:-1,y:1}).Le(x).tr(M):C.vr("")}}QB(t){const i={},s=[...t];for(;s.length>0;){const t=s.pop();t&&(i[t.id]=t,t.children&&s.push(...t.children))}return i}NB(t){if(!this.zB&&t)return this.MB.get(t)}qB(){this.IB=[];const t=this.CB._()[0].id;let i=this.wB[t].parentID;for(;i;)this.IB.push({name:this.wB[i].name,id:i}),i=this.wB[i].parentID;return this.IB.reverse()}iL(t,i,s){let e=this.us.Hg.Yg(t,s,0).x;if(e<=i)return t;const h=t.split(" ");let r=t;for(;h.length>1&&e>i;)h.pop(),r=`${h.join(" ")}...`,e=this.us.Hg.Yg(r,s,0).x;if(e>i)for(r=`${h[0]}...`,e=this.us.Hg.Yg(r,s,0).x;r.length>3&&e>i;)r=`${r.substring(0,r.length-4)}...`,e=this.us.Hg.Yg(r,s,0).x;return r.length<=3&&e>i?"":r}JB(t){var i;const s=[...this._B];for(;s.length>0;){const e=s.pop();if(!e)continue;const h=e.value-e.animatedValue;if(Math.abs(h)<.0015*e.value||void 0===this.Rm)e.animatedValue=e.value;else{const s=h/255*((null===(i=this.Rm)||void 0===i?void 0:i.speed)||1)*t;e.animatedValue+=s,(h>0&&e.animatedValue>e.value||h<0&&e.animatedValue<e.value)&&(e.animatedValue=e.value)}e.children&&e.children.length>0&&s.push(...e.children)}}ZB(t,i){const s=[{current:t,previous:i}];for(;s.length>0;){const t=s.pop();if(!t)continue;const{current:i,previous:e}=t;i.animatedValue=this.gh?e.animatedValue:i.value,e.nodeIndex<0?i.nodeIndex=0:i.nodeIndex=e.nodeIndex;const h=new Map(e.children.map((t=>[t.id,t])));i.children.forEach(((t,i)=>{const r=h.get(t.id);s.push({current:t,previous:r||e})}))}}}const yA=(t,i,s)=>[[i.name],[{text:i.value.toString(),font:{weight:"bold"}}]];class mA extends Na{constructor(t,i,s,e,h,r,n){super(t,i,s,i.zy("gaugeChart bg",0),e,i.us.qi.gaugeChartBackgroundFillStyle,i.us.qi.gaugeChartBackgroundStrokeStyle,i.us.qi.gaugeChartTitleFont,i.us.qi.gaugeChartTitleFillStyle,r),this.eu=this.qi.gaugeChartStartAngle,this.hu=this.qi.gaugeChartEndAngle,this.sL={start:0,end:100},this.S=0,this.eL=[],this.hL=this.qi.gaugeChartBarThickness,this.rL=this.qi.gaugeChartValueIndicatorThickness,this.nL=this.qi.gaugeChartNeedleLength,this.oL=this.qi.gaugeChartNeedleThickness,this.aL=this.qi.gaugeChartNeedleFillStyle,this.lL=this.qi.gaugeChartNeedleStrokeStyle,this.uL=this.qi.gaugeChartRoundedEdges,this.cL=!0,this.dL=!0,this.fL=!0,this.AL=[],this.gL=[],this.yL=!0,this.mL=!0,this.Fm=this.S,this.pL=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.vL=this.qi.gaugeChartBarGradient,this.SL=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.bL=this.qi.gaugeChartTickFont,this.xL=this.qi.gaugeChartValueLabelFont,this.ML=this.qi.gaugeChartValueLabelFillStyle,this._L=this.qi.gaugeChartUnitLabelFont,this.wL=this.qi.gaugeChartUnitLabelFillStyle,this.CL=this.qi.gaugeChartTickFillStyle,this.kL=this.qi.gaugeChartBarColor,this.TL=this.qi.gaugeChartGlowColor,this.FL=this.qi.gaugeChartGlowColor.getA(),this.IL=1,this.PL=1,this.DL=this.qi.gaugeChartNeedleAlignment,this.BL=!1,this.LL=this.qi.gaugeChartGapBetweenBarAndValueIndicators,this.RL=this.qi.gaugeChartBarStrokeStyle,this.EL=!1,this.us.Qn(Yo.Sf),this.wh.vr("Gauge Chart"),this.Ey(h,this.Mg),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled)),this.zL=this.kL,this.VL=this.TL,this.OL=S(0,0,0,0),this.NL=this.es.Dg(),this.GL=this.es.Dg().bs(this.qi.effectsText),this.UL=this.vy.dc(this.Mg).Be(this.RL).setMouseInteractions(!1),this.WL=this.vy.ld(this.Mg).fu(0).He(360).mu(0).Be(dt).setMouseInteractions(!1),this.YL=this.Oy.Ye(this.Mg).We(this.qi.gaugeChartNeedleStrokeStyle).setMouseInteractions(!1),this.HL=this.Oy.Ye(this.Mg).We(new _e({thickness:this.oL,fillStyle:this.aL})).setMouseInteractions(!1),this.XL=this.Oy.Ur(this.Mg).tr(this.xL).Le(this.ML).setMouseInteractions(!1),this.$d=this.Oy.Ur(this.Mg).tr(this._L).Le(this.wL).vr("").setMouseInteractions(!1),this.$L=this.vy.Ur(this.Mg).tr(this.bL).Le(this.CL).setMouseInteractions(!1),this.jL=this.vy.Ur(this.Mg).tr(this.bL).Le(this.CL).setMouseInteractions(!1),this.NL.As([this.UL]),this.GL.As([this.XL,this.$d,this.$L,this.jL]),this.ZL(),this.onResize((()=>{this.BL=!0}))}ZL(){this.HL.We((t=>t.setThickness(this.oL))),this.YL.We((t=>t.setThickness(2*this.lL.getThickness()+this.oL)))}setAnimationsEnabled(t){return this.gh=t,this.mL=t,this.yL=t,this}setInterval(t,i){return this.sL={start:t,end:i},this.BL=!0,this.us.xs(),this}getInterval(){return this.sL}setTickFillStyle(t){return this.CL="function"==typeof t?t(this.CL):t,this.gL.forEach((i=>{i.start.Le(t),i.end.Le(t)})),this.$L.Le(t),this.jL.Le(t),this.BL=!0,this.us.xs(),this}getTickFillStyle(){return this.CL}setTickFont(t){return this.bL="function"==typeof t?t(this.bL):t,this.gL.forEach((i=>{i.start.tr(t),i.end.tr(t)})),this.$L.tr(t),this.jL.tr(t),this.BL=!0,this.us.xs(),this}getTickFont(){return this.bL}setTickFormatter(t){return this.pL=t,this.BL=!0,this.us.xs(),this}getTickFormatter(){return this.pL}setValueLabelFillStyle(t){return this.ML="function"==typeof t?t(this.ML):t,this.XL.Le(t),this.BL=!0,this.us.xs(),this}getValueLabelFillStyle(){return this.XL.Qh()}setValueLabelFont(t){return this.xL="function"==typeof t?t(this.xL):t,this.XL.tr(t),this.BL=!0,this.us.xs(),this}getValueLabelFont(){return this.XL.qh()}setValueFormatter(t){return this.SL="string"==typeof t?i=>t:t,this.BL=!0,this.us.xs(),this}getValueLabel(){return this.XL.kr()||this.SL}setUnitLabelFillStyle(t){return this.wL="function"==typeof t?t(this.wL):t,this.$d.Le(t),this.BL=!0,this.us.xs(),this}getUnitLabelFillStyle(){return this.$d.Qh()}setUnitLabelFont(t){return this._L="function"==typeof t?t(this._L):t,this.$d.tr(t),this.BL=!0,this.us.xs(),this}getUnitLabelFont(){return this.$d.qh()}setUnitLabel(t){return this.$d.vr(t),this.BL=!0,this.us.xs(),this}getUnitLabel(){return this.$d.kr()}setNeedleFillStyle(t){return this.aL="function"==typeof t?t(this.aL):t,this.HL.We((i=>i.setFillStyle(t))),this.BL=!0,this.us.xs(),this}getNeedleFillStyle(){return this.HL.Su().getFillStyle()}setNeedleThickness(t){return this.oL=t,this.ZL(),this.BL=!0,this.us.xs(),this}getNeedleThickness(){return this.oL}setNeedleStrokeStyle(t){return this.lL="function"==typeof t?t(this.lL):t,this.YL.We(t),this.ZL(),this.BL=!0,this.us.xs(),this}getNeedleStrokeStyle(){return this.YL.Su()}setNeedleLength(t){return this.nL=t,this.BL=!0,this.us.xs(),this}getNeedleLength(){return this.nL}setBarColor(t){return this.kL=t,this.BL=!0,this.us.xs(),this}getBarColor(){return this.zL}setBarGradient(t){return this.vL=t,this.BL=!0,this.us.xs(),this}getBarGradient(){return this.vL}setBarStrokeStyle(t){return this.RL="function"==typeof t?t(this.RL):t,this.UL.Be(t),this.BL=!0,this.us.xs(),this}getBarStrokeStyle(){return this.UL.vo()}setBarThickness(t){return this.hL=t,this.BL=!0,this.us.xs(),this}getBarThickness(){return this.hL}setAngleInterval(t,i){return Math.abs(t-i)>360&&(i=t<i?t+360:t-360),this.eu=t,this.hu=i,this.BL=!0,this.us.xs(),this}getAngleInterval(){return{start:this.eu,end:this.hu}}setValue(t){return this.EL&&this.us.Qn(Yo.Pf),this.EL=!0,this.S=t,this.yL||(this.Fm=this.S),this.BL=!0,this.us.xs(),this}getValue(){return this.S}setValueAnimation(t,i=1){return this.yL=t,this.IL=Math.max(0,i),this.BL=!0,this.us.xs(),this}setColorAnimation(t,i=1){return this.mL=t,this.PL=Math.max(0,i),this.BL=!0,this.us.xs(),this}setRoundedEdges(t){return this.uL=t,this.BL=!0,this.us.xs(),this}getRoundedEdges(){return this.uL}setValueIndicators(t){return this.eL=t,this.AL.forEach((t=>{t.dispose()})),this.AL.length=0,this.gL.forEach((t=>{t.start.dispose(),t.end.dispose()})),this.gL.length=0,this.eL.forEach((t=>{const i=this.vy.dc(this.Mg).Be(dt).Le(new W({color:t.color})).setMouseInteractions(!1);this.AL.push(i);const s=this.vy.Ur(this.Mg).tr(this.bL).Le(this.CL).setMouseInteractions(!1),e=this.vy.Ur(this.Mg).tr(this.bL).Le(this.CL).setMouseInteractions(!1);this.gL.push({start:s,end:e})})),this.NL.As([this.UL,...this.AL]),this.GL.As([this.XL,this.$d,this.$L,this.jL,...this.gL.map((t=>[t.start,t.end])).flat()]),this.BL=!0,this.us.xs(),this}getValueIndicators(){return this.eL}setValueIndicatorThickness(t){return this.rL=t,this.BL=!0,this.us.xs(),this}getValueIndicatorThickness(){return this.rL}setAutomaticBarColoring(t){return this.fL=!!t,this.BL=!0,this.us.xs(),this}getAutomaticBarColoring(){return this.fL}setGlowColor(t){return void 0===t?(this.cL=!1,this.VL=void 0):"object"==typeof t&&"auto"in t?(this.dL=t.auto,t.auto&&(this.VL=void 0),void 0!==t.alpha&&(this.FL=t.alpha),this.cL=!0):(this.VL=t,this.FL=t.getA(),this.dL=!1,this.cL=!0),this.BL=!0,this.us.xs(),this}getAutomaticGlowColoring(){return this.dL}setNeedleAlignment(t){return this.DL=t,this.BL=!0,this.us.xs(),this}getNeedleAlignment(){return this.DL}setGapBetweenBarAndValueIndicators(t){return this.LL=t,this.BL=!0,this.us.xs(),this}getGapBetweenBarAndValueIndicators(){return this.LL}setBarEffect(t){return this.NL.bs(t),this.us.xs(),this}getBarEffect(){return this.NL.Ms()}setLabelEffect(t){return this.GL.bs(t),this.us.xs(),this}getLabelEffect(){return this.GL.Ms()}Ee(t){var i;if(super.Ee(t),Ga.Hy(this.wh,this.Vy),super.Ry(),this.Fm!==this.S){if(this.yL){const i=5e-4*t,s=.003*t,e=Math.sign(this.S-this.Fm);this.Fm=this.Fm+i*e+s*this.IL*(this.S-this.Fm),e!==Math.sign(this.S-this.Fm)?this.Fm=this.S:this.us.xs(!0)}else this.Fm=this.S;this.BL=!0}let s=this.eL.find((t=>this.Fm>=t.start&&this.Fm<=t.end));if(s||(this.Fm<this.sL.start?s=this.eL.find((t=>t.start===this.sL.start)):this.Fm>this.sL.end&&(s=this.eL.find((t=>t.end===this.sL.end)))),this.zL=this.fL&&s?s.color:this.kL,this.mL){if(this.OL!==this.zL){const i=this.OL.getR(),s=this.OL.getG(),e=this.OL.getB(),h=this.zL.getR(),r=this.zL.getG(),n=this.zL.getB(),o=Math.sign(h-i),a=Math.sign(r-s),l=Math.sign(n-e),u=.005*t,c=.003*t;this.OL=S(i+u*o+c*this.PL*(h-i),s+u*a+c*this.PL*(r-s),e+u*l+c*this.PL*(n-e));const d=Math.abs(h-this.OL.getR()),f=Math.abs(r-this.OL.getG()),A=Math.abs(n-this.OL.getB());d<1&&f<1&&A<1?this.OL=this.zL:this.us.xs(!0),this.BL=!0}}else this.OL=this.zL;if(this.BL){let t=es,e=hs,h=es,r=hs;if(new Array(100).fill(0).forEach(((i,s,n)=>{const o=this.eu+s/n.length*(this.hu-this.eu),a=Math.sin(o*Math.PI/180),l=Math.cos(o*Math.PI/180);a<t&&(t=a),a>e&&(e=a),l<h&&(h=l),l>r&&(r=l)})),this.vL?this.UL.Le(new nt({stops:[{offset:0,color:b("#000000")},{offset:1,color:this.OL}],position:{x:.5,y:.5}})):this.UL.Le(new W({color:this.OL})),this.cL){const t=this.dL&&s?this.OL:null!==(i=this.VL)&&void 0!==i?i:this.TL;this.WL.Le(new nt({stops:[{offset:0,color:t.setA(this.FL)},{offset:1,color:t.setA(0)}],position:{x:.5,y:.5},extent:ht.farthestSide}))}else this.WL.Le(O);const n=this.pL(this.sL.start),o=this.pL(this.sL.end);let a=0,l=0;const u=this.us.Hg.Yg(n,this.$L.qh(),this.$L.sr()),c=this.us.Hg.Yg(o,this.jL.qh(),this.jL.sr());u.x>a&&(a=u.x),u.y>l&&(l=u.y),c.x>a&&(a=c.x),c.y>l&&(l=c.y),this.gL.forEach(((t,i)=>{if(i>=this.eL.length)return;const s=this.eL[i],e=this.pL(s.start),h=this.pL(s.end),r=this.us.Hg.Yg(e,t.start.qh(),t.start.sr()),n=this.us.Hg.Yg(h,t.end.qh(),t.end.sr());r.x>a&&(a=r.x),r.y>l&&(l=r.y),n.x>a&&(a=n.x),n.y>l&&(l=n.y)}));const d=this.eL.length>0?this.rL:0,f=this.Mg.getInnerIntervalPixels(),A=Ga.Yy(this.wh,this.Vy),g={x:f.x-(this.Fa.left+this.Fa.right),y:f.y-(this.Fa.bottom+this.Fa.top)-A},y={x:this.Fa.left+.5*g.x,y:this.Fa.bottom+.5*g.y},m=d+2*this.LL+this.hL/2,p=a+m,v=l+m,S=v+A,x=g.y-(S+v),M=g.x-(p+p),_=Math.max(0,x<M?x:M),w=.5*_,C=.5*w,k=(t+e)*C,T=(h+r)*C,F={x:y.x-T,y:y.y-k},I=_>0;if(this.UL.setVisible(I),this.AL.forEach((t=>t.setVisible(I))),this.HL.setVisible(I),this.YL.setVisible(I),this.WL.setVisible(I),this.$d.setVisible(I),this.XL.setVisible(I),this.$L.setVisible(I),this.jL.setVisible(I),this.gL.forEach((t=>{t.start.setVisible(I),t.end.setVisible(I)})),!I)return;const P={x:y.x-.5*T,y:y.y-.5*k};this.WL.ze(y).Au(.5*Math.min(g.x,g.y)),this.XL.ze(P).vr(this.SL(this.Fm)),this.$d.ze({x:P.x,y:P.y-this.XL.nd().y-this.$d.nd().y/4});const D=SA(this.sL,this.eu,this.hu,this.Fm,F,w+this.DL*(this.nL/2+this.hL/2)),B=D.angle*(Math.PI/180),L=.5*this.nL,R=Math.cos(B),E=Math.sin(B);this.HL.Xe({x:D.x+L*R,y:D.y+L*E}).He({x:D.x-L*R,y:D.y-L*E}),this.YL.Xe({x:D.x+L*R,y:D.y+L*E}).He({x:D.x-L*R,y:D.y-L*E});const z=pA(F,w,this.eu,this.hu,this.hL,this.uL,!1,!1);this.UL.Tl(z).ia({min:{x:F.x-w,y:F.y-w},max:{x:F.x+w,y:F.y+w}});const V=F.y+w,N=F.y-w,G=F.x+w,U=F.x-w,[Y,H]=this.sL.start<this.sL.end?[this.sL.start,this.sL.end]:[this.sL.end,this.sL.start],X=w+.5*this.hL+d/2+this.LL,$=X+d/2;this.eL.forEach(((t,i)=>{var s,e;const h=t.start>=Y&&t.end<=H;this.AL[i].setVisible(h),this.gL[i].start.setVisible(h),this.gL[i].end.setVisible(h);const r=SA(this.sL,this.eu,this.hu,t.start,F,$),n=SA(this.sL,this.eu,this.hu,t.end,F,$),o=pA(F,X,r.angle,n.angle,this.rL,this.uL,!(0===i),!(i===this.eL.length-1));this.AL[i].Tl(o);const a=this.sL.start===t.start||this.sL.end===t.start,l=this.sL.start===t.end||this.sL.end===t.end||this.eL.some((i=>i.start===t.end&&i!==t));this.gL[i].start.ze({x:r.x,y:r.y}).ja({x:Math.min(1,Math.max(-1,2*(r.x-G)/(U-G)-1)),y:Math.min(1,Math.max(-1,2*(r.y-V)/(N-V)-1))}).vr(null!==(s=t.startLabel)&&void 0!==s?s:a?"":this.pL(t.start)),this.gL[i].end.ze({x:n.x,y:n.y}).ja({x:Math.min(1,Math.max(-1,2*(n.x-G)/(U-G)-1)),y:Math.min(1,Math.max(-1,2*(n.y-V)/(N-V)-1))}).vr(null!==(e=t.endLabel)&&void 0!==e?e:l?"":this.pL(t.end))}));const j=this.eL.some((t=>t.start<t.end?this.sL.start>=t.start&&this.sL.start<=t.end:this.sL.start<=t.start&&this.sL.start>=t.end)),Z=SA(this.sL,this.eu,this.hu,this.sL.start,F,j?$:X-this.LL);this.$L.ze({x:Z.x,y:Z.y}).ja({x:Math.min(1,Math.max(-1,2*(Z.x-G)/(U-G)-1)),y:Math.min(1,Math.max(-1,2*(Z.y-V)/(N-V)-1))}).vr(n);const Q=this.eL.some((t=>t.start<t.end?this.sL.end>=t.start&&this.sL.end<=t.end:this.sL.end<=t.start&&this.sL.end>=t.end)),J=SA(this.sL,this.eu,this.hu,this.sL.end,F,Q?$:X-this.LL);this.jL.ze({x:J.x,y:J.y}).ja({x:Math.min(1,Math.max(-1,2*(J.x-G)/(U-G)-1)),y:Math.min(1,Math.max(-1,2*(J.y-V)/(N-V)-1))}).vr(o),this.BL=!1}}getMinimumSize(){return{x:150,y:150}}nf(){return[this]}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),t.setMouseInteractions(!1),Pi(t,this.qi,s,{fill:new W({color:this.getBarColor()})}),this}}const pA=(t,i,s,e,h,r=!0,n=!0,o=!0)=>{const a=[],l=.5*h,u=s>e,c=Math.sign(s-e),d=-1*c;if(r){const t=l/(2*Math.PI*i)*360+.1;n&&(s+=t*d),o&&(e+=t*c)}else s+=.1*d,e+=.1*c;const f=vA(t,i+l,s,e,u);if(a.push(...f),r){const h={x:t.x+i*Math.cos(e*(Math.PI/180)),y:t.y+i*Math.sin(e*(Math.PI/180))};let r;r=s>e?vA(h,l,e+180,e+360,u):vA(h,l,e-180,e-360,u),a.push(...r)}const A=vA(t,i-l,e,s,!u);if(a.push(...A),r){const h={x:t.x+i*Math.cos(s*(Math.PI/180)),y:t.y+i*Math.sin(s*(Math.PI/180))};let r;r=s>e?vA(h,l,s-180,s-360,u):vA(h,l,s+180,s+360,u),a.push(...r)}return a},vA=(t,i,s,e,h)=>{s<e&&([s,e]=[e,s]);const r=[],n=h?-1:1,o=h?t=>t>e:t=>t<s;for(let a=h?s:e;o(a);a+=n){const s=a*(Math.PI/180),e=t.x+i*Math.cos(s),h=t.y+i*Math.sin(s);r.push({x:e,y:h})}const a=(h?e:s)*(Math.PI/180),l=t.x+i*Math.cos(a),u=t.y+i*Math.sin(a);return r.push({x:l,y:u}),r},SA=(t,i,s,e,h,r)=>{const[n,o]=t.start<t.end?[t.start,t.end]:[t.end,t.start],a=Math.max(n,Math.min(o,e)),l=t.start<t.end?s-i:i-s,u=t.start<t.end?i+(a-t.start)/(t.end-t.start)*l:i-(a-t.start)/(t.end-t.start)*l,c=u*(Math.PI/180);return{x:h.x+r*Math.cos(c),y:h.y+r*Math.sin(c),angle:Math.round(u)}},bA=(t,i)=>{const s=(t=>{const i=new W({color:t.uiStrokeColorContrastHigh}),s=new W({color:t.uiStrokeColorContrastMedium}),e=new W({color:t.uiStrokeColorContrastLow}),h=new Rh({family:t.fontFamily,weight:"normal",style:"normal"}),r=h.setSize(18*t.fontScaler),n=h.setSize(16*t.fontScaler),o=h.setSize(14*t.fontScaler),a=h.setSize(10*t.fontScaler),l=h.withMutations((i=>i.set("size",14*t.fontScaler).set("weight","bold"))),u=h.setSize(13*t.fontScaler),c=new _e({thickness:2,fillStyle:e}),d=new W({color:t.dataHighlightOverlayColor}),f=new _e({thickness:2,fillStyle:t.legendBackgroundBorderFillStyle}),A=t.dataColorPalette.map((t=>new W({color:t.stroke}))),g=t=>A[t%A.length],y=A.map((t=>new _e({thickness:2,fillStyle:t}))),m=t=>y[t%y.length],p=t.dataColorPalette.map((t=>new W({color:t.border}))).map((t=>new _e({thickness:2,fillStyle:t}))),v=t=>p[t%p.length],x=t.dataColorPalette.map((t=>{const i=t.area;return new lt({angle:0,stops:[{offset:0,color:i.setA(0)},{offset:.8,color:i}]})})),M=t=>x[t%x.length],_=t.dataColorPaletteInverted.map((t=>{const i=t.area;return new lt({angle:180,stops:[{offset:0,color:i.setA(0)},{offset:.8,color:i}]})})),w=t=>_[t%_.length],C=t.dataColorPalette.map((t=>{const i=t.area;return new lt({angle:180,stops:[{color:Ti(i,S(255,255,255,i.getA()),.3),offset:0},{color:i,offset:.5},{color:Ti(i,S(0,0,0,i.getA()),.3),offset:1}]})})),k=t=>C[t%C.length],T=t.dataColorPaletteInverted.map((t=>new W({color:t.border}))).map((t=>new _e({thickness:2,fillStyle:t}))),F=t=>T[t%T.length],I=new W({color:t.dataColorPositive}),P=new W({color:t.dataColorNegative}),D=new _e({thickness:1,fillStyle:new W({color:t.dataStrokeColorContrastHigh.setA(50)})}),B=new _e({thickness:2,fillStyle:t.axisLineFillStyle}),L=dt,R=new W({color:S(0,0,0,1)}),E=new _e({thickness:1,fillStyle:t.axisGridMajorFillStyle}),z=dt,V=o,N=t.axisLabelMajorFillStyle,G=new _e({thickness:1,fillStyle:t.axisGridMajorFillStyle}),U=new _e({thickness:1,fillStyle:t.axisTickMajorFillStyle}),Y=o,H=t.axisLabelMajorFillStyle,X=new _e({thickness:1,fillStyle:t.axisGridMinorFillStyle}),$=new _e({thickness:1,fillStyle:t.axisTickMinorFillStyle}),j=a,Z=t.axisLabelMinorFillStyle,Q=ta,J=new Ko({gridStrokeStyle:E,tickStyle:z,tickLength:50,tickPadding:-14,labelFont:V,labelFillStyle:N}),K=new Ko({gridStrokeStyle:G,tickStyle:U,tickLength:7,tickPadding:5,labelFont:Y,labelFillStyle:H}),q=new Ko({gridStrokeStyle:X,tickStyle:$,tickLength:4,tickPadding:10,labelFont:j,labelFillStyle:Z}),tt=new Ia({extremeTickStyle:Q,majorTickStyle:K,minorTickStyle:q}),it=new ba({greatTickStyle:J,majorTickStyle:K,minorTickStyle:q}),st=new na({majorTickStyle:K,minorTickStyle:q}),et=new W({color:t.dataHighlightOverlayColor}),ht=new _e({thickness:1,fillStyle:s}),rt=new _e({thickness:2,fillStyle:s}),nt=t=>new Hh.Triangulated({shape:"sphere",size:10,fillStyle:A[t%A.length]}),ot=A[0],at=t.uiTextFillStyle,ut=t.legendBackgroundFillStyle,ct=new _e({thickness:1,fillStyle:t.legendBackgroundBorderFillStyle}),ft=Ii(t.legendButtonDefaultColor),At=Ii(t.isDark?S(70,70,70,255):S(170,170,170,255)),gt=new W({color:t.isDark?S(70,70,70,255):S(170,170,170,255)}),yt=new _e({thickness:1,fillStyle:i}),mt=new Ln({thickness:1,fillStyle:t.cursorGridFillStyle,pattern:Dn.DashedEqual,patternScale:3}),pt=new _e({thickness:1,fillStyle:t.cursorGridFillStyle}),vt=t.zoomBandChartDefocusOverlayFillStyle,St=new _e({thickness:2,fillStyle:new W({color:t.zoomBandChartSplitterColor})}),bt=new W({color:t.uiBackgroundColor});let xt={isDark:t.isDark,effect:t.effect,effectsText:t.effectsText,effectsDashboardSplitters:t.effectsDashboardSplitters,lcjsBackgroundFillStyle:t.lcjsBackgroundFillStyle,lcjsBackgroundStrokeStyle:dt,highlightColorOffset:t.highlightColorOffset,highlightColorOffsetAxisOverlay:t.highlightColorOffsetAxisOverlay,dashboardSplitterStyle:new _e({thickness:4,fillStyle:t.dashboardSplitterFillStyle}),chartXYBackgroundFillStyle:t.panelBackgroundFillStyle,chartXYBackgroundStrokeStyle:dt,chartXYTitleFont:r,chartXYTitleFillStyle:t.titleFillStyle,chartXYSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chartXYSeriesBackgroundStrokeStyle:c,chartXYZoomingRectangleFillStyle:d,chartXYZoomingRectangleStrokeStyle:f,chartXYFittingRectangleFillStyle:d,chartXYFittingRectangleStrokeStyle:f,lineSeriesStrokeStyle:m,pointLineSeriesStrokeStyle:m,pointLineSeriesFillStyle:g,pointSeriesFillStyle:g,ellipseSeriesFillStyle:g,ellipseSeriesStrokeStyle:m,polygonSeriesFillStyle:g,polygonSeriesStrokeStyle:m,rectangleSeriesFillStyle:g,rectangleSeriesStrokeStyle:dt,segmentSeriesStrokeStyle:m,boxSeriesBodyFillStyle:g(0),boxSeriesBodyStrokeStyle:dt,boxSeriesStrokeStyle:new _e({thickness:1,fillStyle:A[0]}),boxSeriesMedianStrokeStyle:new _e({thickness:1,fillStyle:new W({color:S(0,0,0)})}),ohlcCandleThicknessPixels:5,ohlcCandleBodyFillStylePositive:I,ohlcCandleBodyFillStyleNegative:P,ohlcCandleTailStrokeStylePositive:new _e({thickness:1,fillStyle:new W({color:t.uiStrokeColorContrastHigh})}),ohlcCandleTailStrokeStyleNegative:new _e({thickness:1,fillStyle:new W({color:t.uiStrokeColorContrastHigh})}),ohlcBarThicknessPixels:10,ohlcBarStrokeStylePositive:new _e({thickness:2,fillStyle:I}),ohlcBarStrokeStyleNegative:new _e({thickness:2,fillStyle:P}),heatmapGridSeriesFillStyle:g,heatmapGridSeriesWireframeStyle:D,heatmapScrollingGridSeriesFillStyle:g,heatmapScrollingGridSeriesWireframeStyle:D,areaRangeSeriesFillStyle:M,areaRangeSeriesStrokeStyle:v,areaRangeSeriesFillStyleInverted:w,areaRangeSeriesStrokeStyleInverted:F,areaSeriesBipolarHighFillStyle:M,areaSeriesBipolarHighStrokeStyle:v,areaSeriesBipolarLowFillStyle:w,areaSeriesBipolarLowStrokeStyle:F,areaSeriesPositiveFillStyle:M,areaSeriesPositiveStrokeStyle:v,areaSeriesNegativeFillStyle:w,areaSeriesNegativeStrokeStyle:F,xAxisTitleFont:n,xAxisTitleFillStyle:t.axisTitleFillStyle,xAxisStrokeStyle:B,xAxisNibStyle:L,xAxisOverlayStyle:R,xAxisZoomingBandFillStyle:d,xAxisZoomingBandStrokeStyle:dt,xAxisNumericTicks:tt,xAxisDateTimeTicks:it,xAxisTimeTicks:st,yAxisTitleFont:n,yAxisTitleFillStyle:t.axisTitleFillStyle,yAxisStrokeStyle:B,yAxisNibStyle:L,yAxisOverlayStyle:R,yAxisZoomingBandFillStyle:d,yAxisZoomingBandStrokeStyle:dt,yAxisNumericTicks:tt,yAxisDateTimeTicks:it,yAxisTimeTicks:st,bandFillStyle:et,bandStrokeStyle:ht,constantLineStrokeStyle:rt,barChartBackgroundFillStyle:t.panelBackgroundFillStyle,barChartBackgroundStrokeStyle:dt,barChartTitleFont:r,barChartTitleFillStyle:t.titleFillStyle,barChartSeriesBackgroundFillStyle:O,barChartSeriesBackgroundStrokeStyle:dt,barChartBarFillStyle:g,barChartBarStrokeStyle:new _e({thickness:1,fillStyle:e}),barChartValueAxisTitleFont:n,barChartValueAxisTitleFillStyle:t.axisTitleFillStyle,barChartValueAxisStrokeStyle:B,barChartValueAxisTicks:tt.setMajorTickStyle((t=>t.setGridStrokeStyle(dt))).setMinorTickStyle((t=>t.setGridStrokeStyle(dt))),barChartCategoryAxisTitleFont:n,barChartCategoryAxisTitleFillStyle:t.axisTitleFillStyle,barChartCategoryAxisStrokeStyle:B,barChartCategoryLabels:{formatter:(t,i)=>t,labelFillStyle:tt.majorTickStyle.labelFillStyle,labelFont:tt.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,tickStyle:tt.majorTickStyle.tickStyle,tickLength:0},barChartValueLabelsAfterBars:{position:"after-bar",formatter:(t,i,s)=>t.chart.valueAxis.formatValue(s),labelFillStyle:tt.majorTickStyle.labelFillStyle,labelFont:tt.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},barChartValueLabelsInsideBars:{position:"inside-bar",formatter:(t,i,s)=>t.chart.valueAxis.formatValue(s),labelFillStyle:tt.majorTickStyle.labelFillStyle,labelFont:tt.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},chart3DBackgroundFillStyle:t.panelBackgroundFillStyle,chart3DBackgroundStrokeStyle:dt,chart3DTitleFont:r,chart3DTitleFillStyle:t.titleFillStyle,chart3DSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chart3DSeriesBackgroundStrokeStyle:c,chart3DBoundingBoxStrokeStyle:dt,xAxis3DTitleFont:n,xAxis3DTitleFillStyle:t.axisTitleFillStyle,xAxis3DStrokeStyle:B,xAxis3DNumericTicks:tt,xAxis3DDateTimeTicks:it,xAxis3DTimeTicks:st,yAxis3DTitleFont:n,yAxis3DTitleFillStyle:t.axisTitleFillStyle,yAxis3DStrokeStyle:B,yAxis3DNumericTicks:tt,yAxis3DDateTimeTicks:it,yAxis3DTimeTicks:st,zAxis3DTitleFont:n,zAxis3DTitleFillStyle:t.axisTitleFillStyle,zAxis3DStrokeStyle:B,zAxis3DNumericTicks:tt,zAxis3DDateTimeTicks:it,zAxis3DTimeTicks:st,lineSeries3DStrokeStyle:m,pointLineSeries3DStrokeStyle:m,pointLineSeries3DPointStyle:nt,pointSeries3DPointStyle:nt,pointCloudSeries3DPointStyle:t=>new Hh.Pixelated({size:5,fillStyle:A[t%A.length]}),surfaceGridSeries3DFillStyle:g,surfaceGridSeries3DWireframeStyle:D,surfaceScrollingGridSeries3DFillStyle:g,surfaceScrollingGridSeries3DWireframeStyle:D,boxSeries3DFillStyle:g,meshModel3DFillStyle:g(0),polarChartBackgroundFillStyle:t.panelBackgroundFillStyle,polarChartBackgroundStrokeStyle:dt,polarChartTitleFont:r,polarChartTitleFillStyle:t.titleFillStyle,polarChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,polarChartSeriesBackgroundStrokeStyle:c,polarSectorFillStyle:et,polarSectorStrokeStyle:ht,polarAmplitudeAxisTitleFont:n,polarAmplitudeAxisTitleFillStyle:t.axisTitleFillStyle,polarAmplitudeAxisStrokeStyle:B,polarAmplitudeAxisNumericTicks:tt,polarAmplitudeAxisDateTimeTicks:it,polarAmplitudeAxisTimeTicks:st,polarRadialAxisTitleFont:n,polarRadialAxisTitleFillStyle:t.axisTitleFillStyle,polarRadialAxisStrokeStyle:B,polarRadialAxisTickStyle:K,polarLineSeriesStrokeStyle:m,polarPointLineSeriesFillStyle:g,polarPointLineSeriesStrokeStyle:m,polarPointSeriesFillStyle:g,polarPolygonSeriesFillStyle:k,polarPolygonSeriesStrokeStyle:v,polarAreaSeriesFillStyle:k,polarAreaSeriesStrokeStyle:v,polarHeatmapSeriesFillStyle:g,mapChartBackgroundFillStyle:t.panelBackgroundFillStyle,mapChartBackgroundStrokeStyle:dt,mapChartTitleFont:r,mapChartTitleFillStyle:t.titleFillStyle,mapChartFillStyle:ot,mapChartStrokeStyle:new _e({thickness:1,fillStyle:new W({color:t.dataStrokeColorContrastMedium})}),mapChartOutlierRegionFillStyle:O,mapChartOutlierRegionStrokeStyle:new _e({thickness:1,fillStyle:e}),mapChartSeparateRegionFillStyle:ut,mapChartSeparateRegionStrokeStyle:ct,dataGridBackgroundFillStyle:t.panelBackgroundFillStyle,dataGridBackgroundStrokeStyle:dt,dataGridTitleFont:r,dataGridTitleFillStyle:t.titleFillStyle,dataGridTextFont:o,dataGridTextFillStyle:ot,dataGridCellBackgroundFillStyle:new W({color:t.uiBackgroundColor}),dataGridBorderStrokeStyle:new _e({thickness:.4,fillStyle:new W({color:t.uiBackgroundBorderColor})}),dataGridScrollBarBackgroundFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarBackgroundStrokeStyle:dt,dataGridScrollBarFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarStrokeStyle:ct,dataGridScrollBarButtonFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarButtonStrokeStyle:ct,dataGridScrollBarButtonArrowFillStyle:ft,dataGridScrollBarButtonArrowStrokeStyle:ct,sparkLineChartStrokeStyle:m(0),sparkPointChartFillStyle:g(0),sparkBarChartFillStyle:g(0),sparkBarChartStrokeStyle:v(0),sparkAreaChartFillStyle:M(0),sparkAreaChartStrokeStyle:v(0),sparkPieChartFillStyle:g,sparkPieChartStrokeStyle:ct,sparkChartBandFillStyle:et,sparkChartBandStrokeStyle:ht,sparkChartConstantLineStrokeStyle:rt,spiderChartBackgroundFillStyle:t.panelBackgroundFillStyle,spiderChartBackgroundStrokeStyle:dt,spiderChartTitleFont:r,spiderChartTitleFillStyle:t.titleFillStyle,spiderChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,spiderChartSeriesBackgroundStrokeStyle:c,spiderChartWebStyle:new _e({thickness:2,fillStyle:e}),spiderChartScaleLabelFillStyle:t.axisLabelMajorFillStyle,spiderChartScaleLabelFont:o,spiderChartAxisLabelFillStyle:t.axisTitleFillStyle,spiderChartAxisLabelFont:n,spiderChartAxisStrokeStyle:new _e({thickness:2,fillStyle:s}),spiderChartAxisNibStrokeStyle:new _e({thickness:2,fillStyle:i}),spiderSeriesFillStyle:k,spiderSeriesStrokeStyle:v,spiderSeriesPointFillStyle:g,pieChartBackgroundFillStyle:t.panelBackgroundFillStyle,pieChartBackgroundStrokeStyle:dt,pieChartTitleFont:r,pieChartTitleFillStyle:t.titleFillStyle,pieChartSliceFillStylePalette:g,pieChartSliceStrokeStyle:ct,pieChartSliceLabelFont:u,pieChartSliceLabelFillStyle:t.uiTextFillStyle,pieChartConnectorStrokeStyle:yt,funnelChartBackgroundFillStyle:t.panelBackgroundFillStyle,funnelChartBackgroundStrokeStyle:dt,funnelChartTitleFont:r,funnelChartTitleFillStyle:t.titleFillStyle,funnelChartSliceFillStylePalette:g,funnelChartSliceStrokeStyle:ct,funnelChartSliceLabelFont:u,funnelChartSliceLabelFillStyle:t.uiTextFillStyle,funnelChartConnectorStrokeStyle:yt,pyramidChartBackgroundFillStyle:t.panelBackgroundFillStyle,pyramidChartBackgroundStrokeStyle:dt,pyramidChartTitleFont:r,pyramidChartTitleFillStyle:t.titleFillStyle,pyramidChartSliceFillStylePalette:g,pyramidChartSliceStrokeStyle:ct,pyramidChartSliceLabelFont:u,pyramidChartSliceLabelFillStyle:t.uiTextFillStyle,pyramidChartConnectorStrokeStyle:yt,gaugeChartValueLabelFont:u.setSize(60),gaugeChartUnitLabelFont:u.setSize(40),gaugeChartTickFont:u.setSize(30),gaugeChartBarThickness:40,gaugeChartValueIndicatorThickness:10,gaugeChartRoundedEdges:!0,gaugeChartNeedleLength:40,gaugeChartStartAngle:225,gaugeChartEndAngle:-45,gaugeChartNeedleAlignment:0,gaugeChartGapBetweenBarAndValueIndicators:10,gaugeChartTickFillStyle:t.uiTextFillStyle,gaugeChartBarGradient:!0,gaugeChartBarStrokeStyle:dt,gaugeChartUnitLabelFillStyle:t.uiTextFillStyle,gaugeChartValueLabelFillStyle:t.uiTextFillStyle,gaugeChartBarColor:S(255,255,255),gaugeChartGlowColor:S(255,255,64),gaugeChartNeedleFillStyle:new W({color:S(255,255,255)}),gaugeChartNeedleThickness:10,gaugeChartNeedleStrokeStyle:new _e({thickness:2,fillStyle:new W({color:S(0,0,0)})}),gaugeChartBackgroundFillStyle:t.panelBackgroundFillStyle,gaugeChartBackgroundStrokeStyle:dt,gaugeChartTitleFont:r,gaugeChartTitleFillStyle:t.titleFillStyle,treeMapChartBackgroundFillStyle:t.panelBackgroundFillStyle,treeMapChartBackgroundStrokeStyle:dt,treeMapChartParentColor:t.treeMapChartParentColor,treeMapChartNodeColors:t.treeMapChartNodeColors,treeMapChartNodeStrokeStyle:new _e({thickness:1,fillStyle:new W({color:b("000")})}),treeMapChartTitleFillStyle:t.titleFillStyle,treeMapChartTitleFont:r,treeMapChartPathLabelFillStyle:at,treeMapChartPathLabelFont:u,treeMapChartLabelHeaderFillStyle:t.treeMapChartLabelHeaderFillStyle,treeMapChartLabelHeaderFont:r,treeMapChartLabelFillStyle:t.treeMapChartLabelFillStyle,treeMapChartLabelFont:u,uiPanelBackgroundFillStyle:t.panelBackgroundFillStyle,uiPanelBackgroundStrokeStyle:dt,zoomBandChartDefocusOverlayFillStyle:vt,zoomBandChartSplitterStrokeStyle:St,zoomBandChartKnobFillStyle:t.zoomBandChartKnobFillStyle,zoomBandChartKnobSize:t.zoomBandChartKnobSize,onScreenMenuBackgroundColor:S(254,204,0,.7),parallelCoordinateChartBackgroundFillStyle:t.panelBackgroundFillStyle,parallelCoordinateChartBackgroundStrokeStyle:dt,parallelCoordinateChartTitleFont:r,parallelCoordinateChartTitleFillStyle:t.titleFillStyle,parallelCoordinateChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,parallelCoordinateChartSeriesBackgroundStrokeStyle:c,parallelCoordinateChartSeriesColor:i=>t.dataColorPalette[i%t.dataColorPalette.length].stroke,parallelCoordinateChartSeriesColorUnselected:t.dataColorUnselected,parallelCoordinateChartSeriesLineThickness:2,parallelCoordinateChartPointedSeriesLineStyle:y[0],parallelCoordinateAxisTitleFont:n,parallelCoordinateAxisTitleFillStyle:t.axisTitleFillStyle,parallelCoordinateAxisNumericTicks:tt,parallelCoordinateAxisDateTimeTicks:it,parallelCoordinateAxisTimeTicks:st,parallelCoordinateAxisStrokeStyle:B,parallelCoordinateAxisRangeSelectorFillStyle:t.seriesBackgroundFillStyle,parallelCoordinateAxisRangeSelectorStrokeStyle:ct,parallelCoordinateAxisBackgroundFillStyle:new lt({angle:90,stops:[{offset:0,color:t.isDark?S(0,0,0,0):S(255,255,255,0)},{offset:1,color:t.isDark?S(0,0,0,255):S(255,255,255,180)}]}),uiButtonFillStyle:ft,uiButtonFillStyleHidden:At,uiButtonStrokeStyle:ct,uiButtonSize:10,uiBackgroundFillStyle:ut,uiBackgroundStrokeStyle:ct,uiTextFillStyle:at,uiTextFillStyleHidden:gt,uiTextFont:u,legendTitleFillStyle:at,legendTitleFont:l,cursorTickMarkerXBackgroundFillStyle:ut,cursorTickMarkerXBackgroundStrokeStyle:ct,cursorTickMarkerXTextFillStyle:at,cursorTickMarkerXTextFont:u,cursorTickMarkerYBackgroundFillStyle:ut,cursorTickMarkerYBackgroundStrokeStyle:ct,cursorTickMarkerYTextFillStyle:at,cursorTickMarkerYTextFont:u,cursorPointMarkerFillStyle:mt.getFillStyle(),cursorPointMarkerSize:{x:9,y:9},cursorPointMarkerShape:ar.Cross,cursorResultTableFillStyle:ut,cursorResultTableStrokeStyle:ct,cursorResultTableTextFillStyle:at,cursorResultTableTextFont:u,cursorGridStrokeStyleX:mt,cursorGridStrokeStyleY:mt,cursor3DGridStrokeStyleX:pt,cursor3DGridStrokeStyleY:pt,cursor3DGridStrokeStyleZ:pt,cursor3DTickStrokeStyleX:K.tickStyle,cursor3DTickStrokeStyleY:K.tickStyle,cursor3DTickStrokeStyleZ:K.tickStyle,cursor3DTickLabelFillStyleX:at,cursor3DTickLabelFillStyleY:at,cursor3DTickLabelFillStyleZ:at,cursor3DTickLabelFontX:u,cursor3DTickLabelFontY:u,cursor3DTickLabelFontZ:u,cursor3DTickLabelBackgroundFillStyleX:bt,cursor3DTickLabelBackgroundFillStyleY:bt,cursor3DTickLabelBackgroundFillStyleZ:bt,cursor3DTickLabelBackgroundStrokeStyleX:ct,cursor3DTickLabelBackgroundStrokeStyleY:ct,cursor3DTickLabelBackgroundStrokeStyleZ:ct,cursor3DTickLabelPaddingX:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingY:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingZ:{left:4,right:4,top:4,bottom:4}};return t.overrideThemeProperties&&(xt={...xt,...t.overrideThemeProperties}),xt})(t),e={...i,header1Font:s.xAxisTitleFont,header2Font:s.xAxisNumericTicks.getMajorTickStyle().labelFont,header3Font:s.uiTextFont,mainDataColor:t.dataColorPalette[0].stroke};return{...s,examples:e}},xA=(t,i)=>{const s=new Image;s.crossOrigin="*";const e=`${t}/${i}`;return s.src=e,s},MA=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:Ti(i[e%i.length].stroke,S(255,255,255),.5);return new nt({stops:[{color:Ti(h,S(255,255,255),.5*s).setA(100),offset:0},{color:h.setA(100),offset:.5},{color:Ti(h,S(30,30,30),.5*s).setA(100),offset:1}]})},_A=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:Ti(i[e%i.length].stroke,S(255,255,255),.2);return new nt({stops:[{color:Ti(h,S(255,255,255),.2*s),offset:0},{color:h,offset:.5},{color:Ti(h,S(0,0,0),.2*s),offset:1}]})},wA=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:Ti(i[e%i.length].stroke,S(255,255,255),.2);return new lt({angle:90,stops:[{color:Ti(h,S(255,255,255),.5*s),offset:0},{color:h,offset:.35},{color:Ti(h,S(30,30,30),.5*s),offset:1}]})},CA=(t,i,s)=>(s=>{const e=new Map;return s=>{const h=e.get(s);if(h)return h;const r=(s=>{const e=!0===t?i[s%i.length].stroke:Ti(i[s%i.length].stroke,S(255,255,255),.3);return new lt({angle:90,stops:[{color:Ti(e,S(255,255,255),.5),offset:0},{color:e,offset:.35},{color:Ti(e,S(30,30,30),.5),offset:1}]})})(s);return e.set(s,r),r}})(),kA=Hi((()=>{const t=S(255,255,255),i=new W({color:t}),s=!0,e=new Nn({spread:1,blur:9,offset:{x:0,y:0},color:S(0,0,0,150)}),h=new nt({position:{x:.8,y:.8},extent:ht.farthestCorner,shape:et.ellipse,stops:[{offset:0,color:S(50,51,52)},{offset:.5,color:S(14,15,16)},{offset:1,color:S(0,0,0)}]}),r=new W({color:S(45,45,45)}),n=new nt({position:{x:.5,y:.5},extent:ht.farthestCorner,shape:et.circle,stops:[{offset:0,color:S(120,120,120,100)},{offset:1,color:S(0,0,0,50)}]}),o=new nt({position:{x:.5,y:.5},extent:ht.farthestCorner,shape:et.circle,stops:[{offset:0,color:S(30,30,30,200)},{offset:1,color:S(0,0,0,255)}]}),a=new W({color:S(255,255,220)}),l=new W({color:S(255,255,166)}),u=new W({color:S(255,255,220)}),c=new W({color:S(255,255,220,130)}),d=new W({color:S(255,255,200)}),f=d,A=f,g=new lt({angle:45,stops:[{offset:0,color:S(230,230,230)},{offset:1,color:S(150,150,150)}]}),y=new W({color:S(220,220,220)}),m=new W({color:S(200,200,200,50)}),p=new W({color:S(200,200,200,150)}),v=new W({color:S(200,200,200,20)}),x=new W({color:S(220,220,220)}),M=new lt({angle:0,stops:[{offset:0,color:S(10,10,10,220)},{offset:1,color:S(30,30,30,220)}]}),_=i,w=S(255,255,200),C=M,k=_,T=S(20,20,20),F=S(0,0,0),I=t,P=S(150,150,150),D=S(50,50,50),B=S(50,50,50),L=S(100,100,100),R=S(200,200,200),E=[S(255,255,91,255),S(255,205,91,255),S(255,155,91,255),S(255,196,188,255),S(255,148,184,255),S(219,148,198,255),S(235,196,224,255),S(169,148,198,255),S(148,226,198,255),S(148,255,176,255),S(180,255,165,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),z=t.setA(20),V=S(176,255,157,255),O=S(255,112,76,255),N={mapChartFillStyle:new lt({angle:135,stops:[{color:S(255,255,91,255),offset:0},{color:S(255,155,91,255),offset:1}]}),spiderSeriesFillStyle:MA(s,E,.5),pieChartSliceFillStylePalette:_A(s,E,1),funnelChartSliceFillStylePalette:wA(s,E,1),pyramidChartSliceFillStylePalette:wA(s,E,1),rectangleSeriesFillStyle:CA(s,E),gaugeChartBarColor:S(255,255,91,255),gaugeChartGlowColor:S(255,255,91,64)},G=new W({color:S(176,255,157,255)}),U=new W({color:S(255,146,146,255)}),Y=new W({color:S(176,255,157,255)}),H=new W({color:S(230,63,63,255)}),X=new W({color:S(176,255,157,120)}),$=new W({color:S(229,63,63,180)}),j=new W({color:S(27,37,36,255)}),Z=new W({color:S(62,27,27,255)}),Q=[S(255,0,0),S(255,255,0),S(0,255,0)],J=[S(10,10,255),S(10,190,255),S(251,255,0),S(255,38,0)],K=[S(255,255,0),S(255,204,0),S(255,128,0),S(255,0,0)],tt=[S(0,0,0),S(167,4,69,255),S(255,0,0),S(252,252,168,255)],st=new nt({stops:[{color:S(61,61,80,100),offset:0},{color:S(44,44,55,30),offset:1}]}),rt=new W({color:S(148,148,198,255)}),ot=X.getColor().setA(255),at=S(100,100,100),ut=[S(255,241,149,200),S(255,230,65,200),S(238,211,32,200),S(238,176,32,200),S(255,159,13,200),S(254,120,37,200),S(253,91,56,200),S(253,75,84,200),S(254,95,124,200),S(227,56,160,200),S(226,53,134,200),S(216,90,166,200),S(254,151,206,200),S(237,151,254,200),S(243,177,255,200),S(233,133,252,200),S(210,101,230,200),S(178,61,200,200),S(193,81,156,200),S(217,95,145,200)];return bA({isDark:s,highlightColorOffset:S(60,60,60,60),highlightColorOffsetAxisOverlay:S(255,255,255,40),effect:e,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:h,dashboardSplitterFillStyle:r,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:o,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:a,axisTitleFillStyle:l,axisLabelMajorFillStyle:u,axisLabelMinorFillStyle:c,uiTitleFillStyle:d,uiTextFillStyle:f,cursorTextFillStyle:A,axisLineFillStyle:g,axisTickMajorFillStyle:y,axisGridMajorFillStyle:m,axisTickMinorFillStyle:p,axisGridMinorFillStyle:v,cursorGridFillStyle:x,legendBackgroundFillStyle:M,legendBackgroundBorderFillStyle:_,legendButtonDefaultColor:w,resultTableBackgroundFillStyle:C,resultTableBackgroundBorderFillStyle:k,uiBackgroundColor:T,uiBackgroundBorderColor:F,uiStrokeColorContrastHigh:I,uiStrokeColorContrastMedium:P,uiStrokeColorContrastLow:D,dataStrokeColorContrastHigh:B,dataStrokeColorContrastMedium:L,dataStrokeColorContrastLow:R,dataColorPalette:E,dataColorPaletteInverted:[{area:S(190,50,50,100),border:S(210,80,80)}],dataHighlightOverlayColor:z,dataColorPositive:V,dataColorNegative:O,zoomBandChartDefocusOverlayFillStyle:new W({color:S(0,0,0,180)}),zoomBandChartSplitterColor:b("#FBFB5A"),zoomBandChartKnobFillStyle:t=>new it({source:xA(t,"zoomBandChart/darkgold-selector.png"),fitMode:q.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:S(255,255,255,24),overrideThemeProperties:N,treeMapChartParentColor:b("#181E21"),treeMapChartNodeColors:ut,treeMapChartLabelFillStyle:new W({color:S(33,33,33)}),treeMapChartLabelHeaderFillStyle:new W({color:S(250,250,250)})},{positiveTextFillStyle:G,negativeTextFillStyle:U,positiveFillStyle:Y,negativeFillStyle:H,positiveAreaFillStyle:X,negativeAreaFillStyle:$,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:Z,badGoodColorPalette:Q,coldHotColorPalette:J,intensityColorPalette:K,spectrogramColorPalette:tt,bollingerFillStyle:st,bollingerBorderFillStyle:rt,highlightPointColor:t,highlightDataGridColor:ot,unfocusedDataColor:at})})),TA=Hi((()=>{const t=S(255,255,255),i=new W({color:t}),s=!0,e=new Nn({spread:0,blur:9,offset:{x:0,y:0},color:S(105,255,236,40)}),h=new W({color:S(2,21,30)}),r=new nt({stops:[{color:S(19,40,66,150),offset:0},{color:S(0,0,0,150),offset:1}]}),n=new W({color:S(0,5,8,150)}),o=i,a=i,l=i,u=new W({color:S(255,255,220,130)}),c=i,d=i,f=d,A=new W({color:S(20,224,250,255)}),g=i,y=new W({color:S(61,94,110,100)}),m=new W({color:S(61,94,110,255)}),p=new W({color:S(61,94,110,40)}),v=i,x=new W({color:S(0,18,23,255)}),M=i,_=t,w=new W({color:S(0,17,22,240)}),C=i,k=S(0,38,48,220),T=S(0,0,0),F=t,I=S(150,150,150),P=S(19,78,93),D=S(50,50,50),B=S(0,36,48),L=S(200,200,200),R=[S(45,253,253,255),S(44,172,247,255),S(46,100,248,255),S(96,84,199,255),S(184,104,245,255),S(98,160,218,255),S(43,238,245,255),S(38,140,206,255),S(112,96,224,255),S(206,157,255,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),E=t.setA(50),z=S(3,217,194,255),V=S(230,63,63,255),O={mapChartFillStyle:new lt({angle:135,stops:[{color:S(118,248,231,255),offset:0},{color:S(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:MA(s,R,1),pieChartSliceFillStylePalette:_A(s,R,1),funnelChartSliceFillStylePalette:wA(s,R,1),pyramidChartSliceFillStylePalette:wA(s,R,1),rectangleSeriesFillStyle:CA(s,R),gaugeChartBarColor:S(3,217,194,255),gaugeChartGlowColor:S(3,217,194,120)},N=new W({color:S(45,253,253,255)}),G=new W({color:S(255,146,146,255)}),U=new W({color:S(45,253,253,255)}),Y=new W({color:S(230,63,63,255)}),H=new W({color:S(1,190,164,120)}),X=new W({color:S(229,63,63,180)}),$=new W({color:S(1,53,57,255)}),j=new W({color:S(62,27,27,255)}),Z=[S(1,104,119,255),S(0,165,144,255),S(0,246,214,255)],Q=[S(0,87,95,255),S(0,125,124,255),S(1,209,182,255),S(0,255,221,255),S(218,112,112,255),S(172,47,47,255)],J=[S(126,255,253,255),S(50,233,230,255),S(0,196,193,255),S(62,138,178,255),S(139,88,191,255),S(162,55,143,255)],K=[S(13,31,52,255),S(101,50,118,255),S(1,142,172,255),S(2,196,170,255),S(0,255,221,255)],tt=new nt({stops:[{color:S(122,103,254,70),offset:0},{color:S(178,168,255,10),offset:1}]}),st=new W({color:S(122,103,254,255)}),et=H.getColor().setA(255),ht=S(15,83,83),rt=[S(139,252,252,150),S(60,239,239,150),S(2,201,201,150),S(26,159,159,150),S(15,146,187,150),S(65,168,200,150),S(67,146,207,150),S(64,108,209,150),S(189,64,233,150),S(219,84,238,150),S(192,55,212,150),S(212,98,229,150),S(248,110,211,150),S(251,154,225,150),S(251,154,184,150),S(233,105,144,150),S(255,133,170,150),S(249,110,135,150),S(245,72,101,150),S(210,57,84,150)];return bA({isDark:s,highlightColorOffset:S(60,60,60,60),highlightColorOffsetAxisOverlay:S(255,255,255,40),effect:e,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new it({source:xA(t,"themes/turquoiseHexagon.jpg"),fitMode:q.Fill}),dashboardSplitterFillStyle:h,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,axisLabelMinorFillStyle:u,uiTitleFillStyle:c,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:A,axisTickMajorFillStyle:g,axisGridMajorFillStyle:y,axisTickMinorFillStyle:m,axisGridMinorFillStyle:p,cursorGridFillStyle:v,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:_,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:C,uiBackgroundColor:k,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:D,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:L,dataColorPalette:R,dataColorPaletteInverted:[{area:S(170,60,210,100),border:S(210,100,250)}],dataHighlightOverlayColor:E,dataColorPositive:z,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new W({color:S(0,0,0,180)}),zoomBandChartSplitterColor:b("#2BF4F4"),zoomBandChartKnobFillStyle:t=>new it({source:xA(t,"zoomBandChart/turquoise-selector.png"),fitMode:q.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:S(255,255,255,24),overrideThemeProperties:O,treeMapChartParentColor:b("#002329"),treeMapChartNodeColors:rt,treeMapChartLabelFillStyle:new W({color:S(33,33,33)}),treeMapChartLabelHeaderFillStyle:new W({color:S(250,250,250)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:U,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:X,positiveBackgroundFillStyle:$,negativeBackgroundFillStyle:j,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:J,spectrogramColorPalette:K,bollingerFillStyle:tt,bollingerBorderFillStyle:st,highlightPointColor:t,highlightDataGridColor:et,unfocusedDataColor:ht})})),FA=Hi((()=>{const t=!1,i=new Nn({spread:0,blur:6,offset:{x:2,y:-2},color:S(0,0,0,30)}),s=new nt({position:{x:.8,y:.8},extent:ht.farthestCorner,shape:et.ellipse,stops:[{offset:0,color:S(255,255,255)},{offset:1,color:S(255,255,255)}]}),e=new W({color:S(219,227,233,255)}),h=new nt({position:{x:.5,y:.5},extent:ht.farthestCorner,shape:et.circle,stops:[{offset:0,color:S(255,255,255,200)},{offset:1,color:S(240,244,246,200)}]}),r=new nt({position:{x:.5,y:.5},extent:ht.farthestCorner,shape:et.circle,stops:[{offset:0,color:S(255,255,255,255)},{offset:1,color:S(255,255,255,255)}]}),n=new W({color:S(33,43,49)}),o=new W({color:S(33,43,49)}),a=new W({color:S(33,43,49)}),l=new W({color:S(33,43,49,150)}),u=new W({color:S(33,43,49)}),c=u,d=c,f=new lt({angle:45,stops:[{offset:0,color:S(225,225,225)},{offset:1,color:S(225,225,225)}]}),A=new W({color:S(150,150,150,255)}),g=new W({color:S(150,150,150,170)}),y=new W({color:S(150,150,150,150)}),m=new W({color:S(150,150,150,100)}),p=new W({color:S(60,70,80)}),v=new lt({angle:0,stops:[{offset:0,color:S(255,255,255,240)},{offset:1,color:S(255,255,255,240)}]}),x=new W({color:S(168,186,199)}),M=S(255,255,200),_=new W({color:S(255,255,255,240)}),w=new W({color:S(128,146,159,255)}),C=S(255,255,255,255),k=S(168,168,199,255),T=S(168,186,199,255),F=S(168,186,199,255),I=S(168,186,199,255),P=S(168,186,199,255),D=S(100,100,100),B=S(200,200,200),L=[S(28,181,140,255),S(255,132,0,255),S(240,39,39,255),S(86,121,251,255),S(2,181,213,255),S(13,212,158,255),S(22,167,3,255),S(234,103,232,255),S(62,183,179,255),S(140,93,3,255),S(155,158,186,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),R=S(150,150,150,80),E=S(46,182,120,255),z=S(255,66,66,255),V=new _e({thickness:2,fillStyle:new W({color:S(168,186,199,255)})}),O={mapChartFillStyle:new lt({angle:-45,stops:[{color:S(2,181,213,255),offset:0},{color:S(175,243,255,255),offset:1}]}),spiderSeriesFillStyle:MA(t,L,.8),pieChartSliceFillStylePalette:_A(t,L,.8),funnelChartSliceFillStylePalette:wA(t,L,.5),pyramidChartSliceFillStylePalette:wA(t,L,.5),rectangleSeriesFillStyle:CA(t,L),gaugeChartBarColor:S(46,182,120,255),gaugeChartGlowColor:S(46,182,120,120),chartXYSeriesBackgroundStrokeStyle:V,chart3DSeriesBackgroundStrokeStyle:V,polarChartSeriesBackgroundStrokeStyle:V,spiderChartSeriesBackgroundStrokeStyle:V,dataGridTextFillStyle:new W({color:S(0,88,64,255)})},N=new W({color:S(4,146,108,255)}),G=new W({color:S(240,39,39,255)}),U=new W({color:S(28,181,140,255)}),Y=new W({color:S(230,88,88,255)}),H=new W({color:S(28,181,140,180)}),X=new W({color:S(230,88,88,180)}),$=new W({color:S(229,243,228)}),j=new W({color:S(232,225,216)}),Z=[S(193,48,48,255),S(240,234,60,255),S(45,191,55,255)],Q=[S(10,19,255,255),S(15,191,250,255),S(249,255,2,255),S(253,133,0,255),S(255,24,0,255)],J=[S(50,99,213),S(8,179,77),S(255,246,0),S(255,126,0),S(189,36,30)],K=[S(16,64,176),S(8,179,77),S(255,246,0),S(255,126,0),S(168,6,0)],tt=new W({color:S(185,198,207,255)}),st=new nt({stops:[{color:S(151,190,220,10),offset:0},{color:S(151,190,220,50),offset:1}]}),rt=H.getColor().setA(255),ot=S(150,150,150),at=[S(255,243,136,125),S(254,237,99,125),S(255,216,109,125),S(255,172,100,125),S(255,133,101,125),S(255,113,142,125),S(230,103,129,125),S(242,126,219,125),S(255,155,235,125),S(255,181,240,125),S(203,143,255,125),S(208,154,255,125),S(171,188,255,125),S(197,209,255,125),S(171,187,255,125),S(84,167,239,125),S(38,196,214,125),S(38,214,196,125),S(69,225,141,125),S(36,191,88,125)];return bA({isDark:t,highlightColorOffset:S(-60,-60,-60,60),highlightColorOffsetAxisOverlay:S(0,0,0,40),effect:i,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:s,dashboardSplitterFillStyle:e,panelBackgroundFillStyle:h,seriesBackgroundFillStyle:r,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:n,axisTitleFillStyle:o,axisLabelMajorFillStyle:a,axisLabelMinorFillStyle:l,uiTitleFillStyle:u,uiTextFillStyle:c,cursorTextFillStyle:d,axisLineFillStyle:f,axisTickMajorFillStyle:A,axisGridMajorFillStyle:g,axisTickMinorFillStyle:y,axisGridMinorFillStyle:m,cursorGridFillStyle:p,legendBackgroundFillStyle:v,legendBackgroundBorderFillStyle:x,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:_,resultTableBackgroundBorderFillStyle:w,uiBackgroundColor:C,uiBackgroundBorderColor:k,uiStrokeColorContrastHigh:T,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:I,dataStrokeColorContrastHigh:P,dataStrokeColorContrastMedium:D,dataStrokeColorContrastLow:B,dataColorPalette:L,dataColorPaletteInverted:[{area:S(190,50,50,100),border:S(210,80,80)}],dataHighlightOverlayColor:R,dataColorPositive:E,dataColorNegative:z,zoomBandChartDefocusOverlayFillStyle:new W({color:S(255,255,255,180)}),zoomBandChartSplitterColor:b("#505D65"),zoomBandChartKnobFillStyle:t=>new it({source:xA(t,"zoomBandChart/light-selector.png"),fitMode:q.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:S(0,0,0,24),overrideThemeProperties:O,treeMapChartParentColor:b("#D9D9D9"),treeMapChartNodeColors:at,treeMapChartLabelFillStyle:new W({color:S(0,0,0)}),treeMapChartLabelHeaderFillStyle:new W({color:S(33,33,33)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:U,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:X,positiveBackgroundFillStyle:$,negativeBackgroundFillStyle:j,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:J,spectrogramColorPalette:K,bollingerFillStyle:st,bollingerBorderFillStyle:tt,highlightPointColor:S(0,0,0),highlightDataGridColor:rt,unfocusedDataColor:ot})})),IA=Hi((()=>{const t=!1,i=new nt({position:{x:.8,y:.8},extent:ht.farthestCorner,shape:et.ellipse,stops:[{offset:0,color:S(255,255,255)},{offset:1,color:S(255,255,255)}]}),s=new W({color:S(214,236,216,255)}),e=new nt({position:{x:.5,y:.5},extent:ht.farthestCorner,shape:et.circle,stops:[{offset:0,color:S(233,244,231,70)},{offset:1,color:S(233,244,231,200)}]}),h=new nt({position:{x:.5,y:.5},extent:ht.farthestCorner,shape:et.circle,stops:[{offset:0,color:S(255,255,255,255)},{offset:1,color:S(255,255,255,255)}]}),r=new W({color:S(1,61,53)}),n=new W({color:S(1,61,53)}),o=new W({color:S(1,61,53)}),a=new W({color:S(1,61,53,150)}),l=new W({color:S(1,61,53)}),u=l,c=u,d=new lt({angle:45,stops:[{offset:0,color:S(225,225,225)},{offset:1,color:S(225,225,225)}]}),f=new W({color:S(188,211,186,255)}),A=new W({color:S(188,211,186,150)}),g=new W({color:S(188,211,186,50)}),y=new W({color:S(188,211,186,50)}),m=new W({color:S(104,148,111,255)}),p=new lt({angle:0,stops:[{offset:0,color:S(255,255,255,240)},{offset:1,color:S(255,255,255,240)}]}),v=new W({color:S(104,148,111)}),x=S(255,255,200),M=new W({color:S(255,255,255,240)}),_=new W({color:S(104,148,111,255)}),w=S(255,255,255,255),C=S(179,201,183,255),k=S(188,211,186,255),T=S(188,211,186,255),F=S(188,211,186,255),I=S(188,211,186,255),P=S(100,100,100),D=S(200,200,200),B=[S(138,195,142,255),S(193,161,114,255),S(178,99,99,255),S(142,156,210,255),S(154,209,219,255),S(164,212,199,255),S(104,156,97,255),S(196,147,195,255),S(92,190,187,255),S(126,100,51,255),S(136,138,157,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),L=S(150,150,150,80),R=S(46,182,84,255),E=S(232,96,96,255),z=new _e({thickness:2,fillStyle:new W({color:S(188,211,186,255)})}),V={mapChartFillStyle:new lt({angle:-45,stops:[{color:S(118,160,121,255),offset:0},{color:S(174,227,178,255),offset:1}]}),spiderSeriesFillStyle:MA(t,B,.8),pieChartSliceFillStylePalette:_A(t,B,.8),pyramidChartSliceFillStylePalette:wA(t,B,.5),funnelChartSliceFillStylePalette:wA(t,B,.5),rectangleSeriesFillStyle:CA(t,B),gaugeChartBarColor:S(46,182,84,255),gaugeChartGlowColor:S(46,182,84,120),chartXYSeriesBackgroundStrokeStyle:z,chart3DSeriesBackgroundStrokeStyle:z,polarChartSeriesBackgroundStrokeStyle:z,spiderChartSeriesBackgroundStrokeStyle:z,dataGridTextFillStyle:new W({color:S(77,66,21,255)})},O=new W({color:S(93,151,97,255)}),N=new W({color:S(178,99,99,255)}),G=new W({color:S(138,195,142,255)}),U=new W({color:S(178,99,99,255)}),Y=new W({color:S(138,195,142,180)}),H=new W({color:S(178,99,99,180)}),X=new W({color:S(224,240,237)}),$=new W({color:S(251,227,227)}),j=[S(178,99,99,255),S(215,224,111,255),S(80,186,88,255)],Z=[S(62,64,142,255),S(66,131,77,255),S(250,250,135,255),S(202,161,78,255),S(179,53,53,255)],Q=[S(64,86,138),S(123,192,205),S(255,252,149),S(220,155,92),S(184,78,74)],J=[S(64,86,138),S(123,192,205),S(255,252,149),S(220,155,92),S(132,60,57)],K=new W({color:S(185,198,207,255)}),tt=new nt({stops:[{color:S(151,190,220,10),offset:0},{color:S(151,190,220,50),offset:1}]}),st=Y.getColor().setA(255),rt=S(150,150,150),ot=[S(242,239,210,150),S(243,238,183,150),S(210,222,136,150),S(204,217,148,150),S(157,190,124,150),S(143,178,72,150),S(198,147,88,150),S(216,148,71,150),S(229,142,103,150),S(225,174,152,150),S(219,149,203,150),S(216,188,209,150),S(109,198,189,150),S(172,206,202,150),S(164,223,217,150),S(174,215,233,150),S(203,225,235,150),S(220,227,243,150),S(207,213,227,150),S(171,182,209,150)];return bA({isDark:t,highlightColorOffset:S(-60,-60,-60,60),highlightColorOffsetAxisOverlay:S(0,0,0,40),effect:void 0,effectsText:!1,effectsDashboardSplitters:!1,lcjsBackgroundFillStyle:i,dashboardSplitterFillStyle:s,panelBackgroundFillStyle:e,seriesBackgroundFillStyle:h,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:r,axisTitleFillStyle:n,axisLabelMajorFillStyle:o,axisLabelMinorFillStyle:a,uiTitleFillStyle:l,uiTextFillStyle:u,cursorTextFillStyle:c,axisLineFillStyle:d,axisTickMajorFillStyle:f,axisGridMajorFillStyle:A,axisTickMinorFillStyle:g,axisGridMinorFillStyle:y,cursorGridFillStyle:m,legendBackgroundFillStyle:p,legendBackgroundBorderFillStyle:v,legendButtonDefaultColor:x,resultTableBackgroundFillStyle:M,resultTableBackgroundBorderFillStyle:_,uiBackgroundColor:w,uiBackgroundBorderColor:C,uiStrokeColorContrastHigh:k,uiStrokeColorContrastMedium:T,uiStrokeColorContrastLow:F,dataStrokeColorContrastHigh:I,dataStrokeColorContrastMedium:P,dataStrokeColorContrastLow:D,dataColorPalette:B,dataColorPaletteInverted:[{area:S(210,70,70,100),border:S(200,110,110)}],dataHighlightOverlayColor:L,dataColorPositive:R,dataColorNegative:E,zoomBandChartDefocusOverlayFillStyle:new W({color:S(255,255,255,180)}),zoomBandChartSplitterColor:b("#446A40"),zoomBandChartKnobFillStyle:t=>new it({source:xA(t,"zoomBandChart/lightnature-selector.png"),fitMode:q.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:S(0,0,0,24),overrideThemeProperties:V,treeMapChartParentColor:b("#EFF7EE"),treeMapChartNodeColors:ot,treeMapChartLabelFillStyle:new W({color:S(0,0,0)}),treeMapChartLabelHeaderFillStyle:new W({color:S(33,33,33)})},{positiveTextFillStyle:O,negativeTextFillStyle:N,positiveFillStyle:G,negativeFillStyle:U,positiveAreaFillStyle:Y,negativeAreaFillStyle:H,positiveBackgroundFillStyle:X,negativeBackgroundFillStyle:$,badGoodColorPalette:j,coldHotColorPalette:Z,intensityColorPalette:Q,spectrogramColorPalette:J,bollingerFillStyle:tt,bollingerBorderFillStyle:K,highlightPointColor:S(0,0,0),highlightDataGridColor:st,unfocusedDataColor:rt})})),PA=Hi((()=>{const t=S(255,255,255),i=new W({color:t}),s=!0,e=new Nn({spread:1,blur:9,offset:{x:0,y:0},color:S(255,255,255,30)}),h=new W({color:S(6,15,36)}),r=new nt({stops:[{color:S(46,13,87,50),offset:0},{color:S(0,0,0,150),offset:1}]}),n=new W({color:S(0,5,8,150)}),o=i,a=i,l=i,u=new W({color:S(255,255,220,130)}),c=i,d=i,f=d,A=new lt({angle:45,stops:[{offset:0,color:S(241,133,255,255)},{offset:1,color:S(115,207,238,255)}]}),g=i,y=new W({color:S(61,94,110,100)}),m=new W({color:S(61,94,110,255)}),p=new W({color:S(61,94,110,40)}),v=i,x=new W({color:S(0,18,23,255)}),M=i,_=S(115,207,238,255),w=new W({color:S(0,17,22,240)}),C=i,k=S(0,38,48,255),T=S(0,0,0),F=t,I=S(150,150,150),P=S(19,57,93),D=S(50,50,50),B=S(0,17,48),L=S(200,200,200),R=[S(20,211,237,255),S(98,147,252,255),S(164,73,250,255),S(129,117,253,255),S(95,134,252,255),S(22,133,212,255),S(35,200,242,255),S(104,121,233,255),S(137,69,232,255),S(70,72,241,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),E=t.setA(50),z=S(3,217,194,255),V=S(243,21,110,255),O={mapChartFillStyle:new lt({angle:135,stops:[{color:S(118,248,231,255),offset:0},{color:S(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:MA(s,R,.5),pieChartSliceFillStylePalette:_A(s,R,2),funnelChartSliceFillStylePalette:wA(s,R,1),pyramidChartSliceFillStylePalette:wA(s,R,1),rectangleSeriesFillStyle:CA(s,R),gaugeChartBarColor:S(3,217,194,255),gaugeChartGlowColor:S(3,217,194,150)},N=new W({color:S(20,211,237,255)}),G=new W({color:S(253,145,178,255)}),U=new W({color:S(20,211,237,255)}),Y=new W({color:S(239,68,121,255)}),H=new W({color:S(20,211,237,120)}),X=new W({color:S(239,68,121,180)}),$=new W({color:S(1,53,57,255)}),j=new W({color:S(94,19,42,255)}),Z=[S(174,51,132,255),S(204,107,218,255),S(189,215,253,255)],Q=[S(0,63,95,255),S(0,149,255,255),S(0,225,255,255),S(255,154,254,255),S(204,98,170,255),S(139,39,84,255)],J=[S(197,241,255,255),S(70,210,255,255),S(0,164,217,255),S(90,99,222,255),S(138,75,192,255),S(151,27,162,255)],K=[S(13,31,52,255),S(129,54,130,255),S(131,108,176,255),S(7,162,213,255),S(26,247,255,255)],tt=new nt({stops:[{color:S(219,42,235,60),offset:0},{color:S(237,73,252,10),offset:1}]}),st=new W({color:S(237,73,252,255)}),et=H.getColor().setA(255),ht=S(8,70,100),rt=[S(149,230,255,150),S(93,213,243,150),S(20,189,223,150),S(5,151,181,150),S(2,138,198,150),S(2,113,198,150),S(97,148,236,150),S(93,111,230,150),S(151,120,223,150),S(128,87,227,150),S(153,52,230,150),S(179,92,245,150),S(248,110,211,150),S(255,155,228,150),S(251,88,207,150),S(255,0,162,150),S(214,73,177,150),S(209,71,159,150),S(238,101,169,150),S(210,57,134,150)];return bA({isDark:s,highlightColorOffset:S(60,60,60,60),highlightColorOffsetAxisOverlay:S(255,255,255,40),effect:e,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new it({source:xA(t,"themes/cyberSpace.jpg"),fitMode:q.Fill}),dashboardSplitterFillStyle:h,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,axisLabelMinorFillStyle:u,uiTitleFillStyle:c,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:A,axisTickMajorFillStyle:g,axisGridMajorFillStyle:y,axisTickMinorFillStyle:m,axisGridMinorFillStyle:p,cursorGridFillStyle:v,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:_,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:C,uiBackgroundColor:k,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:D,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:L,dataColorPalette:R,dataColorPaletteInverted:[{area:S(41,130,255,100),border:S(45,110,240)}],dataHighlightOverlayColor:E,dataColorPositive:z,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new W({color:S(0,0,0,180)}),zoomBandChartSplitterColor:b("#DB77FF"),zoomBandChartKnobFillStyle:t=>new it({source:xA(t,"zoomBandChart/cyberspace-selector.png"),fitMode:q.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:S(255,255,255,24),overrideThemeProperties:O,treeMapChartParentColor:b("#1E1E3B"),treeMapChartNodeColors:rt,treeMapChartLabelFillStyle:new W({color:S(33,33,33)}),treeMapChartLabelHeaderFillStyle:new W({color:S(250,250,250)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:U,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:X,positiveBackgroundFillStyle:$,negativeBackgroundFillStyle:j,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:J,spectrogramColorPalette:K,bollingerFillStyle:tt,bollingerBorderFillStyle:st,highlightPointColor:t,highlightDataGridColor:et,unfocusedDataColor:ht})})),DA={};Object.defineProperty(DA,"darkGold",{get:kA,enumerable:!0}),Object.defineProperty(DA,"turquoiseHexagon",{get:TA,enumerable:!0}),Object.defineProperty(DA,"light",{get:FA,enumerable:!0}),Object.defineProperty(DA,"lightNature",{get:IA,enumerable:!0}),Object.defineProperty(DA,"cyberSpace",{get:PA,enumerable:!0});const BA=DA,LA=BA.darkGold,RA=t=>({...t,effect:void 0});class EA extends Tl{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l),this.QL=u}setLabelAlignment(t){return this.QL=t,this.xs(),this}getLabelAlignment(){return this.QL}}class zA extends Th{constructor(t,i,s,e,h,r,n){let o;super(t,{Pr:()=>t.JL?t.JL[this.key].max:void 0,Ir:()=>t.JL?t.JL[this.key].min:void 0,Br:()=>{}},r,i,s,{numeric:i.parallelCoordinateAxisNumericTicks||i.yAxisNumericTicks,datetime:i.parallelCoordinateAxisDateTimeTicks||i.yAxisDateTimeTicks,time:i.parallelCoordinateAxisTimeTicks||i.yAxisTimeTicks},{type:"linear"}),this.KL=[],this.Gf=[],this.qL=!0,this.tR=8,this.$i=!1,this.iR=(t,i)=>{this.sR=this.chart.engine.setMouseStyle(Ke.Vertical,this.sR)},this.eR=(t,i)=>{this.chart.engine.restoreMouseStyle(this.sR)},this.hR=(t,i)=>{const s=this.KL.find((i=>i.shape===t));if(!s)return;if(!s.mouseInteractions)return;const e=this.chart.us.Go(i),h=pt({x:e.engineX,y:e.engineY},this.chart.us.ft,this.chart.rR),r=this.chart.rR.y.gi(t.St(),10),n=this.chart.rR.y.gi(t.bt(),-10);h.y<=r?this.nR={selector:s,type:"scaleMin"}:h.y>=n?this.nR={selector:s,type:"scaleMax"}:this.nR={selector:s,type:"move"},mi(i)},this.oR=(t,i,s)=>{if(void 0===this.aR)return;if(!this.nR)return;const{selector:e,type:h}=this.nR;if(!e.mouseInteractions)return;const r=.05*Math.abs(this.Xh-this.Hh);if("move"===h){const t=e.max-e.min,i=this.chart.lR(e.max,this.aR,this).y,h=this.chart.rR.y.gi(i,s.y),r=this.chart.uR(h,this.aR,this);e.max=Jt(r,Math.max(this.Hh,this.Xh),Math.min(this.Hh,this.Xh)+t),e.min=e.max-t}else if("scaleMax"===h){const t=this.chart.lR(e.max,this.aR,this).y,i=this.chart.rR.y.gi(t,s.y),h=this.chart.uR(i,this.aR,this);e.max=Jt(h,e.min+r,Math.max(this.Hh,this.Xh))}else if("scaleMin"===h){const t=this.chart.lR(e.min,this.aR,this).y,i=this.chart.rR.y.gi(t,s.y),h=this.chart.uR(i,this.aR,this);e.min=Jt(h,e.max-r,Math.min(this.Hh,this.Xh))}this.chart.cR(),mi(i)},this.dR=(t,i)=>{const s=this.KL.find((i=>i.shape===t));if(!s)return;if(!s.mouseInteractions)return;const e=this.KL.indexOf(s);e>=0&&this.KL.splice(e,1),s.shape.dispose(),this.chart.cR(),mi(i)},this.fR=t=>{this.qL&&(this.addRangeSelector(),mi(t))},this.chart=t,this.key=e,this.userID=h,this.es=this.chart.us.es.hs(this,{}),this.Ls=n,this.AR=n.Re(t.rR).Le(this.qi.parallelCoordinateAxisBackgroundFillStyle||O).Be(dt).setMouseInteractions(!1),this.Th=n.Ur(t.rR).tr(this.qi.parallelCoordinateAxisTitleFont||this.qi.yAxisTitleFont).Le(this.qi.parallelCoordinateAxisTitleFillStyle||this.qi.yAxisTitleFillStyle).setMouseInteractions(!1).Nr(Qi).Gr(Qi),this.er=this.es.Dg([this.Th]).bs(i.effectsText),this.HD=n.Ye(t.rR).We(i.parallelCoordinateAxisStrokeStyle||i.yAxisStrokeStyle),this.setAnimationsEnabled(!1),this.onIntervalChange(((i,s,e)=>{t.gR(this,s,e)})),this.HD.setMouseEnterEventHandler((()=>{this.qL&&(o=this.chart.engine.setMouseStyle(Ke.Point))})),this.HD.setMouseLeaveEventHandler((()=>{this.chart.engine.restoreMouseStyle(o)})),this.HD.setMouseDoubleClickEventHandler(((t,i)=>this.fR(i)));const a=ve(new Se(((t,i)=>{this.fR(i)})));this.HD.setTouchStartEventHandler(a.onTouchStart),this.HD.setTouchMoveEventHandler(a.onTouchMove),this.HD.setTouchEndEventHandler(a.onTouchEnd),this.setTitle(e)}setBackgroundFillStyle(t){return this.AR.Le(t),this.Ls.xs(),this}getBackgroundFillStyle(){return this.AR.Qh()}setStrokeStyle(t){const i="function"==typeof t?t(this.HD.Su()):t,s=i.getFillStyle();return Z(s)?(this.yR=s.lut,this.chart.mR=!0):this.yR=void 0,this.HD.We(i),this.chart.us.xs(),this}getStrokeStyle(){return this.HD.Su()}setMouseInteractionRangeSelectors(t){return this.qL=t,this}getMouseInteractionRangeSelectors(){return this.qL}setTickStrategy(t,i){return super.Yh(t,i)}getTickStrategy(){return this.ah}addRangeSelector(){const t=this.dr(),i=this.Ls.Re(this.chart.rR).Le(this.qi.parallelCoordinateAxisRangeSelectorFillStyle||this.qi.dataGridScrollBarFillStyle).Be(this.qi.parallelCoordinateAxisRangeSelectorStrokeStyle||this.qi.dataGridScrollBarStrokeStyle).setMouseEnterEventHandler(this.iR).setMouseLeaveEventHandler(this.eR).setMouseDragStartEventHandler(((t,i)=>this.hR(t,i))).setMouseDragEventHandler(((t,i,s,e,h)=>this.oR(t,i,h))).setMouseDoubleClickEventHandler(this.dR).setMouseInteractions(!0),s=ve(new be(((t,i,s)=>this.hR(t,s)),((t,i,s,e,h)=>this.oR(t,h,e)),((t,i,s,e)=>{}),1));i.setTouchStartEventHandler(s.onTouchStart),i.setTouchMoveEventHandler(s.onTouchMove),i.setTouchEndEventHandler(s.onTouchEnd);const e={min:t.min+.25*(t.max-t.min),max:t.max-.25*(t.max-t.min),shape:i,mouseInteractions:!0};this.KL.push(e),this.chart.cR();const h={setInterval:(t,i)=>(e.min=Math.min(t,i),e.max=Math.max(t,i),this.chart.cR(),h),setMouseInteractions:t=>(e.mouseInteractions=t,h),dispose:()=>{const t=this.KL.indexOf(e);return t>=0&&(this.KL.splice(t,1),this.chart.cR()),h}};return h}addCustomTick(){const t=new EA((()=>this.chart.us.xs()),(()=>{const i=this.Gf.indexOf(t);i>=0&&this.Gf.splice(i,1)}),(this.qi.parallelCoordinateAxisNumericTicks||this.qi.yAxisNumericTicks).majorTickStyle.tickStyle,(this.qi.parallelCoordinateAxisNumericTicks||this.qi.yAxisNumericTicks).majorTickStyle.tickLength,(this.qi.parallelCoordinateAxisNumericTicks||this.qi.yAxisNumericTicks).majorTickStyle.gridStrokeStyle,(this.qi.parallelCoordinateAxisNumericTicks||this.qi.yAxisNumericTicks).majorTickStyle.tickPadding,(this.qi.parallelCoordinateAxisNumericTicks||this.qi.yAxisNumericTicks).majorTickStyle.labelRotation,(this.qi.parallelCoordinateAxisNumericTicks||this.qi.yAxisNumericTicks).majorTickStyle.labelFillStyle,(this.qi.parallelCoordinateAxisNumericTicks||this.qi.yAxisNumericTicks).majorTickStyle.labelFont,(t=>this.formatValue(t)),(this.qi.parallelCoordinateAxisNumericTicks||this.qi.yAxisNumericTicks).majorTickStyle.labelAlignment);return this.Gf.push(t),this.chart.us.xs(),t}Vs(){if(!this.ji)return{Ug:0,pR:0,vR:0,Zd:0};const t=!(this.lh.size>0),i=this.Th&&this.Th.kr().length>0&&this.getTitleFillStyle()!==O?this.chart.us.Hg.Yg(this.Th.kr(),this.getTitleFont(),this.getTitleRotation()):{x:0,y:0},s=_h(this.oh)?new Map:Ih(this.oh,Math.min(this.Hh,this.Xh),Math.max(this.Hh,this.Xh),this.Hh,this.Xh,0),e=this.ft;let h=0;s.forEach(((i,s)=>{if(fh(s)){const r=Math.max(...i.map((i=>{if(!As(i,this.Hh,this.Xh))return 0;const h=this.chart.us.Hg.Yg(s.je(i,e),s.$e.labelFont,s.$e.labelRotation);return t||!h.isEstimate?h.x:0})))+s.$e.tickLength+s.$e.tickPadding;h=Math.max(h,r)}}));const r=this.Gf.reduce(((t,i)=>Math.max(t,i.ji?this.chart.us.Hg.Yg(i.ac(i.S),i.bp,i.Wd).x+i.pp+i.Sp:0)),0);h=Math.max(h,r);const n=i.y+this.tR;h=Math.max(h,i.x/2);const o=h;return{Ug:h,pR:n,vR:i.x,Zd:o}}Ee(t,i,s,e){this.aR=e;const h=Math.min(this.Hh,this.Xh),r=Math.max(this.Hh,this.Xh),n=this.chart.rR.y.hi(),o=this.HD.Su(),a=we(o)?o.getThickness()/2:0,l=this.cr({physicalAxisSize:n,parallelAxisIndex:e,halfAxisThickness:a});for(const[t,i]of this.lh)for(const[,e]of i){const i=l.get(e);i&&s.add({positions:[i.positionTicklineStart,i.positionTicklineEnd]},{lineStyle:t.$e.tickStyle})}this.Gf.forEach((t=>{if(!t.ji||t.S<h||t.S>r)return;const n=this.sv(e,a,t.S,t.pp,t.Sp,t.QL);s.add({positions:[n.positionTicklineStart,n.positionTicklineEnd]},{lineStyle:t.mp}),i.add().ze(n.positionLabel).ja(n.alignmentLabel).Le(t.dm).tr(t.bp).vr(t.ac(t.S)).ir(t.Wd).setMouseInteractions(t.Wo)})),this.HD.Xe({x:e,y:0}).He({x:e,y:1}),this.Th.ze({x:e,y:this.chart.rR.y.gi(0,-(a+this.tR))}).ir(this.getTitleRotation()).ja({x:0,y:1});const u=0===e?e:this.chart.rR.x.gi(e,-1.2*t.Ug);this.AR.ze({x:u,y:0}).tt({x:e-u,y:1});const c=this.chart.rR.Gi();this.KL.forEach((t=>{const i=this.chart.lR(t.min,e,this),s=this.chart.lR(t.max,e,this),h={x:e-10*c.x*.5,y:i.y},r=e+10*c.x*.5,n=s.y;t.shape.ze(h).tt({x:r-h.x,y:n-h.y})}))}W(){this.AR.dispose(),this.Th.dispose(),this.HD.dispose(),this.KL.forEach((t=>t.shape.dispose())),this.KL.length=0,this.hr(),this.mr(),this.$i=!0,this.L.emit("dispose")}isDisposed(){return this.$i}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t)}setMouseInteractions(t){return this.setMouseInteractionRangeSelectors(t),this}br(t,i){return new Fh(i,t,this.Ls,this.chart.rR)}Mr(t,i){const s=t.Rh.$e,e=this.getInterval(),h=this.sv(i.parallelAxisIndex,i.halfAxisThickness,t.S,s.getTickLength(),s.getTickPadding(),2*(t.S-e.start)/(e.end-e.start)-1);return t.hh.ze(h.positionLabel).ja(h.alignmentLabel).ir(s.getLabelRotation()),h}sv(t,i,s,e,h,r){const n=this.chart.rR.gi({x:t,y:(s-this.Hh)/(this.Xh-this.Hh)},{x:0-i,y:0}),o=this.chart.rR.gi(n,{x:-e,y:0});return{positionTicklineStart:n,positionTicklineEnd:o,positionLabel:this.chart.rR.gi(o,{x:-h,y:0}),alignmentLabel:{x:1,y:r}}}Rr(t,i){return fe(t,i,this.ft)}zr(t,i,s){return{min:t,max:i}}}class VA extends Iu{constructor(t,i,s,e,h){super(t,i,s,e),this.ws="Parallel Coordinate Series",this.SR=!1,this.oe=t;const r=void 0!==(null==h?void 0:h.automaticColorIndex)?h.automaticColorIndex:this.oe.getSeries().length;this.bR=Ri(this.qi.parallelCoordinateChartSeriesColor,r)||(()=>{const t=Ri(this.qi.lineSeriesStrokeStyle,r).getFillStyle();return(Y(t)?t.getColor():void 0)||S(255,255,0)})(),this.onVisibleStateChanged((()=>{this.oe.xR()})),this.onDispose((()=>{this.oe.xR()})),this.setHighlightOnHover(!1)}setData(t){const i=void 0!==this.MR;return this.MR=this.oe._R(t),i&&this.oe.wR(),this}getData(){return this.MR}setColor(t){const i="function"==typeof t?t(this.bR):t;return i===this.bR||(this.bR=i,this.oe.us.xs(),this.oe.CR(this)),this}getColor(){return this.bR}fv(){return this.getAutoScrollingEnabled()}wv(){}Ee(){}Fp(){}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:new W({color:this.bR})})}$y(){return super.$y()&&!this.SR}}class OA extends $l{constructor(t,i,s,e,h,r,n){var o,a;super(t,i,s,i.zy("parallelAxisChart bg",0),e,i.us.qi.parallelCoordinateChartBackgroundFillStyle||i.us.qi.chartXYBackgroundFillStyle,i.us.qi.parallelCoordinateChartBackgroundStrokeStyle||i.us.qi.chartXYBackgroundStrokeStyle,i.us.qi.parallelCoordinateChartTitleFont||i.us.qi.chartXYTitleFont,i.us.qi.parallelCoordinateChartTitleFillStyle||i.us.qi.chartXYTitleFillStyle,r),this.axes=[],this.kR=!0,this.TR=Zi(),this.FR=new Map,this.IR=this.qi.parallelCoordinateChartSeriesColorUnselected||S(255,255,255,30),this.PR=f({resolution:32}),this.DR=!0,this.mR=!1,this.BR=!1,this.LR=!0,this.RR=!1,this.ER=!1,this.zR=!1,this.VR=!1,this.Cn=(t,i,s,e,h)=>{this.rR.tt(e,h)},this.wh.vr("Parallel Coordinate Chart"),this.us.Qn(Yo.Rf),this.rR=this.xy.d2({scaleXYConstructor:ee}).Vi(0,1),this.Ey(h,this.rR),this.Hv=this.vy.Re(this.rR).ze({x:0,y:0}).tt({x:0,y:1}).Le(this.qi.parallelCoordinateChartSeriesBackgroundFillStyle||this.qi.chartXYSeriesBackgroundFillStyle).Be(dt).setMouseInteractions(!0),this.Xv=this.vy.Re(this.rR).ze({x:0,y:0}).tt({x:0,y:1}).Le(O).Be(this.qi.parallelCoordinateChartSeriesBackgroundStrokeStyle||this.qi.chartXYBackgroundStrokeStyle).setMouseInteractions(!1),super.Yv(this.Hv,this.Xv),this.setSeriesBackgroundEffect(!1),this.OR=new _e({thickness:null!==(o=this.qi.parallelCoordinateChartSeriesLineThickness)&&void 0!==o?o:2,fillStyle:new H}),this.NR=new _e({thickness:null!==(a=this.qi.parallelCoordinateChartSeriesLineThickness)&&void 0!==a?a:2,fillStyle:new W({color:this.qi.parallelCoordinateChartSeriesColorUnselected})}),this.GR=this.TR.xt(this.vy.Zg(this.rR)).We(this.OR),this.GR.Cu=5e4,this.UR=this.vy.Zg(this.rR).We(this.qi.parallelCoordinateChartPointedSeriesLineStyle||Ri(this.qi.lineSeriesStrokeStyle,0)).setMouseInteractions(!1),this.WR=new Pl((()=>this.vy.Ur(this.rR))),this.YR=new Il((()=>this.vy.Zg(this.rR).setMouseInteractions(!1)),((t,i,s)=>(t.Vt().We(s.lineStyle),i.map((({positions:i})=>t.jr().Jg(i[0],i[1]))))));const l=i.ep(),u=qt(n?n.cursorBuilder:void 0,ll);this.hp=Ya(this,l,u.wm(l,this.uiScale,this.uiScale,Zt,this.qi),this,"show-nearest",NA,(()=>0)),this.onResize(this.Cn)}setCursor(t){return this.hp.setCursor(t),this}getCursor(){return this.hp.getCursor()}setCursorMode(t){return this.hp.setCursorMode(t),this}getCursorMode(){return this.hp.getCursorMode()}setCustomCursor(t){return this.hp.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.hp.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.hp.offCursorTargetChanged(t)}setCursorFormatting(t){return this.hp.setCursorFormatting(t),this}getCursorFormatting(){return this.hp.getCursorFormatting()}addCursor(t=ll){const i=this.wy(),s=t.wm(i,this.uiScale,this.uiScale,this.Sy(i),this.qi);return this.By(s),s}onSelectedSeriesChanged(t){return this.L.on("selectedSeriesChanged",t)}offSelectedSeriesChanged(t){return this.L.off(t)}setMouseInteractionRangeSelectors(t){return this.DR=t,this.forEachAxis((t=>t.setMouseInteractionRangeSelectors(this.DR))),this}getMouseInteractionRangeSelectors(){return this.DR}setMouseInteractions(t){return this.setMouseInteractionRangeSelectors(t),this}setUnselectedSeriesColor(t){return this.IR="function"==typeof t?t(this.IR):t,this.NR=new _e({thickness:this.getSeriesStrokeThickness(),fillStyle:new W({color:this.IR})}),this.us.xs(),this}getUnselectedSeriesColor(){return this.IR}setPointedSeriesStrokeStyle(t){return this.UR.We(t),this.us.xs(),this}getPointedSeriesStrokeStyle(){return this.UR.Su()}setSpline(t,i){return t?this.PR.M({resolution:void 0!==(null==i?void 0:i.resolution)?i.resolution:32}):this.PR.M(void 0),this.us.xs(),this}setAxes(t){const i=Array.isArray(t)?t.map(((t,i)=>({key:t,id:i}))):"object"==typeof t?Object.entries(t).map(((t,i)=>({key:t[0],id:t[1]}))):void 0;if(!i)return this;const s=i.filter((t=>void 0===this.axes.find((i=>i.key===t.key)))),e=this.axes.filter((t=>void 0===i.find((i=>t.key===i.key))));return s.forEach((t=>{const i=this.HR(),s=new zA(this,this.qi,!this.gh,t.key,t.id,i,this.vy);s.setMouseInteractionRangeSelectors(this.DR);const e=s.onVisibleStateChanged((t=>{this.LR=!0}));s.onDispose((()=>{s.offVisibleStateChanged(e)})),this.axes.push(s)})),e.forEach((t=>{t.W();const i=this.axes.indexOf(t);i>=0&&this.axes.splice(i,1)})),this.axes=i.map((t=>this.axes.find((i=>i.key===t.key)))),this.LR=!0,this.JL=void 0,this.us.xs(),this}getAxis(t){const i=this.XR(t);if(!i)throw new Error(`ParallelAxisChart.getAxis | no such axis: "${t}". Found: ${this.axes.map((t=>void 0!==t.userID?`${t.key}, ${t.userID}`:t.key)).join(", ")}`);return i}hasAxis(t){return void 0!==this.XR(t)}addSeries(t){const i=new VA(this,this.Uv,this.qi,this.us.es,t);return super.$v(i),this.ER=!0,this.JL=void 0,this.us.xs(),i}setSeriesStrokeThickness(t){return this.OR=this.OR.setThickness(t),this.NR=this.NR.setThickness(t),this.GR.We(this.OR),this.us.xs(),this}getSeriesStrokeThickness(){return this.OR.getThickness()}setLUT(t){return this.Jd=t,this.Jd&&0===this.Jd.lut.units.length&&(this.Jd.lut=this.Jd.lut.setUnits(this.Jd.axis.getTitle())),this.VR=!0,this.us.xs(),this}Ee(t){super.Ee(t);const i=this.axes.filter((t=>t.getVisible()));this.rR.zi(0,i.length-1),this.Hv.tt({x:i.length-1,y:1}),this.Xv.tt({x:i.length-1,y:1});const s=void 0===this.JL;if(!this.JL){const t={};i.forEach((i=>{t[i.key]={min:es,max:hs}})),this.Nv.forEach((i=>{i.MR&&Object.entries(i.MR).forEach((([i,s])=>{const e=t[i];e&&!Number.isNaN(s)&&(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}))})),this.JL=t}if(this.zR||this.RR||this.ER){const t=i.map(((t,i)=>t.KL));this.Nv.forEach((s=>{const e=s.MR;if(!e)return;let h=!1;for(let s=0;s<i.length;s+=1){const r=i[s],n=t[s],o=void 0!==n.find((t=>As(e[r.key],t.min,t.max)));if(n.length>0&&!o){h=!0;break}}s.SR=h}));const s=this.Nv.filter((t=>!t.SR));this.L.emit("selectedSeriesChanged",this,s)}for(const t of this.Nv)t.wv();for(const t of this.Nv)t.Ee();super.Ry();const e=!this.Hv.getIsUnderMouse()&&void 0===this.Nv.find((t=>t.getIsUnderMouse()))||this.us.$R()?void 0:this.jR();if(this.hp.Ee(!1,this.Nv,void 0,{explicitTarget:e,afterCursorPointedAt:t=>{const i=this.us.jn();if(t.length>1&&i){const t=this.us.Go(i);this.hp.jy.xm({x:t.engineX,y:t.engineY},this.us.ft)}}}),Ga.Hy(this.wh,this.Vy),i.length>=2){const t=this.WR.Ip(),e=this.YR.Ip(),h=i.map((t=>(t.Lr(),t.Vs())));h.forEach(((s,h)=>i[h].Ee(s,t,e,h))),t.finishPlot(),e.finishPlot();const r=Ga.Yy(this.wh,this.Vy);this.rR.Ri([this.Xt.left+this.Fa.left+h[0].Zd,this.Xt.right+this.Fa.right+h[h.length-1].vR/2]),this.rR.Ei([this.Xt.bottom+this.Fa.bottom+h.reduce(((t,i)=>Math.max(t,i.pR)),0),this.Xt.top+this.Fa.top+r]),t.finishPlot(),e.finishPlot(),(s||this.mR)&&i.forEach(((t,i)=>{if(!t.yR)return;const s=t.yR.steps.map((s=>({...s,value:this.lR(s.value,i,t).y}))),e=t.yR.setSteps(s);t.HD.We((t=>t.setFillStyle(new j({lookUpProperty:"y",lut:e}))))}));const n=this.LR||this.RR||this.kR||this.PR.o;n&&(this.GR.Vt(),this.TR.Vt(),this.FR.clear(),this.Nv.forEach((t=>{const s=t.MR;if(!t.getVisible()||!s)return;const e=this.ZR(t,s,i,this.GR,this.TR);this.FR.set(t,e),t.ys(e)}))),(n||this.zR||this.VR||this.RR)&&this.QR(this.Nv),!n&&this.ER&&this.Nv.forEach((t=>{if(t.Zi.length>0)return;const s=t.MR;if(!t.getVisible()||!s)return;const e=this.ZR(t,s,i,this.GR,this.TR);this.FR.set(t,e),t.ys(e),this.QR([t])})),this.Nv.find((t=>t.MR&&Object.keys(t.MR).length>0))&&(this.BR=!0)}const h=1===(null==e?void 0:e.length)?e[0]:void 0;(h!==this.JR||this.RR)&&(this.UR.Vt(),h&&h.series.MR?(this.ZR(h.series,h.series.MR,i,this.UR,void 0),this.GR.We(this.NR)):this.GR.We(this.OR));for(const t of this.Nv)t.Fp();this.kR=!1,this.zR=!1,this.LR=!1,this.RR=!1,this.ER=!1,this.VR=!1,this.PR.o=!1,this.mR=!1,this.JR=h}QR(t){const i=this.Jd&&{lut:this.Jd.lut,key:this.Jd.axis.key};t.forEach((t=>{const s=t.MR,e=this.FR.get(t);if(!s||!e)return;let h;if(t.SR)h=this.IR;else if(i){const t=s[i.key];h=i.lut.getColors(t)}else h=t.bR;e.forEach((t=>t.tL(h)))}))}xR(){this.RR=!0,this.us.xs()}wR(){this.BR&&this.us.Qn(Yo.Pf),this.RR=!0,this.us.xs()}XR(t){return this.axes.find((i=>i.key===t))||this.axes.find((i=>i.userID===t))}HR(){return yt.d1({scale1DConstructor:te,dimension:"x"}).K(0,1)}_R(t){if(this.JL=void 0,this.us.xs(),Array.isArray(t)){const i={};return t.forEach(((t,s)=>{var e;if("number"==typeof t){const h=null===(e=this.axes[s])||void 0===e?void 0:e.key;if(!h)throw new Error("ParallelCoordinateSeries Axis count doesnt match supplied data");i[h]=t}else"object"==typeof t&&(i[t.key]=t.value)})),i}if("object"==typeof t)return t;throw new Error("ParallelCoordinateSeries unidentified data format")}gR(t,i,s){this.kR=!0,this.us.xs()}lR(t,i,s){return{x:i,y:(t-s.ft.X)/(s.ft.$-s.ft.X)}}uR(t,i,s){const e=s.getInterval();return e.start+t*(e.end-e.start)}CR(t){this.VR=!0,this.us.xs()}cR(){this.zR=!0,this.us.xs()}getSeries(){return this.Nv}nf(){const t=[],i=this.Jd;return i&&t.push({Kd:()=>({lut:i.lut,lookUpProperty:void 0}),attach:(t,s)=>{t.setText("Value based color").setOn(!0),t.onSwitch(((t,s)=>{this.setLUT(s?i:void 0)}))}}),t}getMinimumSize(){return{x:200,y:200}}forEachAxis(t){return this.axes.slice().forEach((i=>t(i))),this}addLegendBox(t,i){const s=super.addLegendBox(t,i);return void 0!==i&&i!==this.uiScale||void 0!==t&&"vertical"!==t.getAlignment()||s.setOrigin(qe.RightCenter).setPosition({x:this.uiScale.x.ct(this.uiScale.x.ei()-this.Fa.right),y:mt(this.Mg.y.ct(this.Mg.y.si()+this.Mg.y.hi()/2),this.Mg.y,this.uiScale.y)}),s}ZR(t,i,s,e,h){const r=[];let n;for(let o=0;o<s.length;o+=1){const a=s[o],l=i[a.key],u=this.lR(l,o,a),c=this.PR._();if(c){if(void 0!==n){const i=c.resolution;let s;for(let o=0;o<=i;o+=1){const a=(o-1)/i,l=o/i,c=l<.5?4*l*l*l:1-(-2*l+2)**3/2;if(void 0!==s){const i={x:n.x+a*(u.x-n.x),y:n.y+s*(u.y-n.y)},o={x:n.x+l*(u.x-n.x),y:n.y+c*(u.y-n.y)},d=e.jr();h&&h.zt(d,t),r.push(d),d.Jg(i,o)}s=c}}}else if(void 0!==n){const i=e.jr();h&&h.zt(i,t),r.push(i),i.Jg(n,u)}n=u}return r}jR(){const t=this.getCursorMode(),i=this.us.jn();if(t&&i){const s=this.us.Go(i),e=pt({x:s.engineX,y:s.engineY},this.us.ft,this.rR),h=Math.round(e.x),r=this.axes.filter((t=>t.getVisible()))[h],n=r.key,o=Gi(this.Nv.map((t=>{if(!t.MR||!t.$y())return;const i=t.MR[n],s=this.lR(i,h,r);return{cursorPosition:{pointMarker:s,pointMarkerScale:this.rR,resultTable:s,resultTableScale:this.rR},value:i,series:t,axis:r}})));return"show-nearest"===t?[o.sort(((t,i)=>Math.abs(t.cursorPosition.pointMarker.y-e.y)-Math.abs(i.cursorPosition.pointMarker.y-e.y)))[0]]:("show-nearest-interpolated"!==t&&"show-all-interpolated"!==t||Yt.console.warn('LightningChart JS ParallelCoordinateChart does not support "interpolated" cursor modes.'),o)}}}const NA=(t,i,s)=>{if(s.length>1)return[[s[0].axis.getTitle()],...Gi(s.map((t=>{const i=t.series.getData(),s=i?i[t.axis.key]:void 0;if(void 0!==s)return Wa(t,[[t.series,"",ce(t.axis.formatValue(s),t.axis)]])})).flat())];const e=s[0],h=[[e.series]];return t.axes.forEach((i=>{const s=e.series.getData();if(!s)return;const r=s[i.key];if(void 0===r)return;const n=t.axes.filter((t=>t.getVisible()))[e.cursorPosition.pointMarker.x]===i?{weight:"bold"}:{};h.push([{text:i.getTitle(),font:n},"",{text:i.formatValue(r),font:n}])})),h},GA=(t,i)=>i?t.x:t.y,UA=(t,i,s,e)=>1===i&&e===(s?t.columnIndex:t.rowIndex)||-1===i&&e===(s?t.columnIndex+t.columnSpan:t.rowIndex+t.rowSpan),WA=(t,i,s,e,h,r)=>{const n=i.length,o=Math.sign(e),a=[],l=i.reduce(((t,i)=>t+i));for(let t=1;t<=n-1;t+=1)a.push(GA(h,r)*i.slice(0,t).reduce(((t,i)=>t+i),0)/l);const u=a.map((t=>0));let c=a[s-1]+e;for(let i=s;i>0&&i<n;i+=o){const e=t.filter((t=>UA(t,o,r,i))).reduce(((t,i)=>Math.max(t,GA(i.panel.getMinimumSize()||{x:0,y:0},r))),20),n=a[i-1];if(1===o&&c>GA(h,r)-e||-1===o&&c<0+e){u.fill(0);break}if(i!==s&&(1===o?n>c:n<c))break;u[i-1]=c-n,c+=e*o}const d=u.map(((t,i)=>a[i]+t)),f=d.map(((t,i)=>(t-(i>0?d[i-1]:0))/GA(h,r)));return f.push(1-f.reduce(((t,i)=>t+i),0)),f};class YA{constructor(t,i,e,h,r){this.coordsRelative="relative",this.coordsClient="client",this.$i=!1,this.uP=new Array,this.L=new s,this.KR=[],this.ly=[],this.qR=void 0,this.tE=!0,this.iE=!0,this.sE=!0,this.yy=!1,this.eE=!0,this.hE=()=>{this.eE=!0,this.us.xs()},this.rE=[],this.onInViewChange=t=>this.L.on("inViewChange",t),this.offInViewChange=t=>this.L.off(t,"inViewChange"),this.nE=t=>{for(let i=0;i<this.uP.length;i+=1)if(this.uP[i].panel===t){this.uP.splice(i,1),this.tE=!0,this.us.xs();break}},this.oE=t=>{const i=this.KR.indexOf(t);i>=0&&this.KR.splice(i,1)},this.by=t=>{const i=this.ly.indexOf(t);i>=0&&this.ly.splice(i,1)},this.aE=(t,i,s,e,h)=>{if(this.lE(i,s,e,h)){const r={panel:t,columnIndex:i,rowIndex:s,columnSpan:e,rowSpan:h};return this.uP.push(r),this.uE(r),this.tE=!0,t}throw new Et("Out of dashboard range.")},this.cE=i.numberOfRows,this.dE=i.numberOfColumns,this.wA=t,this.fE=i,this.AE=h;const n=this.dE*this.cE;this.gE={x:new df(new Array(this.dE).fill(1)),y:new df(new Array(this.cE).fill(1))},this.qi=e.qi,this.yE=this.qi.dashboardSplitterStyle,this.gh=!1!==(null==i?void 0:i.animationsEnabled),this.mE=cf(e,n),this.pE=e.JF("dashboard splitters",500001),this.xM=()=>this.mE.QF(),this.ky=this.mE.KF(),this.es=e.es.hs(this,{vE:{}}),this.es.vE.bs(this.qi.effectsDashboardSplitters);const o=e.ni();this.uiScale=yt.d2({scaleXYConstructor:ee}).zi(0,100).Vi(0,100).tt(o),this.Mg=yt.d2({scaleXYConstructor:ee}).zi(0,this.uiScale.x.getCellSize()).Vi(0,this.uiScale.y.getCellSize()).tt(o),this.SE=e.bE.bind(e),this.xE=e.ME.bind(e),this._E=e.wE.bind(e),this.CE=e.kE.bind(e),this.fo=e.fo.bind(e),this.yo=e.yo.bind(e),this.engine=e.My,this.us=e._y,e.Ro((()=>this.hE())),e.xs();const a=e.Vo((t=>{this.yy=t,this.L.emit("inViewChange",this,t)}));this.Dy=e.Oo.bind(e,a),this.TE(),this.setAnimationsEnabled(this.gh);const l=("resize",{on:(u=this.L).on.bind(u,"resize"),off:u.off.bind(u)});var u;this.createChartXY=t=>{const i=HA(t,this.fE,this.gh);return this.aE(new nd(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createSpiderChart=t=>{const i=HA(t,this.fE,this.gh);return this.aE(new lf(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPolarChart=t=>{const i=HA(t,this.fE,this.gh);return this.aE(new bd(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPieChart=t=>{const i=HA(t,this.fE,this.gh),s=i&&i.type?i.type:_l;return this.aE(new s(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,l,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createGaugeChart=t=>{const i=HA(t,this.fE,this.gh);return this.aE(new mA(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,l,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createFunnelChart=t=>{const i=HA(t,this.fE,this.gh),s=i&&i.type?i.type:Bd;return this.aE(new s(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,l,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPyramidChart=t=>{const i=HA(t,this.fE,this.gh),s=t&&t.type?t.type:Xd;return this.aE(new s(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,l,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createUIPanel=t=>{const i=HA(t,this.fE,this.gh);return this.aE(new Va(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createLegendBoxPanel=t=>{const i=HA(t,this.fE,this.gh);return this.aE(new lu(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createZoomBandChart=t=>{const i=HA(t,this.fE,this.gh);return this.aE(new fd(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createMapChart=t=>{const i=HA(t,this.fE,this.gh);return this.aE(new mu(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createChart3D=t=>{const i=HA(t,this.fE,this.gh),s=new nu(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,l,i);return this.aE(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createDataGrid=t=>{const i=HA(t,this.fE,this.gh),s=new Rf(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,l);return this.aE(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createBarChart=t=>{const i=HA(t,this.fE,this.gh),s=new Xf(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,l,i);return this.aE(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createParallelCoordinateChart=t=>{const i=HA(t,this.fE,this.gh),s=new OA(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,l,i);return this.aE(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)}}FE(t,i){return t+i*this.dE}IE(t,i){return{d1:s=>new s.scale1DConstructor("x"===s.dimension?t.columnIndex:t.rowIndex,"x"===s.dimension?t.columnSpan:t.rowSpan,"x"===s.dimension?this.dE:this.cE,"x"===s.dimension?i.x:i.y),d2:s=>(new s.scaleXYConstructor).ut({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.dE,y:this.cE},i),d3:()=>new At({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.dE,y:this.cE},i)}}setWidth(t){return t instanceof Array||(t=[t,t]),this.SE(t[0]),this.xE(t[1]),this}setHeight(t){return t instanceof Array||(t=[t,t]),this._E(t[0]),this.CE(t[1]),this}getWidth(){return this.fo()}getHeight(){return this.yo()}setBackgroundFillStyle(t){return this.engine.setBackgroundFillStyle(t),this.pE.xs(),this}getBackgroundFillStyle(){return this.engine.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.engine.setBackgroundStrokeStyle(t),this.pE.xs(),this}getBackgroundStrokeStyle(){return this.engine.getBackgroundStrokeStyle()}getTheme(){return this.qi}setSplitterStyle(t){const i=this.yE;return this.yE="function"==typeof t?t(this.yE):t,this.PE(i),this}getSplitterStyle(){return this.yE}setSplitterEffect(t){return this.es.vE.bs(t),this.us.xs(),this}getSplitterEffect(){return this.es.vE.Ms()}setAnimationHighlight(t){return this.sE=t,this.rE.forEach((i=>this.us.ls.ks(i.line,t))),this}getAnimationHighlight(){return this.sE}PE(t){for(const t of this.rE)t.line.We(this.yE);this.TE()}setColumnWidth(t,i){const s=this.gE.x._();return t>=0&&t<s.length&&(s[t]=i,this.gE.x.M(s)),this.hE(),this}getColumnWidth(t){const i=this.gE.x._();if(t>=i.length)throw new Et("Column index is out of dashboard range.");return i[t]}setRowHeight(t,i){const s=this.gE.y._();return t>=0&&t<s.length&&(s[Math.abs(s.length-1-t)]=i,this.gE.y.M(s)),this.hE(),this}getRowHeight(t){const i=this.gE.y._();if(t>=i.length)throw new Et("Row index is out of dashboard range.");return i[Math.abs(i.length-1-t)]}getSizePixels(){return this.Mg.getInnerIntervalPixels()}onResize(t){return this.L.on("resize",t)}offResize(t){return this.L.off(t,"resize")}DE(t,i,s){if(s&&Math.abs(t.x)>0)this.BE(i,t.x);else{if(s||!(Math.abs(t.y)>0))return;this.LE(i,t.y)}for(const t of this.uP)t.panel.J();this.hE()}LE(t,i){const s=WA(this.uP,this.gE.y._(),t,i,this.Mg.ni(),!1);this.gE.y.M(s),this.hE()}BE(t,i){const s=WA(this.uP,this.gE.x._(),t,i,this.Mg.ni(),!0);this.gE.x.M(s),this.hE()}RE(){this.rE.forEach((t=>t.line.dispose())),this.rE.length=0;for(let t=1;t<=this.dE-1;t+=1)for(let i=0;i<=this.cE-1;i+=1)if(void 0!==this.uP.find((s=>As(i,s.rowIndex,s.rowIndex+s.rowSpan-1)&&(t===s.columnIndex||t===s.columnIndex+s.columnSpan)))){const s=ve(new be((()=>{this.EE(t)}),((i,s,e,h,r)=>{this.DE(h,t,!0),mi(r)}),(()=>{this.zE(t)}))),e=this.pE.Ye(this.Mg).We(this.yE).setMouseEnterEventHandler((()=>{this.EE(t)})).setMouseLeaveEventHandler((()=>{this.zE(t)})).setMouseDragEventHandler(((i,s,e,h,r)=>{this.DE(r,t,!0),mi(s)})).setTouchStartEventHandler(s.onTouchStart).setTouchMoveEventHandler(s.onTouchMove).setTouchEndEventHandler(s.onTouchEnd);this.us.ls.os(e,(t=>e.cs(t)),{animationEnabled:this.sE}),this.rE.push({row:i,column:t,line:e,alignment:"vertical"})}for(let t=1;t<=this.cE-1;t+=1)for(let i=0;i<=this.dE-1;i+=1)if(void 0!==this.uP.find((s=>As(i,s.columnIndex,s.columnIndex+s.columnSpan-1)&&(t===s.rowIndex||t===s.rowIndex+s.rowSpan)))){const s=ve(new be((()=>{this.VE(t)}),((i,s,e,h,r)=>{this.DE(h,t,!1),mi(r)}),(()=>{this.OE(t)}))),e=this.pE.Ye(this.Mg).We(this.yE).setMouseEnterEventHandler((()=>{this.VE(t)})).setMouseLeaveEventHandler((()=>{this.OE(t)})).setMouseDragEventHandler(((i,s,e,h,r)=>{this.DE(r,t,!1),mi(s)})).setTouchStartEventHandler(s.onTouchStart).setTouchMoveEventHandler(s.onTouchMove).setTouchEndEventHandler(s.onTouchEnd);this.us.ls.os(e,(t=>e.cs(t)),{animationEnabled:this.sE}),this.rE.push({row:t,column:i,line:e,alignment:"horizontal"})}this.es.vE.As(this.rE.map((t=>t.line)))}NE(){const t=this.Mg.ni(),i=this.gE.x._(),s=i.reduce(((t,i)=>t+i)),e=this.gE.y._(),h=e.reduce(((t,i)=>t+i));this.rE.forEach((r=>{if("vertical"===r.alignment){const o=n(t.x*i.slice(0,r.column).reduce(((t,i)=>t+i),0)/s,t.y*e.slice(0,r.row).reduce(((t,i)=>t+i),0)/h),a=n(o.x,t.y*e.slice(0,r.row+1).reduce(((t,i)=>t+i),0)/h);r.line.Xe(o).He(a)}else{const o=n(t.x*i.slice(0,r.column).reduce(((t,i)=>t+i),0)/s,t.y*e.slice(0,r.row).reduce(((t,i)=>t+i),0)/h),a=n(t.x*i.slice(0,r.column+1).reduce(((t,i)=>t+i),0)/s,o.y);r.line.Xe(o).He(a)}}))}EE(t){this.rE.forEach((i=>{"vertical"===i.alignment&&i.column===t&&(this.us.ls.Cs(i.line,1),this.pE.GE(i.line))})),this.qR=this.engine.setMouseStyle(Ke.ResizeColumn),this.us.xs()}VE(t){this.rE.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&(this.us.ls.Cs(i.line,1),this.pE.GE(i.line))})),this.qR=this.engine.setMouseStyle(Ke.ResizeRow),this.us.xs()}zE(t){this.rE.forEach((i=>{"vertical"===i.alignment&&i.column===t&&this.us.ls.Cs(i.line,0)})),this.engine.restoreMouseStyle(this.qR),this.us.xs()}OE(t){this.rE.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&this.us.ls.Cs(i.line,0)})),this.engine.restoreMouseStyle(this.qR),this.us.xs()}setAnimationsEnabled(t){return this.gh=t,this.getCells().filter((t=>t.panel instanceof Na)).forEach((i=>i.panel.setAnimationsEnabled(t))),this.setAnimationHighlight(this.gh),this}getAnimationsEnabled(){return this.gh}getCells(){return this.uP.slice()}dispose(){return this.$i||(this.Dy&&this.Dy(),this.uP.slice().forEach((t=>t.panel.dispose())),this.KR.slice().forEach((t=>t.dispose())),this.ly.slice().forEach((t=>t.dispose())),this.$i=!0,this.AE(),this.L.emit("dispose",this)),this}isDisposed(){return this.$i}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}getIsInView(){return this.yy}saveToFile(t,i,s){return Da(this.engine,t,i,s),this}UE(t){if(this.eE){const t=this.us.ft.ni(),i=t.x,s=t.y;this.uiScale.tt(i,s),this.Mg.tt(i,s);const e=this.uiScale.getInnerIntervalPixels();this.Mg.zi(0,e.x).Vi(0,e.y),this.L.emit("resize",this,e.x,e.y,i,s),this.iE=!0}this.tE&&(this.RE(),this.tE=!1,this.iE=!0),this.iE&&(this.NE(),this.iE=!1);for(const i of this.uP)i.panel.Ee(t);return this.KR.forEach((t=>t.Vs())),this.KR.forEach((t=>t.Ee())),this.ly.forEach((t=>t.Vs())),this.ly.forEach((t=>t.Ee())),this.eE=!1,this}Z(){for(const t of this.uP)t.panel.Z();return this.Mg.x.Z(),this.Mg.y.Z(),this.uiScale.x.Z(),this.uiScale.y.Z(),this}J(){for(const t of this.uP)t.panel.J();return this.Mg.x.J(),this.Mg.y.J(),this.uiScale.x.J(),this.uiScale.y.J(),this}translateCoordinate(t,i,s){return Ra(t,i,s,this.Mg,this.us)}addUIElement(t=xo,i=this.uiScale){i=La(i,this.Mg);const s=Ba(t,this.xM(),this.uiScale,i,this.oE,this.qi);return this.KR.push(s),s}addLegendBox(t=Lo,i=this.uiScale){i=La(i,this.Mg);const s=Ba(t,this.ky,this.uiScale,i,this.by,this.qi);return s.setDraggingMode(Gt.notDraggable),this.ly.push(s),s}getLegendBoxes(){return this.ly}lE(t,i,s,e){return i>=0&&t>=0&&i+e<=this.cE&&t+s<=this.dE}uE(t){const i=this.yE,s=i===dt?0:i.getThickness()/2,e={left:t.columnIndex>0?s:0,top:t.rowIndex<this.cE-1?s:0,right:t.columnIndex<this.dE-1?s:0,bottom:t.rowIndex>0?s:0};t.panel.Nr(e)}TE(){this.uiScale.x.ii([0,0]),this.uiScale.y.ii([0,0]),this.Mg.x.ii([0,0]),this.Mg.y.ii([0,0]);for(const t of this.uP)this.uE(t);this.us.xs()}}const HA=(t,i,s)=>{const e={...t,columnSpan:t.columnSpan||1,rowSpan:t.rowSpan||1,animationsEnabled:void 0!==t.animationsEnabled?t.animationsEnabled:s};var h,r;return e.rowIndex=(h=e.rowIndex,r=e.rowSpan,i.numberOfRows-(h+r)),e},XA=(t,i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAsa2NhQlgAACxranVtYgAAAB5qdW1kYzJwYQARABCAAACqADibcQNjMnBhAAAALEVqdW1iAAAAR2p1bWRjMm1hABEAEIAAAKoAOJtxA3Vybjp1dWlkOjlmZDBkZjkzLTVmMDMtNDczYi1hZThhLTFhNDM4NmMzNmJhYQAAAAGzanVtYgAAAClqdW1kYzJhcwARABCAAACqADibcQNjMnBhLmFzc2VydGlvbnMAAAAA12p1bWIAAAAmanVtZGNib3IAEQAQgAAAqgA4m3EDYzJwYS5hY3Rpb25zAAAAAKljYm9yoWdhY3Rpb25zgaNmYWN0aW9ua2MycGEuZWRpdGVkbXNvZnR3YXJlQWdlbnRtQWRvYmUgRmlyZWZseXFkaWdpdGFsU291cmNlVHlwZXhTaHR0cDovL2N2LmlwdGMub3JnL25ld3Njb2Rlcy9kaWdpdGFsc291cmNldHlwZS9jb21wb3NpdGVXaXRoVHJhaW5lZEFsZ29yaXRobWljTWVkaWEAAACranVtYgAAAChqdW1kY2JvcgARABCAAACqADibcQNjMnBhLmhhc2guZGF0YQAAAAB7Y2JvcqVqZXhjbHVzaW9uc4GiZXN0YXJ0GCFmbGVuZ3RoGSx3ZG5hbWVuanVtYmYgbWFuaWZlc3RjYWxnZnNoYTI1NmRoYXNoWCBvErgv+J0u7bVCYViyMUgw5yMb8idAv1erA3/DALx9NWNwYWRIAAAAAAAAAAAAAAIDanVtYgAAACRqdW1kYzJjbAARABCAAACqADibcQNjMnBhLmNsYWltAAAAAddjYm9yqGhkYzp0aXRsZW9HZW5lcmF0ZWQgaW1hZ2VpZGM6Zm9ybWF0aWltYWdlL3BuZ2ppbnN0YW5jZUlEeCh4bXAuaWlkOjI3NEMxQjdDN0E0MDExRUVBQkZFQUNFQjJDOTA0NzVCb2NsYWltX2dlbmVyYXRvcng2QWRvYmVfUGhvdG9zaG9wLzI1LjIuMCBhZG9iZV9jMnBhLzAuNy42IGMycGEtcnMvMC4yNS4ydGNsYWltX2dlbmVyYXRvcl9pbmZvgb9kbmFtZW9BZG9iZSBQaG90b3Nob3BndmVyc2lvbmYyNS4yLjD/aXNpZ25hdHVyZXgZc2VsZiNqdW1iZj1jMnBhLnNpZ25hdHVyZWphc3NlcnRpb25zgqJjdXJseCdzZWxmI2p1bWJmPWMycGEuYXNzZXJ0aW9ucy9jMnBhLmFjdGlvbnNkaGFzaFggSmnBvf+o3kEweL4k7cz4MTrB0WSVNFZxoA1rBrM31K+iY3VybHgpc2VsZiNqdW1iZj1jMnBhLmFzc2VydGlvbnMvYzJwYS5oYXNoLmRhdGFkaGFzaFggL2g6Dghd536quyA5vPlS/9NGA5WvLRkkKJmqn0VxCoFjYWxnZnNoYTI1NgAAKEBqdW1iAAAAKGp1bWRjMmNzABEAEIAAAKoAOJtxA2MycGEuc2lnbmF0dXJlAAAAKBBjYm9y0oREoQE4JKNmc2lnVHN0oWl0c3RUb2tlbnOBoWN2YWxZDjYwgg4yMAMCAQAwgg4pBgkqhkiG9w0BBwKggg4aMIIOFgIBAzEPMA0GCWCGSAFlAwQCAQUAMIGCBgsqhkiG9w0BCRABBKBzBHEwbwIBAQYJYIZIAYb9bAcBMDEwDQYJYIZIAWUDBAIBBQAEIHj4VpJDPzaO0x4hOPnj/w1GTHuwXU0IpBf4VVocIQzoAhB3SsxvHza2JR1fKj3Mjr0yGA8yMDIzMTEwMzExNTcyNloCCQCyOL6wAOGCbaCCC70wggUHMIIC76ADAgECAhAFHp6R1x6RCrvkPVzt0N3ZMA0GCSqGSIb3DQEBCwUAMGMxCzAJBgNVBAYTAlVTMRcwFQYDVQQKEw5EaWdpQ2VydCwgSW5jLjE7MDkGA1UEAxMyRGlnaUNlcnQgVHJ1c3RlZCBHNCBSU0E0MDk2IFNIQTI1NiBUaW1lU3RhbXBpbmcgQ0EwHhcNMjMwOTA4MDAwMDAwWhcNMzQxMjA3MjM1OTU5WjBYMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xMDAuBgNVBAMTJ0RpZ2lDZXJ0IEFkb2JlIEFBVEwgVGltZXN0YW1wIFJlc3BvbmRlcjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABE0srlH5A/+15/MFl1asNh8Q8TubOsEVfu0qlJrF0smjtwL1IeHZ/AB7J59u1Trpho1BDN85lfTY30rNBsfT+myjggGLMIIBhzAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH/BAIwADAWBgNVHSUBAf8EDDAKBggrBgEFBQcDCDAgBgNVHSAEGTAXMAgGBmeBDAEEAjALBglghkgBhv1sBwEwHwYDVR0jBBgwFoAUuhbZbU2FL3MpdpovdYxqII+eyG8wHQYDVR0OBBYEFLA1qlbDIamLztO4vIsWJVed7zThMFoGA1UdHwRTMFEwT6BNoEuGSWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcmwwgZAGCCsGAQUFBwEBBIGDMIGAMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wWAYIKwYBBQUHMAKGTGh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcnQwDQYJKoZIhvcNAQELBQADggIBAHgrjELHhBCEWJSCyRX7lsL0C9LJgbX1ryVYySNRxHkMR2LqC7PQZRJgDNR+kJop8P5v2Bzp/jMrzw4U4pY6rYv3I8HpFlJa4uBwUTIUgHWpi8Xxd1JEEX94POODi7HySekX60A055BozFb7GGVaxb0LreQTRXnkr6ggPNUPX9Gh+2ScOxlTdQQLgZbkdYvxo3Ap6cy9riZijRxOZqiOyWSxMUhgKxeKzwrFW6Xbe0awNhOUXZzIxc4ixpKzWSItpPJ30ZiBQn49U3ADYTnshbN9ZkTA1pHf/Nov2ZUvvddkZ8UYvwo9vBvLTDvnmABnRMBKaXYAs3ZCvw9CkDPOWTeUJMFRAtmUx52ohaA3nD8bCJ6UfpQ2pFfOdShwpb6GKv0g+BgcdIG2LHPJ0Ufmr+XmpgZgq/HIge0hjcCADpjDgq2z4B0L4xtAA1M8MrUx02hxb7104nFKqMuv5zJTQl3sgwqXUyP+9zHQP9y/Z5Fx/AQWrOXCW56dV7P4cFBJl8zHqinlhkOStZ1m22+9Hlq+eC0hJ2lkF1LuzRdJJb/51LXoPKRnopFDng6XpoD7eG6w4YpAx9+P00JuUoBsYSrdsuFiyWyQQGBAnjI69ggbSLcW+hJytuinaxawVlItJkS2eV5Z4XsxPg7f82uRkdtN0hTHeI93CN3OWeRebnK7MIIGrjCCBJagAwIBAgIQBzY3tyRUfNhHrP0oZipeWzANBgkqhkiG9w0BAQsFADBiMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29tMSEwHwYDVQQDExhEaWdpQ2VydCBUcnVzdGVkIFJvb3QgRzQwHhcNMjIwMzIzMDAwMDAwWhcNMzcwMzIyMjM1OTU5WjBjMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xOzA5BgNVBAMTMkRpZ2lDZXJ0IFRydXN0ZWQgRzQgUlNBNDA5NiBTSEEyNTYgVGltZVN0YW1waW5nIENBMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAxoY1BkmzwT1ySVFVxyUDxPKRN6mXUaHW0oPRnkyibaCwzIP5WvYRoUQVQl+kiPNo+n3znIkLf50fng8zH1ATCyZzlm34V6gCff1DtITaEfFzsbPuK4CEiiIY3+vaPcQXf6sZKz5C3GeO6lE98NZW1OcoLevTsbV15x8GZY2UKdPZ7Gnf2ZCHRgB720RBidx8ald68Dd5n12sy+iEZLRS8nZH92GDGd1ftFQLIWhuNyG7QKxfst5Kfc71ORJn7w6lY2zkpsUdzTYNXNXmG6jBZHRAp8ByxbpOH7G1WE15/tePc5OsLDnipUjW8LAxE6lXKZYnLvWHpo9OdhVVJnCYJn+gGkcgQ+NDY4B7dW4nJZCYOjgRs/b2nuY7W+yB3iIU2YIqx5K/oN7jPqJz+ucfWmyU8lKVEStYdEAoq3NDzt9KoRxrOMUp88qqlnNCaJ+2RrOdOqPVA+C/8KI8ykLcGEh/FDTP0kyr75s9/g64ZCr6dSgkQe1CvwWcZklSUPRR8zZJTYsg0ixXNXkrqPNFYLwjjVj33GHek/45wPmyMKVM1+mYSlg+0wOI/rOP015LdhJRk8mMDDtbiiKowSYI+RQQEgN9XyO7ZONj4KbhPvbCdLI/Hgl27KtdRnXiYKNYCQEoAA6EVO7O6V3IXjASvUaetdN2udIOa5kM0jO0zbECAwEAAaOCAV0wggFZMBIGA1UdEwEB/wQIMAYBAf8CAQAwHQYDVR0OBBYEFLoW2W1NhS9zKXaaL3WMaiCPnshvMB8GA1UdIwQYMBaAFOzX44LScV1kTN8uZz/nupiuHA9PMA4GA1UdDwEB/wQEAwIBhjATBgNVHSUEDDAKBggrBgEFBQcDCDB3BggrBgEFBQcBAQRrMGkwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBBBggrBgEFBQcwAoY1aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcnQwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcmwwIAYDVR0gBBkwFzAIBgZngQwBBAIwCwYJYIZIAYb9bAcBMA0GCSqGSIb3DQEBCwUAA4ICAQB9WY7Ak7ZvmKlEIgF+ZtbYIULhsBguEE0TzzBTzr8Y+8dQXeJLKftwig2qKWn8acHPHQfpPmDI2AvlXFvXbYf6hCAlNDFnzbYSlm/EUExiHQwIgqgWvalWzxVzjQEiJc6VaT9Hd/tydBTX/6tPiix6q4XNQ1/tYLaqT5Fmniye4Iqs5f2MvGQmh2ySvZ180HAKfO+ovHVPulr3qRCyXen/KFSJ8NWKcXZl2szwcqMj+sAngkSumScbqyQeJsG33irr9p6xeZmBo1aGqwpFyd/EjaDnmPv7pp1yr8THwcFqcdnGE4AJxLafzYeHJLtPo0m5d2aR8XKc6UsCUqc3fpNTrDsdCEkPlM05et3/JWOZJyw9P2un8WbDQc1PtkCbISFA0LcTJM3cHXg65J6t5TRxktcma+Q4c6umAU+9Pzt4rUyt+8SVe+0KXzM5h0F4ejjpnOHdI/0dKNPH+ejxmF/7K9h+8kaddSweJywm228Vex4Ziza4k9Tm8heZWcpw8De/mADfIBZPJ/tgZxahZrrdVcA6KYawmKAr7ZVBtzrVFZgxtGIJDwq9gdkT/r+k0fNX2bwE+oLeMt8EifAAzV3C+dAjfwAL5HYCJtnwZXZCpimHCUcr5n8apIUP/JiW9lVUKx+A+sDyDivl1vupL0QVSucTDh3bNzgaoSv27dZ8/DGCAbgwggG0AgEBMHcwYzELMAkGA1UEBhMCVVMxFzAVBgNVBAoTDkRpZ2lDZXJ0LCBJbmMuMTswOQYDVQQDEzJEaWdpQ2VydCBUcnVzdGVkIEc0IFJTQTQwOTYgU0hBMjU2IFRpbWVTdGFtcGluZyBDQQIQBR6ekdcekQq75D1c7dDd2TANBglghkgBZQMEAgEFAKCB0TAaBgkqhkiG9w0BCQMxDQYLKoZIhvcNAQkQAQQwHAYJKoZIhvcNAQkFMQ8XDTIzMTEwMzExNTcyNlowKwYLKoZIhvcNAQkQAgwxHDAaMBgwFgQU2Rq5M/4XremCHqYT9aQ6cU4+fn0wLwYJKoZIhvcNAQkEMSIEIGmY+GsCefCDmP0PFcYjdxBUfi0EgKYuEZb9pUMyLNuVMDcGCyqGSIb3DQEJEAIvMSgwJjAkMCIEIILa8ZSVezaEAkWP1ScAaf5ixxRW+p4Lhqv4J+hTICfZMAoGCCqGSM49BAMCBEcwRQIgcxxuf7QHV9Fkpj1VhPrFqhNFh8dZzl8qUU/2N3Sr4eoCIQDKu0KGYL++CSsDAXjJciMDbr5ImTy3jw0yQU5GYYeLimd4NWNoYWluglkGMzCCBi8wggQXoAMCAQICEBtbCzvasORd8vMNnlTR2tIwDQYJKoZIhvcNAQELBQAwdTELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEiMCAGA1UEAxMZQWRvYmUgUHJvZHVjdCBTZXJ2aWNlcyBHMzAeFw0yMzAyMDEwMDAwMDBaFw0yNDAyMDEyMzU5NTlaMIGhMREwDwYDVQQDDAhjYWktcHJvZDEcMBoGA1UECwwTQ29udGVudCBDcmVkZW50aWFsczETMBEGA1UECgwKQWRvYmUgSW5jLjERMA8GA1UEBwwIU2FuIEpvc2UxEzARBgNVBAgMCkNhbGlmb3JuaWExCzAJBgNVBAYTAlVTMSQwIgYJKoZIhvcNAQkBFhVncnAtY2FpLW9wc0BhZG9iZS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDv0wCnfYY9lkHDsykrTG7FYlnYHBcyualuD5u9ULjzv+FsTWOLg8Nhrz9RTxI9EeBbu3Wm7f4vqPsQYfxkEp0wIa6DVmEOZhbAeRfbhybWQ/D4Wvvck4mEZR+QZmTpIn7HX61gbtMFHlJUxkYBctIoAt9TBAFbz9d5Ig2WG0bsH39b6/8USXnIIk4FB6dtBRT1xeEwSDtwOd1YBpXXNBJmRWHXNJZZ85of2tBTesg/kMvTrOJJxYDZ97U416wcvbVomlees+NXUY3/ZB4xH+NsZils7m1bL2v2hSnHiLoqZeUKklbHUmT4ZpjrZCdtuIsWm5j2PPXKr7HKUuCbZSXBAgMBAAWjggGMMIIBiDAMBgNVHRMBAf8EAjAAMA4GA1UdDwEB/wQEAwIHgDAeBgNVHSUEFzAVBgkqhkiG9y8BAQwGCCsGAQUFBwMEMIGOBgNVHSAEgYYwgYMwgYAGCSqGSIb3LwECAzBzMHEGCCsGAQUFBwICMGUMY1lvdSBhcmUgbm90IHBlcm1pdHRlZCB0byB1c2UgdGhpcyBMaWNlbnNlIENlcnRpZmljYXRlIGV4Y2VwdCBhcyBwZXJtaXR0ZWQgYnkgdGhlIGxpY2Vuc2UgYWdyZWVtZW50LjBdBgNVHR8EVjBUMFKgUKBOhkxodHRwOi8vcGtpLWNybC5zeW1hdXRoLmNvbS9jYV83YTVjM2EwYzczMTE3NDA2YWRkMTkzMTJiYzFiYzIzZi9MYXRlc3RDUkwuY3JsMDcGCCsGAQUFBwEBBCswKTAnBggrBgEFBQcwAYYbaHR0cDovL3BraS1vY3NwLnN5bWF1dGguY29tMB8GA1UdIwQYMBaAFFcpejJNzP7kNU7AHyRzznNTq99qMA0GCSqGSIb3DQEBCwUAA4ICAQBXjlGa3yAK/Gijn6n/JNU9FZm72MP6vc5czrWe9y0T+EawuRvhpD5Edi1TnXkrpe8sMkgSjTGdbY+yGhq8zlCWQeXN1/aWo3L9Xr1uNxY/oVpLn0uWWfnfJ7yR9gKl/yoMfhjydT4t1fXHi/MhfhrWSVRHqX2U31UFGz/e298P2kv+vqhzpIUo1bj+jibtoPLMMQcCOTtKiJOTh4o3VSZpwQDERCzo91NkF+LnZjwYl6fE5USIkg/oCoomXxSPpowybDrcRJ9ilbtJcER48/LGgwzv/c7OYdron4PnEXm1FkOaVj+QRf7OwiNTizonhIzLR5Vfp0QHOWv/bPzvCjPQd+Xr0Q4032WlSxQwostNTAPtoVAU4OCwVH3Ech38emJ00/6fkDCdr7MN8/4n2LSNrMUvaBEZdmLqDCBnO02dbFrmpg3pTc0FqRQ4GL/88pjRNSMy5tU9SoQnSCGYqIsjfL8AzgPEGiXXRgABYc1uXecf4/eayb3K2MPs7hnWTbUKpHHJIwxpdN3vTGdZNWpz9Oxfuo3eELQlkTvACHgqkaXi/FAanHe5PChn6fr1/4cNF8goD0buPApgS3zzwqjRhxrH8ISwPfJn8JqzurMaLDMnnc18tHzUiMtX73jf6oXh7voCxX/T4D3nFPlxU3om2cpcLQ1Wd4026x18rlSGR1kGpTCCBqEwggSJoAMCAQICEAyotlR7iebSBol1zYubieIwDQYJKoZIhvcNAQELBQAwbDELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEZMBcGA1UEAxMQQWRvYmUgUm9vdCBDQSBHMjAeFw0xNjExMjkwMDAwMDBaFw00MTExMjgyMzU5NTlaMHUxCzAJBgNVBAYTAlVTMSMwIQYDVQQKExpBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZDEdMBsGA1UECxMUQWRvYmUgVHJ1c3QgU2VydmljZXMxIjAgBgNVBAMTGUFkb2JlIFByb2R1Y3QgU2VydmljZXMgRzMwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC3Hy69vQmzXEhs/gyDrmwB6lF4JaSAPomnsbKIZNr2iXaB+fkd85X8eJiNmI7P5O4cVT4Nc1p3zrESqBV4ZUyW8gcZ78QdwoHG8QNd2VNcHnMgSR+XT9Iafsnq9Nfww3Jt9KL3l5ANQ5n1+MJqr48EWNLll942bOL/JH4ywDSMoqhZqtJEIUUUGlQVBZ8CAvJc7LE6ddA5C52PE2Ppa7RfQgHXf4gfXVZwpxYRZcziPiOHqEvLb0J3cShUbejFxV6cwX8QyAPa1ePHg1RtM0HX+D34xHo3DkyGnmT+Ddq00TEDGG26AL5PdINKFIQl+zaq6KJFQe1fdGE5wrWzU4mBPmzaz3EbLn+7FWlwAhorYqIMldbfHE3ydc+aTU1JW7+bG19qmvhO9IluGtTtQDeqFBj2fg6faxsfVfVPD7stN6TwoIDlkOCE4RE+Iin8m3z3eqi/VsTmsmRqBxWDRaqOHz02EJoEDxXJG3ei+UbIIp01XZQvdufm90WxOTuqqan2ZqTPX9K5VdjEh/ovr7xFc5q1dZo+Sa5y4sTVM854/tLU3klOgUKzzSXYPYS3GhBcYJHjwr9xNRHnNX99D6F0g7OijScWfvtjxh13aTv/H0ETvymah4yfDpVdh9cK5YSCPqnuOlsujFAyhYwJXOWDvZZU2EkWVLDhoPx9zp7N4QIDAQABo4IBNDCCATAwEgYDVR0TAQH/BAgwBgEB/wIBADA1BgNVHR8ELjAsMCqgKKAmhiRodHRwOi8vY3JsLmFkb2JlLmNvbS9hZG9iZXJvb3RnMi5jcmwwDgYDVR0PAQH/BAQDAgEGMBQGA1UdJQQNMAsGCSqGSIb3LwEBBzBXBgNVHSAEUDBOMEwGCSqGSIb3LwECAzA/MD0GCCsGAQUFBwIBFjFodHRwczovL3d3dy5hZG9iZS5jb20vbWlzYy9wa2kvcHJvZF9zdmNlX2Nwcy5odG1sMCQGA1UdEQQdMBukGTAXMRUwEwYDVQQDEwxTWU1DLTQwOTYtMzMwHQYDVR0OBBYEFFcpejJNzP7kNU7AHyRzznNTq99qMB8GA1UdIwQYMBaAFKYc4W1UJEyoj0hyv26pjNXk7DHUMA0GCSqGSIb3DQEBCwUAA4ICAQBxzuUHjKbcLdzI4DtlXgCSgZXrlSAkr59pOF3JfPG42qVNAGU7JcEYXJ6+WbfcGwY7WYMl+jO7IvJPb7shXFYW9bnJgxX7lLU14KExchmcLNY1ee6IhBJ2Y8PzZMRUKSd5CkURPg0PBLGjz/KR/DofHx+G4rPTCOGORYxeYrd01lci5hVxvKccvIk7MD69ZTewfZPSM+0WnsU3f0Zmd7hgbRpUyWceG0eHFpdUKK/ZFWhHjDVC28odCnN885tHncKXviItK0ZUUo/AIthFKlhEXsnq9VL9fFbgvO83ZvpUQo5y8mY3cuGnEVGXdhjNb53CfC1u4dbpYmWaN99subUzEsUaUb3loLPfVfzDOpg2y9v37kBdy/wuXr20teY7U62xj/fAgs1QSnhUtlMTfCqbefyEycKVmKIrJkJLsvgTSYKVvH4FFIwfd5WjqOC97jX98rcVAzhAI0iSkazsWOMvL6m0L4nLJapx+85GsVX8Y6AHmEP4bmCElwil6KAP+UewJFiw5rmwV2pESHAhYuZJa03B8tl0nd2QJzvJGmbeBqXqpF9ORinFM3HErK8puRokOjFH2+1asLeI2tB31W/ELdNe27Ogduq6Z6qBwCp59YX27qydDhD0WRfN64kCs25K88iGAGNW2CAfTDS+b+WYJBiIL9jXYZ4LF+BiUvfdu2NwYWRZC70AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPZZAQBKX2Q2ihN2fLDLReHISpfOF0xIqNpOZXbBwZ0XanWG98erbIBdawl7r9nVma/uZjYH457wp00TVpKYUTJHMnzJMKskvM2Df4K6t5pUKGtJqEvMXLUy3g9kJq53aYDwikcUE+8wv+CYtu/+vii4XYSXQIxT4NN+JKoTDXmrNH1G46Nmpfq6SKk0g9GQ2brbkW3fzGR0xDxY3BXRy71guSBxN9TAbQGqUjMnkIyBcwV9wUQ2oCW9oIMNKASjW0CRkcFEzzmrQ+y+zHYpNvUaG7QehHcyhvOec3plzlyP6DZeQWp3PHA5bmonI8t5j6Qj15X1KnQiXuJ0rW+xoMA89aIVmpx4VgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAOSaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA5LjEtYzAwMSA3OS4xNDYyODk5Nzc3LCAyMDIzLzA2LzI1LTIzOjU3OjE0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjYyYTdmYWExLWJmZTMtMjE0Ny04MjAwLWMxM2NlMGU4ZTc1NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzRDMUI3RDdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzRDMUI3QzdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjUuMiAoMjAyMzEwMjQubS4yMzc0IDRhYjk0MzkpICAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphYjQzZjNjYy1hNTY4LTRkNGQtOTdiZC1iYjk0YjBlZjhjYmQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjJhN2ZhYTEtYmZlMy0yMTQ3LTgyMDAtYzEzY2UwZThlNzU0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HNvo5wAADZFJREFUeNrsXFtPVUkW3gc4yP0qDigKON517FFbHRGn1TamjaOJvvhsjIkvPplgfEKe1AefNDE+GP+AmWTszPTYcbpn2piJzc1GWwlOekRBEBFQ7jeZ9ZVrnVkUtfc5CGp3h5VU9qUuu3bVV9+67DonND4+7omEQiHPJaWlpYlxcXGLKX8epTCdB5aXNnHU6c2bN5POcaREp+O9dHxSX1/f5s3KL1ImYCkasMrKyvIISJspD+AyZSTpOrodDSaIBpQCkwtgSM8oVd2/f39M2quoqAijmcrKyjG/l7L77vde+v6sfCRgbdu2LY3AtJNSgg0qDa5oTOViKQtM9nXTgQMHaqmpPEoLKXUQqJpcYIqPj/cSEhLMUZgUbYyNjZkjRPpu50n+VEUvKtditMEb7Xom5OrVqzvpkOXIukFps5XXTunO4cOHR7heKp1/ye1gEX9BCcdv6H4330cbCyh9iXrRgJUQ1FmarFWUIqDS4ApiCT9AobxMpj24uI/209LSvMLCwiLKz6fyQModAlW73TeAac6cOV5SUpIBlasv9qKRvgBYIyMj3tDQkDmPdaLRPzwrHA6bhGsNWr9xsMfEZnC7XDSg+tzv4lRCCRPfjJtHjhzpu3LlCkDVx4BKZICsx9gy4PT4rmFQQbIpdfM5ynX7gWrS/Phl7NixI0SDWCCD52Is14vqAXIByoluAkl+fr43f/58Lyvr7cIaHh4OJSYmfkug6rXZApOamprqUb6vned3X4CBujj29/cbkEl/7EUj74o+og4S2gh6xkypk6mUPXnyZN25c+fCDKzm8vLyOuQzqCAtJ06cuH/+/PkwAytMLCR57VjQFy5cmKeAiXJZGOeLFy/iPBVt4Nqeb60dogKLBm9O/FvxXIwVxBAaUBpgixYt8np7e7329vYJZUtKSkwSefHihVdTU9N2586dXrtfmNj09HQz0dMRvAsYD0dhLryrvG8s7/w+ZCrPcJSdx8duAb+6l0WgWqeu/8uMZMoDWCTr+BpMVoZ8jLUq18XXgdohEFg0cXF6kF2s5Uf9NqBwxL0FCxaYSXz58qWZSNzr6+vzioqKIm01NTV5ZLgbT9HuExgGAzBdUOmJEeb6EKD5AJKt1KJ9TwAFNrpz6tSpljNnzgiQuuh8DbNSNx9HlF0mx26/cbTHLy6AsSKGcVCyjWepJwnS2trqbdiwwZyDJaDyUBbslZmZGTG6Hz9+7D18+NDdUSqTkpIyY6B6V5b4mYsBAIGm27rXR/f+DFXGKm5Ega6P7a5lqvw6sbMIcFkKlCUAI6esQI0QBCwBjxirNqCkDACSkZFhQKLVCSassbHR27Jli6kvsnDhQnN8/vy5t3Hjxsj95ubmSQ6CVoEA5a8IBO+LsSKgoskPKxaC1DKo1mmDXF1/AwAyCO+rNoX1FrANVqLA6V6sfuGGgwcPphBovrCBIuwCgRp7+vSpAUd2dra5bmtrM6pvdHTUu3fvnrGdNHhEbt265XV1dXn79+9/y8V0XltbGwkDkKpsqqqqqhG2AmgBrFn5+Qo0Uyw21gRm0kwCLwqAAgC2b99u2AQCVYWyACtUGkRUoC2bNm0yYBIBe/l5ncKaWmg1hrj/47TCRu32ebUam4LyAweEymK1QG+PUdk3PmXCrGZicrej9e99CD0znvs4NsPtRh2fmMMNLmBBYHgDmTC4ly1bNslWAbhu375tyh06dGgCw2kB+yDEAIEh39HR4RsjE+/NkgJKf0DwlNJ3jkndi2Yo/QXOZ5RxWElpOaUqSk99QLWPErzUr2OcD+j7T+GPUKqZocldyu2mWWbMv1mt4T3q2OObSVnNz46MD49xMfelE85ArOGGiA2FSR0cHDRggVe3fv16Lzc317cXCBeUlZUZu8sVBLUF7YrnaDMWygsjWpLJx1eOvCS8LKX+GFeYdPS1T356wLOC7NcOK/g4HSbaSmku2zZtlo0D6l8U5R2mIxmO91/F79iP8aY+lmhAR2Us09PXr439hAles2ZNoK2Tl5dnwgorV66clHfz5k1v165dk8CFuJYfWwm4/Twgn4FMZqO0U00OPg/lsgck0k3Ae6JACq8HamsAJgPl9fOAzef8VLpey1HtVGXUQoZ45b7QawzgojqpauJNZIYnpEXUFpWZw8ZxMqsdEdgUixlUqPMt1RlygE8mv4jO5/M7tFHZXs4HI+uJG4YFQvldnF+sAPRGjd8SSjl8fzGVG6I6Dxk76GcKl8uOlbESh4eHDVOBpWCcQ/1F88qQv2fPnknlnjx5YsIJOBYXF/9/NqhtANcV8ZbYlc8zswJYJJ8H5Eem7A3WxEYmjdVcigycyltBeV/RsVANbDKDrJnL5jom+Dsa+A5e0WDOn7g/Kx3PR/06qpPDjBS28gG6e6pfDT6gimeV5LF6iqh4focxHo84Ne8hzv8ng2sJA6tfjUedROkZbPkqRhbie8JauTEBi7y6ePncAQaaO3fulKLaWgDQgYEBoxrh+WlgiW3l9znFNtp5IBN5kv0YS6vJYgYVVlU120mfUPot58sqbeaBxJh8zqs7TIN+i573R2aMfykGQD2w21dcfx2DMI3yXjOosLqH6Fr6U8VqDHGhzVw2ns8T2BaTWNMefrc09a7PA1R1iNuuYibZwfXmUB8Qq/qrZa9tZjs1i65fcRswHf5O1zuYgZ7yeG1jdq3SbM9gauFF8yimOBYABaN66dKlUwKVS0TVQT2+evVqgjcIYAWxXxQ12O/jcWUq0MlqvwtQsIeo8zOUWoQHOcCTNMbqQsqPcTARE5PCk/+a64woB6HPYf/JMzq57KgqW8AAaKa8Jn4fbfOlKe92wGeoMq13GFQqdwD95aDmZ5Q+Z9AJwwwoYL5Wn3vqHH2JCOU9pkMjg7jWMgH8GYtspVx8cIwW6QYDrV271rccgATGAkhgm8GTfPDggbd161YTWIUqdLGVnPt4lQKsQQebJTCVj7CNlO4YmAwFlCUaBAo0XVR/nK6T+RqTNh5g7GuwLrTyMxlMfY760r/eKI4J+hJSffA1rlm9o989DK5SLtOmnpOm+pCr6zNoojpJVK6HnxFbuKGiomI5u5hRQVVdXW0+0UjowGa97u6Jn5ewewExMIAN3mA0lepjX8nLgsYXMy2P8SAmWJM6zGoJhnkrr7BEBRwbJLYHJJ/zQ5gwZhx7IkMMkEFWfZF8BcxOFU9zAes33L9+yzERMKLP66nMM8V4HjNFpgPI0r9kft4AmwLjzE4wD0Z58S0OMCvk/RMDgB1zHGtZtIoIgopKe/TokRNYnZ2dzroAIsAFo93Vrq0OAxgLdPZ7TZBsLOtBAl2vZbvqE1VWT4JWM/YkDfJk4P4+GtxqR5l07otrYjMdk6Ydj24ebxjwO23CZ6A+YGegiJOn+vY3xcC9jncY5TwA7E92+zGEW/r5+CnbUjdijbXYbJXs8E6ck11aWmp2G+B7oC1Qc2AsP+AAVHqT3RR3Vd5nQ9dO93hw6ik95hX9H7jonF/PIQBjj7ARC9f5rhUTQrlWrt/L9e/y/XbOq1ce0ihfy0A85useZop6K2gJ8P8A0FACo/7De7tV5Qd4sgIa8QDp2IBoDTNOvU7Mlo1sQ44rwNSzwS3t19l14WWq/tb4qLW76rn3Yp2gSd8KCVjwWMqC1JP6nmei8Ddu3DBRdgmI4jshDHbkByVpQ5+rY9P3339fk5OT46m9RVMNLGLQf2cxdCGff62M3I8m1EcY73nqVg4nhBYe/FK+EwJH+E4cpAozgxoQlhEQwGNctWqVUW2rV6+OGOx++96jbcm193bJBrx3lBQV3NRu8o+xgCrWvervsoddWD8pKamQ40Py9QEM00htNrzrnvxY3yeW/kUTIRlbO7kYa4OlxyMsZG87loQ8Yhdv9+7dJkIPYGk28mOrFStWGOMeux+wdx0foq9fvx7Z3QDGgmeK9D63y8j74D2QpI+unZHTAZdsgJzKxE33vfQzowEuluC3q57eyx/EWBn2DQQ3MdDa9bd/xrV8+fLIpx8beH4/HigoKHgbKi4u9s6ePeuVl5cbYOkOIxwB0M30Bj+0DRDhy4LE7KSfszJ9SbAMd0+5vxEjG6EB+SWMRq3eepycnGwMdq0mfX7aNWHbsrAhovvXrl2bpCKRB2DDSZjuKpd2AVa0qX9EMSszK3GOmEWCjopLgBMJE4GEyZajVh8OA9zJXBpUOL98+bJ37Ngxr6WlRbPbuIABrILPS+8KAtRD/3t6ekzsTBbLLKg+HLC0GrxLkzCmAaWTDSptm0QDGf92cMKvdy5duuQdPXpU6+sB7TAAWFCzOI8VTCiLOoinIeaGNqbyO8JZmXlg3a2srPyJANQqQHIBTIPLBlYQc8GTxM5SAdHevXvNr3NgSylGe2Z7owAG2AZHcSbshHJgOJQDoCSeNgumj2hjMbAMqHBBE/IAv0imiU6AjSUGvN9Pv1z2lAtc2AiILTg4r6mpMfGP48ePew0NDdJGU21t7SuXaysAt3e26l85z7LSx5cJ4YbTp0/PJVBN2G6wb9++PJrAzdif5fpBhTaK/f70I1qygPeMrqvq6upi0nmuPyWZlY8XJPWNY7mEVJX5GyNK8yiFg34J7fM3RYEgIyCN09H8jVF1dfXs3xj9CoD1PwEGAKorJqR4atjIAAAAAElFTkSuQmCC",s)=>{let e,h=0,r=0;const n=[],o=t=>{const i=new Yt.Image;i.src=t,i.onload=()=>{n.forEach((t=>{var s;const e=new it({source:i,fitMode:q.Stretch});null===(s=t.Xd)||void 0===s||s.Le(e),h=i.width,r=i.height,u(t)}))}};o(i);const a=t.Jn((t=>o(t)));let l;if(new Yt.Image instanceof Yt.HTMLImageElement){const t=new Yt.Image;t.src=i,l=new it({source:t,fitMode:q.Stretch})}else if(Yt.lcjs_setup){const t=new Yt.Image;t.src=i;const s=Yt.lcjs_setup(t.naturalWidth,t.naturalHeight);s.getContext("2d").drawImage(t,0,0),l=new it({source:s,fitMode:q.Stretch})}else l=new W({color:b("#f00")});const u=t=>{if(t.Xd){const i=t.ft.gi({x:t.ft.x.getInnerEnd(),y:t.ft.y.getInnerStart()},{x:-(3+h),y:3}),s=t.ft.gi({x:t.ft.x.getInnerEnd(),y:t.ft.y.getInnerStart()},{x:-3,y:3+r}),e={x:s.x-i.x,y:s.y-i.y};t.Xd.ze(i).tt(e)}e&&e.xs()};return e=t.JF("logo",Number.MAX_SAFE_INTEGER),i=>{const h={ft:i};return(i=>{const h=s&&"cGx1Z2lu"in s&&"cHl0aG9u"===s.cGx1Z2lu?jA:$A;i.Xd&&i.Xd.dispose(),e&&(i.Xd=e.Re(i.ft).Le(l).setMouseInteractions(!0).Be(dt).setMouseEnterEventHandler((()=>{t.qr(Ke.Point)})).setMouseLeaveEventHandler((()=>{t.qr(Ke.None)})).setMouseClickEventHandler(h).setTouchEndEventHandler(h),u(i))})(h),n.push(h),{Vs:()=>u(h),W:()=>(i=>{i.Xd&&(i.Xd.dispose(),i.Xd=void 0);const s=n.indexOf(i);s>=0&&n.splice(s,1),n.length<=0&&t.Kn(a)})(h)}}},$A=()=>Yt.open("https://lightningchart.com/lightningchart-js/"),jA=()=>Yt.open("https://lightningchart.com/python-charts/");class ZA{constructor(){this.WE=this.GI.bind(this),Yt.addEventListener("scroll",this.WE,{passive:!0})}W(){this.WE&&Yt.removeEventListener("scroll",this.WE),this.WE=void 0}}class QA{constructor(t,i){this.Ta=t,this.j=i,this.YE=!0,this.HE=null,this.XE=null}}class JA{constructor(t){this.$E=!1,this.jE=1,this.ZE=t,this.QE={Ta:n(0,0),j:n(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),YE:!0,HE:null,XE:null},this.JE=n(64,64),this.KE=new Uint8ClampedArray(this.JE.x*this.JE.y*this.jE)}qE(t,i){if(!t.YE)return null;if(t.HE&&t.XE){const s=this.qE(t.HE,i);return null!==s?s:this.qE(t.XE,i)}const s=o(t.j.x,t.j.y);if(t.Ta.x+t.j.x>=Number.MAX_SAFE_INTEGER&&(s.x=this.JE.x-t.Ta.x-1),t.Ta.y+t.j.y>=Number.MAX_SAFE_INTEGER&&(s.y=this.JE.y-t.Ta.y-1),t.j.x===i.x&&t.j.y===i.y)return t.YE=!1,t;if(s.x<i.x||s.y<i.y)return null;let e,h;const r=s.x-i.x,a=s.y-i.y;let l=r<a;return 0===r&&0===a&&(l=!(t.j.x>t.j.y)),l?(e=new QA(Is(t.Ta,{x:0,y:1}),n(t.j.x,i.y)),h=new QA(Is(t.Ta,{x:0,y:i.y+1}),n(t.j.x,t.j.y-1-i.y))):(e=new QA(Is(t.Ta,{x:1,y:0}),n(i.x,t.j.y)),h=new QA(Is(t.Ta,{x:i.x+1,y:0}),n(t.j.x-1-i.x,t.j.y))),t.HE=e,t.XE=h,this.qE(t.HE,i)}tz(t,i){const s={iz:!1,Ta:null};let e=this.qE(this.QE,i);if(null===e)for(;null===e&&this.JE.x<this.ZE&&this.JE.y<this.ZE;){if(!this.sz(n(2*this.JE.x,2*this.JE.y)))return this.$E=!0,null;s.iz=!0,e=this.qE(this.QE,i)}if(null===e)return this.$E=!0,null;for(let s=0;s<i.y;s+=1)for(let h=0;h<i.x;h+=1){const r=e.Ta.y+s,n=e.Ta.x+h;this.KE[r*this.jE*this.JE.x+n*this.jE+0]=t[s*this.jE*i.x+h*this.jE+0]}return s.Ta=e.Ta,s}sz(t){if(t.x>this.ZE||t.y>this.ZE)return!1;const i=new Uint8ClampedArray(t.x*t.y*this.jE);for(let s=0;s<this.JE.y;s+=1)for(let e=0;e<this.JE.x;e+=1)i[s*t.x*this.jE+e*this.jE+0]=this.KE[s*this.JE.x*this.jE+e*this.jE+0];return this.JE=t,this.KE=i,!0}}class KA{constructor(t){this.ez=new Map,this.ZE=t,this.ez.set(this.ez.size,new JA(this.ZE))}hz(t){return this.ez.get(t)}tz(t,i){let s=-1;const e=Array.from(this.ez.values());for(let t=0;t<e.length;t+=1){const i=e[t];if(!i)break;if(!i.$E){s=t;break}}-1===s&&(s=this.ez.size,this.ez.set(this.ez.size,new JA(this.ZE)));const h=this.ez.get(s);if(!h)return null;let r=h.tz(t,i);if(!r&&h.$E){const e=this.ez.size,h=new JA(this.ZE);this.ez.set(e,h),s=e,r=h.tz(t,i)}return r?{rz:s,...r}:null}}var qA;!function(t){t[t.Fail=0]="Fail",t[t.Success=1]="Success",t[t.Resize=2]="Resize"}(qA||(qA={}));const tg=Bi("font-texture");class ig{constructor(t){this.nz=new Map,this.oz=new Map,this.Qo=tg(),this.az=t,this.lz=new KA(this.az.uz||4096)}cz(){return this.oz.forEach((t=>{this.az.dz(t)})),this.oz.clear(),this}fz(t,i){const s=this.nz.get(i);if(s)return s.get(t)}Az(t,i,s){let e=this.nz.get(i);if(e||(e=new Map,this.nz.set(i,e)),e.has(t.glyph))return qA.Success;const h=this.lz.tz(s,t.size);if(!h||!h.Ta)return qA.Fail;h.iz&&this.gz();const r=this.lz.hz(h.rz);if(!r)return qA.Fail;let n=this.oz.get(h.rz);if(!n){const t=this.az.gl.createTexture();if(!t)throw new zt("Failed to create texture for font!");n=t,this.oz.set(h.rz,t)}const o=h.Ta,a=r.JE.x,l=r.JE.y,u=-t.offsetX,c=t.baseline-t.size.y,d=-t.offsetX+t.size.x,f=t.baseline,A=o.x/a,g=(o.y+t.size.y)/l,y=(o.x+t.size.x)/a,m=o.y/l,p=[A,g,y,g,A,m,A,m,y,g,y,m],v=[u,c,d,c,u,f,u,f,d,c,d,f],S={origin:o,size:t.size,advanceX:t.advance,baseline:t.baseline,vertices:v,texCoords:p,packerId:h.rz,texture:n};e.set(t.glyph,S);const b=this.az.gl;return b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),b.bindTexture(b.TEXTURE_2D,n),b.texImage2D(b.TEXTURE_2D,0,b.LUMINANCE,r.JE.x,r.JE.y,0,b.LUMINANCE,b.UNSIGNED_BYTE,this.az.yz?r.KE:new Uint8Array(r.KE)),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.bindTexture(b.TEXTURE_2D,null),h.iz?qA.Resize:qA.Success}gz(){this.nz.forEach((t=>{t.forEach(((i,s)=>{const e=this.lz.hz(i.packerId);if(!e)return;const h=i.origin,r=e.JE.x,n=e.JE.y,o=h.x/r,a=(h.y+i.size.y)/n,l=(h.x+i.size.x)/r,u=h.y/n,c=[o,a,l,a,o,u,o,u,l,a,l,u];i.texCoords=c,t.set(s,i)}))}))}}const sg=t=>{if(t instanceof ee||t instanceof Sd)return t.Mi()?"linear-highPrecision":"linear";if(t instanceof he){const i={};return t.x instanceof Hs&&(i.x={base:t.x.Ai()}),t.y instanceof Hs&&(i.y={base:t.y.Ai()}),["logarithmic",i]}return"linear"},eg=t=>{const i=Object.keys(t),s={};return i.forEach((i=>{const e=t[i];let h=!1;s[i]=t=>{if(!t)return h;const i=e();return h=i,i}})),s},hg=(t,i,s)=>"value"===t.getLookUpProperty()?s:"x"===t.getLookUpProperty()?{min:i.yt(),max:i.vt()}:"y"===t.getLookUpProperty()?{min:i.St(),max:i.bt()}:"z"===t.getLookUpProperty()?{min:i.kv(),max:i.Cv()}:void 0,rg=t=>!(!t||"value"!==t.lookUpProperty||!t.lut.percentageValues),ng=t=>(i,s)=>s%2?i:i+t;class og{constructor(t){this.mz=new Map,this.pz=Bi("font"),this.vz=new Map,this.Sz=new Set,this.az=t}cz(t=!1){return(t||0===this.Sz.size)&&(this.mz.forEach(((t,i)=>{t.cz(),this.mz.delete(i)})),this.Sz.clear()),this}bz(t){this.Sz.add(t)}xz(t){this.Sz.delete(t)}Mz(t,i,s,e){const h=Yt.devicePixelRatio,r=`${e?"dark":"light"} - ${jh(i,h).id}`,n=this.vz.get(r),o=this.mz.get(n);let a=0,l=0,u=0;const c=t.split(""),d=i.size,f=.45*i.size*h,A=Math.round(1*i.size);let g=!1;for(let t=0;t<c.length;t+=1){const i=c[t],s=o&&o.fz(i,d);if(s)""!==i.trim()&&(l=Math.max(l,s.baseline),a=Math.min(a,s.baseline-(s.size.y-1))),u+=s.advanceX;else{if(""!==i.trim()){const t=0;l=Math.max(l,t),a=Math.min(a,t-(A-1))}u+=f,g=!0}}const y=((t,i,s)=>{if(0===s||360===s||180===s||s%180==0)return{x:t,y:i};if(90===s||-90===s||(s+90)%180==0)return{x:i,y:t};const e=s*Math.PI/180,h=Math.cos(e),r=Math.sin(e);return{x:Math.abs(t*h)+Math.abs(i*r),y:Math.abs(t*r)+Math.abs(i*h)}})(u/h,(l-a+1)/h,s);return{x:y.x,y:y.y,isEstimate:g}}_z(t,i,s){const e=`${s?"dark":"light"} - ${i.id}`;let h=this.vz.get(e);h||(h=this.pz(),this.mz.set(h,new ig(this.az)),this.vz.set(e,h));const r=this.mz.get(h);if(!r)throw new zt("Failed to get font texture!");let o=0,a=0,l=0;const u=t.split(""),d=new Map;let f=0;const A=i.properties.size;for(let t=0;t<u.length;t+=1){const e=u[t],h=Math.ceil(f);let n=r.fz(e,A);if(!n){const h=this.az.wz(e,i.properties,i.dpr,s);if(!h)continue;const l=r.Az(h[1],A,h[0]);if(l===qA.Resize){this.Sz.forEach((t=>{t.ba.o=!0})),t=-1,f=0,a=0,o=0,d.clear(),this.az.us.xs(!0);continue}if(l===qA.Fail)throw new zt("Failed to create glyph");if(n=r.fz(e,A),!n)throw new zt("Failed to get glyph after creation")}if(""!==e.trim()){let t=d.get(n.texture);t||(t={vertices:[],texCoords:[]},d.set(n.texture,t)),t.vertices.push(...n.vertices.map(ng(h))),t.texCoords.push(...n.texCoords),a=Math.max(a,n.baseline),o=Math.min(o,n.baseline-(n.size.y-1))}f+=n.advanceX}l=f;const g=c(n(0,o),n(l,a)),y=[];return d.forEach(((t,i)=>{y.push({texCoords:new Float32Array(t.texCoords),vertices:new Float32Array(t.vertices),texture:i})})),[y,g]}}class ag{constructor(t){this.modifiers=[],this.modifiers=t}build(t){const i=this.modifiers.filter((t=>lg(t)));for(const s of i)t=s(t);return`${Ni(this.modifiers.filter((t=>ug(t)))).map((t=>t.Cz)).join("\n")}\n${t}`}}const lg=t=>"function"==typeof t,ug=t=>t&&"object"==typeof t&&"kz"in t,cg=(...t)=>i=>{t=t.reverse();for(let s of t)"string"==typeof s&&(s=s.includes("{")||s.endsWith(";")?s:`${s};`,s=s.trim(),i=i.replace("void main(void)",`${s}\nvoid main(void)`));return i},dg=t=>i=>(t=t.endsWith(";")?t:`${t};`,i.replace(t,"")),fg=(...t)=>i=>{const s=t.filter((t=>t));for(let t=0;t<s.length;t+=1)s[t]=s[t].endsWith(";")?s[t]:`${s[t]};`,s[t]=s[t].startsWith("\t")?s[t]:`\t${s[t]}`;const e=s.join("\n");return i.replace("void main(void) {\n",`void main(void) {\n${e}\n`)},Ag=(t,...i)=>s=>{for(let t=0;t<i.length;t+=1)i[t]=i[t].endsWith(";")?i[t]:`${i[t]};`,i[t]=i[t].startsWith("\t")?i[t]:`\t${i[t]}`;const e=i.join("\n"),h=new RegExp(`(.*${t}.*)`),r=s.replace(h,`${e}\n$1`);return i.forEach((i=>{if(!r.includes(i))throw new Error(`ShaderBefore misusage (not found: \n${i}\nmatch: \n${t}\nresult: \n${r}\n)`)})),r},gg=(t,...i)=>s=>{const e=i.filter((t=>"string"==typeof t));for(let t=0;t<e.length;t+=1)e[t]=e[t].endsWith(";")?e[t]:`${e[t]};`,e[t]=e[t].startsWith("\t")?e[t]:`\t${e[t]}`;const h=e.join("\n"),r=s.lastIndexOf(t),n=s.substring(r),o=n.indexOf("\n"),a=n.substring(o),l=`${s.substring(0,r+o)}\n${h}${a}`;return e.forEach((i=>{if(!l.includes(i))throw new Error(`ShaderAfter misusage (not found: "${i}", match: "${t}", result: "${l}")`)})),l},yg=(...t)=>i=>{for(let s of t)if("string"==typeof s){s=s.endsWith(";")?s:`${s};`,s=s.trim(),s=s.startsWith("\t")?s:`\t${s}`;const t=i.lastIndexOf("}");i=`${i.substring(0,t-1)}\n${s}\n}`}return i},mg=(t,i)=>s=>{let e,h;if(t.includes("uniform")||t.includes("attribute")){const i=t.endsWith(";")?t:`${t};`;s=cg(i)(s),e=t.split(" ")[2].replace(";","")}else e=t;if(i.includes(" ")){const t=i.endsWith(";")?i:`${i};`;s=cg(t)(s),h=i.split(" ")[2].replace(";","")}else h=i;return yg(`\t${h} = ${e};`)(s)},pg=(...t)=>i=>{t=t.reverse();for(const s of t)i=s+i;return i},vg={roundUnsigned:{kz:"roundUnsigned",Cz:"float roundUnsigned(float number) {\n  return floor(number + 0.5);\n}"},linearStep:{kz:"linearStep",Cz:"float linearStep(float step0, float step1, float step) {\n  return clamp((step - step0) / (step1 - step0), 0.0, 1.0);\n}"},decodeUbyteRGBAEncodedFloat:{kz:"decodeUbyteRGBAEncodedFloat",Cz:"\n      // Denormalize 8-bit color channels to integers in the range 0 to 255.\n      ivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {\n        ivec4 bytes = ivec4(inputFloats * 255.0);\n        return (\n          littleEndian\n          ? bytes.abgr\n          : bytes\n        );\n      }\n      \n      // Break the four bytes down into an array of 32 bits.\n      void bytesToBits(const in ivec4 bytes, out bool bits[32]) {\n        for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {\n          float acc = float(bytes[channelIndex]);\n          for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {\n            float powerOfTwo = exp2(float(indexInByte));\n            bool bit = acc >= powerOfTwo;\n            bits[channelIndex * 8 + (7 - indexInByte)] = bit;\n            acc = mod(acc, powerOfTwo);\n          }\n        }\n      }\n      \n      // Compute the exponent of the 32-bit float.\n      float getExponent(bool bits[32]) {\n        const int startIndex = 1;\n        const int bitStringLength = 8;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        float acc = 0.0;\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Compute the mantissa of the 32-bit float.\n      float getMantissa(bool bits[32], bool subnormal) {\n        const int startIndex = 9;\n        const int bitStringLength = 23;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        // Leading/implicit/hidden bit convention:\n        // If the number is not subnormal (with exponent 0), we add a leading 1 digit.\n        float acc = float(!subnormal) * exp2(float(bitStringLength));\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Parse the float from its 32 bits.\n      float bitsToFloat(bool bits[32]) {\n        float signBit = float(bits[0]) * -2.0 + 1.0;\n        float exponent = getExponent(bits);\n        bool subnormal = abs(exponent - 0.0) < 0.01;\n        float mantissa = getMantissa(bits, subnormal);\n        float exponentBias = 127.0;\n        return signBit * mantissa * exp2(exponent - exponentBias - 23.0);\n      }\n      \n      // Decode a 32-bit float from the RGBA color channels of a texel.\n      float decodeUbyteRGBAEncodedFloat(vec4 rgba, bool littleEndian) {\n        ivec4 rgbaBytes = floatsToBytes(rgba, littleEndian);\n        bool bits[32];\n        bytesToBits(rgbaBytes, bits);\n        return bitsToFloat(bits);\n      }\n      "},texelFetchWithFallback:{webgl2:{kz:"texelFetchWithFallback",Cz:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{kz:"texelFetchWithFallback",Cz:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},texelFetchUnsignedWithFallback:{webgl2:{kz:"texelFetchUnsignedWithFallback",Cz:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{kz:"texelFetchUnsignedWithFallback",Cz:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},modulus:{kz:"modulus",Cz:"int modulus(int a, int b) {\n  return (a)-((a)/(b))*(b);\n}"},computeScreenSpaceWireframe:{kz:"computeScreenSpaceWireframe",Cz:"#extension GL_OES_standard_derivatives : enable\nfloat computeScreenSpaceWireframe (vec3 barycentric, float lineWidth) {\n  vec3 dist = fwidth(barycentric);\n  vec3 smoothed = smoothstep(dist * ((lineWidth * 0.5) - 0.5), dist * ((lineWidth * 0.5) + 0.5), barycentric);\n  return 1.0 - min(min(smoothed.x, smoothed.y), smoothed.z);\n}"}},Sg=(t,i)=>{const s=i.steps,e=s.length-1,h=[cg("uniform vec4 uFallbackColor")],r=[],n=[];for(let t=0;t<i.steps.length;t+=1)r.push(`uniform float uLUTValue${t}`),n.push(`uniform vec4 uLUTColor${t}`);return h.push(cg(...r,...n),i.percentageValues&&cg("uniform float uMinValue","uniform float uMaxValue")),i.interpolate?h.push(gg("colorFragment =","vec4 colorLookup = uLUTColor0","float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),"if (value <= -340282346638528859811704183484516925440.0) {\n                    colorLookup = uFallbackColor;\n                }",`if (value >= uLUTValue${e}) {\n                    colorLookup = uLUTColor${e};\n                }`,...s.slice(0,-1).map(((t,i)=>`if (value >= uLUTValue${i} && value <= uLUTValue${i+1}) {\ncolorLookup = uLUTColor${i} + vec4(uLUTColor${i+1}.r -  uLUTColor${i}.r, uLUTColor${i+1}.g -  uLUTColor${i}.g, uLUTColor${i+1}.b -  uLUTColor${i}.b, uLUTColor${i+1}.a -  uLUTColor${i}.a) * (value - uLUTValue${i})/(uLUTValue${i+1} - uLUTValue${i});} `)),"colorFragment = colorLookup")):h.push(gg("colorFragment =","vec4 colorLookup = vec4(uLUTValue0)","float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),`if (${t} <= -340282346638528859811704183484516925440.0) {\n                    colorLookup = uFallbackColor;\n                } else if (${t} < uLUTValue0) { colorLookup = uLUTColor0;} ${s.slice().reverse().map((t=>{const i=s.indexOf(t);return`else if (value >= uLUTValue${i}) { colorLookup = uLUTColor${i};} `})).join("")}`,"colorFragment = colorLookup")),h},bg=[cg("uniform sampler2D uMaskTexture"),cg("varying vec2 vMaskTextureCoord"),gg("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.r")],xg=[cg("uniform sampler2D uMaskTexture"),cg("varying vec2 vMaskTextureCoord"),gg("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.a")],Mg=[cg("varying vec3 vPosWorld;","varying vec3 vNormal;","uniform vec3 uCameraLoc;","uniform vec3 uLightLoc;","uniform vec4 uLightColor;","uniform vec4 uAmbientColor;","uniform float uShininess;","uniform float uAmbientReflection;","uniform float uDiffuseReflection;","uniform float uSpecularReflection;"),gg("colorFragment =","float ambientReflection = uAmbientReflection","float diffuseReflection = uDiffuseReflection","float specularReflection = uSpecularReflection","vec3 ambientColor = uAmbientColor.rgb","vec3 diffuseColor = colorFragment.rgb","vec3 specularColor = uLightColor.rgb","vec3 vNormalNormalized = normalize(vNormal)","vNormalNormalized = (float(gl_FrontFacing) * 2.0 - 1.0) * vNormalNormalized","vec3 lightDir = normalize( uLightLoc - vPosWorld )","float lambertian = abs(dot(vNormalNormalized, lightDir))","float specular = 0.0","vec3 R =  reflect(-lightDir, vNormalNormalized)","vec3 V = normalize(uCameraLoc - vPosWorld)","float specAngle = max(dot(R,V),0.0)","specular = pow(specAngle, uShininess)","colorFragment = vec4(ambientReflection * ambientColor + diffuseReflection * lambertian * diffuseColor + specularReflection * specular * specularColor, colorFragment.a)")],_g=(t,...i)=>{var s,e,h;if("linear-highPrecision"!==t||0===i.length)return{vertexShaderModifiers:[],fragmentShaderModifiers:[]};const r=i[0];return{vertexShaderModifiers:[cg("varying vec4 d"),yg(`d = vec4(${i[0]}.x, ${null!==(s=i[1])&&void 0!==s?s:r}.x, ${null!==(e=i[2])&&void 0!==e?e:r}.x, ${null!==(h=i[3])&&void 0!==h?h:r}.x)`)],idFragment:"hpfix",fragmentShaderModifiers:[cg("varying vec4 d"),yg("if (d.z == -100.0 + d.z / 10.0) { gl_FragColor = d; }")]}};class wg extends Error{constructor(t,i,s){super(`Dynamic shader generation error\n(id: ${i})\n ${s?`when applying feature: ${s.idVertex?`vert: ${s.idVertex}`:""} ${s.idFragment?`frag: ${s.idFragment}`:""}`:""} | ${t}`)}}const Cg=(...t)=>{let i="";for(const s of t){if("object"!=typeof s){i+=`${String(s)},`;continue}const t=[{prefix:"",obj:s}];for(;t.length>0;){const{prefix:s,obj:e}=t.shift();i+=`${s}:`;const h=Object.keys(e).sort();for(const s of h){const h=e[s];"object"==typeof h&&h.__proto__===Object.prototype||Array.isArray(h)?t.push({prefix:s,obj:h}):i+=`${s}=${String(h)},`}}}return i},kg=t=>void 0!==t.find((t=>{var i;return null===(i=t.Tz)||void 0===i?void 0:i.Fz})),Tg=t=>void 0!==t.find((t=>{var i;return null===(i=t.Tz)||void 0===i?void 0:i.Iz})),Fg=(t,i,...s)=>{const e=[],h=i?"vec3":"vec2",{axisWorldTranslation:r,scaling:n,translation:o,offset:a,flipXY:l,flipXZ:u,splitPosAttribute:c,normalSource:d}=t,f=[];if("attribute"===d&&e.push(cg("attribute vec3 aNormal"),fg("vec3 normal = aNormal")),"linear-highPrecision"!==r?s.forEach((t=>{void 0!==t.attributeNameAxisCoord&&void 0!==t.variableNameAxisCoord&&(!0!==c?e.push(fg(`${h} ${t.variableNameAxisCoord} = ${t.attributeNameAxisCoord}`)):e.push(fg(`${h} ${t.variableNameAxisCoord} = ${i?`vec3(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y, ${t.attributeNameAxisCoord}Z)`:`vec2(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y)`}`)))})):s.forEach((i=>{!0!==t.splitPosAttribute?e.push(fg(`${h} ${i.variableNameAxisCoord}_highpart = ${i.attributeNameAxisCoord}_highpart`),fg(`${h} ${i.variableNameAxisCoord}_lowpart = ${i.attributeNameAxisCoord}_lowpart`)):e.push(fg(`${h} ${i.variableNameAxisCoord}_highpart = vec2(${i.attributeNameAxisCoord}_highpartX, ${i.attributeNameAxisCoord}_highpartY)`),fg(`${h} ${i.variableNameAxisCoord}_lowpart = vec2(${i.attributeNameAxisCoord}_lowpartX, ${i.attributeNameAxisCoord}_lowpartY)`))})),a&&a.rotation){const t=a.rotation.dataType,i="uniform"===t?"u":"a";if("attribute-deg"===t){e.push(cg("attribute float aRotDeg"),cg("uniform float uBaseRotDeg"));const t="cRot",i="aInstanceGeo";e.push(fg(`vec2 ${t} = vec2(sin((aRotDeg + uBaseRotDeg) * 0.01745329252), cos((aRotDeg + uBaseRotDeg) * 0.01745329252))`,`vec2 rotatedGeo = vec2(${i}.x * ${t}.y + ${i}.y * ${t}.x, ${i}.y * ${t}.y - ${i}.x * ${t}.x)`))}else{const s=`${i}Rot`;e.push(cg(`${t} vec2 ${s}`));const h="aInstanceGeo";e.push(fg(`vec2 rotatedGeo = vec2(${h}.x * ${s}.y + ${h}.y * ${s}.x, ${h}.y * ${s}.y - ${h}.x * ${s}.x)`))}}if(a&&e.push(cg(`attribute ${h} aInstanceGeo`)),!0===l){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXY");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${i?`vec3(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x, ${t.variableNameAxisCoord}.z)`:`vec2(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`}`)}))}if(!0===u){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXZ");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = vec3(${t.variableNameAxisCoord}.z, ${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`)}))}if(n){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + scaling");const t=("attribute"===n.dataType?"a":"u")+"Scaling",h=i?"vec3":"vec2";e.push(cg(`${n.dataType} ${h} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} * ${t}`)}))}if(o&&"axis"===o.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + translation (axis)");const t=("attribute"===o.dataType?"a":"u")+"TranslationAxis",h=i?"vec3":"vec2";e.push(cg(`${o.dataType} ${h} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} + ${t}`)}))}if(a&&"axis"===a.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + offset (axis)");const t=("attribute"===a.dataType?"a":"u")+"OffsetAxis",n=!0===a.symmetric?"float":h;e.push(cg(`${a.dataType} ${n} ${t}`));const o=a.halved?" * 0.5":"",l=a.rotation?"rotatedGeo":"aInstanceGeo",u="offsetGeometry";f.push(`${h} ${u} = ${t} * ${l}${o} * sign(uScale)`),i&&"gpu-calculate"===d&&f.push(`${h} normal = ${l}`),s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${t.variableNameAxisCoord} + ${u}`)}))}if(void 0===r||"linear"===r)e.push(cg(`uniform ${h} uDisp`,`uniform ${h} uScale`)),s.forEach((t=>{f.push(`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord} - uDisp) / uScale`)}));else if("linear-highPrecision"===r)e.push(cg(`uniform ${h} uDisp`,`uniform ${h} uScale`,`uniform ${h} uScaleStart_highpart`,`uniform ${h} uScaleStart_lowpart`)),s.forEach((t=>{f.push(`${h} ${t.variableNameAxisCoord}_hprecision = (${t.variableNameAxisCoord}_highpart - uScaleStart_highpart) + (${t.variableNameAxisCoord}_lowpart - uScaleStart_lowpart)`,`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord}_hprecision - uDisp) / uScale`,`${h} ${t.variableNameAxisCoord} = ${t.variableNameAxisCoord}_highpart + ${t.variableNameAxisCoord}_lowpart`)}));else if("matrix"===r)e.push(cg("uniform mat3 uMatrix")),s.forEach((t=>{f.push(`vec2 ${t.variableNameWorldCoord} = (uMatrix * vec3(${t.variableNameAxisCoord}, 1.0)).xy`)}));else if("matrix4"===r)e.push(cg("uniform mat4 uMatrix")),s.forEach((t=>{f.push(`vec4 ${t.variableNameWorldCoord} = uMatrix * ${t.attributeNameAxisCoord}`)}));else if("logarithmic"===r[0]){e.push(cg(`uniform ${h} uScaleStart`,`uniform ${h} uScaleStartLog`,`uniform ${h} uScaleInterval`,`uniform ${h} uScaleIntervalLog`,`uniform ${h} uViewportStart`,`uniform ${h} uViewportSize`));const t=i?["x","y","z"]:["x","y"],n=[];t.forEach((t=>{const i=r[1][t];if(void 0!==i){const t=i.base;if("e"===t)return;const s=`float cLog${t} = 1.0 / log(${$s(t).toFixed(1)})`;n.includes(s)||n.push(s)}})),e.push(cg(...n)),s.forEach(((i,s)=>{const e=`${s}`,n=[];t.forEach((t=>{const s=t.toUpperCase(),h=r[1][t];if(void 0===h)f.push(`float posPercent${s}${e} = (${i.variableNameAxisCoord}.${t} - uScaleStart.${t}) / uScaleInterval.${t}`);else{const r=h.base,n="e"===r;f.push(`float posLog${s}${e} = log(${i.variableNameAxisCoord}.${t})${n?"":` * cLog${r}`}`,`float posPercent${s}${e} = (posLog${s}${e} - uScaleStartLog.${t}) / uScaleIntervalLog.${t}`)}n.push(`posPercent${s}${e}`)})),f.push(`${h} ${i.variableNameWorldCoord} = uViewportStart + ${h}(${n.join(", ")}) * uViewportSize`)}))}if(a&&"px"===a.sizeUnit){e.push(cg("uniform vec2 uRatioPxClip"));let t="vec2(0.0, 0.0)";a.useAlignment&&(e.push(cg("uniform vec2 uOffsetAlignment")),t="uOffsetAlignment");const i=("attribute"===a.dataType?"a":"u")+"OffsetPixels",r=!0===a.symmetric?"float":h;e.push(cg(`${a.dataType} ${r} ${i}`));const n=a.halved?" * 0.5":"",o=`(${a.rotation?"rotatedGeo":"aInstanceGeo"} + ${t}) * ${i}${n} * uRatioPxClip`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${o}`)}))}if(a&&"scale"===a.sizeUnit){e.push(cg("uniform vec2 uRatioPxClip")),e.push(cg("uniform vec2 uSizePixels"));let t="vec2(0.0, 0.0)";a.useAlignment&&(e.push(cg("uniform vec2 uOffsetAlignment")),t="uOffsetAlignment");const i=("uniform"===a.dataType?"u":"a")+"OffsetScale";e.push(cg(`${a.dataType} float ${i}`));const h=`(${a.rotation?"rotatedGeo":"aInstanceGeo"} + ${t}) * ${i} * uSizePixels * uRatioPxClip`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${h}`)}))}if(a&&"wu"===a.sizeUnit){const t=("attribute"===a.dataType?"a":"u")+"OffsetWU",r=!0===a.symmetric?"float":h;e.push(cg(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?"rotatedGeo":"aInstanceGeo",l="offsetGeometry";f.push(`${h} ${l} = ${t} * ${o}${n}`),i&&"gpu-calculate"===d&&f.push(`${h} normal = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l}`)}))}if(a&&"nwu"===a.sizeUnit){e.push(cg("uniform float uRatioNwuWu"));const t=("attribute"===a.dataType?"a":"u")+"OffsetNWU",r=!0===a.symmetric?"float":h;e.push(cg(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?"rotatedGeo":"aInstanceGeo",l="offsetGeometry";f.push(`${h} ${l} = ${t} * ${o}${n}`),i&&"gpu-calculate"===d&&f.push(`${h} normal = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l} * uRatioNwuWu`)}))}return t.snapToNearestPixel&&(e.push(cg("uniform vec2 uViewportSizePx")),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = 2.0 * floor(((${t.variableNameWorldCoord} + 1.0) * 0.5) * uViewportSizePx + 0.5) / uViewportSizePx - 1.0`)}))),e.push(Ag("gl_Position =",...f)),e},Ig=(t,i,s,e)=>{const h=[],r=t.axisWorldTranslation,n=i?"vec3":"vec2";if("linear"===r)h.push(gg(s,`${n} ${e} = ${s} * uScale + uDisp`));else if("linear-highPrecision"===r)h.push(gg(s,`${n} ${e} = ${s} * uScale + uDisp + uScaleStart_highpart + uScaleStart_lowpart`));else{if("matrix"===r)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("matrix4"===r)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("logarithmic"!==r[0])throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");{const t=[`${n} ${s}_percent = (${s} - uViewportStart) / uViewportSize`];(i?["x","y","z"]:["x","y"]).forEach((i=>{const e=i.toUpperCase(),h=r[1][i];if(void 0===h)t.push(`float pos${e}Back = ${s}_percent.${i} * uScaleInterval.${i} + uScaleStart.${i}`);else{const r=h.base,n="e"===r?"1.0":`cLog${r}`;t.push(`float pos${e}Back = pow(2.71828, (${s}_percent.${i} * uScaleIntervalLog.${i} + uScaleStartLog.${i}) / ${n})`)}})),t.push(`${n} ${e} = ${n}(posXBack, posYBack${i?", posZBack":""})`),h.push(gg(s,...t))}}return h},Pg=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.Tz)||void 0===i?void 0:i.Pz})))(t)?[dg("attribute vec4 aColor"),dg("vColor = aColor"),cg("attribute vec4 aColorA"),cg("attribute vec4 aColorB"),yg("vColor = mix(aColorA, aColorB, aSegmentSide)")]:[],Dg=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.Tz)||void 0===i?void 0:i.Dz})))(t)?[dg("attribute float aLookupValue"),dg("vLookupValue = aLookupValue"),cg("attribute float aLookupValueA"),cg("attribute float aLookupValueB"),yg("vLookupValue = mix(aLookupValueA, aLookupValueB, aSegmentSide)")]:[],Bg={"2D":{idFeature:"2D",apply:t=>({idVertex:"2D",idFragment:"2D",defaultVertexShader:"2D",defaultFragmentShader:"FragmentShader"})},"2DCompose":{idFeature:"2DCompose",apply:t=>({idVertex:"2DCompose",idFragment:"2DCompose",defaultVertexShader:"2DMatrix",defaultFragmentShader:"Empty"})},"3D":{idFeature:"3D",Tz:{Fz:!0},apply:t=>({idVertex:"3D",idFragment:"3D",defaultVertexShader:"3D",defaultFragmentShader:"FragmentShader"})},PointSize:t=>({idFeature:"PointSize",apply:i=>{const s="uniform"===t?"u":"a";return{idVertex:`SizePrimitive:${Cg(t)}`,idFragment:void 0,vertexShaderModifiers:[cg(`${t} float ${s}PointSize`,"uniform float uDevicePixelRatio"),yg(`gl_PointSize = ${s}PointSize * uDevicePixelRatio`)]}}}),Color:t=>{const i=t&&t.dataType,s=t&&t.maskTextureText,e=t&&t.maskTexture,h=t&&t.overrideOpacity;return{idFeature:"Color",Tz:{Iz:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,Dz:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0,Pz:"attribute"===t.dataType||void 0},apply:(r,n)=>{let o,a=`Color:${Cg(t)}`;const l=[];let u="FragmentShader";const c=[];if("uniform"===i)c.push(cg("uniform vec4 uColor"),gg("colorFragment =","colorFragment = uColor"),...s?bg:[],...e?xg:[]);else if("attribute"===i)o="colorAttribute",l.push(mg("attribute vec4 aColor","varying vec4 vColor")),c.push(cg("varying vec4 vColor"),gg("colorFragment =","colorFragment = vColor"),...s?bg:[],...e?xg:[]);else if("texture"===i)o="colorTexCoord",l.push(mg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),c.push(cg("varying vec2 vTextureCoord"),cg("uniform sampler2D uColorTexture"),cg("uniform vec4 uColor"),gg("colorFragment =","colorFragment = texture2D(uColorTexture, vTextureCoord)","if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.) {\n                        colorFragment = uColor;\n                    }"),...s?bg:[],...e?xg:[]);else if("texture-coord-calc-gpu"===i)o="colorTexCoord",u="Empty",l.push(cg("attribute vec2 aTextureCoord"),cg("varying vec2 vTextureCoord"),yg("vTextureCoord = gl_Position.xy * 0.5 + 0.5")),c.push(cg("varying vec2 vTextureCoord"),cg("uniform sampler2D uColorTexture"),fg("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord)","gl_FragColor = colorFragment;"));else if(Array.isArray(i)&&"image"===i[0])o="colorTexCoord",l.push(mg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),i[1].fitMode===q.Tile?c.push(cg("uniform sampler2D uColorTexture"),cg("varying vec2 vTextureCoord"),gg("colorFragment =","colorFragment = texture2D(uColorTexture, vTextureCoord);")):c.push(cg("uniform sampler2D uColorTexture"),cg("varying vec2 vTextureCoord"),cg("uniform vec4 uColor"),gg("colorFragment =","colorFragment = texture2D(uColorTexture, vTextureCoord);","if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.){\n                                colorFragment = uColor;\n                            }"));else if(Array.isArray(i)&&"lookup"===i[0]){const t=i[1];if("value"===t)o="lookup:value",l.push(mg("attribute float aLookupValue","varying float vLookupValue"));else{const i=`posAxis.${t}`;o=`lookup:${t}`,l.push(mg(i,"varying float vLookupValue"))}c.push(cg("varying float vLookupValue"),...Sg("vLookupValue",i[2]),...s?bg:[],...e?xg:[])}else if(Array.isArray(i)&&"gradient"===i[0]){const t=i[1],h=t.getColorStops();ot(t)?(a=`rgradient${h.length},${e},${s}`,c.push(cg("uniform vec4 uBounds","uniform vec2 uCenter","uniform vec2 uDistance","uniform float uAspect"),cg(...Kt(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),vg.linearStep,gg("colorFragment =","vec2 uv = vec2((((gl_FragCoord.x)-uBounds.x)/(uBounds.z))*uAspect,((gl_FragCoord.y)-uBounds.y)/(uBounds.w))","float mixVal = distance(uv/uDistance, uCenter/uDistance)","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, mixVal))",...h.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, mixVal));`)),"colorFragment = color"),...s?bg:[],...e?xg:[])):ut(t)&&(a=`lgradient${h.length},${e},${s}`,c.push(cg("uniform vec4 uBounds","uniform vec2 uStartPoint","uniform vec2 uEndPoint"),cg(...Kt(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),vg.linearStep,gg("colorFragment =","vec2 uv = gl_FragCoord.xy - uBounds.xy","float magnitude = ((uv.x-uStartPoint.x) * (uEndPoint.x-uStartPoint.x) + (uv.y-uStartPoint.y) * (uEndPoint.y-uStartPoint.y)) / (pow(uEndPoint.x - uStartPoint.x, 2.0) + pow(uEndPoint.y-uStartPoint.y,2.0))","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, magnitude))",...h.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, magnitude))`)),"colorFragment = color"),...s?bg:[],...e?xg:[]))}if(s||e){const t="maskTexture";o=o?`${o} ${t}`:`Color:${t}`,l.push(mg("attribute vec2 aMaskTextureCoord","varying vec2 vMaskTextureCoord"))}return h&&c.push(cg("uniform float uOpacity"),gg("colorFragment =","colorFragment.a *= uOpacity")),{vertexShaderModifiers:l,fragmentShader:u,fragmentShaderModifiers:c,idVertex:o,idFragment:a}}}},ColorShaded3D:t=>{const{dataType:i,shadingStyle:s,wireframe:e}=t;let h;const r=`ColorShaded3D:${Cg(t)}`;return{idFeature:"ColorShaded3D",Tz:{Iz:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,Dz:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0},apply:(t,n)=>{const o=[],a=[];if(o.push("phong"===s&&mg("normal","varying vec3 vNormal"),mg("posWorld","varying vec3 vPosWorld")),"uniform"===i)a.push(cg("uniform vec4 uColorDiffuse"),gg("colorFragment =","colorFragment = uColorDiffuse"));else if("attribute"===i)h="per-vertex-color",o.push(mg("attribute vec4 aColor","varying vec4 vColor")),a.push(cg("varying vec4 vColor"),gg("colorFragment =","colorFragment = vColor"));else if(Array.isArray(i)){const t=i[1];if("value"===t)h="lookup:value",o.push(mg("attribute float aLookupValue","varying float vLookupValue"));else{const i=`posAxis.${t}`;h=`lookup:${t}`,o.push(mg(i,"varying float vLookupValue"))}a.push(cg("varying float vLookupValue"),...Sg("vLookupValue",i[2]))}if(e){const t="wireframe";h=h?`${h},${t}`:t,o.push(mg("attribute vec3 aTriangleBary","varying vec3 vTriangleBary")),a.push(cg("varying vec3 vTriangleBary"),cg("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),vg.computeScreenSpaceWireframe,gg("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)","colorFragment = mix(colorFragment, uWireframeColor, edge)"))}return"phong"===s&&a.push(...Mg),{idVertex:h,idFragment:r,vertexShaderModifiers:o,fragmentShader:"FragmentShader",fragmentShaderModifiers:a}}}},VertexLocation:t=>({idFeature:"VertexLocation",apply:i=>{const s=_g(t.axisWorldTranslation,"posAxis_hprecision"),e=[],h=kg(i),r=t.coordType?t.coordType:h?"vec3":"vec2";return"linear-highPrecision"!==t.axisWorldTranslation?!0!==t.splitPosAttribute?e.push(cg(`attribute ${r} aPos`)):e.push(cg("attribute float aPosX"),cg("attribute float aPosY"),h&&cg("attribute float aPosZ")):!0===t.splitPosAttribute?e.push(cg("attribute float aPos_highpartX"),cg("attribute float aPos_lowpartX"),cg("attribute float aPos_highpartY"),cg("attribute float aPos_lowpartY")):e.push(cg(`attribute ${r} aPos_highpart`),cg(`attribute ${r} aPos_lowpart`)),e.push(...Fg(t,h,{attributeNameAxisCoord:"aPos",variableNameAxisCoord:"vec4"===t.coordType?void 0:"posAxis",variableNameWorldCoord:"posWorld"})),e.push(...s.vertexShaderModifiers),{idVertex:`VertexLocation:${Cg(t)}`,idFragment:s.idFragment,vertexShaderModifiers:e,fragmentShaderModifiers:s.fragmentShaderModifiers}}}),Model3D:t=>({idFeature:"Model3D",apply:i=>{const s=[];return s.push(cg("attribute vec3 aGeoPos"),cg("uniform mat4 uModelRotation"),cg("uniform mat4 uModelRotationNormals"),cg("uniform vec3 uLocationAxis"),cg("uniform vec3 uModelAlignment"),cg("uniform vec3 uModelScale"),cg("uniform vec3 uModelSize"),...Fg({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,{attributeNameAxisCoord:"uLocationAxis",variableNameAxisCoord:"locationAxis",variableNameWorldCoord:"locationWorld"}),Ag("gl_Position =","vec3 posWorld = locationWorld + ((uModelRotation * vec4(aGeoPos, 1.0)).xyz  - (uModelAlignment + 1.0) * uModelSize/2.0) * uModelScale;"),"attribute"===t.normalSource&&gg("vec3 normal ="," normal = (uModelRotationNormals * vec4(normal, 1.0)).xyz;"),...Tg(i)?Ig({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,"posWorld","posAxis"):[]),{vertexShaderModifiers:s,idVertex:`Model3D:${Cg(t)}`,idFragment:void 0}}}),LineInstanced2D:t=>{const i=_g(t.axisWorldTranslation,"locationA_hprecision","locationB_hprecision");return{idFeature:"LineInstanced2D",apply:s=>({idVertex:`LineInstanced2D:${Cg(t)}`,idFragment:i.idFragment,vertexShaderModifiers:[cg("uniform float uThicknessPixels"),cg("uniform vec2 uRatioPxClip"),..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[cg("attribute vec2 aLocationA"),cg("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[cg("attribute vec2 aLocationA_highpart"),cg("attribute vec2 aLocationB_highpart"),cg("attribute vec2 aLocationA_lowpart"),cg("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[cg("attribute float aLocationAX"),cg("attribute float aLocationAY"),cg("attribute float aLocationBX"),cg("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[cg("attribute float aLocationA_highpartX"),cg("attribute float aLocationA_highpartY"),cg("attribute float aLocationB_highpartX"),cg("attribute float aLocationB_highpartY"),cg("attribute float aLocationA_lowpartX"),cg("attribute float aLocationA_lowpartY"),cg("attribute float aLocationB_lowpartX"),cg("attribute float aLocationB_lowpartY")]:[],cg("attribute vec2 aSegmentPosition"),cg("attribute float aSegmentSide"),...Fg(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),t.ensureMinimumSegmentLength&&cg("uniform vec2 uMinSegmentPixelVector"),gg("worldB = ",t.ensureMinimumSegmentLength&&"float segmentLengthPixels = sqrt(pow(worldB.x - worldA.x, 2.0) + pow(worldB.y - worldA.y, 2.0)) / length(uRatioPxClip)",t.ensureMinimumSegmentLength&&"if (segmentLengthPixels == 0.0 || segmentLengthPixels < length(uMinSegmentPixelVector)) {\n                            worldB = worldA + uMinSegmentPixelVector * uRatioPxClip;\n                        }","vec2 directionBasis = worldB - worldA","vec2 directionBasisNorm = normalize(directionBasis)","vec2 perpendBasisNorm = vec2(-directionBasisNorm.y, directionBasisNorm.x)","vec2 offset = mix(worldA, worldB, aSegmentSide)","vec2 thicknessDirection = aSegmentPosition.x * directionBasisNorm + aSegmentPosition.y * perpendBasisNorm","vec2 posWorld = offset + thicknessDirection * uThicknessPixels * uRatioPxClip"),...Dg(s),...Pg(s),...Tg(s)?Ig(t,!1,"posWorld","posAxis"):[],...i.vertexShaderModifiers],fragmentShaderModifiers:i.fragmentShaderModifiers})}},Area2D:t=>({idFeature:"Area2D",apply:i=>{const s=_g(t.axisWorldTranslation,"locationA_hprecision","locationB_hprecision");return{idVertex:`Area2D:${Cg(t)}`,idFragment:s.idFragment,vertexShaderModifiers:[..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[cg("attribute vec2 aLocationA"),cg("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[cg("attribute vec2 aLocationA_highpart"),cg("attribute vec2 aLocationB_highpart"),cg("attribute vec2 aLocationA_lowpart"),cg("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[cg("attribute float aLocationAX"),cg("attribute float aLocationAY"),cg("attribute float aLocationBX"),cg("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[cg("attribute float aLocationA_highpartX"),cg("attribute float aLocationA_highpartY"),cg("attribute float aLocationB_highpartX"),cg("attribute float aLocationB_highpartY"),cg("attribute float aLocationA_lowpartX"),cg("attribute float aLocationA_lowpartY"),cg("attribute float aLocationB_lowpartX"),cg("attribute float aLocationB_lowpartY")]:[],cg("attribute float aCurveOrBaseline"),cg("attribute float aSegmentSide"),...Fg(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),gg("worldB = ","vec2 posCoord = mix(worldA, worldB, aSegmentSide)","bottom"===t.fill?"float baseline = min(posCoord.y, -1.0)":"top"===t.fill?"float baseline = max(posCoord.y, 1.0)":"left"===t.fill?"float baseline = min(posCoord.x, -1.0)":"float baseline = max(posCoord.x, 1.0)","vec2 posWorld = "+("bottom"===t.fill||"top"===t.fill?"vec2(posCoord.x, mix(posCoord.y, baseline, aCurveOrBaseline))":"vec2(mix(posCoord.x, baseline, aCurveOrBaseline), posCoord.y)")),...Dg(i),...Pg(i),...Tg(i)?Ig(t,!1,"posWorld","posAxis"):[],...s.vertexShaderModifiers],fragmentShaderModifiers:s.fragmentShaderModifiers}}}),LineInstanced3D:t=>({idFeature:"LineInstanced3D",apply:i=>({idVertex:`LineInstanced3D:${Cg(t)}`,idFragment:void 0,defaultFragmentShader:"FragmentShader",vertexShaderModifiers:[cg("uniform float uOffsetWU"),cg("attribute vec3 aLocationA"),cg("attribute vec3 aLocationB"),cg("attribute float aSegmentPosition"),cg("attribute float aPerpendHorizontal"),cg("attribute float aPerpendVertical"),...Fg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},kg(i),{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),gg("worldB = ","vec3 directionBasis = worldB - worldA","vec3 directionBasisNorm = normalize(directionBasis)","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(directionBasis.y), 0.9 ) ))","vec3 horizontalBasis = normalize( cross( notParallel, directionBasisNorm ) )","vec3 verticalBasis = normalize( cross( horizontalBasis, directionBasisNorm ) )","vec3 normal = aPerpendHorizontal * horizontalBasis + aPerpendVertical * verticalBasis","vec3 posWorld = worldA + aSegmentPosition * directionBasis + normal * uOffsetWU * 0.5"),...Tg(i)?Ig({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,"posWorld","posAxis"):[]]})}),RoundedEdges3D:{idFeature:"RoundedEdges3D",apply:t=>({idVertex:"RoundedEdges3D",idFragment:void 0,vertexShaderModifiers:[cg("attribute vec3 aEdge"),cg("uniform float uEdgeRoundness"),gg("posWorld =","vec3 boxSizeWorld = abs( aOffsetAxis / uScale )","float boxMinDimensionWorldXZ = min( boxSizeWorld.x, boxSizeWorld.z )","vec3 edgeRoundAmount = uEdgeRoundness * vec3( boxMinDimensionWorldXZ, min( boxMinDimensionWorldXZ, boxSizeWorld.y ), boxMinDimensionWorldXZ )","posWorld = posWorld + aEdge * edgeRoundAmount")]})},ColorGrid2D:t=>{const i=t.flipXY,s=t.intensityTextureType,e=t.littleEndian;return{idFeature:"ColorGrid2D",apply:(h,r)=>({idVertex:void 0,idFragment:`ColorGrid2D:${Cg(t)}`,fragmentShader:"FragmentShader",fragmentShaderModifiers:[cg("uniform vec4 uTileBounds","uniform vec2 uTileDimensions","uniform sampler2D uTileIntensityValues"),"ubyte"===s&&vg.decodeUbyteRGBAEncodedFloat,"bilinear"===t.interpolation?fg("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions - 1.0)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensions - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensions - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${i?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${i?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${i?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${i?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===s?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${e})`),"float intensity01 = "+("float"===s?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${e})`),"float intensity10 = "+("float"===s?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${e})`),"float intensity11 = "+("float"===s?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${e})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${i?"lerpFactors.y":"lerpFactors.x"})`):fg("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellIndexNormalized = cellIndex / uTileDimensions",`vec4 sample0 = texture2D(uTileIntensityValues, ${i?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = "+("float"===s?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${e})`)),...Sg("intensityP",t.lut)]})}},DrawToNormalTexture:t=>{const i=t.flipXZ,s=t.vertexIdSource,e=t.normalTextureType,h=t.heightmapTextureType,r=t.littleEndian;return{idFeature:"DrawToNormalTexture",apply:(n,o)=>{const a=[],l=[];return a.push(cg("uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB","attribute"===s&&"attribute float aVertexID"),void 0!==s&&vg.roundUnsigned,vg.modulus,vg.texelFetchWithFallback[o],"ubyte"===h&&vg.decodeUbyteRGBAEncodedFloat,fg(void 0===s?"int iVertex = gl_VertexID":"int iVertex = int(roundUnsigned(aVertexID))","int iSecondary = modulus(iVertex, (uTileDimensions.y - 1))","int iPrimary = iVertex / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(uTileDimensions) - 1.0","vec2 halfTexelWorld = 2.0 / (uTileDimensionsMinus1 * 2.0)","vec2 posWorld = vec2(-1.0 + halfTexelWorld.y + iCell.y * 2.0 * halfTexelWorld.y, -1.0 + halfTexelWorld.x + iCell.x * 2.0 * halfTexelWorld.x)","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec3 posAxis0 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`} ,\n                            uTileStartLocationAxisXZ.y + iCell.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell1 = iCell + vec2(1.0, 0.0)",`vec3 posAxis1 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell1.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell1.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell2 = iCell + vec2(0.0, 1.0)",`vec3 posAxis2 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell2.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell2.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell3 = iCell + vec2(1.0, 1.0)",`vec3 posAxis3 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell3.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell3.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec3 normal = normalize(cross(posAxis2 - posAxis0, posAxis1 - posAxis0) + cross(posAxis1 - posAxis3, posAxis2 - posAxis3))","uint"===e?"vNormalRGB = uvec3(((normal / 2.0) + 0.5) * float(-1u))":"vNormalRGB = (normal / 2.0) + 0.5","gl_PointSize = 1.0")),l.push(cg("uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB"),fg("uint"===e?"gl_FragColor = uvec4(vNormalRGB, -1u)":"gl_FragColor = vec4(vNormalRGB, 1.0)")),{idVertex:`DrawToNormalTexture:${Cg(t)}`,idFragment:`DrawToNormalTexture:${Cg(t)}`,vertexShaderModifiers:a,fragmentShaderModifiers:l,fragmentShader:"Empty",hints:["uint"===e&&{type:"fragOutput",fragOutput:"uvec4"}]}}}},SurfaceGrid:t=>{const i=t.fillColor,s=t.interpolation,e=t.flipXZ,h=t.shadingStyle,r=t.wireframe,n=t.normalTextureType,o=t.heightmapTextureType,a=t.intensityTextureType,l=t.littleEndian;return{idFeature:"SurfaceGrid",Tz:{Bz:!0},apply:(u,c)=>{const d=[],f=[];return d.push(cg("attribute vec2 aGeoCellOffset","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture"),vg.modulus,vg.texelFetchWithFallback[c],"ubyte"===o&&vg.decodeUbyteRGBAEncodedFloat,fg("int iSecondary = modulus(iInstance + uBaseInstance, (uTileDimensions.y - 1))","int iPrimary = (iInstance + uBaseInstance) / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 iCellVertex = iCell + aGeoCellOffset","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","vec2 ySampleCoordinate = vec2(iCellVertex.y, iCellVertex.x) / vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x)","float y = "+("float"===o?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${l})`),"vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)","vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * "+(e?"vec2(iCellVertex.y, iCellVertex.x)":"iCellVertex"),"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)")),d.push(...Fg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:"posAxis",variableNameWorldCoord:"posWorld"})),"phong"===h&&d.push(mg("posWorld","varying vec3 vPosWorld"),..."uint"===n?[vg.texelFetchUnsignedWithFallback[c],yg("vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)")]:[yg("vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))")],yg("vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vNormal = normalize(normalAxis * uScale)"),cg("varying vec3 vNormal",..."uint"===n?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"])),f.push(cg("varying vec3 vTriangleBary")),"uniform"===i?f.push(cg("uniform vec4 uColorDiffuse"),gg("colorFragment =","colorFragment = uColorDiffuse")):Array.isArray(i)&&"lookup"===i[0]&&("value"===i[1]?(d.push(mg("posAxis.xz","varying vec2 vVertexLocationAxisXZ")),f.push(cg("uniform vec4 uTileBoundsAxisXZ","uniform vec2 uTileDimensionsXZ","varying vec2 vVertexLocationAxisXZ","uniform sampler2D uTileIntensityValues","uniform mat4 uViewProjectionMatrix","uniform vec3 uScale","uniform vec3 uDisp"),"ubyte"===a&&vg.decodeUbyteRGBAEncodedFloat,"bilinear"===s?fg("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = (vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensionsXZ - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensionsXZ - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${e?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${e?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${e?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${e?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===a?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${l})`),"float intensity01 = "+("float"===a?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${l})`),"float intensity10 = "+("float"===a?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${l})`),"float intensity11 = "+("float"===a?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${l})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${e?"lerpFactors.y":"lerpFactors.x"})`):fg("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = floor((vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ)","vec2 cellIndexNormalized = cellIndex / (uTileDimensionsXZ - 1.0)",`vec4 sample0 = texture2D(uTileIntensityValues, ${e?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = sample0.x"),...Sg("intensityP",i[2]))):(d.push(mg(`posAxis.${i[1]}`,"varying float vLookupValue")),f.push(cg("varying float vLookupValue"),...Sg("vLookupValue",i[2])))),"phong"===h&&f.push(...Mg),r&&(d.push(cg("attribute vec3 aTriangleBary"),mg("aTriangleBary","varying vec3 vTriangleBary")),f.push(cg("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),vg.computeScreenSpaceWireframe,gg("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",i?"if (edge > 0.0) {\n                                    colorFragment = vec4(mix(colorFragment.rgb, uWireframeColor.rgb, edge * uWireframeColor.a), max(colorFragment.a, uWireframeColor.a));\n                                }":"if (edge > 0.0) {\n                                    colorFragment = uWireframeColor;\n                                  } else {\n                                      discard;\n                                  }"))),{idVertex:`SurfaceGrid:${Cg(t)}`,idFragment:`SurfaceGrid:${Cg(t)}`,vertexShaderModifiers:d,fragmentShader:"FragmentShader",fragmentShaderModifiers:f}}}},DebugSurfaceGridNormals:t=>({idFeature:"DebugSurfaceGridNormals",apply:(i,s)=>({idVertex:`DebugSurfaceGridNormals:${Cg(t)}`,idFragment:`DebugSurfaceGridNormals:${Cg(t)}`,vertexShaderModifiers:[cg("attribute float aNormalArrow","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===t.instanceIdSource&&"attribute float aInstanceID",..."uint"===t.normalTextureType?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"]),vg.roundUnsigned,vg.modulus,vg.texelFetchWithFallback[s],"ubyte"===t.heightmapTextureType&&vg.decodeUbyteRGBAEncodedFloat,fg(void 0===t.instanceIdSource?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","float y00 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y01 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y10 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y11 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y = (y00 + y01 + y10 + y11) / 4.0","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * (0.5 + ${t.flipXZ?"vec2(iCell.y, iCell.x)":"iCell"})`,"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)",..."uint"===t.normalTextureType?["vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)"]:["vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))"],"vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vec3 normalWorld = normalize(normalAxis * uScale)"),..."uint"===t.normalTextureType?[vg.texelFetchUnsignedWithFallback[s]]:[],...Fg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:"posAxis",variableNameWorldCoord:"posWorld"}),gg("posWorld =","vec3 dirArrow = normalWorld","vec3 posArrowStart = posWorld","vec3 posArrowEnd = posWorld + dirArrow * 0.010","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(dirArrow.y), 0.9 ) ))","vec3 dirArrowLeft = normalize(-dirArrow + 0.50 * normalize(cross(dirArrow, notParallel)))","vec3 dirArrowRight = normalize(-dirArrow + 0.50 * normalize(cross(notParallel, dirArrow)))","vec3 posArrowLeft = posArrowEnd + dirArrowLeft * 0.0025","vec3 posArrowRight = posArrowEnd + dirArrowRight * 0.0025","if (aNormalArrow == 0.0) {\n                        posWorld = posArrowStart;\n                    } else if (aNormalArrow == 1.0) {\n                        posWorld = posArrowEnd;\n                    } else if (aNormalArrow == 2.0) {\n                        posWorld = posArrowLeft;\n                    } else if (aNormalArrow == 3.0) {\n                        posWorld = posArrowRight;\n                    }")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[yg("gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0)")]})}),OffsetTowardsCamera:()=>({idFeature:"OffsetTowardsCamera",apply:t=>({idVertex:"OffsetTowardsCamera",idFragment:void 0,vertexShaderModifiers:[cg("uniform vec3 uCameraLoc"),gg("posWorld =","posWorld = posWorld + normalize(uCameraLoc) * 0.0025")]})}),AliasedEdge:{idFeature:"AliasedEdge",apply:t=>({idVertex:"AliasedEdge",idFragment:"AliasedEdge",vertexShaderModifiers:[cg("attribute float aSegmentInside"),cg("varying float vSegmentInside"),cg("varying float vSegmentSide"),gg("gl_Position = ","\n                vSegmentInside = aSegmentInside;\n                vSegmentSide = aSegmentSide;\n                ")],fragmentShaderModifiers:[pg("#extension GL_OES_standard_derivatives : enable"),cg("uniform float uAALimit"),cg("varying float vSegmentInside"),cg("varying float vSegmentSide"),gg("antiAliasFactor = ","\n                float dist = (uAALimit - vSegmentInside);\n                vec2 ddist = vec2(dFdx(dist), dFdy(dist));\n                float pixelDist = dist / length(ddist);\n                // additional blurring\n                pixelDist *= 0.5;\n\n                float aa = clamp(0.5 - pixelDist, 0.0, 1.0);\n                if((vSegmentSide <= 0.0 || vSegmentSide >= 1.0) && aa <=0.99){\n                    aa *= 0.5;\n                }\n                antiAliasFactor = aa;\n                ")]})},Glow1D:t=>({idFeature:"Glow1D",apply:()=>{const i=Math.round(t.spreadPx),s=Math.round(t.blurPx),e=i+s,h=t.firstPass,r=[];for(let t=-e;t<=e;t+=1){const i=Math.abs(t);r.push(h?{x:t.toFixed(1),y:"0.0",distPx:i.toFixed(1)}:{x:"0.0",y:t.toFixed(1),distPx:i.toFixed(1)})}return{idVertex:`Glow1D:${Cg(t)}`,idFragment:`Glow1D:${Cg(t)}`,vertexShaderModifiers:[mg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[cg("uniform sampler2D uTexture"),cg("varying vec2 vTextureCoord"),cg("uniform vec2 uTextureSize"),h&&cg("uniform vec2 uOffsetPx"),!h&&cg("uniform sampler2D uTextureFirstGlowPass"),!h&&cg("uniform vec4 uGlowColor"),gg("antiAliasFactor =","vec2 oneTexel = vec2(1.0, 1.0) / uTextureSize",...h?[]:["float inverseIntensity =\n                        0.25 * texture2D(uTexture, vTextureCoord).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, 0.0)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, 0.0)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, -oneTexel.y)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, -oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, -oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, oneTexel.y)).a","antiAliasFactor *= 1.0 - (inverseIntensity * inverseIntensity)","if (antiAliasFactor <= 0.0) { discard; }"],"float distancePx = 255.0","vec2 sample_tx = vec2(0.0)",...h?["vec2 texCoordOffset = vTextureCoord - uOffsetPx * oneTexel",...r.map(((t,i)=>[`sample_tx = texCoordOffset + oneTexel * vec2(${t.x}, ${t.y})`,`if (distancePx > ${t.distPx} && sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0 && texture2D(uTexture, sample_tx).a > 0.0) { distancePx = ${t.distPx}; }`])).flat(),"colorFragment = vec4(distancePx / 255.0, 0.0, 0.0, 1.0)"]:["vec4 sample_horizontal = vec4(0.0)","float horizontal_dist = 255.0","float min_horizontal_dist = 255.0",...r.map(((t,i)=>[`sample_tx = vTextureCoord + oneTexel * vec2(${t.x}, ${t.y})`,"if (sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0) {\n                                            sample_horizontal = texture2D(uTextureFirstGlowPass, sample_tx);\n                                            horizontal_dist = sample_horizontal.r * 255.0;\n                                          }","if (sample_horizontal.a < 0.9) { horizontal_dist = 255.0; }","min_horizontal_dist = min(min_horizontal_dist, horizontal_dist)",`distancePx = min(distancePx, pow(horizontal_dist * horizontal_dist + ${t.y} * ${t.y}, 0.5))`])).flat(),`if (distancePx > ${e.toFixed(1)}) { discard; }`,"vec4 pixelGlowColor = vec4(0.0, 0.0, 0.0, 0.0)",`if (distancePx > ${i.toFixed(1)}) {\n                                        float lerpAmount = (distancePx - ${i.toFixed(1)}) / ${(s+1).toFixed(1)};\n                                        pixelGlowColor = mix(uGlowColor, vec4(uGlowColor.rgb, 0.0), 1.0 - (1.0 - lerpAmount) * (1.0 - lerpAmount));\n                                    } else {\n                                        pixelGlowColor = uGlowColor;\n                                    }`,"colorFragment = pixelGlowColor"])]}}}),MousePicking:t=>{const i=!!(null==t?void 0:t.customMousePickingIdInput),s=!i&&!!(null==t?void 0:t.useVertexId),e=!i&&!!(null==t?void 0:t.useAttribute),h=!i&&!s&&!e;return{idFeature:"MousePicking",Tz:{Bz:h,Lz:s},apply:(r,n)=>{const o="webgl2"===n?"flat":"",a="webgl2"===n?"int":"float";return{idVertex:`MousePicking:${Cg(t)}`,idFragment:`MousePicking:${Cg(t)}`,vertexShaderModifiers:[...h?[cg(`${o} varying ${a} vPickingIdOffset`),yg(`vPickingIdOffset = ${a}(iInstance)`)]:[],...s?[cg(`${o} varying ${a} vPickingIdOffset`),yg(`vPickingIdOffset = ${a}(iVertex)`)]:[],...e?[cg("attribute float aPickingIdOffset",`${o} varying ${a} vPickingIdOffset`),yg(`vPickingIdOffset = ${a}(aPickingIdOffset)`)]:[]],fragmentShaderModifiers:[cg("uniform int uFirstId"),...i?[]:[cg(`${o} varying ${a} vPickingIdOffset`),fg("int mousePickingIdOffset = "+("int"===a?"vPickingIdOffset":"int(floor(vPickingIdOffset + 0.5))"))],gg("colorFragment =","int remainder = mousePickingIdOffset + uFirstId","int r = remainder / 16777216","remainder -= r * 16777216","int g = remainder / 65536","remainder -= g * 65536","int b = remainder / 256","remainder -= b * 256","int a = remainder","colorFragment = vec4(float(r) / 255.0, float(g) / 255.0, float(b) / 255.0, float(a) / 255.0)"),t=>t.replace("gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor)","if (antiAliasFactor <= 0.0) { discard; }\ngl_FragColor = fragColorEnd").replace("if (fragColorEnd.a <= 0.0) { discard; }","")]}}}},AttributeHighlight:{idFeature:"AttributeHighlight",apply:t=>({idVertex:"AttributeHighlight",idFragment:"AttributeHighlight",vertexShaderModifiers:[mg("attribute float aIsHighlighted","varying float vIsHighlighted")],fragmentShaderModifiers:[t=>t.replace("uniform float uIsHighlighted","varying float vIsHighlighted").replace("uIsHighlighted","vIsHighlighted")]})},StippleTexture:{idFeature:"StippleTexture",apply:(t,i)=>({idVertex:"StippleTexture",idFragment:"StippleTexture",vertexShaderModifiers:[cg("attribute vec2 aLengthSoFar"),cg("varying float vLengthSoFar"),cg("uniform vec2 uStippleCount"),yg("\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[cg("uniform sampler2D uStippleTexture"),cg("uniform float uStippleScale"),cg("varying float vLengthSoFar"),"webgl1"===i&&cg("uniform float uStippleTextureWidthLimiter"),gg("antiAliasFactor = ",`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    antiAliasFactor *= stippleAA;\n                    if (antiAliasFactor <= 0.0) { discard; }`)]})},StippleTextureInstanced:{idFeature:"StippleTextureInstanced",apply:(t,i)=>({idVertex:"StippleTextureInstanced",idFragment:"StippleTextureInstanced",vertexShaderModifiers:[cg("attribute vec2 aLengthSoFarA"),cg("attribute vec2 aLengthSoFarB"),cg("varying float vLengthSoFar"),cg("uniform vec2 uStippleCount"),yg("\n                vec2 aLengthSoFar = mix(aLengthSoFarA, aLengthSoFarB, aSegmentSide);\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[cg("uniform sampler2D uStippleTexture"),cg("uniform float uStippleScale"),cg("varying float vLengthSoFar"),"webgl1"===i&&cg("uniform float uStippleTextureWidthLimiter"),gg("antiAliasFactor = ",`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    antiAliasFactor *= stippleAA;\n                    if (antiAliasFactor <= 0.0) { discard; }`)]})},PolarHeatmap:t=>({idFeature:"PolarHeatmap",apply:(i,s)=>{const e="dataType"in t,h="interpolation"in t?t:void 0,r=h?h.flipXY:void 0,n="bilinear"===(null==h?void 0:h.interpolation),o=null==h?void 0:h.intensityTextureType,a=null==h?void 0:h.littleEndian;return{idVertex:void 0,idFragment:`PolarHeatmap:${Cg(t)}`,vertexShaderModifiers:[],fragmentShaderModifiers:[cg("uniform vec2 uViewportSize","uniform vec2 uScale","uniform vec2 uDisp","uniform float uSectors","uniform float uAnnuli","uniform float uAmplitudeStart","uniform float uAmplitudeStep","uniform float uAmplitudeAxisStart","uniform float uAmplitudeAxisEnd","uniform float uAngleOffset","uniform float uAngleDirection",h&&"uniform sampler2D uTileIntensityValues",e&&"uniform vec4 uColor"),vg.texelFetchWithFallback[s],"ubyte"===o&&vg.decodeUbyteRGBAEncodedFloat,fg("vec2 posWorld = (2.0 * gl_FragCoord.xy / uViewportSize) - 1.0","vec2 posAxis = posWorld * uScale + uDisp","float amplitudeAxisInterval = uAmplitudeAxisEnd - uAmplitudeAxisStart","float amplitude = uAmplitudeAxisStart + sign(amplitudeAxisInterval) * sqrt(posAxis.x * posAxis.x + posAxis.y * posAxis.y)","float iAnnulus = (amplitude - uAmplitudeStart) / uAmplitudeStep"),h&&gg("iAnnulus","float angRad = atan(posAxis.y, posAxis.x) * uAngleDirection + uAngleOffset","if (angRad < 0.0) { angRad = angRad + 2.0 * 3.1415926538; }","if (angRad > 2.0 * 3.1415926538) { angRad = angRad - 2.0 * 3.1415926538; }","float iSector = uSectors * angRad / (2.0 * 3.1415926538)","vec2 cellIndex = vec2(iSector, iAnnulus)","ivec2 cellStart = ivec2(floor(cellIndex))","ivec2 cellEnd = cellStart + ivec2(1)","if (cellEnd.x >= int(uSectors)) { cellEnd = ivec2(0, cellEnd.y); }",r&&"cellIndex = vec2(cellIndex.y, cellIndex.x)",r&&"cellStart = ivec2(cellStart.y, cellStart.x)",r&&"cellEnd = ivec2(cellEnd.y, cellEnd.x)"),e&&gg("colorFragment =","colorFragment = uColor"),h&&gg("cellEnd","vec2 tileDimensions = "+(r?"vec2(uAnnuli, uSectors)":"vec2(uSectors, uAnnuli)"),n&&"vec4 sample00 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",n&&"vec4 sample01 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellStart.x, cellEnd.y), tileDimensions)",n&&"vec4 sample10 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellEnd.x, cellStart.y), tileDimensions)",n&&"vec4 sample11 = texelFetchWithFallback(uTileIntensityValues, cellEnd, tileDimensions)",n&&"float intensity00 = "+("float"===o?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${a})`),n&&"float intensity01 = "+("float"===o?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${a})`),n&&"float intensity10 = "+("float"===o?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${a})`),n&&"float intensity11 = "+("float"===o?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${a})`),n&&"vec2 lerpFactors = cellIndex - vec2(cellStart)",n&&"float intensityR1 = mix(intensity00, intensity10, lerpFactors.x)",n&&"float intensityR2 = mix(intensity01, intensity11, lerpFactors.x)",n&&"float intensityP = mix(intensityR1, intensityR2,  lerpFactors.y)",!n&&"vec4 sample0 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",!n&&"float intensityP = "+("float"===o?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${a})`)),...h?Sg("intensityP",h.lut):[]]}}})},Lg={"2D":"\nvoid main(void) {\n    gl_Position = vec4(posWorld, 0.0, 1.0 );\n}\n","2DMatrix":"\nvoid main(void) {\n    gl_Position = posWorld;\n}\n","3D":"\nuniform mat4 uViewProjectionMatrix;\nvoid main(void) {\n    gl_Position = uViewProjectionMatrix * vec4(posWorld, 1.0);\n}\n"},Rg={FragmentShader:"\nuniform float uIsHighlighted;\nuniform vec4 uHighlightColorOffset;\nuniform float uRenderEffectMask;\nvoid main(void) {\n    vec4 colorFragment = vec4(0.0, 0.0, 0.0, 0.0);\n    float antiAliasFactor = 1.0;\n    vec4 fragColorEnd = colorFragment;\n    if (fragColorEnd.a <= 0.0) { discard; }\n    fragColorEnd = clamp(fragColorEnd + uIsHighlighted * uHighlightColorOffset, vec4(0.0), vec4(1.0));\n    fragColorEnd = mix(fragColorEnd, vec4(1.0), uRenderEffectMask * fragColorEnd.a * 1000.0);\n    gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor);\n}\n",Empty:"\nvoid main(void) {\n}\n"};class Eg{constructor(t,i,s,e,h){if(this.id=t,this.shader=s,this.gl=e,this.info=h,!i||!s)throw new Vt(`Could not find ${this.Rz()} ${this.Ez()} shader source code.`);this.gl.shaderSource(s,i),this.gl.compileShader(s)}get src(){return""}Rz(){return this.id.toString()}Ez(){return this.gl.getShaderParameter(this.shader,this.gl.SHADER_TYPE)===this.gl.FRAGMENT_SHADER?"fragment":"vertex"}}class zg extends Eg{constructor(t,i,s,e){super(t,i,s.createShader(s.VERTEX_SHADER),s,e)}}class Vg extends Eg{constructor(t,i,s,e){super(t,i,s.createShader(s.FRAGMENT_SHADER),s,e)}}class Og{constructor(t,i,s,e){this.zz=new Map,this.Vz=new Map,this.Oz=s,this.Nz=s.createProgram(),this.Gz=`${t.Rz()} vertex`,this.Uz=`${i.Rz()} fragment`,s.attachShader(this.Nz,t.shader),s.attachShader(this.Nz,i.shader),s.bindAttribLocation(this.Nz,0,"aPos"),s.linkProgram(this.Nz),s.deleteShader(t.shader),s.deleteShader(i.shader),this.allAttributeNames=t.info.allAttributeNames,this.allUniformNames=Array.from(new Set(t.info.allUniformNames.concat(i.info.allUniformNames)).values()),this.vertexSharedRemovedVariables=t.info.removedVariableNames,this.fragmentSharedRemovedVariables=i.info.removedVariableNames}get vertexShaderSrc(){return""}get fragmentShaderSrc(){return""}Wz(t){return zi(0,(()=>Vi()))}Yz(t){const i=this.Xz(t);if(void 0===i)throw this.Wz(`Could not get ${t} uniform from ${this.Gz} and ${this.Uz} shaders.`);return i}Xz(t){const i=this.zz.get(t);if(i)return i;const s=this.Oz.getUniformLocation(this.Nz,t);return s?(this.zz.set(t,s),s):void 0}$z(t){const i=this.jz(t);if(void 0===i)throw this.Wz(`Could not get ${t} attribute from ${this.Gz} and ${this.Uz} shaders.`);return i}jz(t){const i=this.Vz.get(t);if(i||0===i)return i;const s=this.Oz.getAttribLocation(this.Nz,t);return s>=0?(this.Vz.set(t,s),s):void 0}W(){this.Oz.deleteProgram(this.Nz)}}const Ng=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/,Gg=t=>{let i;try{i=Yt.getComputedStyle(t)}catch(t){return null}return i};
+import*as t from"immutable";import{Record as i}from"immutable";import{Eventer as s}from"@lightningchart/eventer";import e from"earcut";class h{constructor(){this.o=!0}u(){return this.o}}class r extends h{constructor(t,i){super(),this.S=t,this.o=i}M(t){return t!==this.S&&(this.S=t,this.o=!0),this}_(){return this.S}u(){return super.u()}}const n=(t,i)=>({x:t,y:i}),o=(t,i)=>({x:t,y:i}),a=(t,i,s)=>({position:t,high:i,low:s}),l=(t,i,s)=>({x:t,y:i,z:s}),u=t=>{const i=Array(0),s=Array(0);return t.length>0&&t.forEach((t=>{i.push(n(t.position,t.high)),s.push(n(t.position,t.low))})),[i,s]},c=(t,i)=>({min:t,max:i}),d=(t,i,s,e)=>({x:t,y:i,width:s,height:e}),f=(t,i=!0)=>new r(t,i),A=(t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}),g=A,y=(t,i)=>({left:void 0!==i.left?i.left:t.left,top:void 0!==i.top?i.top:t.top,right:void 0!==i.right?i.right:t.right,bottom:void 0!==i.bottom?i.bottom:t.bottom}),m=i({type:"color",r:1,g:1,b:1,a:1});class p extends m{constructor(t){super(t)}toUint32(){return void 0!==this.C||(this.C=I(this.getR(),this.getG(),this.getB(),this.getA())),this.C}toString(){return`color:${this.r},${this.g},${this.b},${this.a}`}setA(t){return this.set("a",t/255)}setR(t){return this.set("r",t/255)}setG(t){return this.set("g",t/255)}setB(t){return this.set("b",t/255)}getA(){return 255*this.get("a")}getR(){return 255*this.get("r")}getG(){return 255*this.get("g")}getB(){return 255*this.get("b")}getHighlight(){return this.T||(this.T=new p({r:this.r+.45*(1-this.r),g:this.g+.45*(1-this.g),b:this.b+.45*(1-this.b),a:this.a<1?this.a+.45*(1-this.a):1})),this.T}getLighter(){return this.F||(this.F=new p({r:this.r+.4*(1-this.r),g:this.g+.4*(1-this.g),b:this.b+.4*(1-this.b),a:this.a})),this.F}getDarker(){return this.I||(this.I=new p({r:this.r-.4*(1-this.r),g:this.g-.4*(1-this.g),b:this.b-.4*(1-this.b),a:this.a})),this.I}toRGBAString(){return`rgba( ${255*this.r}, ${255*this.g}, ${255*this.b}, ${255*this.a} )`}}const v=t=>!(!t||"object"!=typeof t||!("type"in t)||"color"!==t.type),S=(t,i,s,e=255)=>new p({r:t/255,g:i/255,b:s/255,a:e/255}),b=t=>{const i=t.startsWith("#")?t.substring(1):t.startsWith("0x")?t.substr(2):t;switch(i.length){case 8:return new p({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255,a:Number(`0x${i.substring(6,8)}`)/255});case 6:return new p({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255});case 4:return new p({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255,a:Number(`0x${i.charAt(3)}${i.charAt(3)}`)/255});case 3:return new p({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255});default:throw new Error(`ColorHEX parsing error | input: ${t}`)}},x=(t,i=1,s=1)=>{let e,h,r;t/=360;const n=Math.floor(6*t),o=6*t-n,a=s*(1-i),l=s*(1-o*i),u=s*(1-(1-o)*i);switch(n%6){case 0:e=s,h=u,r=a;break;case 1:e=l,h=s,r=a;break;case 2:e=a,h=s,r=u;break;case 3:e=a,h=l,r=s;break;case 4:e=u,h=a,r=s;break;default:e=s,h=a,r=l}return new p({r:e,g:h,b:r})},M=t=>{try{if(t.startsWith("rgba")){const i=t.substr(5).slice(0,-1),s=JSON.parse(`[${i}]`);return S(s[0],s[1],s[2],255*s[3])}if(t.startsWith("rgb")){const i=t.substr(4).slice(0,-1),s=JSON.parse(`[${i}]`);return S(s[0],s[1],s[2])}if(t.startsWith("hsl")){const i=t.substr(4).slice(0,-1).split(",").map(parseFloat),s=w(i[0],i[1],i[2]);return S(s[0],s[1],s[2])}return t.startsWith("#")||t.startsWith("0x")?b(t):b(k(t))}catch(t){}return console.warn(`ColorCSS parsing error: ${t}`),b("#fff")},_=t=>S(255&t,255&(t>>=8),255&(t>>=8),255&(t>>=8)),w=(t,i,s)=>{i/=100,s/=100;const e=(1-Math.abs(2*s-1))*i,h=t/60,r=e*(1-Math.abs(h%2-1));let n=[];isNaN(t)?n=[0,0,0]:h<=1?n=[e,r,0]:h<=2?n=[r,e,0]:h<=3?n=[0,e,r]:h<=4?n=[0,r,e]:h<=5?n=[r,0,e]:h<=6&&(n=[e,0,r]);const o=s-.5*e;return[Math.round(255*(n[0]+o)),Math.round(255*(n[1]+o)),Math.round(255*(n[2]+o))]},C={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},k=t=>{const i=C[t.toLowerCase()];if(i)return i;throw new Error(`Unknown color code: ${t}`)},T=new p({}),F=S(0,0,0,0),I=(t,i,s,e=255)=>(e<<24|s<<16|i<<8|t)>>>0,P=t=>I(255*t.r,255*t.g,255*t.b,255*t.a),D=(t,i)=>t.value-i.value,B=i({type:"lut",steps:[],title:"",units:"",interpolate:!0,color:S(0,0,0,255),length:0,min:0,max:0,subranges:[],isValid:!1,percentageValues:!1}),L=t=>{const{steps:i}=t,s=i.length;i.sort(D);const[e,h]=s>0?[i[0].value,i[s-1].value]:[0,0],r=s>0?s-1:0,n=Array(r);for(let t=0;t<r;t+=1)n[t]={min:i[t],max:i[t+1]};return{min:e,max:h,length:s,steps:i,subranges:n,isValid:s>0&&e!==h}};class R extends B{constructor(t){super(((t,i)=>({steps:t.steps,title:t.title,units:t.units,interpolate:t.interpolate,percentageValues:t.percentageValues,color:t.color,length:i.length,min:i.min,max:i.max,subranges:i.subranges,isValid:i.isValid}))(t,L(t)))}toString(){return`LUT:interpolate=${this.interpolate},steps=${this.steps.length},percentage=${this.percentageValues}`}setSteps(t){return this.merge(L({...this,steps:t}))}getSteps(){return this.get("steps")}setTitle(t){return this.set("title",t)}getTitle(){return this.get("title")}setUnits(t){return this.set("units",t)}getUnits(){return this.get("units")}setInterpolation(t){return this.set("interpolate",t)}getInterpolation(){return this.get("interpolate")}setFallbackColor(t){return this.set("color",t)}getFallbackColor(){return this.get("color")}setPercentageValues(t){return this.set("percentageValues",t)}getPercentageValues(){return this.get("percentageValues")}getColors(t){if(Array.isArray(t)){if(Array.isArray(t[0])){const i=t,s=i.length,e=i[0].length,h=[...Array(s)].map((()=>Array(e)));for(let t=0;t<s;t+=1)for(let s=0;s<e;s+=1)h[t][s]=this.P(i[t][s]);return h}const i=t,s=i.length,e=Array(s);for(let t=0;t<s;t+=1)e[t]=this.P(i[t]);return e}return this.P(t)}P(t){const{steps:i}=this,s=i.length;if(0===s)return this.getFallbackColor();if(1===s)return i[0].color||this.color;if(this.interpolate){for(let n=0;n<s-1;n+=1){const s=i[n],o=i[n+1],a=Math.min(s.value,o.value),l=Math.max(s.value,o.value);if(t>=a&&t<=l){if(a===l)return s.color;const i=(t-s.value)/(o.value-s.value);return e=s.color,h=o.color,r=i,new p({r:e.r+(h.r-e.r)*r,g:e.g+(h.g-e.g)*r,b:e.b+(h.b-e.b)*r,a:e.a+(h.a-e.a)*r})}}return t<i[0].value?i[0].color:i[s-1].color}var e,h,r;for(let e=s-1;e>=0;e-=1)if(t>=i[e].value)return i[e].color;return i[0].color}}const E=t=>!(!t||"object"!=typeof t||!("type"in t)||"lut"!==t.type),z=i({type:"fillstyle",fillType:"empty"});class V extends z{toString(){return"emptyFill"}}const O=new V,N=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"empty"===t.fillType),G=i({type:"fillstyle",fillType:"solid",color:S(255,255,255)});class U extends G{}class W extends U{constructor(t){super({...t,fillType:"solid"})}toString(){return`solidFill:${this.color.toString()}`}setColor(t){return v(t)?this.set("color",t):this.set("color",t(this.get("color")))}getColor(){return this.get("color")}setA(t){return this.setColor(this.getColor().setA(t))}setR(t){return this.setColor(this.getColor().setR(t))}setG(t){return this.setColor(this.getColor().setG(t))}setB(t){return this.setColor(this.getColor().setB(t))}}const Y=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"solid"===t.fillType);class H extends U{constructor(t){super({...t,fillType:"individual"})}toString(){return`individualPointFill:${this.color.toString()}`}setFallbackColor(t){return v(t)?this.set("color",t):this.set("color",t(this.get("color")))}getFallbackColor(){return this.get("color")}}const X=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"individual"===t.fillType),$=i({type:"fillstyle",fillType:"palette",lut:new R({steps:[]}),lookUpProperty:"value"});class j extends ${constructor(t){super({...t,fillType:"palette"})}toString(){return`palettedFill:lut=${this.lut.toString()},lookUpProperty=${this.lookUpProperty}`}getPalette(){return this.get("lut")}setLookUpProperty(t){return"function"==typeof t?this.set("lookUpProperty",t(this.get("lookUpProperty"))):this.set("lookUpProperty",t)}getLookUpProperty(){return this.get("lookUpProperty")}}const Z=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"palette"===t.fillType),Q={linear:(t,i,s)=>{const e=i-t;return h=>h<s?t+e/s*h:i},easeIn:(t,i,s)=>e=>e<s?t+Math.abs(2*(Math.sqrt(.5)*e/s)**2)*(i-t):i,easeOut:(t,i,s)=>e=>e<s?t+Math.abs(1-2*(Math.sqrt(.5)*(1-e/s))**2)*(i-t):i,ease:(t,i,s)=>e=>e<s?t+(e<s/2?.5*(e/s*2)**2.5:.5+.5*(1-(1-2*(e/s-.5))**2.5))*(i-t):i,logarithmic:t=>{const i=Mi(t);return(s,e,h)=>{const r=i(s),n=i(e);return i=>i<h?t**(r+Math.abs(1-2*(Math.sqrt(.5)*(1-i/h))**2)*(n-r)):e}}};class J{constructor(t,i,e,h=Q.linear,r){this.delta=0,this.nextAnimations=new Array,this.D=!1,this.easing=Q.linear,this.L=new s,this.isOver=()=>(this.delta===this.duration||this.D)&&0===this.nextAnimations.length,this.values=t,this.action=i,this.duration=e,this.easing=h,this.R=r,this.eases=t.map((([t,i])=>h(t,i,e)))}V(){this.L.emit("start")}start(){return this.R.includes(this)||this.R.push(this),this}addNextAnimations(t){return t instanceof Array?t.forEach((t=>this.nextAnimations.push(t))):this.nextAnimations.push(t),this}NextAnimation(t,i,s=this.duration,e=this.easing){const h=new J(t,i,s,e,this.R);return this.nextAnimations.push(h),h}onAnimationStart(t,i){return this.L.on("start",t,i)}onAnimationEnd(t,i){return this.L.on("end",t,i)}onEveryAnimationEnd(t,i){return this.L.on("everyEnd",t,i)}onAllAnimationEnd(t,i){return this.L.on("allEnd",t,i)}allOffAnimationEnd(){return this.L.topicOff("end"),this}allOffEveryAnimationEnd(){return this.L.topicOff("everyEnd"),this}allOffAllAnimationEnd(){return this.L.topicOff("allEnd"),this}offAnimationEnd(t){return this.L.off(t,"end")}offEveryAnimationEnd(t){return this.L.off(t,"everyEnd")}offAllAnimationEnd(t){return this.L.off(t,"allEnd")}finish(t=!0){if(this.D=!0,this.R.splice(this.R.indexOf(this),1),this.nextAnimations.length>0){const i=this.nextAnimations[0];return t&&(this.L.listeners("allEnd").forEach(((t,s)=>i.onAllAnimationEnd(t,s))),this.L.listeners("everyEnd").forEach(((t,s)=>i.onEveryAnimationEnd(t,s)))),i.addNextAnimations(this.nextAnimations.slice(1)),i.start(),t&&(this.L.emit("end",i),this.L.emit("everyEnd",i)),i}t&&(this.L.emit("end",void 0),this.L.emit("everyEnd",void 0),this.L.emit("allEnd"))}finishAll(t=!0){let i=this;for(;i;)i=i.finish(t)}getFinalValues(){return this.nextAnimations.length>0?this.nextAnimations[this.nextAnimations.length-1].values.map($t):this.values.map($t)}getTimeUntilFinish(){let t=this.duration-this.delta;for(let i=0;i<this.nextAnimations.length;i+=1)t+=this.nextAnimations[i].duration-this.nextAnimations[i].delta;return t}}const K=(t,i=60)=>{i>60&&console.log("Note: Animator FPS is usually capped at 60 by the browser!");const s=[];let e,h,r=0;const n=()=>{e=void 0;const o=Date.now();h=h||o,r=o-h,r/1e3>=1/i&&(h=Date.now()-r%(1e3/i),s.forEach((t=>{0===t.delta&&t.V(),t.delta+=r-r%(1e3/i),t.delta>t.duration&&(t.delta=t.duration),t.action(t.eases.map((i=>i(t.delta)))),t.delta===t.duration&&t.finish()})),t()),s.length>0?e=Yt.requestAnimationFrame(n):(e=void 0,h=void 0)};return(t=1e3,i=Q.linear)=>(h,r,o=t)=>{const a=new J(h,r,o,i,s).start();return e||(e=Yt.requestAnimationFrame(n)),a}};var q;!function(t){t[t.Fill=0]="Fill",t[t.Fit=1]="Fit",t[t.Stretch=2]="Stretch",t[t.Center=3]="Center",t[t.Tile=4]="Tile"}(q||(q={}));const tt=i({type:"fillstyle",fillType:"image",source:void 0,surroundingColor:S(0,0,0,0),sourceMissingColor:S(0,0,0,0),fitMode:q.Fill});class it extends tt{constructor(t){super(t)}setSource(t){return this.set("source",t)}getSource(){return this.get("source")}setSurroundingColor(t){return v(t)?this.set("surroundingColor",t):this.set("surroundingColor",t(this.get("surroundingColor")))}getSurroundingColor(){return this.get("surroundingColor")}setSourceMissingColor(t){return v(t)?this.set("sourceMissingColor",t):this.set("sourceMissingColor",t(this.get("sourceMissingColor")))}getSourceMissingColor(){return this.get("sourceMissingColor")}setFitMode(t){return this.set("fitMode",t)}getFitMode(){return this.get("fitMode")}toString(){return`imagefill:${this.fitMode}`}}const st=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"image"===t.fillType);var et,ht;!function(t){t.circle="circle",t.ellipse="ellipse"}(et||(et={})),function(t){t.closestSide="closest-side",t.closestCorner="closest-corner",t.farthestSide="farthest-side",t.farthestCorner="farthest-corner"}(ht||(ht={}));const rt=i({type:"fillstyle",fillType:"radial-gradient",stops:[{color:b("#f00"),offset:0},{color:b("#0f0"),offset:1}],position:n(.5,.5),shape:et.ellipse,extent:ht.farthestCorner});class nt extends rt{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("RadialGradientFill requires minimum two color stops to be defined.")}toString(){return`radialGradientFill:${this.shape},${this.extent},${this.position.x},${this.position.y},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");return this.set("stops",t)}getColorStops(){return this.get("stops")}setPosition(t){return this.set("position",t)}getPosition(){return this.get("position")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}setExtent(t){return this.set("extent",t)}getExtent(){return this.get("extent")}}const ot=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"radial-gradient"===t.fillType),at=i({type:"fillstyle",fillType:"linear-gradient",stops:[{color:b("#f00"),offset:0},{color:b("#0f0"),offset:1}],angle:0});class lt extends at{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("LinearGradientFill requires minimum two color stops to be defined.")}toString(){return`linearGradientFill:${this.angle},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");const i=t.sort(((t,i)=>t.offset-i.offset));return this.set("stops",i)}getColorStops(){return this.get("stops")}setAngle(t,i){return this.set("angle",i?function(t){return 180*t/Math.PI}(t):t)}getAngle(t){return t?Vs(this.get("angle")):this.get("angle")}}const ut=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"linear-gradient"===t.fillType),ct=i({type:"linestyle",lineType:"empty"}),dt=new class extends ct{constructor(){super(...arguments),this.thickness=0}setThickness(t){return this}getThickness(){return 0}O(){return 0}setFillStyle(t){return this}getFillStyle(){return O}},ft=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"empty"!==t.lineType);class At{constructor(t,i,e,h){this.cellIndex=t,this.cellSpan=i,this.cellsAmount=e,this.observedAmount=h,this.x=new gt,this.y=new gt,this.z=new gt,this.L=new s;const r={...t},n={...i};if(h){const t=t=>{this.cellsAmount.x=t.reduce(ds,0),this.cellIndex.x=t.reduce(((t,i,s)=>s>=r.x?t:t+i),0),this.cellSpan.x=t.reduce(((t,i,s)=>s>=r.x&&s<r.x+n.x?t+i:t),0),this.L.emit("cell-resize")},i=h.x.N(t);t(h.x._());const s=t=>{this.cellsAmount.y=t.reduce(ds,0),this.cellIndex.y=t.reduce(((t,i,s)=>s>=r.y?t:t+i),0),this.cellSpan.y=t.reduce(((t,i,s)=>s>=r.y&&s<r.y+n.y?t+i:t),0),this.L.emit("cell-resize")},e=h.y.N(s);s(h.y._()),this.G=()=>{h.x.U(i),h.y.U(e)}}}W(){return this.G&&(this.G(),this.G=void 0),this}Y(t){return this.L.on("cell-resize",t)}H(t){return this.L.off(t,"cell-resize")}}class gt extends h{constructor(){super(...arguments),this.X=0,this.$=10,this.j=1}Z(){return this.o=!1,this}J(){return this.o=!0,this}getInnerStart(){return this.X}getInnerEnd(){return this.$}getInnerInterval(){return Math.abs(this.getInnerEnd()-this.getInnerStart())}K(t,i){return this.X=t,this.$=i,this.q(),this}tt(t){return this.j=t,this.q(),this}it(t){return t/this.j}q(){const t=this.it(this.$-this.X),i=this.j;void 0!==this.st&&!1!==Qt(t,this.st)||(this.o=!0,this.et=i,this.st=t)}ht(){return this.st}rt(){return this.et}nt(){return this.$<this.X}ot(t,i){return!0}}const yt={d1:t=>new t.scale1DConstructor(0,1,1,void 0),d2:t=>(new t.scaleXYConstructor).ut({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0),d3:()=>new At({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0)},mt=(t,i,s)=>i===s?t:s.ct(i.dt(t)),pt=(t,i,s)=>{if(i===s)return t;const e=i instanceof se?i.x:i.x instanceof se?i.x.x:i.x.ft,h=i instanceof se?i.y:i.y instanceof se?i.y.y:i.y.ft,r=s instanceof se?s.x:s.x instanceof se?s.x.x:s.x.ft,n=s instanceof se?s.y:s.y instanceof se?s.y.y:s.y.ft;return{...t,x:mt(t.x,e,r),y:mt(t.y,h,n)}},vt=(t,i,s)=>{const e=t(i,s);return t=>new W({color:e(t)})},St=(t,i,s)=>{const e=t(i+1,s);return t=>new nt({stops:[{offset:0,color:e(t)},{offset:1,color:e(t).getDarker()}]})},bt=(t,i,s,e)=>{const h=t(i+1,e);return t=>new lt({stops:[{offset:0,color:h(t).getDarker()},{offset:.5,color:h(t)},{offset:1,color:h(t).getDarker()}],angle:s||90})},xt=(...t)=>{if(0===t.length)return{remove:Zt};let i=!1;const s=t.map((s=>s.onIntervalChange(((e,h,r)=>((s,e,h)=>{i||(i=!0,t.filter((t=>t!==s)).forEach((t=>t.At(e,h,!1,s.getStopped(),"synchronizedAxis"))),i=!1)})(s,h,r)))));let e=!1;const h=t.map((i=>i.onStoppedStateChanged(((s,h)=>((i,s)=>{e||(e=!0,t.filter((t=>t!==i)).forEach((t=>t.setStopped(s))),e=!1)})(i,h)))));return{remove:()=>{t.forEach(((t,i)=>{t.offIntervalChange(s[i]),t.offStoppedStateChanged(h[i])}))}}},Mt=(t,i,s,e)=>{if(!s||0===s.length)throw new Error("Invalid use regularColorSteps 'colorPalette' is undefined or empty");const h=null==e?void 0:e.formatLabels,r=null==e?void 0:e.alpha;return s.map(((e,n)=>{const o=t+n/(s.length-1)*(i-t);return{color:void 0!==r?e.setA(r):e,value:o,label:h?h(o):void 0}}))},_t=t=>t&&"object"==typeof t&&"column"in t&&"row"in t,wt=t=>t&&"object"==typeof t&&"z"in t&&"column"in t&&"row"in t,Ct=t=>t&&"object"==typeof t&&"position"in t&&"open"in t&&"high"in t&&"isPacked"in t,kt=t=>t&&"object"==typeof t&&"annulus"in t&&"sector"in t,Tt=t=>t&&"object"==typeof t&&"index"in t,Ft=t=>t&&"object"==typeof t&&"xSize"in t&&"ySize"in t&&"zSize"in t,It=t=>t&&"object"==typeof t&&"figure"in t&&"x1"in t&&"y2"in t&&"height"in t,Pt=t=>t&&"object"==typeof t&&"figure"in t&&"start"in t&&"end"in t&&"median"in t&&"upperQuartile"in t,Dt=t=>t&&"object"==typeof t&&"figure"in t&&"x"in t&&"radiusX"in t&&"radiusY"in t,Bt=t=>t&&"object"==typeof t&&"figure"in t&&"x"in t&&"coordinates"in t,Lt=t=>t&&"object"==typeof t&&"figure"in t&&"startX"in t&&"endX"in t,Rt=t=>t&&"object"==typeof t&&"x"in t&&"y"in t;class Et extends Error{constructor(t,i){super(`ChartError: ${t} ${i?`in ${i.constructor.name}`:""}`),Object.setPrototypeOf(this,Et.prototype)}}class zt extends Error{constructor(t,i,s=!1){const e=`EngineError: ${t} ${i?`in ${i.constructor.name}`:""}`;super(e),s&&Yt.alert(e),Object.setPrototypeOf(this,zt.prototype)}}class Vt extends zt{constructor(t){super(t),Object.setPrototypeOf(this,Vt.prototype)}}var Ot,Nt,Gt,Ut;!function(t){t[t.Content=0]="Content",t[t.PaddedContent=1]="PaddedContent",t[t.PaddedBackground=2]="PaddedBackground",t[t.Everything=3]="Everything"}(Ot||(Ot={})),function(t){t[t.never=0]="never",t[t.always=1]="always",t[t.whenHovered=2]="whenHovered",t[t.whenDragged=3]="whenDragged",t[t.whenNotDragged=4]="whenNotDragged",t[t.whenHoveredOrDragged=5]="whenHoveredOrDragged"}(Nt||(Nt={})),function(t){t[t.notDraggable=0]="notDraggable",t[t.draggable=1]="draggable",t[t.onlyHorizontal=2]="onlyHorizontal",t[t.onlyVertical=3]="onlyVertical"}(Gt||(Gt={})),function(t){t[t.Up=0]="Up",t[t.Right=1]="Right",t[t.Down=2]="Down",t[t.Left=3]="Left"}(Ut||(Ut={}));const Wt=t=>{if(t.resourcesBaseUrl){const i=t.styleFactory(t.resourcesBaseUrl),s=st(i)&&i.getSource(),e=s&&s instanceof Image?s:void 0;return null==e||e.addEventListener("error",(()=>{$i(t.resourcesBaseUrl,e.src,"Theme resource",{shouldCrash:!1})})),i}const i=`${Yt.location.origin}/resources`,s=t.styleFactory(i);if(st(s)){const i=s.getSource();i instanceof Image&&i.addEventListener("error",(()=>{const s=t.styleFactory("https://lcjs-resources.lightningchart.com/v1"),e=st(s)&&s.getSource(),h=e&&e instanceof Image?e:void 0;Yt.console.warn("LightningChart JS warning | fallbacking to publicly hosted asset resources.\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/warning-using-publicly-hosted-resources/"),null==h||h.addEventListener("load",(()=>{t.apply(s)})),null==h||h.addEventListener("error",(()=>{$i(t.resourcesBaseUrl,i.src,"Theme resource",{shouldCrash:!1})}))}))}return s},Yt="undefined"!=typeof window?window:"undefined"!=typeof global&&global._lcjs?global._lcjs:{},Ht=(t,i)=>t.x===i.x&&t.y===i.y,Xt=t=>t!==es&&t!==hs&&!Number.isNaN(t)&&Number.isFinite(t)&&t!==1/0&&t!==-1/0,$t=t=>t[1],jt=t=>t.dispose(),Zt=()=>{},Qt=(t,i)=>t===i,Jt=(t,i,s)=>s>i?Math.min(Math.max(t,i),s):Math.min(Math.max(t,s),i),Kt=t=>Array.prototype.concat.apply([],t),qt=(t,i)=>void 0===t||Number.isNaN(t)?i:t,ti=t=>t.yt(),ii=t=>t.vt(),si=t=>t.St(),ei=t=>t.bt(),hi=t=>t.min.x,ri=t=>t.max.x,ni=t=>t.min.y,oi=t=>t.max.y,ai=(t,i,s,e,h)=>{if(t.length>0){let r=h?e(h):void 0;for(let e=0;e<t.length;e+=1){const h=i(t[e]);void 0!==h&&(r=void 0!==r?s(r,h):h)}return r}if(h)return e(h)},li=(t,i)=>t.position===i.position&&t.high===i.high&&t.low===i.low,ui=n(0,1),ci=n(1,0),di=n(0,-1),fi=n(-1,0),Ai=n(0,0),gi=t=>{switch(t){case Ut.Up:return ui;case Ut.Right:return ci;case Ut.Down:return di;case Ut.Left:return fi;default:return Ai}},yi=t=>t===Ut.Left||t===Ut.Right,mi=t=>{t.stopPropagation(),t.preventDefault()},pi=(t,i)=>{if(!i)return t;const s=t.length,e=new Float32Array(2*s);let h=0;for(let i=0;i<s;i+=1){const s=t[i],r=Math.fround(s);e[h+0]=r,e[h+1]=s-r,h+=2}return e},vi=(t,i,s=Float32Array)=>{if(!i){const i=t.length,e=new s(2*i);let h=0;for(let s=0;s<i;s+=1){const i=t[s];e[h+0]=i.x,e[h+1]=i.y,h+=2}return e}const e=t.length,h=new s(4*e);let r=0;for(let i=0;i<e;i+=1){const s=t[i],e=Math.fround(s.x),n=Math.fround(s.y);h[r+0]=e,h[r+1]=n,h[r+2]=s.x-e,h[r+3]=s.y-n,r+=4}return h},Si=t=>{const i=t.length,s=new Float32Array(3*i);let e=0;for(let h=0;h<i;h+=1){const i=t[h];s[e+0]=i.x,s[e+1]=i.y,s[e+2]=i.z,e+=3}return s},bi=t=>i=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)},xi=t=>{let i=t.length;for(let s=0;s<i-1;s+=1)t[s].x===t[s+1].x&&t[s].y===t[s+1].y&&(t.splice(s,1),s-=1,i-=1);return t},Mi=t=>{const i=Math.log(t);return t=>Math.log(t)/i},_i=Mi(Math.E),wi=(t,i)=>{const s=i[t];return s?s():void 0},Ci=(t,i)=>{let s;if(i)s=i;else{const i={x:0,y:0};for(let s=0;s<t.length;s+=1)i.x+=t[s].x/t.length,i.y+=t[s].y/t.length;s=i}return t.sort(((t,i)=>Os(Ps(t,s))-Os(Ps(i,s))))},ki=(t,i,s)=>{if(0===t.length)return!1===s.canReturnB?i.slice():i;const e=i.length;if(e<1e5)return t.push.apply(t,i),t;for(let s=0;s<e;s+=1)t.push(i[s]);return t},Ti=(t,i,s)=>s<0?t:s>1?i:S(t.getR()+s*(i.getR()-t.getR()),t.getG()+s*(i.getG()-t.getG()),t.getB()+s*(i.getB()-t.getB()),t.getA()+s*(i.getA()-t.getA())),Fi=t=>255===t.getA()?t:t.setA(255),Ii=(()=>{const t=S(0,0,0);return i=>(i=Fi(i),new nt({shape:et.circle,extent:ht.farthestCorner,position:{x:.2,y:.8},stops:[{offset:0,color:i},{offset:1,color:Ti(i,t,.5)}]}))})(),Pi=(()=>{const t=t=>{var i;if(t){if(Y(t)){if(0===t.getColor().getA())return;return t.getColor()}if(ot(t)||ut(t)){const s=t.getColorStops();return 3===s.length?s[1].color:null===(i=s[0])||void 0===i?void 0:i.color}Z(t)}};return(i,s,e,h)=>{var r;const n=[];if(h.fill&&n.push(h.fill),h.fill2&&n.push(h.fill2),h.stroke){const t=h.stroke.getFillStyle();t!==O&&("stroke"===(null===(r=h.behavior)||void 0===r?void 0:r.priority)?n.unshift(t):n.push(t))}if(h.point3D){const t=h.point3D;n.push(t.getFillStyle())}let o;if(h.behavior&&!0===h.behavior.colorStep){const[i,e]=n.reduce(((i,s)=>{if(i[0]&&i[1])return i;const e=t(s);return e&&(void 0===i[0]?i[0]=e:i[1]=e),i}),[void 0,void 0]);o=i&&e?(a=i)===(l=e)||a.getR()===l.getR()&&a.getG()===l.getG()&&a.getB()===l.getB()?Ii(a):(a=Fi(a),l=Fi(l),new lt({angle:0,stops:[{offset:0,color:l},{offset:.5,color:l},{offset:.5,color:a},{offset:1,color:a}]})):s.uiButtonFillStyle}else{const i=n.reduce(((i,s)=>i||t(s)),void 0);o=i?e?new W({color:i}):Ii(i):s.uiButtonFillStyle}var a,l;i.setButtonOnFillStyle(o)}})(),Di=t=>{const i=t;if(Z(i))return{lut:i.getPalette(),lookUpProperty:i.getLookUpProperty()}},Bi=t=>{let i=0;return()=>(i+=1,`${t}-${i}`)},Li=(t,i)=>{let s="string"==typeof t?t:String(t);const e=s.indexOf(".");let h=e>=0?e:s.length;for(;h<i;h+=1)s=`0${s}`;return s},Ri=(t,i)=>"function"==typeof t?t(i):t,Ei=t=>t.ctrlKey?Math.sign(t.deltaY)*Math.min(.05*Math.abs(t.deltaY),1):Math.sign(t.deltaY),zi=(t,i)=>i(),Vi=()=>new Error("LightningChart JS encountered an unexpected error.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact");new W({color:S(255,255,255,1)});const Oi=t=>t===rs||t.min.x===rs.min.x&&t.max.x===rs.max.x&&t.min.y===rs.min.y&&t.max.y===rs.max.y,Ni=t=>Array.from(new Set(t)),Gi=t=>t.filter((t=>void 0!==t)),Ui=t=>"boolean"==typeof t?t?1:0:t>1?1:t<0?0:t,Wi=(t,i,s)=>{i.length<=0||(t.setText(s.label).setOn(i[0].getVisible()),s.style&&t.setButtonOnFillStyle(s.style),s.toggleVisibilityOnClick&&t.onSwitch(((t,s)=>i.forEach((t=>t.setVisible(s))))),t.onMouseEnter((()=>i.forEach((t=>t.setHighlight(!0))))),t.onMouseLeave((()=>i.forEach((t=>t.setHighlight(!1))))),i.forEach((i=>i.onMouseEnter((()=>t.setHighlight(!0))))),i.forEach((i=>i.onMouseLeave((()=>t.setHighlight(!1))))),i.forEach((i=>i.onTouchStart((()=>t.setHighlight(!0))))),i.forEach((i=>i.onTouchEnd((()=>t.setHighlight(!1))))))},Yi=(t,i)=>{throw new Error(i)},Hi=t=>{let i;return()=>i||(i=t(),i)},Xi=t=>{if(t===dt)return 0;const i=t.getThickness();return i<0?1:1*i},$i=(t,i,s,e)=>{const h=`LightningChart JS Resources not found.\nresourcesBaseUrl: "${t}"\ninitiator: ${s}\nresource url: ${i}\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/error-resources-not-found/`;if(e.shouldCrash)throw Yt.alert(h),new Error(h);Yt.console.warn(h)},ji=(t,i,s,e=0)=>{if(t<s(e)||s(i)<t)return;const h=i;for(;e!==i;){const h=Math.ceil((e+i)/2);t<s(h)?i=h-1:e=h}const r=Math.abs(t-s(e));return e<h&&Math.abs(t-s(e+1))<r?e+1:e},Zi=()=>{const t=new Map;return{xt:i=>(i.setMouseEnterEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Mt(i,s,e,h)})),i.setMouseLeaveEventHandler(((i,s,e)=>{const h=e&&t.get(e);h&&h._t(i,s,e)})),i.setMouseClickEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.wt(i,s,e,h)})),i.setMouseDoubleClickEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Ct(i,s,e,h)})),i.setMouseDownEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.kt(i,s,e,h)})),i.setMouseUpEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Tt(i,s,e,h)})),i.setMouseMoveEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Ft(i,s,e,h)})),i.setMouseDragEventHandler(((i,s,e,h,r,n,o)=>{const a=n&&t.get(n);a&&a.It(i,s,e,h,r,n,o)})),i.setMouseDragStartEventHandler(((i,s,e,h,r)=>{const n=h&&t.get(h);n&&n.Pt(i,s,e,h,r)})),i.setMouseDragStopEventHandler(((i,s,e,h,r,n)=>{const o=r&&t.get(r);o&&o.Dt(i,s,e,h,r,n)})),i.setMouseWheelEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Bt(i,s,e,h)})),i.setTouchStartEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Lt(i,s,e,h)})),i.setTouchMoveEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Rt(i,s,e,h)})),i.setTouchEndEventHandler(((i,s,e,h)=>{const r=e&&t.get(e);r&&r.Et(i,s,e,h)})),i),zt:(i,s)=>{t.set(i,s)},Vt:()=>{t.clear()}}},Qi={left:0,right:0,top:0,bottom:0},Ji=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER),Ki=(t,i,s)=>{i&&i.Ot();const e=s();return{Nt:t,Ot:()=>{e.forEach((i=>t.Gt(i)))}}},qi=(t,i,s)=>{let e;const h=()=>(e=s(),e),r={...t,resolve:()=>e||h()};for(const t of Object.keys(i))Object.defineProperty(r,t,{get:function(){return e?e[t]:h()[t]}});return r},ts=t=>{if(t)return"resolve"in t?t.resolve():t},is=t=>{let i=t;return{Ut:t=>{const s=i;return i=s+t,[s,t]}}},ss={add:(t,i)=>l(t.x+i,t.y+i,t.z+i),addVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x+=t.x,s.y+=t.y,s.z+=t.z;return s},subtract:(t,i)=>l(t.x-i,t.y-i,t.z-i),subtractVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x-=t.x,s.y-=t.y,s.z-=t.z;return s},multiply:(t,i)=>l(t.x*i,t.y*i,t.z*i),divide:(t,i)=>l(t.x/i,t.y/i,t.z/i),multiplyVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x*=t.x,s.y*=t.y,s.z*=t.z;return s},divideVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x/=t.x,s.y/=t.y,s.z/=t.z;return s},length:t=>Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),normalize:t=>ss.divide(t,ss.length(t)),dot:(t,i)=>t.x*i.x+t.y*i.y+t.z*i.z,cross:(t,i)=>l(t.y*i.z-t.z*i.y,t.z*i.x-t.x*i.z,t.x*i.y-t.y*i.x),angle:(t,i)=>Math.acos(ss.dot(t,i)/(ss.length(t)*ss.length(i))),rotateAroundAxis(t,i,s){const e=Math.cos(s),h=Math.sin(s),r=ss.dot(i,t),n=ss.cross(i,t);return ss.addVec(ss.multiply(t,e),ss.addVec(ss.multiply(i,(1-e)*r),ss.multiply(n,h)))},lerp:(t,i,s)=>(s=Jt(s,0,1),ss.addVec(ss.multiply(t,1-s),ss.multiply(i,s))),equals:(t,i)=>Qt(t.x,i.x)&&Qt(t.y,i.y)&&Qt(t.z,i.z),abs:t=>({x:Math.abs(t.x),y:Math.abs(t.y),z:Math.abs(t.z)}),sign:t=>({x:Math.sign(t.x),y:Math.sign(t.y),z:Math.sign(t.z)})},es=Number.MAX_SAFE_INTEGER,hs=-Number.MAX_SAFE_INTEGER,rs=c(n(es,es),n(hs,hs)),ns=c(l(es,es,es),l(hs,hs,hs)),os=(t,i)=>{const s=Math.log(t)/Math.log(i);return Math.floor((t=>(Math.ceil(t)-t<1e-4?t=Math.ceil(t):t-Math.floor(t)<1e-4&&(t=Math.floor(t)),t))(s))},as=(t,i)=>!(i.min.x>t.max.x||i.max.x<t.min.x||i.min.y>t.max.y||i.max.y<t.min.y),ls=(t,i)=>!(t[1].x<i[0].x||t[0].x>i[1].x||t[3].y<i[0].y||t[0].y>i[3].y),us=(t,i)=>({min:{x:Math.min(t[0].x,i[0].x),y:Math.min(t[0].y,i[0].y)},max:{x:Math.max(t[2].x,i[2].x),y:Math.max(t[2].y,i[2].y)}}),cs=t=>{const i=t.length;for(let s=0;s<i;s+=1)for(let e=s+1;e<i;e+=1)if(as(t[s],t[e]))return!0;return!1},ds=(t,i)=>i+t,fs=(t,i,s)=>{const e=Ps(i,t),h=e.x*e.x+e.y*e.y;if(0===h)return t;const r=Ps(s,t),o=(r.x*e.x+r.y*e.y)/h;return o<=0?t:o>=1?i:n(t.x+o*e.x,t.y+o*e.y)},As=(t,i,s)=>s>i?t>=i&&t<=s:t>=s&&t<=i,gs=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)},ys=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return s*s+e*e},ms=(t,i,s)=>Is(t,Fs(Ps(i,t),s)),ps=(t,i,s)=>ss.addVec(t,ss.multiply(ss.subtractVec(i,t),s));function vs(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,h=t[0].y,r=t[0].y;for(let n=0;n<i;n+=1){const i=t[n];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>h&&(h=i.y),i.y<r&&(r=i.y)}return c(n(e,r),n(s,h))}return rs}function Ss(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,h=t[0].y,r=t[0].y,n=t[0].z,o=t[0].z;for(let a=0;a<i;a+=1){const i=t[a];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>h&&(h=i.y),i.y<r&&(r=i.y),i.z>n&&(n=i.z),i.z<o&&(o=i.z)}return c(l(e,r,o),l(s,h,n))}return ns}const bs=(...t)=>{const i={min:{x:es,y:es},max:{x:hs,y:hs}};for(const s of t)i.min.x=i.min.x<s.min.x?i.min.x:s.min.x,i.max.x=i.max.x>s.max.x?i.max.x:s.max.x,i.min.y=i.min.y<s.min.y?i.min.y:s.min.y,i.max.y=i.max.y>s.max.y?i.max.y:s.max.y;return i},xs=(t,i)=>c(l(t.min.x<i.min.x?t.min.x:i.min.x,t.min.y<i.min.y?t.min.y:i.min.y,t.min.z<i.min.z?t.min.z:i.min.z),l(t.max.x>i.max.x?t.max.x:i.max.x,t.max.y>i.max.y?t.max.y:i.max.y,t.max.z>i.max.z?t.max.z:i.max.z));function Ms(t,i,s,e){const h=t.x-e.x,r=t.y-e.y,n=e.x-s.x,o=s.y-e.y,a=o*h+n*r,l=(e.y-i.y)*h+(i.x-e.x)*r,u=o*(i.x-e.x)+n*(i.y-e.y);return u<0?a<=0&&l<=0&&a+l>=u:a>=0&&l>=0&&a+l<=u}function _s(t,i,s){return n(Math.cos(s)*(t.x-i.x)+Math.sin(s)*(t.y-i.y)+i.x,-Math.sin(s)*(t.x-i.x)+Math.cos(s)*(t.y-i.y)+i.y)}function ws(t,i){return n(t.x-i.x,t.y-i.y)}function Cs(t){const i=Ts(t);return 0===i?n(0,0):n(t.x/i,t.y/i)}function ks(t,i){let s={x:i.x-t.x,y:i.y-t.y};s=Cs(s);const e=Math.PI/2,h=s.x;return s.x=-Math.sin(e)*s.y,s.y=h*Math.sin(e),s}function Ts(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function Fs(t,i){return n(t.x*i,t.y*i)}function Is(t,i){return n(t.x+i.x,t.y+i.y)}function Ps(t,i){return n(t.x-i.x,t.y-i.y)}function Ds(t,i){return n(t.x*i.x,t.y*i.y)}function Bs(t,i){return n(t.x/i.x,t.y/i.y)}function Ls(t){return Fs(t,-1)}function Rs(t,i){return t.x*i.x+t.y*i.y}const Es=(t,i,s)=>{const e=(s.y-i.y)/(s.x-i.x),h=i.y+(t-i.x)*e;return n(t,h)},zs=(t,i,s)=>{const e=(s.y-i.y)/(s.x-i.x),h=i.x+(t-i.y)/e;return n(h,t)};function Vs(t){return t*Math.PI/180}function Os(t){return 180*Math.atan2(t.y,t.x)/Math.PI}function Ns(t){return n(Math.cos(t),Math.sin(t))}const Gs=(t,i,s,e)=>{let h,r,o,a;if(i.x-t.x!=0||e.x-s.x!=0)return i.x-t.x==0?(o=i.x,r=(e.y-s.y)/(e.x-s.x),a=r*(o-s.x)+s.y):e.x-s.x==0?(o=e.x,h=(i.y-t.y)/(i.x-t.x),a=h*(o-t.x)+t.y):(h=(i.y-t.y)/(i.x-t.x),r=(e.y-s.y)/(e.x-s.x),o=(s.y-r*s.x+h*t.x-t.y)/(h-r),a=h*(o-t.x)+t.y),n(o,a)},Us=(t,i)=>{const s=t.length,e=i.length,h=new Uint16Array(s+e);return h.set(t,0),h.set(i,s),h};class Ws{constructor(){this.Wt=!0}getInnerStart(){return this.X}getInnerEnd(){return this.$}getInnerInterval(){return Math.abs(this.$-this.X)}K(t,i){return this.Wt=t!==this.X||i!==this.$,this.X=t,this.$=i,this}Z(){return this.Wt=!1,this}J(){return this.Wt=!0,this}}class Ys extends Ws{constructor(t,i,s,e){if(super(),this.Yt=!0,this.Ht=!0,this.Xt=[0,0],this.$t=!0,this.jt=t,this.Zt=i,this.Qt=s,this.Jt=t,this.Kt=i,e){const t=e.N(this.qt.bind(this));this.qt(e._()),this.ti=()=>e.U(t)}}tt(t){return this.j=t,this.Ht=!0,this}ii(t){return this.Xt=t.map(Math.abs),this.$t=!0,this}si(){return this.jt/this.Qt*this.j+this.Xt[0]}ei(){return(this.jt+this.Zt)/this.Qt*this.j-this.Xt[1]}hi(){return this.getCellSize()-this.ri()}ni(){return this.j}getCellSize(){return this.oi(this.j)}ri(){return this.Xt[0]+this.Xt[1]}ai(){return this.Xt}qt(t){this.Qt=t.reduce(ds,0),this.jt=t.reduce(((t,i,s)=>s>=this.Jt?t:t+i),0),this.Zt=t.reduce(((t,i,s)=>s>=this.Jt&&s<this.Jt+this.Kt?t+i:t),0),this.Yt=!0,this.li()}oi(t){return t*this.Zt/this.Qt}Z(){return super.Z(),this.Ht=!1,this.$t=!1,this.Yt=!1,this}J(){return super.J(),this.Ht=!0,this.$t=!0,this.Yt=!0,this}}class Hs extends Ys{constructor(t,i,s,e){super(t,i,s,e),this.ui={internal:10,function:Xs(10),number:10},this.j=1e3,this.K(1,1e3),this.ci=this.di()}ot(t,i,s,e,h){if(t===i)return!1;const r=Math.min(t,i)<js,n=Math.max(t,i)>Zs;return!r&&!n||!!h&&(i>t?{start:r?js:t,end:n?Zs:i}:{start:n?Zs:t,end:r?js:i})}dt(t){const i=this.si(),s=this.ei(),e=Math.max(t,js);return i+(this.ui.function(e)-this.ci.scaleStartLog)/this.ci.scaleIntervalLog*(s-i)}ct(t){const i=this.si(),s=(t-i)/(this.ei()-i),e=this.ci.scaleStartLog+s*this.ci.scaleIntervalLog;return this.ui.number**e}li(){this.ui&&this.di()}K(t,i){return super.K(t,i),this.ui&&this.di(),this}ii(t){return super.ii(t),this.ui&&this.di(),this}tt(t){return super.tt(t),this.ui&&this.di(),this}fi(t){return this.ui={internal:t,function:Xs(t),number:$s(t)},this}Ai(){return this.ui.internal}gi(t,i){const s=this.dt(t)+i;return this.ct(s)}yi(){return this.Ht||this.Wt||this.$t||this.Yt}di(){const t=this.ui.function(this.X),i=this.ui.function(this.$)-t,s=2*this.si()/this.j-1,e=2*this.ei()/this.j-1-s;return this.ci={scaleStartLog:t,scaleIntervalLog:i,viewportStart:s,viewportSize:e},this.ci}mi(){return this.ci}}const Xs=t=>"e"===t?_i:Mi(t),$s=t=>"e"===t?Math.E:t,js=.9*10**-20,Zs=1.1*10**25,Qs=[{prefix:"T",unit:10**12},{prefix:"B",unit:10**9},{prefix:"M",unit:1e6},{prefix:"K",unit:1e3}],Js=(t,i,s)=>{const e=Math.abs(s-i),h=Math.max(2-os(e,10),0);return t.toFixed(h)},Ks={Numeric:(t,i)=>Js(t,i.getInnerStart(),i.getInnerEnd()),NumericUnits:(t,i)=>{const s=Math.abs(i.getInnerEnd()-i.getInnerStart()),e=t<0;t=Math.abs(t);let h="",r="";if(s>=1e3&&t>1e3){let i="";for(const s of Qs){const e=Math.round(1e3*t/s.unit)/1e3;if(e>=1){i=e.toString(),r=s.prefix;break}}h=(e?"-":"")+i}else{let i=String(Math.floor(t));const r=os(t,1e3);for(let t=1;t<=r;t+=1){const s=i.length-(3*t+(t-1));i=`${i.substring(0,s)} ${i.substring(s,i.length)}`}h=(e?"-":"")+i+(s<=10?((t,i)=>{if(0===i)return"";let s=(Math.abs(t)-Math.abs(Math.floor(t))).toString().substring(1);return s.length>i&&(s=s.substring(0,i+1)),s})(t,2-os(s,10)):"")}return h+=r,h},LogarithmicExponentsRounded:(t,i,s,e=10)=>{const h=Xs(e)(t);return`${e}${qs(h)}`},LogarithmicExponents:(t,i,s,e=10)=>{const h=Xs(e),r=Math.floor(h(t)),n=t/$s(e)**r;return`${Math.round(n)}×${e}${qs(r)}`},LogarithmicExtreme:(t,i,s,e=10)=>{const h=Xs(e),r=Math.floor(h(t));return`${(t/$s(e)**r).toFixed(2)}×${e}${qs(r)}`},LogarithmicNoExponents:(t,i,s,e=10)=>{const h=Xs(e);if("e"===e)return`${Math.floor(h(t))}e`;const r=t.toString();if(t>1)return r;const n=Math.floor(h(t));return t.toFixed(Math.abs(n))},Scientific:(t,i)=>{const s=Math.max(Math.abs(i.getInnerStart()),Math.abs(i.getInnerEnd())),e=Math.floor(Math.log10(s));return 0===t?`0.00e${e<0?"":"+"}${e}`:t.toExponential(2)}},qs=t=>Math.round(t).toString().split("").map((t=>{switch(t){case"0":return"⁰";case"1":return"¹";case"2":return"²";case"3":return"³";case"4":return"⁴";case"5":return"⁵";case"6":return"⁶";case"7":return"⁷";case"8":return"⁸";case"9":return"⁹";case"-":return"⁻";default:return t}})).join("");class te extends Ys{constructor(t,i,s,e){super(t,i,s,e),this.pi=!1,this.vi=!1,this.Si=0,this.j=1e3,this.K(0,10),this.q()}yi(){return this.vi}ot(t,i,s,e,h){if(t===i)return!1;const r=Math.abs(e-s),n=Math.abs(i-t);if(!this.pi){const s=((t,i,s)=>{const e=((t,i)=>{if(i<es&&i>hs&&t<es&&t>hs){const s=Math.abs(t/2**23),e=Math.abs(i/2**23),h=Math.min(s,e);return 10**Math.floor(Math.log10(h))}})(t,i);if(void 0!==e)return e*s})(t,i,this.getCellSize());if(void 0===s)return!1;if(n>s)return!0;const e=(i+t)/2,o=(h?s/2:r/2)*(t>i?-1:1);return{start:e-o,end:e+o}}const o=10**-(12-Math.log10(Math.max(Math.abs(t),1)));if(n>o)return!0;const a=(i+t)/2,l=(h?o/2:r/2)*(t>i?-1:1);return{start:a-l,end:a+l}}li(){this.q()}dt(t){return this.si()+(t-this.X)/(this.$-this.X)*(this.ei()-this.si())}ct(t){return this.X+(t-this.si())/(this.ei()-this.si())*(this.$-this.X)}K(t,i){return super.K(t,i),this.q(),this}ii(t){return super.ii(t),this.q(),this}tt(t){return super.tt(t),this.bi=ie(this.$-this.X,this.Xt,this.j,this.Zt,this.Qt),this.q(),this}xi(){return this.pi=!0,this}Mi(){return this.pi}_i(){return Math.abs(this.wi)}Ci(){return this._i()/this.bi}ki(){return this.Ti}Fi(){return this.Ii}getPixelSize(){return this.bi}mi(){return this.ci}J(){return super.J(),this.vi=!0,this}Z(){return super.Z(),this.vi=!1,this}Pi(t,i=Ks.Numeric){return i(t,this)}Di(){const t=Math.abs(this.getInnerEnd()).toString().length,i=Math.abs(this.getInnerStart()).toString().length;return t>i?t:i}Bi(t){return ie(t,this.Xt,this.j,this.Zt,this.Qt)}q(){let t=this.X,i=this.$,s=0;this.pi&&(t=0,i=this.$-this.X,s=this.X);const e=i-t,h=ie(e,this.Xt,this.j,this.Zt,this.Qt);this.Ii=t-this.Xt[0]*h,this.Ti=i+this.Xt[1]*h;const r=this.Ti-this.Ii,n=r-this.wi,o=Math.abs(n/h),a=e-this.Si,l=Math.abs(a/h);(!this.ci||o>=.4||l>=.4)&&(this.Si=e,this.wi=r,this.bi=h,this.vi=!0);const u=this.wi*this.Qt/(2*this.Zt),c=-(this.Ii-this.wi*this.jt/this.Zt)-u,d=2*this.si()/this.j-1,f=2*this.ei()/this.j-1-d;this.ci={displacement:c,scaling:u,highPrecisionOffset:s,viewportStart:d,viewportSize:f,scaleStartLog:0,scaleIntervalLog:0}}gi(t,i){return t+this.bi*i}}const ie=(t,i,s,e=1,h=1)=>t/(s*e/h-(i[0]+i[1]));class se{Li(t,i){return"x"in t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=i),this}Z(){return this.x.Z(),this.y.Z(),this}J(){return this.x.J(),this.y.J(),this}tt(t,i){return"object"==typeof t?(this.x.tt(t.x),this.y.tt(t.y)):(this.x.tt(t),this.y.tt(i)),this}ni(){return n(this.x.ni(),this.y.ni())}Ri(t){return this.x.ii(t),this}Ei(t){return this.y.ii(t),this}ri(){return n(this.x.ri(),this.y.ri())}zi(t,i){return this.x.K(t,i),this}Vi(t,i){return this.y.K(t,i),this}getInnerIntervalPixels(){const t=this.x.getCellSize(),i=this.y.getCellSize();return{x:t-this.x.ri(),y:i-this.y.ri()}}Oi(){return this.x.yi()||this.y.yi()}}class ee extends se{constructor(){super(...arguments),this.Ni="LinearScaleXY"}ut(t,i,s,e){return this.x=new te(t.x,i.x,s.x,e?e.x:void 0),this.y=new te(t.y,i.y,s.y,e?e.y:void 0),this}Mi(){return this.x.Mi()||this.y.Mi()}Gi(){return n(this.x.getPixelSize(),this.y.getPixelSize())}mi(){return{x:this.x.mi(),y:this.y.mi()}}gi(t,i){const s=this.Gi();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}Ui(t,i,s,e){const h=this.Gi(),r=ks(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class he extends se{constructor(){super(...arguments),this.Ni="MixedScaleXY"}Mi(){return!1}gi(t,i){const s=this.x.dt(t.x),e=this.y.dt(t.y),h={x:s+i.x,y:e+i.y};return{x:this.x.ct(h.x),y:this.y.ct(h.y)}}Ui(t,i,s,e){const h={x:this.x.dt(t.x),y:this.y.dt(t.y)},r={x:this.x.dt(i.x),y:this.y.dt(i.y)},n=Cs(Ps(r,h)),o=ks(r,h),a={x:h.x+n.x*e+o.x*s,y:h.y+n.y*e+o.y*s};return{x:this.x.ct(a.x),y:this.y.ct(a.y)}}mi(){const t=this.x.mi(),i=this.y.mi();return{uScaleStart:[this.x.X,this.y.X],uScaleInterval:[this.x.getInnerInterval(),this.y.getInnerInterval()],uScaleStartLog:[t.scaleStartLog,i.scaleStartLog],uScaleIntervalLog:[t.scaleIntervalLog,i.scaleIntervalLog],uViewportStart:[t.viewportStart,i.viewportStart],uViewportSize:[t.viewportSize,i.viewportSize]}}}const re=(t,i)=>t instanceof Hs||i instanceof Hs?(new he).Li(t,i):(new ee).Li(t,i),ne=t=>"client"===t,oe=t=>!!(t&&"object"==typeof t&&"clientX"in t&&"number"==typeof t.clientX&&"clientY"in t&&"number"==typeof t.clientY),ae=t=>"relative"===t,le=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y),ue=(t,i,s)=>{if(t){const t={x:s.x.si(),y:s.y.si(),width:s.x.hi(),height:s.y.hi()};i.forEach((i=>{i.Wi=t}))}else i.forEach((t=>{t.Wi=void 0}))},ce=(t,i)=>{var s;return i?"string"==typeof i?`${t} ${i}`:!1!==(null===(s=i.Yi)||void 0===s?void 0:s.displayInCursor)&&i.getUnits()?`${t} ${i.getUnits()}`:t:t},de=t=>{let i=!1,s={type:"linear"};if(t&&(void 0!==t.opposite&&(i=t.opposite),t.type&&"linear-highPrecision"===t.type&&(s={type:"linear-highPrecision"}),t.type&&"logarithmic"===t.type)){let i=10;if(t.base)if("E"===t.base||"e"===t.base||"natural"===t.base)i="e";else if("number"==typeof t.base)i=t.base;else if("string"==typeof t.base)try{i=Number(t.base)}catch(i){console.warn(`Unidentified logarithmic base "${t.base}"`)}s={base:i,type:"logarithmic"}}return{opposite:i,type:s}},fe=(t,i,s,e=1)=>Jt(t+.1*e*(i-t)+.5*e*s.getPixelSize()*Math.sign(i-t),t,i),Ae=(t,i,s,e=1)=>{const h=s.dt(t),r=s.dt(i);return Jt(s.ct(h+.1*e*(r-h)+.5*e*Math.sign(r-h)),t,i)};var ge;!function(t){t[t.noHighlighting=0]="noHighlighting",t[t.onHover=1]="onHover"}(ge||(ge={}));class ye{constructor(t,i,e,h){this.Hi=!0,this.Xi=ge.onHover,this.$i=!1,this.ji=!0,this.L=new s,this.Zi=[],this.Qi=[],this.onMouseEnter=t=>this.L.on("mouseEnter",t),this.onMouseLeave=t=>this.L.on("mouseLeave",t),this.onMouseClick=t=>this.L.on("mouseClick",t),this.onMouseDoubleClick=t=>this.L.on("mouseDoubleClick",t),this.onMouseDown=t=>this.L.on("mouseDown",t),this.onMouseUp=t=>this.L.on("mouseUp",t),this.onMouseMove=t=>this.L.on("mouseMove",t),this.offMouseEnter=t=>this.L.off(t,"mouseEnter"),this.offMouseLeave=t=>this.L.off(t,"mouseLeave"),this.offMouseClick=t=>this.L.off(t,"mouseClick"),this.offMouseDoubleClick=t=>this.L.off(t,"mouseDoubleClick"),this.offMouseDown=t=>this.L.off(t,"mouseDown"),this.offMouseUp=t=>this.L.off(t,"mouseUp"),this.offMouseMove=t=>this.L.off(t,"mouseMove"),this.offMouseDragStart=t=>this.L.off(t,"mouseDragStart"),this.offMouseDrag=t=>this.L.off(t,"mouseDrag"),this.offMouseDragStop=t=>this.L.off(t,"mouseDragStop"),this.offMouseWheel=t=>this.L.off(t,"mouseWheel"),this.Mt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseEnter",this,i,h),this.Xi===ge.onHover&&this.setHighlight(!0)},this._t=(t,i,s)=>{this.L.emit("mouseLeave",this,i,void 0),this.Xi===ge.onHover&&this.setHighlight(!1)},this.Ft=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseMove",this,i,h)},this.wt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseClick",this,i,h)},this.Ct=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseDoubleClick",this,i,h)},this.kt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseDown",this,i,h)},this.Tt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseUp",this,i,h)},this.Pt=(t,i,s,e,h)=>{const r=this.Ji(h,i);this.L.emit("mouseDragStart",this,i,s,r)},this.It=(t,i,s,e,h,r,n)=>{const o=this.Ji(n,i);this.L.emit("mouseDrag",this,i,s,e,h,o)},this.Dt=(t,i,s,e,h,r)=>{const n=this.Ji(r,i);this.L.emit("mouseDragStop",this,i,s,e,n)},this.Bt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("mouseWheel",this,i,h)},this.Lt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("touchStart",this,i,h),this.Xi===ge.onHover&&this.setHighlight(!0)},this.Rt=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("touchMove",this,i,h)},this.Et=(t,i,s,e)=>{const h=this.Ji(e,i);this.L.emit("touchEnd",this,i,h),this.Xi===ge.onHover&&this.setHighlight(!1)},this.chart=t,this.Ki=i,this.qi=e,this.ts=new Map,this.ss=h,this.es=this.ss.hs(this,{rs:{themeEffectEnabled:this.qi.effectsText},ns:{}}),this.chart.us.ls.os(this,(t=>{this.ts.forEach(((i,s)=>s.cs(t))),this.Qi.forEach((i=>i.setHighlight(t))),this.Zi.forEach((i=>i.cs(t)))}),{animationEnabled:this.chart.getAnimationsEnabled()})}ds(){}fs(t,i){const s=void 0===(null==i?void 0:i.setEventHandlers)||i.setEventHandlers,e=void 0!==(null==i?void 0:i.isText)&&i.isText;this.ts.set(t,{isText:e});const h=Array.from(this.ts);this.es.rs.As(h.filter((t=>t[1].isText)).map((t=>t[0]))),this.es.ns.As(h.filter((t=>!t[1].isText)).map((t=>t[0]))),t.setMouseInteractions(this.Hi).setVisible(this.ji).cs(this.chart.us.ls.gs(this,!0)),s&&t.setMouseEnterEventHandler(this.Mt).setMouseLeaveEventHandler(this._t).setMouseClickEventHandler(this.wt).setMouseDoubleClickEventHandler(this.Ct).setMouseDownEventHandler(this.kt).setMouseUpEventHandler(this.Tt).setMouseMoveEventHandler(this.Ft).setMouseDragStartEventHandler(this.Pt).setMouseDragEventHandler(this.It).setMouseDragStopEventHandler(this.Dt).setMouseWheelEventHandler(this.Bt).setTouchStartEventHandler(this.Lt).setTouchMoveEventHandler(this.Rt).setTouchEndEventHandler(this.Et);const r=t.onDispose((()=>{t.offDispose(r),this.ts.delete(t)}))}ys(t){this.Zi=t;const i=this.chart.us.ls.gs(this,!0);t.forEach((t=>{t.cs(i).ps(this.ji)}))}Ji(t,i){}vs(t){const i=this.chart.us.Ss(t);if(i&&Array.from(this.ts.keys()).includes(i.entity))return this.Ji(i.info,t)}setEffect(t){return this.es.rs.bs(t&&this.qi.effectsText),this.es.ns.bs(t),this.chart.us.xs(),this}getEffect(){return this.es.rs.Ms()||this.es.ns.Ms()}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}setIcon(t){return this._s=t,this.chart.us.xs(),this}getIcon(){return this._s}setName(t){return this.ws=t,this.Qi.forEach((i=>i.setText(t))),this}getName(){return this.ws||"Component"}dispose(){return this.$i||(this.$i=!0,this.ts.forEach(((t,i)=>i.dispose())),this.Ki(this),this.Qi.forEach((t=>{t.dispose()})),this.Qi.length=0,this.L.emit("dispose",this),this.chart.us.xs()),this}setVisible(t){return t===this.ji||(this.ji=t,this.ts.forEach(((i,s)=>s.setVisible(t))),this.Zi.forEach((i=>i.ps(t))),this.Qi.forEach((i=>i.setOn(t))),this.L.emit("visibleStateChanged",this,this.ji),this.chart.us.xs()),this}getVisible(){return this.ji}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}setHighlight(t){return this.chart.us.ls.Cs(this,t),this.L.emit("highlight",this,t),this}getHighlight(){return this.chart.us.ls.gs(this)}setAnimationHighlight(t){return this.chart.us.ls.ks(this,t),this}getAnimationHighlight(){return this.chart.us.ls.Ts(this)}setMouseInteractions(t){return this.Hi=t,this.ts.forEach(((i,s)=>s.setMouseInteractions(t))),this.chart.us.xs(),this}getMouseInteractions(){return this.Hi}getIsUnderMouse(){if(!this.chart.us.Fs())return!1;for(const t of this.ts)if(t[0].Is)return!0;for(const t of this.Zi)if(this.chart.us.Ps(t))return!0;return!1}setHighlightOnHover(t){return this.Xi=t?ge.onHover:ge.noHighlighting,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Xi!==ge.noHighlighting}attach(t,i=!0,s=!1){return this.styleLegendEntry(t,s),Wi(t,[this],{toggleVisibilityOnClick:i,label:this.getName(),style:void 0}),this.Qi.push(t),t.onDispose((()=>{const i=this.Qi.indexOf(t);i>=0&&this.Qi.splice(i,1)})),this}Ds(){return this._s}onMouseDragStart(t){return this.L.on("mouseDragStart",t)}onMouseDrag(t){return this.L.on("mouseDrag",t)}onMouseDragStop(t){return this.L.on("mouseDragStop",t)}onMouseWheel(t){return this.L.on("mouseWheel",t)}onTouchStart(t){return this.L.on("touchStart",t)}onTouchMove(t){return this.L.on("touchMove",t)}onTouchEnd(t){return this.L.on("touchEnd",t)}isDisposed(){return this.$i}onDispose(t){return this.L.on("dispose",t)}offTouchStart(t){return this.L.off(t,"touchStart")}offTouchMove(t){return this.L.off(t,"touchMove")}offTouchEnd(t){return this.L.off(t,"touchEnd")}offDispose(t){return this.L.off(t,"dispose")}}class me extends ye{constructor(t,i,s,e,h,r,n,o){super(i,s,n,o),this.Bs=!0,this.Ls=t,this.axis=e,this.ft=h,this.Rs=r,this.Es()}setClipping(t){return this.Bs=t,this.Ls.xs(),this}getClipping(){return this.Bs}}const pe=t=>{const i=t.length;if(i>0){let s=0,e=0;for(let h=0;h<i;h+=1)s+=t[h].x,e+=t[h].y;return n(s/i,e/i)}return n(0,0)},ve=(...t)=>{const i=t.length,s=new Array(i).fill(!1),e=(e,h)=>{for(let r=0;r<i;r+=1){const i=t[r],n=i.zs(e,h);n?i.Vs(e,h,!0):s[r]&&s[r]&&i.Vs(e,h,!1),s[r]=n}return!1};return{onTouchStart:e,onTouchMove:e,onTouchEnd:e}},Se=class{constructor(t,i=300){this.Os=!1,this.Ns=[],this.Gs=300,this.Us=t,this.Gs=i}zs(t,i){const s=Yt.performance.now();let e=!1;for(let t=0;t<this.Ns.length;t+=1)s-this.Ns[t].time>=this.Gs?(this.Ns.splice(t,1),t-=1):this.Ns[t].state&&(e=!0);return this.Os?0===i.interactions.length&&(this.Ns.push({state:!1,time:s}),this.Os=!1):1===i.interactions.length&&"pointerdown"===i.type&&(this.Ns.push({state:!0,time:s}),e=!0,this.Os=!0),e}Vs(t,i,s){if(s){const s=this.Ns.reduce(((t,i)=>(i.state?t.on+=1:t.off+=1,t)),{on:0,off:0});s.on>=2&&s.off>=1&&(this.Us(t,i),this.Ns.length=0)}}},be=class{constructor(t,i,s,e=1,h=100){this.Ws=t,this.Ys=i,this.Hs=s,this.Xs=e,this.$s=h}zs(t,i){const s=i.interactions.length;if(s===this.Xs){if(void 0!==this.js)return!0;if("pointerdown"===i.type&&(1===s||(t=>{const i=t.length;if(i>0){const s=pe(t);let e=0;for(let h=0;h<i;h+=1)e=Math.max(e,gs(s,n(t[h].x,t[h].y)));return e}return es})(i.interactions)<=this.$s))return this.js=pe(i.interactions),!0}return!1}Vs(t,i,s){const e=this.Zs;if(!s||i.forceTouchEnd||"pointerup"===i.type)this.Hs&&this.Hs(t,this.js,e,i),this.js=void 0,this.Zs=void 0;else{const s=pe(i.interactions);"pointerdown"===i.type?this.Ws&&this.Ws(t,this.js,i):"pointermove"===i.type&&this.Ys&&this.Ys(t,this.js,s,n(s.x-e.x,e.y-s.y),i),this.Zs=s}}},xe=class{constructor(t,i,s){this.Qs=!1,this.Ws=t,this.Ys=i,this.Hs=s}zs(t,i){return this.Qs?2!==i.interactions.length&&(this.Qs=!1):2===i.interactions.length&&"pointerdown"===i.type&&(this.Qs=!0),this.Qs}Vs(t,i,s){let e,h;if(s&&"pointerup"!==i.type){if("pointerdown"===i.type){const s=i.interactions;e=s[0],h=s[1],this.Ws(t,e,h,i)}else if("pointermove"===i.type){e=i.interactions[0],h=i.interactions[1];const s=this.Js,r=this.Ks,o=n(e.x-s.x,s.y-e.y),a=n(h.x-r.x,r.y-h.y);this.Ys(t,e,h,o,a,i)}}else{const s=i.interactions;this.Hs(t,s[0],s[1],i)}this.Js=e,this.Ks=h}},Me=i({type:"linestyle",lineType:"solid",fillStyle:new W({color:S(255,255,255)}),thickness:1});class _e extends Me{constructor(t){super({...t,lineType:"solid"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}O(){const t=this.getThickness();return t<0?1:t}}const we=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"solid"!==t.lineType);class Ce{constructor(t,i){this.qs=t,this.te=i,this.ie=i.rows*sh,this.se=i.columns*eh}}var ke,Te;!function(t){t[t.ZoomIn=0]="ZoomIn",t[t.ZoomInX=1]="ZoomInX",t[t.ZoomInY=2]="ZoomInY",t[t.ZoomOut=3]="ZoomOut",t[t.ZoomOutX=4]="ZoomOutX",t[t.ZoomOutY=5]="ZoomOutY",t[t.ZoomToFit=6]="ZoomToFit",t[t.ToggleAnimations=7]="ToggleAnimations"}(ke||(ke={})),function(t){t[t.Circle=0]="Circle",t[t.Rectangle=1]="Rectangle",t[t.RoundedRectangle=2]="RoundedRectangle"}(Te||(Te={}));const Fe={x:-43,y:0},Ie={x:-65,y:0},Pe={x:-86,y:0},De={x:-107,y:-1},Be={x:-128,y:-3},Le={x:-150,y:0},Re={x:-171,y:0},Ee={x:-276,y:0},ze={x:-298,y:0},Ve={x:0,y:0},Oe={x:-21,y:0};class Ne extends Ce{constructor(t,i,s,e){super(t,s),this.ee=Yt.document.createElement("button"),this.he=Yt.document.createElement("div"),this.re=Yt.document.createElement("label"),this.te=s,this.ne=i,this.oe=e}ae(t,i,s,e){this.le(t,e),this.ue(),this.ce(i),this.de(),this.re.textContent=s||"";const h=Yt.document.createElement("div");this.fe(h),this.ee.onclick=this.onClick.bind(this),h.appendChild(this.he),h.appendChild(this.re),this.ee.appendChild(h)}de(){this.ee.style.cursor="pointer"}fe(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignContent="center",t.style.flexDirection="column"}ce(t){"string"==typeof t?(this.he.style.backgroundImage=`url(${t})`,this.he.style.backgroundSize="100%",this.he.style.backgroundRepeat="no-repeat",this.he.style.backgroundPosition="center",this.he.style.width="20px",this.he.style.height="20px"):this.applyStyleForSprite(t),this.he.style.margin="auto"}ue(){switch(this.ne){case Te.RoundedRectangle:this.ee.style.borderRadius="10px";break;case Te.Rectangle:this.ee.style.borderRadius="0px";break;case Te.Circle:default:this.ee.style.borderRadius="31px"}}le(t,i){this.ee.style.width=`${this.se.toString()}px`,this.ee.style.height=`${this.ie.toString()}px`,this.ee.style.backgroundColor=t,this.ee.style.opacity=i||hh,this.ee.style.alignItems="center",this.ee.style.border="2px solid #707070",this.ee.style.transition="background-color .8s ease"}applyStyleForSprite(t){this.he.style.backgroundImage=`url(${this.qs}/${rh})`,this.he.style.backgroundPositionX=`${t.x}px`,this.he.style.backgroundPositionY=`${t.y}px`,this.he.style.backgroundSize="1600%",this.he.style.backgroundRepeat="no-repeat",this.he.style.width="20px",this.he.style.height="20px"}Ae(t){return t.appendChild(this.ee),t}ge(){return this.ee}}class Ge extends Ne{constructor(t,i,s,e){super(t,i,s,e),this.ye="",this.me="",this.pe=!1,this.oe=e}ve(){this.Se(),this.onToggledStateAction()}be(){this.xe(),this.onInitialStateAction()}xe(){this.Me(this.ye)}Se(){this.Me(this.me)}Me(t){"string"==typeof t?this.he.style.background=t:(this.he.style.backgroundImage=`url(${this.qs}/${rh})`,this.he.style.backgroundPositionX=`${t.x}px`,this.he.style.backgroundPositionY=`${t.y}px`)}onClick(){this.pe?this.be():this.ve(),this.pe=!this.pe}}class Ue extends Ne{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.oe=i;const e=this.oe.getTheme();this.ae(e.onScreenMenuBackgroundColor.toRGBAString(),Fe)}onClick(){const t=this.oe._e();t&&this.oe.zoom(t,{x:-1,y:-1})}}class We extends Ne{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.oe=i;const e=this.oe.getTheme();this.ae(e.onScreenMenuBackgroundColor.toRGBAString(),De)}onClick(){const t=this.oe._e();t&&this.oe.zoom(t,{x:-1,y:0})}}class Ye extends Ne{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.oe=i;const e=this.oe.getTheme();this.ae(e.onScreenMenuBackgroundColor.toRGBAString(),Le)}onClick(){const t=this.oe._e();t&&this.oe.zoom(t,{x:0,y:-1})}}class He extends Ne{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.oe=i;const e=this.oe.getTheme();this.ae(e.onScreenMenuBackgroundColor.toRGBAString(),Ie)}onClick(){const t=this.oe._e();t&&this.oe.zoom(t,{x:1,y:1})}}class Xe extends Ne{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.oe=i;const e=this.oe.getTheme();this.ae(e.onScreenMenuBackgroundColor.toRGBAString(),Be)}onClick(){const t=this.oe._e();t&&this.oe.zoom(t,{x:1,y:0})}}class $e extends Ne{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.oe=i;const e=this.oe.getTheme();this.ae(e.onScreenMenuBackgroundColor.toRGBAString(),Re)}onClick(){const t=this.oe._e();t&&this.oe.zoom(t,{x:0,y:1})}}class je extends Ge{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.oe=i;const e=this.oe.getTheme();this.ye=Ee,this.me=ze,this.ae(e.onScreenMenuBackgroundColor.toRGBAString(),this.ye)}onToggledStateAction(){this.oe.setAnimationsEnabled(!1)}onInitialStateAction(){this.oe.setAnimationsEnabled(!0)}}class Ze extends Ne{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.oe=i;const e=this.oe.getTheme();this.ae(e.onScreenMenuBackgroundColor.toRGBAString(),Pe)}onClick(){this.oe.forEachAxis((t=>{t.fit(!0)}))}}class Qe extends Ne{constructor(t,i,s){super(t,i.shape||nh,i.dimensions||{rows:1,columns:1},s);const e=s.getTheme(),h=i.color||e.onScreenMenuBackgroundColor.toRGBAString(),r=i.icon||"",n=i.label||"",o=i.opacity||"";this.ae(h,r,n,o),this.we=i.action}onClick(){this.we(this.oe)}}class Je extends Ge{constructor(t,i,s,e){super(t,i,{rows:1,columns:1},s),this.oe=s,this.Ce=e,this.ye=Oe,this.me=Ve,this.ae(oh,this.ye)}xe(){this.Me(this.ye),this.ee.style.backgroundColor=oh,this.ee.style.border="2px solid #707070",this.ee.style.margin="0px"}Se(){this.Me(this.me),this.ee.style.background="#FECC00 0% 0% no-repeat padding-box",this.ee.style.border="10px solid #BCBCBC12",this.ee.style.margin="1px"}onToggledStateAction(){var t;null===(t=this.Ce)||void 0===t||t.style.setProperty("display","block")}onInitialStateAction(){var t;null===(t=this.Ce)||void 0===t||t.style.setProperty("display","none")}}var Ke;!function(t){t.Move="move",t.ResizeColumn="col-resize",t.ResizeRow="row-resize",t.Horizontal="ew-resize",t.Vertical="ns-resize",t.NorthWest="nw-resize",t.NorthEast="ne-resize",t.Copy="copy",t.CrossHair="crosshair",t.Default="default",t.Help="help",t.Restricted="not-allowed",t.None="none",t.Point="pointer",t.Text="text",t.Wait="wait",t.ZoomIn="zoom-in",t.ZoomOut="zoom-out"}(Ke||(Ke={}));const qe={LeftBottom:n(-1,-1),CenterBottom:n(0,-1),RightBottom:n(1,-1),LeftCenter:n(-1,0),Center:n(0,0),RightCenter:n(1,0),LeftTop:n(-1,1),CenterTop:n(0,1),RightTop:n(1,1)},th=new W({color:S(255,255,255,0)}),ih=new _e({thickness:1,fillStyle:th}),sh=60,eh=60,hh="1.0",rh="osm/osm-sprite-transparent.png",nh=Te.Circle,oh="#363636";var ah;!function(t){t[t.TopRight=0]="TopRight",t[t.TopLeft=1]="TopLeft",t[t.BottomLeft=2]="BottomLeft",t[t.BottomRight=3]="BottomRight"}(ah||(ah={}));class lh extends me{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.ws="Band",this.ke=0,this.Te=0,this.Fe=this.qi.bandFillStyle,this.Ie=this.qi.bandStrokeStyle,this.Pe=!0,this.De=this.Ls.Re(this.ft).Le(this.Fe).Be(this.Ie).cs(this.getHighlight()),this.fs(this.De)}setValueStart(t){return this.ke=t,this.L.emit("valueChange",this,this.ke,this.Te),this.Ls.xs(),this}getValueStart(){return this.ke}setValueEnd(t){return this.Te=t,this.L.emit("valueChange",this,this.ke,this.Te),this.Ls.xs(),this}getValueEnd(){return this.Te}setFillStyle(t){this.Fe="function"==typeof t?t(this.Fe):t;const i=this.Fe;return this.De.Le(i),this.Ls.xs(),this}getFillStyle(){return this.Fe}setStrokeStyle(t){this.Ie="function"==typeof t?t(this.Ie):t;const i=this.Ie;return this.De.Be(i),this.Ls.xs(),this}getStrokeStyle(){return this.Ie}onValueChange(t){return this.L.on("valueChange",t)}offValueChange(t){return this.L.off(t,"valueChange")}Ee(){return this.De.ze(this.Rs.toVec2(this.ke,this.Rs.getHeight(this.ft).getInnerStart())).tt(this.Rs.toVec2(this.Te-this.ke,this.Rs.getHeight(this.ft).getInnerInterval())),ue(this.Bs,[this.De],this.ft),this}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe,stroke:this.Ie})}Ve(t,i){t.cs(i),this.Ls.xs()}setDefaultMouseInteractions(t){return this.Pe=t,this}Es(){let t,i;const s=(s,e)=>{if(!this.Pe)return;const h=pt(this.Ls.us.Oe(e.x,e.y),this.Ls.us.ft,this.ft),r=this.Rs.getWidth(h),n=this.axis.ft.dt(this.ke),o=this.axis.ft.dt(this.Te),a=(this.axis.ft.dt(r)-n)/(o-n);t=!(a<.1||a>.9),!1===t&&(i=a<.5)},e=(s,e,h,r,n)=>{if(!this.Pe)return;const o=this.Rs.getWidth(r);t?(this.ke=this.axis.ft.gi(this.ke,o),this.Te=this.axis.ft.gi(this.Te,o)):i?this.ke=this.axis.ft.gi(this.ke,o):this.Te=this.axis.ft.gi(this.Te,o),mi(n),this.L.emit("valueChange",this,this.ke,this.Te),this.Ls.xs()};this.onMouseMove(((i,e)=>{if(!this.Pe)return;s(0,n(e.clientX,e.clientY));const h=t?Ke.Point:this.Rs.getWidth({x:Ke.Horizontal,y:Ke.Vertical});this.Ne=this.chart.engine.setMouseStyle(h,this.Ne)})),this.onMouseLeave((()=>{this.Pe&&(this.chart.engine.restoreMouseStyle(this.Ne),this.Ne=void 0)})),this.onMouseDrag(((t,i,s,h,r)=>{this.Pe&&0===s&&e(0,0,0,r,i)}));const h=ve(new be(s,e));this.onTouchStart(h.onTouchStart),this.onTouchMove(h.onTouchMove),this.onTouchEnd(h.onTouchEnd)}}class uh extends me{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.ws="Constant Line",this.S=0,this.Ie=this.qi.constantLineStrokeStyle,this.Ge=!0,this.Pe=!0,this.Ue=this.Ls.Ye(this.ft).We(this.Ie).cs(this.getHighlight()),this.fs(this.Ue)}setValue(t){return this.S=t,this.L.emit("valueChange",this,this.S),this.Ls.xs(),this}getValue(){return this.S}setStrokeStyle(t){this.Ie="function"==typeof t?t(this.Ie):t;const i=this.Ie;return this.Ue.We(i),this.Ls.xs(),this}getStrokeStyle(){return this.Ie}setInteractionMoveByDragging(t){return this.Ge=t,this}getInteractionMoveByDragging(){return this.Ge}onValueChange(t){return this.L.on("valueChange",t)}offValueChange(t){return this.L.off(t,"valueChange")}Ee(){return this.Ue.Xe(this.Rs.toVec2(this.S,this.Rs.getHeight(this.ft).getInnerStart())).He(this.Rs.toVec2(this.S,this.Rs.getHeight(this.ft).getInnerEnd())),ue(this.Bs,[this.Ue],this.ft),this}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{stroke:this.Ie})}Ve(t,i){t.cs(i),this.Ls.xs()}setDefaultMouseInteractions(t){return this.Pe=t,this}Es(){const t=(t,i)=>{this.Pe&&this.Ge&&(this.S=this.axis.ft.gi(this.S,this.Rs.getWidth(i)),this.L.emit("valueChange",this,this.S),this.Ls.xs(),mi(t))};this.onMouseMove((()=>{if(this.Pe&&this.Ge){const t=this.Rs.getWidth({x:Ke.Horizontal,y:Ke.Vertical});this.Ne=this.chart.engine.setMouseStyle(t,this.Ne)}})),this.onMouseLeave((()=>{this.Pe&&this.Ge&&(this.chart.engine.restoreMouseStyle(this.Ne),this.Ne=void 0)})),this.onMouseDrag(((i,s,e,h,r)=>{this.Pe&&this.Ge&&0===e&&t(s,r)}));const i=ve(new be(void 0,((i,s,e,h,r)=>t(r,h))));this.onTouchStart(i.onTouchStart),this.onTouchMove(i.onTouchMove),this.onTouchEnd(i.onTouchEnd)}}const ch={fitting:{start:(t,i,s,e)=>i>=t?s:e,end:(t,i,s,e)=>i>=t?e:s,allowIntervalLengthChange:!0},expansion:{start:(t,i,s,e)=>i>=t?s<t?s:t:e>t?e:t,end:(t,i,s,e)=>i>=t?e>i?e:i:s<i?s:i,allowIntervalLengthChange:!0},progressive:{start:(t,i,s,e)=>i>t?ch.progressive.end(t,i,s,e)+(t-i):e>t?e:t,end:(t,i,s,e)=>i>t?e>i?e:i:ch.progressive.start(t,i,s,e)+(i-t),allowIntervalLengthChange:!1},regressive:{start:(t,i,s,e)=>i>t?s<t?s:t:ch.regressive.end(t,i,s,e)+(t-i),end:(t,i,s,e)=>i>t?ch.regressive.start(t,i,s,e)+(i-t):s<i?s:i,allowIntervalLengthChange:!1},fittingStepped:{start:(t,i,s,e)=>{if(i>=t){if(s<t)return t-(i-t);const e=t+.5*(i-t);return s>e?e:t}if(e>t)return t+(t-i);const h=t-.5*(t-i);return e<h?h:t},end:(t,i,s,e)=>{if(i>=t){if(e>i)return i+(i-t);const s=i-.5*(i-t);return e<s?s:i}if(s<i)return i-(t-i);const h=i+.5*(t-i);return s>h?h:i},allowIntervalLengthChange:!0}},dh={Empty:"Empty",Numeric:"Numeric",DateTime:"DateTime",Time:"Time"},fh=t=>void 0!==t.$e&&void 0!==t.je,Ah=t=>void 0!==t.Ze,gh=t=>void 0!==t.Qe,yh=(t,i)=>[t,i],mh=(t,i,s,e)=>{const h=[],r=Math.round(Math.abs((t-i)/s));for(let n=1;n<r;n+=1){const r=Math.round((t+s*n)*e)/e;r<i&&h.push(r)}return h},ph=(t,i,s,e,h)=>{Qt(t,0)&&(t=0),Qt(i,0)&&(i=0);const r=[];let n=void 0!==e?((t,i,s)=>t-(t-s)%i)(t,s,e):t;if(s<=0)throw new Error(`_getRegularGreatKeyValues unit less than or equal to 0, unit: ${s}`);for(;n<i&&!1===Qt(n,i);)r.push(n),n+=s,n=Math.round(n*h)/h;return r.push(n),r},vh=(t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i&&!1===Qt(r,i);)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h},Sh=(t,...i)=>{const s=i.length>0?i.length:t?1:0;return(e,h,r,n,o,a)=>{if(h>=s)return;const l=i[h]||1;let u=!1,c=!1,d=1;return t&&(u="ignore"in t?"first"===t.ignore||"both"===t.ignore:u,c="ignore"in t?"last"===t.ignore||"both"===t.ignore:c,d="offset"in t&&void 0!==t.offset?t.offset:d),((t,i,s,e,h)=>(s&&(t=t.filter(((t,i)=>i>0))),e&&(t=t.filter(((i,s)=>s<t.length-1))),t.filter(((t,s)=>(s+h)%i==0))))(e,l,u,c,d)}},bh=(...t)=>{const i=t.length>0?t.length:0;return(s,e,h,r,n,o)=>{if(e>=i)return;const a=t[e]||1;return s.filter(((t,i)=>i%a==0))}},xh=i({type:"empty-ticks",cursorFormatter:void 0});class Mh extends xh{Je(t){return{Ke:[],qe:[],th:this.cursorFormatter?this.cursorFormatter:Ks.Numeric,ih:void 0,sh:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}}const _h=t=>!(!t||"object"!=typeof t||!("type"in t)||"empty-ticks"!==t.type),wh=(t,i)=>{if(i.has(t))return i.get(t);const s=vs(t.hh.eh());if(Oi(s))return s;const e=t.rh.gi(s.min,{x:-5,y:-5}),h=t.rh.gi(s.min,{x:5,y:5}),r=t.rh.gi(s.max,{x:-5,y:-5}),n=t.rh.gi(s.max,{x:5,y:5}),o={min:{x:Math.min(e.x,h.x,r.x,n.x),y:Math.min(e.y,h.y,r.y,n.y)},max:{x:Math.max(e.x,h.x,r.x,n.x),y:Math.max(e.y,h.y,r.y,n.y)}};return i.set(t,o),o},Ch=t=>{const i=new Map;if(!_h(t)){for(const s of t.Ke)i.set(s,new Map);for(const s of t.qe)i.set(s,new Map)}return i},kh=(new Mh).Je({type:"linear"});class Th{constructor(t,i,e,h,r,n,o){this.L=new s,this.oh=kh,this.ah=dh.Empty,this.lh=new Map,this.uh=new Map,this.dh=ch.fitting,this.fh=!0,this.Ah=K((()=>this.chart.us.xs()))(300,Q.linear),this.gh=!0,this.ji=!0,this.yh=!1,this.mh=hs,this.ph=!1,this.Sh=!1,this.bh=hs,this.xh=hs,this.Mh=hs,this._h=!1,this.wh="",this.Ch={},this.kh=()=>{this.Th.setMouseInteractions(!0).setMouseMoveEventHandler(((t,i)=>this.L.emit("mouseMoveTitle",this,i))).setMouseEnterEventHandler(((t,i)=>this.L.emit("mouseEnterTitle",this,i))).setMouseLeaveEventHandler(((t,i)=>this.L.emit("mouseLeaveTitle",this,i))).setMouseDownEventHandler(((t,i)=>this.L.emit("mouseDownTitle",this,i))).setMouseUpEventHandler(((t,i)=>this.L.emit("mouseUpTitle",this,i))).setMouseClickEventHandler(((t,i)=>this.L.emit("mouseClickTitle",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.L.emit("mouseDoubleClickTitle",this,i))).setMouseWheelEventHandler(((t,i)=>this.L.emit("mouseWheelTitle",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.L.emit("mouseDragStartTitle",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.L.emit("mouseDragTitle",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.L.emit("mouseDragStopTitle",this,i,s,e))).setTouchStartEventHandler(((t,i)=>this.L.emit("touchStartTitle",this,i))).setTouchMoveEventHandler(((t,i)=>this.L.emit("touchMoveTitle",this,i))).setTouchEndEventHandler(((t,i)=>this.L.emit("touchEndTitle",this,i))),this.kh=void 0},this.Fh=(t,i,s,e,h,r)=>{const n=[],o=[];for(const a of t){if(a<s||a>e){n.push(a);continue}const t=this.lh.get(i),l=(t?t.get(a):void 0)||this.Ih(a,i);l.Ph=!1;const u=this.Dh(l,h);r.set(l,u),n.push(a),o.push(l)}return{displayedKeyValues:n,createdTicks:o}},this.Bh=(t,i,s,e,h,r,n,o,a,l,u)=>{const c=[];for(let d=0;d<t.length;d+=1){const f=t[d],A=i[d];let g,y,m;if(this.Lh(f,s)){const i=wh(f,a);y=[t[d-1],t[d+1]],m=y.concat(l).concat(u).filter((t=>void 0!==t)).filter((i=>i.Rh!==s||!!t.find((t=>t===i)))).map((t=>as(i,wh(t,a))?t:void 0)),g=m.some((t=>void 0!==t))}else g=!1;if(g){let t=!0;const i=m.filter((t=>void 0!==t));if(t&&i.every((t=>Ah(t.Rh)))&&(t=!1),t&&s.Eh&&s.Eh.zh&&!1===s.Eh.zh(A,e,h,r,n,o)&&(t=!1),!1===t)continue;return!0}c.push(f)}return c},this.formatValue=t=>this.oh.th(t,this.ft),this.Vh=!0,this.Oh=!0,this.chart=t,this.Nh=i,this.qi=h,this.Gh=n,this.ft=e,this.Uh=o,"logarithmic"===o.type&&this.setAnimationZoom(Q.logarithmic($s(o.base))),this.Wh=n.numeric,this.Yh("Numeric"),this.Hh=e.getInnerStart(),this.Xh=e.getInnerEnd(),this.setAnimationsEnabled(r)}setUnits(t,i={}){return this.$h=t,this.Yi=i,this.jh(),this}getUnits(){return this.$h}setDefaultInterval(t,i){return this.Zh=t,!1!==(null==i?void 0:i.applyImmediately)&&(this._h=!0,this.chart.us.xs()),this}getDefaultInterval(){return this.Zh}getTitle(){return this.wh}setTitle(t){return this.wh=t,this.jh(),this}getTitleFillStyle(){return this.Th.Qh()}setIntervalRestrictions(t){return this.Jh=t,this.chart.us.xs(),this}getIntervalRestrictions(){if("function"==typeof this.Jh){const t=this.Kh();return this.Jh({curStart:this.Hh,curEnd:this.Xh,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max})}return this.Jh}setTitleFillStyle(t){return this.Th.Le(t),this.chart.us.xs(),this}getTitleFont(){return this.Th.qh()}setTitleFont(t){return this.Th.tr(t),this.chart.us.xs(),this}setTitleRotation(t){return this.Th.ir(t),this.chart.us.xs(),this}getTitleRotation(){return this.Th.sr()}setTitleEffect(t){return this.er.bs(t),this.chart.us.xs(),this}getTitleEffect(){return this.er.Ms()}Yh(t,i){if(this.lh.size>0&&this.hr(),"Empty"===t){const s=i||(t=>t);this.Wh=s(new Mh),this.oh=this.Wh.Je(this.Uh),this.ah=t}else if("Numeric"===t){"Numeric"!==this.ah&&(this.Wh=this.Gh.numeric);const s=i||(t=>t);this.Wh=s(this.Wh),this.oh=this.Wh.Je(this.Uh),this.ah=t}else if("DateTime"===t){"DateTime"!==this.ah&&(this.Wh=this.Gh.datetime);const s=i||(t=>t);this.Wh=s(this.Wh),this.oh=this.Wh.Je(this.Uh),this.ah=t}else if("Time"===t){"Time"!==this.ah&&(this.Wh=this.Gh.time);const s=i||(t=>t);this.Wh=s(this.Wh),this.oh=this.Wh.Je(this.Uh),this.ah=t}return this.uh.forEach((t=>Array.from(t.values()).forEach((t=>t.dispose())))),this.uh=Ch(this.oh),this.chart.us.xs(),this}rr(){return this.oh}nr(t){this.oh=t,this.uh.forEach((t=>Array.from(t.values()).forEach((t=>t.dispose())))),this.uh=Ch(this.oh),this.chart.us.xs()}setInterval(t){const{start:i,end:s,animate:e,stopAxisAfter:h}=t;return this.At(void 0!==i?i:this.Hh,void 0!==s?s:this.Xh,void 0!==e&&e,void 0===h||h,"userSetInterval"),this}At(t,i,s=!1,e=!0,h){let r={start:t,end:i};const n=!0,o=Math.abs(i-t);if(Math.abs(this.Xh-this.Hh),void 0!==this.oh.ih&&this.oh.ih>o){const s=(i+t)/2,e=this.oh.ih/2*(t>i?-1:1);r={start:s-e,end:s+e}}if(void 0!==this.oh.sh&&this.oh.sh<o){const s=(i+t)/2,e=this.oh.sh/2*(t>i?-1:1);r={start:s-e,end:s+e}}const a=this.ft.ot(r.start,r.end,this.Hh,this.Xh,n);if(!1===a)return this;if(!0===a);else if(r=a,"zoomBandChart"===h)return this;let l;switch(h){case"userSetInterval":case"userFit":case"interactionSetInterval":case"interactionZoom":l=!0;break;case"zoomBandChart":case"synchronizedAxis":l=!1;break;default:return Yi(0,""),this}if(this.ar&&this.ar.finishAll(!1),this.Ah&&(!0===s||s>0)){this.setStopped(!0);const t=!0===s?void 0:s,i=!this.ar||this.ar.isOver()?this.Ah:this.ar.NextAnimation.bind(this);this.ar=i([[this.Hh,r.start],[this.Xh,r.end]],(([t,i])=>{this.lr(t,i,n)}),t),this.ar.onAnimationEnd((()=>{this.ar=void 0,l&&(this.Mh=Yt.performance.now())})),this.ar.onAnimationEnd((()=>this.setStopped(e)))}else this.lr(r.start,r.end,n),this.setStopped(e),l&&(this.Mh=Yt.performance.now());return this}getInterval(){return{start:this.Hh,end:this.Xh}}setStopped(t){return t===this.yh||(t&&(this.ar&&this.ar.finishAll(!1),this.ar=void 0),this.yh=t,this.L.emit("stoppedStateChanged",this,this.yh),this.mh=Yt.performance.now(),this.chart.us.xs()),this}getStopped(){return this.yh}onStoppedStateChanged(t){return this.L.on("stoppedStateChanged",t)}offStoppedStateChanged(t){return this.L.off(t,"stoppedStateChanged")}fit(t,i){const s=this.Kh(),e=this.Zh||Bh,h="function"==typeof e?e({curStart:this.Hh,curEnd:this.Xh,dataMin:null==s?void 0:s.min,dataMax:null==s?void 0:s.max}):e;return this.At(void 0!==h.start?h.start:this.Hh,void 0!==h.end?h.end:this.Xh,void 0!==h.animate?h.animate:void 0===t||t,void 0!==h.stopAxisAfter?h.stopAxisAfter:void 0===i||i,"userFit"),this}setScrollStrategy(t){return this.dh=t,this.chart.us.xs(),this}getScrollStrategy(){return this.dh}setAnimationScroll(t){return this.fh=Boolean(t),this.chart.us.xs(),this}setAnimationZoom(t,i=300){return this.ar&&(this.ar.finishAll(!1),this.ar=void 0),this.Ah=t?K((()=>this.chart.us.xs()))(i,t):void 0,this}setAnimationsEnabled(t){return this.gh=t,t?(this.setAnimationScroll(!0),this.setAnimationZoom(Q.ease,void 0)):(this.setAnimationScroll(void 0),this.setAnimationZoom(void 0)),this}getAnimationsEnabled(){return this.gh}setVisible(t){const i=this.ji!==t;return this.ji=t,this.Th.setVisible(t),this.ur((i=>{i.hh.setVisible(t)})),i&&this.L.emit("visibleStateChanged",this,this.ji),this}getVisible(){return this.ji}onIntervalChange(t){return this.L.on("scaleChange",t)}offIntervalChange(t){return this.L.off(t,"scaleChange")}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}cr(t,i){this.kh&&this.kh();const s=new Map;if(_h(this.oh)||!this.ji)return this.hr(),s;i=i||new Map;const e=this.dr(),h=e.min,r=e.max,n=r-h,o=t.physicalAxisSize;this.Ch.physicalAxisSize=o;const a=Ih(this.oh,h,r,this.Hh,this.Xh,o),l=[];if(this.Ar(),l.push(...this.gr(this.oh,h,r,a,i,t,s)),this.yr(this.oh,h,r,a,i,t,l,s),this.mr(),a)for(const[t,i]of this.uh){const s=a.get(t);if(void 0!==s)for(const[t,e]of i)s.includes(t)||(null==e||e.dispose(),i.delete(t))}return this.Ch.min=h,this.Ch.max=r,this.Ch.scaleInterval=n,this.Ch.physicalAxisSize=o,s}pr(t){const i=t.Rh.je;t.hh.vr(i(t.S,this.ft)).Vs()}Sr(t,i){const s=i.$e;t.hh.Le(s.getLabelFillStyle()).tr(s.getLabelFont()).ir(s.getLabelRotation())}Ih(t,i){const s=this.uh.get(i);let e=s.get(t);e?(s.delete(t),e.Rh=i,e.ps(!0)):e=this.br(t,i);const h=this.lh.get(i)||new Map;return h.set(t,e),this.lh.set(i,h),this.Sr(e,i),e}Dh(t,i){const s=this.Mr(t,i);return this.pr(t),s}gr(t,i,s,e,h,r,n){const o=[];for(const a of t.Ke){const t=e.get(a);for(const e of t){if(e<i||e>s)continue;const t=this.lh.get(a),l=(t?t.get(e):void 0)||this.Ih(e,a),u=this.Dh(l,r),c=wh(l,h);o.find((t=>as(c,wh(t,h))))&&l.hh.setVisible(!1),l.Ph=!1,n.set(l,u),o.push(l)}}return o}yr(t,i,s,e,h,r,n,o){let a,l=[];for(const u of t.qe){const t=e.get(u);if(!t)break;let c;if(void 0===a)c=[{start:i,end:s,keyValues:t}];else{c=[];for(let i=0;i<a.length-1;i+=1){const s=a[i],e=a[i+1],h={start:s,end:e,keyValues:[]};for(const i of t)i>=s&&i<e&&h.keyValues.push(i);c.push(h)}}if(a=t,gh(u))continue;let d=0,f=-1,A=[],g=[];for(let t=0;t<c.length;t+=1){const e=this.Fh(c[t].keyValues,u,i,s,r,o);A=A.concat(e.displayedKeyValues),g=g.concat(e.createdTicks)}let y=g,m=!0;if(u.$e.getLabelFillStyle()!==O){let t=[];for(;++f<c.length;){const e=c[f],r=e.start,o=e.end;let a=e.keyValues;if(d>0){if(void 0===u.Eh){m=!1;break}const t=u.Eh._r;if(a=t(a,d-1,r,o,i,s),void 0===a)break}const y=this.Bh(g.filter((t=>a.some((i=>Qt(t.S,i))))),A,u,d,r,o,i,s,h,n,l);!0!==y?t=t.concat(y):(d+=1,f=-1,t=[])}y=t,g.forEach((i=>{t.find((t=>t===i))||this.wr(i)}))}if(l=y,!m)break}}wr(t){const i=this.lh.get(t.Rh);null==i||i.delete(t.S);const s=this.uh.get(t.Rh);s&&s.has(t.S)?t.dispose():s&&(t.ps(!1),s.set(t.S,t))}ur(t){for(const i of this.lh.values())for(const s of i.values())t(s)}Cr(t,i){for(const s of this.lh.values())for(const e of s.values())i=t(i,e);return i}hr(){this.lh.forEach(((t,i)=>{t.forEach((t=>this.wr(t)))})),this.lh.clear()}Ar(){for(const t of this.lh.values())for(const i of t.values())i.Ph=!0}mr(){for(const t of this.lh.values())for(const[i,s]of t.entries())s.Ph&&(s.dispose(),t.delete(i))}dr(){const t=this.ft.getInnerStart()<this.ft.getInnerEnd()?this.ft.getInnerStart():this.ft.getInnerEnd(),i=this.ft.getInnerEnd()>this.ft.getInnerStart()?this.ft.getInnerEnd():this.ft.getInnerStart();return c(t,i)}Lh(t,i){return!(t.Ph||0===t.hh.kr().length||Ah(i)&&!0!==i.Tr)}Fr(t,i){return _h(this.oh)||(this.oh.Ke.forEach((s=>{i=t(i,s.$e)})),this.oh.qe.forEach((s=>{(t=>void 0!==t.je)(s)&&(i=t(i,s.$e))}))),i}Kh(){let t=this.Nh.Ir();const i=this.Nh.Pr();let s;if(void 0!==t&&Xt(t)&&void 0!==i&&Xt(i)&&("logarithmic"===this.Uh.type&&(0===t&&(t=Math.min(1,i)),Math.sign(t)!==Math.sign(i)&&(t=Math.min(1,i-.1))),s?(s.min=Math.min(s.min,t),s.max=Math.max(s.max,i)):s=c(t,i)),s&&Xt(s.min)&&Xt(s.max))return Qt(s.min,s.max)?{min:s.min-1,max:s.max+1}:s}Dr(){if(!this.Vh)return 0;let t=0;const i=this.Nh.Br();return i&&(t=Math.max(t,i)),t}setAutoRegionsEnabled(t){return this.Vh=t,this.chart.us.xs(),this}Lr(){var t;const i=this.ph;let s=!1;if(this._h&&this.Zh){const t=this.Kh();if(t){const i="function"==typeof this.Zh?this.Zh({curStart:this.Hh,curEnd:this.Xh,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max}):this.Zh;this.setInterval(i),this._h=!1}}if(this.dh&&!this.yh){const i=this.Kh();if(i){const e=this.Hh,h=this.Xh;let r=this.dh.start(e,h,i.min,i.max),n=this.dh.end(e,h,i.min,i.max);const o=null===(t=this.dh.allowIntervalLengthChange)||void 0===t||t,a=Dh(this.Jh,i,{start:r,end:n},{start:e,end:h},o);r=a.start,n=a.end;const l=!1===Qt(e,r),u=!1===Qt(h,n);if(r=l?r:e,n=u?n:h,l||u){let t=!1;if(this.fh&&!this.Oh)if(this.fh){t=!0;const i=l?this.Rr(e,r):e,a=u?this.Rr(h,n):h;if(!0===this.lr(i,a,o)&&(l&&!1===Qt(i,r)||u&&!1===Qt(a,n))){this.chart.us.xs(!0),s=!0;let t=Math.abs(n-r)/Math.abs(i-a);t<1&&(t=1/t),this.Sh=t>=1.4}}else t=!1;t||this.lr(r,n,o),this.Oh=!1}}}return s?(this.ph!==s&&(this.ph=s,this.bh=Yt.performance.now()),this.Er&&(clearTimeout(this.Er),this.Er=void 0)):!0===i&&void 0===this.Er&&(this.Sh=!1,this.Er=setTimeout((()=>{!1!==this.ph&&(this.ph=!1,this.bh=Yt.performance.now()),this.Er=void 0,this.chart.us.xs()}),200)),this}lr(t,i,s){let e={start:t,end:i},h=!0;if(this.Jh){const t=this.Kh();e=Dh(this.Jh,t,e,{start:this.Hh,end:this.Xh},s)}const r=Math.abs(i-t),n=Math.abs(this.Xh-this.Hh);if(void 0!==this.oh.ih&&this.oh.ih>r){const r=(i+t)/2,o=(s?this.oh.ih/2:n/2)*(t>i?-1:1);e={start:r-o,end:r+o},h=!1}if(void 0!==this.oh.sh&&this.oh.sh<r){const r=(i+t)/2,o=(s?this.oh.sh/2:n/2)*(t>i?-1:1);e={start:r-o,end:r+o},h=!1}let o=this.ft.ot(e.start,e.end,this.Hh,this.Xh,s);if(!1===o)return!1;!0!==o&&(e=o);const a=this.Dr(),l=this.zr(Math.min(e.start,e.end),Math.max(e.start,e.end),a);return o=this.ft.ot(e.end>e.start?l.min:l.max,e.end>e.start?l.max:l.min,this.Hh,this.Xh,!1),!!o&&(!0===o?this.ft.K(e.end>e.start?l.min:l.max,e.end>e.start?l.max:l.min):this.ft.K(e.start,e.end),this.Hh=e.start,this.Xh=e.end,this.L.emit("scaleChange",this,e.start,e.end),this.xh=Yt.performance.now(),this.chart.us.xs(),h)}Vr(){return this.ph}Or(){return void 0!==this.ar}jh(){var t;const i=!1!==(null===(t=this.Yi)||void 0===t?void 0:t.displayOnAxis);this.Th.vr(this.$h&&i&&this.wh?`${this.wh} (${this.$h})`:this.wh),this.chart.us.xs()}onTitleMouseEnter(t){return this.L.on("mouseEnterTitle",t)}offTitleMouseEnter(t){return this.L.off(t,"mouseEnterTitle")}onTitleMouseMove(t){return this.L.on("mouseMoveTitle",t)}offTitleMouseMove(t){return this.L.off(t,"mouseMoveTitle")}onTitleMouseLeave(t){return this.L.on("mouseLeaveTitle",t)}offTitleMouseLeave(t){return this.L.off(t,"mouseLeaveTitle")}onTitleMouseDown(t){return this.L.on("mouseDownTitle",t)}offTitleMouseDown(t){return this.L.off(t,"mouseDownTitle")}onTitleMouseUp(t){return this.L.on("mouseUpTitle",t)}offTitleMouseUp(t){return this.L.off(t,"mouseUpTitle")}onTitleMouseClick(t){return this.L.on("mouseClickTitle",t)}offTitleMouseClick(t){return this.L.off(t,"mouseClickTitle")}onTitleMouseDoubleClick(t){return this.L.on("mouseDoubleClickTitle",t)}offTitleMouseDoubleClick(t){return this.L.off(t,"mouseDoubleClickTitle")}onTitleMouseDragStart(t){return this.L.on("mouseDragStartTitle",t)}offTitleMouseDragStart(t){return this.L.off(t,"mouseDragStartTitle")}onTitleMouseDrag(t){return this.L.on("mouseDragTitle",t)}offTitleMouseDrag(t){return this.L.off(t,"mouseDragTitle")}onTitleMouseDragStop(t){return this.L.on("mouseDragStopTitle",t)}offTitleMouseDragStop(t){return this.L.off(t,"mouseDragStopTitle")}onTitleMouseWheel(t){return this.L.on("mouseWheelTitle",t)}offTitleMouseWheel(t){return this.L.off(t,"mouseWheelTitle")}onTitleTouchStart(t){return this.L.on("touchStartTitle",t)}offTitleMouseTouchStart(t){return this.L.off(t,"touchStartTitle")}onTitleTouchMove(t){return this.L.on("touchMoveTitle",t)}offTitleTouchMove(t){return this.L.off(t,"touchMoveTitle")}onTitleTouchEnd(t){return this.L.on("touchEndTitle",t)}offTitleTouchEnd(t){return this.L.off(t,"touchEndTitle")}}class Fh{constructor(t,i,s,e,h=s.Ur(e).Gr(Qi).Nr(Qi).setMouseInteractions(!1)){this.Ph=!1,this.$i=!1,this.ts=[],this.Rh=t,this.S=i,this.Wr=s,this.rh=e,this.hh=h,this.ts.push(h)}ps(t){this.ts.forEach((i=>i.setVisible(t)))}dispose(){return this.$i||(this.$i=!0,this.ts.forEach((t=>t.dispose()))),this}}const Ih=(t,i,s,e,h,r)=>{const n=new Map;for(const r of t.Ke){let t=r.Yr(i,s,e,h);t=Ph(t),n.set(r,t)}let o;for(const e of t.qe){let t;if(void 0===o)t=e.Yr(i,s,i,s);else{let h=[];const n=o.filter((t=>i<=t&&t<=s)).length;if(n>0){const t=r/(n-1);if(void 0!==e.Hr&&e.Hr>t)break}for(let t=0;t<o.length-1;t+=1){const r=e.Yr(o[t],o[t+1],i,s);h=h.concat(r)}t=h}t=Ph(t),n.set(e,t),o=t}return n},Ph=t=>(t=(t=>{const i={},s=[],e=t.length;let h=0;for(let r=0;r<e;r+=1){const e=t[r];1!==i[e]&&(i[e]=1,s[h]=e,h+=1)}return s})(t)).sort(((t,i)=>t-i)),Dh=(t,i,s,e,h)=>{const r="function"==typeof t?t({curStart:e.start,curEnd:e.end,dataMin:null==i?void 0:i.min,dataMax:null==i?void 0:i.max}):t;if(!r)return s;const n={start:s.start,end:s.end};let o=Math.abs(s.end-s.start);if(void 0!==r.intervalMin&&o<r.intervalMin){const t=(n.start+n.end)/2;n.start=t+.5*Math.sign(s.start-t)*r.intervalMin,n.end=t+.5*Math.sign(s.end-t)*r.intervalMin}if(o=Math.abs(s.end-s.start),void 0!==r.intervalMax&&o>r.intervalMax){const t=(n.start+n.end)/2;n.start=t+.5*Math.sign(s.start-t)*r.intervalMax,n.end=t+.5*Math.sign(s.end-t)*r.intervalMax}return o=Math.abs(s.end-s.start),void 0!==r.startMin&&(n.start=Math.max(n.start,r.startMin),h||Qt(Math.abs(n.start-n.end),o)||(n.end=n.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==r.startMax&&(n.start=Math.min(n.start,r.startMax),h||Qt(Math.abs(n.start-n.end),o)||(n.end=n.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==r.endMin&&(n.end=Math.max(n.end,r.endMin),h||Qt(Math.abs(n.start-n.end),o)||(n.start=n.end+Math.sign(s.start-s.end)*o)),o=Math.abs(s.end-s.start),void 0!==r.endMax&&(n.end=Math.min(n.end,r.endMax),h||Qt(Math.abs(n.start-n.end),o)||(n.start=n.end+Math.sign(s.start-s.end)*o)),n},Bh=t=>{if(void 0===t.dataMin||void 0===t.dataMax)return{stopAxisAfter:!1};const i=t.curEnd>=t.curStart;return{start:i?t.dataMin:t.dataMax,end:i?t.dataMax:t.dataMin,stopAxisAfter:!1}},Lh=i({type:"font",size:14,family:"Arial",weight:"normal",style:"normal",variant:!1});class Rh extends Lh{constructor(t){super(t)}setSize(t){return this.set("size",t)}setFamily(t){return this.set("family",t)}setWeight(t){return this.set("weight",t)}setStyle(t){return this.set("style",t)}setVariant(t){return this.set("variant",t)}getSize(){return this.get("size")}getFamily(){return this.get("family")}getWeight(){return this.get("weight")}getStyle(){return this.get("style")}getVariant(){return this.get("variant")}}const Eh=t=>!(!t||"object"!=typeof t||!("type"in t)||"font"!==t.type),zh=new Rh,Vh=new class{getFillStyle(){return O}},Oh=i({type:"triangulated-points-3d",shape:"sphere",size:10,fillStyle:new W,wireframeStyle:dt});class Nh extends Oh{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setWireframeStyle(t){return"function"==typeof t?this.set("wireframeStyle",t(this.get("wireframeStyle"))):this.set("wireframeStyle",t)}getWireframeStyle(){return this.get("wireframeStyle")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}}const Gh=t=>!(!t||"object"!=typeof t||!("type"in t)||"triangulated-points-3d"!==t.type),Uh=i({type:"pixelated-points-3d",size:5,fillStyle:new W});class Wh extends Uh{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}}const Yh=t=>!(!t||"object"!=typeof t||!("type"in t)||"pixelated-points-3d"!==t.type),Hh={Triangulated:Nh,Pixelated:Wh};class Xh{constructor(t){this.Xr=new Map,this.us=t}os(t,i,s){const e=s.animationEnabled;this.Xr.set(t,{applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:e,curAnimatedHighlightValue:0});const h=t.onDispose((()=>{this.Xr.delete(t),t.offDispose(h)}))}$r(t,i){let s=i.animationEnabled;const e=[],h=t.onDispose((()=>{e.forEach((t=>{this.Xr.delete(t)})),t.offDispose(h)}));return{jr:(t,i)=>{const h={applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:s,curAnimatedHighlightValue:0};e.push(t),this.Xr.set(t,h)},Zr:()=>{e.forEach((t=>{this.Xr.delete(t)})),e.length=0},Qr:t=>{s=t,e.forEach((t=>{this.ks(t,s)}))},Jr:()=>s}}Cs(t,i){const s=this.Xr.get(t);s&&(s.curUnanimatedHighlightValue=Ui(i),this.us.xs())}gs(t,i=!1){const s=this.Xr.get(t);return s?i?s.curAnimatedHighlightValue:s.curUnanimatedHighlightValue:0}ks(t,i){const s=this.Xr.get(t);s&&(s.animationEnabled=i)}Ts(t){const i=this.Xr.get(t);return!!i&&i.animationEnabled}Vs(t){let i=!1;this.Xr.forEach(((s,e)=>{let h;if(s.animationEnabled){const e=1e3;if(s.curUnanimatedHighlightValue>0){const r=s.curAnimationPositionMillis/e;h=s.curUnanimatedHighlightValue*Math.abs(Math.sin(r*Math.PI/2+.5));const n=0===s.curAnimatedHighlightValue?1:t;s.curAnimationPositionMillis+=n,i=!0}else s.curAnimatedHighlightValue>0&&0===s.curUnanimatedHighlightValue?(h=Math.max(s.curAnimatedHighlightValue-t/e,0),i=i||h>0):h=0,s.curAnimationPositionMillis=0}else h=s.curUnanimatedHighlightValue;h!==s.curAnimatedHighlightValue&&(s.applyHighlight(h),s.curAnimatedHighlightValue=h)})),i&&this.us.xs(!0)}}const $h=new Map,jh=(t,i)=>{const s=t.getSize(),e=t.getFamily(),h=t.getWeight(),r=t.getStyle(),n=t.getVariant(),o=`${r} ${n?"small-caps":"normal"} ${h} ${s}px ${e}`,a=`${o} ${i.toFixed(2)}`;let l=$h.get(a);return l||(l=((t,i,s,e)=>({font:t,properties:i,dpr:s,id:e}))(o,{type:"font",size:s,family:e,style:r,variant:n,weight:h},i,a),$h.set(a,l)),l};var Zh,Qh;!function(t){t[t.click=0]="click",t[t.dbclick=1]="dbclick",t[t.mouseDown=2]="mouseDown",t[t.mouseUp=3]="mouseUp",t[t.contextmenu=4]="contextmenu",t[t.wheel=5]="wheel"}(Zh||(Zh={})),function(t){t[t.touchStart=0]="touchStart",t[t.touchMove=1]="touchMove",t[t.touchEnd=2]="touchEnd"}(Qh||(Qh={}));const Jh=t=>({container:t.Kr,setMouseStyle:(i,s)=>t.qr(i,s),restoreMouseStyle:i=>t.tn(i),captureFrame:(i,s,e)=>t.sn(i,s,e),renderFrame:(i,s,e=!1)=>t.en(i,s,e),layout:()=>{t.hn(),t.rn(),t.an.nn(),t.xs()},setBackgroundFillStyle(i){return t.setBackgroundFillStyle(i),this},setBackgroundStrokeStyle(i){return t.setBackgroundStrokeStyle(i),this},getBackgroundFillStyle:()=>t.getBackgroundFillStyle(),getBackgroundStrokeStyle:()=>t.getBackgroundStrokeStyle(),addCustomIcon:(i,s)=>t.ln(i,s),onRenderFrame:i=>t.un(i),offRenderFrame:i=>t.cn(i)}),Kh=[];let qh;const tr=()=>{if(void 0!==qh){const t=Yt.getComputedStyle(Yt.document.body),i=Number(t.getPropertyValue("margin-top").replace("px",""))+Number(t.getPropertyValue("margin-bottom").replace("px",""));qh.style.height=Yt.innerHeight-i+"px",(()=>{for(let t=0;t<Kh.length;t+=1)Kh[t]()})()}},ir=new W({color:S(255,255,255)}),sr={font:jh(zh,0),fillStyle:ir,lineStyle:new _e({fillStyle:ir,thickness:1}),pointStyle3D:new Hh.Triangulated};class er{constructor(t,i,e){this.L=new s,this.ft=yt.d2({scaleXYConstructor:ee}),this.dn=new Map,this.fn=K((()=>this.xs()),60),this.An=n(0,0),this.gn=!1,this.yn=Zt,this.mn=()=>{},this.pn=[],this.vn=-1,this.Sn=[],this.bn=!0,this.$i=!1,this.xn=!1,this.rn=()=>{const{bottom:t,left:i}=this.Kr.getBoundingClientRect();return this.An=n(Math.floor(i),Math.floor(t)),this},this.Mn=t=>{if(this._n){const i=this._n.entity.wn;i&&i(this._n.entity,t,this._n.button,this._n.startLocation,this._n.collectionMember,this._n.info),this._n=void 0}},this.hn=()=>{this.Cn&&this.Cn()},this.qr=(t,i)=>{if(!i){this.Kr.style.cursor=t;const i=this.vn;return this.vn+=1,this.Sn.push([i,t]),i}return this.tn(i),this.qr(t)},this.tn=t=>{const i=t?this.Sn.findIndex((i=>i[0]===t)):-1;i>=0?(this.Sn.splice(i,1),this.Sn.length>0?this.Kr.style.cursor=this.Sn[this.Sn.length-1][1]:this.Kr.style.cursor="default"):(this.Sn.push([0,"default"]),this.Kr.style.cursor="default")},this.kn=t=>(this.Tn.M(t),this),this.Fn=()=>this.Tn._(),this.In=()=>{this.yn&&this.yn(1e3/60),this.Pn(),this.Dn(),this.mn&&this.mn()},this.Bn=t=>(this.dn.set(t.Ln(),t),this.dn=new Map([...this.dn.entries()].sort(((t,i)=>t[0]-i[0]))),t),this.Rn=t=>(this.dn.delete(t),this),this.Z=()=>(this.Tn.o=!1,this),this.J=()=>(this.Tn.o=!0,this),this.En=t=>{if(!this.bn)return;const i=this.zn,s=i&&i.clientX===t.clientX&&i.clientY===t.clientY,e=this.Ss({x:t.clientX,y:t.clientY});if(this.Vn&&((null==e?void 0:e.entity)!==this.Vn.entity||e.collectionMember!==this.Vn.collectionMember)&&!this._n){this.Vn.entity.Is=!1;const i=this.Vn.entity.On;i&&i(this.Vn.entity,t,this.Vn.collectionMember)}if(e&&e.entity.getMouseInteractions()&&!this._n)if(e.entity.Is){if(!s){const i=e.entity.Nn;i&&i(e.entity,t,e.collectionMember,e.info)}}else{e.entity.Is=!0;const i=e.entity.Gn;i&&i(e.entity,t,e.collectionMember,e.info)}if(this._n){const s=this._n.entity.Un,e=i?n(t.clientX-i.clientX,i.clientY-t.clientY):{x:0,y:0};!s||0===e.x&&0===e.y||s(this._n.entity,t,this._n.button,this._n.startLocation,e,this._n.collectionMember,this._n.info)}this.Wn=t,this.zn=t,this.Vn=e?{...e,event:t}:void 0},this.Yn=t=>{if(this.bn=!1,this.Wn=t,this.Vn&&!this.Hn&&!this._n){this.Vn.entity.Is=!1;const i=this.Vn.entity.On;i&&i(this.Vn.entity,t,this.Vn.collectionMember),this.Vn=void 0}},this.Xn=t=>{if(this.bn=!0,this.Wn=t,this._n&&t.buttons<=0){const i=this._n.entity.wn;i&&i(this._n.entity,t,this._n.button,this._n.startLocation,this._n.collectionMember,this._n.info),this._n=void 0}if(this.Hn&&t.buttons<=0){const i=this.Hn.entity.$n;i&&i(this.Hn.entity,t,this.Hn.collectionMember,this.Hn.info),this.Hn=void 0}},this.jn=()=>this.Wn&&this.Zn?this.Wn.timeStamp>this.Zn.timeStamp?this.Wn:this.Zn:this.Wn||this.Zn,this.an=t,this.qi=i.theme,this.Qn=e.Qn,this.Jn=e.Jn,this.Kn=e.Kn,this.qn={io:i&&i.overrideInteractionMouseButtons?i.overrideInteractionMouseButtons:void 0,qs:i&&void 0!==i.resourcesBaseUrl&&null!==i.resourcesBaseUrl?i.resourcesBaseUrl:void 0,so:!i||!("warnings"in i)||"boolean"!=typeof i.warnings||i.warnings,eo:(()=>{const t=null==i?void 0:i.pickingPrecision;if("string"==typeof t){const i=t.toLowerCase();if("best"===i)return 1;if("high"===i)return.5;if("low"===i)return 1/8}return 1/4})(),ho:void 0===(null==i?void 0:i.interactable)||i.interactable,ro:void 0===i.textPixelSnappingEnabled||i.textPixelSnappingEnabled};const h=i?i.container:void 0;if(h){if("string"==typeof h){const t=Yt.document.getElementById(h);if(!t)throw new Error(`Container "${h}" doesn't exist.`);this.Kr=t}else this.Kr=h;Yt.addEventListener("resize",this.hn),this.pn.push((()=>{Yt.removeEventListener("resize",this.hn)}))}else{if(void 0===qh){const t=Yt.document.createElement("div");t.id="lcjs-auto-flexbox",t.style.position="relative",t.style.width="100%",t.style.display="flex",t.style.flexDirection="column",Yt.document.body.appendChild(t),qh=t,Yt.addEventListener("resize",tr)}let t=1;for(;null!==Yt.document.getElementById(`chart-${t}`);)t+=1;this.Kr=Yt.document.createElement("div"),this.Kr.id=`chart-${t}`,this.Kr.style.flex="1",this.Kr.style.height="100%",qh.appendChild(this.Kr),tr(),Kh.push(this.hn),this.pn.push((()=>{qh&&qh.removeChild(this.Kr),Kh.includes(this.hn)&&Kh.splice(Kh.indexOf(this.hn),1),0===Kh.length&&qh&&(Yt.document.body.removeChild(qh),qh=void 0,Yt.removeEventListener("resize",tr))}))}if(Yt.ResizeObserver){const t=t=>{for(const i of t)i.target===this.Kr&&this.hn()};this.no=new Yt.ResizeObserver(t.bind(this)),this.no.observe(this.Kr)}""===this.Kr.style.position&&(this.Kr.style.position="relative"),this.Kr.style.boxSizing="content-box",this.Kr.addEventListener("fullscreenchange",this.hn),this.Kr.addEventListener("webkitfullscreenchange",this.hn);const r=i?i.maxFps:void 0;this.oo=r?-1===r?-1:0!==r?1e3/r:0:0;const o=new Map;let a=!1;const l=(t,i)=>s=>{const e=function(t){return{x:t.clientX,y:t.clientY}}(s);switch(s.type){case"pointerover":case"pointerenter":case"pointermove":case"pointerdown":o.set(s.pointerId,e);break;default:o.delete(s.pointerId),a=!1}switch(s.interactions=Array.from(o.values()),s.pointerType){case"pen":case"mouse":default:t&&t(s);break;case"touch":i&&i(s)}s.defaultPrevented&&(a=!0)};this.Kr.onwheel=this.ao(Zh.wheel),this.Kr.oncontextmenu=this.ao(Zh.contextmenu),this.Kr.onclick=this.ao(Zh.click),this.Kr.ondblclick=this.ao(Zh.dbclick),this.Kr.onlostpointercapture=()=>{a=!1},this.Kr.ontouchmove=t=>{a&&t.preventDefault()},this.Kr.onpointerover=l(),this.Kr.onpointerenter=l(this.Xn),this.Kr.onpointerdown=l(this.ao(Zh.mouseDown),this.lo(Qh.touchStart)),this.Kr.onpointermove=l(this.En,this.lo(Qh.touchMove)),this.Kr.onpointerup=l(this.ao(Zh.mouseUp),this.lo(Qh.touchEnd)),this.Kr.onpointercancel=l(),this.Kr.onpointerout=l(),this.Kr.onpointerleave=l(this.Yn,this.lo(Qh.touchEnd)),Yt.addEventListener("dragstart",this.Mn),Yt.addEventListener("scroll",this.rn,{passive:!0}),this.Tn=f(new p({r:0,g:0,b:0,a:0})),this.ls=new Xh(this)}uo(t,i){var s,e,h,r;(null===(s=this.Vn)||void 0===s?void 0:s.entity)===t.entity&&this.Vn.collectionMember===t.collectionMember&&(this.Vn={...i,info:this.Vn.info,event:this.Vn.event}),(null===(e=this.co)||void 0===e?void 0:e.entity)===t.entity&&this.co.collectionMember===t.collectionMember&&(this.co={...i,info:this.co.info}),(null===(h=this.Hn)||void 0===h?void 0:h.entity)===t.entity&&this.Hn.collectionMember===t.collectionMember&&(this.Hn={...i,info:this.Hn.info,event:this.Hn.event}),(null===(r=this._n)||void 0===r?void 0:r.entity)===t.entity&&this._n.collectionMember===t.collectionMember&&(this._n={...i,info:this._n.info,button:this._n.button,startLocation:this._n.startLocation})}do(){this.xn=!0,this.yn=void 0,this.mn=void 0}un(t){return this.L.on("render",t)}cn(t){return this.L.off(t)}fo(){return this.Ao}yo(){return this.mo}setBackgroundFillStyle(t){return this.po.Le(t),this.xs(),this}getBackgroundFillStyle(){return this.po.Qh()}setBackgroundStrokeStyle(t){return this.po.Be(t),this.xs(),this}getBackgroundStrokeStyle(){return this.po.vo()}So(t){return this.mn=t,this}bo(t){return this.yn=t,this}xo(t){return this.dn.get(t)}Mo(){return Array.from(this.dn.keys()).reverse().reduce(((t,i)=>i!==Number.MAX_SAFE_INTEGER&&i>t?i:t),0)+1}ao(t){return i=>this._o(t,i)}_o(t,i){if(!this.bn)return;t===Zh.contextmenu&&mi(i);const s=this.Ss({x:i.clientX,y:i.clientY});if(t===Zh.mouseUp){if(this._n){const t=this._n.entity.wn;if(t&&t(this._n.entity,i,this._n.button,this._n.startLocation,this._n.collectionMember,this._n.info),(null==s?void 0:s.entity)!==this._n.entity||s.collectionMember!==this._n.collectionMember){this._n.entity.Is=!1;const t=this._n.entity.On;t&&t(this._n.entity,i,this._n.collectionMember)}this._n=void 0}if(this.Hn){const t=this.Hn.entity.getMouseInteractions()&&this.Hn.entity.$n;t&&t(this.Hn.entity,i,this.Hn.collectionMember,this.Hn.info),this.Hn=void 0}}else if(s&&s.entity.getMouseInteractions()){const e=t===Zh.click?s.entity.wo:t===Zh.dbclick?s.entity.Co:t===Zh.mouseDown?s.entity.ko:t===Zh.wheel?s.entity.To:t===Zh.contextmenu?s.entity.Fo:void 0;if(e&&e(s.entity,i,s.collectionMember,s.info),t===Zh.mouseDown){this.Hn={entity:s.entity,collectionMember:s.collectionMember,event:i,info:s.info};const t=this.Hn.event.button,e=s.entity.Io;e&&e(s.entity,i,t,s.collectionMember,s.info),this._n={entity:s.entity,collectionMember:s.collectionMember,button:t,startLocation:n(i.clientX,i.clientY),info:s.info}}}this.Wn=i,this.Vn=s?{...s,event:i}:void 0}lo(t){return i=>this.Po(t,i)}Po(t,i){const s=i.interactions.length;if(this.Zn=i,this.co){const e=t===Qh.touchMove?this.co.entity.Do:t===Qh.touchEnd?this.co.entity.Bo:t===Qh.touchStart?this.co.entity.Lo:void 0;e&&e(this.co.entity,i,this.co.collectionMember,this.co.info),t===Qh.touchEnd&&0===s&&(this.co.entity.Is=!1,this.co=void 0)}else if(t===Qh.touchStart){for(let t=0;t<s&&(this.co=this.Ss({x:i.interactions[t].x,y:i.interactions[t].y}),!this.co);t+=1);if(this.co){this.co.entity.Is=!0;const t=this.co.entity.Lo;t&&t(this.co.entity,i,this.co.collectionMember,this.co.info)}}}Ro(t){return this.L.on("resize",t)}Eo(t){return this.L.off(t,"resize")}zo(){return this.L.topicOff("resize"),this}Vo(t){return this.L.on("inViewChange",t)}Oo(t){return this.L.off(t)}W(){if(!this.$i){if(this.$i=!0,this.dn)for(const t of this.dn.values())t.W();this.yn=void 0,this.mn=void 0,Yt.removeEventListener("dragstart",this.Mn),Yt.removeEventListener("scroll",this.rn),this.Kr.removeEventListener("fullscreenchange",this.hn),this.Kr.removeEventListener("webkitfullscreenchange",this.hn),this.no&&(this.no.disconnect(),this.no=void 0),this.pn.forEach((t=>{t()})),this.pn.length=0}}Oe(t,i){return n(t-this.An.x,this.An.y-i)}No(t,i){return n(t+this.An.x,this.An.y-i)}Go(t){const i=this.Oe(t.clientX,t.clientY);return{engineX:i.x,engineY:i.y}}Uo(t){const i=this.No(t.engineX,t.engineY);return{clientX:i.x,clientY:i.y}}}const hr=(t=1)=>({type:"horizontalProgressive",packager:(i,s,e)=>{if(i.length>1){const h=Fs(s,e*t),r=Math.abs(h.x),o=i.length,a=[];let l=0,u=0,c=i[0].x+r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.x<c&&u<o){const s=u;let e=t.y,h=t.y;for(;u<o&&i[u].x<=c;)i[u].y>e&&(e=i[u].y),i[u].y<h&&(h=i[u].y),u+=1;if(s!==u){const t=(a[l-1].x+i[u-1].x)/2;a[l+0]=n(t,h),a[l+1]=n(t,e),a[l+2]=i[u-1],l+=3}}c+=r}return a}return i.slice()}}),rr=(t=1)=>({type:"horizontalRegressive",packager:(i,s,e)=>{if(i.length>1){const h=Fs(s,e*t),r=Math.abs(h.x),o=i.length,a=[];let l=0,u=0,c=i[0].x-r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.x>c&&u<o){const s=u;let e=t.y,h=t.y;for(;u<o&&i[u].x>=c;)i[u].y>e&&(e=i[u].y),i[u].y<h&&(h=i[u].y),u+=1;if(s!==u){const t=(a[l-1].x+i[u-1].x)/2;a[l+0]=n(t,h),a[l+1]=n(t,e),a[l+2]=i[u-1],l+=3}}c-=r}return a}return i.slice()}}),nr=(t=1)=>({type:"verticalProgressive",packager:(i,s,e)=>{if(i.length>1){const h=Fs(s,e*t),r=Math.abs(h.y),o=i.length,a=[];let l=0,u=0,c=i[0].y+r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.y<c&&u<o){const s=u;let e=t.x,h=t.x;for(;u<o&&i[u].y<=c;)i[u].x>e&&(e=i[u].x),i[u].x<h&&(h=i[u].x),u+=1;if(s!==u){const t=(a[l-1].y+i[u-1].y)/2;a[l+0]=n(h,t),a[l+1]=n(e,t),a[l+2]=i[u-1],l+=3}}c+=r}return a}return i.slice()}}),or=(t=1)=>({type:"verticalRegressive",packager:(i,s,e)=>{if(i.length>1){const h=Fs(s,e*t),r=Math.abs(h.y),o=i.length,a=[];let l=0,u=0,c=i[0].y-r;for(;u<o;){const t=i[u];if(a[l]=t,l+=1,u+=1,t.y>c&&u<o){const s=u;let e=t.x,h=t.x;for(;u<o&&i[u].y>=c;)i[u].x>e&&(e=i[u].x),i[u].x<h&&(h=i[u].x),u+=1;if(s!==u){const t=(a[l-1].y+i[u-1].y)/2;a[l+0]=n(h,t),a[l+1]=n(e,t),a[l+2]=i[u-1],l+=3}}c-=r}return a}return i.slice()}});var ar;!function(t){t[t.Square=0]="Square",t[t.Circle=1]="Circle",t[t.HollowCircle=2]="HollowCircle",t[t.Triangle=3]="Triangle",t[t.Cross=4]="Cross",t[t.Diamond=5]="Diamond",t[t.Plus=6]="Plus",t[t.Minus=7]="Minus",t[t.Arrow=8]="Arrow",t[t.Star=9]="Star"}(ar||(ar={}));const lr={ProgressiveX:"ProgressiveX",ProgressiveY:"ProgressiveY",RegressiveX:"RegressiveX",RegressiveY:"RegressiveY"},ur=t=>"ProgressiveX"===t||"RegressiveX"===t?"x":"y",cr=t=>"ProgressiveX"===t||"ProgressiveY"===t;var dr;!function(t){t[t.Nearest=0]="Nearest",t[t.NearestX=1]="NearestX",t[t.NearestY=2]="NearestY"}(dr||(dr={}));const fr=(t,i,s,e,h,r,n,o,a,l)=>{const u=t.length;if(0===u)return;const c=e?1:0,d=u-(h?2:1);if(s===dr.Nearest)return Ar(t,i,r,n,c,d);if(s===dr.NearestX||s===dr.NearestY){if("boolean"==typeof l&&("x"===a&&s===dr.NearestX||"y"===a&&s===dr.NearestY))return mr(t,pt(i,n,r),a,l,c,d);if(s===dr.NearestX)return gr(t,pt(i,n,r),o,c,d);if(s===dr.NearestY)return yr(t,pt(i,n,r),o,c,d)}},Ar=(t,i,s,e,h,r)=>{let n,o=Number.MAX_VALUE;for(let a=h;a<=r;a+=1){const h=t[a];if(!Number.isNaN(h.x)&&!Number.isNaN(h.y)){const t=pt(h,s,e),r=(t.x-i.x)**2+(t.y-i.y)**2;r<o&&(o=r,n=a)}}return n},gr=(t,i,s,e,h)=>{if(i.x<s.min.x||i.x>s.max.x)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.x>i.x?e.x-i.x:i.x-e.x;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},yr=(t,i,s,e,h)=>{if(i.y<s.min.y||i.y>s.max.y)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.y>i.y?e.y-i.y:i.y-e.y;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},mr=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<u||o>d)||!n&&(o<c||o>f))return;let A=h,g=Math.floor((h+r)/2),y=r,m=-1;for(;;){const i=o-(n?t[g].x:t[g].y);if(i*(e?-1:1)>0)A=Math.min(g+1,y),m=Math.floor((A+y)/2);else{if(0===Math.abs(i))return g;y=Math.max(g-1,A),m=Math.floor((A+y)/2)}if(m===g){const s=g>h?Math.abs(o-(n?t[g-1].x:t[g-1].y)):es,e=g<r?Math.abs(o-(n?t[g+1].x:t[g+1].y)):es,a=Math.abs(i);switch(Math.min(a,s,e)){case s:return g-1;case e:return g+1;default:return g}}else g=m}},pr=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<u||o>d)||!n&&(o<c||o>f))return;let A=h,g=Math.floor((h+r)/2),y=r,m=-1;for(;;){const s=o-(n?t[g].x:t[g].y);if(s*(e?-1:1)>0)A=Math.min(g+1,y),m=Math.floor((A+y)/2);else{if(0===Math.abs(s))return{a:g,b:g,lerpAmount:0};y=Math.max(g-1,A),m=Math.floor((A+y)/2)}if(m===g){if(s*(e?-1:1)<0&&g>h){const s=t[g-1],e=t[g];return{a:g-1,b:g,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}if(g<r){const s=t[g],e=t[g+1];return{a:g,b:g+1,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}return{a:g,b:g,lerpAmount:0}}g=m}};let vr=0;class Sr{constructor(t,i,e){this.Wo=f(!0),this.Yo=!1,this.Is=!1,this.Ho=!1,this.$i=!1,this.ji=!0,this.Xo=void 0,this.$o=0,this.L=new s,this.Nn=void 0,this.Gn=void 0,this.On=void 0,this.wo=void 0,this.To=void 0,this.Fo=void 0,this.Co=void 0,this.ko=void 0,this.$n=void 0,this.Io=void 0,this.Un=void 0,this.wn=void 0,this.Lo=void 0,this.Do=void 0,this.Bo=void 0,this.onDispose=t=>this.L.on("dispose",t),this.offDispose=t=>this.L.off(t,"dispose"),this.us=t,this.jo=i,this.Zo=e,this.Qo=vr,vr+=1,this.Jo=t.qi.highlightColorOffset}Ko(){let t;return this.qo("DataPattern",(i=>(t=i.pattern,!0))),"ProgressiveX"===t||"RegressiveX"===t?dr.NearestX:"ProgressiveY"===t||"RegressiveY"===t?dr.NearestY:dr.Nearest}ta(t){return void 0!==this.Zo.find((i=>i.type===t))}qo(t,i){var s;return!!this.ta(t)&&!0===i(null===(s=this.Zo.find((i=>i.type===t)))||void 0===s?void 0:s.args)}dispose(){return this.$i||(this.Is&&this.On&&this.On(this,void 0,void 0),this.$i=!0,this.jo(this),this.L.emit("dispose",this)),this}isDisposed(){return this.$i}setVisible(t){const i=this.ji;return this.ji=t,!t&&i&&(this.Is&&this.On&&this.On(this,void 0,void 0),this.Is=!1),this}getVisible(){return this.ji}setMouseInteractions(t){const i=this.Wo._();return this.Wo.M(t),t||(i&&this.Is&&this.On&&this.On(this,void 0,void 0),this.Is=!1),this}getMouseInteractions(){return this.Wo._()}getIsUnderMouse(){return this.Is}getIsGrabbed(){return this.Ho}setMouseMoveEventHandler(t){return this.Nn=t,this}setMouseEnterEventHandler(t){return this.Gn=t,this}setMouseLeaveEventHandler(t){return this.On=t,this}setMouseClickEventHandler(t){return this.wo=t,this}setMouseDoubleClickEventHandler(t){return this.Co=t,this}setMouseDownEventHandler(t){return this.ko=t,this}setMouseUpEventHandler(t){return this.$n=t,this}setMouseWheelEventHandler(t){return this.To=t,this}setMouseContextMenuEventHandler(t){return this.Fo=t,this}setMouseDragEventHandler(t){return this.Un=t,this}setMouseDragStartEventHandler(t){return this.Io=t,this}setMouseDragStopEventHandler(t){return this.wn=t,this}setTouchStartEventHandler(t){return this.Lo=t,this}setTouchMoveEventHandler(t){return this.Do=t,this}setTouchEndEventHandler(t){return this.Bo=t,this}ia(t){return this.Xo=t,this}sa(){return this.Xo?this.Xo:br}cs(t){return this.$o=t,this}ea(){return this.$o}ha(t){return this.Jo=t,this}ra(){return this.Jo}}const br=c(n(0,0),n(0,0));class xr extends Sr{constructor(t,i,s,e){super(t,s,e),this.na=0,this.Ls=i,this.Ls.oa=!0}aa(){}la(t){return this.na===t||(this.na=t,this.Ls.oa=!0),this}ua(){return this.na}}class Mr extends xr{constructor(t,i,s,e,h){super(t,i,e,h),this.ca=!0,this.ft=s}}const _r=(t,i,s)=>{if(s instanceof ee){const e=s.Gi(),h=Ds(i,{x:Math.abs(e.x),y:Math.abs(e.y)});return c(n(t.min.x-h.x,t.min.y-h.y),n(t.max.x+h.x,t.max.y+h.y))}return c(s.gi(n(t.min.x,t.min.y),Fs(i,-1)),s.gi(n(t.max.x,t.max.y),i))},wr=(t,i)=>"function"==typeof i?i(t):i,Cr=(t,i)=>!t||t!==i,kr=(t,i)=>t===O&&i!==O,Tr=t=>t!==O;class Fr extends Mr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Fe=sr.fillStyle,this.us=t}Le(t){return this.Fe=wr(this.Fe,t),this}Qh(){return this.Fe}da(){return Cr(this.fa,this.Fe)}Aa(){return kr(this.fa,this.Fe)}ga(){return Tr(this.Fe)}ya(t){this.fa=t}}class Ir extends Fr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Ie=sr.lineStyle,this.us=t}Be(t){return this.Ie="function"==typeof t?t(this.Ie):t,this}vo(){return this.Ie}ma(){return!this.pa||this.pa!==this.Ie}va(t){return!this.pa||this.pa.getThickness()!==t}ga(){return this.Ie!==dt||super.ga()}Aa(){return(this.Ie!==dt||this.Fe!==O)&&this.pa===dt&&this.fa===O}Sa(t){this.pa=t}}class Pr extends Fr{constructor(t,i,s,e,h,r=f(5)){super(t,i,s,e,h),this.size=f(5),this.size=r}tt(t){return this.size.M(t),this}}class Dr extends Fr{constructor(t,i,s,e,h,r=f(sr.font)){super(t,i,s,e,h),this.ba=f(""),this.xa=f(n(0,0)),this.Ma=f(0),this._a=f(0),this.wa=f(n(0,0)),this.Ca=f(0),this.ka=f(zh),this.Ta=n(0,0),this.Xt=f(A(1,1,1,1)),this.Fa=f(g(4,4,4,4)),this.font=f(sr.font),this.Ia=!1,this.font=r}ga(){return Tr(this.Fe)&&this.ba._().length>0}Aa(){return!1===this.Ia&&this.ga()}vr(t){return this.ba.M(t),this}kr(){return this.ba._()}tr(t){return Eh(t)?this.ka.M(t):this.ka.M(t(this.ka._())),this}qh(){return this.ka._()}Pa(t){return this.ka.M(this.ka._().setFamily(t)),this}Da(){return this.ka._().getFamily()}Ba(t){return this.ka.M(this.ka._().setSize(t)),this}La(){return this.ka._().getSize()}Ra(t){return this.ka.M(this.ka._().setWeight(t)),this}Ea(){return this.ka._().getWeight()}za(t){return this.ka.M(this.ka._().setStyle(t)),this}Va(){return this.ka._().getStyle()}Oa(t){return this.ka.M(this.ka._().setVariant(t)),this}Na(){return this.ka._().getVariant()}ze(t){return this.xa.M(t),this}Ga(){return this.xa._()}ir(t){return this.Ca.M(t),this}sr(){return this.Ca._()}Ua(t,i){return this.wa.M(n(t,i)),this}Wa(){return this.wa._()}Ya(t){return this._a.M(t),this}Ha(){return this._a._()}Xa(t){return this.Ma.M(t),this}$a(){return this.Ma._()}ja(t){return this._a.M(t.x),this.Ma.M(t.y),this}Nr(t){return this.Xt.M(t),this}Za(){return this.Xt._()}Gr(t){return this.Fa.M(t),this}Qa(){return this.Fa._()}}class Br extends Pr{constructor(t,i,s,e,h,r=5){super(t,i,s,e,h,f(r)),this.Ja=[],this.Ka=f(ar.Square),this.Ca=f(0),this.qa=f(!1),this.tl=f(!1),this.il=f(!1),this.sl=rs,this.el=0,this.hl=[],this.rl=0,this.nl=rs,this.ol=!1,this.al=void 0}ll(){return this.hl}ul(){return this.Ja}cl(t){return this.Ka.M(t),this}dl(){return this.Ka._()}ir(t){return this.Ca.M(t),this}sr(){return this.Ca._()}fl(t){return this.qa.M(t),this}Al(t){return this.tl.M(t),this}yl(t){return this.il.M(t),this}ml(t,i){return Array.isArray(t)||(t=[t]),this.rl+=t.length,this.hl=ki(this.hl,t,{canReturnB:!0}),this.nl&&(this.nl=i?bs(this.nl,i):void 0),this.al=void 0,this}Vt(){return this.ol=!0,this.Ja.length=0,this.el=0,this.sl=rs,this.hl=[],this.rl=0,this.al=void 0,this}pl(){return this.el}vl(){return this.rl}}class Lr extends Ir{constructor(t,i,s,e,h){super(t,i,s,e,h),this.xa=f(n(0,0)),this.j=f(n(100,100)),this.Ca=f(0),this.Ta=f(n(0,0)),this.Sl=!1}Vs(){return this.bl(),this}ze(t){const i=this.xa._();return t.x===i.x&&t.y===i.y||(this.xa.M(t),this.bl()),this}Ga(){return this.xa._()}xl(t){const i=this.xa._();return t!==i.x&&(this.xa.M(n(t,i.y)),this.bl()),this}Ml(t){const i=this.xa._();return t!==i.y&&(this.xa.M(n(i.x,t)),this.bl()),this}tt(t){const i=this.j._();return t.x===i.x&&t.y===i.y||(this.j.M(n(t.x,t.y)),this.bl()),this}ni(){return this.j._()}_l(t){const i=this.j._();return t!==i.x&&(this.j.M(n(t,i.y)),this.bl()),this}wl(t){const i=this.j._();return t!==i.x&&(this.j.M(n(i.x,t)),this.bl()),this}ir(t){return this.Ca.M(t),this}sr(){return this.Ca._()}Cl(t){const i=this.Ta._();return t===i&&i.x===t.x&&i.y===t.y||(void 0===t?(this.Sl=!1,this.bl()):(this.Sl=!0,this.Ta.M(t))),this}bl(){if(!this.Sl){const t=this.xa._(),i=this.j._(),s=n(t.x+i.x/2,t.y+i.y/2),e=this.Ta._();s.x===e.x&&s.y===e.y||this.Ta.M(s)}}}class Rr extends Ir{constructor(){super(...arguments),this.Ja=[],this.xa=f(n(0,0)),this.sl=rs,this.kl=!1}Tl(t){return t=xi(t),this.Ja=t,this.kl=!0,this}Fl(){return this.Ja}vt(){return this.sl.max.x}yt(){return this.sl.min.x}bt(){return this.sl.max.y}St(){return this.sl.min.y}Il(){return 0}Pl(){return 0}}class Er extends Rr{}class zr extends Fr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Dl=new Array,this.Bl=new Array,this.Ll=f({type:"disabled",packager:(t,i,s)=>t.slice()}),this.sl=rs,this.Rl=0,this.El=!1,this.hl=[Array(),Array()],this.zl=!1,this.Vl=(new W).setColor(S(42,171,240)),this.ol=!1,this.Ol=!1,this.Nl=!1}ml(t,i){const s=this.Rl-1,e=s>0&&!this.zl;let[h,r]=e?[[this.Dl[s]],[this.Bl[s]]]:[[],[]];if(t instanceof Array){const[i,s]=u(t);h=ki(h,i,{canReturnB:!0}),r=ki(r,s,{canReturnB:!0})}else{const i=t.position;h.push(n(i,t.high)),r.push(n(i,t.low))}return this.zl?(this.hl[0]=ki(this.hl[0],h,{canReturnB:!0}),this.hl[1]=ki(this.hl[1],r,{canReturnB:!0})):(this.hl=[h,r],this.zl=!0),this.sl=bs(this.sl,i||bs(vs(h),vs(r))),this}Vt(){return this.ol=!0,this.Dl.length=0,this.Bl.length=0,this.Rl=0,this.sl=rs,this}ul(){return[this.Dl,this.Bl]}ll(){return[this.hl[0],this.hl[1]]}Gl(t){return this.Ll.M(t),this}Ul(){return this.Ll._()}Wl(t){return this.Vl="function"==typeof t?t(this.Vl):t,this}Yl(){return this.Vl}pl(){return this.Rl-(Number(this.Ol)+Number(this.Nl))}vl(){return this.hl.length}Hl(t){return this.Ol=t,this}Xl(){return this.Ol}$l(t){return this.Nl=t,this}jl(){return this.Nl}Aa(){return this.fa===O&&this.Zl===O&&(this.Fe!==O||this.Vl!==O)}Ql(t){this.Zl=t}ga(){return this.Vl!==O||super.ga()}da(){return super.da()||!this.Zl||this.Zl!==this.Vl}}class Vr extends Ir{constructor(t,i,s,e,h){super(t,i,s,e,h),this.xa=f(n(0,0)),this.Jl=f(0),this.Ti=f(360),this.Kl=f(100),this.ql=f(100),this.tu=f(0),this.iu=f(void 0),this.su=n(0,0),this.eu=n(0,0),this.hu=n(0,0)}ru(){return this.Kl._()}nu(){return this.ql._()}Ga(){return this.xa._()}ou(){return this.Jl._()}ki(){return this.Ti._()}au(){return this.tu._()}lu(){return this.iu._()}uu(){return this.su}cu(){return this.eu}du(){return this.hu}ze(t){return this.xa.M(t),this}fu(t){return this.Jl.M(t),this}He(t){return this.Ti.M(t),this}Au(t){return this.ql.M(t),this.Kl.M(t),this}gu(t){return this.Kl.M(t),this}yu(t){return this.ql.M(t),this}mu(t){return this.tu.M(t<0?0:t),this}pu(t){return this.iu.M(void 0!==t&&t<=0?void 0:t),this}}var Or;!function(t){t[t.Complex=0]="Complex",t[t.Simple=1]="Simple"}(Or||(Or={}));const Nr=(t,i)=>"function"==typeof i?i(t):i,Gr=(t,i)=>!t||t!==i,Ur=(t,i)=>!t||t.getThickness()!==i,Wr=(t,i)=>t===dt&&i!==dt,Yr=t=>t!==dt&&t.getFillStyle()!==O;class Hr extends Mr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.vu=sr.lineStyle,this.engine=t}We(t){return this.vu=Nr(this.vu,t),this}Su(){return this.vu}ma(){return Gr(this.bu,this.vu)}xu(t){return Ur(this.bu,t)}Aa(){return Wr(this.bu,this.vu)}ga(){return Yr(this.vu)}Mu(t){this.bu=t}}class Xr extends Hr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Ii=n(0,0),this.Ti=n(0,0),this._u=!1}M({min:t,max:i}){return t.x===this.Ii.x&&t.y===this.Ii.y&&i.x===this.Ti.x&&i.y===this.Ti.y||(this._u=!0,this.Ii=t,this.Ti=i),this}Fi(){return this.Ii}ki(){return this.Ti}Xe(t){return t.x===this.Ii.x&&t.y===this.Ii.y||(this._u=!0,this.Ii=t),this}He(t){return t.x===this.Ti.x&&t.y===this.Ti.y||(this._u=!0,this.Ti=t),this}}class $r extends Hr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.wu=void 0,this.Cu=0}}class jr extends Hr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ku=[],this.sl=rs,this.hl=new Array,this.el=0,this.ol=!1,this.Tu=f(void 0),this.Ol=!1,this.Nl=!1}Fu(t){return this.Tu.M(t),this}Iu(){return this.Tu._()}ll(){return this.hl}ul(){return this.ku}Vt(){return this.ol=!0,this.ku.length=0,this.el=0,this.hl=[],this.sl=rs,this}pl(){return this.el-(Number(this.Ol)+Number(this.Nl))}vl(){return this.hl.length}Hl(t){return this.Ol=t,this}Xl(){return this.Ol}$l(t){return this.Nl=t,this}jl(){return this.Nl}}const Zr=t=>{const i=t.getDraggingMode();return void 0!==i&&i!==Gt.notDraggable?i===Gt.draggable?Ke.Move:i===Gt.onlyHorizontal?Ke.Horizontal:Ke.Vertical:void 0};class Qr{constructor(){this.ji=!0,this.L=new s,this.Pu=0,this.Mt=(t,i,s)=>{0===this.Pu&&this.L.emit("mouseEnter",this,i),this.Pu+=1},this._t=(t,i,s)=>{this.Pu-=1,this.Pu<1&&(this.L.emit("mouseLeave",this,i),this.Pu=0)},this.wt=(t,i,s)=>{this.L.emit("mouseClick",this,i)},this.Ct=(t,i,s)=>{this.L.emit("mouseDoubleClick",this,i)},this.kt=(t,i,s)=>{this.L.emit("mouseDown",this,i)},this.Tt=(t,i,s)=>{this.L.emit("mouseUp",this,i)},this.Ft=(t,i,s)=>{this.L.emit("mouseMove",this,i)},this.Pt=(t,i,s,e)=>{this.L.emit("mouseDragStart",this,i,s)},this.It=(t,i,s,e,h,r)=>{this.L.emit("mouseDrag",this,i,s,e,h)},this.Dt=(t,i,s,e,h)=>{this.L.emit("mouseDragStop",this,i,s,e)},this.Bt=(t,i,s)=>{this.L.emit("mouseWheel",this,i)},this.Lt=(t,i)=>{this.Pu+=1,this.L.emit("touchStart",this,i)},this.Rt=(t,i)=>{this.L.emit("touchMove",this,i)},this.Et=(t,i)=>{this.Pu-=1,this.L.emit("touchEnd",this,i)},this.Du=t=>(t instanceof Mr?t.setMouseEnterEventHandler(this.Mt).setMouseLeaveEventHandler(this._t).setMouseClickEventHandler(this.wt).setMouseDoubleClickEventHandler(this.Ct).setMouseDownEventHandler(this.kt).setMouseUpEventHandler(this.Tt).setMouseMoveEventHandler(this.Ft).setMouseDragEventHandler(this.It).setMouseDragStartEventHandler(this.Pt).setMouseDragStopEventHandler(this.Dt).setMouseWheelEventHandler(this.Bt).setTouchStartEventHandler(this.Lt).setTouchMoveEventHandler(this.Rt).setTouchEndEventHandler(this.Et):(t.onMouseEnter(((t,i)=>this.Mt(t,i))),t.onMouseLeave(((t,i)=>this._t(t,i))),t.onMouseClick(((t,i)=>this.wt(t,i))),t.onMouseDoubleClick(((t,i)=>this.Ct(t,i))),t.onMouseDown(((t,i)=>this.kt(t,i))),t.onMouseUp(((t,i)=>this.Tt(t,i))),t.onMouseMove(((t,i)=>this.Ft(t,i))),t.onMouseDrag(((t,i,s,e,h)=>this.It(t,i,s,e,h))),t.onMouseDragStart(((t,i,s)=>this.Pt(t,i,s))),t.onMouseDragStop(((t,i,s,e)=>this.Dt(t,i,s,e))),t.onMouseWheel(((t,i)=>this.Bt(t,i))),t.onTouchStart(((t,i)=>this.Lt(t,i))),t.onTouchMove(((t,i)=>this.Rt(t,i))),t.onTouchEnd(((t,i)=>this.Et(t,i)))),t)}onMouseEnter(t){return this.L.on("mouseEnter",t)}onMouseLeave(t){return this.L.on("mouseLeave",t)}onMouseClick(t){return this.L.on("mouseClick",t)}onMouseDoubleClick(t){return this.L.on("mouseDoubleClick",t)}onMouseDown(t){return this.L.on("mouseDown",t)}onMouseUp(t){return this.L.on("mouseUp",t)}onMouseMove(t){return this.L.on("mouseMove",t)}onMouseDragStart(t){return this.L.on("mouseDragStart",t)}onMouseDrag(t){return this.L.on("mouseDrag",t)}onMouseDragStop(t){return this.L.on("mouseDragStop",t)}onMouseWheel(t){return this.L.on("mouseWheel",t)}onTouchStart(t){return this.L.on("touchStart",t)}onTouchMove(t){return this.L.on("touchMove",t)}onTouchEnd(t){return this.L.on("touchEnd",t)}offMouseEnter(t){return this.L.off(t,"mouseEnter")}offMouseLeave(t){return this.L.off(t,"mouseLeave")}offMouseClick(t){return this.L.off(t,"mouseClick")}offMouseDoubleClick(t){return this.L.off(t,"mouseDoubleClick")}offMouseDown(t){return this.L.off(t,"mouseDown")}offMouseUp(t){return this.L.off(t,"mouseUp")}offMouseMove(t){return this.L.off(t,"mouseMove")}offMouseDragStart(t){return this.L.off(t,"mouseDragStart")}offMouseDrag(t){return this.L.off(t,"mouseDrag")}offMouseDragStop(t){return this.L.off(t,"mouseDragStop")}offMouseWheel(t){return this.L.off(t,"mouseWheel")}offTouchStart(t){return this.L.off(t,"touchStart")}offTouchMove(t){return this.L.off(t,"touchMove")}offTouchEnd(t){return this.L.off(t,"touchEnd")}getIsUnderMouse(){return this.Pu>0}setVisible(t){const i=this.ji!==t;return this.ji=t,i&&this.L.emit("visibleStateChanged",this,this.ji),this}getVisible(){return this.ji}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}}const Jr=(t,i,s)=>{const e=t.getDraggingMode();if(e!==Gt.notDraggable){const h=t.scale.gi(t.getPosition(),{x:e!==Gt.onlyVertical?i.x:0,y:e!==Gt.onlyHorizontal?i.y:0}),r=t.scale,n=t.getSize(),o=t.getOrigin(),a=r.gi({x:r.x.getInnerStart(),y:r.y.getInnerStart()},Ds({x:(1+o.x)/2,y:(1+o.y)/2},n)),l=r.gi({x:r.x.getInnerEnd(),y:r.y.getInnerEnd()},Ds({x:(o.x-1)/2,y:(o.y-1)/2},n)),u={x:Math.min(Math.max(h.x,a.x),l.x),y:Math.min(Math.max(h.y,a.y),l.y)};t.setPosition(u),mi(s)}},Kr=(t,i,s,e,h)=>{Jr(t,h,i)},qr=(t,i,s,e,h)=>{Jr(t,e,h)};class tn extends Qr{constructor(t,i,s,e,h){super(),this.position=n(50,50),this.origin=n(0,0),this.size=n(0,0),this.$i=!1,this.Bu=void 0,this.Lu=void 0,this.Ru=Zr,this.Eu=void 0,this.Wo=!0,this.zu=()=>{const t="function"==typeof this.Ru?this.Ru(this):this.Ru;t&&(this.Lu=this.Ls.us.qr(t))},this.Vu=()=>{this.Ls.us.tn(this.Lu)},this.Xt=A(0,0,0,0),this.Ls=t,this.renderingScale=i,this.scale=s,this.jo=e,this.qi=h,this.Ls.xs(),this.onMouseEnter(this.zu),this.onMouseLeave(this.Vu),this.onMouseDrag(Kr);const r=ve(new be(Zt,qr,Zt));this.onTouchStart(r.onTouchStart),this.onTouchMove(r.onTouchMove),this.onTouchEnd(r.onTouchEnd),this.qi=h}setMouseInteractions(t){return this.Ou().forEach((i=>i.setMouseInteractions(t))),this.Wo=t,this}getMouseInteractions(){return this.Wo}setEffect(t){return this.es=this.es||this.Ls.us.es.hs(this,{Nu:{shapes:this.Ou()}}),this.es.Nu.bs(t),this}getEffect(){return!!this.es&&this.es.Nu.Ms()}setAutoDispose(t){return this.Eu=t,this.Ls.xs(),this}getAutoDispose(){return this.Eu}getSize(t=Ot.Everything){return t===Ot.Everything?n(this.size.x+(this.Xt.left+this.Xt.right),this.size.y+(this.Xt.bottom+this.Xt.top)):this.size}setContentSize(t){this.size=t}setMargin(t){return this.Xt="object"==typeof t?y(this.Xt,t):{left:t,top:t,right:t,bottom:t},this.Ls.xs(),this}getMargin(){return this.Xt}Ee(){if(this.Eu){const t=this.size,i=this.renderingScale.ni(),s={x:t.x/i.x,y:t.y/i.y};("max-width"===this.Eu.type&&s.x>=this.Eu.maxWidth||"max-height"===this.Eu.type&&s.y>=this.Eu.maxHeight)&&this.dispose()}return this}Vs(){return this}dispose(){return this.$i||(this.Ls.xs(),this.$i=!0,this.jo(this),this.L.emit("dispose",this),this.Ou().forEach((t=>t.dispose()))),this}setVisible(t){return super.setVisible(t),this.Ou().forEach((i=>i.setVisible(t))),this.Ls.xs(),this}isDisposed(){return this.$i}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setPosition(t){return this.position=t,this.Ls.xs(),this}getPosition(t=this.origin,i=Ot.Everything){const s=this.getSize(Ot.Everything),e=this.scale.gi(this.position,Ds({x:-(this.origin.x+1)/2,y:-(this.origin.y+1)/2},s));if(i===Ot.Everything)return this.scale.gi(e,Ds({x:(t.x+1)/2,y:(t.y+1)/2},s));const h=this.scale.gi(e,{x:this.Xt.left,y:this.Xt.bottom}),r=this.getSize(Ot.Content);return this.scale.gi(h,Ds({x:(t.x+1)/2,y:(t.y+1)/2},r))}setOrigin(t){return this.origin=t,this.Ls.xs(),this}getOrigin(){return this.origin}setDraggingMode(t=Gt.notDraggable){return this.Bu=t,this.Ls.xs(),this}getDraggingMode(){return void 0!==this.Bu?this.Bu:Gt.notDraggable}setMouseStyle(t){return this.Ru=t,this}getMouseStyle(){return this.Ru}}class sn extends tn{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Fa=A(),this.Gu=0,this.Ls=t,this.Uu=e,this.backgroundElement=new this.Uu(this.Ls,this.renderingScale,this.scale,Zt,r),this.Du(this.backgroundElement)}Ou(){return this.backgroundElement.Ou()}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}setBackground(t){return t(this.backgroundElement),this}getBackground(){return this.backgroundElement}Ee(){return super.Ee(),this.$i||(void 0!==this.na&&(this.backgroundElement.na=this.na-.01),this.backgroundElement.setOrigin(this.origin).setPosition(this.getPosition(this.origin,Ot.PaddedBackground)).Ee()),this}Vs(){const t=this.getSize(Ot.PaddedContent);return this.backgroundElement.Wu(t).Vs(),super.Vs()}dispose(){return super.dispose(),this.backgroundElement.dispose(),this}setVisible(t){return super.setVisible(t),this.backgroundElement.setVisible(t),this}setPadding(t){return this.Fa="object"==typeof t?y(this.Fa,t):{left:t,top:t,right:t,bottom:t},this.Ls.xs(),this}getPadding(){return this.Fa}getSize(t=Ot.Everything){let i=super.getSize(t);return t>=Ot.PaddedContent&&(i=n(i.x+this.Fa.left+this.Fa.right,i.y+this.Fa.bottom+this.Fa.top)),t>=Ot.PaddedBackground&&(i=n(i.x+this.backgroundElement.Yu()+this.backgroundElement.Hu(),i.y+this.backgroundElement.Xu()+this.backgroundElement.$u())),i}getPosition(t=this.origin,i=Ot.Everything){if(i===Ot.Everything)return super.getPosition(t,i);const s=super.getPosition(n(-1,-1),Ot.Everything),e=this.getMargin(),h=this.scale.gi(s,{x:e.left,y:e.bottom});if(i===Ot.PaddedBackground){const i=this.getSize(Ot.PaddedBackground);return this.scale.gi(h,Ds({x:(t.x+1)/2,y:(t.y+1)/2},i))}const r=this.scale.gi(h,{x:this.backgroundElement.Yu(),y:this.backgroundElement.Xu()});if(i===Ot.PaddedContent){const i=this.getSize(Ot.PaddedContent);return this.scale.gi(r,Ds({x:(t.x+1)/2,y:(t.y+1)/2},i))}const o=this.getPadding(),a=this.scale.gi(r,{x:o.left,y:o.bottom}),l=this.getSize(Ot.Content);return this.scale.gi(a,Ds({x:(t.x+1)/2,y:(t.y+1)/2},l))}setMouseInteractions(t){return super.setMouseInteractions(t),this.backgroundElement.setMouseInteractions(t),this}getHighlight(){return this.Gu}setHighlight(t){return this.Gu=Ui(t),this.backgroundElement.setHighlight(t),this.L.emit("highlight",this,t),this}}const en=t=>"setBackground"in t;class hn extends Qr{constructor(t,i,s,e,h,r,n,o,a,l,u){super(),this.S=0,this.ju=1,this.Zu=!0,this.Qu=new Rh,this.Ju=!0,this.$i=!1,this.axisScale=e,this.renderingScale=h,this.Ku=n,this.qu=o,this.tc=a,this.jo=l,this.ic=i,this.sc=s,this.hc=this.Du(this.ic.Ye(this.renderingScale)),this.qi=u,this.rc=this.Du(this.tc.setDirection(this.qu).nc(this.sc,this.renderingScale,r,Zt,this.qi,!1).setOrigin(gi(this.qu))),this.axis=t,this.setMouseInteractions(!1),"major"===this.rc.oc?this.hc.We(u.xAxisNumericTicks.majorTickStyle.gridStrokeStyle):"minor"===this.rc.oc?this.hc.We(u.xAxisNumericTicks.minorTickStyle.gridStrokeStyle):"other"===this.rc.oc&&this.hc.We(u.cursorGridStrokeStyleX)}setValue(t){return this.S=t,this.sc.xs(),this.L.emit("valueChange",this,this.S),this}getValue(){return this.S}setTextFormatter(t){return this.ac=t,this.sc.xs(),this}setTickLength(t){return this.rc.setPointerLength(t),this.ic.xs(),this}getTickLength(){return this.rc.getPointerLength()}setTickLabelPadding(t){return this.rc.setTickLabelPadding(t),this.ic.xs(),this}setTickLabelRotation(t){return this.rc.setTextRotation(t),this.ic.xs(),this}getTickLabelRotation(){return this.rc.getTextRotation()}getTickLabelPadding(){return this.rc.getTickLabelPadding()}setGridStrokeLength(t){return this.ju=t,this.ic.xs(),this}getGridStrokeLength(){return this.ju}setGridStrokeStyle(t){return this.hc.We(t),this.ic.xs(),this}getGridStrokeStyle(){return this.hc.Su()}dispose(){return this.$i||(this.$i=!0,this.hc.dispose(),this.rc.dispose(),this.jo(this),this.ic.us.xs(),this.L.emit("dispose",this)),this}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setMarkerVisible(t){return this.Zu=t,this.sc.xs(),this}getMarkerVisible(){return this.Zu}setMarker(t){return t(this.rc),this.sc.xs(),this}getMarker(){return this.rc}setMouseInteractions(t){return this.rc.setMouseInteractions(t),this.hc.setMouseInteractions(t),this}getMouseInteractions(){return this.hc.getMouseInteractions()}setAllocatesAxisSpace(t){return this.Ju=t,this.sc.xs(),this}getAllocatesAxisSpace(){return this.Ju}isInScale(){return As(this.S,this.axisScale.getInnerStart(),this.axisScale.getInnerEnd())}onValueChange(t){return this.L.on("valueChange",t)}offValueChange(t){return this.L.off(t,"valueChange")}}class rn extends hn{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,u,a,l),this.lc=!1,this.jo=a,this.ic=i,this.sc=s}dispose(){return this.lc=!1,super.dispose()}update(){return this}plot(t,i,s,e,h){if(this.isInScale()&&this.getVisible()&&t){this.lc=!1;const t=mt(this.S,this.axisScale,this.Ku.getWidth(this.renderingScale));this.hc.setVisible(!0).Xe(this.Ku.toPoint(t,i)).He(this.Ku.toPoint(t,i-(e+s*this.ju))),this.Zu?(this.ac&&this.rc.setText(this.ac(this.S,this)),this.rc.setVisible(!0).setPosition(this.Ku.toPoint(t,h))):this.rc.setVisible(!1)}else this.hc.setVisible(!1),this.rc.setVisible(!1);return this.rc.Vs().Ee(),this}uc(){const t=this.rc.Vs().getSize();return this.Ku.getHeight(t)}}const nn=(t,i)=>t.setTextFillStyle(i.uiTextFillStyle).setTextFont(i.uiTextFont),on=(t,i)=>(Pi(t.setButtonSize(i.uiButtonSize),i,!1,{fill:i.uiButtonFillStyle}),t),an=(t,i,s)=>{s&&en(t)&&t.setBackground((t=>t.setFillStyle(i.uiBackgroundFillStyle).setStrokeStyle(i.uiBackgroundStrokeStyle))).setEffect(!0)},ln={uiElement:void 0,stylers:t.List(),addStyler(t){return{...this,stylers:this.stylers.push(t)}},applyStylers(t,i){return this.stylers.forEach((s=>void 0!==s?s(t,i):void 0)),t}},un={background:void 0,setBackground(t){return{...this,background:t}}},cn={nc(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,e,h),h);return an(n,h,r),n}},dn={nc(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.background,e,h),h);return an(n,h,r),n}};class fn extends tn{constructor(){super(...arguments),this.cc=!0}Ee(){return super.Ee(),this}setMouseInteractions(t){return this.cc=t,this}getMouseInteractions(){return this.cc}Ou(){return[]}}class An extends fn{onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}Wu(t){return this.size=t,this}Yu(){return 0}Hu(){return 0}$u(){return 0}Xu(){return 0}setHighlight(t){return this}getHighlight(){return 0}setFillStyle(){return this}getFillStyle(){return O}setStrokeStyle(){return this}getStrokeStyle(){return dt}setStrokeThickness(){return this}getStrokeThickness(){return 0}}class gn extends tn{constructor(){super(...arguments),this.L=new s,this.Gu=0}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}getHighlight(){return this.Gu}setHighlight(t){return this.Gu=t,this.Ou().forEach((i=>i.cs(t))),this.L.emit("highlight",this,t),this.Ls.xs(),this}}class yn extends gn{}class mn extends yn{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Ls=t,this.Ka=this.Ls.dc(this.renderingScale,Or.Simple).setVisible(!1).Le(O).Be(dt),this.Du(this.Ka)}fc(){const t=this.Ac();if(t.length>2){const i=vs(t),s=n(i.max.x-i.min.x,i.max.y-i.min.y);this.setContentSize(s);const e=t.map((t=>{const e=Is(t,Fs(i.min,-1));return this.scale.gi(this.position,Is(e,Ds(Fs(Is(this.origin,n(1,1)),-.5),s)))})).map((t=>pt(t,this.scale,this.renderingScale)));this.Ka.Tl(e).setVisible(this.getVisible()).setVisible(this.getVisible())}else this.Ka&&this.Ka.setVisible(!1),this.setContentSize(n(0,0))}Ee(){return super.Ee(),this.$i||(this.fc(),void 0!==this.na&&this.Ka.la(this.na)),this}Vs(){return this.fc(),super.Vs()}setVisible(t){return super.setVisible(t),this.Ka.setVisible(t),this}}const pn=(t,i,s)=>t*(1-s)+i*s,vn=(t,i,s,e,h)=>{if(void 0===i.value||void 0===s.value||void 0===e.value||void 0===h.value)return;const r=(t.x-s.point.x)/(h.point.x-s.point.x),n=(h.point.y-s.point.y)*r+s.point.y,o=(t.x-i.point.x)/(e.point.x-i.point.x),a=(e.point.y-i.point.y)*o+i.point.y,l=(t.y-a)/(n-a),u=pn(s.value,h.value,r),c=pn(i.value,e.value,o);return pn(c,u,l)},Sn={warm:t=>i=>x(60/(t-1)*i,.8,.8),cold:t=>i=>x(60/(t-1)*i+180,.8,.8),fullSpectrum:t=>i=>x(360/t*i,.8,.8),reverseSpectrum:t=>i=>x(360/t*(t-i),.8,.8),flatUI:t=>i=>x(360/t*i+8,.8,.8-.15/t*i),arction:t=>i=>{const s=1-.2/t*i;return x(360/t*i+51,s,s)},arctionWarm:t=>i=>{const s=t-1,e=1-.2/s*i;return x(46-46/s*i+4,e,e)},sunset:t=>i=>{const s=[170,320];return x(i%2?s[0]:s[1],.8,.5+.5/(t-1)*i)},dynamic:t=>i=>{const s=i%2,e=[234,346];return x(s?e[0]:e[1],s?.3:.9,.5+.5/(t-1)*i)},magenta:t=>i=>{const s=[.9,.6];return x(354,i%2?s[0]:s[1],.5+.5/(t-1)*i)},greyscale:t=>i=>x(0,0,.25+.5/(t-1)*i),frozen:t=>i=>{const s=[.8,.6];return x(160+80/(t-1)*i,.6,i%2?s[0]:s[1])},retro:t=>i=>{const s=[6,183];return x(i%2?s[0]:s[1],.7,.5+.5/(t-1)*i)},crayons:t=>i=>{let s=180+230/(t-1)*i;return s>360&&(s-=360),x(s,.9,.8)},custom:(t,i)=>s=>{const e=.25+.5/(t-1)*s;if(!i)return x(0,0,e);const h=i.getR()/255,r=i.getG()/255,n=i.getB()/255,o=Math.max(h,r,n),a=Math.min(h,r,n);let l=0;if(o!==a){const t=o-a;switch(o){case h:l=(r-n)/t+(r<n?6:0);break;case r:l=(n-h)/t+2;break;case n:l=(h-r)/t+4;break;default:l=0}return l=l/6*360,x(l,.8,e)}return x(0,0,e)},sector:(t,i,s=.8,e=.8)=>h=>r=>x(t+(i-t)/h*r,s,e),auroraBorealis:t=>i=>bn([{value:0,hex:"#23FF7A"},{value:1/9,hex:"#03E65D"},{value:2/9,hex:"#04D155"},{value:3/9,hex:"#00B849"},{value:4/9,hex:"#00A869"},{value:5/9,hex:"#008F68"},{value:6/9,hex:"#00815E"},{value:7/9,hex:"#017153"},{value:8/9,hex:"#704A85"},{value:1,hex:"#743A70"}],t,i),blueSciFi:t=>i=>bn([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#E2E7FF"},{value:2/9,hex:"#ACB9F8"},{value:3/9,hex:"#889DFF"},{value:4/9,hex:"#547EEF"},{value:5/9,hex:"#4068D8"},{value:6/9,hex:"#2B50B7"},{value:7/9,hex:"#1B3E9F"},{value:8/9,hex:"#8D1395"},{value:1,hex:"#780A74"}],t,i),light:t=>i=>bn([{value:0,hex:"#FECC00"},{value:1/9,hex:"#F7B300"},{value:2/9,hex:"#EF9900"},{value:3/9,hex:"#E88000"},{value:4/9,hex:"#E06600"},{value:5/9,hex:"#DD5A00"},{value:6/9,hex:"#D94D00"},{value:7/9,hex:"#D13300"},{value:8/9,hex:"#C91A00"},{value:1,hex:"#C10000"}],t,i),monochrome:t=>i=>bn([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#EEEEEE"},{value:2/9,hex:"#DCDCDC"},{value:3/9,hex:"#C1C1C1"},{value:4/9,hex:"#A4A2A2"},{value:5/9,hex:"#8B8B8B"},{value:6/9,hex:"#787878"},{value:7/9,hex:"#656565"},{value:8/9,hex:"#565555"},{value:1,hex:"#434343"}],t,i),night:t=>i=>bn([{value:0,hex:"#F0F9E0"},{value:1/9,hex:"#C9DFA4"},{value:2/9,hex:"#B5C796"},{value:3/9,hex:"#8998B7"},{value:4/9,hex:"#6E7E9E"},{value:5/9,hex:"#5C6D8F"},{value:6/9,hex:"#47587A"},{value:7/9,hex:"#374B72"},{value:8/9,hex:"#273C65"},{value:1,hex:"#192847"}],t,i),sunset2:t=>i=>bn([{value:0,hex:"#22334D"},{value:1/9,hex:"#82062C"},{value:2/9,hex:"#AB001D"},{value:3/9,hex:"#D80428"},{value:4/9,hex:"#CF5D1B"},{value:5/9,hex:"#CF8229"},{value:6/9,hex:"#CF9D29"},{value:7/9,hex:"#C4BE25"},{value:8/9,hex:"#E1DC49"},{value:1,hex:"#FFFA67"}],t,i)},bn=(t,i,s)=>{const e=Mn(i,s),[h,r]=_n(e,t),n=xn(t[h]),o=xn(t[r]),a=0!==n.value?(o.value-e)/n.value:0,l={value:a,h:pn(n.h,o.h,a),s:pn(n.s,o.s,a),v:pn(n.v,o.v,a)};return x(l.h,l.s,l.v)},xn=t=>{const i=(t=>{const i=t.r,s=t.g,e=t.b,h=Math.max(i,s,e),r=Math.min(i,s,e);let n=0;const o=h,a=h-r,l=0===h?0:a/h;if(h===r)n=0;else{switch(h){case i:n=(s-e)/a+(s<e?6:0);break;case s:n=(e-i)/a+2;break;case e:n=(i-s)/a+4}n/=6}return[360*n,l,o]})(b(t.hex));return{value:t.value,h:i[0],s:i[1],v:i[2]}},Mn=(t,i)=>{const s=i/t;return s<0?0:s>1?1:s},_n=(t,i)=>{if(i.length<2)throw new Error("Invalid palette size");for(let s=0;s<i.length;s+=1)if(t<i[s].value)return[s-1,s];return[i.length-2,i.length-1]};class wn{constructor(){this.type="simple"}}const Cn=t=>!(!t||"object"!=typeof t||!("type"in t)||"simple"!==t.type),kn=new wn;class Tn{constructor(t){this.type="phong",this.ambientReflection=1,this.specularReflection=.1,this.diffuseReflection=1,this.ambientColor=b("#000"),this.specularColor=b("#fff"),this.shininess=32,t&&(this.ambientReflection=Number.isNaN(Number(t.ambientReflection))?this.ambientReflection:Number(t.ambientReflection),this.specularReflection=Number.isNaN(Number(t.specularReflection))?this.specularReflection:Number(t.specularReflection),this.diffuseReflection=Number.isNaN(Number(t.diffuseReflection))?this.diffuseReflection:Number(t.diffuseReflection),this.ambientColor=t.ambientColor||this.ambientColor,this.specularColor=t.specularColor||this.specularColor,this.shininess=t.shininess||this.shininess)}}const Fn=t=>!(!t||"object"!=typeof t||!("type"in t)||"phong"!==t.type),In=new Tn,Pn={Simple:wn,Phong:Tn},Dn={Dotted:[1,3],DottedDense:[1,1],Dashed:[3,1],DashedEqual:[2,2],DashedLoose:[2,4],DashDotted:[3,2,1,2]},Bn=i({type:"linestyle",lineType:"dashed",pattern:Dn.DashedEqual,fillStyle:new W({color:S(255,255,255)}),thickness:1,patternScale:3});class Ln extends Bn{constructor(t){super({...t,lineType:"dashed"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}O(){const t=this.getThickness();return t<0?1:t}setPattern(t){return"function"==typeof t?this.set("pattern",t(this.getPattern())):this.set("pattern",t)}getPattern(){return this.get("pattern")}setPatternScale(t){return"function"==typeof t?this.set("patternScale",t(this.getPatternScale())):this.set("patternScale",t)}getPatternScale(){return this.get("patternScale")}}const Rn=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"dashed"!==t.lineType),En=i({type:"icon",width:void 0,height:void 0,gc:void 0,yc:Zt,mc:Zt});class zn extends En{constructor(t,i,s,e){super({...e,gc:t,yc:i,mc:s})}dispose(){return this.mc(this),this}setWidth(t){const i=this.set("width",t);return this.yc(i),i}getWidth(){return this.get("width")}setHeight(t){const i=this.set("height",t);return this.yc(i),i}getHeight(){return this.get("height")}setSize(t,i){const s=this.withMutations((s=>{s.set("width",t).set("height",i)}));return this.yc(s),s}ni(){if(!this.gc)return{x:0,y:0};const t=this.gc.width,i=this.gc.height;if(0===t||0===i)return{x:0,y:0};const s=this.width,e=this.height;return"number"==typeof s&&"number"==typeof e?{x:s,y:e}:"number"==typeof s?{x:s,y:i*s/t}:"number"==typeof e?{x:t*e/i,y:e}:{x:t,y:i}}}const Vn=t=>!(!t||"object"!=typeof t||!("type"in t)||"icon"!==t.type),On=i({type:"glow",color:S(255,255,255,50),spread:1,blur:4,offset:{x:0,y:0}});class Nn extends On{constructor(t){super(t)}setSpread(t){return this.set("spread","function"==typeof t?t(this.get("spread")):t)}getSpread(){return this.get("spread")}setBlur(t){return this.set("blur","function"==typeof t?t(this.get("blur")):t)}getBlur(){return this.get("blur")}setColor(t){return this.set("color","function"==typeof t?t(this.get("color")):t)}getColor(){return this.get("color")}setOffset(t){return this.set("offset","function"==typeof t?t(this.get("offset")):t)}getOffset(){return this.get("offset")}}const Gn=t=>!(!t||"object"!=typeof t||!("type"in t)||"glow"!==t.type);class Un{constructor(t){this.vc=0,this.Sc=0,this.bc=0,this.xc=!1,this.Mc=!0,this._c=!1,this.wc={warningDisplayed:!1,expandEvents:[]},this.L=new s,this.Mc=!t||void 0===t.autoSortingEnabled||t.autoSortingEnabled,void 0!==(null==t?void 0:t.dataPattern)&&(this.Cc={userSpecified:null===t.dataPattern?void 0:t.dataPattern}),this.kc=void 0!==(null==t?void 0:t.lookupValues)&&t.lookupValues,this.Tc=void 0!==(null==t?void 0:t.colors)&&t.colors,this.Fc=void 0!==(null==t?void 0:t.ids)&&t.ids,this.Ic=void 0!==(null==t?void 0:t.sizes)&&t.sizes,this.Pc=void 0!==(null==t?void 0:t.rotations)&&t.rotations,this.Dc=(null==t?void 0:t.dataStorage)?t.dataStorage:Float64Array,this.Bc=!1!==(null==t?void 0:t.allowInputModification)}add(t){return Array.isArray(t)?this.appendJSON(t,{x:"x",y:"y"}):this.appendSample(t),this}addArraysXY(t,i){return this.appendSamples({xValues:t,yValues:i}),this}appendJSON(t,i={x:"x",y:"y"}){const s=t.length,e=i.x,h=i.y,r=i.lookupValue,n=i.size,o=i.rotation,a=i.color,l=i.id;let u,c,d,f,A,g,y;if(e){u=new this.Dc(s);const i=t[0]&&t[0][e]instanceof Date,h=t[0]&&Qn(t[0][e]);if(!h&&t[0]&&"string"==typeof t[0][e])throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(h)for(let i=0;i<s;i+=1){const s=t[i];u[i]=new Date(s[e]).getTime()}else if(i)for(let i=0;i<s;i+=1){const s=t[i];u[i]=s[e].getTime()}else for(let i=0;i<s;i+=1){const s=t[i];u[i]=s[e]}}if(h){c=new this.Dc(s);const i=t[0]&&t[0][h]instanceof Date,e=t[0]&&Qn(t[0][h]);if(!e&&t[0]&&"string"==typeof t[0][h])throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(e)for(let i=0;i<s;i+=1){const s=t[i];c[i]=new Date(s[h]).getTime()}else if(i)for(let i=0;i<s;i+=1){const s=t[i];c[i]=s[h].getTime()}else for(let i=0;i<s;i+=1){const s=t[i];c[i]=s[h]}}if(r){d=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];d[i]=s[r]}}if(a){f=[];for(let i=0;i<s;i+=1){const s=t[i];f[i]=s[a]}}if(l){A=new Uint32Array(s);for(let i=0;i<s;i+=1){const s=t[i];A[i]=s[l]}}if(n){g=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];g[i]=s[n]}}if(o){y=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];y[i]=s[o]}}return this.appendSamples({xValues:u,yValues:c,ids:A,colors:f,lookupValues:d,sizes:g,rotations:y,start:i.start,step:i.step}),this}appendSample(t){const{samplesCacheX:i,samplesCacheY:s,samplesCacheColors:e,samplesCacheIDs:h,samplesCacheLookup:r,samplesCacheSize:n,samplesCacheRotation:o,maxSampleCount:a,dataPattern:l}=this.Lc({appendCount:1}),u=this.Rc(),c=void 0!==t.step?t.step:l?cr(l)?1:-1:1,d=t.x&&t.x instanceof Date&&t.x,f=t.x&&Qn(t.x)&&t.x,A=t.y&&t.y instanceof Date&&t.y,g=t.y&&Qn(t.y)&&t.y;if(!f&&"string"==typeof t.x)throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(!g&&"string"==typeof t.y)throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");const y=d?d.getTime():f?Date.parse(f):"number"==typeof t.x?t.x:u?u.x+c:0,m=A?A.getTime():g?Date.parse(g):"number"==typeof t.y?t.y:u?u.y+c:0;if(l&&this.Mc&&this.Ec&&this.zc&&!this.Vc(l,y,m)&&!this._c)return this.Oc(this.Ec,this.zc,new this.Dc([y]),new this.Dc([m]),void 0!==t.lookupValue?new Float32Array([t.lookupValue]):void 0,void 0!==t.color?this.Nc((t.color,[t.color])):void 0,void 0!==t.id?new Uint32Array([t.id]):void 0,void 0!==t.size?new Float32Array([t.size]):void 0,void 0!==t.rotation?new Float32Array([t.rotation]):void 0,l),this;if(i[this.vc]=y,s[this.vc]=m,void 0!==t.lookupValue&&r&&(r[this.vc]=t.lookupValue),void 0!==t.color&&e){const i=this.Nc((t.color,[t.color]));void 0!==i&&(e[this.vc]=i[0])}return void 0!==t.id&&h&&(h[this.vc]=t.id),void 0!==t.size&&n&&(n[this.vc]=t.size),void 0!==t.rotation&&o&&(o[this.vc]=t.rotation),this.Gc(this.vc,this.vc),this.vc+=1,this.vc>a-1&&(this.vc=0,this.xc=!0),this.Sc=Math.min(this.Sc+1,a),this.bc+=1,this}appendSamples(t){const{lookupValues:i,colors:s,ids:e,sizes:h,rotations:r,start:n,step:o}=t;let a=t.offset,l=t.count;const u=t.xValues||t.yValues;if(!u)return this;const c=u.length;if(a=void 0!==a?a:0,l=void 0!==l?l:c-a,l<=0)return this;const d=void 0!==t.offsetLookupValues?t.offsetLookupValues:a,f=void 0!==t.offsetColors?t.offsetColors:a,A=void 0!==t.offsetIds?t.offsetIds:a,g=void 0!==t.offsetSizes?t.offsetSizes:a,y=void 0!==t.offsetRotations?t.offsetRotations:a,m=this.Uc(!0),[p,v]=this.Wc(l,t.xValues,"x","ProgressiveX"===m||"RegressiveX"===m||void 0===m?n:void 0,"ProgressiveX"===m||"RegressiveX"===m||void 0===m?o:void 0,a,m),[S,b]=this.Wc(l,t.yValues,"y","ProgressiveY"===m||"RegressiveY"===m?n:void 0,"ProgressiveY"===m||"RegressiveY"===m?o:void 0,a,m),x=this.Nc(s),{samplesCacheX:M,samplesCacheY:_,samplesCacheLookup:w,samplesCacheColors:C,samplesCacheIDs:k,samplesCacheSize:T,samplesCacheRotation:F,maxSampleCount:I,dataPattern:P,incomingDataReplacedCache:D}=this.Lc({appendCount:l,...0===v&&0===b&&0===a&&0===d&&0===f&&0===A&&0===g&&0===y?{incomingDataX:p,incomingDataY:S,incomingDataLookup:i,incomingDataIDs:e,incomingDataColors:x,incomingDataSize:h,incomingDataRotation:r}:{}});if(!D&&P&&this.Mc&&this.Ec&&this.zc){const t=p[v],s=S[b];if(!this.Vc(P,t,s)&&!this._c)return this.Oc(this.Ec,this.zc,jn(p,v,v+l),jn(S,b,b+l),jn(i,d,d+l),jn(x,f,f+l),jn(e,A,A+l),jn(h,g,g+l),jn(r,y,y+l),P),this}const B=I-this.vc,L=Math.min(l,B);if(L>0&&(D||(Xn(M,p,v,L,this.vc),Xn(_,S,b,L,this.vc),i&&w&&Xn(w,i,d,L,this.vc),e&&k&&Xn(k,e,A,L,this.vc),x&&C&&Xn(C,x,f,L,this.vc),h&&T&&Xn(T,h,g,L,this.vc),r&&F&&Xn(F,r,y,L,this.vc)),this.Gc(this.vc,this.vc+L-1),this.vc+=L,this.vc>I-1&&(this.vc=0,this.xc=!0)),this.Sc=Math.min(this.Sc+L,I),this.bc+=L,this.Uc(),l-L>0){const t={xValues:p?jn(p,v+L,void 0):void 0,yValues:S?jn(S,b+L,void 0):void 0,lookupValues:i?jn(i,d+L,void 0):void 0,ids:e?jn(e,A+L,void 0):void 0,colors:x?jn(x,f+L,void 0):void 0,sizes:h?jn(h,g+L,void 0):void 0,rotations:r?jn(r,y+L,void 0):void 0};this.appendSamples(t)}return this}setSamples(t){return this.clear().appendSamples(t)}fill(t){const i=this.Ec||this.zc;if(!i)return this;const s=i.length;if(void 0!==t.x&&(this.Ec=this.Ec||new this.Dc(s),this.Ec.fill(t.x)),void 0!==t.y&&(this.zc=this.zc||new this.Dc(s),this.zc.fill(t.y)),void 0!==t.lookupValue&&(this.Yc=this.Yc||new Float32Array(s),this.Yc.fill(t.lookupValue)),void 0!==t.color){const i=this.Nc([t.color]);i&&(this.Hc=this.Hc||new Uint32Array(s),this.Hc.fill(i[0]))}return void 0!==t.size&&(this.Xc=this.Xc||new Float32Array(s),this.Xc.fill(t.size)),void 0!==t.rotation&&(this.$c=this.$c||new Float32Array(s),this.$c.fill(t.rotation)),this.L.emit("cleared"),this}alterSamples(t,i){const{xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a}=i;let l=i.offset,u=i.count;const c=s||e||h||r||n||o||a,d=c?c.length:void 0!==i.x||void 0!==i.y?1:0;if(l=void 0!==l?l:0,u=void 0!==u?u:d-l,u<=0)return this;const f=void 0!==i.offsetLookupValues?i.offsetLookupValues:l,A=void 0!==i.offsetColors?i.offsetColors:l,g=void 0!==i.offsetIds?i.offsetIds:l,y=void 0!==i.offsetSizes?i.offsetSizes:l,m=void 0!==i.offsetRotations?i.offsetRotations:l,p=this.Nc(r),v=this.bc-1,S=void 0!==this.jc?Math.max(this.bc-this.jc,0):0,b=t+u-1,x=Math.max(t,S),M=Math.min(b,v),_=M-x+1;if(this.bc>0&&_>0){const{samplesCacheX:r,samplesCacheY:u,samplesCacheColors:c,samplesCacheIDs:d,samplesCacheLookup:v,samplesCacheSize:b,samplesCacheRotation:w}=this.Lc({appendCount:0}),C=r.length;if(void 0!==this.jc&&this.xc&&this.bc%this.jc!=0){const S=this.bc-this.bc%this.jc,_=this.bc-1,k=this.bc-this.Sc,T=S-1,F=Math.max(x,k),I=Math.min(M,T)-F+1;if(I>0){const S=F-t,x=Wn(F,this.bc,C,this.vc);if(void 0!==i.x)for(let t=x;t<x+I;t+=1)r[t]=i.x;if(void 0!==i.y)for(let t=x;t<x+I;t+=1)u[t]=i.y;s&&Xn(r,s,l+S,I,x),e&&Xn(u,e,l+S,I,x),h&&v&&Xn(v,h,f+S,I,x),n&&d&&Xn(d,n,g+S,I,x),p&&c&&Xn(c,p,A+S,I,x),o&&b&&Xn(b,o,y+S,I,x),a&&w&&Xn(w,a,m+S,I,x)}const P=Math.max(x,S),D=Math.min(M,_)-P+1;if(D>0){const S=P-t,x=Wn(P,this.bc,C,this.vc);if(void 0!==i.x)for(let t=x;t<x+D;t+=1)r[t]=i.x;if(void 0!==i.y)for(let t=x;t<x+D;t+=1)u[t]=i.y;s&&Xn(r,s,l+S,D,x),e&&Xn(u,e,l+S,D,x),h&&v&&Xn(v,h,f+S,D,x),n&&d&&Xn(d,n,g+S,D,x),p&&c&&Xn(c,p,A+S,D,x),o&&b&&Xn(b,o,y+S,D,x),a&&w&&Xn(w,a,m+S,D,x)}}else{const t=x-S;if(void 0!==i.x)for(let s=t;s<t+_;s+=1)r[s]=i.x;if(void 0!==i.y)for(let s=t;s<t+_;s+=1)u[s]=i.y;e&&Xn(u,e,l,_,t),s&&Xn(r,s,l,_,t),e&&Xn(u,e,l,_,t),h&&v&&Xn(v,h,f,_,t),n&&d&&Xn(d,n,g,_,t),p&&c&&Xn(c,p,A,_,t),o&&b&&Xn(b,o,y,_,t),a&&w&&Xn(w,a,m,_,t)}this.L.emit("cleared")}const w=t+u-1-v;if(w>0){const i=M+1-t;this.appendSamples({xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a,offset:l+i,offsetLookupValues:f+i,offsetColors:A+i,offsetIds:g+i,offsetSizes:y+i,offsetRotations:m+i,count:w})}return this}alterSamplesByID(t,i){if(!this.Fc)throw new Error("LightningChart JS attempted to use alterSamplesByID on DataSetXY that doesn't have IDs enabled.");const s=t.length,e=this.Zc;if(s<=0||!e)return this;const h=(("object"==typeof i.color?this.Nc([i.color]):"number"==typeof i.color?[i.color]:[])||[])[0],r=Array.isArray(i.xValues)?new this.Dc(i.xValues):i.xValues,n=Array.isArray(i.yValues)?new this.Dc(i.yValues):i.yValues,o=Array.isArray(i.yValues)?new Float32Array(i.yValues):i.yValues,a=this.Nc(i.colors),l=Array.isArray(i.sizes)?new Float32Array(i.sizes):i.sizes,u=Array.isArray(i.rotations)?new Float32Array(i.rotations):i.rotations,c=e.length,d=this.Sc,f=this.bc-1,A=Math.max(f-d+1,0);for(let d=0;d<s;d+=1){const s=t[d],g=Hn(s,A,f,!0,(t=>e[Wn(t,this.bc,c,this.vc)])),y=Wn(g,this.bc,c,this.vc);e[y]===s&&(void 0!==i.x&&this.Ec&&(this.Ec[y]=i.x),void 0!==i.y&&this.zc&&(this.zc[y]=i.y),void 0!==i.lookupValue&&this.Yc&&(this.Yc[y]=i.lookupValue),void 0!==i.size&&this.Xc&&(this.Xc[y]=i.size),void 0!==i.rotation&&this.$c&&(this.$c[y]=i.rotation),void 0!==h&&this.Hc&&(this.Hc[y]=h),r&&this.Ec&&(this.Ec[y]=r[d]),n&&this.zc&&(this.zc[y]=n[d]),o&&this.Yc&&(this.Yc[y]=o[d]),a&&this.Hc&&(this.Hc[y]=a[d]),l&&this.Xc&&(this.Xc[y]=l[d]),u&&this.$c&&(this.$c[y]=u[d]))}return this.L.emit("cleared"),this}clear(){return this.vc=0,this.Sc=0,this.bc=0,this.xc=!1,this.L.emit("cleared"),this}getSampleCount(){return this.Sc}getNextSampleIndex(){return this.bc}setMaxSampleCount(t){if("object"==typeof t){this.Qc&&this.offMaxSampleCountExceeded(this.Qc);const i=t.max,s=t.initial,e=t=>{const s=this.jc||0;if(void 0!==i&&s>=i)return;let e=Math.max(2*s,t);void 0!==i&&(e=Math.min(e,i)),this.setMaxSampleCount(e)};this.Qc=this.onMaxSampleCountExceeded(((t,i,s,h)=>{e(h)})),void 0===this.jc&&(void 0!==s?this.setMaxSampleCount(s):this.setMaxSampleCount(Math.min(2*this.Sc,void 0!==i?i:Number.MAX_SAFE_INTEGER)))}else if("number"==typeof t){const i=t;if(void 0!==this.jc&&this.jc>i)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to shrink data set. This is currently not supported.");if(!this.Ec||!this.zc)return this.jc=i,this;if(i===this.jc)return this;if(this.xc&&0!==this.vc)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to expand data set that has exceeded its max sample count. This is currently not supported.");this.jc=i,this.Sc<i?(this.vc=this.Sc,this.xc=!1):(this.vc=0,this.xc=!0);const s=new this.Dc(this.jc);s.set(this.Ec);const e=new this.Dc(this.jc);if(e.set(this.zc),this.Ec=s,this.zc=e,this.kc){const t=new Float32Array(this.jc);this.Yc&&t.set(this.Yc),this.Yc=t}if(this.Fc){const t=new Uint32Array(this.jc);this.Zc&&t.set(this.Zc),this.Zc=t}if(this.Tc){const t=new Uint32Array(this.jc);this.Hc&&t.set(this.Hc),this.Hc=t}if(this.Ic){const t=new Float32Array(this.jc);this.Xc&&t.set(this.Xc),this.Xc=t}if(this.Pc){const t=new Float32Array(this.jc);this.$c&&t.set(this.$c),this.$c=t}}return this}getMaxSampleCount(){return this.jc}readBack(t){if(!this.Ec||!this.zc)return{xValues:new this.Dc,yValues:new this.Dc,iSampleFirst:0};const i=this.Ec.length;let s,e=[];if(null==t?void 0:t.onlyInRange){const i=this.Jc();if(!i)throw new Error("LightningChart JS - attempted to use `DataSetXY.readBack` with `visibleOnly: true` without a data pattern.\nThis operation is only supported for patterned data (e.g. 'ProgressiveX')");const h=Math.min(t.onlyInRange.start,t.onlyInRange.end),r=Math.max(t.onlyInRange.start,t.onlyInRange.end),n=Yn(h,r,"x"===ur(i)?this.Ec:this.zc,this.bc,this.Sc,this.vc,i,0);if(!n)return{xValues:new this.Dc,yValues:new this.Dc,iSampleFirst:0};e=n.dataRanges,s=n.iFirstSample}else if(void 0!==this.jc&&this.xc&&this.bc%this.jc!=0){const t=this.vc,h=i-t,r=this.vc-1;e.push({offset:t,count:h}),e.push({offset:0,count:r+1}),s=this.bc-i}else e.push({offset:0,count:this.Sc}),s=0;const h=e.reduce(((t,i)=>t+i.count),0),r=new this.Dc(h),n=new this.Dc(h),o=this.Tc?new Uint32Array(h):void 0,a=this.kc?new Float32Array(h):void 0,l=this.Fc?new Uint32Array(h):void 0,u=this.Ic?new Float32Array(h):void 0,c=this.Pc?new Float32Array(h):void 0;let d=0;for(const t of e)r.set(this.Ec.subarray(t.offset,t.offset+t.count),d),n.set(this.zc.subarray(t.offset,t.offset+t.count),d),this.Tc&&o&&this.Hc&&o.set(this.Hc.subarray(t.offset,t.offset+t.count),d),this.kc&&a&&this.Yc&&a.set(this.Yc.subarray(t.offset,t.offset+t.count),d),this.Fc&&l&&this.Zc&&l.set(this.Zc.subarray(t.offset,t.offset+t.count),d),this.Ic&&u&&this.Xc&&u.set(this.Xc.subarray(t.offset,t.offset+t.count),d),this.Pc&&c&&this.$c&&c.set(this.$c.subarray(t.offset,t.offset+t.count),d),d+=t.count;return{xValues:r,yValues:n,iSampleFirst:s,lookupValues:a,colors:o,ids:l,sizes:u,rotations:c}}onMaxSampleCountExceeded(t){return this.L.on("maxSampleCountExceeded",t)}offMaxSampleCountExceeded(t){return this.L.off(t)}Wc(t,i,s,e,h,r,n){if(void 0===i){const i=this.Rc();h=void 0!==h?h:n&&ur(n)===s?cr(n)?1:-1:1,e=void 0!==e?e:i?i[s]+h:0;const r=new this.Dc(t);for(let i=0;i<t;i+=1)r[i]=e+i*h;return[r,0]}const o=i[0]&&i[0]instanceof Date,a=i[0]&&Qn(i[0]);if(!a&&i[0]&&"string"==typeof i[0])throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(void 0!==e||void 0!==h){const l=this.Rc();h=void 0!==h?h:n&&ur(n)===s?cr(n)?1:-1:1,e=void 0!==e?e:l?l[s]+h:0;const u=new this.Dc(t);if(a)for(let s=0;s<t;s+=1)u[s]=e+new Date(i[s+r]).getTime()*h;else if(o)for(let s=0;s<t;s+=1)u[s]=e+i[s+r].getTime()*h;else for(let s=0;s<t;s+=1)u[s]=e+i[s+r]*h;return[u,0]}if(a){const s=new this.Dc(t);for(let e=0;e<t;e+=1)s[e]=new Date(i[e]).getTime();return[s,r]}if(o){const s=new this.Dc(t);for(let e=0;e<t;e+=1)s[e]=i[e].getTime();return[s,r]}return[i,r]}Nc(t){if(!t||0===t.length)return;const i=t[0];if(v(i)){const i=t.length,s=new Uint32Array(i);for(let e=0;e<i;e+=1){const i=t[e],h=255*i.a<<24|255*i.b<<16|255*i.g<<8|255*i.r;s[e]=h}return s}return t}Kc(){return{min:0,max:void 0!==this.jc&&this.xc?this.jc-1:this.Sc-1}}qc(t){t=Math.min(t,this.Sc),this.bc-=t,this.Sc-=t,this.vc-=t,this.vc<0&&void 0!==this.jc&&(this.vc+=this.jc)}Oc(t,i,s,e,h,r,n,o,a,l){const u=ur(l),c=cr(l),d="x"===u?t:i,f="x"===u?s:e,A=s.length,g=f[0];if(this.Vc(l,s[A-1],e[A-1])){const t=this.Rc(),i=t?t[u]:0;let l=0;for(let t=0;t<A;t+=1)if(f[t]>i){l=t;break}const c={xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a,offset:l};this._c=!0,this.appendSamples(c),this._c=!1}else{const l=t.length,u=this.Sc,f=this.bc-1,y=Math.max(f-u+1,0),m=Hn(g,y,f,c,(t=>d[Wn(t,this.bc,l,this.vc)])),p=m-1,v=m+1,S=d[Wn(m,this.bc,l,this.vc)],b=v<=this.bc-1?d[Wn(v,this.bc,l,this.vc)]:void 0,x=void 0!==b&&(c&&b<g||!c&&b>g)?v+1:c&&S<g||!c&&S>g?m+1:p+1,M=f-x+1,_=new this.Dc(M),w=new this.Dc(M),C=this.kc?new Float32Array(M):void 0,k=this.Tc?new Uint32Array(M):void 0,T=this.Fc?new Uint32Array(M):void 0,F=this.Ic?new Float32Array(M):void 0,I=this.Pc?new Float32Array(M):void 0;let P=0;for(let s=x;s<=f;s+=1){const e=Wn(s,this.bc,l,this.vc);_[P]=t[e],w[P]=i[e],C&&this.Yc&&(C[P]=this.Yc[e]),k&&this.Hc&&(k[P]=this.Hc[e]),T&&this.Zc&&(T[P]=this.Zc[e]),F&&this.Xc&&(F[P]=this.Xc[e]),I&&this.$c&&(I[P]=this.$c[e]),P+=1}this.qc(M);const D=new this.Dc(A+M);D.set(s),D.set(_,A);const B=new this.Dc(A+M);let L,R,E,z,V;B.set(e),B.set(w,A),h&&C&&(L=new Float32Array(A+M),L.set(h),L.set(C,A)),r&&k&&(R=new Uint32Array(A+M),R.set(r),R.set(k,A)),n&&T&&(E=new Uint32Array(A+M),E.set(n),E.set(T,A)),o&&F&&(z=new Float32Array(A+M),z.set(o),z.set(F,A)),a&&I&&(V=new Float32Array(A+M),V.set(a),V.set(I,A)),this._c=!0,this.appendSamples({xValues:D,yValues:B,lookupValues:L,colors:R,ids:E,sizes:z,rotations:V}),this._c=!1,this.L.emit("cleared")}}Jc(){return this.Uc()}Uc(t=!1){let i;if(this.Cc&&"userSpecified"in this.Cc)i=this.Cc.userSpecified;else if(this.Cc&&"autoDetectResult"in this.Cc)i=this.Cc.autoDetectResult;else if(this.Ec&&this.zc&&this.bc>0&&!t){const t=void 0!==this.jc&&this.xc?this.vc:0,s=this.Sc-1,e=void 0!==this.jc&&this.xc?0:void 0,h=void 0!==this.jc&&this.xc?this.vc-1:void 0,[r,n]=void 0!==e&&void 0!==h&&Math.abs(h-e)>Math.abs(s-t)?[e,h]:[t,s];if(1+n-r>=2){let t,s,e=this.Ec[r],h=this.zc[r];for(let i=r+1;i<=n;i+=1){if(!1!==t){const s=this.Ec[i],h=Math.sign(s-e);0!==h&&t&&t.direction!==h?t=!1:0===h||t||(t={direction:h}),e=s}if(!1!==s){const t=this.zc[i],e=Math.sign(t-h);0!==e&&s&&s.direction!==e?s=!1:0===e||s||(s={direction:e}),h=t}}i=t&&t.direction>0?lr.ProgressiveX:t&&t.direction<0?lr.RegressiveX:s&&s.direction>0?lr.ProgressiveY:s&&s.direction<0?lr.RegressiveY:void 0,this.Cc={autoDetectResult:i},i&&Yt.console.warn(`LightningChart JS DataSetXY warning | Data pattern was detected automatically (DataPatterns.${i}).\nAutomatic detection is only intended for kick-starting application development, not for production use.\nAdd { dataPattern: '${i}'} } to your application when creating series or DataSetXY to clear this warning.`)}}return i}Vc(t,i,s){const e=this.Rc();return!e||("ProgressiveX"===t?i>e.x:"RegressiveX"===t?i<e.x:"ProgressiveY"===t?s>e.y:"RegressiveY"!==t||s<e.y)}Lc(t){if(t.incomingDataX&&t.incomingDataY&&0===this.Sc&&!this.Ec&&!this.zc&&(void 0===this.jc||this.jc===t.appendCount)&&this.Bc)return this.Ec=$n(t.incomingDataX,this.Dc)||new this.Dc,this.zc=$n(t.incomingDataY,this.Dc)||new this.Dc,this.Yc=this.kc?$n(t.incomingDataLookup,Float32Array):void 0,this.Zc=this.Fc?$n(t.incomingDataIDs,Uint32Array):void 0,this.Hc=this.Tc?$n(t.incomingDataColors,Uint32Array):void 0,this.Xc=this.Ic?$n(t.incomingDataSize,Float32Array):void 0,this.$c=this.Pc?$n(t.incomingDataRotation,Float32Array):void 0,{dataPattern:this.Uc(),samplesCacheX:this.Ec,samplesCacheY:this.zc,samplesCacheLookup:this.Yc,samplesCacheIDs:this.Zc,samplesCacheColors:this.Hc,samplesCacheSize:this.Xc,samplesCacheRotation:this.$c,maxSampleCount:t.appendCount,incomingDataReplacedCache:!0};if(void 0===this.jc){const i=this.Sc+t.appendCount;if(!this.Ec||!this.zc)return this.Ec=new this.Dc(i),this.zc=new this.Dc(i),this.Yc=this.kc?new Float32Array(i):void 0,this.Zc=this.Fc?new Uint32Array(i):void 0,this.Hc=this.Tc?new Uint32Array(i):void 0,this.Xc=this.Ic?new Float32Array(i):void 0,this.$c=this.Pc?new Float32Array(i):void 0,{dataPattern:this.Uc(),samplesCacheX:this.Ec,samplesCacheY:this.zc,samplesCacheLookup:this.Yc,samplesCacheIDs:this.Zc,samplesCacheColors:this.Hc,samplesCacheSize:this.Xc,samplesCacheRotation:this.$c,maxSampleCount:i};const s=this.Ec.length;if(s<i){if(!this.wc.warningDisplayed){const s=Yt.performance.now();if(this.wc.expandEvents=this.wc.expandEvents.filter((t=>s-t.timestamp<5e3)),i>1e3&&this.wc.expandEvents.push({timestamp:s}),this.wc.expandEvents.length>5)return Yt.console.warn("LightningChart JS warning - DataSetXY append operation was performed more than 5 times in 5 seconds.\nAutomatic max sample count control was enabled.\nFor streaming applications, DataSetXY.setMaxSampleCount() or Series.setMaxSampleCount() should be configured explicitly to get rid of this warning."),this.wc.warningDisplayed=!0,this.setMaxSampleCount({mode:"auto"}),this.Lc(t)}const s=new this.Dc(i);s.set(this.Ec),this.Ec=s;const e=new this.Dc(i);if(e.set(this.zc),this.zc=e,this.kc){const t=new Float32Array(i);this.Yc&&t.set(this.Yc),this.Yc=t}if(this.Fc){const t=new Uint32Array(i);this.Zc&&t.set(this.Zc),this.Zc=t}if(this.Tc){const t=new Uint32Array(i);this.Hc&&t.set(this.Hc),this.Hc=t}if(this.Ic){const t=new Float32Array(i);this.Xc&&t.set(this.Xc),this.Xc=t}if(this.Pc){const t=new Float32Array(i);this.$c&&t.set(this.$c),this.$c=t}return this.vc=this.Sc,{dataPattern:this.Uc(),samplesCacheX:this.Ec,samplesCacheY:this.zc,samplesCacheLookup:this.Yc,samplesCacheIDs:this.Zc,samplesCacheColors:this.Hc,samplesCacheSize:this.Xc,samplesCacheRotation:this.$c,maxSampleCount:i}}if(s>4*i){const t=new this.Dc(i);t.set(this.Ec.subarray(0,this.Sc)),this.Ec=t;const s=new this.Dc(i);if(s.set(this.zc.subarray(0,this.Sc)),this.zc=s,this.kc){const t=new Float32Array(i);this.Yc&&t.set(this.Yc.subarray(0,this.Sc)),this.Yc=t}if(this.Fc){const t=new Uint32Array(i);this.Zc&&t.set(this.Zc.subarray(0,this.Sc)),this.Zc=t}if(this.Tc){const t=new Uint32Array(i);this.Hc&&t.set(this.Hc.subarray(0,this.Sc)),this.Hc=t}if(this.Ic){const t=new Float32Array(i);this.Xc&&t.set(this.Xc.subarray(0,this.Sc)),this.Xc=t}if(this.Pc){const t=new Float32Array(i);this.$c&&t.set(this.$c.subarray(0,this.Sc)),this.$c=t}return{dataPattern:this.Uc(),samplesCacheX:this.Ec,samplesCacheY:this.zc,samplesCacheLookup:this.Yc,samplesCacheIDs:this.Zc,samplesCacheColors:this.Hc,samplesCacheSize:this.Xc,samplesCacheRotation:this.$c,maxSampleCount:i}}return{dataPattern:this.Uc(),samplesCacheX:this.Ec,samplesCacheY:this.zc,samplesCacheLookup:this.Yc,samplesCacheIDs:this.Zc,samplesCacheColors:this.Hc,samplesCacheSize:this.Xc,samplesCacheRotation:this.$c,maxSampleCount:s}}return t.appendCount+this.Sc>this.jc&&this.L.emit("maxSampleCountExceeded",this,this.Sc,this.jc,this.Sc+t.appendCount),this.Ec=this.Ec||new this.Dc(this.jc),this.zc=this.zc||new this.Dc(this.jc),this.Yc=this.Yc||(this.kc?new Float32Array(this.jc):void 0),this.Zc=this.Zc||(this.Fc?new Uint32Array(this.jc):void 0),this.Hc=this.Hc||(this.Tc?new Uint32Array(this.jc):void 0),this.Xc=this.Xc||(this.Ic?new Float32Array(this.jc):void 0),this.$c=this.$c||(this.Pc?new Float32Array(this.jc):void 0),{dataPattern:this.Uc(),samplesCacheX:this.Ec,samplesCacheY:this.zc,samplesCacheLookup:this.Yc,samplesCacheIDs:this.Zc,samplesCacheColors:this.Hc,samplesCacheSize:this.Xc,samplesCacheRotation:this.$c,maxSampleCount:this.jc}}td(){if(!this.Ec||!this.zc||0===this.Sc)return;if(void 0===this.jc)return this.bc>0?{x:this.Ec[0],y:this.zc[0]}:void 0;if(!this.xc)return{x:this.Ec[0],y:this.zc[0]};let t=this.vc-this.Sc;return t<0&&(t+=this.jc),{x:this.Ec[t],y:this.zc[t]}}Rc(){if(!this.Ec||!this.zc||0===this.Sc)return;if(void 0===this.jc){const t=this.Sc-1;return t>=0?{x:this.Ec[t],y:this.zc[t]}:void 0}let t=this.vc-1;return t<0&&(t+=this.jc),{x:this.Ec[t],y:this.zc[t]}}sd(t){if(!this.Ec||!this.zc)return;const i=this.Ec.length,s=this.Sc,e=this.bc-1,h=Math.max(e-s+1,0)+t,r=Wn(h,this.bc,i,this.vc);return{x:this.Ec[r],y:this.zc[r],lookupValue:this.kc&&this.Yc?this.Yc[r]:void 0,id:this.Fc&&this.Zc?this.Zc[r]:void 0,color:this.Tc&&this.Hc?this.Hc[r]:void 0,size:this.Ic&&this.Xc?this.Xc[r]:void 0,rotation:this.Pc&&this.$c?this.$c[r]:void 0,iSample:h}}ed(t,i,s,e){const h=this.Uc(),r=this.Ec,n=this.zc;if(!r||!n)return;const o=(t,i)=>({x:r[t],y:n[t],lookupValue:this.kc&&this.Yc?this.Yc[t]:void 0,id:this.Fc&&this.Zc?this.Zc[t]:void 0,color:this.Tc&&this.Hc?this.Hc[t]:void 0,size:this.Ic&&this.Xc?this.Xc[t]:void 0,rotation:this.Pc&&this.$c?this.$c[t]:void 0,iSample:i}),a=r.length,l=this.Sc,u=this.bc-1,c=Math.max(u-l+1,0);if(h){const s=cr(h),e=this.td(),r=this.Rc();if(!(e&&r&&this.Ec&&this.zc))return;const n="ProgressiveX"===h||"RegressiveX"===h?"x":"y",l="x"===n?"y":"x",d="x"===n?this.Ec:this.zc,f="x"===l?this.Ec:this.zc,A=t[n],g=Math.min(e[n],r[n]),y=Math.max(e[n],r[n]);if(A<g||A>y)return;const m=Hn(A,c,u,s,(t=>d[Wn(t,this.bc,a,this.vc)])),p=Wn(m,this.bc,a,this.vc);if(!i)return o(p,m);const v=m-1,S=m+1,b=d[p],x=s?A>=b?S<=u?S:void 0:v>=c?v:void 0:A<=b?S<=u?S:void 0:v>=c?v:void 0;if(void 0===x)return;const M=Wn(x,this.bc,a,this.vc),_=m<x?{pos:d[p],val:f[p],iSample:m}:{pos:d[M],val:f[M],iSample:x},w=m>x?{pos:d[p],val:f[p],iSample:m}:{pos:d[M],val:f[M],iSample:x},C=(A-_.pos)/(w.pos-_.pos),k=pn(_.val,w.val,C);return"x"===ur(h)?{x:A,y:k,iSample:pn(_.iSample,w.iSample,C)}:{y:A,x:k,iSample:pn(_.iSample,w.iSample,C)}}let d,f=Number.MAX_VALUE;const A=pt(t,s,e),g=this.Sc-1;for(let t=0;t<=g;t+=1){const i=r[t],h=n[t];if(!Number.isNaN(i)&&!Number.isNaN(h)){const r=mt(i,s.x,e.x),n=mt(h,s.y,e.y),o=(r-A.x)**2+(n-A.y)**2;o<f&&(f=o,d=t)}}return void 0===d?void 0:o(d,d)}Gc(t,i){this.L.emit("changed",t,i)}Gt(t){return this.L.off(t)}hd(t){return this.L.on("changed",t)}rd(t){return this.L.on("cleared",t)}}const Wn=(t,i,s,e)=>t%s,Yn=(t,i,s,e,h,r,n,o)=>{if(0===e||0===h)return;const a=cr(n),l=s.length,u=e-1,c=Math.max(u-h+1,0),d=Hn(t,c,u,a,(t=>s[Wn(t,e,l)])),f=Hn(i,c,u,a,(t=>s[Wn(t,e,l)])),A=Math.min(d,f),g=Math.max(d,f),y=Math.max(A-o,c),m=Math.min(g+o,u),p=Wn(y,e,l),v=Wn(m,e,l);return p>v?{iFirstSample:y,iLastSample:m,iFirstSampleDataArray:p,iLastSampleDataArray:v,dataRanges:[{offset:p,count:l-p},{offset:0,count:v+1}]}:{iFirstSample:y,iLastSample:m,iFirstSampleDataArray:p,iLastSampleDataArray:v,dataRanges:[{offset:p,count:v-p+1}]}},Hn=(t,i,s,e,h)=>{const r=s;for(;i!==s;){const r=Math.ceil((i+s)/2),n=h(r);e&&t<n||!e&&t>n?s=r-1:i=r}const n=Math.abs(t-h(i));return i<r&&Math.abs(t-h(i+1))<n?i+1:i},Xn=(t,i,s,e,h)=>{const r=i.length;if(Array.isArray(i))for(let r=0;r<e;r+=1)t[h+r]=i[s+r];else t.set(r===e?i:i.subarray(s,s+e),h)},$n=(t,i)=>void 0===t?void 0:Array.isArray(t)?new i(t):t instanceof i?t:new i(t),jn=(t,i,s)=>{if(void 0!==t)return Array.isArray(t)?t.slice(i,s):t.subarray(i,s)},Zn=/^(\d{4}-\d{2}-\d{2})(?:T(\d{2}:\d{2}:\d{2}(?:\.\d+)?)(Z|[+-]\d{2}:\d{2})?)?$/,Qn=t=>"string"==typeof t&&Zn.test(t)&&!Yt.isNaN(Date.parse(t));class Jn extends gn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ba="label",this.Ka=this.Ls.Ur(this.renderingScale).vr(this.ba).Le(O).Nr(Qi).Gr(Qi),this.setMargin(5),this.Du(this.Ka)}Ou(){return[this.Ka]}setFillStyle(t){return this.Ka.Le(t),this.Ls.xs(),this}getFillStyle(){return this.Ka.Qh()}Ee(){const t=this.getPosition(n(0,0),Ot.Content),i=pt(t,this.scale,this.renderingScale);return this.Ka.ze(i),this}Vs(){this.Ka.Vs(),void 0!==this.na&&this.Ka.la(this.na);const t=0===this.ba.length?n(0,0):this.Ka.nd();return this.setContentSize(t),super.Vs()}setText(t){return this.ba=t,this.Ka.vr(this.ba),this.Ls.xs(),this}getText(){return this.ba}setFont(t){return this.Ka.tr(t),this.Ls.xs(),this}getFont(){return this.Ka.qh()}setTextRotation(t){return this.Ka.ir(t),this.Ls.xs(),this}getTextRotation(){return this.Ka.sr()}}const Kn={...ln,...cn,uiElement:Jn};class qn extends yn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.od=!1,this.fitTo=this.Wu.bind(this),this.setSize=this.fitTo,this.Ka=this.Ls.dc(i).Le(O).Be(dt),this.Du(this.Ka)}Ou(){return[this.Ka]}setFillStyle(t){return this.Ka.Le(t),this.Ls.xs(),this}getFillStyle(){return this.Ka.Qh()}setStrokeStyle(t){return this.Ka.Be(t),this.Ls.xs(),this}getStrokeStyle(){return this.Ka.vo()}Ee(){void 0!==this.na&&this.Ka.la(this.na);const t=vs([this.getPosition(n(-1,-1),Ot.Content),this.getPosition(n(1,1),Ot.Content)].map((t=>pt(t,this.scale,this.renderingScale))));return this.od?this.Ka.Tl([{x:(t.min.x+t.max.x)/2,y:t.min.y},{x:t.min.x,y:(t.min.y+t.max.y)/2},{x:(t.min.x+t.max.x)/2,y:t.max.y},{x:t.max.x,y:(t.min.y+t.max.y)/2}]):this.Ka.Tl([t.min,{x:t.min.x,y:t.max.y},t.max,{x:t.max.x,y:t.min.y}]),this}Wu(t){return this.setContentSize(t),this.Ls.xs(),this}Yu(){return 0}Hu(){return 0}$u(){return 0}Xu(){return 0}}class to extends yn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ad=n(0,0),this.Ka=t.ld(i).fu(0).He(360).Le(O).Be(dt),this.Du(this.Ka)}Ou(){return[this.Ka]}setFillStyle(t){return this.Ka.Le(t),this.Ls.xs(),this}getFillStyle(){return this.Ka.Qh()}setStrokeStyle(t){return this.Ka.Be(t),this.Ls.xs(),this}getStrokeStyle(){return this.Ka.vo()}Ee(){void 0!==this.na&&this.Ka.la(this.na);const t=this.getSize(Ot.Content).x/2;return this.Ka.gu(t*this.renderingScale.Gi().x).yu(t*this.renderingScale.Gi().y).ze(pt(this.getPosition(n(0,0),Ot.Content),this.scale,this.renderingScale)).pu(255).Vs(),this}Wu(t){const i=Math.sqrt(t.x*t.x/4+t.y*t.y/4);return this.setContentSize(n(2*i,2*i)),this.ad=t,this.Ls.xs(),this}Yu(){return(this.getSize(Ot.Content).x-this.ad.x)/2}Hu(){return(this.getSize(Ot.Content).x-this.ad.x)/2}$u(){return(this.getSize(Ot.Content).y-this.ad.y)/2}Xu(){return(this.getSize(Ot.Content).y-this.ad.y)/2}fitTo(t){const i=Math.min(t.x,t.y);return this.setContentSize(n(i,i)),this.ad=t,this}}class io extends mn{constructor(t,i,s,e,h){super(t,i,s,Or.Simple,e,h),this.ud=f(n(0,0)),this.dd=!1,this.Ls=t,this.fc()}Ac(){const t=this.ud._();if(this.dd){const i=Math.min(t.x,t.y);return[n(0,0),n(i/2,i/2),n(0,i),n(-i/2,i/2)]}const i=2*Math.sqrt(this.ud._().x*this.ud._().x/4+this.ud._().y*this.ud._().y/4),s=n(Math.cos(Math.PI/4)*i,0),e=n(0,Math.sin(Math.PI/4)*i),h=n(0,0),r=Is(h,Is(s,e)),o=Is(r,Is(e,Fs(s,-1)));return[h,r,o,Ps(o,Is(s,e))]}Ou(){return[this.Ka]}setFillStyle(t){return this.Ka.Le(t),this.Ls.xs(),this}getFillStyle(){return this.Ka.Qh()}setStrokeStyle(t){return this.Ka.Be(t),this.Ls.xs(),this}getStrokeStyle(){return this.Ka.vo()}Wu(t){return this.ud.M(t),this.dd=!1,this.Ls.xs(),this}Yu(){return this.dd?0:(this.getSize(Ot.Content).x-this.ud._().x)/2}Hu(){return this.dd?0:(this.getSize(Ot.Content).x-this.ud._().x)/2}$u(){return this.dd?0:(this.getSize(Ot.Content).y-this.ud._().y)/2}Xu(){return this.dd?0:(this.getSize(Ot.Content).y-this.ud._().y)/2}fitTo(t){return this.ud.M(t),this.dd=!0,this.Ls.xs(),this}}class so extends mn{constructor(t,i,s,e,h){super(t,i,s,Or.Simple,e,h),this.fd=f(n(0,0)),this.Ad=f(10),this.gd=f(void 0),this.qu=f(Ut.Right),this.fc()}Ou(){return[this.Ka]}setFillStyle(t){return this.Ka.Le(t),this.Ls.xs(),this}getFillStyle(){return this.Ka.Qh()}setStrokeStyle(t){return this.Ka.Be(t),this.Ls.xs(),this}getStrokeStyle(){return this.Ka.vo()}setDirection(t){return this.qu.M(t),this.Ls.xs(),this}getDirection(){return this.qu._()}setPointerLength(t){return this.Ad.M(t),this.Ls.xs(),this}getPointerLength(){return this.Ad._()}setPointerAngle(t){return this.gd.M(t),this.Ls.xs(),this}getPointerAngle(){let t=this.gd._();if(void 0===t){const i=this.yd();if(0===i)return 0;t=0!==i?180*Math.atan(2*this.getPointerLength()/i)/Math.PI:0}return Math.min(Math.max(t,1),89)}Wu(t){return this.fd.M(t),this.Ls.xs(),this}md(){const t=this.getPointerAngle();return 0===t?0:2*this.getPointerLength()/Math.tan(t*Math.PI/180)}pd(){return yi(this.qu._())?this.fd._().x:this.fd._().y}yd(){return yi(this.qu._())?this.fd._().y:this.fd._().x}Yu(){switch(this.qu._()){case Ut.Right:return 0;case Ut.Left:return this.getPointerLength();case Ut.Up:case Ut.Down:return Math.max(0,this.md()-this.yd());default:return 0}}Hu(){switch(this.qu._()){case Ut.Right:return this.getPointerLength();case Ut.Left:return 0;case Ut.Up:case Ut.Down:return Math.max(0,this.md()-this.yd());default:return 0}}$u(){switch(this.qu._()){case Ut.Right:case Ut.Left:return Math.max(0,this.md()-this.yd());case Ut.Up:return this.getPointerLength();case Ut.Down:default:return 0}}Xu(){switch(this.qu._()){case Ut.Right:case Ut.Left:return Math.max(0,this.md()-this.yd());case Ut.Up:return 0;case Ut.Down:return this.getPointerLength();default:return 0}}Ac(){const t=gi(this.qu._()),i=ks(n(0,0),t),s=this.getPointerLength(),e=this.md(),h=this.pd(),r=this.yd();if(!(0!==s&&0!==e||0!==h&&0!==r))return[];const o=n(0,0),a=Is(Is(o,Fs(t,-s)),Fs(i,e/2)),l=Is(a,Fs(i,(r-e)/2)),u=Is(l,Fs(t,-h)),c=Is(Is(o,Fs(t,-s)),Fs(i,-e/2)),d=Is(c,Fs(i,-(r-e)/2)),f=Is(d,Fs(t,-h));let A;return A=0===h||0===r?[o,a,c]:0===s||0===e?[l,u,f,d]:Qt(r,e)?[o,a,u,f,c]:[o,a,l,u,f,d,c],A}}class eo extends gn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.fitTo=this.Wu.bind(this),this.setSize=this.fitTo,this.vd=new Un,this.Ka=this.Ls.Md(i).We(dt).xd(O).bd(O).Sd(this.vd),this.Du(this.Ka)}Ou(){return[this.Ka]}setShape(t){return this.Ka._d(t),this}getShape(){return this.Ka.wd()}setRotation(t){return this.Ka.Cd(t),this}getRotation(){return this.Ka.kd()}setFillStyle(t){return this.Ka.bd(t),this.Ls.xs(),this}getFillStyle(){return this.Ka.Td()}Ee(){void 0!==this.na&&this.Ka.la(this.na);const t=pt(this.getPosition({x:0,y:0},Ot.Content),this.scale,this.renderingScale),i=Math.max(this.size.x,this.size.y);if(this.vd.clear(),i>0){const s=this.Ka.wd(),e=this.Ka.Td(),h=Vn(s)&&s,r=st(e)&&e;if(h){const t=i/h.ni().y;this.Ka.Fd(t)}else if(r){const t=r.source;if(t instanceof Image){const s=i/t.height;this.Ka.Fd(s)}}else this.Ka.Fd(i);this.vd.appendSample(t)}return this}Wu(t){return this.setContentSize(t),this.Ls.xs(),this}Yu(){return 0}Hu(){return 0}$u(){return 0}Xu(){return 0}}const ho={...ln,...cn,uiElement:eo};class ro extends fn{setSize(t){return this.setContentSize(t),this.Ls.xs(),this}}class no extends sn{constructor(){super(...arguments),this.Id=[],this.Pd=0,this.Dd=t=>{const i=this.Id.indexOf(t);i>=0&&this.Id.splice(i,1)}}getMembers(){return this.Id}getMemberCount(){return this.Id.length}setMinimumSize(t){return this.Bd=t,this.Ls.xs(),this}getMinimumSize(){return this.Bd}addElement(t,i=-1){const s=t.nc(this.Ls,this.renderingScale,this.scale,this.Dd,this.qi,!1);return s.setMouseInteractions(this.getMouseInteractions()),i>=0?this.Id.splice(i,0,s):this.Id.push(s),s.setVisible(this.getVisible()),this.Du(s),this.$i&&(zi(0,(()=>{})),s.dispose()),s}dispose(){return super.dispose(),this.Id.slice().forEach(jt),this}Vs(){super.Vs();const t=this.na;return void 0!==t&&this.Id.forEach(((i,s)=>{i.na=t+1+.01*s})),this}setVisible(t){return super.setVisible(t),this.Id.forEach((i=>i.setVisible(t))),this}setMouseInteractions(t){super.setMouseInteractions(t);for(let i=0;i<this.Id.length;i+=1)this.Id[i].setMouseInteractions(t);return this}getMouseInteractions(){if(super.getMouseInteractions())return!0;for(let t=0;t<this.Id.length;t+=1)if(this.Id[t].getMouseInteractions())return!0;return!1}setHighlight(t){super.setHighlight(t);for(let s=0;s<this.Id.length;s+=1){const e=this.Id[s];"getHighlight"in(i=e)&&"setHighlight"in i&&e.setHighlight(t)}var i;return this}}class oo extends no{Ee(){super.Ee();const t=this.getPosition(n(-1,1),Ot.Content),i=this.Id.reduce(((t,i)=>t+ +(i instanceof ro)),0),s=i>0?(this.size.x-this.Pd)/i:0;return this.Id.reduce(((i,e)=>e instanceof ro?this.scale.gi({x:i,y:t.y},{x:s+e.getSize().x,y:0}).x:e.setOrigin(n(-1,1)).setPosition(n(i,t.y)).Ee().getPosition(n(1,0)).x),t.x),this}Vs(){for(let t=0;t<this.Id.length;t+=1){const i=this.Id[t];i instanceof ao&&i.setMinimumSize(0),i.Vs()}const t=this.Id.reduce(this.Ld.bind(this),o(0,0));this.Pd=t.x;const i=void 0===this.Bd?t:n(Math.max(t.x,this.Bd),t.y);this.setContentSize(i);for(let t=0;t<this.Id.length;t+=1){const s=this.Id[t];s instanceof ao&&s.setMinimumSize(i.y).Vs()}return super.Vs()}Ld(t,i){const s=i.getSize();return t.x+=s.x,t.y=Math.max(t.y,s.y),t}addGap(t=0,i=-1){return this.addElement(lo,i).setSize(n(0,t))}}class ao extends no{Ee(){super.Ee();const t=this.getPosition(n(-1,1),Ot.Content),i=this.Id.reduce(((t,i)=>t+ +(i instanceof ro)),0),s=i>0?(this.size.y-this.Pd)/i:0;return this.Id.reduce(((i,e)=>e instanceof ro?this.scale.gi({x:t.x,y:i},{x:0,y:-(s+e.getSize().y)}).y:e.setOrigin(n(-1,1)).setPosition(n(t.x,i)).Ee().getPosition(n(0,-1)).y),t.y),this}Vs(){for(let t=0;t<this.Id.length;t+=1){const i=this.Id[t];i instanceof oo&&i.setMinimumSize(0),i.Vs()}const t=this.Id.reduce(this.Ld.bind(this),o(0,0));this.Pd=t.y;const i=void 0===this.Bd?t:n(t.x,Math.max(t.y,this.Bd));this.setContentSize(i);for(let t=0;t<this.Id.length;t+=1){const s=this.Id[t];s instanceof oo&&s.setMinimumSize(i.x).Vs()}return super.Vs()}Ld(t,i){const s=i.getSize();return t.y+=s.y,t.x=Math.max(t.x,s.x),t}addGap(t=0,i=-1){return this.addElement(lo,i).setSize(n(0,t))}}const lo={...ln,...cn,uiElement:ro};class uo extends oo{constructor(){super(...arguments),this.Id=[]}addColumn(){return this.addElement(Ao,void 0)}getColumn(t,i=!1){return i&&this.Id.length<=t?(this.addColumn(),this.getColumn(t,!0)):this.Id[t]}}class co extends ao{constructor(){super(...arguments),this.Id=[]}addRow(){return this.addElement(go,void 0)}getRow(t,i=!1){return i&&this.Id.length<=t?(this.addRow(),this.getRow(t,!0)):this.Id[t]}}const fo={...ln,...un,...dn},Ao={...fo,uiElement:ao,background:qn},go={...fo,uiElement:oo,background:qn},yo={setTextLabel:null,setText(t){return this.setTextLabel.setText(t),this},getText(){return this.setTextLabel.getText()}},mo=(t,i)=>{const s={},e=`stylable${t}s`;return s[e]=i,s[`set${t}FillStyle`]=function(t){return this[e].forEach((i=>i.setFillStyle(t))),this},s[`get${t}FillStyle`]=function(){return this[e][0].getFillStyle()},s[`set${t}Font`]=function(t){return this[e].forEach((i=>i.setFont(t))),this},s[`get${t}Font`]=function(){return this[e][0].getFont()},s[`set${t}Rotation`]=function(t){return this[e].forEach((i=>i.setTextRotation(t))),this},s[`get${t}Rotation`]=function(){return this[e][0].getTextRotation()},s},po=mo("Text",[]),vo={button:void 0,isLocked:!1,setOn(t){const i=this.button.getOn()!==t;return this.button.setOn(t),i&&this.L.emit("switch",t),this},getOn(){return this.button.getOn()},setLocked(t){return this.isLocked=t,this},getLocked(){return this.isLocked},onSwitch(t){return this.L.on("switch",(i=>t(this,i)))},offSwitch(t){return this.L.off(t,"switch")},setButtonOffFillStyle(t){return this.button.setOffFillStyle(t),this},getButtonOffFillStyle(){return this.button.getOffFillStyle()},setButtonOnFillStyle(t){return this.button.setOnFillStyle(t),this},getButtonOnFillStyle(){return this.button.getOnFillStyle()},setButtonSize(t){return this.button.setSize(t),this},getButtonSize(){return this.button.getSize()},setButtonShape(t){return this.button.setButtonShape(t),this},getButtonShape(){return this.button.getButtonShape()}},So={textFillStyleHidden:void 0,setTextFillStyleHidden(t){return this.textFillStyleHidden="function"==typeof t?t(this.textFillStyleHidden):t,this},getTextFillStyleHidden(){return this.textFillStyleHidden}},bo={pointable:void 0,setDirection(t){return this.pointable.setDirection(t),this},getDirection(){return this.pointable.getDirection()},setPointerLength(t){return this.pointable.setPointerLength(t),this},getPointerLength(){return this.pointable.getPointerLength()}},xo={...ln,...un,background:qn,nc(t,i,s,e,h,r){const n=new oo(t,i,s,this.background,e,h),o=n.addElement(Kn,void 0),a=Object.assign(n,yo,{setTextLabel:o},po,{stylableTexts:[o]});return an(a,h,r),this.applyStylers(a,h)}}.addStyler(nn),Mo={...ln,...un,background:so,direction:Ut.Up,setDirection(t){return this.direction=t,this},nc(t,i,s,e,h,r){const n=this.direction,o=new oo(t,i,s,this.background,e,h),a=o.addElement(Kn,void 0),l=o.getBackground().setDirection(n),u=Object.assign(o,yo,{setTextLabel:a},po,{stylableTexts:[a]},bo,{pointable:l},{setTickLabelPadding(t){return this.getDirection()===Ut.Up?(this.setPadding({top:t}),a.setMargin({top:0})):this.getDirection()===Ut.Down?(this.setPadding({bottom:t}),a.setMargin({bottom:0})):this.getDirection()===Ut.Right?(this.setPadding({right:t}),a.setMargin({right:0})):this.getDirection()===Ut.Left&&(this.setPadding({left:t}),a.setMargin({left:0})),this},getTickLabelPadding(){return this.getDirection()===Ut.Up?this.getPadding().top:this.getDirection()===Ut.Down?this.getPadding().bottom:this.getDirection()===Ut.Right?this.getPadding().right:this.getPadding().left}});return u.oc="other",u.setPointerLength(h.xAxisNumericTicks.majorTickStyle.getTickLength()).setTickLabelPadding(h.xAxisNumericTicks.majorTickStyle.getTickPadding()).setTextFont(h.uiTextFont).setTextFillStyle(h.uiTextFillStyle).setBackground((t=>t.setFillStyle(h.uiBackgroundFillStyle).setStrokeStyle(h.uiBackgroundStrokeStyle))),an(u,h,r),this.applyStylers(u,h)}};class _o extends tn{constructor(t,i,e,h,r,n){super(t,i,e,r,n),this.Os=!1,this.L=new s,this.Rd=O,this.Ed=O,this.getOn=()=>this.Os,this.Ed=n.uiButtonFillStyleHidden||n.uiButtonFillStyle,this.zd=this.Du(new eo(this.Ls,this.renderingScale,this.scale,Zt,n).setShape(h)).setFillStyle(this.Ed)}Ou(){return[...this.zd.Ou()]}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}setOn(t){return this.Os=t,this.zd.setFillStyle(t?this.Rd:this.Ed),this.Ls.xs(),this}setOffFillStyle(t){return this.Ed="function"==typeof t?t(this.Ed):t,this.Os||this.zd.setFillStyle(this.Ed),this}getOffFillStyle(){return this.Ed}setSize(t){return this.zd.fitTo("number"==typeof t?n(t,t):t),this}getSize(){return this.zd.getSize()}setOnFillStyle(t){return this.Rd="function"==typeof t?t(this.Rd):t,this.Os&&this.zd.setFillStyle(this.Rd),this}getOnFillStyle(){return this.Rd}setButtonShape(t){return this.zd.setShape(t),this.Ls.xs(),this}getButtonShape(){return this.zd.getShape()}Ee(){return super.Ee(),this.zd.na=this.na,this.zd.setVisible(this.getVisible()).setPosition(this.getPosition(n(0,0),Ot.Content)).Ee(),this}Vs(){const t=this.zd.Vs().getSize();return this.setContentSize(t),super.Vs()}dispose(){return super.dispose(),this.zd.dispose(),this}setMouseInteractions(t){return this.zd.setMouseInteractions(t),this}getMouseInteractions(){return this.zd.getMouseInteractions()}setHighlight(t){const i=Ui(t);return this.zd.setHighlight(i),this.L.emit("highlight",this,t),this.Ls.xs(),this}getHighlight(){return this.zd.getHighlight()}}const wo={...ln,uiElement:_o,buttonShape:ar.Circle,setButtonShape(t){return{...this,buttonShape:t}},nc(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.buttonShape,e,h),h);return an(n,h,r),n}},Co={...ln,...un,background:qn,buttonBuilder:wo,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},nc(t,i,s,e,h,r){const n=new oo(t,i,s,this.background,e,h),o=n.addElement(Ao);o.addGap();const a=o.addElement(this.buttonBuilder);o.addGap();const l=n.addElement(Ao);l.addGap();const u=l.addElement(Kn);l.addGap(),n.addGap();const c=Object.assign(n,yo,{setTextLabel:u},po,{stylableTexts:[u]},vo,{button:a},So);let d;return c.onMouseClick(((t,i)=>{c.getLocked()||c.setOn(!c.getOn())})),c.onMouseEnter((()=>c.setHighlight(!0))),c.onMouseLeave((()=>c.setHighlight(!1))),c.setMouseStyle(Ke.Point),c.setTextFillStyleHidden(h.uiTextFillStyleHidden||h.uiTextFillStyle),c.onSwitch(((t,i)=>{i?d&&c.setTextFillStyle(d):(d=c.getTextFillStyle(),c.setTextFillStyle(c.getTextFillStyleHidden()))})),c.setPadding({left:5}),an(c,h,r),this.applyStylers(c,h)}}.addStyler(nn).addStyler(on);class ko extends tn{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.Vd=[],this.Od=2,this.Nd="",this.Gd=(t,i)=>void 0!==t.label?t.label:i.percentageValues?`${(100*t.value).toFixed(0)}%`:Js(t.value,i.min,i.max),this.Ud=0,this.Wd=0,this.Yd=!1,this.Ls=t,this.Hd=r,this.Xd=this.Du(t.Re(i).Be(dt)),this.$d=this.Du(t.Ur(i).Le(h.uiTextFillStyle).tr(h.uiTextFont).setMouseInteractions(!1)),"vertical"===r?(this.jd=140,this.Zd=25):(this.jd=160,this.Zd=15)}Ou(){return[this.Xd,this.$d]}Qd(t){this.Jd=t;const i=Io(t,"vertical"===this.Hd?0:90,this.Yd);return this.Xd.Le(i),this.Ls.xs(),this}Kd(){return this.Jd}qd(t){return this.jd=t,this.Ls.xs(),this}tf(){return this.jd}if(t){return this.Zd=t,this.Ls.xs(),this}sf(){return this.Zd}ef(t){return this.Nd=t,this.Ls.xs(),this}hf(){return this.Nd}rf(t){return this.Gd=t,this.Ls.xs(),this}setLUTDisplayProportionalSteps(t){if(this.Yd=t,this.Jd){const t=Io(this.Jd,"vertical"===this.Hd?0:90,this.Yd);this.Xd.Le(t)}return this.Ls.xs(),this}getLUTDisplayProportionalSteps(){return this.Yd}setFillStyle(t){return this.$d.Le(t),this.Ls.xs(),this}getFillStyle(){return this.$d.Qh()}setFont(t){return this.$d.tr(t),this.Ls.xs(),this}getFont(){return this.$d.qh()}setTextRotation(t){return this.Wd=t,this.$d.ir(t),this.Ls.xs(),this}getTextRotation(){return this.$d.sr()}Ee(){var t,i,s,e;if(super.Ee(),this.$i||!this.getVisible())return this;const h=this.Jd;if(h){const r=this.renderingScale.Gi(),n=h.min,o=h.max;if("vertical"===this.Hd){const s=this.getPosition({x:-1,y:-1},Ot.Content),e=Is(s,{x:this.Xd.ni().x+this.Od*r.x,y:0}),a={x:e.x,y:e.y+(this.Nd.length>0?this.Ud*r.y+this.$d.ni().y:0)+.5*((null===(t=this.Vd[0])||void 0===t?void 0:t.ni().y)||0)},l={x:a.x,y:this.getPosition({x:-1,y:1},Ot.Content).y-.5*((null===(i=this.Vd[this.Vd.length-1])||void 0===i?void 0:i.ni().y)||0)};this.Xd.ze({x:s.x,y:a.y}),this.$d.ja({x:-1,y:-1}).ze(e),h.getSteps().forEach(((t,i)=>{const s=ms(a,l,this.Yd?!0===h.getInterpolation()?(t.value-n)/(o-n):.9*(t.value-n)/(o-n):!0===h.getInterpolation()?i/(h.getSteps().length-1):i/h.getSteps().length);this.Vd[i].ja({x:-1,y:0}).ze(s)}))}else{const t=this.getPosition({x:-1,y:-1},Ot.Content),i=this.getPosition({x:1,y:1},Ot.Content),a=this.Vd.reduce(((t,i)=>Math.max(t,i.ni().y)),0),l=Is(t,{x:.5*((null===(s=this.Vd[0])||void 0===s?void 0:s.ni().x)||0),y:a}),u={x:i.x,y:l.y},c={x:u.x-(.5*((null===(e=this.Vd[this.Vd.length-1])||void 0===e?void 0:e.ni().x)||0)+(this.Nd.length>0?this.Ud*r.x+this.$d.ni().x:0)),y:l.y},d={x:l.x,y:l.y+this.Od*r.y};this.Xd.ze(d),this.$d.ja({x:1,y:1}).ze(u),h.getSteps().forEach(((t,i)=>{const s=ms(l,c,this.Yd?!0===h.getInterpolation()?(t.value-n)/(o-n):.9*(t.value-n)/(o-n):!0===h.getInterpolation()?i/(h.getSteps().length-1):i/h.getSteps().length);this.Vd[i].ja({x:0,y:1}).ze(s)}))}}return this}Vs(){if(this.Jd&&this.getVisible()){const t=this.Jd.getSteps();for(let i=this.Vd.length;i<t.length;i+=1)this.Vd.push(this.Du(this.Ls.Ur(this.renderingScale).setMouseInteractions(!1)));for(let i=0;i<t.length;i+=1)this.Vd[i].Le(this.$d.Qh()).tr(this.$d.qh()).vr(this.Gd(t[i],this.Jd)).ir(this.Wd);for(let i=t.length;i<this.Vd.length;i+=1)this.Vd[i].dispose();if(this.Vd.length=t.length,this.$d.vr(this.Nd),"vertical"===this.Hd){const t=this.Zd,i=this.jd;this.Xd.tt({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=t+Math.max(this.Vd.reduce(((t,i)=>Math.max(t,i.Vs().nd().x)),0),this.$d.Vs().nd().x),e=(this.Nd.length>0?this.Ud+this.$d.Vs().nd().y:0)+i+.5*this.Vd[0].Vs().nd().y+.5*this.Vd[this.Vd.length-1].Vs().nd().y;this.setContentSize({x:s,y:e})}else{const t=this.jd,i=this.Zd;this.Xd.tt({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=Math.max(this.Nd.length>0?this.Ud+this.$d.Vs().nd().x:0,.5*this.Vd[this.Vd.length-1].Vs().nd().x),e=t+.5*this.Vd[0].Vs().nd().x+s,h=i+this.Od+this.Vd.reduce(((t,i)=>Math.max(t,i.Vs().nd().y)),0);this.setContentSize({x:e,y:h})}}else this.Vd.forEach((t=>t.dispose())),this.Vd.length=0,this.$d.setVisible(!1),this.Xd.setVisible(!1),this.setContentSize({x:0,y:0});return super.Vs()}dispose(){return super.dispose(),this.Xd.dispose(),this.Vd.forEach(jt),this.$d.dispose(),this}setMouseInteractions(t){return this.Xd.setMouseInteractions(t),this}getMouseInteractions(){return this.Xd.getMouseInteractions()}}const To={lutElement:{},setLUT(t){return this.lutElement.Qd(t),this},getLUT(){return this.lutElement.Kd()},setLUTLength(t){return this.lutElement.qd(t),this},getLUTLength(){return this.lutElement.tf()},setLUTThickness(t){return this.lutElement.if(t),this},getLUTThickness(){return this.lutElement.sf()},setLookUpUnit(t){return this.lutElement.ef(t),this},getLookUpUnit(){return this.lutElement.hf()},setLUTStepValueFormatter(t){return this.lutElement.rf(t),this},setLUTDisplayProportionalSteps(t){return this.lutElement.setLUTDisplayProportionalSteps(t),this},getLUTDisplayProportionalSteps(){return this.lutElement.getLUTDisplayProportionalSteps()}},Fo={...ln,...un,background:qn,alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},nc(t,i,s,e,h,r){const n=new ao(t,i,s,this.background,e,h),o=n.addElement({nc:()=>new ko(t,i,s,Zt,h,this.alignment)}),a=Object.assign(n,po,{stylableTexts:[o]},To,{lutElement:o});return an(a,h,r),this.applyStylers(a,h)}}.addStyler(nn),Io=(t,i,s)=>{const e=t.getSteps(),h=t.min,r=t.max-h;if(!0===t.getInterpolation())return new lt({angle:i,stops:e.map(((i,n)=>({offset:s?(i.value-h)/r:n/(e.length-1),color:i.color||t.color})))});const n=[];for(let i=0;i<e.length;i+=1){const o=e[i];n.push({offset:s?.9*(o.value-h)/r:i/e.length,color:o.color||t.color});const a=i<e.length-1?e[i+1]:void 0;n.push({offset:s?a?.9*(a.value-h)/r:1:a?(i+1)/e.length:1,color:o.color||t.color})}return new lt({angle:i,stops:n})},Po={...ln,...un,background:qn,buttonBuilder:wo,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},nc(t,i,s,e,h){const r=new ao(t,i,s,this.background,e,h),n=r.addElement(go),o=n.addElement(Ao);o.addGap();const a=o.addElement(this.buttonBuilder);o.addGap();const l=n.addElement(Ao);l.addGap();const u=l.addElement(Kn);l.addGap();const c=r.addElement({nc:()=>new ko(t,i,s,Zt,h,this.alignment)});"vertical"===this.alignment&&c.setMargin({left:h.uiButtonSize+6});const d=Object.assign(r,yo,{setTextLabel:u},po,{stylableTexts:[u,c]},mo("LUTText",[c]),vo,{button:a},To,{lutElement:c},So);let f;return d.onMouseClick((()=>{d.getLocked()||d.setOn(!d.getOn())})),d.onMouseEnter((()=>d.setHighlight(!0))),d.onMouseLeave((()=>d.setHighlight(!1))),d.setMouseStyle(Ke.Point),d.setTextFillStyleHidden(h.uiTextFillStyleHidden||h.uiTextFillStyle),d.onSwitch(((t,i)=>{i?f&&d.setTextFillStyle(f):(f=d.getTextFillStyle(),d.setTextFillStyle(d.getTextFillStyleHidden()))})),d.setPadding({left:5}),this.applyStylers(d,h)}}.addStyler(nn).addStyler(on),Do={alignment:null,title:null,entryStylers:null,legendBoxDisposed:null,entries:[],add(t,i){const s=!i||"object"!=typeof i||void 0===i.toggleVisibilityOnClick||i.toggleVisibilityOnClick,e=null==i?void 0:i.matchStyleExactly,h=i&&"object"==typeof i&&void 0!==i.builder?i.builder:void 0;return this.legendBoxDisposed()||(t instanceof Na?this.addChart(t,s,h,e):"attach"in t?this.addAttachable(t,s,h,e):t&&this.addDashboard(t,s,h,e)),this},addAttachable(t,i,s,e){const h=t.Kd&&t.Kd(),r=t.Ds&&t.Ds(),n=void 0!==e&&e;let o=s;if(!o){let t=h?Po.setAlignment(this.alignment):Co;void 0!==r&&(t=t.setButtonShape(r)),o=t}const a=this.addElement(o);if(h&&"setLUT"in a){a.setLUT(h.lut);const t=h.lut.getUnits(),i=h.lookUpProperty,s=t.length>0?t:"x"===i?"x":"y"===i?"y":"z"===i?"z":"";a.setLookUpUnit(s)}return this.entryStylers.forEach((t=>t(a))),this.entries.push({entry:a,component:t}),t.attach(a,i,n),i||a.setLocked(!0),this},addChart(t,i,s,e){return t.nf().forEach((t=>this.addAttachable(t,i,s,e))),this},addDashboard(t,i,s,e){return t.getCells().filter((t=>t.panel instanceof Na)).forEach((t=>this.addChart(t.panel,i,s,e))),this},setTitle(t){return this.title.setText(t),this},getTitle(){return this.title.getText()},setTitleFillStyle(t){return this.title.setTextFillStyle(t),this},getTitleFillStyle(){return this.title.getTextFillStyle()},setTitleFont(t){return this.title.setTextFont(t),this},getTitleFont(){return this.title.getTextFont()},setTitleRotation(t){return this.title.setTextRotation(t),this},getTitleRotation(){return this.title.getTextRotation()},setEntries(t){return this.entries.forEach((i=>t(i.entry,i.component))),this}},Bo={alignment:"vertical",layoutBuilder:Ao,setAlignment(t){return{...this,alignment:t,layoutBuilder:"horizontal"===t?go:Ao}},getAlignment(){return this.alignment},titleBuilder:xo,styleTitle(t){return{...this,titleBuilder:this.titleBuilder.addStyler(t)}},entryStylers:[],styleEntries(t){return{...this,entryStylers:[...this.entryStylers,t]}}},Lo={...ln,...un,...Bo,background:qn,nc(t,i,s,e,h,r){const n=this.layoutBuilder.setBackground(this.background).nc(t,i,s,e,h,!1);let o=Object.assign(n,Do,{alignment:this.alignment,entryStylers:this.entryStylers,legendBoxDisposed:()=>n.$i});o.entries=[];const a=o.addElement("horizontal"===this.alignment?Ao:go),l=a.addElement(this.titleBuilder).setText("Legend").setTextFillStyle(h.legendTitleFillStyle).setTextFont(h.legendTitleFont);return a.addGap(),o=Object.assign(o,{title:l}),"horizontal"===this.alignment&&l.setMargin({right:6}),an(o,h,r),this.applyStylers(o,h)}}.addStyler(((t,i)=>t.setPadding(5)));class Ro extends tn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.af=10,this.lf=Ut.Up,this.uf=0,this.oc="major",this.ba=this.Du(t.Ur(this.renderingScale).Nr(Qi).Gr(Qi)),this.Ue=this.Du(t.Ye(this.renderingScale))}Ou(){return[this.ba]}Ee(){if(super.Ee(),this.$i)return this;const t=pt(this.getPosition(),this.scale,this.renderingScale),i=this.renderingScale.gi(t,{x:this.lf===Ut.Right?-this.af:this.lf===Ut.Left?this.af:0,y:this.lf===Ut.Up?-this.af:this.lf===Ut.Down?this.af:0}),s=this.renderingScale.gi(i,{x:this.lf===Ut.Right?-this.uf:this.lf===Ut.Left?this.uf:0,y:this.lf===Ut.Up?-this.uf:this.lf===Ut.Down?this.uf:0});return this.Ue.Xe(t).He(i),this.ba.ze(s).ja(this.lf===Ut.Up?{x:0,y:1}:this.lf===Ut.Down?{x:0,y:-1}:this.lf===Ut.Right?{x:1,y:0}:{x:-1,y:0}),this}Vs(){const t=this.Ue.Su().getThickness();return this.size=this.lf===Ut.Left||this.lf===Ut.Right?{x:this.af+this.uf+this.ba.Vs().nd().x,y:t}:{y:this.af+this.uf+this.ba.Vs().nd().y,x:t},super.Vs()}dispose(){return super.dispose(),this.ba.dispose(),this.Ue.dispose(),this}setVisible(t){return super.setVisible(t),this.ba.setVisible(t),this.Ue.setVisible(t),this}setMouseInteractions(t){return this.ba.setMouseInteractions(t),this.Ue.setMouseInteractions(t),this}getMouseInteractions(){return this.ba.getMouseInteractions()}getText(){return this.ba.kr()}setTextFillStyle(t){return this.ba.Le(t),this.Ls.xs(),this}getTextFillStyle(){return this.ba.Qh()}setTextFont(t){return this.ba.tr(t),this}setTextRotation(t){return this.ba.ir(t),this}getTextRotation(){return this.ba.sr()}getTextFont(){return this.ba.qh()}setText(t){return this.ba.vr(t),this.Ls.xs(),this}setDirection(t){return this.lf=t,this.Ls.xs(),this}getDirection(){return this.lf}setPointerLength(t){return this.af=t,this.Ls.xs(),this}getPointerLength(){return this.af}setTickLabelPadding(t){return this.uf=t,this.Ls.xs(),this}getTickLabelPadding(){return this.uf}setTickStyle(t){return this.Ue.We(t),this.Ls.xs(),this}getTickStyle(){return this.Ue.Su()}}const Eo={...ln,direction:Ut.Up,setDirection(t){return this.direction=t,this},nc(t,i,s,e,h,r){const n=this.direction,o=new Ro(t,i,s,e,h);return an(o,h,r),o.setDirection(n),this.applyStylers(o,h)}}.addStyler(nn),zo=Eo.addStyler(((t,i)=>(t.oc="major",t.setPointerLength(i.xAxisNumericTicks.majorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.majorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.majorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.majorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.majorTickStyle.labelFillStyle)))),Vo=Eo.addStyler(((t,i)=>(t.oc="minor",t.setPointerLength(i.xAxisNumericTicks.minorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.minorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.minorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.minorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.minorTickStyle.labelFillStyle)))),Oo=Co.addStyler((t=>t.onSwitch(((i,s)=>!0===s?setTimeout((()=>t.setOn(!1)),300):void 0)))),No=Lo.setAlignment("horizontal"),Go=Lo.setAlignment("vertical"),Uo={TextBox:xo,CheckBox:Co,ButtonBox:Oo,PointableTextBox:Mo,AxisTickMajor:zo,AxisTickMinor:Vo,LUTRange:Fo},Wo={HorizontalLegendBox:No,VerticalLegendBox:Go},Yo={cf:"X0Z1bGxBY2Nlc3M=",df:"X0Jhc2VDaGFydHM=",ff:"RGF0YSBHcmlk",Af:"X0hhc0hhcmRFeHBpcmF0aW9u",gf:"X0lzVHJpYWw=",yf:"X0lzQ29tbXVuaXR5",mf:"T0hMQyBTZXJpZXM=",pf:"QmFyIENoYXJ0",vf:"c2xpY2VkIGNoYXJ0cw==",Sf:"R2F1Z2UgQ2hhcnQ=",bf:"U3BpZGVyIENoYXJ0",xf:"UG9sYXIgQ2hhcnQ=",Mf:"M0QgQ2hhcnQ=",_f:"Wm9vbSBCYW5kIENoYXJ0",wf:"TWFwIENoYXJ0",Cf:"WFkgQ2hhcnQ=",kf:"WFkgU2VyaWVz",Tf:"SGVhdG1hcCBTZXJpZXM=",Ff:"RmlndXJlIFNlcmllcw==",If:"bG9nYXJpdGhtaWMgYXhpcw==",Pf:"cmVhbC10aW1lIHZpc3VhbGl6YXRpb24=",Df:"aW5kaXZpZHVhbCBwb2ludCBzaXpl",Bf:"aW5kaXZpZHVhbCBwb2ludCBjb2xvcg==",Lf:"VHJlZU1hcCBDaGFydA==",Rf:"UGFyYWxsZWwgQ29vcmRpbmF0ZSBDaGFydA==",Ef:"X1B5dGhvbkxpY2Vuc2U="};class Ho extends Fh{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.zf=h}}class Xo extends Th{constructor(t,i,e,h,r,o,a,l,u,c,d,f,A,g,y,m){var p,v,S;super(c,u,a,g,y,{numeric:u.getWidth({x:g.xAxisNumericTicks,y:g.yAxisNumericTicks}),datetime:u.getWidth({x:g.xAxisDateTimeTicks,y:g.yAxisDateTimeTicks}),time:u.getWidth({x:g.xAxisTimeTicks,y:g.yAxisTimeTicks})},m),this.Vf=new Map,this.Of=void 0,this.Nf=0,this.Gf=[],this.Uf=[],this.dh=ch.fitting,this.Wf=!0,this.Yf=8,this.Hf=void 0,this.Xf=void 0,this.$f=20,this.jf=1,this.Zf=!0,this.Qf=!0,this.Jf=!0,this.Kf=!0,this.qf=!0,this.tA=!0,this.iA=!0,this.sA=!0,this.eA=!0,this.hA=!0,this.rA=this.Nh.defaultDragMouseStyle,this.nA=this.Nh.defaultDragMouseStyle,this.oA=this.Nh.defaultDragMouseStyle,this.aA=this.Nh.defaultDragMouseStyle,this.lA=this.Nh.defaultDragMouseStyle,this.L=new s,this.uA=[],this.cA=t=>{const i=this.Uf.indexOf(t);i>=0&&this.Uf.splice(i,1)},this.dA=t=>(this.Uf.indexOf(t)<0&&this.Uf.push(t),this.cA),this.fA="center",this.Lt=(t,i)=>this.L.emit("axisAreaTouch",this,i),this.AA=bi(this.uA),this.onAxisInteractionAreaMouseClick=t=>this.L.on("axisAreaMouseClick",t),this.onAxisInteractionAreaMouseDoubleClick=t=>this.L.on("axisAreaDoubleClick",t),this.onAxisInteractionAreaMouseDown=t=>this.L.on("axisAreaMouseDown",t),this.onAxisInteractionAreaMouseUp=t=>this.L.on("axisAreaMouseUp",t),this.onAxisInteractionAreaMouseEnter=t=>this.L.on("axisAreaMouseEnter",t),this.onAxisInteractionAreaMouseLeave=t=>this.L.on("axisAreaMouseLeave",t),this.onAxisInteractionAreaMouseMove=t=>this.L.on("axisAreaMouseMove",t),this.onAxisInteractionAreaMouseWheel=t=>this.L.on("axisAreaMouseWheel",t),this.onAxisInteractionAreaMouseDragStart=t=>this.L.on("axisAreaMouseDragStart",t),this.onAxisInteractionAreaMouseDrag=t=>this.L.on("axisAreaMouseDrag",t),this.onAxisInteractionAreaMouseDragStop=t=>this.L.on("axisAreaMouseDragStop",t),this.onAxisInteractionAreaTouchStart=t=>this.L.on("axisAreaTouchStart",t),this.onAxisInteractionAreaTouch=t=>this.L.on("axisAreaTouch",t),this.onAxisInteractionAreaTouchStop=t=>this.L.on("axisAreaTouchEnd",t),this.offAxisInteractionAreaMouseClick=t=>this.L.off(t,"axisAreaMouseClick"),this.offAxisInteractionAreaMouseDoubleClick=t=>this.L.off(t,"axisAreaDoubleClick"),this.offAxisInteractionAreaMouseDown=t=>this.L.off(t,"axisAreaMouseDown"),this.offAxisInteractionAreaMouseUp=t=>this.L.off(t,"axisAreaMouseUp"),this.offAxisInteractionAreaMouseEnter=t=>this.L.off(t,"axisAreaMouseEnter"),this.offAxisInteractionAreaMouseLeave=t=>this.L.off(t,"axisAreaMouseLeave"),this.offAxisInteractionAreaMouseMove=t=>this.L.off(t,"axisAreaMouseMove"),this.offAxisInteractionAreaMouseWheel=t=>this.L.off(t,"axisAreaMouseWheel"),this.offAxisInteractionAreaMouseDragStart=t=>this.L.off(t,"axisAreaMouseDragStart"),this.offAxisInteractionAreaMouseDrag=t=>this.L.off(t,"axisAreaMouseDrag"),this.offAxisInteractionAreaMouseDragStop=t=>this.L.off(t,"axisAreaMouseDragStop"),this.offAxisInteractionAreaTouchStart=t=>this.L.off(t,"axisAreaTouchStart"),this.offAxisInteractionAreaTouch=t=>this.L.off(t,"axisAreaTouch"),this.offAxisInteractionAreaTouchStop=t=>this.L.off(t,"axisAreaTouchEnd"),this.jd={relative:1},this.gA=0,this.yA=0,this.mA=(t,i)=>i.getAllocatesAxisSpace()?Math.max(t,i.update().uc()):t,this.pA=t=>{const i=this.Gf.indexOf(t);-1!==i&&this.Gf.splice(i,1)},this.vA=(t,i)=>{this.L.emit("axisAreaDoubleClick",this,i),this.Kf&&(this.setStopped(!1),mi(i))},this.SA=t=>{this.L.emit("axisAreaMouseEnter",this),(this.Qf||this.Zf||this.Jf||this.Kf)&&this.bA(t)},this.xA=t=>{this.MA(t),this.L.emit("axisAreaMouseLeave",this)},this._A=(t,i,s)=>{var e,h;this.L.emit("axisAreaMouseDragStart",this,i,s);const r=qt(null===(e=this.chart.wA.io)||void 0===e?void 0:e.axisXYZoomMouseButton,0),o=qt(null===(h=this.chart.wA.io)||void 0===h?void 0:h.axisXYPanMouseButton,2),a=n(i.clientX,i.clientY);s===o&&this.Qf?(this.CA(t),mi(i)):s===r&&this.Zf&&(this.kA(t,a),mi(i))},this.TA=(t,i,s,e,h)=>{var r,o;this.L.emit("axisAreaMouseDrag",this,i,s,e,h);const a=qt(null===(r=this.chart.wA.io)||void 0===r?void 0:r.axisXYZoomMouseButton,0),l=qt(null===(o=this.chart.wA.io)||void 0===o?void 0:o.axisXYPanMouseButton,2),u=n(i.clientX,i.clientY);s===l&&this.Qf?(this.FA(t,h),mi(i)):s===a&&this.Zf&&(this.IA(t,e,u,h),mi(i))},this.PA=(t,i,s,e)=>{var h,r;this.L.emit("axisAreaMouseDragStop",this,i,s,e);const o=qt(null===(h=this.chart.wA.io)||void 0===h?void 0:h.axisXYZoomMouseButton,0),a=qt(null===(r=this.chart.wA.io)||void 0===r?void 0:r.axisXYPanMouseButton,2),l=n(i.clientX,i.clientY);s===a&&this.Qf?(this.DA(t),mi(i)):s===o&&this.Zf&&(this.BA(t,e,l),mi(i)),t.getIsUnderMouse()&&(this.Qf||this.Zf||this.Jf||this.Kf)&&this.bA(t)},this.LA=(t,i)=>{if(this.L.emit("axisAreaMouseWheel",this,i),this.Jf){this.setStopped(!0);const t=this.Nh.getWidth(this.RA.us.Oe(i.clientX,i.clientY)),s=this.ft.ct(t);this.zoom(s,Ei(i)),mi(i)}},this.EA=(t,i)=>this.L.emit("axisAreaMouseClick",this,i),this.zA=(t,i)=>this.L.emit("axisAreaMouseDown",this,i),this.VA=(t,i)=>this.L.emit("axisAreaMouseUp",this,i),this.OA=(t,i)=>this.L.emit("axisAreaMouseMove",this,i),this.NA=(t,i,s)=>{this.L.emit("axisAreaTouchStart",this,s),this.Zf&&(this.bA(t),this.kA(t,i),mi(s))},this.GA=(t,i,s,e,h)=>{this.L.emit("axisAreaTouch",this,h),this.Zf&&(this.IA(t,i,s,e),mi(h))},this.UA=(t,i,s,e)=>{this.L.emit("axisAreaTouchEnd",this,e),this.Zf&&(this.BA(t,i,s),this.MA(t),mi(e))},this.WA=(t,i,s,e)=>{(this.Qf||this.Jf)&&(this.bA(t),this.CA(t),mi(e))},this.YA=(t,i,s,e,h,r)=>{if(this.Qf){const i=n((e.x+h.x)/2,(e.y+h.y)/2);this.FA(t,i),mi(r)}if(this.Jf){const t=this.RA.us.Oe(i.x,i.y),n=this.RA.us.Oe(s.x,s.y),o=Math.abs(this.Nh.getWidth(Ps(t,e))-this.Nh.getWidth(Ps(n,h)))-Math.abs(this.Nh.getWidth(t)-this.Nh.getWidth(n)),a=this.ft.gi(this.Hh,-o),l=this.ft.gi(this.Xh,o);this.lr(a,l,!0),mi(r)}},this.HA=(t,i,s,e)=>{(this.Qf||this.Jf)&&(this.DA(t),this.MA(t),mi(e))},this.XA=(t,i)=>{(this.qf||this.tA)&&this.$A(t)},this.jA=(t,i)=>{this.ZA(t)},this.QA=(t,i,s)=>{const e=n(i.clientX,i.clientY);this.qf&&this.JA(t,e)},this.KA=(t,i,s,e,h)=>{const r=n(i.clientX,i.clientY);this.qf&&this.qA(t,r,e,h)},this.tg=(t,i,s,e,h)=>{const r=n(i.clientX,i.clientY);this.qf&&this.ig(t,r,e,h)},this.sg=(t,i,s,e)=>{const h=n(i.clientX,i.clientY);(this.qf||this.tA)&&this.eg(t,h,e),(this.qf||this.tA)&&this.$A(t)},this.hg=(t,i)=>{this.tA&&(this.setStopped(!0),this.zoom(this.Hh,Ei(i)),mi(i))},this.rg=(t,i)=>{this.tA&&(this.setStopped(!0),this.zoom(this.Xh,Ei(i)),mi(i))},this.ng=(t,i,s)=>{this.qf&&(this.$A(t),this.JA(t,i),mi(s))},this.og=(t,i,s,e,h)=>{this.qf&&(this.qA(t,i,s,e),mi(h))},this.ag=(t,i,s,e,h)=>{this.qf&&(this.ig(t,i,s,e),mi(h))},this.lg=(t,i,s,e)=>{this.qf&&(this.eg(t,i,s),this.ZA(t),mi(e))},this.ug=t,this.RA=i,this.cg=h,this.dg=r,this.chart=c,this.Ag=f,this.gg=e,this.ss=o,"logarithmic"===m.type&&this.chart.us.Qn(Yo.If),A(this,this.dA),a.yg=this,this.mg=d,this.pg=this.mg>50?1:-1,this.vg=(S=this.Nh.toPoint(0,-this.pg),Math.abs(S.x)>=Math.abs(S.y)?S.x>=0?Ut.Right:Ut.Left:S.y>=0?Ut.Up:Ut.Down),this.Sg=l,this.bg=this.ft instanceof te?(new ee).Li(this.Nh.toVec2(this.ft,this.Sg)):(new he).Li(this.Nh.toVec2(this.ft,this.Sg)),this.xg=this.chart.Mg,this._g=(new ee).Li(this.Nh.toVec2(this.Nh.getWidth(this.xg),this.Sg)),this.wg=this.RA.Ye(this.bg).setMouseInteractions(!1),this.Cg=this.RA.Ye(this.bg).setMouseInteractions(!1),this.kg=this.RA.Ye(this.bg).setMouseInteractions(!1),this.Tg=this.gg.Re(this.xg).Le(u.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).Be(dt).ha(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.Fg=this.gg.Re(this.xg).Le(u.getWidth({x:g.xAxisZoomingBandFillStyle,y:g.yAxisZoomingBandFillStyle})).Be(u.getWidth({x:g.xAxisZoomingBandStrokeStyle,y:g.yAxisZoomingBandStrokeStyle})),this.Ig=this.gg.Re(this.xg).Le(u.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).Be(dt).ha(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.Pg=this.gg.Re(this.xg).Le(u.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).Be(dt).ha(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.Th=this.gg.Ur(this.bg).setMouseInteractions(!1).ir(this.Nh.getTitleTextRotation(this.pg)).Gr(Qi).Nr(Qi),this.chart.us.ls.os(this.Tg,(t=>this.Tg.cs(t)),{animationEnabled:this.gh}),this.chart.us.ls.os(this.Ig,(t=>this.Ig.cs(t)),{animationEnabled:this.gh}),this.chart.us.ls.os(this.Pg,(t=>this.Pg.cs(t)),{animationEnabled:this.gh});const b=ve(new be(this.NA,this.GA,this.UA,1),new xe(this.WA,this.YA,this.HA),new Se(this.vA)),x=ve(new be(this.ng,this.og,this.lg)),M=ve(new be(this.ng,this.ag,this.lg));this.Tg.setMouseEnterEventHandler(this.SA).setMouseLeaveEventHandler(this.xA).setMouseDragStartEventHandler(this._A).setMouseDragEventHandler(this.TA).setMouseDragStopEventHandler(this.PA).setMouseWheelEventHandler(this.LA).setMouseDoubleClickEventHandler(this.vA).setMouseClickEventHandler(this.EA).setMouseDownEventHandler(this.zA).setMouseUpEventHandler(this.VA).setMouseMoveEventHandler(this.OA).setTouchStartEventHandler(b.onTouchStart).setTouchMoveEventHandler(b.onTouchMove).setTouchEndEventHandler(b.onTouchEnd),this.Ig.setMouseEnterEventHandler(this.XA).setMouseLeaveEventHandler(this.jA).setMouseDragStartEventHandler(this.QA).setMouseDragEventHandler(this.KA).setMouseDragStopEventHandler(this.sg).setMouseWheelEventHandler(this.hg).setTouchStartEventHandler(x.onTouchStart).setTouchMoveEventHandler(x.onTouchMove).setTouchEndEventHandler(x.onTouchEnd),this.Pg.setMouseEnterEventHandler(this.XA).setMouseLeaveEventHandler(this.jA).setMouseDragStartEventHandler(this.QA).setMouseDragEventHandler(this.tg).setMouseDragStopEventHandler(this.sg).setMouseWheelEventHandler(this.rg).setTouchStartEventHandler(M.onTouchStart).setTouchMoveEventHandler(M.onTouchMove).setTouchEndEventHandler(M.onTouchEnd),this.wg.We(u.getWidth({x:g.xAxisStrokeStyle,y:g.yAxisStrokeStyle})),this.Cg.We(u.getWidth({x:g.xAxisNibStyle,y:g.yAxisNibStyle})),this.kg.We(u.getWidth({x:g.xAxisNibStyle,y:g.yAxisNibStyle})),this.Th.Le(u.getWidth({x:g.xAxisTitleFillStyle,y:g.yAxisTitleFillStyle})).tr(u.getWidth({x:g.xAxisTitleFont,y:g.yAxisTitleFont})),this.es=o.hs(this,{}),this.er=this.es.Dg([this.Th]).bs(g.effectsText),this.Bg=null!==(p=u.getWidth({x:g.xAxisMarginAfterTicks,y:g.yAxisMarginAfterTicks}))&&void 0!==p?p:7,this.Lg=null!==(v=u.getWidth({x:g.xAxisMarginAfterTitle,y:g.yAxisMarginAfterTitle}))&&void 0!==v?v:7}Vr(){return this.ph}Or(){return void 0!==this.ar}setTickStrategy(t,i){return super.Yh(t,i)}getTickStrategy(){return this.ah}addBand(t=!0){const i=t?this.dg:this.cg,s=new lh(i,this.chart,this.AA,this,this.bg,this.Nh,this.qi,this.ss);return this.uA.push(s),s}addConstantLine(t=!0){const i=t?this.dg:this.cg,s=new uh(i,this.chart,this.AA,this,this.bg,this.Nh,this.qi,this.ss);return this.uA.push(s),s}Rg(t){this.uA.forEach(t)}Eg(t){return this.uA.map(t)}getHighlighters(){return this.uA}setThickness(t){return"number"==typeof t?(this.zg=t,this.Vg=t):"object"==typeof t&&(this.zg=t.min,this.Vg=t.max),this.chart.us.xs(),this}getThickness(){return{min:this.zg,max:this.Vg}}setMouseInteractions(t){return this.setAxisInteractionPanByDragging(t).setAxisInteractionReleaseByDoubleClicking(t).setAxisInteractionZoomByDragging(t).setAxisInteractionZoomByWheeling(t).setNibInteractionScaleByDragging(t).setNibInteractionScaleByWheeling(t)}Og(){return this.Uf}br(t,i){return new Ho(i,t,this.RA,this.bg,this.bg)}hr(){if(this.Vf){for(const t of this.Vf)t[1].grid.dispose(),t[1].tick.dispose();this.Vf.clear()}super.hr()}Mr(t,i){const{tickStart:s}=i,e=t.Rh.$e,h=s+e.getTickLength()*this.pg+e.getTickPadding()*this.pg;t.hh.ze(this.Nh.toPoint(t.S,h)).ja(this.Nh.toPoint(e.getLabelAlignment(),-this.pg)).ir(e.labelRotation).setVisible(this.getVisible())}Ng(t,i){const{startPosition:s,gridStrokeLen:e,gridStrokeStart:h,tickStart:r}=i,n=t.Rh.$e,o=s-e*n.getGridStrokeLength(),a=r+n.getTickLength()*this.pg;return{gridStroke:{start:this.Nh.toPoint(t.S,h),end:this.Nh.toPoint(t.S,o)},tickStroke:{start:this.Nh.toPoint(t.S,r),end:this.Nh.toPoint(t.S,a)}}}Rr(t,i){return"linear"===this.Uh.type?fe(t,i,this.ft):Ae(t,i,this.ft)}Gg(t,i){return i instanceof te?fe:Ae}zr(t,i,s){if("logarithmic"!==this.Uh.type){const e=this.ft.Bi(i-t);return{min:t-s*e,max:i+s*e}}const e=this.ft,h={start:e.X,end:e.$};e.K(t,i).di();const r={min:e.gi(t,-s),max:e.gi(i,s)};return e.K(h.start,h.end).di(),r}Vs(){if(!this.ji)return{Ug:0,Wg:0,Zd:0};const t=!(this.lh.size>0),i=this.Th&&this.Th.kr().length>0&&this.getTitleFillStyle()!==O,s=this.Nh.getHeight(i?this.chart.us.Hg.Yg(this.Th.kr(),this.getTitleFont(),this.getTitleRotation()):{x:0,y:0})+(i?this.Lg:0),e=_h(this.oh)?new Map:Ih(this.oh,Math.min(this.Hh,this.Xh),Math.max(this.Hh,this.Xh),this.Hh,this.Xh,0),h=this.ft;let r=0;e.forEach(((i,s)=>{if(fh(s)){const e=Math.max(...i.map((i=>{if(!As(i,this.Hh,this.Xh))return 0;const e=this.chart.us.Hg.Yg(s.je(i,h),s.$e.labelFont,s.$e.labelRotation);return t||!e.isEstimate?this.Nh.getHeight(e):0})))+s.$e.tickLength+s.$e.tickPadding;r=Math.max(r,e)}}));const n=this.Gf.reduce(this.mA,0);r=Math.max(r,n),r+=this.Bg;const o=Jt(s+r,void 0!==this.zg?this.zg:0,void 0!==this.Vg?this.Vg:es);return this.Nf=o,{Ug:r,Wg:s,Zd:o}}Ee(t){const i=this.getVisible()&&t.Xg>0;this.$g=t;const s=this.wg.Su(),e=this.ft.getInnerStart()<this.ft.getInnerEnd()?this.ft.getInnerStart():this.ft.getInnerEnd(),h=this.ft.getInnerEnd()>this.ft.getInnerStart()?this.ft.getInnerEnd():this.ft.getInnerStart(),r=s.getThickness()*this.pg/2,n=this.Sg.getInnerInterval(),o=this.mg/100*n,a=o+t.jg,l=n*this.pg,u=a+r;if(i||this.hr(),!_h(this.oh)&&i){const t=this.ft.hi();this.cr({physicalAxisSize:t,startPosition:o,gridStrokeLen:l,gridStrokeStart:a,tickStart:u});for(const[i,s]of this.lh){let e=this.Vf.get(i);if(!e)if(i.Ze)e={grid:this.ug[0].Zg(this.bg).setMouseInteractions(!1),tick:this.ug[0].Zg(this.bg).setMouseInteractions(!1)};else if("Qg"in i){const t=Array.from(this.lh.keys()).filter((t=>"Qg"in t)).reverse().indexOf(i),s=this.ug[t];if(!s)throw new Error("Not enough tick layers. This is an internal LCJS error - if you see this, please contact Arction support.");e={grid:s.Zg(this.bg).setMouseInteractions(!1),tick:s.Zg(this.bg).setMouseInteractions(!1)}}if(e){e.grid.Vt(),e.tick.Vt();for(const[i,h]of s){const i=this.Ng(h,{physicalAxisSize:t,startPosition:o,gridStrokeLen:l,gridStrokeStart:a,tickStart:u});e.grid.jr().Jg(i.gridStroke.start,i.gridStroke.end),e.tick.jr().Jg(i.tickStroke.start,i.tickStroke.end)}e.grid.We(i.$e.getGridStrokeStyle()),e.tick.We(i.$e.getTickStyle()),this.Vf.set(i,e)}}}const c=u,d=c+this.pg*t.Kg,f=this.qf||this.tA?Math.min(this.$f,.25*t.Xg):0,A={start:this.Nh.toVec2(this.ft.gi(this.ft.getInnerStart(),f),c),end:this.Nh.toVec2(this.ft.gi(this.ft.getInnerEnd(),-f),d)},g=pt(this.Nh.toVec2(this.ft.getInnerStart(),d),this.bg,this.xg),y=pt(A.start,this.bg,this.xg),m=pt(A.end,this.bg,this.xg),p=pt(this.Nh.toVec2(this.ft.getInnerEnd(),c),this.bg,this.xg);this.wg.Xe(this.Nh.toPoint(e,a)).He(this.Nh.toPoint(h,a)).setVisible(i),this.Cg.Xe(this.Nh.toPoint(this.ft.gi(this.ft.getInnerStart(),this.Yf),a)).He(this.Nh.toPoint(this.ft.getInnerStart(),a)).setVisible(i),this.kg.Xe(this.Nh.toPoint(this.ft.gi(this.ft.getInnerEnd(),-this.Yf),a)).He(this.Nh.toPoint(this.ft.getInnerEnd(),a)).setVisible(i);const v=a+t.Ug*this.pg;if(this.Th.ze(this.Nh.toPoint(this.Nh.getWidth(pt("center"===this.fA?Fs(Is(g,p),.5):"start"===this.fA?g:p,this.xg,this.bg)),v)).ja(this.Nh.toPoint("center"===this.fA?0:"start"===this.fA?-1:1,-1*this.pg)).setVisible(i).setMouseInteractions(void 0!==["mouseEnterTitle","mouseMoveTitle","mouseLeaveTitle","mouseDownTitle","mouseUpTitle","mouseClickTitle","mouseDoubleClickTitle","mouseDragStartTitle","mouseDragTitle","mouseDragStopTitle","mouseWheelTitle","touchStartTitle","touchMoveTitle","touchEndTitle"].find((t=>this.L.listeners(t).size>0))),this.Of){const i=this.mg/100*n+t.jg,s=-this.pg*n-t.jg,e={start:this.Nh.toVec2(this.Of.min,u+this.pg*this.Nf),end:this.Nh.toVec2(this.Of.max,i+s)},h=pt(e.start,this.bg,this.xg),r=pt(e.end,this.bg,this.xg);this.Fg.ze(h).tt(Ps(r,h)).setVisible(!0)}else this.Fg.setVisible(!1);this.Tg.ze(y).tt(Ps(m,y)).setVisible(i),this.Ig.ze(g).tt(Ps(y,g)).setVisible(i),this.Pg.ze(m).tt(Ps(p,m)).setVisible(i);for(const s of this.Gf)s.update().plot(i,a,l,t.jg,u);for(const t of this.uA)t.Ee()}setLength(t){return this.jd=t,this.chart.us.xs(),this}getLength(){return this.jd}setMargins(t,i){return this.gA=t,this.yA=i,this.chart.us.xs(),this}getMargins(){return{start:this.gA,end:this.yA}}getStackIndex(){var t,i;return null!==(i=null===(t=[...this.chart.qg,...this.chart.ty,...this.chart.iy,...this.chart.sy].find((t=>t.axis===this)))||void 0===t?void 0:t.iStack)&&void 0!==i?i:0}getParallelIndex(){var t,i;return null!==(i=null===(t=[...this.chart.qg,...this.chart.ty,...this.chart.iy,...this.chart.sy].find((t=>t.axis===this)))||void 0===t?void 0:t.iParallel)&&void 0!==i?i:0}ey(){const t=this.$g;if(!t)return;const i=this.getVisible()&&t.Xg>0,s=this.wg.Su().getThickness()*this.pg/2,e=this.Sg.getInnerInterval(),h=this.mg/100*e+t.jg,r=e*this.pg,n=h+s;for(const s of this.Gf)s.update().plot(i,h,r,t.jg,n);for(const t of this.uA)t.Ee()}hy(){return this.Nf}ny(t,i){i=i||Uo.AxisTickMajor;const s=new rn(this,t?this.ug[0]:this.gg,this.gg,this.ft,this._g,this._g,this.Nh,this.vg,this.pA,this.qi,i).setTextFormatter(this.formatValue);return this.Gf.push(s),s}bA(t){this.chart.us.ls.Cs(t,1),this.Hf=t.us.qr(this.rA,this.Hf)}MA(t){this.chart.us.ls.Cs(t,0),t.us.tn(this.Hf)}CA(t){this.setStopped(!0),t.us.tn(this.Hf)}FA(t,i){const s=-this.Nh.getWidth(i);this.pan(s),this.Hf=t.us.qr(this.nA,this.Hf)}pan(t){const i=this.Hh,s=this.Xh,e=this.ft.gi(i,t),h=this.ft.gi(s,t);this.lr(e,h,!1)}zoom(t,i){const s=this.ft.dt(this.Hh),e=this.ft.dt(this.Xh),h=this.ft.dt(t),r=Jt((h-s)/(e-s),0,1),n=.2*this.ft.hi(),o=r*this.jf*n*-i,a=(1-r)*this.jf*n*i,l=this.ft.gi(this.Hh,o),u=this.ft.gi(this.Xh,a);this.lr(l,u,!0)}DA(t){this.Of=void 0,t.us.tn(this.Hf)}kA(t,i){this.setStopped(!0),t.us.tn(this.Hf),this.chart.us.ls.Cs(this.Tg,0)}IA(t,i,s,e){const h=pt(this.RA.us.Oe(s.x,s.y),this.RA.us.ft,this.bg),r=Jt(this.Nh.getWidth(h),this.Hh,this.Xh),n=this.Nh.getWidth(pt(this.RA.us.Oe(i.x,i.y),this.RA.us.ft,this.bg));Math.abs(this.ft.dt(r)-this.ft.dt(n))>10?(this.Of=c(Math.min(r,n),Math.max(r,n)),this.Hf=t.us.qr(this.oA,this.Hf)):(this.Of=void 0,this.Hf=t.us.qr(this.rA,this.Hf)),this.RA.xs()}BA(t,i,s){if(this.Of){const t=this.Of.min,i=this.Of.max,s=this.Xh<this.Hh;this.At(s?i:t,s?t:i,!0,!0,"interactionSetInterval")}this.Of=void 0,t.us.tn(this.Hf)}$A(t){this.chart.us.ls.Cs(t,1),this.Xf=t.us.qr(this.aA,this.Xf)}ZA(t){this.chart.us.ls.Cs(t,0),t.us.tn(this.Xf)}JA(t,i){this.setStopped(!0),this.Xf=t.us.qr(this.lA,this.Xf)}qA(t,i,s,e){const h=this.Nh.getWidth(e);this.lr(this.ft.gi(this.Hh,h),this.Xh,!0)}ig(t,i,s,e){const h=this.Nh.getWidth(e);this.lr(this.Hh,this.ft.gi(this.Xh,h),!0)}eg(t,i,s){t.us.tn(this.Xf),t.getIsUnderMouse()&&(this.Xf=t.us.qr(this.aA)),this.RA.xs()}addCustomTick(t){return this.ny(!0,t)}setTitlePosition(t){return this.fA=t,this.chart.us.xs(),this}getTitlePosition(){return this.fA}getUiPosition(){return this.mg}setStrokeStyle(t){return this.wg.We(t),this.RA.xs(),this}getStrokeStyle(){return this.wg.Su()}getOverlayStyle(){return this.Tg.Qh()}setOverlayStyle(t){return this.Tg.Le(t),this.RA.xs(),this}setAxisInteractionZoomByDragging(t){return this.Zf=t,this}getAxisInteractionZoomByDragging(){return this.Zf}setAxisInteractionPanByDragging(t){return this.Qf=t,this}getAxisInteractionPanByDragging(){return this.Qf}setAxisInteractionZoomByWheeling(t){return this.Jf=t,this}getAxisInteractionZoomByWheeling(){return this.Jf}setAxisInteractionReleaseByDoubleClicking(t){return this.Kf=t,this}getAxisInteractionReleaseByDoubleClicking(){return this.Kf}setAxisMouseHoverStyle(t=this.Nh.defaultDragMouseStyle){return this.rA=t,this}getAxisMouseHoverStyle(){return this.rA}setAxisMousePanStyle(t=this.Nh.defaultDragMouseStyle){return this.nA=t,this}getAxisMousePanStyle(){return this.nA}setAxisMouseZoomStyle(t=this.Nh.defaultDragMouseStyle){return this.oA=t,this}getAxisMouseZoomStyle(){return this.oA}setAnimationHighlight(t){return this.chart.us.ls.ks(this.Tg,t),this.chart.us.ls.ks(this.Ig,t),this.chart.us.ls.ks(this.Pg,t),this}getAnimationHighlight(){return this.chart.us.ls.Ts(this.Tg)}getMarginAfterTicks(){return this.Bg}setMarginAfterTicks(t){return this.Bg=t,this.RA.xs(),this}getMarginAfterTitle(){return this.Lg}setMarginAfterTitle(t){return this.Lg=t,this.RA.xs(),this}getNibLength(){return this.Yf}setNibLength(t){return this.Yf=t,this.RA.xs(),this}getNibStyle(){return this.Cg.Su()}setNibStyle(t){return this.Cg.We(t),this.kg.We(t),this.RA.xs(),this}getNibOverlayStyle(){return this.Ig.Qh()}setNibOverlayStyle(t){return this.Ig.Le(t),this.Pg.Le(t),this.RA.xs(),this}setNibMousePickingAreaSize(t){return this.$f=t,this.RA.xs(),this}getNibMousePickingAreaSize(){return this.$f}setNibInteractionScaleByDragging(t){return this.qf=t,this}getNibInteractionScaleByDragging(){return this.qf}setNibInteractionScaleByWheeling(t){return this.tA=t,this}getNibInteractionScaleByWheeling(){return this.tA}setNibMouseHoverStyle(t=this.Nh.defaultDragMouseStyle){return this.aA=t,this}getNibMouseHoverStyle(){return this.aA}setNibMouseScaleStyle(t=this.Nh.defaultDragMouseStyle){return this.lA=t,this}getNibMouseScaleStyle(){return this.lA}setChartInteractions(t){return this.setChartInteractionFitByDrag(t),this.setChartInteractionPanByDrag(t),this.setChartInteractionZoomByDrag(t),this.setChartInteractionZoomByWheel(t),this}setChartInteractionPanByDrag(t){return this.iA=t,this}getChartInteractionPanByDrag(){return this.iA}setChartInteractionZoomByWheel(t){return this.sA=t,this}getChartInteractionZoomByWheel(){return this.sA}setChartInteractionZoomByDrag(t){return this.eA=t,this}getChartInteractionZoomByDrag(){return this.eA}setChartInteractionFitByDrag(t){return this.hA=t,this}getChartInteractionFitByDrag(){return this.hA}Z(){return this.ft.Z(),this}J(){return this.ft.J(),this}dispose(){this.Cg.dispose(),this.kg.dispose(),this.wg.dispose(),this.Tg.dispose(),this.Fg.dispose(),this.Ig.dispose(),this.Pg.dispose(),this.Th.dispose(),this.ur(jt);for(const t of this.Vf.values())t.grid.dispose(),t.tick.dispose();return this.Uf.slice().forEach(jt),this.uA.slice().forEach(jt),this.Ag(this),this.L.emit("dispose",this),this}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setVisible(t){this.Cg.setVisible(t),this.kg.setVisible(t),this.wg.setVisible(t),this.Th.setVisible(t),this.Tg.setVisible(t),this.Ig.setVisible(t),this.Pg.setVisible(t),this.ur((i=>{i.ps(t)}));for(const i of this.Vf.values())i.grid.setVisible(t),i.tick.setVisible(t);return super.setVisible(t),this.chart.us.xs(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationHighlight(this.gh),this}}var $o;!function(t){t.Start="start",t.Center="center",t.End="end"}($o||($o={}));const jo={getWidth:t=>t.x,getHeight:t=>t.y,toVec2:(t,i)=>({x:t,y:i}),toPoint:(t,i)=>n(t,i)},Zo={getWidth:t=>t.y,getHeight:t=>t.x,toVec2:(t,i)=>({x:i,y:t}),toPoint:(t,i)=>n(i,t)},Qo=t=>!!(t&&"object"==typeof t&&"x"in t&&t.x instanceof Xo&&"y"in t&&t.y instanceof Xo),Jo=i({type:"tick-style",gridStrokeLength:1,gridStrokeStyle:new _e,tickLength:7,tickStyle:new _e,tickPadding:0,labelFont:new Rh,labelFillStyle:new W,labelAlignment:0,labelRotation:0});class Ko extends Jo{constructor(t){super(t)}setGridStrokeLength(t){return this.set("gridStrokeLength",t)}getGridStrokeLength(){return this.get("gridStrokeLength")}setGridStrokeStyle(t){return this.set("gridStrokeStyle","function"==typeof t?t(this.get("gridStrokeStyle")):t)}getGridStrokeStyle(){return this.get("gridStrokeStyle")}setTickLength(t){return this.set("tickLength",t)}getTickLength(){return this.get("tickLength")}setTickStyle(t){return this.set("tickStyle","function"==typeof t?t(this.get("tickStyle")):t)}getTickStyle(){return this.get("tickStyle")}setTickPadding(t){return this.set("tickPadding",t)}getTickPadding(){return this.get("tickPadding")}setLabelFillStyle(t){return this.set("labelFillStyle","function"==typeof t?t(this.get("labelFillStyle")):t)}getLabelFillStyle(){return this.get("labelFillStyle")}setLabelFont(t){return this.set("labelFont","function"==typeof t?t(this.get("labelFont")):t)}getLabelFont(){return this.get("labelFont")}setLabelAlignment(t){return this.set("labelAlignment",t)}getLabelAlignment(){return this.get("labelAlignment")}setLabelRotation(t){return this.set("labelRotation",t)}getLabelRotation(){return this.get("labelRotation")}}const qo=t=>!(!t||"object"!=typeof t||!("type"in t)||"tick-style"!==t.type),ta=new Ko({labelFillStyle:O,gridStrokeStyle:dt,tickStyle:dt}),ia=t=>qo(t)&&N(t.labelFillStyle)&&ft(t.gridStrokeStyle)&&ft(t.tickStyle),sa=i({type:"time-ticks",cursorFormatter:void 0,timeOrigin:void 0,majorTickStyle:new Ko,minorTickStyle:new Ko,majorFormattingFunction:void 0,minorFormattingFunction:void 0}),ea=(t,i)=>{const s=i-t;return s>=864e5?"MajorHours12":s>=36e5?"MajorHours":s>=6e5?"MajorMinutes15":s>=9e4?"MajorMinutes":s>=10500?"MajorSeconds15":s>=1e3?"MajorSeconds":s>=100?"MajorMilliseconds100":s>=10?"MajorMilliseconds10":s>=1?"MajorMilliseconds":s>=.1?"MajorMicroseconds100":s>=.01?"MajorMicroseconds10":s>=.001?"MajorMicroseconds":s<=.001?"MajorNanoseconds100":"Unknown"},ha={hhmmss:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/36e5);i%=36e5;const h=Math.floor(i/6e4);i%=6e4;const r=Math.floor(i/1e3);return`${s}${Li(e,2)}:${Li(h,2)}:${Li(r,2)}`},hhmmssmmm:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/36e5);i%=36e5;const h=Math.floor(i/6e4);i%=6e4;const r=Math.floor(i/1e3);i%=1e3;const n=Math.floor(i/1);return`${s}${Li(e,2)}:${Li(h,2)}:${Li(r,2)}.${Li(n,3)}`},hhmmssmmmuuu:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/36e5),h=Math.floor(i/6e4)%60,r=Math.floor(i/1e3)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}).split(".")[1];return`${s}${Li(e,2)}:${Li(h,2)}:${Li(r,2)}.${Li(n,3)}${o}`},hhmmssmmmuuunnn:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/36e5),h=Math.floor(i/6e4)%60,r=Math.floor(i/1e3)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:6,maximumFractionDigits:6}).split(".")[1];return`${s}${Li(e,2)}:${Li(h,2)}:${Li(r,2)}.${Li(n,3)}${o}`}},ra={MajorHours12:{major:{format:ha.hhmmss,getKeyValues:(t,i,s,e)=>{const h=432e5;return t=Math.floor(t/(4*h))*h*4,ph(t,i,h,void 0,1e6)},fitKeyValues:Sh({ignore:"first"},2,4)},minor:{format:ha.hhmmss,getKeyValues:(t,i,s,e)=>mh(t,i,36e5,1e6),fitKeyValues:Sh({},2,3,4,6)},defaultValueFormatter:ha.hhmmss},MajorHours:{major:{format:ha.hhmmss,getKeyValues:(t,i,s,e)=>{const h=36e5;return t=Math.floor(t/(12*h))*h*12,ph(t,i,h,void 0,1e6)},fitKeyValues:Sh({ignore:"first"},2,6,12)},minor:{format:ha.hhmmss,getKeyValues:(t,i,s,e)=>mh(t,i,3e5,1e6),fitKeyValues:Sh({},2,4,6)},defaultValueFormatter:ha.hhmmss},MajorMinutes15:{major:{format:ha.hhmmss,getKeyValues:(t,i,s,e)=>(t=36e5*Math.floor(t/36e5),ph(t,i,9e5,void 0,1e6)),fitKeyValues:Sh({ignore:"first"},2)},minor:{format:ha.hhmmss,getKeyValues:(t,i,s,e)=>mh(t,i,6e4,1e6),fitKeyValues:Sh({},3,5)},defaultValueFormatter:ha.hhmmss},MajorMinutes:{major:{format:ha.hhmmss,getKeyValues:(t,i,s,e)=>{const h=6e4;return t=Math.floor(t/6e5)*h*10,ph(t,i,h,void 0,1e6)},fitKeyValues:Sh({ignore:"first"},2,5)},minor:{format:ha.hhmmss,getKeyValues:(t,i,s,e)=>mh(t,i,5e3,1e6),fitKeyValues:Sh({},2,3,4,6)},defaultValueFormatter:ha.hhmmss},MajorSeconds15:{major:{format:ha.hhmmss,getKeyValues:(t,i,s,e)=>{const h=15e3;return t=Math.floor(t/6e4)*h*4,ph(t,i,h,void 0,1e6)},fitKeyValues:Sh({ignore:"first"},2,4)},minor:{format:ha.hhmmss,getKeyValues:(t,i,s,e)=>mh(t,i,1e3,1e6),fitKeyValues:Sh({},3,5)},defaultValueFormatter:ha.hhmmss},MajorSeconds:{major:{format:ha.hhmmssmmm,getKeyValues:(t,i,s,e)=>{const h=1e3;return t=Math.floor(t/1e4)*h*10,ph(t,i,h,void 0,1e6)},fitKeyValues:Sh({ignore:"first"},2,5)},minor:{format:ha.hhmmssmmm,getKeyValues:(t,i,s,e)=>mh(t,i,100,1e6),fitKeyValues:Sh({},2,3,5)},defaultValueFormatter:ha.hhmmssmmm},MajorMilliseconds100:{major:{format:ha.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=100*Math.floor(t/1e3)*10,ph(t,i,100,void 0,1e6)),fitKeyValues:Sh({ignore:"first"},2,5)},minor:{format:ha.hhmmssmmm,getKeyValues:(t,i,s,e)=>mh(t,i,10,1e6),fitKeyValues:Sh({},2,3,5)},defaultValueFormatter:ha.hhmmssmmm},MajorMilliseconds10:{major:{format:ha.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=10*Math.floor(t/100)*10,ph(t,i,10,void 0,1e6)),fitKeyValues:Sh({ignore:"first"},2,5)},minor:{format:ha.hhmmssmmm,getKeyValues:(t,i,s,e)=>mh(t,i,1,1e6),fitKeyValues:Sh({},2,3,5)},defaultValueFormatter:ha.hhmmssmmm},MajorMilliseconds:{major:{format:ha.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=1*Math.floor(t/10)*10,ph(t,i,1,void 0,1e6)),fitKeyValues:Sh({ignore:"first"},2,5)},minor:{format:ha.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>mh(t,i,.1,1e6),fitKeyValues:Sh({},2)},defaultValueFormatter:ha.hhmmssmmmuuu},MajorMicroseconds100:{major:{format:ha.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=.1*Math.floor(t/1)*10,ph(t,i,.1,void 0,1e6)),fitKeyValues:Sh({ignore:"first"},2,5)},minor:{format:ha.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>mh(t,i,.01,1e6),fitKeyValues:Sh({},2,3,5)},defaultValueFormatter:ha.hhmmssmmmuuu},MajorMicroseconds10:{major:{format:ha.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>{const h=.01;return t=Math.floor(t/.1)*h*10,ph(t,i,h,void 0,1e6)},fitKeyValues:Sh({ignore:"first"},2,5)},minor:{format:ha.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>mh(t,i,.001,1e6),fitKeyValues:Sh({},2,3,5)},defaultValueFormatter:ha.hhmmssmmmuuu},MajorMicroseconds:{major:{format:ha.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=.001;return t=Math.floor(t/.01)*h*10,ph(t,i,h,void 0,1e6)},fitKeyValues:Sh({ignore:"first"},2,5)},minor:{format:ha.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>mh(t,i,100*1e-6,1e6),fitKeyValues:Sh({},2,3,5)},defaultValueFormatter:ha.hhmmssmmmuuunnn},MajorNanoseconds100:{major:{format:ha.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=100*1e-6;return t=Math.floor(t/.001)*h*10,ph(t,i,h,void 0,1e6)},fitKeyValues:Sh({ignore:"first"},2,5)},minor:{format:ha.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>mh(t,i,10*1e-6,1e6),fitKeyValues:Sh({},2,3,5)},defaultValueFormatter:ha.hhmmssmmmuuunnn},Unknown:{major:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},minor:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},defaultValueFormatter:(t,i,s)=>""}};class na extends sa{Je(t){const i=this.timeOrigin||0,s=[{hh:"Major ticks",Qg:0,$e:this.majorTickStyle,je:this.majorFormattingFunction?this.majorFormattingFunction:(t,s,e)=>{const h=ea(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return(0,ra[h].major.format)(t+i,s,e)},Yr:(t,i,s,e)=>{const h=ea(s,e);return(0,ra[h].major.getKeyValues)(t,i,s,e)},Eh:{_r:(t,i,s,e,h,r)=>{const n=ea(h,r),o=ra[n].major.fitKeyValues;if(o)return o(t,i,s,e,h,r)}},Hr:void 0}];return qo(this.minorTickStyle)&&s.push({hh:"Minor ticks",Qg:1,$e:this.minorTickStyle,je:this.minorFormattingFunction?this.minorFormattingFunction:(t,s,e)=>{const h=ea(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return(0,ra[h].minor.format)(t+i,s,e)},Yr:(t,i,s,e)=>{const h=ea(s,e);return(0,ra[h].minor.getKeyValues)(t,i,s,e)},Eh:{_r:(t,i,s,e,h,r)=>{const n=ea(h,r),o=ra[n].minor.fitKeyValues;if(o)return o(t,i,s,e,h,r)}},Hr:void 0}),{Ke:[],qe:s,th:this.cursorFormatter||((t,s,e)=>{const h=ea(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()));return ra[h].defaultValueFormatter(t+i,s,e)}),ih:1e-4,sh:864e6}}setTickStyle(t){return this.setMajorTickStyle(t).setMinorTickStyle(t)}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTimeOrigin(t){return this.set("timeOrigin",t)}getTimeOrigin(){return this.get("timeOrigin")}setFormattingFunction(t){return this.withMutations((i=>i.set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const oa=t=>!(!t||"object"!=typeof t||!("type"in t)||"time-ticks"!==t.type),aa=(t,i,s,e,h)=>(r,n)=>o=>{const a=new Date(o+r),l={year:n?a.getUTCFullYear():a.getFullYear(),monthIndex:n?a.getUTCMonth():a.getMonth(),day:n?a.getUTCDate():a.getDate(),hours:n?a.getUTCHours():a.getHours(),minutes:n?a.getUTCMinutes():a.getMinutes(),seconds:n?a.getUTCSeconds():a.getSeconds(),millis:n?a.getUTCMilliseconds():a.getMilliseconds()},u=e?e(l):void 0;if(0===t&&!0===u)return o;const c=l[i];h.includes("year")&&(l.year=Math.floor(l.year/s)*s),h.includes("monthIndex")&&(l.monthIndex=0),h.includes("day")&&(l.day=1),h.includes("hours")&&(l.hours=0),h.includes("minutes")&&(l.minutes=0),h.includes("seconds")&&(l.seconds=0),h.includes("millis")&&(l.millis=0);let d=(0===t?1:t)*s;return-1===t&&!1===u&&(d=0),0!==d&&(l[i]=s*(d>0?Math.floor((c+d)/s):Math.ceil((c+d)/s))),n?Date.UTC(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis)-r:new Date(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis).getTime()-r},la=(t,i,s,...e)=>aa(-1,t,i,s,e),ua=(t,i,s,...e)=>aa(-1,t,i,s,e),ca=(t,i,s,...e)=>aa(0,t,i,s,e),da=(t,i,...s)=>aa(1,t,i,void 0,s),fa=t=>(i,s)=>e=>{const h=new Date(e+i),r=s?h.getUTCDay():h.getDay(),n=1===r&&0===(s?h.getUTCHours():h.getHours())&&0===(s?h.getUTCMinutes():h.getMinutes())&&0===h.getSeconds()&&0===h.getMilliseconds();if(0===t&&!0===n)return e;let o=s?h.getUTCDate():h.getDate();return-1===t&&1===r&&!1===n||(-1===t?o-=r>=2?r-1:r+6:o+=r>0?8-r:1),s?Date.UTC(h.getUTCFullYear(),h.getUTCMonth(),o,0,0,0,0)-i:new Date(h.getFullYear(),h.getMonth(),o,0,0,0,0).getTime()-i},Aa=[{label:"MilliSecond1",unit:1,irregular:!1,greatTicks:void 0,majorTicks:{fitFunction:Sh({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Sh(void 0,2)}},{label:"MilliSecond10",unit:10,irregular:!1,greatTicks:{getReferenceKeyValue:la("millis",10,(t=>t.millis%10==0),"millis")},majorTicks:{fitFunction:Sh({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Sh(void 0,2)}},{label:"MilliSecond100",unit:100,irregular:!1,greatTicks:{getReferenceKeyValue:la("millis",100,(t=>t.millis%100==0),"millis")},majorTicks:{fitFunction:Sh({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Sh(void 0,2)}},{label:"Second",unit:1e3,irregular:!1,greatTicks:{getReferenceKeyValue:la("seconds",1,(t=>0===t.millis),"millis")},majorTicks:{fitFunction:bh(5,10,15,30)},minorTicks:{amount:4,fitFunction:Sh(void 0,2)}},{label:"Minute",unit:6e4,irregular:!1,greatTicks:{getReferenceKeyValue:la("minutes",1,(t=>0===t.seconds&&0===t.millis),"seconds","millis")},majorTicks:{fitFunction:bh(5,10,15,30)},minorTicks:{amount:12,fitFunction:Sh(void 0,3,6)}},{label:"Hour",unit:36e5,irregular:!1,greatTicks:{getReferenceKeyValue:la("hours",1,(t=>0===t.minutes&&0===t.seconds&&0===t.millis),"minutes","seconds","millis")},majorTicks:{fitFunction:bh(3,6,12)},minorTicks:{amount:8,fitFunction:Sh(void 0,2,4)}},{label:"Day",unit:864e5,irregular:!1,greatTicks:{getReferenceKeyValue:la("day",1,(t=>0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"hours","minutes","seconds","millis")},majorTicks:{fitFunction:Sh({ignore:"last"},2,4)},minorTicks:{amount:7,fitFunction:Sh({ignore:"last"},2,3)}},{label:"Week",unit:6048e5,irregular:!0,getPrevKeyValue:fa(-1),getNextKeyValueIncludingRef:fa(0),getNextKeyValue:fa(1),greatTicks:!0,majorTicks:{fitFunction:Sh(void 0,2)},minorTicks:{fitFunction:void 0}},{label:"Month",unit:2592e6,irregular:!0,getPrevKeyValue:ua("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ca("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValue:da("monthIndex",1,"day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Sh(void 0,2,3)},minorTicks:{fitFunction:Sh(void 0,2,4,6)}},{label:"Year",unit:31536e6,irregular:!0,getPrevKeyValue:ua("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ca("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:da("year",1,"monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Sh({ignore:"first"},2,5)},minorTicks:{fitFunction:Sh(void 0,2,5)}},{label:"Decade",unit:31536e7,irregular:!0,getPrevKeyValue:ua("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ca("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:da("year",10,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Sh(void 0,2,4)},minorTicks:{fitFunction:Sh(void 0,2,5)}},{label:"Century",unit:316224e7,irregular:!0,getPrevKeyValue:ua("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ca("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:da("year",100,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0},{label:"Millennium",unit:316224e8,irregular:!0,getPrevKeyValue:ua("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ca("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:da("year",1e3,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0}],ga=(t,i,s,e,h)=>{const r=i-t;let n;for(let t=h?0:Aa.length-1;h?t<Aa.length:t>=0;h?t+=1:t-=1){const i=r/Aa[t].unit;if((void 0===s||i>=s)&&(void 0===e||i<=e)){n=Aa[t];break}}return n},ya=(t,i,s)=>{let e=ga(i,s,void 0,1,!0);if(void 0!==e&&0===Aa.indexOf(e)&&(e=Aa[1]),void 0===e)return;if("great"===t)return e;const h="major"===t?1:2,r=Aa[Aa.indexOf(e)-h];return void 0===r?Aa[0]:r},ma=(t,i,s)=>(e,h,r,n)=>{const o=ya("great",e,h);if(void 0===o)return[];if("Decade"===o.label||"Century"===o.label||"Millennium"===o.label)return[];const a=n>r?e:h,l=(e+h)/2,u=n>r?h:e;if(Aa.indexOf(o)<=Aa.findIndex((t=>"Hour"===t.label)))return"left"===s?[a]:[];let c;if(!0===o.irregular)c=vh(e,h,o.getPrevKeyValue(t,i),o.getNextKeyValue(t,i));else{const s=o.greatTicks.getReferenceKeyValue(t,i)(e);c=ph(e,h,o.unit,s,1)}const d=((t,i,s)=>{for(const e of s)if(e>=t&&e<=i)return e})(e,h,c);return"left"===s?void 0===d||As(d,l,u)?[a]:[d]:void 0!==d&&As(d,l,u)?[d]:[u]},pa=(t,i,s)=>(e,h,r,n)=>{const o=ya(t,r,n);let a;if(void 0===o)return[];if("great"===t&&void 0!==o.greatTicks)if(!0===o.irregular)a=vh(e,h,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s));else{const t=o.greatTicks.getReferenceKeyValue(i,s)(e);a=ph(e,h,o.unit,t,1)}else if("major"===t&&void 0!==o.majorTicks)a=!0===o.irregular?((t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h})(e,h,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s)):((t,i,s)=>{const e=[];let h=t,r=0;for(;h<i;)if(e.push(h),h+=s,r+=1,r>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return e.push(h),e})(e,h,o.unit);else{if("minor"!==t||void 0===o.minorTicks)return[];if(!0===o.irregular)a=((t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h})(e,h,o.getNextKeyValueIncludingRef(i,s),o.getNextKeyValue(i,s));else{const t=(t=>{if(void 0!==t)return Aa[Aa.indexOf(t)+1]})(o);if(void 0===t)return[];a=mh(e,h,t.unit/o.minorTicks.amount,1)}}return a},va=t=>(i,s,e,h,r,n)=>{const o=ya(t,r,n);if(void 0===o)return;let a;return"major"===t?a=o.majorTicks.fitFunction:o.minorTicks&&(a=o.minorTicks.fitFunction),a?a(i,s,e,h,r,n):void 0},Sa=i({type:"date-time-ticks",utc:!1,locale:void 0,dateOrigin:void 0,cursorFormatter:void 0,greatTickStyle:new Ko,majorTickStyle:new Ko,minorTickStyle:new Ko,formatOptionsMajorCentury:{year:"numeric",hour12:!1},formatOptionsMinorDecade:{year:"numeric",hour12:!1},formatOptionsMajorDecade:{year:"numeric",hour12:!1},formatOptionsMinorYear:{year:"numeric",hour12:!1},formatOptionsMajorYear:{year:"numeric",hour12:!1},formatOptionsMinorMonth:{month:"short",hour12:!1},formatOptionsGreatYear:{year:"numeric",hour12:!1},formatOptionsMajorMonth:{month:"long",hour12:!1},formatOptionsMinorWeek:{day:"numeric",hour12:!1},formatOptionsGreatMonth:{year:"numeric",month:"long",hour12:!1},formatOptionsMajorWeek:{day:"numeric",weekday:"short",hour12:!1},formatOptionsMinorDay:{day:"numeric",weekday:"short",hour12:!1},formatOptionsGreatWeek:(t,i,s)=>{const e=new Date(t),h=(t=>{const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));i.setUTCDate(i.getUTCDate()+4-(i.getUTCDay()||7));const s=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i.getTime()-s.getTime())/864e5+1)/7)})(e);return`${new Intl.DateTimeFormat(s,{year:"numeric",month:"long",hour12:!1}).format(e)} Week ${h}`},formatOptionsMajorDay:{weekday:"long",day:"numeric",hour12:!1},formatOptionsMinorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatDay:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatHour:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsGreatMinute:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsMinorMillisecond:t=>{const i=new Date(t);return i.setHours(0,0,0,0),ha.hhmmssmmm(t-i.getTime())},formatMillisecondRange:t=>{const i=new Date(t);return i.setHours(0,0,0,0),ha.hhmmssmmm(t-i.getTime())},formatOptionsGreatSecond:{},formatOptionsMajorMilliSecond:{}});class ba extends Sa{Je(t){const i=void 0!==this.dateOrigin?this.dateOrigin.getTime():0,s=t=>Aa.map((i=>{const s=((t,i,s)=>{switch(s.label){case"MilliSecond1":case"MilliSecond10":case"MilliSecond100":return"Great"===i?t.formatOptionsGreatMinute:t.formatMillisecondRange;case"Second":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorSecond:t.formatOptionsMinorSecond;case"Minute":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorMinute:t.formatOptionsMinorMinute;default:case"Hour":return"Great"===i?t.formatOptionsGreatHour:"Major"===i?t.formatOptionsMajorHour:t.formatOptionsMinorHour;case"Day":return"Great"===i?t.formatOptionsGreatDay:"Major"===i?t.formatOptionsMajorDay:t.formatOptionsMinorDay;case"Week":return"Great"===i?t.formatOptionsGreatWeek:"Major"===i?t.formatOptionsMajorWeek:t.formatOptionsMinorWeek;case"Month":return"Great"===i?t.formatOptionsGreatMonth:"Major"===i?t.formatOptionsMajorMonth:t.formatOptionsMinorMonth;case"Year":return"Great"===i?t.formatOptionsGreatYear:"Major"===i?t.formatOptionsMajorYear:t.formatOptionsMinorYear;case"Decade":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorDecade:t.formatOptionsMinorDecade;case"Century":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorCentury:void 0;case"Millennium":return}})(this,t,i);if("object"!=typeof s)return s;try{return new Intl.DateTimeFormat(this.locale,s)}catch(t){let i="";for(const t in s)i+=` ${t}: ${s[t]},`;Yt.console.error(`Invalid Intl.DateTimeFormat ( locale: ${this.locale}, formatOptions {${i}} )`)}})),e=new Map;e.set("great",s("Great")),e.set("major",s("Major")),e.set("minor",s("Minor"));const h=t=>String(t),r=(t,s)=>(r,n)=>{let o=r+i;const a=n.getInnerStart(),l=n.getInnerEnd(),u=a>l,c=ya(t,u?l:a,u?a:l);if(void 0===c)return h(o);if("great"===t){const t=Qt(r,"left"===s?a:l);let e;if(e=!1===t?r:!1===c.irregular?"left"===s&&!1===u||"right"===s&&!0===u?c.greatTicks.getReferenceKeyValue(i,this.utc)(r):c.greatTicks.getReferenceKeyValue(i,this.utc)(r+1*c.unit):"left"===s&&!1===u||"right"===s&&!0===u?c.getPrevKeyValue(i,this.utc)(r):c.getNextKeyValue(i,this.utc)(r),o=e+i,"right"===s&&!0===t)return""}const d=e.get(t);if(void 0===d)return h(o);const f=d[Aa.indexOf(c)];return void 0===f?"":"function"==typeof f?f(o,n,this.locale):f.format(o)},n=[],o=[{hh:"Great ticks (directive)",Qg:0,Qe:!0,Yr:pa("great",i,this.utc),Hr:void 0},{hh:"Major ticks",Qg:1,$e:this.majorTickStyle,je:r("major"),Yr:pa("major",i,this.utc),Eh:{_r:va("major")},Hr:void 0}];ia(this.greatTickStyle)||(n.push({hh:"Great ticks (left)",$e:this.greatTickStyle.setLabelAlignment(-1),je:r("great","left"),Yr:ma(i,this.utc,"left"),Ze:!0,Tr:!1}),n.push({hh:"Great ticks (right)",$e:this.greatTickStyle.setLabelAlignment(1),je:r("great","right"),Yr:ma(i,this.utc,"right"),Ze:!0,Tr:!1})),ia(this.minorTickStyle)||o.push({hh:"Minor ticks",Qg:2,$e:this.minorTickStyle,je:r("minor"),Yr:pa("minor",i,this.utc),Eh:{_r:va("minor"),zh:(t,i,s,e,h,r)=>{const n=ya("minor",h,r);return!n||"Week"!==n.label}},Hr:void 0});const a=this.cursorFormatter;return{Ke:n,qe:o,th:a?(t,s,e)=>a(i+t,s,e):(t,s,e)=>{const h=ga(Math.min(s.getInnerStart(),s.getInnerEnd()),Math.max(s.getInnerStart(),s.getInnerEnd()),void 0,1,!0),r=h&&h.unit<=6e4,n=new Date(i+t),o=new Date(i+t);o.setHours(0,0,0,0);const a=r?ha.hhmmssmmm:ha.hhmmss;return`${new Intl.DateTimeFormat(e,{year:"numeric",month:"numeric",day:"numeric"}).format(n)} ${a(n.getTime()-o.getTime())}`},ih:1,sh:31536e9}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTickStyle(t){return this.setGreatTickStyle(t).setMajorTickStyle(t).setMinorTickStyle(t)}setGreatTickStyle(t){if("function"==typeof t){const i=this.get("greatTickStyle");return this.set("greatTickStyle",t(i))}return this.set("greatTickStyle",t)}getGreatTickStyle(){return this.get("greatTickStyle")}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setUTC(t){return this.set("utc",t)}getUTC(){return this.get("utc")}setLocale(t){return this.set("locale",t)}getLocale(){return this.get("locale")}setDateOrigin(t){return this.set("dateOrigin",t)}getDateOrigin(){return this.get("dateOrigin")}setFormatting(t,i,s){return this.withMutations((e=>e.set("formatOptionsGreatYear",t||this.formatOptionsGreatYear).set("formatOptionsGreatMonth",t||this.formatOptionsGreatMonth).set("formatOptionsGreatWeek",t||this.formatOptionsGreatWeek).set("formatOptionsGreatDay",t||this.formatOptionsGreatDay).set("formatOptionsGreatHour",t||this.formatOptionsGreatHour).set("formatOptionsGreatMinute",t||this.formatOptionsGreatMinute).set("formatOptionsMajorCentury",i||this.formatOptionsMajorCentury).set("formatOptionsMajorDecade",i||this.formatOptionsMajorDecade).set("formatOptionsMajorYear",i||this.formatOptionsMajorYear).set("formatOptionsMajorMonth",i||this.formatOptionsMajorMonth).set("formatOptionsMajorWeek",i||this.formatOptionsMajorWeek).set("formatOptionsMajorDay",i||this.formatOptionsMajorDay).set("formatOptionsMajorHour",i||this.formatOptionsMajorHour).set("formatOptionsMajorMinute",i||this.formatOptionsMajorMinute).set("formatOptionsMajorSecond",i||this.formatOptionsMajorSecond).set("formatOptionsMinorDecade",s||this.formatOptionsMinorDecade).set("formatOptionsMinorYear",s||this.formatOptionsMinorYear).set("formatOptionsMinorMonth",s||this.formatOptionsMinorMonth).set("formatOptionsMinorWeek",s||this.formatOptionsMinorWeek).set("formatOptionsMinorDay",s||this.formatOptionsMinorDay).set("formatOptionsMinorHour",s||this.formatOptionsMinorHour).set("formatOptionsMinorMinute",s||this.formatOptionsMinorMinute).set("formatOptionsMinorSecond",s||this.formatOptionsMinorSecond)))}setFormattingDecade(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorDecade",t)),i&&(s=s.set("formatOptionsMinorYear",i)),s)))}setFormattingYear(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorYear",t)),i&&(s=s.set("formatOptionsMinorMonth",i)),s)))}setFormattingMonth(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatYear",t)),i&&(e=e.set("formatOptionsMajorMonth",i)),s&&(e=e.set("formatOptionsMinorWeek",s)),e)))}setFormattingWeek(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMonth",t)),i&&(e=e.set("formatOptionsMajorWeek",i)),s&&(e=e.set("formatOptionsMinorDay",s)),e)))}setFormattingDay(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatWeek",t)),i&&(e=e.set("formatOptionsMajorDay",i)),s&&(e=e.set("formatOptionsMinorHour",s)),e)))}setFormattingHour(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatDay",t)),i&&(e=e.set("formatOptionsMajorHour",i)),s&&(e=e.set("formatOptionsMinorMinute",s)),e)))}setFormattingMinute(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatHour",t)),i&&(e=e.set("formatOptionsMajorMinute",i)),s&&(e=e.set("formatOptionsMinorSecond",s)),e)))}setFormattingSecond(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMinute",t)),i&&(e=e.set("formatOptionsMajorSecond",i)),s&&(e=e.set("formatOptionsMinorMillisecond",s)),e)))}setFormattingMilliSecond(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatSecond",t)),i&&(s=s.set("formatOptionsMajorMilliSecond",i)),s)))}}const xa=t=>!(!t||"object"!=typeof t||!("type"in t)||"date-time-ticks"!==t.type),Ma=(t,i)=>(s,e)=>{const h=e-s;if(i){const i=Math.log10(h/2);let r=10**Math.floor(i-t);const n=1/r;r=Math.round(r*n)/n;const o=Math.round(Math.floor(s/(10*r))*r*10*n)/n;return ph(o,e,r,void 0,n)}const r=Math.log10(h);let n=10**Math.round(r-t);const o=1/n;return n=Math.round(n*o)/o,mh(s,e,n,o)},_a=(t,i,s,e,h,r)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%5==0)):void 0,wa=(t,i,s,e,h,r)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%3==0)):2===i?t.filter(((t,i)=>i%4==0)):3===i?t.filter(((t,i)=>i%5==0)):void 0,Ca=Sh(void 0,2,5),ka=(t,i,s,e,h,r)=>0===i?[t[1],t[3],t[5]]:1===i?[t[0],t[3]]:2===i?[t[1]]:void 0,Ta=(t,i)=>{const s=Xs(t),e=$s(t);if(i)return(t,i)=>{const h=[],r=Math.floor(s(t)),n=Math.ceil(s(i));for(let t=r-1;t<=n+1;t+=1){const i=e**t;h.push(i)}return h};const h=10===t?9:4;return(t,i)=>{const r=Math.round(s(t)),n=Math.round(s(i)),o=[],a=e**r,l=(e**n-a)/h;for(let s=1;s<=h;s+=1){const e=a+l*s;e>t&&e<i&&o.push(e)}return o}},Fa=i({type:"numeric-ticks",cursorFormatter:void 0,extremeTickStyle:new Ko,majorTickStyle:new Ko,minorTickStyle:new Ko,formattingOffset:void 0,extremeFormattingFunction:void 0,majorFormattingFunction:void 0,minorFormattingFunction:void 0});class Ia extends Fa{Je(t){const i=this.formattingOffset,s=this.get("extremeFormattingFunction")||("logarithmic"===t.type?(i,s)=>Ks.LogarithmicNoExponents(i,s,void 0,t.base):Ks.Numeric),e=this.get("majorFormattingFunction")||("logarithmic"===t.type?(i,s)=>Ks.LogarithmicNoExponents(i,s,void 0,t.base):Ks.Numeric),h=this.get("minorFormattingFunction")||("logarithmic"===t.type?(i,s)=>Ks.LogarithmicNoExponents(i,s,void 0,t.base):Ks.Numeric),r=[],n=[];ia(this.extremeTickStyle)||r.push({hh:"Extreme ticks",$e:this.extremeTickStyle,je:void 0===i?s:(t,e,h)=>s(i+t,e,h),Yr:yh,Ze:!0,Tr:!0}),n.push({hh:"Major ticks",Qg:0,$e:this.majorTickStyle,je:void 0===i?e:(t,s,h)=>e(i+t,s,h),Yr:"logarithmic"===t.type?Ta(t.base,!0):Ma(0,!0),Eh:"logarithmic"===t.type?{_r:wa}:{_r:_a},Hr:void 0}),ia(this.minorTickStyle)||n.push({hh:"Minor ticks",Qg:1,$e:this.minorTickStyle,je:void 0===i?h:(t,s,e)=>h(i+t,s,e),Yr:"logarithmic"===t.type?Ta(t.base,!1):Ma(1,!1),Eh:"logarithmic"===t.type?{_r:ka}:{_r:Ca},Hr:50});const o=this.cursorFormatter?this.cursorFormatter:Ks.Numeric;return{Ke:r,qe:n,th:void 0===i?o:(t,s,e)=>o(i+t,s,e),ih:1e-9,sh:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setExtremeTickStyle(t){if("function"==typeof t){const i=this.get("extremeTickStyle");return this.set("extremeTickStyle",t(i))}return this.set("extremeTickStyle",t)}getExtremeTickStyle(){return this.get("extremeTickStyle")}setFormattingOffset(t){return this.set("formattingOffset",t)}getFormattingOffset(){return this.get("formattingOffset")}setTickStyle(t){const i=this.setMajorTickStyle(t).setMinorTickStyle(t);return i.extremeTickStyle!==ta?i.setExtremeTickStyle(t):i}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setFormattingFunction(t){return this.withMutations((i=>i.set("extremeFormattingFunction",t).set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getExtremeFormattingFunction(){return this.get("extremeFormattingFunction")}setExtremeFormattingFunction(t){return this.set("extremeFormattingFunction",t)}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const Pa=t=>!(!t||"object"!=typeof t||!("type"in t)||"numeric-ticks"!==t.type),Da=(t,i,s="image/png",e)=>{i+=`.${s.slice(s.indexOf("image/")+6)}`;const h=t.captureFrame(s,e);if("image/png"!==s&&h.type.includes("image/png"))throw new Error(`saveToFile | type not supported by browser: ${s}\nCheck support table for HTMLCanvasElement.toDataURL`);if(Yt.navigator.msSaveBlob)Yt.navigator.msSaveBlob(h,i);else{const t=Yt.document.createElement("a");Yt.document.body.appendChild(t);const s=Yt.URL.createObjectURL(h);t.href=s,t.download=i,t.click(),setTimeout((()=>{Yt.URL.revokeObjectURL(s),Yt.document.body.removeChild(t)}),0)}},Ba=(t,i,s,e,h,r)=>{const n=t.nc(i,s,e,h,r,!0);return n.setDraggingMode(Gt.draggable),n},La=(t,i)=>{if("relative"===t)return i;if(t instanceof se)return t;const s=t.x instanceof Th?t.x.ft:t.x.x,e=t.y instanceof Th?t.y.ft:t.y.y;return re(s,e)},Ra=(t,i,s,e,h)=>{if(s){const r=t,n=i,o=Qo(n)?n:ae(n)?e:void 0;if(o&&ne(s)){const t=pt(r,o,h.ft);return h.Uo({engineX:t.x,engineY:t.y})}if(o&&ae(s))return pt(r,o,e);if(o&&Qo(s))return pt(r,o,s)}else{const s=t;if(ae(i)){const t=h.Go(s);return pt({x:t.engineX,y:t.engineY},h.ft,e)}if(Qo(i)){const t=i,e=h.Go(s);return pt({x:e.engineX,y:e.engineY},h.ft,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")};class Ea{constructor(t,i,e,h,r,o,a,l){this.coordsRelative="relative",this.coordsClient="client",this.oy=[],this.ly=[],this.L=new s,this.uy=void 0,this.Ay=void 0,this.gy=void 0,this.Xt=A(0,0,0,0),this.yy=!1,this.$i=!1,this.my=()=>{this.py=!0,this.vy.xs()},this.Sy=t=>i=>{const s=this.oy.indexOf(i);-1!==s&&this.oy.splice(s,1),this.us.xs(),t.W()},this.by=t=>{const i=this.ly.indexOf(t);-1!==i&&this.ly.splice(i,1),this.us.xs()},this.py=!0,this.onInViewChange=t=>this.L.on("inViewChange",t),this.offInViewChange=t=>this.L.off(t,"inViewChange"),this.wA=t,this.xy=e,this.vy=h,this.removePanel=r,this.qi=i.us.qi;const u=i.us.ni();if(this.uiScale=e.d2({scaleXYConstructor:ee}).zi(0,100).Vi(0,100).tt(u),this.Mg=e.d2({scaleXYConstructor:ee}).zi(0,this.uiScale.x.getCellSize()).Vi(0,this.uiScale.y.getCellSize()).tt(u),this.engine=i.us.My,this.us=i.us._y,this.es=this.us.es.hs(this,{}),this.wy=()=>i.Cy("unidentified ui"),this.ky=i.Ty(),this.Fy=this.vy.Re(this.uiScale).ze(n(0,0)).tt(n(100,100)).Le(o).Be(a).setMouseMoveEventHandler(((t,i)=>this.L.emit("mouseMovePanelBackground",this,i))).setMouseEnterEventHandler(((t,i)=>this.L.emit("mouseEnterPanelBackground",this,i))).setMouseLeaveEventHandler(((t,i)=>this.L.emit("mouseLeavePanelBackground",this,i))).setMouseDownEventHandler(((t,i)=>this.L.emit("mouseDownPanelBackground",this,i))).setMouseUpEventHandler(((t,i)=>this.L.emit("mouseUpPanelBackground",this,i))).setMouseClickEventHandler(((t,i)=>this.L.emit("mouseClickPanelBackground",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.L.emit("mouseDoubleClickPanelBackground",this,i))).setMouseWheelEventHandler(((t,i)=>this.L.emit("mouseWheelPanelBackground",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.L.emit("mouseDragStartPanelBackground",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.L.emit("mouseDragPanelBackground",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.L.emit("mouseDragStopPanelBackground",this,i,s,e))).setTouchStartEventHandler(((t,i)=>this.L.emit("touchStartPanelBackground",this,i))).setTouchMoveEventHandler(((t,i)=>this.L.emit("touchMovePanelBackground",this,i))).setTouchEndEventHandler(((t,i)=>this.L.emit("touchEndPanelBackground",this,i))),l){const t=l.on(this.my);this.Iy=()=>l.off(t)}else{const t=i.us.Ro(this.my);this.Py=i.us.Eo.bind(i.us,t)}const c=i.us.Vo((t=>{this.yy=t,this.L.emit("inViewChange",this,t)}));this.Dy=i.us.Oo.bind(i.us,c),this.uy=r}getTheme(){return this.qi}getSizePixels(){return this.Mg.getInnerIntervalPixels()}setBackgroundFillStyle(t){return this.Fy.Le(t),this.vy.xs(),this}getBackgroundFillStyle(){return this.Fy.Qh()}setBackgroundStrokeStyle(t){return this.Fy.Be(t),this.vy.xs(),this}getBackgroundStrokeStyle(){return this.Fy.vo()}translateCoordinate(t,i,s){return Ra(t,i,s,this.Mg,this.us)}By(t){return this.oy.push(t),this.us.xs(),t}Ly(t){return this.ly.push(t),this.us.xs(),t}addUIElement(t=xo,i=this.uiScale){i=La(i,this.Mg);const s=this.wy();return this.By(Ba(t,s,this.uiScale,i,this.Sy(s),this.qi))}addLegendBox(t=Lo,i=this.uiScale){i=La(i,this.Mg);const s=this.Ly(Ba(t,this.ky,this.uiScale,i,this.by,this.qi));return s.setDraggingMode(Gt.notDraggable),void 0!==i&&i!==this.uiScale||(void 0===t||"vertical"===t.getAlignment()?s.setOrigin(qe.RightCenter).setPosition({x:100,y:50}):s.setOrigin(qe.CenterBottom).setPosition(this.uiScale.gi({x:50,y:0},{x:0,y:3}))),s}getLegendBoxes(){return this.ly}dispose(){return this.$i||(this.$i=!0,this.Py&&this.Py(),this.Iy&&this.Iy(),za(this.uiScale),za(this.Mg),this.Dy&&this.Dy(),this.Ay&&this.Ay(),this.vy.W(),this.ky.W(),this.oy.slice().forEach((t=>{t.dispose()})),this.ly.slice().forEach((t=>{t.dispose()})),this.us.xs(),this.uy&&this.uy(this),this.L.emit("dispose",this)),this}isDisposed(){return this.$i}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}saveToFile(t,i,s){return Da(this.engine,t,i,s),this}Nr(t){this.Xt=t,this.my()}Z(){return this.Mg.Z(),this.uiScale.Z(),this}J(){return this.Mg.J(),this.uiScale.J(),this}Ee(t){if(this.py){const t=this.vy.us.ni(),i=t.x,s=t.y;this.uiScale.tt(i,s),this.Mg.tt(i,s);const e=[this.Xt.left,this.Xt.right],h=[this.Xt.bottom,this.Xt.top];this.uiScale.Ri(e),this.uiScale.Ei(h);const r=this.uiScale.getInnerIntervalPixels();this.Mg.zi(0,r.x).Ri(e).Vi(0,r.y).Ei(h),this.L.emit("resize",this,r.x,r.y,i,s)}this.py=!1}Ry(){for(let t=0;t<this.oy.length;t+=1)this.oy[t].Vs().Ee();for(let t=0;t<this.ly.length;t+=1)this.ly[t].Vs().Ee();this.gy&&this.gy()}Ey(t,i){if(t){const s=t(i);this.onResize(s.Vs.bind(s)),this.Ay=s.W.bind(s),this.gy=s.Vs.bind(s)}}onBackgroundMouseEnter(t){return this.L.on("mouseEnterPanelBackground",t)}offBackgroundMouseEnter(t){return this.L.off(t,"mouseEnterPanelBackground")}onBackgroundMouseMove(t){return this.L.on("mouseMovePanelBackground",t)}offBackgroundMouseMove(t){return this.L.off(t,"mouseMovePanelBackground")}onBackgroundMouseLeave(t){return this.L.on("mouseLeavePanelBackground",t)}offBackgroundMouseLeave(t){return this.L.off(t,"mouseLeavePanelBackground")}onBackgroundMouseDown(t){return this.L.on("mouseDownPanelBackground",t)}offBackgroundMouseDown(t){return this.L.off(t,"mouseDownPanelBackground")}onBackgroundMouseUp(t){return this.L.on("mouseUpPanelBackground",t)}offBackgroundMouseUp(t){return this.L.off(t,"mouseUpPanelBackground")}onBackgroundMouseClick(t){return this.L.on("mouseClickPanelBackground",t)}offBackgroundMouseClick(t){return this.L.off(t,"mouseClickPanelBackground")}onBackgroundMouseDoubleClick(t){return this.L.on("mouseDoubleClickPanelBackground",t)}offBackgroundMouseDoubleClick(t){return this.L.off(t,"mouseDoubleClickPanelBackground")}onBackgroundMouseDragStart(t){return this.L.on("mouseDragStartPanelBackground",t)}offBackgroundMouseDragStart(t){return this.L.off(t,"mouseDragStartPanelBackground")}onBackgroundMouseDrag(t){return this.L.on("mouseDragPanelBackground",t)}offBackgroundMouseDrag(t){return this.L.off(t,"mouseDragPanelBackground")}onBackgroundMouseDragStop(t){return this.L.on("mouseDragStopPanelBackground",t)}offBackgroundMouseDragStop(t){return this.L.off(t,"mouseDragStopPanelBackground")}onBackgroundMouseWheel(t){return this.L.on("mouseWheelPanelBackground",t)}offBackgroundMouseWheel(t){return this.L.off(t,"mouseWheelPanelBackground")}onBackgroundTouchStart(t){return this.L.on("touchStartPanelBackground",t)}offBackgroundMouseTouchStart(t){return this.L.off(t,"touchStartPanelBackground")}onBackgroundTouchMove(t){return this.L.on("touchMovePanelBackground",t)}offBackgroundTouchMove(t){return this.L.off(t,"touchMovePanelBackground")}onBackgroundTouchEnd(t){return this.L.on("touchEndPanelBackground",t)}offBackgroundTouchEnd(t){return this.L.off(t,"touchEndPanelBackground")}onResize(t){return this.L.on("resize",t)}offResize(t){return this.L.off(t,"resize")}getIsInView(){return this.yy}}const za=t=>{t.ti&&t.ti()};class Va extends Ea{constructor(t,i,s,e,h,r){super(t,i,s,i.zy("uipanel bg",0),e,i.us.qi.uiPanelBackgroundFillStyle,i.us.qi.uiPanelBackgroundStrokeStyle,r),this.Ey(h,this.Mg)}setMinimumSize(t){return this.Bd=t,this.us.xs(),this}getMinimumSize(){return this.Bd}Ee(t){super.Ee(t),super.Ry()}}const Oa=A(10,10,10,10);class Na extends Ea{constructor(t,i,s,e,h,r,o,a,l,u){super(t,i,s,e,h,r,o,u),this.Vy={},this.Fa=Oa,this.gh=!0,this.Oy=i.Ny("chart internal ui",0),this.wh=this.Oy.Ur(this.uiScale).vr("Chart").ze(n(50,100)).ja(n(0,1)).tr(a).Le(l).setMouseInteractions(!1),this.Gy=this.es.Dg([this.wh]).bs(this.qi.effectsText)}setAnimationsEnabled(t){return this.gh=t,this}getAnimationsEnabled(){return this.gh}setTitle(t){return this.wh.vr(t),this.us.xs(),this}getTitle(){return this.wh.kr()}getTitleSize(){return this.wh.Vs().nd()}setTitleFillStyle(t){return this.wh.Le(t),this.my(),this}getTitleFillStyle(){return this.wh.Qh()}setTitleFont(t){return this.wh.tr(t),this.my(),this}getTitleFont(){return this.wh.qh()}setTitleRotation(t){return this.wh.ir(t),this.us.xs(),this}getTitleRotation(){return this.wh.sr()}setTitleEffect(t){return this.Gy.bs(t),this.us.xs(),this}getTitleEffect(){return this.Gy.Ms()}setTitleMargin(t){var i,s;return this.Vy="object"==typeof t?this.Vy?(i=this.Vy,{left:void 0!==(s=t).left?s.left:i.left,top:void 0!==s.top?s.top:i.top,right:void 0!==s.right?s.right:i.right,bottom:void 0!==s.bottom?s.bottom:i.bottom}):t:{left:t,top:t,right:t,bottom:t},this.my(),this}getTitleMargin(){return this.Vy}setPadding(t){return this.Fa="object"==typeof t?y(this.Fa,t):{left:t,top:t,right:t,bottom:t},this.my(),this}getPadding(){return this.Fa}Uy(t){const i=t.Wy(),s=null==i?void 0:i.height,e=null==i?void 0:i.width;if(void 0!==s&&void 0!==e)return{x:s/2,y:e/2}}dispose(){return super.dispose(),this.Oy.W(),this}}const Ga={Yy:(t,i)=>t.Qh()!==O&&0!==t.kr().length&&t.getVisible()?t.Vs().nd().y:0,Hy(t,i){t.ze(n(50,100)).Nr({top:void 0!==i.top?i.top:10,right:i.right||0,left:i.left||0,bottom:i.bottom||0})}},Ua=t=>"show-all-interpolated"===t||"show-nearest-interpolated"===t||"show-pointed-interpolated"===t,Wa=(t,i)=>{const s="series"in t?t.series:void 0;if(!s||!("getCursorFormattingOverride"in s))return i;const e=s.getCursorFormattingOverride();return e?e(t,i):i},Ya=(t,i,e,h,r,n,o)=>{let a,l,u=r,c=n,d=null,f=!0;const A=new s;if(h){f=!1;const i=()=>{f=!0,t.getCursorMode()&&(l&&g?y.Ee(...g):t.us.xs())},s=()=>{t.getCursorMode()&&(l&&g?y.Ee(...g):t.us.xs())},e=()=>{f=!1,t.getCursorMode()&&(l&&g?y.Ee(...g):t.us.xs())},r=()=>{f=!0,t.getCursorMode()&&(l&&g?y.Ee(...g):t.us.xs())},n=()=>{t.getCursorMode()&&(l&&g?y.Ee(...g):t.us.xs())},o=()=>{f=!1,t.getCursorMode()&&(l&&g?y.Ee(...g):t.us.xs())};h.onSeriesBackgroundMouseEnter(i),h.onSeriesBackgroundMouseMove(s),h.onSeriesBackgroundMouseLeave(e),h.onSeriesBackgroundTouchStart(r),h.onSeriesBackgroundTouchMove(n),h.onSeriesBackgroundTouchEnd(o),h.Xy(((i,s)=>{s.onMouseEnter(((i,e,h)=>{s.$y()&&(l||t.us.xs(),a=h||void 0),t.getCursorMode()&&(l&&g?y.Ee(...g):t.us.xs())})),s.onMouseMove(((i,e,h)=>{s.$y()&&(l||t.us.xs(),a=h||void 0),t.getCursorMode()&&(l&&g?y.Ee(...g):t.us.xs())})),s.onMouseLeave((()=>{s.$y()&&(l||t.us.xs(),a=void 0),t.getCursorMode()&&(l&&g?y.Ee(...g):t.us.xs())}))}))}let g;const y={setCursor:i=>(i(e),t),getCursor:()=>e,setCursorMode:i=>(u=i,t.us.xs(),t),getCursorMode:()=>u,setCustomCursor:t=>{l=t},onCursorTargetChanged:t=>A.on("cursorTargetChanged",t),offCursorTargetChanged:t=>{A.off(t)},setCursorFormatting:i=>(c=i,t.us.xs(),t),getCursorFormatting:()=>c,W:()=>{e.dispose(),i.W()},Ee:(i,s,h,r)=>{g=[i,s,h,r];const n=t.us.jn();let y=[];if((null==r?void 0:r.explicitTarget)&&u)y=Array.isArray(r.explicitTarget)?r.explicitTarget:[r.explicitTarget];else if(!i&&u){const t=s.find((t=>t.getIsUnderMouse())),i=n&&t&&(!t.getCursorEnabled||t.getCursorEnabled())&&t.vs?t.vs(n):void 0;if(a=i||a,a&&"show-all"!==u&&"show-all-interpolated"!==u)y=[a];else if("show-all"===u||"show-all-interpolated"===u||"show-nearest"===u||"show-nearest-interpolated"===u){if((f||void 0!==t)&&n&&h){for(const t of s){if(!t.getVisible()||t.getCursorEnabled&&!t.getCursorEnabled())continue;if(t.getCursorEnabled&&!t.getCursorEnabled()||!t.getVisible())continue;const i=h(t,n,u);i&&y.push(i)}"show-nearest"!==u&&"show-nearest-interpolated"!==u||(y.sort(((t,i)=>o(t,n)-o(i,n))),y.length=1)}}else if(("show-pointed"===u||"show-pointed-interpolated"===u)&&n&&t&&(!t.getCursorEnabled||t.getCursorEnabled())&&h){const i=h(t,n,u);i&&(y=[i])}}y=Gi(y.map((t=>ts(t))));const m=(null==r?void 0:r.overrideCursorPositions)||((t,i)=>i),p=y[0],v=y.length>0?y:void 0;if(p!==d&&n&&(l&&l(p,v,n),A.emit("cursorTargetChanged",p,v,n),d=p),l)e.getVisible()&&(e.setVisible(!1),e.Vs().Ee());else{if(y&&y.length>0){const i=c(t,y[0],y);e.setVisible(!0).setPosition(...m(y,y.map((t=>t.cursorPosition)))).setResultTable((t=>t.setContent(i)))}else e.setVisible(!1);(null==r?void 0:r.afterCursorPointedAt)&&r.afterCursorPointedAt(y),e.Vs().Ee()}},solveNearest:(i,s,e,h)=>{const r=i||t.us.jn();if(!r)return[];let n=[];if("show-all"===s||"show-all-interpolated"===s||"show-nearest"===s||"show-nearest-interpolated"===s){for(const t of e){if(!t.getCursorEnabled()||!t.getVisible())continue;const i=h(t,r,s);i&&n.push(i)}"show-nearest"!==s&&"show-nearest-interpolated"!==s||(n.sort(((t,i)=>o(t,r)-o(i,r))),n.length=1)}return n=Gi(n.map((t=>ts(t)))),n},jy:e};return y};class Ha{constructor(t,i){this.Zy=t,this.Qy=i}alter(t){this.Jy=void 0!==this.Jy?this.Jy:this.Qy(),this.Ky=t,this.Zy(t)}resetValue(){void 0!==this.Ky&&(void 0!==this.Jy&&this.isAltered()&&this.Zy(this.Jy),this.Jy=void 0,this.Ky=void 0)}getNormalValue(){return void 0!==this.Jy?this.Jy:this.Qy()}isAltered(){return void 0!==this.Ky&&this.Qy()===this.Ky}}class Xa{constructor(t){this.qy=[],this.jy=t,this.tm=t.tm}update(){return this.tm.getVisible()?!(this.im()&&(!this.sm()||(this.resetTable(),this.tm.Vs(),this.im()))&&(this.hm(),this.tm.Vs(),this.im()&&(this.resetTable(),this.tm.Vs(),1))):(this.sm()&&this.resetTable(),!0)}sm(){for(let t=0;t<this.qy.length;t+=1)if(this.qy[t].isAltered())return!0;return!1}resetTable(){for(let t=0;t<this.qy.length;t+=1)this.qy[t].resetValue();return this}im(){const t=this.jy.im();return t.x||t.y}rm(){return this.jy.im().x}nm(){return this.jy.im().y}om(t){return this.qy.push(t),t}}class $a extends Xa{constructor(){super(...arguments),this.Ta=this.om(new Ha((t=>this.tm.setOrigin(t)),(()=>this.tm.getOrigin())))}hm(){const t=this.Ta.getNormalValue(),i=n(this.rm()?-t.x:t.x,this.nm()?-t.y:t.y);this.Ta.alter(i)}}class ja extends Xa{constructor(t,i,s){super(t),this.am=this.om(new Ha((t=>this.tm.setTextFont((i=>i.setSize(t)))),(()=>this.tm.getTextFont().getSize()))),this.lm=i,this.um=s}hm(){const t=this.am.getNormalValue(),i=this.lm;if(i<t)for(let s=1;s<=this.um;s+=1){const e=t-(t-i)*(s/this.um);if(this.am.alter(e),this.tm.Vs(),!this.im())return}}}const Za={Flip:t=>new $a(t),FontSize:(t=5,i=5)=>s=>new ja(s,t,i)},Qa={None:An,Rectangle:qn,Circle:to,Diamond:io,Pointer:so};class Ja extends co{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.Qu=this.qi.cursorResultTableTextFont,this.Wd=0,this.dm=this.qi.cursorResultTableTextFillStyle,this.na=100}setContent(t){let i;void 0===t?i=[]:Array.isArray(t)?(i=[],t.forEach((t=>{i.push(Array.isArray(t)?t:[t])}))):i=[[t]];for(let t=0;t<i.length;t+=1){const s=i[t];let e=!1;for(let t=0;t<s.length;t+=1){const i=s[t],h="object"==typeof i&&"text"in i?i.text:"string"==typeof i?i:void 0,r="object"==typeof i&&"icon"in i?i.icon:Vn(i)?i:void 0,n=i instanceof ye&&i;if(!(h&&h.length>0||r||n)){e=!0;break}}e||(s.unshift(""),s.push(""))}const s=i.length;let e=this.getMembers().length;for(let t=0;t<Math.max(s,e);t+=1){const r=this.getRow(t,!0);if(t>=s)this.getMembers()[t].dispose(),t-=1,e-=1;else{const s=i[t].length;let e=r.getMembers().length;for(let n=0;n<Math.max(s,e);n+=1){const o=i[t][n],a="object"==typeof o&&"font"in o?o.font:void 0,l="object"==typeof o&&"fillStyle"in o?o.fillStyle:void 0,u="object"==typeof o&&"text"in o?o.text:"string"==typeof o?o:void 0,c="object"==typeof o&&"icon"in o?o.icon:Vn(o)?o:void 0,d=o instanceof ye&&o,f=r.getMembers();if(n>=s)r.getMembers()[n].dispose(),n-=1,e-=1;else if(void 0!==u&&u.length>0||c||d){const t=a?this.Qu.withMutations((t=>{for(const i of Object.keys(a)){const s=a[i];void 0!==s&&t.set(i,s)}return t})):this.Qu,i=l||this.dm,s=f[n];if(u){let e;s&&s instanceof Jn?e=s:(s&&s.dispose(),e=r.addElement(Kn,n)),e.setText(u).setFont(t).setFillStyle(i).setTextRotation(this.Wd)}else if(c){let e;s&&s instanceof eo?e=s:(s&&s.dispose(),e=r.addElement(ho,n)),e.setFillStyle(i).setShape(c).setSize({y:t.size,x:t.size}),e.setMargin(5)}else if(d){let e;s&&"setTextFillStyleHidden"in(h=s)&&"setText"in h?e=s:(s&&s.dispose(),e=r.addElement(Co.setBackground(Qa.None),n).setOn(!0));const o=d.Ds();void 0!==o&&e.setButtonShape(o),e.setText(d.getName()).setTextFont(t).setTextFillStyle(i).setTextRotation(this.Wd),d.styleLegendEntry(e)}}else{const t=f[n];t&&t instanceof ro||(t&&t.dispose(),r.addGap(void 0,n))}}}}var h;return this.Ls.xs(),this}setTextFillStyle(t){this.dm="function"==typeof t?t(this.dm):t;for(let t=0;t<this.getMemberCount();t+=1){const i=this.getRow(t);for(let t=0;t<i.getMembers().length;t+=1){const s=i.getMembers()[t];s instanceof Jn&&s.setFillStyle(this.dm)}}return this.Ls.xs(),this}getTextFillStyle(){return this.dm}setTextFont(t){return Eh(t)?this.Qu=t:this.Qu=t(this.Qu),this.Ls.xs(),this}getTextFont(){return this.Qu}setTextRotation(t){return this.Wd=t,this.Ls.xs(),this}getTextRotation(){return this.Wd}fm(){for(let t=0;t<this.Id.length;t+=1)for(let i=0;i<this.Id[t].getMembers().length;i+=1)this.Id[t].getMembers()[i].dispose()}Vs(){for(let t=0;t<this.Id.length;t+=1)this.Id[t].setMinimumSize(void 0);super.Vs();for(let t=0;t<this.Id.length;t+=1)this.Id[t].setMinimumSize(this.size.x);return super.Vs(),this}}class Ka{constructor(t,i,e,h,r,n){this.Am=[],this.gm=!0,this.ym=!0,this.yy=!1,this.ji=!0,this.$i=!1,this.pm=[],this.L=new s,this.Ls=t,this.renderingScale=i,this.scale=e,this.vm=h,this.Sm=r,this.qi=n,this.tm=new Ja(this.Ls,this.renderingScale,this.scale,this.Sm,Zt,n).setMouseInteractions(!1).setBackground((t=>t.setFillStyle(n.cursorResultTableFillStyle).setStrokeStyle(n.cursorResultTableStrokeStyle))).setTextFillStyle(n.cursorResultTableTextFillStyle).setTextFont(n.cursorResultTableTextFont),this.bm=Za.Flip(this)}isDisposed(){return this.$i}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t)}setPointMarkerVisible(t){return this.gm=t,this.Am.forEach((i=>i.pointMarker.setVisible(i.targetVisible&&t))),this.Ls.xs(),this}getPointMarkerVisible(){return this.gm}setPointMarker(t){return this.Am.forEach((i=>t(i.pointMarker))),this.pm.push(t),this.Ls.xs(),this}setResultTableVisible(t){return this.ym=t,this.Ls.xs(),this}getResultTableVisible(){return this.ym}setResultTable(t){return t(this.tm),this.Ls.xs(),this}setAutoFitStrategy(t){return this.bm&&this.bm.resetTable(),this.bm=t?t(this):void 0,this.Ls.xs(),this}getAutoFitStrategy(){return void 0!==this.bm}setVisible(t){return this.ji=t,this.Ls.xs(),this}getVisible(){return this.ji}dispose(){return this.Am.forEach((t=>t.pointMarker.dispose())),this.tm.dispose(),this.pm.length=0,this.vm(this),this.L.emit("dispose"),this}im(){const t=this.tm,i=this.Ls.us.ft,s=pt(t.getPosition(n(-1,-1),Ot.PaddedBackground),t.scale,i),e=pt(t.getPosition(n(1,1),Ot.PaddedBackground),t.scale,i);return{x:s.x<i.x.getInnerStart()||e.x>i.x.getInnerEnd(),y:s.y<i.y.getInnerStart()||e.y>i.y.getInnerEnd()}}Ee(){return this.bm&&this.bm.update(),this.tm.setVisible(this.yy&&this.ji&&this.ym),this.Am.forEach((t=>t.pointMarker.setVisible(t.targetVisible&&this.yy&&this.ji&&this.gm))),this.Am.forEach((t=>t.pointMarker.Ee())),this.tm.Ee(),this}Vs(){return this.Am.forEach((t=>t.pointMarker.Vs())),this.tm.Vs(),this}xm(t,i){const s=i===this.scale?t:pt(t,i,this.scale);this.tm.setPosition(s)}}const qa=t=>t.setResultTable((t=>t.setEffect(!0).setOrigin(n(-1,-1)).setMargin(5)));class tl extends Ka{setPosition(...t){const i=this.renderingScale,s=La(t[0].resultTableScale,i),e=s===this.scale?t[0].resultTable:pt(t[0].resultTable,s,this.scale);return this.yy=!1,this.Am.forEach((t=>{t.targetVisible=!1})),t.forEach(((t,s)=>{const e=La(t.pointMarkerScale,i),h=e===this.scale?t.pointMarker:pt(t.pointMarker,e,this.scale);let r=this.Am[s];if(!r){const t=new eo(this.Ls,this.renderingScale,this.scale,Zt,this.qi).setMouseInteractions(!1).setFillStyle(this.qi.cursorPointMarkerFillStyle).setSize(this.qi.cursorPointMarkerSize).setShape(this.qi.cursorPointMarkerShape);r={pointMarker:t,targetVisible:!0},this.Am.push(r),this.pm.forEach((i=>i(t)))}r.pointMarker.setPosition(h),r.targetVisible=((t,i,s=i)=>{const e=i!==s?pt(t,i,s):t;return e.x>=s.x.getInnerStart()&&e.x<=s.x.getInnerEnd()&&e.y>=s.y.getInnerStart()&&e.y<=s.y.getInnerEnd()})(t.pointMarker,e),r.targetVisible&&(this.yy=!0)})),this.tm.setPosition(e),this.Ls.xs(),this}}class il{constructor(t,i=[]){this.Mm=[],this._m=(t,i)=>(this.Mm.forEach((s=>s(t,i))),t),this.addStyler=t=>new il(this.Sm,this.Mm.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new il(t,this.Mm.map((t=>t))),this.wm=(t,i,s,e,h)=>this._m(new tl(t,i,s,e,this.Sm,h),h),this.Sm=t,this.Mm=i}}const sl=new il(qn,[qa]),el=new il(so,[qa,t=>t.setPointMarkerVisible(!1).setResultTable((t=>t.setOrigin(n(0,-1)).setMargin(0).setBackground((t=>{t instanceof so&&t.setDirection(Ut.Down).setPointerLength(10).setPointerAngle(60)}))))]),hl=sl,rl=sl,nl=sl,ol=el,al=new il(qn,[qa,t=>t.setPointMarkerVisible(!1).setResultTable((t=>t.setOrigin(qe.LeftBottom)))]),ll=sl;var ul;!function(t){t[t.LabelsInsideSlices=0]="LabelsInsideSlices",t[t.LabelsOnSides=1]="LabelsOnSides"}(ul||(ul={}));const cl={SortByName:(t,i)=>t.getName().localeCompare(i.getName(),void 0,{numeric:!0}),SortByValueAscending:(t,i)=>t.getAnimatedValue()-i.getAnimatedValue(),SortByValueDescending:(t,i)=>i.getAnimatedValue()-t.getAnimatedValue(),None:()=>0},dl={Name:t=>`${t.getName()}`,NamePlusValue:t=>`${t.getName()}: ${Math.round(t.getAnimatedValue())}`,NamePlusRelativeValue:(t,i)=>`${t.getName()}: ${(100*i).toFixed(2)}%`};class fl extends ye{constructor(){super(...arguments),this.ws="Slice",this.S=0}}const Al=(t,i)=>{mi(i),t.setExploded(!t.getExploded())};class gl extends fl{}class yl extends gl{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.Cm=!1,this.km=O,this.Tm=O,this.Fm=this.S,this.Im=this.Cm?1:0,this.Pm=this.getVisible(),this.Dm=K((()=>this.chart.us.xs())),this.Bm=K((()=>this.chart.us.xs())),this.Lm=()=>{this.Rm=void 0},this.Em=()=>{this.zm=void 0},this.index=t,this.chart=e,this.scale=h,this.Ki=r,this.Vm=i.ld(h).cs(this.getHighlight()),this.fs(this.Vm),this.hh=s.Ur(h).cs(this.getHighlight()),this.fs(this.hh,{isText:!0}),this.onMouseClick(Al),this.onTouchEnd(Al)}setValue(t){return this.chart.getAnimationsEnabled()?this.Pm&&this.Om(this.Fm,t):this.Fm=t,this.S=t,this.chart.us.xs(),this}getValue(){return this.S}setExploded(t){if(t&&!1===this.chart.getMultipleSliceExplosion()){const t=this.chart.getSlices();for(let i=0;i<t.length;i+=1)t[i]!==this&&t[i].getExploded()&&t[i].setExploded(!1)}return this.chart.getAnimationsEnabled()?(this.zm&&this.zm.finish(),this.zm=this.Bm(300,Q.ease)([[this.Im,t?1:0]],(([t])=>{this.Im=t,this.chart.us.xs()})),this.zm.onEveryAnimationEnd(this.Em),this.Cm=!this.Cm):!1!==this.chart.getMultipleSliceExplosion()||t?(this.Im=this.Cm?0:1,this.Cm=!this.Cm):(this.Im=0,this.Cm=!this.Cm),this.chart.us.xs(),this}getExploded(){return this.Cm}setVisible(t){return this.Pm=t,!1===t?this.chart.getAnimationsEnabled()&&this.Fm>0?(this.Rm&&(this.Rm.finish(!1),this.Rm=void 0),this.Om(this.Fm,0,(()=>super.setVisible(!1)))):(this.Fm=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.Rm&&(this.Rm.finish(!1),this.Rm=void 0),super.setVisible(!0),this.Om(this.Fm,this.S)):(this.Fm=this.S,super.setVisible(!0)),this}Om(t,i,s){this.Rm=this.Dm(300,Q.ease)([[t,i]],(([t])=>{this.Fm=t,this.chart.us.xs()})),this.Rm.onEveryAnimationEnd(this.Lm),s&&this.Rm.onAnimationEnd(s)}setStyle(t,i,s,e){this.km=t,this.Tm=s,this.Vm.Le(this.km).Be(i),this.hh.Le(this.Tm).tr(e);for(let t=0;t<this.Qi.length;t+=1)this.styleLegendEntry(this.Qi[t])}getAnimatedValue(){return this.Fm}getAnimatedExplosion(){return this.Im}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.km,stroke:this.Vm.vo()})}}const ml=(t,i,s)=>Is(i,Fs(Ns(.5*(t.ou()+t.ki())*Math.PI/180),s)),pl=(t,i,s,e,h,r)=>{const n=t.length;let o=90;for(let a=0;a<n;a+=1){const l=t[a],u=o-360*i[a],c=l.getAnimatedExplosion();if(0===c||1===n)l.Vm.ze(s);else{const t=Is(s,Fs(Ns(.5*(o+u)*Math.PI/180),r*c));l.Vm.ze(t)}l.Vm.fu(o).He(u).gu(e).yu(e).mu(h),o=u}},vl=t=>{const i=t.getSlices();for(let t=0;t<i.length;t+=1)i[t].setExploded(!1)};class Sl extends Na{constructor(t,i,s,e,h,r,n){super(t,i,s,i.zy("pieChart bg",0),e,i.us.qi.pieChartBackgroundFillStyle,i.us.qi.pieChartBackgroundStrokeStyle,i.us.qi.pieChartTitleFont,i.us.qi.pieChartTitleFillStyle,r),this.Nm=[],this.Gm=cl.SortByName,this.tu=0,this.Um=this.qi.pieChartSliceFillStylePalette,this.Wm=this.qi.pieChartSliceStrokeStyle,this.Ym=!0,this.Hm=this.qi.pieChartSliceLabelFont,this.Xm=this.qi.pieChartSliceLabelFillStyle,this.$m=0,this.jm=!1,this.Zm=20,this.Qm=!0,this.Jm=!0,this.Km=t=>{const i=this.Nm.indexOf(t);i>=0&&(this.Nm.splice(i,1),this.qm())},this.us.Qn(Yo.vf),this.tp=i.ip("pieChart bottom",0),this.sp=i.ip("pieChart top",1),this.wh.vr("Pie Chart"),this.Ey(h,this.Mg),this.onBackgroundMouseDoubleClick(vl);const o=ve(new Se(vl));this.onBackgroundTouchStart(o.onTouchStart),this.onBackgroundTouchMove(o.onTouchMove),this.onBackgroundTouchEnd(o.onTouchEnd);const a=i.ep(),l=qt(n?n.cursorBuilder:void 0,rl);this.hp=Ya(this,a,l.wm(a,this.uiScale,this.uiScale,Zt,this.qi),void 0,"show-pointed",bl,(()=>0)),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled))}setCursor(t){return this.hp.setCursor(t),this}getCursor(){return this.hp.getCursor()}setCursorMode(t){return this.hp.setCursorMode(t),this}getCursorMode(){return this.hp.getCursorMode()}setCustomCursor(t){return this.hp.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.hp.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.hp.offCursorTargetChanged(t)}setCursorFormatting(t){return this.hp.setCursorFormatting(t),this}getCursorFormatting(){return this.hp.getCursorFormatting()}addCursor(t=rl){const i=this.wy(),s=t.wm(i,this.uiScale,this.uiScale,this.Sy(i),this.qi);return this.By(s),s}addSlice(t,i){const s=new yl(this.$m,this.tp,this.sp,this,this.Mg,this.Km,this.qi,this.us.es);this.$m+=1,s.setName(t);const e=this.gh;return this.gh=!1,s.setValue(i),this.gh=e,s.setEffect(this.Qm),this.rp(s),this.Nm.push(s),this.qm(),s.setHighlightOnHover(this.Ym),s.onMouseMove((()=>{this.getCursorMode()&&this.us.xs()})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Nm}setMultipleSliceExplosion(t){return this.jm=t,this}getMultipleSliceExplosion(){return this.jm}setInnerRadius(t){return this.tu=t,this.us.xs(),this}getInnerRadius(){return this.tu}setSliceExplosionOffset(t){return this.Zm=t,this.us.xs(),this}getSliceExplosionOffset(){return this.Zm}setLUT(t){return this.Jd=t,this.us.xs(),this}setSliceFillStyle(t){this.Um=t;for(let t=0;t<this.Nm.length;t+=1)this.rp(this.Nm[t]);return this.us.xs(),this}getSliceFillStyle(){return this.Um}setSliceStrokeStyle(t){this.Wm="function"==typeof t?t(this.Wm):t;for(let t=0;t<this.Nm.length;t+=1)this.rp(this.Nm[t]);return this.us.xs(),this}getSliceStrokeStyle(){return this.Wm}setSliceEffect(t){return this.Qm=t,this.Nm.forEach((i=>i.es.ns.bs(t))),this.us.xs(),this}getSliceEffect(){return this.Qm}setSliceSorter(t){return this.Gm=t,this.Nm=this.Nm.sort(this.Gm),this.us.xs(),this}getSliceSorter(){return this.Gm}setLabelFillStyle(t){this.Xm="function"==typeof t?t(this.Xm):t;for(let t=0;t<this.Nm.length;t+=1)this.rp(this.Nm[t]);return this.us.xs(),this}getLabelFillStyle(){return this.Xm}setLabelFont(t){this.Hm="function"==typeof t?t(this.Hm):t;for(let t=0;t<this.Nm.length;t+=1)this.rp(this.Nm[t]);return this.us.xs(),this}getLabelFont(){return this.Hm}setLabelEffect(t){return this.Jm=t,this.Nm.forEach((i=>i.es.rs.bs(t))),this.us.xs(),this}getLabelEffect(){return this.Jm}setLabelFormatter(t){return this.np=t,this.us.xs(),this}getLabelFormatter(){return this.np}setSliceHighlightOnHover(t){return this.Ym=t,this.Nm.forEach((i=>i.setHighlightOnHover(t))),this}Ee(t){super.Ee(t),Ga.Hy(this.wh,this.Vy),super.Ry();const i=Ga.Yy(this.wh,this.Vy),s=n(this.Mg.x.getInnerInterval()-(this.Fa.left+this.Fa.right),this.Mg.y.getInnerInterval()-(this.Fa.bottom+this.Fa.top+i)),e=n(this.Fa.left+s.x/2,this.Fa.bottom+s.y/2);if(this.Jd){const t=this.Jd;this.Nm.forEach((i=>{this.rp(i,new W({color:t.getColors(i.getAnimatedValue())}))}))}for(let t=0;t<this.Nm.length;t+=1){const i=this.Nm[t].getAnimatedValue()>0;this.Nm[t].Vm.setVisible(i),this.Nm[t].hh.setVisible(i)}this.Nm=this.Nm.sort(this.Gm);const h=this.Nm.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/r:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.hh.vr(this.np(i,o[t])).Vs()}this.hp.Ee(!1,this.Nm,((t,i,s)=>{const e=o[h.indexOf(t)]||0,r=this.us.Go(i);return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.us.ft,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.us.ft},slice:t,category:t.getName(),value:t.getValue(),relativeValue:e}})),this.op(h,o,e,s)}rp(t,i=this.Um(t.index,t)){t.setStyle(i,this.Wm,this.Xm,this.Hm)}qm(){this.Nm=this.Nm.sort(this.Gm),this.us.xs()}nf(){return this.Nm}dispose(){return super.dispose(),this.Nm.slice().forEach((t=>t.dispose())),this.hp.W(),this.sp.W(),this.tp.W(),this}}const bl=(t,i,s)=>[[i.slice],[{text:i.value.toString(),font:{weight:"bold"}}]],xl={UserSeries:{type:"ApplicationType",args:{type:"UserSeries"}},InternalUI:{type:"ApplicationType",args:{type:"InternalUI"}}},Ml=(...t)=>{const i=[];return t.forEach((t=>{var s;t&&"object"==typeof(s=t)&&s&&"pattern"in s&&i.push({type:"DataPattern",args:t})})),i};class _l extends Sl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.np=dl.NamePlusValue,this.ap=[],this.lp=40,this.up=5,this.cp=10,this.dp=this.qi.pieChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.dp=t;for(let t=0;t<this.ap.length;t+=1)this.ap[t].We(this.dp);return this.us.xs(),this}getLabelConnectorStyle(){return this.dp}setLabelSliceOffset(t){return this.lp=t,this.us.xs(),this}getLabelSliceOffset(){return this.lp}setLabelConnectorGapStart(t){return this.up=t,this.us.xs(),this}getLabelConnectorGapStart(){return this.up}setLabelConnectorEndLength(t){return this.cp=t,this.us.xs(),this}getLabelConnectorEndLength(){return this.cp}op(t,i,s,e){const h=this.Hm.getSize(),r=this.lp,n=this.cp,o=this.up,a=Math.min(this.Zm,r-o);let l=0;if(1===t.length)l=t[0].hh.nd().x;else for(let i=0;i<t.length;i+=1)l=Math.max(l,t[i].hh.nd().x);const u=Math.max(.5*(Math.min(e.x-2*l-2*n,e.y-2*h)-2*r),0);if(u<50){const r=Math.max(.5*Math.min(e.x,e.y-2*h),0);pl(t,i,s,r,this.tu,a),t.forEach((t=>t.hh.setVisible(!1))),this.ap.forEach((t=>t.setVisible(!1)))}else{pl(t,i,s,u,this.tu,a);let e=90;const h=t.map(((t,h)=>{const o=360*i[h],a=e-o,l=Ns(Vs(.5*(e+a))),c=l.x>=0?-1:1,d=Is(Is(s,Fs(l,u+r)),{x:c*-n,y:0});e=a;const f={x:c,y:0};t.hh.ze(d).ja(f),t.hh.Vs();const A=vs(t.hh.eh());return{position:d,alignment:f,shape:t.hh,boundaries:A,sliceAngleVec:l,slice:t}})),l=[];for(let t=0;t<h.length;t+=1){const i=h[t],s=l[l.length-1];s&&!1!==cs([s.boundaries,i.boundaries])?i.shape.setVisible(!1):(l.push(i),i.shape.setVisible(!0))}for(let t=0;t<this.ap.length;t+=1)this.ap[t].setVisible(!1);l.forEach(((t,i)=>{const e=t.slice.Vm,h=ml(e,s,u+o+a*t.slice.getAnimatedExplosion()),r=zs(t.position.y,h,s),n=t.position;this.fp([h,r,n])}))}}getMinimumSize(){return n(500,300)}fp(t){let i;for(let t=0;t<this.ap.length;t+=1)if(!this.ap[t].getVisible()){i=this.ap[t].setVisible(!0);break}void 0===i&&(i=this.sp.Ap(this.Mg,void 0,[xl.InternalUI]).We(this.dp).setMouseInteractions(!1),this.ap.push(i)),i.Vt().ml(t)}}class wl extends Sl{constructor(){super(...arguments),this.np=dl.Name,this.gp=.5}op(t,i,s,e){const h=this.Zm,r=Math.max(0,.5*Math.min(e.x,e.y)-h);pl(t,i,s,r,this.tu,h);for(let i=0;i<t.length;i+=1){const e=t[i],n=e.Vm,o=e.hh,a=this.tu/100,l=((1-a)*this.gp+a)*r+e.getAnimatedExplosion()*h,u=ml(n,s,l);o.ze(u).Ya(0).Xa(0)}}getMinimumSize(){return n(200,200)}setLabelPosition(t){return this.gp=t,this.us.xs(),this}getLabelPosition(){return this.gp}}const Cl={LabelsOnSides:_l,LabelsInsideSlices:wl},kl=t=>{if(we(t)){const i=t.getThickness(),s=t.getFillStyle();if(Y(s))return 1===i?Vh:new Nh({size:i,fillStyle:s,shape:"sphere"})}return Vh};class Tl{constructor(t,i,e,h,r,n,o,a,l,u){this.L=new s,this.S=0,this.ji=!0,this.$i=!1,this.Wo=!0,this.xs=t,this.yp=i,this.mp=e,this.pp=h,this.vp=r,this.Sp=n,this.Wd=o,this.dm=a,this.bp=l,this.ac=u}setValue(t){return t===this.S||(this.S=t,this.xs(),this.L.emit("valueChange",this,this.S)),this}getValue(){return this.S}setTickStyle(t){return this.mp="function"==typeof t?t(this.mp):t,this.xs(),this}getTickStyle(){return this.mp}setTickLength(t){return this.pp=t,this.xs(),this}getTickLength(){return this.pp}setGridStrokeStyle(t){return this.vp="function"==typeof t?t(this.vp):t,this.xs(),this}getGridStrokeStyle(){return this.vp}setTextPadding(t){return this.Sp=t,this.xs(),this}getTextPadding(){return this.Sp}setTextRotation(t){return this.Wd=t,this.xs(),this}getTextRotation(){return this.Wd}setTextFillStyle(t){return this.dm="function"==typeof t?t(this.dm):t,this.xs(),this}getTextFillStyle(){return this.dm}setTextFont(t){return this.bp="function"==typeof t?t(this.bp):t,this.xs(),this}getTextFont(){return this.bp}setTextFormatter(t){return this.ac=t,this.xs(),this}onValueChange(t){return this.L.on("valueChange",t)}offValueChange(t){return this.L.off(t,"valueChange")}dispose(){return this.$i||(this.$i=!0,this.yp(),this.xs(),this.L.emit("dispose",this)),this}isDisposed(){return this.$i}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setVisible(t){const i=this.ji!==t;return this.ji=t,i&&(this.L.emit("visibleStateChanged",this,this.ji),this.xs()),this}getVisible(){return this.ji}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}setMouseInteractions(t){return this.Wo=t,this.xs(),this}getMouseInteractions(){return this.Wo}}class Fl extends Tl{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d){super(t,i,s,e,h,r,n,o,a,l),this.xp=u,this.Mp=c,this.Fa=d}setBackgroundFillStyle(t){return this.xp="function"==typeof t?t(this.xp):t,this.xs(),this}getBackgroundFillStyle(){return this.xp}setBackgroundStrokeStyle(t){return this.Mp="function"==typeof t?t(this.Mp):t,this.xs(),this}getBackgroundStrokeStyle(){return this.Mp}setPadding(t){return this.Fa="number"==typeof t?{left:t,top:t,right:t,bottom:t}:{...this.Fa,...t},this.xs(),this}getPadding(){return this.Fa}}class Il{constructor(t,i,s,e){this._p=[],this.wp=new Map,this.Cp=t,this.kp=i,this.Tp=s,this.Fp=e}Ip(){this.Tp&&this.Tp();const t=[];return{add:(i,s)=>{t.push({instanceUniqueProperties:i,instanceSharedProperties:s})},finishPlot:()=>{const i=[];let s=[];t.forEach((t=>{const s=i.find((i=>((t,i)=>{const s=Object.keys(t);for(const e of s)if(t[e]!==i[e])return!1;return!0})(i.sharedProperties,t.instanceSharedProperties)));s?s.instances.push(t.instanceUniqueProperties):i.push({sharedProperties:t.instanceSharedProperties,instances:[t.instanceUniqueProperties]})}));const e=this._p.slice(),h=[];i.forEach((t=>{let i=e.pop();i||(i=this.Cp(),this._p.push(i));const r=[],n=i.Pp().slice();t.instances.forEach(((t,i)=>{const s=n.shift();r.push({...t,existingMember:s})}));const o=this.kp(i,r,t.sharedProperties);s=ki(s,o,{canReturnB:!0});for(let s=0;s<t.instances.length;s+=1)h.push({Qo:t.instances[s].Qo,collection:i,member:o[s]});n.forEach((t=>{null==i||i.Dd(t)}))})),e.forEach((t=>{t.dispose();const i=this._p.indexOf(t);i<0?zi(0,(()=>{})):this._p.splice(i,1)})),h.forEach((t=>{const i=this.wp.get(t.Qo);i&&t.collection.us.uo({entity:i.collection,collectionMember:i.member},{entity:t.collection,collectionMember:t.member})})),this.wp.clear(),h.forEach((t=>{this.wp.set(t.Qo,t)})),this.Fp&&this.Fp(this._p,s)}}}Dp(){this._p.forEach((t=>{t.dispose()})),this._p.length=0}}class Pl{constructor(t){this.Bp=[],this.Lp=t}Ip(){return this.Rp(),{add:()=>this.dl(),finishPlot:()=>{this.Ep()}}}dl(){let t=this.Bp.find((t=>t.isFree));return t||(t={isFree:!1,shape:this.Lp()},this.Bp.push(t)),t.isFree=!1,t.shape}Rp(){this.Bp.forEach((t=>{t.isFree=!0}))}Ep(){this.Bp.filter((t=>t.isFree)).forEach((t=>{t.shape.dispose(),this.Bp.splice(this.Bp.indexOf(t),1)}))}Dp(){this.Bp.forEach((t=>t.shape.dispose())),this.Bp.length=0}}class Dl extends Th{constructor(t,i,s,e,h,r,n,o,a){super(t,i,s,e,o,{numeric:i.zp({x:t.us.qi.xAxis3DNumericTicks,y:t.us.qi.yAxis3DNumericTicks,z:t.us.qi.zAxis3DNumericTicks}),datetime:i.zp({x:t.us.qi.xAxis3DDateTimeTicks,y:t.us.qi.yAxis3DDateTimeTicks,z:t.us.qi.zAxis3DDateTimeTicks}),time:i.zp({x:t.us.qi.xAxis3DTimeTicks,y:t.us.qi.yAxis3DTimeTicks,z:t.us.qi.zAxis3DTimeTicks})},{type:"linear"}),this.Gf=[],this.Vp=()=>{},this.Op=()=>{},this.Np=()=>{},this.Gp=()=>{},this.chart=t,this.Wp=h,this.Yp=r,this.Hp=n,this.Xp=this.Wp.ft;const l=this.Nh.zp({x:this.qi.xAxis3DStrokeStyle,y:this.qi.yAxis3DStrokeStyle,z:this.qi.zAxis3DStrokeStyle});this.$p=this.Wp.Ap([xl.InternalUI]).We(l).jp(kl(l)).setMouseInteractions(!1),this.Th=this.Yp.Ur(this.Hp).setMouseInteractions(!1).Le(i.zp({x:t.us.qi.xAxis3DTitleFillStyle,y:t.us.qi.yAxis3DTitleFillStyle,z:t.us.qi.zAxis3DTitleFillStyle})).tr(i.zp({x:t.us.qi.xAxis3DTitleFont,y:t.us.qi.yAxis3DTitleFont,z:t.us.qi.zAxis3DTitleFont})).la(3),this.Zp=new Pl((()=>this.Yp.Ur(this.Hp).la(2).Gr(Qi).Nr(Qi))),this.Qp=new Il((()=>this.Yp.Jp(this.Hp).setMouseInteractions(!1).la(1)),((t,i,s)=>(t.Le(s.fillStyle).Be(s.strokeStyle),i.map((({positions:i,existingMember:s})=>{const e=s||t.jr();return e.Tl(i),e}))))),this.Kp=new Il((()=>this.Wp.Zg().setMouseInteractions(!1)),((t,i,s)=>(t.Vt().We(s.lineStyle),i.map((({positions:i,existingMember:s})=>s||t.ml(i)))))),this.es=a,this.er=this.es.Dg([this.Th]).bs(e.effectsText),this.$p.setMouseEnterEventHandler(this.Vp).setMouseLeaveEventHandler(this.Op).setMouseDragEventHandler(this.Np).setMouseDragStopEventHandler(this.Gp),s.yg=this}setTickStrategy(t,i){return super.Yh(t,i)}getTickStrategy(){return this.ah}addCustomTick(){const t=new Fl((()=>this.chart.us.xs()),(()=>{const i=this.Gf.indexOf(t);i>=0&&this.Gf.splice(i,1)}),this.qi.xAxis3DNumericTicks.majorTickStyle.tickStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.tickLength,this.qi.xAxis3DNumericTicks.majorTickStyle.gridStrokeStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.tickPadding,this.qi.xAxis3DNumericTicks.majorTickStyle.labelRotation,this.qi.xAxis3DNumericTicks.majorTickStyle.labelFillStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.labelFont,(t=>this.formatValue(t)),O,dt,{left:4,right:4,top:4,bottom:4});return this.Gf.push(t),this.chart.us.xs(),t}setStrokeStyle(t){return this.$p.We(t).jp(kl(this.$p.Su())),this.chart.us.xs(),this}getStrokeStyle(){return this.$p.Su()}setMouseInteractions(t){return this}setVisible(t){return super.setVisible(t),this.$p.setVisible(t),!1===t&&(this.Kp.Dp(),this.Zp.Dp(),this.Qp.Dp()),this.Wp.xs(),this}Og(){return this.chart.getSeries()}qp(t){return Math.abs(this.ft.it(t)*this.Wp.tv(1))}zr(t,i,s){const e=Math.abs(this.ft.it(i-t)*this.Wp.tv(1));return{min:t-s*e,max:i+s*e}}br(t,i){const s=new Bl(i,t,this.Yp,this.Hp,this.Wp);return s.hh.la(0),s}Mr(t,i){const s=this.sv(i,t.S,t.Rh.$e.tickLength,t.Rh.$e.tickPadding);return t.hh.ze(s.labelPosition).ja(s.labelAlignment),s}sv(t,i,s,e){const{wuSize:h,start:r,end:o,tickDirection3D:a,tickDirection2D:l}=t,u=(i-this.ft.getInnerStart())/(this.ft.getInnerEnd()-this.ft.getInnerStart()),c=ss.addVec(ps(r,o,u),ss.multiplyVec(ss.multiply(a,this.Wp.tv(.5*this.$p.Su().getThickness())),h)),d=ss.addVec(c,ss.multiplyVec(ss.multiply(a,this.Wp.tv(s)),h)),f=this.Wp.ev(d)||n(0,0);return{labelPosition:Is(pt(f,this.chart.us.ft,this.Hp),Fs(l,e)),labelAlignment:{x:-l.x,y:-l.y},posTickEnd3D:d,posTickStart3D:c,tickPositionRelative:u}}hv(t,i,s){const{wuSize:e,start:h,end:r,tickDirection3D:o}=i,a=(t-this.ft.getInnerStart())/(this.ft.getInnerEnd()-this.ft.getInnerStart()),l=ss.addVec(ps(h,r,a),ss.multiplyVec(ss.multiply(o,this.Wp.tv(.5*this.$p.Su().getThickness())),e)),u=ss.addVec(l,ss.multiplyVec(ss.multiply(o,this.Wp.tv(10)),e)),c=this.Wp.ev(l)||n(0,0),d=this.Wp.ev(u)||n(0,0);return this.Yp.Ye(this.Hp).Xe(c).He(d).We(new _e({fillStyle:new W({color:x(120*s)}),thickness:1}))}Rr(t,i){return Ll(t,i,this.ft)}Ee(t){if(!this.ji)return;const i=Math.min(this.Hh,this.Xh),s=Math.max(this.Hh,this.Xh),e=this.Xp,h=l(e.x.ht(),e.y.ht(),e.z.ht());let r,o;this.rv()?(r=l(e.x.getInnerEnd(),e.y.getInnerStart(),e.z.getInnerStart()),o=l(e.x.getInnerEnd(),e.y.getInnerStart(),e.z.getInnerEnd())):(r=l(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),o=this.Nh.nv(l(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),r));const a=this.Nh.lf,u=this.Wp.ev(r)||n(0,0),c=this.Wp.ev(o)||n(0,0),d=ps(r,o,.5),f=ss.addVec(d,ss.multiplyVec(ss.multiply(a,-1),h)),A=this.Wp.ev(d)||n(0,0),g=this.Wp.ev(f)||n(0,0),y=Cs(Ps(pt(A,this.chart.us.ft,this.Hp),pt(g,this.chart.us.ft,this.Hp)));this.$p.Vt().ml([r,o]);const{gridlinePositionA:m,gridlinePositionB:p,gridlinePositionC:v}=this.Nh.ov(t),S=t=>({x:-1===t.x?this.Xp.x.getInnerStart():1===t.x?this.Xp.x.getInnerEnd():0,y:-1===t.y?this.Xp.y.getInnerStart():1===t.y?this.Xp.y.getInnerEnd():0,z:-1===t.z?this.Xp.z.getInnerStart():1===t.z?this.Xp.z.getInnerEnd():0}),b=S(m),x=S(p),M=S(v),_={physicalAxisSize:Ts(Ps(u,c)),wuSize:h,start:r,end:o,tickDirection3D:a,tickDirection2D:y,gridlinePositionA:b,gridlinePositionB:x,gridlinePositionC:M},w=this.cr(_),C=this.Kp.Ip();for(const[t,i]of this.lh)for(const[,s]of i){const i=w.get(s);if(!i)continue;const e=this.av(_,i);C.add({Qo:0,positions:[e.tickStroke.start,e.tickStroke.end]},{lineStyle:t.$e.tickStyle}),e.gridStroke&&C.add({Qo:0,positions:e.gridStroke},{lineStyle:t.$e.gridStrokeStyle})}const k=this.Zp.Ip(),T=this.Qp.Ip(),F={x:0,y:0};this.Gf.forEach((t=>{if(!t.ji||t.S<i||t.S>s)return;const e=this.sv(_,t.S,t.pp,t.Sp),h=this.av(_,e);if(t.dm!==O){const i=k.add().ze(e.labelPosition).ja(e.labelAlignment).Le(t.dm).tr(t.bp).vr(t.ac(t.S)).ir(t.Wd).setMouseInteractions(t.Wo),s=i.Vs().ni();if(F.x=Math.max(F.x,s.x),F.y=Math.max(F.y,s.y),t.xp!==O){const s=i.eh(),e=[{x:s[0].x-t.Fa.left,y:s[0].y+t.Fa.top},{x:s[1].x+t.Fa.right,y:s[1].y+t.Fa.top},{x:s[2].x+t.Fa.right,y:s[2].y-t.Fa.bottom},{x:s[3].x-t.Fa.left,y:s[3].y-t.Fa.bottom}];T.add({Qo:0,positions:e},{fillStyle:t.xp,strokeStyle:t.Mp})}}C.add({Qo:0,positions:[h.tickStroke.start,h.tickStroke.end]},{lineStyle:t.mp}),h.gridStroke&&C.add({Qo:0,positions:h.gridStroke},{lineStyle:t.vp})})),k.finishPlot(),T.finishPlot(),C.finishPlot();const I=this.Cr(((t,i)=>{const s=i.hh.ni();return t.x=Math.max(t.x,s.x),t.y=Math.max(t.y,s.y),t}),{x:F.x,y:F.y}),P=Math.atan((c.y-u.y)/(c.x-u.x));this.Th.ja({x:0,y:0}).ir(180*-P/Math.PI);const D=ss.addVec(d,ss.multiplyVec(ss.multiply(a,this.Wp.tv(.5*this.$p.Su().getThickness()+this.Fr(((t,i)=>Math.max(t,i.tickLength)),0))),h)),B=this.Wp.ev(D)||n(0,0),L=Is(pt(B,this.chart.us.ft,this.Hp),Is(Is(Ds(I,y),Fs(y,this.Fr(((t,i)=>Math.max(t)),0))),Ds(Fs(this.Th.Vs().ni(),.5),y)));this.Th.ze(L),this.$p.lv={overrideFollowing:!1,skipMousePicking:!1}}av(t,i){const{gridlinePositionA:s,gridlinePositionB:e,gridlinePositionC:h}=t,r=i.posTickStart3D,n=i.posTickEnd3D,o=i.tickPositionRelative;let a;return Qt(o,0)||Qt(o,1)||(a=[this.uv()?{...s,x:r.x}:this.cv()?{...s,y:r.y}:this.rv()?{...s,z:r.z}:{x:0,y:0,z:0},this.uv()?{...e,x:r.x}:this.cv()?{...e,y:r.y}:this.rv()?{...e,z:r.z}:{x:0,y:0,z:0},this.uv()?{...h,x:r.x}:this.cv()?{...h,y:r.y}:this.rv()?{...h,z:r.z}:{x:0,y:0,z:0}]),{gridStroke:a,tickStroke:{start:r,end:n}}}hr(){super.hr(),this.Kp.Dp(),this.Zp.Dp(),this.Qp.Dp()}uv(){return this.Nh.uv()}cv(){return this.Nh.cv()}rv(){return this.Nh.rv()}}class Bl extends Fh{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.dv=h}}const Ll=(t,i,s)=>Jt(t+.1*(i-t)+Math.abs(s.ht())/100*Math.sign(i-t),Math.min(t,i),Math.max(t,i)),Rl=(t,i,s,e)=>({Ir:()=>{const s=t();let e;for(const t of s){if(!t.fv())continue;const s=i(t);e=void 0===s?e:void 0!==e?Math.min(e,s):s}return e},Pr:()=>{const i=t();let e;for(const t of i){if(!t.fv())continue;const i=s(t);e=void 0===i?e:void 0!==e?Math.max(e,i):i}return e},Br:()=>{const i=t();let s;for(const t of i){if(!t.fv())continue;const i=e(t);s=void 0===i?s:void 0!==s?Math.max(s,i):i}return s}}),El=t=>({...Rl(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.Br().y)),zp:t=>t.y,nv:(t,i)=>({x:i.x,y:t.y,z:i.z}),lf:l(-1,0,0),ov:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:l(i.x,0,i.z),gridlinePositionB:l(i.x,0,-i.z),gridlinePositionC:l(-i.x,0,-i.z)}},uv:()=>!1,cv:()=>!0,rv:()=>!1}),zl=t=>({...Rl(t,(t=>t.getZMin()),(t=>t.getZMax()),(t=>t.Br().z)),zp:t=>t.z,nv:(t,i)=>({x:i.x,y:i.y,z:t.z}),lf:l(1,0,0),ov:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:l(i.x,-i.y,0),gridlinePositionB:l(i.x,i.y,0),gridlinePositionC:l(-i.x,i.y,0)}},uv:()=>!1,cv:()=>!1,rv:()=>!0});class Vl extends ye{constructor(t,i,s,e,h){super(t,i,e,h),this.Av=In,this.gv=!0,this.yv=!0,this.mv=!0,this.chart=t,this.Wp=s,this.ts=new Map,this.onMouseWheel(this.chart.pv),this.onMouseDrag(this.chart.vv),this.onMouseDragStop(this.chart.Sv),this.onTouchStart(this.chart.bv.onTouchStart),this.onTouchMove(this.chart.bv.onTouchMove),this.onTouchEnd(this.chart.bv.onTouchEnd)}Ji(t,i){const s=null==t?void 0:t.dataPoint;if(s)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.Mg,axisLocation:s},...s,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ()}}setCursorEnabled(t){return this.gv=t,this}getCursorEnabled(){return this.gv}setCursorFormattingOverride(t){return this.xv=t,this}getCursorFormattingOverride(){return this.xv}$y(){return this.getCursorEnabled()}setAutoScrollingEnabled(t){return this.yv=t,this.chart.us.xs(),this}getAutoScrollingEnabled(){return this.yv}setColorShadingStyle(t){return this.Av=t,this.ts.forEach(((i,s)=>s.Mv(t))),this.Wp.xs(),this}getColorShadingStyle(){return this.Av}setDepthTestEnabled(t){return this.mv=t,this.ts.forEach(((i,s)=>s._v(t))),this.Wp.xs(),this}getDepthTestEnabled(){return this.mv}wv(){}Ee(){}Fp(){}getXMax(){const t=this.Ka;return t?t.vt():void 0}getXMin(){const t=this.Ka;return t?t.yt():void 0}getYMax(){const t=this.Ka;return t?t.bt():void 0}getYMin(){const t=this.Ka;return t?t.St():void 0}getZMax(){const t=this.Ka;return t?t.Cv():void 0}getZMin(){const t=this.Ka;return t?t.kv():void 0}Br(){const t=this.Ka;return t?l(t.Il(),t.Pl(),t.Tv()):l(0,0,0)}}class Ol extends Vl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.ws="Box Series 3D",this.Fv=.25,this.Iv=!1,this.Kd=()=>Di(this.Fe),this.Fe=Ri(this.qi.boxSeries3DFillStyle,h),this.Ka=this.Wp.Dv()._v(this.mv).Le(this.Fe).Pv(this.Fv).cs(this.getHighlight()),this.fs(this.Ka)}invalidateData(t){const i=t.length;if(0===i)return this;this.Iv&&this.chart.us.Qn(Yo.Pf);const s=t[0];if(!s)return this;let e;if("xMin"in s||"yMin"in s||"zMin"in s||"xMax"in s||"yMax"in s||"zMax"in s){e=[];for(let s=0;s<i;s+=1){const i=t[s],h="xMin"in i&&"xMax"in i,r="yMin"in i&&"yMax"in i,n="zMin"in i&&"zMax"in i;e[s]={color:i.color,value:i.value,id:i.id,xCenter:h?(i.xMin+i.xMax)/2:void 0,yCenter:r?(i.yMin+i.yMax)/2:void 0,zCenter:n?(i.zMin+i.zMax)/2:void 0,xSize:h?i.xMax-i.xMin:void 0,ySize:r?i.yMax-i.yMin:void 0,zSize:n?i.zMax-i.zMin:void 0}}}else e=t;return this.Ka.Bv(e.slice()),this.chart.us.xs(),this.Iv=!0,this}setFillStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.Ka.Le(t),this.chart.us.xs(),this}getFillStyle(){return this.Fe}setRoundedEdges(t){return void 0!==t&&isNaN(t)&&(console.error("'BoxSeries3D.setRoundedEdges | NaN was supplied.'"),t=void 0),this.Fv=void 0!==t?Jt(t,0,1):void 0,this.Ka.Pv(this.Fv),this.Wp.xs(),this}getRoundedEdges(){return this.Fv}fv(){return this.yv&&this.getVisible()}Ve(t,i){t.cs(i),this.chart.us.xs()}Ee(){super.Ee(),this.Ka.Vs(!1)}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe})}}class Nl extends Vl{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Iv=!1,this.Kd=()=>Di(this.vu.getFillStyle())}setStrokeStyle(t){this.vu="function"==typeof t?t(this.vu):t;const i=this.vu;return this.Ka.We(i),this.Wp.xs(),this}getStrokeStyle(){return this.vu}add(t){return this.Iv&&this.chart.us.Qn(Yo.Pf),this.Iv=!0,(t=Array.isArray(t)?t:[t])?(this.Ka.ml(t.slice()),this.Wp.xs(),this):this}clear(){return this.Ka.Vt(),this}getPointAmount(){const t=this.Ka;return t.pl()+t.vl()}fv(){return this.yv&&this.getPointAmount()>0&&this.getVisible()}Ve(t,i){t.cs(i),this.Wp.xs()}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{stroke:this.vu})}}class Gl extends Nl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.ws="Line Series 3D",this.vu=Ri(e.lineSeries3DStrokeStyle,h),this.Lv=sr.pointStyle3D,this.Rv(this.vu),this.Ka=this.Wp.Ap([xl.UserSeries])._v(this.mv).We(this.vu).jp(this.Lv).cs(this.getHighlight()),this.fs(this.Ka)}setStrokeStyle(t){super.setStrokeStyle(t),this.Rv(this.vu);const i=this.Lv;return this.Ka.jp(i),this}Rv(t){const i=new Hh.Triangulated({shape:"sphere",fillStyle:t.getFillStyle(),size:t.getThickness()});this.Lv=i}}class Ul extends Nl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.ws="Point Line Series 3D",this.Kd=()=>Di(this.vu.getFillStyle())||Di(this.Lv.getFillStyle()),this.Lv=Ri(e.pointLineSeries3DPointStyle,h),this.vu=Ri(e.lineSeries3DStrokeStyle,h),this.Ev(),this.Ka=this.Wp.Ap([xl.UserSeries])._v(this.mv).We(this.vu).jp(this.Lv).cs(this.getHighlight()),this.fs(this.Ka)}setPointStyle(t){return this.Lv="function"==typeof t?t(this.Lv):t,this.Ev(),this.Ka.jp(this.Lv),this.Wp.xs(),this}getPointStyle(){return this.Lv}setStrokeStyle(t){super.setStrokeStyle(t);const i=this.vu,s=Math.abs(i.getThickness()),e=this.Lv,h=e.getSize();s>("object"==typeof h?Math.max(h.x,h.y,h.z):h)&&(this.Lv=e.setSize(s)),this.Ev();const r=this.Lv;return this.Ka.jp(r),this.Wp.xs(),this}Ev(){const t=this.Lv,i=t.getSize();this.Lv=t.setSize(i)}Ve(t,i){t.cs(i),this.Wp.xs()}}class Wl extends Vl{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.Iv=!1,((null==r?void 0:r.individualPointSizeAxisEnabled)||(null==r?void 0:r.individualPointSizeEnabled))&&this.chart.us.Qn(Yo.Df)}add(t){return this.Iv&&this.chart.us.Qn(Yo.Pf),this.Iv=!0,(t=Array.isArray(t)?t:[t])?(this.Ka.ml(t.slice()),this.Wp.xs(),this):this}clear(){return this.Ka.Vt(),this}getPointAmount(){const t=this.Ka;return t.pl()+t.vl()}fv(){return this.yv&&this.getPointAmount()>0&&this.getVisible()}Ve(t,i){t.cs(i),this.Wp.xs()}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{point3D:this.zv})}}class Yl extends Wl{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.ws="Point Series 3D",this.Kd=()=>Di(this.zv.getFillStyle());const n=void 0!==(null==r?void 0:r.automaticColorIndex)?r.automaticColorIndex:this.chart.getSeries().length;this.zv=Ri(e.pointSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.Ka=this.Wp.Ov(o)._v(this.mv).Vv(this.zv).cs(this.getHighlight()),this.fs(this.Ka)}setPointStyle(t){this.zv="function"==typeof t?t(this.zv):t;const i=this.zv;return this.Ka.Vv(i),this.Wp.xs(),this}getPointStyle(){return this.zv}}class Hl extends Wl{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.ws="Point Cloud Series 3D",this.Kd=()=>Di(this.zv.getFillStyle());const n=this.chart.getSeries().length;this.zv=Ri(e.pointCloudSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.Ka=this.Wp.Ov(o).Vv(this.zv).cs(this.getHighlight()),this.fs(this.Ka)}setPointStyle(t){this.zv="function"==typeof t?t(this.zv):t;const i=this.zv;return this.Ka.Vv(i),this.Wp.xs(),this}getPointStyle(){return this.zv}}const Xl={Triangulated:Yl,Pixelated:Hl};class $l extends Na{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.Nv=[],this.Gv=0,this.Uv=t=>{const i=this.Nv.indexOf(t);i>=0&&(this.Nv.splice(i,1),this.L.emit("seriesDispose",this,t))},this.onSeriesBackgroundMouseEnter=t=>this.L.on("mouseEnterSeriesBackground",t),this.onSeriesBackgroundMouseLeave=t=>this.L.on("mouseLeaveSeriesBackground",t),this.onSeriesBackgroundMouseMove=t=>this.L.on("mouseMoveSeriesBackground",t),this.onSeriesBackgroundMouseDown=t=>this.L.on("mouseDownSeriesBackground",t),this.onSeriesBackgroundMouseUp=t=>this.L.on("mouseUpSeriesBackground",t),this.onSeriesBackgroundMouseClick=t=>this.L.on("mouseClickSeriesBackground",t),this.onSeriesBackgroundMouseDoubleClick=t=>this.L.on("mouseDoubleClickSeriesBackground",t),this.onSeriesBackgroundMouseDragStart=t=>this.L.on("mouseDragStartSeriesBackground",t),this.onSeriesBackgroundMouseDrag=t=>this.L.on("mouseDragSeriesBackground",t),this.onSeriesBackgroundMouseDragStop=t=>this.L.on("mouseDragStopSeriesBackground",t),this.onSeriesBackgroundMouseWheel=t=>this.L.on("mouseWheelSeriesBackground",t),this.onSeriesBackgroundTouchStart=t=>this.L.on("touchStartSeriesBackground",t),this.onSeriesBackgroundTouchMove=t=>this.L.on("touchMoveSeriesBackground",t),this.onSeriesBackgroundTouchEnd=t=>this.L.on("touchEndSeriesBackground",t),this.offSeriesBackgroundMouseEnter=t=>this.L.off(t,"mouseEnterSeriesBackground"),this.offSeriesBackgroundMouseLeave=t=>this.L.off(t,"mouseLeaveSeriesBackground"),this.offSeriesBackgroundMouseMove=t=>this.L.off(t,"mouseMoveSeriesBackground"),this.offSeriesBackgroundMouseDown=t=>this.L.off(t,"mouseDownSeriesBackground"),this.offSeriesBackgroundMouseUp=t=>this.L.off(t,"mouseUpSeriesBackground"),this.offSeriesBackgroundMouseClick=t=>this.L.off(t,"mouseClickSeriesBackground"),this.offSeriesBackgroundMouseDoubleClick=t=>this.L.off(t,"mouseDoubleClickSeriesBackground"),this.offSeriesBackgroundMouseDragStart=t=>this.L.off(t,"mouseDragStartSeriesBackground"),this.offSeriesBackgroundMouseDrag=t=>this.L.off(t,"mouseDragSeriesBackground"),this.offSeriesBackgroundMouseDragStop=t=>this.L.off(t,"mouseDragStopSeriesBackground"),this.offSeriesBackgroundMouseWheel=t=>this.L.off(t,"mouseWheelSeriesBackground"),this.offSeriesBackgroundTouchStart=t=>this.L.off(t,"touchStartSeriesBackground"),this.offSeriesBackgroundTouchMove=t=>this.L.off(t,"touchMoveSeriesBackground"),this.offSeriesBackgroundTouchEnd=t=>this.L.off(t,"touchEndSeriesBackground"),this.Wv=this.es.Dg()}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.Nv.forEach((i=>i.setAnimationHighlight(t))),this}Yv(t,i){this.Wv.As([i]),t.setMouseMoveEventHandler(((t,i)=>{this.L.emit("mouseMoveSeriesBackground",this,i)})).setMouseEnterEventHandler(((t,i)=>{this.L.emit("mouseEnterSeriesBackground",this,i)})).setMouseLeaveEventHandler(((t,i)=>{this.L.emit("mouseLeaveSeriesBackground",this,i)})).setMouseDownEventHandler(((t,i)=>this.L.emit("mouseDownSeriesBackground",this,i))).setMouseUpEventHandler(((t,i)=>this.L.emit("mouseUpSeriesBackground",this,i))).setMouseClickEventHandler(((t,i)=>this.L.emit("mouseClickSeriesBackground",this,i))).setMouseDoubleClickEventHandler(((t,i)=>this.L.emit("mouseDoubleClickSeriesBackground",this,i))).setMouseWheelEventHandler(((t,i)=>this.L.emit("mouseWheelSeriesBackground",this,i))).setMouseDragStartEventHandler(((t,i,s)=>this.L.emit("mouseDragStartSeriesBackground",this,i,s))).setMouseDragEventHandler(((t,i,s,e,h)=>this.L.emit("mouseDragSeriesBackground",this,i,s,e,h))).setMouseDragStopEventHandler(((t,i,s,e)=>this.L.emit("mouseDragStopSeriesBackground",this,i,s,e))).setTouchStartEventHandler(((t,i)=>{this.L.emit("touchStartSeriesBackground",this,i)})).setTouchMoveEventHandler(((t,i)=>{this.L.emit("touchMoveSeriesBackground",this,i)})).setTouchEndEventHandler(((t,i)=>{this.L.emit("touchEndSeriesBackground",this,i)}))}setSeriesBackgroundFillStyle(t){return this.Hv.Le(t),this.us.xs(),this}getSeriesBackgroundFillStyle(){return this.Hv.Qh()}setSeriesBackgroundStrokeStyle(t){return this.Xv.Be(t),this.us.xs(),this}getSeriesBackgroundStrokeStyle(){return this.Xv.vo()}setSeriesBackgroundEffect(t){return this.Wv.bs(t),this.us.xs(),this}getSeriesBackgroundEffect(){return this.Wv.Ms()}$v(t){this.Nv.push(t),void 0!==this.jv&&t.setHighlightOnHover(this.jv),this.L.emit("seriesAdded",this,t)}nf(){return this.Nv}setSeriesHighlightOnHover(t){return this.jv=t,this.Nv.forEach((i=>i.setHighlightOnHover(t))),this}dispose(){return this.Nv.slice().forEach(jt),super.dispose()}Xy(t){return this.L.on("seriesAdded",t)}Zv(t){return this.L.off(t)}Qv(t){return this.L.on("seriesDispose",t)}Jv(t){return this.L.off(t)}}const jl=ss.normalize({x:-.5610788649579117,y:-.35242840511865414,z:-1.1349149375849081});class Zl{constructor(t,i,s,e){this.Kv=!0,this.qv=!0,this.tS=2*-Math.PI/2160,this.iS=2*Math.PI/2160,this.sS=.1,this.eS=1*Math.PI/180,this.hS=t,this.rS=i,this.nS=s,this.ev=e}getDefaultCameraConfiguration(t,i){const s={direction:jl,location:ss.multiply(jl,-1)};return this.cameraLocationChanged({boundingBox:t,cameraDirection:s.direction,cameraLocation:s.location,projection:i})||s}applyCameraInteractions(t,i){let s={direction:t.cameraDirection,location:t.cameraLocation};return i.forEach((t=>{"rotate"===t.type?s=this.oS(s,t):"wheel-zoom"===t.type?s=this.aS(s,t):"rotate+zoom"===t.type?s=this.lS(s,t):"fixed-rotate"===t.type?s=this.uS(s,t):"move"===t.type&&(s=this.cS(s,t))})),this.Kv?s=this.dS(t.boundingBox,s):this.qv&&(s=this.fS(t.boundingBox,t.projection,s)),s}oS(t,i){const{rotation:s}=i,e=t.location,h=ss.multiply(ss.normalize(t.location),-1),{Right:r,Up:n}=this.AS(h);let o=e;const a=this.gS(h),l=s.x*this.tS*a;o=ss.rotateAroundAxis(o,n,l);const u=(s.y>0?1:-1)*Math.min(Math.abs(s.y)*this.iS,a-this.eS);return 0!==u&&(o=ss.rotateAroundAxis(o,r,u)),{location:o,direction:ss.multiply(ss.normalize(o),-1)}}aS(t,i){const{deltaY:s}=i;this.Kv&&this.yS(!1);const e=t.location,h=ss.multiply(ss.normalize(e),-1),r=s*this.sS,n=ss.length(e)*-r;return{direction:h,location:ss.addVec(e,ss.multiply(h,n))}}lS(t,i){const{rotation:s,cameraDistance:e}=i;this.Kv&&this.yS(!1);let h=this.oS(t,{type:"rotate",rotation:s});const r=h.location,n=ss.multiply(ss.normalize(r),-1),o=ss.multiply(n,-e);return h={direction:ss.multiply(ss.normalize(o),-1),location:o},h}uS(t,i){this.Kv&&this.yS(!1);const{rotation:s}=i,e=t.location,h=t.direction,{Right:r,Up:n}=this.AS(h),o=s.x*this.tS;let a=ss.normalize(ss.rotateAroundAxis(h,n,o));const l=s.y*this.iS;return a=ss.normalize(ss.rotateAroundAxis(a,r,l)),{location:e,direction:a}}cS(t,i){this.Kv&&this.yS(!1),this.qv=!1;const{amountRight:s,amountForward:e}=i,h=t.location,r=t.direction,{Right:n}=this.AS(r);return{location:ss.addVec(h,ss.multiply(r,.01*e),ss.multiply(n,.01*s)),direction:r}}projectionChanged(t,i){return this.viewportChanged(t)}boundingBoxChanged(t){const i={location:t.cameraLocation,direction:ss.multiply(ss.normalize(t.cameraLocation),-1)};return this.Kv?this.dS(t.boundingBox,i):this.fS(t.boundingBox,t.projection,i)}cameraLocationChanged(t){const i={location:t.cameraLocation,direction:ss.multiply(ss.normalize(t.cameraLocation),-1)};return this.Kv?this.dS(t.boundingBox,i):this.fS(t.boundingBox,t.projection,i)}viewportChanged(t){const i={location:t.cameraLocation,direction:ss.multiply(ss.normalize(t.cameraLocation),-1)};if(this.Kv)return this.dS(t.boundingBox,i)}dS(t,i,s){let e=i;s=void 0!==s?s:0,e=this.mS(t,e,100,20,1,s,5);const h=this.gS(e.direction);return e=this.pS(e,this.vS(t,e,100,1),h),e}mS(t,i,s,e,h,r,n){return Ql(r,n,(t=>({direction:i.direction,location:ss.multiply(i.direction,-t)})),(i=>this.SS(t,i)),s,h,"linear",e)}vS(t,i,s,e){const{Right:h,Left:r,Up:n,Down:o}=this.AS(i.direction),a=this.bS(t,!1,i);let l=i;const u=e,c=.1;return Math.abs(a.bottom-a.top)>u&&(l=a.bottom<a.top?Jl(0,c,(t=>({location:l.location,direction:ss.normalize(ss.lerp(l.direction,o,t))})),(i=>this.xS(t,i)),0,u,!0,s):Jl(0,c,(t=>({location:l.location,direction:ss.normalize(ss.lerp(l.direction,n,t))})),(i=>this.xS(t,i)),0,u,!0,s)),Math.abs(a.left-a.right)>u&&(l=a.left<a.right?Jl(0,c,(t=>({location:l.location,direction:ss.normalize(ss.lerp(l.direction,r,t))})),(i=>this.MS(t,i)),0,u,!0,s):Jl(0,c,(t=>({location:l.location,direction:ss.normalize(ss.lerp(l.direction,h,t))})),(i=>this.MS(t,i)),0,u,!0,s)),l}SS(t,i){const s=this.bS(t,!0,i);return Math.min(s.left+s.right,s.top+s.bottom)}MS(t,i){const s=this.bS(t,!1,i);return Math.abs(s.left-s.right)}xS(t,i){const s=this.bS(t,!1,i);return Math.abs(s.top-s.bottom)}bS(t,i,s){const e=vs(this._S(t,i,s).map((t=>pt(t,this.hS,this.rS))));return{left:e.min.x,right:this.rS.x.getInnerEnd()-e.max.x,top:this.rS.y.getInnerEnd()-e.max.y,bottom:e.min.y}}_S(t,i,s){const e=this.nS,h=l(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),r=l(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),n=[],o=i?16:4,a=(h.x+r.x)/2,u=(h.z+r.z)/2,c=Math.sqrt(2)*(r.x-a),d=Math.sqrt(2)*(r.z-u);return[h.y,r.y].forEach((t=>{for(let i=0;i<o;i+=1){const s=Math.PI/4+2*Math.PI*i/o,e=a+Math.cos(s)*c,h=u+Math.sin(s)*d;n.push({x:e,y:t,z:h})}})),n.map((t=>this.ev(t,s))).filter((t=>void 0!==t))}fS(t,i,s){const e=ss.length(s.location),h=this.wS(t,i);return e<h.min?{direction:s.direction,location:ss.multiply(s.direction,-h.min)}:e>h.max?{direction:s.direction,location:ss.multiply(s.direction,-h.max)}:s}wS(t,i){return{min:("perspective"===i?.8:.5)*Math.sqrt(t.x**2+t.y**2+t.z**2),max:3*Math.sqrt(t.x**2+t.y**2+t.z**2)}}AS(t){const i=l(0,1,0),s=ss.normalize(ss.cross(i,ss.multiply(t,-1)));let e=ss.cross(s,t);return e.y=Math.abs(e.y),e=ss.normalize(e),{Right:s,Up:e,Down:ss.multiply(e,-1),Left:ss.multiply(s,-1)}}gS(t){const i={x:0,y:1,z:0},s=ss.angle(t,i),e=ss.angle(t,ss.multiply(i,-1));return Math.min(s,e)}pS(t,i,s){return{location:ss.lerp(t.location,i.location,s),direction:ss.normalize(ss.lerp(t.direction,i.direction,s))}}yS(t){return this.Kv=t,this}CS(){return this.Kv}}const Ql=(t,i,s,e,h,r,n,o)=>{let a,l=0,u=(i+t)/2;do{const o=s(u);if(a={value:u,result:o,score:e(o)},Math.abs(a.score-h)<=r)break;const c=a.score>h;c&&"linear"===n||!c&&"reversed"===n?(u=(a.value+t)/2,i=a.value):(u=(a.value+i)/2,t=a.value),l+=1}while(l<o);return a.result},Jl=(t,i,s,e,h,r,n,o)=>{let a,l=0,u=t;do{const c=s(u),d=e(c);if(void 0===a||Math.abs(d-h)<Math.abs(a.score-h)){if(a={value:u,result:c,score:e(c)},Math.abs(a.score-h)<=r)break}else if(n)break;l+=1,u+=1/(o-1)*(i-t)}while(l<o);return a.result};class Kl extends Vl{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.ws="Surface Grid Series 3D",this.kS={},this.Iv=!1,this.Kd=()=>Di(this.Fe),this.Av=kn;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.chart.getSeries().length;this.Fe=Ri(this.qi.surfaceGridSeries3DFillStyle,n),this.TS=Ri(this.qi.surfaceGridSeries3DWireframeStyle,n);const o={heatmapDataType:"intensity",dataOrder:e.dataOrder||"columns",columns:e.columns,rows:e.rows};this.qn=o,this.Ka=this.Wp.IS(o).Le(this.Fe).FS(this.TS).Mv(this.Av).cs(this.getHighlight()),this.fs(this.Ka),this.setHighlightOnHover(!1)}Ji(t,i){const s=null==t?void 0:t.dataPoint;if(s)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.Mg,axisLocation:s},...s,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:Z(this.Fe)?this.Fe.lut:void 0}}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe})}PS(){const t=this.kS.start||{x:0,z:0};let i;i=this.kS.end?{x:(this.kS.end.x-t.x)/this.qn.columns,z:(this.kS.end.z-t.z)/this.qn.rows}:this.kS.step?this.kS.step:{x:1,z:1},this.Ka.DS(t,i),this.chart.us.xs()}setStart(t){return this.kS.start=t,this.PS(),this}getStart(){return this.Ka.BS().start}setStep(t){return this.kS.step=t,this.PS(),this}getStep(){return this.Ka.BS().step}setEnd(t){return this.kS.end=t,this.PS(),this}getEnd(){return this.Ka.BS().end}setFillStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.Ka.Le(this.Fe),this.Wp.xs(),this}getFillStyle(){return this.Fe}setWireframeStyle(t){return this.TS="function"==typeof t?t(this.TS):t,this.Ka.FS(this.TS),this.Wp.xs(),this}getWireframeStyle(){return this.Ka.LS()}setIntensityInterpolation(t){return t=t||"disabled",this.Ka.RS(t),this.Wp.xs(),this}getIntensityInterpolation(){return this.Ka.ES()}invalidateIntensityValues(t){if(this.Iv&&this.chart.us.Qn(Yo.Pf),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.qn.dataOrder?t.length:t[0].length,rows:"rows"===this.qn.dataOrder?t.length:t[0].length},s="columns"===this.qn.dataOrder?this.qn.columns:this.qn.rows,e="columns"===this.qn.dataOrder?this.qn.rows:this.qn.columns;if(i.x>s||i.y>e){if(!0===this.chart.wA.so){const t=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.qn.columns}x${this.qn.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;Yt.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.Ka.zS({type:"intensity",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.qn.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.qn.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.qn.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.qn.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.qn.dataOrder?this.qn.columns:this.qn.rows)-1,o=("columns"===this.qn.dataOrder?this.qn.rows:this.qn.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.chart.wA.so){const s=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.qn.columns}x${this.qn.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Yt.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),u=Math.max(e-n,0),c=Math.max(r-o,0),d=i.primary-(a+u),f=[];if(0===l&&0===c)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),h=Math.max(h,0)}this.Ka.zS({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.Wp.xs(),this.Iv=!0,this}invalidateHeightMap(t){if(this.Iv&&this.chart.us.Qn(Yo.Pf),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.qn.dataOrder?t.length:t[0].length,rows:"rows"===this.qn.dataOrder?t.length:t[0].length},s="columns"===this.qn.dataOrder?this.qn.columns:this.qn.rows,e="columns"===this.qn.dataOrder?this.qn.rows:this.qn.columns;if(i.x>s||i.y>e){if(!0===this.chart.wA.so){const t=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.qn.columns}x${this.qn.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;Yt.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.Ka.VS({type:"y",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.qn.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.qn.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.qn.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.qn.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.qn.dataOrder?this.qn.columns:this.qn.rows)-1,o=("columns"===this.qn.dataOrder?this.qn.rows:this.qn.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.chart.wA.so){const s=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.qn.columns}x${this.qn.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Yt.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),u=Math.max(e-n,0),c=Math.max(r-o,0),d=i.primary-(a+u),f=[];if(0===l&&0===c)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),h=Math.max(h,0)}this.Ka.VS({type:"y",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.Wp.xs(),this.Iv=!0,this}setCullMode(t){return this.Ka.OS("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.Ka.NS()}wv(){}Ee(){}Fp(){}fv(){return this.yv&&this.getVisible()}Ve(t,i){t.cs(i),this.Wp.xs()}}class ql extends Vl{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.ws="Surface Grid Series 3D",this.kS={},this.Kd=()=>Di(this.Fe),this.chart.us.Qn(Yo.Pf),this.Av=kn;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.chart.getSeries().length;this.Fe=Ri(this.qi.surfaceScrollingGridSeries3DFillStyle,n),this.TS=Ri(this.qi.surfaceScrollingGridSeries3DWireframeStyle,n);const o={heatmapDataType:"intensity",scrollDimension:e.scrollDimension||"columns",columns:e.columns,rows:e.rows};this.qn=o,this.Ka=this.Wp.GS(o).Le(this.Fe).FS(this.TS).Mv(this.Av).cs(this.getHighlight()),this.fs(this.Ka),this.setHighlightOnHover(!1)}Ji(t,i){const s=null==t?void 0:t.dataPoint;if(s)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.Mg,axisLocation:s},...s,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:Z(this.Fe)?this.Fe.lut:void 0}}PS(){const t=this.kS.start||{x:0,z:0};let i;i=this.kS.step?this.kS.step:{x:1,z:1},this.Ka.DS(t,i),this.chart.us.xs()}setStart(t){return this.kS.start=t,this.PS(),this}getStart(){return this.Ka.BS().start}setStep(t){return this.kS.step=t,this.PS(),this}getStep(){return this.Ka.BS().step}setFillStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.Ka.Le(this.Fe),this.Wp.xs(),this}getFillStyle(){return this.Fe}setWireframeStyle(t){return this.TS="function"==typeof t?t(this.TS):t,this.Ka.FS(this.TS),this.Wp.xs(),this}getWireframeStyle(){return this.Ka.LS()}setIntensityInterpolation(t){return t=t||"disabled",this.Ka.RS(t),this.Wp.xs(),this}getIntensityInterpolation(){return this.Ka.ES()}clear(){return this.Ka.Vt(),this.Wp.xs(),this}addValues(t){if(!t)return this;let i=t.yValues,s=t.intensityValues;if(!i&&!s)return this;if(i&&0===i.length&&(i=void 0),s&&0===s.length&&(s=void 0),i){const t=i[0].length,s=0+t-1,e="columns"===this.qn.scrollDimension?this.qn.rows:this.qn.columns;if(s>e-1){if(!0===this.chart.wA.so){const i=`SurfaceScrollingGridSeries3D.addValues input yValues overflow.\nGrid was created with ${e} ${"columns"===this.qn.scrollDimension?"rows":"columns"}, input yValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Yt.console.warn(i)}const s=[];for(let t=0;t<i.length;t+=1)s[t]=i[t].slice(0,e+1);i=s}}if(s){const t=s[0].length,i=0+t-1,e="columns"===this.qn.scrollDimension?this.qn.rows:this.qn.columns;if(i>e-1){if(!0===this.chart.wA.so){const i=`SurfaceScrollingGridSeries3D.addValues intensityValues overflow.\nGrid was created with ${e} ${"columns"===this.qn.scrollDimension?"rows":"columns"}, input intensityValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Yt.console.warn(i)}const i=[];for(let t=0;t<s.length;t+=1)i[t]=s[t].slice(0,e+1);s=i}}if(i&&s){const t=i.length,e=s.length;if(t!==e){if(!0===this.chart.wA.so){const i=`SurfaceScrollingGridSeries3D.addValues input yValues and intensityValues size does not match.\nyValues: ${t}\nintensityValues: ${e}\nData will be automatically clipped according to the smaller supplied sample. This can result in sub-optimal performance.`;Yt.console.warn(i)}t>e?i=i.slice(0,e):s=s.slice(0,t)}}const e=i?i.length:null==s?void 0:s.length,h=i?i[0].length:null==s?void 0:s[0].length;return this.Ka.US({startPrimary:0,startSecondary:0,lengthPrimary:e,lengthSecondary:h,heightMapValues:i,intensityValues:s}),this.Wp.xs(),this}setCullMode(t){return this.Ka.OS("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.Ka.NS()}wv(){}Ee(){}Fp(){}fv(){return this.yv&&this.getVisible()}Ve(t,i){t.cs(i),this.Wp.xs()}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe})}}const tu=t=>!!(t&&"object"==typeof t&&"id"in t&&"chart"in t&&t.chart instanceof nu),iu=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y&&"z"in t&&"number"==typeof t.z);class su extends Vl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.ws="Mesh Model 3D",this.WS=new Float32Array,this.ft={x:1,y:1,z:1},this.YS={x:0,y:0,z:0},this.HS={x:0,y:0,z:0},this.XS={x:0,y:0,z:0},this.$S={w:1,x:0,y:0,z:0},this.jS={x:0,y:0,z:0},this.sl=ns,this.Kd=()=>Di(this.getFillStyle());const n=void 0!==(null==h?void 0:h.automaticColorIndex)?h.automaticColorIndex:this.chart.getSeries().length;this.Ka=this.Wp.ZS()._v(this.mv).Le(Ri(this.qi.meshModel3DFillStyle||this.qi.pointSeriesFillStyle,n)).cs(this.getHighlight()),this.fs(this.Ka)}Ji(t,i){const s=this.getFillStyle();return qi({series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:Z(s)?s.lut:void 0},{cursorPosition:0,index:0,x:0,y:0,z:0,value:0},(()=>{const e=this.Ka.QS(t,i);if(e)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.Mg,axisLocation:e.coordAxis},...e.coordAxis,index:e.index,value:e.value,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:Z(s)?s.lut:void 0}}))}setModelGeometry(t){const{indices:i,vertices:s,normals:e}=t;let h=hs,r=es,n=hs,o=es,a=hs,l=es;for(let t=0;t<s.length;t+=3){const i=s[t],e=s[t+1],u=s[t+2];h=Math.max(h,i),r=Math.min(r,i),n=Math.max(n,e),o=Math.min(o,e),a=Math.max(a,u),l=Math.min(l,u)}this.sl={min:{x:r,y:o,z:l},max:{x:h,y:n,z:a}};for(let t=0;t<s.length;t+=3)s[t]-=this.sl.min.x,s[t+1]-=this.sl.min.y,s[t+2]-=this.sl.min.z;return this.jS={x:this.sl.max.x-this.sl.min.x,y:this.sl.max.y-this.sl.min.y,z:this.sl.max.z-this.sl.min.z},this.WS=s instanceof Float32Array?s:new Float32Array(s),this.checkedNormals=e&&!Number.isNaN(e[0])?e instanceof Float32Array?e:new Float32Array(e):void 0,this.checkedNormals||this.setColorShadingStyle(kn),this.Ka.JS({vertices:this.WS,normals:this.checkedNormals,indices:i instanceof Uint16Array?i:new Uint16Array(i),modelSize:this.jS}),this.chart.us.xs(),this}setVertexValues(t){return this.Ka.KS(t),this.chart.us.xs(),this}setScale(t){const i={x:"number"==typeof t?t:(null==t?void 0:t.x)||1,y:"number"==typeof t?t:(null==t?void 0:t.y)||1,z:"number"==typeof t?t:(null==t?void 0:t.z)||1};return this.ft=i,this.Ka.qS(i),this.chart.us.xs(),this}getScale(){return this.ft}setModelLocation(t){return this.HS=t,this.Ka.tb(t),this.chart.us.xs(),this}getModelLocation(){return this.HS}setModelAlignment(t){return this.YS=t,this.Ka.ib(t),this.chart.us.xs(),this}getModelAlignment(){return this.YS}setModelRotation(t){return this.setModelRotationEuler(t)}getModelRotation(){return this.XS}setModelRotationEuler(t){const i={x:Vs(t.x),y:Vs(t.y),z:Vs(t.z)};return this.XS=i,this.Ka.sb(this.XS),this.chart.us.xs(),this}getModelRotationEuler(){return this.XS}setModelRotationQuaternion(t){return this.$S=t,this.Ka.eb(this.$S),this.chart.us.xs(),this}getModelRotationQuaternion(){return this.$S}setBackfaceCullingMode(t){return this.Ka.hb(t),this.chart.us.xs(),this}getBackfaceCullingMode(){return this.Ka.rb()}setFillStyle(t){return this.Ka.Le(t),this.chart.us.xs(),this}getFillStyle(){return this.Ka.Qh()}setColorShadingStyle(t){return this.checkedNormals||t!==In?super.setColorShadingStyle(t):(console.warn("Phong shading style is not supported without normals. Switching to Simple shading style."),super.setColorShadingStyle(new Pn.Simple))}fv(){return!1}Ve(t,i){t.cs(i),this.chart.us.xs()}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.getFillStyle()})}}class eu extends Ka{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r),this.chart=n,this.nb=this.chart.getDefaultAxisX().addCustomTick().setVisible(!1).setGridStrokeStyle(r.cursor3DGridStrokeStyleX).setTickStyle(r.cursor3DTickStrokeStyleX).setTextFillStyle(r.cursor3DTickLabelFillStyleX).setTextFont(r.cursor3DTickLabelFontX).setBackgroundFillStyle(r.cursor3DTickLabelBackgroundFillStyleX).setBackgroundStrokeStyle(r.cursor3DTickLabelBackgroundStrokeStyleX).setPadding(r.cursor3DTickLabelPaddingX),this.ob=this.chart.getDefaultAxisY().addCustomTick().setVisible(!1).setGridStrokeStyle(r.cursor3DGridStrokeStyleY).setTickStyle(r.cursor3DTickStrokeStyleY).setTextFillStyle(r.cursor3DTickLabelFillStyleY).setTextFont(r.cursor3DTickLabelFontY).setBackgroundFillStyle(r.cursor3DTickLabelBackgroundFillStyleY).setBackgroundStrokeStyle(r.cursor3DTickLabelBackgroundStrokeStyleY).setPadding(r.cursor3DTickLabelPaddingY),this.ab=this.chart.getDefaultAxisZ().addCustomTick().setVisible(!1).setGridStrokeStyle(r.cursor3DGridStrokeStyleZ).setTickStyle(r.cursor3DTickStrokeStyleZ).setTextFillStyle(r.cursor3DTickLabelFillStyleZ).setTextFont(r.cursor3DTickLabelFontZ).setBackgroundFillStyle(r.cursor3DTickLabelBackgroundFillStyleZ).setBackgroundStrokeStyle(r.cursor3DTickLabelBackgroundStrokeStyleZ).setPadding(r.cursor3DTickLabelPaddingZ)}setTickX(t){return t(this.nb),this.chart.us.xs(),this}setTickY(t){return t(this.ob),this.chart.us.xs(),this}setTickZ(t){return t(this.ab),this.chart.us.xs(),this}setTicks(t){return t(this.nb),t(this.ob),t(this.ab),this.chart.us.xs(),this}dispose(){return super.dispose(),this.nb.dispose(),this.ob.dispose(),this.ab.dispose(),this}Ee(){return this.nb.setVisible(this.ji&&this.yy),this.ob.setVisible(this.ji&&this.yy),this.ab.setVisible(this.ji&&this.yy),super.Ee()}setPosition(t){this.yy=!0;const i=this.renderingScale,s=La(t.resultTableScale,i),e=s===this.scale?t.resultTable:pt(t.resultTable,s,this.scale);this.tm.setPosition(e),this.nb.setValue(t.axisLocation.x),this.ob.setValue(t.axisLocation.y),this.ab.setValue(t.axisLocation.z);let h=this.Am[0];if(!h){const t=new eo(this.Ls,this.renderingScale,this.scale,Zt,this.qi).setMouseInteractions(!1).setFillStyle(this.qi.cursorPointMarkerFillStyle).setSize(this.qi.cursorPointMarkerSize).setShape(this.qi.cursorPointMarkerShape);h={pointMarker:t,targetVisible:!0},this.Am.push(h),this.pm.forEach((i=>i(t)))}return h.pointMarker.setPosition(e),this.chart.us.xs(),this}}class hu{constructor(t,i){this.Mm=[],this._m=(t,i)=>(this.Mm.forEach((s=>s(t,i))),t),this.addStyler=t=>new hu(this.Sm,this.Mm.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new hu(t,this.Mm.map((t=>t))),this.wm=(t,i,s,e,h,r)=>this._m(new eu(t,i,s,e,this.Sm,h,r),h),this.Sm=t,this.Mm=i}}const ru=new hu(qn,[(t,i)=>{qa(t)}]);class nu extends $l{constructor(t,i,s,e,h,r,o){var a;super(t,i,s,i.zy("chart3D bg",0),e,i.us.qi.chart3DBackgroundFillStyle,i.us.qi.chart3DBackgroundStrokeStyle,i.us.qi.chart3DTitleFont,i.us.qi.chart3DTitleFillStyle,r),this.lb=1,this.ub=[],this.cb=2,this.fb=!0,this.Ab=!0,this.gb=!0,this.yb=0,this.coordsAxis={id:"axes",chart:this},this.coordsWorld={id:"world",chart:this},this.pn=[],this.Cn=()=>{const t=this.Wp.mb();this.vb.pb(t),this.Sb.pb(t);const i=this.bb.viewportChanged(this.xb());i&&this.Mb(i),this.us.xs()},this._b=!1,this.vv=(t,i,s,e,h)=>{if(this._b=!0,this.gb){const t=h;this.ub.push({type:"rotate",rotation:t}),this.us.xs(),mi(i)}},this.Sv=(t,i,s,e,h)=>{this._b=!1},this.pv=(t,i)=>{if(this.Ab){if(this.fb)Math.sign(this.yb)!==Math.sign(i.deltaY)?this.yb=Ei(i):this.yb+=Ei(i);else{const t=Ei(i);this.ub.push({type:"wheel-zoom",deltaY:t})}this.us.xs(),mi(i)}},this.us.Qn(Yo.Mf),this.wh.vr("Chart3D"),this.wb=s.d3(),this.wb.x.K(-1,1),this.wb.y.K(-1,1),this.wb.z.K(-1,1),this.Wp=i.Cb("chart3D layer3D",0,this.wb),this.vb=i.kb("chart3D series bg",0),this.Sb=i.ip("chart3D axis ui",1),this.Tb={x:new Dl(this,(a=()=>this.Nv,{...Rl(a,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.Br().x)),zp:t=>t.x,nv:(t,i)=>({x:t.x,y:i.y,z:i.z}),lf:l(0,-1,0),ov:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:l(0,i.y,i.z),gridlinePositionB:l(0,i.y,-i.z),gridlinePositionC:l(0,-i.y,-i.z)}},uv:()=>!0,cv:()=>!1,rv:()=>!1}),this.wb.x,this.qi,this.Wp,this.Sb,this.Mg,!1,this.es),y:new Dl(this,El((()=>this.Nv)),this.wb.y,this.qi,this.Wp,this.Sb,this.Mg,!1,this.es),z:new Dl(this,zl((()=>this.Nv)),this.wb.z,this.qi,this.Wp,this.Sb,this.Mg,!1,this.es)},this.Fb=this.Wp.Ap([xl.InternalUI]).setMouseInteractions(!1),this.setBoundingBoxStrokeStyle(this.qi.chart3DBoundingBoxStrokeStyle),this.Hv=this.vb.dc(this.us.ft,Or.Simple).Le(this.qi.chart3DSeriesBackgroundFillStyle).Be(dt).setMouseInteractions(!0),this.Xv=this.vb.dc(this.us.ft,Or.Simple).Le(O).Be(this.qi.chart3DSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.Yv(this.Hv,this.Xv),this.Ib({x:1,y:1,z:1},!0),this.bb=new Zl(this.us.ft,this.Mg,this.wb,((t,i)=>(i&&this.Mb(i),this.Wp.ev(t)))),this.Pb=this.bb.getDefaultCameraConfiguration(this.Db(this.Bb),this.getProjection()),this.Mb(this.Pb);const u=qt(o?o.cursorBuilder:void 0,ru),c=i.ep();let d;this.hp=Ya(this,c,u.wm(c,this.Mg,this.Mg,Zt,this.qi,this),this,"show-pointed",ou,(()=>0)),this.bv=ve(new xe(((t,i,s)=>{d={locationOne:i,locationTwo:s,cameraLocation:this.Wp.getCameraLocation()}}),((t,i,s,e,h,r)=>{if(!this.gb&&!this.Ab)return;const o=(d.locationOne.x-d.locationTwo.x)**2+(d.locationOne.y-d.locationTwo.y)**2,a=(i.x-s.x)**2+(i.y-s.y)**2,l=ss.length(d.cameraLocation),u=o/a*l,c=n((e.x+h.x)/2,(e.y+h.y)/2);this.ub.push({type:"rotate+zoom",rotation:this.gb?c:{x:0,y:0},cameraDistance:this.Ab?u:l}),this.us.xs(),mi(r)}),(t=>{})),new be((t=>{}),((t,i,s,e,h)=>{if(this.gb){const t=e;this.ub.push({type:"rotate",rotation:t}),this.us.xs(),mi(h)}}),(t=>{}))),this.onBackgroundTouchStart(this.bv.onTouchStart),this.onBackgroundTouchMove(this.bv.onTouchMove),this.onBackgroundTouchEnd(this.bv.onTouchEnd),this.onSeriesBackgroundTouchStart(this.bv.onTouchStart),this.onSeriesBackgroundTouchMove(this.bv.onTouchMove),this.onSeriesBackgroundTouchEnd(this.bv.onTouchEnd),this.onBackgroundMouseDrag(this.vv),this.onBackgroundMouseDragStop(this.Sv),this.onBackgroundMouseWheel(this.pv),this.onBackgroundMouseDown(((t,i)=>{mi(i)})),this.onSeriesBackgroundMouseDrag(this.vv),this.onSeriesBackgroundMouseDragStop(this.Sv),this.onSeriesBackgroundMouseWheel(this.pv),this.onSeriesBackgroundMouseDown(((t,i)=>{mi(i)})),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled)),this.onResize(this.Cn),this.Cn(),this.Ey(h,this.Mg)}setProjection(t){this.Wp.Lb(t);const i=this.bb.projectionChanged(this.xb(),t);return i&&this.Mb(i),this.us.xs(),this}getProjection(){return this.Wp.Rb()}setCursor(t){return this.hp.setCursor(t),this}getCursor(){return this.hp.getCursor()}setCursorMode(t){return this.hp.setCursorMode(t),this}getCursorMode(){return this.hp.getCursorMode()}setCustomCursor(t){return this.hp.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.hp.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.hp.offCursorTargetChanged(t)}setCursorFormatting(t){return this.hp.setCursorFormatting(t),this}getCursorFormatting(){return this.hp.getCursorFormatting()}addCursor(t=ru){const i=this.wy(),s=t.wm(i,this.Mg,this.Mg,this.Sy(i),this.qi,this);return this.By(s),s}addPointSeries(t){const i=new(t&&t.type||Yl)(this,this.Uv,this.Wp,this.qi,this.us.es,t);return this.$v(i),i}addLineSeries(t){const i=new Gl(this,this.Uv,this.Wp,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,this.us.es);return this.$v(i),i}addPointLineSeries(t){const i=new Ul(this,this.Uv,this.Wp,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,this.us.es);return this.$v(i),i}addSurfaceGridSeries(t){const i=new Kl(this,this.Uv,this.Wp,t,this.qi,this.us.es);return this.$v(i),i}addSurfaceScrollingGridSeries(t){const i=new ql(this,this.Uv,this.Wp,t,this.qi,this.us.es);return this.$v(i),i}addBoxSeries(t){const i=new Ol(this,this.Uv,this.Wp,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,this.us.es);return this.$v(i),i}addMeshModel(t){const i=new su(this,this.Uv,this.Wp,this.qi,t,this.us.es);return this.$v(i),i}translateCoordinate(t,i,s){if(tu(i)||tu(s)||iu(t)){if(tu(i)&&tu(s)&&iu(t)){if("axes"===i.id&&"world"===s.id)return this.Wp.Eb(t);if("world"===i.id&&"axes"===s.id)return this.Wp.zb(t);if(i.id===s.id)return t}if(tu(i)&&ne(s)&&iu(t)){const i=this.Wp.ev(t);return i?this.us.Uo({engineX:i.x,engineY:i.y}):{clientX:-1,clientY:-1}}if(tu(i)&&ae(s)&&iu(t)){const i=this.Wp.ev(t);return i?pt(i,this.us.ft,this.Mg):{clientX:-1,clientY:-1}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}return Ra(t,i,s,this.Mg,this.us)}getDefaultAxisX(){return this.Tb.x}getDefaultAxisY(){return this.Tb.y}getDefaultAxisZ(){return this.Tb.z}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}get axisZ(){return this.getDefaultAxisZ()}get zAxis(){return this.getDefaultAxisZ()}getDefaultAxes(){return[this.Tb.x,this.Tb.y,this.Tb.z]}setCameraLocation(t){let i={location:t,direction:ss.normalize(ss.multiply(t,-1))};const s=this.bb.cameraLocationChanged(this.xb(i));return s&&(i=s),this.Mb(i),this.us.xs(),this}getCameraLocation(){return this.Wp.getCameraLocation()}getCameraDirection(){return this.Wp.getCameraDirection()}setCameraAutomaticFittingEnabled(t){this.bb.yS(t);const i=this.bb.cameraLocationChanged(this.xb());return i&&this.Mb(i),this}getCameraAutomaticFittingEnabled(){return this.bb.CS()}onCameraChange(t){return this.L.on("cameraChange",t)}offCameraChange(t){return this.L.off(t,"cameraChange")}setBoundingBoxStrokeStyle(t){return this.Fb.We(t).jp(kl(this.Fb.Su())),this.Wp.xs(),this}getBoundingBoxStrokeStyle(){return this.Fb.Su()}setBoundingBox(t){return this.Ib(t,!1),this}Ib(t,i){this.Bb=t;const s=this.Db(t);if(this.wb.x.tt(s.x),this.wb.y.tt(s.y),this.wb.z.tt(-s.z),!i){const t=this.bb.boundingBoxChanged(this.xb());t&&this.Mb(t)}this.us.xs()}getBoundingBox(){return this.Bb}Ee(t){if(Ga.Hy(this.wh,this.Vy),0!==this.yb){const i=this.yb*t*.006;this.ub.push({type:"wheel-zoom",deltaY:i}),this.yb=Math.sign(this.yb)*Math.max(Math.abs(this.yb)-.01*t,0),0!==this.yb&&this.us.xs(!0)}const i=this.getCameraDirection();if(this.ub.length>0){const t=this.bb.applyCameraInteractions(this.xb(),this.ub);t&&this.Mb(t),this.ub.length=0}this.Vb&&ss.equals(this.Vb.location,this.Pb.location)&&ss.equals(this.Vb.direction,this.Pb.direction)||this.L.emit("cameraChange",this,this.getCameraLocation()),this.Vb=this.Pb,super.Ee(t);for(let t=0;t<this.Nv.length;t+=1)this.Nv[t].wv();for(let t=0;t<this.Nv.length;t+=1)this.Nv[t].Ee();this.Tb.x.Lr(),this.Tb.y.Lr(),this.Tb.z.Lr(),this.Tb.x.Ee(i),this.Tb.y.Ee(i),this.Tb.z.Ee(i),this.hp.Ee(this._b,this.Nv,void 0),super.Ry();const s=this.wb,e=l(s.x.getInnerStart(),s.y.getInnerStart(),s.z.getInnerStart()),h=l(s.x.getInnerEnd(),s.y.getInnerEnd(),s.z.getInnerEnd());this.Fb.Vt().ml([l(h.x,e.y,e.z),l(h.x,h.y,e.z),l(h.x,h.y,h.z),l(h.x,e.y,h.z),l(e.x,e.y,h.z),l(e.x,h.y,h.z),l(h.x,h.y,h.z),l(h.x,h.y,e.z),l(e.x,h.y,e.z),l(e.x,h.y,h.z),l(e.x,e.y,h.z),l(e.x,e.y,e.z)]);const r=[l(e.x,e.y,e.z),l(h.x,e.y,e.z),l(e.x,h.y,e.z),l(h.x,h.y,e.z),l(e.x,e.y,h.z),l(h.x,e.y,h.z),l(e.x,h.y,h.z),l(h.x,h.y,h.z)].map((t=>this.Wp.ev(t))),n=this.Wp.ev(l((e.x+h.x)/2,(e.y+h.y)/2,(e.z+h.z)/2)),o=Ci(r,n),a=[];for(let t=0;t<o.length;t+=1){const i=o[t];Ms(i,n,o[t>0?t-1:o.length-1],o[t<o.length-1?t+1:0])||a.push(i)}const u=Ci(a,n);this.Hv.Tl(u),this.Xv.Tl(u);for(let t=0;t<this.Nv.length;t+=1)this.Nv[t].Fp()}dispose(){return this.pn.forEach((t=>{t()})),this.pn.length=0,this.wb.W(),this.Wp.W(),this.Sb.W(),this.vb.W(),this.hp.W(),super.dispose()}Z(){return this.wb.x.Z(),this.wb.y.Z(),this.wb.z.Z(),super.Z()}J(){return super.J()}Mb(t){this.Wp.setCameraLocation(t.location).setCameraDirection(t.direction).setLightLocation(ss.addVec(t.location,ss.multiply(t.direction,-this.cb))),this.Pb=t,this.us.xs()}Db(t){return ss.divide(t,ss.length(t)/this.lb)}xb(t=this.Pb){return{boundingBox:this.Db(this.Bb),cameraLocation:t.location,cameraDirection:t.direction,projection:this.getProjection()}}setMouseInteractions(t){return this.setMouseInteractionZoom(t).setMouseInteractionRotate(t)}setMouseInteractionZoom(t){return this.Ab=t,this}getMouseInteractionZoom(){return this.Ab}setMouseInteractionRotate(t){return this.gb=t,this}getMouseInteractionRotate(){return this.gb}forEachAxis(t){return t(this.Tb.x),t(this.Tb.y),t(this.Tb.z),this}getSeries(){return this.Nv}getMinimumSize(){}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationZoom(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}setAnimationZoom(t){return this.fb=!!t,this}getAnimationZoom(){return this.fb}}const ou=(t,i,s)=>{var e,h;return wt(i)?Wa(i,[[i.series],[t.getDefaultAxisX().getTitle()||"X","",{text:ce(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:ce(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],[t.getDefaultAxisZ().getTitle()||"Z","",{text:ce(i.axisZ.formatValue(i.z),i.axisZ),font:{weight:"bold"}}],void 0!==i.intensity?["Value","",{text:ce(i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]:[]]):Tt(i)?Wa(i,[[i.series],void 0!==i.value?["Value","",{text:ce(i.value.toFixed(2),null===(h=i.lut)||void 0===h?void 0:h.units),font:{weight:"bold"}}]:[]]):Wa(i,[[i.series],[t.getDefaultAxisX().getTitle()||"X","",{text:ce(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:ce(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],[t.getDefaultAxisZ().getTitle()||"Z","",{text:ce(i.axisZ.formatValue(i.z),i.axisZ),font:{weight:"bold"}}]])},au={Column:Ao,Row:go};class lu extends Va{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.Ob=new Map,this.Nb=this.addUIElement(au.Row).setPosition({x:0,y:100}).setOrigin(qe.LeftTop).setBackground((t=>t.setFillStyle(O).setStrokeStyle(dt)))}add(t,i){return(t instanceof Na?[t]:t instanceof YA?t.getCells().filter((t=>t.panel instanceof Na)).map((t=>t.panel)):[]).forEach((t=>{const s=this.Nb.addElement(Wo.VerticalLegendBox).setBackground((t=>t.setFillStyle(O).setStrokeStyle(dt))).add(t,i).setTitle(t.getTitle());this.Ob.set(t,s)})),this.us.xs(),this}setLegendBoxes(t){return this.Ob.forEach(((i,s)=>t(i,s))),this}getMinimumSize(){return super.getMinimumSize()||this.Nb.getSize()}}const uu={World:"World",USA:"USA",NorthAmerica:"NorthAmerica",SouthAmerica:"SouthAmerica",Canada:"Canada",Europe:"Europe",Asia:"Asia",Africa:"Africa",Australia:"Australia"},cu=(t,i)=>!(!i.name||t.name.toLowerCase()!==i.name.toLowerCase())||"ISO_A3"in t&&"ISO_A3"in i&&t.ISO_A3.toLowerCase()===i.ISO_A3.toLowerCase(),du=(t,i)=>{let s=i.geometry;return s=fu(t,i,s),s=Au(t,i,s),s},fu=(t,i,s)=>{if(t===uu.Asia){const t=[];for(let i=0;i<s.length;i+=1){t[i]=[];const e=s[i],h=t[i];for(let t=0;t<e.length;t+=1){const i=e[t];i.x<-100?h[t]={x:i.x+360,y:i.y}:h[t]=i}}return t}return s},Au=(t,i,s)=>{const e=i.name.toLowerCase();let h;if(t===uu.USA&&("alaska"===e?h={translate:{x:55,y:-25},scale:{x:.16,y:.16}}:"hawaii"===e&&(h={translate:{x:48,y:7},scale:{x:1,y:1}})),h){const{translate:t,scale:r}=h,n=vs(Kt(s)),o=[];for(let i=0;i<s.length;i+=1){o[i]=[];const h=s[i],a=o[i];for(let i=0;i<h.length;i+=1){const s=h[i];let o=s.x;"alaska"===e&&1===Math.sign(o)&&(o=-180-(180-o)),a[i]={x:t.x+(o-n.min.x)*r.x+n.min.x,y:t.y+(s.y-n.min.y)*r.y+n.min.y}}}return i.outlier=!0,i.transform={...h,vertexBoundaries:n},o}return s},gu={World:{min:{x:-180,y:-90},max:{x:180.0000000000002,y:83.63410065300012}},Europe:{min:{x:-25,y:34},max:{x:40,y:70}},Africa:{min:{x:-17,y:-40},max:{x:52,y:37.37549753800012}},Asia:{min:{x:27,y:-10.922621351999808},max:{x:180.0000000000002,y:81.85871002800009}},NorthAmerica:{min:{x:-179.1435033839999,y:5.515082098000121},max:{x:-50,y:83.11652252800009}},SouthAmerica:{min:{x:-85,y:-55.9185042229998},max:{x:-35,y:15}},USA:{min:{x:-125,y:24},max:{x:-68,y:50}},Canada:{min:{x:-141.0181,y:41.7297},max:{x:-52.6194,y:75}},Australia:{min:{x:111,y:-43.6586},max:{x:155,y:-9.2199}}},yu={World:.6,Europe:1/1.4,Africa:1.3,Asia:.8,NorthAmerica:.9,SouthAmerica:1.5,USA:3/4,Canada:6/8,Australia:11/12};class mu extends Na{constructor(t,i,s,e,h,r,n){super(t,i,s,i.zy("mapChart bg",0),e,i.us.qi.mapChartBackgroundFillStyle,i.us.qi.mapChartBackgroundStrokeStyle,i.us.qi.mapChartTitleFont,i.us.qi.mapChartTitleFillStyle,n),this.Gb=[],this.ft=this.xy.d2({scaleXYConstructor:ee}),this.Hi=!0,this.Ub=this.qi.mapChartSeparateRegionFillStyle,this.Wb=this.qi.mapChartSeparateRegionStrokeStyle,this.gh=!0,this.Yb=0,this.Hb=!0,this.Xb=new Map,this.onMouseEnter=t=>this.L.on("mouseEnter",t),this.onMouseLeave=t=>this.L.on("mouseLeave",t),this.onMouseClick=t=>this.L.on("mouseClick",t),this.onMouseDoubleClick=t=>this.L.on("mouseDoubleClick",t),this.onMouseDown=t=>this.L.on("mouseDown",t),this.onMouseUp=t=>this.L.on("mouseUp",t),this.onMouseMove=t=>this.L.on("mouseMove",t),this.offMouseEnter=t=>this.L.off(t,"mouseEnter"),this.offMouseLeave=t=>this.L.off(t,"mouseLeave"),this.offMouseClick=t=>this.L.off(t,"mouseClick"),this.offMouseDoubleClick=t=>this.L.off(t,"mouseDoubleClick"),this.offMouseDown=t=>this.L.off(t,"mouseDown"),this.offMouseUp=t=>this.L.off(t,"mouseUp"),this.offMouseMove=t=>this.L.off(t,"mouseMove"),this.offMouseDragStart=t=>this.L.off(t,"mouseDragStart"),this.offMouseDrag=t=>this.L.off(t,"mouseDrag"),this.offMouseDragStop=t=>this.L.off(t,"mouseDragStop"),this.offMouseWheel=t=>this.L.off(t,"mouseWheel"),this.onMapDataReady=t=>{const i=this.L.on("mapDataReady",t);return this.$b&&Yt.setTimeout((()=>t())),i},this.onViewChange=t=>this.L.on("viewChange",t),this.jb=(t,i,s,e,h)=>{this.ft.x.tt(e).ii([this.Xt.left+this.Fa.left,this.Xt.right+this.Fa.right]),this.ft.y.tt(h).ii([this.Xt.bottom+this.Fa.bottom,this.Xt.top+this.Fa.top+Ga.Yy(this.wh,this.Vy)]),this.Zb&&this.Qb(this.Jb,this.ft,this.Zb)},this.Mt=(t,i)=>{const s=i;if(!s||!this.$b)return;const e=this.Kb(this.$b,s),h=null==e?void 0:e.region;h&&(this.getCursorMode()&&(this.qb(e),mi(t)),this.Hb&&this.us.ls.Cs(h,!0),this.tx=h,this.L.emit("mouseEnter",this,t,e))},this._t=(t,i)=>{const s=i;if(!s||!this.$b)return;const e=this.Kb(this.$b,s),h=null==e?void 0:e.region;this.ix(),h&&(this.Hb&&this.us.ls.Cs(h,!1),this.tx=void 0,this.L.emit("mouseLeave",this,t,e),t&&mi(t))},this.Ft=(t,i)=>{const s=i;if(!s||!this.$b)return;const e=this.Kb(this.$b,s),h=null==e?void 0:e.region;h&&(this.getCursorMode()&&(this.qb(e),mi(t)),this.tx=h,this.L.emit("mouseMove",this,t,e))},this.wt=(t,i)=>{const s=i;if(!s||!this.$b)return;const e=this.Kb(this.$b,s);this.L.emit("mouseClick",this,t,e)},this.Ct=(t,i)=>{const s=i;if(!s||!this.$b)return;const e=this.Kb(this.$b,s);this.L.emit("mouseDoubleClick",this,t,e)},this.kt=(t,i)=>{const s=i;if(!s||!this.$b)return;const e=this.Kb(this.$b,s);this.L.emit("mouseDown",this,t,e)},this.Tt=(t,i)=>{const s=i;if(!s||!this.$b)return;const e=this.Kb(this.$b,s);this.L.emit("mouseUp",this,t,e)},this.Pt=(t,i,s)=>{const e=s;if(!e||!this.$b)return;const h=this.Kb(this.$b,e);this.L.emit("mouseDragStart",this,t,i,h)},this.It=(t,i,s,e,h)=>{const r=h;if(!r||!this.$b)return;const n=this.Kb(this.$b,r);this.L.emit("mouseDrag",this,t,i,s,e,n)},this.Dt=(t,i,s,e)=>{const h=e;if(!h||!this.$b)return;const r=this.Kb(this.$b,h);this.L.emit("mouseDragStop",this,t,i,s,r)},this.Bt=(t,i)=>{const s=i;if(!s||!this.$b)return;const e=this.Kb(this.$b,s);this.L.emit("mouseWheel",this,t,e)},this.Lt=(t,i)=>{const s=i;if(!s||!this.$b)return;const e=this.Kb(this.$b,s),h=null==e?void 0:e.region;h&&(this.qb(e),this.Hb&&this.us.ls.Cs(h,!0),this.tx=h,this.L.emit("touchStart",this,t,e),mi(t))},this.Rt=(t,i)=>{const s=i;if(!s||!this.$b)return;const e=this.Kb(this.$b,s),h=null==e?void 0:e.region;h&&(this.qb(e),this.tx=h,this.L.emit("touchMove",this,t,e),mi(t))},this.Et=(t,i)=>{const s=i;if(!s||!this.$b)return;const e=this.Kb(this.$b,s),h=null==e?void 0:e.region;this.ix(),h&&(this.Hb&&this.us.ls.Cs(h,!1),this.tx=void 0,this.L.emit("touchEnd",this,t,e),mi(t))},this.us.Qn(Yo.wf),this.gh=!1!==(null==r?void 0:r.animationsEnabled),this.sx=i.ip("mapChart plotting",0),this.onResize(this.jb),this.wh.vr("Map Chart");const o=i.ep(),a=qt(r?r.cursorBuilder:void 0,al);this.hp=Ya(this,o,a.wm(o,this.uiScale,this.uiScale,Zt,this.qi),void 0,"show-pointed",vu,(()=>0)),this.hx=this.es.Dg(),this.Ey(h,this.uiScale),this.nx=this.sx.Jp(this.ft).setMouseInteractions(this.Hi).setMouseEnterEventHandler(((t,i,s)=>this.Mt(i,s))).setMouseLeaveEventHandler(((t,i,s)=>this._t(i,s))).setMouseClickEventHandler(((t,i,s)=>this.wt(i,s))).setMouseDoubleClickEventHandler(((t,i,s)=>this.Ct(i,s))).setMouseDownEventHandler(((t,i,s)=>this.kt(i,s))).setMouseUpEventHandler(((t,i,s)=>this.Tt(i,s))).setMouseMoveEventHandler(((t,i,s)=>this.Ft(i,s))).setMouseDragStartEventHandler(((t,i,s,e)=>this.Pt(i,s,e))).setMouseDragEventHandler(((t,i,s,e,h,r)=>this.It(i,s,e,h,r))).setMouseDragStopEventHandler(((t,i,s,e,h)=>this.Dt(i,s,e,h))).setMouseWheelEventHandler(((t,i,s)=>this.Bt(i,s))).setTouchStartEventHandler(((t,i,s)=>this.Lt(i,s))).setTouchMoveEventHandler(((t,i,s)=>this.Rt(i,s))).setTouchEndEventHandler(((t,i,s)=>this.Et(i,s))).Le(this.qi.mapChartFillStyle).Be(this.qi.mapChartStrokeStyle),this.ox=this.sx.Jp(this.ft).setMouseInteractions(this.Hi).Le(this.qi.mapChartOutlierRegionFillStyle).Be(this.qi.mapChartOutlierRegionStrokeStyle);const l=qt(r&&r.type,uu.World);this.Jb=l,this.lx(l).then((()=>{this.L.emit("mapDataReady")}))}getRegionUnderMouse(){return this.tx}setFillStyle(t){return this.nx.Le(t),this.us.xs(),this}getFillStyle(){return this.nx.Qh()}setStrokeStyle(t){return this.nx.Be(t),this.us.xs(),this}getStrokeStyle(){return this.nx.vo()}setEffect(t){return this.hx.bs(t),this.us.xs(),this}getEffect(){return this.hx.Ms()}setOutlierRegionFillStyle(t){return this.ox.Le(t),this.us.xs(),this}getOutlierRegionFillStyle(){return this.ox.Qh()}setOutlierRegionStrokeStyle(t){return this.ox.Be(t),this.us.xs(),this}getOutlierRegionStrokeStyle(){return this.ox.vo()}setSeparateRegionFillStyle(t){return this.Ub="function"==typeof t?t(this.Ub):t,this.Gb.forEach((t=>t.Le(this.Ub))),this.us.xs(),this}getSeparateRegionFillStyle(){return this.Ub}setSeparateRegionStrokeStyle(t){return this.Wb="function"==typeof t?t(this.Wb):t,this.Gb.forEach((t=>t.Be(this.Wb))),this.us.xs(),this}getSeparateRegionStrokeStyle(){return this.Wb}invalidateRegionValues(t){if(!this.$b||!this.ux)return this.Ax=this.Ax||[],this.Ax.push(t),this;if("function"==typeof t)for(let i=0;i<this.$b.regions.length;i+=1){const s=this.$b.regions[i],e=this.ux[i],h=t({...s,geometry:void 0},e);if(void 0!==h&&h!==e){this.ux[i]=h;const t=this.Xb.get(s);null==t||t.forEach((t=>{t.gx(h)}))}}else for(const i of t)if(i)for(let t=0;t<this.$b.regions.length;t+=1){const s=this.$b.regions[t],e=this.ux[t];if(void 0!==i.value&&i.value!==e&&cu(s,i)){this.ux[t]=i.value;const e=this.Xb.get(s);null==e||e.forEach((t=>{t.gx(i.value)}))}}return this.us.xs(),this}onMouseDragStart(t){return this.L.on("mouseDragStart",t)}onMouseDrag(t){return this.L.on("mouseDrag",t)}onMouseDragStop(t){return this.L.on("mouseDragStop",t)}onMouseWheel(t){return this.L.on("mouseWheel",t)}onTouchStart(t){return this.L.on("touchStart",t)}onTouchMove(t){return this.L.on("touchMove",t)}onTouchEnd(t){return this.L.on("touchEnd",t)}offTouchStart(t){return this.L.off(t,"touchStart")}offTouchMove(t){return this.L.off(t,"touchMove")}offTouchEnd(t){return this.L.off(t,"touchEnd")}setMouseInteractions(t){return this.Hi=t,this.nx.setMouseInteractions(t),this}getMouseInteractions(){return this.Hi}setHighlight(t){var i;return t=Ui(t),this.Yb=t,null===(i=this.$b)||void 0===i||i.regions.forEach((i=>{this.us.ls.Cs(i,t)})),this.L.emit("highlight",this,t),this}getHighlight(){return this.Yb}setAnimationHighlight(t){var i;return null===(i=this.$b)||void 0===i||i.regions.forEach((i=>{this.us.ls.ks(i,t)})),this}getAnimationHighlight(){var t;return this.us.ls.Ts(null===(t=this.$b)||void 0===t?void 0:t.regions[0])}setHighlightOnHover(t){return this.Hb=t,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Hb}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}offMapDataReady(t){return this.L.off(t,"mapDataReady")}offViewChange(t){return this.L.off(t,"viewChange")}async lx(t){const i=await((t,i)=>{let s;if(t===uu.World)s="countries_world.json";else if(t===uu.NorthAmerica)s="countries_northAmerica.json";else if(t===uu.SouthAmerica)s="countries_southAmerica.json";else if(t===uu.Africa)s="countries_africa.json";else if(t===uu.Europe)s="countries_europe.json";else if(t===uu.Asia)s="countries_asia.json";else if(t===uu.USA)s="states_usa.json";else if(t===uu.Canada)s="territoriesProvinces_canada.json";else{if(t!==uu.Australia){const i=`LCJS MapChart unidentified \`type\`: ${t}`;throw Yt.alert(i),new Error(i)}s="territories_australia.json"}return new Promise(((t,e)=>{(t=>{if(t.resourcesBaseUrl){const i=`${t.resourcesBaseUrl}${t.fileName}`;return void Yt.fetch(i).then((i=>{t.success(i)})).catch((()=>{t.error({url:i})}))}const i=`${Yt.location.origin}/resources${t.fileName}`;Yt.fetch(i).then((i=>{if(!i.ok)throw new Error;t.success(i)})).catch((()=>{const s=`https://lcjs-resources.lightningchart.com/v1${t.fileName}`;Yt.fetch(s).then((i=>{Yt.console.warn("LightningChart JS warning | fallbacking publicly hosted asset resources.\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/warning-using-publicly-hosted-resources/"),t.success(i)})).catch((()=>{t.error({url:i})}))}))})({fileName:`/maps/${s}`,resourcesBaseUrl:i,success:i=>i.json().then(t),error:({url:t})=>$i(i,t,"Map Chart",{shouldCrash:!0})})}))})(t,this.wA.qs);this.ux=new Array(i.regions.length).map((t=>{})).fill(void 0);const s=gu[t];if(!s)throw new Error("Unidentified map type.");for(const t of i.outliers)for(const i of t.geometry)this.ox.jr().Tl(i);if(t===uu.USA){const t=25.8,i=29.7;this.Gb.push(this.vy.Re(this.ft).setMouseInteractions(!1).Le(this.Ub).Be(this.Wb).ze({x:-126,y:t}).tt({x:10,y:i-t}),this.vy.Re(this.ft).setMouseInteractions(!1).Le(this.Ub).Be(this.Wb).ze({x:-113,y:t}).tt({x:7,y:i-t}))}const e=this.us.ls.$r(this.nx,{animationEnabled:this.gh});for(let s=0;s<i.regions.length;s+=1){const h=i.regions[s],r=du(t,h),n=[];for(const t of r)t.length<3||n.push(this.nx.jr().Tl(t));this.Xb.set(h,n),e.jr(h,(t=>{n.forEach((i=>i.cs(t)))}))}if(this.hx.As([this.nx]),this.Zb=s,this.Qb(t,this.ft,s),this.$b=i,this.Ax){for(const t of this.Ax)this.invalidateRegionValues(t);this.Ax=void 0}this.us.xs()}Qb(t,i,s){const e=yu[t],h=i.x.getCellSize(),r=i.y.getCellSize()/h,n={min:{x:s.min.x,y:s.min.y},max:{x:s.max.x,y:s.max.y}};if(r<e){const t=(n.max.x-n.min.x)*(e/r-1);n.min.x-=t/2,n.max.x+=t/2}else if(r>e){const t=(n.max.y-n.min.y)*(r/e-1);n.min.y-=t/2,n.max.y+=t/2}i.x.K(n.min.x,n.max.x),i.y.K(n.min.y,n.max.y);const o=this.ft.x.ai(),a=this.ft.y.ai();this.L.emit("viewChange",{latitudeRange:{start:n.min.y,end:n.max.y},longitudeRange:{start:n.min.x,end:n.max.x},margin:{top:a[1],bottom:a[0],left:o[0],right:o[1]}})}qb(t){this.yx=t,this.us.xs()}ix(){this.yx=void 0,this.us.xs()}Kb(t,i){const s=Array.from(this.Xb.entries()).findIndex((([t,s])=>s.includes(i))),e=null==t?void 0:t.regions[s],h=this.us.jn();if(!h)return;const r=this.us.Go(h),n=this.ux&&this.ux[s];let o=pt({x:r.engineX,y:r.engineY},this.us.ft,this.ft);o={x:Jt(o.x,this.ft.x.getInnerStart(),this.ft.x.getInnerEnd()),y:Jt(o.y,this.ft.y.getInnerStart(),this.ft.y.getInnerEnd())};let a=o.x,l=o.y;const u=e.transform;e.outlier&&u&&(a=(a-u.translate.x-u.vertexBoundaries.min.x)/u.scale.x+u.vertexBoundaries.min.x,l=(l-u.translate.y-u.vertexBoundaries.min.y)/u.scale.y+u.vertexBoundaries.min.y);const c=this.getFillStyle();return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.us.ft,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.us.ft},region:e,value:n,longitude:l,latitude:a,lut:Z(c)?c.lut:void 0}}setCursor(t){return this.hp.setCursor(t),this}getCursor(){return this.hp.getCursor()}setCursorMode(t){return this.hp.setCursorMode(t),this}getCursorMode(){return this.hp.getCursorMode()}setCustomCursor(t){return this.hp.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.hp.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.hp.offCursorTargetChanged(t)}setCursorFormatting(t){return this.hp.setCursorFormatting(t),this}getCursorFormatting(){return this.hp.getCursorFormatting()}addCursor(t=al){const i=this.wy(),s=t.wm(i,this.uiScale,this.uiScale,this.Sy(i),this.qi);return this.By(s),s}setAnimationsEnabled(t){return this.gh=!t,this}getAnimationsEnabled(){return this.gh}getMinimumSize(){}nf(){return[this]}Ee(t){super.Ee(t),super.Ry(),Ga.Hy(this.wh,this.Vy);const i=d(this.ft.x.si(),this.ft.y.si(),this.ft.x.hi(),this.ft.y.hi());return this.sx.pb(i),this.hp.Ee(!1,[],void 0,{explicitTarget:this.yx}),this}dispose(){return this.sx.W(),this.hp.W(),za(this.ft),super.dispose()}Z(){return super.Z(),this.ft.Z(),this}J(){return super.J(),this.ft.J(),this}Kd(){return Di(this.getFillStyle())}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),t.onMouseEnter((()=>{this.setHighlight(!0)})),t.onMouseLeave((()=>{this.setHighlight(!1)})),this.onMouseEnter((()=>t.setHighlight(!0))),this.onMouseLeave((()=>t.setHighlight(!1))),this.onTouchStart((()=>t.setHighlight(!0))),this.onTouchEnd((()=>t.setHighlight(!1))),this.styleLegendEntry(t,s),this}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.getFillStyle()})}}const pu=(t,i)=>{const s=t>0,e=i>0;return`${[Li(Math.abs(0|t),2),"° ",Li(Math.abs(0|(t<0?t=-t:t)%1*60),2),"' "].join("")+(s?"E":"W")}, ${[Li(Math.abs(0|i),2),"° ",Li(Math.abs(0|(i<0?i=-i:i)%1*60),2),"' "].join("")+(e?"N":"S")}`},vu=(t,i,s)=>{var e;const h=[[i.region.name],[pu(i.longitude,i.latitude)]];return void 0!==i.value&&h.push({text:ce(i.value.toFixed(1),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}),h};class Su extends Th{constructor(t,i,s,e,h,r,n,o,a){super(t,i,i.mx(s),e,h,{numeric:i.vx({amplitude:e.polarAmplitudeAxisNumericTicks,radial:e.polarAmplitudeAxisNumericTicks}),datetime:i.vx({amplitude:e.polarAmplitudeAxisDateTimeTicks,radial:e.polarAmplitudeAxisDateTimeTicks}),time:i.vx({amplitude:e.polarAmplitudeAxisTimeTicks,radial:e.polarAmplitudeAxisTimeTicks})},{type:"linear"}),this.Sx=r,this.bx=n,this.xx=o,this.es=a,this.Mx=s,this._x=i.vx({amplitude:e.polarAmplitudeAxisStrokeStyle,radial:e.polarRadialAxisStrokeStyle}),this.Th=o.Ur(s).setMouseInteractions(!1).tr(i.vx({amplitude:e.polarAmplitudeAxisTitleFont,radial:e.polarRadialAxisTitleFont})).Le(i.vx({amplitude:e.polarAmplitudeAxisTitleFillStyle,radial:e.polarRadialAxisTitleFillStyle})),this.er=this.es.Dg([this.Th]).bs(e.effectsText)}setTickStrategy(t,i){return super.Yh(t,i)}setStrokeStyle(t){return this._x="function"==typeof t?t(this._x):t,this.bx.xs(),this}getStrokeStyle(){return this._x}br(t,i){return new bu(i,t,this.Mx,this.xx,this.wx(this.Sx,this.Mx),this.xx.Ye(this.Mx).setMouseInteractions(!1))}Mr(t,i){const s=this.Cx(this.Mx,t);this.kx&&!1===this.kx(t)?t.hh.setVisible(!1):t.hh.setVisible(!0).ze(Is(this.Tx(this.Mx,t.S),s.padding)).ja(s.alignment).ir(s.rotation).Ua(s.offset.x,s.offset.y),this.Fx(this.Mx,t.Ix,t.Px,t)}setMouseInteractions(t){return this}Ee(){this.cr({physicalAxisSize:0});const t=this.Cr(((t,i)=>{const s=i.Rh.$e,e=.5*this._x.getThickness()+s.tickLength+s.tickPadding+Math.abs(i.hh.Vs().nd().y);return Math.max(t,e)}),0);return this.Dx(this.Mx,this._x,t),this.Bx(this.Mx,this.Th,t),t}}class bu extends Fh{constructor(t,i,s,e,h,r,n){super(t,i,e,s,n),this.Ix=h,this.Px=r,h.setMouseInteractions(!1),this.ts.push(h,r)}}class xu extends Su{constructor(t,i,s,e,h,r,n,o,a){super(t,Mu((()=>this.Og())),i,s,e,h,r,n,o),this.$p=this.bx.Ye(this.Mx).setMouseInteractions(!1),this.Lx=a,this.setScrollStrategy(ch.expansion),this.setTickStrategy(dh.Numeric),this.setTitle("Amplitude")}Og(){return this.Lx()}Rr(t,i){return fe(t,i,this.Mx.y)}zr(t,i,s){const e=2*(i-t),h=this.Mx.x.Bi(e);return{min:t-s*h,max:i+s*h}}Tx(t,i){return{x:t.Rx()?i-t.Ex().start:t.Ex().start-i,y:0}}wx(t,i){return t.ld(i)}Fx(t,i,s,e){const h=e.Rh.$e,r=t.Rx()?e.S-t.Ex().start:t.Ex().start-e.S;Qt(e.S,t.Ex().start)||Qt(e.S,t.Ex().end)?i.setVisible(!1):i.setVisible(!0).fu(0).He(360).pu(void 0).mu(0).Au(r).pu(60).Le(O).Be(h.gridStrokeStyle);const n=.5*this._x.getThickness();s.Xe({x:r,y:-n*t.Gi().y}).He({x:r,y:-(n+h.tickLength)*t.Gi().y}).We(h.tickStyle)}Cx(t,i){const s=i.Rh.$e;return{alignment:{x:0,y:1},padding:{x:0,y:t.Gi().y*-(.5*this._x.getThickness()+s.tickLength+s.tickPadding)},rotation:0,offset:{x:0,y:0}}}Dx(t,i,s){const e=t.Rx()?t.Ex().end-t.Ex().start:t.Ex().start-t.Ex().end;this.$p.Xe({x:0,y:0}).He({x:e,y:0}).We(i)}Bx(t,i,s){const e=t.Rx()?(t.Ex().start+t.Ex().end)/2-t.Ex().start:t.Ex().start-(t.Ex().start+t.Ex().end)/2;i.ja({x:0,y:1}).ze({x:e,y:-s*t.Gi().y})}}const Mu=t=>({...Rl(t,(t=>t.getAmplitudeMin()),(t=>t.getAmplitudeMax()),(t=>{})),mx:t=>({getInnerStart:()=>t.Ex().start,getInnerEnd:()=>t.Ex().end,K:(i,s)=>t.zx(i,s),ot:(i,s,e,h,r)=>t.y.ot(i,s,e,h,r)}),vx:t=>t.amplitude});class _u extends Su{constructor(t,i,s,e,h,r,n,o){super(t,Cu,i,s,e,h,r,n,o),this.Vx=90,this.Ox=12,this.Nx=wu,this.$p=this.bx.ld(this.Mx).setMouseInteractions(!1),this.kx=t=>{let i=180*(t.S-this.Mx.Gx())/Math.PI%360;for(;i<0;)i+=360;for(;i>360;)i-=360;if(i>=0&&i<=20||i>=340&&i<=360)return!1},this.dh=void 0,this.setTickStyle(s.polarRadialAxisTickStyle),this.setTitle("Degrees"),this.setNorth(this.Vx)}setTickStyle(t){return this.Ux="function"==typeof t?t(this.Ux):t,this.Wx(),this.bx.xs(),this}getTickStyle(){return this.Ux}setTickFormattingFunction(t){return this.Nx=t,this.Wx(),this.bx.xs(),this}getTickFormattingFunction(){return this.Nx}setClockwise(t){this.Mx.Yx(t);const i=this.Vx*Math.PI/180;return t?this.Mx.Hx(i+Math.PI/2):this.Mx.Hx(i-Math.PI/2),this.bx.xs(),this}getClockwise(){return!this.Mx.Xx()}setNorth(t){for(;t<0;)t+=360;t%=360,this.Vx=t;const i=t*Math.PI/180;return this.getClockwise()?this.Mx.Hx(i+Math.PI/2):this.Mx.Hx(i-Math.PI/2),this.bx.xs(),this}getNorth(){return 180*this.Mx.Gx()/Math.PI}setDivision(t){return this.Ox=t,this.Wx(),this.bx.xs(),this}getDivision(){return this.Ox}Og(){return[]}Rr(t,i){return i}zr(t,i,s){return{min:t,max:i}}Tx(t,i){const s=t.Xx()?1:-1,e=t.Gx(),h=t.Rx()?t.Ex().end-t.Ex().start:t.Ex().start-t.Ex().end;return{x:Math.cos((i-e)*s)*h,y:Math.sin((i-e)*s)*h}}wx(t,i){return t.Ye(i)}Fx(t,i,s,e){const h=this.Ux,r=t.Xx()?1:-1,n=t.Gx(),o=(e.S-n)*r,a=Math.cos(o),l=Math.sin(o),u=t.Rx()?t.Ex().end-t.Ex().start:t.Ex().start-t.Ex().end,c={x:a*u,y:l*u};i.Xe({x:0,y:0}).He(c);const d={x:c.x+a*h.tickLength*t.Gi().x,y:c.y+l*h.tickLength*t.Gi().y};s.Xe(c).He(d),i.We(h.gridStrokeStyle),s.We(h.tickStyle)}Cx(t,i){const s=this.Ux,e=t.Xx()?1:-1,h=t.Gx();let r,n=(i.S-h)*e;for(;n<0;)n+=2*Math.PI;for(;n>=2*Math.PI;)n-=2*Math.PI;r=n>0&&n<=Math.PI?-n+Math.PI/2:-n-Math.PI/2;const o=s.tickLength+s.tickPadding,a=Math.cos(n)*o*t.Gi().x,l=Math.sin(n)*o*t.Gi().y;return{alignment:{x:0,y:0},padding:{x:a,y:l},rotation:180*r/Math.PI,offset:{x:a,y:l}}}Dx(t,i,s){const e=t.Rx()?t.Ex().end-t.Ex().start:t.Ex().start-t.Ex().end;this.$p.fu(0).He(360).mu(0).Au(e+.5*i.getThickness()*t.Gi().x).pu(360).Le(O).Be(i)}Bx(t,i,s){const e=t.Gx(),h=this.Cx(t,{S:0+e}),r=t.Rx()?t.Ex().end-t.Ex().start:t.Ex().start-t.Ex().end;i.ja(h.alignment).ir(h.rotation).Ua(h.offset.x,h.offset.y).ze(Is({x:r,y:0},h.padding))}Wx(){this.nr({Ke:[],qe:[{hh:"Radial ticks",Qg:0,$e:this.Ux,je:this.Nx,Yr:(t,i,s,e)=>{const h=[],r=2*Math.PI/this.Ox;for(let t=0;t<2*Math.PI;t+=r)h.push(t);return h},Eh:{_r:()=>{},zh:()=>!1},Hr:void 0}],th:wu,ih:void 0,sh:void 0})}}const wu=(t,i,s)=>(180*t/Math.PI).toFixed(0),Cu={Ir:()=>{},Pr:()=>{},Br:()=>{},mx:t=>({getInnerStart:()=>0,getInnerEnd:()=>2*Math.PI,K:(t,i)=>{},ot:(i,s,e,h,r)=>t.x.ot(i,s,e,h,r)}),vx:t=>t.radial},ku=t=>!!(t&&"object"==typeof t&&"axisAmplitude"in t&&"axisRadial"in t),Tu=t=>!!(t&&"object"==typeof t&&"angle"in t&&"number"==typeof t.angle&&"amplitude"in t&&"number"==typeof t.amplitude);class Fu extends ye{constructor(t,i,s,e,h,r){super(i,s,h,r),this.ws="Sector",this.$x=0,this.jx=1*Math.PI/2,this.Zx=void 0,this.Qx=void 0,this.Ls=t,this.Mx=e,this.Vm=this.Ls.ld(this.Mx).cs(this.getHighlight()),this.fs(this.Vm),this.Fe=h.polarSectorFillStyle,this.Ie=h.polarSectorStrokeStyle,this.setMouseInteractions(!1)}setAngleStart(t){return this.$x=Jt(t,0,360),this.Ls.xs(),this}getAngleStart(){return this.$x}setAngleEnd(t){return this.jx=Jt(t,0,360),this.Ls.xs(),this}getAngleEnd(){return this.jx}setAmplitudeStart(t){return this.Zx=t,this.Ls.xs(),this}getAmplitudeStart(){return this.Zx}setAmplitudeEnd(t){return this.Qx=t,this.Ls.xs(),this}getAmplitudeEnd(){return this.Qx}setFillStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.Ls.xs(),this}getFillStyle(){return this.Fe}setStrokeStyle(t){return this.Ie="function"==typeof t?t(this.Ie):t,this.Ls.xs(),this}getStrokeStyle(){return this.Ie}Ee(){const t=this.Mx.Ex(),i=180*this.Mx.Gx()/Math.PI,s=void 0!==this.Zx?Jt(this.Zx,t.start,t.end):t.start,e=void 0!==this.Qx?Jt(this.Qx,t.start,t.end):t.end,h=this.Mx.Rx()?s-t.start:t.start-s,r=this.Mx.Rx()?e-t.start:t.start-e,n=Math.min(h,r),o=Math.max(h,r),a=this.Mx.Xx()?1:-1,l=Math.abs(this.jx-this.$x);this.Vm.fu((this.$x-i)*a).He((this.jx-i)*a).mu(100*n/o).Au(o).Le(this.Fe).Be(this.Ie).pu(Math.ceil(l/2))}Ve(t,i){t.cs(i),this.Ls.xs()}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe,stroke:this.Ie})}}class Iu extends ye{constructor(){super(...arguments),this.yv=!0,this.gv=!0}setAutoScrollingEnabled(t){return this.yv=t,this.chart.us.xs(),this}getAutoScrollingEnabled(){return this.yv}wv(){}Ee(){}Fp(){}setCursorEnabled(t){return this.gv=t,this}getCursorEnabled(){return this.gv}$y(){return this.getVisible()&&this.getCursorEnabled()}setCursorFormattingOverride(t){return this.xv=t,this}getCursorFormattingOverride(){return this.xv}}class Pu extends Iu{constructor(t,i,s,e,h,r){super(i,s,h,r),this.Ls=t,this.chart=i,this.scale=e}getAmplitudeMin(){return this.Jx?this.Jx.min:void 0}getAmplitudeMax(){return this.Jx?this.Jx.max:void 0}}const Du=(t,i)=>{const s=[],e=i.Ex().start,h=i.Ex().end,r=i.Rx(),n=i.Xx()?1:-1,o=i.Gx(),a=Math.abs(h-e),l=Math.min(e,h)+.001*a,u=Math.max(e,h)-.001*a;for(const i of t){const t=Jt(i.amplitude,l,u),h=i.angle*Math.PI/180-o,a=Math.cos(h*n)*(r?t-e:e-t),c=Math.sin(h*n)*(r?t-e:e-t),d=i.color;s.push({x:a,y:c,color:d})}return s},Bu=t=>{const i={min:es,max:hs};for(const s of t)i.min=Math.min(i.min,s.amplitude),i.max=Math.max(i.max,s.amplitude);return i},Lu=t=>t.slice().map((t=>t.angle>=0&&t.angle<=360?t:{...t,angle:t.angle%360})),Ru=(t,i)=>{let s=Os(t);for(i.Xx()||(s*=-1),s+=180*i.Gx()/Math.PI;s<0;)s+=360;s%=360;const e=Ts(t),h=i.Ex(),r=Math.abs(h.end-h.start);return{angle:s,amplitude:pn(h.start,h.end,e/r)}};class Eu extends Pu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r),this.ws="Heatmap Series",this.Kx=!0,this.Iv=!1,this.Kd=()=>Di(this.Fe);const o=this.chart.getSeries().length;this.Fe=Ri(this.qi.polarHeatmapSeriesFillStyle||this.qi.heatmapGridSeriesFillStyle,o);const a=n.amplitudeStart||0,l=n.amplitudeEnd?(n.amplitudeEnd-a)/(n.annuli-1):n.amplitudeStep||1,u={sectors:n.sectors,annuli:n.annuli,amplitudeStart:a,amplitudeStep:l,heatmapDataType:"intensity",dataOrder:n.dataOrder||"annuli"};this.qn=u,this.qx=t.tM(e,[],u).Le(this.Fe).cs(this.getHighlight()),this.fs(this.qx);const c=Math.min(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep),d=Math.max(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep);this.Jx={min:c,max:d},this.setHighlightOnHover(!1)}solveNearest(t,i="show-nearest"){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=pt(e,this.chart.us.ft,this.scale),r=Ru(h,this.scale),n=Ua(i)?this.qx.iM(r):this.qx.ed(r);if(!n)return;const o=Du([n],this.scale)[0];return{cursorPosition:{pointMarker:o,pointMarkerScale:this.scale,resultTable:o,resultTableScale:this.scale},series:this,angle:n.angle,amplitude:n.amplitude,intensity:n.cellValue,annulus:n.iAnnulus,sector:n.iSector,lut:Z(this.Fe)?this.Fe.lut:void 0}}Ji(t,i){return qi({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0,intensity:0,sector:0,annulus:0,lut:Z(this.Fe)?this.Fe.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}invalidateIntensityValues(t){if(this.Iv&&this.chart.us.Qn(Yo.Pf),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,sectors:"annuli"===this.qn.dataOrder?t[0].length:t.length,annuli:"annuli"===this.qn.dataOrder?t.length:t[0].length},s="annuli"===this.qn.dataOrder?this.qn.annuli:this.qn.sectors,e="annuli"===this.qn.dataOrder?this.qn.sectors:this.qn.annuli;if(i.x>s||i.y>e){if(!0===this.chart.wA.so){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nHeatmap ${s}x${e}, input ${i.x}x${i.y}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Yt.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);if(0===(t=h).length||0===t[0].length)return this}this.qx.zS({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iSector"in t&&"iAnnulus"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,sectors:"annuli"===this.qn.dataOrder?t.values[0].length:t.values.length,annuli:"annuli"===this.qn.dataOrder?t.values.length:t.values[0].length},s="annuli"===this.qn.dataOrder?t.iAnnulus:t.iSector,e=s+i.primary-1,h="annuli"===this.qn.dataOrder?t.iSector:t.iAnnulus,r=h+i.secondary-1,n="annuli"===this.qn.dataOrder?this.qn.annuli-1:this.qn.sectors-1,o="annuli"===this.qn.dataOrder?this.qn.sectors-1:this.qn.annuli-1;if(s<0||h<0){if(!0===this.chart.wA.so){const i=`PolarHeatmapSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niSector: ${t.iSector}, iAnnuli: ${t.iAnnulus}.\nNo intensity values will be invalidated.`;Yt.console.warn(i)}return this}if(e>n||r>o){if(!0===this.chart.wA.so){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nMax indexes ${n}x${o}, input ${i.primary}x${i.secondary} starting at [${s},${h}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Yt.console.warn(t)}const a=Math.max(e-n,0),l=i.primary-a,u=Math.max(r-o,0),c=[];for(let i=0;i<l;i+=1)c[i]=t.values[i].slice(0,u>0?-u:void 0);if(0===(t={iSector:t.iSector,iAnnulus:t.iAnnulus,values:c}).values.length||0===t.values[0].length)return this}this.qx.zS({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.Ls.xs(),this.Iv=!0,this}setFillStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.qx.Le(this.Fe),this.Ls.xs(),this}getFillStyle(){return this.Fe}clear(){return this.qx.Vt(),this.Ls.xs(),this}setIntensityInterpolation(t){return t=t||"disabled",this.qx.RS(t),this.Ls.xs(),this}getIntensityInterpolation(){return this.qx.ES()}fv(){return this.yv&&this.getVisible()}Ve(t,i){t.cs(i),this.Ls.xs()}Ee(){}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe})}}class zu extends Pu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.ws="Line Series",this.sM=[],this.eM=!1,this.hM=!1,this.vu=Ri(this.qi.polarLineSeriesStrokeStyle,r),this.rM=t.Ap(e,void 0,[xl.UserSeries]).We(this.vu).cs(this.getHighlight()),this.fs(this.rM)}solveNearest(t,i){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=this.rM.nM(e);if(!h)return;const r=Ru(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Ji(t,i){return qi({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,"show-nearest")))}setData(t){return 0!==this.sM.length&&this.chart.us.Qn(Yo.Pf),this.sM=Lu(t),this.eM=!0,this.Jx=Bu(this.sM),this.Ls.xs(),this}setStrokeStyle(t){this.vu="function"==typeof t?t(this.vu):t;const i=this.vu;return this.rM.We(i),this.Ls.xs(),this}getStrokeStyle(){return this.vu}setConnectDataAutomaticallyEnabled(t){return this.hM=t,this.Ls.xs(),this}getConnectDataAutomaticallyEnabled(){return this.hM}fv(){return this.yv&&this.sM.length>0&&this.getVisible()}Ve(t,i){t.cs(i),this.Ls.xs()}Ee(){if(this.eM||this.scale.oM()){const t=Du(this.sM,this.scale),i=vs(t);this.hM?(t.push({...t[0]}),this.rM.$l(!0)):this.rM.$l(!1),this.rM.Vt().ml(t).ia(i),this.eM=!1,this.rM.Vs()}}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{stroke:this.vu})}}class Vu extends Pu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.ws="Point Line Series",this.sM=[],this.eM=!1,this.hM=!1,this.aM=3,this.Ca=0,this.lM=ar.Circle,this.Fe=Ri(this.qi.polarPointLineSeriesFillStyle,r),this.vu=Ri(this.qi.polarPointLineSeriesStrokeStyle,r),this.rM=t.Ap(e,void 0,[xl.UserSeries]).We(this.vu).cs(this.getHighlight()),this.fs(this.rM),this.uM=t.Ov(e).Le(this.Fe).cl(this.lM).tt(this.aM).cs(this.getHighlight()),this.fs(this.uM)}solveNearest(t,i){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=this.rM.nM(e);if(!h)return;const r=Ru(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Ji(t,i){return qi({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}setData(t){return 0!==this.sM.length&&this.chart.us.Qn(Yo.Pf),this.sM=Lu(t),this.eM=!0,this.Jx=Bu(this.sM),this.Ls.xs(),this}setStrokeStyle(t){this.vu="function"==typeof t?t(this.vu):t;const i=this.vu;return this.rM.We(i),this.Ls.xs(),this}getStrokeStyle(){return this.vu}setPointFillStyle(t){this.Fe="function"==typeof t?t(this.Fe):t;const i=this.Fe;return this.uM.Le(i),this.Ls.xs(),this}getPointFillStyle(){return this.Fe}setPointSize(t){return this.aM=t,this.uM.tt(t),this.Ls.xs(),this}getPointSize(){return this.aM}setPointShape(t){return this.lM=t,this.uM.cl(this.lM),this}getPointShape(){return this.lM}setPointRotation(t){return this.Ca=t,this.uM.ir(t),this.Ls.xs(),this}getPointRotation(){return this.Ca}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe,stroke:this.vu})}setConnectDataAutomaticallyEnabled(t){return this.hM=t,this.Ls.xs(),this}getConnectDataAutomaticallyEnabled(){return this.hM}fv(){return this.yv&&this.sM.length>0&&this.getVisible()}Ve(t,i){t.cs(i),this.Ls.xs()}Ee(){if(this.eM||this.scale.oM()){const t=Du(this.sM,this.scale),i=vs(t);this.hM?(t.push({...t[0]}),this.rM.$l(!0)):this.rM.$l(!1),this.rM.Vt().ml(t).ia(i),this.uM.Vt().ml(t).ia(i),this.eM=!1,this.rM.Vs(),this.uM.Vs()}}Ds(){return this._s||this.lM}}class Ou extends Qr{constructor(t,i,e,h,r,n,o,a,l){super(),this.Qo=Ji(),this.L=new s,this.$i=!1,this.cM=h,this.dM=r,this.fM=n,this.AM=o,this.gM=a,this.Ls=t,this.scale=i,this.yM=e,this.qi=l}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}dispose(){return this.yM&&this.yM(this),this.Ls.us.xs(),this.L.emit("dispose",this),this.$i=!0,this}setVisible(t){return super.setVisible(t),this.fM(),this.Ls.us.xs(),this}isDisposed(){return this.$i}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setMouseInteractions(t){return this.AM(this,t),this}getMouseInteractions(){return this.gM(this)}}class Nu extends Ou{constructor(t,i,s,e,h,r,n,o,a,l,u,d,f,A,g,y,m){super(t,i,s,e,h,r,n,o,m),this.mM=1,this.pM=1,this.Ls=t,this.scale=i,this.dimensionStrategy=a,this.start=l,this.end=u,this.lowerExtreme=d,this.lowerQuartile=f,this.median=A,this.upperQuartile=g,this.upperExtreme=y,this.boundaries=c(this.dimensionStrategy.toPoint(l,d),this.dimensionStrategy.toPoint(u,y)),this.vM=this.qi.boxSeriesBodyFillStyle,this.SM=this.qi.boxSeriesBodyStrokeStyle,this.vu=this.qi.boxSeriesStrokeStyle,this.bM=this.qi.boxSeriesMedianStrokeStyle,this.Vs()}getBoundaries(){return this.boundaries}setBodyWidth(t){return this.mM=t,this.Vs(),this}getBodyWidth(){return this.mM}setBodyFillStyle(t){return this.vM="function"==typeof t?t(this.vM):t,this.dM(),this}getBodyFillStyle(){return this.vM}setBodyStrokeStyle(t){return this.SM="function"==typeof t?t(this.SM):t,this.dM(),this}getBodyStrokeStyle(){return this.SM}setTailWidth(t){return this.pM=t,this.Vs(),this}getTailWidth(){return this.pM}setStrokeStyle(t){return this.vu="function"==typeof t?t(this.vu):t,this.dM(),this}getStrokeStyle(){return this.vu}setMedianStrokeStyle(t){return this.bM="function"==typeof t?t(this.bM):t,this.dM(),this}getMedianStrokeStyle(){return this.bM}Vs(){this.cM()}getDominantStyle(){return this.getBodyFillStyle()}}class Gu extends Iu{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,a,l),this.Bs=!0,this.ts=new Map,this.chart=t,this.Ls=s,this.axisX=e,this.axisY=h,this.axisXAttachHandler=r,this.axisYAttachHandler=n,this.xM=o,this.scale=re(e.ft,h.ft),this.MM=t._M,t._M+=1,this.wM(this.scale),this.attacheAxis(),this.onMouseEnter(this.chart.CM),this.onMouseLeave(this.chart.kM),this.onMouseWheel(this.chart.pv),this.onMouseDragStart(this.chart.TM),this.onMouseDrag(this.chart.vv),this.onMouseDragStop(this.chart.Sv),this.onTouchStart(this.chart.bv.onTouchStart),this.onTouchMove(this.chart.bv.onTouchMove),this.onTouchEnd(this.chart.bv.onTouchEnd)}get xAxis(){return this.axisX}get yAxis(){return this.axisY}aa(){const t=Array.from(this.ts.keys());for(const i of t){const t=i.aa();if(t)return t}}setClipping(t){return this.Bs=t,this.Ls.xs(),this}getClipping(){return this.Bs}attacheAxis(){this.FM=this.axisXAttachHandler(this),this.IM=this.axisYAttachHandler(this)}fs(t,i){super.fs(t,i),t.la(this.MM)}getName(){const t=this.ds(),i="ProgressiveY"===t||"RegressiveY"===t?this.axisX.getTitle():this.axisY.getTitle();return this.ws||i.length>0&&i||"Series"}setDrawOrder(t){return this.MM=t.seriesDrawOrderIndex,this.ts.forEach(((t,i)=>{i.la(this.MM)})),this.chart.us.xs(),this}dispose(){return super.dispose(),this.FM(this),this.IM(this),this}Fp(){super.Fp(),ue(this.Bs,Array.from(this.ts.keys()),this.scale)}getBoundaries(){return c(n(this.getXMin()||0,this.getYMin()||0),n(this.getXMax()||0,this.getYMax()||0))}setCursorEnabled(t){return super.setCursorEnabled(t)}}const Uu=(t,i,s,e)=>{const h=t.length;let r=0;if(void 0!==i){const h=s-i;if(h>0){const i=t.slice(r,h);r+=h,e(i,!0)}}for(;r<h;){const i=t.slice(r,r+s);r+=s,e(i,!1)}},Wu=(t,i=(t=>t))=>{const s=[];let e;for(let h=0;h<t.length;h+=1){e=t[h];const r=i(e.ul()),n=e.ll(),o=n?i(n):[];let a=!1,l=!1;"Xl"in e&&(a=e.Xl(),l=e.jl()),s.push.apply(s,r.slice(a?1:0,r.length-(l&&0===o.length?1:0))),s.push.apply(s,o.slice(a&&0===r.length?1:0,o.length-(l?1:0)))}return s};class Yu extends Gu{constructor(){super(...arguments),this.PM=[],this.DM=void 0,this.BM=!1,this.yM=t=>{const i=this.PM.findIndex((i=>i===t));i>=0&&this.PM.splice(i,1),this.BM=!0,this.DM=void 0,this.Ls.xs()},this.cM=()=>{this.DM=void 0,this.BM=!0,this.chart.us.xs()},this.dM=()=>{this.BM=!0,this.chart.us.xs()},this.fM=()=>{this.DM=void 0,this.BM=!0,this.chart.us.xs()},this.AM=(t,i)=>{this.setMouseInteractions(i)},this.LM=t=>this.getMouseInteractions()}Ee(){super.Ee(),this.BM&&(this.RM(this.PM),this.BM=!1)}clear(){return this.PM.slice().forEach(jt),this.PM.length=0,this.BM=!0,this.DM=void 0,this.Ls.xs(),this}EM(t,i){void 0!==i?this.PM.splice(i,0,t):this.PM.push(t),this.BM=!0,this.zM&&this.zM(t),t.onMouseEnter(((t,i)=>this.Mt(t,i,void 0,{}))),t.onMouseLeave(((t,i)=>this._t(t,i,void 0))),t.onMouseClick(((t,i)=>this.wt(t,i,void 0,{}))),t.onMouseDoubleClick(((t,i)=>this.Ct(t,i,void 0,{}))),t.onMouseDown(((t,i)=>this.kt(t,i,void 0,{}))),t.onMouseUp(((t,i)=>this.Tt(t,i,void 0,{}))),t.onMouseMove(((t,i)=>this.Ft(t,i,void 0,{}))),t.onMouseDragStart(((t,i,s)=>this.Pt(t,i,s,void 0,{}))),t.onMouseDrag(((t,i,s,e,h)=>this.It(t,i,s,e,h,void 0,{}))),t.onMouseDragStop(((t,i,s,e)=>this.Dt(t,i,s,e,void 0,{}))),t.onMouseWheel(((t,i)=>this.Bt(t,i,void 0,{}))),t.onTouchStart(((t,i)=>this.Lt(t,i,void 0,{}))),t.onTouchMove(((t,i)=>this.Rt(t,i,void 0,{}))),t.onTouchEnd(((t,i)=>this.Et(t,i,void 0,{}))),this.Ls.xs()}fv(){return this.yv&&this.PM.length>0&&this.getVisible()}setDefaultStyle(t){this.zM=t,this.PM.forEach(t),t(this.VM);for(let t=0;t<this.Qi.length;t+=1)this.styleLegendEntry(this.Qi[t]);return this.BM=!0,this.chart.us.xs(),this}getXMax(){return this.DM||(this.DM=this.OM()),this.DM.max.x}getXMin(){return this.DM||(this.DM=this.OM()),this.DM.min.x}getYMax(){return this.DM||(this.DM=this.OM()),this.DM.max.y}getYMin(){return this.DM||(this.DM=this.OM()),this.DM.min.y}Br(){return n(0,0)}OM(){const t=c(o(es,es),o(hs,hs));for(let i=0;i<this.PM.length;i+=1)if(this.PM[i].getVisible()){const s=this.PM[i].getBoundaries();t.min.x=Math.min(t.min.x,s.min.x),t.min.y=Math.min(t.min.y,s.min.y),t.max.x=Math.max(t.max.x,s.max.x),t.max.y=Math.max(t.max.y,s.max.y)}return t}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.PM.length>0?this.PM[0].getDominantStyle():this.VM.getDominantStyle()})}}const Hu=(t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:e+i*s,y:t[s]};return h};class Xu extends Gu{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,l,u),this.NM=[],this.ku=[],this.GM=0,this.Is=!1,this.Xi=ge.onHover,this.chart.us.Qn(Yo.kf),this.UM=a}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.GM=void 0!==i&&i>0?i:0,this.Ls.xs(),this}add(t){if(0!==this.NM.length&&this.chart.us.Qn(Yo.Pf),Array.isArray(t)?this.WM(t):this.WM([t]),this.ku.length>0){const t=this.ku[this.ku.length-1];this.YM={x:t.x,y:t.y}}return this}addArrayX(t,i=1,s){let e=s;return e||(e=this.YM?this.YM.y+i:0),this.add(((t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:t[s],y:e+i*s};return h})(t,i,e)),this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.YM?this.YM.x+i:0),this.add(Hu(t,i,e)),this}addArraysXY(t,i){if(t.length!==i.length)throw new Error("arrayX and arrayY lengths are not equal");return this.add(((t,i)=>{const s=new Array(t.length);for(let e=0;e<t.length;e+=1)s[e]={x:t[e],y:i[e]};return s})(t,i)),this}getPointAmount(){return this.NM.reduce(((t,i)=>t+i.pl()+i.vl()),this.ku.length)}clear(){this.HM=void 0;for(let t=0;t<this.NM.length;t+=1)this.NM[t].Vt();return this.ku.length=0,this.YM=void 0,this.Ls.xs(),this.L.emit("dataClear",this),this}getLastPoint(){return this.YM}fv(){return this.yv&&this.getPointAmount()>0&&this.getVisible()}getXMax(){return this.UM.getXMax(this.NM,this.HM)||0}getXMin(){return this.UM.getXMin(this.NM,this.HM)||0}getYMax(){return this.UM.getYMax(this.NM,this.HM)||0}getYMin(){return this.UM.getYMin(this.NM,this.HM)||0}Br(){const t=n(0,0);for(const i of this.NM)t.x=Math.max(t.x,i.Il()),t.y=Math.max(t.y,i.Pl());return t}XM(t,i,s,e){this.UM.XM(t,i,s,e,this.scale,(t=>{}))}wv(){super.wv(),this.$M&&this.XM(this.NM,this.getPointAmount(),this.$M,this.GM)}Ee(){super.Ee();const t=this.getBoundaries();this.ku.length>0&&(this.jM(this.ku),this.ku=[]);for(const i of this.NM)i.ia(t);return super.Ee()}Fp(){super.Fp(),this.HM=void 0,this.ku.length=0}WM(t){0!==t.length&&(this.HM?this.HM=bs(this.HM,vs(t)):this.HM=vs(t),this.L.emit("dataAdd",this,t,this.HM),this.ku=ki(this.ku,t,{canReturnB:!1}),this.Ls.xs())}ZM(){return Wu(this.NM)}QM(t){return this.L.on("dataAdd",t)}JM(t){return this.L.off(t)}KM(t){return this.L.on("dataClear",t)}qM(t){return this.L.off(t)}}const $u=(t,i,s,e)=>{let h,r,n=Number.MAX_VALUE;for(let o=0;o<i.length;o+=1){const a=i[o],l=s(a,t);if(l){const i=e(t,l);(void 0===h||i<n)&&(h=l,r=a,n=i)}}return h&&r?[h,r]:void 0};class ju extends Yu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.ws="Box Series",this.t_=Zi(),this.i_=t=>pt(this.Rs.toPoint((t.start+t.end)/2,t.median),this.scale,this.Ls.us.ft),this.chart.us.Qn(Yo.Ff),this.Rs=a,this.VM=new Nu(this.Ls,this.scale,this.yM,Zt,Zt,Zt,Zt,(t=>!1),this.Rs,0,0,0,0,0,0,0,this.qi).dispose(),this.s_=new Il((()=>{const t=this.Ls.Zg(this.scale);return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.We(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.jr();return s.Jg(i.start,i.end),s}))))),this.e_=new Il((()=>{const t=this.t_.xt(this.Ls.Jp(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Le(s.fillStyle).Be(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.jr();return s.Tl(i.vertices),this.t_.zt(s,i.figure),s})))),(()=>{this.t_.Vt()}),((t,i)=>{this.ys(i)}))}solveNearest(t,i){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY};if(0===this.PM.length)return;const h=$u(e,this.PM.filter((t=>t.getVisible())),this.i_,gs);if(!h)return;const r=pt(h[0],this.Ls.us.ft,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],start:h[1].start,end:h[1].end,lowerExtreme:h[1].lowerExtreme,lowerQuartile:h[1].lowerQuartile,median:h[1].median,upperQuartile:h[1].upperQuartile,upperExtreme:h[1].upperExtreme,series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return qi({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,median:0,lowerQuartile:0,upperQuartile:0,lowerExtreme:0,upperExtreme:0,start:0,end:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}wM(t){if(!(t instanceof ee||t instanceof he))throw new Error("BoxSeries only supports Linear Axes")}RM(t){const i=this.e_.Ip(),s=this.s_.Ip();t.forEach((t=>{if(!t.getVisible())return;const e=this.Rs.toPoint((t.start+t.end-t.mM*(t.end-t.start))/2,t.lowerQuartile),h=this.Rs.toPoint((t.end-t.start)*t.mM,t.upperQuartile-t.lowerQuartile),r=this.Rs.toPoint((t.start+t.end)/2,t.lowerQuartile),n=this.Rs.toPoint((t.start+t.end)/2,t.lowerExtreme),o=this.Rs.toPoint((t.start+t.end)/2,t.upperQuartile),a=this.Rs.toPoint((t.start+t.end)/2,t.upperExtreme),l=this.Rs.toPoint((t.start+t.end-t.pM*(t.end-t.start))/2,t.lowerExtreme),u=this.Rs.toPoint((t.start+t.end+t.pM*(t.end-t.start))/2,t.lowerExtreme),c=this.Rs.toPoint((t.start+t.end-t.pM*(t.end-t.start))/2,t.upperExtreme),d=this.Rs.toPoint((t.start+t.end+t.pM*(t.end-t.start))/2,t.upperExtreme),f=this.Rs.toPoint((t.start+t.end-t.mM*(t.end-t.start))/2,t.median),A=this.Rs.toPoint((t.start+t.end+t.mM*(t.end-t.start))/2,t.median);i.add({Qo:t.Qo,vertices:[{x:e.x,y:e.y},{x:e.x,y:e.y+h.y},{x:e.x+h.x,y:e.y+h.y},{x:e.x+h.x,y:e.y}],figure:t},{fillStyle:t.vM,strokeStyle:t.SM}),s.add({Qo:0,start:r,end:n,figure:t},{strokeStyle:t.vu}),s.add({Qo:0,start:o,end:a,figure:t},{strokeStyle:t.vu}),s.add({Qo:0,start:l,end:u,figure:t},{strokeStyle:t.vu}),s.add({Qo:0,start:c,end:d,figure:t},{strokeStyle:t.vu}),s.add({Qo:0,start:f,end:A,figure:t},{strokeStyle:t.bM})})),i.finishPlot(),s.finishPlot()}add(t){const i=new Nu(this.Ls,this.scale,this.yM,this.cM,this.dM,this.fM,this.AM,this.LM,this.Rs,t.start,t.end,t.lowerExtreme,t.lowerQuartile,t.median,t.upperQuartile,t.upperExtreme,this.qi);return this.EM(i),this.BM=!0,this.chart.us.xs(),i}}class Zu extends Ou{constructor(t,i,s,e,h,r,o,a,l,u){super(t,i,s,e,h,r,o,a,l),this.dimensions={x:0,y:0,radiusX:0,radiusY:0},this.sl=c(n(0,0),n(0,0)),this.Ls=t,this.scale=i,this.Fe=Ri(l.ellipseSeriesFillStyle,u),this.Ie=Ri(l.ellipseSeriesStrokeStyle,u)}getBoundaries(){return this.sl}setDimensions(t){return this.dimensions=t,this.sl=c(n(t.x-t.radiusX,t.y-t.radiusY),n(t.x+t.radiusX,t.y+t.radiusY)),this.cM(),this.Ls.xs(),this}getDimensions(){return this.dimensions}setFillStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.dM(),this}getFillStyle(){return this.Fe}setStrokeStyle(t){return this.Ie="function"==typeof t?t(this.Ie):t,this.dM(),this}getStrokeStyle(){return this.Ie}getDominantStyle(){return this.Fe}}class Qu extends Yu{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.ws="Ellipse Series",this.t_=Zi(),this.i_=t=>{const i=t.getDimensions(),s=n(i.x,i.y);return pt(s,this.scale,this.Ls.us.ft)},this.chart.us.Qn(Yo.Ff),this.h_=c,this.VM=new Zu(this.Ls,this.scale,Zt,Zt,Zt,Zt,Zt,(t=>!1),this.qi,this.h_).dispose(),this.e_=new Il((()=>{const t=this.t_.xt(this.Ls.Jp(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Le(s.fillStyle).Be(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.jr();return s.Tl(i.vertices),this.t_.zt(s,i.figure),s})))),(()=>{this.t_.Vt()}),((t,i)=>{this.ys(i)}))}solveNearest(t,i){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY};if(0===this.PM.length)return;const h=$u(e,this.PM.filter((t=>t.getVisible())),this.i_,gs);if(!h)return;const r=pt(h[0],this.Ls.us.ft,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],...h[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return qi({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,radiusX:0,radiusY:0,drawSteps:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}wM(t){if(!(t instanceof ee||t instanceof he))throw new Error("EllipseSeries only supports Linear Axes")}RM(t){const i=this.e_.Ip();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=[],h=void 0!==s.drawSteps?s.drawSteps:72;for(let t=0;t<=h;t+=1){const i=t/h*2*Math.PI,r=s.x+s.radiusX*Math.cos(i),n=s.y+s.radiusY*Math.sin(i);e.push({x:r,y:n})}const r=t.getFillStyle(),n=t.getStrokeStyle();i.add({Qo:t.Qo,vertices:e,figure:t},{fillStyle:r,strokeStyle:n})})),i.finishPlot()}add(t){const i=new Zu(this.Ls,this.scale,this.yM,this.cM,this.dM,this.fM,this.AM,this.LM,this.qi,this.h_).setDimensions(t);return this.EM(i),this.BM=!0,this.chart.us.xs(),i}}class Ju extends Ou{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a),this.r_=[],this.sl=rs,this.Ls=t,this.scale=i,this.Fe=Ri(a.polygonSeriesFillStyle,l),this.Ie=Ri(a.polygonSeriesStrokeStyle,l)}getBoundaries(){return this.sl}setDimensions(t){return this.r_=t,this.sl=vs(this.r_),this.cM(),this.Ls.xs(),this}getDimensions(){return this.r_}setFillStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.dM(),this}getFillStyle(){return this.Fe}setStrokeStyle(t){return this.Ie="function"==typeof t?t(this.Ie):t,this.dM(),this}getStrokeStyle(){return this.Ie}getDominantStyle(){return this.Fe}}class Ku extends Yu{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.ws="Polygon Series",this.t_=Zi(),this.i_=t=>{const i=t.getBoundaries(),s=n((i.min.x+i.max.x)/2,(i.min.y+i.max.y)/2);return pt(s,this.scale,this.Ls.us.ft)},this.chart.us.Qn(Yo.Ff),this.h_=c,this.VM=new Ju(this.Ls,this.scale,Zt,Zt,Zt,Zt,Zt,(t=>!1),this.qi,this.h_).dispose(),this.e_=new Il((()=>{const t=this.t_.xt(this.Ls.Jp(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Le(s.fillStyle).Be(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.jr();return s.Tl(i.vertices),this.t_.zt(s,i.figure),s})))),(()=>{this.t_.Vt()}),((t,i)=>{this.ys(i)}))}solveNearest(t,i){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY};if(0===this.PM.length)return;const h=$u(e,this.PM.filter((t=>t.getVisible())),this.i_,gs);if(!h)return;const r=pt(h[0],this.Ls.us.ft,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],coordinates:h[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return qi({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,coordinates:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}wM(t){}RM(t){const i=this.e_.Ip();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=t.getFillStyle(),h=t.getStrokeStyle();i.add({Qo:t.Qo,vertices:s,figure:t},{fillStyle:e,strokeStyle:h})})),i.finishPlot()}add(t){const i=new Ju(this.Ls,this.scale,this.yM,this.cM,this.dM,this.fM,this.AM,this.LM,this.qi,this.h_).setDimensions(t);return this.EM(i),this.BM=!0,this.chart.us.xs(),i}}class qu extends Ou{constructor(t,i,s,e,h,r,o,a,l,u){super(t,i,s,e,h,r,o,a,l),this.n_={x:0,y:0,width:0,height:0},this.o_={x1:0,y1:0,x2:0,y2:0},this.sl=c(n(0,0),n(0,0)),this.Fe=Ri(l.rectangleSeriesFillStyle,u),this.Ls=t,this.scale=i,this.Ie=Ri(l.rectangleSeriesStrokeStyle,u)}getBoundaries(){return this.sl}setDimensions(t){return"x"in t?(this.n_=t,this.o_={x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}):(this.o_=t,this.n_={x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}),this.sl=vs([this.n_,n(this.n_.x+this.n_.width,this.n_.y+this.n_.height)]),this.cM(),this.Ls.xs(),this}getDimensionsPositionAndSize(){return this.n_}getDimensionsTwoPoints(){return this.o_}setFillStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.dM(),this}getFillStyle(){return this.Fe}setStrokeStyle(t){return this.Ie="function"==typeof t?t(this.Ie):t,this.dM(),this}getStrokeStyle(){return this.Ie}getDominantStyle(){return this.Fe}}class tc extends Yu{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.ws="Rectangle Series",this.t_=Zi(),this.i_=t=>{const i=t.getDimensionsPositionAndSize(),s=n(i.x+i.width/2,i.y+i.height/2);return pt(s,this.scale,this.Ls.us.ft)},this.chart.us.Qn(Yo.Ff),this.h_=c,this.VM=new qu(this.Ls,this.scale,Zt,Zt,Zt,Zt,Zt,(t=>!1),this.qi,this.h_).dispose(),this.e_=new Il((()=>{const t=this.t_.xt(this.Ls.Jp(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Le(s.fillStyle).Be(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.jr();return s.Tl(i.vertices),this.t_.zt(s,i.figure),s})))),(()=>{this.t_.Vt()}),((t,i)=>{this.ys(i)}))}solveNearest(t,i){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY};if(0===this.PM.length)return;const h=$u(e,this.PM.filter((t=>t.getVisible())),this.i_,gs);if(!h)return;const r=pt(h[0],this.Ls.us.ft,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],...h[1].getDimensionsPositionAndSize(),...h[1].getDimensionsTwoPoints(),series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return qi({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,x1:0,y1:0,x2:0,y2:0,width:0,height:0,multiHit:0,figure:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}wM(t){}RM(t){const i=this.e_.Ip();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensionsTwoPoints(),e=[{x:s.x1,y:s.y1},{x:s.x1,y:s.y2},{x:s.x2,y:s.y2},{x:s.x2,y:s.y1}],h=t.getFillStyle(),r=t.getStrokeStyle();i.add({Qo:t.Qo,vertices:e,figure:t},{fillStyle:h,strokeStyle:r})})),i.finishPlot()}add(t){const i=new qu(this.Ls,this.scale,this.yM,this.cM,this.dM,this.fM,this.AM,this.LM,this.qi,this.h_).setDimensions(t);return this.EM(i),this.BM=!0,this.chart.us.xs(),i}}class ic extends Ou{constructor(t,i,s,e,h,r,o,a,l,u){super(t,i,s,e,h,r,o,a,l),this.dimensions={startX:0,startY:0,endX:0,endY:0},this.sl=c(n(0,0),n(0,0)),this.qi=l,this.Ls=t,this.scale=i,this.Ie=Ri(l.segmentSeriesStrokeStyle,u)}getBoundaries(){return this.sl}setDimensions(t){return this.dimensions=t,this.sl=c(n(Math.min(t.startX,t.endX),Math.min(t.startY,t.endY)),n(Math.max(t.startX,t.endX),Math.max(t.startY,t.endY))),this.cM(),this.Ls.xs(),this}getDimensions(){return this.dimensions}setStrokeStyle(t){return this.Ie="function"==typeof t?t(this.Ie):t,this.dM(),this}getStrokeStyle(){return this.Ie}getDominantStyle(){const t=this.Ie;return t!==dt?t.getFillStyle():O}}class sc extends Yu{constructor(t,i,s,e,h,r,o,a,l,u,c){super(t,i,s,e,h,r,o,a,l,u),this.ws="Segment Series",this.a_=Zi(),this.i_=t=>{const i=t.getDimensions(),s=n((i.startX+i.endX)/2,(i.startY+i.endY)/2);return pt(s,this.scale,this.Ls.us.ft)},this.chart.us.Qn(Yo.Ff),this.h_=c,this.VM=new ic(this.Ls,this.scale,Zt,Zt,Zt,Zt,Zt,(t=>!1),this.qi,this.h_).dispose(),this.s_=new Il((()=>{const t=this.a_.xt(this.Ls.Zg(this.scale));return this.fs(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.We(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.jr();return s.Jg(i.start,i.end),this.a_.zt(s,i.figure),s})))),(()=>{this.a_.Vt()}),((t,i)=>{this.ys(i)}))}solveNearest(t,i){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY};if(0===this.PM.length)return;const h=$u(e,this.PM.filter((t=>t.getVisible())),this.i_,gs);if(!h)return;const r=pt(h[0],this.Ls.us.ft,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],...h[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return qi({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,startX:0,startY:0,endX:0,endY:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}wM(t){}RM(t){const i=this.s_.Ip();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e={x:s.startX,y:s.startY},h={x:s.endX,y:s.endY},r=t.getStrokeStyle();i.add({Qo:t.Qo,start:e,end:h,figure:t},{strokeStyle:r})})),i.finishPlot()}add(t){const i=new ic(this.Ls,this.scale,this.yM,this.cM,this.dM,this.fM,this.AM,this.LM,this.qi,this.h_).setDimensions(t);return this.EM(i),this.BM=!0,this.chart.us.xs(),i}}class ec extends Gu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.ws="Heatmap Grid Series",this.kS={},this.chart.us.Qn(Yo.Tf),this.l_=a,this.qi=l;const d=c;this.Fe=Ri(l.heatmapGridSeriesFillStyle,d),this.TS=Ri(this.qi.heatmapGridSeriesWireframeStyle,d);const f={heatmapDataType:"intensity",dataOrder:a.dataOrder||"columns",columns:a.columns,rows:a.rows};this.qn=f,this.u_=this.Ls.c_(this.scale,[],f).Le(this.Fe).FS(this.TS).cs(this.getHighlight()),this.fs(this.u_),this.setHighlightOnHover(!1)}solveNearest(t,i="show-nearest"){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=pt(e,this.Ls.us.ft,this.scale),r=Ua(i)?this.u_.iM(h):this.u_.ed(h);if(r)return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:r.x,y:r.y,column:r.column,row:r.row,intensity:r.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:Z(this.Fe)?this.Fe.lut:void 0}}Ji(t,i){return qi({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,intensity:0,column:0,row:0,lut:Z(this.Fe)?this.Fe.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}PS(){const t=this.kS.start||{x:0,y:0};let i;i=this.kS.end?{x:(this.kS.end.x-t.x)/this.qn.columns,y:(this.kS.end.y-t.y)/this.qn.rows}:this.kS.step?this.kS.step:{x:1,y:1},this.u_.DS(t,i),this.chart.us.xs()}setStart(t){return this.kS.start=t,this.PS(),this}getStart(){return this.u_.BS().start}setStep(t){return this.kS.step=t,this.PS(),this}getStep(){return this.u_.BS().step}setEnd(t){return this.kS.end=t,this.PS(),this}getEnd(){return this.u_.BS().end}clear(){return this.u_.Vt(),this.Ls.xs(),this.L.emit("dataClear",this),this}setWireframeStyle(t){return this.TS="function"==typeof t?t(this.TS):t,this.u_.FS(this.TS),this.Ls.xs(),this.L.emit("styleChange",this),this}getWireframeStyle(){return this.TS}setIntensityInterpolation(t){return t=t||"disabled",this.u_.RS(t),this.Ls.xs(),this.L.emit("styleChange",this),this}getIntensityInterpolation(){return this.u_.ES()}fv(){return this.yv&&this.getVisible()}Kd(){return Di(this.Fe)}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe})}d_(t){this.u_.d_().forEach((i=>{t.u_.zS(i)}))}qM(t){return this.L.off(t)}KM(t){return this.L.on("dataClear",t)}f_(t){return this.L.on("styleChange",t)}A_(t){return this.L.off(t)}getXMax(){const t=this.u_;return t?t.vt():void 0}getXMin(){const t=this.u_;return t?t.yt():void 0}getYMax(){const t=this.u_;return t?t.bt():void 0}getYMin(){const t=this.u_;return t?t.St():void 0}Br(){const t=n(0,0);return t.x=Math.max(t.x,this.u_.Il()),t.y=Math.max(t.y,this.u_.Pl()),t}wM(t){if(!(t instanceof ee))throw new Error("HeatmapGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof ee&&t.Mi())throw new Error("HeatmapGridSeries can not be attached to a high precision Axis.")}Ve(t,i){t.cs(i),this.Ls.xs()}Ee(){return super.Ee(),this.u_.ia(this.getBoundaries()),this}}class hc extends ec{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u,c),this.Iv=!1}invalidateIntensityValues(t){if(this.Iv&&this.chart.us.Qn(Yo.Pf),Array.isArray(t)){if(0===t.length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.qn.dataOrder?t.length:t[0].length,rows:"rows"===this.qn.dataOrder?t.length:t[0].length},s="columns"===this.qn.dataOrder?this.qn.columns:this.qn.rows,e="columns"===this.qn.dataOrder?this.qn.rows:this.qn.columns;if(i.x>s||i.y>e){if(!0===this.chart.wA.so){const t=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.qn.columns}x${this.qn.rows}, input ${i.columns}x${i.rows}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Yt.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.u_.zS({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.qn.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.qn.dataOrder?t.values.length:t.values[0].length},s="columns"===this.qn.dataOrder?t.iColumn:t.iRow,e=s+i.primary-1,h="columns"===this.qn.dataOrder?t.iRow:t.iColumn,r=h+i.secondary-1,n=("columns"===this.qn.dataOrder?this.qn.columns:this.qn.rows)-1,o=("columns"===this.qn.dataOrder?this.qn.rows:this.qn.columns)-1;if(s<0||h<0){if(!0===this.chart.wA.so){const i=`HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niColumn: ${t.iColumn}, iRow: ${t.iRow}.\nNo intensity values will be invalidated.`;Yt.console.warn(i)}return this}if(e>n||r>o){if(!0===this.chart.wA.so){const s=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.qn.columns}x${this.qn.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Yt.console.warn(s)}const s=Math.max(e-n,0),h=i.primary-s,a=Math.max(r-o,0),l=[];for(let i=0;i<h;i+=1)l[i]=t.values[i].slice(0,a>0?-a:void 0);t={iColumn:t.iColumn,iRow:t.iRow,values:l}}this.u_.zS({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.L.emit("invalidateIntensity",this,t),this.Ls.xs(),this.Iv=!0,this}setFillStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.u_.Le(this.Fe),this.L.emit("styleChange",this),this.Ls.xs(),this}getFillStyle(){return this.Fe}g_(t){return this.L.on("invalidateIntensity",t)}y_(t){return this.L.off(t)}}class rc extends Gu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,l,u),this.ws="Scrolling Heatmap Grid Series",this.kS={},this.chart.us.Qn(Yo.Tf),this.chart.us.Qn(Yo.Pf);const d=c;this.Fe=Ri(l.heatmapScrollingGridSeriesFillStyle,d),this.TS=Ri(this.qi.heatmapScrollingGridSeriesWireframeStyle,d);const f={scrollDimension:"columns",heatmapDataType:"intensity",...a};this.qn=f,this.m_=this.Ls.p_(this.scale,[],f).Le(this.Fe).FS(this.TS).cs(this.getHighlight()),this.fs(this.m_),this.setHighlightOnHover(!1)}solveNearest(t,i="show-nearest"){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=pt(e,this.Ls.us.ft,this.scale),r=Ua(i)?this.m_.iM(h):this.m_.ed(h);if(r)return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:r.x,y:r.y,column:r.column,row:r.row,intensity:r.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:Z(this.Fe)?this.Fe.lut:void 0}}Ji(t,i){return qi({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,intensity:0,multiHit:0,column:0,row:0,lut:Z(this.Fe)?this.Fe.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}PS(){const t=this.kS.start||{x:0,y:0};let i;i=this.kS.step?this.kS.step:{x:1,y:1},this.m_.DS(t,i),this.chart.us.xs()}setStart(t){return this.kS.start=t,this.PS(),this}getStart(){return this.m_.BS().start}setStep(t){return this.kS.step=t,this.PS(),this}getStep(){return this.m_.BS().step}clear(){return this.m_.Vt(),this.Ls.xs(),this}setWireframeStyle(t){return this.TS="function"==typeof t?t(this.TS):t,this.m_.FS(this.TS),this.Ls.xs(),this}getWireframeStyle(){return this.TS}setPixelInterpolationMode(t){return t=t||"disabled",this.m_.RS(t),this.Ls.xs(),this}getPixelInterpolationMode(){return this.m_.ES()}setDataCleaning(t){return this.m_.Fu(t),this.Ls.xs(),this}fv(){return this.yv&&this.getVisible()}Kd(){return Di(this.Fe)}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe})}Le(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.m_.Le(this.Fe),this.Ls.xs(),this}wM(t){if(!(t instanceof ee))throw new Error("HeatmapScrollingGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof ee&&t.Mi())throw new Error("HeatmapScrollingGridSeries can not be attached to a high precision Axis.")}getXMax(){return this.m_.vt()||0}getXMin(){return this.m_.yt()||0}getYMax(){return this.m_.bt()||0}getYMin(){return this.m_.St()||0}Br(){const t=n(0,0);return t.x=Math.max(t.x,this.m_.Il()),t.y=Math.max(t.y,this.m_.Pl()),t}Ve(t,i){t.cs(i),this.Ls.xs()}}class nc extends rc{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u,c)}addIntensityValues(t){if(0===t.length||0===t[0].length)return this;const i=t.length,s=t[0].length,e=("columns"===this.qn.scrollDimension?t.length:t[0].length,"rows"===this.qn.scrollDimension?t.length:t[0].length,0+s-1),h=this.qn.resolution-1;if(e>h){if(!0===this.chart.wA.so){const t=`HeatmapScrollingGridSeries.addIntensityValues intensity matrix overflow.\nGrid resolution: ${this.qn.resolution}, input ${i}x${s}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Yt.console.warn(t)}const e=[];for(let s=0;s<i;s+=1)e[s]=t[s].slice(0,h+1);t=e}return this.m_.US(t),this.Ls.xs(),this}invalidateIntensityValues(t){return this.m_.zS(t.iSample,t.values),this.Ls.xs(),this}getSampleCount(){return this.m_.v_()}setFillStyle(t){return this.Le(t),this}getFillStyle(){return this.Fe}}const oc=(t,i,s)=>{let e,h,r=Number.MAX_VALUE;for(let n=0;n<i.length;n+=1){const o=i[n],a=s(o,t);if(a){const i=gs(t,a[0]),s=gs(t,a[1]);(void 0===e||i<r||s<r)&&(e=a,h=o,i<r?r=i:s<r&&(r=s))}}return e&&h?[e,h]:void 0};class ac extends Gu{constructor(){super(...arguments),this.NM=[],this.ku=[],this.S_=[],this.b_=[],this.$M=1e3,this.GM=0,this.Xi=ge.onHover,this.Ll={type:"disabled",packager:(t,i,s)=>t.slice()},this.x_=[],this.M_=[],this.__=!1,this.w_=(t,i)=>{const s=t.nM(i);if(s)return[pt(s[0],this.scale,this.Ls.us.ft),pt(s[1],this.scale,this.Ls.us.ft)]},this.C_=(t,i)=>{const s=t.k_(i);if(s)return[pt(s[0],this.scale,this.Ls.us.ft),pt(s[1],this.scale,this.Ls.us.ft)]},this.Kd=()=>Di(this.T_)||Di(this.F_),this.I_=t=>{const i=t.length;if(this.NM.length>0){const s=this.NM.length-1,e=this.NM[s];if(i>0){const[i,s]=e.ul(),[h,r]=e.ll();if((h?i.length+h.length:i.length)>=this.$M){const o=h&&h.length>0?h[h.length-1]:i[i.length-1],l=r&&r.length>0?r[r.length-1]:s[i.length-1],u=(o.x+t[0].position)/2,d=Es(u,o,n(t[0].position,t[0].high)).y,f=Es(u,l,n(t[0].position,t[0].low)).y,A=a(u,d,f);e.ml(A,c(n(u,f),n(u,d))).$l(!0),this.P_([A].concat(t)).Hl(!0)}else e.ml(t)}}else i>0&&this.P_(t)},this.D_=t=>{const i=this.x_,s=t.length;if(this.x_.length>0){if(s>0){const s=i[i.length-1],e=s.ul(),h=s.ll();if(e.length+h.length>=this.$M){const r=h.length>0?h[h.length-1]:e[e.length-1],o=(r.x+t[0].x)/2,a=Es(o,r,n(t[0].x,t[0].y)).y,l=n(o,a);s.ml(l,c(n(o,a),n(o,a))).$l(!0),i.push(this.B_([l].concat(t),this.HM).Hl(!0))}else s.ml(t)}}else s>0&&i.push(this.B_(t))},this.L_=t=>{const i=this.M_,s=t.length;if(this.M_.length>0){if(s>0){const s=i[i.length-1],e=s.ul(),h=s.ll();if(e.length+h.length>=this.$M){const r=h.length>0?h[h.length-1]:e[e.length-1],o=(r.x+t[0].x)/2,a=Es(o,r,n(t[0].x,t[0].y)).y,l=n(o,a);s.ml(l,c(n(o,a),n(o,a))).$l(!0),i.push(this.R_([l].concat(t)).Hl(!0))}else s.ml(t)}}else s>0&&i.push(this.R_(t))}}ds(){return"ProgressiveX"}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.GM=void 0!==i&&i>0?i:0,this.Ls.xs(),this}clear(){for(let t=0;t<this.NM.length;t+=1)this.NM[t].dispose();for(let t=0;t<this.x_.length;t+=1)this.x_[t].dispose();for(let t=0;t<this.M_.length;t+=1)this.M_[t].dispose();return this.ku.length=0,this.S_.length=0,this.b_.length=0,this.HM=void 0,this.NM.length=0,this.x_.length=0,this.M_.length=0,this.Ls.xs(),this.L.emit("dataClear",this),this}getPointAmount(){return this.NM.reduce(((t,i)=>t+i.pl()+i.vl()),this.ku.length)}getXMax(){return ai(this.NM,ii,Math.max,ri,this.HM)||0}getXMin(){return ai(this.NM,ti,Math.min,hi,this.HM)||0}getYMax(){return ai(this.NM,ei,Math.max,oi,this.HM)||0}getYMin(){return ai(this.NM,si,Math.min,ni,this.HM)||0}Br(){const t=n(0,0);for(const i of this.NM)t.x=Math.max(t.x,i.Il()),t.y=Math.max(t.y,i.Pl());return t}fv(){return this.yv&&this.getPointAmount()>0&&this.getVisible()}wM(t){}WM(t,i,s){this.ku=ki(this.ku,t,{canReturnB:!1}),this.S_=ki(this.S_,i,{canReturnB:!1}),this.b_=ki(this.b_,s,{canReturnB:!1}),this.Ls.xs()}E_(t,i,s,e){this.z_(i,s,e),this.WM(Array.isArray(t)?t:[t],i,s)}z_(t,i,s){const e=bs(vs(t),vs(i));this.HM?this.HM=bs(this.HM,e):this.HM=e,s&&(this.HM=bs(this.HM,s))}V_(){const t=this.NM.length,i=Math.min(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd());let s=0;if(t>1)for(let e=0;e<t-1;e+=1)this.scale.x.gi(this.NM[e].vt(),this.NM[e].Il())<i&&(s+=1);return s}XM(t,i,s,e){if(s>0){const h=Math.ceil(s/i),r=t.length-h;if(r>0&&e>0){const i=r-e>0?e:r;if(i>0){for(let s=0;s<i;s+=1)t[s].dispose();t.splice(0,i)}}}}O_(t){const i=this.NM.length>0?this.NM[this.NM.length-1]:void 0,s=i?i.ul()[0].length+(i.ll()[0]?i.ll()[0].length:0):void 0;Uu(t,s,this.$M,this.I_)}N_(t){const i=this.x_.length>0?this.x_[this.x_.length-1].ul().length+this.x_[this.x_.length-1].ll().length:void 0;Uu(t,i,this.$M,this.D_)}G_(t,i){const s=this.x_.length>0?this.x_[this.x_.length-1].ul().length+this.x_[this.x_.length-1].ll().length:void 0;Uu(t,s,this.$M,this.D_),Uu(i,s,this.$M,this.L_)}P_(t,i){const s=this.Ls.U_(this.scale).ml(t,i).Le(this.T_).Wl(this.F_).Gl(this.Ll).cs(this.getHighlight());return this.NM.push(s),this.fs(s),s}W_(t,i,s){const e=this.Ls.Ap(this.scale,void 0,[xl.UserSeries]).ml(t,s).setMouseInteractions(!1).We(i).cs(this.getHighlight());return this.fs(e),e}B_(t,i){return this.W_(t,this.Y_,i)}R_(t,i){return this.W_(t,this.H_,i)}X_(t){this.T_="function"==typeof t?t(this.T_):t;const i=this.T_;for(let t=0;t<this.NM.length;t+=1)this.NM[t].Le(i);this.Ls.xs()}j_(t){this.F_="function"==typeof t?t(this.F_):t;const i=this.F_;for(let t=0;t<this.NM.length;t+=1)this.NM[t].Wl(i);this.Ls.xs()}Z_(){return this.T_}Yl(){return this.F_}Q_(t){this.Y_="function"==typeof t?t(this.Y_):t;const i=this.Y_;for(let t=0;t<this.x_.length;t+=1)this.x_[t].We(i);this.Ls.xs()}J_(t){this.H_="function"==typeof t?t(this.H_):t;const i=this.H_;for(let t=0;t<this.M_.length;t+=1)this.M_[t].We(i);this.Ls.xs()}K_(){return this.Y_}q_(){return this.H_}Ve(t,i){t.cs(i),this.tw(i),this.Ls.xs()}tw(t){for(let i=0;i<this.x_.length;i+=1)this.x_[i].cs(t);for(let i=0;i<this.M_.length;i+=1)this.M_[i].cs(t)}wv(){if(super.wv(),this.__=!1,this.GM>0){const t=this.V_();this.XM(this.NM,this.$M,this.GM,t),this.x_.length>0&&this.XM(this.x_,this.$M,this.GM,t),this.M_.length>0&&this.XM(this.M_,this.$M,this.GM,t),this.__=!0}}Ee(){if(super.Ee(),this.ku.length>0&&(this.O_(this.ku),this.iw(this.S_,this.b_),this.__=!0),this.__){const t=this.getBoundaries();for(const i of this.NM)i.ia(t);for(const i of this.x_)i.ia(t);for(const i of this.M_)i.ia(t)}}Fp(){super.Fp(),this.HM=void 0,this.ku.length=0,this.S_.length=0,this.b_.length=0}}class lc extends ac{constructor(t,i,s,e,h,r,n,o,a=0,l,u){super(t,i,s,e,h,r,n,o,l,u),this.chart.us.Qn(Yo.kf),this.sw=a}add(t){0!==this.NM.length&&this.chart.us.Qn(Yo.Pf);const i=Array.isArray(t)?t:[t];if(i.length>0){const t=this.ew(i),[s,e]=this.hw(t);this.E_(t,s,e,c(n(es,this.sw),n(hs,this.sw)));const h=this.ku[this.ku.length-1];this.YM=h?{position:h.position,high:h.high,low:h.low}:void 0,this.L.emit("dataAdd",this,i,this.HM)}return this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.YM?this.YM.position+i:0),this.add(Hu(t,i,e)),this}QM(t){return this.L.on("dataAdd",t)}JM(t){return this.L.off(t)}KM(t){return this.L.on("dataClear",t)}qM(t){return this.L.off(t)}}class uc extends lc{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l,u);const c=t.getSeries().length;this.T_=Ri(this.qi.areaSeriesBipolarHighFillStyle,c),this.Y_=Ri(this.qi.areaSeriesBipolarHighStrokeStyle,c),this.F_=Ri(this.qi.areaSeriesBipolarLowFillStyle,c),this.H_=Ri(this.qi.areaSeriesBipolarLowStrokeStyle,c)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=oc(e,this.NM,Ua(i)?this.C_:this.w_);if(void 0!==h&&void 0!==h[0]){const t=pt(h[0][0],this.Ls.us.ft,this.scale),i=pt(h[0][1],this.Ls.us.ft,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY,multiHit:[t,i]}}}ew(t){return this.rw(t)}iw(t,i){return this.G_(t,i)}rw(t){let i=0;const s=[],e=t.length,h=this.sw;return e>0&&(this.nw&&(this.nw.y<=h&&h<=t[0].y||this.nw.y>=h&&h>=t[0].y)&&(s[i]=a(.5*(this.nw.x+t[0].x),h,h),i+=1),this.nw=t[e-1],1===e?this.ow(t[0],s,i):this.aw(t,s)),s}ow(t,i,s=0){return i[s]=a(t.x,t.y,this.sw),s+1}aw(t,i){let s=0,e=0;const h=t.length-1,r=this.sw;for(;e<h;){const h=t[e],n=t[e+=1],o=a(h.x,h.y,r);if(0!==s&&li(i[s-1],o)||(i[s]=o,s+=1),h.y<=r&&r<=n.y||h.y>=r&&r>=n.y){const t=h.y,e=n.y,o=r,l=t===e?n.x:pn(h.x,n.x,(o-t)/(e-t));i[s]=a(l,r,r),s+=1}i[s]=a(n.x,n.y,r),s+=1}return s}hw(t){const i=t.length,s=Array(i),e=Array(i),h=this.sw;for(let r=0;r<i;r+=1){const i=t[r];i.high>h?(s[r]=n(i.position,i.high),e[r]=n(i.position,h)):i.high<h?(s[r]=n(i.position,h),e[r]=n(i.position,i.high)):(s[r]=n(i.position,i.high),e[r]=n(i.position,i.high))}return[s,e]}ZM(){return Wu(this.NM,(t=>t[0]))}setPositiveFillStyle(t){return this.X_(t),this}setNegativeFillStyle(t){return this.j_(t),this}setPositiveStrokeStyle(t){return this.Q_(t),this}setNegativeStrokeStyle(t){return this.J_(t),this}getPositiveFillStyle(){return this.Z_()}getNegativeFillStyle(){return this.Yl()}getPositiveStrokeStyle(){return this.K_()}getNegativeStrokeStyle(){return this.q_()}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.T_,fill2:this.F_,behavior:{colorStep:!0}})}}class cc extends lc{constructor(){super(...arguments),this.H_=dt}iw(t){return this.N_(t)}hw(t){const i=t.length,s=Array(i);for(let e=0;e<i;e+=1){const i=t[e];s[e]=n(i.position,i.high)}return[s,[]]}setStrokeStyle(t){return this.Q_(t),this}getStrokeStyle(){return this.K_()}}class dc extends cc{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l,u);const c=t.getSeries().length;this.T_=O,this.F_=Ri(this.qi.areaSeriesNegativeFillStyle,c),this.Y_=Ri(this.qi.areaSeriesNegativeStrokeStyle,c)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=oc(e,this.NM,Ua(i)?this.C_:this.w_);if(void 0!==h&&void 0!==h[0]){const t=pt(h[0][0],this.Ls.us.ft,this.scale),i=pt(h[0][1],this.Ls.us.ft,this.scale),s=t.y<i.y?t:i;return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.axisX,y:this.axisY}},...s,series:this,axisX:this.axisX,axisY:this.axisY}}}ew(t){return this.lw(t)}lw(t){const i=[];return 1===t.length?this.ow(t[0],i):this.aw(t,i),i}ow(t,i,s=0){const e=this.sw;return i[s]=t.y>e?a(t.x,e,e):a(t.x,t.y,e),s+1}aw(t,i,s=0){let e=0;const h=t.length-1,r=this.sw;for(;e<h;){const h=t[e],o=t[e+=1];if(h.y<=r){const t=a(h.x,h.y,r);if(0!==s&&li(i[s-1],t)||(i[s]=t,s+=1),o.y>r){const t=Gs(n(hs,r),n(es,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,r,r),s+=1}else i[s]=a(o.x,o.y,r),s+=1}else{const t=a(h.x,r,r);if(0!==s&&li(i[s-1],t)||(i[s]=t,s+=1),o.y<=r){const t=Gs(n(hs,r),n(es,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,o.y,r),s+=1}else i[s]=a(o.x,r,r),s+=1}}return s}ZM(){return Wu(this.NM,(t=>t[1]))}setFillStyle(t){return this.j_(t),this}getFillStyle(){return this.Yl()}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.F_,stroke:this.Y_})}}class fc extends cc{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,i,s,e,h,r,n,o,a,l,u);const d=c;this.T_=Ri(this.qi.areaSeriesPositiveFillStyle,d),this.F_=O,this.Y_=Ri(this.qi.areaSeriesPositiveStrokeStyle,d)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=oc(e,this.NM,Ua(i)?this.C_:this.w_);if(void 0!==h&&void 0!==h[0]){const t=pt(h[0][0],this.Ls.us.ft,this.scale),i=pt(h[0][1],this.Ls.us.ft,this.scale),s=t.y<i.y?i:t;return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.axisX,y:this.axisY}},...s,series:this,axisX:this.axisX,axisY:this.axisY}}}ew(t){return this.uw(t)}uw(t){const i=[];return 1===t.length?this.ow(t[0],i):this.aw(t,i),i}ow(t,i,s=0){const e=this.sw;return i[s]=t.y<e?a(t.x,e,e):a(t.x,t.y,e),s+1}aw(t,i,s=0){let e=0;const h=t.length-1,r=this.sw;for(;e<h;){const h=t[e],o=t[e+=1];if(h.y>=r){const t=a(h.x,h.y,r);if(0!==s&&li(i[s-1],t)||(i[s]=t,s+=1),o.y<r){const t=Gs(n(hs,r),n(es,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,r,r),s+=1}else i[s]=a(o.x,o.y,r),s+=1}else{const t=a(h.x,r,r);if(0!==s&&li(i[s-1],t)||(i[s]=t,s+=1),o.y>=r){const t=Gs(n(hs,r),n(es,r),h,o);t&&(i[s]=a(t.x,t.y,r),s+=1),i[s]=a(o.x,o.y,r),s+=1}else i[s]=a(o.x,r,r),s+=1}}return s}ZM(){return Wu(this.NM,(t=>t[0]||[]))}setFillStyle(t){return this.X_(t),this}getFillStyle(){return this.Z_()}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.T_,stroke:this.Y_})}}const Ac={Positive:fc,Negative:dc,Bipolar:uc};class gc extends ac{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l),this.chart.us.Qn(Yo.kf);const c=u;this.T_=Ri(this.qi.areaRangeSeriesFillStyle,c),this.Y_=Ri(this.qi.areaRangeSeriesStrokeStyle,c),this.F_=Ri(this.qi.areaRangeSeriesFillStyleInverted,c),this.H_=Ri(this.qi.areaRangeSeriesStrokeStyleInverted,c)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=oc(e,this.NM,Ua(i)?this.C_:this.w_);if(void 0!==h&&void 0!==h[0]){const t=pt(h[0][0],this.Ls.us.ft,this.scale),i=pt(h[0][1],this.Ls.us.ft,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY,multiHit:[t,i]}}}add(t){const i=Array.isArray(t)?t:[t],[s,e]=u(i);this.E_(t,s,e);const h=this.ku[this.ku.length-1];return this.YM=h?{position:h.position,high:h.high,low:h.low}:void 0,this.L.emit("dataAdd",this,i,this.HM),this}addArraysHighLow(t,i,s=1,e=0){if(t.length!==i.length)throw new Error("arrayHigh and arrayLow lengths are not equal");{let h=e;h||(h=this.YM?this.YM.position+s:0),this.add(((t,i,s=1,e)=>{const h=void 0!==e?e:0,r=new Array(t.length);for(let e=0;e<t.length;e+=1)r[e]={position:h+s*e,high:t[e],low:i[e]};return r})(t,i,s,h))}return this}iw(t,i){this.G_(t,i)}setHighFillStyle(t){return this.X_(t),this}setLowFillStyle(t){return this.j_(t),this}setHighStrokeStyle(t){return this.Q_(t),this}setLowStrokeStyle(t){return this.J_(t),this}getHighFillStyle(){return this.Z_()}getLowFillStyle(){return this.Yl()}getHighStrokeStyle(){return this.K_()}getLowStrokeStyle(){return this.q_()}ZM(){return Wu(this.NM,(t=>{const i=t[0],s=t[1];if(!i||!s)return[];const e=[],h=i.length;for(let t=0;t<h;t+=1)e[t]={position:i[t].x,high:i[t].y,low:s[t].y};return e}))}QM(t){return this.L.on("dataAdd",t)}JM(t){return this.L.off(t)}KM(t){return this.L.on("dataClear",t)}qM(t){return this.L.off(t)}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.T_,fill2:this.F_,behavior:{colorStep:!0}})}}var yc;!function(t){t[t.before=0]="before",t[t.middle=.5]="middle",t[t.after=1]="after"}(yc||(yc={}));const mc=(t,i)=>{const s=[],e=t.length,h=i;if(e>0){let i=0,r=t[0];s[i]=r,i+=1;for(let o=1;o<e;o+=1){const e=t[o];if(h<=0)s[i]=n(r.x,e.y),i+=1;else{const t=r.x*(1-h)+e.x*h;s[i]=n(t,r.y),i+=1,s[i]=n(t,e.y),i+=1}s[i]=e,i+=1,r=e}}return s},pc=(t,i)=>{const s=t*t,e=s*t,h=1-t,r=h*h,o=r*h;return n(o*i[0].x+3*t*r*i[1].x+3*s*h*i[2].x+e*i[3].x,o*i[0].y+3*t*r*i[1].y+3*s*h*i[2].y+e*i[3].y)},vc=(t,i=32)=>{if(2===t.length)return[t[0],t[1]];const s=(t=>{const i=1e-5,s=t.length-1,e=Array(s);if(s>1){let h=n(0,0),r=n(0,0),o=n(0,0),a=Cs(Ps(t[1],t[0]));const l=3;let u=0,c=0;for(let d=0;d<s;d+=1){const f=Array(4);if(f[0]=t[d],f[1]=t[d],f[3]=t[d+1],f[2]=t[d+1],o=a,h=r,d+1<s?(a=t[d+2]===t[d+1]?n(0,0):Cs(Ps(t[d+2],t[d+1])),r=Cs(Is(o,a))):r=n(0,0),t[d+1].y===t[d].y)u=0,c=0;else{const s=t[d+1].x-t[d].x;u=Math.abs(h.x)>i?Math.abs(s/(l*h.x)):1,c=Math.abs(r.x)>i?Math.abs(s/(l*r.x)):1}f[1]=Is(Fs(h,u),f[1]),f[2]=Ps(f[2],Fs(r,c)),e[d]=f}}return e.length>0?e:[]})(t),e=s.length,h=Array(e*i);let r=0;for(let t=0;t<e;t+=1)for(let e=0;e<=i;e+=1)h[r]=pc(e/i,s[t]),r+=1;return h};class Sc extends Xu{constructor(t,i,s,e,h,r,o,a,l,u,d,f,A,g,y){super(t,i,s,e,h,r,o,a,l,d,f),this.NM=[],this.$M=1e5,this.aM=5,this.Ca=0,this.qa=!1,this.tl=!1,this.il=!1,this.cw=1,this.dw=[],this.fw=(t,i)=>{const s=t.ed(i);if(s)return pt(s,this.scale,this.Ls.us.ft)},this.Aw=(t,i)=>{const s=t.k_(i);if(s)return pt(s,this.scale,this.Ls.us.ft)},this.gw=t=>{if(this.NM.length>0){const i=this.NM[this.NM.length-1];if(t.length>0){const s=i.ul(),e=i.ll(),h=s.length+e.length-+i.Xl();if(h>=this.$M){const r=e.length>0?e[e.length-1]:s[i.Xl()?h:h-1],o=n((r.x+t[0].x)/2,(r.y+t[0].y)/2);i.ml(o,c(n(o.x,o.y),n(o.x,o.y))).$l(!0),this.yw([o].concat(t)).Hl(!0)}else i.ml(t,this.HM)}}else t.length>0&&this.yw(t)},this.mw=t=>{if(this.dw.length>0){const i=this.dw[this.dw.length-1];t.length>0&&((i.ul().length+i.ll().length)*this.cw>=this.$M?this.pw(t):i.ml(t))}else t.length>0&&this.pw(t)},this.qn=y,this.lM=u,this.Sw=A,this.bw=Ri(d.pointLineSeriesFillStyle,g),this.vu=Ri(this.qi.pointLineSeriesStrokeStyle,g)}add(t){return super.add(t),this}ZM(){return Wu(this.dw)}setStrokeStyle(t){this.vu="function"==typeof t?t(this.vu):t;const i=this.vu;for(let t=0;t<this.NM.length;t+=1)this.NM[t].We(i);return this.Ls.xs(),this}getStrokeStyle(){return this.vu}setPointFillStyle(t){this.bw="function"==typeof t?t(this.bw):t;const i=this.bw;for(let t=0;t<this.dw.length;t+=1)this.dw[t].Le(i);return this.Ls.xs(),this}getPointFillStyle(){return this.bw}setPointSize(t){this.aM=t;for(let i=0;i<this.dw.length;i+=1)this.dw[i].tt(t);return this.Ls.xs(),this}getPointSize(){return this.aM}getPointShape(){return this.lM}setPointRotation(t){this.Ca=t;for(let i=0;i<this.dw.length;i+=1)this.dw[i].ir(t);return this.Ls.xs(),this}getPointRotation(){return this.Ca}setIndividualPointSizeEnabled(t){this.qa=t,t&&this.chart.us.Qn(Yo.Df);for(let i=0;i<this.dw.length;i+=1)this.dw[i].fl(t);return this.Ls.xs(),this}getIndividualPointSizeEnabled(){return this.qa}setIndividualPointRotationEnabled(t){this.tl=t;for(let i=0;i<this.dw.length;i+=1)this.dw[i].Al(t);return this.Ls.xs(),this}getIndividualPointRotationEnabled(){return this.tl}setIndividualPointValueEnabled(t){this.il=t;for(let i=0;i<this.dw.length;i+=1)this.dw[i].yl(t);return this.Ls.xs(),this}getIndividualPointValueEnabled(){return this.il}setVisible(t){return super.setVisible(t),this.dw.forEach((i=>i.setVisible(t))),this}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY};if(0===this.NM.length)return;const h=this.NM[0].Ko()||dr.NearestX,r=Ua(i)?$u(e,this.NM,this.Aw,h===dr.NearestX?(t,i)=>Math.abs(t.x-i.x):h===dr.NearestY?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2):$u(e,this.dw,this.fw,h===dr.NearestX?(t,i)=>Math.abs(t.x-i.x):h===dr.NearestY?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==r){const t=pt(r[0],this.Ls.us.ft,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}Kd(){return Di(this.bw)||Di(this.vu.getFillStyle())}Ds(){return this._s||this.lM}wM(t){}Ve(t,i){t.cs(i),this.Ls.xs()}jM(t){const i=this.NM.length>0?this.NM[this.NM.length-1].ul().length+this.NM[this.NM.length-1].ll().length-+this.NM[this.NM.length-1].Xl():void 0;Uu(t,i,this.$M,this.gw),Uu(t,i,this.$M,this.mw)}pw(t,i){const s=this.Ls.Ov(this.scale).ml(t,i).setMouseInteractions(this.Hi).Le(this.bw).cl(this.lM).tt(this.aM).ir(this.Ca).fl(this.qa).Al(this.tl).yl(this.il).cs(this.getHighlight());return this.fs(s),this.dw.push(s),s}yw(t,i){const s=this.Ls.Ap(this.scale,void 0,[xl.UserSeries,...this.Sw]).ml(t,i).setMouseInteractions(this.Hi).We(this.vu).cs(this.getHighlight());return this.fs(s),this.NM.push(s),s}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{stroke:this.vu,fill:this.bw})}getPointAmount(){return this.dw.reduce(((t,i)=>t+i.pl()+i.vl()),this.ku.length)}clear(){super.clear();for(let t=0;t<this.NM.length;t+=1)this.NM[t].dispose();this.NM.length=0;for(let t=0;t<this.dw.length;t+=1)this.dw[t].dispose();return this.dw.length=0,this}XM(t,i,s,e){super.XM(t,i,s,e),this.UM.XM(this.dw,i,s,e,this.scale,(t=>{}))}}const bc=(t,i)=>t.ll().length>=i?t.ll().slice(-i):Array.prototype.concat(t.ul(),t.ll()).slice(-i),xc=(t,i,s)=>{const e=Array.prototype.concat(t.ul(),t.ll()).slice(0,-s-1).concat(i.slice(s+1,2*s+2));t.Vt().ml(e).Vs()};class Mc extends Sc{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d,f,A){super(t,i,s,e,h,r,n,o,a,l,u,c,d,f,A),this.cw=32,this.$M=8e3,this.xw=t=>{if(0===t.length)return;const i=this.dw.length;if(i>0){const s=i>1,e=this.dw[i-1];if(s){const s=Array.prototype.concat(e.ul(),e.ll()),h=s.length;if(32*h>=this.$M){const s=bc(e,3),h=Array.prototype.concat(s,t),r=vc(h,32);xc(this.NM[i-1],r,32),this.yw(r.slice(66))}else if(h<5){const e=this.dw[i-2],h=bc(e,3),r=Array.prototype.concat(h,s,t),n=vc(r,32),o=this.NM[i-1],a=n.slice(66);o.Vt().ml(a).Vs()}else{const s=this.NM[i-1],h=Array.prototype.concat(s.ul(),s.ll()),r=bc(e,4),n=Array.prototype.concat(r,t),o=vc(n,32),a=h.slice(0,-66).concat(o.slice(33));s.Vt().ml(a).Vs()}}else{const s=Array.prototype.concat(e.ul(),e.ll()),h=s.length,r=this.NM[i-1];if(32*h>=this.$M){const i=bc(e,3),s=Array.prototype.concat(i,t),h=vc(s,32);xc(this.NM[0],h,32),this.yw(h.slice(66))}else if(h+t.length>1){const i=Array.prototype.concat(s,t),e=vc(i,32);r.Vt().ml(e).Vs()}else r.ml(t)}}else{const i=t.length>0?vc(t,32):t,s=vs(i);this.yw(i,s)}this.mw(t)}}jM(t){const i=this.dw.length,s=this.dw.length>0?this.dw[i-1].ul().length+this.dw[i-1].ll().length:void 0;Uu(t,s,Math.ceil(this.$M/this.cw),this.xw)}}class _c{constructor(){this.Ni="FreeformPattern",this.Ll={type:"disabled",packager:(t,i,s)=>t.slice()}}XM(t,i,s,e,h,r){if(e>0){const h=Math.trunc((i-e)/s);if(h>0&&t.length>1){const i=t.splice(0,h);for(let t=0;t<i.length;t+=1)r(i[t]),i[t].dispose()}}}Mw(t,i){const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)}getXMax(t=[],i){return ai(t,ii,Math.max,ri,i)}getXMin(t=[],i){return ai(t,ti,Math.min,hi,i)}getYMax(t=[],i){return ai(t,ei,Math.max,oi,i)}getYMin(t=[],i){return ai(t,si,Math.min,ni,i)}}const wc=t=>{switch(t){case"normal":default:return 1;case"high":return.25}},Cc=i({Ll:{type:"disabled",packager:(t,i,s)=>t.slice()}});class kc extends Cc{XM(t,i,s,e,h,r){if(e>0){const i=Math.ceil(e/s),n=t.length-i;if(n>0){const i=this.V_(t,h);if(i>0){const s=n-i>0?i:n;if(s>0){for(let i=0;i<s;i+=1)r(t[i]),t[i].dispose();t.splice(0,s)}}}}}}const Tc=(t,i)=>{const s=i.St();return t?Math.min(s,t):s},Fc=(t,i)=>{const s=i.bt();return t?Math.max(s,t):s};class Ic extends kc{Mw(t,i){return Math.abs(t.x-i.x)}getYMax(t=[],i){return t.reduce(Fc,i?i.max.y:void 0)}getYMin(t=[],i){return t.reduce(Tc,i?i.min.y:void 0)}}const Pc=(t,i)=>{const s=i.yt();return t?Math.min(s,t):s},Dc=(t,i)=>{const s=i.vt();return t?Math.max(s,t):s};class Bc extends kc{Mw(t,i){return Math.abs(t.y-i.y)}getXMax(t=[],i){return t.reduce(Dc,i?i.max.x:void 0)}getXMin(t=[],i){return t.reduce(Pc,i?i.min.x:void 0)}}const Lc={horizontalProgressive:new class extends Ic{constructor(){super({Ll:hr()}),this.Ni="HorizontalProgressivePattern"}V_(t,i){const s=t.length,e=Math.min(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.x.gi(t[r].vt(),t[r].Il())<e&&(h+=1);return h}getXMax(t=[],i){return void 0!==i?i?i.max.x:void 0:t.length>0?t[t.length-1].vt():void 0}getXMin(t=[],i){return t.length>0&&t[0].pl()>0?t[0].yt():i?i.min.x:void 0}setPrecision(t){return this.set("_columnPackaging",hr(wc(t)))}},horizontalRegressive:new class extends Ic{constructor(){super({Ll:rr()}),this.Ni="HorizontalRegressivePattern"}V_(t,i){const s=t.length,e=Math.max(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.x.gi(t[r].yt(),-t[r].Il())&&(h+=1);return h}getXMax(t=[],i){return t.length>0&&t[0].pl()>0?t[0].vt():i?i.max.x:void 0}getXMin(t=[],i){return void 0!==i?i?i.min.x:void 0:t.length>0?t[t.length-1].yt():void 0}setPrecision(t){return this.set("_columnPackaging",rr(wc(t)))}},verticalProgressive:new class extends Bc{constructor(){super({Ll:nr()}),this.Ni="VerticalProgressivePattern"}V_(t,i){const s=t.length,e=Math.min(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.y.gi(t[r].bt(),t[r].Pl())<e&&(h+=1);return h}getYMax(t=[],i){return void 0!==i?i?i.max.y:void 0:t.length>0?t[t.length-1].bt():void 0}getYMin(t=[],i){return t.length>0&&t[0].pl()>0?t[0].St():i?i.min.y:void 0}setPrecision(t){return this.set("_columnPackaging",nr(wc(t)))}},verticalRegressive:new class extends Bc{constructor(){super({Ll:or()}),this.Ni="VerticalRegressivePattern"}V_(t,i){const s=t.length,e=Math.max(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.y.gi(t[r].St(),-t[r].Pl())&&(h+=1);return h}getYMax(t=[],i){return t.length>0&&t[0].pl()>0?t[0].bt():i?i.max.y:void 0}getYMin(t=[],i){return void 0!==i?i?i.min.y:void 0:t.length>0?t[t.length-1].St():void 0}setPrecision(t){return this.set("_columnPackaging",or(wc(t)))}},freeform:new _c};class Rc extends Sc{constructor(t,i,s,e,h,r,o,a,l,u,d,f,A,g,y){super(t,i,s,e,h,r,o,a,Lc.horizontalProgressive,l,d,f,A,g,y),this.gw=t=>{const i=this.NM.length>0?this.NM[this.NM.length-1].ul().length+this.NM[this.NM.length-1].ll().length:void 0;Uu(t,i,this.$M,this._w)},this._w=t=>{const i=t.length;if(this.NM.length>0){const s=this.NM[this.NM.length-1];if(i>0){const i=s.ul(),e=s.ll(),h=e.length>0?e[e.length-1]:i[i.length-1],r=mc([h].concat(t),this.ww);r.shift();const o=n((h.x+r[0].x)/2,(h.y+r[0].y)/2),a=Array.prototype.concat(o,r);(e.length>0?i.length+e.length:i.length)>=this.$M?(s.ml(o,c(n(o.x,o.y),n(o.x,o.y))).$l(!0),this.yw(a).Hl(!0),this.pw(t)):s.ml(a)}}else i>0&&this.yw(mc(t,this.ww));this.mw(t)},this.ww=u,void 0===this.Sw.find((t=>"DataPattern"===t.type))&&this.Sw.push({type:"DataPattern",args:{pattern:"ProgressiveX"}})}}class Ec extends Gu{constructor(t,i,s,e,h,r,n,a,l,u){super(t,i,s,e,h,r,n,a,l,u),this.Cw=t=>t[4]>=t[1],this.DM=c(o(es,es),o(hs,hs)),this.kw=[],this.Tw=!1,this.Fw=-1,this.Iw=[],this.Pw=!0,this.Dw=!1,this.Bw=4,this.Lw=[1e-7,1e-6,1e-5,1e-4,.001,.01,.1,1,5,10,30,60,300,600,1800,3600,7200,14400,28800,36e3,43200,50400,57600,64800,72e3,86400,172800,259200,345600,432e3,604800,1209600,2592e3,7776e3,10368e3,15552e3,31536e3,15768e4,31536e4,63072e4,7884e5,15768e5,31536e5,3942e6,47304e5,63072e5,7884e6,15768e6,31536e6,3942e7,47304e6,63072e6,7884e7,15768e7,31536e7,63072e7,7884e8,15768e8,31536e8,47304e8,63072e8],this.chart.us.Qn(Yo.mf)}ZM(){return this.Iw}QM(t){return this.L.on("dataAdd",t)}JM(t){return this.L.off(t)}KM(t){return this.L.on("dataClear",t)}qM(t){return this.L.off(t)}fv(){return this.yv&&this.Iw.length>0&&this.getVisible()}Rw(t){if(!(this.Iw.length<1))return[this.Iw[t][0],this.Iw[t][1],this.Iw[t][2],this.Iw[t][3],this.Iw[t][4]]}solveNearest(t,i){if(0===this.Iw.length)return;const s=this.chart.translateCoordinate(t,{x:this.axisX,y:this.axisY}).x,e=void 0!==this.getPackDataState();let h,r,o,a,l;if(e){const t=this.Ew;if(!t)return;const i=ji(s,t.length-1,(i=>t[i][0])),e=void 0!==i&&t[i];if(!e)return;a=e[3],o=e[2],r=e[1],l=e[4],h=e[0]}else{const t=ji(s,this.Iw.length-1,(t=>this.Iw[t][0])),i=void 0!==t&&this.Iw[t];if(!i)return;h=i[0],r=i[1],o=i[2],a=i[3],l=i[4]}return{cursorPosition:{resultTable:n(h,l),resultTableScale:this.scale,pointMarker:n(h,l),pointMarkerScale:{x:this.axisX,y:this.axisY}},x:h,y:l,open:r,high:o,low:a,close:l,position:h,isPacked:e,series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){return qi({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,open:0,high:0,low:0,close:0,position:0,isPacked:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}wM(t){if(!(t.x instanceof te))throw new Error("OHLCSeries must be attached to a Linear X Axis.");this.zw=t.x}Br(){return n(5,5)}__(t){const i=t.length-1;if(i<0)return this;for(let s=0;s<=i;s+=1)t[s][3]<this.DM.min.y&&(this.DM.min.y=t[s][3]),this.DM.max.y<t[s][2]&&(this.DM.max.y=t[s][2]);return this.DM.min.x=Math.min(this.DM.min.x,t[0][0]),this.DM.max.x=Math.max(this.DM.max.x,t[i][0]),this}getXMax(){return this.DM.max.x}getXMin(){return this.DM.min.x}getYMax(){return this.DM.max.y}getYMin(){return this.DM.min.y}add(t){this.Iw.length>0&&this.chart.us.Qn(Yo.Pf);const i=Array.isArray(t[0])?t:[t[0]];if(i.length>0){this.Tw=!0;const t=this.Iw.length,s=this.kw.length,e=i.length;this.Iw.length=t+e,this.kw.length=s+e;for(let h=0;h<e;h+=1)this.Iw[t+h]=i[h],this.kw[s+h]=this.Iw[t+h];this.__(i),this.L.emit("dataAdd",this,i,void 0),this.Ls.xs()}return this}setPackData(t){return t!==this.Pw&&(this.Dw=!0,this.Pw=t,this.chart.us.xs()),this}getPackData(){return this.Pw}getPackDataState(){const t=this.Fw;if(!(t<0||void 0===this.Ew||this.Ew.length===this.Iw.length))return{figureAxisInterval:t}}setFigureWidth(t){return this.Vw=t,this.chart.us.xs(),this}getFigureWidth(){return this.Vw}setFigureMinimumGap(t){return this.Bw=t,this.chart.us.xs(),this}getFigureMinimumGap(){return this.Bw}clear(){return this.Iw=[],this.kw=[],this.Ew=void 0,this.Ow(),this.DM.min.x=es,this.DM.min.y=es,this.DM.max.x=hs,this.DM.max.y=hs,this.L.emit("dataClear",this),this}Nw(t){return this.zw.getPixelSize()*t/1e3}Gw(){const t=this.Lw.length-1,i=this.Nw(this.Vw+this.Bw);let s=ji(i,t,(t=>this.Lw[t]));return void 0===s?s=i<this.Lw[0]?0:this.Lw[t]<i?t:this.Lw.length/2:this.Lw[s]<i&&(s+=1),this.Lw.length<=s&&(s=t),1e3*this.Lw[s]}Ee(){if(super.Ee(),!this.Pw){this.Ew=void 0;let t=null;if(this.Dw?(this.Dw=!1,t=this.Iw,this.Ow()):t=this.kw,t.length>=1){for(let i=0;i<t.length;i+=1){const s=t[i],e=s[0];this.Cw(s)?this.Uw(e,s):this.Ww(e,s)}this.kw.length=0,this.Tw=!1,this.Fw=-1}}}Fp(){super.Fp();const t=this.Gw();if(this.Pw&&this.Iw.length>=1&&(t!==this.Fw||this.Tw||this.Dw)){this.Dw=!1,this.Fw=t,this.Tw=!1,this.Ow(),this.Ew=[];const i=this.Iw.length;let s=this.Iw[0][0]-this.Iw[0][0]%(t/2)+t,e=0;for(;e<i;){let h=this.Rw(e);if(void 0===h)break;let r=h[3],n=h[2];const o=e;for(e+=1;e<i&&this.Iw[e][0]<s;)h=this.Iw[e],this.Iw[e][3]<r&&(r=this.Iw[e][3]),n<this.Iw[e][2]&&(n=this.Iw[e][2]),e+=1;const a=e-1;let l=h[0];o<a&&(l=this.Iw[a][0],h=[l,this.Iw[o][1],n,r,this.Iw[a][4]]),h[1]<h[4]?this.Uw(l,h):this.Ww(l,h),this.Ew.push(h),s+=t}}}}class zc extends Ec{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.Yw=1175494351e-14,this.Vw=this.qi.ohlcCandleThicknessPixels||5,this.Hw=this.qi.ohlcCandleTailStrokeStylePositive,this.Xw=this.qi.ohlcCandleTailStrokeStyleNegative,this.$w=this.qi.ohlcCandleBodyFillStylePositive,this.jw=this.qi.ohlcCandleBodyFillStyleNegative,this.Zw=s.Zg(this.scale).We(new _e({thickness:this.Vw,fillStyle:this.$w})),this.Zw.wu={x:0,y:1},this.Qw=s.Zg(this.scale).We(new _e({thickness:this.Vw,fillStyle:this.jw})),this.Qw.wu={x:0,y:-1},this.Jw=s.Zg(this.scale).We(this.Hw),this.Kw=s.Zg(this.scale).We(this.Xw),this.fs(this.Zw),this.fs(this.Qw),this.fs(this.Jw),this.fs(this.Kw)}setBodyThickness(t){return this.Vw=t,this.Zw.We(new _e({thickness:this.Vw,fillStyle:this.$w})),this.Qw.We(new _e({thickness:this.Vw,fillStyle:this.jw})),this.chart.us.xs(),this}getBodyThickness(){return this.Vw}setBodyFillStylePositive(t){return this.$w="function"==typeof t?t(this.$w):t,this.Zw.We(new _e({thickness:this.Vw,fillStyle:this.$w})),this.chart.us.xs(),this}getBodyFillStylePositive(){return this.$w}setBodyFillStyleNegative(t){return this.jw="function"==typeof t?t(this.jw):t,this.Qw.We(new _e({thickness:this.Vw,fillStyle:this.jw})),this.chart.us.xs(),this}getBodyFillStyleNegative(){return this.jw}setTailStrokeStylePositive(t){return this.Hw="function"==typeof t?t(this.Hw):t,this.Jw.We(this.Hw),this.chart.us.xs(),this}getTailStrokeStylePositive(){return this.Hw}setTailStrokeStyleNegative(t){return this.Xw="function"==typeof t?t(this.Xw):t,this.Kw.We(this.Xw),this.chart.us.xs(),this}getTailStrokeStyleNegative(){return this.Xw}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.$w,fill2:this.jw,behavior:{colorStep:!0}})}Ow(){return this.Jw.Vt(),this.Kw.Vt(),this.Zw.Vt(),this.Qw.Vt(),this}Uw(t,i){return Math.abs(i[1]-i[4])<this.Yw?this.Zw.jr().Jg({x:t,y:i[1]-this.Yw},{x:t,y:i[1]+this.Yw}):this.Zw.jr().Jg({x:t,y:i[1]},{x:t,y:i[4]}),i[4]<i[2]&&this.Jw.jr().Jg({x:t,y:i[4]},{x:t,y:i[2]}),i[3]<i[1]&&this.Jw.jr().Jg({x:t,y:i[3]},{x:t,y:i[1]}),this}Ww(t,i){return Math.abs(i[1]-i[4])<this.Yw?this.Qw.jr().Jg({x:t,y:i[1]-this.Yw},{x:t,y:i[1]+this.Yw}):this.Qw.jr().Jg({x:t,y:i[1]},{x:t,y:i[4]}),i[3]<i[4]&&this.Kw.jr().Jg({x:t,y:i[3]},{x:t,y:i[4]}),i[1]<i[2]&&this.Kw.jr().Jg({x:t,y:i[1]},{x:t,y:i[2]}),this}}class Vc extends Ec{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.Vw=this.qi.ohlcBarThicknessPixels||10,this.qw=this.qi.ohlcBarStrokeStylePositive,this.tC=this.qi.ohlcBarStrokeStyleNegative,this.iC=s.Zg(this.scale).We(this.qw),this.fs(this.iC),this.sC=s.Zg(this.scale).We(this.qw),this.sC.wu={x:-this.Vw/2,y:0},this.fs(this.sC),this.eC=s.Zg(this.scale).We(this.qw),this.eC.wu={x:this.Vw/2,y:0},this.fs(this.eC),this.hC=s.Zg(this.scale).We(this.tC),this.fs(this.hC),this.rC=s.Zg(this.scale).We(this.tC),this.rC.wu={x:-this.Vw/2,y:0},this.fs(this.rC),this.nC=s.Zg(this.scale).We(this.tC),this.nC.wu={x:this.Vw/2,y:0},this.fs(this.nC)}setStrokeStylePositive(t){return this.qw="function"==typeof t?t(this.qw):t,this.iC.We(this.qw),this.sC.We(this.qw),this.eC.We(this.qw),this.chart.us.xs(),this}getStrokeStylePositive(){return this.qw}setStrokeStyleNegative(t){return this.tC="function"==typeof t?t(this.tC):t,this.hC.We(this.tC),this.rC.We(this.tC),this.nC.We(this.tC),this.chart.us.xs(),this}getStrokeStyleNegative(){return this.tC}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.qw.getFillStyle(),fill2:this.tC.getFillStyle(),behavior:{colorStep:!0}})}setFigureWidth(t){return super.setFigureWidth(t),this.sC.wu={x:-t/2,y:0},this.rC.wu={x:-t/2,y:0},this.eC.wu={x:t/2,y:0},this.nC.wu={x:t/2,y:0},this}Ow(){return this.hC.Vt(),this.iC.Vt(),this.rC.Vt(),this.sC.Vt(),this.nC.Vt(),this.eC.Vt(),this}Uw(t,i){return this.iC.jr().Jg({x:t,y:i[3]},{x:t,y:i[2]}),this.sC.jr().Jg({x:t,y:i[1]},{x:t,y:i[1]}),this.eC.jr().Jg({x:t,y:i[4]},{x:t,y:i[4]}),this}Ww(t,i){return this.hC.jr().Jg({x:t,y:i[3]},{x:t,y:i[2]}),this.rC.jr().Jg({x:t,y:i[1]},{x:t,y:i[1]}),this.nC.jr().Jg({x:t,y:i[4]},{x:t,y:i[4]}),this}}const Oc={Candlesticks:zc,Bars:Vc},Nc=t=>({defaultDragMouseStyle:Ke.Horizontal,getTitleTextRotation:()=>0,...Rl(t,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.Br().x))}),Gc=t=>({defaultDragMouseStyle:Ke.Vertical,getTitleTextRotation:t=>90*t,...Rl(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.Br().y))});class Uc extends Ka{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,o),this.oC=!1,this.aC=!1,this.lC=!1,this.uC=!1,this.cC=!1,this.dC=new Map,this.fC=new Map,this.AC=[],this.gC=[],this.yC=!0,this.mC=!0,this.pC=!1,this.vC=[],this.SC=new Set,this.bC=!1,this.Sm=h,this.xC=r,this.MC=n,this._C=o.cursorGridStrokeStyleX,this.wC=o.cursorGridStrokeStyleY}setKeepWithinAxisBoundaries(t){return this.oC=t,this.Ls.xs(),this}getKeepWithinAxisBoundaries(){return this.oC}dispose(){return super.dispose(),this.dC.forEach((t=>t.forEach((t=>t.dispose())))),this.fC.forEach((t=>t.forEach((t=>t.dispose())))),this.AC.length=0,this.gC.length=0,this.pm.length=0,this}Ee(){return this.pC&&this.setPosition(...this.vC),this.AC.forEach((t=>t.setVisible(this.ji&&this.yy).setMarkerVisible(this.ji&&this.yy&&this.yC))),this.gC.forEach((t=>t.setVisible(this.ji&&this.yy).setMarkerVisible(this.ji&&this.yy&&this.mC))),super.Ee()}im(){if(!this.oC)return super.im();const t={x:!0,y:!0},i=this.tm,s=i.getPosition(n(-1,-1),Ot.PaddedBackground),e=i.getPosition(n(1,1),Ot.PaddedBackground);return this.vC.forEach(((h,r)=>{const n=h.pointMarkerScale.x,o=h.pointMarkerScale.y,a=pt(s,i.scale,{x:n,y:o}),l=pt(e,i.scale,{x:n,y:o});As(a.x,n.Hh,n.Xh)&&As(l.x,n.Hh,n.Xh)&&(t.x=!1),As(a.y,o.Hh,o.Xh)&&As(l.y,o.Hh,o.Xh)&&(t.y=!1)})),t}setPosition(...t){if(this.vC=t,this.AC.forEach((t=>t.setVisible(!1))),this.gC.forEach((t=>t.setVisible(!1))),this.AC.length=0,this.gC.length=0,0===t.length)return this;const i=this.renderingScale,s=t[0].resultTable,e=La(t[0].resultTableScale,i),h=e===this.scale?s:pt(s,e,this.scale);this.tm.setPosition(h),this.yy=!1,this.Am.forEach((t=>{t.targetVisible=!1}));const r=new Map;return t.forEach(((t,s)=>{const e=t.pointMarkerScale.x,h=t.pointMarkerScale.y,o=r.get(e)||[],a=r.get(h)||[],l=!o.includes(t.pointMarker.x),u=!a.includes(t.pointMarker.y);o.push(t.pointMarker.x),a.push(t.pointMarker.y),r.set(e,o),r.set(h,a);const c=t.pointMarker,d=Hc(n(c.x,c.y),e,h);if(l){const t=this.Ih(e,!0);t.setValue(c.x),t.setGridStrokeLength(this.aC?d.x:1).setAllocatesAxisSpace(this.bC),this.AC.push(t)}if(u){const t=this.Ih(h,!1);t.setValue(c.y),t.setGridStrokeLength(this.lC?d.y:1).setAllocatesAxisSpace(this.bC),this.gC.push(t)}let f=this.Am[s];if(!f){const t=new eo(this.Ls,this.renderingScale,this.scale,Zt,this.qi).setMouseInteractions(!1).setFillStyle(this.qi.cursorPointMarkerFillStyle).setSize(this.qi.cursorPointMarkerSize).setShape(this.qi.cursorPointMarkerShape);f={pointMarker:t,targetVisible:!0},this.Am.push(f),this.pm.forEach((i=>i(t)))}const A=La(t.pointMarkerScale,i),g=A===this.scale?t.pointMarker:pt(t.pointMarker,A,this.scale);f.pointMarker.setPosition(g),f.targetVisible=!0;const y=e.getInterval(),m=h.getInterval(),p=Math.min(y.start,y.end),v=Math.max(y.start,y.end),S=Math.min(m.start,m.end),b=Math.max(m.start,m.end);c.x>=p&&c.x<=v&&c.y>=S&&c.y<=b&&(this.yy=!0)})),this}setTickMarkersAllocateAxisSpace(t){return this.bC=t,this.Ls.xs(),this}getTickMarkersAllocateAxisSpace(){return this.bC}Ih(t,i){this.SC.has(t)||(t.onDispose((()=>{var i;null===(i=s.get(t))||void 0===i||i.forEach((t=>t.dispose())),s.delete(t)})),this.SC.add(t));const s=i?this.dC:this.fC,e=i?this.AC:this.gC,h=s.get(t)||[];s.set(t,h);let r=h.find((t=>!e.includes(t)));return r||(r=i?t.ny(!1,this.xC):t.ny(!1,this.MC),h.push(r),this.Sr(r,i),r.setMouseInteractions(!1)),r}Sr(t,i){const s=i?this._C:this.wC;return t.setGridStrokeStyle(s),t.setMouseInteractions(!1),(i?this.yC:this.mC)?t.setMarkerVisible(!0):t.setMarkerVisible(!1),t}setGridStrokeXCut(t){return this.aC=t,this.Ls.xs(),this}getGridStrokeXCut(){return this.aC}setGridStrokeYCut(t){return this.lC=t,this.Ls.xs(),this}getGridStrokeYCut(){return this.lC}setGridStrokeXStyle(t){return this._C=t instanceof Function?t(this.getGridStrokeXStyle()):t,this.dC.forEach((t=>t.forEach((t=>t.setGridStrokeStyle(this._C))))),this}getGridStrokeXStyle(){return this._C}setGridStrokeYStyle(t){return this.wC=t instanceof Function?t(this.getGridStrokeYStyle()):t,this.fC.forEach((t=>t.forEach((t=>t.setGridStrokeStyle(this.wC))))),this}getGridStrokeYStyle(){return this.wC}setTickMarkerXVisible(t){return this.yC=t,this.Ls.xs(),this}getTickMarkerXVisible(){return this.yC}setTickMarkerYVisible(t){return this.mC=t,this.Ls.xs(),this}getTickMarkerYVisible(){return this.mC}setTickMarkerX(t){return this.dC.forEach((i=>i.forEach((i=>i.setMarker(t))))),this.xC=this.xC.addStyler(t),this.Ls.xs(),this}setTickMarkerY(t){return this.fC.forEach((i=>i.forEach((i=>i.setMarker(t))))),this.MC=this.MC.addStyler(t),this.Ls.xs(),this}}class Wc{constructor(t,i,s,e){this.Mm=[],this._m=(t,i)=>(this.Mm.forEach((s=>s(t,i))),t),this.addStyler=t=>new Wc(this.Sm,this.xC,this.MC,this.Mm.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new Wc(t,this.xC,this.MC,this.Mm.map((t=>t))),this.wm=(t,i,s,e,h)=>this._m(new Uc(t,i,s,e,this.Sm,this.xC,this.MC,h),h),this.Sm=t,this.Mm=e,this.xC=i,this.MC=s}}const Yc=new Wc(qn,Uo.PointableTextBox,Uo.PointableTextBox,[(t,i)=>{qa(t),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),en(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),en(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),Hc=(t,i,s)=>{const e=i.ft,h=s.ft;let r=(t.x-e.getInnerStart())/(e.getInnerEnd()-e.getInnerStart()),o=(t.y-h.getInnerStart())/(h.getInnerEnd()-h.getInnerStart());return 1===s.pg&&(r=1-r),1===i.pg&&(o=1-o),n(o,r)};class Xc extends Xu{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d,f){super(t,i,s,e,h,r,n,o,a,l,u),this.NM=[],this.Kx=!0,this.$M=void 0,this.Tu=void 0,this.CC=(t,i)=>{const s=t.nM(i);if(s)return pt(s,this.scale,this.Ls.us.ft)},this.Aw=(t,i)=>{const s=t.k_(i);if(s)return pt(s,this.scale,this.Ls.us.ft)},this.Kd=()=>Di(this.vu.getFillStyle()),this.Sw=c,this.qn=f,this.vu=Ri(this.qi.lineSeriesStrokeStyle,d),this.kC={individualLookupValuesEnabled:void 0!==(null==f?void 0:f.individualLookupValuesEnabled)&&f.individualLookupValuesEnabled}}ds(){var t,i;return null===(i=null===(t=this.qn)||void 0===t?void 0:t.dataPattern)||void 0===i?void 0:i.pattern}add(t){return super.add(t),this}setMouseInteractions(t){return super.setMouseInteractions(t)}setStrokeStyle(t){this.vu="function"==typeof t?t(this.vu):t;const i=this.vu;for(let t=0;t<this.NM.length;t+=1)this.NM[t].We(i);return this.Ls.xs(),this}getStrokeStyle(){return this.vu}setDataCleaning(t){return this.Tu=t,this.NM.forEach((t=>t.Fu(this.Tu))),this.Ls.xs(),this}setCursorInterpolationEnabled(t){return this.Kx=t,this.Ls.us.xs(),this}getCursorInterpolationEnabled(){return this.Kx}wM(t){}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY};if(0===this.NM.length)return;const h=this.NM[0].Ko()||dr.NearestX,r=$u(e,this.NM,Ua(i)?this.Aw:this.CC,h===dr.NearestX?(t,i)=>Math.abs(t.x-i.x):h===dr.NearestY?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==r){const t=pt(r[0],this.Ls.us.ft,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}jM(t){let i=this.NM[0];i||(i=this.yw(),this.NM.push(i),this.fs(i)),i.ml(t,this.HM)}yw(){return this.Ls.Ap(this.scale,this.kC,[xl.UserSeries,...this.Sw]).We(this.vu).Fu(this.Tu).cs(this.getHighlight())}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{stroke:this.vu})}Ve(t,i){t.cs(i),this.Ls.xs()}XM(t,i,s,e){}}class $c extends Xu{constructor(t,i,s,e,h,r,n,o,a,l,u,c,d){super(t,i,s,e,h,r,n,o,new _c,l,u),this.NM=[],this.aM=5,this.Ca=0,this.qa=!1,this.tl=!1,this.il=!1,this.$M=void 0,this.fw=(t,i)=>{const s=t.ed(i);if(s)return pt(s,this.scale,this.Ls.us.ft)},this.qn=d,this.lM=a,this.Fe=Ri(l.pointSeriesFillStyle,c)}add(t){return super.add(t),this}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=$u(e,this.NM,this.fw,gs);if(void 0!==h){const t=pt(h[0],this.Ls.us.ft,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}Kd(){return Di(this.Fe)}Ds(){return this._s||this.lM}wM(t){}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe})}Ve(t,i){t.cs(i),this.Ls.xs()}setPointFillStyle(t){this.Fe="function"==typeof t?t(this.Fe):t;const i=this.Fe;for(let t=0;t<this.NM.length;t+=1)this.NM[t].Le(i);return this.Ls.xs(),this}getPointFillStyle(){return this.Fe}setPointSize(t){this.aM=t;for(let i=0;i<this.NM.length;i+=1)this.NM[i].tt(t);return this.Ls.xs(),this}getPointSize(){return this.aM}getPointShape(){return this.lM}setPointRotation(t){this.Ca=t;for(let i=0;i<this.NM.length;i+=1)this.NM[i].ir(t);return this.Ls.xs(),this}getPointRotation(){return this.Ca}setIndividualPointSizeEnabled(t){this.qa=t,t&&this.chart.us.Qn(Yo.Df);for(let i=0;i<this.NM.length;i+=1)this.NM[i].fl(t);return this.Ls.xs(),this}getIndividualPointSizeEnabled(){return this.qa}setIndividualPointRotationEnabled(t){this.tl=t;for(let i=0;i<this.NM.length;i+=1)this.NM[i].Al(t);return this.Ls.xs(),this}getIndividualPointRotationEnabled(){return this.tl}setIndividualPointValueEnabled(t){this.il=t;for(let i=0;i<this.NM.length;i+=1)this.NM[i].yl(t);return this.Ls.xs(),this}getIndividualPointValueEnabled(){return this.il}jM(t){let i=this.NM[0];i||(i=this.yw()),i.ml(t,this.HM)}yw(){const t=this.Ls.Ov(this.scale).cl(this.lM).tt(this.aM).ir(this.Ca).fl(this.qa).Al(this.tl).yl(this.il).Le(this.Fe).cs(this.getHighlight());return this.NM.push(t),this.fs(t),t}}class jc{constructor(t,i,e,h){this.TC=!1,this.L=new s,this.chart=e,this.FC=h,this.qs=t.qs,this.ne=h||nh,this.IC=Yt.document.createElement("div"),this.IC.style.position="absolute",this.IC.style.pointerEvents="none",Yt.document.body.append(this.IC);const r=()=>{const t=e.engine.container.getBoundingClientRect();this.IC.style.left=`${t.left}px`,this.IC.style.top=`${t.top}px`,this.IC.style.width=`${t.width}px`,this.IC.style.height=`${t.height}px`};r(),e.onResize(r),this.PC(this.IC),this.DC(),this.BC(),this.LC(),this.RC(i),this.chart.EC().push(this)}PC(t){this.zC=Yt.document.createElement("div"),this.zC.style.pointerEvents="all",t.append(this.zC),this.VC=Yt.document.createElement("div"),this.OC=new Je(this.qs,this.ne,this.chart,this.VC),this.NC=Yt.document.createElement("table"),this.NC.style.borderSpacing="0",this.zC.appendChild(this.OC.ge()),this.zC.appendChild(this.VC),this.VC.appendChild(this.NC)}BC(){let t=0,i=0,s=0,e=0,h=!1;this.TC=!1,this.zC.onmousedown=r=>{r=r||Yt.event,s=r.clientX,e=r.clientY,h=!0,Yt.document.onmouseup=t=>{this.TC?this.zC.addEventListener("click",mi,!0):this.zC.removeEventListener("click",mi,!0),h=!1,this.TC=!1,Yt.document.onmouseup=null,Yt.document.onmousemove=null},Yt.document.onmousemove=r=>{r=r||Yt.event,h&&(t=s-r.clientX,i=e-r.clientY,s=r.clientX,e=r.clientY,this.TC=!0,this.zC.style.top=this.zC.offsetTop-i+"px",this.zC.style.left=this.zC.offsetLeft-t+"px",this.zC.style.removeProperty("right"),this.zC.style.removeProperty("bottom"))}}}LC(){let t=0,i=0,s=0,e=0,h=!1;this.zC.ontouchstart=r=>{r=r||Yt.event,s=r.touches[0].clientX,e=r.touches[0].clientY,h=!0,this.zC.ontouchend=()=>{h=!1,Yt.document.ontouchend=null,Yt.document.ontouchmove=null},this.zC.ontouchmove=r=>{h&&(mi(r),r=r||Yt.event,t=s-r.touches[0].clientX,i=e-r.touches[0].clientY,s=r.touches[0].clientX,e=r.touches[0].clientY,this.zC.style.top=this.zC.offsetTop-i+"px",this.zC.style.left=this.zC.offsetLeft-t+"px",this.zC.style.removeProperty("right"),this.zC.style.removeProperty("bottom"))}}}DC(){this.zC.style.setProperty("top","10px"),this.zC.style.setProperty("left","10px"),this.zC.style.position="absolute",this.zC.style.display="flex",this.zC.style.alignItems="flex-start",this.VC.style.setProperty("display","none")}removePositionProperty(){this.zC.style.removeProperty("top"),this.zC.style.removeProperty("left"),this.zC.style.removeProperty("bottom"),this.zC.style.removeProperty("right")}setPositionProperty(t){switch(this.removePositionProperty(),t){case ah.BottomLeft:this.zC.style.setProperty("bottom","10px"),this.zC.style.setProperty("left","10px");break;case ah.TopLeft:this.zC.style.setProperty("top","10px"),this.zC.style.setProperty("left","10px");break;case ah.BottomRight:this.zC.style.setProperty("bottom","10px"),this.zC.style.setProperty("right","10px");break;case ah.TopRight:default:this.zC.style.setProperty("top","10px"),this.zC.style.setProperty("right","10px")}}RC(t){for(let i=0;i<t.length;i+=1){const s=this.NC.insertRow();for(let e=0;e<t[i].length;e+=1){const h=s.insertCell(),r=t[i][e];"object"!=typeof r?this.GC(r,h):this.addCustomButton(r,h)}}}GC(t,i){switch(t){case ke.ZoomIn:this.UC(new Ue(this.qs,this.chart,this.ne),i);break;case ke.ZoomInX:this.UC(new We(this.qs,this.chart,this.ne),i);break;case ke.ZoomInY:this.UC(new Ye(this.qs,this.chart,this.ne),i);break;case ke.ZoomOut:this.UC(new He(this.qs,this.chart,this.ne),i);break;case ke.ZoomOutX:this.UC(new Xe(this.qs,this.chart,this.ne),i);break;case ke.ZoomOutY:this.UC(new $e(this.qs,this.chart,this.ne),i);break;case ke.ZoomToFit:this.UC(new Ze(this.qs,this.chart,this.ne),i);break;case ke.ToggleAnimations:this.UC(new je(this.qs,this.chart,this.ne),i);break;default:console.error(`No predefined button like "${ke[t]}" exists.`)}}UC(t,i){i.rowSpan=t.te.rows,i.colSpan=t.te.columns,t.Ae(i)}addCustomButton(t,i){const s=new Qe(this.qs,t,this.chart);return this.UC(s,i),this}dispose(){this.IC.remove(),this.L.emit("dispose",this)}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}}class Zc extends Gu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){var d;super(t,i,s,e,h,r,n,o,a,l),this.WC=0,this.qn=c,this.Ka=this.Ls.Md(this.scale).We(Ri(this.qi.lineSeriesStrokeStyle,u)).bd(Ri(this.qi.pointSeriesFillStyle,u)).xd(Ri(this.qi.areaSeriesPositiveFillStyle,u)).YC(void 0).Fd(7),this.Ka.HC=!1!==(null===(d=this.qn)||void 0===d?void 0:d.allowDataGrouping),this.fs(this.Ka)}ds(){return this.getDataSet().Jc()}setDataSet(t){var i;return t===(null===(i=this.vd)||void 0===i?void 0:i.Nt)||(t.Tc&&this.chart.us.Qn(Yo.Bf),t.Ic&&this.chart.us.Qn(Yo.Df),this.vd=Ki(t,this.vd,(()=>[t.hd((()=>{this.WC+=1,this.WC>1&&this.chart.us.Qn(Yo.Pf),this.chart.us.xs()})),t.rd((()=>this.chart.us.xs()))])),this.Ka.Sd(t),this.chart.us.xs()),this}getDataSet(){return this.XC()}setStrokeStyle(t){return this.Ka.We(t),this.Ls.xs(),this}getStrokeStyle(){return this.Ka.Su()}setAreaFillStyle(t){return this.Ka.xd(t),this.Ls.xs(),this}getAreaFillStyle(){return this.Ka.$C()}setPointFillStyle(t){return this.Ka.bd(t),this.Ls.xs(),this}getPointFillStyle(){return this.Ka.Td()}setPointSize(t){return this.Ka.Fd(t),this.Ls.xs(),this}getPointSize(){return this.Ka.jC()}setPointShape(t){return this.Ka._d(t),this.Ls.xs(),this}getPointShape(){return this.Ka.wd()}setPointRotation(t){return this.Ka.Cd(t),this.Ls.xs(),this}getPointRotation(){return this.Ka.kd()}setPointAlignment(t){return this.Ka.ZC(t),this.chart.us.xs(),this}getPointAlignment(){return this.Ka.QC()}setCurvePreprocessing(t){return this.Ka.YC(t),this.Ls.xs(),this}getCurvePreprocessing(){return this.Ka.JC()}add(t){return this.XC().add(t),this.Ls.xs(),this}addArraysXY(t,i){return this.XC().addArraysXY(t,i),this.Ls.xs(),this}appendJSON(t,i){return this.XC().appendJSON(t,i),this.Ls.xs(),this}appendSample(t){return this.XC().appendSample(t),this.Ls.xs(),this}appendSamples(t){return this.XC().appendSamples(t),this.Ls.xs(),this}fill(t){return this.XC().fill(t),this.Ls.xs(),this}setSamples(t){return this.XC().setSamples(t),this.Ls.xs(),this}alterSamples(t,i){return this.XC().alterSamples(t,i),this.Ls.xs(),this}alterSamplesByID(t,i){return this.XC().alterSamplesByID(t,i),this.Ls.xs(),this}getSampleCount(){return this.XC().getSampleCount()}getNextSampleIndex(){return this.XC().getNextSampleIndex()}clear(){return this.XC().clear(),this.Ls.xs(),this}setMaxSampleCount(t){return this.XC().setMaxSampleCount(t),this.Ls.xs(),this}getMaxSampleCount(){return this.XC().getMaxSampleCount()}readBack(t){return this.XC().readBack(t)}onMaxSampleCountExceeded(t){return this.XC().onMaxSampleCountExceeded(t)}offMaxSampleCountExceeded(t){return this.XC().offMaxSampleCountExceeded(t)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){let s=Ua(i);void 0!==this.getCurvePreprocessing()&&(s=!1);const e=this.KC(),h=this.chart.translateCoordinate(t,{x:this.axisX,y:this.axisY}),r=e.ed(h,s,this.scale,this.chart.Mg);if(void 0!==r)return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,i){const s=this.getDataSet(),e=null==t?void 0:t.dataPoint;return void 0===s.Jc()||e?e?{cursorPosition:{resultTable:e,resultTableScale:this.scale,pointMarker:e,pointMarkerScale:{x:this.axisX,y:this.axisY}},...e,series:this,axisX:this.axisX,axisY:this.axisY}:void 0:qi({series:this,axisX:this.axisX,axisY:this.axisY},{x:0,y:0,cursorPosition:0,id:0,rotation:0,size:0,color:0,lookupValue:0,multiHit:0,iSample:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}KC(){return this.XC()}Kd(){return Di(this.getPointFillStyle())||Di(this.getStrokeStyle().getFillStyle())||Di(this.getAreaFillStyle())}fv(){var t;const i=null===(t=this.vd)||void 0===t?void 0:t.Nt;return this.getVisible()&&this.getAutoScrollingEnabled()&&void 0!==i&&i.bc>0}wM(t){}getXMax(){return this.Ka.vt()}getXMin(){return this.Ka.yt()}getYMax(){return this.Ka.bt()}getYMin(){return this.Ka.St()}Br(){return{x:this.Ka.Il(),y:this.Ka.Pl()}}wv(){var t;super.wv();const i=ur(null!==(t=this.ds())&&void 0!==t?t:"ProgressiveX");this.Ka.qC("x"===i?0===this.xAxis.mg?"bottom":"top":0===this.yAxis.mg?"left":"right")}XC(){if(!this.vd){const t=new Un(this.qn);t.Tc&&this.chart.us.Qn(Yo.Bf),t.Ic&&this.chart.us.Qn(Yo.Df),this.vd=Ki(t,this.vd,(()=>[t.hd((()=>{this.WC+=1,this.WC>1&&this.chart.us.Qn(Yo.Pf),this.chart.us.xs()})),t.rd((()=>{this.chart.us.xs()}))])),this.Ka.Sd(t)}return this.vd.Nt}styleLegendEntry(t,i=!1){const s=this.getPointFillStyle(),e=this.getAreaFillStyle();Pi(t,this.qi,i,{stroke:this.getStrokeStyle(),fill:s!==O?s:e,behavior:{priority:"stroke"}})}Ds(){return this._s||this.getPointShape()}Ve(t,i){t.cs(i),this.Ls.xs()}}const Qc=(...t)=>(i,s)=>t.forEach((t=>t.forEach((t=>{t.axis.ft.tt(i),t.axis.Sg.tt(s)})))),Jc=n(10,10);var Kc;!function(t){t[t.Top=0]="Top",t[t.Bottom=1]="Bottom",t[t.Left=2]="Left",t[t.Right=3]="Right"}(Kc||(Kc={}));const qc=new Set([Kc.Top,Kc.Bottom,Kc.Left,Kc.Right]),td=t=>t.setStopped(!0),id=t=>t.getChartInteractionFitByDrag()?t.fit(!0):void 0,sd=(t,i)=>{const s="linear-highPrecision"===t.Uh.type||"linear-highPrecision"===i.Uh.type,e="logarithmic"===t.Uh.type||"logarithmic"===i.Uh.type;if(s&&e){const s=`Invalid Axis combination | 'logarithmic' can't be combined with 'linear-highPrecision' (x: ${t.Uh.type}, y: ${i.Uh.type})`;throw new Error(s)}};var ed,hd,rd;!function(t){t[t.seriesBackground=0]="seriesBackground",t[t.gridLine0=1]="gridLine0",t[t.gridLine1=2]="gridLine1",t[t.gridLine2=3]="gridLine2",t[t.highlightersBelow=4]="highlightersBelow"}(ed||(ed={})),function(t){t[t.plotting=0]="plotting",t[t.highlightersAbove=1]="highlightersAbove",t[t.fg=2]="fg"}(hd||(hd={}));class nd extends $l{constructor(t,i,s,e,h,r,o){super(t,i,s,i.zy("chartXY bg",0),e,i.us.qi.chartXYBackgroundFillStyle,i.us.qi.chartXYBackgroundStrokeStyle,i.us.qi.chartXYTitleFont,i.us.qi.chartXYTitleFillStyle,o),this.tk=this.xy.d2({scaleXYConstructor:ee}),this.qg=[],this.ty=[],this.sy=[],this.iy=[],this.ik=new Map,this.sk=!0,this.ek=!0,this.hk=!0,this.jf=2,this.rk=!0,this.nk=!0,this.ak=[],this.lk=this.Oy.Re(this.tk).Le(O).Be(dt).setMouseInteractions(!1),this.uk=this.Oy.Ye(this.tk).We(dt).setMouseInteractions(!1),this.ck=this.Oy.Ye(this.tk).We(dt).setMouseInteractions(!1),this.dk=this.qi.chartXYZoomingRectangleFillStyle,this.fk=this.qi.chartXYZoomingRectangleStrokeStyle,this.Ak=this.qi.chartXYFittingRectangleFillStyle,this.gk=this.qi.chartXYFittingRectangleStrokeStyle,this.yk=Ke.Default,this.mk=Ke.Move,this.pk=Ke.ZoomIn,this.vk=Ke.Default,this.Sk=void 0,this.fA=od,this._M=0,this.bk=(t,i,s)=>{const e=t.solveNearest(i,s);return e&&As(e.cursorPosition.pointMarker.x,e.axisX.getInterval().start,e.axisX.getInterval().end)&&As(e.cursorPosition.pointMarker.y,e.axisY.getInterval().start,e.axisY.getInterval().end)?e:void 0},this.xk=Qc(this.ty,this.qg),this.Mk=Qc(this.sy,this.iy),this._k=(t,i,s,e,h)=>{this.xk(e,h),this.Mk(h,e),this.tk.tt(e,h),this.us.xs()},this.wk=(t,i)=>{this.ik.set(t,i)},this.Ag=t=>{const i=this.ty.findIndex((i=>i.axis===t)),s=this.qg.findIndex((i=>i.axis===t)),e=this.sy.findIndex((i=>i.axis===t)),h=this.iy.findIndex((i=>i.axis===t));i>=0&&this.ty.splice(i,1),s>=0&&this.qg.splice(s,1),e>=0&&this.sy.splice(e,1),h>=0&&this.iy.splice(h,1),this.ik.delete(t),this.us.xs()},this.addAreaSeries=t=>{const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=t&&t.baseline?t.baseline:0,h=new(t&&t.type?t.type:Ac.Positive)(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,e,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length);return this.$v(h),h},this.addAreaRangeSeries=t=>{const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=new gc(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length);return this.$v(e),e},this.kk=!1,this.Tk=!1,this.CM=()=>{(this.sk||this.ek)&&(this.Sk=this.engine.setMouseStyle(this.yk))},this.kM=()=>{this.kk=!1,this.engine.restoreMouseStyle(this.Sk)},this.TM=(t,i,s)=>{var e,h;const r=qt(null===(e=this.wA.io)||void 0===e?void 0:e.chartXYRectangleZoomFitMouseButton,0),n=qt(null===(h=this.wA.io)||void 0===h?void 0:h.chartXYPanMouseButton,2);this.engine.restoreMouseStyle(this.Sk);const o=this.Oy.us.Oe(i.clientX,i.clientY);s===r&&(this.sk||this.ek)?(this.Fk(t,o),mi(i)):s===n&&this.rk&&(this.Sk=this.engine.setMouseStyle(this.mk),this.Tk=!0,mi(i))},this.vv=(t,i,s,e,h)=>{var r,o;const a=n(i.clientX,i.clientY),l=qt(null===(r=this.wA.io)||void 0===r?void 0:r.chartXYRectangleZoomFitMouseButton,0),u=qt(null===(o=this.wA.io)||void 0===o?void 0:o.chartXYPanMouseButton,2);s===l&&(this.sk||this.ek)?(this.Ik(t,e,a),mi(i)):s===u&&this.rk&&(this.Pk(Fs(h,-1)),mi(i)),this.us.xs()},this.Sv=(t,i,s,e)=>{var h,r;const o=qt(null===(h=this.wA.io)||void 0===h?void 0:h.chartXYRectangleZoomFitMouseButton,0),a=qt(null===(r=this.wA.io)||void 0===r?void 0:r.chartXYPanMouseButton,2);if(s===o&&(this.sk||this.ek)){const s=n(i.clientX,i.clientY);this.Dk(t,e,s),mi(i)}else s===a&&this.rk&&mi(i);this.engine.restoreMouseStyle(this.Sk),this.Hv.getIsUnderMouse()&&(this.Sk=this.engine.setMouseStyle(this.yk)),this.kk=!1,this.Tk=!1},this.pv=(t,i)=>{if(this.hk){const t=this.Oy.us.Oe(i.clientX,i.clientY);this.Bk(t,n(Ei(i),Ei(i))),mi(i)}},this.Lk=(t,i,s,e)=>{},this.Rk=(t,i,s,e,h,r)=>{if(this.rk){const t=n(-(e.x+h.x)/2,-(e.y+h.y)/2);this.Pk(t),mi(r),this.Tk=!0}if(this.hk){const t=this.us.Go({clientX:i.x,clientY:i.y}),o=this.us.Go({clientX:s.x,clientY:s.y}),a=Ps(n(Math.abs(t.engineX-e.x-(o.engineX-h.x)),Math.abs(t.engineY-e.y-(o.engineY-h.y))),n(Math.abs(t.engineX-o.engineX),Math.abs(t.engineY-o.engineY)));this.forEachAxisX((t=>{t.getChartInteractionZoomByWheel()&&t.At(t.ft.gi(t.getInterval().start,-a.x),t.ft.gi(t.getInterval().end,a.x),!1,!0,"interactionZoom")})),this.forEachAxisY((t=>{t.getChartInteractionZoomByWheel()&&t.At(t.ft.gi(t.getInterval().start,-a.y),t.ft.gi(t.getInterval().end,a.y),!1,!0,"interactionZoom")})),mi(r),this.kk=!0}},this.Ek=(t,i,s,e)=>{this.Tk=!1,this.kk=!1},this.zk=(t,i,s)=>{(this.ek||this.sk)&&(this.Fk(t,i),mi(s))},this.Vk=(t,i,s,e,h)=>{(this.ek||this.sk)&&(this.Ik(t,i,s),mi(h))},this.Ok=(t,i,s,e)=>{(this.ek||this.sk)&&(this.Dk(t,i,s),mi(e))},this.us.Qn(Yo.Cf),this.setPadding({right:24}),this.Nk=i.kb("chartXY series bg",ed.seriesBackground),this.Gk=[ed.gridLine0,ed.gridLine1,ed.gridLine2].map((t=>i.Uk(`chartXY gridline #${t}`,t))),this.cg=i.Uk("chartXY highlighters below",ed.highlightersBelow),this.sx=i.ip("chartXY plotting",hd.plotting),this.dg=i.ip("chartXY highlighters above",hd.highlightersAbove),this.RA=i.ip("chartXY fg",hd.fg),this.tk.x.K(0,this.uiScale.x.getCellSize()-(this.Xt.left+this.Xt.right+this.Fa.left+this.Fa.right)),this.tk.y.K(0,this.uiScale.y.getCellSize()-(this.Xt.bottom+this.Xt.top+this.Fa.bottom+this.Fa.top)),this.tk.tt(this.uiScale.ni().x,this.uiScale.ni().y),this.Hv=this.Nk.Re(this.tk).Le(this.qi.chartXYSeriesBackgroundFillStyle).Be(dt),this.Xv=this.RA.Re(this.tk).Le(O).Be(this.qi.chartXYSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.Yv(this.Hv,this.Xv),this.setSeriesBackgroundEffect(!1);const a=qt(r?r.cursorBuilder:void 0,Yc),l=i.ep();this.hp=Ya(this,l,a.wm(l,this.tk,this.tk,Zt,this.qi),this,"show-all",cd,((t,i)=>{const s=this.translateCoordinate(t,{x:t.axisX,y:t.axisY},this.coordsClient);return Math.sqrt((s.clientX-i.clientX)**2+(s.clientY-i.clientY)**2)})),this.addAxisX(r&&r.defaultAxisX),this.addAxisY(r&&r.defaultAxisY),this.onResize(this._k),this.wh.vr("ChartXY"),this.bv=ve(new be(this.zk,this.Vk,this.Ok,1),new xe(this.Lk,this.Rk,this.Ek)),this.onSeriesBackgroundMouseEnter(this.CM),this.onSeriesBackgroundMouseLeave(this.kM),this.onSeriesBackgroundMouseWheel(this.pv),this.onSeriesBackgroundMouseDragStart(this.TM),this.onSeriesBackgroundMouseDrag(this.vv),this.onSeriesBackgroundMouseDragStop(this.Sv),this.onSeriesBackgroundTouchStart(this.bv.onTouchStart),this.onSeriesBackgroundTouchMove(this.bv.onTouchMove),this.onSeriesBackgroundTouchEnd(this.bv.onTouchEnd),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled)),this.Ey(h,this.tk)}get coordsAxis(){return{x:this.getDefaultAxisX(),y:this.getDefaultAxisY()}}getSeries(){return this.Nv}setCursor(t){return this.hp.setCursor(t),this}getCursor(){return this.hp.getCursor()}setCursorMode(t){return this.hp.setCursorMode(t),this}getCursorMode(){return this.hp.getCursorMode()}setCustomCursor(t){return this.hp.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.hp.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.hp.offCursorTargetChanged(t)}setCursorFormatting(t){return this.hp.setCursorFormatting(t),this}getCursorFormatting(){return this.hp.getCursorFormatting()}solveNearest(t,i=this.getCursorMode()||"show-nearest"){return this.hp.solveNearest(t,i,this.Nv,this.bk)}addCursor(t=Yc){const i=this.wy(),s=t.wm(i,this.tk,this.tk,this.Sy(i),this.qi);return s.pC=!0,this.By(s),s}getMinimumSize(){const t={x:0,y:0};t.x+=this.Xt.left+this.Xt.right+this.Fa.left+this.Fa.right,t.y+=this.Xt.top+this.Xt.bottom+this.Fa.top+this.Fa.bottom;const i=this.wh.Vs().nd(),s=y(ad(this.fA||od),this.Vy);return t.x+=i.x+s.left+s.right,t.y+=i.y+s.top+s.bottom,this.Wk&&(t.x+=this.Wk.left,t.x+=this.Wk.right,t.y+=this.Wk.top,t.y+=this.Wk.bottom),t.x+=Jc.x,t.y+=Jc.y,t}addAxisX(t){var i,s;const{opposite:e,type:h}=de(t);let r;r="linear"===h.type?this.xy.d1({dimension:"x",scale1DConstructor:te}):"linear-highPrecision"===h.type?this.xy.d1({dimension:"x",scale1DConstructor:te}).xi():this.xy.d1({dimension:"x",scale1DConstructor:Hs}).fi(h.base),r.tt(this.tk.x.ni());const n=e?this.qg:this.ty,o=new Xo(this.Gk,this.RA,this.Oy,this.cg,this.dg,this.us.es,r,this.tk.y,(a=()=>o.Og(),{...jo,...Nc(a)}),this,e?100:0,this.Ag,this.wk,this.qi,this.gh,h);var a;let l,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=n.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),u=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,u=null!==(s=t.iStack)&&void 0!==s?s:0),n.push({axis:o,iStack:u,iParallel:l}),this.us.xs(),o}addAxisY(t){var i,s;const{opposite:e,type:h}=de(t);let r;r="linear"===h.type?this.xy.d1({dimension:"y",scale1DConstructor:te}):"linear-highPrecision"===h.type?this.xy.d1({dimension:"y",scale1DConstructor:te}).xi():this.xy.d1({dimension:"y",scale1DConstructor:Hs}).fi(h.base),r.tt(this.tk.y.ni());const n=e?this.iy:this.sy,o=new Xo(this.Gk,this.RA,this.Oy,this.cg,this.dg,this.us.es,r,this.tk.x,(a=()=>o.Og(),{...Zo,...Gc(a)}),this,e?100:0,this.Ag,this.wk,this.qi,this.gh,h);var a;let l,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=n.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),u=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,u=null!==(s=t.iStack)&&void 0!==s?s:0),n.push({axis:o,iParallel:l,iStack:u}),this.us.xs(),o}swapAxes(t,i){const s=[this.ty,this.sy,this.iy,this.qg],e=s.find((i=>void 0!==i.find((i=>i.axis===t)))),h=s.find((t=>void 0!==t.find((t=>t.axis===i))));if(!e||!h)return this;if(e!==h)throw new Error("LightningChart JS ChartXY.swapAxes does not support swapping Axes that are on different sides.");const r=e.find((i=>i.axis===t)),n=e.find((t=>t.axis===i));if(!r||!n)return this;const o=r.iParallel,a=r.iStack;return r.iParallel=n.iParallel,r.iStack=n.iStack,n.iParallel=o,n.iStack=a,this.us.xs(),this}dispose(){return this.hp.W(),this.Nk.W(),this.sx.W(),this.RA.W(),this.Gk.forEach((t=>t.W())),this.dg.W(),this.cg.W(),this.EC().forEach((t=>t.dispose())),za(this.tk),this.ty.slice().forEach((t=>t.axis.dispose())),this.sy.slice().forEach((t=>t.axis.dispose())),this.iy.slice().forEach((t=>t.axis.dispose())),this.qg.slice().forEach((t=>t.axis.dispose())),this.Nv.slice().forEach((t=>{t.dispose()})),super.dispose()}getDefaultAxisX(){var t;return null===(t=[...this.ty,...this.qg].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}getDefaultAxisY(){var t;return null===(t=[...this.sy,...this.iy].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}getDefaultAxes(){return[this.getDefaultAxisX(),this.getDefaultAxisY()]}getAxes(...t){const i=t&&t.length>0?new Set(t):qc;return Kt(Array.from(i).map((t=>{switch(t){default:case Kc.Top:return this.qg.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis));case Kc.Bottom:return this.ty.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis));case Kc.Left:return this.sy.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis));case Kc.Right:return this.iy.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis))}})))}Yk(t){let i;return this.forEachAxisX((s=>{i=t===s?"x":i})),this.forEachAxisY((s=>{i=t===s?"y":i})),i}forEachAxisX(t){this.ty.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.qg.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}forEachAxisY(t){this.sy.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.iy.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}setTitlePosition(t){return this.fA=t,this.us.xs(),this}getTitlePosition(){return this.fA}Hk(t,i,s,e){const h=this.fA||od;let r,n=y(ad(h),this.Vy);this.getTitleFillStyle()===O||0===this.getTitle().length?(r={x:0,y:0},n={left:0,top:0,right:0,bottom:0}):r=this.wh.Vs().nd();const o=Math.abs(e)+this.Fa.bottom+this.Xt.bottom,a=Math.abs(s)+this.Fa.top+this.Xt.top,l={left:Math.abs(t)+this.Fa.left+this.Xt.left,right:Math.abs(i)+this.Fa.right+this.Xt.right,top:a,bottom:o},u=this.uiScale.Gi(),{horizontalAlignment:c,verticalAlignment:d,position:f,marginsWithTitle:A}=ld(h,u,l,r,n,this.Fa);return this.wh.ze(f).Ya(c).Xa(d),A}Ee(t){super.Ee(t);for(const t of this.Nv)t.wv();for(const t of this.Nv)t.Ee();const i=Gi(this.Nv.map((t=>t.aa()))),s=new Set(i.map((t=>t.Xk)));if(1===s.size){const t=Array.from(s)[0],e="x"===t?[this.ty,this.qg]:[this.sy,this.iy],h="y"===t?[this.ty,this.qg]:[this.sy,this.iy];e.forEach((t=>t.forEach((t=>t.axis.Lr())))),i.forEach((t=>t.$k())),h.forEach((t=>t.forEach((t=>t.axis.Lr()))))}else this.sy.forEach((t=>t.axis.Lr())),this.ty.forEach((t=>t.axis.Lr())),this.qg.forEach((t=>t.axis.Lr())),this.iy.forEach((t=>t.axis.Lr()));const e=this.sy.map((t=>t.axis.Vs())),h=this.ty.map((t=>t.axis.Vs())),r=this.qg.map((t=>t.axis.Vs())),o=this.iy.map((t=>t.axis.Vs()));let a=!1;this.forEachAxis((t=>{(t.Vr()||t.Or())&&(a=!0)}));const l=this.kk||this.Tk||!this.nk&&a,u=new Set(this.getAxes().map((t=>t.getStackIndex()))).size>1;this.hp.Ee(l,u?this.Nv.sort(((t,i)=>i.axisY.getStackIndex()-t.axisY.getStackIndex())):this.Nv,this.bk,{afterCursorPointedAt:t=>{const i=this.us.jn();if(t.length>1&&i){const t=this.us.Go(i);this.hp.jy.xm({x:t.engineX,y:t.engineY},this.us.ft)}},overrideCursorPositions:(t,i)=>t.map((t=>t.multiHit?t.multiHit.map((i=>({...t.cursorPosition,pointMarker:i}))):[t.cursorPosition])).flat()});const c=ud(this.sy,e),f=ud(this.ty,h),A=ud(this.qg,r),g=ud(this.iy,o),y=this.Hk(c.thicknessTotal,g.thicknessTotal,A.thicknessTotal,f.thicknessTotal),m=this.tk.x.getCellSize()-(y.left+y.right),p=this.tk.y.getCellSize()-(y.bottom+y.top),v=[y.left,y.right],S=[y.bottom,y.top];this.tk.x.K(0,m),this.tk.y.K(0,p),this.tk.x.ii(v),this.tk.y.ii(S);const b=(t,i,s,e)=>{let h=0;t.groups.forEach((t=>{let r=0;const n=t.stacks.reduce(((t,i)=>Math.max(t,i.Ug)),0),o=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()?i.axis.gA+i.axis.yA:0)),0),a=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"pixels"in i.axis.jd?i.axis.jd.pixels:0)),0),l=i-o-a;t.stacks.forEach((e=>{const o=e.axis,a=o.getVisible(),u=Math.max(i-r,0),c=Math.min(a?"pixels"in o.jd?o.jd.pixels:o.jd.relative/t.sumRelativeSize*l:0,u),d=a?s[0]+r+o.gA:0,f=a?s[1]+(i-r)-c-o.gA:0;o.ft.ii([d,f]),o.Ee({Ug:n,Wg:e.Wg,Xg:c,jk:r,Kg:n+e.Wg,jg:h}),a&&(r+=c+o.gA+o.yA)})),h+=e*t.thicknessMax}))};b(c,p,S,-1),b(g,p,S,1),b(f,m,v,-1),b(A,m,v,1),this.Wk={left:c.thicknessTotal,top:A.thicknessTotal,right:g.thicknessTotal,bottom:f.thicknessTotal},this.Hv.ze(n(0,0)).tt(n(m,p)),this.Xv.ze(n(0,0)).tt(n(m,p));const x=d(this.tk.x.si(),this.tk.y.si(),this.tk.x.hi(),this.tk.y.hi());this.sx.pb(x),this.cg.pb(x),this.dg.pb(x),this.gy&&this.gy(),super.Ry(),this.ty.forEach((t=>t.axis.ey())),this.qg.forEach((t=>t.axis.ey())),this.sy.forEach((t=>t.axis.ey())),this.iy.forEach((t=>t.axis.ey()));for(const t of this.Nv)t.Fp()}Z(){for(let t=0;t<this.ty.length;t+=1)this.ty[t].axis.Z();for(let t=0;t<this.qg.length;t+=1)this.qg[t].axis.Z();for(let t=0;t<this.sy.length;t+=1)this.sy[t].axis.Z();for(let t=0;t<this.iy.length;t+=1)this.iy[t].axis.Z();return super.Z()}Ck(t){if(this.ik.has(t))return this.ik.get(t);throw new Error("No attach handler for axis Make sure that passed axes definitely belong to this chart and that they haven't been disposed of.")}addLineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);let e=Lc.freeform;t&&t.dataPattern&&(e="ProgressiveX"===t.dataPattern.pattern?Lc.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?Lc.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?Lc.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?Lc.verticalRegressive:Lc.freeform);const h=new Xc(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,e,this.qi,this.us.es,Ml(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,t);return this.$v(h),h}addPointLineAreaSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=new Zc(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,t);return this.$v(e),e}addPointSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=t&&t.pointShape&&Object.values(ar).includes(t.pointShape)?"string"==typeof t.pointShape?ar[t.pointShape]:t.pointShape:ar.Square,h=new $c(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,e,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,t);return this.$v(h),h}addPointLineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=t&&t.pointShape&&Object.values(ar).includes(t.pointShape)?"string"==typeof t.pointShape?ar[t.pointShape]:t.pointShape:ar.Square;let h=Lc.freeform;t&&t.dataPattern&&(h="ProgressiveX"===t.dataPattern.pattern?Lc.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?Lc.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?Lc.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?Lc.verticalRegressive:Lc.freeform);const r=new Sc(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,h,e,this.qi,this.us.es,Ml(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,t);return this.$v(r),r}addStepSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=t&&t.pointShape?t.pointShape:ar.Square,h=t&&t.mode?t.mode:yc.before,r=new Rc(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,e,h,this.qi,this.us.es,Ml(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,t);return this.$v(r),r}addSplineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=t&&t.pointShape?t.pointShape:ar.Square;let h=Lc.freeform;t&&t.dataPattern&&(h="ProgressiveX"===t.dataPattern.pattern?Lc.horizontalProgressive:"RegressiveX"===t.dataPattern.pattern?Lc.horizontalRegressive:Lc.freeform);const r=new Mc(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,h,e,this.qi,this.us.es,Ml(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,t);return this.$v(r),r}addRectangleSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=new tc(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length);return this.$v(e),e}addPolygonSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY(),e=new Ku(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length);return this.$v(e),e}addSegmentSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=new sc(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length);return this.$v(e),e}addEllipseSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=new Qu(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length);return this.$v(e),e}addBoxSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=t&&t.dimensionStrategy?t.dimensionStrategy:jo,h=new ju(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,e,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length);return this.$v(h),h}addHeatmapGridSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new hc(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,t,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length),this.$v(e),e}addHeatmapScrollingGridSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new nc(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,t,this.qi,this.us.es,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length),this.$v(e),e}addOHLCSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();sd(i,s);const e=new(t&&t.type?t.type:Oc.Candlesticks)(this,this.Uv,this.sx,i,s,this.Ck(i),this.Ck(s),this.wy,this.qi,this.us.es);return this.$v(e),e}addOnScreenMenu(t,i){return new jc(this.wA,t,this,i)}setMouseBackgroundStyle(t=Ke.Default){return this.yk=t,this}setMouseZoomStyle(t=Ke.ZoomIn){return this.pk=t,this}setMouseFitStyle(t=Ke.Default){return this.vk=t,this}setMousePanStyle(t=Ke.Move){return this.mk=t,this}setMouseInteractions(t){return this.setMouseInteractionRectangleZoom(t).setMouseInteractionRectangleFit(t).setMouseInteractionWheelZoom(t).setMouseInteractionPan(t)}setMouseInteractionRectangleZoom(t){return this.sk=t,this}getMouseInteractionRectangleZoom(){return this.sk}setMouseInteractionRectangleFit(t){return this.ek=t,this}getMouseInteractionRectangleFit(){return this.ek}setMouseInteractionPan(t){return this.rk=t,this}getMouseInteractionPan(){return this.rk}setMouseInteractionWheelZoom(t){return this.hk=t,this}getMouseInteractionWheelZoom(){return this.hk}setZoomingRectangleFillStyle(t){return this.dk="function"==typeof t?t(this.dk):t,this.us.xs(),this}getZoomingRectangleFillStyle(){return this.dk}setZoomingRectangleStrokeStyle(t){return this.fk="function"==typeof t?t(this.fk):t,this.us.xs(),this}getZoomingRectangleStrokeStyle(){return this.fk}setFittingRectangleFillStyle(t){return this.Ak="function"==typeof t?t(this.Ak):t,this.us.xs(),this}getFittingRectangleFillStyle(){return this.Ak}setFittingRectangleStrokeStyle(t){return this.gk="function"==typeof t?t(this.gk):t,this.us.xs(),this}getFittingRectangleStrokeStyle(){return this.gk}addLegendBox(t,i){const s=super.addLegendBox(t,i);if(void 0===i||i===this.uiScale)if(void 0===t||"vertical"===t.getAlignment())s.setOrigin(qe.RightCenter).setPosition({x:this.uiScale.x.ct(this.uiScale.x.ei()-this.Fa.right),y:mt(this.tk.y.ct(this.tk.y.si()+this.tk.y.hi()/2),this.tk.y,this.uiScale.y)});else{const t=this.fA||od,i=ld(t,this.uiScale.Gi(),this.Fa,this.getTitleFillStyle()===O||0===this.getTitle().length?{x:0,y:0}:this.wh.Vs().nd(),y(ad(t),this.Vy),this.Fa).marginsWithTitle.top;s.setOrigin(qe.RightTop).setPosition(pt({x:this.Mg.x.getInnerEnd()-this.Fa.right,y:this.Mg.y.getInnerEnd()-i},this.Mg,this.uiScale))}return s}Fk(t,i){this.forEachAxis(td);const s=this.us.Go({clientX:i.x,clientY:i.y}),e=pt({x:s.engineX,y:s.engineY},this.Oy.us.ft,this.tk);this.lk.ze(e).tt(n(0,0))}Ik(t,i,s){const e=this.us.Go({clientX:i.x,clientY:i.y}),h=pt({x:e.engineX,y:e.engineY},this.Oy.us.ft,this.tk),r=this.us.Go({clientX:s.x,clientY:s.y}),o=pt({x:r.engineX,y:r.engineY},this.Oy.us.ft,this.tk),a=As(o.x,this.tk.x.getInnerStart(),this.tk.x.getInnerEnd())&&As(o.y,this.tk.y.getInnerStart(),this.tk.y.getInnerEnd()),l=n(Math.min(h.x,o.x),Math.min(h.y,o.y)),u=n(Math.max(h.x,o.x),Math.max(h.y,o.y));this.lk.ze(l).tt(Ps(u,l));const c=Math.min(u.x-l.x,u.y-l.y)>=10;a&&c&&u.x===h.x&&this.ek?(this.kk=!0,this.lk.Le(this.Ak).Be(this.gk),this.uk.We(this.gk).Xe(h).He(o),this.ck.We(this.gk).Xe(n(h.x,o.y)).He(n(o.x,h.y)),this.Sk=this.engine.setMouseStyle(this.vk,this.Sk)):a&&c&&(this.sk||this.ek)?(this.kk=!0,this.lk.Le(this.dk).Be(this.fk),this.uk.We(dt),this.ck.We(dt),this.Sk=this.engine.setMouseStyle(this.pk,this.Sk)):(this.kk=!1,this.lk.Be(dt).Le(O),this.uk.We(dt),this.ck.We(dt),this.engine.restoreMouseStyle(this.Sk)),this.us.xs()}Dk(t,i,s){if(this.kk){const t=this.us.Go({clientX:s.x,clientY:s.y}),e=pt({x:t.engineX,y:t.engineY},this.Oy.us.ft,this.tk),h=As(e.x,this.tk.x.getInnerStart(),this.tk.x.getInnerEnd())&&As(e.y,this.tk.y.getInnerStart(),this.tk.y.getInnerEnd()),r=s.x>=i.x||!this.ek?"zoom":"fit",n=this.lk.Ga(),o=Is(n,this.lk.ni()),a=Math.min(this.lk.ni().x,this.lk.ni().y)>=10;h&&a&&"zoom"===r&&this.sk?(this.forEachAxisX((t=>{if(t.getChartInteractionZoomByDrag()){const i=pt(n,this.tk,t.bg).x,s=pt(o,this.tk,t.bg).x;t.At(i,s,!0,!0,"interactionSetInterval")}})),this.forEachAxisY((t=>{if(t.getChartInteractionZoomByDrag()){const i=pt(n,this.tk,t.bg).y,s=pt(o,this.tk,t.bg).y;t.At(i,s,!0,!0,"interactionSetInterval")}}))):h&&a&&"fit"===r&&this.ek&&this.forEachAxis(id)}this.lk.Be(dt).Le(O),this.uk.We(dt),this.ck.We(dt),this.us.xs()}pan(t){this.forEachAxisX((i=>{i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.setStopped(!0).pan(t.y)}))}Pk(t){this.forEachAxisX((i=>{i.getChartInteractionPanByDrag()&&i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.getChartInteractionPanByDrag()&&i.setStopped(!0).pan(t.y)}))}zoom(t,i){this.forEachAxis(td),this.forEachAxisX((s=>{s.zoom(s.ft.ct(t.x),i.x)})),this.forEachAxisY((s=>{s.zoom(s.ft.ct(t.y),i.y)}))}Bk(t,i){this.forEachAxisX((s=>{s.getChartInteractionZoomByWheel()&&(td(s),s.zoom(s.ft.ct(t.x),i.x))})),this.forEachAxisY((s=>{s.getChartInteractionZoomByWheel()&&(td(s),s.zoom(s.ft.ct(t.y),i.y))}))}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}nf(){const t=[];return this.forEachAxis((i=>i.Rg((i=>t.push(i))))),super.nf().concat(t)}EC(){return this.ak}_e(){return this.Uy(this.sx)}setCursorEnabledDuringAxisAnimation(t){return this.nk=t,this}getCursorEnabledDuringAxisAnimation(){return this.nk}forEachAxis(t){return this.forEachAxisX(t),this.forEachAxisY(t),this}translateCoordinate(t,i,s){if(s){const e=t,h=i,r=Qo(h)?h:ae(h)?this.Mg:void 0;if(r&&ne(s)){const t=pt(e,r,this.us.ft);return this.us.Uo({engineX:t.x,engineY:t.y})}if(r&&ae(s))return pt(e,r,this.Mg);if(r&&Qo(s))return pt(e,r,s)}else{const s=t;if(ae(i)){const t=this.us.Go(s);return pt({x:t.engineX,y:t.engineY},this.us.ft,this.Mg)}if(Qo(i)){const t=i,e=this.us.Go(s);return pt({x:e.engineX,y:e.engineY},this.us.ft,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}}!function(t){t.CenterTop="center-top",t.RightTop="right-top",t.LeftTop="left-top",t.CenterBottom="center-bottom",t.RightBottom="right-bottom",t.LeftBottom="left-bottom",t.SeriesCenterTop="series-center-top",t.SeriesRightTop="series-right-top",t.SeriesLeftTop="series-left-top",t.SeriesCenterBottom="series-center-bottom",t.SeriesRightBottom="series-right-bottom",t.SeriesLeftBottom="series-left-bottom"}(rd||(rd={}));const od=rd.CenterTop,ad=t=>{switch(t){case"center-top":case"series-center-bottom":return{left:0,right:0,top:0,bottom:5};case"left-top":return{left:20,right:0,top:0,bottom:5};case"right-top":return{left:0,right:20,top:0,bottom:5};case"center-bottom":return{left:0,right:0,top:0,bottom:0};case"left-bottom":return{left:20,right:0,top:0,bottom:0};case"right-bottom":return{left:0,right:20,top:0,bottom:0};case"series-center-top":return{left:0,right:0,top:5,bottom:0};case"series-left-top":return{left:5,right:0,top:5,bottom:0};case"series-right-top":return{left:0,right:5,top:5,bottom:0};case"series-left-bottom":return{left:5,right:0,top:0,bottom:5};case"series-right-bottom":return{left:0,right:5,top:0,bottom:5}}return Yi(0,`Unexpected ChartXY title position selection ${t}`)},ld=(t,i,s,e,h,r)=>{e.x,h.left,h.right;const n=e.y+h.bottom+h.top,o=(h.left-h.right)*i.x,a=(h.bottom-h.top)*i.y;switch(t){case"center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-(r.top+h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:o,y:100-(r.top-h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100+o,y:100-(r.top-h.top)*i.y},marginsWithTitle:{...s,top:s.top+n}};case"center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50+o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100+o,y:(r.bottom+h.bottom)*i.y},marginsWithTitle:{...s,bottom:s.bottom+n}};case"series-center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:s.left*i.x+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100-s.right*i.x+o,y:100-s.top*i.y+a},marginsWithTitle:s};case"series-center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50,y:s.bottom*i.y+a},marginsWithTitle:s};case"series-left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:s.left*i.x+o,y:s.bottom*i.y+a},marginsWithTitle:s};case"series-right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100-s.right*i.x+o,y:s.bottom*i.y+a},marginsWithTitle:s}}return Yi(0,`Unexpected ChartXY title position selection ${t}`)},ud=(t,i)=>{const s=[];t.forEach(((t,e)=>{const h=i[e],r=s.find((i=>i.iParallel===t.iParallel));r?(r.stacks.push({...t,...h}),r.stacks.sort(((t,i)=>t.iStack-i.iStack))):s.push({iParallel:t.iParallel,stacks:[{...t,...h}]})}));const e=s.map((t=>{const i=t.stacks.reduce(((t,i)=>Math.max(t,i.Ug)),0),s=t.stacks.reduce(((t,i)=>Math.max(t,i.Wg)),0),e=t.stacks.reduce(((t,i)=>Math.max(t,i.Zd)),0),h=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"relative"in i.axis.jd?i.axis.jd.relative:0)),0);return{...t,ticksSizeMax:i,titleSizeMax:s,sumRelativeSize:h,thicknessMax:e}}));return e.sort(((t,i)=>t.iParallel-i.iParallel)),{groups:e,thicknessTotal:e.reduce(((t,i)=>t+i.thicknessMax),0)}},cd=(t,i,s)=>{var e;const h=Array.from(new Set(s.map((t=>t.series.ds())))),r=1===h.length&&void 0!==h[0]?h[0]:void 0,n="ProgressiveY"===r||"RegressiveY"===r?{progressiveDimension:"Y",progressiveAxis:i.axisY,valueDimension:"X",hitValueAxis:t=>t.axisX,value:t=>t.x,position:t=>t.y}:{progressiveDimension:"X",progressiveAxis:i.axisX,valueDimension:"Y",hitValueAxis:t=>t.axisY,value:t=>t.y,position:t=>t.x},o=n.progressiveAxis.getTickStrategy();return _t(i)?Wa(i,[[i.series],[t.getDefaultAxisX().getTitle()||"X","",{text:ce(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:ce(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],void 0!==i.intensity?["Value","",{text:ce(i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]:[]]):1===s.length?"Time"===o||"DateTime"===o?i.multiHit?[[ce(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis)],...Wa(i,[[i.series,""],[`${n.valueDimension}1`,"",{text:ce(n.hitValueAxis(i).formatValue(n.value(i.multiHit[0])),n.hitValueAxis(i)),font:{weight:"bold"}}],[`${n.valueDimension}2`,"",{text:ce(n.hitValueAxis(i).formatValue(n.value(i.multiHit[1])),n.hitValueAxis(i)),font:{weight:"bold"}}]])]:[[ce(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis)],...Wa(i,[[i.series,"",{text:ce(n.hitValueAxis(i).formatValue(n.value(i)),n.hitValueAxis(i)),font:{weight:"bold"}}]])]:i.multiHit?Wa(i,[[i.series],[n.progressiveDimension,"",{text:ce(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),font:{weight:"bold"}}],[`${n.valueDimension}1`,"",{text:ce(n.hitValueAxis(i).formatValue(n.value(i.multiHit[0])),n.hitValueAxis(i)),font:{weight:"bold"}}],[`${n.valueDimension}2`,"",{text:ce(n.hitValueAxis(i).formatValue(n.value(i.multiHit[1])),n.hitValueAxis(i)),font:{weight:"bold"}}]]):Wa(i,[[i.series],[n.progressiveDimension,"",{text:ce(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),font:{weight:"bold"}}],[n.valueDimension,"",{text:ce(n.hitValueAxis(i).formatValue(n.value(i)),n.hitValueAxis(i)),font:{weight:"bold"}}]]):r?[ce(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),...s.map((t=>t.multiHit?Wa(t,[[t.series,""],[`${n.valueDimension}1`,"",{text:ce(n.hitValueAxis(t).formatValue(n.value(t.multiHit[0])),n.hitValueAxis(t)),font:{weight:"bold"}}],[`${n.valueDimension}2`,"",{text:ce(n.hitValueAxis(t).formatValue(n.value(t.multiHit[1])),n.hitValueAxis(t)),font:{weight:"bold"}}]]):Wa(t,[[t.series,"",{text:ce(n.hitValueAxis(t).formatValue(n.value(t)),n.hitValueAxis(t)),font:{weight:"bold"}}]]))).flat()]:s.map((t=>Wa(t,[[t.series],[n.progressiveDimension,"",{text:ce(n.progressiveAxis.formatValue(n.position(t)),n.progressiveAxis),font:{weight:"bold"}}],[n.valueDimension,"",{text:ce(n.hitValueAxis(t).formatValue(n.value(t)),n.hitValueAxis(t)),font:{weight:"bold"}}]]))).flat()},dd=t=>t instanceof Xu||t instanceof lc||t instanceof gc||t instanceof hc||t instanceof Ec||t instanceof Rc||t instanceof Zc;class fd{constructor(t,i,e,h,r,n,o){this.coordsRelative="relative",this.coordsClient="client",this.L=new s,this.Zk=[],this.Qk=new Map,this.Nv=new Map,this.Jk=(t,i,s)=>{0!==this.Nv.size&&void 0!==[...this.Nv.values()].find((({series:t})=>!0===t.getVisible()))||this.Kk.At(i,s,!1,!1,"zoomBandChart"),this.qk.us.xs()},i.us.Qn(Yo._f),this.wA=t,this.tT=(null==n?void 0:n.orientation)||"x",this.iT=void 0!==(null==n?void 0:n.useSharedValueAxis)&&n.useSharedValueAxis,this.sT=h,this.Ku="x"===this.tT?jo:Zo;const a={...n,defaultAxisX:this.Ku.getWidth({x:null==n?void 0:n.defaultAxis,y:void 0}),defaultAxisY:this.Ku.getHeight({x:null==n?void 0:n.defaultAxis,y:void 0})};this.qk=new nd(t,i,e,Zt,r,a,o).setTitle("Zoom Band Chart").setMouseInteractions(!1).setCursorMode(void 0),this.engine=this.qk.engine;const l=this.qk.getDefaultAxisX().setMouseInteractions(!1),u=this.qk.getDefaultAxisY().setMouseInteractions(!1);this.Kk=this.Ku.getWidth({x:l,y:u}).setScrollStrategy(ch.fitting).setAnimationScroll(!1).setStrokeStyle(dt).setTickStrategy(dh.Empty),(null==n?void 0:n.useSharedValueAxis)?this.eT=this.Ku.getHeight({x:l,y:u}):this.Ku.getHeight({x:l,y:u}).dispose();const c=this.getTheme().zoomBandChartDefocusOverlayFillStyle||new W({color:this.getTheme().isDark?S(0,0,0,180):S(255,255,255,180)});this.hT=[this.qk.RA.Re(this.Kk.bg).Le(c).Be(dt),this.qk.RA.Re(this.Kk.bg).Le(c).Be(dt)];const d=this.qk.RA.Zg(this.Kk.bg).We(this.getTheme().zoomBandChartSplitterStrokeStyle||this.getTheme().chartXYSeriesBackgroundStrokeStyle);this.rT={collection:d,members:new Array(5).fill(0).map((t=>d.jr()))};const f=this.getTheme(),A="function"==typeof f.zoomBandChartKnobFillStyle?Wt({resourcesBaseUrl:this.wA.qs,styleFactory:f.zoomBandChartKnobFillStyle,apply:t=>this.setKnobFillStyle(t)}):f.zoomBandChartKnobFillStyle||O;this.nT=[this.qk.RA.Re(this.qk.Mg).Le(A).Be(dt),this.qk.RA.Re(this.qk.Mg).Le(A).Be(dt)],this.oT=this.getTheme().zoomBandChartKnobSize||{x:0,y:0},this.aT()}add(t){var i,s,e,h,r;const n=this.Zk.map((t=>t.axis)),o="x"===this.tT?t.axisX:t.axisY;if(!n.includes(o)){const t=o.onIntervalChange(this.Jk);this.Zk.push({axis:o,deattach:()=>{o.offIntervalChange(t)}}),this.Kk.nr(o.rr()),this.lT&&this.lT.remove(),this.lT=xt(...this.Zk.map((t=>t.axis)))}const a=this.Ku.getHeight({x:t.axisX,y:t.axisY});let l;if(this.iT)l=this.eT;else{const t=this.Qk.get(a);t?l=t:(l=this.Ku.getHeight({x:this.qk.addAxisX.bind(this.qk),y:this.qk.addAxisY.bind(this.qk)})(),this.uT(l)),this.Qk.set(a,l)}const u=this.Ku.getWidth({x:this.Kk,y:l}),c=this.Ku.getHeight({x:this.Kk,y:l});let d;const f=[],A=(t,i)=>{const s=t=>{if(0!==t.length)if("x"in t[0]){const s=t;i.add(s)}else{const s=t,e=[];for(let t=0;t<s.length;t+=1){const i=s[t];e.push({x:i[0],y:i[4]})}i.add(e)}},e=t.ZM();s(e);const h=t.QM(((t,i)=>s(i)));f.push((()=>t.JM(h)));const r=t.KM((()=>i.clear()));f.push((()=>{t.qM(r)}))};if(t instanceof Zc)d=this.qk.addPointLineAreaSeries({...t.qn,xAxis:u,yAxis:c}).setStrokeStyle(t.getStrokeStyle()).setAreaFillStyle(t.getAreaFillStyle()).setPointFillStyle(t.getPointFillStyle()).setPointAlignment(t.getPointAlignment()).setPointRotation(t.getPointRotation()).setPointShape(t.getPointShape()).setPointSize(t.getPointSize()).setCurvePreprocessing(t.getCurvePreprocessing()),d.setDataSet(t.KC());else if(t instanceof Xc||t instanceof Ec){const s=this.qk.addLineSeries({xAxis:u,yAxis:c,dataPattern:t instanceof Xc?null===(i=t.qn)||void 0===i?void 0:i.dataPattern:void 0});if(t instanceof Xc)s.setStrokeStyle(t.getStrokeStyle());else{const i=Ad(t);i&&s.setStrokeStyle(i)}A(t,s),d=s}else if(t instanceof cc){const i=this.qk.addAreaSeries({xAxis:u,yAxis:c,baseline:t.sw}).setFillStyle(t.getFillStyle()).setStrokeStyle(t.getStrokeStyle());A(t,i),d=i}else if(t instanceof $c){const i=this.qk.addPointSeries({xAxis:u,yAxis:c,pointShape:null===(s=t.qn)||void 0===s?void 0:s.pointShape}).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof Rc){const i=this.qk.addStepSeries({xAxis:u,yAxis:c,pointShape:null===(e=t.qn)||void 0===e?void 0:e.pointShape,mode:t.ww}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof Mc){const i=this.qk.addSplineSeries({xAxis:u,yAxis:c,pointShape:null===(h=t.qn)||void 0===h?void 0:h.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof Sc){const i=this.qk.addSplineSeries({xAxis:u,yAxis:c,pointShape:null===(r=t.qn)||void 0===r?void 0:r.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof gc){const i=this.qk.addAreaRangeSeries({xAxis:u,yAxis:c}).setLowFillStyle(t.getLowFillStyle()).setHighFillStyle(t.getHighFillStyle()).setLowStrokeStyle(t.getLowStrokeStyle()).setHighStrokeStyle(t.getHighStrokeStyle()).add(t.ZM()),s=t.QM(((t,s)=>i.add(s)));f.push((()=>t.JM(s))),d=i;const e=t.KM((()=>i.clear()));f.push((()=>{t.qM(e)}))}else{if(!(t instanceof ec))throw new Error("LightningChart JS Zoom Band Chart unsupported series type");{const i=this.qk.addHeatmapGridSeries({xAxis:u,yAxis:c,...t.l_}),s=()=>{i.setWireframeStyle(t.getWireframeStyle()).setIntensityInterpolation(t.getIntensityInterpolation()).setFillStyle(t.getFillStyle())};s(),d=i,t.d_(d);const e=t.g_(((t,s)=>i.invalidateIntensityValues(s))),h=t.f_(s);f.push((()=>{t.y_(e),t.A_(h)}));const r=t.KM((()=>i.clear()));f.push((()=>{t.qM(r)}))}}d.setMouseInteractions(!1);const g=t.onVisibleStateChanged(((t,i)=>{d.setVisible(i)}));f.push((()=>{t.offVisibleStateChanged(g)}));const y=t.onHighlight(((t,i)=>d.setHighlight(i)));f.push((()=>{t.offHighlight(y)}));const m=t.onDispose((()=>{this.disposeSeries(t)}));return f.push((()=>{t.offDispose(m)})),this.Nv.set(t,{series:d,clearReferences:()=>f.forEach((t=>t()))}),d}disposeSeries(t){const i=this.Nv.get(t);if(i){const{clearReferences:s}=i;s(),this.Nv.delete(t),i.series.dispose();const e=this.Ku.getHeight({x:t.axisX,y:t.axisY}),h=this.Qk.get(e);h&&0===h.Og().length&&(this.Qk.delete(e),h.dispose())}const s="x"===this.tT?t.axisX:t.axisY;if(!Array.from(this.Nv.keys()).find((t=>s===("x"===this.tT?t.axisX:t.axisY)))){const t=this.Zk.findIndex((t=>t.axis===s));this.Zk[t].deattach(),this.Zk.splice(t,1)}return this}setDefocusOverlayFillStyle(t){return this.hT.forEach((i=>i.Le(t))),this.qk.us.xs(),this}getDefocusOverlayFillStyle(){return this.hT[0].Qh()}setSplitterStrokeStyle(t){return this.rT.collection.We(t),this.qk.us.xs(),this}getSplitterStrokeStyle(){return this.rT.collection.Su()}setKnobFillStyle(t){return this.nT.forEach((i=>i.Le(t))),this.qk.us.xs(),this}getKnobFillStyle(){return this.nT[0].Qh()}setKnobStrokeStyle(t){return this.nT.forEach((i=>i.Be(t))),this.qk.us.xs(),this}getKnobStrokeStyle(){return this.nT[0].vo()}setKnobSize(t){return this.oT=t,this.qk.us.xs(),this}getKnobSize(){return this.oT}getDefaultAxisX(){return this.qk.getDefaultAxisX()}getDefaultAxisY(){return this.qk.getDefaultAxisY()}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}uT(t){t.setTickStrategy(dh.Empty).setMouseInteractions(!1).setNibStyle(dt).setStrokeStyle(dt)}aT(){let t;const i=(t,i,s)=>{var e,h;const r="x"===this.tT?null===(e=Array.from(this.Nv.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this.Nv.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=r.getInterval(),o=this.Kk.getInterval();Math.abs(this.Kk.ft.dt(t)-this.Kk.ft.dt(i))<10||Math.sign(i-t)!==Math.sign(n.end-n.start)||Math.min(t,i)<Math.min(o.start,o.end)||Math.max(t,i)>Math.max(o.start,o.end)&&Math.max(n.start,n.end)<Math.max(t,i)||r.At(t,i,s,!0,"zoomBandChart")};this.nT.forEach(((s,e)=>{s.setMouseEnterEventHandler((()=>{t=this.engine.setMouseStyle(this.Ku.getWidth({x:Ke.Horizontal,y:Ke.Vertical}),t)})),s.setMouseLeaveEventHandler((()=>{this.engine.restoreMouseStyle(t)}));const h=t=>{var s,h;const r="x"===this.tT?null===(s=Array.from(this.Nv.keys())[0])||void 0===s?void 0:s.axisX:null===(h=Array.from(this.Nv.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=this.Ku.getWidth(this.qk.translateCoordinate(t,this.qk.coordsAxis)),o=r.getInterval(),a=0===e?n:o.start,l=1===e?n:o.end;i(a,l,!1),mi(t)};s.setMouseDragEventHandler(((t,i,s,e,r)=>h(i)));const r=ve(new be(void 0,((t,i,s,e,r)=>h(r))));s.setTouchStartEventHandler(r.onTouchStart),s.setTouchMoveEventHandler(r.onTouchMove),s.setTouchEndEventHandler(r.onTouchEnd)})),this.qk.onSeriesBackgroundMouseEnter((()=>{t=this.engine.setMouseStyle(Ke.Move,t)})),this.qk.onSeriesBackgroundMouseLeave((()=>{this.engine.restoreMouseStyle(t)}));const s=(t,s)=>{var e,h;const r="x"===this.tT?null===(e=Array.from(this.Nv.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this.Nv.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=r.getInterval(),o=this.Kk.ft.gi(n.start,this.Ku.getWidth(t)),a=this.Kk.ft.gi(n.end,this.Ku.getWidth(t));i(o,a,!1),mi(s)};this.qk.onSeriesBackgroundMouseDrag(((t,i,e,h,r)=>s(r,i)));const e=ve(new be(void 0,((t,i,e,h,r)=>s(h,r))));this.qk.onSeriesBackgroundMouseWheel(((t,s)=>{var e,h;const r="x"===this.tT?null===(e=Array.from(this.Nv.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this.Nv.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=r.getInterval(),o=this.Kk.getInterval(),a=this.Ku.getWidth(this.qk.translateCoordinate(s,this.qk.coordsAxis)),l=this.Kk.ft.dt(n.start),u=this.Kk.ft.dt(n.end),c=this.Kk.ft.dt(a),d=Jt((c-l)/(u-l),0,1),f=.2*Math.abs(u-l)*r.jf,A=d*f*-Math.sign(s.deltaY),g=(1-d)*f*Math.sign(s.deltaY),y=Jt(this.Kk.ft.gi(n.start,A),o.start,o.end),m=Jt(this.Kk.ft.gi(n.end,g),o.start,o.end);i(y,m,!1),mi(s)})),this.qk.onSeriesBackgroundTouchStart(e.onTouchStart),this.qk.onSeriesBackgroundTouchMove(e.onTouchMove),this.qk.onSeriesBackgroundTouchEnd(e.onTouchEnd),this.hT.forEach(((s,e)=>{s.setMouseEnterEventHandler((()=>{t=this.engine.setMouseStyle(Ke.Point,t)})),s.setMouseLeaveEventHandler((()=>{this.engine.restoreMouseStyle(t)}));const h=t=>{var s,e;const h="x"===this.tT?null===(s=Array.from(this.Nv.keys())[0])||void 0===s?void 0:s.axisX:null===(e=Array.from(this.Nv.keys())[0])||void 0===e?void 0:e.axisY;if(!h)return;const r=this.Ku.getWidth(this.qk.translateCoordinate(t,this.qk.coordsAxis)),n=h.getInterval(),o=this.Kk.getInterval(),a=Jt(r-(n.end-n.start)/2,Math.min(o.start,o.end),Math.max(o.start,o.end)-Math.abs(n.end-n.start)),l=a+(n.end-n.start);i(a,l,!0),mi(t)};s.setMouseClickEventHandler(((t,i)=>h(i)));const r=ve(new class{constructor(t,i=300){this.Os=!1,this.Ns=[],this.Gs=300,this.Us=t,this.Gs=i}zs(t,i){const s=Yt.performance.now();let e=!1;for(let t=0;t<this.Ns.length;t+=1)s-this.Ns[t].time>=this.Gs?(this.Ns.splice(t,1),t-=1):this.Ns[t].state&&(e=!0);return this.Os?0===i.interactions.length&&(this.Ns.push({state:!1,time:s}),this.Os=!1):1===i.interactions.length&&"pointerdown"===i.type&&(this.Ns.push({state:!0,time:s}),e=!0,this.Os=!0),e}Vs(t,i,s){if(s&&!this.Os){const s=this.Ns.reduce(((t,i)=>(i.state?t.on+=1:t.off+=1,t)),{on:0,off:0});s.on>=1&&s.off>=1&&(this.Us(t,i),this.Ns.length=0)}}}(((t,i)=>h(i))));s.setTouchStartEventHandler(r.onTouchStart),s.setTouchMoveEventHandler(r.onTouchMove),s.setTouchEndEventHandler(r.onTouchEnd)}))}getSizePixels(){return this.qk.getSizePixels()}onResize(t){return this.qk.onResize(((i,s,e,h,r)=>t(this,s,e,h,r)))}offResize(t){return this.qk.offResize(t)}Nr(t){this.qk.Nr(t)}getMinimumSize(){return this.qk.getMinimumSize()}Z(){return this.qk.Z()}J(){return this.qk.J()}Ee(t){var i,s,e,h;const r=Ni(Array.from(this.Nv.keys()).map((t=>t.chart))),n="x"===this.tT?null===(i=Array.from(this.Nv.keys())[0])||void 0===i?void 0:i.axisX:null===(s=Array.from(this.Nv.keys())[0])||void 0===s?void 0:s.axisY;if("x"===this.tT){const t=r.reduce(((t,i)=>{const s=[];i.forEachAxisY((t=>{if(0!==t.mg)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.hy())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),i=r.reduce(((t,i)=>{const s=[];i.forEachAxisY((t=>{if(100!==t.mg)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.hy())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),s=r.reduce(((t,i)=>Math.max(t,i.getPadding().left)),0),h=r.reduce(((t,i)=>Math.max(t,i.getPadding().right)),0);this.qk.forEachAxisY((t=>t.setThickness(0))),null===(e=this.getDefaultAxisY())||void 0===e||e.setThickness(t),this.qk.setPadding({left:s+(0===r.length?10:0),right:h+i+(0===r.length?10:0)})}else{const t=r.reduce(((t,i)=>{const s=[];i.forEachAxisX((t=>{if(0!==t.mg)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.hy())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),i=r.reduce(((t,i)=>{const s=[];i.forEachAxisX((t=>{if(100!==t.mg)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.hy())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),s=r.reduce(((t,i)=>Math.max(t,i.getPadding().bottom)),0),e=r.reduce(((t,i)=>Math.max(t,i.getPadding().top)),0);this.qk.forEachAxisX((t=>t.setThickness(0))),null===(h=this.getDefaultAxisX())||void 0===h||h.setThickness(t),this.qk.setPadding({bottom:s+(0===r.length?10:0),top:e+i+(0===r.length?10:0)})}this.qk.Ee(t);const o=this.Kk.getInterval().start,a=this.Kk.getInterval().end,l=Jt(n?n.getInterval().start:o,o,a),u=Jt(n?n.getInterval().end:a,o,a),c=this.Ku.getHeight(this.qk.tk.getInnerIntervalPixels());this.hT[0].ze(this.Ku.toPoint(o,0)).tt(this.Ku.toPoint(l-o,c)),this.hT[1].ze(this.Ku.toPoint(u,0)).tt(this.Ku.toPoint(a-u,c)),this.rT.members[0].Jg(this.Ku.toPoint(o,c),this.Ku.toPoint(l,c)),this.rT.members[1].Jg(this.Ku.toPoint(l,c),this.Ku.toPoint(l,0)),this.rT.members[2].Jg(this.Ku.toPoint(l,0),this.Ku.toPoint(u,0)),this.rT.members[3].Jg(this.Ku.toPoint(u,0),this.Ku.toPoint(u,c)),this.rT.members[4].Jg(this.Ku.toPoint(u,c),this.Ku.toPoint(a,c));const d=pt(this.Ku.toPoint(l,c/2),this.Kk.bg,this.qk.Mg),f=pt(this.Ku.toPoint(u,c/2),this.Kk.bg,this.qk.Mg),A=this.oT;this.nT[0].ze({x:d.x-A.x/2,y:d.y-A.y/2}).tt({x:A.x,y:A.y}).ir(this.Ku.getWidth({x:0,y:90})),this.nT[1].ze({x:f.x-A.x/2,y:f.y-A.y/2}).tt({x:A.x,y:A.y}).ir(this.Ku.getWidth({x:0,y:90}))}setSeriesBackgroundFillStyle(t){return this.qk.setSeriesBackgroundFillStyle(t),this.qk.us.xs(),this}getSeriesBackgroundFillStyle(){return this.qk.getSeriesBackgroundFillStyle()}setSeriesBackgroundStrokeStyle(t){return this.qk.setSeriesBackgroundStrokeStyle(t),this.qk.us.xs(),this}getSeriesBackgroundStrokeStyle(){return this.qk.getSeriesBackgroundStrokeStyle()}setSeriesBackgroundEffect(t){return this.qk.setSeriesBackgroundEffect(t),this.qk.us.xs(),this}getSeriesBackgroundEffect(){return this.qk.getSeriesBackgroundEffect()}getTheme(){return this.qk.getTheme()}setTitle(t){return this.qk.setTitle(t),this}getTitle(){return this.qk.getTitle()}setTitleFillStyle(t){return this.qk.setTitleFillStyle(t),this}getTitleFillStyle(){return this.qk.getTitleFillStyle()}setTitleFont(t){return this.qk.setTitleFont(t),this}getTitleFont(){return this.qk.getTitleFont()}setTitleMargin(t){return this.qk.setTitleMargin(t),this}getTitleMargin(){return this.qk.getTitleMargin()}setPadding(t){return this.qk.setPadding(t),this}getPadding(){return this.qk.getPadding()}setBackgroundFillStyle(t){return this.qk.setBackgroundFillStyle(t),this}getBackgroundFillStyle(){return this.qk.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.qk.setBackgroundStrokeStyle(t),this}getBackgroundStrokeStyle(){return this.qk.getBackgroundStrokeStyle()}translateCoordinate(t,i,s){return Ra(t,i,s,this.qk.Mg,this.qk.us)}addUIElement(t,i){return this.qk.addUIElement(t,i)}addLegendBox(t,i){return this.qk.addLegendBox(t,i)}getLegendBoxes(){return this.qk.getLegendBoxes()}saveToFile(t,i,s){return this.qk.saveToFile(t,i,s),this}dispose(){return this.qk.dispose(),this.Qk.clear(),this.Nv.clear(),this.sT(this),this}isDisposed(){return this.qk.isDisposed()}onDispose(t){return this.qk.onDispose((()=>t(this)))}offDispose(t){return this.qk.offDispose(t)}}const Ad=t=>{if("getStrokeStyle"in t)return t.getStrokeStyle();const i=(t=>t instanceof Xc||t instanceof cc?t.getStrokeStyle().getFillStyle():t instanceof $c||t instanceof Sc?t.getPointFillStyle():void 0)(t);return i?new _e({thickness:2,fillStyle:i}):void 0};class gd extends Pu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.ws="Point Series",this.sM=[],this.eM=!1,this.aM=3,this.Ca=0,this.Fe=Ri(this.qi.polarPointSeriesFillStyle,r),this.vd=new Un({dataPattern:null}),this.Ka=t.Md(e).We(dt).xd(O).bd(this.Fe)._d(ar.Circle).Fd(this.aM).cs(this.getHighlight()).Sd(this.vd),this.fs(this.Ka)}solveNearest(t,i="show-nearest"){const s=this.chart.translateCoordinate(t,this.chart.coordsAxis),e=Du([s],this.scale)[0],h=this.vd.ed(e,Ua(i),this.scale,this.chart.Mg);if(!h)return;const r=Ru(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Ji(t,i){return qi({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}setData(t){return 0!==this.sM.length&&this.chart.us.Qn(Yo.Pf),this.sM=Lu(t),this.eM=!0,this.Jx=Bu(this.sM),this.Ls.xs(),this}setPointAlignment(t){return this.Ka.ZC(t),this.chart.us.xs(),this}getPointAlignment(){return this.Ka.QC()}setPointFillStyle(t){this.Fe="function"==typeof t?t(this.Fe):t;const i=this.Fe;return this.Ka.bd(i),this.Ls.xs(),this}getPointFillStyle(){return this.Fe}setPointSize(t){return this.aM=t,this.Ka.Fd(t),this.Ls.xs(),this}getPointSize(){return this.aM}setPointShape(t){return this.Ka._d(t),this.chart.us.xs(),this}getPointShape(){return this.Ka.wd()}setPointRotation(t){return this.Ca=t,this.Ka.Cd(t),this.Ls.xs(),this}getPointRotation(){return this.Ca}fv(){return this.yv&&this.sM.length>0&&this.getVisible()}Ve(t,i){t.cs(i),this.Ls.xs()}Ee(){if(this.eM||this.scale.oM()){const t=Du(this.sM,this.scale),i=vs(t);this.vd.clear().add(t),this.Ka.ia(i),this.eM=!1,this.Ka.Vs()}}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe})}Ds(){return this._s||this.getPointShape()}}class yd{constructor(t,i,e,h){this.L=new s,this.cT=!1,this.oe=t,this.dT=i,this.Nv=e,this.Ka=h}setGeometry(t){return this.fT=t,this.cT=!0,this.oe.us.xs(),this}getGeometry(){return this.fT}setMouseInteractions(t){return this.Ka.setMouseInteractions(t),this}dispose(){return this.Ka.dispose(),this.dT(this),this.L.emit("dispose",this),this}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}setVisible(t){const i=this.Ka.getVisible()!==t;return this.Ka.setVisible(t),i&&this.L.emit("visibleStateChanged",this,t),this.oe.us.xs(),this}getVisible(){return this.Ka.getVisible()}onVisibleStateChanged(t){return this.L.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.L.off(t,"visibleStateChanged")}}class md extends Pu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.ws="Polygon Series",this.AT=[],this.gT=[],this.yT=t=>{const i=this.gT.indexOf(t);i>=0&&this.gT.splice(i,1);const s=this.AT.findIndex((i=>i===t.Ka));s>=0&&this.AT.splice(s,1),this.Ls.xs()},this.Fe=Ri(this.qi.polarPolygonSeriesFillStyle,r),this.Ie=Ri(this.qi.polarPolygonSeriesStrokeStyle,r)}solveNearest(t,i){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=$u(e,this.AT,((t,i)=>{const s=t.ed(i);if(s)return pt(s,this.scale,t.us.ft)}),gs);if(!h)return;const r=pt(h[0],h[1].us.ft,this.scale);if(!this.mT(h[1]))return;const n=Ru(r,this.scale);return{cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this,...n}}Ji(t,i){return qi({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}addPolygon(){const t=new yd(this.chart,this.yT,this,this.pT());return this.gT.push(t),t}setFillStyle(t){this.Fe="function"==typeof t?t(this.Fe):t;const i=this.Fe;for(const t of this.AT)t.Le(i);return this.Ls.xs(),this}getFillStyle(){return this.Fe}setStrokeStyle(t){this.Ie="function"==typeof t?t(this.Ie):t;const i=this.Ie;for(const t of this.AT)t.Be(i);return this.Ls.xs(),this}getStrokeStyle(){return this.Ie}fv(){return this.yv&&void 0!==this.gT.find((t=>void 0!==t.vT))&&this.getVisible()}Ee(){this.gT.forEach((t=>{(t.cT||this.scale.oM())&&t.ST&&(t.Ka.Tl(Du(t.ST,this.scale)),t.cT=!1,t.Ka.Vs())}))}wv(){super.wv();const t=c(es,hs);this.gT.forEach((i=>{if(!i.fT)return;const s=!i.cT&&i.ST?i.ST:Lu(i.fT);i.ST=s;const e=!i.cT&&i.vT?i.vT:Bu(s);i.vT=e,t.min=Math.min(t.min,e.min),t.max=Math.max(t.max,e.max)})),this.Jx=t}Ve(t,i){t.cs(i),this.Ls.xs()}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe,stroke:this.Ie})}pT(){const t=this.Ls.dc(this.scale,Or.Simple).Le(this.Fe).Be(this.Ie).cs(this.getHighlight());return this.AT.push(t),this.fs(t),t}mT(t){return this.gT.find((i=>i.Ka===t))}}class pd extends Pu{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.ws="Area Series",this.sM=[],this.eM=!1,this.hM=!1,this.bT=!1,this.Fe=Ri(this.qi.polarAreaSeriesFillStyle,r),this.Ie=Ri(this.qi.polarAreaSeriesStrokeStyle,r)}setData(t){0!==this.sM.length&&this.chart.us.Qn(Yo.Pf);const i=(t=>{const i=[];let s,e,h=!1;for(let r=0;r<t.length;r+=1){const n=t[r];let o=!0;if(s){o=!1;const t=n.angle-s.angle;if(Qt(t,0))o=!0;else{const i=Math.sign(t);void 0===e?(e=i,o=!0):e===i&&(o=!0)}}o?i.push(n):h=!0,s=n}return{progressivePoints:i,userDataModified:h}})(t);return i.userDataModified&&!1===this.bT&&(console.warn(`${this.ws} setData data format is faulty. Consecutive 'angle' values should progress in the same direction! Invalid data points have been removed.`),this.bT=!0),this.sM=i.progressivePoints,this.eM=!0,this.Jx=Bu(this.sM),this.Ls.xs(),this}setFillStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.Ls.xs(),this}getFillStyle(){return this.Fe}setStrokeStyle(t){return this.Ie="function"==typeof t?t(this.Ie):t,this.Ls.xs(),this}getStrokeStyle(){return this.Ie}setConnectDataAutomaticallyEnabled(t){return this.hM=t,this.Ls.xs(),this}getConnectDataAutomaticallyEnabled(){return this.hM}fv(){return this.yv&&this.sM.length>0&&this.getVisible()}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe,stroke:this.Ie})}}class vd extends pd{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.xT=this.Ls.dc(this.scale,Or.Simple).cs(this.getHighlight()),this.fs(this.xT)}solveNearest(t,i){const s=this.chart.us.Go(t),e={x:s.engineX,y:s.engineY},h=this.xT.ed(e);if(!h)return;const r=Ru(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Ji(t,i){return qi({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}Ee(){if(this.eM||this.scale.oM()){const t=this.sM,i=!0===this.hM?Du(t.concat((t=>{if(0===t.length)return t;const i=t[0],s=t[t.length-1];if(Qt(i.angle,s.angle))return t;const e=1*Math.sign(s.angle-i.angle);let h=0;const r=[];for(let t=s.angle+e;!Qt(t%360,i.angle%360);t+=e)if(r.push({angle:t,amplitude:0}),h+=1,h>360)return[];for(let t=0;t<r.length;t+=1)r[t].amplitude=pn(s.amplitude,i.amplitude,(t+1)/(r.length+1));return r})(t)),this.scale):[...Du(t,this.scale),{x:0,y:0}];this.xT.Tl(i).Le(this.Fe).Be(this.Ie),this.eM=!1,this.xT.Vs()}}Ve(t,i){t.cs(i),this.Ls.xs()}}class Sd extends se{constructor(){super(...arguments),this.Ni="RadialScale",this.MT={start:0,end:1},this._T=!1,this.wT=0,this.j=n(0,0),this.CT=[0,0],this.kT=[0,0],this.o=!0,this.vi=!0,this.TT=!0,this.FT=!0,this.IT={x:0,y:0},this.ci={x:{displacement:0,scaling:0,highPrecisionOffset:0},y:{displacement:0,scaling:0,highPrecisionOffset:0}}}zx(t,i){return t===this.MT.start&&i===this.MT.end||(this.MT={start:t,end:i},this.TT=!0,this.PT()),this}Ex(){return this.MT}Rx(){return this.MT.end>=this.MT.start}Yx(t){this._T=t,this.FT=!0}Xx(){return!1===this._T}Hx(t){this.wT=t,this.FT=!0}Gx(){return this.wT}yi(){return this.vi}Mi(){return!1}ut(t,i,s,e){return this.x=new te(t.x,i.x,s.x,e?e.x:void 0),this.y=new te(t.y,i.y,s.y,e?e.y:void 0),this}mi(){return this.ci}oM(){return this.TT}DT(){return this.FT}Gi(){return this.IT}Z(){return this.o=!1,this.vi=!1,this.TT=!1,this.FT=!1,this}J(){return this.o=!0,this.vi=!0,this.TT=!0,this.FT=!0,this}tt(t,i){return"object"==typeof t?(this.j.x=t.x,this.j.y=t.y):(this.j.x=t,this.j.y=i),this.PT(),this}Ri(t){return this.CT=t,this.PT(),this}Ei(t){return this.kT=t,this.PT(),this}ri(){return n(this.CT[0]+this.CT[1],this.kT[0]+this.kT[1])}ni(){return this.j}PT(){const t=this.MT,i=n(this.x.oi(this.j.x),this.y.oi(this.j.y)),s=this.CT[0]+this.CT[1],e=this.kT[0]+this.kT[1],h=Math.max(i.x-s,0),r=Math.max(i.y-e,0),o=.5*(h>r?r:h),a=[this.CT[0]+Math.max((h-2*o)/2,0),this.CT[1]+Math.max((h-2*o)/2,0)],l=[this.kT[0]+Math.max((r-2*o)/2,0),this.kT[1]+Math.max((r-2*o)/2,0)],u=Math.abs(t.end-t.start);this.x.tt(this.j.x).ii(a).K(-u,u),this.y.tt(this.j.y).ii(l).K(-u,u),this.IT={x:this.x.getPixelSize(),y:this.y.getPixelSize()},this.ci={x:this.x.mi(),y:this.y.mi()},this.J()}gi(t,i){const s=this.Gi();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}Ui(t,i,s,e){const h=this.Gi(),r=ks(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class bd extends $l{constructor(t,i,s,e,h,r,n){super(t,i,s,i.zy("polarChart bg",0),e,i.us.qi.polarChartBackgroundFillStyle,i.us.qi.polarChartBackgroundStrokeStyle,i.us.qi.polarChartTitleFont,i.us.qi.polarChartTitleFillStyle,n),this.coordsClient="client",this.uA=[],this.Wo=!0,this.BT=(t,i,s,e,h)=>{this.Mx.tt(e,h)},this.AA=bi(this.uA),this.LT=t=>{this.uA.push(t)},this.RT=()=>this.Nv,this.us.Qn(Yo.xf),this.Nk=i.kb("polarChart series bg",0),this.ET=i.ip("polarChart axis gridlines",0),this.zT=i.ip("polarChart series",1),this.VT=i.ip("polarChart axis lines",2),this.OT=i.ip("polarChart axis ticks",3),this.Mx=s.d2({scaleXYConstructor:Sd}),this.onResize(this.BT),this.wh.vr("Polar Chart"),this.Hv=this.Nk.ld(this.Mx).Le(this.qi.polarChartSeriesBackgroundFillStyle).Be(dt).fu(0).He(360).mu(0),this.Xv=this.Nk.ld(this.Mx).Le(O).Be(this.qi.polarChartSeriesBackgroundStrokeStyle).fu(0).He(360).mu(0),super.Yv(this.Hv,this.Xv),this.Ey(h,this.Mg),this.NT=new xu(this,this.Mx,this.qi,!1!==(null==r?void 0:r.animationsEnabled),this.ET,this.VT,this.OT,this.es,this.RT),this.GT=new _u(this,this.Mx,this.qi,!1!==(null==r?void 0:r.animationsEnabled),this.ET,this.VT,this.OT,this.es),this.coordsAxis={axisAmplitude:this.NT,axisRadial:this.GT};const o=i.ep(),a=qt(r?r.cursorBuilder:void 0,ol);this.hp=Ya(this,o,a.wm(o,this.uiScale,this.uiScale,Zt,this.qi),this,"show-nearest",Md,((t,i)=>{const s=this.translateCoordinate(t,this.coordsClient);return Math.sqrt((s.clientX-i.clientX)**2+(s.clientY-i.clientY)**2)})),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled))}getSeries(){return this.Nv}setCursor(t){return this.hp.setCursor(t),this}getCursor(){return this.hp.getCursor()}setCursorMode(t){return this.hp.setCursorMode(t),this}getCursorMode(){return this.hp.getCursorMode()}setCustomCursor(t){return this.hp.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.hp.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.hp.offCursorTargetChanged(t)}setCursorFormatting(t){return this.hp.setCursorFormatting(t),this}getCursorFormatting(){return this.hp.getCursorFormatting()}solveNearest(t,i=this.getCursorMode()||"show-nearest"){return this.hp.solveNearest(t,i,this.Nv,((t,i,s)=>t.solveNearest(i,s)))}addCursor(t=ol){const i=this.wy(),s=t.wm(i,this.uiScale,this.uiScale,this.Sy(i),this.qi);return this.By(s),s}translateCoordinate(t,i,s){if(s){const i=t,e=this.Mg,h=s;if(ne(h)){const t=pt(i,e,this.us.ft);return this.us.Uo({engineX:t.x,engineY:t.y})}if(ae(h))return i;if(ku(h)){const t=pt(i,e,this.Mx);return Ru(t,this.Mx)}}else{const s=t,e=i;if(oe(s)){if(ku(e)){const t=this.us.Go(s),i=pt({x:t.engineX,y:t.engineY},this.us.ft,this.Mx);return Ru(i,this.Mx)}if(ne(e))return s;if(ae(e)){const t=this.us.Go(s);return pt({x:t.engineX,y:t.engineY},this.us.ft,this.Mg)}}else if(Tu(s)){if(ku(e))return s;const t=Du([s],this.Mx)[0];if(ne(e)){const i=pt(t,this.Mx,this.us.ft),s={engineX:i.x,engineY:i.y};return this.us.Uo(s)}if(ae(e))return pt(t,this.Mx,this.Mg)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addLineSeries(t){const i=new zu(this.zT,this,this.Uv,this.Mx,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,this.us.es);return this.$v(i),i}addPointSeries(t){const i=new gd(this.zT,this,this.Uv,this.Mx,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,this.us.es);return this.$v(i),i}addPointLineSeries(t){const i=new Vu(this.zT,this,this.Uv,this.Mx,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,this.us.es);return this.$v(i),i}addAreaSeries(t){const i=new vd(this.zT,this,this.Uv,this.Mx,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,this.us.es);return this.$v(i),i}addPolygonSeries(t){const i=new md(this.zT,this,this.Uv,this.Mx,this.qi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,this.us.es);return this.$v(i),i}addHeatmapSeries(t){const i=new Eu(this.zT,this,this.Uv,this.Mx,this.qi,this.us.es,t);return this.$v(i),i}addSector(){const t=new Fu(this.zT,this,this.AA,this.Mx,this.qi,this.us.es);return this.LT(t),t}getAmplitudeAxis(){return this.NT}get amplitudeAxis(){return this.NT}get axisAmplitude(){return this.NT}getRadialAxis(){return this.GT}get radialAxis(){return this.GT}get axisRadial(){return this.GT}Ee(t){var i,s;super.Ee(t),Ga.Hy(this.wh,this.Vy);for(const t of this.Nv)t.wv();this.NT.Lr(),this.GT.Lr();for(const t of this.Nv)t.Ee();for(let t=1;t<=2;t+=1){const i=this.NT.Ee(),s=this.GT.Ee(),e=Ga.Yy(this.wh,this.Vy),h=[this.Fa.left+s,this.Fa.right+s],r=[this.Fa.bottom+s,this.Fa.top+s+e];this.Mx.Ri(h).Ei(r);const n=4;if(!(!this.UT||Math.abs(this.UT.amplitude-i)>=n||Math.abs(this.UT.radial-s)>=n)||1!==t){this.UT={amplitude:i,radial:s};break}}const e=this.Mx.Ex().start,h=this.Mx.Ex().end,r=this.Mx.Rx()?((null===(i=this.UT)||void 0===i?void 0:i.radial)||0)*this.Mx.x.getPixelSize()+h-e:((null===(s=this.UT)||void 0===s?void 0:s.radial)||0)*this.Mx.x.getPixelSize()+e-h;this.Hv.Au(r).pu(360),this.Xv.Au(r).pu(360);for(const t of this.uA)t.Ee();this.hp.Ee(!1,this.Nv,((t,i,s)=>t.solveNearest(i,s)));for(const t of this.Nv)t.Fp();return super.Ry(),this.WT(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.NT.setAnimationsEnabled(t),this.GT.setAnimationsEnabled(t),this}setMouseInteractions(t){return this.Wo=t,this}getMouseInteractions(){return this.Wo}getMinimumSize(){return n(xd,xd)}WT(){}forEachAxis(t){return t(this.NT),t(this.GT),this}dispose(){return this.uA.slice().forEach((t=>t.dispose())),this.hp.W(),this.Nk.W(),this.ET.W(),this.zT.W(),this.VT.W(),this.OT.W(),super.dispose()}nf(){return[...this.Nv,...this.uA]}}const xd=300,Md=(t,i,s)=>{var e;return kt(i)?Wa(i,[[i.series],["Angle","",{text:i.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:ce(t.getAmplitudeAxis().formatValue(i.amplitude),t.amplitudeAxis),font:{weight:"bold"}}],["Intensity","",{text:ce(i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]]):Wa(i,[[i.series],["Angle","",{text:i.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:ce(t.getAmplitudeAxis().formatValue(i.amplitude),t.amplitudeAxis),font:{weight:"bold"}}]])};class _d extends fl{}class wd extends _d{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.ws="Slice",this.S=0,this.Cm=!1,this.YT=O,this.Tm=O,this.Fm=this.S,this.Dm=K((()=>this.chart.us.xs())),this.Lm=()=>{this.Rm=void 0},this.index=t,this.chart=e,this.scale=h,this.Ki=r,this.xT=i.dc(h,Or.Simple).cs(this.getHighlight()),this.fs(this.xT),this.hh=s.Ur(h).cs(this.getHighlight()),this.fs(this.hh,{isText:!0})}setValue(t){return this.chart.getAnimationsEnabled()?this.getVisible()&&this.Om(this.Fm,t):this.Fm=t,this.S=t,this.chart.us.xs(),this}getValue(){return this.S}setVisible(t){return!1===t?this.chart.getAnimationsEnabled()&&this.Fm>0?(this.Rm&&(this.Rm.finish(!1),this.Rm=void 0),this.Om(this.Fm,0,(()=>super.setVisible(!1)))):(this.Fm=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.Rm&&(this.Rm.finish(!1),this.Rm=void 0),super.setVisible(!0),this.Om(this.Fm,this.S)):(this.Fm=this.S,super.setVisible(!0)),this}Om(t,i,s){this.Rm=this.Dm(300,Q.ease)([[t,i]],(([t])=>{this.Fm=t,this.chart.us.xs()})),this.Rm.onEveryAnimationEnd(this.Lm),s&&this.Rm.onAnimationEnd(s)}setStyle(t,i,s,e){this.YT=t,this.Tm=s,this.xT.Le(this.YT).Be(i),this.hh.Le(this.Tm).tr(e);for(let t=0;t<this.Qi.length;t+=1)this.styleLegendEntry(this.Qi[t])}getAnimatedValue(){return this.Fm}Ve(t,i){return t.cs(i),this.chart.us.xs(),this}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.YT,stroke:this.xT.vo()})}}var Cd;!function(t){t[t.VariableHeight=0]="VariableHeight",t[t.VariableWidth=1]="VariableWidth"}(Cd||(Cd={}));const kd=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},Td=(t,i,s,e,h,r=0,n=Cd.VariableHeight,o)=>{i=kd(i,e.x),s=kd(s,e.x);const a=t.length;let l=0,u=0;l=t.reduce(((t,i)=>t+i.getAnimatedValue()),0);let c={x:o-i/2,y:e.y+h.bottom},d={x:o+i/2,y:e.y+h.bottom},f={x:0,y:h.bottom},A={x:0,y:h.bottom},g=0,y=0;if(r)for(let i=0;i<t.length;i+=1){const s=10;y+=t[i].getAnimatedValue();const o=n===Cd.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-y/l*e.y;if(n===Cd.VariableWidth){r=o-r<s?Math.max(20,o-s):r;break}0!==g&&g-o-r<s&&(r=Math.max(0,g-o-s)),g=o}const m=(i-s)/2/e.y;for(let g=0;g<a;g+=1){const y=t[g];u+=y.getAnimatedValue();const p=n===Cd.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-u/l*e.y;let v=0;g>0&&(c={x:f.x+m*r,y:f.y-r},d={x:A.x-m*r,y:A.y-r}),v=(i+u/l*(s-i))/2,f={x:o-v,y:parseInt(`${n===Cd.VariableWidth?c.y-p:p}`,10)},A={x:o+v,y:parseInt(`${n===Cd.VariableWidth?d.y-p:p}`,10)},d.x>=c.x&&A.x>f.x&&y.xT.Tl([f,c,d,A])}};class Fd extends Na{constructor(t,i,s,e,h,r,n){super(t,i,s,i.zy("funnelChart bg",0),e,i.us.qi.funnelChartBackgroundFillStyle,i.us.qi.funnelChartBackgroundStrokeStyle,i.us.qi.funnelChartTitleFont,i.us.qi.funnelChartTitleFillStyle,r),this.Nm=[],this.Gm=cl.None,this.Ym=!0,this.$m=0,this.HT=80,this.XT=20,this.$T=0,this.jT=Cd.VariableHeight,this.Qm=!0,this.Km=t=>{const i=this.Nm.indexOf(t);i>=0&&(this.Nm.splice(i,1),this.qm())},this.us.Qn(Yo.vf),this.Jm=this.qi.effectsText,this.tp=i.ip("funnelChart bottom",0),this.sp=i.ip("funnelChart top",1),this.wh.vr("Funnel Chart"),this.Um=this.qi.funnelChartSliceFillStylePalette,this.Wm=this.qi.funnelChartSliceStrokeStyle,this.Hm=this.qi.funnelChartSliceLabelFont,this.Xm=this.qi.funnelChartSliceLabelFillStyle;const o=i.ep(),a=qt(n?n.cursorBuilder:void 0,rl);this.hp=Ya(this,o,a.wm(o,this.uiScale,this.uiScale,Zt,this.qi),void 0,"show-pointed",Id,(()=>0)),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled)),this.Ey(h,this.Mg)}setCursor(t){return this.hp.setCursor(t),this}getCursor(){return this.hp.getCursor()}setCursorMode(t){return this.hp.setCursorMode(t),this}getCursorMode(){return this.hp.getCursorMode()}setCustomCursor(t){return this.hp.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.hp.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.hp.offCursorTargetChanged(t)}setCursorFormatting(t){return this.hp.setCursorFormatting(t),this}getCursorFormatting(){return this.hp.getCursorFormatting()}addCursor(t=rl){const i=this.wy(),s=t.wm(i,this.uiScale,this.uiScale,this.Sy(i),this.qi);return this.By(s),s}addSlice(t,i){const s=new wd(this.$m,this.tp,this.sp,this,this.Mg,this.Km,this.qi,this.us.es);return this.$m+=1,s.setName(t),s.setValue(i),s.es.rs.bs(this.Jm),s.es.ns.bs(this.Qm),this.Nm.push(s),this.us.xs(),s.setHighlightOnHover(this.Ym),s.onMouseMove((()=>{this.getCursorMode()&&this.us.xs()})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Nm}setHeadWidth(t){return this.HT=t,this.us.xs(),this}getHeadWidth(){return this.HT}setNeckWidth(t){return this.XT=t,this.us.xs(),this}getNeckWidth(){return this.XT}setSliceGap(t){return this.$T=Math.min(Math.max(t,0),20),this.us.xs(),this}setSliceMode(t){return this.jT=t,this.us.xs(),this}getFunnelSliceMode(){return this.jT}setLUT(t){return this.Jd=t,this.us.xs(),this}setSliceFillStyle(t){return this.Um=t,this.us.xs(),this}getSliceFillStyle(){return this.Um}setSliceStrokeStyle(t){return this.Wm="function"==typeof t?t(this.Wm):t,this.us.xs(),this}getSliceStrokeStyle(){return this.Wm}setSliceEffect(t){return this.Qm=t,this.Nm.forEach((i=>i.es.ns.bs(t))),this.us.xs(),this}getSliceEffect(){return this.Qm}setSliceSorter(t){return this.Gm=t,this.Nm=this.Nm.sort(this.Gm),this.us.xs(),this}getSliceSorter(){return this.Gm}setLabelFillStyle(t){return this.Xm="function"==typeof t?t(this.Xm):t,this.us.xs(),this}getLabelFillStyle(){return this.Xm}setLabelFont(t){return this.Hm="function"==typeof t?t(this.Hm):t,this.us.xs(),this}getLabelFont(){return this.Hm}setLabelEffect(t){return this.Jm=t,this.Nm.forEach((i=>i.es.rs.bs(t))),this.us.xs(),this}getLabelEffect(){return this.Jm}setLabelFormatter(t){return this.np=t,this.us.xs(),this}getLabelFormatter(){return this.np}setSliceHighlightOnHover(t){return this.Ym=t,this.Nm.forEach((i=>i.setHighlightOnHover(t))),this}Ee(t){super.Ee(t),Ga.Hy(this.wh,this.Vy),super.Ry();const i=Ga.Yy(this.wh,this.Vy),s=n(this.Mg.x.getInnerInterval()-(this.Fa.left+this.Fa.right),this.Mg.y.getInnerInterval()-(this.Fa.bottom+this.Fa.top+i)),e=n(this.Fa.left+s.x/2,this.Fa.bottom+s.y/2);this.Nm=this.Nm.sort(this.Gm);for(let t=0,{length:i}=this.Nm;t<i;t+=1)this.rp(this.Nm[t],t);const h=this.Nm.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/r:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.hh.vr(this.np(i,o[t])).Vs()}o.push(r),this.hp.Ee(!1,this.Nm,((t,i,s)=>{const e=o[h.indexOf(t)]||0,r=this.us.Go(i);return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.us.ft,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.us.ft},slice:t,category:t.getName(),value:t.getValue(),relativeValue:e}})),this.op(h,o,e,s)}rp(t,i){t.setStyle(this.Jd?new W({color:this.Jd.getColors(t.getAnimatedValue())}):this.Um(i,t),this.Wm,this.Xm,this.Hm)}qm(){this.Nm=this.Nm.sort(this.Gm),this.us.xs()}nf(){return this.Nm}dispose(){return this.Nm.slice().forEach((t=>t.dispose())),this.hp.W(),this.tp.W(),this.sp.W(),super.dispose()}}const Id=(t,i,s)=>[[i.slice],[{text:i.value.toString(),font:{weight:"bold"}}]],Pd=(t,i,s)=>{const e=t.Fl();if(e.length>0){let t;const h=(e[1].y-e[0].y)/2+e[0].y;return t=i===Ed.Left?(e[0].x-e[1].x)/2+e[1].x-s:(e[2].x-(4===e.length?e[3].x:e[1].x))/2+(4===e.length?e[3].x:e[1].x)+s,{x:t,y:h}}},Dd=t=>{const i=t.Fl();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class Bd extends Fd{constructor(){super(...arguments),this.np=dl.NamePlusValue,this.ZT=10,this.QT=Ed.Left,this.JT=ul.LabelsOnSides,this.ap=[],this.dp=this.qi.funnelChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.dp=t;for(let t=0;t<this.ap.length;t+=1)this.ap[t].We(this.dp);return this.us.xs(),this}getLabelConnectorStyle(){return this.dp}setLabelConnectorGap(t){return this.ZT=t,this.us.xs(),this}getLabelConnectorGap(){return this.ZT}setLabelSide(t){return this.QT=t,this.us.xs(),this}getLabelSide(){return this.QT}op(t,i,s,e){const h=e.x+this.Fa.left+this.Fa.right,r=e.y+this.Fa.top+this.Fa.bottom<250||h<250,o=this.ZT;let a,l=0;if(!r)for(let i=0;i<t.length;i+=1)l=Math.max(l,t[i].hh.ni().x);a=r?h/2:this.QT===Ed.Right?(this.Fa.left+(h-(this.Fa.right+l)))/2:(this.Fa.left+l+(h-this.Fa.right))/2;const u=e.x-l,c=n(u,e.y);if(Td(t,this.HT,this.XT,c,this.Fa,this.$T,this.jT,a),r)return t.forEach((t=>t.hh.setVisible(!1))),void this.ap.forEach((t=>t.setVisible(!1)));this.KT(t,this.QT===Ed.Left?-1:1,-1,s,e);for(let t=0;t<this.ap.length;t+=1)this.ap[t].setVisible(!1);for(let i=0;i<t.length;i+=1)t[i].getVisible()&&this.fp(this.qT(t[i],-1,s,o))}getMinimumSize(){return n(500,300)}KT(t,i,s,e,h){if(0===t.length)return;const r=e.x+i*h.x*.5,o=1===s?Math.max:Math.min;let a;for(let e=0;e<t.length;e+=1){const h=t[e];if(0===h.xT.Fl().length)h.hh.setVisible(!1);else{let t;h.hh.setVisible(!0),a&&(t=a.hh.Ga().y+s*(a.hh.ni().y+10));const e=(Pd(h.xT,this.QT,0)||n(0,0)).y,l=void 0===t?e:o(e,t);h.hh.ze(n(r,l)).Ya(i).Xa(0),a=h}}}qT(t,i,s,e){const h=t.xT,r=t.hh,o=Pd(h,this.QT,e);if(o){const t={x:Es(this.QT===Ed.Left?r.Ga().x-i*(e+r.ni().x):r.Ga().x+i*(e+r.ni().x),o,s).x,y:zs(r.Ga().y,o,s).y};return[o,t,n(this.QT===Ed.Left?r.Ga().x-i*(e+r.ni().x):r.Ga().x+i*(e+r.ni().x),t.y)]}}fp(t){if(t){let i;for(let t=0;t<this.ap.length;t+=1)if(!this.ap[t].getVisible()){i=this.ap[t].setVisible(!0);break}void 0===i&&(i=this.sp.Ap(this.Mg,void 0,[xl.InternalUI]).We(this.dp),this.ap.push(i)),i.Vt().ml(t)}}}class Ld extends Fd{constructor(){super(...arguments),this.np=dl.Name,this.JT=ul.LabelsInsideSlices}op(t,i,s,e){const h=this.Fa.left+e.x/2;Td(t,this.HT,this.XT,e,this.Fa,this.$T,this.jT,h);for(let i=0;i<t.length;i+=1){const s=t[i],e=s.xT,h=s.hh,r=Dd(e);r&&h.ze(r).Ya(0).Xa(0)}}getMinimumSize(){return n(200,200)}}const Rd={LabelsOnSides:Bd,LabelsInsideSlices:Ld};var Ed,zd;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(Ed||(Ed={}));class Vd extends fl{}class Od extends Vd{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.ws="Slice",this.S=0,this.Cm=!1,this.YT=O,this.Tm=O,this.Fm=this.S,this.Dm=K((()=>this.chart.us.xs())),this.Lm=()=>{this.Rm=void 0},this.index=t,this.chart=e,this.scale=h,this.Ki=r,this.xT=i.dc(h,Or.Simple).cs(this.getHighlight()),this.fs(this.xT),this.hh=s.Ur(h).cs(this.getHighlight()),this.fs(this.hh,{isText:!0})}setValue(t){return this.chart.getAnimationsEnabled()?this.getVisible()&&this.Om(this.Fm,t):this.Fm=t,this.S=t,this.chart.us.xs(),this}getValue(){return this.S}setVisible(t){return!1===t?this.chart.getAnimationsEnabled()&&this.Fm>0?(this.Rm&&(this.Rm.finish(!1),this.Rm=void 0),this.Om(this.Fm,0,(()=>super.setVisible(!1)))):(this.Fm=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.Rm&&(this.Rm.finish(!1),this.Rm=void 0),super.setVisible(!0),this.Om(this.Fm,this.S)):(this.Fm=this.S,super.setVisible(!0)),this}Om(t,i,s){this.Rm=this.Dm(300,Q.ease)([[t,i]],(([t])=>{this.Fm=t,this.chart.us.xs()})),this.Rm.onEveryAnimationEnd(this.Lm),s&&this.Rm.onAnimationEnd(s)}setStyle(t,i,s,e){this.YT=t,this.Tm=s,this.xT.Le(this.YT).Be(i),this.hh.Le(this.Tm).tr(e);for(let t=0;t<this.Qi.length;t+=1)this.styleLegendEntry(this.Qi[t])}getAnimatedValue(){return this.Fm}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.YT,stroke:this.xT.vo()})}}!function(t){t[t.VariableHeight=0]="VariableHeight",t[t.VariableWidth=1]="VariableWidth"}(zd||(zd={}));const Nd=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},Gd=(t,i,s,e,h,r=0,n=zd.VariableHeight,o)=>{i=Nd(i,e.x),s=Nd(s,e.x);const a=t.length;let l=0,u=0;l=t.reduce(((t,i)=>t+i.getAnimatedValue()),0);let c={x:o-i/2,y:e.y+h.bottom},d={x:o+i/2,y:e.y+h.bottom},f={x:0,y:h.bottom},A={x:0,y:h.bottom},g=0,y=0;if(r)for(let i=0;i<t.length;i+=1){const s=10;y+=t[i].getAnimatedValue();const o=n===zd.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-y/l*e.y;if(n===zd.VariableWidth){r=o-r<s?Math.max(20,o-s):r;break}0!==g&&g-o-r<s&&(r=Math.max(0,g-o-s)),g=o}const m=(i-s)/2/e.y;for(let g=0;g<a;g+=1){const y=t[g];u+=y.getAnimatedValue();const p=n===zd.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-u/l*e.y;let v=0;g>0&&(c={x:f.x+m*r,y:f.y-r},d={x:A.x-m*r,y:A.y-r}),v=(i+u/l*(s-i))/2,f={x:o-v,y:parseInt(`${n===zd.VariableWidth?c.y-p:p}`,10)},A={x:o+v,y:parseInt(`${n===zd.VariableWidth?d.y-p:p}`,10)},d.x>=c.x&&A.x>=f.x&&y.xT.Tl([f,c,d,A])}};class Ud extends Na{constructor(t,i,s,e,h,r,n){super(t,i,s,i.zy("pyramidChart bg",0),e,i.us.qi.pyramidChartBackgroundFillStyle,i.us.qi.pyramidChartBackgroundStrokeStyle,i.us.qi.pyramidChartTitleFont,i.us.qi.pyramidChartTitleFillStyle,r),this.Nm=[],this.Gm=cl.None,this.Um=this.qi.pyramidChartSliceFillStylePalette,this.Wm=this.qi.pyramidChartSliceStrokeStyle,this.Ym=!0,this.Hm=this.qi.pyramidChartSliceLabelFont,this.Xm=this.qi.pyramidChartSliceLabelFillStyle,this.$m=0,this.HT=0,this.XT=80,this.$T=0,this.jT=zd.VariableHeight,this.Qm=!0,this.Km=t=>{const i=this.Nm.indexOf(t);i>=0&&(this.Nm.splice(i,1),this.qm())},this.us.Qn(Yo.vf),this.Jm=this.qi.effectsText,this.tp=i.ip("pyramidChart bottom",0),this.sp=i.ip("pyramidChart top",1),this.wh.vr("Pyramid Chart");const o=i.ep(),a=qt(n?n.cursorBuilder:void 0,rl);this.hp=Ya(this,o,a.wm(o,this.uiScale,this.uiScale,Zt,this.qi),void 0,"show-pointed",Wd,(()=>0)),this.Ey(h,this.Mg),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled))}setCursor(t){return this.hp.setCursor(t),this}getCursor(){return this.hp.getCursor()}setCursorMode(t){return this.hp.setCursorMode(t),this}getCursorMode(){return this.hp.getCursorMode()}setCustomCursor(t){return this.hp.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.hp.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.hp.offCursorTargetChanged(t)}setCursorFormatting(t){return this.hp.setCursorFormatting(t),this}getCursorFormatting(){return this.hp.getCursorFormatting()}addCursor(t=rl){const i=this.wy(),s=t.wm(i,this.uiScale,this.uiScale,this.Sy(i),this.qi);return this.By(s),s}addSlice(t,i){const s=new Od(this.$m,this.tp,this.sp,this,this.Mg,this.Km,this.qi,this.us.es);return this.$m+=1,s.setName(t),s.setValue(i),s.es.rs.bs(this.Jm),s.es.ns.bs(this.Qm),this.Nm.push(s),this.us.xs(),s.onMouseMove((()=>{this.getCursorMode()&&this.us.xs()})),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.Nm}setNeckWidth(t){return this.XT=t,this.us.xs(),this}getNeckWidth(){return this.XT}setSliceGap(t){return this.$T=Math.min(Math.max(t,0),20),this.us.xs(),this}setSliceMode(t){return this.jT=t,this.us.xs(),this}getPyramidSliceMode(){return this.jT}setLUT(t){return this.Jd=t,this.us.xs(),this}setSliceFillStyle(t){return this.Um=t,this.us.xs(),this}getSliceFillStyle(){return this.Um}setSliceStrokeStyle(t){return this.Wm="function"==typeof t?t(this.Wm):t,this.us.xs(),this}getSliceStrokeStyle(){return this.Wm}setSliceEffect(t){return this.Qm=t,this.Nm.forEach((i=>i.es.ns.bs(t))),this.us.xs(),this}getSliceEffect(){return this.Qm}setSliceSorter(t){return this.Gm=t,this.Nm=this.Nm.sort(this.Gm),this.us.xs(),this}getSliceSorter(){return this.Gm}setLabelFillStyle(t){return this.Xm="function"==typeof t?t(this.Xm):t,this.us.xs(),this}getLabelFillStyle(){return this.Xm}setLabelFont(t){return this.Hm="function"==typeof t?t(this.Hm):t,this.us.xs(),this}getLabelFont(){return this.Hm}setLabelEffect(t){return this.Jm=t,this.Nm.forEach((i=>i.es.rs.bs(t))),this.us.xs(),this}getLabelEffect(){return this.Jm}setLabelFormatter(t){return this.np=t,this.us.xs(),this}getLabelFormatter(){return this.np}setSliceHighlightOnHover(t){return this.Ym=t,this.Nm.forEach((i=>i.setHighlightOnHover(t))),this}Ee(t){super.Ee(t),Ga.Hy(this.wh,this.Vy),super.Ry();const i=Ga.Yy(this.wh,this.Vy),s=n(this.Mg.x.getInnerInterval()-(this.Fa.left+this.Fa.right),this.Mg.y.getInnerInterval()-(this.Fa.bottom+this.Fa.top+i)),e=n(this.Fa.left+s.x/2,this.Fa.bottom+s.y/2);this.Nm=this.Nm.sort(this.Gm);for(let t=0,{length:i}=this.Nm;t<i;t+=1)this.rp(this.Nm[t],t);const h=this.Nm.filter((t=>t.getAnimatedValue()>0));let r=0;for(let t=0;t<h.length;t+=1)r+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/r:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.hh.vr(this.np(i,o[t])).Vs()}o.push(r),this.hp.Ee(!1,this.Nm,((t,i,s)=>{const e=o[h.indexOf(t)]||0,r=this.us.Go(i);return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.us.ft,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.us.ft},slice:t,category:t.getName(),value:t.getValue(),relativeValue:e}})),this.op(h,o,e,s)}rp(t,i){t.setStyle(this.Jd?new W({color:this.Jd.getColors(t.getAnimatedValue())}):this.Um(i,t),this.Wm,this.Xm,this.Hm)}qm(){this.Nm=this.Nm.sort(this.Gm),this.us.xs()}nf(){return this.Nm}dispose(){return this.Nm.slice().forEach((t=>t.dispose())),this.hp.W(),this.tp.W(),this.sp.W(),super.dispose()}}const Wd=(t,i,s)=>[[i.slice],[{text:i.value.toString(),font:{weight:"bold"}}]],Yd=(t,i,s)=>{const e=t.Fl();if(e.length>0){let t;const h=(e[1].y-e[0].y)/2+e[0].y;return t=i===Zd.Left?(e[0].x-e[1].x)/2+e[1].x-s:(e[2].x-(4===e.length?e[3].x:e[1].x))/2+(4===e.length?e[3].x:e[1].x)+s,{x:t,y:h}}},Hd=t=>{const i=t.Fl();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class Xd extends Ud{constructor(){super(...arguments),this.np=dl.NamePlusValue,this.ZT=10,this.QT=Zd.Left,this.JT=ul.LabelsOnSides,this.ap=[],this.dp=this.qi.pyramidChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.dp=t;for(let t=0;t<this.ap.length;t+=1)this.ap[t].We(this.dp);return this.us.xs(),this}getLabelConnectorStyle(){return this.dp}setLabelConnectorGap(t){return this.ZT=t,this.us.xs(),this}getLabelConnectorGap(){return this.ZT}setLabelSide(t){return this.QT=t,this.us.xs(),this}getLabelSide(){return this.QT}op(t,i,s,e){const h=e.x+this.Fa.left+this.Fa.right,r=e.y+this.Fa.top+this.Fa.bottom<250||h<250,o=this.ZT;let a,l=0;if(!r)for(let i=0;i<t.length;i+=1)l=Math.max(l,t[i].hh.ni().x);a=r?h/2:this.QT===Zd.Right?(this.Fa.left+(h-(this.Fa.right+l)))/2:(this.Fa.left+l+(h-this.Fa.right))/2;const u=e.x-l,c=n(u,e.y);if(Gd(t,this.HT,this.XT,c,this.Fa,this.$T,this.jT,a),r)return t.forEach((t=>t.hh.setVisible(!1))),void this.ap.forEach((t=>t.setVisible(!1)));this.KT(t,this.QT===Zd.Left?-1:1,-1,s,e);for(let t=0;t<this.ap.length;t+=1)this.ap[t].setVisible(!1);for(let i=0;i<t.length;i+=1)if(t[i].getVisible()){const e=this.qT(t[i],-1,s,o);e&&this.fp(e)}}getMinimumSize(){return n(500,300)}KT(t,i,s,e,h){if(0===t.length)return;const r=e.x+i*h.x*.5,o=1===s?Math.max:Math.min;let a;for(let e=0;e<t.length;e+=1){const h=t[e];let l;0===h.xT.Fl().length?h.hh.setVisible(!1):h.hh.setVisible(!0),a&&(l=a.hh.Ga().y+s*(a.hh.ni().y+10));const u=Yd(h.xT,this.QT,0);if(u){const t=u.y,s=void 0===l?t:o(t,l);h.hh.ze(n(r,s)).Ya(i).Xa(0)}a=h}}qT(t,i,s,e){const h=t.xT,r=t.hh,o=Yd(h,this.QT,e);if(o){const t={x:Es(this.QT===Zd.Left?r.Ga().x-i*(e+r.ni().x):r.Ga().x+i*(e+r.ni().x),o,s).x,y:zs(r.Ga().y,o,s).y};return[o,t,n(this.QT===Zd.Left?r.Ga().x-i*(e+r.ni().x):r.Ga().x+i*(e+r.ni().x),t.y)]}}fp(t){let i;for(let t=0;t<this.ap.length;t+=1)if(!this.ap[t].getVisible()){i=this.ap[t].setVisible(!0);break}void 0===i&&(i=this.sp.Ap(this.Mg,void 0,[xl.InternalUI]).We(this.dp),this.ap.push(i)),i.Vt().ml(t)}}class $d extends Ud{constructor(){super(...arguments),this.np=dl.Name,this.JT=ul.LabelsInsideSlices}op(t,i,s,e){const h=this.Fa.left+e.x/2;Gd(t,this.HT,this.XT,e,this.Fa,this.$T,this.jT,h);for(let i=0;i<t.length;i+=1){const s=t[i].xT,e=t[i].hh,h=Hd(s);h&&e.ze(h).Ya(0).Xa(0)}}getMinimumSize(){return n(200,200)}}const jd={LabelsOnSides:Xd,LabelsInsideSlices:$d};var Zd;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(Zd||(Zd={}));const Qd=(t,i,s,e,h,r)=>(t.alignmentX=(h+Math.PI/2)%(2*Math.PI)<=Math.PI?-1:1,t.alignmentY=h%(2*Math.PI)<=Math.PI?-1:1,t.paddingX=Math.cos(h)*r,t.paddingY=Math.sin(h)*r,t),Jd=(t,i,s,e,h,r,n,o)=>{if(0===i)return t.paddingX=o,t.alignmentX=-1,t};var Kd;!function(t){t[t.Normal=0]="Normal",t[t.Circle=1]="Circle"}(Kd||(Kd={}));class qd{constructor(t,i,e,h,r,n,o,a){this.L=new s,this.tF=t,this.Wr=i,this.scale=e,this.chart=h,this.tag=r,this.axisScale=n,this.iF=o,this.sF=a,this.eF=this.tF.Ye(this.scale).setMouseInteractions(!1),this.hF=this.Wr.Ur(this.scale).vr(this.tag).setMouseInteractions(!1),this.rF=this.iF(this,this.tF.Ap(this.scale,void 0,[xl.InternalUI])).We(this.chart.getNibStyle()),this.sF.As([this.hF])}op(t,i,s,e,h,r,o){const a=i.length,l=i[s>0?s-1:a-1],u=i[s],c=i[s<a-1?s+1:0],d=this.chart.getNibLength();this.eF.Xe(t).He(u).We(this.chart.getAxisStyle()),this.rF.Vt().ml(r===Kd.Normal?[ms(u,l,Jt(.5*d/Ts(Ps(l,u)),0,1)),u,ms(u,c,Jt(.5*d/Ts(Ps(c,u)),0,1))]:((t,i,s,e,h=2)=>{const r=e/s,o=[];for(let a=-e/2;a<=e/2;a+=h){const h=r*(a/e)+i,l=n(t.x+Math.cos(h)*s,t.y+Math.sin(h)*s);o.push(l)}return o})(t,e,h,d)),o?this.hF.setVisible(!0).ze(Is(u,n(o.paddingX,o.paddingY))).Ya(o.alignmentX).Xa(o.alignmentY):this.hF.setVisible(!1)}getLabelSize(){return this.hF.tr(this.chart.getAxisLabelFont()).Le(this.chart.getAxisLabelStyle()).Vs().ni()}dispose(){this.eF&&this.eF.dispose(),this.hF&&this.hF.dispose(),this.rF&&this.rF.dispose()}}class tf extends Iu{constructor(t,i,s,e,h,r,n,o,a,l,u,c){super(t,a,l,c),this.ws="Spider Series",this.ku=new Map,this.Xi=ge.onHover,this.aM=8,this.Ca=0,this.nF=(()=>{const t=K((()=>{}));let i;return(s,e,h,r)=>{const n=null==r?void 0:r.onStart,o=null==r?void 0:r.onCompleted,a=(null==r?void 0:r.easing)||Q.ease,l=(null==r?void 0:r.durationMs)||1e3;let u;if(i)if(0===i.nextAnimations.length){const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);u=t}else{s=i.nextAnimations.pop().values[0][0];const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);u=t}else u=t(l,a)([[s,e]],(([t])=>{h(t)})),i=u;u.onAnimationEnd((()=>{i=void 0})),n&&u.onAnimationStart(n),o&&u.onAnimationEnd(o)}})(),this.oF={},this.aF={},this.Pm=this.getVisible(),this.lF=1,this.uF=((t,i)=>{const s=K((()=>{}));let e,h,r=1;return(n,o,a)=>{if(n===h)return;h=n;const l=(null==a?void 0:a.easing)||Q.ease,u=(null==a?void 0:a.durationMs)||1e3;e&&(e.finish(!1),e=void 0),!1===n?o&&r?(e=s(u,l)([[r,0]],(([i])=>{r=i,t(r)})),e.onAnimationEnd((()=>{e=void 0,i(!1)}))):(r=0,i(!1)):o?(i(!0),e=s(u,l)([[r,1]],(([i])=>{r=i,t(r)})),e.onAnimationEnd((()=>{e=void 0}))):(r=1,i(!0))}})((t=>{this.lF=t,this.Ls.us.xs()}),(t=>{super.setVisible(t)})),this.chart=t,this.Ls=i,this.lM=e,this.cF=h,this.Tb=r,this.dF=n,this.fF=o,this.scale=s,this.AF=Ri(l.spiderSeriesFillStyle,u),this.gF=Ri(l.spiderSeriesStrokeStyle,u),this.yF=Ri(l.spiderSeriesPointFillStyle,u)}Ji(t,i){const s=this.fF(i);if(void 0!==s&&this.ku.has(s.tag)){const t=this.ku.get(s.tag),i=this.dF(s.tag,t);return{cursorPosition:{pointMarker:i,pointMarkerScale:this.scale,resultTable:i,resultTableScale:this.scale},series:this,axis:s.tag,value:t}}}fv(){return this.yv&&this.ku.size>0&&this.getVisible()}addPoints(...t){this.ku.size>0&&this.chart.us.Qn(Yo.Pf),t=t.filter((t=>void 0!==t.axis));for(let i=0;i<t.length;i+=1)this.cF(t[i].axis);if(this.chart.getAnimationsEnabled()&&void 0!==this.oF){const i=new Map;let s;t.forEach((t=>i.set(t.axis,t.value))),this.nF(0,1,(t=>{i.forEach(((i,e)=>{const h=(null==s?void 0:s.get(e))||0;this.ku.set(e,h+t*(i-h)),this.Ls.us.xs()}))}),{easing:this.oF.easing,durationMs:this.oF.durationMs,onStart:()=>{s=new Map(this.ku)}})}else for(let i=0;i<t.length;i+=1){const s=t[i].axis;this.ku.set(s,t[i].value)}return this.Ls.xs(),this}getValue(t,i=!1){const s=this.ku.get(t),e=this.chart.getOriginValue();if(void 0!==s)return i?e+this.lF*(s-e):s}setAnimationAddPoints(t,i){return this.oF=t?{easing:t,durationMs:i}:void 0,this.Ls.xs(),this}setVisibleStateChangedAnimation(t,i){return this.aF=t?{easing:t,durationMs:i}:void 0,this.Ls.xs(),this}setFillStyle(t){return this.AF="function"==typeof t?t(this.AF):t,this.xT&&(this.xT.Le(this.AF),this.Ls.xs()),this}getFillStyle(){return this.AF}setStrokeStyle(t){return this.gF="function"==typeof t?t(this.gF):t,this.xT&&(this.xT.Be(this.gF),this.Ls.xs()),this}getStrokeStyle(){return this.gF}setPointFillStyle(t){return this.yF="function"==typeof t?t(this.yF):t,this.uM&&(this.uM.Le(this.yF),this.Ls.xs()),this}getPointFillStyle(){return this.yF}setPointSize(t){return this.aM=t,this.uM&&this.uM.tt(t),this}getPointSize(){return this.aM}getPointShape(){return this.lM}setPointRotation(t){return this.Ca=t,this.uM&&this.uM.ir(t),this.Ls.xs(),this}getPointRotation(){return this.Ca}Ee(){if(super.Ee(),!this.$i){const t=new Array(this.Tb.length),i=this.chart.getOriginValue();for(let s=0;s<this.Tb.length;s+=1){const e=this.ku.get(this.Tb[s].tag);t[s]=void 0!==e?this.dF(this.Tb[s].tag,i+this.lF*(e-i)):this.dF(this.Tb[s].tag,i)}xi(t),t.length>=3&&(this.xT||(this.xT=this.Ls.dc(this.scale,Or.Simple).Be(this.gF).Le(this.AF).cs(this.getHighlight()),this.fs(this.xT)),this.xT.Tl(t),this.uM||(this.uM=this.Ls.Ov(this.scale).tt(this.aM).cl(this.lM).ir(this.Ca).Le(this.yF).cs(this.getHighlight()),this.fs(this.uM)),this.uM.Vt().ml(t))}}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.AF,stroke:this.gF})}Ds(){return this._s||this.lM}mF(){for(let t=0;t<this.Qi.length;t+=1)Pi(this.Qi[t],this.qi,!1,{fill:this.AF,stroke:this.gF})}Ve(t,i){return t.cs(i),this.Ls.xs(),this}setVisible(t){var i,s;return this.Pm=t,this.uF(t,this.chart.getAnimationsEnabled()&&void 0!==this.aF,{easing:null===(i=this.aF)||void 0===i?void 0:i.easing,durationMs:null===(s=this.aF)||void 0===s?void 0:s.durationMs}),this}}const sf=(t,i)=>{const s=Math.PI/2-2*t*Math.PI/i;return s>=0?s:s+2*Math.PI},ef=t=>vs(t.hF.eh()),hf=t=>vs(t.eh()),rf=(t,i,s,e)=>t.mu(0).ze(s).fu(90).He(-270).pu(i===Kd.Circle?void 0:e.length),nf={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},of={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},af=()=>{of.alignmentX=0,of.alignmentY=0,of.paddingX=0,of.paddingY=0};class lf extends $l{constructor(t,i,s,e,h,r,o){super(t,i,s,i.zy("spiderChart bg",0),e,i.us.qi.spiderChartBackgroundFillStyle,i.us.qi.spiderChartBackgroundStrokeStyle,i.us.qi.spiderChartTitleFont,i.us.qi.spiderChartTitleFillStyle,o),this.Fa=A(20,20,20,20),this.axisScale=yt.d1({scale1DConstructor:te,dimension:"x"}).K(0,1),this.Tb=[],this.pF=[],this.vF=[],this.SF=ch.expansion,this.bF=!0,this.xF=Jd,this.MF=Qd,this.Wo=!0,this._F=Kd.Normal,this.wF=4,this.CF=this.qi.spiderChartWebStyle,this.kF=this.qi.spiderChartScaleLabelFillStyle,this.TF=this.qi.spiderChartScaleLabelFont,this.FF=5,this.IF=this.qi.spiderChartAxisLabelFillStyle,this.PF=this.qi.spiderChartAxisLabelFont,this.DF=5,this.BF=this.qi.spiderChartAxisStrokeStyle,this.LF=this.qi.spiderChartAxisNibStrokeStyle,this.Yf=10,this.RF=A(),this.hasAxis=t=>this.Tb.reduce(((i,s)=>i||s.tag===t),!1),this.formatValue=t=>this.axisScale.Pi(t,Ks.Numeric),this.EF=()=>{const t=this.Tb.map(ef).concat(this.vF.map(hf));return cs(t)},this.zF=()=>this.VF.ld(this.Mg).setMouseInteractions(!1),this.OF=t=>t.dispose(),this.NF=()=>this.RA.Ur(this.Mg).setMouseInteractions(!1),this.GF=t=>t.dispose(),this.UF=t=>this.formatValue(this.axisScale.getInnerStart()+t*(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart())),this.WF=(t,i)=>{let s,e;const h=()=>{void 0!==this.YF&&this.YF.finish(),s=c(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),e=this.SF,this.SF=void 0},r=(i,e,h,r,o)=>{const a=n(h.x-e.x,e.y-h.y),l=this.Tb.findIndex((i=>i===t));if(l>=0&&void 0!==s){const i=sf(l,this.Tb.length),e=n(Math.cos(i),Math.sin(i)),h=a.x*e.x+a.y*e.y,r=Ts(Ps(t.eF.Fi(),t.eF.ki())),u=s.min+(s.max-s.min)*Math.max(1+h/r,.01);this.axisScale.K(s.min,u),mi(o),this.us.xs()}},o=()=>{if(s=void 0,void 0!==e)if(this.gh){const t=c(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),i=this.HF(),s=e;if(void 0!==i){const e=s.start(t.min,t.max,i.min,i.max),h=s.end(t.min,t.max,i.min,i.max);this.YF=this.vy.us.fn(300,Q.ease)([[0,1]],(([i])=>{this.axisScale.K(t.min+i*(e-t.min),t.max+i*(h-t.max))})),this.YF.onAnimationEnd((()=>{this.YF=void 0,this.SF=s}))}else this.SF=e}else this.SF=e;e=void 0};i.setMouseEnterEventHandler(this.XF).setMouseLeaveEventHandler(this.$F).setMouseDragStartEventHandler(h).setMouseDragEventHandler(((t,i,s,e,h)=>r(0,n(i.clientX,i.clientY),e,0,i))).setMouseDragStopEventHandler(o);const a=ve(new be(((t,i,s)=>{this.XF(t),h(),mi(s)}),r,((t,i,s,e)=>{this.$F(t),o(),mi(e)})));return i.setTouchStartEventHandler(a.onTouchStart).setTouchMoveEventHandler(a.onTouchMove).setTouchEndEventHandler(a.onTouchEnd)},this.jF=t=>{this.bF&&!this.hasAxis(t)&&this.addAxis(t)},this.dF=(t,i)=>{for(const s of this.Tb)if(s.tag===t){const t=Math.max(Math.min((i-this.axisScale.getInnerStart())/(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart()),1),0);return ms(s.eF.Fi(),s.eF.ki(),t)}},this.fF=t=>{if(0===this.Tb.length)return;const i=Ps(this.translateCoordinate(t,this.coordsRelative),this.Tb[0].eF.Fi()),s=Math.atan2(i.y,i.x);let e,h=es;for(const t of this.Tb){const i=Ps(t.eF.ki(),t.eF.Fi()),r=Math.atan2(i.y,i.x),n=Math.abs(s-r);n<h&&(e=t,h=n)}return e},this.XF=t=>{this.Wo&&(t.We(this.LF),this.us.xs())},this.$F=t=>{t.We(this.LF),this.us.xs()},this.us.Qn(Yo.bf),this.Nk=i.kb("spiderChart series bg",0),this.VF=i.ip("spiderChart web shapes",0),this.ZF=i.ip("spiderChart axis bg",1),this.sx=i.ip("spiderChart plotting",2),this.RA=i.ip("spiderChart fg",3),this.sF=this.es.Dg().bs(this.qi.effectsText),this.wh.vr("Spider Chart"),this.Hv=this.Nk.ld(this.Mg).Le(this.qi.spiderChartSeriesBackgroundFillStyle).Be(dt).fu(90).He(-270).mu(0),this.Xv=this.Nk.ld(this.Mg).Le(O).Be(this.qi.spiderChartSeriesBackgroundStrokeStyle).fu(90).He(-270).mu(0),super.Yv(this.Hv,this.Xv);const a=i.ep(),l=qt(r?r.cursorBuilder:void 0,el);this.hp=Ya(this,a,l.wm(a,this.uiScale,this.uiScale,Zt,this.qi),this,"show-pointed",uf,(()=>0)),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled)),this.Ey(h,this.Mg)}getSeries(){return this.Nv}setCursor(t){return this.hp.setCursor(t),this}getCursor(){return this.hp.getCursor()}setCursorMode(t){return this.hp.setCursorMode(t),this}getCursorMode(){return this.hp.getCursorMode()}setCustomCursor(t){return this.hp.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.hp.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.hp.offCursorTargetChanged(t)}setCursorFormatting(t){return this.hp.setCursorFormatting(t),this}getCursorFormatting(){return this.hp.getCursorFormatting()}addCursor(t=el){const i=this.wy(),s=t.wm(i,this.uiScale,this.uiScale,this.Sy(i),this.qi);return this.By(s),s}addAxis(t){if("string"==typeof t){if(!this.hasAxis(t)){const i=new qd(this.ZF,this.RA,this.Mg,this,t,this.axisScale,this.WF,this.sF);this.Tb.push(i)}}else t&&this.Tb.push(t);return this.sF.As(this.Tb.map((t=>t.hF))),this.us.xs(),this}addSeries(t){const i=void 0!==(null==t?void 0:t.pointShape)?t.pointShape:ar.Circle,s=void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Nv.length,e=new tf(this,this.sx,this.Mg,i,this.jF,this.Tb,this.dF,this.fF,this.Uv,this.qi,s,this.us.es);return this.$v(e),e}getSeriesCount(){return this.Nv.length}setWebMode(t){return this._F=t,this.us.xs(),this}getWebMode(){return this._F}setWebCount(t){return this.wF=t,this.us.xs(),this}getWebCount(){return this.wF}setWebStyle(t){return this.CF="function"==typeof t?t(this.CF):t,this.us.xs(),this}getWebStyle(){return this.CF}setScaleLabelStyle(t){return this.kF="function"==typeof t?t(this.kF):t,this.us.xs(),this}getScaleLabelStyle(){return this.kF}setScaleLabelFont(t){return this.TF="function"==typeof t?t(this.TF):t,this.us.xs(),this}getScaleLabelFont(){return this.TF}setScaleLabelPadding(t){return this.FF=t,this.us.xs(),this}getScaleLabelPadding(){return this.FF}setScaleLabelStrategy(t){return this.xF=t,this.us.xs(),this}setScaleLabelFormatter(t){return this.formatValue=t,this.us.xs(),this}setAxisLabelStyle(t){return this.IF="function"==typeof t?t(this.IF):t,this.us.xs(),this}getAxisLabelStyle(){return this.IF}setAxisLabelFont(t){return this.PF="function"==typeof t?t(this.PF):t,this.us.xs(),this}getAxisLabelFont(){return this.PF}setAxisLabelEffect(t){return this.sF.bs(t),this.us.xs(),this}getAxisLabelEffect(){return this.sF.Ms()}setAxisLabelPadding(t){return this.DF=t,this.us.xs(),this}getAxisLabelPadding(){return this.DF}setAxisLabelStrategy(t){return this.MF=t,this.us.xs(),this}setAxisStyle(t){return this.BF="function"==typeof t?t(this.BF):t,this.us.xs(),this}getAxisStyle(){return this.BF}setNibStyle(t){return this.LF="function"==typeof t?t(this.LF):t,this.us.xs(),this}getNibStyle(){return this.LF}setNibLength(t){return this.Yf=t,this.us.xs(),this}getNibLength(){return this.Yf}setAutoAxis(t){return this.bF=t,this}getAutoAxis(){return this.bF}setMouseInteractions(t){return this.Wo=t,this}getMouseInteractions(){return this.Wo}setAxisScrollStrategy(t){return this.SF=t,this.us.xs(),this}getAxisScrollStrategy(){return this.SF}setAxisInterval(t,i=0){return this.axisScale.K(i,t),this.us.xs(),this}getOriginValue(){return this.axisScale.getInnerStart()}getEdgeValue(){return this.axisScale.getInnerEnd()}Ee(t){super.Ee(t),Ga.Hy(this.wh,this.Vy);const i=this.Tb.length,s=Ga.Yy(this.wh,this.Vy),e=n(this.Mg.x.getInnerInterval()-(this.Fa.left+this.Fa.right),this.Mg.y.getInnerInterval()-(this.Fa.bottom+this.Fa.top+s)),h=((t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}))(0,0,0,0);if(void 0!==this.MF){const t=Math.min(e.x,e.y)/2;for(let s=0;s<i;s+=1){const e=sf(s,i),r=Math.cos(e),o=Math.sin(e),a=this.Tb[s].getLabelSize();af();const l=this.MF(of,s,i,this.Tb[s].tag,e,this.DF),u=n(r*t+l.paddingX,o*t+l.paddingY);r>0?h.right=Math.max(h.right,u.x+.5*(1-l.alignmentX)*a.x-t):h.left=Math.max(h.left,-u.x+.5*(l.alignmentX+1)*a.x-t),o>0?h.top=Math.max(h.top,u.y+.5*(1-l.alignmentY)*a.y-t):h.bottom=Math.max(h.bottom,-u.y+.5*(l.alignmentY+1)*a.y-t)}}if(this.SF){const t=this.HF();if(void 0!==t){const i=this.SF.start(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max),s=this.SF.end(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max);this.axisScale.K(i,s)}}const r=n(this.Mg.x.getInnerStart()+(h.left+this.Mg.x.getInnerInterval()-h.right)/2,this.Mg.y.getInnerStart()+(h.bottom+this.Mg.y.getInnerInterval()-h.top)/2),o=Math.min(e.x/2-(h.left+h.right)/2,e.y/2-(h.bottom+h.top)/2);this.RF=A(this.Xt.left+this.Fa.left+h.left,this.Xt.top+this.Fa.top+s+h.top,this.Xt.right+this.Fa.right+h.right,this.Xt.bottom+this.Fa.bottom+h.bottom),this.op(r,o);for(const t of this.Nv)t.wv();for(const t of this.Nv)t.Ee();super.Ry(),this.hp.Ee(!1,this.Nv,void 0);for(const t of this.Nv)t.Fp()}dispose(){return this.Nk.W(),this.VF.W(),this.ZF.W(),this.sx.W(),this.RA.W(),this.hp.W(),super.dispose()}getMinimumSize(){return n(this.RF.left+this.RF.right+100,this.RF.bottom+this.RF.top+100)}op(t,i){const s=this.Tb.length,e=[];for(let h=0;h<s;h+=1){const r=sf(h,s),o=n(t.x+Math.cos(r)*i,t.y+Math.sin(r)*i);e.push(o)}rf(this.Hv,this._F,t,e),rf(this.Xv,this._F,t,e),this.Hv.Au(i),this.Xv.Au(i),((t,i,s,e,h,r,n,o)=>{const a=t.length,l=r.length,u=i>0&&l>1;for(let l=0;l<Math.max(i,a);l+=1)if(u&&l<i){l>=a&&t.push(n());const o=t[l];rf(o,s,e,r);const u=h*((l+1)/i);o.Au(u)}else l<t.length&&o(t[l]);t.length=u?i:0})(this.pF,this.wF,this._F,t,i,e,this.zF,this.OF);for(const t of this.pF)t.Le(O).Be(this.CF);for(let h=0;h<s;h+=1){const r=this.Tb[h],n=sf(h,s);af();const o=void 0!==this.MF?this.MF(of,h,s,this.Tb[h].tag,n,this.DF):void 0;r.op(t,e,h,n,i,this._F,o)}((t,i,s,e,h,r,o,a,l,u)=>{const c=h.length,d=t.length;let f=0;if(void 0!==i)for(let l=0;l<c;l+=1){const A=h[l].tag,g=sf(l,c);for(let h=0;h<s+ +(0===l);h+=1){nf.alignmentX=0,nf.alignmentY=0,nf.paddingX=0,nf.paddingY=0;const y=i(nf,l,c,A,g,h,s,e);if(void 0!==y){f>=d&&t.push(a());const i=t[f];f+=1;const e=(s-h)/s,c=ms(r,o[l],e);i.ze(Is(c,n(y.paddingX,y.paddingY))).Ya(y.alignmentX).Xa(y.alignmentY).vr(u(e))}}}for(let i=f;i<d;i+=1)l(t[i]);t.length=f})(this.vF,this.xF,this.wF,this.FF,this.Tb,t,e,this.NF,this.GF,this.UF);for(const t of this.vF)t.Le(this.kF).tr(this.TF)}HF(){let t,i;const s=this.getSeriesCount()>1;for(const e of this.Tb)for(const h of this.Nv){const r=h.getValue(e.tag,s);void 0!==r&&(t=void 0===t?r:Math.min(t,r),i=void 0===i?r:Math.max(i,r))}if(void 0!==t&&void 0!==i)return c(t,i)}}const uf=(t,i,s)=>Wa(i,[[i.series],[i.axis],[{text:t.formatValue(i.value),font:{weight:"bold"}}]]),cf=(t,i)=>{const s=Math.floor(99999/i),e=Math.floor(99999/i),h=Math.floor(99998/i),r=Math.floor(99998/i),n=Math.floor(99999/(i+1)),o=Math.floor(89999/(i+1)),a=510001+i*o;let l=0;return{QF:()=>{const i=t.JF("dashboard ui",a+l);return l+=1,i},KF:()=>t.JF("dashboard legend",51e4),qF:i=>{const a=1+i*s,l=100001+i*e,u=200002+i*h,c=300002+i*r,d=400001+i*n,f=510001+i*o;let A=0;return{us:t,zy:(i,s)=>{const e=a+s;return t.JF(i,e)},kb:(i,s)=>{const e=l+s;return t.JF(i,e)},Uk:(i,s)=>{const e=u+s;return t.JF(i,e)},ip:(i,s)=>{const e=c+s;return t.JF(i,e)},Cb:(i,s,e)=>{const h=c+s;return t.tI(i,h,e)},Ny:(i,s)=>{const e=d+s;return t.JF(i,e)},Cy:i=>{const s=f+A,e=t.JF(i,s);return A+=1,e},Ty:()=>t.JF("panel legend",500002+i),ep:()=>t.JF("panel cursor",600001+i)}}}};class df{constructor(t){this.L=new s,this.S=t}M(t){return this.S=t,this.L.emit("set",t),this}_(){return this.S}N(t){return this.L.on("set",t)}U(t){return this.L.off(t,"set")}}const ff={yh:!1,mh:0,ph:!1,bh:0,Sh:!1,xh:0,Mh:0,dh:ch.fitting},Af=t=>{if(!t||"object"!=typeof t||null===t)return!1;const i=t.type;return!(!i||!["spark-line","spark-bar","spark-win-loss","spark-area","spark-pie"].includes(i))},gf=(t,i,s,e,h,r,n,o)=>{const{type:a,data:l}=t;if(0===l.length)return;const u=[e,h];"spark-line"===a&&_f(t,i,u,r,n,o),"spark-bar"===a&&wf({...t,winLoss:!1},i,u,r,n,o),"spark-win-loss"===a&&wf({...t,winLoss:!0},i,u,r,n,o),"spark-area"===a&&Cf(t,i,u,r,n,o),"spark-pie"===a&&kf(t,i,u,r,n,o)},yf=(t,i,s,e)=>({x:pf(t.x,i.x,s.x,e),y:vf(t.y,i.y,s.y,e)}),mf=(t,i,s,e)=>({position:pf(t.position,i.x,s.x,e),high:vf(t.high,i.y,s.y,e),low:vf(t.low,i.y,s.y,e)}),pf=(t,i,s,e)=>{const h=Jt(t,i,i+s);return e[0].x+e[1].x*(h-i)/s},vf=(t,i,s,e)=>{const h=Jt(t,i,i+s);return e[0].y+e[1].y*(h-i)/s},Sf=(t,i,s,e,h,r,n,o)=>{for(const a of t)"point"===a.type&&bf(a,i,s,h,r,n,o),"axis-band"===a.type&&xf(a,s,h,r,n,o),"constant-line"===a.type&&Mf(a,s,e,h,r,n,o)},bf=(t,i,s,e,h,r,n)=>{const{value:o,fillStyle:a,shape:l,size:u,rotation:c}=t;let d={x:NaN,y:NaN};if("start"===o&&(d=i[0]),"end"===o&&(d=i[i.length-1]),"min"===o){d=i[0];for(const t of i)d=d.y<t.y?d:t}if("max"===o){d=i[0];for(const t of i)d=d.y>t.y?d:t}("object"!=typeof o||(d=yf(o,s,e,h),((t,i)=>{const s=i[0],e=i[1],h=t.x,r=t.y;return s.x<=h&&h<=s.x+e.x&&s.y<=r&&r<=s.y+e.y})(d,h)))&&r.pointSet.add().Vt().cl(void 0!==l?l:ar.Circle).ir(c||0).tt(u||5).Le(a||n.sparkPointChartFillStyle).ml(d)},xf=(t,i,s,e,h,r)=>{const{axis:o,start:a,end:l,fillStyle:u,strokeStyle:c}=t;let d=n(hs,es),f=n(hs,es);"x"===o&&(d=yf({x:a,y:hs},i,s,e),f=yf({x:l,y:es},i,s,e)),"y"===o&&(d=yf({x:hs,y:a},i,s,e),f=yf({x:es,y:l},i,s,e));const A=e[0],g=e[1],y=Jt(d.x,A.x,A.x+g.x),m=Jt(d.y,A.y,A.y+g.y),p=Jt(f.x,A.x,A.x+g.x),v=Jt(f.y,A.y,A.y+g.y);h.rect.add().xl(y).Ml(m).tt(n(p-y,v-m)).Le(u||r.sparkChartBandFillStyle).Be(c||r.sparkChartBandStrokeStyle).Be(dt)},Mf=(t,i,s,e,h,r,o)=>{const{axis:a,value:l,strokeStyle:u}=t,c=l||0,d=i.y,f=s.y,A=i.x,g=s.x,y=[];if("y"===a&&d<=c&&c<=f){const t=yf(n(A,c),{x:A,y:d},e,h),i=yf(n(g,c),{x:A,y:d},e,h);y.push([t,i])}if("x"===a&&A<=c&&c<=g){const t=yf(n(c,d),{x:A,y:d},e,h),i=yf(n(c,f),{x:A,y:d},e,h);y.push([t,i])}y.length>0&&r.line.add().We(u||o.sparkChartConstantLineStrokeStyle).Xe(y[0][0]).He(y[0][1])},_f=(t,i,s,e,h,r)=>{const{strokeStyle:n,data:o,markers:a}=t,l=o.length;l>1e4&&h.so&&Yt.console.warn("LightningChart JS warning: SparkLineChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let u=es,c=hs,d=es,f=hs;for(let t=0;t<l;t+=1){const i=o[t];u=Math.min(u,i.x),c=Math.max(c,i.x),d=Math.min(d,i.y),f=Math.max(f,i.y)}const A={x:c-u,y:f-d},g=o.map((t=>yf(t,{x:u,y:d},A,s)));i.lineSet.add().cs(r).We(n||e.sparkLineChartStrokeStyle).Vt().ml(g),a&&Sf(a,g,{x:u,y:d},{x:c,y:f},A,s,i,e)},wf=(t,i,s,e,h,r)=>{const{data:n,fillStyle:o,strokeStyle:a,threshold:l,winFillStyle:u,lossFillStyle:c}=t,d=t.barSize||1,f=t.gap||1,A=t.winLoss,g=l||0,y=f/d*1;let m=es,p=hs;if(A)m=-1,p=1;else for(const t of n)m=Math.min(m,t),p=Math.max(p,t);const v={x:0,y:A?-1:Math.min(0,m)},S={x:1*n.length+(n.length-1)*y,y:A?2:Math.max(p,1e-5)};n.map(((t,i)=>{const e={x:1*(i+1)+i*y,y:A?t>=g?1:0:t},h=yf({x:1*i+i*y,y:A?t>=g?0:-1:0},v,S,s),r=yf(e,v,S,s);return{value:t,position:h,width:r.x-h.x,height:r.y-h.y}})).forEach((t=>{var s;i.rect.add().cs(r).ze(t.position).wl(t.height)._l(t.width).Le((s=t.value,A?(s>=g?u:c)||e.sparkBarChartFillStyle:o||e.sparkBarChartFillStyle)).Be(a||e.sparkBarChartStrokeStyle)}))},Cf=(t,i,s,e,h,r)=>{const{data:n,fillStyle:o,strokeStyle:l,markers:u}=t,c=n.length;c>1e4&&h.so&&Yt.console.warn("LightningChart JS warning: SparkAreaChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let d=es,f=hs,A=es,g=hs;for(let t=0;t<c;t+=1){const i=n[t];d=Math.min(d,i.x),f=Math.max(f,i.x),A=Math.min(A,i.y),g=Math.max(g,i.y)}const y={x:f-d,y:g-A},m=[],p=[];for(const t of n){const i=a(t.x,t.y,A);m.push(mf(i,{x:d,y:A},y,s)),p.push(yf(t,{x:d,y:A},y,s))}i.junction.add().cs(r).Vt().ml(m).Le(o||e.sparkAreaChartFillStyle),i.lineSet.add().cs(r).Vt().ml(p).We(l||e.sparkAreaChartStrokeStyle),u&&Sf(u,p,{x:d,y:A},{x:f,y:g},y,s,i,e)},kf=(t,i,s,e,h,r)=>{const{data:o,strokeStyle:a}=t,l=o.map((t=>"number"==typeof t?t:t.value)),u=o.map((t=>"object"==typeof t?t.fillStyle:void 0)),c=l.reduce(((t,i)=>t+i),0),d=yf(n(50,50),{x:0,y:0},{x:100,y:100},s),f=s[1],A=f.x<=f.y?f.x/2:f.y/2;let g=90;l.forEach(((t,s)=>{const h=t/c*360;i.arc.add().cs(r).ze(d).Au(A).mu(0).fu(g).He(g+h).Le(u[s]||Ri(e.sparkPieChartFillStyle,s)).Be(a||e.sparkPieChartStrokeStyle),g+=h}))};var Tf,Ff,If;!function(t){t[t.UpToDown=0]="UpToDown",t[t.LeftToRight=1]="LeftToRight"}(Tf||(Tf={})),function(t){t[t.Vertical=0]="Vertical",t[t.Horizontal=1]="Horizontal",t[t.Both=2]="Both"}(Ff||(Ff={})),function(t){t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right"}(If||(If={}));class Pf extends Qr{constructor(t,i,s,e,h){super(),this.Os=!1,this.n_={x:0,y:0,height:20,width:20},this.iI={x:10,y:10},this.Ls=t,this.sI=h,this.eI=new qn(t,i,s,Zt,e).setMouseInteractions(!0),this.hI=t.dc(i,Or.Simple).Le(e.dataGridScrollBarButtonArrowFillStyle).Be(e.dataGridScrollBarButtonArrowStrokeStyle).setMouseInteractions(!1),this.Du(this),this.eI.onMouseEnter((t=>t.setHighlight(1))),this.eI.onMouseLeave((t=>t.setHighlight(0)))}rI(){switch(this.sI){case If.Up:this.hI.Tl([{x:this.n_.x,y:this.n_.y+this.iI.y/2},{x:this.n_.x+this.iI.x/2,y:this.n_.y-this.iI.y/2},{x:this.n_.x-this.iI.x/2,y:this.n_.y-this.iI.y/2}]);break;case If.Down:this.hI.Tl([{x:this.n_.x-this.iI.x/2,y:this.n_.y+this.iI.y/2},{x:this.n_.x+this.iI.x/2,y:this.n_.y+this.iI.y/2},{x:this.n_.x,y:this.n_.y-this.iI.y/2}]);break;case If.Left:this.hI.Tl([{x:this.n_.x-this.iI.x/2,y:this.n_.y},{x:this.n_.x+this.iI.x/2,y:this.n_.y+this.iI.y/2},{x:this.n_.x+this.iI.x/2,y:this.n_.y-this.iI.y/2}]);break;case If.Right:this.hI.Tl([{x:this.n_.x-this.iI.x/2,y:this.n_.y+this.iI.y/2},{x:this.n_.x+this.iI.x/2,y:this.n_.y},{x:this.n_.x-this.iI.x/2,y:this.n_.y-this.iI.y/2}])}}ze(t){return this.n_.x=t.x,this.n_.y=t.y,this}Ga(){return n(this.n_.x,this.n_.y)}tt(t){return this.n_.height=t.x,this.n_.width=t.y,this}ni(){return{x:this.n_.height,y:this.n_.width}}onMouseDown(t){return this.eI.onMouseDown(t)}onMouseUp(t){return this.eI.onMouseUp(t)}setFillStyle(t){return this.eI.setFillStyle(t),this}getFillStyle(){return this.eI.getFillStyle()}setStrokeStyle(t){return this.eI.setStrokeStyle(t),this}getStrokeStyle(){return this.eI.getStrokeStyle()}Ee(){return this.eI.Ee(),this.rI(),this}Vs(){return this.eI.setSize(n(this.n_.height,this.n_.width)).setPosition(n(this.n_.x,this.n_.y)),this}setVisible(t){return this.eI.setVisible(t),this.hI.setVisible(t),this}dispose(){return this.eI.dispose(),this.hI.dispose(),this}setMouseInteractions(t){return this.eI.setMouseInteractions(t),this}getMouseInteractions(){return this.eI.getMouseInteractions()}onHighlight(t){return this.L.on("highlight",t)}offHighlight(t){return this.L.off(t)}getHighlight(){return this.eI.getHighlight()}setHighlight(t){return this.eI.setHighlight(Ui(t)),this.L.emit("highlight",this,Boolean(t)),this.Ls.xs(),this}}const Df=(t,i)=>Math.min(Math.max(t,i.getInnerStart()),i.getInnerEnd());class Bf{constructor(t,i,e,h,r,o,a){this.ud={x:0,y:0},this.n_={x:0,y:0,height:0,width:0},this.L=new s,this.nI={min:n(0,0),max:n(0,0)},this.oI=!1,this.aI=!1,this.lI={x:0,y:0},this.Lu=void 0,this.uI=n(0,0),this.cI={x:0,y:0},this.dI=0,this.fI=15,this.AI=(t,i)=>{this.oI=!0,this.RA.xs();const s=this.gI.getDraggingMode();this.Lu=this.RA.us.qr(s===Gt.notDraggable?Ke.Restricted:s===Gt.draggable?Ke.Move:s===Gt.onlyHorizontal?Ke.Horizontal:Ke.Vertical),this.yI&&clearInterval(this.yI)},this.mI=()=>{this.oI=!1,this.RA.xs(),this.RA.us.tn(this.Lu)},this.pI=t=>(this.aI=!0,this.lI=pt(this.RA.us.Oe(t.x,t.y),this.RA.us.ft,this.scale),!0),this.vI=(t,i)=>(this.SI(i),this.yI=setInterval((()=>this.SI(i)),300),!0),this.bI=()=>(clearInterval(this.yI),!0),this.xI=(t,i)=>{const s=this.gI.getDraggingMode();if(s!==Gt.notDraggable){const e=i||s,h=pt(this.RA.us.Oe(t.x,t.y),this.RA.us.ft,this.scale),r=n(e!==Gt.onlyVertical?Df(h.x,this.scale.x):this.n_.x,e!==Gt.onlyHorizontal?Df(h.y,this.scale.y):this.n_.y),o=n(r.x-this.lI.x,r.y-this.lI.y),a=n(this.gI.getPosition().x+o.x,this.gI.getPosition().y+o.y),l=this.MI(a),u={x:Math.abs(this.uI.x-l.x),y:Math.abs(this.uI.y-l.y)};return this._I(u),this.cI.y>o.y&&(this.lI=h),this.Ee(),!0}return!1},this.wI=(t,i)=>{this.aI=!1,mi(i),this.RA.xs()},this.RA=t,this.vy=i,this.scale=h,this.contentScale=r,this.CI=a,this.kI=new Pf(t,e,h,o,a===Tf.UpToDown?If.Up:If.Left).setStrokeStyle(o.dataGridScrollBarButtonStrokeStyle).setFillStyle(o.dataGridScrollBarButtonFillStyle),this.TI=new Pf(t,e,h,o,a===Tf.UpToDown?If.Down:If.Right).setStrokeStyle(o.dataGridScrollBarButtonStrokeStyle).setFillStyle(o.dataGridScrollBarButtonFillStyle),this.gI=new qn(t,e,h,Zt,o).setFillStyle(o.dataGridScrollBarFillStyle).setStrokeStyle(o.dataGridScrollBarStrokeStyle).setMouseInteractions(!0).setDraggingMode(a===Tf.UpToDown?Gt.onlyVertical:a===Tf.LeftToRight?Gt.onlyHorizontal:Gt.notDraggable),this.FI=new qn(i,e,h,Zt,o).setFillStyle(o.dataGridScrollBarBackgroundFillStyle).setStrokeStyle(o.dataGridScrollBarBackgroundStrokeStyle).setMouseInteractions(!0),this.gI.onMouseEnter(this.AI),this.gI.onMouseLeave(this.mI),this.gI.onMouseDragStart(((t,i)=>this.pI(n(i.clientX,i.clientY))&&mi(i))),this.gI.onMouseDrag(((t,i)=>this.xI(n(i.clientX,i.clientY))&&mi(i))),this.gI.onMouseDragStop(this.wI),this.gI.onTouchStart(((t,i)=>this.pI(n(i.clientX,i.clientY))&&mi(i))),this.gI.onTouchMove(((t,i)=>this.xI(n(i.clientX,i.clientY))&&mi(i))),this.gI.onTouchEnd(this.wI),this.kI.onMouseDown(((t,i)=>this.vI(t,i)&&mi(i))),this.TI.onMouseDown(((t,i)=>this.vI(t,i)&&mi(i))),this.kI.onMouseUp(((t,i)=>this.bI()&&mi(i))),this.TI.onMouseUp(((t,i)=>this.bI()&&mi(i))),this.FI.onMouseWheel(((t,i)=>this.II(i))),this.gI.onMouseWheel(((t,i)=>this.II(i))),this.FI.onMouseDown(((t,i)=>this.vI(t,i)&&mi(i))),this.FI.onMouseUp(((t,i)=>this.bI()&&mi(i)))}DI(t){return this.n_=t,this}_l(t){return this.n_.width=t,this}BI(){return this.n_.width}LI(t){return this.uI=t,this}RI(t){return this.ud=t,this}EI(){return this.ud}zI(t){return this.fI=t,this}VI(){return this.CI}OI(t){let i;switch(this.CI){case Tf.UpToDown:return i=t>0?Math.min(this.uI.y-this.nI.max.y,this.cI.y+t):Math.max(0,this.cI.y+t),i!==this.cI.y&&(this._I({x:0,y:i}),this.Ee(),!0);case Tf.LeftToRight:return i=Math.min(this.nI.max.x-this.uI.x,this.cI.x+t),i!==this.cI.x&&(this._I({y:0,x:i}),this.Ee(),!0);default:return!1}}NI(t){let i;switch(this.CI){case Tf.UpToDown:return i=Math.max(0,this.cI.y-t),i!==this.cI.y&&(this._I({x:0,y:i}),this.Ee(),!0);case Tf.LeftToRight:return i=t>0?Math.max(0,this.cI.x-t):Math.min(this.nI.max.x-this.uI.x,this.cI.x-t),i!==this.cI.x&&(this._I({x:i,y:0}),this.Ee(),!0);default:return!0}}GI(t){switch(this.CI){case Tf.UpToDown:return this.L.on("scrollY",t);case Tf.LeftToRight:return this.L.on("scrollX",t)}return this.L.on("scrollY",t)}MI(t){switch(this.CI){case Tf.UpToDown:if(t.y>this.nI.min.y)return n(t.x,this.nI.min.y);if(t.y<this.nI.max.y)return n(t.x,this.nI.max.y);break;case Tf.LeftToRight:if(t.x<this.nI.min.x)return n(this.nI.min.x,t.y);if(t.x>this.nI.max.x)return n(this.nI.max.x,t.y)}return t}II(t){t.deltaY>0&&this.UI()&&mi(t),t.deltaY<0&&this.WI()&&mi(t)}SI(t){const i=pt(this.RA.us.Oe(t.clientX,t.clientY),this.RA.us.ft,this.scale);let s;const e=this.gI.getPosition(),h=this.gI.getSize();this.YI(i,e,h)?clearInterval(this.yI):(s=this.CI===Tf.UpToDown?n(0,i.y-e.y>0?this.fI:-this.fI):n(e.x-i.x>0?this.fI:-this.fI,0),(s.x>0||s.y>0)&&this.HI(0!==s.x?Math.abs(s.x):Math.abs(s.y)),(s.x<0||s.y<0)&&this.XI(0!==s.x?Math.abs(s.x):Math.abs(s.y)))}YI(t,i,s){return this.CI===Tf.UpToDown?t.y<i.y+s.y/2&&t.y>i.y-s.y/2:t.x>i.x-s.x/2&&t.x<i.x+s.x/2}$I(t){this.nI=t}HI(t){switch(this.CI){case Tf.UpToDown:{const i=Math.max(0,this.cI.y-t);return i!==this.cI.y&&(this._I({x:0,y:i}),this.Ee(),!0)}case Tf.LeftToRight:{const i=Math.max(0,this.cI.x-t);return i!==this.cI.x&&(this._I({x:i,y:0}),this.Ee(),!0)}default:return!1}}XI(t){switch(this.CI){case Tf.UpToDown:{let i;return i=this.ud.x>this.n_.height?Math.min(this.uI.y-this.nI.max.y,this.cI.y+t):0,i!==this.cI.y&&(this._I({x:0,y:i}),this.Ee(),!0)}case Tf.LeftToRight:{const i=Math.min(this.nI.max.x-this.uI.x,this.cI.x+t);return i!==this.cI.x&&(this._I({y:0,x:i}),this.Ee(),!0)}default:return!1}}WI(){return this.HI(this.fI)}UI(){return this.XI(this.fI)}_I(t){if(t.x===this.cI.x&&t.y===this.cI.y)return;let i;switch(this.cI=t,this.CI){case Tf.UpToDown:i=this.cI.y*this.dI*this.contentScale.Gi().y,this.L.emit("scrollY",Ff.Vertical,i),this.RA.us.xs();break;case Tf.LeftToRight:i=this.cI.x*this.dI*this.contentScale.Gi().x,this.L.emit("scrollX",Ff.Horizontal,i)}}setVisible(t){return this.kI.setVisible(t),this.TI.setVisible(t),this.FI.setVisible(t),this.gI.setVisible(t),this}dispose(){return this.kI.dispose(),this.TI.dispose(),this.FI.dispose(),this.gI.dispose(),this.yI&&clearInterval(this.yI),this}Vs(){switch(this.jI(),this.ZI(),this.CI){case Tf.UpToDown:this.kI.ze({x:this.n_.x,y:this.n_.y+this.n_.height-this.kI.ni().x/2}).tt(n(this.n_.width,this.n_.width)).Vs(),this.TI.ze({x:this.n_.x,y:this.n_.y+10}).tt(n(this.n_.width,this.n_.width)).Vs(),this.FI.setSize({x:this.n_.width,y:this.n_.height-2*this.kI.ni().x}).setPosition({x:this.n_.x,y:this.n_.y+this.TI.ni().y+this.FI.getSize().y/2}),this.gI.setSize(n(this.n_.width,this.QI())),this.uI={x:this.n_.x,y:this.kI.Ga().y-this.kI.ni().y/2-this.gI.getSize().y/2},this.$I({min:{x:this.n_.x,y:this.kI.Ga().y-this.kI.ni().y/2-this.gI.getSize().y/2},max:{x:this.n_.x,y:this.TI.Ga().y+this.TI.ni().x/2+this.gI.getSize().y/2}});break;case Tf.LeftToRight:this.kI.ze({x:this.n_.x,y:this.n_.y}).tt(n(this.n_.height,this.n_.height)).Vs(),this.TI.ze({x:this.n_.x+this.n_.width-this.TI.ni().x,y:this.n_.y}).tt(n(this.n_.height,this.n_.height)).Vs(),this.FI.setSize({y:this.n_.height,x:this.n_.width-2*this.kI.ni().y}).setPosition({x:this.n_.x+this.kI.ni().x/2+this.FI.getSize().x/2,y:this.n_.y}),this.gI.setSize(n(this.QI(),this.n_.height)),this.uI={x:this.kI.Ga().x+this.kI.ni().x/2+this.gI.getSize().x/2,y:this.n_.y},this.$I({min:{x:this.kI.Ga().x+this.kI.ni().x/2+this.gI.getSize().x/2,y:this.n_.y},max:{x:this.TI.Ga().x-this.TI.ni().x/2-this.gI.getSize().x/2,y:this.n_.y}})}return this.JI(),this}jI(){switch(this.CI){case Tf.UpToDown:this.KI()||this.setVisible(!1),this.KI()&&this.setVisible(!0);break;case Tf.LeftToRight:this.qI()||this.setVisible(!1),this.qI()&&this.setVisible(!0)}}ZI(){switch(this.CI){case Tf.UpToDown:this.KI()||this._I({x:0,y:0});break;case Tf.LeftToRight:this.qI()||this._I({x:0,y:0})}}KI(){return this.ud.x>this.n_.height}qI(){return this.ud.y>this.n_.width}QI(){switch(this.CI){case Tf.UpToDown:return this.n_.height*(this.n_.height-2*this.kI.ni().x)/this.ud.x;case Tf.LeftToRight:return this.n_.width*(this.n_.width-2*this.kI.ni().y)/this.ud.y;default:return 0}}JI(){switch(this.CI){case Tf.UpToDown:this.dI=(this.ud.x-this.n_.height)/(this.nI.min.y-this.nI.max.y);break;case Tf.LeftToRight:this.dI=(this.ud.y-this.n_.width)/(this.nI.max.x-this.nI.min.x)}}Ee(){switch(this.kI.Ee(),this.TI.Ee(),this.FI.Ee(),this.CI){case Tf.UpToDown:this.gI.setPosition({x:this.n_.x,y:this.kI.Ga().y-this.kI.ni().y/2-this.gI.getSize().y/2-this.cI.y}).Ee();break;case Tf.LeftToRight:this.gI.setPosition({y:this.n_.y,x:this.kI.Ga().x+this.kI.ni().x/2+this.gI.getSize().x/2+this.cI.x}).Ee()}return this}}class Lf{constructor(t,i,s,e,h,r,n){switch(this.RA=t,this.vy=i,this.scale=e,this.contentScale=h,n){case Ff.Vertical:this.tP=this.iP(s,r,Tf.UpToDown);break;case Ff.Horizontal:this.sP=this.iP(s,r,Tf.LeftToRight);break;case Ff.Both:this.tP=this.iP(s,r,Tf.UpToDown),this.sP=this.iP(s,r,Tf.LeftToRight)}this.eP=ve(new be(void 0,((t,i,s,e,h)=>{var r,n;0!==e.x&&(null===(r=this.sP)||void 0===r?void 0:r.NI(e.x))&&mi(h),0!==e.y&&(null===(n=this.tP)||void 0===n?void 0:n.OI(e.y))&&mi(h)})))}iP(t,i,s){return new Bf(this.RA,this.vy,t,this.scale,this.contentScale,i,s)}BI(){return 20}RI(t){var i,s;return null===(i=this.tP)||void 0===i||i.RI(t),null===(s=this.sP)||void 0===s||s.RI(t),this}hP(t){var i;return null===(i=this.sP)||void 0===i||i.zI(t),this}rP(t){var i;return null===(i=this.tP)||void 0===i||i.zI(t),this}nP(t){const i=this.tP;return i&&i.II(t),this}oP(t){return this.eP.onTouchStart(this,t),this}aP(t){return this.eP.onTouchMove(this,t),this}lP(t){return this.eP.onTouchEnd(this,t),this}onScroll(t){var i,s;return null===(i=this.sP)||void 0===i||i.GI(t),null===(s=this.tP)||void 0===s||s.GI(t),this}dispose(){var t,i;return null===(t=this.tP)||void 0===t||t.dispose(),null===(i=this.sP)||void 0===i||i.dispose(),this}Ee(){var t,i;return null===(t=this.tP)||void 0===t||t.Ee(),null===(i=this.sP)||void 0===i||i.Ee(),this}Vs(){var t,i,s,e;const h=this.scale.x,r=this.scale.y;return null===(t=this.tP)||void 0===t||t.DI({x:h.getInnerEnd()-10,y:r.getInnerStart()+20,height:r.getInnerEnd()-20,width:20}),null===(i=this.sP)||void 0===i||i.DI({x:h.getInnerStart()+10,y:r.getInnerStart()+10,height:20,width:h.getInnerEnd()-20}),null===(s=this.tP)||void 0===s||s.Vs(),null===(e=this.sP)||void 0===e||e.Vs(),this}}class Rf extends Na{constructor(t,i,s,e,h,r){super(t,i,s,i.zy("dataGrid bg",0),e,i.us.qi.dataGridBackgroundFillStyle,i.us.qi.dataGridBackgroundStrokeStyle,i.us.qi.dataGridTitleFont,i.us.qi.dataGridTitleFillStyle,r),this.uP=[],this.cP=[],this.dP=[],this.fP=new Map,this.AP=!0,this.gP=!0,this.yP=!0,this.mP=!0,this.pP=!0,this.vP=!0,this.SP=!0,this.bP=!0,this.xP=!0,this.MP=!0,this._P=!0,this.wP=!0,this.CP=!0,this.kP=!0,this.TP=!0,this.FP=!0,this.IP=new Set,this.PP=new Set,this.DP=!0,this.BP=!0,this.LP=(t,i)=>{t.borders=void 0===i?Nf:{...t.borders,...i},this.RP(t),this.wP=!0,this.us.xs()},this.RP=t=>{t.borders&&(!1===t.borders.top&&this.EP(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!1}:{...this.zP,bottom:!1}})),!1===t.borders.bottom&&this.EP(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!1}:{...this.zP,top:!1}})),!1===t.borders.left&&this.EP(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!1}:{...this.zP,right:!1}})),!1===t.borders.right&&this.EP(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!1}:{...this.zP,left:!1}})),!0===t.borders.top&&this.EP(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!0}:{...this.zP,bottom:!0}})),!0===t.borders.bottom&&this.EP(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!0}:{...this.zP,top:!0}})),!0===t.borders.left&&this.EP(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!0}:{...this.zP,right:!0}})),!0===t.borders.right&&this.EP(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!0}:{...this.zP,left:!0}})))},this.VP=(t,i)=>{const s=this.fP.get(t);s&&this.L.emit(Ef.cellMouseEnter,s,i)},this.OP=(t,i)=>{const s=this.fP.get(t);s&&this.L.emit(Ef.cellMouseLeave,s,i)},this.NP=(t,i)=>{const s=this.fP.get(t);s&&this.L.emit(Ef.cellMouseClick,s,i)},this.GP=(t,i)=>{const s=this.fP.get(t);s&&this.L.emit(Ef.cellMouseDoubleClick,s,i)},this.UP=(t,i)=>{const s=this.fP.get(t);s&&this.L.emit(Ef.cellMouseDown,s,i)},this.WP=(t,i)=>{const s=this.fP.get(t);s&&this.L.emit(Ef.cellMouseUp,s,i)},this.YP=(t,i)=>{const s=this.fP.get(t);s&&this.L.emit(Ef.cellMouseMove,s,i)},this.HP=(t,i)=>{const s=this.fP.get(t);s&&this.L.emit(Ef.cellMouseDrag,s,i)},this.XP=(t,i)=>{const s=this.fP.get(t);s&&this.L.emit(Ef.cellMouseDragStart,s,i)},this.$P=(t,i)=>{const s=this.fP.get(t);s&&this.L.emit(Ef.cellMouseDragStop,s,i)},this.jP=(t,i)=>{const s=this.fP.get(t);s&&(this.L.emit(Ef.cellMouseWheel,s,i),!i.defaultPrevented&&this.DP&&this.ZP.nP(i))},this.QP=(t,i)=>{const s=this.fP.get(t);s&&(this.L.emit(Ef.cellTouchStart,s,i),!i.defaultPrevented&&this.BP&&this.ZP.oP(i))},this.JP=(t,i)=>{const s=this.fP.get(t);s&&(this.L.emit(Ef.cellTouchMove,s,i),!i.defaultPrevented&&this.BP&&this.ZP.aP(i))},this.KP=(t,i)=>{const s=this.fP.get(t);s&&(this.L.emit(Ef.cellTouchEnd,s,i),!i.defaultPrevented&&this.BP&&this.ZP.lP(i))},this.us.Qn(Yo.ff),this.wh.vr("Data Grid"),this.qP=s.d2({scaleXYConstructor:ee}),this.qP.x.yg=ff,this.tD=s.d2({scaleXYConstructor:ee}),this.iD={x:0,y:0},this.sD=this.qi.dataGridTextFont,this.eD=this.qi.dataGridTextFillStyle,this.zP={top:!0,bottom:!0,left:!0,right:!0},this.hD=this.qi.dataGridCellBackgroundFillStyle,this.rD=this.qi.dataGridBorderStrokeStyle,this.nD="left-center",this.oD={left:5,right:5,bottom:5,top:5},this.aD=i.kb("dataGrid grid bg",0),this.lD=i.kb("dataGrid cell bg",1),this.uD=i.ip("dataGrid cell content",0),this.cD=i.ip("dataGrid scrollbar bg",1),this.dD=i.ip("dataGrid scrollbar fg",2),this.ZP=this.fD(),this.onBackgroundMouseWheel(((t,i)=>{this.DP&&this.ZP.nP(i)})),this.onBackgroundTouchStart(((t,i)=>{this.BP&&this.ZP.oP(i)})),this.onBackgroundTouchMove(((t,i)=>{this.BP&&this.ZP.aP(i)})),this.onBackgroundTouchEnd(((t,i)=>{this.BP&&this.ZP.lP(i)})),this.AD=this.aD.Re(this.qP).Le(this.qi.dataGridBackgroundFillStyle).Be(dt).setMouseInteractions(!1),this.gD=this.uD.Zg(this.qP).setMouseInteractions(!1),this.yD=new Pl((()=>this.lD.Re(this.qP).setMouseInteractions(!0).setMouseEnterEventHandler(this.VP).setMouseLeaveEventHandler(this.OP).setMouseClickEventHandler(this.NP).setMouseDoubleClickEventHandler(this.GP).setMouseDownEventHandler(this.UP).setMouseUpEventHandler(this.WP).setMouseMoveEventHandler(this.YP).setMouseDragEventHandler(this.HP).setMouseDragStartEventHandler(this.XP).setMouseDragStopEventHandler(this.$P).setMouseWheelEventHandler(this.jP).setTouchStartEventHandler(this.QP).setTouchMoveEventHandler(this.JP).setTouchEndEventHandler(this.KP))),this.mD=new Pl((()=>this.uD.Re(this.qP).setMouseInteractions(!1))),this.pD=new Pl((()=>this.uD.Ur(this.qP).setMouseInteractions(!1))),this.vD=new Pl((()=>this.uD.Ap(this.qP,{},[xl.InternalUI,{type:"DataPattern",args:{pattern:"ProgressiveX"}}]).setMouseInteractions(!1))),this.SD=new Pl((()=>this.uD.Ye(this.qP).setMouseInteractions(!1))),this.bD=new Pl((()=>this.uD.Ov(this.qP).setMouseInteractions(!1))),this.xD=new Pl((()=>this.uD.Re(this.qP).setMouseInteractions(!1))),this.MD=new Pl((()=>this.uD.U_(this.qP).setMouseInteractions(!1))),this._D=new Pl((()=>this.uD.ld(this.qP).setMouseInteractions(!1))),this.Ey(h,this.uiScale),this.onResize((()=>{this.AP=!0,this.us.xs(),this.qP.tt(this.Mg.ni()),this.tD.tt(this.Mg.ni())})),this.wD=this.es.Dg([this.AD])}getMinimumSize(){return{x:200,y:200}}setAnimationsEnabled(t){return this}nf(){return[]}dispose(){return super.dispose(),this.aD.W(),this.lD.W(),this.uD.W(),this.cD.W(),this.dD.W(),za(this.qP),za(this.tD),this.ZP.dispose(),this.pD.Dp(),this.yD.Dp(),this.mD.Dp(),this.vD.Dp(),this.SD.Dp(),this.bD.Dp(),this.xD.Dp(),this.MD.Dp(),this._D.Dp(),this}Z(){return super.Z(),this.qP.Z(),this.tD.Z(),this}J(){return super.J(),this.qP.J(),this.tD.J(),this}setBackgroundEffect(t){return this.wD.bs(t),this.us.xs(),this}getBackgroundEffect(){return this.wD.Ms()}setInteractionScrollOnWheel(t){return this.DP=t,this}getInteractionScrollOnWheel(){return this.DP}setInteractionPanOnTouch(t){return this.BP=t,this}getInteractionPanOnTouch(){return this.BP}onCellMouseEnter(t){return this.L.on(Ef.cellMouseEnter,t)}offCellMouseEnter(t){return this.L.off(t)}onCellMouseLeave(t){return this.L.on(Ef.cellMouseLeave,t)}offCellMouseLeave(t){return this.L.off(t)}onCellMouseClick(t){return this.L.on(Ef.cellMouseClick,t)}offCellMouseClick(t){return this.L.off(t)}onCellMouseDoubleClick(t){return this.L.on(Ef.cellMouseDoubleClick,t)}offCellMouseDoubleClick(t){return this.L.off(t)}onCellMouseDown(t){return this.L.on(Ef.cellMouseDown,t)}offCellMouseDown(t){return this.L.off(t)}onCellMouseUp(t){return this.L.on(Ef.cellMouseUp,t)}offCellMouseUp(t){return this.L.off(t)}onCellMouseMove(t){return this.L.on(Ef.cellMouseMove,t)}offCellMouseMove(t){return this.L.off(t)}onCellMouseDrag(t){return this.L.on(Ef.cellMouseDrag,t)}offCellMouseDrag(t){return this.L.off(t)}onCellMouseDragStart(t){return this.L.on(Ef.cellMouseDragStart,t)}offCellMouseDragStart(t){return this.L.off(t)}onCellMouseDragStop(t){return this.L.on(Ef.cellMouseDragStop,t)}offCellMouseDragStop(t){return this.L.off(t)}onCellMouseWheel(t){return this.L.on(Ef.cellMouseWheel,t)}offCellMouseWheel(t){return this.L.off(t)}onCellTouchStart(t){return this.L.on(Ef.cellTouchStart,t)}offCellTouchStart(t){return this.L.off(t)}onCellTouchMove(t){return this.L.on(Ef.cellTouchMove,t)}offCellTouchMove(t){return this.L.off(t)}onCellTouchEnd(t){return this.L.on(Ef.cellTouchEnd,t)}offCellTouchEnd(t){return this.L.off(t)}setGridBackgroundFillStyle(t){return this.AD.Le(t),this.us.xs(),this}getGridBackgroundFillStyle(){return this.AD.Qh()}setCellContent(t,i,s,e,h){if("number"==typeof s&&void 0!==e&&void 0!==h){const r=s,n=e,o=h;let a=[];for(let s=t;s<t+r;s+=1)for(let t=i;t<i+n;t+=1){const i=this.EP(s,t);i&&a.push(i)}a=Ni(a);let l={highlight:0};for(const t of a){const i=this.uP.indexOf(t);i<0||(l={...l,highlight:t.highlight,textFont:t.textFont,textFillStyle:t.textFillStyle,contentAlignment:t.contentAlignment,borders:t.borders,padding:t.padding,backgroundFillStyle:t.backgroundFillStyle},this.uP.splice(i,1))}const u={...l,column:t,row:i,columnSpan:r,rowSpan:n,content:o};this.uP.push(u),this.mP=!0,"string"==typeof u.content||"number"==typeof u.content?this.gP=!0:this.yP=!0,this.us.xs()}else this.CD(t,i,s);return this}setColumnContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.CD(t,e,s)}return this}setRowContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.CD(e,t,s)}return this}setTableContent(t){const i=t.length;if(0===i)return this;const s=t[0].length;if(0===s)return this;for(let e=0;e<s;e+=1)for(let s=0;s<i;s+=1){const i=t[s][e];this.CD(e,s,i)}return this}setColumnWidth(t,i){let s=this.cP.find((i=>i.column===t));return s||(s={column:t,min:void 0,max:void 0},this.cP.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.cP.splice(this.cP.indexOf(s),1):(s.min=i,s.max=i),this.vP=!0,this.us.xs(),this}setRowHeight(t,i){let s=this.dP.find((i=>i.row===t));return s||(s={row:t,min:void 0,max:void 0},this.dP.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.dP.splice(this.dP.indexOf(s),1):(s.min=i,s.max=i),this.vP=!0,this.us.xs(),this}setColumnPaddings(t,i){return"number"==typeof i&&(i=g(i,i,i,i)),this.kD(t,(t=>this.TD(t,i))),this}setRowPaddings(t,i){return"number"==typeof i&&(i=g(i,i,i,i)),this.FD(t,(t=>this.TD(t,i))),this}setCellPadding(t,i,s){return"number"==typeof s&&(s=g(s,s,s,s)),this.EP(t,i,(t=>this.TD(t,s))),this}setCellsPaddings(t){return"number"==typeof t&&(t=g(t,t,t,t)),this.oD={...this.oD,...t},this.ID((t=>this.TD(t,this.oD))),this}setCellBorders(t,i,s){return this.EP(t,i,(t=>this.LP(t,s))),this}setRowBorders(t,i){return this.FD(t,(t=>this.LP(t,i))),this}setColumnBorders(t,i){return this.kD(t,(t=>this.LP(t,i))),this}setCellsBorders(t){return this.zP=void 0===t?Nf:t,this.ID((t=>this.LP(t,this.zP))),this}setCellsBorderStrokeStyle(t){return this.rD="function"==typeof t?t(this.rD):t,this.kP=!0,this.us.xs(),this}setColumnTextFillStyle(t,i){return this.kD(t,(t=>this.PD(t,i))),this}setRowTextFillStyle(t,i){return this.FD(t,(t=>this.PD(t,i))),this}setCellTextFillStyle(t,i,s){return this.EP(t,i,(t=>this.PD(t,s))),this}setCellsTextFillStyle(t){return this.eD="function"==typeof t?t(this.eD):t,this.ID((t=>this.PD(t,this.eD))),this}setColumnTextFont(t,i){return this.kD(t,(t=>this.DD(t,i))),this}setRowTextFont(t,i){return this.FD(t,(t=>this.DD(t,i))),this}setCellTextFont(t,i,s){return this.EP(t,i,(t=>this.DD(t,s))),this}setCellsTextFont(t){return this.sD="function"==typeof t?t(this.sD):t,this.ID((t=>this.DD(t,this.sD))),this}setColumnContentAlignment(t,i){return this.kD(t,(t=>this.BD(t,i))),this}setRowContentAlignment(t,i){return this.FD(t,(t=>this.BD(t,i))),this}setCellContentAlignment(t,i,s){return this.EP(t,i,(t=>this.BD(t,s))),this}setCellsContentAlignment(t){return this.nD=t,this.ID((t=>this.BD(t,this.nD))),this}setCellBackgroundFillStyle(t,i,s){return this.EP(t,i,(t=>this.LD(t,s))),this}setColumnBackgroundFillStyle(t,i){return this.kD(t,(t=>this.LD(t,i))),this}setRowBackgroundFillStyle(t,i){return this.FD(t,(t=>this.LD(t,i))),this}setCellsBackgroundFillStyle(t){return this.hD="function"==typeof t?t(this.hD):t,this.ID((t=>this.LD(t,this.hD))),this}setCellHighlight(t,i,s){return this.EP(t,i,(t=>{t.highlight=Ui(s)})),this.CP=!0,this.us.xs(),this}setColumnHighlight(t,i){const s=Ui(i);return this.kD(t,(t=>{t.highlight=s})),this.CP=!0,this.us.xs(),this}setRowHighlight(t,i){const s=Ui(i);return this.FD(t,(t=>{t.highlight=s})),this.CP=!0,this.us.xs(),this}removeCell(t,i){return this.EP(t,i,(t=>this.uP.splice(this.uP.indexOf(t),1))),this.pP=!0,this.us.xs(),this}removeRow(t){return this.FD(t,(t=>this.uP.splice(this.uP.indexOf(t),1))),this.uP.filter((i=>i.row>t)).forEach((t=>{t.row-=1})),this.pP=!0,this.us.xs(),this}removeColumn(t){return this.kD(t,(t=>this.uP.splice(this.uP.indexOf(t),1))),this.uP.filter((i=>i.column>t)).forEach((t=>{t.column-=1})),this.pP=!0,this.us.xs(),this}removeCells(){return this.uP.splice(0),this.pP=!0,this.us.xs(),this}getColumnMax(){return 0===this.uP.length?0:this.uP.reduce(((t,i)=>Math.max(t,i.column+i.columnSpan-1)),0)}getRowMax(){return 0===this.uP.length?0:this.uP.reduce(((t,i)=>Math.max(t,i.row+i.rowSpan-1)),0)}Ee(t){super.Ee(t),Ga.Hy(this.wh,this.Vy),super.Ry();const i=Math.round(this.rD.O()),s=i/2;let e=this.gP||this.yP||this.mP||this.pP||this.vP||this.SP||this._P||this.wP||this.kP||this.FP;if(e){this.uP.forEach((t=>{this.PP.add(t.column)})),this.uP.forEach((t=>{this.IP.add(t.row)}));const t=this.pD.Ip(),h=this.RD(s,t);t.finishPlot();const r=this.ED(this.PP.size,h),n=this.zD(this.IP.size,h),o=r.reduce(ds,0)+i,a=n.reduce(ds,0)+i,l=new Array(r.length+1).fill(0).map(((t,i)=>r.reduce(((t,s,e)=>t+(e<i?s:0)),0))),u=new Array(n.length+1).fill(0).map(((t,i)=>n.reduce(((t,s,e)=>t+(e<i?s:0)),0)));if(this.VD){const t=this.VD.columnWidths.every(((t,i)=>t===r[i])),i=this.VD.rowHeights.every(((t,i)=>t===n[i]));t&&i&&(e=!1)}this.VD={columnWidths:r,rowHeights:n,dataGridWidth:o,dataGridHeight:a,columnWidthsCumulative:l,rowHeightsCumulative:u,cellsContentSizes:h}}const h=e||this.yP||this.mP||this.pP||this.bP||this.xP||this.MP||this.wP||this.CP||this.kP||this.AP||this.FP;if((h||this.TP)&&this.VD){const t=this.Mg.getInnerIntervalPixels(),e=Ga.Yy(this.wh,this.Vy),r=[this.Fa.left+s,this.Fa.right+s],n=[this.Fa.bottom+s,this.Fa.top+e+s],o={x:t.x-r[0]-r[1],y:t.y-n[0]-n[1]},a=[this.Fa.left,this.Fa.right],l=[this.Fa.bottom,this.Fa.top+e],u={x:Math.round(t.x-a[0]-a[1]),y:Math.round(t.y-l[0]-l[1])},c={x:Math.ceil(s),y:Math.floor(u.y-s)};this.tD.Ri(r).Ei(n).zi(0,o.x).Vi(0,o.y),this.ZP.RI({x:this.VD.dataGridHeight,y:this.VD.dataGridWidth}).Vs().Ee();const d={x:Math.round(this.iD.x),y:Math.round(Math.min(0,this.iD.y))};this.qP.Ri(a).Ei(l).zi(d.x,u.x+d.x).Vi(d.y,u.y+d.y),this.AD.ze({x:c.x,y:c.y});const f={x:this.qP.x.si(),y:this.qP.y.si()+this.ZP.BI(),width:this.qP.x.hi()+i-this.ZP.BI(),height:this.qP.y.hi()+i};this.uD.pb(f),this.lD.pb(f),this.aD.pb(f);const A=this.VD,g=[{x:this.qP.x.getInnerStart(),y:this.qP.y.getInnerStart()},{x:this.qP.x.getInnerEnd(),y:this.qP.y.getInnerStart()},{x:this.qP.x.getInnerEnd(),y:this.qP.y.getInnerEnd()},{x:this.qP.x.getInnerStart(),y:this.qP.y.getInnerEnd()}];A.cellsContentSizes.forEach((t=>{var i;const s={x:c.x+A.columnWidthsCumulative[t.cell.column],y:c.y-A.rowHeightsCumulative[t.cell.row+t.cell.rowSpan]},e={x:s.x+A.columnWidths[t.cell.column],y:s.y+A.rowHeights[t.cell.row]},h=ls([s,{x:e.x,y:s.y},e,{x:s.x,y:e.y}],g);null===(i=t.text)||void 0===i||i.setVisible(h)})),h&&this.OD(c,this.VD,i)}this.AP=!1,this.gP=!1,this.yP=!1,this.mP=!1,this.pP=!1,this.vP=!1,this.SP=!1,this.bP=!1,this.xP=!1,this.MP=!1,this._P=!1,this.wP=!1,this.CP=!1,this.kP=!1,this.TP=!1,this.FP=!1}RD(t,i){const s=[],e={left:Math.ceil(t),right:Math.ceil(t),top:Math.ceil(t),bottom:Math.ceil(t)};for(const t of this.uP){const{content:h}=t,r={...this.oD,...t.padding};let n,o,a,l={x:0,y:0};if("string"==typeof h||"number"==typeof h){const s=String(h);n=i.add(),l=n.vr(s).tr(t.textFont||this.sD).Vs().nd()}if(Af(h)&&(o=h,l={x:200,y:50}),Vn(h)){const t=this.us.ND(h);t.GD()?(a=h,l=a.ni()):t.UD((()=>{this.FP=!0,this.us.xs()}))}if(n||o||a){r.top=Math.round(r.top),r.left=Math.round(r.left),r.right=Math.round(r.right),r.bottom=Math.round(r.bottom);const i={x:Math.round(l.x+r.left+r.right+e.left+e.right),y:Math.round(l.y+r.top+r.bottom+e.top+e.bottom)};s.push({cell:t,contentSize:i,text:n,sparkChart:o,icon:a,cellPadding:r,cellMargin:e})}}return s}OD(t,i,s){const{dataGridWidth:e,dataGridHeight:h,cellsContentSizes:r,columnWidths:n,columnWidthsCumulative:o,rowHeights:a,rowHeightsCumulative:l}=i,u={x:e-s,y:-h+s};this.AD.tt(u),this.gD.We(this.rD),this.fP.clear();const c={cellBackground:this.yD.Ip(),cellIconRect:this.mD.Ip(),lineSet:this.vD.Ip(),line:this.SD.Ip(),pointSet:this.bD.Ip(),rect:this.xD.Ip(),junction:this.MD.Ip(),arc:this._D.Ip()},d=[];for(const i of r){const{cell:e,text:h,sparkChart:r,icon:u,cellPadding:f,cellMargin:A}=i,g={column:e.column,row:e.row},y={x:t.x+o[e.column],y:t.y-l[e.row+e.rowSpan]},m={x:y.x+A.left,y:y.y+A.bottom},p={x:m.x+f.left,y:m.y+f.bottom},v={x:new Array(e.columnSpan).fill(0).reduce(((t,i,s)=>t+n[e.column+s]),0),y:new Array(e.rowSpan).fill(0).reduce(((t,i,s)=>t+a[e.row+s]),0)},S={x:v.x-A.left-A.right,y:v.y-A.top-A.bottom},b={x:S.x-f.left-f.right,y:S.y-f.top-f.bottom};if(h){const t=Of(p,b,e.contentAlignment||this.nD);h.ze(t[0]).ja({x:t[1],y:t[2]}).Le(this.WD(e.textFillStyle||this.eD,e.content,this.eD)).cs(e.highlight)}const x=this.WD(e.backgroundFillStyle||this.hD,e.content);if(x!==O){const t=c.cellBackground.add();t.ze(y).tt(v).Le(x).Be(dt).cs(e.highlight),this.fP.set(t,g)}const M=e.borders||this.zP;if(M&&Vf(y,v,M,s,d),r){const t=p,i=b;gf(r,c,this.qP,t,i,this.qi,this.wA,e.highlight)}if(u){const t=u.ni(),i=Of(p,b,e.contentAlignment||this.nD);c.cellIconRect.add().ze({x:i[0].x+t.x*(-.5-i[1]/2),y:i[0].y+t.y*(-.5-i[2]/2)}).tt(t).Le(new it({source:u.gc,fitMode:q.Stretch})).Be(dt).cs(e.highlight)}}this.gD.Vt();for(const t of d)this.gD.jr().Jg(t[0],t[1]);c.cellBackground.finishPlot(),c.cellIconRect.finishPlot(),c.lineSet.finishPlot(),c.line.finishPlot(),c.pointSet.finishPlot(),c.rect.finishPlot(),c.junction.finishPlot(),c.arc.finishPlot()}ED(t,i){const s=new Array(t).fill(0);for(const t of this.PP.values()){const e=i.filter((i=>t>=i.cell.column&&t+1<=i.cell.column+i.cell.columnSpan)).reduce(((t,i)=>{const s=i.contentSize.x/i.cell.columnSpan;return Math.max(t,s)}),0),h=this.cP.find((i=>i.column===t)),r=h?Jt(e,void 0!==h.min?h.min:hs,void 0!==h.max?h.max:es):e;s[t]=r}return s}zD(t,i){const s=new Array(t).fill(0);for(const t of this.IP.values()){const e=i.filter((i=>t>=i.cell.row&&t+1<=i.cell.row+i.cell.rowSpan)).reduce(((t,i)=>{const s=i.contentSize.y/i.cell.rowSpan;return Math.max(t,s)}),0),h=this.dP.find((i=>i.row===t)),r=h?Jt(e,void 0!==h.min?h.min:hs,void 0!==h.max?h.max:es):e;s[t]=r}return s}WD(t,i,s){if(Z(t)){try{const s=Number(i);return new W({color:t.getPalette().getColors(s)})}catch(t){}return s||O}return t}PD(t,i){t.textFillStyle="function"==typeof i?i(t.textFillStyle||this.eD):i,this.MP=!0,this.us.xs()}DD(t,i){t.textFont="function"==typeof i?i(t.textFont||this.sD):i,this._P=!0,this.us.xs()}LD(t,i){t.backgroundFillStyle="function"==typeof i?i(t.backgroundFillStyle||this.hD):i,this.xP=!0,this.us.xs()}BD(t,i){t.contentAlignment=i,this.bP=!0,this.us.xs()}TD(t,i){t.padding={...t.padding,...i},this.SP=!0,this.us.xs()}CD(t,i,s){let e=this.EP(t,i);e?e.content=s:(e={column:t,row:i,columnSpan:1,rowSpan:1,content:s,highlight:0},this.uP.push(e),this.mP=!0),"string"==typeof e.content||"number"==typeof e.content?this.gP=!0:this.yP=!0,this.us.xs()}ID(t){this.uP.forEach((i=>t(i)))}EP(t,i,s){const e=this.uP.find((s=>t>=s.column&&t+1<=s.column+s.columnSpan&&i>=s.row&&i+1<=s.row+s.rowSpan));return e&&s&&s(e),e}kD(t,i){const s=this.uP.filter((i=>t>=i.column&&t+1<=i.column+i.columnSpan));for(const t of s)t&&i(t)}FD(t,i){const s=this.uP.filter((i=>t>=i.row&&t+1<=i.row+i.rowSpan));for(const t of s)t&&i(t)}fD(){return new Lf(this.dD,this.cD,this.tD,this.tD,this.qP,this.qi,Ff.Both).onScroll(((t,i)=>{this.VD&&(t===Ff.Vertical&&(this.iD.y=-i),t===Ff.Horizontal&&(this.iD.x=i),this.TP=!0,this.us.xs())})).hP(50).rP(12)}}const Ef={cellMouseEnter:"cellMouseEnter",cellMouseLeave:"cellMouseLeave",cellMouseClick:"cellMouseClick",cellMouseDoubleClick:"cellMouseDoubleClick",cellMouseDown:"cellMouseDown",cellMouseUp:"cellMouseUp",cellMouseMove:"cellMouseMove",cellMouseDrag:"cellMouseDrag",cellMouseDragStart:"cellMouseDragStart",cellMouseDragStop:"cellMouseDragStop",cellMouseWheel:"cellMouseWheel",cellTouchStart:"cellTouchStart",cellTouchMove:"cellTouchMove",cellTouchEnd:"cellTouchEnd"};var zf;!function(t){t.Center="center",t.RightCenter="right-center",t.LeftCenter="left-center",t.RightTop="right-top",t.LeftTop="left-top",t.RightBottom="right-bottom",t.LeftBottom="left-bottom",t.CenterTop="center-top",t.CenterBottom="center-bottom"}(zf||(zf={}));const Vf=(t,i,s,e,h)=>{const r={x:t.x,y:t.y},n={x:t.x,y:t.y+i.y},o={x:t.x+i.x,y:t.y},a={x:t.x+i.x,y:t.y+i.y};s.top&&h.push([n,a]),s.bottom&&h.push([r,o]),s.left&&h.push([r,n]),s.right&&h.push([o,a])},Of=(t,i,s)=>{const e=t.x,h=t.x+i.x,r=t.x+i.x/2,o=t.y+i.y,a=t.y,l=t.y+i.y/2;switch(s){case"left-center":return[n(e,l),-1,0];case"right-center":return[n(h,l),1,0];case"center":return[n(r,l),0,0];case"left-bottom":return[n(e,a),-1,-1];case"right-bottom":return[n(h,a),1,-1];case"center-bottom":return[n(r,a),0,-1];case"left-top":return[n(e,o),-1,1];case"right-top":return[n(h,o),1,1];case"center-top":return[n(r,o),0,1]}return Yi(0,`Unidentified DataGrid cell content alignment option: ${s}`)},Nf={top:!1,bottom:!1,left:!1,right:!1};class Gf extends Th{constructor(t,i,s,e,h,r){super(t,{Pr(){},Ir(){},Br(){}},e,i,s,{numeric:i.xAxisNumericTicks,datetime:i.xAxisDateTimeTicks,time:i.xAxisTimeTicks},{type:"linear"}),this.chart=t,this.es=r,this.Ls=h,this.Th=h.Ur(t.YD).tr(this.qi.barChartCategoryAxisTitleFont||this.qi.xAxisTitleFont).Le(this.qi.barChartCategoryAxisTitleFillStyle||this.qi.xAxisTitleFillStyle),this.setTitleRotation(this.chart.Rs.getWidth({x:0,y:-90})),this.er=this.es.Dg([this.Th]).bs(i.effectsText),this.HD=h.Ye(t.YD).We(i.barChartCategoryAxisStrokeStyle||i.xAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.zg=t,this.Vg=t):"object"==typeof t&&(this.zg=t.min,this.Vg=t.max),this.chart.us.xs(),this}getThickness(){return{min:this.zg,max:this.Vg}}setStrokeStyle(t){return this.HD.We(t),this.chart.us.xs(),this}getStrokeStyle(){return this.HD.Su()}Vs(){if(!this.ji)return{Ug:0,Wg:0,Zd:Jt(0,void 0!==this.zg?this.zg:0,void 0!==this.Vg?this.Vg:es)};const t=this.HD.Su().O()/2,i=this.chart.Rs.getHeight(this.Th.Vs().nd());return{Ug:t,Wg:i,Zd:t+i}}Ee(t,i,s,e){const h=this.getInterval(),r=this.chart.valueAxis.getInterval();this.HD.Xe(this.chart.Rs.toPoint(h.start,r.start)).He(this.chart.Rs.toPoint(h.end,r.start)).setVisible(this.ji),this.Th.ze(this.chart.Rs.toPoint(.5*(h.start+h.end),this.chart.valueAxis.ft.gi(r.start,-(t.Ug+e.labelMarginBeforeCategoryAxisPixels)))).ja(this.chart.Rs.toPoint(0,1)).setVisible(this.ji)}setMouseInteractions(t){return this}br(t,i){return new Fh(i,t,this.Ls,this.chart.YD)}Mr(t,i){return{}}Rr(t,i){return i}zr(t,i,s){return{min:t,max:i}}}class Uf extends Th{constructor(t,i,s,e,h,r,n){super(t,{Pr:()=>{var i;if(t.XD){if("positive"===t.$D||"bipolar"===t.$D){if("after-bar"===(null===(i=t.jD)||void 0===i?void 0:i.position)){const i=this.ft.hi();return this.ft.gi(t.XD.max,Math.min(this.chart.Rs.getHeight(this.chart.ZD())+t.jD.labelMargin,.3*i))}return t.XD.max}return t.QD?Jt(-1,-1e-6,t.XD.max):0}},Ir:()=>{var i;if(t.XD){if("negative"===t.$D||"bipolar"===t.$D){if("after-bar"===(null===(i=t.jD)||void 0===i?void 0:i.position)){const i=this.ft.hi();return this.ft.gi(t.XD.min,-Math.min(this.chart.Rs.getHeight(this.chart.ZD())+t.jD.labelMargin,.3*i))}return t.XD.min}return t.QD?Jt(1,1e-6,t.XD.min):0}},Br:()=>{}},e,i,s,{numeric:i.barChartValueAxisTicks||i.yAxisNumericTicks,datetime:i.yAxisDateTimeTicks,time:i.yAxisTimeTicks},n),this.chart=t,this.es=r,this.Ls=h,this.Th=h.Ur(t.YD).tr(this.qi.barChartValueAxisTitleFont||this.qi.yAxisTitleFont).Le(this.qi.barChartValueAxisTitleFillStyle||this.qi.yAxisTitleFillStyle),this.setTitleRotation(this.chart.Rs.getHeight({x:0,y:-90})),this.er=this.es.Dg([this.Th]).bs(i.effectsText),this.HD=h.Ye(t.YD).We(i.barChartValueAxisStrokeStyle||this.qi.yAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.zg=t,this.Vg=t):"object"==typeof t&&(this.zg=t.min,this.Vg=t.max),this.chart.us.xs(),this}getThickness(){return{min:this.zg,max:this.Vg}}setStrokeStyle(t){return this.HD.We(t),this.chart.us.xs(),this}getStrokeStyle(){return this.HD.Su()}setTickStrategy(t,i){return super.Yh(t,i)}Vs(t){if(!this.ji)return this.hr(),{Ug:0,Wg:0,Zd:Jt(0,void 0!==this.zg?this.zg:0,void 0!==this.Vg?this.Vg:es)};const i=this.chart.Rs.getWidth(this.chart.YD).hi(),s=this.ft.hi();this.cr({physicalAxisSize:s,oppositeAxisSize:i,plotLines:t});let e=0;for(const t of this.lh.values())for(const i of t.values()){const t=i.Rh.$e,s=this.chart.Rs.getWidth(i.hh.nd()),h=t.getTickLength()+t.getTickPadding()+s;e=Math.max(e,h)}const h=e+this.HD.Su().O()/2,r=this.chart.Rs.getWidth(this.Th.Vs().nd());return{Ug:h,Wg:r,Zd:Jt(h+r,void 0!==this.zg?this.zg:0,void 0!==this.Vg?this.Vg:es)}}Ee(t){const i=this.getInterval();this.HD.Xe(this.chart.Rs.toPoint(-.5,this.Hh)).He(this.chart.Rs.toPoint(-.5,this.Xh)).setVisible(this.ji);const s="logarithmic"===this.Uh.type?Math.sqrt(i.start+i.end):.5*(i.start+i.end),e=this.chart.Rs.toPoint(this.chart.categoryAxis.ft.gi(-.5,t.Ug*this.chart.Rs.JD),s),h=this.chart.Rs.toPoint(this.chart.Rs.KD,0);this.Th.ze(e).ja(h).setVisible(this.ji)}setMouseInteractions(t){return this}br(t,i){return new Fh(i,t,this.Ls,this.chart.YD)}Mr(t,i){const s=t.Rh.$e,e=this.chart.Rs.toPoint(-.5,t.S),h=this.chart.YD.gi(e,this.chart.Rs.toPoint(s.getTickLength()*this.chart.Rs.JD,0)),r=this.chart.YD.gi(e,this.chart.Rs.toPoint(s.gridStrokeLength*i.oppositeAxisSize*-this.chart.Rs.JD,0)),n=this.chart.YD.gi(h,this.chart.Rs.toPoint(s.getTickPadding()*this.chart.Rs.JD,0));t.hh.ze(n).ja(this.chart.Rs.toPoint(this.chart.Rs.KD,s.getLabelAlignment())).ir(s.getLabelRotation()),s.tickStyle!==dt&&0!==s.tickLength&&i.plotLines.add({positions:[e,h]},{lineStyle:s.tickStyle}),s.gridStrokeStyle!==dt&&s.gridStrokeLength>0&&i.plotLines.add({positions:[e,r]},{lineStyle:s.gridStrokeStyle})}Rr(t,i){return"linear"===this.Uh.type?fe(t,i,this.ft):Ae(t,i,this.ft)}zr(t,i,s){return{min:t,max:i}}}class Wf extends Iu{constructor(t,i,s,e,h,r,n){super(t,i,s,e),this.Qo=Ji(),this.S=0,this.qD=!1,this.chart=t,this.chart=t,this.category=h,this.subCategory=r,this.ws=h,this.Fe=Ri(s.barChartBarFillStyle||s.rectangleSeriesFillStyle,n),this.Ie=Ri(s.barChartBarStrokeStyle||s.rectangleSeriesStrokeStyle,n),this.onVisibleStateChanged((()=>{this.chart.tB()})),this.onDispose((()=>{this.chart.tB(),this.chart.iB.delete(this.category),this.chart.sB.delete(this)}))}Ji(t,i){const s=this.chart.us.Go(i);return{cursorPosition:{pointMarker:{x:s.engineX,y:s.engineY},pointMarkerScale:this.chart.us.ft,resultTable:{x:s.engineX,y:s.engineY},resultTableScale:this.chart.us.ft},category:this.category,subCategory:this.subCategory,bar:this,value:this.getValue()}}setValue(t){return this.qD=!0,this.S=t,this.chart.tB(),this.chart.us.xs(),this.chart.iB.delete(this.category),this.chart.sB.delete(this),this}getValue(){return this.S}get value(){return this.S}setFillStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.chart.tB(),this}getFillStyle(){return this.Fe}setStrokeStyle(t){return this.Ie="function"==typeof t?t(this.Ie):t,this.chart.tB(),this}getStrokeStyle(){return this.Ie}fv(){return this.yv}setEffect(t){return this.chart.setBarsEffect(t),this}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:this.Fe})}}const Yf=t=>!!(t&&"object"==typeof t&&"iCategory"in t&&"number"==typeof t.iCategory&&"value"in t&&"number"==typeof t.value),Hf=(t,i,s)=>{const e=t.Vd.filter((t=>void 0!==t)),h=e.map((t=>s(t.sizePixels))).reduce(((t,i)=>Math.max(t,i)),1),r=Math.ceil(h/(i/e.length));return r<=1?e:e.filter(((t,i)=>i%r==0))};class Xf extends $l{constructor(t,i,s,e,h,r,n){var o;let a;super(t,i,s,i.zy("barChart bg",0),e,i.us.qi.barChartBackgroundFillStyle||i.us.qi.chartXYBackgroundFillStyle,i.us.qi.barChartBackgroundStrokeStyle||i.us.qi.chartXYBackgroundStrokeStyle,i.us.qi.barChartTitleFont||i.us.qi.chartXYTitleFont,i.us.qi.barChartTitleFillStyle||i.us.qi.chartXYTitleFillStyle,r),this.coordsBars="barChart",this.eB=jf.Descending,this.hB=this.qi.barChartCategoryLabels,this.jD=this.qi.barChartValueLabelsAfterBars,this.rB=!1,this.t_=Zi(),this.iB=new Map,this.sB=new Map,this.$D="positive",this.nB="columns",this.oB=!0,this.aB=new Map,this.lB={speed:1},this.Rm={speed:1},this.uB=.08,this.cB=[],this.Cn=(t,i,s,e,h)=>{this.YD.tt(e,h)},this.us.Qn(Yo.pf),this.Rs="horizontal"===(null==n?void 0:n.type)?Qf:Zf,this.wh.vr("Bar Chart"),this.dB=i.ip("barChart plotting 1",0),this.fB=i.ip("barChart plotting 2",1),this.QD="logarithmic"===(null===(o=null==n?void 0:n.valueAxis)||void 0===o?void 0:o.type),this.QD?"horizontal"===this.Rs.AB?(a=s.d1({scale1DConstructor:te,dimension:"y"}),this.YD=(new he).Li(s.d1({scale1DConstructor:Hs,dimension:"x"}),a)):(a=s.d1({scale1DConstructor:te,dimension:"x"}),this.YD=(new he).Li(a,s.d1({scale1DConstructor:Hs,dimension:"y"}))):(this.YD=s.d2({scaleXYConstructor:ee}),a=this.Rs.getWidth(this.YD)),this.gB=this.es.Dg(),this.e_=new Il((()=>this.t_.xt(this.dB.Jp(this.YD).la(0))),((t,i,s)=>(t.Le(s.fillStyle).Be(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.jr();return s.Tl(i.vertices),this.t_.zt(s,i.bar),i.bar.ys([s]),s})))),(()=>{this.t_.Vt()}),(t=>{this.gB.As(t)})),this.Hv=this.vy.Re(this.YD).Le(this.qi.barChartSeriesBackgroundFillStyle||O).Be(dt),this.Xv=this.vy.Re(this.YD).Le(O).Be(this.qi.barChartSeriesBackgroundStrokeStyle||dt).setMouseInteractions(!1),super.Yv(this.Hv,this.Xv),this.categoryAxis=new Gf(this,this.qi,!1!==(null==n?void 0:n.animationsEnabled),a,this.fB,this.es);const l=de(null==n?void 0:n.valueAxis);this.valueAxis=new Uf(this,this.qi,!1!==(null==n?void 0:n.animationsEnabled),this.Rs.getHeight(this.YD),this.fB,this.es,l.type),this.yB=new Pl((()=>this.fB.Ur(this.YD).Gr(Qi).Nr(Qi).la(1))),this.mB=new Il((()=>this.vy.Zg(this.YD).setMouseInteractions(!1)),((t,i,s)=>(t.We(s.lineStyle),i.map((({positions:i,existingMember:s})=>(s||t.jr()).Jg(i[0],i[1]))))));const u=i.ep(),c=qt(n?n.cursorBuilder:void 0,hl);this.hp=Ya(this,u,c.wm(u,this.uiScale,this.uiScale,Zt,this.qi),this,"show-pointed",Jf,(()=>0)),this.onResize(this.Cn),this.Ey(h,this.YD),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled))}getSeries(){return this.Nv}setCursor(t){return this.hp.setCursor(t),this}getCursor(){return this.hp.getCursor()}setCursorMode(t){return this.hp.setCursorMode(t),this}getCursorMode(){return this.hp.getCursorMode()}setCustomCursor(t){return this.hp.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.hp.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.hp.offCursorTargetChanged(t)}setCursorFormatting(t){return this.hp.setCursorFormatting(t),this}getCursorFormatting(){return this.hp.getCursorFormatting()}addCursor(t=hl){const i=this.wy(),s=t.wm(i,this.uiScale,this.uiScale,this.Sy(i),this.qi);return this.By(s),s}setBarsMargin(t){return this.uB=Jt(t,0,.49),this.rB=!0,this.us.xs(),this}getBarsMargin(){return this.uB}setBarsEffect(t){return this.gB.bs(t),this.us.xs(),this}getBarsEffect(){return this.gB.Ms()}setData(t){let i;if(Array.isArray(t))i=[],t.forEach(((t,s)=>{"string"==typeof t?i.push({category:t}):"number"==typeof t?i.push({category:`Category ${s+1}`,value:t}):"object"==typeof t&&i.push(t)}));else{i=[];const s=Object.keys(t);for(const e of s){const s=t[e];i.push({category:e,value:"number"==typeof s?s:void 0})}}return this.pB("columns",i),this}setDataStacked(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:h}=i;h.forEach(((i,h)=>{const r=t[h];s.push({category:r,subCategory:e,value:i})}))})),this.pB("stacks",s),this}setDataGrouped(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:h}=i;h.forEach(((i,h)=>{const r=t[h];s.push({category:r,subCategory:e,value:i})}))})),this.pB("groups",s),this}pB(t,i){this.Nv.length>0&&this.us.Qn(Yo.Pf),this.nB=t,this.cB=i.map((t=>({category:t.category,subCategory:t.subCategory}))),this.vB(i);const s=Ni(i.map((t=>t.category))),e=s.length,h=Ni(i.map((t=>t.subCategory))).filter((t=>void 0!==t));if(i.forEach((t=>{let i=this.Nv.find((i=>i.category===t.category&&i.subCategory===t.subCategory));if(!i){const e=s.indexOf(t.category),r=h.includes(t.subCategory)?h.indexOf(t.subCategory):void 0;i=new Wf(this,this.Uv,this.qi,this.us.es,t.category,t.subCategory,qt(r,e)),this.$v(i),this.aB.set(i,{category:e,valueStart:this.QD?1e-6:0,valueEnd:void 0!==t.value?t.value:0})}void 0!==t.value&&i.setValue(t.value)})),this.Nv.slice().forEach((t=>{void 0===i.find((i=>i.category===t.category&&i.subCategory===t.subCategory))&&(t.dispose(),this.aB.delete(t))})),this.categoryAxis.setInterval(this.Rs.getWidth({x:{start:-.5,end:e-.5},y:{start:e-.5,end:-.5}})),this.XD=0===this.Nv.length?void 0:"stacks"!==t?this.Nv.reduce(((t,i)=>({min:Math.min(t.min,i.getValue()),max:Math.max(t.max,i.getValue())})),{min:es,max:hs}):{min:0,max:s.reduce(((t,s)=>Math.max(t,i.reduce(((t,i)=>i.category!==s?t:void 0!==i.value?t+i.value:t),0))),0)},this.XD&&(this.$D=this.XD.min>=0?"positive":this.XD.max<=0?"negative":"bipolar",("bipolar"===this.$D||"negative"===this.$D)&&this.QD))throw new Error("LightningChart JS BarChart bipolar/negative data + logarithmic value axis combination not supported.");this.vB(this.Nv),this.iB.clear(),this.sB.clear(),this.rB=!0,this.us.xs()}setCategoryLabels(t){const i="function"==typeof t?this.hB?t(this.hB):this.hB:t;return this.hB=i?{...this.qi.barChartCategoryLabels,...i}:void 0,this.iB.clear(),this.us.xs(),this}getCategoryLabels(){return this.hB}setValueLabels(t){var i;const s="function"==typeof t?this.jD?t(this.jD):this.jD:t,e=(null==s?void 0:s.position)||(null===(i=this.jD)||void 0===i?void 0:i.position);return s&&e?"after-bar"===e?this.jD={...this.qi.barChartValueLabelsAfterBars,...s}:"inside-bar"!==e&&"inside-bar-start"!==e&&"inside-bar-centered"!==e&&"inside-bar-end"!==e||(this.jD={...this.qi.barChartValueLabelsInsideBars,...s}):this.jD=void 0,this.sB.clear(),this.us.xs(),this}getValueLabels(){return this.jD}setLabelFittingEnabled(t){return this.oB=t,this.us.xs(),this}getLabelFittingEnabled(){return this.oB}getBar(t,i){if(("groups"===this.nB||"stacks"===this.nB)&&void 0===i)throw new Error("LightningChart JS BarChart.getBar() | `subCategory` parameter is required for grouped and stacked bar charts!");const s=this.Nv.find((s=>s.category===t&&(void 0===i||i===s.subCategory)));if(!s)throw new Error(`BarChart.getBar() no such bar: "${t}" ${i?`"${i}"`:""}`);return s}getBars(){return this.Nv}setSorting(t){this.eB=t;const i=this.Nv.slice();return this.Nv.length=0,this.Nv.push(...Gi(this.cB.map((t=>i.find((i=>i.category===t.category&&(void 0===t.subCategory||t.subCategory===i.subCategory))))))),this.vB(this.Nv),this.us.xs(),this}getSorting(){return this.eB}setAnimationCategoryPosition(t,i=1){return this.lB=t?{speed:i}:void 0,this.us.xs(),this}setAnimationValues(t,i=1){return this.Rm=t?{speed:i}:void 0,this.us.xs(),this}translateCoordinate(t,i,s){if(s&&le(t)&&ae(i))return super.translateCoordinate(t,i,s);const e=i;let h;if(oe(t))h=this.us.Go(t);else if(le(t)){const i=pt(t,this.Mg,this.us.ft);h={engineX:i.x,engineY:i.y}}else{if(!Yf(t))throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Input coordinate system not recognized.");{const i=pt(this.Rs.toPoint(t.iCategory,t.value),this.YD,this.us.ft);h={engineX:i.x,engineY:i.y}}}if(ne(e))return this.us.Uo(h);if("barChart"===e){const t=pt({x:h.engineX,y:h.engineY},this.us.ft,this.YD);return{iCategory:this.Rs.getWidth(t),value:this.Rs.getHeight(t)}}if(ae(e))return pt({x:h.engineX,y:h.engineY},this.us.ft,this.Mg);throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Target coordinate system not recognized.")}nf(){if("columns"===this.nB)return this.Nv;const t=Ni(Gi(this.Nv.map((t=>t.subCategory))));return Gi(t.map((t=>{const i=this.Nv.filter((i=>i.subCategory===t)),s=i[0];if(s)return(t=>{let i=!1;t.forEach((s=>s.onHighlight(((e,h)=>{i||(i=!0,t.forEach((t=>s!==t?t.setHighlight(h):void 0)),i=!1)})))),t.forEach((i=>i.onDispose((()=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)}))))})(i),{attach(e,h){return Wi(e,i,{toggleVisibilityOnClick:!0,label:t,style:s.getFillStyle()}),this}}})))}Ee(t){var i,s;super.Ee(t);const e=this.yB.Ip(),h=this.mB.Ip(),r=this.Nv.filter((t=>t.getVisible()&&t.qD)),n=Ni(r.map((t=>t.category))),o=Ni(Gi(r.map((t=>t.subCategory)))),a=5e-4*t*((null===(i=this.lB)||void 0===i?void 0:i.speed)||0),l=.003*t*((null===(s=this.lB)||void 0===s?void 0:s.speed)||0),u=this.valueAxis.ft,c=u instanceof te?(t,i)=>{var s;return fe(t,i,u,(null===(s=this.Rm)||void 0===s?void 0:s.speed)||0)}:(t,i)=>{var s;return Ae(t,i,u,(null===(s=this.Rm)||void 0===s?void 0:s.speed)||0)};let d;"columns"===this.nB?d=r.map((t=>({bar:t,position:{category:n.indexOf(t.category),valueStart:this.QD?1e-6:0,valueEnd:t.value}}))):"groups"===this.nB?d=r.map((t=>{const i=n.indexOf(t.category),s=o.indexOf(t.subCategory),e=1/(o.length+2*(o.length+1)*this.uB),h=this.uB*e;return{bar:t,position:{category:i+(s-(o.length-1)/2)*(e+h),valueStart:this.QD?1e-6:0,valueEnd:t.value}}})):(d=[],n.forEach(((t,i)=>{const s=r.filter((i=>i.category===t));let e=this.QD?1e-6:0;s.forEach(((i,s)=>{d.push({bar:i,position:{category:n.indexOf(t),valueStart:e,valueEnd:e+i.value}}),e+=i.value}))}))),d.forEach((t=>{const{bar:i,position:s}=t;let e,h,r=this.aB.get(i);void 0===r&&(r=s);const n=s.valueStart;if(this.lB&&r.category!==s.category){const t=Math.sign(s.category-r.category);e=r.category+a*t+l*(s.category-r.category),t!==Math.sign(s.category-e)&&(e=s.category)}else e=s.category;if(this.Rm&&r.valueEnd!==s.valueEnd){const t=Math.sign(s.valueEnd-r.valueEnd);h=c(r.valueEnd,s.valueEnd),t!==Math.sign(s.valueEnd-h)&&(h=s.valueEnd)}else h=s.valueEnd;this.aB.set(i,{category:e,valueStart:n,valueEnd:h}),e===s.category&&h===s.valueEnd||this.us.xs(!0),e===r.category&&h===r.valueEnd||(this.rB=!0)})),Ga.Hy(this.wh,this.Vy);const f=r.length>0;this.categoryAxis.Lr(),this.valueAxis.Lr();const A=this.categoryAxis.setVisible(f).Vs(),g=this.valueAxis.setVisible(f).Vs(h),{labelMarginBeforeCategoryAxisPixels:y}=f?this.SB(n,r,e,h):{labelMarginBeforeCategoryAxisPixels:0};this.categoryAxis.Ee(A,e,h,{labelMarginBeforeCategoryAxisPixels:y}),this.valueAxis.Ee(g);const m=this.categoryAxis.getThickness(),p=Jt(A.Zd+y,void 0!==m.min?m.min:0,void 0!==m.max?m.max:es),v={x:Math.min(this.YD.x.getInnerStart(),this.YD.x.getInnerEnd()),y:Math.min(this.YD.y.getInnerStart(),this.YD.y.getInnerEnd())},S=Math.max(this.YD.x.getInnerStart(),this.YD.x.getInnerEnd()),b=Math.max(this.YD.y.getInnerStart(),this.YD.y.getInnerEnd()),x={x:S-v.x,y:b-v.y};this.Hv.ze(v),this.Hv.tt(x),this.Xv.ze(v),this.Xv.tt(x),super.Ry(),this.hp.Ee(!1,this.Nv,void 0);const M=Ga.Yy(this.wh,this.Vy);if(this.YD.Ei([this.Xt.bottom+this.Fa.bottom+("vertical"===this.Rs.AB?p:0),this.Xt.top+this.Fa.top+M+("horizontal"===this.Rs.AB?g.Zd:0)]),this.YD.Ri([this.Xt.left+this.Fa.left+this.Rs.getHeight({x:p,y:g.Zd}),this.Xt.right+this.Fa.right]),this.dB.pb({x:this.YD.x.si(),y:this.YD.y.si(),width:this.YD.x.hi(),height:this.YD.y.hi()}),this.gy&&this.gy(),this.rB){const t=this.e_.Ip(),i="groups"===this.nB?1/(o.length+2*(o.length+1)*this.uB):1-2*this.uB;r.forEach((s=>{const e=this.aB.get(s);if(void 0===e)return;const h=e.category-.5*i,r=e.category+.5*i,n=[this.Rs.toPoint(h,e.valueStart),this.Rs.toPoint(h,e.valueEnd),this.Rs.toPoint(r,e.valueEnd),this.Rs.toPoint(r,e.valueStart)];t.add({Qo:s.Qo,vertices:n,bar:s},{fillStyle:s.Fe,strokeStyle:s.Ie})})),t.finishPlot()}e.finishPlot(),h.finishPlot(),this.rB=!1}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationCategoryPosition(t),this.setAnimationValues(t),this.valueAxis.setAnimationsEnabled(t),this.categoryAxis.setAnimationsEnabled(t),this}dispose(){return this.fB.W(),this.dB.W(),this.hp.W(),super.dispose()}vB(t){const i=this.eB;i&&t.sort(((s,e)=>i({category:s.category,value:t.reduce(((t,i)=>t+(i.category===s.category&&i.value||0)),0)},{category:e.category,value:t.reduce(((t,i)=>t+(i.category===e.category&&i.value||0)),0)})))}SB(t,i,s,e){let h=0;const r=this.hB,n=this.jD,o=this.valueAxis.getInterval(),a=this.Rs.getWidth({x:this.YD.x.hi(),y:this.YD.y.hi()});if(r&&r.labelFillStyle!==O){const n=r.tickLength+r.labelMargin,l=this.Rs.toPoint(0,1),u={Vd:t.map(((t,s)=>{const e=i.reduce(((i,s)=>s.category!==t?i:i+s.value),0),h=r.formatter(t,e);if(!h)return;const a=s;return void 0!==a?{text:h,position:this.Rs.toPoint(a,this.valueAxis.ft.gi(o.start,-n)),alignment:l,rotation:r.labelRotation,sizePixels:this.bB(t,e)}:void 0})),Qu:r.labelFont,ft:this.YD},c=u?this.oB?Hf(u,a,this.Rs.getWidth):u.Vd:[];c.forEach((t=>{t&&s.add().vr(t.text).ze(t.position).ja(t.alignment).ir(t.rotation).Le(r.labelFillStyle).tr(r.labelFont)})),r.tickStyle!==dt&&0!==r.tickLength&&c.forEach((t=>{if(!t)return;const i=this.Rs.getWidth(t.position);e.add({positions:[this.Rs.toPoint(i,this.valueAxis.ft.getInnerStart()),this.Rs.toPoint(i,this.valueAxis.ft.gi(o.start,-r.tickLength))]},{lineStyle:r.tickStyle})})),h=c.reduce(((t,i)=>i?Math.max(t,this.Rs.getHeight(i.sizePixels)):t),0)+r.tickLength+r.labelMargin}if(n&&n.labelFillStyle!==O){let t;"after-bar"===n.position?t={Vd:i.map(((t,i)=>{const s=n.formatter(t,t.category,t.value);if(!s)return;const e=this.aB.get(t);return void 0!==e?{text:s,position:this.Rs.toPoint(e.category,this.valueAxis.ft.gi(e.valueEnd,n.labelMargin*Math.sign(e.valueEnd))),alignment:this.Rs.toPoint(0,-1*Math.sign(e.valueEnd)),rotation:n.labelRotation,sizePixels:this.xB(t)}:void 0})),Qu:n.labelFont,ft:this.YD}:"inside-bar"!==n.position&&"inside-bar-start"!==n.position&&"inside-bar-centered"!==n.position&&"inside-bar-end"!==n.position||(t={Vd:i.map(((t,i)=>{const s=n.formatter(t,t.category,t.value);if(!s)return;const e=this.aB.get(t);if(void 0===e)return;const h="bipolar"===this.$D?Math.sign(e.valueEnd):"negative"===this.$D?-1:1,r=this.Rs.toPoint(0,"inside-bar"===n.position||"inside-bar-end"===n.position?1*h:"inside-bar-centered"===n.position?0:-1*h);return{text:s,position:this.Rs.toPoint(e.category,"inside-bar"===n.position||"inside-bar-end"===n.position?this.valueAxis.ft.gi(e.valueEnd,-n.labelMargin*h):"inside-bar-centered"===n.position?(e.valueStart+e.valueEnd)/2:this.valueAxis.ft.gi(e.valueStart,n.labelMargin*h)),alignment:r,rotation:n.labelRotation,sizePixels:this.xB(t)}})),Qu:n.labelFont,ft:this.YD}),t&&(t?this.oB?Hf(t,a,this.Rs.getWidth):t.Vd:[]).forEach((t=>{t&&s.add().vr(t.text).ze(t.position).ja(t.alignment).ir(t.rotation).Le(n.labelFillStyle).tr(n.labelFont).setMouseInteractions(!1)}))}return{labelMarginBeforeCategoryAxisPixels:h}}bB(t,i){if(!this.hB||this.hB.labelFillStyle===O)return{x:0,y:0};const s=this.iB.get(t);if(s)return s;const e=this.hB.formatter(t,i),h=this.us.Hg.Yg(e,this.hB.labelFont,this.hB.labelRotation);return h.isEstimate?this.us.xs(!0):this.iB.set(t,h),h}xB(t){if(!this.jD||this.jD.labelFillStyle===O)return{x:0,y:0};const i=this.sB.get(t);if(i)return i;const s=this.us.Hg.Yg(this.jD.formatter(t,t.category,t.value),this.jD.labelFont,this.jD.labelRotation);return s.isEstimate?this.us.xs(!0):this.sB.set(t,s),s}ZD(){return this.Nv.reduce(((t,i)=>{const s=this.xB(i);return{x:Math.max(t.x,s.x),y:Math.max(t.y,s.y)}}),{x:0,y:0})}tB(){this.rB=!0,this.us.xs()}getMinimumSize(){return{x:200,y:200}}}const $f={Horizontal:"horizontal",Vertical:"vertical"},jf={Disabled:void 0,None:void 0,Ascending:(t,i)=>t.value-i.value,Descending:(t,i)=>i.value-t.value,Alphabetical:(t,i)=>t.category.localeCompare(i.category)},Zf={...jo,AB:"vertical",JD:-1,KD:1},Qf={...Zo,AB:"horizontal",JD:1,KD:-1},Jf=(t,i,s)=>{const e=[[i.bar]],h=t.valueAxis.getTitle();return h&&e.push([h]),i.subCategory?e.push([i.subCategory,"",{text:ce(t.valueAxis.formatValue(i.bar.getValue()),t.valueAxis),font:{weight:"bold"}}]):e.push({text:ce(t.valueAxis.formatValue(i.bar.getValue()),t.valueAxis),font:{weight:"bold"}}),e},Kf={XY:Yc,Spider:el,BarChart:hl,Map:al,Polar:ol,D3:ru},qf={Angola:{name:"Angola",ISO_A3:"AGO"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Gabon:{name:"Gabon",ISO_A3:"GAB"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Namibia:{name:"Namibia",ISO_A3:"NAM"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Oman:{name:"Oman",ISO_A3:"OMN"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},Somalia:{name:"Somalia",ISO_A3:"SOM"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"}},tA={Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Armenia:{name:"Armenia",ISO_A3:"ARM"},Australia:{name:"Australia",ISO_A3:"AUS"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},China:{name:"China",ISO_A3:"CHN"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},India:{name:"India",ISO_A3:"IND"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Nepal:{name:"Nepal",ISO_A3:"NPL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Philippines:{name:"Philippines",ISO_A3:"PHL"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Palestine:{name:"Palestine",ISO_A3:"PSE"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Russia:{name:"Russia",ISO_A3:"RUS"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Singapore:{name:"Singapore",ISO_A3:"SGP"},Syria:{name:"Syria",ISO_A3:"SYR"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Yemen:{name:"Yemen",ISO_A3:"YEM"}},iA={"New South Wales":{name:"New South Wales"},Victoria:{name:"Victoria"},Queensland:{name:"Queensland"},"South Australia":{name:"South Australia"},"Western Australia":{name:"Western Australia"},Tasmania:{name:"Tasmania"},"Northern Territory":{name:"Northern Territory"},"Australian Capital Territory":{name:"Australian Capital Territory"},"Other Territories":{name:"Other Territories"}},sA={"British Columbia":{name:"British Columbia"},Quebec:{name:"Quebec"},Nunavut:{name:"Nunavut"},"Prince Edward Island":{name:"Prince Edward Island"},Saskatchewan:{name:"Saskatchewan"},Yukon:{name:"Yukon"},Manitoba:{name:"Manitoba"},Ontario:{name:"Ontario"},"New Brunswick":{name:"New Brunswick"},"Northwest Territories":{name:"Northwest Territories"},Alberta:{name:"Alberta"},"Newfoundland and Labrador":{name:"Newfoundland and Labrador"},"Nova Scotia":{name:"Nova Scotia"}},eA={Albania:{name:"Albania",ISO_A3:"ALB"},Austria:{name:"Austria",ISO_A3:"AUT"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Denmark:{name:"Denmark",ISO_A3:"DNK"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Finland:{name:"Finland",ISO_A3:"FIN"},France:{name:"France",ISO_A3:"FRA"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Greece:{name:"Greece",ISO_A3:"GRC"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Italy:{name:"Italy",ISO_A3:"ITA"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Malta:{name:"Malta",ISO_A3:"MLT"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Poland:{name:"Poland",ISO_A3:"POL"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Romania:{name:"Romania",ISO_A3:"ROU"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Russia:{name:"Russia",ISO_A3:"RUS"},Turkey:{name:"Turkey",ISO_A3:"TUR"}},hA={Aruba:{name:"Aruba",ISO_A3:"ABW"},Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},Angola:{name:"Angola",ISO_A3:"AGO"},Anguilla:{name:"Anguilla",ISO_A3:"AIA"},Albania:{name:"Albania",ISO_A3:"ALB"},Aland:{name:"Aland",ISO_A3:"ALA"},Andorra:{name:"Andorra",ISO_A3:"AND"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Argentina:{name:"Argentina",ISO_A3:"ARG"},Armenia:{name:"Armenia",ISO_A3:"ARM"},"American Samoa":{name:"American Samoa",ISO_A3:"ASM"},Antarctica:{name:"Antarctica",ISO_A3:"ATA"},"French Southern and Antarctic Lands":{name:"French Southern and Antarctic Lands",ISO_A3:"ATF"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},Australia:{name:"Australia",ISO_A3:"AUS"},Austria:{name:"Austria",ISO_A3:"AUT"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belize:{name:"Belize",ISO_A3:"BLZ"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},Canada:{name:"Canada",ISO_A3:"CAN"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Chile:{name:"Chile",ISO_A3:"CHL"},China:{name:"China",ISO_A3:"CHN"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Cyprus No Mans Area":{name:"Cyprus No Mans Area",ISO_A3:"-99"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},"Cook Islands":{name:"Cook Islands",ISO_A3:"COK"},Colombia:{name:"Colombia",ISO_A3:"COL"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Curaçao":{name:"Curaçao",ISO_A3:"CUW"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},"Northern Cyprus":{name:"Northern Cyprus",ISO_A3:"-99"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Dominica:{name:"Dominica",ISO_A3:"DMA"},Denmark:{name:"Denmark",ISO_A3:"DNK"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},"Dhekelia Sovereign Base Area":{name:"Dhekelia Sovereign Base Area",ISO_A3:"-99"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Finland:{name:"Finland",ISO_A3:"FIN"},Fiji:{name:"Fiji",ISO_A3:"FJI"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},France:{name:"France",ISO_A3:"FRA"},"Faroe Islands":{name:"Faroe Islands",ISO_A3:"FRO"},"Federated States of Micronesia":{name:"Federated States of Micronesia",ISO_A3:"FSM"},Gabon:{name:"Gabon",ISO_A3:"GAB"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Guernsey:{name:"Guernsey",ISO_A3:"GGY"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Greece:{name:"Greece",ISO_A3:"GRC"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},Guam:{name:"Guam",ISO_A3:"GUM"},Guyana:{name:"Guyana",ISO_A3:"GUY"},"Hong Kong S.A.R.":{name:"Hong Kong S.A.R.",ISO_A3:"HKG"},"Heard Island and McDonald Islands":{name:"Heard Island and McDonald Islands",ISO_A3:"HMD"},Honduras:{name:"Honduras",ISO_A3:"HND"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},"Isle of Man":{name:"Isle of Man",ISO_A3:"IMN"},India:{name:"India",ISO_A3:"IND"},"Indian Ocean Territories":{name:"Indian Ocean Territories",ISO_A3:"-99"},"British Indian Ocean Territory":{name:"British Indian Ocean Territory",ISO_A3:"IOT"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Israel:{name:"Israel",ISO_A3:"ISR"},Italy:{name:"Italy",ISO_A3:"ITA"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},Jersey:{name:"Jersey",ISO_A3:"JEY"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},"Baykonur Cosmodrome":{name:"Baykonur Cosmodrome",ISO_A3:"-99"},"Siachen Glacier":{name:"Siachen Glacier",ISO_A3:"-99"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},Kiribati:{name:"Kiribati",ISO_A3:"KIR"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},Liechtenstein:{name:"Liechtenstein",ISO_A3:"LIE"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},"Macao S.A.R":{name:"Macao S.A.R",ISO_A3:"MAC"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Mexico:{name:"Mexico",ISO_A3:"MEX"},"Marshall Islands":{name:"Marshall Islands",ISO_A3:"MHL"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},"Northern Mariana Islands":{name:"Northern Mariana Islands",ISO_A3:"MNP"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Namibia:{name:"Namibia",ISO_A3:"NAM"},"New Caledonia":{name:"New Caledonia",ISO_A3:"NCL"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Niue:{name:"Niue",ISO_A3:"NIU"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Nepal:{name:"Nepal",ISO_A3:"NPL"},"New Zealand":{name:"New Zealand",ISO_A3:"NZL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Panama:{name:"Panama",ISO_A3:"PAN"},"Pitcairn Islands":{name:"Pitcairn Islands",ISO_A3:"PCN"},Peru:{name:"Peru",ISO_A3:"PER"},"Spratly Islands":{name:"Spratly Islands",ISO_A3:"-99"},Philippines:{name:"Philippines",ISO_A3:"PHL"},Palau:{name:"Palau",ISO_A3:"PLW"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},Poland:{name:"Poland",ISO_A3:"POL"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Palestine:{name:"Palestine",ISO_A3:"PSE"},"French Polynesia":{name:"French Polynesia",ISO_A3:"PYF"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Romania:{name:"Romania",ISO_A3:"ROU"},Russia:{name:"Russia",ISO_A3:"RUS"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},Singapore:{name:"Singapore",ISO_A3:"SGP"},"South Georgia and South Sandwich Islands":{name:"South Georgia and South Sandwich Islands",ISO_A3:"SGS"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Solomon Islands":{name:"Solomon Islands",ISO_A3:"SLB"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Somalia:{name:"Somalia",ISO_A3:"SOM"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},"Sao Tome and Principe":{name:"Sao Tome and Principe",ISO_A3:"STP"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},"East Timor":{name:"East Timor",ISO_A3:"TLS"},Tonga:{name:"Tonga",ISO_A3:"TON"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Tuvalu:{name:"Tuvalu",ISO_A3:"TUV"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},"United States Minor Outlying Islands":{name:"United States Minor Outlying Islands",ISO_A3:"UMI"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"US Naval Base Guantanamo Bay":{name:"US Naval Base Guantanamo Bay",ISO_A3:"-99"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Vanuatu:{name:"Vanuatu",ISO_A3:"VUT"},"Wallis and Futuna":{name:"Wallis and Futuna",ISO_A3:"WLF"},"Akrotiri Sovereign Base Area":{name:"Akrotiri Sovereign Base Area",ISO_A3:"-99"},Samoa:{name:"Samoa",ISO_A3:"WSM"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"}},rA={Alabama:{name:"Alabama"},Alaska:{name:"Alaska"},Arizona:{name:"Arizona"},Arkansas:{name:"Arkansas"},California:{name:"California"},Colorado:{name:"Colorado"},Connecticut:{name:"Connecticut"},Delaware:{name:"Delaware"},"District of Columbia":{name:"District of Columbia"},Florida:{name:"Florida"},Georgia:{name:"Georgia"},Hawaii:{name:"Hawaii"},Idaho:{name:"Idaho"},Illinois:{name:"Illinois"},Indiana:{name:"Indiana"},Iowa:{name:"Iowa"},Kansas:{name:"Kansas"},Kentucky:{name:"Kentucky"},Louisiana:{name:"Louisiana"},Maine:{name:"Maine"},Maryland:{name:"Maryland"},Massachusetts:{name:"Massachusetts"},Michigan:{name:"Michigan"},Minnesota:{name:"Minnesota"},Mississippi:{name:"Mississippi"},Missouri:{name:"Missouri"},Montana:{name:"Montana"},Nebraska:{name:"Nebraska"},Nevada:{name:"Nevada"},"New Hampshire":{name:"New Hampshire"},"New Jersey":{name:"New Jersey"},"New Mexico":{name:"New Mexico"},"New York":{name:"New York"},"North Carolina":{name:"North Carolina"},"North Dakota":{name:"North Dakota"},Ohio:{name:"Ohio"},Oklahoma:{name:"Oklahoma"},Oregon:{name:"Oregon"},Pennsylvania:{name:"Pennsylvania"},"Rhode Island":{name:"Rhode Island"},"South Carolina":{name:"South Carolina"},"South Dakota":{name:"South Dakota"},Tennessee:{name:"Tennessee"},Texas:{name:"Texas"},Utah:{name:"Utah"},Vermont:{name:"Vermont"},Virginia:{name:"Virginia"},Washington:{name:"Washington"},"West Virginia":{name:"West Virginia"},Wisconsin:{name:"Wisconsin"},Wyoming:{name:"Wyoming"}},nA={Anguilla:{name:"Anguilla",ISO_A3:"AIA"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Canada:{name:"Canada",ISO_A3:"CAN"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},Dominica:{name:"Dominica",ISO_A3:"DMA"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Mexico:{name:"Mexico",ISO_A3:"MEX"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"}},oA={Argentina:{name:"Argentina",ISO_A3:"ARG"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Chile:{name:"Chile",ISO_A3:"CHL"},Colombia:{name:"Colombia",ISO_A3:"COL"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},Guyana:{name:"Guyana",ISO_A3:"GUY"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Panama:{name:"Panama",ISO_A3:"PAN"},Peru:{name:"Peru",ISO_A3:"PER"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Honduras:{name:"Honduras",ISO_A3:"HND"}},aA={World:hA,USA:rA,NorthAmerica:nA,SouthAmerica:oA,Canada:sA,Europe:eA,Asia:tA,Africa:qf,Australia:iA},lA=(t,i)=>Math.abs(t)+Math.abs(i);function uA(t,i){const s=t.reduce(lA,0),e=(h=t,Math.max(...h.map((t=>t))));var h;const r=(t=>Math.min(...t.map((t=>t))))(t);return Math.max(i**2*e/s**2,s**2/(i**2*r))}const cA=({height:t,width:i})=>t>i?{value:i,vertical:!1}:{value:t,vertical:!0},dA=({data:t,dimensions:i})=>{const{x:s,y:e,width:h,height:r}=i,n=t.map((t=>t.value)).reduce(lA,0),o=t.map((t=>t.animatedValue)).reduce(lA,0),a=t.map((t=>t.animatedValue*r*h/o)),l=a.reduce(((t,i)=>t+i),0),u=a.map((t=>t/l*100)),c=a.filter(((t,i)=>u[i])),d={children:[],id:0,parentID:-1,name:"Main Rectangle",value:n,animatedValue:o,x:s,y:e,width:h,height:r,nodeIndex:-1,userNode:{name:"Main Rectangle",value:n}};if(1===t.length){const s={...t[0],x:i.x,y:i.y,width:i.width,height:i.height,userNode:{...t[0].userNode,value:t[0].value}};d.children.push(s)}else AA(c,cA(d).value,t,d);return d.children},fA=(t,i,s,e,h)=>{const r=t.reduce(lA,0)/i;t.forEach(((t,i)=>{const n=Math.abs(t)/r,{x:o,y:a,children:l}=h,u=e[l.length],c={...u,x:o,y:a,width:s?r:n,height:s?n:r,userNode:{...u.userNode,value:u.value}};s?h.y-=n:h.x+=n,l.push(c)})),s?(h.x+=r,h.y+=i,h.width-=r):(h.x-=i,h.y-=r,h.height-=r)},AA=(t,i,s,e)=>{const h=[{children:t,width:i,row:[]}];for(;h.length>0;){const t=h.pop();if(!t)continue;const{children:i,width:r,row:n}=t;let o=0;const a=[...n];for(;o<i.length;){const t=[...a,i[o]],n=uA(a,r),l=uA(t,r);if(!(0===a.length||n>l)){fA(a,r,cA(e).vertical,s,e),h.push({children:i.slice(o),width:cA(e).value,row:[]});break}a.push(i[o]),o+=1}o===i.length&&fA(a,r,cA(e).vertical,s,e)}};class gA extends Na{constructor(t,i,s,e,h,r,n){if(super(t,i,s,i.zy("treeMapChart bg",0),e,i.us.qi.treeMapChartBackgroundFillStyle||i.us.qi.chartXYSeriesBackgroundFillStyle,i.us.qi.treeMapChartBackgroundStrokeStyle||i.us.qi.chartXYBackgroundStrokeStyle,i.us.qi.treeMapChartTitleFont||i.us.qi.chartXYTitleFont,i.us.qi.treeMapChartTitleFillStyle||i.us.qi.chartXYTitleFillStyle,n),this.MB=new Map,this._B=[],this.wB={},this.CB=f([]),this.Rm={speed:1},this.kB=es,this.TB=!0,this.FB="Go Back",this.IB=[],this.PB=this.qi.treeMapChartPathLabelFillStyle||this.qi.uiTextFillStyle,this.DB=this.qi.treeMapChartPathLabelFont||this.qi.uiTextFont,this.BB=this.qi.treeMapChartLabelHeaderFillStyle||this.qi.uiTextFillStyle,this.LB=this.qi.treeMapChartLabelHeaderFont||this.qi.uiTextFont,this.RB=this.qi.treeMapChartLabelFillStyle||this.qi.uiTextFillStyle,this.EB=this.qi.treeMapChartLabelFont||this.qi.uiTextFont,this.Hi=!0,this.Hb=!0,this.zB=!1,this.VB=this.qi.treeMapChartParentColor||F,this.OB=this.qi.treeMapChartNodeStrokeStyle||this.qi.uiBackgroundStrokeStyle,this.onNodeMouseEnter=t=>this.L.on("mouseEnter",t),this.onNodeMouseLeave=t=>this.L.on("mouseLeave",t),this.onNodeMouseClick=t=>this.L.on("mouseClick",t),this.onNodeMouseDoubleClick=t=>this.L.on("mouseDoubleClick",t),this.onNodeMouseDown=t=>this.L.on("mouseDown",t),this.onNodeMouseUp=t=>this.L.on("mouseUp",t),this.onNodeMouseMove=t=>this.L.on("mouseMove",t),this.offNodeMouseEnter=t=>this.L.off(t,"mouseEnter"),this.offNodeMouseLeave=t=>this.L.off(t,"mouseLeave"),this.offNodeMouseClick=t=>this.L.off(t,"mouseClick"),this.offNodeMouseDoubleClick=t=>this.L.off(t,"mouseDoubleClick"),this.offNodeMouseDown=t=>this.L.off(t,"mouseDown"),this.offNodeMouseUp=t=>this.L.off(t,"mouseUp"),this.offNodeMouseMove=t=>this.L.off(t,"mouseMove"),this.offNodeMouseDragStart=t=>this.L.off(t,"mouseDragStart"),this.offNodeMouseDrag=t=>this.L.off(t,"mouseDrag"),this.offNodeMouseDragStop=t=>this.L.off(t,"mouseDragStop"),this.offNodeMouseWheel=t=>this.L.off(t,"mouseWheel"),this.jb=(t,i,s,e,h)=>{this.us.xs(),this.zB=!0},this.Mt=(t,i)=>{const s=this.NB(i);s&&(this.yx=this.GB(s,t),this.Hb&&this.us.ls.Cs(i,!0),this.TB&&this.engine.setMouseStyle(Ke.Point),this.L.emit("mouseEnter",this,t,this.yx),this.us.xs())},this._t=(t,i)=>{this.NB(i)&&(this.yx=void 0,this.Hb&&this.us.ls.Cs(i,!1),this.engine.setMouseStyle(Ke.Default),this.L.emit("mouseLeave",this,t,this.yx),this.us.xs())},this.Ft=(t,i)=>{const s=this.NB(i);s&&(this.yx=this.GB(s,t),this.Hb&&this.us.ls.Cs(i,!0),this.TB&&this.engine.setMouseStyle(Ke.Point),this.L.emit("mouseEnter",this,t,this.yx),this.us.xs())},this.wt=(t,i)=>{const s=this.NB(i);if(s){if(this.TB){const i=(null==s?void 0:s.children.length)?s:s.parentID?this.wB[s.parentID]:void 0;i&&(this.CB.M([i]),this.yx=void 0,this.L.emit("viewChange",this.CB._()),this.zB=!0),t&&mi(t)}this.L.emit("mouseClick",this,t,this.GB(s,t)),this.us.xs()}},this.Ct=(t,i)=>{const s=this.NB(i);s&&this.L.emit("mouseDoubleClick",this,t,this.GB(s,t))},this.kt=(t,i)=>{const s=this.NB(i);s&&this.L.emit("mouseDown",this,t,this.GB(s,t))},this.Tt=(t,i)=>{const s=this.NB(i);s&&this.L.emit("mouseUp",this,t,this.GB(s,t))},this.Pt=(t,i,s)=>{const e=this.NB(s);e&&this.L.emit("mouseDragStart",this,t,i,this.GB(e,t))},this.It=(t,i,s,e,h)=>{const r=this.NB(h);r&&this.L.emit("mouseDrag",this,t,i,s,e,this.GB(r,t))},this.Dt=(t,i,s,e)=>{const h=this.NB(e);h&&this.L.emit("mouseDragStop",this,t,i,s,this.GB(h,t))},this.Bt=(t,i)=>{const s=this.NB(i);s&&this.L.emit("mouseWheel",this,t,this.GB(s,t))},this.Lt=(t,i)=>{const s=this.NB(i);s&&(this.yx=this.GB(s,t),this.Hb&&this.us.ls.Cs(i,!0),this.L.emit("touchStart",this,t,this.yx),this.us.xs(),mi(t))},this.Rt=(t,i)=>{const s=this.NB(i);s&&(this.yx=this.GB(s,t),this.Hb&&this.us.ls.Cs(i,!0),this.L.emit("touchMove",this,t,this.yx),this.us.xs(),mi(t))},this.Et=(t,i)=>{const s=this.NB(i);if(s){if(this.yx=void 0,this.TB){const i=(null==s?void 0:s.children.length)?s:s.parentID?this.wB[s.parentID]:void 0;i&&(this.CB.M([i]),this.L.emit("viewChange",this.CB._()),this.zB=!0),t&&mi(t)}this.Hb&&this.us.ls.Cs(i,!1),this.L.emit("touchEnd",this,t,this.yx),this.us.xs(),mi(t)}},this.UB=t=>{const i=this.wB[this.IB[t].id]?[this.wB[this.IB[t].id]]:this._B;this.CB.M(i),this.L.emit("viewChange",i),this.zB=!0,this.us.xs()},this.qi.treeMapChartNodeColors)this.WB=this.qi.treeMapChartNodeColors;else{const t=this.qi.pointSeriesFillStyle,i=t=>Y(t)?t.getColor():F;this.WB="function"==typeof t?new Array(5).fill(0).map(((s,e)=>i(t(e)))):[i(t)]}this.us.Qn(Yo.Lf),this.tp=i.kb("TreeMapChart plotting",0),this.sp=i.kb("TreeMap UI plotting",1),this.onResize(this.jb),this.wh.vr("TreeMap Chart");const o=i.ep(),a=qt(r?r.cursorBuilder:void 0,nl);this.hp=Ya(this,o,a.wm(o,this.uiScale,this.uiScale,Zt,this.qi),void 0,"show-pointed",yA,(()=>0)),this.YB=this.es.Dg(),this.Ey(h,this.uiScale),this.nx=this.tp.Jp(this.Mg).Le(new H).Be(this.OB),this.HB=this.us.ls.$r(this,{animationEnabled:!1!==(null==r?void 0:r.animationsEnabled)}),this.XB=new Pl((()=>this.sp.Ur(this.Mg).setMouseInteractions(!1))),this.$B=new Pl((()=>this.sp.Ur(this.uiScale))),this.nx.setMouseInteractions(this.Hi).setMouseEnterEventHandler(((t,i,s)=>this.Mt(i,s))).setMouseLeaveEventHandler(((t,i,s)=>this._t(i,s))).setMouseClickEventHandler(((t,i,s)=>this.wt(i,s))).setMouseDoubleClickEventHandler(((t,i,s)=>this.Ct(i,s))).setMouseDownEventHandler(((t,i,s)=>this.kt(i,s))).setMouseUpEventHandler(((t,i,s)=>this.Tt(i,s))).setMouseMoveEventHandler(((t,i,s)=>this.Ft(i,s))).setMouseDragStartEventHandler(((t,i,s,e)=>this.Pt(i,s,e))).setMouseDragEventHandler(((t,i,s,e,h,r)=>this.It(i,s,e,h,r))).setMouseDragStopEventHandler(((t,i,s,e,h)=>this.Dt(i,s,e,h))).setMouseWheelEventHandler(((t,i,s)=>this.Bt(i,s))).setTouchStartEventHandler(((t,i,s)=>this.Lt(i,s))).setTouchMoveEventHandler(((t,i,s)=>this.Rt(i,s))).setTouchEndEventHandler(((t,i,s)=>this.Et(i,s))),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled))}setData(t){t=Array.isArray(t)?t.slice():[t];const{jB:i}=(()=>{let t=0;return{jB:i=>{var s;const e=i.map(((t,i)=>({node:t,parent:null}))),h=[];for(;e.length>0;){const i=e.pop();if(!i)continue;const{node:r,parent:n}=i;t+=1;const o={id:t,parentID:null==n?void 0:n.id,name:r.name,value:Number(r.value)||0,animatedValue:Number(r.value)||0,children:[],nodeIndex:n?n.nodeIndex:-1,userNode:r};n?n.children.push(o):h.push(o),null===(s=r.children)||void 0===s||s.forEach((t=>{e.push({node:t,parent:o})}))}const r=t=>{t.children.forEach(r),t.children.length>0&&(t.value+=t.children.reduce(((t,i)=>t+i.value),0),t.animatedValue+=t.children.reduce(((t,i)=>t+i.animatedValue),0),t.children.sort(((t,i)=>i.animatedValue-t.animatedValue)))};h.forEach(r);const n=1===i.length?h[0].children:h;return n.sort(((t,i)=>i.animatedValue-t.animatedValue)),n.forEach(((t,i)=>{t.nodeIndex=i;const s=i=>{i.children.forEach((i=>{i.nodeIndex=t.nodeIndex,s(i)}))};s(t)})),h}}})(),s=i(t);return s.forEach((t=>{const i=this.wB[t.id];i&&this.ZB(t,i)})),this.yx=void 0,this.CB.M(s),this._B=s,this.wB=this.QB(s),this.zB=!0,this.us.xs(),this}setAnimationValues(t,i=1){return this.Rm=t?{speed:i}:void 0,this.us.xs(),this}setInitPathButtonText(t){return this.FB=t,this.zB=!0,this.us.xs(),this}setDisplayedLevelsCount(t){return this.kB=t,this.zB=!0,this.us.xs(),this}setDrillDownEnabled(t){return this.TB=t,this.zB=!0,this.us.xs(),this}setDrillDownNode(t){var i,s;if(this.yx=void 0,void 0===t)this.CB.M(this._B);else{const e=[...this._B];for(;e.length>0;){const h=e.pop();if(h){if(void 0!==h.value&&h.userNode===t||h.parentID&&Array.isArray(t)&&(null===(s=null===(i=this.wB[h.parentID])||void 0===i?void 0:i.userNode)||void 0===s?void 0:s.children)===t){const t=h.children.length?h:h.parentID?this.wB[h.parentID]:this._B[0];this.CB.M([t]);break}if(h.children)for(let t=h.children.length-1;t>=0;t-=1)e.push(h.children[t])}}}return this.L.emit("viewChange",this.CB._()),this.zB=!0,this.us.xs(),this}setNodeColoring(t){return t instanceof Array?(this.nx.Le(new H),this.WB=t):this.nx.Le(t),this.zB=!0,this.us.xs(),this}setParentNodeColor(t){return this.VB=t,this.zB=!0,this.us.xs(),this}setPathLabelFillStyle(t){return this.PB="function"==typeof t?t(this.PB):t,this.zB=!0,this.us.xs(),this}getPathLabelFillStyle(){return this.PB}setPathLabelFont(t){return Eh(t)?this.DB=t:this.DB=t(this.DB),this.zB=!0,this.us.xs(),this}getPathLabelFont(){return this.DB}setHeaderFont(t){return Eh(t)?this.LB=t:this.LB=t(this.LB),this.zB=!0,this.us.xs(),this}getHeaderFont(){return this.LB}setHeaderFillStyle(t){return this.BB="function"==typeof t?t(this.BB):t,this.zB=!0,this.us.xs(),this}getHeaderFillStyle(){return this.BB}setLabelFont(t){return Eh(t)?this.EB=t:this.EB=t(this.EB),this.zB=!0,this.us.xs(),this}getLabelFont(){return this.EB}setLabelFillStyle(t){return this.RB="function"==typeof t?t(this.RB):t,this.zB=!0,this.us.xs(),this}getLabelFillStyle(){return this.RB}setNodeBorderStyle(t){return this.nx.Be(t),this.zB=!0,this.us.xs(),this}getNodeBorderStyle(){return this.nx.vo()}setNodeEffect(t){return this.YB.bs(t),this.us.xs(),this}getNodeEffect(){return this.YB.Ms()}setCursor(t){return this.hp.setCursor(t),this}getCursor(){return this.hp.getCursor()}setCursorMode(t){return this.hp.setCursorMode(t),this}getCursorMode(){return this.hp.getCursorMode()}setCustomCursor(t){return this.hp.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.hp.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.hp.offCursorTargetChanged(t)}setCursorFormatting(t){return this.hp.setCursorFormatting(t),this}getCursorFormatting(){return this.hp.getCursorFormatting()}addCursor(t=nl){const i=this.wy(),s=t.wm(i,this.uiScale,this.uiScale,this.Sy(i),this.qi);return this.By(s),s}onNodeMouseDragStart(t){return this.L.on("mouseDragStart",t)}onNodeMouseDrag(t){return this.L.on("mouseDrag",t)}onNodeMouseDragStop(t){return this.L.on("mouseDragStop",t)}onNodeMouseWheel(t){return this.L.on("mouseWheel",t)}onNodeTouchStart(t){return this.L.on("touchStart",t)}onNodeTouchMove(t){return this.L.on("touchMove",t)}onNodeTouchEnd(t){return this.L.on("touchEnd",t)}onViewChange(t){return this.L.on("viewChange",t)}offNodeTouchStart(t){return this.L.off(t,"touchStart")}offNodeTouchMove(t){return this.L.off(t,"touchMove")}offNodeTouchEnd(t){return this.L.off(t,"touchEnd")}offViewChange(t){return this.L.off(t,"viewChange")}setMouseInteractions(t){return this.Hi=t,this.nx.setMouseInteractions(t),this}getMouseInteractions(){return this.Hi}setAnimationHighlight(t){return this.HB.Qr(t),this}getAnimationHighlight(){return this.HB.Jr()}setHighlightOnHover(t){return this.Hb=t,this}getHighlightOnHover(){return this.Hb}GB(t,i){const s=this.us.Go(i);return{cursorPosition:{pointMarker:{x:s.engineX,y:s.engineY},pointMarkerScale:this.us.ft,resultTable:{x:s.engineX,y:s.engineY},resultTableScale:this.us.ft},name:t.name,value:t.value,node:t.userNode}}getMinimumSize(){}nf(){return[this]}Ee(t){super.Ee(t),super.Ry(),Ga.Hy(this.wh,this.Vy);const i=Ga.Yy(this.wh,this.Vy);if(this.zB&&this.CB._().length){this.nx.Vt(),this.MB.clear(),this.HB.Zr(),this.gh&&this.JB(t);const s=dA({data:this.CB._(),dimensions:{x:0+this.Fa.left,y:this.Mg.y.getInnerEnd()-i-this.Fa.top,width:this.Mg.x.getInnerEnd()-this.Fa.right-this.Fa.left,height:this.Mg.y.getInnerEnd()-i-this.Fa.top-this.Fa.bottom}}),e=this.XB.Ip();this.KB(s,e),e.finishPlot(),this.qB(),this._B!==this.CB._()&&this._B.length>1&&this.IB.unshift({name:this.FB,id:0});let h=0;const r=this.$B.Ip(),n=this.DB;this.IB.forEach(((t,i)=>{const s=r.add(),e=this.us.Hg.Yg(t.name,n,0);s.vr(`← ${t.name}`).tr(n).ze({x:0,y:100}).ja({x:-1,y:1}).Nr({left:this.Fa.left+h,top:this.Fa.top,right:0,bottom:0}).Le(this.PB).setMouseClickEventHandler((t=>this.UB(i))).setMouseEnterEventHandler((()=>this.engine.setMouseStyle(Ke.Point))).setMouseLeaveEventHandler((()=>this.engine.setMouseStyle(Ke.Default))),h+=e.x+25})),r.finishPlot(),this.CB._().every((t=>t.value===t.animatedValue))?this.zB=!1:this.us.xs(!0)}return this.hp.Ee(!1,[],void 0,{explicitTarget:this.yx}),this}dispose(){return this.sp.W(),this.tp.W(),this.hp.W(),this.nx.dispose(),this.MB.clear(),this.XB.Dp(),this.$B.Dp(),super.dispose()}Z(){return super.Z(),this}J(){return super.J(),this}Kd(){return Di(this.nx.Qh())}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),Pi(t,this.qi,s,{}),this}KB(t,i,s=!1,e=0){const h=t.map(((t,i)=>({node:t,isChild:s,visibleDepth:e})));for(;h.length>0;){const t=h.pop();if(!t)continue;const{node:s,visibleDepth:e,opacity:r}=t,{x:n,y:o,height:a,width:l,children:u,animatedValue:c,name:d,nodeIndex:f}=s,A=this.WB,g=0===e&&1===this.CB._().length?this.VB:A[f%A.length],y=[{x:n,y:o},{x:n,y:o-a},{x:l+n,y:o-a},{x:l+n,y:o}],m=this.nx.jr().Tl(y).tL(g.setA(g.getA()*((null!=r?r:255)/255))).gx(c);this.MB.set(m,s),this.HB.jr(m,(t=>m.cs(t)));const p=n+5,v=o+25+5,S=Math.max(a-25-5,0),b=Math.max(l-5-5,0);if(u&&u.length&&e<this.kB&&b>15&&S>15){const t=dA({data:u,dimensions:{x:b>0?p:n,y:S>0?o-25:v,width:b,height:S}});for(let i=0;i<t.length;i+=1){const n=(255-(u.length>7?50:150))/(u.length-1),o=1===s.id&&1===this._B.length||this._B===this.CB._()?255:r?r/(e+1):255-i*n;h.push({node:t[i],isChild:!0,visibleDepth:e+1,opacity:o})}}const x=0===e&&1===this.CB._().length?this.BB:this.RB,M=0===e?this.LB:this.EB,_=this.iL(d,l-25,M),w=this.us.Hg.Yg(_,M,0),C=i.add();l-25>w.x&&a>25?C.vr(_).ze({x:n+5,y:o-2.5}).ja({x:-1,y:1}).Le(x).tr(M):C.vr("")}}QB(t){const i={},s=[...t];for(;s.length>0;){const t=s.pop();t&&(i[t.id]=t,t.children&&s.push(...t.children))}return i}NB(t){if(!this.zB&&t)return this.MB.get(t)}qB(){this.IB=[];const t=this.CB._()[0].id;let i=this.wB[t].parentID;for(;i;)this.IB.push({name:this.wB[i].name,id:i}),i=this.wB[i].parentID;return this.IB.reverse()}iL(t,i,s){let e=this.us.Hg.Yg(t,s,0).x;if(e<=i)return t;const h=t.split(" ");let r=t;for(;h.length>1&&e>i;)h.pop(),r=`${h.join(" ")}...`,e=this.us.Hg.Yg(r,s,0).x;if(e>i)for(r=`${h[0]}...`,e=this.us.Hg.Yg(r,s,0).x;r.length>3&&e>i;)r=`${r.substring(0,r.length-4)}...`,e=this.us.Hg.Yg(r,s,0).x;return r.length<=3&&e>i?"":r}JB(t){var i;const s=[...this._B];for(;s.length>0;){const e=s.pop();if(!e)continue;const h=e.value-e.animatedValue;if(Math.abs(h)<.0015*e.value||void 0===this.Rm)e.animatedValue=e.value;else{const s=h/255*((null===(i=this.Rm)||void 0===i?void 0:i.speed)||1)*t;e.animatedValue+=s,(h>0&&e.animatedValue>e.value||h<0&&e.animatedValue<e.value)&&(e.animatedValue=e.value)}e.children&&e.children.length>0&&s.push(...e.children)}}ZB(t,i){const s=[{current:t,previous:i}];for(;s.length>0;){const t=s.pop();if(!t)continue;const{current:i,previous:e}=t;i.animatedValue=this.gh?e.animatedValue:i.value,e.nodeIndex<0?i.nodeIndex=0:i.nodeIndex=e.nodeIndex;const h=new Map(e.children.map((t=>[t.id,t])));i.children.forEach(((t,i)=>{const r=h.get(t.id);s.push({current:t,previous:r||e})}))}}}const yA=(t,i,s)=>[[i.name],[{text:i.value.toString(),font:{weight:"bold"}}]];class mA extends Na{constructor(t,i,s,e,h,r,n){super(t,i,s,i.zy("gaugeChart bg",0),e,i.us.qi.gaugeChartBackgroundFillStyle,i.us.qi.gaugeChartBackgroundStrokeStyle,i.us.qi.gaugeChartTitleFont,i.us.qi.gaugeChartTitleFillStyle,r),this.eu=this.qi.gaugeChartStartAngle,this.hu=this.qi.gaugeChartEndAngle,this.sL={start:0,end:100},this.S=0,this.eL=[],this.hL=this.qi.gaugeChartBarThickness,this.rL=this.qi.gaugeChartValueIndicatorThickness,this.nL=this.qi.gaugeChartNeedleLength,this.oL=this.qi.gaugeChartNeedleThickness,this.aL=this.qi.gaugeChartNeedleFillStyle,this.lL=this.qi.gaugeChartNeedleStrokeStyle,this.uL=this.qi.gaugeChartRoundedEdges,this.cL=!0,this.dL=!0,this.fL=!0,this.AL=[],this.gL=[],this.yL=!0,this.mL=!0,this.Fm=this.S,this.pL=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.vL=this.qi.gaugeChartBarGradient,this.SL=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.bL=this.qi.gaugeChartTickFont,this.xL=this.qi.gaugeChartValueLabelFont,this.ML=this.qi.gaugeChartValueLabelFillStyle,this._L=this.qi.gaugeChartUnitLabelFont,this.wL=this.qi.gaugeChartUnitLabelFillStyle,this.CL=this.qi.gaugeChartTickFillStyle,this.kL=this.qi.gaugeChartBarColor,this.TL=this.qi.gaugeChartGlowColor,this.FL=this.qi.gaugeChartGlowColor.getA(),this.IL=1,this.PL=1,this.DL=this.qi.gaugeChartNeedleAlignment,this.BL=!1,this.LL=this.qi.gaugeChartGapBetweenBarAndValueIndicators,this.RL=this.qi.gaugeChartBarStrokeStyle,this.EL=!1,this.us.Qn(Yo.Sf),this.wh.vr("Gauge Chart"),this.Ey(h,this.Mg),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled)),this.zL=this.kL,this.VL=this.TL,this.OL=S(0,0,0,0),this.NL=this.es.Dg(),this.GL=this.es.Dg().bs(this.qi.effectsText),this.UL=this.vy.dc(this.Mg).Be(this.RL).setMouseInteractions(!1),this.WL=this.vy.ld(this.Mg).fu(0).He(360).mu(0).Be(dt).setMouseInteractions(!1),this.YL=this.Oy.Ye(this.Mg).We(this.qi.gaugeChartNeedleStrokeStyle).setMouseInteractions(!1),this.HL=this.Oy.Ye(this.Mg).We(new _e({thickness:this.oL,fillStyle:this.aL})).setMouseInteractions(!1),this.XL=this.Oy.Ur(this.Mg).tr(this.xL).Le(this.ML).setMouseInteractions(!1),this.$d=this.Oy.Ur(this.Mg).tr(this._L).Le(this.wL).vr("").setMouseInteractions(!1),this.$L=this.vy.Ur(this.Mg).tr(this.bL).Le(this.CL).setMouseInteractions(!1),this.jL=this.vy.Ur(this.Mg).tr(this.bL).Le(this.CL).setMouseInteractions(!1),this.NL.As([this.UL]),this.GL.As([this.XL,this.$d,this.$L,this.jL]),this.ZL(),this.onResize((()=>{this.BL=!0}))}ZL(){this.HL.We((t=>t.setThickness(this.oL))),this.YL.We((t=>t.setThickness(2*this.lL.getThickness()+this.oL)))}setAnimationsEnabled(t){return this.gh=t,this.mL=t,this.yL=t,this}setInterval(t,i){return this.sL={start:t,end:i},this.BL=!0,this.us.xs(),this}getInterval(){return this.sL}setTickFillStyle(t){return this.CL="function"==typeof t?t(this.CL):t,this.gL.forEach((i=>{i.start.Le(t),i.end.Le(t)})),this.$L.Le(t),this.jL.Le(t),this.BL=!0,this.us.xs(),this}getTickFillStyle(){return this.CL}setTickFont(t){return this.bL="function"==typeof t?t(this.bL):t,this.gL.forEach((i=>{i.start.tr(t),i.end.tr(t)})),this.$L.tr(t),this.jL.tr(t),this.BL=!0,this.us.xs(),this}getTickFont(){return this.bL}setTickFormatter(t){return this.pL=t,this.BL=!0,this.us.xs(),this}getTickFormatter(){return this.pL}setValueLabelFillStyle(t){return this.ML="function"==typeof t?t(this.ML):t,this.XL.Le(t),this.BL=!0,this.us.xs(),this}getValueLabelFillStyle(){return this.XL.Qh()}setValueLabelFont(t){return this.xL="function"==typeof t?t(this.xL):t,this.XL.tr(t),this.BL=!0,this.us.xs(),this}getValueLabelFont(){return this.XL.qh()}setValueFormatter(t){return this.SL="string"==typeof t?i=>t:t,this.BL=!0,this.us.xs(),this}getValueLabel(){return this.XL.kr()||this.SL}setUnitLabelFillStyle(t){return this.wL="function"==typeof t?t(this.wL):t,this.$d.Le(t),this.BL=!0,this.us.xs(),this}getUnitLabelFillStyle(){return this.$d.Qh()}setUnitLabelFont(t){return this._L="function"==typeof t?t(this._L):t,this.$d.tr(t),this.BL=!0,this.us.xs(),this}getUnitLabelFont(){return this.$d.qh()}setUnitLabel(t){return this.$d.vr(t),this.BL=!0,this.us.xs(),this}getUnitLabel(){return this.$d.kr()}setNeedleFillStyle(t){return this.aL="function"==typeof t?t(this.aL):t,this.HL.We((i=>i.setFillStyle(t))),this.BL=!0,this.us.xs(),this}getNeedleFillStyle(){return this.HL.Su().getFillStyle()}setNeedleThickness(t){return this.oL=t,this.ZL(),this.BL=!0,this.us.xs(),this}getNeedleThickness(){return this.oL}setNeedleStrokeStyle(t){return this.lL="function"==typeof t?t(this.lL):t,this.YL.We(t),this.ZL(),this.BL=!0,this.us.xs(),this}getNeedleStrokeStyle(){return this.YL.Su()}setNeedleLength(t){return this.nL=t,this.BL=!0,this.us.xs(),this}getNeedleLength(){return this.nL}setBarColor(t){return this.kL=t,this.BL=!0,this.us.xs(),this}getBarColor(){return this.zL}setBarGradient(t){return this.vL=t,this.BL=!0,this.us.xs(),this}getBarGradient(){return this.vL}setBarStrokeStyle(t){return this.RL="function"==typeof t?t(this.RL):t,this.UL.Be(t),this.BL=!0,this.us.xs(),this}getBarStrokeStyle(){return this.UL.vo()}setBarThickness(t){return this.hL=t,this.BL=!0,this.us.xs(),this}getBarThickness(){return this.hL}setAngleInterval(t,i){return Math.abs(t-i)>360&&(i=t<i?t+360:t-360),this.eu=t,this.hu=i,this.BL=!0,this.us.xs(),this}getAngleInterval(){return{start:this.eu,end:this.hu}}setValue(t){return this.EL&&this.us.Qn(Yo.Pf),this.EL=!0,this.S=t,this.yL||(this.Fm=this.S),this.BL=!0,this.us.xs(),this}getValue(){return this.S}setValueAnimation(t,i=1){return this.yL=t,this.IL=Math.max(0,i),this.BL=!0,this.us.xs(),this}setColorAnimation(t,i=1){return this.mL=t,this.PL=Math.max(0,i),this.BL=!0,this.us.xs(),this}setRoundedEdges(t){return this.uL=t,this.BL=!0,this.us.xs(),this}getRoundedEdges(){return this.uL}setValueIndicators(t){return this.eL=t,this.AL.forEach((t=>{t.dispose()})),this.AL.length=0,this.gL.forEach((t=>{t.start.dispose(),t.end.dispose()})),this.gL.length=0,this.eL.forEach((t=>{const i=this.vy.dc(this.Mg).Be(dt).Le(new W({color:t.color})).setMouseInteractions(!1);this.AL.push(i);const s=this.vy.Ur(this.Mg).tr(this.bL).Le(this.CL).setMouseInteractions(!1),e=this.vy.Ur(this.Mg).tr(this.bL).Le(this.CL).setMouseInteractions(!1);this.gL.push({start:s,end:e})})),this.NL.As([this.UL,...this.AL]),this.GL.As([this.XL,this.$d,this.$L,this.jL,...this.gL.map((t=>[t.start,t.end])).flat()]),this.BL=!0,this.us.xs(),this}getValueIndicators(){return this.eL}setValueIndicatorThickness(t){return this.rL=t,this.BL=!0,this.us.xs(),this}getValueIndicatorThickness(){return this.rL}setAutomaticBarColoring(t){return this.fL=!!t,this.BL=!0,this.us.xs(),this}getAutomaticBarColoring(){return this.fL}setGlowColor(t){return void 0===t?(this.cL=!1,this.VL=void 0):"object"==typeof t&&"auto"in t?(this.dL=t.auto,t.auto&&(this.VL=void 0),void 0!==t.alpha&&(this.FL=t.alpha),this.cL=!0):(this.VL=t,this.FL=t.getA(),this.dL=!1,this.cL=!0),this.BL=!0,this.us.xs(),this}getAutomaticGlowColoring(){return this.dL}setNeedleAlignment(t){return this.DL=t,this.BL=!0,this.us.xs(),this}getNeedleAlignment(){return this.DL}setGapBetweenBarAndValueIndicators(t){return this.LL=t,this.BL=!0,this.us.xs(),this}getGapBetweenBarAndValueIndicators(){return this.LL}setBarEffect(t){return this.NL.bs(t),this.us.xs(),this}getBarEffect(){return this.NL.Ms()}setLabelEffect(t){return this.GL.bs(t),this.us.xs(),this}getLabelEffect(){return this.GL.Ms()}Ee(t){var i;if(super.Ee(t),Ga.Hy(this.wh,this.Vy),super.Ry(),this.Fm!==this.S){if(this.yL){const i=5e-4*t,s=.003*t,e=Math.sign(this.S-this.Fm);this.Fm=this.Fm+i*e+s*this.IL*(this.S-this.Fm),e!==Math.sign(this.S-this.Fm)?this.Fm=this.S:this.us.xs(!0)}else this.Fm=this.S;this.BL=!0}let s=this.eL.find((t=>this.Fm>=t.start&&this.Fm<=t.end));if(s||(this.Fm<this.sL.start?s=this.eL.find((t=>t.start===this.sL.start)):this.Fm>this.sL.end&&(s=this.eL.find((t=>t.end===this.sL.end)))),this.zL=this.fL&&s?s.color:this.kL,this.mL){if(this.OL!==this.zL){const i=this.OL.getR(),s=this.OL.getG(),e=this.OL.getB(),h=this.zL.getR(),r=this.zL.getG(),n=this.zL.getB(),o=Math.sign(h-i),a=Math.sign(r-s),l=Math.sign(n-e),u=.005*t,c=.003*t;this.OL=S(i+u*o+c*this.PL*(h-i),s+u*a+c*this.PL*(r-s),e+u*l+c*this.PL*(n-e));const d=Math.abs(h-this.OL.getR()),f=Math.abs(r-this.OL.getG()),A=Math.abs(n-this.OL.getB());d<1&&f<1&&A<1?this.OL=this.zL:this.us.xs(!0),this.BL=!0}}else this.OL=this.zL;if(this.BL){let t=es,e=hs,h=es,r=hs;if(new Array(100).fill(0).forEach(((i,s,n)=>{const o=this.eu+s/n.length*(this.hu-this.eu),a=Math.sin(o*Math.PI/180),l=Math.cos(o*Math.PI/180);a<t&&(t=a),a>e&&(e=a),l<h&&(h=l),l>r&&(r=l)})),this.vL?this.UL.Le(new nt({stops:[{offset:0,color:b("#000000")},{offset:1,color:this.OL}],position:{x:.5,y:.5}})):this.UL.Le(new W({color:this.OL})),this.cL){const t=this.dL&&s?this.OL:null!==(i=this.VL)&&void 0!==i?i:this.TL;this.WL.Le(new nt({stops:[{offset:0,color:t.setA(this.FL)},{offset:1,color:t.setA(0)}],position:{x:.5,y:.5},extent:ht.farthestSide}))}else this.WL.Le(O);const n=this.pL(this.sL.start),o=this.pL(this.sL.end);let a=0,l=0;const u=this.us.Hg.Yg(n,this.$L.qh(),this.$L.sr()),c=this.us.Hg.Yg(o,this.jL.qh(),this.jL.sr());u.x>a&&(a=u.x),u.y>l&&(l=u.y),c.x>a&&(a=c.x),c.y>l&&(l=c.y),this.gL.forEach(((t,i)=>{if(i>=this.eL.length)return;const s=this.eL[i],e=this.pL(s.start),h=this.pL(s.end),r=this.us.Hg.Yg(e,t.start.qh(),t.start.sr()),n=this.us.Hg.Yg(h,t.end.qh(),t.end.sr());r.x>a&&(a=r.x),r.y>l&&(l=r.y),n.x>a&&(a=n.x),n.y>l&&(l=n.y)}));const d=this.eL.length>0?this.rL:0,f=this.Mg.getInnerIntervalPixels(),A=Ga.Yy(this.wh,this.Vy),g={x:f.x-(this.Fa.left+this.Fa.right),y:f.y-(this.Fa.bottom+this.Fa.top)-A},y={x:this.Fa.left+.5*g.x,y:this.Fa.bottom+.5*g.y},m=d+2*this.LL+this.hL/2,p=a+m,v=l+m,S=v+A,x=g.y-(S+v),M=g.x-(p+p),_=Math.max(0,x<M?x:M),w=.5*_,C=.5*w,k=(t+e)*C,T=(h+r)*C,F={x:y.x-T,y:y.y-k},I=_>0;if(this.UL.setVisible(I),this.AL.forEach((t=>t.setVisible(I))),this.HL.setVisible(I),this.YL.setVisible(I),this.WL.setVisible(I),this.$d.setVisible(I),this.XL.setVisible(I),this.$L.setVisible(I),this.jL.setVisible(I),this.gL.forEach((t=>{t.start.setVisible(I),t.end.setVisible(I)})),!I)return;const P={x:y.x-.5*T,y:y.y-.5*k};this.WL.ze(y).Au(.5*Math.min(g.x,g.y)),this.XL.ze(P).vr(this.SL(this.Fm)),this.$d.ze({x:P.x,y:P.y-this.XL.nd().y-this.$d.nd().y/4});const D=SA(this.sL,this.eu,this.hu,this.Fm,F,w+this.DL*(this.nL/2+this.hL/2)),B=D.angle*(Math.PI/180),L=.5*this.nL,R=Math.cos(B),E=Math.sin(B);this.HL.Xe({x:D.x+L*R,y:D.y+L*E}).He({x:D.x-L*R,y:D.y-L*E}),this.YL.Xe({x:D.x+L*R,y:D.y+L*E}).He({x:D.x-L*R,y:D.y-L*E});const z=pA(F,w,this.eu,this.hu,this.hL,this.uL,!1,!1);this.UL.Tl(z).ia({min:{x:F.x-w,y:F.y-w},max:{x:F.x+w,y:F.y+w}});const V=F.y+w,N=F.y-w,G=F.x+w,U=F.x-w,[Y,H]=this.sL.start<this.sL.end?[this.sL.start,this.sL.end]:[this.sL.end,this.sL.start],X=w+.5*this.hL+d/2+this.LL,$=X+d/2;this.eL.forEach(((t,i)=>{var s,e;const h=t.start>=Y&&t.end<=H;this.AL[i].setVisible(h),this.gL[i].start.setVisible(h),this.gL[i].end.setVisible(h);const r=SA(this.sL,this.eu,this.hu,t.start,F,$),n=SA(this.sL,this.eu,this.hu,t.end,F,$),o=pA(F,X,r.angle,n.angle,this.rL,this.uL,!(0===i),!(i===this.eL.length-1));this.AL[i].Tl(o);const a=this.sL.start===t.start||this.sL.end===t.start,l=this.sL.start===t.end||this.sL.end===t.end||this.eL.some((i=>i.start===t.end&&i!==t));this.gL[i].start.ze({x:r.x,y:r.y}).ja({x:Math.min(1,Math.max(-1,2*(r.x-G)/(U-G)-1)),y:Math.min(1,Math.max(-1,2*(r.y-V)/(N-V)-1))}).vr(null!==(s=t.startLabel)&&void 0!==s?s:a?"":this.pL(t.start)),this.gL[i].end.ze({x:n.x,y:n.y}).ja({x:Math.min(1,Math.max(-1,2*(n.x-G)/(U-G)-1)),y:Math.min(1,Math.max(-1,2*(n.y-V)/(N-V)-1))}).vr(null!==(e=t.endLabel)&&void 0!==e?e:l?"":this.pL(t.end))}));const j=this.eL.some((t=>t.start<t.end?this.sL.start>=t.start&&this.sL.start<=t.end:this.sL.start<=t.start&&this.sL.start>=t.end)),Z=SA(this.sL,this.eu,this.hu,this.sL.start,F,j?$:X-this.LL);this.$L.ze({x:Z.x,y:Z.y}).ja({x:Math.min(1,Math.max(-1,2*(Z.x-G)/(U-G)-1)),y:Math.min(1,Math.max(-1,2*(Z.y-V)/(N-V)-1))}).vr(n);const Q=this.eL.some((t=>t.start<t.end?this.sL.end>=t.start&&this.sL.end<=t.end:this.sL.end<=t.start&&this.sL.end>=t.end)),J=SA(this.sL,this.eu,this.hu,this.sL.end,F,Q?$:X-this.LL);this.jL.ze({x:J.x,y:J.y}).ja({x:Math.min(1,Math.max(-1,2*(J.x-G)/(U-G)-1)),y:Math.min(1,Math.max(-1,2*(J.y-V)/(N-V)-1))}).vr(o),this.BL=!1}}getMinimumSize(){return{x:150,y:150}}nf(){return[this]}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),t.setMouseInteractions(!1),Pi(t,this.qi,s,{fill:new W({color:this.getBarColor()})}),this}}const pA=(t,i,s,e,h,r=!0,n=!0,o=!0)=>{const a=[],l=.5*h,u=s>e,c=Math.sign(s-e),d=-1*c;if(r){const t=l/(2*Math.PI*i)*360+.1;n&&(s+=t*d),o&&(e+=t*c)}else s+=.1*d,e+=.1*c;const f=vA(t,i+l,s,e,u);if(a.push(...f),r){const h={x:t.x+i*Math.cos(e*(Math.PI/180)),y:t.y+i*Math.sin(e*(Math.PI/180))};let r;r=s>e?vA(h,l,e+180,e+360,u):vA(h,l,e-180,e-360,u),a.push(...r)}const A=vA(t,i-l,e,s,!u);if(a.push(...A),r){const h={x:t.x+i*Math.cos(s*(Math.PI/180)),y:t.y+i*Math.sin(s*(Math.PI/180))};let r;r=s>e?vA(h,l,s-180,s-360,u):vA(h,l,s+180,s+360,u),a.push(...r)}return a},vA=(t,i,s,e,h)=>{s<e&&([s,e]=[e,s]);const r=[],n=h?-1:1,o=h?t=>t>e:t=>t<s;for(let a=h?s:e;o(a);a+=n){const s=a*(Math.PI/180),e=t.x+i*Math.cos(s),h=t.y+i*Math.sin(s);r.push({x:e,y:h})}const a=(h?e:s)*(Math.PI/180),l=t.x+i*Math.cos(a),u=t.y+i*Math.sin(a);return r.push({x:l,y:u}),r},SA=(t,i,s,e,h,r)=>{const[n,o]=t.start<t.end?[t.start,t.end]:[t.end,t.start],a=Math.max(n,Math.min(o,e)),l=t.start<t.end?s-i:i-s,u=t.start<t.end?i+(a-t.start)/(t.end-t.start)*l:i-(a-t.start)/(t.end-t.start)*l,c=u*(Math.PI/180);return{x:h.x+r*Math.cos(c),y:h.y+r*Math.sin(c),angle:Math.round(u)}},bA=(t,i)=>{const s=(t=>{const i=new W({color:t.uiStrokeColorContrastHigh}),s=new W({color:t.uiStrokeColorContrastMedium}),e=new W({color:t.uiStrokeColorContrastLow}),h=new Rh({family:t.fontFamily,weight:"normal",style:"normal"}),r=h.setSize(18*t.fontScaler),n=h.setSize(16*t.fontScaler),o=h.setSize(14*t.fontScaler),a=h.setSize(10*t.fontScaler),l=h.withMutations((i=>i.set("size",14*t.fontScaler).set("weight","bold"))),u=h.setSize(13*t.fontScaler),c=new _e({thickness:2,fillStyle:e}),d=new W({color:t.dataHighlightOverlayColor}),f=new _e({thickness:2,fillStyle:t.legendBackgroundBorderFillStyle}),A=t.dataColorPalette.map((t=>new W({color:t.stroke}))),g=t=>A[t%A.length],y=A.map((t=>new _e({thickness:2,fillStyle:t}))),m=t=>y[t%y.length],p=t.dataColorPalette.map((t=>new W({color:t.border}))).map((t=>new _e({thickness:2,fillStyle:t}))),v=t=>p[t%p.length],x=t.dataColorPalette.map((t=>{const i=t.area;return new lt({angle:0,stops:[{offset:0,color:i.setA(0)},{offset:.8,color:i}]})})),M=t=>x[t%x.length],_=t.dataColorPaletteInverted.map((t=>{const i=t.area;return new lt({angle:180,stops:[{offset:0,color:i.setA(0)},{offset:.8,color:i}]})})),w=t=>_[t%_.length],C=t.dataColorPalette.map((t=>{const i=t.area;return new lt({angle:180,stops:[{color:Ti(i,S(255,255,255,i.getA()),.3),offset:0},{color:i,offset:.5},{color:Ti(i,S(0,0,0,i.getA()),.3),offset:1}]})})),k=t=>C[t%C.length],T=t.dataColorPaletteInverted.map((t=>new W({color:t.border}))).map((t=>new _e({thickness:2,fillStyle:t}))),F=t=>T[t%T.length],I=new W({color:t.dataColorPositive}),P=new W({color:t.dataColorNegative}),D=new _e({thickness:1,fillStyle:new W({color:t.dataStrokeColorContrastHigh.setA(50)})}),B=new _e({thickness:2,fillStyle:t.axisLineFillStyle}),L=dt,R=new W({color:S(0,0,0,1)}),E=new _e({thickness:1,fillStyle:t.axisGridMajorFillStyle}),z=dt,V=o,N=t.axisLabelMajorFillStyle,G=new _e({thickness:1,fillStyle:t.axisGridMajorFillStyle}),U=new _e({thickness:1,fillStyle:t.axisTickMajorFillStyle}),Y=o,H=t.axisLabelMajorFillStyle,X=new _e({thickness:1,fillStyle:t.axisGridMinorFillStyle}),$=new _e({thickness:1,fillStyle:t.axisTickMinorFillStyle}),j=a,Z=t.axisLabelMinorFillStyle,Q=ta,J=new Ko({gridStrokeStyle:E,tickStyle:z,tickLength:50,tickPadding:-14,labelFont:V,labelFillStyle:N}),K=new Ko({gridStrokeStyle:G,tickStyle:U,tickLength:7,tickPadding:5,labelFont:Y,labelFillStyle:H}),q=new Ko({gridStrokeStyle:X,tickStyle:$,tickLength:4,tickPadding:10,labelFont:j,labelFillStyle:Z}),tt=new Ia({extremeTickStyle:Q,majorTickStyle:K,minorTickStyle:q}),it=new ba({greatTickStyle:J,majorTickStyle:K,minorTickStyle:q}),st=new na({majorTickStyle:K,minorTickStyle:q}),et=new W({color:t.dataHighlightOverlayColor}),ht=new _e({thickness:1,fillStyle:s}),rt=new _e({thickness:2,fillStyle:s}),nt=t=>new Hh.Triangulated({shape:"sphere",size:10,fillStyle:A[t%A.length]}),ot=A[0],at=t.uiTextFillStyle,ut=t.legendBackgroundFillStyle,ct=new _e({thickness:1,fillStyle:t.legendBackgroundBorderFillStyle}),ft=Ii(t.legendButtonDefaultColor),At=Ii(t.isDark?S(70,70,70,255):S(170,170,170,255)),gt=new W({color:t.isDark?S(70,70,70,255):S(170,170,170,255)}),yt=new _e({thickness:1,fillStyle:i}),mt=new Ln({thickness:1,fillStyle:t.cursorGridFillStyle,pattern:Dn.DashedEqual,patternScale:3}),pt=new _e({thickness:1,fillStyle:t.cursorGridFillStyle}),vt=t.zoomBandChartDefocusOverlayFillStyle,St=new _e({thickness:2,fillStyle:new W({color:t.zoomBandChartSplitterColor})}),bt=new W({color:t.uiBackgroundColor});let xt={isDark:t.isDark,effect:t.effect,effectsText:t.effectsText,effectsDashboardSplitters:t.effectsDashboardSplitters,lcjsBackgroundFillStyle:t.lcjsBackgroundFillStyle,lcjsBackgroundStrokeStyle:dt,highlightColorOffset:t.highlightColorOffset,highlightColorOffsetAxisOverlay:t.highlightColorOffsetAxisOverlay,dashboardSplitterStyle:new _e({thickness:4,fillStyle:t.dashboardSplitterFillStyle}),chartXYBackgroundFillStyle:t.panelBackgroundFillStyle,chartXYBackgroundStrokeStyle:dt,chartXYTitleFont:r,chartXYTitleFillStyle:t.titleFillStyle,chartXYSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chartXYSeriesBackgroundStrokeStyle:c,chartXYZoomingRectangleFillStyle:d,chartXYZoomingRectangleStrokeStyle:f,chartXYFittingRectangleFillStyle:d,chartXYFittingRectangleStrokeStyle:f,lineSeriesStrokeStyle:m,pointLineSeriesStrokeStyle:m,pointLineSeriesFillStyle:g,pointSeriesFillStyle:g,ellipseSeriesFillStyle:g,ellipseSeriesStrokeStyle:m,polygonSeriesFillStyle:g,polygonSeriesStrokeStyle:m,rectangleSeriesFillStyle:g,rectangleSeriesStrokeStyle:dt,segmentSeriesStrokeStyle:m,boxSeriesBodyFillStyle:g(0),boxSeriesBodyStrokeStyle:dt,boxSeriesStrokeStyle:new _e({thickness:1,fillStyle:A[0]}),boxSeriesMedianStrokeStyle:new _e({thickness:1,fillStyle:new W({color:S(0,0,0)})}),ohlcCandleThicknessPixels:5,ohlcCandleBodyFillStylePositive:I,ohlcCandleBodyFillStyleNegative:P,ohlcCandleTailStrokeStylePositive:new _e({thickness:1,fillStyle:new W({color:t.uiStrokeColorContrastHigh})}),ohlcCandleTailStrokeStyleNegative:new _e({thickness:1,fillStyle:new W({color:t.uiStrokeColorContrastHigh})}),ohlcBarThicknessPixels:10,ohlcBarStrokeStylePositive:new _e({thickness:2,fillStyle:I}),ohlcBarStrokeStyleNegative:new _e({thickness:2,fillStyle:P}),heatmapGridSeriesFillStyle:g,heatmapGridSeriesWireframeStyle:D,heatmapScrollingGridSeriesFillStyle:g,heatmapScrollingGridSeriesWireframeStyle:D,areaRangeSeriesFillStyle:M,areaRangeSeriesStrokeStyle:v,areaRangeSeriesFillStyleInverted:w,areaRangeSeriesStrokeStyleInverted:F,areaSeriesBipolarHighFillStyle:M,areaSeriesBipolarHighStrokeStyle:v,areaSeriesBipolarLowFillStyle:w,areaSeriesBipolarLowStrokeStyle:F,areaSeriesPositiveFillStyle:M,areaSeriesPositiveStrokeStyle:v,areaSeriesNegativeFillStyle:w,areaSeriesNegativeStrokeStyle:F,xAxisTitleFont:n,xAxisTitleFillStyle:t.axisTitleFillStyle,xAxisStrokeStyle:B,xAxisNibStyle:L,xAxisOverlayStyle:R,xAxisZoomingBandFillStyle:d,xAxisZoomingBandStrokeStyle:dt,xAxisNumericTicks:tt,xAxisDateTimeTicks:it,xAxisTimeTicks:st,yAxisTitleFont:n,yAxisTitleFillStyle:t.axisTitleFillStyle,yAxisStrokeStyle:B,yAxisNibStyle:L,yAxisOverlayStyle:R,yAxisZoomingBandFillStyle:d,yAxisZoomingBandStrokeStyle:dt,yAxisNumericTicks:tt,yAxisDateTimeTicks:it,yAxisTimeTicks:st,bandFillStyle:et,bandStrokeStyle:ht,constantLineStrokeStyle:rt,barChartBackgroundFillStyle:t.panelBackgroundFillStyle,barChartBackgroundStrokeStyle:dt,barChartTitleFont:r,barChartTitleFillStyle:t.titleFillStyle,barChartSeriesBackgroundFillStyle:O,barChartSeriesBackgroundStrokeStyle:dt,barChartBarFillStyle:g,barChartBarStrokeStyle:new _e({thickness:1,fillStyle:e}),barChartValueAxisTitleFont:n,barChartValueAxisTitleFillStyle:t.axisTitleFillStyle,barChartValueAxisStrokeStyle:B,barChartValueAxisTicks:tt.setMajorTickStyle((t=>t.setGridStrokeStyle(dt))).setMinorTickStyle((t=>t.setGridStrokeStyle(dt))),barChartCategoryAxisTitleFont:n,barChartCategoryAxisTitleFillStyle:t.axisTitleFillStyle,barChartCategoryAxisStrokeStyle:B,barChartCategoryLabels:{formatter:(t,i)=>t,labelFillStyle:tt.majorTickStyle.labelFillStyle,labelFont:tt.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,tickStyle:tt.majorTickStyle.tickStyle,tickLength:0},barChartValueLabelsAfterBars:{position:"after-bar",formatter:(t,i,s)=>t.chart.valueAxis.formatValue(s),labelFillStyle:tt.majorTickStyle.labelFillStyle,labelFont:tt.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},barChartValueLabelsInsideBars:{position:"inside-bar",formatter:(t,i,s)=>t.chart.valueAxis.formatValue(s),labelFillStyle:tt.majorTickStyle.labelFillStyle,labelFont:tt.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},chart3DBackgroundFillStyle:t.panelBackgroundFillStyle,chart3DBackgroundStrokeStyle:dt,chart3DTitleFont:r,chart3DTitleFillStyle:t.titleFillStyle,chart3DSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chart3DSeriesBackgroundStrokeStyle:c,chart3DBoundingBoxStrokeStyle:dt,xAxis3DTitleFont:n,xAxis3DTitleFillStyle:t.axisTitleFillStyle,xAxis3DStrokeStyle:B,xAxis3DNumericTicks:tt,xAxis3DDateTimeTicks:it,xAxis3DTimeTicks:st,yAxis3DTitleFont:n,yAxis3DTitleFillStyle:t.axisTitleFillStyle,yAxis3DStrokeStyle:B,yAxis3DNumericTicks:tt,yAxis3DDateTimeTicks:it,yAxis3DTimeTicks:st,zAxis3DTitleFont:n,zAxis3DTitleFillStyle:t.axisTitleFillStyle,zAxis3DStrokeStyle:B,zAxis3DNumericTicks:tt,zAxis3DDateTimeTicks:it,zAxis3DTimeTicks:st,lineSeries3DStrokeStyle:m,pointLineSeries3DStrokeStyle:m,pointLineSeries3DPointStyle:nt,pointSeries3DPointStyle:nt,pointCloudSeries3DPointStyle:t=>new Hh.Pixelated({size:5,fillStyle:A[t%A.length]}),surfaceGridSeries3DFillStyle:g,surfaceGridSeries3DWireframeStyle:D,surfaceScrollingGridSeries3DFillStyle:g,surfaceScrollingGridSeries3DWireframeStyle:D,boxSeries3DFillStyle:g,meshModel3DFillStyle:g(0),polarChartBackgroundFillStyle:t.panelBackgroundFillStyle,polarChartBackgroundStrokeStyle:dt,polarChartTitleFont:r,polarChartTitleFillStyle:t.titleFillStyle,polarChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,polarChartSeriesBackgroundStrokeStyle:c,polarSectorFillStyle:et,polarSectorStrokeStyle:ht,polarAmplitudeAxisTitleFont:n,polarAmplitudeAxisTitleFillStyle:t.axisTitleFillStyle,polarAmplitudeAxisStrokeStyle:B,polarAmplitudeAxisNumericTicks:tt,polarAmplitudeAxisDateTimeTicks:it,polarAmplitudeAxisTimeTicks:st,polarRadialAxisTitleFont:n,polarRadialAxisTitleFillStyle:t.axisTitleFillStyle,polarRadialAxisStrokeStyle:B,polarRadialAxisTickStyle:K,polarLineSeriesStrokeStyle:m,polarPointLineSeriesFillStyle:g,polarPointLineSeriesStrokeStyle:m,polarPointSeriesFillStyle:g,polarPolygonSeriesFillStyle:k,polarPolygonSeriesStrokeStyle:v,polarAreaSeriesFillStyle:k,polarAreaSeriesStrokeStyle:v,polarHeatmapSeriesFillStyle:g,mapChartBackgroundFillStyle:t.panelBackgroundFillStyle,mapChartBackgroundStrokeStyle:dt,mapChartTitleFont:r,mapChartTitleFillStyle:t.titleFillStyle,mapChartFillStyle:ot,mapChartStrokeStyle:new _e({thickness:1,fillStyle:new W({color:t.dataStrokeColorContrastMedium})}),mapChartOutlierRegionFillStyle:O,mapChartOutlierRegionStrokeStyle:new _e({thickness:1,fillStyle:e}),mapChartSeparateRegionFillStyle:ut,mapChartSeparateRegionStrokeStyle:ct,dataGridBackgroundFillStyle:t.panelBackgroundFillStyle,dataGridBackgroundStrokeStyle:dt,dataGridTitleFont:r,dataGridTitleFillStyle:t.titleFillStyle,dataGridTextFont:o,dataGridTextFillStyle:ot,dataGridCellBackgroundFillStyle:new W({color:t.uiBackgroundColor}),dataGridBorderStrokeStyle:new _e({thickness:.4,fillStyle:new W({color:t.uiBackgroundBorderColor})}),dataGridScrollBarBackgroundFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarBackgroundStrokeStyle:dt,dataGridScrollBarFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarStrokeStyle:ct,dataGridScrollBarButtonFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarButtonStrokeStyle:ct,dataGridScrollBarButtonArrowFillStyle:ft,dataGridScrollBarButtonArrowStrokeStyle:ct,sparkLineChartStrokeStyle:m(0),sparkPointChartFillStyle:g(0),sparkBarChartFillStyle:g(0),sparkBarChartStrokeStyle:v(0),sparkAreaChartFillStyle:M(0),sparkAreaChartStrokeStyle:v(0),sparkPieChartFillStyle:g,sparkPieChartStrokeStyle:ct,sparkChartBandFillStyle:et,sparkChartBandStrokeStyle:ht,sparkChartConstantLineStrokeStyle:rt,spiderChartBackgroundFillStyle:t.panelBackgroundFillStyle,spiderChartBackgroundStrokeStyle:dt,spiderChartTitleFont:r,spiderChartTitleFillStyle:t.titleFillStyle,spiderChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,spiderChartSeriesBackgroundStrokeStyle:c,spiderChartWebStyle:new _e({thickness:2,fillStyle:e}),spiderChartScaleLabelFillStyle:t.axisLabelMajorFillStyle,spiderChartScaleLabelFont:o,spiderChartAxisLabelFillStyle:t.axisTitleFillStyle,spiderChartAxisLabelFont:n,spiderChartAxisStrokeStyle:new _e({thickness:2,fillStyle:s}),spiderChartAxisNibStrokeStyle:new _e({thickness:2,fillStyle:i}),spiderSeriesFillStyle:k,spiderSeriesStrokeStyle:v,spiderSeriesPointFillStyle:g,pieChartBackgroundFillStyle:t.panelBackgroundFillStyle,pieChartBackgroundStrokeStyle:dt,pieChartTitleFont:r,pieChartTitleFillStyle:t.titleFillStyle,pieChartSliceFillStylePalette:g,pieChartSliceStrokeStyle:ct,pieChartSliceLabelFont:u,pieChartSliceLabelFillStyle:t.uiTextFillStyle,pieChartConnectorStrokeStyle:yt,funnelChartBackgroundFillStyle:t.panelBackgroundFillStyle,funnelChartBackgroundStrokeStyle:dt,funnelChartTitleFont:r,funnelChartTitleFillStyle:t.titleFillStyle,funnelChartSliceFillStylePalette:g,funnelChartSliceStrokeStyle:ct,funnelChartSliceLabelFont:u,funnelChartSliceLabelFillStyle:t.uiTextFillStyle,funnelChartConnectorStrokeStyle:yt,pyramidChartBackgroundFillStyle:t.panelBackgroundFillStyle,pyramidChartBackgroundStrokeStyle:dt,pyramidChartTitleFont:r,pyramidChartTitleFillStyle:t.titleFillStyle,pyramidChartSliceFillStylePalette:g,pyramidChartSliceStrokeStyle:ct,pyramidChartSliceLabelFont:u,pyramidChartSliceLabelFillStyle:t.uiTextFillStyle,pyramidChartConnectorStrokeStyle:yt,gaugeChartValueLabelFont:u.setSize(60),gaugeChartUnitLabelFont:u.setSize(40),gaugeChartTickFont:u.setSize(30),gaugeChartBarThickness:40,gaugeChartValueIndicatorThickness:10,gaugeChartRoundedEdges:!0,gaugeChartNeedleLength:40,gaugeChartStartAngle:225,gaugeChartEndAngle:-45,gaugeChartNeedleAlignment:0,gaugeChartGapBetweenBarAndValueIndicators:10,gaugeChartTickFillStyle:t.uiTextFillStyle,gaugeChartBarGradient:!0,gaugeChartBarStrokeStyle:dt,gaugeChartUnitLabelFillStyle:t.uiTextFillStyle,gaugeChartValueLabelFillStyle:t.uiTextFillStyle,gaugeChartBarColor:S(255,255,255),gaugeChartGlowColor:S(255,255,64),gaugeChartNeedleFillStyle:new W({color:S(255,255,255)}),gaugeChartNeedleThickness:10,gaugeChartNeedleStrokeStyle:new _e({thickness:2,fillStyle:new W({color:S(0,0,0)})}),gaugeChartBackgroundFillStyle:t.panelBackgroundFillStyle,gaugeChartBackgroundStrokeStyle:dt,gaugeChartTitleFont:r,gaugeChartTitleFillStyle:t.titleFillStyle,treeMapChartBackgroundFillStyle:t.panelBackgroundFillStyle,treeMapChartBackgroundStrokeStyle:dt,treeMapChartParentColor:t.treeMapChartParentColor,treeMapChartNodeColors:t.treeMapChartNodeColors,treeMapChartNodeStrokeStyle:new _e({thickness:1,fillStyle:new W({color:b("000")})}),treeMapChartTitleFillStyle:t.titleFillStyle,treeMapChartTitleFont:r,treeMapChartPathLabelFillStyle:at,treeMapChartPathLabelFont:u,treeMapChartLabelHeaderFillStyle:t.treeMapChartLabelHeaderFillStyle,treeMapChartLabelHeaderFont:r,treeMapChartLabelFillStyle:t.treeMapChartLabelFillStyle,treeMapChartLabelFont:u,uiPanelBackgroundFillStyle:t.panelBackgroundFillStyle,uiPanelBackgroundStrokeStyle:dt,zoomBandChartDefocusOverlayFillStyle:vt,zoomBandChartSplitterStrokeStyle:St,zoomBandChartKnobFillStyle:t.zoomBandChartKnobFillStyle,zoomBandChartKnobSize:t.zoomBandChartKnobSize,onScreenMenuBackgroundColor:S(254,204,0,.7),parallelCoordinateChartBackgroundFillStyle:t.panelBackgroundFillStyle,parallelCoordinateChartBackgroundStrokeStyle:dt,parallelCoordinateChartTitleFont:r,parallelCoordinateChartTitleFillStyle:t.titleFillStyle,parallelCoordinateChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,parallelCoordinateChartSeriesBackgroundStrokeStyle:c,parallelCoordinateChartSeriesColor:i=>t.dataColorPalette[i%t.dataColorPalette.length].stroke,parallelCoordinateChartSeriesColorUnselected:t.dataColorUnselected,parallelCoordinateChartSeriesLineThickness:2,parallelCoordinateChartPointedSeriesLineStyle:y[0],parallelCoordinateAxisTitleFont:n,parallelCoordinateAxisTitleFillStyle:t.axisTitleFillStyle,parallelCoordinateAxisNumericTicks:tt,parallelCoordinateAxisDateTimeTicks:it,parallelCoordinateAxisTimeTicks:st,parallelCoordinateAxisStrokeStyle:B,parallelCoordinateAxisRangeSelectorFillStyle:t.seriesBackgroundFillStyle,parallelCoordinateAxisRangeSelectorStrokeStyle:ct,parallelCoordinateAxisBackgroundFillStyle:new lt({angle:90,stops:[{offset:0,color:t.isDark?S(0,0,0,0):S(255,255,255,0)},{offset:1,color:t.isDark?S(0,0,0,255):S(255,255,255,180)}]}),uiButtonFillStyle:ft,uiButtonFillStyleHidden:At,uiButtonStrokeStyle:ct,uiButtonSize:10,uiBackgroundFillStyle:ut,uiBackgroundStrokeStyle:ct,uiTextFillStyle:at,uiTextFillStyleHidden:gt,uiTextFont:u,legendTitleFillStyle:at,legendTitleFont:l,cursorTickMarkerXBackgroundFillStyle:ut,cursorTickMarkerXBackgroundStrokeStyle:ct,cursorTickMarkerXTextFillStyle:at,cursorTickMarkerXTextFont:u,cursorTickMarkerYBackgroundFillStyle:ut,cursorTickMarkerYBackgroundStrokeStyle:ct,cursorTickMarkerYTextFillStyle:at,cursorTickMarkerYTextFont:u,cursorPointMarkerFillStyle:mt.getFillStyle(),cursorPointMarkerSize:{x:9,y:9},cursorPointMarkerShape:ar.Cross,cursorResultTableFillStyle:ut,cursorResultTableStrokeStyle:ct,cursorResultTableTextFillStyle:at,cursorResultTableTextFont:u,cursorGridStrokeStyleX:mt,cursorGridStrokeStyleY:mt,cursor3DGridStrokeStyleX:pt,cursor3DGridStrokeStyleY:pt,cursor3DGridStrokeStyleZ:pt,cursor3DTickStrokeStyleX:K.tickStyle,cursor3DTickStrokeStyleY:K.tickStyle,cursor3DTickStrokeStyleZ:K.tickStyle,cursor3DTickLabelFillStyleX:at,cursor3DTickLabelFillStyleY:at,cursor3DTickLabelFillStyleZ:at,cursor3DTickLabelFontX:u,cursor3DTickLabelFontY:u,cursor3DTickLabelFontZ:u,cursor3DTickLabelBackgroundFillStyleX:bt,cursor3DTickLabelBackgroundFillStyleY:bt,cursor3DTickLabelBackgroundFillStyleZ:bt,cursor3DTickLabelBackgroundStrokeStyleX:ct,cursor3DTickLabelBackgroundStrokeStyleY:ct,cursor3DTickLabelBackgroundStrokeStyleZ:ct,cursor3DTickLabelPaddingX:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingY:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingZ:{left:4,right:4,top:4,bottom:4}};return t.overrideThemeProperties&&(xt={...xt,...t.overrideThemeProperties}),xt})(t),e={...i,header1Font:s.xAxisTitleFont,header2Font:s.xAxisNumericTicks.getMajorTickStyle().labelFont,header3Font:s.uiTextFont,mainDataColor:t.dataColorPalette[0].stroke};return{...s,examples:e}},xA=(t,i)=>{const s=new Image;s.crossOrigin="*";const e=`${t}/${i}`;return s.src=e,s},MA=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:Ti(i[e%i.length].stroke,S(255,255,255),.5);return new nt({stops:[{color:Ti(h,S(255,255,255),.5*s).setA(100),offset:0},{color:h.setA(100),offset:.5},{color:Ti(h,S(30,30,30),.5*s).setA(100),offset:1}]})},_A=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:Ti(i[e%i.length].stroke,S(255,255,255),.2);return new nt({stops:[{color:Ti(h,S(255,255,255),.2*s),offset:0},{color:h,offset:.5},{color:Ti(h,S(0,0,0),.2*s),offset:1}]})},wA=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:Ti(i[e%i.length].stroke,S(255,255,255),.2);return new lt({angle:90,stops:[{color:Ti(h,S(255,255,255),.5*s),offset:0},{color:h,offset:.35},{color:Ti(h,S(30,30,30),.5*s),offset:1}]})},CA=(t,i,s)=>(s=>{const e=new Map;return s=>{const h=e.get(s);if(h)return h;const r=(s=>{const e=!0===t?i[s%i.length].stroke:Ti(i[s%i.length].stroke,S(255,255,255),.3);return new lt({angle:90,stops:[{color:Ti(e,S(255,255,255),.5),offset:0},{color:e,offset:.35},{color:Ti(e,S(30,30,30),.5),offset:1}]})})(s);return e.set(s,r),r}})(),kA=Hi((()=>{const t=S(255,255,255),i=new W({color:t}),s=!0,e=new Nn({spread:1,blur:9,offset:{x:0,y:0},color:S(0,0,0,150)}),h=new nt({position:{x:.8,y:.8},extent:ht.farthestCorner,shape:et.ellipse,stops:[{offset:0,color:S(50,51,52)},{offset:.5,color:S(14,15,16)},{offset:1,color:S(0,0,0)}]}),r=new W({color:S(45,45,45)}),n=new nt({position:{x:.5,y:.5},extent:ht.farthestCorner,shape:et.circle,stops:[{offset:0,color:S(120,120,120,100)},{offset:1,color:S(0,0,0,50)}]}),o=new nt({position:{x:.5,y:.5},extent:ht.farthestCorner,shape:et.circle,stops:[{offset:0,color:S(30,30,30,200)},{offset:1,color:S(0,0,0,255)}]}),a=new W({color:S(255,255,220)}),l=new W({color:S(255,255,166)}),u=new W({color:S(255,255,220)}),c=new W({color:S(255,255,220,130)}),d=new W({color:S(255,255,200)}),f=d,A=f,g=new lt({angle:45,stops:[{offset:0,color:S(230,230,230)},{offset:1,color:S(150,150,150)}]}),y=new W({color:S(220,220,220)}),m=new W({color:S(200,200,200,50)}),p=new W({color:S(200,200,200,150)}),v=new W({color:S(200,200,200,20)}),x=new W({color:S(220,220,220)}),M=new lt({angle:0,stops:[{offset:0,color:S(10,10,10,220)},{offset:1,color:S(30,30,30,220)}]}),_=i,w=S(255,255,200),C=M,k=_,T=S(20,20,20),F=S(0,0,0),I=t,P=S(150,150,150),D=S(50,50,50),B=S(50,50,50),L=S(100,100,100),R=S(200,200,200),E=[S(255,255,91,255),S(255,205,91,255),S(255,155,91,255),S(255,196,188,255),S(255,148,184,255),S(219,148,198,255),S(235,196,224,255),S(169,148,198,255),S(148,226,198,255),S(148,255,176,255),S(180,255,165,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),z=t.setA(20),V=S(176,255,157,255),O=S(255,112,76,255),N={mapChartFillStyle:new lt({angle:135,stops:[{color:S(255,255,91,255),offset:0},{color:S(255,155,91,255),offset:1}]}),spiderSeriesFillStyle:MA(s,E,.5),pieChartSliceFillStylePalette:_A(s,E,1),funnelChartSliceFillStylePalette:wA(s,E,1),pyramidChartSliceFillStylePalette:wA(s,E,1),rectangleSeriesFillStyle:CA(s,E),gaugeChartBarColor:S(255,255,91,255),gaugeChartGlowColor:S(255,255,91,64)},G=new W({color:S(176,255,157,255)}),U=new W({color:S(255,146,146,255)}),Y=new W({color:S(176,255,157,255)}),H=new W({color:S(230,63,63,255)}),X=new W({color:S(176,255,157,120)}),$=new W({color:S(229,63,63,180)}),j=new W({color:S(27,37,36,255)}),Z=new W({color:S(62,27,27,255)}),Q=[S(255,0,0),S(255,255,0),S(0,255,0)],J=[S(10,10,255),S(10,190,255),S(251,255,0),S(255,38,0)],K=[S(255,255,0),S(255,204,0),S(255,128,0),S(255,0,0)],tt=[S(0,0,0),S(167,4,69,255),S(255,0,0),S(252,252,168,255)],st=new nt({stops:[{color:S(61,61,80,100),offset:0},{color:S(44,44,55,30),offset:1}]}),rt=new W({color:S(148,148,198,255)}),ot=X.getColor().setA(255),at=S(100,100,100),ut=[S(255,241,149,200),S(255,230,65,200),S(238,211,32,200),S(238,176,32,200),S(255,159,13,200),S(254,120,37,200),S(253,91,56,200),S(253,75,84,200),S(254,95,124,200),S(227,56,160,200),S(226,53,134,200),S(216,90,166,200),S(254,151,206,200),S(237,151,254,200),S(243,177,255,200),S(233,133,252,200),S(210,101,230,200),S(178,61,200,200),S(193,81,156,200),S(217,95,145,200)];return bA({isDark:s,highlightColorOffset:S(60,60,60,60),highlightColorOffsetAxisOverlay:S(255,255,255,40),effect:e,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:h,dashboardSplitterFillStyle:r,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:o,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:a,axisTitleFillStyle:l,axisLabelMajorFillStyle:u,axisLabelMinorFillStyle:c,uiTitleFillStyle:d,uiTextFillStyle:f,cursorTextFillStyle:A,axisLineFillStyle:g,axisTickMajorFillStyle:y,axisGridMajorFillStyle:m,axisTickMinorFillStyle:p,axisGridMinorFillStyle:v,cursorGridFillStyle:x,legendBackgroundFillStyle:M,legendBackgroundBorderFillStyle:_,legendButtonDefaultColor:w,resultTableBackgroundFillStyle:C,resultTableBackgroundBorderFillStyle:k,uiBackgroundColor:T,uiBackgroundBorderColor:F,uiStrokeColorContrastHigh:I,uiStrokeColorContrastMedium:P,uiStrokeColorContrastLow:D,dataStrokeColorContrastHigh:B,dataStrokeColorContrastMedium:L,dataStrokeColorContrastLow:R,dataColorPalette:E,dataColorPaletteInverted:[{area:S(190,50,50,100),border:S(210,80,80)}],dataHighlightOverlayColor:z,dataColorPositive:V,dataColorNegative:O,zoomBandChartDefocusOverlayFillStyle:new W({color:S(0,0,0,180)}),zoomBandChartSplitterColor:b("#FBFB5A"),zoomBandChartKnobFillStyle:t=>new it({source:xA(t,"zoomBandChart/darkgold-selector.png"),fitMode:q.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:S(255,255,255,24),overrideThemeProperties:N,treeMapChartParentColor:b("#181E21"),treeMapChartNodeColors:ut,treeMapChartLabelFillStyle:new W({color:S(33,33,33)}),treeMapChartLabelHeaderFillStyle:new W({color:S(250,250,250)})},{positiveTextFillStyle:G,negativeTextFillStyle:U,positiveFillStyle:Y,negativeFillStyle:H,positiveAreaFillStyle:X,negativeAreaFillStyle:$,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:Z,badGoodColorPalette:Q,coldHotColorPalette:J,intensityColorPalette:K,spectrogramColorPalette:tt,bollingerFillStyle:st,bollingerBorderFillStyle:rt,highlightPointColor:t,highlightDataGridColor:ot,unfocusedDataColor:at})})),TA=Hi((()=>{const t=S(255,255,255),i=new W({color:t}),s=!0,e=new Nn({spread:0,blur:9,offset:{x:0,y:0},color:S(105,255,236,40)}),h=new W({color:S(2,21,30)}),r=new nt({stops:[{color:S(19,40,66,150),offset:0},{color:S(0,0,0,150),offset:1}]}),n=new W({color:S(0,5,8,150)}),o=i,a=i,l=i,u=new W({color:S(255,255,220,130)}),c=i,d=i,f=d,A=new W({color:S(20,224,250,255)}),g=i,y=new W({color:S(61,94,110,100)}),m=new W({color:S(61,94,110,255)}),p=new W({color:S(61,94,110,40)}),v=i,x=new W({color:S(0,18,23,255)}),M=i,_=t,w=new W({color:S(0,17,22,240)}),C=i,k=S(0,38,48,220),T=S(0,0,0),F=t,I=S(150,150,150),P=S(19,78,93),D=S(50,50,50),B=S(0,36,48),L=S(200,200,200),R=[S(45,253,253,255),S(44,172,247,255),S(46,100,248,255),S(96,84,199,255),S(184,104,245,255),S(98,160,218,255),S(43,238,245,255),S(38,140,206,255),S(112,96,224,255),S(206,157,255,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),E=t.setA(50),z=S(3,217,194,255),V=S(230,63,63,255),O={mapChartFillStyle:new lt({angle:135,stops:[{color:S(118,248,231,255),offset:0},{color:S(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:MA(s,R,1),pieChartSliceFillStylePalette:_A(s,R,1),funnelChartSliceFillStylePalette:wA(s,R,1),pyramidChartSliceFillStylePalette:wA(s,R,1),rectangleSeriesFillStyle:CA(s,R),gaugeChartBarColor:S(3,217,194,255),gaugeChartGlowColor:S(3,217,194,120)},N=new W({color:S(45,253,253,255)}),G=new W({color:S(255,146,146,255)}),U=new W({color:S(45,253,253,255)}),Y=new W({color:S(230,63,63,255)}),H=new W({color:S(1,190,164,120)}),X=new W({color:S(229,63,63,180)}),$=new W({color:S(1,53,57,255)}),j=new W({color:S(62,27,27,255)}),Z=[S(1,104,119,255),S(0,165,144,255),S(0,246,214,255)],Q=[S(0,87,95,255),S(0,125,124,255),S(1,209,182,255),S(0,255,221,255),S(218,112,112,255),S(172,47,47,255)],J=[S(126,255,253,255),S(50,233,230,255),S(0,196,193,255),S(62,138,178,255),S(139,88,191,255),S(162,55,143,255)],K=[S(13,31,52,255),S(101,50,118,255),S(1,142,172,255),S(2,196,170,255),S(0,255,221,255)],tt=new nt({stops:[{color:S(122,103,254,70),offset:0},{color:S(178,168,255,10),offset:1}]}),st=new W({color:S(122,103,254,255)}),et=H.getColor().setA(255),ht=S(15,83,83),rt=[S(139,252,252,150),S(60,239,239,150),S(2,201,201,150),S(26,159,159,150),S(15,146,187,150),S(65,168,200,150),S(67,146,207,150),S(64,108,209,150),S(189,64,233,150),S(219,84,238,150),S(192,55,212,150),S(212,98,229,150),S(248,110,211,150),S(251,154,225,150),S(251,154,184,150),S(233,105,144,150),S(255,133,170,150),S(249,110,135,150),S(245,72,101,150),S(210,57,84,150)];return bA({isDark:s,highlightColorOffset:S(60,60,60,60),highlightColorOffsetAxisOverlay:S(255,255,255,40),effect:e,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new it({source:xA(t,"themes/turquoiseHexagon.jpg"),fitMode:q.Fill}),dashboardSplitterFillStyle:h,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,axisLabelMinorFillStyle:u,uiTitleFillStyle:c,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:A,axisTickMajorFillStyle:g,axisGridMajorFillStyle:y,axisTickMinorFillStyle:m,axisGridMinorFillStyle:p,cursorGridFillStyle:v,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:_,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:C,uiBackgroundColor:k,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:D,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:L,dataColorPalette:R,dataColorPaletteInverted:[{area:S(170,60,210,100),border:S(210,100,250)}],dataHighlightOverlayColor:E,dataColorPositive:z,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new W({color:S(0,0,0,180)}),zoomBandChartSplitterColor:b("#2BF4F4"),zoomBandChartKnobFillStyle:t=>new it({source:xA(t,"zoomBandChart/turquoise-selector.png"),fitMode:q.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:S(255,255,255,24),overrideThemeProperties:O,treeMapChartParentColor:b("#002329"),treeMapChartNodeColors:rt,treeMapChartLabelFillStyle:new W({color:S(33,33,33)}),treeMapChartLabelHeaderFillStyle:new W({color:S(250,250,250)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:U,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:X,positiveBackgroundFillStyle:$,negativeBackgroundFillStyle:j,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:J,spectrogramColorPalette:K,bollingerFillStyle:tt,bollingerBorderFillStyle:st,highlightPointColor:t,highlightDataGridColor:et,unfocusedDataColor:ht})})),FA=Hi((()=>{const t=!1,i=new Nn({spread:0,blur:6,offset:{x:2,y:-2},color:S(0,0,0,30)}),s=new nt({position:{x:.8,y:.8},extent:ht.farthestCorner,shape:et.ellipse,stops:[{offset:0,color:S(255,255,255)},{offset:1,color:S(255,255,255)}]}),e=new W({color:S(219,227,233,255)}),h=new nt({position:{x:.5,y:.5},extent:ht.farthestCorner,shape:et.circle,stops:[{offset:0,color:S(255,255,255,200)},{offset:1,color:S(240,244,246,200)}]}),r=new nt({position:{x:.5,y:.5},extent:ht.farthestCorner,shape:et.circle,stops:[{offset:0,color:S(255,255,255,255)},{offset:1,color:S(255,255,255,255)}]}),n=new W({color:S(33,43,49)}),o=new W({color:S(33,43,49)}),a=new W({color:S(33,43,49)}),l=new W({color:S(33,43,49,150)}),u=new W({color:S(33,43,49)}),c=u,d=c,f=new lt({angle:45,stops:[{offset:0,color:S(225,225,225)},{offset:1,color:S(225,225,225)}]}),A=new W({color:S(150,150,150,255)}),g=new W({color:S(150,150,150,170)}),y=new W({color:S(150,150,150,150)}),m=new W({color:S(150,150,150,100)}),p=new W({color:S(60,70,80)}),v=new lt({angle:0,stops:[{offset:0,color:S(255,255,255,240)},{offset:1,color:S(255,255,255,240)}]}),x=new W({color:S(168,186,199)}),M=S(255,255,200),_=new W({color:S(255,255,255,240)}),w=new W({color:S(128,146,159,255)}),C=S(255,255,255,255),k=S(168,168,199,255),T=S(168,186,199,255),F=S(168,186,199,255),I=S(168,186,199,255),P=S(168,186,199,255),D=S(100,100,100),B=S(200,200,200),L=[S(28,181,140,255),S(255,132,0,255),S(240,39,39,255),S(86,121,251,255),S(2,181,213,255),S(13,212,158,255),S(22,167,3,255),S(234,103,232,255),S(62,183,179,255),S(140,93,3,255),S(155,158,186,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),R=S(150,150,150,80),E=S(46,182,120,255),z=S(255,66,66,255),V=new _e({thickness:2,fillStyle:new W({color:S(168,186,199,255)})}),O={mapChartFillStyle:new lt({angle:-45,stops:[{color:S(2,181,213,255),offset:0},{color:S(175,243,255,255),offset:1}]}),spiderSeriesFillStyle:MA(t,L,.8),pieChartSliceFillStylePalette:_A(t,L,.8),funnelChartSliceFillStylePalette:wA(t,L,.5),pyramidChartSliceFillStylePalette:wA(t,L,.5),rectangleSeriesFillStyle:CA(t,L),gaugeChartBarColor:S(46,182,120,255),gaugeChartGlowColor:S(46,182,120,120),chartXYSeriesBackgroundStrokeStyle:V,chart3DSeriesBackgroundStrokeStyle:V,polarChartSeriesBackgroundStrokeStyle:V,spiderChartSeriesBackgroundStrokeStyle:V,dataGridTextFillStyle:new W({color:S(0,88,64,255)})},N=new W({color:S(4,146,108,255)}),G=new W({color:S(240,39,39,255)}),U=new W({color:S(28,181,140,255)}),Y=new W({color:S(230,88,88,255)}),H=new W({color:S(28,181,140,180)}),X=new W({color:S(230,88,88,180)}),$=new W({color:S(229,243,228)}),j=new W({color:S(232,225,216)}),Z=[S(193,48,48,255),S(240,234,60,255),S(45,191,55,255)],Q=[S(10,19,255,255),S(15,191,250,255),S(249,255,2,255),S(253,133,0,255),S(255,24,0,255)],J=[S(50,99,213),S(8,179,77),S(255,246,0),S(255,126,0),S(189,36,30)],K=[S(16,64,176),S(8,179,77),S(255,246,0),S(255,126,0),S(168,6,0)],tt=new W({color:S(185,198,207,255)}),st=new nt({stops:[{color:S(151,190,220,10),offset:0},{color:S(151,190,220,50),offset:1}]}),rt=H.getColor().setA(255),ot=S(150,150,150),at=[S(255,243,136,125),S(254,237,99,125),S(255,216,109,125),S(255,172,100,125),S(255,133,101,125),S(255,113,142,125),S(230,103,129,125),S(242,126,219,125),S(255,155,235,125),S(255,181,240,125),S(203,143,255,125),S(208,154,255,125),S(171,188,255,125),S(197,209,255,125),S(171,187,255,125),S(84,167,239,125),S(38,196,214,125),S(38,214,196,125),S(69,225,141,125),S(36,191,88,125)];return bA({isDark:t,highlightColorOffset:S(-60,-60,-60,60),highlightColorOffsetAxisOverlay:S(0,0,0,40),effect:i,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:s,dashboardSplitterFillStyle:e,panelBackgroundFillStyle:h,seriesBackgroundFillStyle:r,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:n,axisTitleFillStyle:o,axisLabelMajorFillStyle:a,axisLabelMinorFillStyle:l,uiTitleFillStyle:u,uiTextFillStyle:c,cursorTextFillStyle:d,axisLineFillStyle:f,axisTickMajorFillStyle:A,axisGridMajorFillStyle:g,axisTickMinorFillStyle:y,axisGridMinorFillStyle:m,cursorGridFillStyle:p,legendBackgroundFillStyle:v,legendBackgroundBorderFillStyle:x,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:_,resultTableBackgroundBorderFillStyle:w,uiBackgroundColor:C,uiBackgroundBorderColor:k,uiStrokeColorContrastHigh:T,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:I,dataStrokeColorContrastHigh:P,dataStrokeColorContrastMedium:D,dataStrokeColorContrastLow:B,dataColorPalette:L,dataColorPaletteInverted:[{area:S(190,50,50,100),border:S(210,80,80)}],dataHighlightOverlayColor:R,dataColorPositive:E,dataColorNegative:z,zoomBandChartDefocusOverlayFillStyle:new W({color:S(255,255,255,180)}),zoomBandChartSplitterColor:b("#505D65"),zoomBandChartKnobFillStyle:t=>new it({source:xA(t,"zoomBandChart/light-selector.png"),fitMode:q.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:S(0,0,0,24),overrideThemeProperties:O,treeMapChartParentColor:b("#D9D9D9"),treeMapChartNodeColors:at,treeMapChartLabelFillStyle:new W({color:S(0,0,0)}),treeMapChartLabelHeaderFillStyle:new W({color:S(33,33,33)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:U,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:X,positiveBackgroundFillStyle:$,negativeBackgroundFillStyle:j,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:J,spectrogramColorPalette:K,bollingerFillStyle:st,bollingerBorderFillStyle:tt,highlightPointColor:S(0,0,0),highlightDataGridColor:rt,unfocusedDataColor:ot})})),IA=Hi((()=>{const t=!1,i=new nt({position:{x:.8,y:.8},extent:ht.farthestCorner,shape:et.ellipse,stops:[{offset:0,color:S(255,255,255)},{offset:1,color:S(255,255,255)}]}),s=new W({color:S(214,236,216,255)}),e=new nt({position:{x:.5,y:.5},extent:ht.farthestCorner,shape:et.circle,stops:[{offset:0,color:S(233,244,231,70)},{offset:1,color:S(233,244,231,200)}]}),h=new nt({position:{x:.5,y:.5},extent:ht.farthestCorner,shape:et.circle,stops:[{offset:0,color:S(255,255,255,255)},{offset:1,color:S(255,255,255,255)}]}),r=new W({color:S(1,61,53)}),n=new W({color:S(1,61,53)}),o=new W({color:S(1,61,53)}),a=new W({color:S(1,61,53,150)}),l=new W({color:S(1,61,53)}),u=l,c=u,d=new lt({angle:45,stops:[{offset:0,color:S(225,225,225)},{offset:1,color:S(225,225,225)}]}),f=new W({color:S(188,211,186,255)}),A=new W({color:S(188,211,186,150)}),g=new W({color:S(188,211,186,50)}),y=new W({color:S(188,211,186,50)}),m=new W({color:S(104,148,111,255)}),p=new lt({angle:0,stops:[{offset:0,color:S(255,255,255,240)},{offset:1,color:S(255,255,255,240)}]}),v=new W({color:S(104,148,111)}),x=S(255,255,200),M=new W({color:S(255,255,255,240)}),_=new W({color:S(104,148,111,255)}),w=S(255,255,255,255),C=S(179,201,183,255),k=S(188,211,186,255),T=S(188,211,186,255),F=S(188,211,186,255),I=S(188,211,186,255),P=S(100,100,100),D=S(200,200,200),B=[S(138,195,142,255),S(193,161,114,255),S(178,99,99,255),S(142,156,210,255),S(154,209,219,255),S(164,212,199,255),S(104,156,97,255),S(196,147,195,255),S(92,190,187,255),S(126,100,51,255),S(136,138,157,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),L=S(150,150,150,80),R=S(46,182,84,255),E=S(232,96,96,255),z=new _e({thickness:2,fillStyle:new W({color:S(188,211,186,255)})}),V={mapChartFillStyle:new lt({angle:-45,stops:[{color:S(118,160,121,255),offset:0},{color:S(174,227,178,255),offset:1}]}),spiderSeriesFillStyle:MA(t,B,.8),pieChartSliceFillStylePalette:_A(t,B,.8),pyramidChartSliceFillStylePalette:wA(t,B,.5),funnelChartSliceFillStylePalette:wA(t,B,.5),rectangleSeriesFillStyle:CA(t,B),gaugeChartBarColor:S(46,182,84,255),gaugeChartGlowColor:S(46,182,84,120),chartXYSeriesBackgroundStrokeStyle:z,chart3DSeriesBackgroundStrokeStyle:z,polarChartSeriesBackgroundStrokeStyle:z,spiderChartSeriesBackgroundStrokeStyle:z,dataGridTextFillStyle:new W({color:S(77,66,21,255)})},O=new W({color:S(93,151,97,255)}),N=new W({color:S(178,99,99,255)}),G=new W({color:S(138,195,142,255)}),U=new W({color:S(178,99,99,255)}),Y=new W({color:S(138,195,142,180)}),H=new W({color:S(178,99,99,180)}),X=new W({color:S(224,240,237)}),$=new W({color:S(251,227,227)}),j=[S(178,99,99,255),S(215,224,111,255),S(80,186,88,255)],Z=[S(62,64,142,255),S(66,131,77,255),S(250,250,135,255),S(202,161,78,255),S(179,53,53,255)],Q=[S(64,86,138),S(123,192,205),S(255,252,149),S(220,155,92),S(184,78,74)],J=[S(64,86,138),S(123,192,205),S(255,252,149),S(220,155,92),S(132,60,57)],K=new W({color:S(185,198,207,255)}),tt=new nt({stops:[{color:S(151,190,220,10),offset:0},{color:S(151,190,220,50),offset:1}]}),st=Y.getColor().setA(255),rt=S(150,150,150),ot=[S(242,239,210,150),S(243,238,183,150),S(210,222,136,150),S(204,217,148,150),S(157,190,124,150),S(143,178,72,150),S(198,147,88,150),S(216,148,71,150),S(229,142,103,150),S(225,174,152,150),S(219,149,203,150),S(216,188,209,150),S(109,198,189,150),S(172,206,202,150),S(164,223,217,150),S(174,215,233,150),S(203,225,235,150),S(220,227,243,150),S(207,213,227,150),S(171,182,209,150)];return bA({isDark:t,highlightColorOffset:S(-60,-60,-60,60),highlightColorOffsetAxisOverlay:S(0,0,0,40),effect:void 0,effectsText:!1,effectsDashboardSplitters:!1,lcjsBackgroundFillStyle:i,dashboardSplitterFillStyle:s,panelBackgroundFillStyle:e,seriesBackgroundFillStyle:h,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:r,axisTitleFillStyle:n,axisLabelMajorFillStyle:o,axisLabelMinorFillStyle:a,uiTitleFillStyle:l,uiTextFillStyle:u,cursorTextFillStyle:c,axisLineFillStyle:d,axisTickMajorFillStyle:f,axisGridMajorFillStyle:A,axisTickMinorFillStyle:g,axisGridMinorFillStyle:y,cursorGridFillStyle:m,legendBackgroundFillStyle:p,legendBackgroundBorderFillStyle:v,legendButtonDefaultColor:x,resultTableBackgroundFillStyle:M,resultTableBackgroundBorderFillStyle:_,uiBackgroundColor:w,uiBackgroundBorderColor:C,uiStrokeColorContrastHigh:k,uiStrokeColorContrastMedium:T,uiStrokeColorContrastLow:F,dataStrokeColorContrastHigh:I,dataStrokeColorContrastMedium:P,dataStrokeColorContrastLow:D,dataColorPalette:B,dataColorPaletteInverted:[{area:S(210,70,70,100),border:S(200,110,110)}],dataHighlightOverlayColor:L,dataColorPositive:R,dataColorNegative:E,zoomBandChartDefocusOverlayFillStyle:new W({color:S(255,255,255,180)}),zoomBandChartSplitterColor:b("#446A40"),zoomBandChartKnobFillStyle:t=>new it({source:xA(t,"zoomBandChart/lightnature-selector.png"),fitMode:q.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:S(0,0,0,24),overrideThemeProperties:V,treeMapChartParentColor:b("#EFF7EE"),treeMapChartNodeColors:ot,treeMapChartLabelFillStyle:new W({color:S(0,0,0)}),treeMapChartLabelHeaderFillStyle:new W({color:S(33,33,33)})},{positiveTextFillStyle:O,negativeTextFillStyle:N,positiveFillStyle:G,negativeFillStyle:U,positiveAreaFillStyle:Y,negativeAreaFillStyle:H,positiveBackgroundFillStyle:X,negativeBackgroundFillStyle:$,badGoodColorPalette:j,coldHotColorPalette:Z,intensityColorPalette:Q,spectrogramColorPalette:J,bollingerFillStyle:tt,bollingerBorderFillStyle:K,highlightPointColor:S(0,0,0),highlightDataGridColor:st,unfocusedDataColor:rt})})),PA=Hi((()=>{const t=S(255,255,255),i=new W({color:t}),s=!0,e=new Nn({spread:1,blur:9,offset:{x:0,y:0},color:S(255,255,255,30)}),h=new W({color:S(6,15,36)}),r=new nt({stops:[{color:S(46,13,87,50),offset:0},{color:S(0,0,0,150),offset:1}]}),n=new W({color:S(0,5,8,150)}),o=i,a=i,l=i,u=new W({color:S(255,255,220,130)}),c=i,d=i,f=d,A=new lt({angle:45,stops:[{offset:0,color:S(241,133,255,255)},{offset:1,color:S(115,207,238,255)}]}),g=i,y=new W({color:S(61,94,110,100)}),m=new W({color:S(61,94,110,255)}),p=new W({color:S(61,94,110,40)}),v=i,x=new W({color:S(0,18,23,255)}),M=i,_=S(115,207,238,255),w=new W({color:S(0,17,22,240)}),C=i,k=S(0,38,48,255),T=S(0,0,0),F=t,I=S(150,150,150),P=S(19,57,93),D=S(50,50,50),B=S(0,17,48),L=S(200,200,200),R=[S(20,211,237,255),S(98,147,252,255),S(164,73,250,255),S(129,117,253,255),S(95,134,252,255),S(22,133,212,255),S(35,200,242,255),S(104,121,233,255),S(137,69,232,255),S(70,72,241,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),E=t.setA(50),z=S(3,217,194,255),V=S(243,21,110,255),O={mapChartFillStyle:new lt({angle:135,stops:[{color:S(118,248,231,255),offset:0},{color:S(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:MA(s,R,.5),pieChartSliceFillStylePalette:_A(s,R,2),funnelChartSliceFillStylePalette:wA(s,R,1),pyramidChartSliceFillStylePalette:wA(s,R,1),rectangleSeriesFillStyle:CA(s,R),gaugeChartBarColor:S(3,217,194,255),gaugeChartGlowColor:S(3,217,194,150)},N=new W({color:S(20,211,237,255)}),G=new W({color:S(253,145,178,255)}),U=new W({color:S(20,211,237,255)}),Y=new W({color:S(239,68,121,255)}),H=new W({color:S(20,211,237,120)}),X=new W({color:S(239,68,121,180)}),$=new W({color:S(1,53,57,255)}),j=new W({color:S(94,19,42,255)}),Z=[S(174,51,132,255),S(204,107,218,255),S(189,215,253,255)],Q=[S(0,63,95,255),S(0,149,255,255),S(0,225,255,255),S(255,154,254,255),S(204,98,170,255),S(139,39,84,255)],J=[S(197,241,255,255),S(70,210,255,255),S(0,164,217,255),S(90,99,222,255),S(138,75,192,255),S(151,27,162,255)],K=[S(13,31,52,255),S(129,54,130,255),S(131,108,176,255),S(7,162,213,255),S(26,247,255,255)],tt=new nt({stops:[{color:S(219,42,235,60),offset:0},{color:S(237,73,252,10),offset:1}]}),st=new W({color:S(237,73,252,255)}),et=H.getColor().setA(255),ht=S(8,70,100),rt=[S(149,230,255,150),S(93,213,243,150),S(20,189,223,150),S(5,151,181,150),S(2,138,198,150),S(2,113,198,150),S(97,148,236,150),S(93,111,230,150),S(151,120,223,150),S(128,87,227,150),S(153,52,230,150),S(179,92,245,150),S(248,110,211,150),S(255,155,228,150),S(251,88,207,150),S(255,0,162,150),S(214,73,177,150),S(209,71,159,150),S(238,101,169,150),S(210,57,134,150)];return bA({isDark:s,highlightColorOffset:S(60,60,60,60),highlightColorOffsetAxisOverlay:S(255,255,255,40),effect:e,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new it({source:xA(t,"themes/cyberSpace.jpg"),fitMode:q.Fill}),dashboardSplitterFillStyle:h,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,axisLabelMinorFillStyle:u,uiTitleFillStyle:c,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:A,axisTickMajorFillStyle:g,axisGridMajorFillStyle:y,axisTickMinorFillStyle:m,axisGridMinorFillStyle:p,cursorGridFillStyle:v,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:_,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:C,uiBackgroundColor:k,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:D,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:L,dataColorPalette:R,dataColorPaletteInverted:[{area:S(41,130,255,100),border:S(45,110,240)}],dataHighlightOverlayColor:E,dataColorPositive:z,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new W({color:S(0,0,0,180)}),zoomBandChartSplitterColor:b("#DB77FF"),zoomBandChartKnobFillStyle:t=>new it({source:xA(t,"zoomBandChart/cyberspace-selector.png"),fitMode:q.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:S(255,255,255,24),overrideThemeProperties:O,treeMapChartParentColor:b("#1E1E3B"),treeMapChartNodeColors:rt,treeMapChartLabelFillStyle:new W({color:S(33,33,33)}),treeMapChartLabelHeaderFillStyle:new W({color:S(250,250,250)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:U,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:X,positiveBackgroundFillStyle:$,negativeBackgroundFillStyle:j,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:J,spectrogramColorPalette:K,bollingerFillStyle:tt,bollingerBorderFillStyle:st,highlightPointColor:t,highlightDataGridColor:et,unfocusedDataColor:ht})})),DA={};Object.defineProperty(DA,"darkGold",{get:kA,enumerable:!0}),Object.defineProperty(DA,"turquoiseHexagon",{get:TA,enumerable:!0}),Object.defineProperty(DA,"light",{get:FA,enumerable:!0}),Object.defineProperty(DA,"lightNature",{get:IA,enumerable:!0}),Object.defineProperty(DA,"cyberSpace",{get:PA,enumerable:!0});const BA=DA,LA=BA.darkGold,RA=t=>({...t,effect:void 0});class EA extends Tl{constructor(t,i,s,e,h,r,n,o,a,l,u){super(t,i,s,e,h,r,n,o,a,l),this.QL=u}setLabelAlignment(t){return this.QL=t,this.xs(),this}getLabelAlignment(){return this.QL}}class zA extends Th{constructor(t,i,s,e,h,r,n){let o;super(t,{Pr:()=>t.JL?t.JL[this.key].max:void 0,Ir:()=>t.JL?t.JL[this.key].min:void 0,Br:()=>{}},r,i,s,{numeric:i.parallelCoordinateAxisNumericTicks||i.yAxisNumericTicks,datetime:i.parallelCoordinateAxisDateTimeTicks||i.yAxisDateTimeTicks,time:i.parallelCoordinateAxisTimeTicks||i.yAxisTimeTicks},{type:"linear"}),this.KL=[],this.Gf=[],this.qL=!0,this.tR=8,this.$i=!1,this.iR=(t,i)=>{this.sR=this.chart.engine.setMouseStyle(Ke.Vertical,this.sR)},this.eR=(t,i)=>{this.chart.engine.restoreMouseStyle(this.sR)},this.hR=(t,i)=>{const s=this.KL.find((i=>i.shape===t));if(!s)return;if(!s.mouseInteractions)return;const e=this.chart.us.Go(i),h=pt({x:e.engineX,y:e.engineY},this.chart.us.ft,this.chart.rR),r=this.chart.rR.y.gi(t.St(),10),n=this.chart.rR.y.gi(t.bt(),-10);h.y<=r?this.nR={selector:s,type:"scaleMin"}:h.y>=n?this.nR={selector:s,type:"scaleMax"}:this.nR={selector:s,type:"move"},mi(i)},this.oR=(t,i,s)=>{if(void 0===this.aR)return;if(!this.nR)return;const{selector:e,type:h}=this.nR;if(!e.mouseInteractions)return;const r=.05*Math.abs(this.Xh-this.Hh);if("move"===h){const t=e.max-e.min,i=this.chart.lR(e.max,this.aR,this).y,h=this.chart.rR.y.gi(i,s.y),r=this.chart.uR(h,this.aR,this);e.max=Jt(r,Math.max(this.Hh,this.Xh),Math.min(this.Hh,this.Xh)+t),e.min=e.max-t}else if("scaleMax"===h){const t=this.chart.lR(e.max,this.aR,this).y,i=this.chart.rR.y.gi(t,s.y),h=this.chart.uR(i,this.aR,this);e.max=Jt(h,e.min+r,Math.max(this.Hh,this.Xh))}else if("scaleMin"===h){const t=this.chart.lR(e.min,this.aR,this).y,i=this.chart.rR.y.gi(t,s.y),h=this.chart.uR(i,this.aR,this);e.min=Jt(h,e.max-r,Math.min(this.Hh,this.Xh))}this.chart.cR(),mi(i)},this.dR=(t,i)=>{const s=this.KL.find((i=>i.shape===t));if(!s)return;if(!s.mouseInteractions)return;const e=this.KL.indexOf(s);e>=0&&this.KL.splice(e,1),s.shape.dispose(),this.chart.cR(),mi(i)},this.fR=t=>{this.qL&&(this.addRangeSelector(),mi(t))},this.chart=t,this.key=e,this.userID=h,this.es=this.chart.us.es.hs(this,{}),this.Ls=n,this.AR=n.Re(t.rR).Le(this.qi.parallelCoordinateAxisBackgroundFillStyle||O).Be(dt).setMouseInteractions(!1),this.Th=n.Ur(t.rR).tr(this.qi.parallelCoordinateAxisTitleFont||this.qi.yAxisTitleFont).Le(this.qi.parallelCoordinateAxisTitleFillStyle||this.qi.yAxisTitleFillStyle).setMouseInteractions(!1).Nr(Qi).Gr(Qi),this.er=this.es.Dg([this.Th]).bs(i.effectsText),this.HD=n.Ye(t.rR).We(i.parallelCoordinateAxisStrokeStyle||i.yAxisStrokeStyle),this.setAnimationsEnabled(!1),this.onIntervalChange(((i,s,e)=>{t.gR(this,s,e)})),this.HD.setMouseEnterEventHandler((()=>{this.qL&&(o=this.chart.engine.setMouseStyle(Ke.Point))})),this.HD.setMouseLeaveEventHandler((()=>{this.chart.engine.restoreMouseStyle(o)})),this.HD.setMouseDoubleClickEventHandler(((t,i)=>this.fR(i)));const a=ve(new Se(((t,i)=>{this.fR(i)})));this.HD.setTouchStartEventHandler(a.onTouchStart),this.HD.setTouchMoveEventHandler(a.onTouchMove),this.HD.setTouchEndEventHandler(a.onTouchEnd),this.setTitle(e)}setBackgroundFillStyle(t){return this.AR.Le(t),this.Ls.xs(),this}getBackgroundFillStyle(){return this.AR.Qh()}setStrokeStyle(t){const i="function"==typeof t?t(this.HD.Su()):t,s=i.getFillStyle();return Z(s)?(this.yR=s.lut,this.chart.mR=!0):this.yR=void 0,this.HD.We(i),this.chart.us.xs(),this}getStrokeStyle(){return this.HD.Su()}setMouseInteractionRangeSelectors(t){return this.qL=t,this}getMouseInteractionRangeSelectors(){return this.qL}setTickStrategy(t,i){return super.Yh(t,i)}getTickStrategy(){return this.ah}addRangeSelector(){const t=this.dr(),i=this.Ls.Re(this.chart.rR).Le(this.qi.parallelCoordinateAxisRangeSelectorFillStyle||this.qi.dataGridScrollBarFillStyle).Be(this.qi.parallelCoordinateAxisRangeSelectorStrokeStyle||this.qi.dataGridScrollBarStrokeStyle).setMouseEnterEventHandler(this.iR).setMouseLeaveEventHandler(this.eR).setMouseDragStartEventHandler(((t,i)=>this.hR(t,i))).setMouseDragEventHandler(((t,i,s,e,h)=>this.oR(t,i,h))).setMouseDoubleClickEventHandler(this.dR).setMouseInteractions(!0),s=ve(new be(((t,i,s)=>this.hR(t,s)),((t,i,s,e,h)=>this.oR(t,h,e)),((t,i,s,e)=>{}),1));i.setTouchStartEventHandler(s.onTouchStart),i.setTouchMoveEventHandler(s.onTouchMove),i.setTouchEndEventHandler(s.onTouchEnd);const e={min:t.min+.25*(t.max-t.min),max:t.max-.25*(t.max-t.min),shape:i,mouseInteractions:!0};this.KL.push(e),this.chart.cR();const h={setInterval:(t,i)=>(e.min=Math.min(t,i),e.max=Math.max(t,i),this.chart.cR(),h),setMouseInteractions:t=>(e.mouseInteractions=t,h),dispose:()=>{const t=this.KL.indexOf(e);return t>=0&&(this.KL.splice(t,1),this.chart.cR()),h}};return h}addCustomTick(){const t=new EA((()=>this.chart.us.xs()),(()=>{const i=this.Gf.indexOf(t);i>=0&&this.Gf.splice(i,1)}),(this.qi.parallelCoordinateAxisNumericTicks||this.qi.yAxisNumericTicks).majorTickStyle.tickStyle,(this.qi.parallelCoordinateAxisNumericTicks||this.qi.yAxisNumericTicks).majorTickStyle.tickLength,(this.qi.parallelCoordinateAxisNumericTicks||this.qi.yAxisNumericTicks).majorTickStyle.gridStrokeStyle,(this.qi.parallelCoordinateAxisNumericTicks||this.qi.yAxisNumericTicks).majorTickStyle.tickPadding,(this.qi.parallelCoordinateAxisNumericTicks||this.qi.yAxisNumericTicks).majorTickStyle.labelRotation,(this.qi.parallelCoordinateAxisNumericTicks||this.qi.yAxisNumericTicks).majorTickStyle.labelFillStyle,(this.qi.parallelCoordinateAxisNumericTicks||this.qi.yAxisNumericTicks).majorTickStyle.labelFont,(t=>this.formatValue(t)),(this.qi.parallelCoordinateAxisNumericTicks||this.qi.yAxisNumericTicks).majorTickStyle.labelAlignment);return this.Gf.push(t),this.chart.us.xs(),t}Vs(){if(!this.ji)return{Ug:0,pR:0,vR:0,Zd:0};const t=!(this.lh.size>0),i=this.Th&&this.Th.kr().length>0&&this.getTitleFillStyle()!==O?this.chart.us.Hg.Yg(this.Th.kr(),this.getTitleFont(),this.getTitleRotation()):{x:0,y:0},s=_h(this.oh)?new Map:Ih(this.oh,Math.min(this.Hh,this.Xh),Math.max(this.Hh,this.Xh),this.Hh,this.Xh,0),e=this.ft;let h=0;s.forEach(((i,s)=>{if(fh(s)){const r=Math.max(...i.map((i=>{if(!As(i,this.Hh,this.Xh))return 0;const h=this.chart.us.Hg.Yg(s.je(i,e),s.$e.labelFont,s.$e.labelRotation);return t||!h.isEstimate?h.x:0})))+s.$e.tickLength+s.$e.tickPadding;h=Math.max(h,r)}}));const r=this.Gf.reduce(((t,i)=>Math.max(t,i.ji?this.chart.us.Hg.Yg(i.ac(i.S),i.bp,i.Wd).x+i.pp+i.Sp:0)),0);h=Math.max(h,r);const n=i.y+this.tR;h=Math.max(h,i.x/2);const o=h;return{Ug:h,pR:n,vR:i.x,Zd:o}}Ee(t,i,s,e){this.aR=e;const h=Math.min(this.Hh,this.Xh),r=Math.max(this.Hh,this.Xh),n=this.chart.rR.y.hi(),o=this.HD.Su(),a=we(o)?o.getThickness()/2:0,l=this.cr({physicalAxisSize:n,parallelAxisIndex:e,halfAxisThickness:a});for(const[t,i]of this.lh)for(const[,e]of i){const i=l.get(e);i&&s.add({positions:[i.positionTicklineStart,i.positionTicklineEnd]},{lineStyle:t.$e.tickStyle})}this.Gf.forEach((t=>{if(!t.ji||t.S<h||t.S>r)return;const n=this.sv(e,a,t.S,t.pp,t.Sp,t.QL);s.add({positions:[n.positionTicklineStart,n.positionTicklineEnd]},{lineStyle:t.mp}),i.add().ze(n.positionLabel).ja(n.alignmentLabel).Le(t.dm).tr(t.bp).vr(t.ac(t.S)).ir(t.Wd).setMouseInteractions(t.Wo)})),this.HD.Xe({x:e,y:0}).He({x:e,y:1}),this.Th.ze({x:e,y:this.chart.rR.y.gi(0,-(a+this.tR))}).ir(this.getTitleRotation()).ja({x:0,y:1});const u=0===e?e:this.chart.rR.x.gi(e,-1.2*t.Ug);this.AR.ze({x:u,y:0}).tt({x:e-u,y:1});const c=this.chart.rR.Gi();this.KL.forEach((t=>{const i=this.chart.lR(t.min,e,this),s=this.chart.lR(t.max,e,this),h={x:e-10*c.x*.5,y:i.y},r=e+10*c.x*.5,n=s.y;t.shape.ze(h).tt({x:r-h.x,y:n-h.y})}))}W(){this.AR.dispose(),this.Th.dispose(),this.HD.dispose(),this.KL.forEach((t=>t.shape.dispose())),this.KL.length=0,this.hr(),this.mr(),this.$i=!0,this.L.emit("dispose")}isDisposed(){return this.$i}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t)}setMouseInteractions(t){return this.setMouseInteractionRangeSelectors(t),this}br(t,i){return new Fh(i,t,this.Ls,this.chart.rR)}Mr(t,i){const s=t.Rh.$e,e=this.getInterval(),h=this.sv(i.parallelAxisIndex,i.halfAxisThickness,t.S,s.getTickLength(),s.getTickPadding(),2*(t.S-e.start)/(e.end-e.start)-1);return t.hh.ze(h.positionLabel).ja(h.alignmentLabel).ir(s.getLabelRotation()),h}sv(t,i,s,e,h,r){const n=this.chart.rR.gi({x:t,y:(s-this.Hh)/(this.Xh-this.Hh)},{x:0-i,y:0}),o=this.chart.rR.gi(n,{x:-e,y:0});return{positionTicklineStart:n,positionTicklineEnd:o,positionLabel:this.chart.rR.gi(o,{x:-h,y:0}),alignmentLabel:{x:1,y:r}}}Rr(t,i){return fe(t,i,this.ft)}zr(t,i,s){return{min:t,max:i}}}class VA extends Iu{constructor(t,i,s,e,h){super(t,i,s,e),this.ws="Parallel Coordinate Series",this.SR=!1,this.oe=t;const r=void 0!==(null==h?void 0:h.automaticColorIndex)?h.automaticColorIndex:this.oe.getSeries().length;this.bR=Ri(this.qi.parallelCoordinateChartSeriesColor,r)||(()=>{const t=Ri(this.qi.lineSeriesStrokeStyle,r).getFillStyle();return(Y(t)?t.getColor():void 0)||S(255,255,0)})(),this.onVisibleStateChanged((()=>{this.oe.xR()})),this.onDispose((()=>{this.oe.xR()})),this.setHighlightOnHover(!1)}setData(t){const i=void 0!==this.MR;return this.MR=this.oe._R(t),i&&this.oe.wR(),this}getData(){return this.MR}setColor(t){const i="function"==typeof t?t(this.bR):t;return i===this.bR||(this.bR=i,this.oe.us.xs(),this.oe.CR(this)),this}getColor(){return this.bR}fv(){return this.getAutoScrollingEnabled()}wv(){}Ee(){}Fp(){}styleLegendEntry(t,i=!1){Pi(t,this.qi,i,{fill:new W({color:this.bR})})}$y(){return super.$y()&&!this.SR}}class OA extends $l{constructor(t,i,s,e,h,r,n){var o,a;super(t,i,s,i.zy("parallelAxisChart bg",0),e,i.us.qi.parallelCoordinateChartBackgroundFillStyle||i.us.qi.chartXYBackgroundFillStyle,i.us.qi.parallelCoordinateChartBackgroundStrokeStyle||i.us.qi.chartXYBackgroundStrokeStyle,i.us.qi.parallelCoordinateChartTitleFont||i.us.qi.chartXYTitleFont,i.us.qi.parallelCoordinateChartTitleFillStyle||i.us.qi.chartXYTitleFillStyle,r),this.axes=[],this.kR=!0,this.TR=Zi(),this.FR=new Map,this.IR=this.qi.parallelCoordinateChartSeriesColorUnselected||S(255,255,255,30),this.PR=f({resolution:32}),this.DR=!0,this.mR=!1,this.BR=!1,this.LR=!0,this.RR=!1,this.ER=!1,this.zR=!1,this.VR=!1,this.Cn=(t,i,s,e,h)=>{this.rR.tt(e,h)},this.wh.vr("Parallel Coordinate Chart"),this.us.Qn(Yo.Rf),this.rR=this.xy.d2({scaleXYConstructor:ee}).Vi(0,1),this.Ey(h,this.rR),this.Hv=this.vy.Re(this.rR).ze({x:0,y:0}).tt({x:0,y:1}).Le(this.qi.parallelCoordinateChartSeriesBackgroundFillStyle||this.qi.chartXYSeriesBackgroundFillStyle).Be(dt).setMouseInteractions(!0),this.Xv=this.vy.Re(this.rR).ze({x:0,y:0}).tt({x:0,y:1}).Le(O).Be(this.qi.parallelCoordinateChartSeriesBackgroundStrokeStyle||this.qi.chartXYBackgroundStrokeStyle).setMouseInteractions(!1),super.Yv(this.Hv,this.Xv),this.setSeriesBackgroundEffect(!1),this.OR=new _e({thickness:null!==(o=this.qi.parallelCoordinateChartSeriesLineThickness)&&void 0!==o?o:2,fillStyle:new H}),this.NR=new _e({thickness:null!==(a=this.qi.parallelCoordinateChartSeriesLineThickness)&&void 0!==a?a:2,fillStyle:new W({color:this.qi.parallelCoordinateChartSeriesColorUnselected})}),this.GR=this.TR.xt(this.vy.Zg(this.rR)).We(this.OR),this.GR.Cu=5e4,this.UR=this.vy.Zg(this.rR).We(this.qi.parallelCoordinateChartPointedSeriesLineStyle||Ri(this.qi.lineSeriesStrokeStyle,0)).setMouseInteractions(!1),this.WR=new Pl((()=>this.vy.Ur(this.rR))),this.YR=new Il((()=>this.vy.Zg(this.rR).setMouseInteractions(!1)),((t,i,s)=>(t.Vt().We(s.lineStyle),i.map((({positions:i})=>t.jr().Jg(i[0],i[1]))))));const l=i.ep(),u=qt(n?n.cursorBuilder:void 0,ll);this.hp=Ya(this,l,u.wm(l,this.uiScale,this.uiScale,Zt,this.qi),this,"show-nearest",NA,(()=>0)),this.onResize(this.Cn)}setCursor(t){return this.hp.setCursor(t),this}getCursor(){return this.hp.getCursor()}setCursorMode(t){return this.hp.setCursorMode(t),this}getCursorMode(){return this.hp.getCursorMode()}setCustomCursor(t){return this.hp.setCustomCursor(t?(i,s,e)=>t(this,i,s,e):void 0),this}onCursorTargetChanged(t){return this.hp.onCursorTargetChanged(((i,s,e)=>t(this,i,s,e)))}offCursorTargetChanged(t){this.hp.offCursorTargetChanged(t)}setCursorFormatting(t){return this.hp.setCursorFormatting(t),this}getCursorFormatting(){return this.hp.getCursorFormatting()}addCursor(t=ll){const i=this.wy(),s=t.wm(i,this.uiScale,this.uiScale,this.Sy(i),this.qi);return this.By(s),s}onSelectedSeriesChanged(t){return this.L.on("selectedSeriesChanged",t)}offSelectedSeriesChanged(t){return this.L.off(t)}setMouseInteractionRangeSelectors(t){return this.DR=t,this.forEachAxis((t=>t.setMouseInteractionRangeSelectors(this.DR))),this}getMouseInteractionRangeSelectors(){return this.DR}setMouseInteractions(t){return this.setMouseInteractionRangeSelectors(t),this}setUnselectedSeriesColor(t){return this.IR="function"==typeof t?t(this.IR):t,this.NR=new _e({thickness:this.getSeriesStrokeThickness(),fillStyle:new W({color:this.IR})}),this.us.xs(),this}getUnselectedSeriesColor(){return this.IR}setPointedSeriesStrokeStyle(t){return this.UR.We(t),this.us.xs(),this}getPointedSeriesStrokeStyle(){return this.UR.Su()}setSpline(t,i){return t?this.PR.M({resolution:void 0!==(null==i?void 0:i.resolution)?i.resolution:32}):this.PR.M(void 0),this.us.xs(),this}setAxes(t){const i=Array.isArray(t)?t.map(((t,i)=>({key:t,id:i}))):"object"==typeof t?Object.entries(t).map(((t,i)=>({key:t[0],id:t[1]}))):void 0;if(!i)return this;const s=i.filter((t=>void 0===this.axes.find((i=>i.key===t.key)))),e=this.axes.filter((t=>void 0===i.find((i=>t.key===i.key))));return s.forEach((t=>{const i=this.HR(),s=new zA(this,this.qi,!this.gh,t.key,t.id,i,this.vy);s.setMouseInteractionRangeSelectors(this.DR);const e=s.onVisibleStateChanged((t=>{this.LR=!0}));s.onDispose((()=>{s.offVisibleStateChanged(e)})),this.axes.push(s)})),e.forEach((t=>{t.W();const i=this.axes.indexOf(t);i>=0&&this.axes.splice(i,1)})),this.axes=i.map((t=>this.axes.find((i=>i.key===t.key)))),this.LR=!0,this.JL=void 0,this.us.xs(),this}getAxis(t){const i=this.XR(t);if(!i)throw new Error(`ParallelAxisChart.getAxis | no such axis: "${t}". Found: ${this.axes.map((t=>void 0!==t.userID?`${t.key}, ${t.userID}`:t.key)).join(", ")}`);return i}hasAxis(t){return void 0!==this.XR(t)}addSeries(t){const i=new VA(this,this.Uv,this.qi,this.us.es,t);return super.$v(i),this.ER=!0,this.JL=void 0,this.us.xs(),i}setSeriesStrokeThickness(t){return this.OR=this.OR.setThickness(t),this.NR=this.NR.setThickness(t),this.GR.We(this.OR),this.us.xs(),this}getSeriesStrokeThickness(){return this.OR.getThickness()}setLUT(t){return this.Jd=t,this.Jd&&0===this.Jd.lut.units.length&&(this.Jd.lut=this.Jd.lut.setUnits(this.Jd.axis.getTitle())),this.VR=!0,this.us.xs(),this}Ee(t){super.Ee(t);const i=this.axes.filter((t=>t.getVisible()));this.rR.zi(0,i.length-1),this.Hv.tt({x:i.length-1,y:1}),this.Xv.tt({x:i.length-1,y:1});const s=void 0===this.JL;if(!this.JL){const t={};i.forEach((i=>{t[i.key]={min:es,max:hs}})),this.Nv.forEach((i=>{i.MR&&Object.entries(i.MR).forEach((([i,s])=>{const e=t[i];e&&!Number.isNaN(s)&&(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}))})),this.JL=t}if(this.zR||this.RR||this.ER){const t=i.map(((t,i)=>t.KL));this.Nv.forEach((s=>{const e=s.MR;if(!e)return;let h=!1;for(let s=0;s<i.length;s+=1){const r=i[s],n=t[s],o=void 0!==n.find((t=>As(e[r.key],t.min,t.max)));if(n.length>0&&!o){h=!0;break}}s.SR=h}));const s=this.Nv.filter((t=>!t.SR));this.L.emit("selectedSeriesChanged",this,s)}for(const t of this.Nv)t.wv();for(const t of this.Nv)t.Ee();super.Ry();const e=!this.Hv.getIsUnderMouse()&&void 0===this.Nv.find((t=>t.getIsUnderMouse()))||this.us.$R()?void 0:this.jR();if(this.hp.Ee(!1,this.Nv,void 0,{explicitTarget:e,afterCursorPointedAt:t=>{const i=this.us.jn();if(t.length>1&&i){const t=this.us.Go(i);this.hp.jy.xm({x:t.engineX,y:t.engineY},this.us.ft)}}}),Ga.Hy(this.wh,this.Vy),i.length>=2){const t=this.WR.Ip(),e=this.YR.Ip(),h=i.map((t=>(t.Lr(),t.Vs())));h.forEach(((s,h)=>i[h].Ee(s,t,e,h))),t.finishPlot(),e.finishPlot();const r=Ga.Yy(this.wh,this.Vy);this.rR.Ri([this.Xt.left+this.Fa.left+h[0].Zd,this.Xt.right+this.Fa.right+h[h.length-1].vR/2]),this.rR.Ei([this.Xt.bottom+this.Fa.bottom+h.reduce(((t,i)=>Math.max(t,i.pR)),0),this.Xt.top+this.Fa.top+r]),t.finishPlot(),e.finishPlot(),(s||this.mR)&&i.forEach(((t,i)=>{if(!t.yR)return;const s=t.yR.steps.map((s=>({...s,value:this.lR(s.value,i,t).y}))),e=t.yR.setSteps(s);t.HD.We((t=>t.setFillStyle(new j({lookUpProperty:"y",lut:e}))))}));const n=this.LR||this.RR||this.kR||this.PR.o;n&&(this.GR.Vt(),this.TR.Vt(),this.FR.clear(),this.Nv.forEach((t=>{const s=t.MR;if(!t.getVisible()||!s)return;const e=this.ZR(t,s,i,this.GR,this.TR);this.FR.set(t,e),t.ys(e)}))),(n||this.zR||this.VR||this.RR)&&this.QR(this.Nv),!n&&this.ER&&this.Nv.forEach((t=>{if(t.Zi.length>0)return;const s=t.MR;if(!t.getVisible()||!s)return;const e=this.ZR(t,s,i,this.GR,this.TR);this.FR.set(t,e),t.ys(e),this.QR([t])})),this.Nv.find((t=>t.MR&&Object.keys(t.MR).length>0))&&(this.BR=!0)}const h=1===(null==e?void 0:e.length)?e[0]:void 0;(h!==this.JR||this.RR)&&(this.UR.Vt(),h&&h.series.MR?(this.ZR(h.series,h.series.MR,i,this.UR,void 0),this.GR.We(this.NR)):this.GR.We(this.OR));for(const t of this.Nv)t.Fp();this.kR=!1,this.zR=!1,this.LR=!1,this.RR=!1,this.ER=!1,this.VR=!1,this.PR.o=!1,this.mR=!1,this.JR=h}QR(t){const i=this.Jd&&{lut:this.Jd.lut,key:this.Jd.axis.key};t.forEach((t=>{const s=t.MR,e=this.FR.get(t);if(!s||!e)return;let h;if(t.SR)h=this.IR;else if(i){const t=s[i.key];h=i.lut.getColors(t)}else h=t.bR;e.forEach((t=>t.tL(h)))}))}xR(){this.RR=!0,this.us.xs()}wR(){this.BR&&this.us.Qn(Yo.Pf),this.RR=!0,this.us.xs()}XR(t){return this.axes.find((i=>i.key===t))||this.axes.find((i=>i.userID===t))}HR(){return yt.d1({scale1DConstructor:te,dimension:"x"}).K(0,1)}_R(t){if(this.JL=void 0,this.us.xs(),Array.isArray(t)){const i={};return t.forEach(((t,s)=>{var e;if("number"==typeof t){const h=null===(e=this.axes[s])||void 0===e?void 0:e.key;if(!h)throw new Error("ParallelCoordinateSeries Axis count doesnt match supplied data");i[h]=t}else"object"==typeof t&&(i[t.key]=t.value)})),i}if("object"==typeof t)return t;throw new Error("ParallelCoordinateSeries unidentified data format")}gR(t,i,s){this.kR=!0,this.us.xs()}lR(t,i,s){return{x:i,y:(t-s.ft.X)/(s.ft.$-s.ft.X)}}uR(t,i,s){const e=s.getInterval();return e.start+t*(e.end-e.start)}CR(t){this.VR=!0,this.us.xs()}cR(){this.zR=!0,this.us.xs()}getSeries(){return this.Nv}nf(){const t=[],i=this.Jd;return i&&t.push({Kd:()=>({lut:i.lut,lookUpProperty:void 0}),attach:(t,s)=>{t.setText("Value based color").setOn(!0),t.onSwitch(((t,s)=>{this.setLUT(s?i:void 0)}))}}),t}getMinimumSize(){return{x:200,y:200}}forEachAxis(t){return this.axes.slice().forEach((i=>t(i))),this}addLegendBox(t,i){const s=super.addLegendBox(t,i);return void 0!==i&&i!==this.uiScale||void 0!==t&&"vertical"!==t.getAlignment()||s.setOrigin(qe.RightCenter).setPosition({x:this.uiScale.x.ct(this.uiScale.x.ei()-this.Fa.right),y:mt(this.Mg.y.ct(this.Mg.y.si()+this.Mg.y.hi()/2),this.Mg.y,this.uiScale.y)}),s}ZR(t,i,s,e,h){const r=[];let n;for(let o=0;o<s.length;o+=1){const a=s[o],l=i[a.key],u=this.lR(l,o,a),c=this.PR._();if(c){if(void 0!==n){const i=c.resolution;let s;for(let o=0;o<=i;o+=1){const a=(o-1)/i,l=o/i,c=l<.5?4*l*l*l:1-(-2*l+2)**3/2;if(void 0!==s){const i={x:n.x+a*(u.x-n.x),y:n.y+s*(u.y-n.y)},o={x:n.x+l*(u.x-n.x),y:n.y+c*(u.y-n.y)},d=e.jr();h&&h.zt(d,t),r.push(d),d.Jg(i,o)}s=c}}}else if(void 0!==n){const i=e.jr();h&&h.zt(i,t),r.push(i),i.Jg(n,u)}n=u}return r}jR(){const t=this.getCursorMode(),i=this.us.jn();if(t&&i){const s=this.us.Go(i),e=pt({x:s.engineX,y:s.engineY},this.us.ft,this.rR),h=Math.round(e.x),r=this.axes.filter((t=>t.getVisible()))[h],n=r.key,o=Gi(this.Nv.map((t=>{if(!t.MR||!t.$y())return;const i=t.MR[n],s=this.lR(i,h,r);return{cursorPosition:{pointMarker:s,pointMarkerScale:this.rR,resultTable:s,resultTableScale:this.rR},value:i,series:t,axis:r}})));return"show-nearest"===t?[o.sort(((t,i)=>Math.abs(t.cursorPosition.pointMarker.y-e.y)-Math.abs(i.cursorPosition.pointMarker.y-e.y)))[0]]:("show-nearest-interpolated"!==t&&"show-all-interpolated"!==t||Yt.console.warn('LightningChart JS ParallelCoordinateChart does not support "interpolated" cursor modes.'),o)}}}const NA=(t,i,s)=>{if(s.length>1)return[[s[0].axis.getTitle()],...Gi(s.map((t=>{const i=t.series.getData(),s=i?i[t.axis.key]:void 0;if(void 0!==s)return Wa(t,[[t.series,"",ce(t.axis.formatValue(s),t.axis)]])})).flat())];const e=s[0],h=[[e.series]];return t.axes.forEach((i=>{const s=e.series.getData();if(!s)return;const r=s[i.key];if(void 0===r)return;const n=t.axes.filter((t=>t.getVisible()))[e.cursorPosition.pointMarker.x]===i?{weight:"bold"}:{};h.push([{text:i.getTitle(),font:n},"",{text:i.formatValue(r),font:n}])})),h},GA=(t,i)=>i?t.x:t.y,UA=(t,i,s,e)=>1===i&&e===(s?t.columnIndex:t.rowIndex)||-1===i&&e===(s?t.columnIndex+t.columnSpan:t.rowIndex+t.rowSpan),WA=(t,i,s,e,h,r)=>{const n=i.length,o=Math.sign(e),a=[],l=i.reduce(((t,i)=>t+i));for(let t=1;t<=n-1;t+=1)a.push(GA(h,r)*i.slice(0,t).reduce(((t,i)=>t+i),0)/l);const u=a.map((t=>0));let c=a[s-1]+e;for(let i=s;i>0&&i<n;i+=o){const e=t.filter((t=>UA(t,o,r,i))).reduce(((t,i)=>Math.max(t,GA(i.panel.getMinimumSize()||{x:0,y:0},r))),20),n=a[i-1];if(1===o&&c>GA(h,r)-e||-1===o&&c<0+e){u.fill(0);break}if(i!==s&&(1===o?n>c:n<c))break;u[i-1]=c-n,c+=e*o}const d=u.map(((t,i)=>a[i]+t)),f=d.map(((t,i)=>(t-(i>0?d[i-1]:0))/GA(h,r)));return f.push(1-f.reduce(((t,i)=>t+i),0)),f};class YA{constructor(t,i,e,h,r){this.coordsRelative="relative",this.coordsClient="client",this.$i=!1,this.uP=new Array,this.L=new s,this.KR=[],this.ly=[],this.qR=void 0,this.tE=!0,this.iE=!0,this.sE=!0,this.yy=!1,this.eE=!0,this.hE=()=>{this.eE=!0,this.us.xs()},this.rE=[],this.onInViewChange=t=>this.L.on("inViewChange",t),this.offInViewChange=t=>this.L.off(t,"inViewChange"),this.nE=t=>{for(let i=0;i<this.uP.length;i+=1)if(this.uP[i].panel===t){this.uP.splice(i,1),this.tE=!0,this.us.xs();break}},this.oE=t=>{const i=this.KR.indexOf(t);i>=0&&this.KR.splice(i,1)},this.by=t=>{const i=this.ly.indexOf(t);i>=0&&this.ly.splice(i,1)},this.aE=(t,i,s,e,h)=>{if(this.lE(i,s,e,h)){const r={panel:t,columnIndex:i,rowIndex:s,columnSpan:e,rowSpan:h};return this.uP.push(r),this.uE(r),this.tE=!0,t}throw new Et("Out of dashboard range.")},this.cE=i.numberOfRows,this.dE=i.numberOfColumns,this.wA=t,this.fE=i,this.AE=h;const n=this.dE*this.cE;this.gE={x:new df(new Array(this.dE).fill(1)),y:new df(new Array(this.cE).fill(1))},this.qi=e.qi,this.yE=this.qi.dashboardSplitterStyle,this.gh=!1!==(null==i?void 0:i.animationsEnabled),this.mE=cf(e,n),this.pE=e.JF("dashboard splitters",500001),this.xM=()=>this.mE.QF(),this.ky=this.mE.KF(),this.es=e.es.hs(this,{vE:{}}),this.es.vE.bs(this.qi.effectsDashboardSplitters);const o=e.ni();this.uiScale=yt.d2({scaleXYConstructor:ee}).zi(0,100).Vi(0,100).tt(o),this.Mg=yt.d2({scaleXYConstructor:ee}).zi(0,this.uiScale.x.getCellSize()).Vi(0,this.uiScale.y.getCellSize()).tt(o),this.SE=e.bE.bind(e),this.xE=e.ME.bind(e),this._E=e.wE.bind(e),this.CE=e.kE.bind(e),this.fo=e.fo.bind(e),this.yo=e.yo.bind(e),this.engine=e.My,this.us=e._y,e.Ro((()=>this.hE())),e.xs();const a=e.Vo((t=>{this.yy=t,this.L.emit("inViewChange",this,t)}));this.Dy=e.Oo.bind(e,a),this.TE(),this.setAnimationsEnabled(this.gh);const l=("resize",{on:(u=this.L).on.bind(u,"resize"),off:u.off.bind(u)});var u;this.createChartXY=t=>{const i=HA(t,this.fE,this.gh);return this.aE(new nd(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createSpiderChart=t=>{const i=HA(t,this.fE,this.gh);return this.aE(new lf(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPolarChart=t=>{const i=HA(t,this.fE,this.gh);return this.aE(new bd(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPieChart=t=>{const i=HA(t,this.fE,this.gh),s=i&&i.type?i.type:_l;return this.aE(new s(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,l,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createGaugeChart=t=>{const i=HA(t,this.fE,this.gh);return this.aE(new mA(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,l,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createFunnelChart=t=>{const i=HA(t,this.fE,this.gh),s=i&&i.type?i.type:Bd;return this.aE(new s(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,l,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPyramidChart=t=>{const i=HA(t,this.fE,this.gh),s=t&&t.type?t.type:Xd;return this.aE(new s(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,l,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createUIPanel=t=>{const i=HA(t,this.fE,this.gh);return this.aE(new Va(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createLegendBoxPanel=t=>{const i=HA(t,this.fE,this.gh);return this.aE(new lu(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createZoomBandChart=t=>{const i=HA(t,this.fE,this.gh);return this.aE(new fd(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createMapChart=t=>{const i=HA(t,this.fE,this.gh);return this.aE(new mu(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,i,l),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createChart3D=t=>{const i=HA(t,this.fE,this.gh),s=new nu(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,l,i);return this.aE(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createDataGrid=t=>{const i=HA(t,this.fE,this.gh),s=new Rf(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,l);return this.aE(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createBarChart=t=>{const i=HA(t,this.fE,this.gh),s=new Xf(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,l,i);return this.aE(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createParallelCoordinateChart=t=>{const i=HA(t,this.fE,this.gh),s=new OA(this.wA,this.mE.qF(this.FE(t.columnIndex,t.rowIndex)),this.IE(i,this.gE),this.nE,r,l,i);return this.aE(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)}}FE(t,i){return t+i*this.dE}IE(t,i){return{d1:s=>new s.scale1DConstructor("x"===s.dimension?t.columnIndex:t.rowIndex,"x"===s.dimension?t.columnSpan:t.rowSpan,"x"===s.dimension?this.dE:this.cE,"x"===s.dimension?i.x:i.y),d2:s=>(new s.scaleXYConstructor).ut({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.dE,y:this.cE},i),d3:()=>new At({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.dE,y:this.cE},i)}}setWidth(t){return t instanceof Array||(t=[t,t]),this.SE(t[0]),this.xE(t[1]),this}setHeight(t){return t instanceof Array||(t=[t,t]),this._E(t[0]),this.CE(t[1]),this}getWidth(){return this.fo()}getHeight(){return this.yo()}setBackgroundFillStyle(t){return this.engine.setBackgroundFillStyle(t),this.pE.xs(),this}getBackgroundFillStyle(){return this.engine.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.engine.setBackgroundStrokeStyle(t),this.pE.xs(),this}getBackgroundStrokeStyle(){return this.engine.getBackgroundStrokeStyle()}getTheme(){return this.qi}setSplitterStyle(t){const i=this.yE;return this.yE="function"==typeof t?t(this.yE):t,this.PE(i),this}getSplitterStyle(){return this.yE}setSplitterEffect(t){return this.es.vE.bs(t),this.us.xs(),this}getSplitterEffect(){return this.es.vE.Ms()}setAnimationHighlight(t){return this.sE=t,this.rE.forEach((i=>this.us.ls.ks(i.line,t))),this}getAnimationHighlight(){return this.sE}PE(t){for(const t of this.rE)t.line.We(this.yE);this.TE()}setColumnWidth(t,i){const s=this.gE.x._();return t>=0&&t<s.length&&(s[t]=i,this.gE.x.M(s)),this.hE(),this}getColumnWidth(t){const i=this.gE.x._();if(t>=i.length)throw new Et("Column index is out of dashboard range.");return i[t]}setRowHeight(t,i){const s=this.gE.y._();return t>=0&&t<s.length&&(s[Math.abs(s.length-1-t)]=i,this.gE.y.M(s)),this.hE(),this}getRowHeight(t){const i=this.gE.y._();if(t>=i.length)throw new Et("Row index is out of dashboard range.");return i[Math.abs(i.length-1-t)]}getSizePixels(){return this.Mg.getInnerIntervalPixels()}onResize(t){return this.L.on("resize",t)}offResize(t){return this.L.off(t,"resize")}DE(t,i,s){if(s&&Math.abs(t.x)>0)this.BE(i,t.x);else{if(s||!(Math.abs(t.y)>0))return;this.LE(i,t.y)}for(const t of this.uP)t.panel.J();this.hE()}LE(t,i){const s=WA(this.uP,this.gE.y._(),t,i,this.Mg.ni(),!1);this.gE.y.M(s),this.hE()}BE(t,i){const s=WA(this.uP,this.gE.x._(),t,i,this.Mg.ni(),!0);this.gE.x.M(s),this.hE()}RE(){this.rE.forEach((t=>t.line.dispose())),this.rE.length=0;for(let t=1;t<=this.dE-1;t+=1)for(let i=0;i<=this.cE-1;i+=1)if(void 0!==this.uP.find((s=>As(i,s.rowIndex,s.rowIndex+s.rowSpan-1)&&(t===s.columnIndex||t===s.columnIndex+s.columnSpan)))){const s=ve(new be((()=>{this.EE(t)}),((i,s,e,h,r)=>{this.DE(h,t,!0),mi(r)}),(()=>{this.zE(t)}))),e=this.pE.Ye(this.Mg).We(this.yE).setMouseEnterEventHandler((()=>{this.EE(t)})).setMouseLeaveEventHandler((()=>{this.zE(t)})).setMouseDragEventHandler(((i,s,e,h,r)=>{this.DE(r,t,!0),mi(s)})).setTouchStartEventHandler(s.onTouchStart).setTouchMoveEventHandler(s.onTouchMove).setTouchEndEventHandler(s.onTouchEnd);this.us.ls.os(e,(t=>e.cs(t)),{animationEnabled:this.sE}),this.rE.push({row:i,column:t,line:e,alignment:"vertical"})}for(let t=1;t<=this.cE-1;t+=1)for(let i=0;i<=this.dE-1;i+=1)if(void 0!==this.uP.find((s=>As(i,s.columnIndex,s.columnIndex+s.columnSpan-1)&&(t===s.rowIndex||t===s.rowIndex+s.rowSpan)))){const s=ve(new be((()=>{this.VE(t)}),((i,s,e,h,r)=>{this.DE(h,t,!1),mi(r)}),(()=>{this.OE(t)}))),e=this.pE.Ye(this.Mg).We(this.yE).setMouseEnterEventHandler((()=>{this.VE(t)})).setMouseLeaveEventHandler((()=>{this.OE(t)})).setMouseDragEventHandler(((i,s,e,h,r)=>{this.DE(r,t,!1),mi(s)})).setTouchStartEventHandler(s.onTouchStart).setTouchMoveEventHandler(s.onTouchMove).setTouchEndEventHandler(s.onTouchEnd);this.us.ls.os(e,(t=>e.cs(t)),{animationEnabled:this.sE}),this.rE.push({row:t,column:i,line:e,alignment:"horizontal"})}this.es.vE.As(this.rE.map((t=>t.line)))}NE(){const t=this.Mg.ni(),i=this.gE.x._(),s=i.reduce(((t,i)=>t+i)),e=this.gE.y._(),h=e.reduce(((t,i)=>t+i));this.rE.forEach((r=>{if("vertical"===r.alignment){const o=n(t.x*i.slice(0,r.column).reduce(((t,i)=>t+i),0)/s,t.y*e.slice(0,r.row).reduce(((t,i)=>t+i),0)/h),a=n(o.x,t.y*e.slice(0,r.row+1).reduce(((t,i)=>t+i),0)/h);r.line.Xe(o).He(a)}else{const o=n(t.x*i.slice(0,r.column).reduce(((t,i)=>t+i),0)/s,t.y*e.slice(0,r.row).reduce(((t,i)=>t+i),0)/h),a=n(t.x*i.slice(0,r.column+1).reduce(((t,i)=>t+i),0)/s,o.y);r.line.Xe(o).He(a)}}))}EE(t){this.rE.forEach((i=>{"vertical"===i.alignment&&i.column===t&&(this.us.ls.Cs(i.line,1),this.pE.GE(i.line))})),this.qR=this.engine.setMouseStyle(Ke.ResizeColumn),this.us.xs()}VE(t){this.rE.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&(this.us.ls.Cs(i.line,1),this.pE.GE(i.line))})),this.qR=this.engine.setMouseStyle(Ke.ResizeRow),this.us.xs()}zE(t){this.rE.forEach((i=>{"vertical"===i.alignment&&i.column===t&&this.us.ls.Cs(i.line,0)})),this.engine.restoreMouseStyle(this.qR),this.us.xs()}OE(t){this.rE.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&this.us.ls.Cs(i.line,0)})),this.engine.restoreMouseStyle(this.qR),this.us.xs()}setAnimationsEnabled(t){return this.gh=t,this.getCells().filter((t=>t.panel instanceof Na)).forEach((i=>i.panel.setAnimationsEnabled(t))),this.setAnimationHighlight(this.gh),this}getAnimationsEnabled(){return this.gh}getCells(){return this.uP.slice()}dispose(){return this.$i||(this.Dy&&this.Dy(),this.uP.slice().forEach((t=>t.panel.dispose())),this.KR.slice().forEach((t=>t.dispose())),this.ly.slice().forEach((t=>t.dispose())),this.$i=!0,this.AE(),this.L.emit("dispose",this)),this}isDisposed(){return this.$i}onDispose(t){return this.L.on("dispose",t)}offDispose(t){return this.L.off(t,"dispose")}getIsInView(){return this.yy}saveToFile(t,i,s){return Da(this.engine,t,i,s),this}UE(t){if(this.eE){const t=this.us.ft.ni(),i=t.x,s=t.y;this.uiScale.tt(i,s),this.Mg.tt(i,s);const e=this.uiScale.getInnerIntervalPixels();this.Mg.zi(0,e.x).Vi(0,e.y),this.L.emit("resize",this,e.x,e.y,i,s),this.iE=!0}this.tE&&(this.RE(),this.tE=!1,this.iE=!0),this.iE&&(this.NE(),this.iE=!1);for(const i of this.uP)i.panel.Ee(t);return this.KR.forEach((t=>t.Vs())),this.KR.forEach((t=>t.Ee())),this.ly.forEach((t=>t.Vs())),this.ly.forEach((t=>t.Ee())),this.eE=!1,this}Z(){for(const t of this.uP)t.panel.Z();return this.Mg.x.Z(),this.Mg.y.Z(),this.uiScale.x.Z(),this.uiScale.y.Z(),this}J(){for(const t of this.uP)t.panel.J();return this.Mg.x.J(),this.Mg.y.J(),this.uiScale.x.J(),this.uiScale.y.J(),this}translateCoordinate(t,i,s){return Ra(t,i,s,this.Mg,this.us)}addUIElement(t=xo,i=this.uiScale){i=La(i,this.Mg);const s=Ba(t,this.xM(),this.uiScale,i,this.oE,this.qi);return this.KR.push(s),s}addLegendBox(t=Lo,i=this.uiScale){i=La(i,this.Mg);const s=Ba(t,this.ky,this.uiScale,i,this.by,this.qi);return s.setDraggingMode(Gt.notDraggable),this.ly.push(s),s}getLegendBoxes(){return this.ly}lE(t,i,s,e){return i>=0&&t>=0&&i+e<=this.cE&&t+s<=this.dE}uE(t){const i=this.yE,s=i===dt?0:i.getThickness()/2,e={left:t.columnIndex>0?s:0,top:t.rowIndex<this.cE-1?s:0,right:t.columnIndex<this.dE-1?s:0,bottom:t.rowIndex>0?s:0};t.panel.Nr(e)}TE(){this.uiScale.x.ii([0,0]),this.uiScale.y.ii([0,0]),this.Mg.x.ii([0,0]),this.Mg.y.ii([0,0]);for(const t of this.uP)this.uE(t);this.us.xs()}}const HA=(t,i,s)=>{const e={...t,columnSpan:t.columnSpan||1,rowSpan:t.rowSpan||1,animationsEnabled:void 0!==t.animationsEnabled?t.animationsEnabled:s};var h,r;return e.rowIndex=(h=e.rowIndex,r=e.rowSpan,i.numberOfRows-(h+r)),e},XA=(t,i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAsa2NhQlgAACxranVtYgAAAB5qdW1kYzJwYQARABCAAACqADibcQNjMnBhAAAALEVqdW1iAAAAR2p1bWRjMm1hABEAEIAAAKoAOJtxA3Vybjp1dWlkOjlmZDBkZjkzLTVmMDMtNDczYi1hZThhLTFhNDM4NmMzNmJhYQAAAAGzanVtYgAAAClqdW1kYzJhcwARABCAAACqADibcQNjMnBhLmFzc2VydGlvbnMAAAAA12p1bWIAAAAmanVtZGNib3IAEQAQgAAAqgA4m3EDYzJwYS5hY3Rpb25zAAAAAKljYm9yoWdhY3Rpb25zgaNmYWN0aW9ua2MycGEuZWRpdGVkbXNvZnR3YXJlQWdlbnRtQWRvYmUgRmlyZWZseXFkaWdpdGFsU291cmNlVHlwZXhTaHR0cDovL2N2LmlwdGMub3JnL25ld3Njb2Rlcy9kaWdpdGFsc291cmNldHlwZS9jb21wb3NpdGVXaXRoVHJhaW5lZEFsZ29yaXRobWljTWVkaWEAAACranVtYgAAAChqdW1kY2JvcgARABCAAACqADibcQNjMnBhLmhhc2guZGF0YQAAAAB7Y2JvcqVqZXhjbHVzaW9uc4GiZXN0YXJ0GCFmbGVuZ3RoGSx3ZG5hbWVuanVtYmYgbWFuaWZlc3RjYWxnZnNoYTI1NmRoYXNoWCBvErgv+J0u7bVCYViyMUgw5yMb8idAv1erA3/DALx9NWNwYWRIAAAAAAAAAAAAAAIDanVtYgAAACRqdW1kYzJjbAARABCAAACqADibcQNjMnBhLmNsYWltAAAAAddjYm9yqGhkYzp0aXRsZW9HZW5lcmF0ZWQgaW1hZ2VpZGM6Zm9ybWF0aWltYWdlL3BuZ2ppbnN0YW5jZUlEeCh4bXAuaWlkOjI3NEMxQjdDN0E0MDExRUVBQkZFQUNFQjJDOTA0NzVCb2NsYWltX2dlbmVyYXRvcng2QWRvYmVfUGhvdG9zaG9wLzI1LjIuMCBhZG9iZV9jMnBhLzAuNy42IGMycGEtcnMvMC4yNS4ydGNsYWltX2dlbmVyYXRvcl9pbmZvgb9kbmFtZW9BZG9iZSBQaG90b3Nob3BndmVyc2lvbmYyNS4yLjD/aXNpZ25hdHVyZXgZc2VsZiNqdW1iZj1jMnBhLnNpZ25hdHVyZWphc3NlcnRpb25zgqJjdXJseCdzZWxmI2p1bWJmPWMycGEuYXNzZXJ0aW9ucy9jMnBhLmFjdGlvbnNkaGFzaFggSmnBvf+o3kEweL4k7cz4MTrB0WSVNFZxoA1rBrM31K+iY3VybHgpc2VsZiNqdW1iZj1jMnBhLmFzc2VydGlvbnMvYzJwYS5oYXNoLmRhdGFkaGFzaFggL2g6Dghd536quyA5vPlS/9NGA5WvLRkkKJmqn0VxCoFjYWxnZnNoYTI1NgAAKEBqdW1iAAAAKGp1bWRjMmNzABEAEIAAAKoAOJtxA2MycGEuc2lnbmF0dXJlAAAAKBBjYm9y0oREoQE4JKNmc2lnVHN0oWl0c3RUb2tlbnOBoWN2YWxZDjYwgg4yMAMCAQAwgg4pBgkqhkiG9w0BBwKggg4aMIIOFgIBAzEPMA0GCWCGSAFlAwQCAQUAMIGCBgsqhkiG9w0BCRABBKBzBHEwbwIBAQYJYIZIAYb9bAcBMDEwDQYJYIZIAWUDBAIBBQAEIHj4VpJDPzaO0x4hOPnj/w1GTHuwXU0IpBf4VVocIQzoAhB3SsxvHza2JR1fKj3Mjr0yGA8yMDIzMTEwMzExNTcyNloCCQCyOL6wAOGCbaCCC70wggUHMIIC76ADAgECAhAFHp6R1x6RCrvkPVzt0N3ZMA0GCSqGSIb3DQEBCwUAMGMxCzAJBgNVBAYTAlVTMRcwFQYDVQQKEw5EaWdpQ2VydCwgSW5jLjE7MDkGA1UEAxMyRGlnaUNlcnQgVHJ1c3RlZCBHNCBSU0E0MDk2IFNIQTI1NiBUaW1lU3RhbXBpbmcgQ0EwHhcNMjMwOTA4MDAwMDAwWhcNMzQxMjA3MjM1OTU5WjBYMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xMDAuBgNVBAMTJ0RpZ2lDZXJ0IEFkb2JlIEFBVEwgVGltZXN0YW1wIFJlc3BvbmRlcjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABE0srlH5A/+15/MFl1asNh8Q8TubOsEVfu0qlJrF0smjtwL1IeHZ/AB7J59u1Trpho1BDN85lfTY30rNBsfT+myjggGLMIIBhzAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH/BAIwADAWBgNVHSUBAf8EDDAKBggrBgEFBQcDCDAgBgNVHSAEGTAXMAgGBmeBDAEEAjALBglghkgBhv1sBwEwHwYDVR0jBBgwFoAUuhbZbU2FL3MpdpovdYxqII+eyG8wHQYDVR0OBBYEFLA1qlbDIamLztO4vIsWJVed7zThMFoGA1UdHwRTMFEwT6BNoEuGSWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcmwwgZAGCCsGAQUFBwEBBIGDMIGAMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wWAYIKwYBBQUHMAKGTGh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcnQwDQYJKoZIhvcNAQELBQADggIBAHgrjELHhBCEWJSCyRX7lsL0C9LJgbX1ryVYySNRxHkMR2LqC7PQZRJgDNR+kJop8P5v2Bzp/jMrzw4U4pY6rYv3I8HpFlJa4uBwUTIUgHWpi8Xxd1JEEX94POODi7HySekX60A055BozFb7GGVaxb0LreQTRXnkr6ggPNUPX9Gh+2ScOxlTdQQLgZbkdYvxo3Ap6cy9riZijRxOZqiOyWSxMUhgKxeKzwrFW6Xbe0awNhOUXZzIxc4ixpKzWSItpPJ30ZiBQn49U3ADYTnshbN9ZkTA1pHf/Nov2ZUvvddkZ8UYvwo9vBvLTDvnmABnRMBKaXYAs3ZCvw9CkDPOWTeUJMFRAtmUx52ohaA3nD8bCJ6UfpQ2pFfOdShwpb6GKv0g+BgcdIG2LHPJ0Ufmr+XmpgZgq/HIge0hjcCADpjDgq2z4B0L4xtAA1M8MrUx02hxb7104nFKqMuv5zJTQl3sgwqXUyP+9zHQP9y/Z5Fx/AQWrOXCW56dV7P4cFBJl8zHqinlhkOStZ1m22+9Hlq+eC0hJ2lkF1LuzRdJJb/51LXoPKRnopFDng6XpoD7eG6w4YpAx9+P00JuUoBsYSrdsuFiyWyQQGBAnjI69ggbSLcW+hJytuinaxawVlItJkS2eV5Z4XsxPg7f82uRkdtN0hTHeI93CN3OWeRebnK7MIIGrjCCBJagAwIBAgIQBzY3tyRUfNhHrP0oZipeWzANBgkqhkiG9w0BAQsFADBiMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29tMSEwHwYDVQQDExhEaWdpQ2VydCBUcnVzdGVkIFJvb3QgRzQwHhcNMjIwMzIzMDAwMDAwWhcNMzcwMzIyMjM1OTU5WjBjMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xOzA5BgNVBAMTMkRpZ2lDZXJ0IFRydXN0ZWQgRzQgUlNBNDA5NiBTSEEyNTYgVGltZVN0YW1waW5nIENBMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAxoY1BkmzwT1ySVFVxyUDxPKRN6mXUaHW0oPRnkyibaCwzIP5WvYRoUQVQl+kiPNo+n3znIkLf50fng8zH1ATCyZzlm34V6gCff1DtITaEfFzsbPuK4CEiiIY3+vaPcQXf6sZKz5C3GeO6lE98NZW1OcoLevTsbV15x8GZY2UKdPZ7Gnf2ZCHRgB720RBidx8ald68Dd5n12sy+iEZLRS8nZH92GDGd1ftFQLIWhuNyG7QKxfst5Kfc71ORJn7w6lY2zkpsUdzTYNXNXmG6jBZHRAp8ByxbpOH7G1WE15/tePc5OsLDnipUjW8LAxE6lXKZYnLvWHpo9OdhVVJnCYJn+gGkcgQ+NDY4B7dW4nJZCYOjgRs/b2nuY7W+yB3iIU2YIqx5K/oN7jPqJz+ucfWmyU8lKVEStYdEAoq3NDzt9KoRxrOMUp88qqlnNCaJ+2RrOdOqPVA+C/8KI8ykLcGEh/FDTP0kyr75s9/g64ZCr6dSgkQe1CvwWcZklSUPRR8zZJTYsg0ixXNXkrqPNFYLwjjVj33GHek/45wPmyMKVM1+mYSlg+0wOI/rOP015LdhJRk8mMDDtbiiKowSYI+RQQEgN9XyO7ZONj4KbhPvbCdLI/Hgl27KtdRnXiYKNYCQEoAA6EVO7O6V3IXjASvUaetdN2udIOa5kM0jO0zbECAwEAAaOCAV0wggFZMBIGA1UdEwEB/wQIMAYBAf8CAQAwHQYDVR0OBBYEFLoW2W1NhS9zKXaaL3WMaiCPnshvMB8GA1UdIwQYMBaAFOzX44LScV1kTN8uZz/nupiuHA9PMA4GA1UdDwEB/wQEAwIBhjATBgNVHSUEDDAKBggrBgEFBQcDCDB3BggrBgEFBQcBAQRrMGkwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBBBggrBgEFBQcwAoY1aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcnQwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcmwwIAYDVR0gBBkwFzAIBgZngQwBBAIwCwYJYIZIAYb9bAcBMA0GCSqGSIb3DQEBCwUAA4ICAQB9WY7Ak7ZvmKlEIgF+ZtbYIULhsBguEE0TzzBTzr8Y+8dQXeJLKftwig2qKWn8acHPHQfpPmDI2AvlXFvXbYf6hCAlNDFnzbYSlm/EUExiHQwIgqgWvalWzxVzjQEiJc6VaT9Hd/tydBTX/6tPiix6q4XNQ1/tYLaqT5Fmniye4Iqs5f2MvGQmh2ySvZ180HAKfO+ovHVPulr3qRCyXen/KFSJ8NWKcXZl2szwcqMj+sAngkSumScbqyQeJsG33irr9p6xeZmBo1aGqwpFyd/EjaDnmPv7pp1yr8THwcFqcdnGE4AJxLafzYeHJLtPo0m5d2aR8XKc6UsCUqc3fpNTrDsdCEkPlM05et3/JWOZJyw9P2un8WbDQc1PtkCbISFA0LcTJM3cHXg65J6t5TRxktcma+Q4c6umAU+9Pzt4rUyt+8SVe+0KXzM5h0F4ejjpnOHdI/0dKNPH+ejxmF/7K9h+8kaddSweJywm228Vex4Ziza4k9Tm8heZWcpw8De/mADfIBZPJ/tgZxahZrrdVcA6KYawmKAr7ZVBtzrVFZgxtGIJDwq9gdkT/r+k0fNX2bwE+oLeMt8EifAAzV3C+dAjfwAL5HYCJtnwZXZCpimHCUcr5n8apIUP/JiW9lVUKx+A+sDyDivl1vupL0QVSucTDh3bNzgaoSv27dZ8/DGCAbgwggG0AgEBMHcwYzELMAkGA1UEBhMCVVMxFzAVBgNVBAoTDkRpZ2lDZXJ0LCBJbmMuMTswOQYDVQQDEzJEaWdpQ2VydCBUcnVzdGVkIEc0IFJTQTQwOTYgU0hBMjU2IFRpbWVTdGFtcGluZyBDQQIQBR6ekdcekQq75D1c7dDd2TANBglghkgBZQMEAgEFAKCB0TAaBgkqhkiG9w0BCQMxDQYLKoZIhvcNAQkQAQQwHAYJKoZIhvcNAQkFMQ8XDTIzMTEwMzExNTcyNlowKwYLKoZIhvcNAQkQAgwxHDAaMBgwFgQU2Rq5M/4XremCHqYT9aQ6cU4+fn0wLwYJKoZIhvcNAQkEMSIEIGmY+GsCefCDmP0PFcYjdxBUfi0EgKYuEZb9pUMyLNuVMDcGCyqGSIb3DQEJEAIvMSgwJjAkMCIEIILa8ZSVezaEAkWP1ScAaf5ixxRW+p4Lhqv4J+hTICfZMAoGCCqGSM49BAMCBEcwRQIgcxxuf7QHV9Fkpj1VhPrFqhNFh8dZzl8qUU/2N3Sr4eoCIQDKu0KGYL++CSsDAXjJciMDbr5ImTy3jw0yQU5GYYeLimd4NWNoYWluglkGMzCCBi8wggQXoAMCAQICEBtbCzvasORd8vMNnlTR2tIwDQYJKoZIhvcNAQELBQAwdTELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEiMCAGA1UEAxMZQWRvYmUgUHJvZHVjdCBTZXJ2aWNlcyBHMzAeFw0yMzAyMDEwMDAwMDBaFw0yNDAyMDEyMzU5NTlaMIGhMREwDwYDVQQDDAhjYWktcHJvZDEcMBoGA1UECwwTQ29udGVudCBDcmVkZW50aWFsczETMBEGA1UECgwKQWRvYmUgSW5jLjERMA8GA1UEBwwIU2FuIEpvc2UxEzARBgNVBAgMCkNhbGlmb3JuaWExCzAJBgNVBAYTAlVTMSQwIgYJKoZIhvcNAQkBFhVncnAtY2FpLW9wc0BhZG9iZS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDv0wCnfYY9lkHDsykrTG7FYlnYHBcyualuD5u9ULjzv+FsTWOLg8Nhrz9RTxI9EeBbu3Wm7f4vqPsQYfxkEp0wIa6DVmEOZhbAeRfbhybWQ/D4Wvvck4mEZR+QZmTpIn7HX61gbtMFHlJUxkYBctIoAt9TBAFbz9d5Ig2WG0bsH39b6/8USXnIIk4FB6dtBRT1xeEwSDtwOd1YBpXXNBJmRWHXNJZZ85of2tBTesg/kMvTrOJJxYDZ97U416wcvbVomlees+NXUY3/ZB4xH+NsZils7m1bL2v2hSnHiLoqZeUKklbHUmT4ZpjrZCdtuIsWm5j2PPXKr7HKUuCbZSXBAgMBAAWjggGMMIIBiDAMBgNVHRMBAf8EAjAAMA4GA1UdDwEB/wQEAwIHgDAeBgNVHSUEFzAVBgkqhkiG9y8BAQwGCCsGAQUFBwMEMIGOBgNVHSAEgYYwgYMwgYAGCSqGSIb3LwECAzBzMHEGCCsGAQUFBwICMGUMY1lvdSBhcmUgbm90IHBlcm1pdHRlZCB0byB1c2UgdGhpcyBMaWNlbnNlIENlcnRpZmljYXRlIGV4Y2VwdCBhcyBwZXJtaXR0ZWQgYnkgdGhlIGxpY2Vuc2UgYWdyZWVtZW50LjBdBgNVHR8EVjBUMFKgUKBOhkxodHRwOi8vcGtpLWNybC5zeW1hdXRoLmNvbS9jYV83YTVjM2EwYzczMTE3NDA2YWRkMTkzMTJiYzFiYzIzZi9MYXRlc3RDUkwuY3JsMDcGCCsGAQUFBwEBBCswKTAnBggrBgEFBQcwAYYbaHR0cDovL3BraS1vY3NwLnN5bWF1dGguY29tMB8GA1UdIwQYMBaAFFcpejJNzP7kNU7AHyRzznNTq99qMA0GCSqGSIb3DQEBCwUAA4ICAQBXjlGa3yAK/Gijn6n/JNU9FZm72MP6vc5czrWe9y0T+EawuRvhpD5Edi1TnXkrpe8sMkgSjTGdbY+yGhq8zlCWQeXN1/aWo3L9Xr1uNxY/oVpLn0uWWfnfJ7yR9gKl/yoMfhjydT4t1fXHi/MhfhrWSVRHqX2U31UFGz/e298P2kv+vqhzpIUo1bj+jibtoPLMMQcCOTtKiJOTh4o3VSZpwQDERCzo91NkF+LnZjwYl6fE5USIkg/oCoomXxSPpowybDrcRJ9ilbtJcER48/LGgwzv/c7OYdron4PnEXm1FkOaVj+QRf7OwiNTizonhIzLR5Vfp0QHOWv/bPzvCjPQd+Xr0Q4032WlSxQwostNTAPtoVAU4OCwVH3Ech38emJ00/6fkDCdr7MN8/4n2LSNrMUvaBEZdmLqDCBnO02dbFrmpg3pTc0FqRQ4GL/88pjRNSMy5tU9SoQnSCGYqIsjfL8AzgPEGiXXRgABYc1uXecf4/eayb3K2MPs7hnWTbUKpHHJIwxpdN3vTGdZNWpz9Oxfuo3eELQlkTvACHgqkaXi/FAanHe5PChn6fr1/4cNF8goD0buPApgS3zzwqjRhxrH8ISwPfJn8JqzurMaLDMnnc18tHzUiMtX73jf6oXh7voCxX/T4D3nFPlxU3om2cpcLQ1Wd4026x18rlSGR1kGpTCCBqEwggSJoAMCAQICEAyotlR7iebSBol1zYubieIwDQYJKoZIhvcNAQELBQAwbDELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEZMBcGA1UEAxMQQWRvYmUgUm9vdCBDQSBHMjAeFw0xNjExMjkwMDAwMDBaFw00MTExMjgyMzU5NTlaMHUxCzAJBgNVBAYTAlVTMSMwIQYDVQQKExpBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZDEdMBsGA1UECxMUQWRvYmUgVHJ1c3QgU2VydmljZXMxIjAgBgNVBAMTGUFkb2JlIFByb2R1Y3QgU2VydmljZXMgRzMwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC3Hy69vQmzXEhs/gyDrmwB6lF4JaSAPomnsbKIZNr2iXaB+fkd85X8eJiNmI7P5O4cVT4Nc1p3zrESqBV4ZUyW8gcZ78QdwoHG8QNd2VNcHnMgSR+XT9Iafsnq9Nfww3Jt9KL3l5ANQ5n1+MJqr48EWNLll942bOL/JH4ywDSMoqhZqtJEIUUUGlQVBZ8CAvJc7LE6ddA5C52PE2Ppa7RfQgHXf4gfXVZwpxYRZcziPiOHqEvLb0J3cShUbejFxV6cwX8QyAPa1ePHg1RtM0HX+D34xHo3DkyGnmT+Ddq00TEDGG26AL5PdINKFIQl+zaq6KJFQe1fdGE5wrWzU4mBPmzaz3EbLn+7FWlwAhorYqIMldbfHE3ydc+aTU1JW7+bG19qmvhO9IluGtTtQDeqFBj2fg6faxsfVfVPD7stN6TwoIDlkOCE4RE+Iin8m3z3eqi/VsTmsmRqBxWDRaqOHz02EJoEDxXJG3ei+UbIIp01XZQvdufm90WxOTuqqan2ZqTPX9K5VdjEh/ovr7xFc5q1dZo+Sa5y4sTVM854/tLU3klOgUKzzSXYPYS3GhBcYJHjwr9xNRHnNX99D6F0g7OijScWfvtjxh13aTv/H0ETvymah4yfDpVdh9cK5YSCPqnuOlsujFAyhYwJXOWDvZZU2EkWVLDhoPx9zp7N4QIDAQABo4IBNDCCATAwEgYDVR0TAQH/BAgwBgEB/wIBADA1BgNVHR8ELjAsMCqgKKAmhiRodHRwOi8vY3JsLmFkb2JlLmNvbS9hZG9iZXJvb3RnMi5jcmwwDgYDVR0PAQH/BAQDAgEGMBQGA1UdJQQNMAsGCSqGSIb3LwEBBzBXBgNVHSAEUDBOMEwGCSqGSIb3LwECAzA/MD0GCCsGAQUFBwIBFjFodHRwczovL3d3dy5hZG9iZS5jb20vbWlzYy9wa2kvcHJvZF9zdmNlX2Nwcy5odG1sMCQGA1UdEQQdMBukGTAXMRUwEwYDVQQDEwxTWU1DLTQwOTYtMzMwHQYDVR0OBBYEFFcpejJNzP7kNU7AHyRzznNTq99qMB8GA1UdIwQYMBaAFKYc4W1UJEyoj0hyv26pjNXk7DHUMA0GCSqGSIb3DQEBCwUAA4ICAQBxzuUHjKbcLdzI4DtlXgCSgZXrlSAkr59pOF3JfPG42qVNAGU7JcEYXJ6+WbfcGwY7WYMl+jO7IvJPb7shXFYW9bnJgxX7lLU14KExchmcLNY1ee6IhBJ2Y8PzZMRUKSd5CkURPg0PBLGjz/KR/DofHx+G4rPTCOGORYxeYrd01lci5hVxvKccvIk7MD69ZTewfZPSM+0WnsU3f0Zmd7hgbRpUyWceG0eHFpdUKK/ZFWhHjDVC28odCnN885tHncKXviItK0ZUUo/AIthFKlhEXsnq9VL9fFbgvO83ZvpUQo5y8mY3cuGnEVGXdhjNb53CfC1u4dbpYmWaN99subUzEsUaUb3loLPfVfzDOpg2y9v37kBdy/wuXr20teY7U62xj/fAgs1QSnhUtlMTfCqbefyEycKVmKIrJkJLsvgTSYKVvH4FFIwfd5WjqOC97jX98rcVAzhAI0iSkazsWOMvL6m0L4nLJapx+85GsVX8Y6AHmEP4bmCElwil6KAP+UewJFiw5rmwV2pESHAhYuZJa03B8tl0nd2QJzvJGmbeBqXqpF9ORinFM3HErK8puRokOjFH2+1asLeI2tB31W/ELdNe27Ogduq6Z6qBwCp59YX27qydDhD0WRfN64kCs25K88iGAGNW2CAfTDS+b+WYJBiIL9jXYZ4LF+BiUvfdu2NwYWRZC70AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPZZAQBKX2Q2ihN2fLDLReHISpfOF0xIqNpOZXbBwZ0XanWG98erbIBdawl7r9nVma/uZjYH457wp00TVpKYUTJHMnzJMKskvM2Df4K6t5pUKGtJqEvMXLUy3g9kJq53aYDwikcUE+8wv+CYtu/+vii4XYSXQIxT4NN+JKoTDXmrNH1G46Nmpfq6SKk0g9GQ2brbkW3fzGR0xDxY3BXRy71guSBxN9TAbQGqUjMnkIyBcwV9wUQ2oCW9oIMNKASjW0CRkcFEzzmrQ+y+zHYpNvUaG7QehHcyhvOec3plzlyP6DZeQWp3PHA5bmonI8t5j6Qj15X1KnQiXuJ0rW+xoMA89aIVmpx4VgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAOSaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA5LjEtYzAwMSA3OS4xNDYyODk5Nzc3LCAyMDIzLzA2LzI1LTIzOjU3OjE0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjYyYTdmYWExLWJmZTMtMjE0Ny04MjAwLWMxM2NlMGU4ZTc1NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzRDMUI3RDdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzRDMUI3QzdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjUuMiAoMjAyMzEwMjQubS4yMzc0IDRhYjk0MzkpICAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphYjQzZjNjYy1hNTY4LTRkNGQtOTdiZC1iYjk0YjBlZjhjYmQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjJhN2ZhYTEtYmZlMy0yMTQ3LTgyMDAtYzEzY2UwZThlNzU0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HNvo5wAADZFJREFUeNrsXFtPVUkW3gc4yP0qDigKON517FFbHRGn1TamjaOJvvhsjIkvPplgfEKe1AefNDE+GP+AmWTszPTYcbpn2piJzc1GWwlOekRBEBFQ7jeZ9ZVrnVkUtfc5CGp3h5VU9qUuu3bVV9+67DonND4+7omEQiHPJaWlpYlxcXGLKX8epTCdB5aXNnHU6c2bN5POcaREp+O9dHxSX1/f5s3KL1ImYCkasMrKyvIISJspD+AyZSTpOrodDSaIBpQCkwtgSM8oVd2/f39M2quoqAijmcrKyjG/l7L77vde+v6sfCRgbdu2LY3AtJNSgg0qDa5oTOViKQtM9nXTgQMHaqmpPEoLKXUQqJpcYIqPj/cSEhLMUZgUbYyNjZkjRPpu50n+VEUvKtditMEb7Xom5OrVqzvpkOXIukFps5XXTunO4cOHR7heKp1/ye1gEX9BCcdv6H4330cbCyh9iXrRgJUQ1FmarFWUIqDS4ApiCT9AobxMpj24uI/209LSvMLCwiLKz6fyQModAlW73TeAac6cOV5SUpIBlasv9qKRvgBYIyMj3tDQkDmPdaLRPzwrHA6bhGsNWr9xsMfEZnC7XDSg+tzv4lRCCRPfjJtHjhzpu3LlCkDVx4BKZICsx9gy4PT4rmFQQbIpdfM5ynX7gWrS/Phl7NixI0SDWCCD52Is14vqAXIByoluAkl+fr43f/58Lyvr7cIaHh4OJSYmfkug6rXZApOamprqUb6vned3X4CBujj29/cbkEl/7EUj74o+og4S2gh6xkypk6mUPXnyZN25c+fCDKzm8vLyOuQzqCAtJ06cuH/+/PkwAytMLCR57VjQFy5cmKeAiXJZGOeLFy/iPBVt4Nqeb60dogKLBm9O/FvxXIwVxBAaUBpgixYt8np7e7329vYJZUtKSkwSefHihVdTU9N2586dXrtfmNj09HQz0dMRvAsYD0dhLryrvG8s7/w+ZCrPcJSdx8duAb+6l0WgWqeu/8uMZMoDWCTr+BpMVoZ8jLUq18XXgdohEFg0cXF6kF2s5Uf9NqBwxL0FCxaYSXz58qWZSNzr6+vzioqKIm01NTV5ZLgbT9HuExgGAzBdUOmJEeb6EKD5AJKt1KJ9TwAFNrpz6tSpljNnzgiQuuh8DbNSNx9HlF0mx26/cbTHLy6AsSKGcVCyjWepJwnS2trqbdiwwZyDJaDyUBbslZmZGTG6Hz9+7D18+NDdUSqTkpIyY6B6V5b4mYsBAIGm27rXR/f+DFXGKm5Ega6P7a5lqvw6sbMIcFkKlCUAI6esQI0QBCwBjxirNqCkDACSkZFhQKLVCSassbHR27Jli6kvsnDhQnN8/vy5t3Hjxsj95ubmSQ6CVoEA5a8IBO+LsSKgoskPKxaC1DKo1mmDXF1/AwAyCO+rNoX1FrANVqLA6V6sfuGGgwcPphBovrCBIuwCgRp7+vSpAUd2dra5bmtrM6pvdHTUu3fvnrGdNHhEbt265XV1dXn79+9/y8V0XltbGwkDkKpsqqqqqhG2AmgBrFn5+Qo0Uyw21gRm0kwCLwqAAgC2b99u2AQCVYWyACtUGkRUoC2bNm0yYBIBe/l5ncKaWmg1hrj/47TCRu32ebUam4LyAweEymK1QG+PUdk3PmXCrGZicrej9e99CD0znvs4NsPtRh2fmMMNLmBBYHgDmTC4ly1bNslWAbhu375tyh06dGgCw2kB+yDEAIEh39HR4RsjE+/NkgJKf0DwlNJ3jkndi2Yo/QXOZ5RxWElpOaUqSk99QLWPErzUr2OcD+j7T+GPUKqZocldyu2mWWbMv1mt4T3q2OObSVnNz46MD49xMfelE85ArOGGiA2FSR0cHDRggVe3fv16Lzc317cXCBeUlZUZu8sVBLUF7YrnaDMWygsjWpLJx1eOvCS8LKX+GFeYdPS1T356wLOC7NcOK/g4HSbaSmku2zZtlo0D6l8U5R2mIxmO91/F79iP8aY+lmhAR2Us09PXr439hAles2ZNoK2Tl5dnwgorV66clHfz5k1v165dk8CFuJYfWwm4/Twgn4FMZqO0U00OPg/lsgck0k3Ae6JACq8HamsAJgPl9fOAzef8VLpey1HtVGXUQoZ45b7QawzgojqpauJNZIYnpEXUFpWZw8ZxMqsdEdgUixlUqPMt1RlygE8mv4jO5/M7tFHZXs4HI+uJG4YFQvldnF+sAPRGjd8SSjl8fzGVG6I6Dxk76GcKl8uOlbESh4eHDVOBpWCcQ/1F88qQv2fPnknlnjx5YsIJOBYXF/9/NqhtANcV8ZbYlc8zswJYJJ8H5Eem7A3WxEYmjdVcigycyltBeV/RsVANbDKDrJnL5jom+Dsa+A5e0WDOn7g/Kx3PR/06qpPDjBS28gG6e6pfDT6gimeV5LF6iqh4focxHo84Ne8hzv8ng2sJA6tfjUedROkZbPkqRhbie8JauTEBi7y6ePncAQaaO3fulKLaWgDQgYEBoxrh+WlgiW3l9znFNtp5IBN5kv0YS6vJYgYVVlU120mfUPot58sqbeaBxJh8zqs7TIN+i573R2aMfykGQD2w21dcfx2DMI3yXjOosLqH6Fr6U8VqDHGhzVw2ns8T2BaTWNMefrc09a7PA1R1iNuuYibZwfXmUB8Qq/qrZa9tZjs1i65fcRswHf5O1zuYgZ7yeG1jdq3SbM9gauFF8yimOBYABaN66dKlUwKVS0TVQT2+evVqgjcIYAWxXxQ12O/jcWUq0MlqvwtQsIeo8zOUWoQHOcCTNMbqQsqPcTARE5PCk/+a64woB6HPYf/JMzq57KgqW8AAaKa8Jn4fbfOlKe92wGeoMq13GFQqdwD95aDmZ5Q+Z9AJwwwoYL5Wn3vqHH2JCOU9pkMjg7jWMgH8GYtspVx8cIwW6QYDrV271rccgATGAkhgm8GTfPDggbd161YTWIUqdLGVnPt4lQKsQQebJTCVj7CNlO4YmAwFlCUaBAo0XVR/nK6T+RqTNh5g7GuwLrTyMxlMfY760r/eKI4J+hJSffA1rlm9o989DK5SLtOmnpOm+pCr6zNoojpJVK6HnxFbuKGiomI5u5hRQVVdXW0+0UjowGa97u6Jn5ewewExMIAN3mA0lepjX8nLgsYXMy2P8SAmWJM6zGoJhnkrr7BEBRwbJLYHJJ/zQ5gwZhx7IkMMkEFWfZF8BcxOFU9zAes33L9+yzERMKLP66nMM8V4HjNFpgPI0r9kft4AmwLjzE4wD0Z58S0OMCvk/RMDgB1zHGtZtIoIgopKe/TokRNYnZ2dzroAIsAFo93Vrq0OAxgLdPZ7TZBsLOtBAl2vZbvqE1VWT4JWM/YkDfJk4P4+GtxqR5l07otrYjMdk6Ydj24ebxjwO23CZ6A+YGegiJOn+vY3xcC9jncY5TwA7E92+zGEW/r5+CnbUjdijbXYbJXs8E6ck11aWmp2G+B7oC1Qc2AsP+AAVHqT3RR3Vd5nQ9dO93hw6ik95hX9H7jonF/PIQBjj7ARC9f5rhUTQrlWrt/L9e/y/XbOq1ce0ihfy0A85useZop6K2gJ8P8A0FACo/7De7tV5Qd4sgIa8QDp2IBoDTNOvU7Mlo1sQ44rwNSzwS3t19l14WWq/tb4qLW76rn3Yp2gSd8KCVjwWMqC1JP6nmei8Ddu3DBRdgmI4jshDHbkByVpQ5+rY9P3339fk5OT46m9RVMNLGLQf2cxdCGff62M3I8m1EcY73nqVg4nhBYe/FK+EwJH+E4cpAozgxoQlhEQwGNctWqVUW2rV6+OGOx++96jbcm193bJBrx3lBQV3NRu8o+xgCrWvervsoddWD8pKamQ40Py9QEM00htNrzrnvxY3yeW/kUTIRlbO7kYa4OlxyMsZG87loQ8Yhdv9+7dJkIPYGk28mOrFStWGOMeux+wdx0foq9fvx7Z3QDGgmeK9D63y8j74D2QpI+unZHTAZdsgJzKxE33vfQzowEuluC3q57eyx/EWBn2DQQ3MdDa9bd/xrV8+fLIpx8beH4/HigoKHgbKi4u9s6ePeuVl5cbYOkOIxwB0M30Bj+0DRDhy4LE7KSfszJ9SbAMd0+5vxEjG6EB+SWMRq3eepycnGwMdq0mfX7aNWHbsrAhovvXrl2bpCKRB2DDSZjuKpd2AVa0qX9EMSszK3GOmEWCjopLgBMJE4GEyZajVh8OA9zJXBpUOL98+bJ37Ngxr6WlRbPbuIABrILPS+8KAtRD/3t6ekzsTBbLLKg+HLC0GrxLkzCmAaWTDSptm0QDGf92cMKvdy5duuQdPXpU6+sB7TAAWFCzOI8VTCiLOoinIeaGNqbyO8JZmXlg3a2srPyJANQqQHIBTIPLBlYQc8GTxM5SAdHevXvNr3NgSylGe2Z7owAG2AZHcSbshHJgOJQDoCSeNgumj2hjMbAMqHBBE/IAv0imiU6AjSUGvN9Pv1z2lAtc2AiILTg4r6mpMfGP48ePew0NDdJGU21t7SuXaysAt3e26l85z7LSx5cJ4YbTp0/PJVBN2G6wb9++PJrAzdif5fpBhTaK/f70I1qygPeMrqvq6upi0nmuPyWZlY8XJPWNY7mEVJX5GyNK8yiFg34J7fM3RYEgIyCN09H8jVF1dfXs3xj9CoD1PwEGAKorJqR4atjIAAAAAElFTkSuQmCC",s)=>{let e,h=0,r=0;const n=[],o=t=>{const i=new Yt.Image;i.src=t,i.onload=()=>{n.forEach((t=>{var s;const e=new it({source:i,fitMode:q.Stretch});null===(s=t.Xd)||void 0===s||s.Le(e),h=0,r=0,u(t)}))}};o(i);const a=t.Jn((t=>o(t)));let l;if(new Yt.Image instanceof Yt.HTMLImageElement){const t=new Yt.Image;t.src=i,l=new it({source:t,fitMode:q.Stretch})}else if(Yt.lcjs_setup){const t=new Yt.Image;t.src=i;const s=Yt.lcjs_setup(t.naturalWidth,t.naturalHeight);s.getContext("2d").drawImage(t,0,0),l=new it({source:s,fitMode:q.Stretch})}else l=new W({color:b("#f00")});const u=t=>{if(t.Xd){const i=t.ft.gi({x:t.ft.x.getInnerEnd(),y:t.ft.y.getInnerStart()},{x:-(3+h),y:3}),s=t.ft.gi({x:t.ft.x.getInnerEnd(),y:t.ft.y.getInnerStart()},{x:-3,y:3+r}),e={x:s.x-i.x,y:s.y-i.y};t.Xd.ze(i).tt(e)}e&&e.xs()};return e=t.JF("logo",Number.MAX_SAFE_INTEGER),i=>{const h={ft:i};return(i=>{const h=s&&"cGx1Z2lu"in s&&"cHl0aG9u"===s.cGx1Z2lu?jA:$A;i.Xd&&i.Xd.dispose(),e&&(i.Xd=e.Re(i.ft).Le(l).setMouseInteractions(!0).Be(dt).setMouseEnterEventHandler((()=>{t.qr(Ke.Point)})).setMouseLeaveEventHandler((()=>{t.qr(Ke.None)})).setMouseClickEventHandler(h).setTouchEndEventHandler(h),u(i))})(h),n.push(h),{Vs:()=>u(h),W:()=>(i=>{i.Xd&&(i.Xd.dispose(),i.Xd=void 0);const s=n.indexOf(i);s>=0&&n.splice(s,1),n.length<=0&&t.Kn(a)})(h)}}},$A=()=>Yt.open("https://lightningchart.com/lightningchart-js/"),jA=()=>Yt.open("https://lightningchart.com/python-charts/");class ZA{constructor(){this.WE=this.GI.bind(this),Yt.addEventListener("scroll",this.WE,{passive:!0})}W(){this.WE&&Yt.removeEventListener("scroll",this.WE),this.WE=void 0}}class QA{constructor(t,i){this.Ta=t,this.j=i,this.YE=!0,this.HE=null,this.XE=null}}class JA{constructor(t){this.$E=!1,this.jE=1,this.ZE=t,this.QE={Ta:n(0,0),j:n(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),YE:!0,HE:null,XE:null},this.JE=n(64,64),this.KE=new Uint8ClampedArray(this.JE.x*this.JE.y*this.jE)}qE(t,i){if(!t.YE)return null;if(t.HE&&t.XE){const s=this.qE(t.HE,i);return null!==s?s:this.qE(t.XE,i)}const s=o(t.j.x,t.j.y);if(t.Ta.x+t.j.x>=Number.MAX_SAFE_INTEGER&&(s.x=this.JE.x-t.Ta.x-1),t.Ta.y+t.j.y>=Number.MAX_SAFE_INTEGER&&(s.y=this.JE.y-t.Ta.y-1),t.j.x===i.x&&t.j.y===i.y)return t.YE=!1,t;if(s.x<i.x||s.y<i.y)return null;let e,h;const r=s.x-i.x,a=s.y-i.y;let l=r<a;return 0===r&&0===a&&(l=!(t.j.x>t.j.y)),l?(e=new QA(Is(t.Ta,{x:0,y:1}),n(t.j.x,i.y)),h=new QA(Is(t.Ta,{x:0,y:i.y+1}),n(t.j.x,t.j.y-1-i.y))):(e=new QA(Is(t.Ta,{x:1,y:0}),n(i.x,t.j.y)),h=new QA(Is(t.Ta,{x:i.x+1,y:0}),n(t.j.x-1-i.x,t.j.y))),t.HE=e,t.XE=h,this.qE(t.HE,i)}tz(t,i){const s={iz:!1,Ta:null};let e=this.qE(this.QE,i);if(null===e)for(;null===e&&this.JE.x<this.ZE&&this.JE.y<this.ZE;){if(!this.sz(n(2*this.JE.x,2*this.JE.y)))return this.$E=!0,null;s.iz=!0,e=this.qE(this.QE,i)}if(null===e)return this.$E=!0,null;for(let s=0;s<i.y;s+=1)for(let h=0;h<i.x;h+=1){const r=e.Ta.y+s,n=e.Ta.x+h;this.KE[r*this.jE*this.JE.x+n*this.jE+0]=t[s*this.jE*i.x+h*this.jE+0]}return s.Ta=e.Ta,s}sz(t){if(t.x>this.ZE||t.y>this.ZE)return!1;const i=new Uint8ClampedArray(t.x*t.y*this.jE);for(let s=0;s<this.JE.y;s+=1)for(let e=0;e<this.JE.x;e+=1)i[s*t.x*this.jE+e*this.jE+0]=this.KE[s*this.JE.x*this.jE+e*this.jE+0];return this.JE=t,this.KE=i,!0}}class KA{constructor(t){this.ez=new Map,this.ZE=t,this.ez.set(this.ez.size,new JA(this.ZE))}hz(t){return this.ez.get(t)}tz(t,i){let s=-1;const e=Array.from(this.ez.values());for(let t=0;t<e.length;t+=1){const i=e[t];if(!i)break;if(!i.$E){s=t;break}}-1===s&&(s=this.ez.size,this.ez.set(this.ez.size,new JA(this.ZE)));const h=this.ez.get(s);if(!h)return null;let r=h.tz(t,i);if(!r&&h.$E){const e=this.ez.size,h=new JA(this.ZE);this.ez.set(e,h),s=e,r=h.tz(t,i)}return r?{rz:s,...r}:null}}var qA;!function(t){t[t.Fail=0]="Fail",t[t.Success=1]="Success",t[t.Resize=2]="Resize"}(qA||(qA={}));const tg=Bi("font-texture");class ig{constructor(t){this.nz=new Map,this.oz=new Map,this.Qo=tg(),this.az=t,this.lz=new KA(this.az.uz||4096)}cz(){return this.oz.forEach((t=>{this.az.dz(t)})),this.oz.clear(),this}fz(t,i){const s=this.nz.get(i);if(s)return s.get(t)}Az(t,i,s){let e=this.nz.get(i);if(e||(e=new Map,this.nz.set(i,e)),e.has(t.glyph))return qA.Success;const h=this.lz.tz(s,t.size);if(!h||!h.Ta)return qA.Fail;h.iz&&this.gz();const r=this.lz.hz(h.rz);if(!r)return qA.Fail;let n=this.oz.get(h.rz);if(!n){const t=this.az.gl.createTexture();if(!t)throw new zt("Failed to create texture for font!");n=t,this.oz.set(h.rz,t)}const o=h.Ta,a=r.JE.x,l=r.JE.y,u=-t.offsetX,c=t.baseline-t.size.y,d=-t.offsetX+t.size.x,f=t.baseline,A=o.x/a,g=(o.y+t.size.y)/l,y=(o.x+t.size.x)/a,m=o.y/l,p=[A,g,y,g,A,m,A,m,y,g,y,m],v=[u,c,d,c,u,f,u,f,d,c,d,f],S={origin:o,size:t.size,advanceX:t.advance,baseline:t.baseline,vertices:v,texCoords:p,packerId:h.rz,texture:n};e.set(t.glyph,S);const b=this.az.gl;return b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),b.bindTexture(b.TEXTURE_2D,n),b.texImage2D(b.TEXTURE_2D,0,b.LUMINANCE,r.JE.x,r.JE.y,0,b.LUMINANCE,b.UNSIGNED_BYTE,this.az.yz?r.KE:new Uint8Array(r.KE)),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.bindTexture(b.TEXTURE_2D,null),h.iz?qA.Resize:qA.Success}gz(){this.nz.forEach((t=>{t.forEach(((i,s)=>{const e=this.lz.hz(i.packerId);if(!e)return;const h=i.origin,r=e.JE.x,n=e.JE.y,o=h.x/r,a=(h.y+i.size.y)/n,l=(h.x+i.size.x)/r,u=h.y/n,c=[o,a,l,a,o,u,o,u,l,a,l,u];i.texCoords=c,t.set(s,i)}))}))}}const sg=t=>{if(t instanceof ee||t instanceof Sd)return t.Mi()?"linear-highPrecision":"linear";if(t instanceof he){const i={};return t.x instanceof Hs&&(i.x={base:t.x.Ai()}),t.y instanceof Hs&&(i.y={base:t.y.Ai()}),["logarithmic",i]}return"linear"},eg=t=>{const i=Object.keys(t),s={};return i.forEach((i=>{const e=t[i];let h=!1;s[i]=t=>{if(!t)return h;const i=e();return h=i,i}})),s},hg=(t,i,s)=>"value"===t.getLookUpProperty()?s:"x"===t.getLookUpProperty()?{min:i.yt(),max:i.vt()}:"y"===t.getLookUpProperty()?{min:i.St(),max:i.bt()}:"z"===t.getLookUpProperty()?{min:i.kv(),max:i.Cv()}:void 0,rg=t=>!(!t||"value"!==t.lookUpProperty||!t.lut.percentageValues),ng=t=>(i,s)=>s%2?i:i+t;class og{constructor(t){this.mz=new Map,this.pz=Bi("font"),this.vz=new Map,this.Sz=new Set,this.az=t}cz(t=!1){return(t||0===this.Sz.size)&&(this.mz.forEach(((t,i)=>{t.cz(),this.mz.delete(i)})),this.Sz.clear()),this}bz(t){this.Sz.add(t)}xz(t){this.Sz.delete(t)}Mz(t,i,s,e){const h=Yt.devicePixelRatio,r=`${e?"dark":"light"} - ${jh(i,h).id}`,n=this.vz.get(r),o=this.mz.get(n);let a=0,l=0,u=0;const c=t.split(""),d=i.size,f=.45*i.size*h,A=Math.round(1*i.size);let g=!1;for(let t=0;t<c.length;t+=1){const i=c[t],s=o&&o.fz(i,d);if(s)""!==i.trim()&&(l=Math.max(l,s.baseline),a=Math.min(a,s.baseline-(s.size.y-1))),u+=s.advanceX;else{if(""!==i.trim()){const t=0;l=Math.max(l,t),a=Math.min(a,t-(A-1))}u+=f,g=!0}}const y=((t,i,s)=>{if(0===s||360===s||180===s||s%180==0)return{x:t,y:i};if(90===s||-90===s||(s+90)%180==0)return{x:i,y:t};const e=s*Math.PI/180,h=Math.cos(e),r=Math.sin(e);return{x:Math.abs(t*h)+Math.abs(i*r),y:Math.abs(t*r)+Math.abs(i*h)}})(u/h,(l-a+1)/h,s);return{x:y.x,y:y.y,isEstimate:g}}_z(t,i,s){const e=`${s?"dark":"light"} - ${i.id}`;let h=this.vz.get(e);h||(h=this.pz(),this.mz.set(h,new ig(this.az)),this.vz.set(e,h));const r=this.mz.get(h);if(!r)throw new zt("Failed to get font texture!");let o=0,a=0,l=0;const u=t.split(""),d=new Map;let f=0;const A=i.properties.size;for(let t=0;t<u.length;t+=1){const e=u[t],h=Math.ceil(f);let n=r.fz(e,A);if(!n){const h=this.az.wz(e,i.properties,i.dpr,s);if(!h)continue;const l=r.Az(h[1],A,h[0]);if(l===qA.Resize){this.Sz.forEach((t=>{t.ba.o=!0})),t=-1,f=0,a=0,o=0,d.clear(),this.az.us.xs(!0);continue}if(l===qA.Fail)throw new zt("Failed to create glyph");if(n=r.fz(e,A),!n)throw new zt("Failed to get glyph after creation")}if(""!==e.trim()){let t=d.get(n.texture);t||(t={vertices:[],texCoords:[]},d.set(n.texture,t)),t.vertices.push(...n.vertices.map(ng(h))),t.texCoords.push(...n.texCoords),a=Math.max(a,n.baseline),o=Math.min(o,n.baseline-(n.size.y-1))}f+=n.advanceX}l=f;const g=c(n(0,o),n(l,a)),y=[];return d.forEach(((t,i)=>{y.push({texCoords:new Float32Array(t.texCoords),vertices:new Float32Array(t.vertices),texture:i})})),[y,g]}}class ag{constructor(t){this.modifiers=[],this.modifiers=t}build(t){const i=this.modifiers.filter((t=>lg(t)));for(const s of i)t=s(t);return`${Ni(this.modifiers.filter((t=>ug(t)))).map((t=>t.Cz)).join("\n")}\n${t}`}}const lg=t=>"function"==typeof t,ug=t=>t&&"object"==typeof t&&"kz"in t,cg=(...t)=>i=>{t=t.reverse();for(let s of t)"string"==typeof s&&(s=s.includes("{")||s.endsWith(";")?s:`${s};`,s=s.trim(),i=i.replace("void main(void)",`${s}\nvoid main(void)`));return i},dg=t=>i=>(t=t.endsWith(";")?t:`${t};`,i.replace(t,"")),fg=(...t)=>i=>{const s=t.filter((t=>t));for(let t=0;t<s.length;t+=1)s[t]=s[t].endsWith(";")?s[t]:`${s[t]};`,s[t]=s[t].startsWith("\t")?s[t]:`\t${s[t]}`;const e=s.join("\n");return i.replace("void main(void) {\n",`void main(void) {\n${e}\n`)},Ag=(t,...i)=>s=>{for(let t=0;t<i.length;t+=1)i[t]=i[t].endsWith(";")?i[t]:`${i[t]};`,i[t]=i[t].startsWith("\t")?i[t]:`\t${i[t]}`;const e=i.join("\n"),h=new RegExp(`(.*${t}.*)`),r=s.replace(h,`${e}\n$1`);return i.forEach((i=>{if(!r.includes(i))throw new Error(`ShaderBefore misusage (not found: \n${i}\nmatch: \n${t}\nresult: \n${r}\n)`)})),r},gg=(t,...i)=>s=>{const e=i.filter((t=>"string"==typeof t));for(let t=0;t<e.length;t+=1)e[t]=e[t].endsWith(";")?e[t]:`${e[t]};`,e[t]=e[t].startsWith("\t")?e[t]:`\t${e[t]}`;const h=e.join("\n"),r=s.lastIndexOf(t),n=s.substring(r),o=n.indexOf("\n"),a=n.substring(o),l=`${s.substring(0,r+o)}\n${h}${a}`;return e.forEach((i=>{if(!l.includes(i))throw new Error(`ShaderAfter misusage (not found: "${i}", match: "${t}", result: "${l}")`)})),l},yg=(...t)=>i=>{for(let s of t)if("string"==typeof s){s=s.endsWith(";")?s:`${s};`,s=s.trim(),s=s.startsWith("\t")?s:`\t${s}`;const t=i.lastIndexOf("}");i=`${i.substring(0,t-1)}\n${s}\n}`}return i},mg=(t,i)=>s=>{let e,h;if(t.includes("uniform")||t.includes("attribute")){const i=t.endsWith(";")?t:`${t};`;s=cg(i)(s),e=t.split(" ")[2].replace(";","")}else e=t;if(i.includes(" ")){const t=i.endsWith(";")?i:`${i};`;s=cg(t)(s),h=i.split(" ")[2].replace(";","")}else h=i;return yg(`\t${h} = ${e};`)(s)},pg=(...t)=>i=>{t=t.reverse();for(const s of t)i=s+i;return i},vg={roundUnsigned:{kz:"roundUnsigned",Cz:"float roundUnsigned(float number) {\n  return floor(number + 0.5);\n}"},linearStep:{kz:"linearStep",Cz:"float linearStep(float step0, float step1, float step) {\n  return clamp((step - step0) / (step1 - step0), 0.0, 1.0);\n}"},decodeUbyteRGBAEncodedFloat:{kz:"decodeUbyteRGBAEncodedFloat",Cz:"\n      // Denormalize 8-bit color channels to integers in the range 0 to 255.\n      ivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {\n        ivec4 bytes = ivec4(inputFloats * 255.0);\n        return (\n          littleEndian\n          ? bytes.abgr\n          : bytes\n        );\n      }\n      \n      // Break the four bytes down into an array of 32 bits.\n      void bytesToBits(const in ivec4 bytes, out bool bits[32]) {\n        for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {\n          float acc = float(bytes[channelIndex]);\n          for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {\n            float powerOfTwo = exp2(float(indexInByte));\n            bool bit = acc >= powerOfTwo;\n            bits[channelIndex * 8 + (7 - indexInByte)] = bit;\n            acc = mod(acc, powerOfTwo);\n          }\n        }\n      }\n      \n      // Compute the exponent of the 32-bit float.\n      float getExponent(bool bits[32]) {\n        const int startIndex = 1;\n        const int bitStringLength = 8;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        float acc = 0.0;\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Compute the mantissa of the 32-bit float.\n      float getMantissa(bool bits[32], bool subnormal) {\n        const int startIndex = 9;\n        const int bitStringLength = 23;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        // Leading/implicit/hidden bit convention:\n        // If the number is not subnormal (with exponent 0), we add a leading 1 digit.\n        float acc = float(!subnormal) * exp2(float(bitStringLength));\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Parse the float from its 32 bits.\n      float bitsToFloat(bool bits[32]) {\n        float signBit = float(bits[0]) * -2.0 + 1.0;\n        float exponent = getExponent(bits);\n        bool subnormal = abs(exponent - 0.0) < 0.01;\n        float mantissa = getMantissa(bits, subnormal);\n        float exponentBias = 127.0;\n        return signBit * mantissa * exp2(exponent - exponentBias - 23.0);\n      }\n      \n      // Decode a 32-bit float from the RGBA color channels of a texel.\n      float decodeUbyteRGBAEncodedFloat(vec4 rgba, bool littleEndian) {\n        ivec4 rgbaBytes = floatsToBytes(rgba, littleEndian);\n        bool bits[32];\n        bytesToBits(rgbaBytes, bits);\n        return bitsToFloat(bits);\n      }\n      "},texelFetchWithFallback:{webgl2:{kz:"texelFetchWithFallback",Cz:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{kz:"texelFetchWithFallback",Cz:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},texelFetchUnsignedWithFallback:{webgl2:{kz:"texelFetchUnsignedWithFallback",Cz:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{kz:"texelFetchUnsignedWithFallback",Cz:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},modulus:{kz:"modulus",Cz:"int modulus(int a, int b) {\n  return (a)-((a)/(b))*(b);\n}"},computeScreenSpaceWireframe:{kz:"computeScreenSpaceWireframe",Cz:"#extension GL_OES_standard_derivatives : enable\nfloat computeScreenSpaceWireframe (vec3 barycentric, float lineWidth) {\n  vec3 dist = fwidth(barycentric);\n  vec3 smoothed = smoothstep(dist * ((lineWidth * 0.5) - 0.5), dist * ((lineWidth * 0.5) + 0.5), barycentric);\n  return 1.0 - min(min(smoothed.x, smoothed.y), smoothed.z);\n}"}},Sg=(t,i)=>{const s=i.steps,e=s.length-1,h=[cg("uniform vec4 uFallbackColor")],r=[],n=[];for(let t=0;t<i.steps.length;t+=1)r.push(`uniform float uLUTValue${t}`),n.push(`uniform vec4 uLUTColor${t}`);return h.push(cg(...r,...n),i.percentageValues&&cg("uniform float uMinValue","uniform float uMaxValue")),i.interpolate?h.push(gg("colorFragment =","vec4 colorLookup = uLUTColor0","float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),"if (value <= -340282346638528859811704183484516925440.0) {\n                    colorLookup = uFallbackColor;\n                }",`if (value >= uLUTValue${e}) {\n                    colorLookup = uLUTColor${e};\n                }`,...s.slice(0,-1).map(((t,i)=>`if (value >= uLUTValue${i} && value <= uLUTValue${i+1}) {\ncolorLookup = uLUTColor${i} + vec4(uLUTColor${i+1}.r -  uLUTColor${i}.r, uLUTColor${i+1}.g -  uLUTColor${i}.g, uLUTColor${i+1}.b -  uLUTColor${i}.b, uLUTColor${i+1}.a -  uLUTColor${i}.a) * (value - uLUTValue${i})/(uLUTValue${i+1} - uLUTValue${i});} `)),"colorFragment = colorLookup")):h.push(gg("colorFragment =","vec4 colorLookup = vec4(uLUTValue0)","float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),`if (${t} <= -340282346638528859811704183484516925440.0) {\n                    colorLookup = uFallbackColor;\n                } else if (${t} < uLUTValue0) { colorLookup = uLUTColor0;} ${s.slice().reverse().map((t=>{const i=s.indexOf(t);return`else if (value >= uLUTValue${i}) { colorLookup = uLUTColor${i};} `})).join("")}`,"colorFragment = colorLookup")),h},bg=[cg("uniform sampler2D uMaskTexture"),cg("varying vec2 vMaskTextureCoord"),gg("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.r")],xg=[cg("uniform sampler2D uMaskTexture"),cg("varying vec2 vMaskTextureCoord"),gg("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.a")],Mg=[cg("varying vec3 vPosWorld;","varying vec3 vNormal;","uniform vec3 uCameraLoc;","uniform vec3 uLightLoc;","uniform vec4 uLightColor;","uniform vec4 uAmbientColor;","uniform float uShininess;","uniform float uAmbientReflection;","uniform float uDiffuseReflection;","uniform float uSpecularReflection;"),gg("colorFragment =","float ambientReflection = uAmbientReflection","float diffuseReflection = uDiffuseReflection","float specularReflection = uSpecularReflection","vec3 ambientColor = uAmbientColor.rgb","vec3 diffuseColor = colorFragment.rgb","vec3 specularColor = uLightColor.rgb","vec3 vNormalNormalized = normalize(vNormal)","vNormalNormalized = (float(gl_FrontFacing) * 2.0 - 1.0) * vNormalNormalized","vec3 lightDir = normalize( uLightLoc - vPosWorld )","float lambertian = abs(dot(vNormalNormalized, lightDir))","float specular = 0.0","vec3 R =  reflect(-lightDir, vNormalNormalized)","vec3 V = normalize(uCameraLoc - vPosWorld)","float specAngle = max(dot(R,V),0.0)","specular = pow(specAngle, uShininess)","colorFragment = vec4(ambientReflection * ambientColor + diffuseReflection * lambertian * diffuseColor + specularReflection * specular * specularColor, colorFragment.a)")],_g=(t,...i)=>{var s,e,h;if("linear-highPrecision"!==t||0===i.length)return{vertexShaderModifiers:[],fragmentShaderModifiers:[]};const r=i[0];return{vertexShaderModifiers:[cg("varying vec4 d"),yg(`d = vec4(${i[0]}.x, ${null!==(s=i[1])&&void 0!==s?s:r}.x, ${null!==(e=i[2])&&void 0!==e?e:r}.x, ${null!==(h=i[3])&&void 0!==h?h:r}.x)`)],idFragment:"hpfix",fragmentShaderModifiers:[cg("varying vec4 d"),yg("if (d.z == -100.0 + d.z / 10.0) { gl_FragColor = d; }")]}};class wg extends Error{constructor(t,i,s){super(`Dynamic shader generation error\n(id: ${i})\n ${s?`when applying feature: ${s.idVertex?`vert: ${s.idVertex}`:""} ${s.idFragment?`frag: ${s.idFragment}`:""}`:""} | ${t}`)}}const Cg=(...t)=>{let i="";for(const s of t){if("object"!=typeof s){i+=`${String(s)},`;continue}const t=[{prefix:"",obj:s}];for(;t.length>0;){const{prefix:s,obj:e}=t.shift();i+=`${s}:`;const h=Object.keys(e).sort();for(const s of h){const h=e[s];"object"==typeof h&&h.__proto__===Object.prototype||Array.isArray(h)?t.push({prefix:s,obj:h}):i+=`${s}=${String(h)},`}}}return i},kg=t=>void 0!==t.find((t=>{var i;return null===(i=t.Tz)||void 0===i?void 0:i.Fz})),Tg=t=>void 0!==t.find((t=>{var i;return null===(i=t.Tz)||void 0===i?void 0:i.Iz})),Fg=(t,i,...s)=>{const e=[],h=i?"vec3":"vec2",{axisWorldTranslation:r,scaling:n,translation:o,offset:a,flipXY:l,flipXZ:u,splitPosAttribute:c,normalSource:d}=t,f=[];if("attribute"===d&&e.push(cg("attribute vec3 aNormal"),fg("vec3 normal = aNormal")),"linear-highPrecision"!==r?s.forEach((t=>{void 0!==t.attributeNameAxisCoord&&void 0!==t.variableNameAxisCoord&&(!0!==c?e.push(fg(`${h} ${t.variableNameAxisCoord} = ${t.attributeNameAxisCoord}`)):e.push(fg(`${h} ${t.variableNameAxisCoord} = ${i?`vec3(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y, ${t.attributeNameAxisCoord}Z)`:`vec2(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y)`}`)))})):s.forEach((i=>{!0!==t.splitPosAttribute?e.push(fg(`${h} ${i.variableNameAxisCoord}_highpart = ${i.attributeNameAxisCoord}_highpart`),fg(`${h} ${i.variableNameAxisCoord}_lowpart = ${i.attributeNameAxisCoord}_lowpart`)):e.push(fg(`${h} ${i.variableNameAxisCoord}_highpart = vec2(${i.attributeNameAxisCoord}_highpartX, ${i.attributeNameAxisCoord}_highpartY)`),fg(`${h} ${i.variableNameAxisCoord}_lowpart = vec2(${i.attributeNameAxisCoord}_lowpartX, ${i.attributeNameAxisCoord}_lowpartY)`))})),a&&a.rotation){const t=a.rotation.dataType,i="uniform"===t?"u":"a";if("attribute-deg"===t){e.push(cg("attribute float aRotDeg"),cg("uniform float uBaseRotDeg"));const t="cRot",i="aInstanceGeo";e.push(fg(`vec2 ${t} = vec2(sin((aRotDeg + uBaseRotDeg) * 0.01745329252), cos((aRotDeg + uBaseRotDeg) * 0.01745329252))`,`vec2 rotatedGeo = vec2(${i}.x * ${t}.y + ${i}.y * ${t}.x, ${i}.y * ${t}.y - ${i}.x * ${t}.x)`))}else{const s=`${i}Rot`;e.push(cg(`${t} vec2 ${s}`));const h="aInstanceGeo";e.push(fg(`vec2 rotatedGeo = vec2(${h}.x * ${s}.y + ${h}.y * ${s}.x, ${h}.y * ${s}.y - ${h}.x * ${s}.x)`))}}if(a&&e.push(cg(`attribute ${h} aInstanceGeo`)),!0===l){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXY");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${i?`vec3(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x, ${t.variableNameAxisCoord}.z)`:`vec2(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`}`)}))}if(!0===u){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXZ");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = vec3(${t.variableNameAxisCoord}.z, ${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`)}))}if(n){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + scaling");const t=("attribute"===n.dataType?"a":"u")+"Scaling",h=i?"vec3":"vec2";e.push(cg(`${n.dataType} ${h} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} * ${t}`)}))}if(o&&"axis"===o.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + translation (axis)");const t=("attribute"===o.dataType?"a":"u")+"TranslationAxis",h=i?"vec3":"vec2";e.push(cg(`${o.dataType} ${h} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} + ${t}`)}))}if(a&&"axis"===a.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + offset (axis)");const t=("attribute"===a.dataType?"a":"u")+"OffsetAxis",n=!0===a.symmetric?"float":h;e.push(cg(`${a.dataType} ${n} ${t}`));const o=a.halved?" * 0.5":"",l=a.rotation?"rotatedGeo":"aInstanceGeo",u="offsetGeometry";f.push(`${h} ${u} = ${t} * ${l}${o} * sign(uScale)`),i&&"gpu-calculate"===d&&f.push(`${h} normal = ${l}`),s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${t.variableNameAxisCoord} + ${u}`)}))}if(void 0===r||"linear"===r)e.push(cg(`uniform ${h} uDisp`,`uniform ${h} uScale`)),s.forEach((t=>{f.push(`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord} - uDisp) / uScale`)}));else if("linear-highPrecision"===r)e.push(cg(`uniform ${h} uDisp`,`uniform ${h} uScale`,`uniform ${h} uScaleStart_highpart`,`uniform ${h} uScaleStart_lowpart`)),s.forEach((t=>{f.push(`${h} ${t.variableNameAxisCoord}_hprecision = (${t.variableNameAxisCoord}_highpart - uScaleStart_highpart) + (${t.variableNameAxisCoord}_lowpart - uScaleStart_lowpart)`,`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord}_hprecision - uDisp) / uScale`,`${h} ${t.variableNameAxisCoord} = ${t.variableNameAxisCoord}_highpart + ${t.variableNameAxisCoord}_lowpart`)}));else if("matrix"===r)e.push(cg("uniform mat3 uMatrix")),s.forEach((t=>{f.push(`vec2 ${t.variableNameWorldCoord} = (uMatrix * vec3(${t.variableNameAxisCoord}, 1.0)).xy`)}));else if("matrix4"===r)e.push(cg("uniform mat4 uMatrix")),s.forEach((t=>{f.push(`vec4 ${t.variableNameWorldCoord} = uMatrix * ${t.attributeNameAxisCoord}`)}));else if("logarithmic"===r[0]){e.push(cg(`uniform ${h} uScaleStart`,`uniform ${h} uScaleStartLog`,`uniform ${h} uScaleInterval`,`uniform ${h} uScaleIntervalLog`,`uniform ${h} uViewportStart`,`uniform ${h} uViewportSize`));const t=i?["x","y","z"]:["x","y"],n=[];t.forEach((t=>{const i=r[1][t];if(void 0!==i){const t=i.base;if("e"===t)return;const s=`float cLog${t} = 1.0 / log(${$s(t).toFixed(1)})`;n.includes(s)||n.push(s)}})),e.push(cg(...n)),s.forEach(((i,s)=>{const e=`${s}`,n=[];t.forEach((t=>{const s=t.toUpperCase(),h=r[1][t];if(void 0===h)f.push(`float posPercent${s}${e} = (${i.variableNameAxisCoord}.${t} - uScaleStart.${t}) / uScaleInterval.${t}`);else{const r=h.base,n="e"===r;f.push(`float posLog${s}${e} = log(${i.variableNameAxisCoord}.${t})${n?"":` * cLog${r}`}`,`float posPercent${s}${e} = (posLog${s}${e} - uScaleStartLog.${t}) / uScaleIntervalLog.${t}`)}n.push(`posPercent${s}${e}`)})),f.push(`${h} ${i.variableNameWorldCoord} = uViewportStart + ${h}(${n.join(", ")}) * uViewportSize`)}))}if(a&&"px"===a.sizeUnit){e.push(cg("uniform vec2 uRatioPxClip"));let t="vec2(0.0, 0.0)";a.useAlignment&&(e.push(cg("uniform vec2 uOffsetAlignment")),t="uOffsetAlignment");const i=("attribute"===a.dataType?"a":"u")+"OffsetPixels",r=!0===a.symmetric?"float":h;e.push(cg(`${a.dataType} ${r} ${i}`));const n=a.halved?" * 0.5":"",o=`(${a.rotation?"rotatedGeo":"aInstanceGeo"} + ${t}) * ${i}${n} * uRatioPxClip`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${o}`)}))}if(a&&"scale"===a.sizeUnit){e.push(cg("uniform vec2 uRatioPxClip")),e.push(cg("uniform vec2 uSizePixels"));let t="vec2(0.0, 0.0)";a.useAlignment&&(e.push(cg("uniform vec2 uOffsetAlignment")),t="uOffsetAlignment");const i=("uniform"===a.dataType?"u":"a")+"OffsetScale";e.push(cg(`${a.dataType} float ${i}`));const h=`(${a.rotation?"rotatedGeo":"aInstanceGeo"} + ${t}) * ${i} * uSizePixels * uRatioPxClip`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${h}`)}))}if(a&&"wu"===a.sizeUnit){const t=("attribute"===a.dataType?"a":"u")+"OffsetWU",r=!0===a.symmetric?"float":h;e.push(cg(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?"rotatedGeo":"aInstanceGeo",l="offsetGeometry";f.push(`${h} ${l} = ${t} * ${o}${n}`),i&&"gpu-calculate"===d&&f.push(`${h} normal = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l}`)}))}if(a&&"nwu"===a.sizeUnit){e.push(cg("uniform float uRatioNwuWu"));const t=("attribute"===a.dataType?"a":"u")+"OffsetNWU",r=!0===a.symmetric?"float":h;e.push(cg(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?"rotatedGeo":"aInstanceGeo",l="offsetGeometry";f.push(`${h} ${l} = ${t} * ${o}${n}`),i&&"gpu-calculate"===d&&f.push(`${h} normal = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l} * uRatioNwuWu`)}))}return t.snapToNearestPixel&&(e.push(cg("uniform vec2 uViewportSizePx")),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = 2.0 * floor(((${t.variableNameWorldCoord} + 1.0) * 0.5) * uViewportSizePx + 0.5) / uViewportSizePx - 1.0`)}))),e.push(Ag("gl_Position =",...f)),e},Ig=(t,i,s,e)=>{const h=[],r=t.axisWorldTranslation,n=i?"vec3":"vec2";if("linear"===r)h.push(gg(s,`${n} ${e} = ${s} * uScale + uDisp`));else if("linear-highPrecision"===r)h.push(gg(s,`${n} ${e} = ${s} * uScale + uDisp + uScaleStart_highpart + uScaleStart_lowpart`));else{if("matrix"===r)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("matrix4"===r)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("logarithmic"!==r[0])throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");{const t=[`${n} ${s}_percent = (${s} - uViewportStart) / uViewportSize`];(i?["x","y","z"]:["x","y"]).forEach((i=>{const e=i.toUpperCase(),h=r[1][i];if(void 0===h)t.push(`float pos${e}Back = ${s}_percent.${i} * uScaleInterval.${i} + uScaleStart.${i}`);else{const r=h.base,n="e"===r?"1.0":`cLog${r}`;t.push(`float pos${e}Back = pow(2.71828, (${s}_percent.${i} * uScaleIntervalLog.${i} + uScaleStartLog.${i}) / ${n})`)}})),t.push(`${n} ${e} = ${n}(posXBack, posYBack${i?", posZBack":""})`),h.push(gg(s,...t))}}return h},Pg=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.Tz)||void 0===i?void 0:i.Pz})))(t)?[dg("attribute vec4 aColor"),dg("vColor = aColor"),cg("attribute vec4 aColorA"),cg("attribute vec4 aColorB"),yg("vColor = mix(aColorA, aColorB, aSegmentSide)")]:[],Dg=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.Tz)||void 0===i?void 0:i.Dz})))(t)?[dg("attribute float aLookupValue"),dg("vLookupValue = aLookupValue"),cg("attribute float aLookupValueA"),cg("attribute float aLookupValueB"),yg("vLookupValue = mix(aLookupValueA, aLookupValueB, aSegmentSide)")]:[],Bg={"2D":{idFeature:"2D",apply:t=>({idVertex:"2D",idFragment:"2D",defaultVertexShader:"2D",defaultFragmentShader:"FragmentShader"})},"2DCompose":{idFeature:"2DCompose",apply:t=>({idVertex:"2DCompose",idFragment:"2DCompose",defaultVertexShader:"2DMatrix",defaultFragmentShader:"Empty"})},"3D":{idFeature:"3D",Tz:{Fz:!0},apply:t=>({idVertex:"3D",idFragment:"3D",defaultVertexShader:"3D",defaultFragmentShader:"FragmentShader"})},PointSize:t=>({idFeature:"PointSize",apply:i=>{const s="uniform"===t?"u":"a";return{idVertex:`SizePrimitive:${Cg(t)}`,idFragment:void 0,vertexShaderModifiers:[cg(`${t} float ${s}PointSize`,"uniform float uDevicePixelRatio"),yg(`gl_PointSize = ${s}PointSize * uDevicePixelRatio`)]}}}),Color:t=>{const i=t&&t.dataType,s=t&&t.maskTextureText,e=t&&t.maskTexture,h=t&&t.overrideOpacity;return{idFeature:"Color",Tz:{Iz:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,Dz:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0,Pz:"attribute"===t.dataType||void 0},apply:(r,n)=>{let o,a=`Color:${Cg(t)}`;const l=[];let u="FragmentShader";const c=[];if("uniform"===i)c.push(cg("uniform vec4 uColor"),gg("colorFragment =","colorFragment = uColor"),...s?bg:[],...e?xg:[]);else if("attribute"===i)o="colorAttribute",l.push(mg("attribute vec4 aColor","varying vec4 vColor")),c.push(cg("varying vec4 vColor"),gg("colorFragment =","colorFragment = vColor"),...s?bg:[],...e?xg:[]);else if("texture"===i)o="colorTexCoord",l.push(mg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),c.push(cg("varying vec2 vTextureCoord"),cg("uniform sampler2D uColorTexture"),cg("uniform vec4 uColor"),gg("colorFragment =","colorFragment = texture2D(uColorTexture, vTextureCoord)","if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.) {\n                        colorFragment = uColor;\n                    }"),...s?bg:[],...e?xg:[]);else if("texture-coord-calc-gpu"===i)o="colorTexCoord",u="Empty",l.push(cg("attribute vec2 aTextureCoord"),cg("varying vec2 vTextureCoord"),yg("vTextureCoord = gl_Position.xy * 0.5 + 0.5")),c.push(cg("varying vec2 vTextureCoord"),cg("uniform sampler2D uColorTexture"),fg("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord)","gl_FragColor = colorFragment;"));else if(Array.isArray(i)&&"image"===i[0])o="colorTexCoord",l.push(mg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),i[1].fitMode===q.Tile?c.push(cg("uniform sampler2D uColorTexture"),cg("varying vec2 vTextureCoord"),gg("colorFragment =","colorFragment = texture2D(uColorTexture, vTextureCoord);")):c.push(cg("uniform sampler2D uColorTexture"),cg("varying vec2 vTextureCoord"),cg("uniform vec4 uColor"),gg("colorFragment =","colorFragment = texture2D(uColorTexture, vTextureCoord);","if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.){\n                                colorFragment = uColor;\n                            }"));else if(Array.isArray(i)&&"lookup"===i[0]){const t=i[1];if("value"===t)o="lookup:value",l.push(mg("attribute float aLookupValue","varying float vLookupValue"));else{const i=`posAxis.${t}`;o=`lookup:${t}`,l.push(mg(i,"varying float vLookupValue"))}c.push(cg("varying float vLookupValue"),...Sg("vLookupValue",i[2]),...s?bg:[],...e?xg:[])}else if(Array.isArray(i)&&"gradient"===i[0]){const t=i[1],h=t.getColorStops();ot(t)?(a=`rgradient${h.length},${e},${s}`,c.push(cg("uniform vec4 uBounds","uniform vec2 uCenter","uniform vec2 uDistance","uniform float uAspect"),cg(...Kt(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),vg.linearStep,gg("colorFragment =","vec2 uv = vec2((((gl_FragCoord.x)-uBounds.x)/(uBounds.z))*uAspect,((gl_FragCoord.y)-uBounds.y)/(uBounds.w))","float mixVal = distance(uv/uDistance, uCenter/uDistance)","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, mixVal))",...h.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, mixVal));`)),"colorFragment = color"),...s?bg:[],...e?xg:[])):ut(t)&&(a=`lgradient${h.length},${e},${s}`,c.push(cg("uniform vec4 uBounds","uniform vec2 uStartPoint","uniform vec2 uEndPoint"),cg(...Kt(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),vg.linearStep,gg("colorFragment =","vec2 uv = gl_FragCoord.xy - uBounds.xy","float magnitude = ((uv.x-uStartPoint.x) * (uEndPoint.x-uStartPoint.x) + (uv.y-uStartPoint.y) * (uEndPoint.y-uStartPoint.y)) / (pow(uEndPoint.x - uStartPoint.x, 2.0) + pow(uEndPoint.y-uStartPoint.y,2.0))","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, magnitude))",...h.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, magnitude))`)),"colorFragment = color"),...s?bg:[],...e?xg:[]))}if(s||e){const t="maskTexture";o=o?`${o} ${t}`:`Color:${t}`,l.push(mg("attribute vec2 aMaskTextureCoord","varying vec2 vMaskTextureCoord"))}return h&&c.push(cg("uniform float uOpacity"),gg("colorFragment =","colorFragment.a *= uOpacity")),{vertexShaderModifiers:l,fragmentShader:u,fragmentShaderModifiers:c,idVertex:o,idFragment:a}}}},ColorShaded3D:t=>{const{dataType:i,shadingStyle:s,wireframe:e}=t;let h;const r=`ColorShaded3D:${Cg(t)}`;return{idFeature:"ColorShaded3D",Tz:{Iz:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,Dz:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0},apply:(t,n)=>{const o=[],a=[];if(o.push("phong"===s&&mg("normal","varying vec3 vNormal"),mg("posWorld","varying vec3 vPosWorld")),"uniform"===i)a.push(cg("uniform vec4 uColorDiffuse"),gg("colorFragment =","colorFragment = uColorDiffuse"));else if("attribute"===i)h="per-vertex-color",o.push(mg("attribute vec4 aColor","varying vec4 vColor")),a.push(cg("varying vec4 vColor"),gg("colorFragment =","colorFragment = vColor"));else if(Array.isArray(i)){const t=i[1];if("value"===t)h="lookup:value",o.push(mg("attribute float aLookupValue","varying float vLookupValue"));else{const i=`posAxis.${t}`;h=`lookup:${t}`,o.push(mg(i,"varying float vLookupValue"))}a.push(cg("varying float vLookupValue"),...Sg("vLookupValue",i[2]))}if(e){const t="wireframe";h=h?`${h},${t}`:t,o.push(mg("attribute vec3 aTriangleBary","varying vec3 vTriangleBary")),a.push(cg("varying vec3 vTriangleBary"),cg("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),vg.computeScreenSpaceWireframe,gg("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)","colorFragment = mix(colorFragment, uWireframeColor, edge)"))}return"phong"===s&&a.push(...Mg),{idVertex:h,idFragment:r,vertexShaderModifiers:o,fragmentShader:"FragmentShader",fragmentShaderModifiers:a}}}},VertexLocation:t=>({idFeature:"VertexLocation",apply:i=>{const s=_g(t.axisWorldTranslation,"posAxis_hprecision"),e=[],h=kg(i),r=t.coordType?t.coordType:h?"vec3":"vec2";return"linear-highPrecision"!==t.axisWorldTranslation?!0!==t.splitPosAttribute?e.push(cg(`attribute ${r} aPos`)):e.push(cg("attribute float aPosX"),cg("attribute float aPosY"),h&&cg("attribute float aPosZ")):!0===t.splitPosAttribute?e.push(cg("attribute float aPos_highpartX"),cg("attribute float aPos_lowpartX"),cg("attribute float aPos_highpartY"),cg("attribute float aPos_lowpartY")):e.push(cg(`attribute ${r} aPos_highpart`),cg(`attribute ${r} aPos_lowpart`)),e.push(...Fg(t,h,{attributeNameAxisCoord:"aPos",variableNameAxisCoord:"vec4"===t.coordType?void 0:"posAxis",variableNameWorldCoord:"posWorld"})),e.push(...s.vertexShaderModifiers),{idVertex:`VertexLocation:${Cg(t)}`,idFragment:s.idFragment,vertexShaderModifiers:e,fragmentShaderModifiers:s.fragmentShaderModifiers}}}),Model3D:t=>({idFeature:"Model3D",apply:i=>{const s=[];return s.push(cg("attribute vec3 aGeoPos"),cg("uniform mat4 uModelRotation"),cg("uniform mat4 uModelRotationNormals"),cg("uniform vec3 uLocationAxis"),cg("uniform vec3 uModelAlignment"),cg("uniform vec3 uModelScale"),cg("uniform vec3 uModelSize"),...Fg({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,{attributeNameAxisCoord:"uLocationAxis",variableNameAxisCoord:"locationAxis",variableNameWorldCoord:"locationWorld"}),Ag("gl_Position =","vec3 posWorld = locationWorld + ((uModelRotation * vec4(aGeoPos, 1.0)).xyz  - (uModelAlignment + 1.0) * uModelSize/2.0) * uModelScale;"),"attribute"===t.normalSource&&gg("vec3 normal ="," normal = (uModelRotationNormals * vec4(normal, 1.0)).xyz;"),...Tg(i)?Ig({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,"posWorld","posAxis"):[]),{vertexShaderModifiers:s,idVertex:`Model3D:${Cg(t)}`,idFragment:void 0}}}),LineInstanced2D:t=>{const i=_g(t.axisWorldTranslation,"locationA_hprecision","locationB_hprecision");return{idFeature:"LineInstanced2D",apply:s=>({idVertex:`LineInstanced2D:${Cg(t)}`,idFragment:i.idFragment,vertexShaderModifiers:[cg("uniform float uThicknessPixels"),cg("uniform vec2 uRatioPxClip"),..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[cg("attribute vec2 aLocationA"),cg("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[cg("attribute vec2 aLocationA_highpart"),cg("attribute vec2 aLocationB_highpart"),cg("attribute vec2 aLocationA_lowpart"),cg("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[cg("attribute float aLocationAX"),cg("attribute float aLocationAY"),cg("attribute float aLocationBX"),cg("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[cg("attribute float aLocationA_highpartX"),cg("attribute float aLocationA_highpartY"),cg("attribute float aLocationB_highpartX"),cg("attribute float aLocationB_highpartY"),cg("attribute float aLocationA_lowpartX"),cg("attribute float aLocationA_lowpartY"),cg("attribute float aLocationB_lowpartX"),cg("attribute float aLocationB_lowpartY")]:[],cg("attribute vec2 aSegmentPosition"),cg("attribute float aSegmentSide"),...Fg(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),t.ensureMinimumSegmentLength&&cg("uniform vec2 uMinSegmentPixelVector"),gg("worldB = ",t.ensureMinimumSegmentLength&&"float segmentLengthPixels = sqrt(pow(worldB.x - worldA.x, 2.0) + pow(worldB.y - worldA.y, 2.0)) / length(uRatioPxClip)",t.ensureMinimumSegmentLength&&"if (segmentLengthPixels == 0.0 || segmentLengthPixels < length(uMinSegmentPixelVector)) {\n                            worldB = worldA + uMinSegmentPixelVector * uRatioPxClip;\n                        }","vec2 directionBasis = worldB - worldA","vec2 directionBasisNorm = normalize(directionBasis)","vec2 perpendBasisNorm = vec2(-directionBasisNorm.y, directionBasisNorm.x)","vec2 offset = mix(worldA, worldB, aSegmentSide)","vec2 thicknessDirection = aSegmentPosition.x * directionBasisNorm + aSegmentPosition.y * perpendBasisNorm","vec2 posWorld = offset + thicknessDirection * uThicknessPixels * uRatioPxClip"),...Dg(s),...Pg(s),...Tg(s)?Ig(t,!1,"posWorld","posAxis"):[],...i.vertexShaderModifiers],fragmentShaderModifiers:i.fragmentShaderModifiers})}},Area2D:t=>({idFeature:"Area2D",apply:i=>{const s=_g(t.axisWorldTranslation,"locationA_hprecision","locationB_hprecision");return{idVertex:`Area2D:${Cg(t)}`,idFragment:s.idFragment,vertexShaderModifiers:[..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[cg("attribute vec2 aLocationA"),cg("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[cg("attribute vec2 aLocationA_highpart"),cg("attribute vec2 aLocationB_highpart"),cg("attribute vec2 aLocationA_lowpart"),cg("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[cg("attribute float aLocationAX"),cg("attribute float aLocationAY"),cg("attribute float aLocationBX"),cg("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[cg("attribute float aLocationA_highpartX"),cg("attribute float aLocationA_highpartY"),cg("attribute float aLocationB_highpartX"),cg("attribute float aLocationB_highpartY"),cg("attribute float aLocationA_lowpartX"),cg("attribute float aLocationA_lowpartY"),cg("attribute float aLocationB_lowpartX"),cg("attribute float aLocationB_lowpartY")]:[],cg("attribute float aCurveOrBaseline"),cg("attribute float aSegmentSide"),...Fg(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),gg("worldB = ","vec2 posCoord = mix(worldA, worldB, aSegmentSide)","bottom"===t.fill?"float baseline = min(posCoord.y, -1.0)":"top"===t.fill?"float baseline = max(posCoord.y, 1.0)":"left"===t.fill?"float baseline = min(posCoord.x, -1.0)":"float baseline = max(posCoord.x, 1.0)","vec2 posWorld = "+("bottom"===t.fill||"top"===t.fill?"vec2(posCoord.x, mix(posCoord.y, baseline, aCurveOrBaseline))":"vec2(mix(posCoord.x, baseline, aCurveOrBaseline), posCoord.y)")),...Dg(i),...Pg(i),...Tg(i)?Ig(t,!1,"posWorld","posAxis"):[],...s.vertexShaderModifiers],fragmentShaderModifiers:s.fragmentShaderModifiers}}}),LineInstanced3D:t=>({idFeature:"LineInstanced3D",apply:i=>({idVertex:`LineInstanced3D:${Cg(t)}`,idFragment:void 0,defaultFragmentShader:"FragmentShader",vertexShaderModifiers:[cg("uniform float uOffsetWU"),cg("attribute vec3 aLocationA"),cg("attribute vec3 aLocationB"),cg("attribute float aSegmentPosition"),cg("attribute float aPerpendHorizontal"),cg("attribute float aPerpendVertical"),...Fg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},kg(i),{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),gg("worldB = ","vec3 directionBasis = worldB - worldA","vec3 directionBasisNorm = normalize(directionBasis)","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(directionBasis.y), 0.9 ) ))","vec3 horizontalBasis = normalize( cross( notParallel, directionBasisNorm ) )","vec3 verticalBasis = normalize( cross( horizontalBasis, directionBasisNorm ) )","vec3 normal = aPerpendHorizontal * horizontalBasis + aPerpendVertical * verticalBasis","vec3 posWorld = worldA + aSegmentPosition * directionBasis + normal * uOffsetWU * 0.5"),...Tg(i)?Ig({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,"posWorld","posAxis"):[]]})}),RoundedEdges3D:{idFeature:"RoundedEdges3D",apply:t=>({idVertex:"RoundedEdges3D",idFragment:void 0,vertexShaderModifiers:[cg("attribute vec3 aEdge"),cg("uniform float uEdgeRoundness"),gg("posWorld =","vec3 boxSizeWorld = abs( aOffsetAxis / uScale )","float boxMinDimensionWorldXZ = min( boxSizeWorld.x, boxSizeWorld.z )","vec3 edgeRoundAmount = uEdgeRoundness * vec3( boxMinDimensionWorldXZ, min( boxMinDimensionWorldXZ, boxSizeWorld.y ), boxMinDimensionWorldXZ )","posWorld = posWorld + aEdge * edgeRoundAmount")]})},ColorGrid2D:t=>{const i=t.flipXY,s=t.intensityTextureType,e=t.littleEndian;return{idFeature:"ColorGrid2D",apply:(h,r)=>({idVertex:void 0,idFragment:`ColorGrid2D:${Cg(t)}`,fragmentShader:"FragmentShader",fragmentShaderModifiers:[cg("uniform vec4 uTileBounds","uniform vec2 uTileDimensions","uniform sampler2D uTileIntensityValues"),"ubyte"===s&&vg.decodeUbyteRGBAEncodedFloat,"bilinear"===t.interpolation?fg("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions - 1.0)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensions - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensions - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${i?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${i?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${i?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${i?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===s?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${e})`),"float intensity01 = "+("float"===s?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${e})`),"float intensity10 = "+("float"===s?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${e})`),"float intensity11 = "+("float"===s?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${e})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${i?"lerpFactors.y":"lerpFactors.x"})`):fg("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellIndexNormalized = cellIndex / uTileDimensions",`vec4 sample0 = texture2D(uTileIntensityValues, ${i?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = "+("float"===s?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${e})`)),...Sg("intensityP",t.lut)]})}},DrawToNormalTexture:t=>{const i=t.flipXZ,s=t.vertexIdSource,e=t.normalTextureType,h=t.heightmapTextureType,r=t.littleEndian;return{idFeature:"DrawToNormalTexture",apply:(n,o)=>{const a=[],l=[];return a.push(cg("uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB","attribute"===s&&"attribute float aVertexID"),void 0!==s&&vg.roundUnsigned,vg.modulus,vg.texelFetchWithFallback[o],"ubyte"===h&&vg.decodeUbyteRGBAEncodedFloat,fg(void 0===s?"int iVertex = gl_VertexID":"int iVertex = int(roundUnsigned(aVertexID))","int iSecondary = modulus(iVertex, (uTileDimensions.y - 1))","int iPrimary = iVertex / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(uTileDimensions) - 1.0","vec2 halfTexelWorld = 2.0 / (uTileDimensionsMinus1 * 2.0)","vec2 posWorld = vec2(-1.0 + halfTexelWorld.y + iCell.y * 2.0 * halfTexelWorld.y, -1.0 + halfTexelWorld.x + iCell.x * 2.0 * halfTexelWorld.x)","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec3 posAxis0 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`} ,\n                            uTileStartLocationAxisXZ.y + iCell.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell1 = iCell + vec2(1.0, 0.0)",`vec3 posAxis1 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell1.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell1.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell2 = iCell + vec2(0.0, 1.0)",`vec3 posAxis2 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell2.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell2.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell3 = iCell + vec2(1.0, 1.0)",`vec3 posAxis3 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell3.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell3.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec3 normal = normalize(cross(posAxis2 - posAxis0, posAxis1 - posAxis0) + cross(posAxis1 - posAxis3, posAxis2 - posAxis3))","uint"===e?"vNormalRGB = uvec3(((normal / 2.0) + 0.5) * float(-1u))":"vNormalRGB = (normal / 2.0) + 0.5","gl_PointSize = 1.0")),l.push(cg("uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB"),fg("uint"===e?"gl_FragColor = uvec4(vNormalRGB, -1u)":"gl_FragColor = vec4(vNormalRGB, 1.0)")),{idVertex:`DrawToNormalTexture:${Cg(t)}`,idFragment:`DrawToNormalTexture:${Cg(t)}`,vertexShaderModifiers:a,fragmentShaderModifiers:l,fragmentShader:"Empty",hints:["uint"===e&&{type:"fragOutput",fragOutput:"uvec4"}]}}}},SurfaceGrid:t=>{const i=t.fillColor,s=t.interpolation,e=t.flipXZ,h=t.shadingStyle,r=t.wireframe,n=t.normalTextureType,o=t.heightmapTextureType,a=t.intensityTextureType,l=t.littleEndian;return{idFeature:"SurfaceGrid",Tz:{Bz:!0},apply:(u,c)=>{const d=[],f=[];return d.push(cg("attribute vec2 aGeoCellOffset","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture"),vg.modulus,vg.texelFetchWithFallback[c],"ubyte"===o&&vg.decodeUbyteRGBAEncodedFloat,fg("int iSecondary = modulus(iInstance + uBaseInstance, (uTileDimensions.y - 1))","int iPrimary = (iInstance + uBaseInstance) / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 iCellVertex = iCell + aGeoCellOffset","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","vec2 ySampleCoordinate = vec2(iCellVertex.y, iCellVertex.x) / vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x)","float y = "+("float"===o?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${l})`),"vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)","vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * "+(e?"vec2(iCellVertex.y, iCellVertex.x)":"iCellVertex"),"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)")),d.push(...Fg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:"posAxis",variableNameWorldCoord:"posWorld"})),"phong"===h&&d.push(mg("posWorld","varying vec3 vPosWorld"),..."uint"===n?[vg.texelFetchUnsignedWithFallback[c],yg("vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)")]:[yg("vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))")],yg("vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vNormal = normalize(normalAxis * uScale)"),cg("varying vec3 vNormal",..."uint"===n?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"])),f.push(cg("varying vec3 vTriangleBary")),"uniform"===i?f.push(cg("uniform vec4 uColorDiffuse"),gg("colorFragment =","colorFragment = uColorDiffuse")):Array.isArray(i)&&"lookup"===i[0]&&("value"===i[1]?(d.push(mg("posAxis.xz","varying vec2 vVertexLocationAxisXZ")),f.push(cg("uniform vec4 uTileBoundsAxisXZ","uniform vec2 uTileDimensionsXZ","varying vec2 vVertexLocationAxisXZ","uniform sampler2D uTileIntensityValues","uniform mat4 uViewProjectionMatrix","uniform vec3 uScale","uniform vec3 uDisp"),"ubyte"===a&&vg.decodeUbyteRGBAEncodedFloat,"bilinear"===s?fg("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = (vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensionsXZ - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensionsXZ - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${e?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${e?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${e?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${e?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===a?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${l})`),"float intensity01 = "+("float"===a?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${l})`),"float intensity10 = "+("float"===a?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${l})`),"float intensity11 = "+("float"===a?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${l})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${e?"lerpFactors.y":"lerpFactors.x"})`):fg("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = floor((vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ)","vec2 cellIndexNormalized = cellIndex / (uTileDimensionsXZ - 1.0)",`vec4 sample0 = texture2D(uTileIntensityValues, ${e?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = sample0.x"),...Sg("intensityP",i[2]))):(d.push(mg(`posAxis.${i[1]}`,"varying float vLookupValue")),f.push(cg("varying float vLookupValue"),...Sg("vLookupValue",i[2])))),"phong"===h&&f.push(...Mg),r&&(d.push(cg("attribute vec3 aTriangleBary"),mg("aTriangleBary","varying vec3 vTriangleBary")),f.push(cg("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),vg.computeScreenSpaceWireframe,gg("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",i?"if (edge > 0.0) {\n                                    colorFragment = vec4(mix(colorFragment.rgb, uWireframeColor.rgb, edge * uWireframeColor.a), max(colorFragment.a, uWireframeColor.a));\n                                }":"if (edge > 0.0) {\n                                    colorFragment = uWireframeColor;\n                                  } else {\n                                      discard;\n                                  }"))),{idVertex:`SurfaceGrid:${Cg(t)}`,idFragment:`SurfaceGrid:${Cg(t)}`,vertexShaderModifiers:d,fragmentShader:"FragmentShader",fragmentShaderModifiers:f}}}},DebugSurfaceGridNormals:t=>({idFeature:"DebugSurfaceGridNormals",apply:(i,s)=>({idVertex:`DebugSurfaceGridNormals:${Cg(t)}`,idFragment:`DebugSurfaceGridNormals:${Cg(t)}`,vertexShaderModifiers:[cg("attribute float aNormalArrow","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===t.instanceIdSource&&"attribute float aInstanceID",..."uint"===t.normalTextureType?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"]),vg.roundUnsigned,vg.modulus,vg.texelFetchWithFallback[s],"ubyte"===t.heightmapTextureType&&vg.decodeUbyteRGBAEncodedFloat,fg(void 0===t.instanceIdSource?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","float y00 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y01 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y10 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y11 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y = (y00 + y01 + y10 + y11) / 4.0","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * (0.5 + ${t.flipXZ?"vec2(iCell.y, iCell.x)":"iCell"})`,"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)",..."uint"===t.normalTextureType?["vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)"]:["vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))"],"vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vec3 normalWorld = normalize(normalAxis * uScale)"),..."uint"===t.normalTextureType?[vg.texelFetchUnsignedWithFallback[s]]:[],...Fg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:"posAxis",variableNameWorldCoord:"posWorld"}),gg("posWorld =","vec3 dirArrow = normalWorld","vec3 posArrowStart = posWorld","vec3 posArrowEnd = posWorld + dirArrow * 0.010","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(dirArrow.y), 0.9 ) ))","vec3 dirArrowLeft = normalize(-dirArrow + 0.50 * normalize(cross(dirArrow, notParallel)))","vec3 dirArrowRight = normalize(-dirArrow + 0.50 * normalize(cross(notParallel, dirArrow)))","vec3 posArrowLeft = posArrowEnd + dirArrowLeft * 0.0025","vec3 posArrowRight = posArrowEnd + dirArrowRight * 0.0025","if (aNormalArrow == 0.0) {\n                        posWorld = posArrowStart;\n                    } else if (aNormalArrow == 1.0) {\n                        posWorld = posArrowEnd;\n                    } else if (aNormalArrow == 2.0) {\n                        posWorld = posArrowLeft;\n                    } else if (aNormalArrow == 3.0) {\n                        posWorld = posArrowRight;\n                    }")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[yg("gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0)")]})}),OffsetTowardsCamera:()=>({idFeature:"OffsetTowardsCamera",apply:t=>({idVertex:"OffsetTowardsCamera",idFragment:void 0,vertexShaderModifiers:[cg("uniform vec3 uCameraLoc"),gg("posWorld =","posWorld = posWorld + normalize(uCameraLoc) * 0.0025")]})}),AliasedEdge:{idFeature:"AliasedEdge",apply:t=>({idVertex:"AliasedEdge",idFragment:"AliasedEdge",vertexShaderModifiers:[cg("attribute float aSegmentInside"),cg("varying float vSegmentInside"),cg("varying float vSegmentSide"),gg("gl_Position = ","\n                vSegmentInside = aSegmentInside;\n                vSegmentSide = aSegmentSide;\n                ")],fragmentShaderModifiers:[pg("#extension GL_OES_standard_derivatives : enable"),cg("uniform float uAALimit"),cg("varying float vSegmentInside"),cg("varying float vSegmentSide"),gg("antiAliasFactor = ","\n                float dist = (uAALimit - vSegmentInside);\n                vec2 ddist = vec2(dFdx(dist), dFdy(dist));\n                float pixelDist = dist / length(ddist);\n                // additional blurring\n                pixelDist *= 0.5;\n\n                float aa = clamp(0.5 - pixelDist, 0.0, 1.0);\n                if((vSegmentSide <= 0.0 || vSegmentSide >= 1.0) && aa <=0.99){\n                    aa *= 0.5;\n                }\n                antiAliasFactor = aa;\n                ")]})},Glow1D:t=>({idFeature:"Glow1D",apply:()=>{const i=Math.round(t.spreadPx),s=Math.round(t.blurPx),e=i+s,h=t.firstPass,r=[];for(let t=-e;t<=e;t+=1){const i=Math.abs(t);r.push(h?{x:t.toFixed(1),y:"0.0",distPx:i.toFixed(1)}:{x:"0.0",y:t.toFixed(1),distPx:i.toFixed(1)})}return{idVertex:`Glow1D:${Cg(t)}`,idFragment:`Glow1D:${Cg(t)}`,vertexShaderModifiers:[mg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[cg("uniform sampler2D uTexture"),cg("varying vec2 vTextureCoord"),cg("uniform vec2 uTextureSize"),h&&cg("uniform vec2 uOffsetPx"),!h&&cg("uniform sampler2D uTextureFirstGlowPass"),!h&&cg("uniform vec4 uGlowColor"),gg("antiAliasFactor =","vec2 oneTexel = vec2(1.0, 1.0) / uTextureSize",...h?[]:["float inverseIntensity =\n                        0.25 * texture2D(uTexture, vTextureCoord).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, 0.0)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, 0.0)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, -oneTexel.y)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, -oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, -oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, oneTexel.y)).a","antiAliasFactor *= 1.0 - (inverseIntensity * inverseIntensity)","if (antiAliasFactor <= 0.0) { discard; }"],"float distancePx = 255.0","vec2 sample_tx = vec2(0.0)",...h?["vec2 texCoordOffset = vTextureCoord - uOffsetPx * oneTexel",...r.map(((t,i)=>[`sample_tx = texCoordOffset + oneTexel * vec2(${t.x}, ${t.y})`,`if (distancePx > ${t.distPx} && sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0 && texture2D(uTexture, sample_tx).a > 0.0) { distancePx = ${t.distPx}; }`])).flat(),"colorFragment = vec4(distancePx / 255.0, 0.0, 0.0, 1.0)"]:["vec4 sample_horizontal = vec4(0.0)","float horizontal_dist = 255.0","float min_horizontal_dist = 255.0",...r.map(((t,i)=>[`sample_tx = vTextureCoord + oneTexel * vec2(${t.x}, ${t.y})`,"if (sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0) {\n                                            sample_horizontal = texture2D(uTextureFirstGlowPass, sample_tx);\n                                            horizontal_dist = sample_horizontal.r * 255.0;\n                                          }","if (sample_horizontal.a < 0.9) { horizontal_dist = 255.0; }","min_horizontal_dist = min(min_horizontal_dist, horizontal_dist)",`distancePx = min(distancePx, pow(horizontal_dist * horizontal_dist + ${t.y} * ${t.y}, 0.5))`])).flat(),`if (distancePx > ${e.toFixed(1)}) { discard; }`,"vec4 pixelGlowColor = vec4(0.0, 0.0, 0.0, 0.0)",`if (distancePx > ${i.toFixed(1)}) {\n                                        float lerpAmount = (distancePx - ${i.toFixed(1)}) / ${(s+1).toFixed(1)};\n                                        pixelGlowColor = mix(uGlowColor, vec4(uGlowColor.rgb, 0.0), 1.0 - (1.0 - lerpAmount) * (1.0 - lerpAmount));\n                                    } else {\n                                        pixelGlowColor = uGlowColor;\n                                    }`,"colorFragment = pixelGlowColor"])]}}}),MousePicking:t=>{const i=!!(null==t?void 0:t.customMousePickingIdInput),s=!i&&!!(null==t?void 0:t.useVertexId),e=!i&&!!(null==t?void 0:t.useAttribute),h=!i&&!s&&!e;return{idFeature:"MousePicking",Tz:{Bz:h,Lz:s},apply:(r,n)=>{const o="webgl2"===n?"flat":"",a="webgl2"===n?"int":"float";return{idVertex:`MousePicking:${Cg(t)}`,idFragment:`MousePicking:${Cg(t)}`,vertexShaderModifiers:[...h?[cg(`${o} varying ${a} vPickingIdOffset`),yg(`vPickingIdOffset = ${a}(iInstance)`)]:[],...s?[cg(`${o} varying ${a} vPickingIdOffset`),yg(`vPickingIdOffset = ${a}(iVertex)`)]:[],...e?[cg("attribute float aPickingIdOffset",`${o} varying ${a} vPickingIdOffset`),yg(`vPickingIdOffset = ${a}(aPickingIdOffset)`)]:[]],fragmentShaderModifiers:[cg("uniform int uFirstId"),...i?[]:[cg(`${o} varying ${a} vPickingIdOffset`),fg("int mousePickingIdOffset = "+("int"===a?"vPickingIdOffset":"int(floor(vPickingIdOffset + 0.5))"))],gg("colorFragment =","int remainder = mousePickingIdOffset + uFirstId","int r = remainder / 16777216","remainder -= r * 16777216","int g = remainder / 65536","remainder -= g * 65536","int b = remainder / 256","remainder -= b * 256","int a = remainder","colorFragment = vec4(float(r) / 255.0, float(g) / 255.0, float(b) / 255.0, float(a) / 255.0)"),t=>t.replace("gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor)","if (antiAliasFactor <= 0.0) { discard; }\ngl_FragColor = fragColorEnd").replace("if (fragColorEnd.a <= 0.0) { discard; }","")]}}}},AttributeHighlight:{idFeature:"AttributeHighlight",apply:t=>({idVertex:"AttributeHighlight",idFragment:"AttributeHighlight",vertexShaderModifiers:[mg("attribute float aIsHighlighted","varying float vIsHighlighted")],fragmentShaderModifiers:[t=>t.replace("uniform float uIsHighlighted","varying float vIsHighlighted").replace("uIsHighlighted","vIsHighlighted")]})},StippleTexture:{idFeature:"StippleTexture",apply:(t,i)=>({idVertex:"StippleTexture",idFragment:"StippleTexture",vertexShaderModifiers:[cg("attribute vec2 aLengthSoFar"),cg("varying float vLengthSoFar"),cg("uniform vec2 uStippleCount"),yg("\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[cg("uniform sampler2D uStippleTexture"),cg("uniform float uStippleScale"),cg("varying float vLengthSoFar"),"webgl1"===i&&cg("uniform float uStippleTextureWidthLimiter"),gg("antiAliasFactor = ",`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    antiAliasFactor *= stippleAA;\n                    if (antiAliasFactor <= 0.0) { discard; }`)]})},StippleTextureInstanced:{idFeature:"StippleTextureInstanced",apply:(t,i)=>({idVertex:"StippleTextureInstanced",idFragment:"StippleTextureInstanced",vertexShaderModifiers:[cg("attribute vec2 aLengthSoFarA"),cg("attribute vec2 aLengthSoFarB"),cg("varying float vLengthSoFar"),cg("uniform vec2 uStippleCount"),yg("\n                vec2 aLengthSoFar = mix(aLengthSoFarA, aLengthSoFarB, aSegmentSide);\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[cg("uniform sampler2D uStippleTexture"),cg("uniform float uStippleScale"),cg("varying float vLengthSoFar"),"webgl1"===i&&cg("uniform float uStippleTextureWidthLimiter"),gg("antiAliasFactor = ",`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    antiAliasFactor *= stippleAA;\n                    if (antiAliasFactor <= 0.0) { discard; }`)]})},PolarHeatmap:t=>({idFeature:"PolarHeatmap",apply:(i,s)=>{const e="dataType"in t,h="interpolation"in t?t:void 0,r=h?h.flipXY:void 0,n="bilinear"===(null==h?void 0:h.interpolation),o=null==h?void 0:h.intensityTextureType,a=null==h?void 0:h.littleEndian;return{idVertex:void 0,idFragment:`PolarHeatmap:${Cg(t)}`,vertexShaderModifiers:[],fragmentShaderModifiers:[cg("uniform vec2 uViewportSize","uniform vec2 uScale","uniform vec2 uDisp","uniform float uSectors","uniform float uAnnuli","uniform float uAmplitudeStart","uniform float uAmplitudeStep","uniform float uAmplitudeAxisStart","uniform float uAmplitudeAxisEnd","uniform float uAngleOffset","uniform float uAngleDirection",h&&"uniform sampler2D uTileIntensityValues",e&&"uniform vec4 uColor"),vg.texelFetchWithFallback[s],"ubyte"===o&&vg.decodeUbyteRGBAEncodedFloat,fg("vec2 posWorld = (2.0 * gl_FragCoord.xy / uViewportSize) - 1.0","vec2 posAxis = posWorld * uScale + uDisp","float amplitudeAxisInterval = uAmplitudeAxisEnd - uAmplitudeAxisStart","float amplitude = uAmplitudeAxisStart + sign(amplitudeAxisInterval) * sqrt(posAxis.x * posAxis.x + posAxis.y * posAxis.y)","float iAnnulus = (amplitude - uAmplitudeStart) / uAmplitudeStep"),h&&gg("iAnnulus","float angRad = atan(posAxis.y, posAxis.x) * uAngleDirection + uAngleOffset","if (angRad < 0.0) { angRad = angRad + 2.0 * 3.1415926538; }","if (angRad > 2.0 * 3.1415926538) { angRad = angRad - 2.0 * 3.1415926538; }","float iSector = uSectors * angRad / (2.0 * 3.1415926538)","vec2 cellIndex = vec2(iSector, iAnnulus)","ivec2 cellStart = ivec2(floor(cellIndex))","ivec2 cellEnd = cellStart + ivec2(1)","if (cellEnd.x >= int(uSectors)) { cellEnd = ivec2(0, cellEnd.y); }",r&&"cellIndex = vec2(cellIndex.y, cellIndex.x)",r&&"cellStart = ivec2(cellStart.y, cellStart.x)",r&&"cellEnd = ivec2(cellEnd.y, cellEnd.x)"),e&&gg("colorFragment =","colorFragment = uColor"),h&&gg("cellEnd","vec2 tileDimensions = "+(r?"vec2(uAnnuli, uSectors)":"vec2(uSectors, uAnnuli)"),n&&"vec4 sample00 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",n&&"vec4 sample01 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellStart.x, cellEnd.y), tileDimensions)",n&&"vec4 sample10 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellEnd.x, cellStart.y), tileDimensions)",n&&"vec4 sample11 = texelFetchWithFallback(uTileIntensityValues, cellEnd, tileDimensions)",n&&"float intensity00 = "+("float"===o?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${a})`),n&&"float intensity01 = "+("float"===o?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${a})`),n&&"float intensity10 = "+("float"===o?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${a})`),n&&"float intensity11 = "+("float"===o?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${a})`),n&&"vec2 lerpFactors = cellIndex - vec2(cellStart)",n&&"float intensityR1 = mix(intensity00, intensity10, lerpFactors.x)",n&&"float intensityR2 = mix(intensity01, intensity11, lerpFactors.x)",n&&"float intensityP = mix(intensityR1, intensityR2,  lerpFactors.y)",!n&&"vec4 sample0 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",!n&&"float intensityP = "+("float"===o?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${a})`)),...h?Sg("intensityP",h.lut):[]]}}})},Lg={"2D":"\nvoid main(void) {\n    gl_Position = vec4(posWorld, 0.0, 1.0 );\n}\n","2DMatrix":"\nvoid main(void) {\n    gl_Position = posWorld;\n}\n","3D":"\nuniform mat4 uViewProjectionMatrix;\nvoid main(void) {\n    gl_Position = uViewProjectionMatrix * vec4(posWorld, 1.0);\n}\n"},Rg={FragmentShader:"\nuniform float uIsHighlighted;\nuniform vec4 uHighlightColorOffset;\nuniform float uRenderEffectMask;\nvoid main(void) {\n    vec4 colorFragment = vec4(0.0, 0.0, 0.0, 0.0);\n    float antiAliasFactor = 1.0;\n    vec4 fragColorEnd = colorFragment;\n    if (fragColorEnd.a <= 0.0) { discard; }\n    fragColorEnd = clamp(fragColorEnd + uIsHighlighted * uHighlightColorOffset, vec4(0.0), vec4(1.0));\n    fragColorEnd = mix(fragColorEnd, vec4(1.0), uRenderEffectMask * fragColorEnd.a * 1000.0);\n    gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor);\n}\n",Empty:"\nvoid main(void) {\n}\n"};class Eg{constructor(t,i,s,e,h){if(this.id=t,this.shader=s,this.gl=e,this.info=h,!i||!s)throw new Vt(`Could not find ${this.Rz()} ${this.Ez()} shader source code.`);this.gl.shaderSource(s,i),this.gl.compileShader(s)}get src(){return""}Rz(){return this.id.toString()}Ez(){return this.gl.getShaderParameter(this.shader,this.gl.SHADER_TYPE)===this.gl.FRAGMENT_SHADER?"fragment":"vertex"}}class zg extends Eg{constructor(t,i,s,e){super(t,i,s.createShader(s.VERTEX_SHADER),s,e)}}class Vg extends Eg{constructor(t,i,s,e){super(t,i,s.createShader(s.FRAGMENT_SHADER),s,e)}}class Og{constructor(t,i,s,e){this.zz=new Map,this.Vz=new Map,this.Oz=s,this.Nz=s.createProgram(),this.Gz=`${t.Rz()} vertex`,this.Uz=`${i.Rz()} fragment`,s.attachShader(this.Nz,t.shader),s.attachShader(this.Nz,i.shader),s.bindAttribLocation(this.Nz,0,"aPos"),s.linkProgram(this.Nz),s.deleteShader(t.shader),s.deleteShader(i.shader),this.allAttributeNames=t.info.allAttributeNames,this.allUniformNames=Array.from(new Set(t.info.allUniformNames.concat(i.info.allUniformNames)).values()),this.vertexSharedRemovedVariables=t.info.removedVariableNames,this.fragmentSharedRemovedVariables=i.info.removedVariableNames}get vertexShaderSrc(){return""}get fragmentShaderSrc(){return""}Wz(t){return zi(0,(()=>Vi()))}Yz(t){const i=this.Xz(t);if(void 0===i)throw this.Wz(`Could not get ${t} uniform from ${this.Gz} and ${this.Uz} shaders.`);return i}Xz(t){const i=this.zz.get(t);if(i)return i;const s=this.Oz.getUniformLocation(this.Nz,t);return s?(this.zz.set(t,s),s):void 0}$z(t){const i=this.jz(t);if(void 0===i)throw this.Wz(`Could not get ${t} attribute from ${this.Gz} and ${this.Uz} shaders.`);return i}jz(t){const i=this.Vz.get(t);if(i||0===i)return i;const s=this.Oz.getAttribLocation(this.Nz,t);return s>=0?(this.Vz.set(t,s),s):void 0}W(){this.Oz.deleteProgram(this.Nz)}}const Ng=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/,Gg=t=>{let i;try{i=Yt.getComputedStyle(t)}catch(t){return null}return i};
 /**
  * stacking-order by Rich Harris
  * https://github.com/Rich-Harris/stacking-order
