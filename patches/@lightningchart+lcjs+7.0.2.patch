diff --git a/node_modules/@lightningchart/lcjs/dist/lcjs.mjs b/node_modules/@lightningchart/lcjs/dist/lcjs.mjs
index 8051914..d819912 100644
--- a/node_modules/@lightningchart/lcjs/dist/lcjs.mjs
+++ b/node_modules/@lightningchart/lcjs/dist/lcjs.mjs
@@ -1,5 +1,5 @@
 /* LightningChart JS v7.0.2 */
-import*as t from"immutable";import{Record as i}from"immutable";import s from"earcut";class e{constructor(){this.o=!0}u(){return this.o}}class h extends e{constructor(t,i){super(),this.S=t,this.M=t,this.o=i}_(t){return t!==this.S&&(this.M=this.S,this.S=t,this.o=!0),this}C(){return this.S}u(){return super.u()}}const r=(t,i)=>({x:t,y:i}),n=(t,i)=>({x:t,y:i}),o=(t,i,s)=>({position:t,high:i,low:s}),a=(t,i,s)=>({x:t,y:i,z:s}),l=t=>{const i=Array(0),s=Array(0);return t.length>0&&t.forEach((t=>{i.push(r(t.position,t.high)),s.push(r(t.position,t.low))})),[i,s]},c=(t,i)=>({min:t,max:i}),u=(t,i,s,e)=>({x:t,y:i,width:s,height:e}),d=(t,i=!0)=>new h(t,i),f=(t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}),A=f,g=(t,i)=>({left:void 0!==i.left?i.left:t.left,top:void 0!==i.top?i.top:t.top,right:void 0!==i.right?i.right:t.right,bottom:void 0!==i.bottom?i.bottom:t.bottom}),v=i({type:"color",r:1,g:1,b:1,a:1});class y extends v{constructor(t){super(t)}toUint32(){return void 0!==this.T||(this.T=F(this.getR(),this.getG(),this.getB(),this.getA())),this.T}toString(){return`color:${this.r},${this.g},${this.b},${this.a}`}setA(t){return this.set("a",t/255)}setR(t){return this.set("r",t/255)}setG(t){return this.set("g",t/255)}setB(t){return this.set("b",t/255)}getA(){return 255*this.get("a")}getR(){return 255*this.get("r")}getG(){return 255*this.get("g")}getB(){return 255*this.get("b")}getHighlight(){return this.F||(this.F=new y({r:this.r+.45*(1-this.r),g:this.g+.45*(1-this.g),b:this.b+.45*(1-this.b),a:this.a<1?this.a+.45*(1-this.a):1})),this.F}getLighter(){return this.I||(this.I=new y({r:this.r+.4*(1-this.r),g:this.g+.4*(1-this.g),b:this.b+.4*(1-this.b),a:this.a})),this.I}getDarker(){return this.P||(this.P=new y({r:this.r-.4*(1-this.r),g:this.g-.4*(1-this.g),b:this.b-.4*(1-this.b),a:this.a})),this.P}toRGBAString(){return`rgba( ${255*this.r}, ${255*this.g}, ${255*this.b}, ${255*this.a} )`}}const p=t=>!(!t||"object"!=typeof t||!("type"in t)||"color"!==t.type),m=(t,i,s,e=255)=>new y({r:t/255,g:i/255,b:s/255,a:e/255}),S=t=>{const i=t.startsWith("#")?t.substring(1):t.startsWith("0x")?t.substr(2):t;switch(i.length){case 8:return new y({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255,a:Number(`0x${i.substring(6,8)}`)/255});case 6:return new y({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255});case 4:return new y({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255,a:Number(`0x${i.charAt(3)}${i.charAt(3)}`)/255});case 3:return new y({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255});default:throw new Error(`ColorHEX parsing error | input: ${t}`)}},b=(t,i=1,s=1)=>{let e,h,r;t/=360;const n=Math.floor(6*t),o=6*t-n,a=s*(1-i),l=s*(1-o*i),c=s*(1-(1-o)*i);switch(n%6){case 0:e=s,h=c,r=a;break;case 1:e=l,h=s,r=a;break;case 2:e=a,h=s,r=c;break;case 3:e=a,h=l,r=s;break;case 4:e=c,h=a,r=s;break;default:e=s,h=a,r=l}return new y({r:e,g:h,b:r})},x=t=>{try{if(t.startsWith("rgba")){const i=t.substr(5).slice(0,-1),s=JSON.parse(`[${i}]`);return m(s[0],s[1],s[2],255*s[3])}if(t.startsWith("rgb")){const i=t.substr(4).slice(0,-1),s=JSON.parse(`[${i}]`);return m(s[0],s[1],s[2])}if(t.startsWith("hsl")){const i=t.substr(4).slice(0,-1).split(",").map(parseFloat),s=w(i[0],i[1],i[2]);return m(s[0],s[1],s[2])}return t.startsWith("#")||t.startsWith("0x")?S(t):S(C(t))}catch(t){}return console.warn(`ColorCSS parsing error: ${t}`),S("#fff")},M=t=>m(255&t,255&(t>>=8),255&(t>>=8),255&(t>>=8)),w=(t,i,s)=>{i/=100,s/=100;const e=(1-Math.abs(2*s-1))*i,h=t/60,r=e*(1-Math.abs(h%2-1));let n=[];isNaN(t)?n=[0,0,0]:h<=1?n=[e,r,0]:h<=2?n=[r,e,0]:h<=3?n=[0,e,r]:h<=4?n=[0,r,e]:h<=5?n=[r,0,e]:h<=6&&(n=[e,0,r]);const o=s-.5*e;return[Math.round(255*(n[0]+o)),Math.round(255*(n[1]+o)),Math.round(255*(n[2]+o))]},_={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},C=t=>{const i=_[t.toLowerCase()];if(i)return i;throw new Error(`Unknown color code: ${t}`)},k=new y({}),T=m(0,0,0,0),F=(t,i,s,e=255)=>(e<<24|s<<16|i<<8|t)>>>0,I=t=>F(255*t.r,255*t.g,255*t.b,255*t.a),P=(t,i)=>t.value-i.value,L=i({type:"lut",steps:[],title:"",units:"",interpolate:!0,color:m(0,0,0,255),length:0,min:0,max:0,subranges:[],isValid:!1,percentageValues:!1}),B=t=>{const{steps:i}=t,s=i.length;i.sort(P);const[e,h]=s>0?[i[0].value,i[s-1].value]:[0,0],r=s>0?s-1:0,n=Array(r);for(let t=0;t<r;t+=1)n[t]={min:i[t],max:i[t+1]};return{min:e,max:h,length:s,steps:i,subranges:n,isValid:s>0&&e!==h}};class D extends L{constructor(t){super(((t,i)=>({steps:t.steps,title:t.title,units:t.units,interpolate:t.interpolate,percentageValues:t.percentageValues,color:t.color,length:i.length,min:i.min,max:i.max,subranges:i.subranges,isValid:i.isValid}))(t,B(t)))}toString(){return`LUT:interpolate=${this.interpolate},steps=${this.steps.length},percentage=${this.percentageValues}`}setSteps(t){return this.merge(B({...this,steps:t}))}getSteps(){return this.get("steps")}setTitle(t){return this.set("title",t)}getTitle(){return this.get("title")}setUnits(t){return this.set("units",t)}getUnits(){return this.get("units")}setInterpolation(t){return this.set("interpolate",t)}getInterpolation(){return this.get("interpolate")}setFallbackColor(t){return this.set("color",t)}getFallbackColor(){return this.get("color")}setPercentageValues(t){return this.set("percentageValues",t)}getPercentageValues(){return this.get("percentageValues")}getColors(t,i){if(Array.isArray(t)){if(Array.isArray(t[0])){const s=t,e=s.length,h=s[0].length,r=[...Array(e)].map((()=>Array(h)));for(let t=0;t<e;t+=1)for(let e=0;e<h;e+=1)r[t][e]=this.L(s[t][e],i);return r}const s=t,e=s.length,h=Array(e);for(let t=0;t<e;t+=1)h[t]=this.L(s[t],i);return h}return this.L(t,i)}L(t,i){const{steps:s}=this,e=s.length;if(0===e)return this.getFallbackColor();if(1===e)return s[0].color||this.color;if(this.percentageValues,this.percentageValues&&i&&(t=Math.max(Math.min((t-i.min)/(i.max-i.min),1),0)),this.interpolate){for(let i=0;i<e-1;i+=1){const e=s[i],o=s[i+1],a=Math.min(e.value,o.value),l=Math.max(e.value,o.value);if(t>=a&&t<=l){if(a===l)return e.color;const i=(t-e.value)/(o.value-e.value);return h=e.color,r=o.color,n=i,new y({r:h.r+(r.r-h.r)*n,g:h.g+(r.g-h.g)*n,b:h.b+(r.b-h.b)*n,a:h.a+(r.a-h.a)*n})}}return t<s[0].value?s[0].color:s[e-1].color}var h,r,n;for(let i=e-1;i>=0;i-=1)if(t>=s[i].value)return s[i].color;return s[0].color}}const E=t=>!(!t||"object"!=typeof t||!("type"in t)||"lut"!==t.type),R=i({type:"fillstyle",fillType:"empty"});class z extends R{toString(){return"emptyFill"}}const V=new z,O=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"empty"===t.fillType),N=i({type:"fillstyle",fillType:"solid",color:m(255,255,255)});class G extends N{}class $ extends G{constructor(t){super({...t,fillType:"solid"})}toString(){return`solidFill:${this.color.toString()}`}setColor(t){return p(t)?this.set("color",t):this.set("color",t(this.get("color")))}getColor(){return this.get("color")}setA(t){return this.setColor(this.getColor().setA(t))}setR(t){return this.setColor(this.getColor().setR(t))}setG(t){return this.setColor(this.getColor().setG(t))}setB(t){return this.setColor(this.getColor().setB(t))}}const U=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"solid"===t.fillType);class Y extends G{constructor(t){super({...t,fillType:"individual"})}toString(){return`individualPointFill:${this.color.toString()}`}setFallbackColor(t){return p(t)?this.set("color",t):this.set("color",t(this.get("color")))}getFallbackColor(){return this.get("color")}}const H=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"individual"===t.fillType),X=i({type:"fillstyle",fillType:"palette",lut:new D({steps:[]}),lookUpProperty:"value"});class W extends X{constructor(t){super({...t,fillType:"palette"})}toString(){return`palettedFill:lut=${this.lut.toString()},lookUpProperty=${this.lookUpProperty}`}getPalette(){return this.get("lut")}setLookUpProperty(t){return"function"==typeof t?this.set("lookUpProperty",t(this.get("lookUpProperty"))):this.set("lookUpProperty",t)}getLookUpProperty(){return this.get("lookUpProperty")}}const j=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"palette"===t.fillType);var Z,Q;!function(t){t.circle="circle",t.ellipse="ellipse"}(Z||(Z={})),function(t){t.closestSide="closest-side",t.closestCorner="closest-corner",t.farthestSide="farthest-side",t.farthestCorner="farthest-corner"}(Q||(Q={}));const J=i({type:"fillstyle",fillType:"radial-gradient",stops:[{color:S("#f00"),offset:0},{color:S("#0f0"),offset:1}],position:r(.5,.5),shape:Z.ellipse,extent:Q.farthestCorner});class K extends J{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("RadialGradientFill requires minimum two color stops to be defined.")}toString(){return`radialGradientFill:${this.shape},${this.extent},${this.position.x},${this.position.y},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");return this.set("stops",t)}getColorStops(){return this.get("stops")}setPosition(t){return this.set("position",t)}getPosition(){return this.get("position")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}setExtent(t){return this.set("extent",t)}getExtent(){return this.get("extent")}}const q=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"radial-gradient"===t.fillType),tt=i({type:"fillstyle",fillType:"linear-gradient",stops:[{color:S("#f00"),offset:0},{color:S("#0f0"),offset:1}],angle:0});class it extends tt{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("LinearGradientFill requires minimum two color stops to be defined.")}toString(){return`linearGradientFill:${this.angle},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");const i=t.sort(((t,i)=>t.offset-i.offset));return this.set("stops",i)}getColorStops(){return this.get("stops")}setAngle(t,i){return this.set("angle",i?function(t){return 180*t/Math.PI}(t):t)}getAngle(t){return t?se(this.get("angle")):this.get("angle")}}const st=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"linear-gradient"===t.fillType);class et{constructor(t,i,s,e){this.D=new zt,this.cellIndex=t,this.cellSpan=i,this.cellsAmount=s,this.observedAmount=e,this.x=new ht,this.y=new ht,this.z=new ht;const h={...t},r={...i};if(e){const t=t=>{const i=t.value;this.cellsAmount.x=i.reduce(Is,0),this.cellIndex.x=i.reduce(((t,i,s)=>s>=h.x?t:t+i),0),this.cellSpan.x=i.reduce(((t,i,s)=>s>=h.x&&s<h.x+r.x?t+i:t),0),this.D.R("cellresize",{})};e.x.V("change",t),t({value:e.x.C()});const i=t=>{const i=t.value;this.cellsAmount.y=i.reduce(Is,0),this.cellIndex.y=i.reduce(((t,i,s)=>s>=h.y?t:t+i),0),this.cellSpan.y=i.reduce(((t,i,s)=>s>=h.y&&s<h.y+r.y?t+i:t),0),this.D.R("cellresize",{})};e.y.V("change",i),i({value:e.y.C()}),this.O=()=>{e.x.N("change",t),e.y.N("change",i)}}}G(){return this.O&&(this.O(),this.O=void 0),this}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class ht extends e{constructor(){super(...arguments),this.$=0,this.U=10,this.Y=1}H(){return this.o=!1,this}X(){return this.o=!0,this}getInnerStart(){return this.$}getInnerEnd(){return this.U}getInnerInterval(){return Math.abs(this.getInnerEnd()-this.getInnerStart())}W(t,i){return this.$=t,this.U=i,this.j(),this}Z(t){return this.Y=t,this.j(),this}J(t){return t/this.Y}j(){const t=this.J(this.U-this.$),i=this.Y;void 0!==this.K&&!1!==di(t,this.K)||(this.o=!0,this.q=i,this.K=t)}tt(){return this.K}it(){return this.q}st(){return this.U<this.$}et(t,i){return!0}}const rt={d1:t=>new t.scale1DConstructor(0,1,1,void 0),d2:t=>(new t.scaleXYConstructor).ht({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0),d3:()=>new et({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0)},nt=(t,i,s)=>i===s?t:s.rt(i.nt(t)),ot=(t,i,s)=>{if(i===s)return t;const e=i instanceof Se?i.x:i.x instanceof Se?i.x.x:i.x.ot,h=i instanceof Se?i.y:i.y instanceof Se?i.y.y:i.y.ot,r=s instanceof Se?s.x:s.x instanceof Se?s.x.x:s.x.ot,n=s instanceof Se?s.y:s.y instanceof Se?s.y.y:s.y.ot;return{...t,x:nt(t.x,e,r),y:nt(t.y,h,n)}},at=(t,i,s)=>{const e=t(i,s);return t=>new $({color:e(t)})},lt=(t,i,s)=>{const e=t(i+1,s);return t=>new K({stops:[{offset:0,color:e(t)},{offset:1,color:e(t).getDarker()}]})},ct=(t,i,s,e)=>{const h=t(i+1,e);return t=>new it({stops:[{offset:0,color:h(t).getDarker()},{offset:.5,color:h(t)},{offset:1,color:h(t).getDarker()}],angle:s||90})},ut=(...t)=>{if(0===t.length)return{remove:ui};let i=!1;const s=t.map((s=>{const e=e=>{((s,e,h)=>{i||(i=!0,t.filter((t=>t!==s)).forEach((t=>t.ct(e,h,!1,s.getStopped(),"synchronizedAxis"))),i=!1)})(s,e.start,e.end)};return s.addEventListener("intervalchange",e),e}));let e=!1;const h=t.map((i=>{const s=s=>{((i,s)=>{e||(e=!0,t.filter((t=>t!==i)).forEach((t=>t.setStopped(s))),e=!1)})(i,s.isStopped)};return i.addEventListener("stoppedchange",s),s}));return{remove:()=>{t.forEach(((t,i)=>{t.removeEventListener("intervalchange",s[i]),t.removeEventListener("stoppedchange",h[i])}))}}},dt=(t,i,s,e)=>{if(!s||0===s.length)throw new Error("Invalid use regularColorSteps 'colorPalette' is undefined or empty");const h=null==e?void 0:e.formatLabels,r=null==e?void 0:e.alpha;return s.map(((e,n)=>{const o=t+n/(s.length-1)*(i-t);return{color:void 0!==r?e.setA(r):e,value:o,label:h?h(o):void 0}}))},ft=t=>t&&"object"==typeof t&&"column"in t&&"row"in t,At=t=>t&&"object"==typeof t&&"z"in t&&"column"in t&&"row"in t,gt=t=>t&&"object"==typeof t&&"position"in t&&"open"in t&&"high"in t&&"isPacked"in t,vt=t=>t&&"object"==typeof t&&"annulus"in t&&"sector"in t,yt=t=>t&&"object"==typeof t&&"index"in t,pt=t=>t&&"object"==typeof t&&"xSize"in t&&"ySize"in t&&"zSize"in t,mt=t=>t&&"object"==typeof t&&"figure"in t&&"x1"in t&&"y2"in t&&"height"in t,St=t=>t&&"object"==typeof t&&"figure"in t&&"start"in t&&"end"in t&&"median"in t&&"upperQuartile"in t,bt=t=>t&&"object"==typeof t&&"figure"in t&&"x"in t&&"radiusX"in t&&"radiusY"in t,xt=t=>t&&"object"==typeof t&&"figure"in t&&"x"in t&&"coordinates"in t,Mt=t=>t&&"object"==typeof t&&"figure"in t&&"startX"in t&&"endX"in t,wt=t=>t&&"object"==typeof t&&"x"in t&&"y"in t,_t=t=>!0===t.isLcjsArtificialEvent;var Ct;!function(t){t[t.Nearest=0]="Nearest",t[t.NearestX=1]="NearestX",t[t.NearestY=2]="NearestY"}(Ct||(Ct={}));const kt=(t,i,s,e,h,r,n,o,a,l)=>{const c=t.length;if(0===c)return;const u=e?1:0,d=c-(h?2:1);if(s===Ct.Nearest)return Tt(t,i,r,n,u,d);if(s===Ct.NearestX||s===Ct.NearestY){if("boolean"==typeof l&&("x"===a&&s===Ct.NearestX||"y"===a&&s===Ct.NearestY))return Pt(t,ot(i,n,r),a,l,u,d);if(s===Ct.NearestX)return Ft(t,ot(i,n,r),o,u,d);if(s===Ct.NearestY)return It(t,ot(i,n,r),o,u,d)}},Tt=(t,i,s,e,h,r)=>{let n,o=Number.MAX_VALUE;for(let a=h;a<=r;a+=1){const h=t[a];if(!Number.isNaN(h.x)&&!Number.isNaN(h.y)){const t=ot(h,s,e),r=(t.x-i.x)**2+(t.y-i.y)**2;r<o&&(o=r,n=a)}}return n},Ft=(t,i,s,e,h)=>{if(i.x<s.min.x||i.x>s.max.x)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.x>i.x?e.x-i.x:i.x-e.x;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},It=(t,i,s,e,h)=>{if(i.y<s.min.y||i.y>s.max.y)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.y>i.y?e.y-i.y:i.y-e.y;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},Pt=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],c=a.x<l.x?a.x:l.x,u=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<c||o>d)||!n&&(o<u||o>f))return;let A=h,g=Math.floor((h+r)/2),v=r,y=-1;for(;;){const i=o-(n?t[g].x:t[g].y);if(i*(e?-1:1)>0)A=Math.min(g+1,v),y=Math.floor((A+v)/2);else{if(0===Math.abs(i))return g;v=Math.max(g-1,A),y=Math.floor((A+v)/2)}if(y===g){const s=g>h?Math.abs(o-(n?t[g-1].x:t[g-1].y)):bs,e=g<r?Math.abs(o-(n?t[g+1].x:t[g+1].y)):bs,a=Math.abs(i);switch(Math.min(a,s,e)){case s:return g-1;case e:return g+1;default:return g}}else g=y}},Lt=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],c=a.x<l.x?a.x:l.x,u=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<c||o>d)||!n&&(o<u||o>f))return;let A=h,g=Math.floor((h+r)/2),v=r,y=-1;for(;;){const s=o-(n?t[g].x:t[g].y);if(s*(e?-1:1)>0)A=Math.min(g+1,v),y=Math.floor((A+v)/2);else{if(0===Math.abs(s))return{a:g,b:g,lerpAmount:0};v=Math.max(g-1,A),y=Math.floor((A+v)/2)}if(y===g){if(s*(e?-1:1)<0&&g>h){const s=t[g-1],e=t[g];return{a:g-1,b:g,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}if(g<r){const s=t[g],e=t[g+1];return{a:g,b:g+1,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}return{a:g,b:g,lerpAmount:0}}g=y}};let Bt=0;class Dt{constructor(t,i,s){this.ut=d(!0),this.dt=!1,this.ft=!0,this.At=!1,this.vt=void 0,this.yt=0,this.D=new zt,this.St=t,this.bt=i,this.xt=s,this.Mt=Bt,Bt+=1,this.wt=t._t.highlightColorOffset}Ct(){let t;return this.kt("DataPattern",(i=>(t=i.pattern,!0))),"ProgressiveX"===t||"RegressiveX"===t?Ct.NearestX:"ProgressiveY"===t||"RegressiveY"===t?Ct.NearestY:Ct.Nearest}Tt(){}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}R(t,i,s,e){this.D.R(t,i,{collectionMember:s,info:e})}removeEventListener(t,i){this.D.removeEventListener(t,i)}Ft(t){return void 0!==this.xt.find((i=>i.type===t))}kt(t,i){var s;return!!this.Ft(t)&&!0===i(null===(s=this.xt.find((i=>i.type===t)))||void 0===s?void 0:s.args)}dispose(){return this.dt||(this.St.It(this),this.dt=!0,this.bt(this),this.D.R("dispose",{})),this}isDisposed(){return this.dt}setVisible(t){const i=this.ft;return this.ft=t,!t&&i&&this.ut.C()&&this.St.It(this),this}getVisible(){return this.ft}setPointerEvents(t){const i=this.ut.C();return this.ut._(t),t||i&&this.St.It(this),this}getPointerEvents(){return this.ut.C()}Pt(t){return this.vt=t,this}Lt(){return this.vt?this.vt:Et}Bt(t){return this.yt=t,this}Dt(){return this.yt}Et(t){return this.wt=t,this}Rt(){return this.wt}}const Et=c(r(0,0),r(0,0)),Rt={click:!0,contextmenu:!0,dblclick:!0,gotpointercapture:!0,lostpointercapture:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,wheel:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0};class zt{constructor(){this.zt=new Array,this.Vt=[],this.ut=!0,this.Ot=!1}setPointerEvents(t){this.ut=t,this.Vt.forEach((i=>i.setPointerEvents(t)))}getPointerEvents(){return this.ut}addEventListener(t,i,s){this.zt.push({listener:i,key:t,options:s||{}})}removeEventListener(t,i){const s=this.zt.findIndex((t=>t.listener===i));s>=0&&this.zt.splice(s,1)}set draggable(t){this.Ot=t,this.Vt.forEach((i=>{i.At=t}))}get draggable(){return this.Ot}R(t,i,s=void 0){this.zt.slice().reverse().forEach((e=>{e.key===t&&(e.listener(i,s),!0===e.options.once&&this.removeEventListener(t,e.listener))}))}Nt(t,i){Object.keys(Rt).forEach((s=>{t.addEventListener(s,((t,e)=>{const h=Vt(t)?{clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY}:t,r=(null==i?void 0:i.getExtraData)&&void 0!==h.clientX?i.getExtraData(h,e.collectionMember,e.info):{};this.R(s,t,r),!t.defaultPrevented&&(null==i?void 0:i.continueIfNotPrevented)&&i.continueIfNotPrevented(s,t,r)}))})),this.Vt.push(t),t.addEventListener("dispose",(()=>{const i=this.Vt.indexOf(t);i>=0&&this.Vt.splice(i,1)})),t.At=this.Ot,t.setPointerEvents(this.ut)}Gt(t,i){Object.keys(Rt).forEach((s=>{t.addEventListener(s,((t,e)=>{const h=i(e.collectionMember);h&&this.R(s,t,h)}))})),this.Vt.push(t),t.addEventListener("dispose",(()=>{const i=this.Vt.indexOf(t);i>=0&&this.Vt.splice(i,1)})),t.setPointerEvents(this.ut),t.At=this.Ot}$t(t){Object.keys(Rt).forEach((i=>{t.addEventListener(i,((t,s)=>{this.R(i,t,s)}))})),t.setPointerEvents(this.ut),t.draggable=this.Ot}}const Vt=t=>!(!t||"object"!=typeof t||!("touches"in t)),Ot={linear:(t,i,s)=>{const e=i-t;return h=>h<s?t+e/s*h:i},easeIn:(t,i,s)=>e=>e<s?t+Math.abs(2*(Math.sqrt(.5)*e/s)**2)*(i-t):i,easeOut:(t,i,s)=>e=>e<s?t+Math.abs(1-2*(Math.sqrt(.5)*(1-e/s))**2)*(i-t):i,ease:(t,i,s)=>e=>e<s?t+(e<s/2?.5*(e/s*2)**2.5:.5+.5*(1-(1-2*(e/s-.5))**2.5))*(i-t):i,logarithmic:t=>{const i=Oi(t);return(s,e,h)=>{const r=i(s),n=i(e);return i=>i<h?t**(r+Math.abs(1-2*(Math.sqrt(.5)*(1-i/h))**2)*(n-r)):e}}};class Nt{constructor(t,i,s,e=Ot.linear,h){this.delta=0,this.nextAnimations=new Array,this.Ut=!1,this.easing=Ot.linear,this.isOver=()=>(this.delta===this.duration||this.Ut)&&0===this.nextAnimations.length,this.D=new zt,this.values=t,this.action=i,this.duration=s,this.easing=e,this.Yt=h,this.eases=t.map((([t,i])=>e(t,i,s)))}Ht(){this.D.R("start",{})}start(){return this.Yt.includes(this)||this.Yt.push(this),this}addNextAnimations(t){return t instanceof Array?t.forEach((t=>this.nextAnimations.push(t))):this.nextAnimations.push(t),this}NextAnimation(t,i,s=this.duration,e=this.easing){const h=new Nt(t,i,s,e,this.Yt);return this.nextAnimations.push(h),h}finish(t=!0){if(this.Ut=!0,this.Yt.splice(this.Yt.indexOf(this),1),this.nextAnimations.length>0){const i=this.nextAnimations[0];return t&&this.D.zt.forEach((t=>{"allAnimationEnd"===t.key&&i.addEventListener("allAnimationEnd",t.listener),"everyAnimationEnd"===t.key&&i.addEventListener("everyAnimationEnd",t.listener)})),i.addNextAnimations(this.nextAnimations.slice(1)),i.start(),t&&(this.D.R("end",{nextAnimation:i}),this.D.R("everyAnimationEnd",{nextAnimation:i})),i}t&&(this.D.R("end",{nextAnimation:void 0}),this.D.R("everyAnimationEnd",{nextAnimation:void 0}),this.D.R("allAnimationEnd",{}))}finishAll(t=!0){let i=this;for(;i;)i=i.finish(t)}getFinalValues(){return this.nextAnimations.length>0?this.nextAnimations[this.nextAnimations.length-1].values.map(li):this.values.map(li)}getTimeUntilFinish(){let t=this.duration-this.delta;for(let i=0;i<this.nextAnimations.length;i+=1)t+=this.nextAnimations[i].duration-this.nextAnimations[i].delta;return t}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Gt=(t,i=60)=>{i>60&&console.log("Note: Animator FPS is usually capped at 60 by the browser!");const s=[];let e,h,r=0;const n=()=>{e=void 0;const o=Date.now();h=h||o,r=o-h,r/1e3>=1/i&&(h=Date.now()-r%(1e3/i),s.forEach((t=>{0===t.delta&&t.Ht(),t.delta+=r-r%(1e3/i),t.delta>t.duration&&(t.delta=t.duration),t.action(t.eases.map((i=>i(t.delta)))),t.delta===t.duration&&t.finish()})),t()),s.length>0?e=ni.requestAnimationFrame(n):(e=void 0,h=void 0)};return(t=1e3,i=Ot.linear)=>(h,r,o=t)=>{const a=new Nt(h,r,o,i,s).start();return e||(e=ni.requestAnimationFrame(n)),a}};var $t;!function(t){t[t.Fill=0]="Fill",t[t.Fit=1]="Fit",t[t.Stretch=2]="Stretch",t[t.Center=3]="Center",t[t.Tile=4]="Tile"}($t||($t={}));const Ut=i({type:"fillstyle",fillType:"image",source:void 0,surroundingColor:m(0,0,0,0),sourceMissingColor:m(0,0,0,0),fitMode:$t.Fill});class Yt extends Ut{constructor(t){super(t)}setSource(t){return this.set("source",t)}getSource(){return this.get("source")}setSurroundingColor(t){return p(t)?this.set("surroundingColor",t):this.set("surroundingColor",t(this.get("surroundingColor")))}getSurroundingColor(){return this.get("surroundingColor")}setSourceMissingColor(t){return p(t)?this.set("sourceMissingColor",t):this.set("sourceMissingColor",t(this.get("sourceMissingColor")))}getSourceMissingColor(){return this.get("sourceMissingColor")}setFitMode(t){return this.set("fitMode",t)}getFitMode(){return this.get("fitMode")}toString(){return`imagefill:${this.fitMode}`}}const Ht=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"image"===t.fillType),Xt=i({type:"linestyle",lineType:"empty"}),Wt=new class extends Xt{constructor(){super(...arguments),this.thickness=0}setThickness(t){return this}getThickness(){return 0}Xt(){return 0}setFillStyle(t){return this}getFillStyle(){return V}},jt=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"empty"!==t.lineType),Zt=-34028234663852886e22,Qt="-340282346638528859811704183484516925440.0";class Jt extends Error{constructor(t,i){super(`ChartError: ${t} ${i?`in ${i.constructor.name}`:""}`),Object.setPrototypeOf(this,Jt.prototype)}}class Kt extends Error{constructor(t,i,s=!1){const e=`EngineError: ${t} ${i?`in ${i.constructor.name}`:""}`;super(e),s&&ni.alert(e),Object.setPrototypeOf(this,Kt.prototype)}}class qt extends Kt{constructor(t){super(t),Object.setPrototypeOf(this,qt.prototype)}}var ti,ii,si,ei;!function(t){t[t.Content=0]="Content",t[t.PaddedContent=1]="PaddedContent",t[t.PaddedBackground=2]="PaddedBackground",t[t.Everything=3]="Everything"}(ti||(ti={})),function(t){t[t.never=0]="never",t[t.always=1]="always",t[t.whenHovered=2]="whenHovered",t[t.whenDragged=3]="whenDragged",t[t.whenNotDragged=4]="whenNotDragged",t[t.whenHoveredOrDragged=5]="whenHoveredOrDragged"}(ii||(ii={})),function(t){t[t.notDraggable=0]="notDraggable",t[t.draggable=1]="draggable",t[t.onlyHorizontal=2]="onlyHorizontal",t[t.onlyVertical=3]="onlyVertical"}(si||(si={})),function(t){t[t.Up=0]="Up",t[t.Right=1]="Right",t[t.Down=2]="Down",t[t.Left=3]="Left"}(ei||(ei={}));const hi=(...t)=>{const i=t=>t&&"object"==typeof t&&!Array.isArray(t);return t.reduce(((t,s)=>s?(Object.keys(s).forEach((e=>{const h=t[e],r=s[e];i(h)&&i(r)?t[e]=hi(h,r):t[e]=r})),t):t),{})},ri=t=>{if(t.resourcesBaseUrl){const i=t.styleFactory(t.resourcesBaseUrl),s=Ht(i)&&i.getSource(),e=s&&s instanceof Image?s:void 0;return null==e||e.addEventListener("error",(()=>{as(t.resourcesBaseUrl,e.src,"Theme resource",{shouldCrash:!1})})),i}const i=`${ni.location.origin}/resources`,s=t.styleFactory(i);if(Ht(s)){const i=s.getSource();i instanceof Image&&i.addEventListener("error",(()=>{const s=t.styleFactory("https://lcjs-resources.lightningchart.com/v1"),e=Ht(s)&&s.getSource(),h=e&&e instanceof Image?e:void 0;ni.console.warn("LightningChart JS warning | fallbacking to publicly hosted asset resources.\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/warning-using-publicly-hosted-resources/"),null==h||h.addEventListener("load",(()=>{t.apply(s)})),null==h||h.addEventListener("error",(()=>{as(t.resourcesBaseUrl,i.src,"Theme resource",{shouldCrash:!1})}))}))}return s},ni="undefined"!=typeof window?window:"undefined"!=typeof global&&global._lcjs?global._lcjs:{},oi=(t,i)=>t.x===i.x&&t.y===i.y,ai=t=>t!==bs&&t!==xs&&!Number.isNaN(t)&&Number.isFinite(t)&&t!==1/0&&t!==-1/0,li=t=>t[1],ci=t=>t.dispose(),ui=()=>{},di=(t,i)=>t===i,fi=(t,i,s)=>s>i?Math.min(Math.max(t,i),s):Math.min(Math.max(t,s),i),Ai=t=>Array.prototype.concat.apply([],t),gi=(t,i)=>void 0===t||Number.isNaN(t)?i:t,vi=t=>t.Wt(),yi=t=>t.jt(),pi=t=>t.Zt(),mi=t=>t.Qt(),Si=t=>t.min.x,bi=t=>t.max.x,xi=t=>t.min.y,Mi=t=>t.max.y,wi=(t,i,s,e,h)=>{if(t.length>0){let r=h?e(h):void 0;for(let e=0;e<t.length;e+=1){const h=i(t[e]);void 0!==h&&(r=void 0!==r?s(r,h):h)}return r}if(h)return e(h)},_i=(t,i)=>t.position===i.position&&t.high===i.high&&t.low===i.low,Ci=r(0,1),ki=r(1,0),Ti=r(0,-1),Fi=r(-1,0),Ii=r(0,0),Pi=t=>{switch(t){case ei.Up:return Ci;case ei.Right:return ki;case ei.Down:return Ti;case ei.Left:return Fi;default:return Ii}},Li=t=>t===ei.Left||t===ei.Right,Bi=t=>{t.stopPropagation(),t.preventDefault()},Di=(t,i)=>{if(!i)return t;const s=t.length,e=new Float32Array(2*s);let h=0;for(let i=0;i<s;i+=1){const s=t[i],r=Math.fround(s);e[h+0]=r,e[h+1]=s-r,h+=2}return e},Ei=(t,i,s=Float32Array)=>{if(!i){const i=t.length,e=new s(2*i);let h=0;for(let s=0;s<i;s+=1){const i=t[s];e[h+0]=i.x,e[h+1]=i.y,h+=2}return e}const e=t.length,h=new s(4*e);let r=0;for(let i=0;i<e;i+=1){const s=t[i],e=Math.fround(s.x),n=Math.fround(s.y);h[r+0]=e,h[r+1]=n,h[r+2]=s.x-e,h[r+3]=s.y-n,r+=4}return h},Ri=t=>{const i=t.length,s=new Float32Array(3*i);let e=0;for(let h=0;h<i;h+=1){const i=t[h];s[e+0]=i.x,s[e+1]=i.y,s[e+2]=i.z,e+=3}return s},zi=t=>i=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)},Vi=t=>{let i=t.length;for(let s=0;s<i-1;s+=1)t[s].x===t[s+1].x&&t[s].y===t[s+1].y&&(t.splice(s,1),s-=1,i-=1);return t},Oi=t=>{const i=Math.log(t);return t=>Math.log(t)/i},Ni=Oi(Math.E),Gi=(t,i)=>{const s=i[t];return s?s():void 0},$i=(t,i)=>{let s;if(i)s=i;else{const i={x:0,y:0};for(let s=0;s<t.length;s+=1)i.x+=t[s].x/t.length,i.y+=t[s].y/t.length;s=i}return t.sort(((t,i)=>ee(Zs(t,s))-ee(Zs(i,s))))},Ui=(t,i,s)=>{if(0===t.length)return!1===s.canReturnB?i.slice():i;const e=i.length;if(e<1e5)return t.push.apply(t,i),t;for(let s=0;s<e;s+=1)t.push(i[s]);return t},Yi=(t,i,s)=>s<0?t:s>1?i:m(t.getR()+s*(i.getR()-t.getR()),t.getG()+s*(i.getG()-t.getG()),t.getB()+s*(i.getB()-t.getB()),t.getA()+s*(i.getA()-t.getA())),Hi=t=>255===t.getA()?t:t.setA(255),Xi=(()=>{const t=m(0,0,0);return i=>(i=Hi(i),new it({angle:180,stops:[{offset:0,color:i},{offset:1,color:Yi(i,t,.5)}]}))})(),Wi=(()=>{const t=t=>{var i;if(t){if(U(t)){if(0===t.getColor().getA())return;return t.getColor()}if(q(t)||st(t)){const s=t.getColorStops();return 3===s.length?s[1].color:null===(i=s[0])||void 0===i?void 0:i.color}j(t)}};return(i,s,e,h)=>{var r;const n=[];if(h.fill&&n.push(h.fill),h.fill2&&n.push(h.fill2),h.stroke){const t=h.stroke.getFillStyle();t!==V&&("stroke"===(null===(r=h.behavior)||void 0===r?void 0:r.priority)?n.unshift(t):n.push(t))}if(h.point3D){const t=h.point3D;n.push(t.getFillStyle())}let o;if(h.behavior&&!0===h.behavior.colorStep){const[i,e]=n.reduce(((i,s)=>{if(i[0]&&i[1])return i;const e=t(s);return e&&(void 0===i[0]?i[0]=e:i[1]=e),i}),[void 0,void 0]);o=i&&e?(a=i)===(l=e)||a.getR()===l.getR()&&a.getG()===l.getG()&&a.getB()===l.getB()?Xi(a):(a=Hi(a),l=Hi(l),new it({angle:0,stops:[{offset:0,color:l},{offset:.5,color:l},{offset:.5,color:a},{offset:1,color:a}]})):s.uiButtonFillStyle}else{const i=n.reduce(((i,s)=>i||t(s)),void 0);o=i?e?new $({color:i}):Xi(i):s.uiButtonFillStyle}var a,l;i.setButtonOnFillStyle(o)}})(),ji=(t,i)=>{const s=t;if(j(s))return{lut:s.getPalette(),lookUpProperty:s.getLookUpProperty(),valueRange:i}},Zi=t=>{let i=0;return()=>(i+=1,`${t}-${i}`)},Qi=(t,i)=>{let s="string"==typeof t?t:String(t);const e=s.indexOf(".");let h=e>=0?e:s.length;for(;h<i;h+=1)s=`0${s}`;return s},Ji=(t,i)=>"function"==typeof t?t(i):t,Ki=(t,i)=>i(),qi=()=>new Error("LightningChart JS encountered an unexpected error.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact");new $({color:m(255,255,255,1)});const ts=t=>t===Ms||t.min.x===Ms.min.x&&t.max.x===Ms.max.x&&t.min.y===Ms.min.y&&t.max.y===Ms.max.y,is=t=>Array.from(new Set(t)),ss=t=>t.filter((t=>void 0!==t)),es=t=>"boolean"==typeof t?t?1:0:t>1?1:t<0?0:t,hs=(t,i,s)=>{i.length<=0||(t.setText(s.label).setOn(i[0].getVisible()),s.style&&t.setButtonOnFillStyle(s.style),s.toggleVisibilityOnClick&&t.addEventListener("switch",(t=>{i.forEach((i=>i.setVisible(t.state)))})),t.addEventListener("pointerenter",(()=>{i.forEach((t=>t.setHighlight(!0)))})),t.addEventListener("pointerleave",(()=>{i.forEach((t=>t.setHighlight(!1)))})),i.forEach((i=>i.addEventListener("pointerenter",(()=>t.setHighlight(!0))))),i.forEach((i=>i.addEventListener("pointerleave",(()=>t.setHighlight(!1))))))},rs=(t,i)=>{throw new Error(i)},ns=t=>{let i;return()=>i||(i=t(),i)},os=t=>{if(t===Wt)return 0;const i=t.getThickness();return i<0?1:1*i},as=(t,i,s,e)=>{const h=`LightningChart JS Resources not found.\nresourcesBaseUrl: "${t}"\ninitiator: ${s}\nresource url: ${i}\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/error-resources-not-found/`;if(e.shouldCrash)throw ni.alert(h),new Error(h);ni.console.warn(h)},ls=(t,i,s,e=0)=>{if(t<s(e)||s(i)<t)return;const h=i;for(;e!==i;){const h=Math.ceil((e+i)/2);t<s(h)?i=h-1:e=h}const r=Math.abs(t-s(e));return e<h&&Math.abs(t-s(e+1))<r?e+1:e},cs=()=>{const t=new Map;return{Jt:i=>(Object.keys(Rt).forEach((s=>{i.addEventListener(s,((i,e)=>{const h=e.collectionMember&&t.get(e.collectionMember);if(!h)return;const r=Vt(i)?{clientX:i.changedTouches[0].clientX,clientY:i.changedTouches[0].clientY}:i,n=h.Kt(e.info,r);h.D.R(s,i,n)}))})),i),qt:(i,s)=>{t.set(i,s)},ti:()=>{t.clear()}}},us={left:0,right:0,top:0,bottom:0},ds=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER),fs=(t,i,s)=>{i&&i.ii();const e=s();return Object.keys(e).forEach((i=>{const s=i,h=e[s];t.addEventListener(s,h)})),{si:t,ii:()=>{Object.entries(e).forEach((([i,s])=>{const e=i,h=s;t.removeEventListener(e,h)}))}}},As=(t,i,s)=>{let e;const h=()=>(e=s(),e),r={...t,resolve:()=>e||h()};for(const t of Object.keys(i))Object.defineProperty(r,t,{get:function(){return e?e[t]:h()[t]}});return r},gs=t=>{if(t)return"resolve"in t?t.resolve():t},vs=t=>{let i=t;return{ei:t=>{const s=i;return i=s+t,[s,t]}}},ys=t=>{ni.document.body.addEventListener(t,(t=>{t.stopPropagation(),t.preventDefault()}),{once:!0,capture:!0})},ps=()=>{const t=ni.performance.now();ni.document.body.addEventListener("contextmenu",(i=>{ni.performance.now()-t>5e3||i.preventDefault()}),{once:!0})},ms=()=>{const t=ni.performance.now();ni.document.body.addEventListener("touchstart",(i=>{ni.performance.now()-t>5e3||i.preventDefault()}),{once:!0})},Ss={add:(t,i)=>a(t.x+i,t.y+i,t.z+i),addVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x+=t.x,s.y+=t.y,s.z+=t.z;return s},subtract:(t,i)=>a(t.x-i,t.y-i,t.z-i),subtractVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x-=t.x,s.y-=t.y,s.z-=t.z;return s},multiply:(t,i)=>a(t.x*i,t.y*i,t.z*i),divide:(t,i)=>a(t.x/i,t.y/i,t.z/i),multiplyVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x*=t.x,s.y*=t.y,s.z*=t.z;return s},divideVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x/=t.x,s.y/=t.y,s.z/=t.z;return s},length:t=>Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),normalize:t=>Ss.divide(t,Ss.length(t)),dot:(t,i)=>t.x*i.x+t.y*i.y+t.z*i.z,cross:(t,i)=>a(t.y*i.z-t.z*i.y,t.z*i.x-t.x*i.z,t.x*i.y-t.y*i.x),angle:(t,i)=>Math.acos(Ss.dot(t,i)/(Ss.length(t)*Ss.length(i))),rotateAroundAxis(t,i,s){const e=Math.cos(s),h=Math.sin(s),r=Ss.dot(i,t),n=Ss.cross(i,t);return Ss.addVec(Ss.multiply(t,e),Ss.addVec(Ss.multiply(i,(1-e)*r),Ss.multiply(n,h)))},lerp:(t,i,s)=>(s=fi(s,0,1),Ss.addVec(Ss.multiply(t,1-s),Ss.multiply(i,s))),equals:(t,i)=>di(t.x,i.x)&&di(t.y,i.y)&&di(t.z,i.z),abs:t=>({x:Math.abs(t.x),y:Math.abs(t.y),z:Math.abs(t.z)}),sign:t=>({x:Math.sign(t.x),y:Math.sign(t.y),z:Math.sign(t.z)})},bs=Number.MAX_SAFE_INTEGER,xs=-Number.MAX_SAFE_INTEGER,Ms=c(r(bs,bs),r(xs,xs)),ws=c(a(bs,bs,bs),a(xs,xs,xs)),_s=(t,i)=>{const s=Math.log(t)/Math.log(i);return Math.floor((t=>(Math.ceil(t)-t<1e-4?t=Math.ceil(t):t-Math.floor(t)<1e-4&&(t=Math.floor(t)),t))(s))},Cs=(t,i)=>!(i.min.x>t.max.x||i.max.x<t.min.x||i.min.y>t.max.y||i.max.y<t.min.y),ks=(t,i)=>!(t[1].x<i[0].x||t[0].x>i[1].x||t[3].y<i[0].y||t[0].y>i[3].y),Ts=(t,i)=>({min:{x:Math.min(t[0].x,i[0].x),y:Math.min(t[0].y,i[0].y)},max:{x:Math.max(t[2].x,i[2].x),y:Math.max(t[2].y,i[2].y)}}),Fs=t=>{const i=t.length;for(let s=0;s<i;s+=1)for(let e=s+1;e<i;e+=1)if(Cs(t[s],t[e]))return!0;return!1},Is=(t,i)=>i+t,Ps=(t,i,s)=>{const e=Zs(i,t),h=e.x*e.x+e.y*e.y;if(0===h)return t;const n=Zs(s,t),o=(n.x*e.x+n.y*e.y)/h;return o<=0?t:o>=1?i:r(t.x+o*e.x,t.y+o*e.y)},Ls=(t,i,s)=>s>i?t>=i&&t<=s:t>=s&&t<=i,Bs=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)},Ds=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return s*s+e*e},Es=(t,i,s)=>js(t,Ws(Zs(i,t),s)),Rs=(t,i,s)=>Ss.addVec(t,Ss.multiply(Ss.subtractVec(i,t),s));function zs(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,h=t[0].y,n=t[0].y;for(let r=0;r<i;r+=1){const i=t[r];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>h&&(h=i.y),i.y<n&&(n=i.y)}return c(r(e,n),r(s,h))}return Ms}function Vs(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,h=t[0].y,r=t[0].y,n=t[0].z,o=t[0].z;for(let a=0;a<i;a+=1){const i=t[a];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>h&&(h=i.y),i.y<r&&(r=i.y),i.z>n&&(n=i.z),i.z<o&&(o=i.z)}return c(a(e,r,o),a(s,h,n))}return ws}const Os=(...t)=>{const i={min:{x:bs,y:bs},max:{x:xs,y:xs}};for(const s of t)i.min.x=i.min.x<s.min.x?i.min.x:s.min.x,i.max.x=i.max.x>s.max.x?i.max.x:s.max.x,i.min.y=i.min.y<s.min.y?i.min.y:s.min.y,i.max.y=i.max.y>s.max.y?i.max.y:s.max.y;return i},Ns=(t,i)=>c(a(t.min.x<i.min.x?t.min.x:i.min.x,t.min.y<i.min.y?t.min.y:i.min.y,t.min.z<i.min.z?t.min.z:i.min.z),a(t.max.x>i.max.x?t.max.x:i.max.x,t.max.y>i.max.y?t.max.y:i.max.y,t.max.z>i.max.z?t.max.z:i.max.z));function Gs(t,i,s,e){const h=t.x-e.x,r=t.y-e.y,n=e.x-s.x,o=s.y-e.y,a=o*h+n*r,l=(e.y-i.y)*h+(i.x-e.x)*r,c=o*(i.x-e.x)+n*(i.y-e.y);return c<0?a<=0&&l<=0&&a+l>=c:a>=0&&l>=0&&a+l<=c}function $s(t,i,s){return r(Math.cos(s)*(t.x-i.x)+Math.sin(s)*(t.y-i.y)+i.x,-Math.sin(s)*(t.x-i.x)+Math.cos(s)*(t.y-i.y)+i.y)}function Us(t,i){return r(t.x-i.x,t.y-i.y)}function Ys(t){const i=Xs(t);return 0===i?r(0,0):r(t.x/i,t.y/i)}function Hs(t,i){let s={x:i.x-t.x,y:i.y-t.y};s=Ys(s);const e=Math.PI/2,h=s.x;return s.x=-Math.sin(e)*s.y,s.y=h*Math.sin(e),s}function Xs(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function Ws(t,i){return r(t.x*i,t.y*i)}function js(t,i){return r(t.x+i.x,t.y+i.y)}function Zs(t,i){return r(t.x-i.x,t.y-i.y)}function Qs(t,i){return r(t.x*i.x,t.y*i.y)}function Js(t,i){return r(t.x/i.x,t.y/i.y)}function Ks(t){return Ws(t,-1)}function qs(t,i){return t.x*i.x+t.y*i.y}const te=(t,i,s)=>{const e=(s.y-i.y)/(s.x-i.x),h=i.y+(t-i.x)*e;return r(t,h)},ie=(t,i,s)=>{const e=(s.y-i.y)/(s.x-i.x),h=i.x+(t-i.y)/e;return r(h,t)};function se(t){return t*Math.PI/180}function ee(t){return 180*Math.atan2(t.y,t.x)/Math.PI}function he(t){return r(Math.cos(t),Math.sin(t))}const re=(t,i,s,e)=>{let h,n,o,a;if(i.x-t.x!=0||e.x-s.x!=0)return i.x-t.x==0?(o=i.x,n=(e.y-s.y)/(e.x-s.x),a=n*(o-s.x)+s.y):e.x-s.x==0?(o=e.x,h=(i.y-t.y)/(i.x-t.x),a=h*(o-t.x)+t.y):(h=(i.y-t.y)/(i.x-t.x),n=(e.y-s.y)/(e.x-s.x),o=(s.y-n*s.x+h*t.x-t.y)/(h-n),a=h*(o-t.x)+t.y),r(o,a)},ne=(t,i)=>{const s=t.length,e=i.length,h=new Uint16Array(s+e);return h.set(t,0),h.set(i,s),h};class oe{constructor(){this.hi=!0}getInnerStart(){return this.$}getInnerEnd(){return this.U}getInnerInterval(){return Math.abs(this.U-this.$)}W(t,i){return this.hi=t!==this.$||i!==this.U,this.$=t,this.U=i,this}H(){return this.hi=!1,this}X(){return this.hi=!0,this}}class ae extends oe{constructor(t,i,s,e){if(super(),this.ri=!0,this.ni=!0,this.oi=[0,0],this.ai=!0,this.li=t,this.ci=i,this.ui=s,this.di=t,this.fi=i,e){const t=t=>{this.Ai(t.value)};e.V("change",t),this.Ai(e.C()),this.gi=()=>e.N("change",t)}}Z(t){return this.Y=t,this.ni=!0,this}yi(t){return this.oi=t.map(Math.abs),this.ai=!0,this}pi(){return this.li/this.ui*this.Y+this.oi[0]}mi(){return(this.li+this.ci)/this.ui*this.Y-this.oi[1]}Si(){return this.getCellSize()-this.bi()}xi(){return this.Y}getCellSize(){return this.Mi(this.Y)}bi(){return this.oi[0]+this.oi[1]}wi(){return this.oi}Ai(t){this.ui=t.reduce(Is,0),this.li=t.reduce(((t,i,s)=>s>=this.di?t:t+i),0),this.ci=t.reduce(((t,i,s)=>s>=this.di&&s<this.di+this.fi?t+i:t),0),this.ri=!0,this._i()}Mi(t){return t*this.ci/this.ui}H(){return super.H(),this.ni=!1,this.ai=!1,this.ri=!1,this}X(){return super.X(),this.ni=!0,this.ai=!0,this.ri=!0,this}}class le extends ae{constructor(t,i,s,e){super(t,i,s,e),this.Ci={internal:10,function:ce(10),number:10},this.Y=1e3,this.W(1,1e3),this.ki=this.Ti()}et(t,i,s,e,h){if(t===i)return!1;const r=Math.min(t,i)<de,n=Math.max(t,i)>fe;return!r&&!n||!!h&&(i>t?{start:r?de:t,end:n?fe:i}:{start:n?fe:t,end:r?de:i})}nt(t){const i=this.pi(),s=this.mi(),e=Math.max(t,de);return i+(this.Ci.function(e)-this.ki.scaleStartLog)/this.ki.scaleIntervalLog*(s-i)}rt(t){const i=this.pi(),s=(t-i)/(this.mi()-i),e=this.ki.scaleStartLog+s*this.ki.scaleIntervalLog;return this.Ci.number**e}_i(){this.Ci&&this.Ti()}W(t,i){return super.W(t,i),this.Ci&&this.Ti(),this}yi(t){return super.yi(t),this.Ci&&this.Ti(),this}Z(t){return super.Z(t),this.Ci&&this.Ti(),this}Fi(t){return this.Ci={internal:t,function:ce(t),number:ue(t)},this}Ii(){return this.Ci.internal}Pi(t,i){const s=this.nt(t)+i;return this.rt(s)}Li(){return this.ni||this.hi||this.ai||this.ri}Ti(){const t=this.Ci.function(this.$),i=this.Ci.function(this.U)-t,s=2*this.pi()/this.Y-1,e=2*this.mi()/this.Y-1-s;return this.ki={scaleStartLog:t,scaleIntervalLog:i,viewportStart:s,viewportSize:e},this.ki}Bi(){return this.ki}}const ce=t=>"e"===t?Ni:Oi(t),ue=t=>"e"===t?Math.E:t,de=.9*10**-20,fe=1.1*10**25,Ae=[{prefix:"T",unit:10**12},{prefix:"B",unit:10**9},{prefix:"M",unit:1e6},{prefix:"K",unit:1e3}],ge=(t,i,s)=>{const e=Math.abs(s-i);if(0===e)return t.toFixed(0);const h=Math.max(2-_s(e,10),0);return t.toFixed(h)},ve={Numeric:(t,i)=>{const{start:s,end:e}=i;return ge(t,s,e)},NumericUnits:(t,i)=>{const{start:s,end:e}=i,h=Math.abs(e-s),r=t<0;t=Math.abs(t);let n="",o="";if(h>=1e3&&t>1e3){let i="";for(const s of Ae){const e=Math.round(1e3*t/s.unit)/1e3;if(e>=1){i=e.toString(),o=s.prefix;break}}n=(r?"-":"")+i}else{let i=String(Math.floor(t));const s=_s(t,1e3);for(let t=1;t<=s;t+=1){const s=i.length-(3*t+(t-1));i=`${i.substring(0,s)} ${i.substring(s,i.length)}`}n=(r?"-":"")+i+(h<=10?((t,i)=>{if(0===i)return"";let s=(Math.abs(t)-Math.abs(Math.floor(t))).toString().substring(1);return s.length>i&&(s=s.substring(0,i+1)),s})(t,2-_s(h,10)):"")}return n+=o,n},LogarithmicExponentsRounded:(t,i,s,e=10)=>{const h=ce(e)(t);return`${e}${ye(h)}`},LogarithmicExponents:(t,i,s,e=10)=>{const h=ce(e),r=Math.floor(h(t)),n=t/ue(e)**r;return`${Math.round(n)}×${e}${ye(r)}`},LogarithmicExtreme:(t,i,s,e=10)=>{const h=ce(e),r=Math.floor(h(t));return`${(t/ue(e)**r).toFixed(2)}×${e}${ye(r)}`},LogarithmicNoExponents:(t,i,s,e=10)=>{const h=ce(e);if("e"===e)return`${Math.floor(h(t))}e`;const r=t.toString();if(t>1)return r;const n=Math.floor(h(t));return t.toFixed(Math.abs(n))},Scientific:(t,i)=>{const{start:s,end:e}=i,h=Math.max(Math.abs(s),Math.abs(e)),r=Math.floor(Math.log10(h));return 0===t?`0.00e${r<0?"":"+"}${r}`:t.toExponential(2)}},ye=t=>Math.round(t).toString().split("").map((t=>{switch(t){case"0":return"⁰";case"1":return"¹";case"2":return"²";case"3":return"³";case"4":return"⁴";case"5":return"⁵";case"6":return"⁶";case"7":return"⁷";case"8":return"⁸";case"9":return"⁹";case"-":return"⁻";default:return t}})).join("");class pe extends ae{constructor(t,i,s,e){super(t,i,s,e),this.Di=!1,this.Ei=!1,this.Ri=0,this.Y=1e3,this.W(0,10),this.j()}Li(){return this.Ei}et(t,i,s,e,h){if(t===i)return!1;const r=Math.abs(e-s),n=Math.abs(i-t);if(!this.Di){const s=((t,i,s)=>{const e=((t,i)=>{if(i<bs&&i>xs&&t<bs&&t>xs){const s=Math.abs(t/2**23),e=Math.abs(i/2**23),h=Math.min(s,e);return 10**Math.floor(Math.log10(h))}})(t,i);if(void 0!==e)return e*s})(t,i,this.getCellSize());if(void 0===s)return!1;if(n>s)return!0;const e=(i+t)/2,o=(h?s/2:r/2)*(t>i?-1:1);return{start:e-o,end:e+o}}const o=10**-(12-Math.log10(Math.max(Math.abs(t),1)));if(n>o)return!0;const a=(i+t)/2,l=(h?o/2:r/2)*(t>i?-1:1);return{start:a-l,end:a+l}}_i(){this.j()}nt(t){return this.pi()+(t-this.$)/(this.U-this.$)*(this.mi()-this.pi())}rt(t){return this.$+(t-this.pi())/(this.mi()-this.pi())*(this.U-this.$)}W(t,i){return super.W(t,i),this.j(),this}yi(t){return super.yi(t),this.j(),this}Z(t){return super.Z(t),this.zi=me(this.U-this.$,this.oi,this.Y,this.ci,this.ui),this.j(),this}Vi(){return this.Di=!0,this}Oi(){return this.Di}Ni(){return Math.abs(this.Gi)}$i(){return this.Ni()/this.zi}Ui(){return this.Yi}Hi(){return this.Xi}getPixelSize(){return this.zi}Bi(){return this.ki}X(){return super.X(),this.Ei=!0,this}H(){return super.H(),this.Ei=!1,this}Wi(t,i=ve.Numeric){return i(t,{start:this.$,end:this.U})}ji(){const t=Math.abs(this.getInnerEnd()).toString().length,i=Math.abs(this.getInnerStart()).toString().length;return t>i?t:i}Zi(t){return me(t,this.oi,this.Y,this.ci,this.ui)}j(){let t=this.$,i=this.U,s=0;this.Di&&(t=0,i=this.U-this.$,s=this.$);const e=i-t,h=me(e,this.oi,this.Y,this.ci,this.ui);this.Xi=t-this.oi[0]*h,this.Yi=i+this.oi[1]*h;const r=this.Yi-this.Xi,n=r-this.Gi,o=Math.abs(n/h),a=e-this.Ri,l=Math.abs(a/h);(!this.ki||o>=.4||l>=.4)&&(this.Ri=e,this.Gi=r,this.zi=h,this.Ei=!0);const c=this.Gi*this.ui/(2*this.ci),u=-(this.Xi-this.Gi*this.li/this.ci)-c,d=2*this.pi()/this.Y-1,f=2*this.mi()/this.Y-1-d;this.ki={displacement:u,scaling:c,highPrecisionOffset:s,viewportStart:d,viewportSize:f,scaleStartLog:0,scaleIntervalLog:0}}Pi(t,i){return t+this.zi*i}}const me=(t,i,s,e=1,h=1)=>t/(s*e/h-(i[0]+i[1]));class Se{Qi(t,i){return"x"in t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=i),this}H(){return this.x.H(),this.y.H(),this}X(){return this.x.X(),this.y.X(),this}Z(t,i){return"object"==typeof t?(this.x.Z(t.x),this.y.Z(t.y)):(this.x.Z(t),this.y.Z(i)),this}xi(){return r(this.x.xi(),this.y.xi())}Ji(t){return this.x.yi(t),this}Ki(t){return this.y.yi(t),this}bi(){return r(this.x.bi(),this.y.bi())}qi(t,i){return this.x.W(t,i),this}ts(t,i){return this.y.W(t,i),this}getInnerIntervalPixels(){const t=this.x.getCellSize(),i=this.y.getCellSize();return{x:t-this.x.bi(),y:i-this.y.bi()}}ss(){return this.x.Li()||this.y.Li()}}class be extends Se{constructor(){super(...arguments),this.es="LinearScaleXY"}ht(t,i,s,e){return this.x=new pe(t.x,i.x,s.x,e?e.x:void 0),this.y=new pe(t.y,i.y,s.y,e?e.y:void 0),this}Oi(){return this.x.Oi()||this.y.Oi()}hs(){return r(this.x.getPixelSize(),this.y.getPixelSize())}Bi(){return{x:this.x.Bi(),y:this.y.Bi()}}Pi(t,i){const s=this.hs();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}rs(t,i,s,e){const h=this.hs(),r=Hs(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class xe extends Se{constructor(){super(...arguments),this.es="MixedScaleXY"}Oi(){return!1}Pi(t,i){const s=this.x.nt(t.x),e=this.y.nt(t.y),h={x:s+i.x,y:e+i.y};return{x:this.x.rt(h.x),y:this.y.rt(h.y)}}rs(t,i,s,e){const h={x:this.x.nt(t.x),y:this.y.nt(t.y)},r={x:this.x.nt(i.x),y:this.y.nt(i.y)},n=Ys(Zs(r,h)),o=Hs(r,h),a={x:h.x+n.x*e+o.x*s,y:h.y+n.y*e+o.y*s};return{x:this.x.rt(a.x),y:this.y.rt(a.y)}}Bi(){const t=this.x.Bi(),i=this.y.Bi();return{uScaleStart:[this.x.$,this.y.$],uScaleInterval:[this.x.getInnerInterval(),this.y.getInnerInterval()],uScaleStartLog:[t.scaleStartLog,i.scaleStartLog],uScaleIntervalLog:[t.scaleIntervalLog,i.scaleIntervalLog],uViewportStart:[t.viewportStart,i.viewportStart],uViewportSize:[t.viewportSize,i.viewportSize]}}}const Me=(t,i)=>t instanceof le||i instanceof le?(new xe).Qi(t,i):(new be).Qi(t,i),we=t=>"client"===t,_e=t=>!!(t&&"object"==typeof t&&"clientX"in t&&"number"==typeof t.clientX&&"clientY"in t&&"number"==typeof t.clientY),Ce=t=>"relative"===t,ke=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y),Te=(t,i,s,e,h,r)=>{if(!t)return;let n=t;if(s instanceof PointerEvent&&"mouse"===s.pointerType)if(0===s.button){if(!1===t.lmb)return;void 0!==t.lmb&&(n=hi(n,t.lmb))}else if(1===s.button){if(!1===t.mmb)return;void 0!==t.mmb&&(n=hi(n,t.mmb))}else if(2===s.button){if(!1===t.rmb)return;void 0!==t.rmb&&(n=hi(n,t.rmb))}if(e){if(!1===t.shift)return;n=hi(n,t.shift)}if(h){if(!1===t.ctrl)return;n=hi(n,t.ctrl)}if(r){if(!1===t.alt)return;n=hi(n,t.alt)}if(!i)return n;const o=n[i];return o?!0===o?n:hi(n,o):void 0},Fe=t=>{const i=[];return{push:t=>{i.push(t)},end:()=>{i.length>1&&t&&ni.console.warn("LightningChart JS warning | event handler triggered more than 1 interaction.\nThis likely means that your `chart.setUserInteractions` configuration either enables conflicting interactions or more likely doesn't disable conflicting default interactions."),i.forEach((t=>t()))}}},Ie=(t,i,s)=>{if(t){const t={x:s.x.pi(),y:s.y.pi(),width:s.x.Si(),height:s.y.Si()};i.forEach((i=>{i.ns=t}))}else i.forEach((t=>{t.ns=void 0}))},Pe=(t,i)=>{var s;return i?"string"==typeof i?`${t} ${i}`:!1!==(null===(s=i.ls)||void 0===s?void 0:s.displayInCursor)&&i.getUnits()?`${t} ${i.getUnits()}`:t:t},Le=t=>{let i=!1,s={type:"linear"};if(t&&(void 0!==t.opposite&&(i=t.opposite),t.type&&"linear-highPrecision"===t.type&&(s={type:"linear-highPrecision"}),t.type&&"logarithmic"===t.type)){let i=10;if(t.base)if("E"===t.base||"e"===t.base||"natural"===t.base)i="e";else if("number"==typeof t.base)i=t.base;else if("string"==typeof t.base)try{i=Number(t.base)}catch(i){console.warn(`Unidentified logarithmic base "${t.base}"`)}s={base:i,type:"logarithmic"}}return{opposite:i,type:s}},Be=(t,i,s,e=1)=>fi(t+.1*e*(i-t)+.5*e*Math.abs(s.getPixelSize())*Math.sign(i-t),t,i),De=(t,i,s,e=1)=>{const h=s.nt(t),r=s.nt(i);return fi(s.rt(h+.1*e*(r-h)+.5*e*Math.sign(r-h)),t,i)};var Ee;!function(t){t[t.noHighlighting=0]="noHighlighting",t[t.onHover=1]="onHover"}(Ee||(Ee={}));class Re{constructor(t,i,s,e){this.cs=Ee.onHover,this.dt=!1,this.ft=!0,this.us=[],this.ds=[],this.chart=t,this.fs=i,this._t=s,this.As=new Map,this.gs=e,this.vs=this.gs.ys(this,{ps:{themeEffectEnabled:this._t.effectsText},Ss:{}}),this.chart.St.xs.bs(this,(t=>{this.As.forEach(((i,s)=>s.Bt(t))),this.ds.forEach((i=>i.setHighlight(t))),this.us.forEach((i=>i.Bt(t)))}),{animationEnabled:this.chart.getAnimationsEnabled()}),ni.requestAnimationFrame((()=>{this.addEventListener("pointerenter",(()=>{this.cs===Ee.onHover&&this.setHighlight(!0)})),this.addEventListener("pointerleave",(()=>{this.cs===Ee.onHover&&this.setHighlight(!1)}))}))}Ms(){}ws(t,i){const s=void 0===(null==i?void 0:i.setEventHandlers)||i.setEventHandlers,e=void 0!==(null==i?void 0:i.isText)&&i.isText;this.As.set(t,{isText:e});const h=Array.from(this.As);this.vs.ps._s(h.filter((t=>t[1].isText)).map((t=>t[0]))),this.vs.Ss._s(h.filter((t=>!t[1].isText)).map((t=>t[0]))),t.setVisible(this.ft).Bt(this.chart.St.xs.Cs(this,!0)),ni.requestAnimationFrame((()=>{t.setPointerEvents(this.getPointerEvents()),s&&this.D.Nt(t,{getExtraData:(t,i,s)=>this.Kt(s,t)})}));const r=i=>{t.removeEventListener("dispose",r),this.As.delete(t)};t.addEventListener("dispose",r)}ks(t){this.us=t;const i=this.chart.St.xs.Cs(this,!0);t.forEach((t=>{t.Bt(i).Ts(this.ft)}))}Kt(t,i){}Fs(t){const i=this.chart.St.Is(t);if(i&&Array.from(this.As.keys()).includes(i.entity))return this.Kt(i.info,t)}setEffect(t){return this.vs.ps.Ps(t&&this._t.effectsText),this.vs.Ss.Ps(t),this.chart.St.Ls(),this}getEffect(){return this.vs.ps.Bs()||this.vs.Ss.Bs()}setIcon(t){return this.Ds=t,this.chart.St.Ls(),this}getIcon(){return this.Ds}setName(t){return this.Es=t,this.ds.forEach((i=>i.setText(t))),this}getName(){return this.Es||"Component"}dispose(){return this.dt||(this.dt=!0,this.As.forEach(((t,i)=>i.dispose())),this.fs(this),this.ds.forEach((t=>{t.dispose()})),this.ds.length=0,this.D.R("dispose",{}),this.chart.St.Ls()),this}setVisible(t){return t===this.ft||(this.ft=t,this.As.forEach(((i,s)=>s.setVisible(t))),this.us.forEach((i=>i.Ts(t))),this.ds.forEach((i=>i.setOn(t))),this.D.R("visiblechange",{isVisible:t}),this.chart.St.Ls()),this}getVisible(){return this.ft}setHighlight(t){return this.chart.St.xs.Rs(this,t),this.D.R("highlightchange",{highlight:es(t)}),this}getHighlight(){return this.chart.St.xs.Cs(this)}setAnimationHighlight(t){return this.chart.St.xs.zs(this,t),this}getAnimationHighlight(){return this.chart.St.xs.Vs(this)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}getPointed(){if(!this.chart.St.Os())return!1;for(const t of this.As)if(this.chart.St.Ns(t[0]))return!0;for(const t of this.us)if(this.chart.St.Ns(void 0,t))return!0;return!1}setHighlightOnHover(t){return this.cs=t?Ee.onHover:Ee.noHighlighting,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.cs!==Ee.noHighlighting}Gs(){}attach(t,i=!0,s=!1){return this.styleLegendEntry(t,s),hs(t,[this],{toggleVisibilityOnClick:i,label:this.getName(),style:void 0}),this.ds.push(t),t.addEventListener("dispose",(()=>{const i=this.ds.indexOf(t);i>=0&&this.ds.splice(i,1)})),this}$s(){return this.Ds}isDisposed(){return this.dt}set draggable(t){this.D.draggable=t}get draggable(){return this.D.draggable}}class ze extends Re{constructor(t,i,s,e,h,r,n,o){super(i,s,n,o),this.Us=!0,this.Ys=t,this.axis=e,this.ot=h,this.Hs=r,ni.requestAnimationFrame((()=>this.Xs()))}setClipping(t){return this.Us=t,this.Ys.Ls(),this}getClipping(){return this.Us}}const Ve=t=>"object"==typeof t&&null!==t&&"setCornerRadius"in t;var Oe;!function(t){t[t.Square=0]="Square",t[t.Circle=1]="Circle",t[t.HollowCircle=2]="HollowCircle",t[t.Triangle=3]="Triangle",t[t.Cross=4]="Cross",t[t.Diamond=5]="Diamond",t[t.Plus=6]="Plus",t[t.Minus=7]="Minus",t[t.Arrow=8]="Arrow",t[t.Star=9]="Star"}(Oe||(Oe={}));const Ne={ProgressiveX:"ProgressiveX",ProgressiveY:"ProgressiveY",RegressiveX:"RegressiveX",RegressiveY:"RegressiveY"},Ge=t=>"ProgressiveX"===t||"RegressiveX"===t?"x":"y",$e=t=>"ProgressiveX"===t||"ProgressiveY"===t,Ue=(t,i,s)=>t*(1-s)+i*s,Ye=(t,i,s,e,h)=>{if(void 0===i.value||void 0===s.value||void 0===e.value||void 0===h.value)return;const r=(t.x-s.point.x)/(h.point.x-s.point.x),n=(h.point.y-s.point.y)*r+s.point.y,o=(t.x-i.point.x)/(e.point.x-i.point.x),a=(e.point.y-i.point.y)*o+i.point.y,l=(t.y-a)/(n-a),c=Ue(s.value,h.value,r),u=Ue(i.value,e.value,o);return Ue(u,c,l)},He={warm:t=>i=>b(60/(t-1)*i,.8,.8),cold:t=>i=>b(60/(t-1)*i+180,.8,.8),fullSpectrum:t=>i=>b(360/t*i,.8,.8),reverseSpectrum:t=>i=>b(360/t*(t-i),.8,.8),flatUI:t=>i=>b(360/t*i+8,.8,.8-.15/t*i),arction:t=>i=>{const s=1-.2/t*i;return b(360/t*i+51,s,s)},arctionWarm:t=>i=>{const s=t-1,e=1-.2/s*i;return b(46-46/s*i+4,e,e)},sunset:t=>i=>{const s=[170,320];return b(i%2?s[0]:s[1],.8,.5+.5/(t-1)*i)},dynamic:t=>i=>{const s=i%2,e=[234,346];return b(s?e[0]:e[1],s?.3:.9,.5+.5/(t-1)*i)},magenta:t=>i=>{const s=[.9,.6];return b(354,i%2?s[0]:s[1],.5+.5/(t-1)*i)},greyscale:t=>i=>b(0,0,.25+.5/(t-1)*i),frozen:t=>i=>{const s=[.8,.6];return b(160+80/(t-1)*i,.6,i%2?s[0]:s[1])},retro:t=>i=>{const s=[6,183];return b(i%2?s[0]:s[1],.7,.5+.5/(t-1)*i)},crayons:t=>i=>{let s=180+230/(t-1)*i;return s>360&&(s-=360),b(s,.9,.8)},custom:(t,i)=>s=>{const e=.25+.5/(t-1)*s;if(!i)return b(0,0,e);const h=i.getR()/255,r=i.getG()/255,n=i.getB()/255,o=Math.max(h,r,n),a=Math.min(h,r,n);let l=0;if(o!==a){const t=o-a;switch(o){case h:l=(r-n)/t+(r<n?6:0);break;case r:l=(n-h)/t+2;break;case n:l=(h-r)/t+4;break;default:l=0}return l=l/6*360,b(l,.8,e)}return b(0,0,e)},sector:(t,i,s=.8,e=.8)=>h=>r=>b(t+(i-t)/h*r,s,e),auroraBorealis:t=>i=>Xe([{value:0,hex:"#23FF7A"},{value:1/9,hex:"#03E65D"},{value:2/9,hex:"#04D155"},{value:3/9,hex:"#00B849"},{value:4/9,hex:"#00A869"},{value:5/9,hex:"#008F68"},{value:6/9,hex:"#00815E"},{value:7/9,hex:"#017153"},{value:8/9,hex:"#704A85"},{value:1,hex:"#743A70"}],t,i),blueSciFi:t=>i=>Xe([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#E2E7FF"},{value:2/9,hex:"#ACB9F8"},{value:3/9,hex:"#889DFF"},{value:4/9,hex:"#547EEF"},{value:5/9,hex:"#4068D8"},{value:6/9,hex:"#2B50B7"},{value:7/9,hex:"#1B3E9F"},{value:8/9,hex:"#8D1395"},{value:1,hex:"#780A74"}],t,i),light:t=>i=>Xe([{value:0,hex:"#FECC00"},{value:1/9,hex:"#F7B300"},{value:2/9,hex:"#EF9900"},{value:3/9,hex:"#E88000"},{value:4/9,hex:"#E06600"},{value:5/9,hex:"#DD5A00"},{value:6/9,hex:"#D94D00"},{value:7/9,hex:"#D13300"},{value:8/9,hex:"#C91A00"},{value:1,hex:"#C10000"}],t,i),monochrome:t=>i=>Xe([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#EEEEEE"},{value:2/9,hex:"#DCDCDC"},{value:3/9,hex:"#C1C1C1"},{value:4/9,hex:"#A4A2A2"},{value:5/9,hex:"#8B8B8B"},{value:6/9,hex:"#787878"},{value:7/9,hex:"#656565"},{value:8/9,hex:"#565555"},{value:1,hex:"#434343"}],t,i),night:t=>i=>Xe([{value:0,hex:"#F0F9E0"},{value:1/9,hex:"#C9DFA4"},{value:2/9,hex:"#B5C796"},{value:3/9,hex:"#8998B7"},{value:4/9,hex:"#6E7E9E"},{value:5/9,hex:"#5C6D8F"},{value:6/9,hex:"#47587A"},{value:7/9,hex:"#374B72"},{value:8/9,hex:"#273C65"},{value:1,hex:"#192847"}],t,i),sunset2:t=>i=>Xe([{value:0,hex:"#22334D"},{value:1/9,hex:"#82062C"},{value:2/9,hex:"#AB001D"},{value:3/9,hex:"#D80428"},{value:4/9,hex:"#CF5D1B"},{value:5/9,hex:"#CF8229"},{value:6/9,hex:"#CF9D29"},{value:7/9,hex:"#C4BE25"},{value:8/9,hex:"#E1DC49"},{value:1,hex:"#FFFA67"}],t,i)},Xe=(t,i,s)=>{const e=je(i,s),[h,r]=Ze(e,t),n=We(t[h]),o=We(t[r]),a=0!==n.value?(o.value-e)/n.value:0,l={value:a,h:Ue(n.h,o.h,a),s:Ue(n.s,o.s,a),v:Ue(n.v,o.v,a)};return b(l.h,l.s,l.v)},We=t=>{const i=(t=>{const i=t.r,s=t.g,e=t.b,h=Math.max(i,s,e),r=Math.min(i,s,e);let n=0;const o=h,a=h-r,l=0===h?0:a/h;if(h===r)n=0;else{switch(h){case i:n=(s-e)/a+(s<e?6:0);break;case s:n=(e-i)/a+2;break;case e:n=(i-s)/a+4}n/=6}return[360*n,l,o]})(S(t.hex));return{value:t.value,h:i[0],s:i[1],v:i[2]}},je=(t,i)=>{const s=i/t;return s<0?0:s>1?1:s},Ze=(t,i)=>{if(i.length<2)throw new Error("Invalid palette size");for(let s=0;s<i.length;s+=1)if(t<i[s].value)return[s-1,s];return[i.length-2,i.length-1]};class Qe{constructor(){this.type="simple"}}const Je=t=>!(!t||"object"!=typeof t||!("type"in t)||"simple"!==t.type),Ke=new Qe;class qe{constructor(t){this.type="phong",this.ambientReflection=1,this.specularReflection=.1,this.diffuseReflection=1,this.ambientColor=S("#000"),this.specularColor=S("#fff"),this.shininess=32,t&&(this.ambientReflection=Number.isNaN(Number(t.ambientReflection))?this.ambientReflection:Number(t.ambientReflection),this.specularReflection=Number.isNaN(Number(t.specularReflection))?this.specularReflection:Number(t.specularReflection),this.diffuseReflection=Number.isNaN(Number(t.diffuseReflection))?this.diffuseReflection:Number(t.diffuseReflection),this.ambientColor=t.ambientColor||this.ambientColor,this.specularColor=t.specularColor||this.specularColor,this.shininess=t.shininess||this.shininess)}}const th=t=>!(!t||"object"!=typeof t||!("type"in t)||"phong"!==t.type),ih=new qe,sh={Simple:Qe,Phong:qe},eh=i({type:"font",size:14,family:"Arial",weight:"normal",style:"normal",variant:!1});class hh extends eh{constructor(t){super(t)}setSize(t){return this.set("size",t)}setFamily(t){return this.set("family",t)}setWeight(t){return this.set("weight",t)}setStyle(t){return this.set("style",t)}setVariant(t){return this.set("variant",t)}getSize(){return this.get("size")}getFamily(){return this.get("family")}getWeight(){return this.get("weight")}getStyle(){return this.get("style")}getVariant(){return this.get("variant")}}const rh=t=>!(!t||"object"!=typeof t||!("type"in t)||"font"!==t.type),nh=new hh,oh=new class{getFillStyle(){return V}},ah=i({type:"triangulated-points-3d",shape:"sphere",size:10,fillStyle:new $,wireframeStyle:Wt});class lh extends ah{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setWireframeStyle(t){return"function"==typeof t?this.set("wireframeStyle",t(this.get("wireframeStyle"))):this.set("wireframeStyle",t)}getWireframeStyle(){return this.get("wireframeStyle")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}}const ch=t=>!(!t||"object"!=typeof t||!("type"in t)||"triangulated-points-3d"!==t.type),uh=i({type:"pixelated-points-3d",size:5,fillStyle:new $});class dh extends uh{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}}const fh=t=>!(!t||"object"!=typeof t||!("type"in t)||"pixelated-points-3d"!==t.type),Ah={Triangulated:lh,Pixelated:dh},gh=i({type:"linestyle",lineType:"solid",fillStyle:new $({color:m(255,255,255)}),thickness:1});class vh extends gh{constructor(t){super({...t,lineType:"solid"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}Xt(){const t=this.getThickness();return t<0?1:t}}const yh=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"solid"!==t.lineType),ph={Dotted:[1,3],DottedDense:[1,1],Dashed:[3,1],DashedEqual:[2,2],DashedLoose:[2,4],DashDotted:[3,2,1,2]},mh=i({type:"linestyle",lineType:"dashed",pattern:ph.DashedEqual,fillStyle:new $({color:m(255,255,255)}),thickness:1,patternScale:3});class Sh extends mh{constructor(t){super({...t,lineType:"dashed"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}Xt(){const t=this.getThickness();return t<0?1:t}setPattern(t){return"function"==typeof t?this.set("pattern",t(this.getPattern())):this.set("pattern",t)}getPattern(){return this.get("pattern")}setPatternScale(t){return"function"==typeof t?this.set("patternScale",t(this.getPatternScale())):this.set("patternScale",t)}getPatternScale(){return this.get("patternScale")}}const bh=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"dashed"!==t.lineType),xh=i({type:"icon",width:void 0,height:void 0,Ws:void 0,js:ui,Zs:ui});class Mh extends xh{constructor(t,i,s,e){super({...e,Ws:t,js:i,Zs:s})}dispose(){return this.Zs(this),this}setWidth(t){const i=this.set("width",t);return this.js(i),i}getWidth(){return this.get("width")}setHeight(t){const i=this.set("height",t);return this.js(i),i}getHeight(){return this.get("height")}setSize(t,i){const s=this.withMutations((s=>{s.set("width",t).set("height",i)}));return this.js(s),s}xi(){if(!this.Ws)return{x:0,y:0};const t=this.Ws.width,i=this.Ws.height;if(0===t||0===i)return{x:0,y:0};const s=this.width,e=this.height;return"number"==typeof s&&"number"==typeof e?{x:s,y:e}:"number"==typeof s?{x:s,y:i*s/t}:"number"==typeof e?{x:t*e/i,y:e}:{x:t,y:i}}}const wh=t=>!(!t||"object"!=typeof t||!("type"in t)||"icon"!==t.type),_h=i({type:"glow",color:m(255,255,255,50),spread:1,blur:4,offset:{x:0,y:0}});class Ch extends _h{constructor(t){super(t)}setSpread(t){return this.set("spread","function"==typeof t?t(this.get("spread")):t)}getSpread(){return this.get("spread")}setBlur(t){return this.set("blur","function"==typeof t?t(this.get("blur")):t)}getBlur(){return this.get("blur")}setColor(t){return this.set("color","function"==typeof t?t(this.get("color")):t)}getColor(){return this.get("color")}setOffset(t){return this.set("offset","function"==typeof t?t(this.get("offset")):t)}getOffset(){return this.get("offset")}}const kh=t=>!(!t||"object"!=typeof t||!("type"in t)||"glow"!==t.type);class Th{constructor(t,i){this.Qs=t,this.Js=i,this.Ks=i.rows*hr,this.qs=i.columns*rr}}var Fh,Ih;!function(t){t[t.ZoomIn=0]="ZoomIn",t[t.ZoomInX=1]="ZoomInX",t[t.ZoomInY=2]="ZoomInY",t[t.ZoomOut=3]="ZoomOut",t[t.ZoomOutX=4]="ZoomOutX",t[t.ZoomOutY=5]="ZoomOutY",t[t.ZoomToFit=6]="ZoomToFit",t[t.ToggleAnimations=7]="ToggleAnimations"}(Fh||(Fh={})),function(t){t[t.Circle=0]="Circle",t[t.Rectangle=1]="Rectangle",t[t.RoundedRectangle=2]="RoundedRectangle"}(Ih||(Ih={}));const Ph={x:-43,y:0},Lh={x:-65,y:0},Bh={x:-86,y:0},Dh={x:-107,y:-1},Eh={x:-128,y:-3},Rh={x:-150,y:0},zh={x:-171,y:0},Vh={x:-276,y:0},Oh={x:-298,y:0},Nh={x:0,y:0},Gh={x:-21,y:0};class $h extends Th{constructor(t,i,s,e){super(t,s),this.te=ni.document.createElement("button"),this.ie=ni.document.createElement("div"),this.se=ni.document.createElement("label"),this.Js=s,this.ee=i,this.he=e}re(t,i,s,e){this.ne(t,e),this.oe(),this.ae(i),this.le(),this.se.textContent=s||"";const h=ni.document.createElement("div");this.ce(h),this.te.onclick=this.onClick.bind(this),h.appendChild(this.ie),h.appendChild(this.se),this.te.appendChild(h)}le(){this.te.style.cursor="pointer"}ce(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignContent="center",t.style.flexDirection="column"}ae(t){"string"==typeof t?(this.ie.style.backgroundImage=`url(${t})`,this.ie.style.backgroundSize="100%",this.ie.style.backgroundRepeat="no-repeat",this.ie.style.backgroundPosition="center",this.ie.style.width="20px",this.ie.style.height="20px"):this.applyStyleForSprite(t),this.ie.style.margin="auto"}oe(){switch(this.ee){case Ih.RoundedRectangle:this.te.style.borderRadius="10px";break;case Ih.Rectangle:this.te.style.borderRadius="0px";break;case Ih.Circle:default:this.te.style.borderRadius="31px"}}ne(t,i){this.te.style.width=`${this.qs.toString()}px`,this.te.style.height=`${this.Ks.toString()}px`,this.te.style.backgroundColor=t,this.te.style.opacity=i||nr,this.te.style.alignItems="center",this.te.style.border="2px solid #707070",this.te.style.transition="background-color .8s ease"}applyStyleForSprite(t){this.ie.style.backgroundImage=`url(${this.Qs}/${or})`,this.ie.style.backgroundPositionX=`${t.x}px`,this.ie.style.backgroundPositionY=`${t.y}px`,this.ie.style.backgroundSize="1600%",this.ie.style.backgroundRepeat="no-repeat",this.ie.style.width="20px",this.ie.style.height="20px"}ue(t){return t.appendChild(this.te),t}de(){return this.te}}class Uh extends $h{constructor(t,i,s,e){super(t,i,s,e),this.fe="",this.Ae="",this.ge=!1,this.he=e}ve(){this.ye(),this.onToggledStateAction()}pe(){this.me(),this.onInitialStateAction()}me(){this.Se(this.fe)}ye(){this.Se(this.Ae)}Se(t){"string"==typeof t?this.ie.style.background=t:(this.ie.style.backgroundImage=`url(${this.Qs}/${or})`,this.ie.style.backgroundPositionX=`${t.x}px`,this.ie.style.backgroundPositionY=`${t.y}px`)}onClick(){this.ge?this.pe():this.ve(),this.ge=!this.ge}}class Yh extends $h{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.he=i;const e=this.he.getTheme();this.re(e.onScreenMenuBackgroundColor.toRGBAString(),Ph)}onClick(){const t=this.he.be();t&&this.he.zoom(t,{x:-1,y:-1})}}class Hh extends $h{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.he=i;const e=this.he.getTheme();this.re(e.onScreenMenuBackgroundColor.toRGBAString(),Dh)}onClick(){const t=this.he.be();t&&this.he.zoom(t,{x:-1,y:0})}}class Xh extends $h{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.he=i;const e=this.he.getTheme();this.re(e.onScreenMenuBackgroundColor.toRGBAString(),Rh)}onClick(){const t=this.he.be();t&&this.he.zoom(t,{x:0,y:-1})}}class Wh extends $h{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.he=i;const e=this.he.getTheme();this.re(e.onScreenMenuBackgroundColor.toRGBAString(),Lh)}onClick(){const t=this.he.be();t&&this.he.zoom(t,{x:1,y:1})}}class jh extends $h{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.he=i;const e=this.he.getTheme();this.re(e.onScreenMenuBackgroundColor.toRGBAString(),Eh)}onClick(){const t=this.he.be();t&&this.he.zoom(t,{x:1,y:0})}}class Zh extends $h{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.he=i;const e=this.he.getTheme();this.re(e.onScreenMenuBackgroundColor.toRGBAString(),zh)}onClick(){const t=this.he.be();t&&this.he.zoom(t,{x:0,y:1})}}class Qh extends Uh{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.he=i;const e=this.he.getTheme();this.fe=Vh,this.Ae=Oh,this.re(e.onScreenMenuBackgroundColor.toRGBAString(),this.fe)}onToggledStateAction(){this.he.setAnimationsEnabled(!1)}onInitialStateAction(){this.he.setAnimationsEnabled(!0)}}class Jh extends $h{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.he=i;const e=this.he.getTheme();this.re(e.onScreenMenuBackgroundColor.toRGBAString(),Bh)}onClick(){this.he.forEachAxis((t=>{t.fit(!0)}))}}class Kh extends $h{constructor(t,i,s){super(t,i.shape||ar,i.dimensions||{rows:1,columns:1},s);const e=s.getTheme(),h=i.color||e.onScreenMenuBackgroundColor.toRGBAString(),r=i.icon||"",n=i.label||"",o=i.opacity||"";this.re(h,r,n,o),this.xe=i.action}onClick(){this.xe(this.he)}}class qh extends Uh{constructor(t,i,s,e){super(t,i,{rows:1,columns:1},s),this.he=s,this.Me=e,this.fe=Gh,this.Ae=Nh,this.re(lr,this.fe)}me(){this.Se(this.fe),this.te.style.backgroundColor=lr,this.te.style.border="2px solid #707070",this.te.style.margin="0px"}ye(){this.Se(this.Ae),this.te.style.background="#FECC00 0% 0% no-repeat padding-box",this.te.style.border="10px solid #BCBCBC12",this.te.style.margin="1px"}onToggledStateAction(){var t;null===(t=this.Me)||void 0===t||t.style.setProperty("display","block")}onInitialStateAction(){var t;null===(t=this.Me)||void 0===t||t.style.setProperty("display","none")}}var tr;!function(t){t.Move="move",t.ResizeColumn="col-resize",t.ResizeRow="row-resize",t.Horizontal="ew-resize",t.Vertical="ns-resize",t.NorthWest="nw-resize",t.NorthEast="ne-resize",t.Copy="copy",t.CrossHair="crosshair",t.Default="default",t.Help="help",t.Restricted="not-allowed",t.None="none",t.Point="pointer",t.Text="text",t.Wait="wait",t.ZoomIn="zoom-in",t.ZoomOut="zoom-out"}(tr||(tr={}));const ir={LeftBottom:r(-1,-1),CenterBottom:r(0,-1),RightBottom:r(1,-1),LeftCenter:r(-1,0),Center:r(0,0),RightCenter:r(1,0),LeftTop:r(-1,1),CenterTop:r(0,1),RightTop:r(1,1)},sr=new $({color:m(255,255,255,0)}),er=new vh({thickness:1,fillStyle:sr}),hr=60,rr=60,nr="1.0",or="osm/osm-sprite-transparent.png",ar=Ih.Circle,lr="#363636";var cr;!function(t){t[t.TopRight=0]="TopRight",t[t.TopLeft=1]="TopLeft",t[t.BottomLeft=2]="BottomLeft",t[t.BottomRight=3]="BottomRight"}(cr||(cr={}));class ur extends ze{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.Es="Band",this.we=0,this._e=1,this.Ce=this._t.bandFillStyle,this.ke=this._t.bandStrokeStyle,this.D=new zt,this.Te=this.Ys.Pe(this.ot).Ie(this.Ce).Fe(this.ke).Bt(this.getHighlight()),this.ws(this.Te)}setValueStart(t){return this.we=t,this.D.R("valuechange",{start:this.we,end:this._e}),this.Ys.Ls(),this}getValueStart(){return this.we}setValueEnd(t){return this._e=t,this.D.R("valuechange",{start:this.we,end:this._e}),this.Ys.Ls(),this}getValueEnd(){return this._e}setFillStyle(t){this.Ce="function"==typeof t?t(this.Ce):t;const i=this.Ce;return this.Te.Ie(i),this.Ys.Ls(),this}getFillStyle(){return this.Ce}setStrokeStyle(t){this.ke="function"==typeof t?t(this.ke):t;const i=this.ke;return this.Te.Fe(i),this.Ys.Ls(),this}getStrokeStyle(){return this.ke}Le(){return this.Te.Be(this.Hs.toVec2(this.we,this.Hs.getHeight(this.ot).getInnerStart())).Z(this.Hs.toVec2(this._e-this.we,this.Hs.getHeight(this.ot).getInnerInterval())),Ie(this.Us,[this.Te],this.ot),this}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce,stroke:this.ke})}De(t,i){t.Bt(i),this.Ys.Ls()}Xs(){let t,i,s;const e=(e,h,r)=>{const n=ot(this.Ys.St.Ee(e.clientX,e.clientY),this.Ys.St.ot,this.ot),o=this.Hs.getWidth(n),a=this.axis.ot.nt(this.we),l=this.axis.ot.nt(this._e),c=(this.axis.ot.nt(o)-a)/(l-a);t=h&&(!(c<.1||c>.9)||!r),i=r&&!t,i&&(s=c<.5)},h=s=>{const h=this.getUserInteractions(),r=Te(h.move,"drag",s,s.shiftKey,s.ctrlKey,s.altKey),n=Te(h.scale,"drag",s,s.shiftKey,s.ctrlKey,s.altKey);e(s,!!(null==r?void 0:r.drag),!!(null==n?void 0:n.drag));const o=t?tr.Point:i?this.Hs.getWidth({x:tr.Horizontal,y:tr.Vertical}):tr.Default;this.Re=this.chart.engine.setMouseStyle(o,this.Re)},r=t=>{this.Re=this.chart.engine.restoreMouseStyle(this.Re)};this.addEventListener("pointermove",h),this.addEventListener("pointerleave",r);const n=(e,h,r,n)=>{const o=this.Hs.getWidth(e);if(t){this.we=this.axis.ot.Pi(this.we,o),this._e=this.axis.ot.Pi(this._e,o);const t=null==r?void 0:r.on;t&&t({event:h})}else if(i&&s){this.we=this.axis.ot.Pi(this.we,o);const t=null==n?void 0:n.on;t&&t({event:h})}else if(i&&!s){this._e=this.axis.ot.Pi(this._e,o);const t=null==n?void 0:n.on;t&&t({event:h})}Bi(h),this.D.R("valuechange",{start:this.we,end:this._e}),this.Ys.Ls()};this.addEventListener("pointerdown",(s=>{const e=this.getUserInteractions(),o=Te(e.move,"drag",s,s.shiftKey,s.ctrlKey,s.altKey),a=Te(e.scale,"drag",s,s.shiftKey,s.ctrlKey,s.altKey);if(!(null==o?void 0:o.drag)&&t)return;if(!(null==a?void 0:a.drag)&&i)return;Bi(s);let l=s;const c=t=>{if(t.pointerId!==s.pointerId)return;const i={x:t.clientX-l.clientX,y:l.clientY-t.clientY};n(i,t,o,a),l=t},u=t=>{t.pointerId===s.pointerId&&(this.addEventListener("pointermove",h),this.addEventListener("pointerleave",r),ni.removeEventListener("pointermove",c),ni.removeEventListener("pointerup",u),ps())};this.removeEventListener("pointermove",h),this.removeEventListener("pointerleave",r),ni.addEventListener("pointermove",c),ni.addEventListener("pointerup",u)}))}setUserInteractions(t){return this.ze=void 0===t?{move:!1,scale:!1}:t,this}getUserInteractions(){return hi({move:{drag:!0},scale:{drag:!0}},this.ze)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class dr extends ze{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.Es="Constant Line",this.S=0,this.ke=this._t.constantLineStrokeStyle,this.Ve=!0,this.D=new zt,this.Oe=this.Ys.Ge(this.ot).Ne(this.ke).Bt(this.getHighlight()),this.ws(this.Oe)}setValue(t){return this.S=t,this.D.R("valuechange",{value:this.S}),this.Ys.Ls(),this}getValue(){return this.S}setStrokeStyle(t){this.ke="function"==typeof t?t(this.ke):t;const i=this.ke;return this.Oe.Ne(i),this.Ys.Ls(),this}getStrokeStyle(){return this.ke}Le(){return this.Oe.Ue(this.Hs.toVec2(this.S,this.Hs.getHeight(this.ot).getInnerStart())).$e(this.Hs.toVec2(this.S,this.Hs.getHeight(this.ot).getInnerEnd())),Ie(this.Us,[this.Oe],this.ot),this}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{stroke:this.ke})}De(t,i){t.Bt(i),this.Ys.Ls()}setUserInteractions(t){return this.ze=void 0===t?{move:!1}:t,this}getUserInteractions(){return hi({move:{drag:!0}},this.ze)}Xs(){this.addEventListener("pointerenter",(t=>{const i=this.getUserInteractions();if(Te(i.move,"drag",t,t.shiftKey,t.ctrlKey,t.altKey)){const t=this.Hs.getWidth({x:tr.Horizontal,y:tr.Vertical});this.Re=this.chart.engine.setMouseStyle(t,this.Re)}})),this.addEventListener("pointerleave",(t=>{this.Re=this.chart.engine.restoreMouseStyle(this.Re)})),this.addEventListener("pointerdown",(t=>{const i=this.getUserInteractions(),s=Te(i.move,"drag",t,t.shiftKey,t.ctrlKey,t.altKey);if(s){Bi(t),ps();let i=t;const e=t=>{const e={x:t.clientX-i.clientX,y:i.clientY-t.clientY};i=t,this.S=this.axis.ot.Pi(this.S,this.Hs.getWidth(e)),this.D.R("valuechange",{value:this.S}),this.Ys.Ls();const h=s.on;h&&h({event:t})},h=i=>{i.pointerId===t.pointerId&&(ni.removeEventListener("pointermove",e),ni.removeEventListener("pointerup",h))};ni.addEventListener("pointermove",e),ni.addEventListener("pointerup",h)}}))}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const fr={fitting:{start:(t,i,s,e)=>i>=t?s:e,end:(t,i,s,e)=>i>=t?e:s,allowIntervalLengthChange:!0},expansion:{start:(t,i,s,e)=>i>=t?s<t?s:t:e>t?e:t,end:(t,i,s,e)=>i>=t?e>i?e:i:s<i?s:i,allowIntervalLengthChange:!0},progressive:{start:(t,i,s,e)=>i>t?fr.progressive.end(t,i,s,e)+(t-i):e>t?e:t,end:(t,i,s,e)=>i>t?e>i?e:i:fr.progressive.start(t,i,s,e)+(i-t),allowIntervalLengthChange:!1},regressive:{start:(t,i,s,e)=>i>t?s<t?s:t:fr.regressive.end(t,i,s,e)+(t-i),end:(t,i,s,e)=>i>t?fr.regressive.start(t,i,s,e)+(i-t):s<i?s:i,allowIntervalLengthChange:!1},fittingStart:{start:(t,i,s,e)=>i>=t?s:e,end:(t,i,s,e)=>i,allowIntervalLengthChange:!0},fittingEnd:{start:(t,i,s,e)=>t,end:(t,i,s,e)=>i>=t?e:s,allowIntervalLengthChange:!0},nextPowerOf10:{start:(t,i,s,e)=>i>=t?s:e,end:(t,i,s,e)=>i>=t?10**Math.ceil(Math.log10(e)):10**Math.ceil(Math.log10(s)),allowIntervalLengthChange:!0},fittingStepped:{start:(t,i,s,e)=>{if(i>=t){if(s<t)return t-(i-t);const e=t+.5*(i-t);return s>e?e:t}if(e>t)return t+(t-i);const h=t-.5*(t-i);return e<h?h:t},end:(t,i,s,e)=>{if(i>=t){if(e>i)return i+(i-t);const s=i-.5*(i-t);return e<s?s:i}if(s<i)return i-(t-i);const h=i+.5*(t-i);return s>h?h:i},allowIntervalLengthChange:!0}},Ar={Empty:"Empty",Numeric:"Numeric",DateTime:"DateTime",Time:"Time"},gr=t=>void 0!==t.Ye,vr=t=>void 0!==t.He,yr=t=>void 0!==t.Xe,pr=(t,i,s,e,h,r,n)=>[r,n],mr=(t,i,s,e)=>{const h=[],r=Math.round(Math.abs((t-i)/s));for(let n=1;n<r;n+=1){const r=Math.round((t+s*n)*e)/e;r<i&&h.push(r)}return h},Sr=(t,i,s,e,h)=>{di(t,0)&&(t=0),di(i,0)&&(i=0);const r=[];let n=void 0!==e?((t,i,s)=>t-(t-s)%i)(t,s,e):t;if(s<=0)throw new Error(`_getRegularGreatKeyValues unit less than or equal to 0, unit: ${s}`);for(;n<i&&!1===di(n,i);)r.push(n),n+=s,n=Math.round(n*h)/h;return r.push(n),r},br=(t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i&&!1===di(r,i);)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h},xr=(t,...i)=>{const s=i.length>0?i.length:t?1:0;return(e,h,r,n,o,a)=>{if(h>=s)return;const l=i[h]||1;let c=!1,u=!1,d=1;return t&&(c="ignore"in t?"first"===t.ignore||"both"===t.ignore:c,u="ignore"in t?"last"===t.ignore||"both"===t.ignore:u,d="offset"in t&&void 0!==t.offset?t.offset:d),((t,i,s,e,h)=>(s&&(t=t.filter(((t,i)=>i>0))),e&&(t=t.filter(((i,s)=>s<t.length-1))),t.filter(((t,s)=>(s+h)%i==0))))(e,l,c,u,d)}},Mr=(...t)=>{const i=t.length>0?t.length:0;return(s,e,h,r,n,o)=>{if(e>=i)return;const a=t[e]||1;return s.filter(((t,i)=>i%a==0))}},wr=i({cursorFormatter:void 0});class _r extends wr{We(t){return{je:[],Ze:[],Qe:this.cursorFormatter?this.cursorFormatter:ve.Numeric,Je:void 0,Ke:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}}const Cr=(t,i,s,e,h,r,n,o,a,l,c)=>{let u=a.get(n);if(u||(u=new Map,a.set(n,u)),u.has(t))return u.get(t);if(0===i.length)return Ms;const d=c.qe(i,n.th.labelFont,h),f=o.Pi(s,{x:-(e.x/2+.5)*d.x+r.x-l,y:-(e.y/2+.5)*d.y+r.y-l}),A=o.Pi(f,{x:d.x+l,y:d.y+l}),g={min:{x:Math.min(f.x,A.x),y:Math.min(f.y,A.y)},max:{x:Math.max(f.x,A.x),y:Math.max(f.y,A.y)}};return u.set(t,g),g},kr=(new _r).We({type:"linear"});class Tr{constructor(t,i,s,e,h,r,n){this.ih=kr,this.sh=Ar.Empty,this.eh=new Map,this.hh=fr.fitting,this.rh=!0,this.oh=Gt((()=>this.chart.St.Ls()))(300,Ot.linear),this.ah=!0,this.ft=!0,this.uh=!1,this.dh=xs,this.fh=!1,this.Ah=!1,this.gh=xs,this.yh=xs,this.ph=xs,this.mh=!1,this.Sh="",this.bh=!1,this.xh=()=>{this.Mh.setPointerEvents(!0),this.title.Nt(this.Mh),this.xh=void 0},this.wh=(t,i,s,e,h,r,n,o,a,l,c)=>{const u=this._h(),d=[],f=t.filter((t=>this.Ch(t.keyValue,t.labelText,i))),A=[...f,...a.filter((t=>this.Ch(t.keyValue,t.labelText,t.tickLevel))),...l.filter((t=>t.labelText.length>0))];for(let t=0;t<f.length;t+=1){const a=f[t];let l,g=[];if(this.Ch(a.keyValue,a.labelText,i)){const t=Cr(a.keyValue,a.labelText,a.labelPosition,a.labelAlignment,a.labelRotation,a.labelOffset,i,u,o,c,this.chart.St.kh);g=ss(A.map((i=>i&&i!==a&&Cs(t,Cr(i.keyValue,i.labelText,i.labelPosition,i.labelAlignment,i.labelRotation,i.labelOffset,i.tickLevel,u,o,c,this.chart.St.kh))?i:void 0))),l=g.length>0}else l=!1;if(l){let o=!0;if(o&&g.every((t=>gr(t.tickLevel)))&&(o=!1),o&&i.Th&&i.Th.Fh&&!1===i.Th.Fh(a.keyValue,s,e,h,r,n)&&(o=!1),!1===o){f.splice(t,1),t-=1;continue}return!0}d.push(a)}return d},this.formatValue=t=>this.ih.Qe(t,{start:this.ot.getInnerStart(),end:this.ot.getInnerEnd()}),this.Ih=!0,this.Ph=!0,this.title=new zt,this.chart=t,this.Lh=i,this._t=e,this.Bh=r,this.ot=s,this.Dh=n,"logarithmic"===n.type&&this.setAnimationZoom(Ot.logarithmic(ue(n.base))),this.Eh=r.numeric,this.Rh("Numeric"),this.zh=s.getInnerStart(),this.Vh=s.getInnerEnd(),this.setAnimationsEnabled(h)}setUnits(t,i={}){return this.Oh=t,this.ls=i,this.Nh(),this}getUnits(){return this.Oh}setDefaultInterval(t,i){return this.Gh=t,!1!==(null==i?void 0:i.applyImmediately)&&(this.mh=!0,this.chart.St.Ls()),this}getDefaultInterval(){return this.Gh}getTitle(){return this.Sh}setTitle(t){return this.Sh=t,this.Nh(),this}getTitleFillStyle(){return this.Mh.$h()}setIntervalRestrictions(t){return this.Uh=t,this.bh=void 0!==t,this.chart.St.Ls(),this}getIntervalRestrictions(){if("function"==typeof this.Uh){const t=this.Yh();return this.Uh({curStart:this.zh,curEnd:this.Vh,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max})}return this.Uh}setTitleFillStyle(t){return this.Mh.Ie(t),this.chart.St.Ls(),this}getTitleFont(){return this.Mh.Hh()}setTitleFont(t){return this.Mh.Xh(t),this.chart.St.Ls(),this}setTitleRotation(t){return this.Mh.Wh(t),this.chart.St.Ls(),this}getTitleRotation(){return this.Mh.jh()}setTitleEffect(t){return this.Zh.Ps(t),this.chart.St.Ls(),this}getTitleEffect(){return this.Zh.Bs()}Rh(t,i){if(this.eh.size>0&&this.Qh(),"Empty"===t){const s=i||(t=>t);this.Eh=s(new _r),this.ih=this.Eh.We(this.Dh),this.sh=t}else if("Numeric"===t){"Numeric"!==this.sh&&(this.Eh=this.Bh.numeric);const s=i||(t=>t);this.Eh=s(this.Eh),this.ih=this.Eh.We(this.Dh),this.sh=t}else if("DateTime"===t){"DateTime"!==this.sh&&(this.Eh=this.Bh.datetime);const s=i||(t=>t);this.Eh=s(this.Eh),this.ih=this.Eh.We(this.Dh),this.sh=t}else if("Time"===t){"Time"!==this.sh&&(this.Eh=this.Bh.time);const s=i||(t=>t);this.Eh=s(this.Eh),this.ih=this.Eh.We(this.Dh),this.sh=t}return this.chart.St.Ls(),this}Jh(){return this.ih}Kh(t,i){this.ih=t,this.sh=i,this.chart.St.Ls()}setInterval(t){const{start:i,end:s,animate:e,stopAxisAfter:h}=t;return this.bh||(this.Uh=void 0),this.ct(void 0!==i?i:this.zh,void 0!==s?s:this.Vh,void 0!==e&&e,void 0===h||h,"userSetInterval"),this}ct(t,i,s=!1,e=!0,h){let r={start:t,end:i};const n="synchronizedAxis"===h||"setDefaultInterval"===h,o="setDefaultInterval"!==h,a=Math.abs(i-t),l=Math.abs(this.Vh-this.zh);if(void 0!==this.ih.Je&&this.ih.Je>a){const s=(i+t)/2,e=(o?this.ih.Je/2:l/2)*(t>i?-1:1);r={start:s-e,end:s+e}}if(void 0!==this.ih.Ke&&this.ih.Ke<a){const s=(i+t)/2,e=(o?this.ih.Ke/2:l/2)*(t>i?-1:1);r={start:s-e,end:s+e}}const c=this.ot.et(r.start,r.end,this.zh,this.Vh,o);if(!1===c)return this;if(!0===c);else if(r=c,"zoomBandChart"===h)return this;let u;switch(h){case"userSetInterval":case"userFit":case"interactionSetInterval":case"interactionZoom":case"setDefaultInterval":u=!0;break;case"zoomBandChart":case"synchronizedAxis":u=!1;break;default:return rs(0,""),this}if(this.qh&&this.qh.finishAll(!1),this.oh&&(!0===s||s>0)){this.setStopped(!0);const t=!0===s?void 0:s,i=!this.qh||this.qh.isOver()?this.oh:this.qh.NextAnimation.bind(this);this.qh=i([[this.zh,r.start],[this.Vh,r.end]],(([t,i])=>{this.tr(t,i,{allowIntervalLengthChange:o,skipIntervalRestriction:n})}),t),this.qh.addEventListener("end",(()=>{this.qh=void 0,u&&(this.ph=ni.performance.now())})),this.qh.addEventListener("end",(()=>{this.setStopped(e)}))}else this.tr(r.start,r.end,{allowIntervalLengthChange:o,skipIntervalRestriction:n}),this.setStopped(e),u&&(this.ph=ni.performance.now());return this}getInterval(){return{start:this.zh,end:this.Vh}}setStopped(t){return t===this.uh||(t&&(this.qh&&this.qh.finishAll(!1),this.qh=void 0),this.uh=t,this.D.R("stoppedchange",{isStopped:this.uh}),this.dh=ni.performance.now(),this.chart.St.Ls()),this}getStopped(){return this.uh}fit(t,i){const s=this.Yh(),e=this.Gh||Br,h="function"==typeof e?e({curStart:this.zh,curEnd:this.Vh,dataMin:null==s?void 0:s.min,dataMax:null==s?void 0:s.max}):e;return this.ct(void 0!==h.start?h.start:this.zh,void 0!==h.end?h.end:this.Vh,void 0!==t?t:void 0!==h.animate?h.animate:this.ah,void 0!==i?i:void 0===h.stopAxisAfter||h.stopAxisAfter,this.Gh?"setDefaultInterval":"userFit"),this}setScrollStrategy(t){return this.hh=t,this.bh||t!==fr.expansion||(this.Uh=void 0),this.chart.St.Ls(),this}getScrollStrategy(){return this.hh}setAnimationScroll(t){return this.rh=Boolean(t),this.chart.St.Ls(),this}setAnimationZoom(t,i=300){return this.qh&&(this.qh.finishAll(!1),this.qh=void 0),this.oh=t?Gt((()=>this.chart.St.Ls()))(i,t):void 0,this}setAnimationsEnabled(t){return this.ah=t,t?(this.setAnimationScroll(!0),this.setAnimationZoom(Ot.ease,void 0)):(this.setAnimationScroll(void 0),this.setAnimationZoom(void 0)),this}getAnimationsEnabled(){return this.ah}setVisible(t){const i=this.ft!==t;return this.ft=t,this.Mh.setVisible(t),this.ir((i=>{i.sr.setVisible(t)})),i&&this.D.R("visiblechange",{isVisible:this.ft}),this}getVisible(){return this.ft}er(t){return!1}hr(t){if(this.xh&&this.xh(),this.title.setPointerEvents(this.title.zt.length>0),!this.er(t)||!this.rr){const i=new Map,s=new Map,e=this.nr(),h=e.min,r=e.max,n=Ir(this.ih,h,r,this.zh,this.Vh,t.physicalAxisSize,Math.min(this.zh,this.Vh),Math.max(this.zh,this.Vh));this.ar();const o=Ue(3,20,fi((t.physicalAxisSize-30)/270,0,1)),a={...t,...this.lr(t)},l=this.cr(this.ih,Math.min(h,this.zh,this.Vh),Math.max(r,this.zh,this.Vh),n,i,a,s,o),c=this.ur(this.ih,Math.min(h,this.zh,this.Vh),Math.max(r,this.zh,this.Vh),n,i,a,l,s,o),u=new Map([...l,...c]),d=this.ih.dr,f=void 0!==this.ih.Ze.find((t=>vr(t)&&!O(t.th.labelFillStyle)));if(d&&f&&Array.from(u).reduce(((t,i)=>t+(i[1].labelText.length>0&&!O(i[0].sr.$h())?1:0)),0)<=1){this.ar(),u.clear();const i=[Math.min(this.zh,this.Vh),Math.max(this.zh,this.Vh)],s={start:this.ot.getInnerStart(),end:this.ot.getInnerEnd()};i.forEach((i=>{const e=this.Ar(i,d,d.He(i,s),t,a),h=this.gr(e.keyValue,d,a,e,e.labelText);u.set(h,e)}))}this.vr(),this.rr={...a,...this.yr(t,u),min:h,max:r}}return this.rr}pr(t,i,s){const e=i.th;s.length>0?t.sr.Ie(e.getLabelFillStyle()).Xh(e.getLabelFont()).Sr(s).setVisible(this.getVisible()).mr(e.getLabelShadow()):t.sr.setVisible(!1)}gr(t,i,s,e,h){const r=this.eh.get(i)||new Map;this.eh.set(i,r);let n=r.get(t);return n||(n=this.br(t,i,s,e),r.set(t,n)),this.pr(n,i,h),n.Mr=!1,n}cr(t,i,s,e,h,r,n,o){const a=new Map,l=this._h(),c=[];for(const u of t.je){const t=e.get(u).filter((t=>t>=i&&t<=s)),d=t.map((t=>this.Ar(t,u,u.He(t,{start:this.ot.getInnerStart(),end:this.ot.getInnerEnd()}),r,r)));for(let i=0;i<t.length;i+=1){const s=t[i],e=d[i],f=this.gr(s,u,r,e,e.labelText),A=Cr(f.S,f.sr.wr(),e.labelPosition,e.labelAlignment,e.labelRotation,{x:0,y:0},u,l,h,o,this.chart.St.kh);c.find(((t,i)=>{const s=d[i];return Cs(A,Cr(t.S,t.sr.wr(),s.labelPosition,s.labelAlignment,s.labelRotation,{x:0,y:0},u,l,h,o,this.chart.St.kh))}))&&f.sr.setVisible(!1),f.Mr=!1,n.set(f,e),c.push(f),a.set(f,e)}}return a}ur(t,i,s,e,h,r,n,o,a){var l;const c={start:this.ot.getInnerStart(),end:this.ot.getInnerEnd()},u=new Map,d=Array.from(n.values());let f,A=[];for(const n of t.Ze){const g=n===t.Ze[t.Ze.length-1],v=e.get(n);if(!v)break;let y;if(void 0===f)y=[{start:i,end:s,keyValues:v}];else{y=[];for(let t=0;t<f.length-1;t+=1){const e=f[t],h=f[t+1],r={start:e,end:h,keyValues:[]};for(const t of v)t>=e&&t<h&&r.keyValues.push(t);r.end<i||r.start>s||y.push(r)}}if(f=v,yr(n))continue;let p,m=0,S=!1,b=-1,x=!0,M=[];for(let t=0;t<y.length;t+=1){const i=y[t].keyValues.map((t=>this.Ar(t,n,n.He(t,c),r,r)));M=M.concat(i)}if(n.th.getLabelFillStyle()!==V)for(p=[];++b<y.length;){const t=y[b],e=t.start,r=t.end;let o=t.keyValues;if(m>0){if(void 0===n.Th){x=!1;break}if(o=(0,n.Th._r)(t.keyValues,m-1,e,r,i,s),void 0===o)break}const l=ss(o.map((t=>M.find((i=>i.keyValue===t)))));if(S)p=p.concat(l);else{const t=this.wh(l,n,m,e,r,i,s,h,d,A,a);if(!0===t){m+=1,b=-1,p=[];continue}p=p.concat(t)}t!==y[y.length-1]||p.reduce(((t,e)=>t+(Ls(e.keyValue,i,s)?1:0)),0)>=2||g||S||(S=!0,m-=1,b=-1,p=[])}else p=M;const w=p.reduce(((t,e)=>t+(Ls(e.keyValue,i,s)?1:0)),0);void 0!==n.Cr&&w<n.Cr&&(p.length=0);const _=[];for(const t of M){if(t.keyValue<i||t.keyValue>s)continue;const e=p.includes(t);if(!e&&"hide-tick"===(null===(l=n.Th)||void 0===l?void 0:l.kr))continue;t.labelText=e?t.labelText:"";const h=this.gr(t.keyValue,n,r,t,t.labelText);o.set(h,t),_.push(t),u.set(h,t)}if(A=_,!x)break}return u}ir(t){for(const i of this.eh.values())for(const s of i.values())t(s)}Tr(t,i){for(const s of this.eh.values())for(const e of s.values())i=t(i,e);return i}Qh(){this.eh.forEach(((t,i)=>{t.forEach((t=>{t.dispose()}))})),this.eh.clear()}ar(){for(const t of this.eh.values())for(const i of t.values())i.Mr=!0}vr(){for(const t of this.eh.values()){const i=Array.from(t.entries());for(let s=0;s<i.length;s+=1){const[e,h]=i[s];h.Mr&&(h.dispose(),t.delete(e))}}}nr(){const t=this.ot.getInnerStart()<this.ot.getInnerEnd()?this.ot.getInnerStart():this.ot.getInnerEnd(),i=this.ot.getInnerEnd()>this.ot.getInnerStart()?this.ot.getInnerEnd():this.ot.getInnerStart();return c(t,i)}Ch(t,i,s){return 0!==i.length&&(!gr(s)||!0===s.Fr)}Ir(t,i){return"Empty"===this.sh||(this.ih.je.forEach((s=>{i=t(i,s.th)})),this.ih.Ze.forEach((s=>{vr(s)&&(i=t(i,s.th))}))),i}Yh(){let t=this.Lh.Pr();const i=this.Lh.Lr();let s;if(void 0!==t&&ai(t)&&void 0!==i&&ai(i)&&("logarithmic"===this.Dh.type&&(0===t&&(t=Math.min(1,i)),Math.sign(t)!==Math.sign(i)&&(t=Math.min(1,i-.1))),s?(s.min=Math.min(s.min,t),s.max=Math.max(s.max,i)):s=c(t,i)),s&&ai(s.min)&&ai(s.max))return di(s.min,s.max)?{min:s.min-1,max:s.max+1,emptyBounds:!0}:s}Br(){if(!this.Ih)return 0;let t=0;const i=this.Lh.Dr();return i&&(t=Math.max(t,i)),t}setAutoRegionsEnabled(t){return this.Ih=t,this.chart.St.Ls(),this}Er(){var t;const i=this.fh;let s=!1;if(this.mh&&this.Gh){const t=this.Yh();if(t){const i="function"==typeof this.Gh?this.Gh({curStart:this.zh,curEnd:this.Vh,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max}):this.Gh;if("object"==typeof this.Gh&&!this.bh){const s=Lr(this.Uh,t,{start:void 0!==i.start?i.start:this.zh,end:void 0!==i.end?i.end:this.Vh},this.getInterval(),!0);s.start===i.start&&s.end===i.end||(this.Uh=void 0)}this.ct(void 0!==i.start?i.start:this.zh,void 0!==i.end?i.end:this.Vh,void 0!==i.animate&&i.animate,void 0===i.stopAxisAfter||i.stopAxisAfter,"setDefaultInterval"),this.mh=!1}}if(this.hh&&!this.uh){let i=this.Yh();if((null==i?void 0:i.emptyBounds)&&this.hh===fr.expansion&&(i=void 0),i){const e=this.zh,h=this.Vh;let r=this.hh.start(e,h,i.min,i.max),n=this.hh.end(e,h,i.min,i.max);const o=null===(t=this.hh.allowIntervalLengthChange)||void 0===t||t,a=Lr(this.Uh,i,{start:r,end:n},{start:e,end:h},o);r=a.start,n=a.end;const l=!1===di(e,r),c=!1===di(h,n);if(r=l?r:e,n=c?n:h,l||c){let t=!1;if(this.rh&&!this.Ph)if(this.rh){t=!0;const i=l?this.Rr(e,r):e,a=c?this.Rr(h,n):h;if(!0===this.tr(i,a,{allowIntervalLengthChange:o,skipIntervalRestriction:!1})&&(l&&!1===di(i,r)||c&&!1===di(a,n))){this.chart.St.Ls(!0),s=!0;let t=Math.abs(n-r)/Math.abs(i-a);t<1&&(t=1/t),this.Ah=t>=1.4}}else t=!1;t||this.tr(r,n,{allowIntervalLengthChange:o,skipIntervalRestriction:!1}),this.Ph=!1}}}return s?(this.fh!==s&&(this.fh=s,this.gh=ni.performance.now()),this.zr&&(clearTimeout(this.zr),this.zr=void 0)):!0===i&&void 0===this.zr&&(this.Ah=!1,this.zr=setTimeout((()=>{!1!==this.fh&&(this.fh=!1,this.gh=ni.performance.now()),this.zr=void 0,this.chart.St.Ls()}),200)),this}Vr(){const t=this.getInterval(),i=this.Yh();return"function"==typeof this.Uh?this.Uh({curStart:t.start,curEnd:t.end,dataMin:null==i?void 0:i.min,dataMax:null==i?void 0:i.max}):this.Uh}tr(t,i,s){let e={start:t,end:i};const{allowIntervalLengthChange:h,skipIntervalRestriction:r}=s;let n=!0;if(this.Uh&&!r){const t=this.Yh();e=Lr(this.Uh,t,e,{start:this.zh,end:this.Vh},h)}const o=Math.abs(i-t),a=Math.abs(this.Vh-this.zh);if(void 0!==this.ih.Je&&this.ih.Je>o){const s=(i+t)/2,r=(h?this.ih.Je/2:a/2)*(t>i?-1:1);e={start:s-r,end:s+r},n=!1}if(void 0!==this.ih.Ke&&this.ih.Ke<o){const s=(i+t)/2,r=(h?this.ih.Ke/2:a/2)*(t>i?-1:1);e={start:s-r,end:s+r},n=!1}let l=this.ot.et(e.start,e.end,this.zh,this.Vh,h);if(!1===l)return!1;!0!==l&&(e=l);const c=this.Br(),u=this.Or(Math.min(e.start,e.end),Math.max(e.start,e.end),c);return l=this.ot.et(e.end>e.start?u.min:u.max,e.end>e.start?u.max:u.min,this.zh,this.Vh,!1),!!l&&(!0===l?this.ot.W(e.end>e.start?u.min:u.max,e.end>e.start?u.max:u.min):this.ot.W(e.start,e.end),this.zh=e.start,this.Vh=e.end,this.D.R("intervalchange",{start:e.start,end:e.end}),this.yh=ni.performance.now(),this.chart.St.Ls(),n)}Nr(){return this.fh}Gr(){return void 0!==this.qh}Nh(){var t;const i=!1!==(null===(t=this.ls)||void 0===t?void 0:t.displayOnAxis);this.Mh.Sr(this.Oh&&i&&this.Sh?`${this.Sh} (${this.Oh})`:this.Sh),this.chart.St.Ls()}}class Fr{constructor(t,i,s,e,h=s.Yr(e).Ur(us).$r(us).setPointerEvents(!1)){this.Mr=!1,this.dt=!1,this.As=[],this.Hr=t,this.S=i,this.Xr=s,this.Wr=e,this.sr=h,this.As.push(h)}Ts(t){this.As.forEach((i=>i.setVisible(t)))}dispose(){return this.dt||(this.dt=!0,this.As.forEach((t=>t.dispose()))),this}}const Ir=(t,i,s,e,h,r,n,o,a=!1)=>{const l=new Map;for(const a of t.je){let t=a.jr(i,s,e,h,r,n,o);t=Pr(t),l.set(a,t)}let c;for(const e of t.Ze){let h;if(void 0===c)h=e.jr(i,s,i,s,r);else{if(a&&e===t.Ze[t.Ze.length-1])break;let n=[];const o=c.filter((t=>i<=t&&t<=s)).length;if(o>0){const t=r/(o-1);if(void 0!==e.Zr&&e.Zr>t)break}for(let t=0;t<c.length-1;t+=1){const h=e.jr(c[t],c[t+1],i,s,r);n=n.concat(h)}h=n}h=Pr(h),l.set(e,h),c=h}return l},Pr=t=>(t=(t=>{const i={},s=[],e=t.length;let h=0;for(let r=0;r<e;r+=1){const e=t[r];1!==i[e]&&(i[e]=1,s[h]=e,h+=1)}return s})(t)).sort(((t,i)=>t-i)),Lr=(t,i,s,e,h)=>{const r="function"==typeof t?t({curStart:e.start,curEnd:e.end,dataMin:null==i?void 0:i.min,dataMax:null==i?void 0:i.max}):t;if(!r)return s;const n={start:s.start,end:s.end};let o=Math.abs(s.end-s.start);if(void 0!==r.intervalMin&&o<r.intervalMin){const t=(n.start+n.end)/2;n.start=t+.5*Math.sign(s.start-t)*r.intervalMin,n.end=t+.5*Math.sign(s.end-t)*r.intervalMin}if(o=Math.abs(s.end-s.start),void 0!==r.intervalMax&&o>r.intervalMax){const t=(n.start+n.end)/2;n.start=t+.5*Math.sign(s.start-t)*r.intervalMax,n.end=t+.5*Math.sign(s.end-t)*r.intervalMax}return o=Math.abs(s.end-s.start),void 0!==r.startMin&&(n.start=Math.max(n.start,r.startMin),h||di(Math.abs(n.start-n.end),o)||(n.end=n.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==r.startMax&&(n.start=Math.min(n.start,r.startMax),h||di(Math.abs(n.start-n.end),o)||(n.end=n.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==r.endMin&&(n.end=Math.max(n.end,r.endMin),h||di(Math.abs(n.start-n.end),o)||(n.start=n.end+Math.sign(s.start-s.end)*o)),o=Math.abs(s.end-s.start),void 0!==r.endMax&&(n.end=Math.min(n.end,r.endMax),h||di(Math.abs(n.start-n.end),o)||(n.start=n.end+Math.sign(s.start-s.end)*o)),Math.sign(n.end-n.start)!==Math.sign(s.end-s.start)?{end:n.start,start:n.end}:n},Br=t=>{if(void 0===t.dataMin||void 0===t.dataMax)return{stopAxisAfter:!1};const i=t.curEnd>=t.curStart;return{start:i?t.dataMin:t.dataMax,end:i?t.dataMax:t.dataMin,stopAxisAfter:!1}},Dr=t=>{const i=t.getDraggingMode();return void 0!==i&&i!==si.notDraggable?i===si.draggable?tr.Move:i===si.onlyHorizontal?tr.Horizontal:tr.Vertical:void 0};class Er{constructor(){this.ft=!0}set draggable(t){this.D.draggable=t}get draggable(){return this.D.draggable}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}setVisible(t){const i=this.ft!==t;return this.ft=t,i&&this.D.R("visiblechange",{isVisible:this.ft}),this}getVisible(){return this.ft}}class Rr extends Er{constructor(t,i,s,e,h){super(),this.D=new zt,this.position=r(50,50),this.origin=r(0,0),this.size=r(0,0),this.dt=!1,this.Qr=void 0,this.Jr=void 0,this.Kr=Dr,this.qr=void 0,this.oi=f(0,0,0,0),this.Ys=t,this.renderingScale=i,this.scale=s,this.bt=e,this._t=h,this.Ys.Ls(),this._t=h,this.addEventListener("pointerenter",(()=>{const t="function"==typeof this.Kr?this.Kr(this):this.Kr;t&&(this.Jr=this.Ys.St.tn(t))})),this.addEventListener("pointerleave",(()=>{this.Ys.St.sn(this.Jr)}));const n=t=>{const i=this.getDraggingMode();if(i===si.notDraggable)return;Bi(t);let s=t;const e=t=>{const e={x:t.clientX-s.clientX,y:t.clientY-s.clientY};s=t;const h=this.scale.Pi(this.getPosition(),{x:i!==si.onlyVertical?e.x:0,y:i!==si.onlyHorizontal?-e.y:0}),r=this.scale,n=this.getSize(),o=this.getOrigin(),a=r.Pi({x:r.x.getInnerStart(),y:r.y.getInnerStart()},Qs({x:(1+o.x)/2,y:(1+o.y)/2},n)),l=r.Pi({x:r.x.getInnerEnd(),y:r.y.getInnerEnd()},Qs({x:(o.x-1)/2,y:(o.y-1)/2},n)),c={x:Math.min(Math.max(h.x,a.x),l.x),y:Math.min(Math.max(h.y,a.y),l.y)};this.setPosition(c)},h=t=>{this.Ys.St.en.removeEventListener("pointermove",e),this.Ys.St.en.removeEventListener("pointerup",h),this.addEventListener("pointerdown",n)};this.removeEventListener("pointerdown",n),this.Ys.St.en.addEventListener("pointermove",e),this.Ys.St.en.addEventListener("pointerup",h)};this.addEventListener("pointerdown",n)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}setEffect(t){return this.vs=this.vs||this.Ys.St.vs.ys(this,{hn:{shapes:this.rn()}}),this.vs.hn.Ps(t),this}getEffect(){return!!this.vs&&this.vs.hn.Bs()}setAutoDispose(t){return this.qr=t,this.Ys.Ls(),this}getAutoDispose(){return this.qr}getSize(t=ti.Everything){return t===ti.Everything?r(this.size.x+(this.oi.left+this.oi.right),this.size.y+(this.oi.bottom+this.oi.top)):this.size}setContentSize(t){this.size=t}setMargin(t){return this.oi="object"==typeof t?g(this.oi,t):{left:t,top:t,right:t,bottom:t},this.Ys.Ls(),this}getMargin(){return this.oi}Le(){if(this.qr){const t=this.size,i=this.renderingScale.xi(),s={x:t.x/i.x,y:t.y/i.y};("max-width"===this.qr.type&&s.x>=this.qr.maxWidth||"max-height"===this.qr.type&&s.y>=this.qr.maxHeight)&&this.dispose()}return this}hr(){return this}dispose(){return this.dt||(this.Ys.Ls(),this.dt=!0,this.bt(this),this.D.R("dispose",{}),this.rn().forEach((t=>t.dispose()))),this}setVisible(t){return super.setVisible(t),this.rn().forEach((i=>i.setVisible(t))),this.Ys.Ls(),this}isDisposed(){return this.dt}setPosition(t){return this.position=t,this.Ys.Ls(),this}getPosition(t=this.origin,i=ti.Everything){const s=this.getSize(ti.Everything),e=this.scale.Pi(this.position,Qs({x:-(this.origin.x+1)/2,y:-(this.origin.y+1)/2},s));if(i===ti.Everything)return this.scale.Pi(e,Qs({x:(t.x+1)/2,y:(t.y+1)/2},s));const h=this.scale.Pi(e,{x:this.oi.left,y:this.oi.bottom}),r=this.getSize(ti.Content);return this.scale.Pi(h,Qs({x:(t.x+1)/2,y:(t.y+1)/2},r))}setOrigin(t){return this.origin=t,this.Ys.Ls(),this}getOrigin(){return this.origin}setDraggingMode(t=si.notDraggable){return this.Qr=t,this.Ys.Ls(),this}getDraggingMode(){return void 0!==this.Qr?this.Qr:si.notDraggable}setMouseStyle(t){return this.Kr=t,this}getMouseStyle(){return this.Kr}}class zr extends Rr{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.nn=f(),this.an=0,this.Ys=t,this.ln=e,this.backgroundElement=new this.ln(this.Ys,this.renderingScale,this.scale,ui,r),this.D.$t(this.backgroundElement)}setPointerEvents(t){return super.setPointerEvents(t),this.backgroundElement.setPointerEvents(t),this}rn(){return this.backgroundElement.rn()}setBackground(t){return t(this.backgroundElement),this}getBackground(){return this.backgroundElement}Le(){return super.Le(),this.dt||(void 0!==this.cn&&(this.backgroundElement.cn=this.cn-.01),this.backgroundElement.setOrigin(this.origin).setPosition(this.getPosition(this.origin,ti.PaddedBackground)).Le()),this}hr(){const t=this.getSize(ti.PaddedContent);return this.backgroundElement.un(t).hr(),super.hr()}dispose(){return super.dispose(),this.backgroundElement.dispose(),this}setVisible(t){return super.setVisible(t),this.backgroundElement.setVisible(t),this}setPadding(t){return this.nn="object"==typeof t?g(this.nn,t):{left:t,top:t,right:t,bottom:t},this.Ys.Ls(),this}getPadding(){return this.nn}getSize(t=ti.Everything){let i=super.getSize(t);return t>=ti.PaddedContent&&(i=r(i.x+this.nn.left+this.nn.right,i.y+this.nn.bottom+this.nn.top)),t>=ti.PaddedBackground&&(i=r(i.x+this.backgroundElement.dn()+this.backgroundElement.fn(),i.y+this.backgroundElement.An()+this.backgroundElement.gn())),i}getPosition(t=this.origin,i=ti.Everything){if(i===ti.Everything)return super.getPosition(t,i);const s=super.getPosition(r(-1,-1),ti.Everything),e=this.getMargin(),h=this.scale.Pi(s,{x:e.left,y:e.bottom});if(i===ti.PaddedBackground){const i=this.getSize(ti.PaddedBackground);return this.scale.Pi(h,Qs({x:(t.x+1)/2,y:(t.y+1)/2},i))}const n=this.scale.Pi(h,{x:this.backgroundElement.dn(),y:this.backgroundElement.An()});if(i===ti.PaddedContent){const i=this.getSize(ti.PaddedContent);return this.scale.Pi(n,Qs({x:(t.x+1)/2,y:(t.y+1)/2},i))}const o=this.getPadding(),a=this.scale.Pi(n,{x:o.left,y:o.bottom}),l=this.getSize(ti.Content);return this.scale.Pi(a,Qs({x:(t.x+1)/2,y:(t.y+1)/2},l))}getHighlight(){return this.an}setHighlight(t){return this.an=es(t),this.backgroundElement.setHighlight(t),this.D.R("highlightchange",{highlight:this.an}),this}}const Vr=t=>"setBackground"in t;class Or extends Er{constructor(t,i,s,e,h,r,n,o,a,l,c){super(),this.S=0,this.vn=1,this.yn=!0,this.pn=new hh,this.mn=!0,this.dt=!1,this.D=new zt,this.axisScale=e,this.renderingScale=h,this.Sn=n,this.bn=o,this.xn=a,this.bt=l,this.Mn=i,this.wn=s,this._n=this.Mn.Ge(this.renderingScale),this.D.Nt(this._n),this._t=c,this.Cn=this.xn.setDirection(this.bn).kn(this.wn,this.renderingScale,r,ui,this._t,!1).setOrigin(Pi(this.bn)),this.D.$t(this.Cn),this.axis=t,this.setPointerEvents(!1),"major"===this.Cn.Tn?this._n.Ne(c.xAxisNumericTicks.majorTickStyle.gridStrokeStyle):"minor"===this.Cn.Tn?this._n.Ne(c.xAxisNumericTicks.minorTickStyle.gridStrokeStyle):"other"===this.Cn.Tn&&this._n.Ne(c.cursorGridStrokeStyleX)}setValue(t){return this.S=t,this.wn.Ls(),this.D.R("valuechange",{value:this.S}),this}getValue(){return this.S}setTextFormatter(t){return this.Fn=t,this.wn.Ls(),this}setTickLength(t){return this.Cn.setPointerLength(t),this.Mn.Ls(),this}getTickLength(){return this.Cn.getPointerLength()}setTickLabelPadding(t){return this.Cn.setTickLabelPadding(t),this.Mn.Ls(),this}setTickLabelRotation(t){return this.Cn.setTextRotation(t),this.Mn.Ls(),this}getTickLabelRotation(){return this.Cn.getTextRotation()}getTickLabelPadding(){return this.Cn.getTickLabelPadding()}setGridStrokeLength(t){return this.vn=t,this.Mn.Ls(),this}getGridStrokeLength(){return this.vn}setGridStrokeStyle(t){return this._n.Ne(t),this.Mn.Ls(),this}getGridStrokeStyle(){return this._n.In()}dispose(){return this.dt||(this.dt=!0,this._n.dispose(),this.Cn.dispose(),this.bt(this),this.Mn.St.Ls(),this.D.R("dispose",{})),this}setMarkerVisible(t){return this.yn=t,this.wn.Ls(),this}getMarkerVisible(){return this.yn}setMarker(t){return t(this.Cn),this.wn.Ls(),this}getMarker(){return this.Cn}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}setAllocatesAxisSpace(t){return this.mn=t,this.wn.Ls(),this}getAllocatesAxisSpace(){return this.mn}isInScale(){return Ls(this.S,this.axisScale.getInnerStart(),this.axisScale.getInnerEnd())}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Nr extends Or{constructor(t,i,s,e,h,r,n,o,a,l,c){super(t,i,s,e,h,r,n,o,c,a,l),this.Pn=!1,this.bt=a,this.Mn=i,this.wn=s}dispose(){return this.Pn=!1,super.dispose()}update(){return this}plot(t,i,s,e,h){if(this.isInScale()&&this.getVisible()&&t){this.Pn=!1;const t=nt(this.S,this.axisScale,this.Sn.getWidth(this.renderingScale));this._n.setVisible(!0).Ue(this.Sn.toPoint(t,i)).$e(this.Sn.toPoint(t,i-(e+s*this.vn))),this.yn?(this.Fn&&this.Cn.setText(this.Fn(this.S,this)),this.Cn.setVisible(!0).setPosition(this.Sn.toPoint(t,h))):this.Cn.setVisible(!1)}else this._n.setVisible(!1),this.Cn.setVisible(!1);return this.Cn.hr().Le(),this}Ln(){this.yn?(this.Fn&&this.Cn.setText(this.Fn(this.S,this)),this.Cn.setVisible(!0)):this.Cn.setVisible(!1);const t=this.Cn.hr().getSize();return this.Sn.getHeight(t)}}const Gr={Bn:"X0Z1bGxBY2Nlc3M=",Dn:"X0Jhc2VDaGFydHM=",En:"RGF0YSBHcmlk",Rn:"X0hhc0hhcmRFeHBpcmF0aW9u",zn:"X0lzVHJpYWw=",Vn:"X0lzQ29tbXVuaXR5",On:"T0hMQyBTZXJpZXM=",Nn:"QmFyIENoYXJ0",Gn:"c2xpY2VkIGNoYXJ0cw==",$n:"R2F1Z2UgQ2hhcnQ=",Un:"U3BpZGVyIENoYXJ0",Yn:"UG9sYXIgQ2hhcnQ=",Hn:"M0QgQ2hhcnQ=",Xn:"Wm9vbSBCYW5kIENoYXJ0",Wn:"TWFwIENoYXJ0",jn:"WFkgQ2hhcnQ=",Zn:"WFkgU2VyaWVz",Qn:"SGVhdG1hcCBTZXJpZXM=",Jn:"RmlndXJlIFNlcmllcw==",Kn:"bG9nYXJpdGhtaWMgYXhpcw==",qn:"cmVhbC10aW1lIHZpc3VhbGl6YXRpb24=",io:"aW5kaXZpZHVhbCBwb2ludCBzaXpl",so:"aW5kaXZpZHVhbCBwb2ludCBjb2xvcg==",eo:"VHJlZU1hcCBDaGFydA==",ho:"UGFyYWxsZWwgQ29vcmRpbmF0ZSBDaGFydA==",ro:"X1B5dGhvbkxpY2Vuc2U="},$r=(t,i)=>t.setTextFillStyle(i.uiTextFillStyle).setTextFont(i.uiTextFont),Ur=(t,i)=>(Wi(t.setButtonSize(i.uiButtonSize),i,!1,{fill:i.uiButtonFillStyle}),t),Yr=(t,i,s)=>{s&&Vr(t)&&t.setBackground((t=>t.setFillStyle(i.uiBackgroundFillStyle).setStrokeStyle(i.uiBackgroundStrokeStyle))).setEffect(!0)},Hr={uiElement:void 0,stylers:t.List(),addStyler(t){return{...this,stylers:this.stylers.push(t)}},applyStylers(t,i){return this.stylers.forEach((s=>void 0!==s?s(t,i):void 0)),t}},Xr={background:void 0,setBackground(t){return{...this,background:t}}},Wr={kn(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,e,h),h);return Yr(n,h,r),n}},jr={kn(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.background,e,h),h);return Yr(n,h,r),n}};class Zr extends Rr{constructor(){super(...arguments),this.no=!0}Le(){return super.Le(),this}setPointerEvents(t){return this.no=t,this}getPointerEvents(){return this.no}rn(){return[]}}class Qr extends Zr{un(t){return this.size=t,this}dn(){return 0}fn(){return 0}gn(){return 0}An(){return 0}setHighlight(t){return this}getHighlight(){return 0}setFillStyle(){return this}getFillStyle(){return V}setStrokeStyle(){return this}getStrokeStyle(){return Wt}setStrokeThickness(){return this}getStrokeThickness(){return 0}}class Jr{constructor(t){this.oo=new Map,this.St=t}bs(t,i,s){const e=s.animationEnabled;this.oo.set(t,{applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:e,curAnimatedHighlightValue:0});const h=()=>{this.oo.delete(t),t.removeEventListener("dispose",h)};ni.requestAnimationFrame((()=>{t.addEventListener("dispose",h)}))}ao(t,i){let s=i.animationEnabled;const e=[],h=()=>{e.forEach((t=>{this.oo.delete(t)})),t.removeEventListener("dispose",h)};return ni.requestAnimationFrame((()=>{t.addEventListener("dispose",h)})),{lo:(t,i)=>{const h={applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:s,curAnimatedHighlightValue:0};e.push(t),this.oo.set(t,h)},co:()=>{e.forEach((t=>{this.oo.delete(t)})),e.length=0},uo:t=>{s=t,e.forEach((t=>{this.zs(t,s)}))},do:()=>s}}Rs(t,i){const s=this.oo.get(t);s&&(s.curUnanimatedHighlightValue=es(i),this.St.Ls())}Cs(t,i=!1){const s=this.oo.get(t);return s?i?s.curAnimatedHighlightValue:s.curUnanimatedHighlightValue:0}zs(t,i){const s=this.oo.get(t);s&&(s.animationEnabled=i)}Vs(t){const i=this.oo.get(t);return!!i&&i.animationEnabled}hr(t){let i=!1;this.oo.forEach(((s,e)=>{let h;if(s.animationEnabled){const e=1e3;if(s.curUnanimatedHighlightValue>0){const r=s.curAnimationPositionMillis/e;h=s.curUnanimatedHighlightValue*Math.abs(Math.sin(r*Math.PI/2+.5));const n=0===s.curAnimatedHighlightValue?1:t;s.curAnimationPositionMillis+=n,i=!0}else s.curAnimatedHighlightValue>0&&0===s.curUnanimatedHighlightValue?(h=Math.max(s.curAnimatedHighlightValue-t/e,0),i=i||h>0):h=0,s.curAnimationPositionMillis=0}else h=s.curUnanimatedHighlightValue;h!==s.curAnimatedHighlightValue&&(s.applyHighlight(h),s.curAnimatedHighlightValue=h)})),i&&this.St.Ls(!0)}}const Kr=new Map,qr=(t,i)=>{const s=t.getSize(),e=t.getFamily(),h=t.getWeight(),r=t.getStyle(),n=t.getVariant(),o=`${r} ${n?"small-caps":"normal"} ${h} ${s}px ${e}`,a=`${o} ${i.toFixed(2)}`;let l=Kr.get(a);return l||(l=((t,i,s,e)=>({font:t,properties:i,dpr:s,id:e}))(o,{type:"font",size:s,family:e,style:r,variant:n,weight:h},i,a),Kr.set(a,l)),l},tn=t=>({container:t.en,setMouseStyle:(i,s)=>t.tn(i,s),restoreMouseStyle:i=>t.sn(i),clearMouseStyle:()=>t.fo(),captureFrame:(i,s,e)=>t.Ao(i,s,e),renderFrame:(i,s,e=!1)=>t.vo(i,s,e),layout:()=>{t.yo(),t.po(),t.So.mo(),t.Ls()},setBackgroundFillStyle(i){return t.setBackgroundFillStyle(i),this},setBackgroundStrokeStyle(i){return t.setBackgroundStrokeStyle(i),this},getBackgroundFillStyle:()=>t.getBackgroundFillStyle(),getBackgroundStrokeStyle:()=>t.getBackgroundStrokeStyle(),addCustomIcon:(i,s)=>t.bo(i,s),addEventListener:(i,s,e)=>t.V(i,s,e),removeEventListener:(i,s)=>t.N(i,s)}),sn=[];let en;const hn=()=>{if(void 0!==en){const t=ni.getComputedStyle(ni.document.body),i=Number(t.getPropertyValue("margin-top").replace("px",""))+Number(t.getPropertyValue("margin-bottom").replace("px",""));en.style.height=ni.innerHeight-i+"px",(()=>{for(let t=0;t<sn.length;t+=1)sn[t]()})()}},rn=new $({color:m(255,255,255)}),nn={font:qr(nh,0),fillStyle:rn,lineStyle:new vh({fillStyle:rn,thickness:1}),pointStyle3D:new Ah.Triangulated};class on{constructor(t,i,s){this.ot=rt.d2({scaleXYConstructor:be}),this.xo=new Map,this.Mo=Gt((()=>this.Ls()),60),this.wo=r(0,0),this._o=!1,this.Co=ui,this.ko=()=>{},this.To=[],this.Fo=-1,this.Io=[],this.dt=!1,this.Po=!1,this.Lo=t=>{t.dataTransfer&&t.dataTransfer.setDragImage(new Image,0,0)},this.Bo=new Map,this.Do=(t,i)=>{var s,e,h;const r=i instanceof PointerEvent&&i,n=Vt(i)?{clientX:i.changedTouches[0].clientX,clientY:i.changedTouches[0].clientY}:{clientX:i.clientX,clientY:i.clientY};if(r){if(!r.pointerType)return;this.Eo=i}const o=this.Is({x:n.clientX,y:n.clientY});if(("pointermove"===t||"pointerenter"===t)&&o&&r){const t=this.Bo.get(r.pointerId);let e=t;e||(e={lastEvent:r,entity:o.entity,collectionMember:o.collectionMember,info:o.info},this.Bo.set(r.pointerId,e));const h=void 0===t||t.entity!==o.entity||t.collectionMember!==o.collectionMember;h&&t&&t.entity.R("pointerleave",i,t.collectionMember,t.info),h&&o&&o.entity.R("pointerenter",i,o.collectionMember,o.info),o&&(o.entity.R("pointermove",i,o.collectionMember,o.info),this.en.draggable=null!==(s=o.entity.At)&&void 0!==s&&s),e.lastEvent=r,e.entity=o.entity,e.collectionMember=o.collectionMember,e.info=o.info}else if("pointerleave"===t&&r){const t=this.Bo.get(r.pointerId);t&&(t.entity.R("pointerleave",i,t.collectionMember,t.info),this.Bo.delete(r.pointerId))}else if("click"===t&&r){const t=(null===(e=this.Ro)||void 0===e?void 0:e.event)instanceof PointerEvent&&this.Ro.event.pointerId===r.pointerId&&this.Ro;t&&t.entity.R("click",r,t.collectionMember,t.info)}else if("dblclick"===t&&i instanceof MouseEvent){const t="click"===(null===(h=this.Ro)||void 0===h?void 0:h.event.type)&&this.Ro;t&&t.entity.R("dblclick",i,t.collectionMember,t.info)}else{const s=i instanceof PointerEvent?this.Bo.get(i.pointerId):o;null==s||s.entity.R(t,i,s.collectionMember,s.info)}i&&o&&(this.Ro={...o,event:i})},this.po=()=>{const{bottom:t,left:i}=this.en.getBoundingClientRect();return this.wo=r(Math.floor(i),Math.floor(t)),this.zo=ni.performance.now(),this},this.yo=()=>{this.Vo&&this.Vo()},this.tn=(t,i)=>{if(void 0!==i){const s=this.Io.find((t=>t[0]===i));return s&&(s[1]=t,this.Io.indexOf(s)===this.Io.length-1&&(this.en.style.cursor=t)),i}const s=this.Fo;return this.Fo+=1,this.Io.push([s,t]),this.en.style.cursor=t,s},this.sn=t=>{var i;const s=this.Io.find((i=>i[0]===t));if(s){const t=this.Io.indexOf(s),e=t===this.Io.length-1;if(this.Io.splice(t,1),e){const t=(null===(i=this.Io[this.Io.length-1])||void 0===i?void 0:i[1])||"default";this.en.style.cursor=t}}},this.Oo=t=>(this.No._(t),this),this.Go=()=>this.No.C(),this.$o=()=>{this.Co&&this.Co(1e3/60),this.Uo(),this.Yo(),this.ko&&this.ko()},this.Ho=t=>(this.xo.set(t.Xo(),t),this.xo=new Map([...this.xo.entries()].sort(((t,i)=>t[0]-i[0]))),t),this.Wo=t=>(this.xo.delete(t),this),this.H=()=>(this.No.o=!1,this),this.X=()=>(this.No.o=!0,this),this.jo=()=>this.Eo,this.D=new zt,this.So=t,this._t=i.theme,this.Zo=s.Zo,this.Qo=s.Jo,this.Ko={Qs:i&&void 0!==i.resourcesBaseUrl&&null!==i.resourcesBaseUrl?i.resourcesBaseUrl:void 0,qo:!i||!("warnings"in i)||"boolean"!=typeof i.warnings||i.warnings,ta:(()=>{const t=null==i?void 0:i.pickingPrecision;if("string"==typeof t){const i=t.toLowerCase();if("best"===i)return 1;if("high"===i)return.5;if("low"===i)return 1/8}return 1/4})(),ia:void 0===(null==i?void 0:i.interactable)||i.interactable,sa:void 0===i.textPixelSnappingEnabled||i.textPixelSnappingEnabled};const e=i?i.container:void 0;if(e){if("string"==typeof e){const t=ni.document.getElementById(e);if(!t)throw new Error(`Container "${e}" doesn't exist.`);this.en=t}else this.en=e;ni.addEventListener("resize",this.yo),this.To.push((()=>{ni.removeEventListener("resize",this.yo)}))}else{if(void 0===en){const t=ni.document.createElement("div");t.id="lcjs-auto-flexbox",t.style.position="relative",t.style.width="100%",t.style.display="flex",t.style.flexDirection="column",ni.document.body.appendChild(t),en=t,ni.addEventListener("resize",hn)}let t=1;for(;null!==ni.document.getElementById(`chart-${t}`);)t+=1;this.en=ni.document.createElement("div"),this.en.id=`chart-${t}`,this.en.style.flex="1",this.en.style.height="100%",en.appendChild(this.en),hn(),sn.push(this.yo),this.To.push((()=>{en&&en.removeChild(this.en),sn.includes(this.yo)&&sn.splice(sn.indexOf(this.yo),1),0===sn.length&&en&&(ni.document.body.removeChild(en),en=void 0,ni.removeEventListener("resize",hn))}))}if(ni.ResizeObserver){const t=t=>{for(const i of t)i.target===this.en&&this.yo()};this.ea=new ni.ResizeObserver(t.bind(this)),this.ea.observe(this.en)}const h=ni.getComputedStyle(this.en)||this.en.style;""!==h.position&&"static"!==h.position||(this.en.style.position="relative"),""===h.boxSizing&&(this.en.style.boxSizing="content-box"),!1!==this.Ko.ia&&""===h.touchAction&&(this.en.style.touchAction="none"),this.en.addEventListener("fullscreenchange",this.yo),this.en.addEventListener("webkitfullscreenchange",this.yo),this.en.addEventListener("dragstart",this.Lo);const n=i?i.maxFps:void 0;this.ha=n?-1===n?-1:0!==n?1e3/n:0:0,Object.keys(Rt).forEach((t=>{const i=i=>{this.Do(t,i)};this.en.addEventListener(t,i),this.To.push((()=>{this.en.removeEventListener(t,i)}))})),ni.addEventListener("scroll",this.po,{passive:!0}),this.No=d(new y({r:0,g:0,b:0,a:0})),this.xs=new Jr(this)}ra(t,i){const s=Array.from(this.Bo.values()).find((i=>i.entity===t.entity&&(void 0===t.collectionMember||t.collectionMember===i.collectionMember)));s&&(s.entity=i.entity,s.collectionMember=i.collectionMember)}It(t,i=void 0){const s=Array.from(this.Bo.values()).find((s=>s.entity===t&&(void 0===i||i===s.collectionMember)));s&&(t.R("pointerleave",s.lastEvent,s.collectionMember,s.info),this.Bo.delete(s.lastEvent.pointerId))}na(){this.Po=!0,this.Co=void 0,this.ko=void 0}fo(){this.Io.length=0,this.en.style.cursor="unset"}oa(){return this.aa}la(){return this.ca}setBackgroundFillStyle(t){return this.ua.Ie(t),this.Ls(),this}getBackgroundFillStyle(){return this.ua.$h()}setBackgroundStrokeStyle(t){return this.ua.Fe(t),this.Ls(),this}getBackgroundStrokeStyle(){return this.ua.da()}fa(t){return this.ko=t,this}Aa(t){return this.Co=t,this}ga(t){return this.xo.get(t)}va(){return Array.from(this.xo.keys()).reverse().reduce(((t,i)=>i!==Number.MAX_SAFE_INTEGER&&i>t?i:t),0)+1}G(){if(!this.dt){if(this.dt=!0,this.xo)for(const t of this.xo.values())t.G();this.Co=void 0,this.ko=void 0,ni.removeEventListener("scroll",this.po),this.en.removeEventListener("fullscreenchange",this.yo),this.en.removeEventListener("webkitfullscreenchange",this.yo),this.en.removeEventListener("dragstart",this.Lo),this.ea&&(this.ea.disconnect(),this.ea=void 0),this.To.forEach((t=>{t()})),this.To.length=0}}Ee(t,i){return r(t-this.wo.x,this.wo.y-i)}ya(t,i){return r(t+this.wo.x,this.wo.y-i)}pa(t){const i=this.Ee(t.clientX,t.clientY);return{engineX:i.x,engineY:i.y}}ma(t){const i=this.ya(t.engineX,t.engineY);return{clientX:i.x,clientY:i.y}}V(t,i,s){this.D.addEventListener(t,i,s)}N(t,i){this.D.removeEventListener(t,i)}}const an=(t=1)=>({type:"horizontalProgressive",packager:(i,s,e)=>{if(i.length>1){const h=Ws(s,e*t),n=Math.abs(h.x),o=i.length,a=[];let l=0,c=0,u=i[0].x+n;for(;c<o;){const t=i[c];if(a[l]=t,l+=1,c+=1,t.x<u&&c<o){const s=c;let e=t.y,h=t.y;for(;c<o&&i[c].x<=u;)i[c].y>e&&(e=i[c].y),i[c].y<h&&(h=i[c].y),c+=1;if(s!==c){const t=(a[l-1].x+i[c-1].x)/2;a[l+0]=r(t,h),a[l+1]=r(t,e),a[l+2]=i[c-1],l+=3}}u+=n}return a}return i.slice()}}),ln=(t=1)=>({type:"horizontalRegressive",packager:(i,s,e)=>{if(i.length>1){const h=Ws(s,e*t),n=Math.abs(h.x),o=i.length,a=[];let l=0,c=0,u=i[0].x-n;for(;c<o;){const t=i[c];if(a[l]=t,l+=1,c+=1,t.x>u&&c<o){const s=c;let e=t.y,h=t.y;for(;c<o&&i[c].x>=u;)i[c].y>e&&(e=i[c].y),i[c].y<h&&(h=i[c].y),c+=1;if(s!==c){const t=(a[l-1].x+i[c-1].x)/2;a[l+0]=r(t,h),a[l+1]=r(t,e),a[l+2]=i[c-1],l+=3}}u-=n}return a}return i.slice()}}),cn=(t=1)=>({type:"verticalProgressive",packager:(i,s,e)=>{if(i.length>1){const h=Ws(s,e*t),n=Math.abs(h.y),o=i.length,a=[];let l=0,c=0,u=i[0].y+n;for(;c<o;){const t=i[c];if(a[l]=t,l+=1,c+=1,t.y<u&&c<o){const s=c;let e=t.x,h=t.x;for(;c<o&&i[c].y<=u;)i[c].x>e&&(e=i[c].x),i[c].x<h&&(h=i[c].x),c+=1;if(s!==c){const t=(a[l-1].y+i[c-1].y)/2;a[l+0]=r(h,t),a[l+1]=r(e,t),a[l+2]=i[c-1],l+=3}}u+=n}return a}return i.slice()}}),un=(t=1)=>({type:"verticalRegressive",packager:(i,s,e)=>{if(i.length>1){const h=Ws(s,e*t),n=Math.abs(h.y),o=i.length,a=[];let l=0,c=0,u=i[0].y-n;for(;c<o;){const t=i[c];if(a[l]=t,l+=1,c+=1,t.y>u&&c<o){const s=c;let e=t.x,h=t.x;for(;c<o&&i[c].y>=u;)i[c].x>e&&(e=i[c].x),i[c].x<h&&(h=i[c].x),c+=1;if(s!==c){const t=(a[l-1].y+i[c-1].y)/2;a[l+0]=r(h,t),a[l+1]=r(e,t),a[l+2]=i[c-1],l+=3}}u-=n}return a}return i.slice()}});class dn extends Dt{constructor(t,i,s,e){super(t,s,e),this.cn=0,this.Ys=i,this.Ys.Sa=!0}ba(){}xa(t){return this.cn===t||(this.cn=t,this.Ys.Sa=!0),this}Ma(){return this.cn}}class fn extends dn{constructor(t,i,s,e,h){super(t,i,e,h),this.wa=!0,this.ot=s}}const An=(t,i,s)=>{if(s instanceof be){const e=s.hs(),h=Qs(i,{x:Math.abs(e.x),y:Math.abs(e.y)});return c(r(t.min.x-h.x,t.min.y-h.y),r(t.max.x+h.x,t.max.y+h.y))}return c(s.Pi(r(t.min.x,t.min.y),Ws(i,-1)),s.Pi(r(t.max.x,t.max.y),i))},gn=(t,i)=>"function"==typeof i?i(t):i,vn=(t,i)=>!t||t!==i,yn=(t,i)=>t===V&&i!==V,pn=t=>t!==V;class mn extends fn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Ce=nn.fillStyle,this.St=t}Ie(t){return this.Ce=gn(this.Ce,t),this}$h(){return this.Ce}_a(){return vn(this.Ca,this.Ce)}ka(){return yn(this.Ca,this.Ce)}Ta(){return pn(this.Ce)}Fa(t){this.Ca=t}}class Sn extends mn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ke=nn.lineStyle,this.St=t}Fe(t){return this.ke="function"==typeof t?t(this.ke):t,this}da(){return this.ke}Ia(){return!this.Pa||this.Pa!==this.ke}La(t){return!this.Pa||this.Pa.getThickness()!==t}Ta(){return this.ke!==Wt||super.Ta()}ka(){return(this.ke!==Wt||this.Ce!==V)&&this.Pa===Wt&&this.Ca===V}Ba(t){this.Pa=t}}class bn extends mn{constructor(t,i,s,e,h,r=d(5)){super(t,i,s,e,h),this.size=d(5),this.size=r}Z(t){return this.size._(t),this}}class xn extends mn{constructor(t,i,s,e,h,n=d(nn.font)){super(t,i,s,e,h),this.Da=d(""),this.Ea=!1,this.Ra={x:1,y:-1},this.za=d(r(0,0)),this.Va=d(0),this.Oa=d(0),this.Na=d(r(0,0)),this.Ga=d(0),this.$a=d(nh),this.Ua=r(0,0),this.oi=d(f(1,1,1,1)),this.nn=d(A(4,4,4,4)),this.font=d(nn.font),this.Ya=!1,this.font=n}Ta(){return pn(this.Ce)&&this.Da.C().length>0}ka(){return!1===this.Ya&&this.Ta()}Sr(t){return this.Da._(t),this}wr(){return this.Da.C()}Xh(t){return rh(t)?this.$a._(t):this.$a._(t(this.$a.C())),this}Hh(){return this.$a.C()}Ha(t){return this.$a._(this.$a.C().setFamily(t)),this}Xa(){return this.$a.C().getFamily()}Wa(t){return this.$a._(this.$a.C().setSize(t)),this}ja(){return this.$a.C().getSize()}Za(t){return this.$a._(this.$a.C().setWeight(t)),this}Qa(){return this.$a.C().getWeight()}Ja(t){return this.$a._(this.$a.C().setStyle(t)),this}Ka(){return this.$a.C().getStyle()}qa(t){return this.$a._(this.$a.C().setVariant(t)),this}tl(){return this.$a.C().getVariant()}Be(t){return this.za._(t),this}il(){return this.za.C()}Wh(t){return this.Ga._(t),this}jh(){return this.Ga.C()}mr(t){return this.sl=t,this}el(){return this.sl}hl(t,i){return this.Na._(r(t,i)),this}rl(){return this.Na.C()}nl(t){return this.Oa._(t),this}ol(){return this.Oa.C()}al(){return{x:this.Oa.C(),y:this.Va.C()}}ll(t){return this.Va._(t),this}cl(){return this.Va.C()}ul(t){return this.Oa._(t.x),this.Va._(t.y),this}$r(t){return this.oi._(t),this}dl(){return this.oi.C()}Ur(t){return this.nn._(t),this}fl(){return this.nn.C()}}class Mn extends bn{constructor(t,i,s,e,h,r=5){super(t,i,s,e,h,d(r)),this.Al=[],this.vl=d(Oe.Square),this.Ga=d(0),this.yl=d(!1),this.pl=d(!1),this.ml=d(!1),this.Sl=Ms,this.bl=0,this.xl=[],this.Ml=0,this.wl=Ms,this._l=!1,this.Cl=void 0}kl(){return this.xl}Tl(){return this.Al}Fl(t){return this.vl._(t),this}Il(){return this.vl.C()}Wh(t){return this.Ga._(t),this}jh(){return this.Ga.C()}Pl(t){return this.yl._(t),this}Ll(t){return this.pl._(t),this}Bl(t){return this.ml._(t),this}Dl(t,i){return Array.isArray(t)||(t=[t]),this.Ml+=t.length,this.xl=Ui(this.xl,t,{canReturnB:!0}),this.wl&&(this.wl=i?Os(this.wl,i):void 0),this.Cl=void 0,this}ti(){return this._l=!0,this.Al.length=0,this.bl=0,this.Sl=Ms,this.xl=[],this.Ml=0,this.Cl=void 0,this}El(){return this.bl}Rl(){return this.Ml}}class wn extends Sn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.za=d(r(0,0)),this.Y=d(r(100,100)),this.Ga=d(0),this.Ua=d(r(0,0)),this.zl=!1}hr(){return this.Vl(),this}Be(t){const i=this.za.C();return t.x===i.x&&t.y===i.y||(this.za._(t),this.Vl()),this}il(){return this.za.C()}Ol(t){const i=this.za.C();return t!==i.x&&(this.za._(r(t,i.y)),this.Vl()),this}Nl(t){const i=this.za.C();return t!==i.y&&(this.za._(r(i.x,t)),this.Vl()),this}Z(t){const i=this.Y.C();return t.x===i.x&&t.y===i.y||(this.Y._(r(t.x,t.y)),this.Vl()),this}xi(){return this.Y.C()}Gl(t){const i=this.Y.C();return t!==i.x&&(this.Y._(r(t,i.y)),this.Vl()),this}$l(t){const i=this.Y.C();return t!==i.x&&(this.Y._(r(i.x,t)),this.Vl()),this}Wh(t){return this.Ga._(t),this}jh(){return this.Ga.C()}Ul(t){const i=this.Ua.C();return t===i&&i.x===t.x&&i.y===t.y||(void 0===t?(this.zl=!1,this.Vl()):(this.zl=!0,this.Ua._(t))),this}Vl(){if(!this.zl){const t=this.za.C(),i=this.Y.C(),s=r(t.x+i.x/2,t.y+i.y/2),e=this.Ua.C();s.x===e.x&&s.y===e.y||this.Ua._(s)}}}class _n extends Sn{constructor(){super(...arguments),this.Al=[],this.za=d(r(0,0)),this.Sl=Ms,this.Yl=!1}Hl(t){return t=Vi(t),this.Al=t,this.Yl=!0,this}Xl(){return this.Al}jt(){return this.Sl.max.x}Wt(){return this.Sl.min.x}Qt(){return this.Sl.max.y}Zt(){return this.Sl.min.y}Wl(){return 0}jl(){return 0}}class Cn extends _n{}class kn extends mn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Zl=new Array,this.Ql=new Array,this.Jl=d({type:"disabled",packager:(t,i,s)=>t.slice()}),this.Sl=Ms,this.Kl=0,this.ql=!1,this.xl=[Array(),Array()],this.tc=!1,this.sc=(new $).setColor(m(42,171,240)),this._l=!1,this.hc=!1,this.rc=!1}Dl(t,i){const s=this.Kl-1,e=s>0&&!this.tc;let[h,n]=e?[[this.Zl[s]],[this.Ql[s]]]:[[],[]];if(t instanceof Array){const[i,s]=l(t);h=Ui(h,i,{canReturnB:!0}),n=Ui(n,s,{canReturnB:!0})}else{const i=t.position;h.push(r(i,t.high)),n.push(r(i,t.low))}return this.tc?(this.xl[0]=Ui(this.xl[0],h,{canReturnB:!0}),this.xl[1]=Ui(this.xl[1],n,{canReturnB:!0})):(this.xl=[h,n],this.tc=!0),this.Sl=Os(this.Sl,i||Os(zs(h),zs(n))),this}ti(){return this._l=!0,this.Zl.length=0,this.Ql.length=0,this.Kl=0,this.Sl=Ms,this}Tl(){return[this.Zl,this.Ql]}kl(){return[this.xl[0],this.xl[1]]}nc(t){return this.Jl._(t),this}oc(){return this.Jl.C()}ac(t){return this.sc="function"==typeof t?t(this.sc):t,this}lc(){return this.sc}El(){return this.Kl-(Number(this.hc)+Number(this.rc))}Rl(){return this.xl.length}cc(t){return this.hc=t,this}uc(){return this.hc}dc(t){return this.rc=t,this}fc(){return this.rc}ka(){return this.Ca===V&&this.Ac===V&&(this.Ce!==V||this.sc!==V)}gc(t){this.Ac=t}Ta(){return this.sc!==V||super.Ta()}_a(){return super._a()||!this.Ac||this.Ac!==this.sc}}class Tn extends Sn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.za=d(r(0,0)),this.vc=d(0),this.Yi=d(360),this.yc=d(100),this.mc=d(100),this.Sc=d(0),this.bc=d(void 0),this.xc=r(0,0),this.Mc=r(0,0),this.wc=r(0,0)}_c(){return this.yc.C()}Cc(){return this.mc.C()}il(){return this.za.C()}kc(){return this.vc.C()}Ui(){return this.Yi.C()}Tc(){return this.Sc.C()}Fc(){return this.bc.C()}Ic(){return this.xc}Pc(){return this.Mc}Lc(){return this.wc}Be(t){return this.za._(t),this}Bc(t){return this.vc._(t),this}$e(t){return this.Yi._(t),this}Dc(t){return this.mc._(t),this.yc._(t),this}Ec(t){return this.yc._(t),this}Rc(t){return this.mc._(t),this}zc(t){return this.Sc._(t<0?0:t),this}Vc(t){return this.bc._(void 0!==t&&t<=0?void 0:t),this}}var Fn;!function(t){t[t.Complex=0]="Complex",t[t.Simple=1]="Simple"}(Fn||(Fn={}));const In=(t,i)=>"function"==typeof i?i(t):i,Pn=(t,i)=>!t||t!==i,Ln=(t,i)=>!t||t.getThickness()!==i,Bn=(t,i)=>t===Wt&&i!==Wt,Dn=t=>t!==Wt&&t.getFillStyle()!==V;class En extends fn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Oc=nn.lineStyle,this.engine=t}Ne(t){return this.Oc=In(this.Oc,t),this}In(){return this.Oc}Ia(){return Pn(this.Nc,this.Oc)}Gc(t){return Ln(this.Nc,t)}ka(){return Bn(this.Nc,this.Oc)}Ta(){return Dn(this.Oc)}$c(t){this.Nc=t}}class Rn extends En{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Xi=r(0,0),this.Yi=r(0,0),this.Uc=!1}_({min:t,max:i}){return t.x===this.Xi.x&&t.y===this.Xi.y&&i.x===this.Yi.x&&i.y===this.Yi.y||(this.Uc=!0,this.Xi=t,this.Yi=i),this}Hi(){return this.Xi}Ui(){return this.Yi}Ue(t){return t.x===this.Xi.x&&t.y===this.Xi.y||(this.Uc=!0,this.Xi=t),this}$e(t){return t.x===this.Yi.x&&t.y===this.Yi.y||(this.Uc=!0,this.Yi=t),this}}class zn extends En{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Yc=void 0,this.Hc=0}}class Vn extends En{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Xc=[],this.Sl=Ms,this.xl=new Array,this.bl=0,this._l=!1,this.Wc=d(void 0),this.hc=!1,this.rc=!1}jc(t){return this.Wc._(t),this}Zc(){return this.Wc.C()}kl(){return this.xl}Tl(){return this.Xc}ti(){return this._l=!0,this.Xc.length=0,this.bl=0,this.xl=[],this.Sl=Ms,this}El(){return this.bl-(Number(this.hc)+Number(this.rc))}Rl(){return this.xl.length}cc(t){return this.hc=t,this}uc(){return this.hc}dc(t){return this.rc=t,this}fc(){return this.rc}}class On extends Rr{constructor(){super(...arguments),this.an=0}getHighlight(){return this.an}setHighlight(t){return this.an=t,this.rn().forEach((i=>i.Bt(t))),this.D.R("highlightchange",{highlight:t}),this.Ys.Ls(),this}}class Nn extends On{}class Gn extends Nn{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Ys=t,this.vl=this.Ys.Qc(this.renderingScale,Fn.Simple).setVisible(!1).Ie(V).Fe(Wt),this.D.Nt(this.vl)}Jc(){const t=this.Kc();if(t.length>2){const i=zs(t),s=r(i.max.x-i.min.x,i.max.y-i.min.y);this.setContentSize(s);const e=t.map((t=>{const e=js(t,Ws(i.min,-1));return this.scale.Pi(this.position,js(e,Qs(Ws(js(this.origin,r(1,1)),-.5),s)))})).map((t=>ot(t,this.scale,this.renderingScale)));this.vl.Hl(e).setVisible(this.getVisible()).setVisible(this.getVisible())}else this.vl&&this.vl.setVisible(!1),this.setContentSize(r(0,0))}Le(){return super.Le(),this.dt||(this.Jc(),void 0!==this.cn&&this.vl.xa(this.cn)),this}hr(){return this.Jc(),super.hr()}setVisible(t){return super.setVisible(t),this.vl.setVisible(t),this}}class $n{constructor(t){this.qc=0,this.tu=0,this.iu=0,this.su=!1,this.eu=!0,this.hu=!1,this.ru={warningDisplayed:!1,expandEvents:[]},this.D=new zt,this.eu=!t||void 0===t.autoSortingEnabled||t.autoSortingEnabled,void 0!==(null==t?void 0:t.dataPattern)&&(this.nu={userSpecified:null===t.dataPattern?void 0:t.dataPattern}),this.ou=void 0!==(null==t?void 0:t.lookupValues)&&t.lookupValues,this.au=void 0!==(null==t?void 0:t.colors)&&t.colors,this.lu=void 0!==(null==t?void 0:t.ids)&&t.ids,this.cu=void 0!==(null==t?void 0:t.sizes)&&t.sizes,this.uu=void 0!==(null==t?void 0:t.rotations)&&t.rotations,this.du=(null==t?void 0:t.dataStorage)?t.dataStorage:Float64Array,this.fu=!1!==(null==t?void 0:t.allowInputModification),this.Au=void 0===(null==t?void 0:t.includesNaN)||t.includesNaN}add(t){return Array.isArray(t)?this.appendJSON(t,{x:"x",y:"y"}):this.appendSample(t),this}addArraysXY(t,i){return this.appendSamples({xValues:t,yValues:i}),this}appendJSON(t,i={x:"x",y:"y"}){const s=t.length,e=i.x,h=i.y,r=i.lookupValue,n=i.size,o=i.rotation,a=i.color,l=i.id;let c,u,d,f,A,g,v;if(e){c=new this.du(s);const i=t[0]&&t[0][e]instanceof Date,h=t[0]&&Qn(t[0][e]);if(!h&&t[0]&&"string"==typeof t[0][e])throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(h)for(let i=0;i<s;i+=1){const s=t[i];c[i]=new Date(s[e]).getTime()}else if(i)for(let i=0;i<s;i+=1){const s=t[i];c[i]=s[e].getTime()}else for(let i=0;i<s;i+=1){const s=t[i];c[i]=s[e]}}if(h){u=new this.du(s);const i=t[0]&&t[0][h]instanceof Date,e=t[0]&&Qn(t[0][h]);if(!e&&t[0]&&"string"==typeof t[0][h])throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(e)for(let i=0;i<s;i+=1){const s=t[i];u[i]=new Date(s[h]).getTime()}else if(i)for(let i=0;i<s;i+=1){const s=t[i];u[i]=s[h].getTime()}else for(let i=0;i<s;i+=1){const s=t[i];u[i]=s[h]}}if(r){d=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];d[i]=s[r]}}if(a){f=[];for(let i=0;i<s;i+=1){const s=t[i];f[i]=s[a]}}if(l){A=new Uint32Array(s);for(let i=0;i<s;i+=1){const s=t[i];A[i]=s[l]}}if(n){g=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];g[i]=s[n]}}if(o){v=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];v[i]=s[o]}}return this.appendSamples({xValues:c,yValues:u,ids:A,colors:f,lookupValues:d,sizes:g,rotations:v,start:i.start,step:i.step}),this}appendSample(t){const{samplesCacheX:i,samplesCacheY:s,samplesCacheColors:e,samplesCacheIDs:h,samplesCacheLookup:r,samplesCacheSize:n,samplesCacheRotation:o,maxSampleCount:a,dataPattern:l}=this.gu({appendCount:1}),c=this.vu(),u=void 0!==t.step?t.step:l?$e(l)?1:-1:1,d=t.x&&t.x instanceof Date&&t.x,f=t.x&&Qn(t.x)&&t.x,A=t.y&&t.y instanceof Date&&t.y,g=t.y&&Qn(t.y)&&t.y;if(!f&&"string"==typeof t.x)throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(!g&&"string"==typeof t.y)throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");const v=d?d.getTime():f?Date.parse(f):"number"==typeof t.x?t.x:c?c.x+u:0,y=A?A.getTime():g?Date.parse(g):"number"==typeof t.y?t.y:c?c.y+u:0;if(l&&this.eu&&this.yu&&this.pu&&!this.mu(l,v,y)&&!this.hu)return this.Su(this.yu,this.pu,new this.du([v]),new this.du([y]),void 0!==t.lookupValue?new Float32Array([t.lookupValue]):void 0,void 0!==t.color?this.bu((t.color,[t.color])):void 0,void 0!==t.id?new Uint32Array([t.id]):void 0,void 0!==t.size?new Float32Array([t.size]):void 0,void 0!==t.rotation?new Float32Array([t.rotation]):void 0,l),this;if(i[this.qc]=v,s[this.qc]=y,void 0!==t.lookupValue&&r&&(r[this.qc]=t.lookupValue),void 0!==t.color&&e){const i=this.bu((t.color,[t.color]));void 0!==i&&(e[this.qc]=i[0])}return void 0!==t.id&&h&&(h[this.qc]=t.id),void 0!==t.size&&n&&(n[this.qc]=t.size),void 0!==t.rotation&&o&&(o[this.qc]=t.rotation),this.D.R("change",{iDataStart:this.qc,iDataEnd:this.qc}),this.qc+=1,this.qc>a-1&&(this.qc=0,this.su=!0),this.tu=Math.min(this.tu+1,a),this.iu+=1,this}appendSamples(t){const{lookupValues:i,colors:s,ids:e,sizes:h,rotations:r,start:n,step:o}=t;let a=t.offset,l=t.count;const c=t.xValues||t.yValues;if(!c)return this;const u=c.length;if(a=void 0!==a?a:0,l=void 0!==l?l:u-a,l<=0)return this;const d=void 0!==t.offsetLookupValues?t.offsetLookupValues:a,f=void 0!==t.offsetColors?t.offsetColors:a,A=void 0!==t.offsetIds?t.offsetIds:a,g=void 0!==t.offsetSizes?t.offsetSizes:a,v=void 0!==t.offsetRotations?t.offsetRotations:a,y=this.xu(!0),[p,m]=this.Mu(l,t.xValues,"x","ProgressiveX"===y||"RegressiveX"===y||void 0===y?n:void 0,"ProgressiveX"===y||"RegressiveX"===y||void 0===y?o:void 0,a,y),[S,b]=this.Mu(l,t.yValues,"y","ProgressiveY"===y||"RegressiveY"===y?n:void 0,"ProgressiveY"===y||"RegressiveY"===y?o:void 0,a,y),x=this.bu(s),{samplesCacheX:M,samplesCacheY:w,samplesCacheLookup:_,samplesCacheColors:C,samplesCacheIDs:k,samplesCacheSize:T,samplesCacheRotation:F,maxSampleCount:I,dataPattern:P,incomingDataReplacedCache:L}=this.gu({appendCount:l,...0===m&&0===b&&0===a&&0===d&&0===f&&0===A&&0===g&&0===v?{incomingDataX:p,incomingDataY:S,incomingDataLookup:i,incomingDataIDs:e,incomingDataColors:x,incomingDataSize:h,incomingDataRotation:r}:{}});if(!L&&P&&this.eu&&this.yu&&this.pu){const t=p[m],s=S[b];if(!this.mu(P,t,s)&&!this.hu)return this.Su(this.yu,this.pu,jn(p,m,m+l),jn(S,b,b+l),jn(i,d,d+l),jn(x,f,f+l),jn(e,A,A+l),jn(h,g,g+l),jn(r,v,v+l),P),this}const B=I-this.qc,D=Math.min(l,B);if(D>0&&(L||(Xn(M,p,m,D,this.qc),Xn(w,S,b,D,this.qc),i&&_&&Xn(_,i,d,D,this.qc),e&&k&&Xn(k,e,A,D,this.qc),x&&C&&Xn(C,x,f,D,this.qc),h&&T&&Xn(T,h,g,D,this.qc),r&&F&&Xn(F,r,v,D,this.qc)),this.D.R("change",{iDataStart:this.qc,iDataEnd:this.qc+D-1}),this.qc+=D,this.qc>I-1&&(this.qc=0,this.su=!0)),this.tu=Math.min(this.tu+D,I),this.iu+=D,this.xu(),l-D>0){const t={xValues:p?jn(p,m+D,void 0):void 0,yValues:S?jn(S,b+D,void 0):void 0,lookupValues:i?jn(i,d+D,void 0):void 0,ids:e?jn(e,A+D,void 0):void 0,colors:x?jn(x,f+D,void 0):void 0,sizes:h?jn(h,g+D,void 0):void 0,rotations:r?jn(r,v+D,void 0):void 0};this.appendSamples(t)}return this}setSamples(t){return this.clear().appendSamples(t)}fill(t){const i=this.yu||this.pu;if(!i)return this;const s=i.length;if(void 0!==t.x&&(this.yu=this.yu||new this.du(s),this.yu.fill(t.x)),void 0!==t.y&&(this.pu=this.pu||new this.du(s),this.pu.fill(t.y)),void 0!==t.lookupValue&&(this.wu=this.wu||new Float32Array(s),this.wu.fill(t.lookupValue)),void 0!==t.color){const i=this.bu([t.color]);i&&(this._u=this._u||new Uint32Array(s),this._u.fill(i[0]))}return void 0!==t.size&&(this.Cu=this.Cu||new Float32Array(s),this.Cu.fill(t.size)),void 0!==t.rotation&&(this.ku=this.ku||new Float32Array(s),this.ku.fill(t.rotation)),this.D.R("clear",{}),this}alterSamples(t,i){const{xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a}=i;let l=i.offset,c=i.count;const u=s||e||h||r||n||o||a,d=u?u.length:void 0!==i.x||void 0!==i.y?1:0;if(l=void 0!==l?l:0,c=void 0!==c?c:d-l,c<=0)return this;const f=void 0!==i.offsetLookupValues?i.offsetLookupValues:l,A=void 0!==i.offsetColors?i.offsetColors:l,g=void 0!==i.offsetIds?i.offsetIds:l,v=void 0!==i.offsetSizes?i.offsetSizes:l,y=void 0!==i.offsetRotations?i.offsetRotations:l,p=this.bu(r),m=this.iu-1,S=void 0!==this.Tu?Math.max(this.iu-this.Tu,0):0,b=t+c-1,x=Math.max(t,S),M=Math.min(b,m),w=M-x+1;if(this.iu>0&&w>0){const{samplesCacheX:r,samplesCacheY:c,samplesCacheColors:u,samplesCacheIDs:d,samplesCacheLookup:m,samplesCacheSize:b,samplesCacheRotation:_}=this.gu({appendCount:0}),C=r.length;if(void 0!==this.Tu&&this.su&&this.iu%this.Tu!=0){const S=this.iu-this.iu%this.Tu,w=this.iu-1,k=this.iu-this.tu,T=S-1,F=Math.max(x,k),I=Math.min(M,T)-F+1;if(I>0){const S=F-t,x=Un(F,this.iu,C,this.qc);if(void 0!==i.x)for(let t=x;t<x+I;t+=1)r[t]=i.x;if(void 0!==i.y)for(let t=x;t<x+I;t+=1)c[t]=i.y;s&&Xn(r,s,l+S,I,x),e&&Xn(c,e,l+S,I,x),h&&m&&Xn(m,h,f+S,I,x),n&&d&&Xn(d,n,g+S,I,x),p&&u&&Xn(u,p,A+S,I,x),o&&b&&Xn(b,o,v+S,I,x),a&&_&&Xn(_,a,y+S,I,x)}const P=Math.max(x,S),L=Math.min(M,w)-P+1;if(L>0){const S=P-t,x=Un(P,this.iu,C,this.qc);if(void 0!==i.x)for(let t=x;t<x+L;t+=1)r[t]=i.x;if(void 0!==i.y)for(let t=x;t<x+L;t+=1)c[t]=i.y;s&&Xn(r,s,l+S,L,x),e&&Xn(c,e,l+S,L,x),h&&m&&Xn(m,h,f+S,L,x),n&&d&&Xn(d,n,g+S,L,x),p&&u&&Xn(u,p,A+S,L,x),o&&b&&Xn(b,o,v+S,L,x),a&&_&&Xn(_,a,y+S,L,x)}}else{const t=x-S;if(void 0!==i.x)for(let s=t;s<t+w;s+=1)r[s]=i.x;if(void 0!==i.y)for(let s=t;s<t+w;s+=1)c[s]=i.y;e&&Xn(c,e,l,w,t),s&&Xn(r,s,l,w,t),e&&Xn(c,e,l,w,t),h&&m&&Xn(m,h,f,w,t),n&&d&&Xn(d,n,g,w,t),p&&u&&Xn(u,p,A,w,t),o&&b&&Xn(b,o,v,w,t),a&&_&&Xn(_,a,y,w,t)}this.D.R("clear",{})}const _=t+c-1-m;if(_>0){const i=M+1-t;this.appendSamples({xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a,offset:l+i,offsetLookupValues:f+i,offsetColors:A+i,offsetIds:g+i,offsetSizes:v+i,offsetRotations:y+i,count:_})}return this}alterSamplesByID(t,i){if(!this.lu)throw new Error("LightningChart JS attempted to use alterSamplesByID on DataSetXY that doesn't have IDs enabled.");const s=t.length,e=this.Fu;if(s<=0||!e)return this;const h=(("object"==typeof i.color?this.bu([i.color]):"number"==typeof i.color?[i.color]:[])||[])[0],r=Array.isArray(i.xValues)?new this.du(i.xValues):i.xValues,n=Array.isArray(i.yValues)?new this.du(i.yValues):i.yValues,o=Array.isArray(i.yValues)?new Float32Array(i.yValues):i.yValues,a=this.bu(i.colors),l=Array.isArray(i.sizes)?new Float32Array(i.sizes):i.sizes,c=Array.isArray(i.rotations)?new Float32Array(i.rotations):i.rotations,u=e.length,d=this.tu,f=this.iu-1,A=Math.max(f-d+1,0);for(let d=0;d<s;d+=1){const s=t[d],g=Hn(s,A,f,!0,(t=>e[Un(t,this.iu,u,this.qc)])),v=Un(g,this.iu,u,this.qc);e[v]===s&&(void 0!==i.x&&this.yu&&(this.yu[v]=i.x),void 0!==i.y&&this.pu&&(this.pu[v]=i.y),void 0!==i.lookupValue&&this.wu&&(this.wu[v]=i.lookupValue),void 0!==i.size&&this.Cu&&(this.Cu[v]=i.size),void 0!==i.rotation&&this.ku&&(this.ku[v]=i.rotation),void 0!==h&&this._u&&(this._u[v]=h),r&&this.yu&&(this.yu[v]=r[d]),n&&this.pu&&(this.pu[v]=n[d]),o&&this.wu&&(this.wu[v]=o[d]),a&&this._u&&(this._u[v]=a[d]),l&&this.Cu&&(this.Cu[v]=l[d]),c&&this.ku&&(this.ku[v]=c[d]))}return this.D.R("clear",{}),this}clear(){return this.qc=0,this.tu=0,this.iu=0,this.su=!1,this.D.R("clear",{}),this}getSampleCount(){return this.tu}getNextSampleIndex(){return this.iu}setMaxSampleCount(t){if("object"==typeof t){this.Iu&&this.removeEventListener("maxsamplecountexceed",this.Iu);const i=t.max,s=t.initial;this.Iu=t=>{if(void 0!==i&&t.currentMaxSampleCount>=i)return;let s=Math.max(2*t.currentMaxSampleCount,t.newTotalSampleCount);void 0!==i&&(s=Math.min(s,i)),this.setMaxSampleCount(s)},this.addEventListener("maxsamplecountexceed",this.Iu),void 0===this.Tu&&(void 0!==s?this.setMaxSampleCount(s):this.setMaxSampleCount(Math.min(2*this.tu,void 0!==i?i:Number.MAX_SAFE_INTEGER)))}else if("number"==typeof t){const i=t;if(void 0!==this.Tu&&this.Tu>i)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to shrink data set. This is currently not supported.");if(!this.yu||!this.pu)return this.Tu=i,this;if(i===this.Tu)return this;if(this.su&&0!==this.qc)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to expand data set that has exceeded its max sample count. This is currently not supported.");this.Tu=i,this.tu<i?(this.qc=this.tu,this.su=!1):(this.qc=0,this.su=!0);const s=new this.du(this.Tu);s.set(this.yu);const e=new this.du(this.Tu);if(e.set(this.pu),this.yu=s,this.pu=e,this.ou){const t=new Float32Array(this.Tu);this.wu&&t.set(this.wu),this.wu=t}if(this.lu){const t=new Uint32Array(this.Tu);this.Fu&&t.set(this.Fu),this.Fu=t}if(this.au){const t=new Uint32Array(this.Tu);this._u&&t.set(this._u),this._u=t}if(this.cu){const t=new Float32Array(this.Tu);this.Cu&&t.set(this.Cu),this.Cu=t}if(this.uu){const t=new Float32Array(this.Tu);this.ku&&t.set(this.ku),this.ku=t}}return this}getMaxSampleCount(){return this.Tu}readBack(t){if(!this.yu||!this.pu)return{xValues:new this.du,yValues:new this.du,iSampleFirst:0};const i=this.yu.length;let s,e=[];if(null==t?void 0:t.onlyInRange){const i=this.Pu();if(!i)throw new Error("LightningChart JS - attempted to use `DataSetXY.readBack` with `visibleOnly: true` without a data pattern.\nThis operation is only supported for patterned data (e.g. 'ProgressiveX')");const h=Math.min(t.onlyInRange.start,t.onlyInRange.end),r=Math.max(t.onlyInRange.start,t.onlyInRange.end),n=Yn(h,r,"x"===Ge(i)?this.yu:this.pu,this.iu,this.tu,this.qc,i,0);if(!n)return{xValues:new this.du,yValues:new this.du,iSampleFirst:0};e=n.dataRanges,s=n.iFirstSample}else if(void 0!==this.Tu&&this.su&&this.iu%this.Tu!=0){const t=this.qc,h=i-t,r=this.qc-1;e.push({offset:t,count:h}),e.push({offset:0,count:r+1}),s=this.iu-i}else e.push({offset:0,count:this.tu}),s=0;const h=e.reduce(((t,i)=>t+i.count),0),r=new this.du(h),n=new this.du(h),o=this.au?new Uint32Array(h):void 0,a=this.ou?new Float32Array(h):void 0,l=this.lu?new Uint32Array(h):void 0,c=this.cu?new Float32Array(h):void 0,u=this.uu?new Float32Array(h):void 0;let d=0;for(const t of e)r.set(this.yu.subarray(t.offset,t.offset+t.count),d),n.set(this.pu.subarray(t.offset,t.offset+t.count),d),this.au&&o&&this._u&&o.set(this._u.subarray(t.offset,t.offset+t.count),d),this.ou&&a&&this.wu&&a.set(this.wu.subarray(t.offset,t.offset+t.count),d),this.lu&&l&&this.Fu&&l.set(this.Fu.subarray(t.offset,t.offset+t.count),d),this.cu&&c&&this.Cu&&c.set(this.Cu.subarray(t.offset,t.offset+t.count),d),this.uu&&u&&this.ku&&u.set(this.ku.subarray(t.offset,t.offset+t.count),d),d+=t.count;return{xValues:r,yValues:n,iSampleFirst:s,lookupValues:a,colors:o,ids:l,sizes:c,rotations:u}}Mu(t,i,s,e,h,r,n){if(void 0===i){const i=this.vu();h=void 0!==h?h:n&&Ge(n)===s?$e(n)?1:-1:1,e=void 0!==e?e:i?i[s]+h:0;const r=new this.du(t);for(let i=0;i<t;i+=1)r[i]=e+i*h;return[r,0]}const o=i[0]&&i[0]instanceof Date,a=i[0]&&Qn(i[0]);if(!a&&i[0]&&"string"==typeof i[0])throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(void 0!==e||void 0!==h){const l=this.vu();h=void 0!==h?h:n&&Ge(n)===s?$e(n)?1:-1:1,e=void 0!==e?e:l?l[s]+h:0;const c=new this.du(t);if(a)for(let s=0;s<t;s+=1)c[s]=e+new Date(i[s+r]).getTime()*h;else if(o)for(let s=0;s<t;s+=1)c[s]=e+i[s+r].getTime()*h;else for(let s=0;s<t;s+=1)c[s]=e+i[s+r]*h;return[c,0]}if(a){const s=new this.du(t);for(let e=0;e<t;e+=1)s[e]=new Date(i[e]).getTime();return[s,r]}if(o){const s=new this.du(t);for(let e=0;e<t;e+=1)s[e]=i[e].getTime();return[s,r]}return[i,r]}bu(t){if(!t||0===t.length)return;const i=t[0];if(p(i)){const i=t.length,s=new Uint32Array(i);for(let e=0;e<i;e+=1){const i=t[e],h=255*i.a<<24|255*i.b<<16|255*i.g<<8|255*i.r;s[e]=h}return s}return t}Lu(){return{min:0,max:void 0!==this.Tu&&this.su?this.Tu-1:this.tu-1}}Bu(t){t=Math.min(t,this.tu),this.iu-=t,this.tu-=t,this.qc-=t,this.qc<0&&void 0!==this.Tu&&(this.qc+=this.Tu)}Su(t,i,s,e,h,r,n,o,a,l){const c=Ge(l),u=$e(l),d="x"===c?t:i,f="x"===c?s:e,A=s.length,g=f[0];if(this.mu(l,s[A-1],e[A-1])){const t=this.vu(),i=t?t[c]:0;let l=0;for(let t=0;t<A;t+=1)if(f[t]>i){l=t;break}const u={xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a,offset:l};this.hu=!0,this.appendSamples(u),this.hu=!1}else{const l=t.length,c=this.tu,f=this.iu-1,v=Math.max(f-c+1,0),y=Hn(g,v,f,u,(t=>d[Un(t,this.iu,l,this.qc)])),p=y-1,m=y+1,S=d[Un(y,this.iu,l,this.qc)],b=m<=this.iu-1?d[Un(m,this.iu,l,this.qc)]:void 0,x=void 0!==b&&(u&&b<g||!u&&b>g)?m+1:u&&S<g||!u&&S>g?y+1:p+1,M=f-x+1,w=new this.du(M),_=new this.du(M),C=this.ou?new Float32Array(M):void 0,k=this.au?new Uint32Array(M):void 0,T=this.lu?new Uint32Array(M):void 0,F=this.cu?new Float32Array(M):void 0,I=this.uu?new Float32Array(M):void 0;let P=0;for(let s=x;s<=f;s+=1){const e=Un(s,this.iu,l,this.qc);w[P]=t[e],_[P]=i[e],C&&this.wu&&(C[P]=this.wu[e]),k&&this._u&&(k[P]=this._u[e]),T&&this.Fu&&(T[P]=this.Fu[e]),F&&this.Cu&&(F[P]=this.Cu[e]),I&&this.ku&&(I[P]=this.ku[e]),P+=1}this.Bu(M);const L=new this.du(A+M);L.set(s),L.set(w,A);const B=new this.du(A+M);let D,E,R,z,V;B.set(e),B.set(_,A),h&&C&&(D=new Float32Array(A+M),D.set(h),D.set(C,A)),r&&k&&(E=new Uint32Array(A+M),E.set(r),E.set(k,A)),n&&T&&(R=new Uint32Array(A+M),R.set(n),R.set(T,A)),o&&F&&(z=new Float32Array(A+M),z.set(o),z.set(F,A)),a&&I&&(V=new Float32Array(A+M),V.set(a),V.set(I,A)),this.hu=!0,this.appendSamples({xValues:L,yValues:B,lookupValues:D,colors:E,ids:R,sizes:z,rotations:V}),this.hu=!1,this.D.R("clear",{})}}Pu(){return this.xu()}xu(t=!1){let i;if(this.nu&&"userSpecified"in this.nu)i=this.nu.userSpecified;else if(this.nu&&"autoDetectResult"in this.nu)i=this.nu.autoDetectResult;else if(this.yu&&this.pu&&this.iu>0&&!t){const t=void 0!==this.Tu&&this.su?this.qc:0,s=this.tu-1,e=void 0!==this.Tu&&this.su?0:void 0,h=void 0!==this.Tu&&this.su?this.qc-1:void 0,[r,n]=void 0!==e&&void 0!==h&&Math.abs(h-e)>Math.abs(s-t)?[e,h]:[t,s];if(1+n-r>=2){let t,s,e=this.yu[r],h=this.pu[r];for(let i=r+1;i<=n;i+=1){if(!1!==t){const s=this.yu[i],h=Math.sign(s-e);0!==h&&t&&t.direction!==h?t=!1:0===h||t||(t={direction:h}),e=s}if(!1!==s){const t=this.pu[i],e=Math.sign(t-h);0!==e&&s&&s.direction!==e?s=!1:0===e||s||(s={direction:e}),h=t}}i=t&&t.direction>0?Ne.ProgressiveX:t&&t.direction<0?Ne.RegressiveX:s&&s.direction>0?Ne.ProgressiveY:s&&s.direction<0?Ne.RegressiveY:void 0,this.nu={autoDetectResult:i},i&&ni.console.warn(`LightningChart JS DataSetXY warning | Data pattern was detected automatically (DataPatterns.${i}).\nAutomatic detection is only intended for kick-starting application development, not for production use.\nAdd { dataPattern: '${i}'} } to your application when creating series or DataSetXY to clear this warning.`)}}return i}mu(t,i,s){const e=this.vu();return!e||("ProgressiveX"===t?i>=e.x:"RegressiveX"===t?i<=e.x:"ProgressiveY"===t?s>=e.y:"RegressiveY"!==t||s<=e.y)}gu(t){if(t.incomingDataX&&t.incomingDataY&&0===this.tu&&!this.yu&&!this.pu&&(void 0===this.Tu||this.Tu===t.appendCount)&&this.fu)return this.yu=Wn(t.incomingDataX,this.du)||new this.du,this.pu=Wn(t.incomingDataY,this.du)||new this.du,this.wu=this.ou?Wn(t.incomingDataLookup,Float32Array):void 0,this.Fu=this.lu?Wn(t.incomingDataIDs,Uint32Array):void 0,this._u=this.au?Wn(t.incomingDataColors,Uint32Array):void 0,this.Cu=this.cu?Wn(t.incomingDataSize,Float32Array):void 0,this.ku=this.uu?Wn(t.incomingDataRotation,Float32Array):void 0,{dataPattern:this.xu(),samplesCacheX:this.yu,samplesCacheY:this.pu,samplesCacheLookup:this.wu,samplesCacheIDs:this.Fu,samplesCacheColors:this._u,samplesCacheSize:this.Cu,samplesCacheRotation:this.ku,maxSampleCount:t.appendCount,incomingDataReplacedCache:!0};if(void 0===this.Tu){const i=this.tu+t.appendCount;if(!this.yu||!this.pu)return this.yu=new this.du(i),this.pu=new this.du(i),this.wu=this.ou?new Float32Array(i):void 0,this.Fu=this.lu?new Uint32Array(i):void 0,this._u=this.au?new Uint32Array(i):void 0,this.Cu=this.cu?new Float32Array(i):void 0,this.ku=this.uu?new Float32Array(i):void 0,{dataPattern:this.xu(),samplesCacheX:this.yu,samplesCacheY:this.pu,samplesCacheLookup:this.wu,samplesCacheIDs:this.Fu,samplesCacheColors:this._u,samplesCacheSize:this.Cu,samplesCacheRotation:this.ku,maxSampleCount:i};const s=this.yu.length;if(s<i){if(!this.ru.warningDisplayed){const s=ni.performance.now();if(this.ru.expandEvents=this.ru.expandEvents.filter((t=>s-t.timestamp<5e3)),i>1e3&&this.ru.expandEvents.push({timestamp:s}),this.ru.expandEvents.length>5)return ni.console.warn("LightningChart JS warning - DataSetXY append operation was performed more than 5 times in 5 seconds.\nAutomatic max sample count control was enabled.\nFor streaming applications, DataSetXY.setMaxSampleCount() or Series.setMaxSampleCount() should be configured explicitly to get rid of this warning."),this.ru.warningDisplayed=!0,this.setMaxSampleCount({mode:"auto"}),this.gu(t)}const s=new this.du(i);s.set(this.yu),this.yu=s;const e=new this.du(i);if(e.set(this.pu),this.pu=e,this.ou){const t=new Float32Array(i);this.wu&&t.set(this.wu),this.wu=t}if(this.lu){const t=new Uint32Array(i);this.Fu&&t.set(this.Fu),this.Fu=t}if(this.au){const t=new Uint32Array(i);this._u&&t.set(this._u),this._u=t}if(this.cu){const t=new Float32Array(i);this.Cu&&t.set(this.Cu),this.Cu=t}if(this.uu){const t=new Float32Array(i);this.ku&&t.set(this.ku),this.ku=t}return this.qc=this.tu,{dataPattern:this.xu(),samplesCacheX:this.yu,samplesCacheY:this.pu,samplesCacheLookup:this.wu,samplesCacheIDs:this.Fu,samplesCacheColors:this._u,samplesCacheSize:this.Cu,samplesCacheRotation:this.ku,maxSampleCount:i}}if(s>4*i){const t=new this.du(i);t.set(this.yu.subarray(0,this.tu)),this.yu=t;const s=new this.du(i);if(s.set(this.pu.subarray(0,this.tu)),this.pu=s,this.ou){const t=new Float32Array(i);this.wu&&t.set(this.wu.subarray(0,this.tu)),this.wu=t}if(this.lu){const t=new Uint32Array(i);this.Fu&&t.set(this.Fu.subarray(0,this.tu)),this.Fu=t}if(this.au){const t=new Uint32Array(i);this._u&&t.set(this._u.subarray(0,this.tu)),this._u=t}if(this.cu){const t=new Float32Array(i);this.Cu&&t.set(this.Cu.subarray(0,this.tu)),this.Cu=t}if(this.uu){const t=new Float32Array(i);this.ku&&t.set(this.ku.subarray(0,this.tu)),this.ku=t}return{dataPattern:this.xu(),samplesCacheX:this.yu,samplesCacheY:this.pu,samplesCacheLookup:this.wu,samplesCacheIDs:this.Fu,samplesCacheColors:this._u,samplesCacheSize:this.Cu,samplesCacheRotation:this.ku,maxSampleCount:i}}return{dataPattern:this.xu(),samplesCacheX:this.yu,samplesCacheY:this.pu,samplesCacheLookup:this.wu,samplesCacheIDs:this.Fu,samplesCacheColors:this._u,samplesCacheSize:this.Cu,samplesCacheRotation:this.ku,maxSampleCount:s}}return t.appendCount+this.tu>this.Tu&&this.D.R("maxsamplecountexceed",{currentSampleCount:this.tu,currentMaxSampleCount:this.Tu,newTotalSampleCount:this.tu+t.appendCount}),this.yu=this.yu||new this.du(this.Tu),this.pu=this.pu||new this.du(this.Tu),this.wu=this.wu||(this.ou?new Float32Array(this.Tu):void 0),this.Fu=this.Fu||(this.lu?new Uint32Array(this.Tu):void 0),this._u=this._u||(this.au?new Uint32Array(this.Tu):void 0),this.Cu=this.Cu||(this.cu?new Float32Array(this.Tu):void 0),this.ku=this.ku||(this.uu?new Float32Array(this.Tu):void 0),{dataPattern:this.xu(),samplesCacheX:this.yu,samplesCacheY:this.pu,samplesCacheLookup:this.wu,samplesCacheIDs:this.Fu,samplesCacheColors:this._u,samplesCacheSize:this.Cu,samplesCacheRotation:this.ku,maxSampleCount:this.Tu}}Du(){if(!this.yu||!this.pu||0===this.tu)return;if(void 0===this.Tu)return this.iu>0?{x:this.yu[0],y:this.pu[0]}:void 0;if(!this.su)return{x:this.yu[0],y:this.pu[0]};let t=this.qc-this.tu;return t<0&&(t+=this.Tu),{x:this.yu[t],y:this.pu[t]}}vu(){if(!this.yu||!this.pu||0===this.tu)return;if(void 0===this.Tu){const t=this.tu-1;return t>=0?{x:this.yu[t],y:this.pu[t]}:void 0}let t=this.qc-1;return t<0&&(t+=this.Tu),{x:this.yu[t],y:this.pu[t]}}Eu(t){if(!this.yu||!this.pu)return;const i=this.yu.length,s=this.tu,e=this.iu-1,h=Math.max(e-s+1,0)+t,r=Un(h,this.iu,i,this.qc);return{x:this.yu[r],y:this.pu[r],lookupValue:this.ou&&this.wu?this.wu[r]:void 0,id:this.lu&&this.Fu?this.Fu[r]:void 0,color:this.au&&this._u?this._u[r]:void 0,size:this.cu&&this.Cu?this.Cu[r]:void 0,rotation:this.uu&&this.ku?this.ku[r]:void 0,iSample:h}}Ru(t,i,s,e){const h=this.xu(),r=this.yu,n=this.pu;if(!r||!n)return;const o=(t,i)=>({x:r[t],y:n[t],lookupValue:this.ou&&this.wu?this.wu[t]:void 0,id:this.lu&&this.Fu?this.Fu[t]:void 0,color:this.au&&this._u?this._u[t]:void 0,size:this.cu&&this.Cu?this.Cu[t]:void 0,rotation:this.uu&&this.ku?this.ku[t]:void 0,iSample:i}),a=r.length,l=this.tu,c=this.iu-1,u=Math.max(c-l+1,0);if(h){const s=$e(h),e=this.Du(),r=this.vu();if(!(e&&r&&this.yu&&this.pu))return;const n="ProgressiveX"===h||"RegressiveX"===h?"x":"y",l="x"===n?"y":"x",d="x"===n?this.yu:this.pu,f="x"===l?this.yu:this.pu,A=t[n],g=Math.min(e[n],r[n]),v=Math.max(e[n],r[n]);if(A<g||A>v)return;const y=Hn(A,u,c,s,(t=>d[Un(t,this.iu,a,this.qc)])),p=Un(y,this.iu,a,this.qc);if(!i)return o(p,y);const m=y-1,S=y+1,b=d[p],x=s?A>=b?S<=c?S:void 0:m>=u?m:void 0:A<=b?S<=c?S:void 0:m>=u?m:void 0;if(void 0===x)return;const M=Un(x,this.iu,a,this.qc),w=y<x?{pos:d[p],val:f[p],iSample:y}:{pos:d[M],val:f[M],iSample:x},_=y>x?{pos:d[p],val:f[p],iSample:y}:{pos:d[M],val:f[M],iSample:x},C=(A-w.pos)/(_.pos-w.pos),k=Ue(w.val,_.val,C);return"x"===Ge(h)?{x:A,y:k,iSample:Ue(w.iSample,_.iSample,C)}:{y:A,x:k,iSample:Ue(w.iSample,_.iSample,C)}}let d,f=Number.MAX_VALUE;const A=ot(t,s,e),g=this.tu-1;for(let t=0;t<=g;t+=1){const i=r[t],h=n[t];if(!this.Au||!Number.isNaN(i)&&!Number.isNaN(h)){const r=nt(i,s.x,e.x),n=nt(h,s.y,e.y),o=(r-A.x)**2+(n-A.y)**2;o<f&&(f=o,d=t)}}return void 0===d?void 0:o(d,d)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Un=(t,i,s,e)=>t%s,Yn=(t,i,s,e,h,r,n,o)=>{if(0===e||0===h)return;const a=$e(n),l=s.length,c=e-1,u=Math.max(c-h+1,0),d=Hn(t,u,c,a,(t=>s[Un(t,e,l)])),f=Hn(i,u,c,a,(t=>s[Un(t,e,l)])),A=Math.min(d,f),g=Math.max(d,f),v=Math.max(A-o,u),y=Math.min(g+o,c),p=Un(v,e,l),m=Un(y,e,l);return p>m?{iFirstSample:v,iLastSample:y,iFirstSampleDataArray:p,iLastSampleDataArray:m,dataRanges:[{offset:p,count:l-p},{offset:0,count:m+1}]}:{iFirstSample:v,iLastSample:y,iFirstSampleDataArray:p,iLastSampleDataArray:m,dataRanges:[{offset:p,count:m-p+1}]}},Hn=(t,i,s,e,h)=>{const r=s;for(;i!==s;){const r=Math.ceil((i+s)/2),n=h(r);e&&t<n||!e&&t>n?s=r-1:i=r}const n=Math.abs(t-h(i));return i<r&&Math.abs(t-h(i+1))<n?i+1:i},Xn=(t,i,s,e,h)=>{const r=i.length;if(Array.isArray(i))for(let r=0;r<e;r+=1)t[h+r]=i[s+r];else t.set(r===e?i:i.subarray(s,s+e),h)},Wn=(t,i)=>void 0===t?void 0:Array.isArray(t)?new i(t):t instanceof i?t:new i(t),jn=(t,i,s)=>{if(void 0!==t)return Array.isArray(t)?t.slice(i,s):t.subarray(i,s)},Zn=/^(\d{4}-\d{2}-\d{2})(?:T(\d{2}:\d{2}:\d{2}(?:\.\d+)?)(Z|[+-]\d{2}:\d{2})?)?$/,Qn=t=>"string"==typeof t&&Zn.test(t)&&!ni.isNaN(Date.parse(t));class Jn extends On{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Da="label",this.vl=this.Ys.Yr(this.renderingScale).Sr(this.Da).Ie(V).$r(us).Ur(us),this.setMargin(5),this.D.Nt(this.vl)}rn(){return[this.vl]}setFillStyle(t){return this.vl.Ie(t),this.Ys.Ls(),this}getFillStyle(){return this.vl.$h()}Le(){void 0!==this.cn&&this.vl.xa(this.cn);const t=this.getPosition(r(0,0),ti.Content),i=ot(t,this.scale,this.renderingScale);return this.vl.Be(i),this}hr(){this.vl.hr();const t=0===this.Da.length?r(0,0):this.vl.zu();return this.setContentSize(t),super.hr()}setText(t){return this.Da=t,this.vl.Sr(this.Da),this.Ys.Ls(),this}getText(){return this.Da}setFont(t){return this.vl.Xh(t),this.Ys.Ls(),this}getFont(){return this.vl.Hh()}setTextRotation(t){return this.vl.Wh(t),this.Ys.Ls(),this}getTextRotation(){return this.vl.jh()}}const Kn={...Hr,...Wr,uiElement:Jn};class qn extends Nn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.fitTo=this.un.bind(this),this.setSize=this.fitTo,this.vl=this.Ys.Vu(i).Ie(V).Fe(Wt),this.Ou=this.vl.lo(),this.D.Nt(this.vl)}rn(){return[this.vl]}setCornerRadius(t,i){var s,e,h,r;return this.Nu=t,this.Ou.Gu(t?{extent:t,c_x1_y1:null===(s=null==i?void 0:i.bottomLeft)||void 0===s||s,c_x1_y2:null===(e=null==i?void 0:i.topLeft)||void 0===e||e,c_x2_y1:null===(h=null==i?void 0:i.bottomRight)||void 0===h||h,c_x2_y2:null===(r=null==i?void 0:i.topRight)||void 0===r||r,skipTooSmallCheck:!!i}:void 0),this.Ys.Ls(),this}getCornerRadius(){return this.Nu}setFillStyle(t){return this.vl.Ie(t),this.Ys.Ls(),this}getFillStyle(){return this.vl.$h()}setStrokeStyle(t){return this.vl.Fe(t),this.Ys.Ls(),this}getStrokeStyle(){return this.vl.da()}Le(){void 0!==this.cn&&this.vl.xa(this.cn);const t=zs([this.getPosition(r(-1,-1),ti.Content),this.getPosition(r(1,1),ti.Content)].map((t=>ot(t,this.scale,this.renderingScale))));return this.Ou.$u(t.min.x,t.min.y,t.max.x,t.max.y),this}un(t){return this.setContentSize(t),this.Ys.Ls(),this}dn(){return 0}fn(){return 0}gn(){return 0}An(){return 0}}class to extends Nn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Uu=r(0,0),this.vl=t.Yu(i).Bc(0).$e(360).Ie(V).Fe(Wt),this.D.Nt(this.vl)}rn(){return[this.vl]}setFillStyle(t){return this.vl.Ie(t),this.Ys.Ls(),this}getFillStyle(){return this.vl.$h()}setStrokeStyle(t){return this.vl.Fe(t),this.Ys.Ls(),this}getStrokeStyle(){return this.vl.da()}Le(){void 0!==this.cn&&this.vl.xa(this.cn);const t=this.getSize(ti.Content).x/2;return this.vl.Ec(t*this.renderingScale.hs().x).Rc(t*this.renderingScale.hs().y).Be(ot(this.getPosition(r(0,0),ti.Content),this.scale,this.renderingScale)).Vc(255).hr(),this}un(t){const i=Math.sqrt(t.x*t.x/4+t.y*t.y/4);return this.setContentSize(r(2*i,2*i)),this.Uu=t,this.Ys.Ls(),this}dn(){return(this.getSize(ti.Content).x-this.Uu.x)/2}fn(){return(this.getSize(ti.Content).x-this.Uu.x)/2}gn(){return(this.getSize(ti.Content).y-this.Uu.y)/2}An(){return(this.getSize(ti.Content).y-this.Uu.y)/2}fitTo(t){const i=Math.min(t.x,t.y);return this.setContentSize(r(i,i)),this.Uu=t,this}}class io extends Gn{constructor(t,i,s,e,h){super(t,i,s,Fn.Simple,e,h),this.Hu=d(r(0,0)),this.Xu=!1,this.Ys=t,this.Jc()}Kc(){const t=this.Hu.C();if(this.Xu){const i=Math.min(t.x,t.y);return[r(0,0),r(i/2,i/2),r(0,i),r(-i/2,i/2)]}const i=2*Math.sqrt(this.Hu.C().x*this.Hu.C().x/4+this.Hu.C().y*this.Hu.C().y/4),s=r(Math.cos(Math.PI/4)*i,0),e=r(0,Math.sin(Math.PI/4)*i),h=r(0,0),n=js(h,js(s,e)),o=js(n,js(e,Ws(s,-1)));return[h,n,o,Zs(o,js(s,e))]}rn(){return[this.vl]}setFillStyle(t){return this.vl.Ie(t),this.Ys.Ls(),this}getFillStyle(){return this.vl.$h()}setStrokeStyle(t){return this.vl.Fe(t),this.Ys.Ls(),this}getStrokeStyle(){return this.vl.da()}un(t){return this.Hu._(t),this.Xu=!1,this.Ys.Ls(),this}dn(){return this.Xu?0:(this.getSize(ti.Content).x-this.Hu.C().x)/2}fn(){return this.Xu?0:(this.getSize(ti.Content).x-this.Hu.C().x)/2}gn(){return this.Xu?0:(this.getSize(ti.Content).y-this.Hu.C().y)/2}An(){return this.Xu?0:(this.getSize(ti.Content).y-this.Hu.C().y)/2}fitTo(t){return this.Hu._(t),this.Xu=!0,this.Ys.Ls(),this}}class so extends Gn{constructor(t,i,s,e,h){super(t,i,s,Fn.Simple,e,h),this.Wu=d(r(0,0)),this.ju=d(10),this.Zu=d(void 0),this.bn=d(ei.Right),this.Jc()}rn(){return[this.vl]}setFillStyle(t){return this.vl.Ie(t),this.Ys.Ls(),this}getFillStyle(){return this.vl.$h()}setStrokeStyle(t){return this.vl.Fe(t),this.Ys.Ls(),this}getStrokeStyle(){return this.vl.da()}setDirection(t){return this.bn._(t),this.Ys.Ls(),this}getDirection(){return this.bn.C()}setPointerLength(t){return this.ju._(t),this.Ys.Ls(),this}getPointerLength(){return this.ju.C()}setPointerAngle(t){return this.Zu._(t),this.Ys.Ls(),this}getPointerAngle(){let t=this.Zu.C();if(void 0===t){const i=this.Qu();if(0===i)return 0;t=0!==i?180*Math.atan(2*this.getPointerLength()/i)/Math.PI:0}return Math.min(Math.max(t,1),89)}un(t){return this.Wu._(t),this.Ys.Ls(),this}Ju(){const t=this.getPointerAngle();return 0===t?0:2*this.getPointerLength()/Math.tan(t*Math.PI/180)}Ku(){return Li(this.bn.C())?this.Wu.C().x:this.Wu.C().y}Qu(){return Li(this.bn.C())?this.Wu.C().y:this.Wu.C().x}dn(){switch(this.bn.C()){case ei.Right:return 0;case ei.Left:return this.getPointerLength();case ei.Up:case ei.Down:return Math.max(0,this.Ju()-this.Qu());default:return 0}}fn(){switch(this.bn.C()){case ei.Right:return this.getPointerLength();case ei.Left:return 0;case ei.Up:case ei.Down:return Math.max(0,this.Ju()-this.Qu());default:return 0}}gn(){switch(this.bn.C()){case ei.Right:case ei.Left:return Math.max(0,this.Ju()-this.Qu());case ei.Up:return this.getPointerLength();case ei.Down:default:return 0}}An(){switch(this.bn.C()){case ei.Right:case ei.Left:return Math.max(0,this.Ju()-this.Qu());case ei.Up:return 0;case ei.Down:return this.getPointerLength();default:return 0}}Kc(){const t=Pi(this.bn.C()),i=Hs(r(0,0),t),s=this.getPointerLength(),e=this.Ju(),h=this.Ku(),n=this.Qu();if(!(0!==s&&0!==e||0!==h&&0!==n))return[];const o=r(0,0),a=js(js(o,Ws(t,-s)),Ws(i,e/2)),l=js(a,Ws(i,(n-e)/2)),c=js(l,Ws(t,-h)),u=js(js(o,Ws(t,-s)),Ws(i,-e/2)),d=js(u,Ws(i,-(n-e)/2)),f=js(d,Ws(t,-h));let A;return A=0===h||0===n?[o,a,u]:0===s||0===e?[l,c,f,d]:di(n,e)?[o,a,c,f,u]:[o,a,l,c,f,d,u],A}}class eo extends On{constructor(t,i,s,e,h){super(t,i,s,e,h),this.fitTo=this.un.bind(this),this.setSize=this.fitTo,this.qu=new $n,this.vl=this.Ys.hd(i).Ne(Wt).ed(V).sd(V).td(this.qu),this.D.Nt(this.vl)}rn(){return[this.vl]}setShape(t){return this.vl.rd(t),this}getShape(){return this.vl.nd()}setRotation(t){return this.vl.od(t),this}getRotation(){return this.vl.ad()}setFillStyle(t){return this.vl.sd(t),this.Ys.Ls(),this}getFillStyle(){return this.vl.ld()}Le(){void 0!==this.cn&&this.vl.xa(this.cn);const t=ot(this.getPosition({x:0,y:0},ti.Content),this.scale,this.renderingScale),i=Math.max(this.size.x,this.size.y);if(this.qu.clear(),i>0){const s=this.vl.nd(),e=this.vl.ld(),h=wh(s)&&s,r=Ht(e)&&e;if(h){const t=i/h.xi().y;this.vl.ud(t)}else if(r){const t=r.source;if(t instanceof Image){const s=i/t.height;this.vl.ud(s)}}else this.vl.ud(i);this.qu.appendSample(t)}return this}un(t){return this.setContentSize(t),this.Ys.Ls(),this}dn(){return 0}fn(){return 0}gn(){return 0}An(){return 0}}const ho={...Hr,...Wr,uiElement:eo};class ro extends Zr{setSize(t){return this.setContentSize(t),this.Ys.Ls(),this}}class no extends zr{constructor(){super(...arguments),this.dd=[],this.fd=0,this.Ad=t=>{const i=this.dd.indexOf(t);i>=0&&this.dd.splice(i,1)}}getMembers(){return this.dd}getMemberCount(){return this.dd.length}setMinimumSize(t){return this.gd=t,this.Ys.Ls(),this}getMinimumSize(){return this.gd}addElement(t,i=-1){const s=t.kn(this.Ys,this.renderingScale,this.scale,this.Ad,this._t,!1);return s.setPointerEvents(this.getPointerEvents()),i>=0?this.dd.splice(i,0,s):this.dd.push(s),s.setVisible(this.getVisible()),this.D.$t(s),this.dt&&(Ki(0,(()=>{})),s.dispose()),s}dispose(){return super.dispose(),this.dd.slice().forEach(ci),this}Le(){super.Le();const t=this.cn;return void 0!==t&&this.dd.forEach(((i,s)=>{i.cn=t+1+.01*s})),this}setVisible(t){return super.setVisible(t),this.dd.forEach((i=>i.setVisible(t))),this}setPointerEvents(t){super.setPointerEvents(t);for(let i=0;i<this.dd.length;i+=1)this.dd[i].setPointerEvents(t);return this}getPointerEvents(){if(super.getPointerEvents())return!0;for(let t=0;t<this.dd.length;t+=1)if(this.dd[t].getPointerEvents())return!0;return!1}setHighlight(t){super.setHighlight(t);for(let s=0;s<this.dd.length;s+=1){const e=this.dd[s];"getHighlight"in(i=e)&&"setHighlight"in i&&e.setHighlight(t)}var i;return this}}class oo extends no{Le(){super.Le();const t=this.getPosition(r(-1,1),ti.Content),i=this.dd.reduce(((t,i)=>t+ +(i instanceof ro)),0),s=i>0?(this.size.x-this.fd)/i:0;return this.dd.reduce(((i,e)=>e instanceof ro?this.scale.Pi({x:i,y:t.y},{x:s+e.getSize().x,y:0}).x:e.setOrigin(r(-1,1)).setPosition(r(i,t.y)).Le().getPosition(r(1,0)).x),t.x),this}hr(){for(let t=0;t<this.dd.length;t+=1){const i=this.dd[t];i instanceof ao&&i.setMinimumSize(0),i.hr()}const t=this.dd.reduce(this.vd.bind(this),n(0,0));this.fd=t.x;const i=void 0===this.gd?t:r(Math.max(t.x,this.gd),t.y);this.setContentSize(i);for(let t=0;t<this.dd.length;t+=1){const s=this.dd[t];s instanceof ao&&s.setMinimumSize(i.y).hr()}return super.hr()}vd(t,i){const s=i.getSize();return t.x+=s.x,t.y=Math.max(t.y,s.y),t}addGap(t=0,i=-1){return this.addElement(lo,i).setSize(r(0,t))}}class ao extends no{Le(){super.Le();const t=this.getPosition(r(-1,1),ti.Content),i=this.dd.reduce(((t,i)=>t+ +(i instanceof ro)),0),s=i>0?(this.size.y-this.fd)/i:0;return this.dd.reduce(((i,e)=>e instanceof ro?this.scale.Pi({x:t.x,y:i},{x:0,y:-(s+e.getSize().y)}).y:e.setOrigin(r(-1,1)).setPosition(r(t.x,i)).Le().getPosition(r(0,-1)).y),t.y),this}hr(){for(let t=0;t<this.dd.length;t+=1){const i=this.dd[t];i instanceof oo&&i.setMinimumSize(0),i.hr()}const t=this.dd.reduce(this.vd.bind(this),n(0,0));this.fd=t.y;const i=void 0===this.gd?t:r(t.x,Math.max(t.y,this.gd));this.setContentSize(i);for(let t=0;t<this.dd.length;t+=1){const s=this.dd[t];s instanceof oo&&s.setMinimumSize(i.x).hr()}return super.hr()}vd(t,i){const s=i.getSize();return t.y+=s.y,t.x=Math.max(t.x,s.x),t}addGap(t=0,i=-1){return this.addElement(lo,i).setSize(r(0,t))}}const lo={...Hr,...Wr,uiElement:ro};class co extends oo{constructor(){super(...arguments),this.dd=[]}addColumn(){return this.addElement(Ao,void 0)}getColumn(t,i=!1){return i&&this.dd.length<=t?(this.addColumn(),this.getColumn(t,!0)):this.dd[t]}}class uo extends ao{constructor(){super(...arguments),this.dd=[]}addRow(){return this.addElement(go,void 0)}getRow(t,i=!1){return i&&this.dd.length<=t?(this.addRow(),this.getRow(t,!0)):this.dd[t]}}const fo={...Hr,...Xr,...jr},Ao={...fo,uiElement:ao,background:qn},go={...fo,uiElement:oo,background:qn},vo={setTextLabel:null,setText(t){return this.setTextLabel.setText(t),this},getText(){return this.setTextLabel.getText()}},yo=(t,i)=>{const s={},e=`stylable${t}s`;return s[e]=i,s[`set${t}FillStyle`]=function(t){return this[e].forEach((i=>i.setFillStyle(t))),this},s[`get${t}FillStyle`]=function(){return this[e][0].getFillStyle()},s[`set${t}Font`]=function(t){return this[e].forEach((i=>i.setFont(t))),this},s[`get${t}Font`]=function(){return this[e][0].getFont()},s[`set${t}Rotation`]=function(t){return this[e].forEach((i=>i.setTextRotation(t))),this},s[`get${t}Rotation`]=function(){return this[e][0].getTextRotation()},s},po=yo("Text",[]),mo={button:void 0,isLocked:!1,setOn(t){const i=this.button.getOn()!==t;return this.button.setOn(t),i&&this.D.R("switch",{state:t}),this},getOn(){return this.button.getOn()},setLocked(t){return this.isLocked=t,this},getLocked(){return this.isLocked},setButtonOffFillStyle(t){return this.button.setOffFillStyle(t),this},getButtonOffFillStyle(){return this.button.getOffFillStyle()},setButtonOnFillStyle(t){return this.button.setOnFillStyle(t),this},getButtonOnFillStyle(){return this.button.getOnFillStyle()},setButtonSize(t){return this.button.setSize(t),this},getButtonSize(){return this.button.getSize()},setButtonShape(t){return this.button.setButtonShape(t),this},getButtonShape(){return this.button.getButtonShape()}},So={textFillStyleHidden:void 0,setTextFillStyleHidden(t){return this.textFillStyleHidden="function"==typeof t?t(this.textFillStyleHidden):t,this},getTextFillStyleHidden(){return this.textFillStyleHidden}},bo={pointable:void 0,setDirection(t){return this.pointable.setDirection(t),this},getDirection(){return this.pointable.getDirection()},setPointerLength(t){return this.pointable.setPointerLength(t),this},getPointerLength(){return this.pointable.getPointerLength()}},xo={...Hr,...Xr,background:qn,kn(t,i,s,e,h,r){const n=new oo(t,i,s,this.background,e,h),o=n.addElement(Kn,void 0),a=Object.assign(n,vo,{setTextLabel:o},po,{stylableTexts:[o]});return Yr(a,h,r),this.applyStylers(a,h)}}.addStyler($r),Mo={...Hr,...Xr,background:so,direction:ei.Up,setDirection(t){return this.direction=t,this},kn(t,i,s,e,h,r){const n=this.direction,o=new oo(t,i,s,this.background,e,h),a=o.addElement(Kn,void 0),l=o.getBackground().setDirection(n),c=Object.assign(o,vo,{setTextLabel:a},po,{stylableTexts:[a]},bo,{pointable:l},{setTickLabelPadding(t){return this.getDirection()===ei.Up?(this.setPadding({top:t}),a.setMargin({top:0})):this.getDirection()===ei.Down?(this.setPadding({bottom:t}),a.setMargin({bottom:0})):this.getDirection()===ei.Right?(this.setPadding({right:t}),a.setMargin({right:0})):this.getDirection()===ei.Left&&(this.setPadding({left:t}),a.setMargin({left:0})),this},getTickLabelPadding(){return this.getDirection()===ei.Up?this.getPadding().top:this.getDirection()===ei.Down?this.getPadding().bottom:this.getDirection()===ei.Right?this.getPadding().right:this.getPadding().left}});return c.Tn="other",c.setPointerLength(h.xAxisNumericTicks.majorTickStyle.getTickLength()).setTickLabelPadding(h.xAxisNumericTicks.majorTickStyle.getTickPadding()).setTextFont(h.uiTextFont).setTextFillStyle(h.uiTextFillStyle).setBackground((t=>t.setFillStyle(h.uiBackgroundFillStyle).setStrokeStyle(h.uiBackgroundStrokeStyle))),Yr(c,h,r),this.applyStylers(c,h)}};class wo extends Rr{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.yd=!1,this.pd=V,this.md=V,this.getOn=()=>this.yd,this.md=r.uiButtonFillStyleHidden||r.uiButtonFillStyle,this.Sd=new eo(this.Ys,this.renderingScale,this.scale,ui,r).setShape(e).setFillStyle(this.md),this.D.$t(this.Sd)}rn(){return[...this.Sd.rn()]}setOn(t){return this.yd=t,this.Sd.setFillStyle(t?this.pd:this.md),this.Ys.Ls(),this}setOffFillStyle(t){return this.md="function"==typeof t?t(this.md):t,this.yd||this.Sd.setFillStyle(this.md),this}getOffFillStyle(){return this.md}setSize(t){return this.Sd.fitTo("number"==typeof t?r(t,t):t),this}getSize(){return this.Sd.getSize()}setOnFillStyle(t){return this.pd="function"==typeof t?t(this.pd):t,this.yd&&this.Sd.setFillStyle(this.pd),this}getOnFillStyle(){return this.pd}setButtonShape(t){return this.Sd.setShape(t),this.Ys.Ls(),this}getButtonShape(){return this.Sd.getShape()}Le(){return super.Le(),this.Sd.cn=this.cn,this.Sd.setVisible(this.getVisible()).setPosition(this.getPosition(r(0,0),ti.Content)).Le(),this}hr(){const t=this.Sd.hr().getSize();return this.setContentSize(t),super.hr()}dispose(){return super.dispose(),this.Sd.dispose(),this}setPointerEvents(t){return this.Sd.setPointerEvents(t),this}getPointerEvents(){return this.Sd.getPointerEvents()}setHighlight(t){const i=es(t);return this.Sd.setHighlight(i),this.D.R("highlightchange",{highlight:i}),this.Ys.Ls(),this}getHighlight(){return this.Sd.getHighlight()}}const _o={...Hr,uiElement:wo,buttonShape:Oe.Circle,setButtonShape(t){return{...this,buttonShape:t}},kn(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.buttonShape,e,h),h);return Yr(n,h,r),n}},Co={...Hr,...Xr,background:qn,buttonBuilder:_o,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},kn(t,i,s,e,h,r){const n=new oo(t,i,s,this.background,e,h),o=n.addElement(Ao);o.addGap();const a=o.addElement(this.buttonBuilder);o.addGap();const l=n.addElement(Ao);l.addGap();const c=l.addElement(Kn);l.addGap(),n.addGap();const u=Object.assign(n,vo,{setTextLabel:c},po,{stylableTexts:[c]},mo,{button:a},So);let d;return u.addEventListener("click",(()=>{u.getLocked()||u.setOn(!u.getOn())})),u.addEventListener("pointerenter",(()=>{u.setHighlight(!0)})),u.addEventListener("pointerleave",(()=>{u.setHighlight(!1)})),u.setMouseStyle(tr.Point),u.setTextFillStyleHidden(h.uiTextFillStyleHidden||h.uiTextFillStyle),u.addEventListener("switch",(t=>{t.state?d&&u.setTextFillStyle(d):(d=u.getTextFillStyle(),u.setTextFillStyle(u.getTextFillStyleHidden()))})),u.setPadding({left:5}),Yr(u,h,r),this.applyStylers(u,h)}}.addStyler($r).addStyler(Ur);class ko extends Rr{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.bd=[],this.xd=2,this.Md="",this.wd=(t,i)=>void 0!==t.label?t.label:i.percentageValues?`${(100*t.value).toFixed(0)}%`:ge(t.value,i.min,i.max),this._d=0,this.Cd=0,this.kd=!1,this.Ys=t,this.Td=r,this.Ou=t.Pe(i).Fe(Wt),this.D.Nt(this.Ou),this.Fd=t.Yr(i).Ie(h.uiTextFillStyle).Xh(h.uiTextFont).setPointerEvents(!1),this.D.Nt(this.Fd),"vertical"===r?(this.Id=140,this.Pd=25):(this.Id=160,this.Pd=15)}rn(){return[this.Ou,this.Fd]}Ld(t){this.Bd=t;const i=Io(t,"vertical"===this.Td?0:90,this.kd);return this.Ou.Ie(i),this.Ys.Ls(),this}Gs(){return this.Bd}Dd(t){return this.Id=t,this.Ys.Ls(),this}Ed(){return this.Id}Rd(t){return this.Pd=t,this.Ys.Ls(),this}zd(){return this.Pd}Vd(t){return this.Md=t,this.Ys.Ls(),this}Od(){return this.Md}Nd(t){return this.wd=t,this.Ys.Ls(),this}setLUTDisplayProportionalSteps(t){if(this.kd=t,this.Bd){const t=Io(this.Bd,"vertical"===this.Td?0:90,this.kd);this.Ou.Ie(t)}return this.Ys.Ls(),this}getLUTDisplayProportionalSteps(){return this.kd}setFillStyle(t){return this.Fd.Ie(t),this.Ys.Ls(),this}getFillStyle(){return this.Fd.$h()}setFont(t){return this.Fd.Xh(t),this.Ys.Ls(),this}getFont(){return this.Fd.Hh()}setTextRotation(t){return this.Cd=t,this.Fd.Wh(t),this.Ys.Ls(),this}getTextRotation(){return this.Fd.jh()}Le(){var t,i,s,e;if(super.Le(),this.dt||!this.getVisible())return this;const h=this.Bd;if(h){const r=this.renderingScale.hs(),n=h.min,o=h.max;if("vertical"===this.Td){const s=this.getPosition({x:-1,y:-1},ti.Content),e=js(s,{x:this.Ou.xi().x+this.xd*r.x,y:0}),a={x:e.x,y:e.y+(this.Md.length>0?this._d*r.y+this.Fd.xi().y:0)+.5*((null===(t=this.bd[0])||void 0===t?void 0:t.xi().y)||0)},l={x:a.x,y:this.getPosition({x:-1,y:1},ti.Content).y-.5*((null===(i=this.bd[this.bd.length-1])||void 0===i?void 0:i.xi().y)||0)};this.Ou.Be({x:s.x,y:a.y}),this.Fd.ul({x:-1,y:-1}).Be(e),h.getSteps().forEach(((t,i)=>{const s=Es(a,l,this.kd?!0===h.getInterpolation()?(t.value-n)/(o-n):.9*(t.value-n)/(o-n):!0===h.getInterpolation()?i/(h.getSteps().length-1):i/h.getSteps().length);this.bd[i].ul({x:-1,y:0}).Be(s)}))}else{const t=this.getPosition({x:-1,y:-1},ti.Content),i=this.getPosition({x:1,y:1},ti.Content),a=this.bd.reduce(((t,i)=>Math.max(t,i.xi().y)),0),l=js(t,{x:.5*((null===(s=this.bd[0])||void 0===s?void 0:s.xi().x)||0),y:a}),c={x:i.x,y:l.y},u={x:c.x-(.5*((null===(e=this.bd[this.bd.length-1])||void 0===e?void 0:e.xi().x)||0)+(this.Md.length>0?this._d*r.x+this.Fd.xi().x:0)),y:l.y},d={x:l.x,y:l.y+this.xd*r.y};this.Ou.Be(d),this.Fd.ul({x:1,y:1}).Be(c),h.getSteps().forEach(((t,i)=>{const s=Es(l,u,this.kd?!0===h.getInterpolation()?(t.value-n)/(o-n):.9*(t.value-n)/(o-n):!0===h.getInterpolation()?i/(h.getSteps().length-1):i/h.getSteps().length);this.bd[i].ul({x:0,y:1}).Be(s)}))}}return this}hr(){if(this.Bd&&this.getVisible()){const t=this.Bd.getSteps();for(let i=this.bd.length;i<t.length;i+=1){const t=this.Ys.Yr(this.renderingScale).setPointerEvents(!1);this.bd.push(t),this.D.Nt(t)}for(let i=0;i<t.length;i+=1)this.bd[i].Ie(this.Fd.$h()).Xh(this.Fd.Hh()).Sr(this.wd(t[i],this.Bd)).Wh(this.Cd);for(let i=t.length;i<this.bd.length;i+=1)this.bd[i].dispose();if(this.bd.length=t.length,this.Fd.Sr(this.Md),"vertical"===this.Td){const t=this.Pd,i=this.Id;this.Ou.Z({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=t+Math.max(this.bd.reduce(((t,i)=>Math.max(t,i.hr().zu().x)),0),this.Fd.hr().zu().x),e=(this.Md.length>0?this._d+this.Fd.hr().zu().y:0)+i+.5*this.bd[0].hr().zu().y+.5*this.bd[this.bd.length-1].hr().zu().y;this.setContentSize({x:s,y:e})}else{const t=this.Id,i=this.Pd;this.Ou.Z({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=Math.max(this.Md.length>0?this._d+this.Fd.hr().zu().x:0,.5*this.bd[this.bd.length-1].hr().zu().x),e=t+.5*this.bd[0].hr().zu().x+s,h=i+this.xd+this.bd.reduce(((t,i)=>Math.max(t,i.hr().zu().y)),0);this.setContentSize({x:e,y:h})}}else this.bd.forEach((t=>t.dispose())),this.bd.length=0,this.Fd.setVisible(!1),this.Ou.setVisible(!1),this.setContentSize({x:0,y:0});return super.hr()}dispose(){return super.dispose(),this.Ou.dispose(),this.bd.forEach(ci),this.Fd.dispose(),this}setPointerEvents(t){return this.Ou.setPointerEvents(t),this}getPointerEvents(){return this.Ou.getPointerEvents()}}const To={lutElement:{},setLUT(t){return this.lutElement.Ld(t),this},getLUT(){return this.lutElement.Gs()},setLUTLength(t){return this.lutElement.Dd(t),this},getLUTLength(){return this.lutElement.Ed()},setLUTThickness(t){return this.lutElement.Rd(t),this},getLUTThickness(){return this.lutElement.zd()},setLookUpUnit(t){return this.lutElement.Vd(t),this},getLookUpUnit(){return this.lutElement.Od()},setLUTStepValueFormatter(t){return this.lutElement.Nd(t),this},setLUTDisplayProportionalSteps(t){return this.lutElement.setLUTDisplayProportionalSteps(t),this},getLUTDisplayProportionalSteps(){return this.lutElement.getLUTDisplayProportionalSteps()}},Fo={...Hr,...Xr,background:qn,alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},kn(t,i,s,e,h,r){const n=new ao(t,i,s,this.background,e,h),o=n.addElement({kn:()=>new ko(t,i,s,ui,h,this.alignment)}),a=Object.assign(n,po,{stylableTexts:[o]},To,{lutElement:o});return Yr(a,h,r),this.applyStylers(a,h)}}.addStyler($r),Io=(t,i,s)=>{const e=t.getSteps(),h=t.min,r=t.max-h;if(!0===t.getInterpolation())return new it({angle:i,stops:e.map(((i,n)=>({offset:s?(i.value-h)/r:n/(e.length-1),color:i.color||t.color})))});const n=[];for(let i=0;i<e.length;i+=1){const o=e[i];n.push({offset:s?.9*(o.value-h)/r:i/e.length,color:o.color||t.color});const a=i<e.length-1?e[i+1]:void 0;n.push({offset:s?a?.9*(a.value-h)/r:1:a?(i+1)/e.length:1,color:o.color||t.color})}return new it({angle:i,stops:n})},Po={...Hr,...Xr,background:qn,buttonBuilder:_o,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},kn(t,i,s,e,h){const r=new ao(t,i,s,this.background,e,h),n=r.addElement(go),o=n.addElement(Ao);o.addGap();const a=o.addElement(this.buttonBuilder);o.addGap();const l=n.addElement(Ao);l.addGap();const c=l.addElement(Kn);l.addGap();const u=r.addElement({kn:()=>new ko(t,i,s,ui,h,this.alignment)});"vertical"===this.alignment&&u.setMargin({left:h.uiButtonSize+6});const d=Object.assign(r,vo,{setTextLabel:c},po,{stylableTexts:[c,u]},yo("LUTText",[u]),mo,{button:a},To,{lutElement:u},So);let f;return d.addEventListener("click",(()=>{d.getLocked()||d.setOn(!d.getOn())})),d.addEventListener("pointerenter",(()=>{d.setHighlight(!0)})),d.addEventListener("pointerleave",(()=>{d.setHighlight(!1)})),d.setMouseStyle(tr.Point),d.setTextFillStyleHidden(h.uiTextFillStyleHidden||h.uiTextFillStyle),d.addEventListener("switch",(t=>{t.state?f&&d.setTextFillStyle(f):(f=d.getTextFillStyle(),d.setTextFillStyle(d.getTextFillStyleHidden()))})),d.setPadding({left:5}),this.applyStylers(d,h)}}.addStyler($r).addStyler(Ur),Lo=t=>"attach"in t,Bo={alignment:null,title:null,entryStylers:null,legendBoxDisposed:null,entries:[],add(t,i){const s=!i||"object"!=typeof i||void 0===i.toggleVisibilityOnClick||i.toggleVisibilityOnClick,e=null==i?void 0:i.matchStyleExactly,h=i&&"object"==typeof i&&void 0!==i.builder?i.builder:void 0;return this.legendBoxDisposed()||(t instanceof Ua?this.addChart(t,s,h,e):Lo(t)?this.addAttachable(t,s,h,e):t&&this.addDashboard(t,s,h,e)),this},addAttachable(t,i,s,e){const h=t.Gs&&t.Gs(),r=t.$s&&t.$s(),n=void 0!==e&&e;let o=s;if(!o){let t=h?Po.setAlignment(this.alignment):Co;void 0!==r&&(t=t.setButtonShape(r)),o=t}const a=this.addElement(o);if(h&&"setLUT"in a){a.setLUT(h.lut);const t=h.lut.getUnits(),i=h.lookUpProperty,s=t.length>0?t:"x"===i?"x":"y"===i?"y":"z"===i?"z":"";a.setLookUpUnit(s)}this.entryStylers.forEach((t=>t(a)));const l={entry:a,component:t};return this.entries.push(l),a.addEventListener("dispose",(()=>{const t=this.entries.indexOf(l);t>=0&&this.entries.splice(t,1)})),t.attach(a,i,n),i||a.setLocked(!0),this},addChart(t,i,s,e){return t.Gd().forEach((t=>this.addAttachable(t,i,s,e))),this},addDashboard(t,i,s,e){return t.getCells().filter((t=>t.panel instanceof Ua)).forEach((t=>this.addChart(t.panel,i,s,e))),this},setTitle(t){return this.title.setText(t),this},getTitle(){return this.title.getText()},setTitleFillStyle(t){return this.title.setTextFillStyle(t),this},getTitleFillStyle(){return this.title.getTextFillStyle()},setTitleFont(t){return this.title.setTextFont(t),this},getTitleFont(){return this.title.getTextFont()},setTitleRotation(t){return this.title.setTextRotation(t),this},getTitleRotation(){return this.title.getTextRotation()},setEntries(t){return this.entries.slice().forEach((i=>t(i.entry,i.component))),this}},Do={alignment:"vertical",layoutBuilder:Ao,setAlignment(t){return{...this,alignment:t,layoutBuilder:"horizontal"===t?go:Ao}},getAlignment(){return this.alignment},titleBuilder:xo,styleTitle(t){return{...this,titleBuilder:this.titleBuilder.addStyler(t)}},entryStylers:[],styleEntries(t){return{...this,entryStylers:[...this.entryStylers,t]}}},Eo={...Hr,...Xr,...Do,background:qn,kn(t,i,s,e,h,r){const n=this.layoutBuilder.setBackground(this.background).kn(t,i,s,e,h,!1);let o=Object.assign(n,Bo,{alignment:this.alignment,entryStylers:this.entryStylers,legendBoxDisposed:()=>n.dt});o.entries=[];const a=o.addElement("horizontal"===this.alignment?Ao:go),l=a.addElement(this.titleBuilder).setText("Legend").setTextFillStyle(h.legendTitleFillStyle).setTextFont(h.legendTitleFont);return a.addGap(),o=Object.assign(o,{title:l}),"horizontal"===this.alignment&&l.setMargin({right:6}),Yr(o,h,r),this.applyStylers(o,h)}}.addStyler(((t,i)=>t.setPadding(5).setBackground((t=>{i.legendBorderRadius&&Ve(t)&&t.setCornerRadius(i.legendBorderRadius)}))));class Ro extends Rr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.$d=10,this.Ud=ei.Up,this.Yd=0,this.Tn="major",this.Da=t.Yr(this.renderingScale).$r(us).Ur(us),this.D.Nt(this.Da),this.Oe=t.Ge(this.renderingScale),this.D.Nt(this.Oe)}rn(){return[this.Da]}Le(){if(super.Le(),this.dt)return this;const t=ot(this.getPosition(),this.scale,this.renderingScale),i=this.renderingScale.Pi(t,{x:this.Ud===ei.Right?-this.$d:this.Ud===ei.Left?this.$d:0,y:this.Ud===ei.Up?-this.$d:this.Ud===ei.Down?this.$d:0}),s=this.renderingScale.Pi(i,{x:this.Ud===ei.Right?-this.Yd:this.Ud===ei.Left?this.Yd:0,y:this.Ud===ei.Up?-this.Yd:this.Ud===ei.Down?this.Yd:0});return this.Oe.Ue(t).$e(i),this.Da.Be(s).ul(this.Ud===ei.Up?{x:0,y:1}:this.Ud===ei.Down?{x:0,y:-1}:this.Ud===ei.Right?{x:1,y:0}:{x:-1,y:0}),this}hr(){const t=this.Oe.In().getThickness();return this.size=this.Ud===ei.Left||this.Ud===ei.Right?{x:this.$d+this.Yd+this.Da.hr().zu().x,y:t}:{y:this.$d+this.Yd+this.Da.hr().zu().y,x:t},super.hr()}dispose(){return super.dispose(),this.Da.dispose(),this.Oe.dispose(),this}setVisible(t){return super.setVisible(t),this.Da.setVisible(t),this.Oe.setVisible(t),this}setPointerEvents(t){return this.Da.setPointerEvents(t),this.Oe.setPointerEvents(t),this}getPointerEvents(){return this.Da.getPointerEvents()}getText(){return this.Da.wr()}setTextFillStyle(t){return this.Da.Ie(t),this.Ys.Ls(),this}getTextFillStyle(){return this.Da.$h()}setTextFont(t){return this.Da.Xh(t),this}setTextRotation(t){return this.Da.Wh(t),this}getTextRotation(){return this.Da.jh()}getTextFont(){return this.Da.Hh()}setText(t){return this.Da.Sr(t),this.Ys.Ls(),this}setDirection(t){return this.Ud=t,this.Ys.Ls(),this}getDirection(){return this.Ud}setPointerLength(t){return this.$d=t,this.Ys.Ls(),this}getPointerLength(){return this.$d}setTickLabelPadding(t){return this.Yd=t,this.Ys.Ls(),this}getTickLabelPadding(){return this.Yd}setTickStyle(t){return this.Oe.Ne(t),this.Ys.Ls(),this}getTickStyle(){return this.Oe.In()}}const zo={...Hr,direction:ei.Up,setDirection(t){return this.direction=t,this},kn(t,i,s,e,h,r){const n=this.direction,o=new Ro(t,i,s,e,h);return Yr(o,h,r),o.setDirection(n),this.applyStylers(o,h)}}.addStyler($r),Vo=zo.addStyler(((t,i)=>(t.Tn="major",t.setPointerLength(i.xAxisNumericTicks.majorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.majorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.majorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.majorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.majorTickStyle.labelFillStyle)))),Oo=zo.addStyler(((t,i)=>(t.Tn="minor",t.setPointerLength(i.xAxisNumericTicks.minorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.minorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.minorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.minorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.minorTickStyle.labelFillStyle)))),No=Co.addStyler((t=>t.addEventListener("switch",(i=>!0===i.state?setTimeout((()=>t.setOn(!1)),300):void 0)))),Go=Eo.setAlignment("horizontal"),$o=Eo.setAlignment("vertical"),Uo={TextBox:xo,CheckBox:Co,ButtonBox:No,PointableTextBox:Mo,AxisTickMajor:Vo,AxisTickMinor:Oo,LUTRange:Fo},Yo={HorizontalLegendBox:Go,VerticalLegendBox:$o};class Ho extends Fr{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Hd=h}}class Xo extends Tr{constructor(t,i,s,e,h,r,n,o,a,l,c,u,d,f,A,g){var v,y,p;super(l,a,n,f,A,{numeric:a.getWidth({x:f.xAxisNumericTicks,y:f.yAxisNumericTicks}),datetime:a.getWidth({x:f.xAxisDateTimeTicks,y:f.yAxisDateTimeTicks}),time:a.getWidth({x:f.xAxisTimeTicks,y:f.yAxisTimeTicks})},g),this.Xd=new Map,this.Wd=void 0,this.jd=0,this.Zd=[],this.Qd=[],this.hh=fr.fitting,this.Jd=!0,this.Kd=[],this.qd=t=>{const i=this.Qd.indexOf(t);i>=0&&this.Qd.splice(i,1)},this.tf=t=>(this.Qd.indexOf(t)<0&&this.Qd.push(t),this.qd),this.if="center",this.sf=!0,this.ef=zi(this.Kd),this.Id={relative:1},this.hf=0,this.rf=0,this.nf=(t,i)=>i.getAllocatesAxisSpace()?Math.max(t,i.update().Ln()):t,this.af=t=>{const i=this.Zd.indexOf(t);-1!==i&&this.Zd.splice(i,1)},this.cs=Ee.onHover,this.D=new zt,this.ze={},this.isX=this.Lh.getWidth({x:!0,y:!1}),this.isY=this.Lh.getHeight({x:!0,y:!1}),this.lf=t,this.cf=i,this.uf=e,this.df=h,this.chart=l,this.ff=u,this.Af=s,this.gs=r,"logarithmic"===g.type&&this.chart.St.Zo(Gr.Kn),this.Uh=jo,d(this,this.tf),n.gf=this,this.vf=c,this.yf=this.vf>50?1:-1,this.pf=(p=this.Lh.toPoint(0,-this.yf),Math.abs(p.x)>=Math.abs(p.y)?p.x>=0?ei.Right:ei.Left:p.y>=0?ei.Up:ei.Down),this.mf=o,this.Sf=this.ot instanceof pe?(new be).Qi(this.Lh.toVec2(this.ot,this.mf)):(new xe).Qi(this.Lh.toVec2(this.ot,this.mf)),this.bf=this.chart.xf,this.Mf=(new be).Qi(this.Lh.toVec2(this.Lh.getWidth(this.bf),this.mf)),this.wf=this.cf.Ge(this.Sf).setPointerEvents(!1),this._f=this.Af.Pe(this.bf).Ie(a.getWidth({x:f.xAxisOverlayStyle,y:f.yAxisOverlayStyle})).Fe(Wt).Et(f.highlightColorOffsetAxisOverlay||f.highlightColorOffset),this.Cf=this.Af.Pe(this.bf).Ie(a.getWidth({x:f.xAxisZoomingBandFillStyle,y:f.yAxisZoomingBandFillStyle})).Fe(a.getWidth({x:f.xAxisZoomingBandStrokeStyle,y:f.yAxisZoomingBandStrokeStyle})).Et(f.highlightColorOffsetAxisOverlay||f.highlightColorOffset),this.Mh=this.Af.Yr(this.Sf).setPointerEvents(!1).Wh(this.Lh.getTitleTextRotation(this.yf)).Ur(us).$r(us),this.chart.St.xs.bs(this._f,(t=>this._f.Bt(t)),{animationEnabled:this.ah}),this.D.Nt(this._f),this.wf.Ne(a.getWidth({x:f.xAxisStrokeStyle,y:f.yAxisStrokeStyle})),this.Mh.Ie(a.getWidth({x:f.xAxisTitleFillStyle,y:f.yAxisTitleFillStyle})).Xh(a.getWidth({x:f.xAxisTitleFont,y:f.yAxisTitleFont})),this.vs=r.ys(this,{}),this.Zh=this.vs.kf([this.Mh]).Ps(f.effectsText),this.Tf=null!==(v=a.getWidth({x:f.xAxisMarginAfterTicks,y:f.yAxisMarginAfterTicks}))&&void 0!==v?v:7,this.Ff=null!==(y=a.getWidth({x:f.xAxisMarginAfterTitle,y:f.yAxisMarginAfterTitle}))&&void 0!==y?y:7}setHighlight(t){return this.chart.St.xs.Rs(this._f,t),this.D.R("highlightchange",{highlight:es(t)}),this}getHighlight(){return this.chart.St.xs.Cs(this)}Nr(){return this.fh}Gr(){return void 0!==this.qh}setKeepTickLabelsInAxisBounds(t){return this.sf=t,this.chart.St.Ls(),this}getKeepTickLabelsInAxisBounds(){return this.sf}setTickStrategy(t,i){return super.Rh(t,i)}getTickStrategy(){return this.sh}addBand(t=!0){const i=t?this.df:this.uf,s=new ur(i,this.chart,this.ef,this,this.Sf,this.Lh,this._t,this.gs);return this.Kd.push(s),s}addConstantLine(t=!0){const i=t?this.df:this.uf,s=new dr(i,this.chart,this.ef,this,this.Sf,this.Lh,this._t,this.gs);return this.Kd.push(s),s}If(t){this.Kd.forEach(t)}Pf(t){return this.Kd.map(t)}getHighlighters(){return this.Kd}setThickness(t){return"number"==typeof t?(this.Lf=t,this.Bf=t):"object"==typeof t?(this.Lf=t.min,this.Bf=t.max):void 0===t&&(this.Lf=void 0,this.Bf=void 0),this.chart.St.Ls(),this}getThickness(){return{min:this.Lf,max:this.Bf}}Df(){return this.Qd}lr(t){return{}}Ar(t,i,s,e,h){const r=i.th;return{keyValue:t,tickLevel:i,labelText:s,labelPosition:this.Lh.toPoint(t,0),labelAlignment:this.Lh.toPoint(r.getLabelAlignment(),-this.yf),labelOffset:{x:0,y:0},labelRotation:i.th.labelRotation}}yr(t,i){if(!this.ft)return{Ef:0,Rf:0,zf:0,ticksInfo:i};const s=this.Mh&&this.Mh.wr().length>0&&this.getTitleFillStyle()!==V,e=this.Lh.getHeight(s?this.Mh.hr().zu():{x:0,y:0})+(s?this.Ff:0);let h=0;this.eh.forEach(((t,i)=>{const s=i.th.tickLength+i.th.tickPadding;t.forEach((t=>{if(!t.sr.getVisible()||O(t.sr.$h()))return void(h=Math.max(h,s));const i=s+this.Lh.getHeight(t.sr.hr().zu());h=Math.max(h,i)}))}));const r=this.Zd.reduce(this.nf,0);h=Math.max(h,r),h+=this.Tf;const n=fi(e+h,void 0!==this.Lf?this.Lf:0,void 0!==this.Bf?this.Bf:bs);return this.jd=n,{Ef:h,Rf:e,zf:n,ticksInfo:i}}br(t,i){return new Ho(i,t,this.cf,this.Sf,this.Sf)}_h(){return this.Sf}Qh(){if(this.Xd){for(const t of this.Xd)t[1].grid.dispose(),t[1].tick.dispose();this.Xd.clear()}super.Qh()}Rr(t,i){return"linear"===this.Dh.type||"linear-highPrecision"===this.Dh.type?Be(t,i,this.ot):De(t,i,this.ot)}Vf(t,i){return i instanceof pe?Be:De}Or(t,i,s){if("logarithmic"!==this.Dh.type){const e=this.ot.Zi(i-t);return{min:t-s*e,max:i+s*e}}const e=this.ot,h={start:e.$,end:e.U};e.W(t,i).Ti();const r={min:e.Pi(t,-s),max:e.Pi(i,s)};return e.W(h.start,h.end).Ti(),r}er(t){var i,s;const e=this.nr(),h=e.min,r=e.max,n=this.eh.size>0,o=(null===(i=this.rr)||void 0===i?void 0:i.physicalAxisSize)!==t.physicalAxisSize,a=(null===(s=this.rr)||void 0===s?void 0:s.min)!==h||this.rr.max!==r;return!(!n||o||a)}Le(t){const i=this.getVisible()&&t.Of>0,s=this.ot.getInnerStart()<this.ot.getInnerEnd()?this.ot.getInnerStart():this.ot.getInnerEnd(),e=this.ot.getInnerEnd()>this.ot.getInnerStart()?this.ot.getInnerEnd():this.ot.getInnerStart();i||this.Qh();const h=this.wf.In().getThickness()*this.yf/2,r=this.mf.getInnerInterval(),n=this.vf/100*r,o=n+t.Nf,a=r*this.yf,l=o+h;if("Empty"!==this.sh&&i){const i=this.ot.pi(),s=this.ot.mi(),e=Math.min(i,s),h=Math.max(i,s);for(const[i,s]of this.eh){let r=this.Xd.get(i);if(!r)if(i.Ye)r={grid:this.lf[0].Gf(this.Sf).setPointerEvents(!1),tick:this.lf[0].Gf(this.Sf).setPointerEvents(!1)};else if("$f"in i){const t=Array.from(this.eh.keys()).filter((t=>"$f"in t)).reverse().indexOf(i),s=this.lf[t];if(!s)throw new Error("Not enough tick layers. This is an internal LCJS error - if you see this, please contact LightningChart support.");r={grid:s.Gf(this.Sf).setPointerEvents(!1),tick:s.Gf(this.Sf).setPointerEvents(!1)}}if(!r)continue;r.grid.ti(),r.tick.ti();const c=i.th,u=n-a*c.getGridStrokeLength(),d=l+c.getTickLength()*this.yf,f=d+c.getTickPadding()*this.yf;for(const[i,n]of s){const i=t.ticksInfo.get(n);if(!i)continue;const s={start:this.Lh.toPoint(n.S,o),end:this.Lh.toPoint(n.S,u)},a={start:this.Lh.toPoint(n.S,l),end:this.Lh.toPoint(n.S,d)};let c=0;if(this.sf){const t=n.sr.zu(),s=this.ot.nt(i.keyValue)+this.Lh.getWidth(i.labelOffset)+(-.5*this.Lh.getWidth(i.labelAlignment)-.5)*this.Lh.getWidth(t),r=s+this.Lh.getWidth(t);c=r>h?h-r:s<e?e-s:0}n.sr.Be(this.Lh.toPoint(this.ot.Pi(n.S,c),f)).ul(i.labelAlignment).Wh(i.labelRotation),r.grid.lo().Uf(s.start,s.end),r.tick.lo().Uf(a.start,a.end)}r.grid.Ne(i.th.getGridStrokeStyle()),r.tick.Ne(i.th.getTickStyle()),this.Xd.set(i,r)}}const c=l,u=c+this.yf*t.zf,d={start:this.Lh.toVec2(this.ot.getInnerStart(),c),end:this.Lh.toVec2(this.ot.getInnerEnd(),u)},f=ot(d.start,this.Sf,this.bf),A=ot(d.end,this.Sf,this.bf);this.wf.Ue(this.Lh.toPoint(s,o)).$e(this.Lh.toPoint(e,o)).setVisible(i);const g=o+t.Ef*this.yf;if(this.Mh.Be(this.Lh.toPoint(this.Lh.getWidth(ot("center"===this.if?Ws(js(f,A),.5):"start"===this.if?f:A,this.bf,this.Sf)),g)).ul(this.Lh.toPoint("center"===this.if?0:"start"===this.if?-1:1,-1*this.yf)).setVisible(i),this.Wd){const i=this.vf/100*r+t.Nf,s=-this.yf*r-t.Nf,e={start:this.Lh.toVec2(this.Wd.min,l+this.yf*this.jd),end:this.Lh.toVec2(this.Wd.max,i+s)},h=ot(e.start,this.Sf,this.bf),n=ot(e.end,this.Sf,this.bf);this.Cf.Be(h).Z(Zs(n,h)).setVisible(!0)}else this.Cf.setVisible(!1);this._f.Be(f).Z(Zs(A,f)).setVisible(i);for(const s of this.Zd)s.update().plot(i,o,a,t.Nf,l);for(const t of this.Kd)t.Le();return{width:Math.abs(A.x-f.x),height:Math.abs(A.y-f.y),left:Math.min(f.x,A.x),right:this.bf.x.getInnerEnd()-Math.max(f.x,A.x),bottom:Math.min(f.y,A.y),top:this.bf.y.getInnerEnd()-Math.max(f.y,A.y)}}setLength(t){return this.Id=t,this.chart.St.Ls(),this}getLength(){return this.Id}setMargins(t,i){return this.hf=t,this.rf=i,this.chart.St.Ls(),this}getMargins(){return{start:this.hf,end:this.rf}}getStackIndex(){var t,i;return null!==(i=null===(t=[...this.chart.Yf,...this.chart.Hf,...this.chart.Xf,...this.chart.Wf].find((t=>t.axis===this)))||void 0===t?void 0:t.iStack)&&void 0!==i?i:0}getParallelIndex(){var t,i;return null!==(i=null===(t=[...this.chart.Yf,...this.chart.Hf,...this.chart.Xf,...this.chart.Wf].find((t=>t.axis===this)))||void 0===t?void 0:t.iParallel)&&void 0!==i?i:0}jf(){return this.jd}Zf(t,i){i=i||Uo.AxisTickMajor;const s=new Nr(this,t?this.lf[0]:this.Af,this.Af,this.ot,this.Mf,this.Mf,this.Lh,this.pf,this.af,this._t,i).setTextFormatter(this.formatValue);return this.Zd.push(s),this.rr=void 0,s}Qf(t,i){const s=-this.Lh.getWidth(i);this.pan(s)}pan(t,i){const s=this.zh,e=this.Vh,h=this.ot.Pi(s,t),r=this.ot.Pi(e,t);if(this.tr(h,r,{allowIntervalLengthChange:!1,skipIntervalRestriction:!1}),!1!==(null==i?void 0:i.releaseScrollingAxisIfLiveReached)&&this.hh===fr.progressive&&this.uh){const t=this.Yh();t&&(this.Vh>this.zh&&this.Vh>=t.max||this.Vh<this.zh&&this.zh>=t.max)&&this.setStopped(!1)}if(!1!==(null==i?void 0:i.releaseScrollingAxisIfLiveReached)&&this.hh===fr.regressive&&this.uh){const t=this.Yh();t&&(this.Vh<this.zh&&this.Vh<=t.min||this.Vh>this.zh&&this.zh<=t.min)&&this.setStopped(!1)}}zoom(t,i){const s=this.ot.nt(this.zh),e=this.ot.nt(this.Vh),h=this.ot.nt(t),r=fi((h-s)/(e-s),0,1),n=.2*this.ot.Si(),o=r*n*-i,a=(1-r)*n*i,l=this.ot.Pi(this.zh,o),c=this.ot.Pi(this.Vh,a),u=this.Vr();let d=l,f=c;if(void 0!==(null==u?void 0:u.intervalMax)&&Math.abs(f-d)>u.intervalMax){const t=u.intervalMax-Math.abs(f-d);d-=t*r,f+=t*(1-r)}if(void 0!==(null==u?void 0:u.intervalMin)&&Math.abs(f-d)<u.intervalMin){const t=u.intervalMin-Math.abs(f-d);d-=t*r,f+=t*(1-r)}this.tr(d,f,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1})}addCustomTick(t){return this.Zf(!0,t)}setTitlePosition(t){return this.if=t,this.chart.St.Ls(),this}getTitlePosition(){return this.if}getUiPosition(){return this.vf}setStrokeStyle(t){return this.wf.Ne(t),this.cf.Ls(),this}getStrokeStyle(){return this.wf.In()}getOverlayStyle(){return this._f.$h()}setOverlayStyle(t){return this._f.Ie(t),this.cf.Ls(),this}setAnimationHighlight(t){return this.chart.St.xs.zs(this._f,t),this}getAnimationHighlight(){return this.chart.St.xs.Vs(this._f)}getMarginAfterTicks(){return this.Tf}setMarginAfterTicks(t){return this.Tf=t,this.cf.Ls(),this}getMarginAfterTitle(){return this.Ff}setMarginAfterTitle(t){return this.Ff=t,this.cf.Ls(),this}H(){return this.ot.H(),this}X(){return this.ot.X(),this}dispose(){this.wf.dispose(),this._f.dispose(),this.Cf.dispose(),this.Mh.dispose(),this.ir(ci);for(const t of this.Xd.values())t.grid.dispose(),t.tick.dispose();return this.Qd.slice().forEach(ci),this.Kd.slice().forEach(ci),this.ff(this),this.D.R("dispose",{}),this}setVisible(t){this.wf.setVisible(t),this.Mh.setVisible(t),this._f.setVisible(t),this.ir((i=>{i.Ts(t)}));for(const i of this.Xd.values())i.grid.setVisible(t),i.tick.setVisible(t);return super.setVisible(t),this.chart.St.Ls(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationHighlight(this.ah),this}setHighlightOnHover(t){return this.cs=t?Ee.onHover:Ee.noHighlighting,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.cs!==Ee.noHighlighting}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}set draggable(t){this.D.draggable=t}get draggable(){return this.D.draggable}setUserInteractions(t){return this.ze=void 0===t?{pan:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,chartInteractions:{pan:!1,paginate:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,restorePrevious:!1}}:t,this}getUserInteractions(){return this.ze}}var Wo;!function(t){t.Start="start",t.Center="center",t.End="end"}(Wo||(Wo={}));const jo=t=>t.curEnd>t.curStart?{startMin:t.dataMin,endMax:t.dataMax}:{endMin:t.dataMin,startMax:t.dataMax},Zo={getWidth:t=>t.x,getHeight:t=>t.y,toVec2:(t,i)=>({x:t,y:i}),toPoint:(t,i)=>r(t,i)},Qo={getWidth:t=>t.y,getHeight:t=>t.x,toVec2:(t,i)=>({x:i,y:t}),toPoint:(t,i)=>r(i,t)},Jo=t=>!!(t&&"object"==typeof t&&"x"in t&&t.x instanceof Xo&&"y"in t&&t.y instanceof Xo),Ko=i({type:"tick-style",gridStrokeLength:1,gridStrokeStyle:new vh,tickLength:7,tickStyle:new vh,tickPadding:0,labelFont:new hh,labelFillStyle:new $,labelAlignment:0,labelRotation:0,labelShadow:void 0});class qo extends Ko{constructor(t){super(t)}setGridStrokeLength(t){return this.set("gridStrokeLength",t)}getGridStrokeLength(){return this.get("gridStrokeLength")}setGridStrokeStyle(t){return this.set("gridStrokeStyle","function"==typeof t?t(this.get("gridStrokeStyle")):t)}getGridStrokeStyle(){return this.get("gridStrokeStyle")}setTickLength(t){return this.set("tickLength",t)}getTickLength(){return this.get("tickLength")}setTickStyle(t){return this.set("tickStyle","function"==typeof t?t(this.get("tickStyle")):t)}getTickStyle(){return this.get("tickStyle")}setTickPadding(t){return this.set("tickPadding",t)}getTickPadding(){return this.get("tickPadding")}setLabelFillStyle(t){return this.set("labelFillStyle","function"==typeof t?t(this.get("labelFillStyle")):t)}getLabelFillStyle(){return this.get("labelFillStyle")}setLabelShadow(t){return this.set("labelShadow",t)}getLabelShadow(){return this.get("labelShadow")}setLabelFont(t){return this.set("labelFont","function"==typeof t?t(this.get("labelFont")):t)}getLabelFont(){return this.get("labelFont")}setLabelAlignment(t){return this.set("labelAlignment",t)}getLabelAlignment(){return this.get("labelAlignment")}setLabelRotation(t){return this.set("labelRotation",t)}getLabelRotation(){return this.get("labelRotation")}}const ta=t=>!(!t||"object"!=typeof t||!("type"in t)||"tick-style"!==t.type),ia=new qo({labelFillStyle:V,gridStrokeStyle:Wt,tickStyle:Wt}),sa=t=>ta(t)&&O(t.labelFillStyle)&&jt(t.gridStrokeStyle)&&jt(t.tickStyle),ea=1e6,ha=i({type:"time-ticks",cursorFormatter:void 0,timeOrigin:void 0,majorTickStyle:new qo,minorTickStyle:new qo,majorFormattingFunction:void 0,minorFormattingFunction:void 0}),ra=36e5,na=6e4,oa=1e3,aa=1e-6,la=(t,i)=>{const s=i-t;return s>=864e5?"MajorHours12":s>=ra?"MajorHours":s>=6e5?"MajorMinutes15":s>=9e4?"MajorMinutes":s>=10500?"MajorSeconds15":s>=oa?"MajorSeconds":s>=100?"MajorMilliseconds100":s>=10?"MajorMilliseconds10":s>=1?"MajorMilliseconds":s>=.1?"MajorMicroseconds100":s>=.01?"MajorMicroseconds10":s>=.001?"MajorMicroseconds":s<=.001?"MajorNanoseconds100":"Unknown"},ca={hhmmss:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/ra);i%=ra;const h=Math.floor(i/na);i%=na;const r=Math.floor(i/oa);return`${s}${Qi(e,2)}:${Qi(h,2)}:${Qi(r,2)}`},hhmmssmmm:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/ra);i%=ra;const h=Math.floor(i/na);i%=na;const r=Math.floor(i/oa);i%=oa;const n=Math.floor(i/1);return`${s}${Qi(e,2)}:${Qi(h,2)}:${Qi(r,2)}.${Qi(n,3)}`},hhmmssmmmuuu:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/ra),h=Math.floor(i/na)%60,r=Math.floor(i/oa)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}).split(".")[1];return`${s}${Qi(e,2)}:${Qi(h,2)}:${Qi(r,2)}.${Qi(n,3)}${o}`},hhmmssmmmuuunnn:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/ra),h=Math.floor(i/na)%60,r=Math.floor(i/oa)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:6,maximumFractionDigits:6}).split(".")[1];return`${s}${Qi(e,2)}:${Qi(h,2)}:${Qi(r,2)}.${Qi(n,3)}${o}`}},ua={MajorHours12:{major:{format:ca.hhmmss,getKeyValues:(t,i,s,e)=>{const h=432e5;return t=Math.floor(t/(4*h))*h*4,Sr(t,i,h,void 0,ea)},fitKeyValues:xr({ignore:"first"},2,4)},minor:{format:ca.hhmmss,getKeyValues:(t,i,s,e)=>mr(t,i,36e5,ea),fitKeyValues:xr({},2,3,4,6)},defaultValueFormatter:ca.hhmmss},MajorHours:{major:{format:ca.hhmmss,getKeyValues:(t,i,s,e)=>{const h=ra;return t=Math.floor(t/(12*h))*h*12,Sr(t,i,h,void 0,ea)},fitKeyValues:xr({ignore:"first"},2,6,12)},minor:{format:ca.hhmmss,getKeyValues:(t,i,s,e)=>mr(t,i,3e5,ea),fitKeyValues:xr({},2,4,6)},defaultValueFormatter:ca.hhmmss},MajorMinutes15:{major:{format:ca.hhmmss,getKeyValues:(t,i,s,e)=>(t=Math.floor(t/ra)*ra,Sr(t,i,9e5,void 0,ea)),fitKeyValues:xr({ignore:"first"},2)},minor:{format:ca.hhmmss,getKeyValues:(t,i,s,e)=>mr(t,i,6e4,ea),fitKeyValues:xr({},3,5)},defaultValueFormatter:ca.hhmmss},MajorMinutes:{major:{format:ca.hhmmss,getKeyValues:(t,i,s,e)=>{const h=na;return t=Math.floor(t/6e5)*h*10,Sr(t,i,h,void 0,ea)},fitKeyValues:xr({ignore:"first"},2,5)},minor:{format:ca.hhmmss,getKeyValues:(t,i,s,e)=>mr(t,i,5e3,ea),fitKeyValues:xr({},2,3,4,6)},defaultValueFormatter:ca.hhmmss},MajorSeconds15:{major:{format:ca.hhmmss,getKeyValues:(t,i,s,e)=>{const h=15e3;return t=Math.floor(t/6e4)*h*4,Sr(t,i,h,void 0,ea)},fitKeyValues:xr({ignore:"first"},2,4)},minor:{format:ca.hhmmss,getKeyValues:(t,i,s,e)=>mr(t,i,1e3,ea),fitKeyValues:xr({},3,5)},defaultValueFormatter:ca.hhmmss},MajorSeconds:{major:{format:ca.hhmmss,getKeyValues:(t,i,s,e)=>{const h=oa;return t=Math.floor(t/1e4)*h*10,Sr(t,i,h,void 0,ea)},fitKeyValues:xr({ignore:"first"},2,5)},minor:{format:ca.hhmmssmmm,getKeyValues:(t,i,s,e)=>mr(t,i,100,ea),fitKeyValues:xr({},2,3,5)},defaultValueFormatter:ca.hhmmssmmm},MajorMilliseconds100:{major:{format:ca.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=100*Math.floor(t/1e3)*10,Sr(t,i,100,void 0,ea)),fitKeyValues:xr({ignore:"first"},2,5)},minor:{format:ca.hhmmssmmm,getKeyValues:(t,i,s,e)=>mr(t,i,10,ea),fitKeyValues:xr({},2,3,5)},defaultValueFormatter:ca.hhmmssmmm},MajorMilliseconds10:{major:{format:ca.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=10*Math.floor(t/100)*10,Sr(t,i,10,void 0,ea)),fitKeyValues:xr({ignore:"first"},2,5)},minor:{format:ca.hhmmssmmm,getKeyValues:(t,i,s,e)=>mr(t,i,1,ea),fitKeyValues:xr({},2,3,5)},defaultValueFormatter:ca.hhmmssmmm},MajorMilliseconds:{major:{format:ca.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=1*Math.floor(t/10)*10,Sr(t,i,1,void 0,ea)),fitKeyValues:xr({ignore:"first"},2,5)},minor:{format:ca.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>mr(t,i,.1,ea),fitKeyValues:xr({},2)},defaultValueFormatter:ca.hhmmssmmmuuu},MajorMicroseconds100:{major:{format:ca.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=.1*Math.floor(t/1)*10,Sr(t,i,.1,void 0,ea)),fitKeyValues:xr({ignore:"first"},2,5)},minor:{format:ca.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>mr(t,i,.01,ea),fitKeyValues:xr({},2,3,5)},defaultValueFormatter:ca.hhmmssmmmuuu},MajorMicroseconds10:{major:{format:ca.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>{const h=.01;return t=Math.floor(t/.1)*h*10,Sr(t,i,h,void 0,ea)},fitKeyValues:xr({ignore:"first"},2,5)},minor:{format:ca.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>mr(t,i,.001,ea),fitKeyValues:xr({},2,3,5)},defaultValueFormatter:ca.hhmmssmmmuuu},MajorMicroseconds:{major:{format:ca.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=.001;return t=Math.floor(t/.01)*h*10,Sr(t,i,h,void 0,ea)},fitKeyValues:xr({ignore:"first"},2,5)},minor:{format:ca.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>mr(t,i,100*aa,ea),fitKeyValues:xr({},2,3,5)},defaultValueFormatter:ca.hhmmssmmmuuunnn},MajorNanoseconds100:{major:{format:ca.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=100*aa;return t=Math.floor(t/.001)*h*10,Sr(t,i,h,void 0,ea)},fitKeyValues:xr({ignore:"first"},2,5)},minor:{format:ca.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>mr(t,i,10*aa,ea),fitKeyValues:xr({},2,3,5)},defaultValueFormatter:ca.hhmmssmmmuuunnn},Unknown:{major:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},minor:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},defaultValueFormatter:(t,i,s)=>""}};class da extends ha{We(t){const i=this.timeOrigin||0,s=[{sr:"Major ticks",$f:0,th:this.majorTickStyle,He:this.majorFormattingFunction?this.majorFormattingFunction:(t,s,e)=>{const h=la(Math.min(s.start,s.end),Math.max(s.start,s.end));return(0,ua[h].major.format)(t+i,s,e)},jr:(t,i,s,e,h)=>{const r=la(s,e);return(0,ua[r].major.getKeyValues)(t,i,s,e,h)},Th:{_r:(t,i,s,e,h,r)=>{const n=la(h,r),o=ua[n].major.fitKeyValues;if(o)return o(t,i,s,e,h,r)},kr:"hide-label"},Zr:void 0}];return ta(this.minorTickStyle)&&s.push({sr:"Minor ticks",$f:1,th:this.minorTickStyle,He:this.minorFormattingFunction?this.minorFormattingFunction:(t,s,e)=>{const h=la(Math.min(s.start,s.end),Math.max(s.start,s.end));return(0,ua[h].minor.format)(t+i,s,e)},jr:(t,i,s,e,h)=>{const r=la(s,e);return(0,ua[r].minor.getKeyValues)(t,i,s,e,h)},Th:{_r:(t,i,s,e,h,r)=>{const n=la(h,r),o=ua[n].minor.fitKeyValues;if(o)return o(t,i,s,e,h,r)},kr:"hide-tick"},Zr:void 0}),{je:[],Ze:s,Qe:this.cursorFormatter||((t,s,e)=>{const h=la(Math.min(s.start,s.end),Math.max(s.start,s.end));return ua[h].defaultValueFormatter(t+i,s,e)}),Je:1e-4,Ke:864e6}}setTickStyle(t){return this.setMajorTickStyle(t).setMinorTickStyle(t)}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTimeOrigin(t){return this.set("timeOrigin",t)}getTimeOrigin(){return this.get("timeOrigin")}setFormattingFunction(t){return this.withMutations((i=>i.set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const fa=(t,i,s,e,h)=>(r,n)=>o=>{const a=new Date(o+r),l={year:n?a.getUTCFullYear():a.getFullYear(),monthIndex:n?a.getUTCMonth():a.getMonth(),day:n?a.getUTCDate():a.getDate(),hours:n?a.getUTCHours():a.getHours(),minutes:n?a.getUTCMinutes():a.getMinutes(),seconds:n?a.getUTCSeconds():a.getSeconds(),millis:n?a.getUTCMilliseconds():a.getMilliseconds()},c=e?e(l):void 0;if(0===t&&!0===c)return o;const u=l[i];h.includes("year")&&(l.year=Math.floor(l.year/s)*s),h.includes("monthIndex")&&(l.monthIndex=0),h.includes("day")&&(l.day=1),h.includes("hours")&&(l.hours=0),h.includes("minutes")&&(l.minutes=0),h.includes("seconds")&&(l.seconds=0),h.includes("millis")&&(l.millis=0);let d=(0===t?1:t)*s;return-1===t&&!1===c&&(d=0),0!==d&&(l[i]=s*(d>0?Math.floor((u+d)/s):Math.ceil((u+d)/s))),n?Date.UTC(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis)-r:new Date(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis).getTime()-r},Aa=(t,i,s,...e)=>fa(-1,t,i,s,e),ga=(t,i,s,...e)=>fa(-1,t,i,s,e),va=(t,i,s,...e)=>fa(0,t,i,s,e),ya=(t,i,...s)=>fa(1,t,i,void 0,s),pa=t=>(i,s)=>e=>{const h=new Date(e+i),r=s?h.getUTCDay():h.getDay(),n=1===r&&0===(s?h.getUTCHours():h.getHours())&&0===(s?h.getUTCMinutes():h.getMinutes())&&0===h.getSeconds()&&0===h.getMilliseconds();if(0===t&&!0===n)return e;let o=s?h.getUTCDate():h.getDate();return-1===t&&1===r&&!1===n||(-1===t?o-=r>=2?r-1:r+6:o+=r>0?8-r:1),s?Date.UTC(h.getUTCFullYear(),h.getUTCMonth(),o,0,0,0,0)-i:new Date(h.getFullYear(),h.getMonth(),o,0,0,0,0).getTime()-i},ma=[{label:"MilliSecond1",unit:1,irregular:!1,greatTicks:void 0,majorTicks:{fitFunction:xr({offset:0},2,5)},minorTicks:{amount:4,fitFunction:xr(void 0,2)}},{label:"MilliSecond10",unit:10,irregular:!1,greatTicks:{getReferenceKeyValue:Aa("millis",10,(t=>t.millis%10==0),"millis")},majorTicks:{fitFunction:xr({offset:0},2,5)},minorTicks:{amount:4,fitFunction:xr(void 0,2)}},{label:"MilliSecond100",unit:100,irregular:!1,greatTicks:{getReferenceKeyValue:Aa("millis",100,(t=>t.millis%100==0),"millis")},majorTicks:{fitFunction:xr({offset:0},2,5)},minorTicks:{amount:4,fitFunction:xr(void 0,2)}},{label:"Second",unit:1e3,irregular:!1,greatTicks:{getReferenceKeyValue:Aa("seconds",1,(t=>0===t.millis),"millis")},majorTicks:{fitFunction:Mr(3,5,10,15,30)},minorTicks:{amount:4,fitFunction:xr(void 0,2)}},{label:"Minute",unit:6e4,irregular:!1,greatTicks:{getReferenceKeyValue:Aa("minutes",1,(t=>0===t.seconds&&0===t.millis),"seconds","millis")},majorTicks:{fitFunction:Mr(3,5,10,15,30)},minorTicks:{amount:12,fitFunction:xr(void 0,3,6)}},{label:"Hour",unit:36e5,irregular:!1,greatTicks:{getReferenceKeyValue:Aa("hours",1,(t=>0===t.minutes&&0===t.seconds&&0===t.millis),"minutes","seconds","millis")},majorTicks:{fitFunction:Mr(3,6,12)},minorTicks:{amount:8,fitFunction:xr(void 0,2,4)}},{label:"Day",unit:864e5,irregular:!1,greatTicks:{getReferenceKeyValue:Aa("day",1,(t=>0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"hours","minutes","seconds","millis")},majorTicks:{fitFunction:xr({ignore:"last"},2,4)},minorTicks:{amount:7,fitFunction:xr({ignore:"last"},2,3)}},{label:"Week",unit:6048e5,irregular:!0,getPrevKeyValue:pa(-1),getNextKeyValueIncludingRef:pa(0),getNextKeyValue:pa(1),greatTicks:!0,majorTicks:{fitFunction:xr(void 0,2)},minorTicks:{fitFunction:void 0}},{label:"Month",unit:2592e6,irregular:!0,getPrevKeyValue:ga("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:va("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValue:ya("monthIndex",1,"day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:xr(void 0,2,3,6)},minorTicks:{fitFunction:xr(void 0,2,4,6)}},{label:"Year",unit:31536e6,irregular:!0,getPrevKeyValue:ga("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:va("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:ya("year",1,"monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:xr({ignore:"first"},2,5)},minorTicks:{fitFunction:xr(void 0,2,5)}},{label:"Decade",unit:31536e7,irregular:!0,getPrevKeyValue:ga("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:va("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:ya("year",10,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:xr(void 0,2,4)},minorTicks:{fitFunction:xr(void 0,2,5)}},{label:"Century",unit:316224e7,irregular:!0,getPrevKeyValue:ga("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:va("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:ya("year",100,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0},{label:"Millennium",unit:316224e8,irregular:!0,getPrevKeyValue:ga("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:va("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:ya("year",1e3,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0}],Sa=(t,i,s,e,h)=>{const r=i-t;let n;for(let t=h?0:ma.length-1;h?t<ma.length:t>=0;h?t+=1:t-=1){const i=r/ma[t].unit;if((void 0===s||i>=s)&&(void 0===e||i<=e)){n=ma[t];break}}return n},ba=(t,i,s)=>{let e=Sa(i,s,void 0,2,!0);if(void 0!==e&&0===ma.indexOf(e)&&(e=ma[1]),void 0===e)return;if("great"===t)return e;const h="major"===t?1:2,r=ma[ma.indexOf(e)-h];return void 0===r?ma[0]:r},xa=(t,i,s)=>(e,h,r,n)=>{const o=ba("great",e,h);if(void 0===o)return[];if("Decade"===o.label||"Century"===o.label||"Millennium"===o.label)return[];const a=n>r?e:h,l=(e+h)/2,c=n>r?h:e;if(ma.indexOf(o)<=ma.findIndex((t=>"Hour"===t.label)))return"left"===s?[a]:[];let u;if(!0===o.irregular)u=br(e,h,o.getPrevKeyValue(t,i),o.getNextKeyValue(t,i));else{const s=o.greatTicks.getReferenceKeyValue(t,i)(e);u=Sr(e,h,o.unit,s,1)}const d=((t,i,s)=>{for(const e of s)if(e>=t&&e<=i)return e})(e,h,u);return"left"===s?void 0===d||Ls(d,l,c)?[a]:[d]:void 0!==d&&Ls(d,l,c)?[d]:[c]},Ma=(t,i,s)=>(e,h,r,n)=>{const o=ba(t,r,n);let a;if(void 0===o)return[];if("great"===t&&void 0!==o.greatTicks)if(!0===o.irregular)a=br(e,h,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s));else{const t=o.greatTicks.getReferenceKeyValue(i,s)(e);a=Sr(e,h,o.unit,t,1)}else if("major"===t&&void 0!==o.majorTicks)a=!0===o.irregular?((t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h})(e,h,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s)):((t,i,s)=>{const e=[];let h=t,r=0;for(;h<i;)if(e.push(h),h+=s,r+=1,r>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return e.push(h),e})(e,h,o.unit);else{if("minor"!==t||void 0===o.minorTicks)return[];if(!0===o.irregular)a=((t,i,s,e)=>{const h=[];let r=e(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h})(e,h,o.getNextKeyValueIncludingRef(i,s),o.getNextKeyValue(i,s));else{const t=(t=>{if(void 0!==t)return ma[ma.indexOf(t)+1]})(o);if(void 0===t)return[];a=mr(e,h,t.unit/o.minorTicks.amount,1)}}return a},wa=t=>(i,s,e,h,r,n)=>{const o=ba(t,r,n);if(void 0===o)return;let a;return"major"===t?a=o.majorTicks.fitFunction:o.minorTicks&&(a=o.minorTicks.fitFunction),a?a(i,s,e,h,r,n):void 0},_a=i({utc:!1,locale:void 0,dateOrigin:void 0,cursorFormatter:void 0,greatTickStyle:new qo,majorTickStyle:new qo,minorTickStyle:new qo,formatOptionsMajorCentury:{year:"numeric",hour12:!1},formatOptionsMinorDecade:{year:"numeric",hour12:!1},formatOptionsMajorDecade:{year:"numeric",hour12:!1},formatOptionsMinorYear:{year:"numeric",hour12:!1},formatOptionsMajorYear:{year:"numeric",hour12:!1},formatOptionsMinorMonth:{month:"short",hour12:!1},formatOptionsGreatYear:{year:"numeric",hour12:!1},formatOptionsMajorMonth:{month:"long",hour12:!1},formatOptionsMinorWeek:{day:"numeric",hour12:!1},formatOptionsGreatMonth:{year:"numeric",month:"long",hour12:!1},formatOptionsMajorWeek:{day:"numeric",weekday:"short",hour12:!1},formatOptionsMinorDay:{day:"numeric",weekday:"short",hour12:!1},formatOptionsGreatWeek:(t,i,s)=>{const e=new Date(t),h=(t=>{const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));i.setUTCDate(i.getUTCDate()+4-(i.getUTCDay()||7));const s=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i.getTime()-s.getTime())/864e5+1)/7)})(e);return`${new Intl.DateTimeFormat(s,{year:"numeric",month:"long",hour12:!1}).format(e)} Week ${h}`},formatOptionsMajorDay:{weekday:"long",day:"numeric",hour12:!1},formatOptionsMinorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatDay:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatHour:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsGreatMinute:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsMinorMillisecond:t=>{const i=new Date(t);return i.setHours(0,0,0,0),ca.hhmmssmmm(t-i.getTime())},formatMillisecondRange:t=>{const i=new Date(t);return i.setHours(0,0,0,0),ca.hhmmssmmm(t-i.getTime())},formatOptionsGreatSecond:{},formatOptionsMajorMilliSecond:{}});class Ca extends _a{We(t){const i=void 0!==this.dateOrigin?this.dateOrigin.getTime():0,s=t=>ma.map((i=>{const s=((t,i,s)=>{switch(s.label){case"MilliSecond1":case"MilliSecond10":case"MilliSecond100":return"Great"===i?t.formatOptionsGreatMinute:t.formatMillisecondRange;case"Second":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorSecond:t.formatOptionsMinorSecond;case"Minute":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorMinute:t.formatOptionsMinorMinute;default:case"Hour":return"Great"===i?t.formatOptionsGreatHour:"Major"===i?t.formatOptionsMajorHour:t.formatOptionsMinorHour;case"Day":return"Great"===i?t.formatOptionsGreatDay:"Major"===i?t.formatOptionsMajorDay:t.formatOptionsMinorDay;case"Week":return"Great"===i?t.formatOptionsGreatWeek:"Major"===i?t.formatOptionsMajorWeek:t.formatOptionsMinorWeek;case"Month":return"Great"===i?t.formatOptionsGreatMonth:"Major"===i?t.formatOptionsMajorMonth:t.formatOptionsMinorMonth;case"Year":return"Great"===i?t.formatOptionsGreatYear:"Major"===i?t.formatOptionsMajorYear:t.formatOptionsMinorYear;case"Decade":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorDecade:t.formatOptionsMinorDecade;case"Century":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorCentury:void 0;case"Millennium":return}})(this,t,i);if("object"!=typeof s)return s;try{return new Intl.DateTimeFormat(this.locale,s)}catch(t){let i="";for(const t in s)i+=` ${t}: ${s[t]},`;ni.console.error(`Invalid Intl.DateTimeFormat ( locale: ${this.locale}, formatOptions {${i}} )`)}})),e=new Map;e.set("great",s("Great")),e.set("major",s("Major")),e.set("minor",s("Minor"));const h=t=>String(t),r=(t,s)=>(r,n)=>{let o=r+i;const a=n.start,l=n.end,c=a>l,u=ba(t,c?l:a,c?a:l);if(void 0===u)return h(o);if("great"===t){const t=di(r,"left"===s?a:l);let e;if(e=!1===t?r:!1===u.irregular?"left"===s&&!1===c||"right"===s&&!0===c?u.greatTicks.getReferenceKeyValue(i,this.utc)(r):u.greatTicks.getReferenceKeyValue(i,this.utc)(r+1*u.unit):"left"===s&&!1===c||"right"===s&&!0===c?u.getPrevKeyValue(i,this.utc)(r):u.getNextKeyValue(i,this.utc)(r),o=e+i,"right"===s&&!0===t)return"";if("right"===s&&"Week"===u.label)return""}const d=e.get(t);if(void 0===d)return h(o);const f=d[ma.indexOf(u)];return void 0===f?"":"function"==typeof f?f(o,n,this.locale):f.format(o)},n=[],o=[{sr:"Great ticks (directive)",$f:0,Xe:!0,jr:Ma("great",i,this.utc),Zr:void 0},{sr:"Major ticks",$f:1,th:this.majorTickStyle,He:r("major"),jr:Ma("major",i,this.utc),Th:{_r:wa("major"),kr:"hide-tick"},Zr:void 0}];sa(this.greatTickStyle)||n.push({sr:"Great ticks (left)",th:this.greatTickStyle.setLabelAlignment(-1),He:r("great","left"),jr:xa(i,this.utc,"left"),Ye:!0,Fr:!1}),sa(this.minorTickStyle)||o.push({sr:"Minor ticks",$f:2,th:this.minorTickStyle,He:r("minor"),jr:Ma("minor",i,this.utc),Th:{_r:wa("minor"),Fh:(t,i,s,e,h,r)=>{const n=ba("minor",h,r);return!n||"Week"!==n.label},kr:"hide-tick"},Zr:void 0,Cr:2});const a=this.cursorFormatter;return{je:n,Ze:o,Qe:a?(t,s,e)=>a(i+t,s,e):(t,s,e)=>{const h=Sa(Math.min(s.start,s.end),Math.max(s.start,s.end),void 0,1,!0),r=h&&h.unit<=6e4,n=new Date(i+t),o=new Date(i+t);o.setHours(0,0,0,0);const a=r?ca.hhmmssmmm:ca.hhmmss;return`${new Intl.DateTimeFormat(e,{year:"numeric",month:"numeric",day:"numeric"}).format(n)} ${a(n.getTime()-o.getTime())}`},Je:1,Ke:31536e9}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTickStyle(t){return this.setGreatTickStyle(t).setMajorTickStyle(t).setMinorTickStyle(t)}setGreatTickStyle(t){if("function"==typeof t){const i=this.get("greatTickStyle");return this.set("greatTickStyle",t(i))}return this.set("greatTickStyle",t)}getGreatTickStyle(){return this.get("greatTickStyle")}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setUTC(t){return this.set("utc",t)}getUTC(){return this.get("utc")}setLocale(t){return this.set("locale",t)}getLocale(){return this.get("locale")}setDateOrigin(t){return this.set("dateOrigin",t)}getDateOrigin(){return this.get("dateOrigin")}setFormatting(t,i,s){return this.withMutations((e=>e.set("formatOptionsGreatYear",t||this.formatOptionsGreatYear).set("formatOptionsGreatMonth",t||this.formatOptionsGreatMonth).set("formatOptionsGreatWeek",t||this.formatOptionsGreatWeek).set("formatOptionsGreatDay",t||this.formatOptionsGreatDay).set("formatOptionsGreatHour",t||this.formatOptionsGreatHour).set("formatOptionsGreatMinute",t||this.formatOptionsGreatMinute).set("formatOptionsMajorCentury",i||this.formatOptionsMajorCentury).set("formatOptionsMajorDecade",i||this.formatOptionsMajorDecade).set("formatOptionsMajorYear",i||this.formatOptionsMajorYear).set("formatOptionsMajorMonth",i||this.formatOptionsMajorMonth).set("formatOptionsMajorWeek",i||this.formatOptionsMajorWeek).set("formatOptionsMajorDay",i||this.formatOptionsMajorDay).set("formatOptionsMajorHour",i||this.formatOptionsMajorHour).set("formatOptionsMajorMinute",i||this.formatOptionsMajorMinute).set("formatOptionsMajorSecond",i||this.formatOptionsMajorSecond).set("formatOptionsMinorDecade",s||this.formatOptionsMinorDecade).set("formatOptionsMinorYear",s||this.formatOptionsMinorYear).set("formatOptionsMinorMonth",s||this.formatOptionsMinorMonth).set("formatOptionsMinorWeek",s||this.formatOptionsMinorWeek).set("formatOptionsMinorDay",s||this.formatOptionsMinorDay).set("formatOptionsMinorHour",s||this.formatOptionsMinorHour).set("formatOptionsMinorMinute",s||this.formatOptionsMinorMinute).set("formatOptionsMinorSecond",s||this.formatOptionsMinorSecond)))}setFormattingDecade(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorDecade",t)),i&&(s=s.set("formatOptionsMinorYear",i)),s)))}setFormattingYear(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorYear",t)),i&&(s=s.set("formatOptionsMinorMonth",i)),s)))}setFormattingMonth(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatYear",t)),i&&(e=e.set("formatOptionsMajorMonth",i)),s&&(e=e.set("formatOptionsMinorWeek",s)),e)))}setFormattingWeek(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMonth",t)),i&&(e=e.set("formatOptionsMajorWeek",i)),s&&(e=e.set("formatOptionsMinorDay",s)),e)))}setFormattingDay(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatWeek",t)),i&&(e=e.set("formatOptionsMajorDay",i)),s&&(e=e.set("formatOptionsMinorHour",s)),e)))}setFormattingHour(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatDay",t)),i&&(e=e.set("formatOptionsMajorHour",i)),s&&(e=e.set("formatOptionsMinorMinute",s)),e)))}setFormattingMinute(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatHour",t)),i&&(e=e.set("formatOptionsMajorMinute",i)),s&&(e=e.set("formatOptionsMinorSecond",s)),e)))}setFormattingSecond(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMinute",t)),i&&(e=e.set("formatOptionsMajorSecond",i)),s&&(e=e.set("formatOptionsMinorMillisecond",s)),e)))}setFormattingMilliSecond(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatSecond",t)),i&&(s=s.set("formatOptionsMajorMilliSecond",i)),s)))}}const ka=(t,i)=>(s,e,h,r,n)=>{const o=e-s;if(i){let i=5;n<=125?i=2:n<=250?i=3:n<=500&&(i=4);const h=Math.log10(o/i),r=Math.floor(2*h)/2;let a;a=r%1==0?10**(r-t):10**Math.ceil(r)/2;const l=1/a;a=Math.round(a*l)/l;const c=Math.round(Math.floor(s/(10*a))*a*10*l)/l;return Sr(c,e,a,void 0,l)}let a=o/5;const l=1/a;return a=Math.round(a*l)/l,mr(s,e,a,l)},Ta=(t,i,s,e,h,r)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%5==0)):2===i?t.filter(((t,i)=>i%10==0)):void 0,Fa=(t,i,s,e,h,r)=>{},Ia=(t,i,s,e,h,r)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%3==0)):2===i?t.filter(((t,i)=>i%4==0)):3===i?t.filter(((t,i)=>i%5==0)):void 0,Pa=(t,i,s,e,h,r)=>0===i?[t[1],t[3],t[5]]:1===i?[t[0],t[3]]:2===i?[t[1]]:void 0,La=(t,i)=>{const s=ce(t),e=ue(t);if(i)return(t,i)=>{const h=[],r=Math.floor(s(t)),n=Math.ceil(s(i));for(let t=r-1;t<=n+1;t+=1){const i=e**t;h.push(i)}return h};const h=10===t?9:4;return(t,i)=>{const r=Math.round(s(t)),n=Math.round(s(i)),o=[],a=e**r,l=(e**n-a)/h;for(let s=1;s<=h;s+=1){const e=a+l*s;e>t&&e<i&&o.push(e)}return o}},Ba=i({cursorFormatter:void 0,extremeTickStyle:new qo,majorTickStyle:new qo,minorTickStyle:new qo,formattingOffset:void 0,extremeFormattingFunction:void 0,majorFormattingFunction:void 0,minorFormattingFunction:void 0,fallBackToExtremeTicksAutomatically:!0});class Da extends Ba{We(t){const i=this.formattingOffset,s=this.get("extremeFormattingFunction")||("logarithmic"===t.type?(i,s)=>ve.LogarithmicNoExponents(i,s,void 0,t.base):ve.Numeric),e=this.get("majorFormattingFunction")||("logarithmic"===t.type?(i,s)=>ve.LogarithmicNoExponents(i,s,void 0,t.base):ve.Numeric),h=this.get("minorFormattingFunction")||("logarithmic"===t.type?(i,s)=>ve.LogarithmicNoExponents(i,s,void 0,t.base):ve.Numeric),r=[],n=[];sa(this.extremeTickStyle)||r.push({sr:"Extreme ticks",th:this.extremeTickStyle,He:void 0===i?s:(t,e,h)=>s(i+t,e,h),jr:pr,Ye:!0,Fr:!0});const o={sr:"Major ticks",$f:0,th:this.majorTickStyle,He:void 0===i?e:(t,s,h)=>e(i+t,s,h),jr:"logarithmic"===t.type?La(t.base,!0):ka(0,!0),Th:{kr:"hide-label",_r:"logarithmic"===t.type?Ia:Ta},Zr:void 0};if(n.push(o),!sa(this.minorTickStyle)){const s="logarithmic"===t.type?La(t.base,!1):ka(1,!1);n.push({sr:"Minor ticks",$f:1,th:this.minorTickStyle,He:void 0===i?h:(t,s,e)=>h(i+t,s,e),jr:(t,i,e,h,r)=>s(t,i,e,h,r),Th:{kr:"hide-tick",_r:"logarithmic"===t.type?Pa:Fa},Zr:80})}const a=this.cursorFormatter?this.cursorFormatter:ve.Numeric;return{je:r,Ze:n,Qe:void 0===i?a:(t,s,e)=>a(i+t,s,e),Je:1e-9,Ke:void 0,dr:this.fallBackToExtremeTicksAutomatically?o:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setExtremeTickStyle(t){if("function"==typeof t){const i=this.get("extremeTickStyle");return this.set("extremeTickStyle",t(i))}return this.set("extremeTickStyle",t)}getExtremeTickStyle(){return this.get("extremeTickStyle")}setFormattingOffset(t){return this.set("formattingOffset",t)}getFormattingOffset(){return this.get("formattingOffset")}setTickStyle(t){const i=this.setMajorTickStyle(t).setMinorTickStyle(t);return i.extremeTickStyle!==ia?i.setExtremeTickStyle(t):i}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setFormattingFunction(t){return this.withMutations((i=>i.set("extremeFormattingFunction",t).set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getExtremeFormattingFunction(){return this.get("extremeFormattingFunction")}setExtremeFormattingFunction(t){return this.set("extremeFormattingFunction",t)}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}getFallBackToExtremeTicksAutomatically(){return this.get("fallBackToExtremeTicksAutomatically")}setFallBackToExtremeTicksAutomatically(t){return this.set("fallBackToExtremeTicksAutomatically",t)}}const Ea=(t,i,s="image/png",e)=>{i+=`.${s.slice(s.indexOf("image/")+6)}`;const h=t.captureFrame(s,e);if("image/png"!==s&&h.type.includes("image/png"))throw new Error(`saveToFile | type not supported by browser: ${s}\nCheck support table for HTMLCanvasElement.toDataURL`);if(ni.navigator.msSaveBlob)ni.navigator.msSaveBlob(h,i);else{const t=ni.document.createElement("a");ni.document.body.appendChild(t);const s=ni.URL.createObjectURL(h);t.href=s,t.download=i,t.click(),setTimeout((()=>{ni.URL.revokeObjectURL(s),ni.document.body.removeChild(t)}),0)}},Ra=(t,i,s,e,h,r)=>{const n=t.kn(i,s,e,h,r,!0);return n.setDraggingMode(si.draggable),n},za=(t,i)=>{if("relative"===t)return i;if(t instanceof Se)return t;const s=t.x instanceof Tr?t.x.ot:t.x.x,e=t.y instanceof Tr?t.y.ot:t.y.y;return Me(s,e)},Va=(t,i,s,e,h)=>{if(s){const r=t,n=i,o=Jo(n)?n:Ce(n)?e:void 0;if(o&&we(s)){const t=ot(r,o,h.ot);return h.ma({engineX:t.x,engineY:t.y})}if(o&&Ce(s))return ot(r,o,e);if(o&&Jo(s))return ot(r,o,s)}else{const s=t;if(Ce(i)){const t=h.pa(s);return ot({x:t.engineX,y:t.engineY},h.ot,e)}if(Jo(i)){const t=i,e=h.pa(s);return ot({x:e.engineX,y:e.engineY},h.ot,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")};class Oa{constructor(t,i,s,e,h,n,o,a){this.coordsRelative="relative",this.coordsClient="client",this.Jf=[],this.Kf=[],this.qf=void 0,this.tA=void 0,this.iA=void 0,this.oi=f(0,0,0,0),this.sA=!1,this.dt=!1,this.eA=()=>{this.hA=!0,this.rA.Ls()},this.nA=t=>i=>{const s=this.Jf.indexOf(i);-1!==s&&this.Jf.splice(s,1),this.St.Ls(),t.G()},this.oA=t=>{const i=this.Kf.indexOf(t);-1!==i&&this.Kf.splice(i,1),this.St.Ls()},this.hA=!0,this.background=new zt,this.aA=t,this.lA=s,this.rA=e,this.removePanel=h,this._t=i.St._t;const l=i.St.xi();this.uiScale=s.d2({scaleXYConstructor:be}).qi(0,100).ts(0,100).Z(l),this.xf=s.d2({scaleXYConstructor:be}).qi(0,this.uiScale.x.getCellSize()).ts(0,this.uiScale.y.getCellSize()).Z(l),this.engine=i.St.cA,this.St=i.St.uA,this.vs=this.St.vs.ys(this,{}),this.dA=()=>i.fA("unidentified ui"),this.AA=i.gA(),this.vA=this.rA.Pe(this.uiScale).Be(r(0,0)).Z(r(100,100)).Ie(n).Fe(o),this.background.Nt(this.vA),a?(a.addEventListener("resize",this.eA),this.yA=()=>a.removeEventListener("resize",this.eA)):(i.St.V("resize",this.eA),this.pA=()=>i.St.N("resize",this.eA));const c=t=>{this.sA=t.isInView,this.D.R("inviewchanged",{isInView:this.sA})};i.St.V("inviewchanged",c),this.mA=()=>i.St.N("inviewchanged",c),this.qf=h}getTheme(){return this._t}getSizePixels(){return this.xf.getInnerIntervalPixels()}setBackgroundFillStyle(t){return this.vA.Ie(t),this.rA.Ls(),this}getBackgroundFillStyle(){return this.vA.$h()}setBackgroundStrokeStyle(t){return this.vA.Fe(t),this.rA.Ls(),this}getBackgroundStrokeStyle(){return this.vA.da()}translateCoordinate(t,i,s){return Va(t,i,s,this.xf,this.St)}SA(t){return this.Jf.push(t),this.St.Ls(),t}bA(t){return this.Kf.push(t),this.St.Ls(),t}addUIElement(t=xo,i=this.uiScale){i=za(i,this.xf);const s=this.dA();return this.SA(Ra(t,s,this.uiScale,i,this.nA(s),this._t))}addLegendBox(t=Eo,i=this.uiScale){i=za(i,this.xf);const s=this.bA(Ra(t,this.AA,this.uiScale,i,this.oA,this._t));return s.setDraggingMode(si.notDraggable),void 0!==i&&i!==this.uiScale||(void 0===t||"vertical"===t.getAlignment()?s.setOrigin(ir.RightCenter).setPosition({x:100,y:50}):s.setOrigin(ir.CenterBottom).setPosition(this.uiScale.Pi({x:50,y:0},{x:0,y:3}))),s}getLegendBoxes(){return this.Kf}dispose(){return this.dt||(this.dt=!0,this.pA&&this.pA(),this.yA&&this.yA(),Na(this.uiScale),Na(this.xf),this.mA&&this.mA(),this.tA&&this.tA(),this.rA.G(),this.AA.G(),this.Jf.slice().forEach((t=>{t.dispose()})),this.Kf.slice().forEach((t=>{t.dispose()})),this.St.Ls(),this.qf&&this.qf(this),this.D.R("dispose",{})),this}isDisposed(){return this.dt}saveToFile(t,i,s){return Ea(this.engine,t,i,s),this}$r(t){this.oi=t,this.eA()}H(){return this.xf.H(),this.uiScale.H(),this}X(){return this.xf.X(),this.uiScale.X(),this}Le(t){if(this.hA){const t=this.rA.St.xi(),i=t.x,s=t.y;this.uiScale.Z(i,s),this.xf.Z(i,s);const e=[this.oi.left,this.oi.right],h=[this.oi.bottom,this.oi.top];this.uiScale.Ji(e),this.uiScale.Ki(h);const r=this.uiScale.getInnerIntervalPixels();this.xf.qi(0,r.x).Ji(e).ts(0,r.y).Ki(h),this.D.R("resize",{width:r.x,height:r.y,engineHeight:s,engineWidth:i})}this.hA=!1}xA(){for(let t=0;t<this.Jf.length;t+=1)this.Jf[t].hr().Le();for(let t=0;t<this.Kf.length;t+=1)this.Kf[t].hr().Le();this.iA&&this.iA()}MA(t,i){if(t){const s=t(i);this.addEventListener("resize",s.hr.bind(s)),this.tA=s.G.bind(s),this.iA=s.hr.bind(s)}}getIsInView(){return this.sA}}const Na=t=>{t.gi&&t.gi()};class Ga extends Oa{constructor(t,i,s,e,h,r){super(t,i,s,i.wA("uipanel bg",0),e,i.St._t.uiPanelBackgroundFillStyle,i.St._t.uiPanelBackgroundStrokeStyle,r),this.D=new zt,this.MA(h,this.xf)}setMinimumSize(t){return this.gd=t,this.St.Ls(),this}getMinimumSize(){return this.gd}Le(t){super.Le(t),super.xA()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const $a=f(10,10,10,10);class Ua extends Oa{constructor(t,i,s,e,h,n,o,a,l,c,u){super(t,i,s,e,h,n,o,u),this._A={},this.nn=$a,this.ah=!0,this.title=new zt,this.CA=i.kA("chart internal ui",0),this.Sh=this.CA.Yr(this.uiScale).Sr("Chart").Be(r(50,100)).ul(r(0,1)).Xh(a).Ie(l).setPointerEvents(!1).mr(c),this.title.Nt(this.Sh),this.TA=this.vs.kf([this.Sh]).Ps(this._t.effectsText)}setAnimationsEnabled(t){return this.ah=t,this}getAnimationsEnabled(){return this.ah}setTitle(t){return this.Sh.Sr(t),this.St.Ls(),this}getTitle(){return this.Sh.wr()}getTitleSize(){return this.Sh.hr().zu()}setTitleFillStyle(t){return this.Sh.Ie(t),this.eA(),this}getTitleFillStyle(){return this.Sh.$h()}setTitleShadow(t){return this.Sh.mr(t),this.St.Ls(),this}getTitleShadow(){return this.Sh.el()}setTitleFont(t){return this.Sh.Xh(t),this.eA(),this}getTitleFont(){return this.Sh.Hh()}setTitleRotation(t){return this.Sh.Wh(t),this.St.Ls(),this}getTitleRotation(){return this.Sh.jh()}setTitleEffect(t){return this.TA.Ps(t),this.St.Ls(),this}getTitleEffect(){return this.TA.Bs()}setTitleMargin(t){var i,s;return this._A="object"==typeof t?this._A?(i=this._A,{left:void 0!==(s=t).left?s.left:i.left,top:void 0!==s.top?s.top:i.top,right:void 0!==s.right?s.right:i.right,bottom:void 0!==s.bottom?s.bottom:i.bottom}):t:{left:t,top:t,right:t,bottom:t},this.eA(),this}getTitleMargin(){return this._A}setPadding(t){const i="object"==typeof t?g(this.nn,t):{left:t,top:t,right:t,bottom:t};return i.bottom===this.nn.bottom&&i.left===this.nn.left&&i.right===this.nn.right&&i.top===this.nn.top||(this.nn=i,this.eA()),this}getPadding(){return this.nn}FA(t){const i=t.IA(),s=null==i?void 0:i.height,e=null==i?void 0:i.width;if(void 0!==s&&void 0!==e)return{x:s/2,y:e/2}}dispose(){return super.dispose(),this.CA.G(),this}}const Ya={PA:(t,i)=>t.$h()!==V&&0!==t.wr().length&&t.getVisible()?t.hr().zu().y:0,LA(t,i){t.Be(r(50,100)).$r({top:void 0!==i.top?i.top:10,right:i.right||0,left:i.left||0,bottom:i.bottom||0})}},Ha=t=>"show-all-interpolated"===t||"show-nearest-interpolated"===t||"show-pointed-interpolated"===t,Xa=(t,i)=>{const s="series"in t?t.series:void 0;if(!s||!("getCursorFormattingOverride"in s))return i;const e=s.getCursorFormattingOverride();return e?e(t,i):i},Wa=t=>{const i="series"in t&&t.series,s=i&&Lo(i)&&i.Gs(),e="x"in t&&t.x,h="y"in t&&t.y,r="z"in t&&t.z,n="color"in t&&t.color,o=("lookupValue"in t?t.lookupValue:void 0)||("intensity"in t?t.intensity:void 0)||("value"in t?t.value:void 0);return n||(void 0!==o&&s&&"value"===s.lookUpProperty?s.lut.getColors(o,s.valueRange):void 0!==e&&!1!==e&&s&&"x"===s.lookUpProperty?s.lut.getColors(e,ja(i)?{min:i.getXMin(),max:i.getXMax()}:void 0):void 0!==h&&!1!==h&&s&&"y"===s.lookUpProperty?s.lut.getColors(h,ja(i)?{min:i.getYMin(),max:i.getYMax()}:void 0):void 0!==r&&!1!==r&&s&&"z"===s.lookUpProperty?s.lut.getColors(r,Za(i)?{min:i.getZMin(),max:i.getZMax()}:void 0):void 0)},ja=t=>!(!t||"object"!=typeof t||!("getXMin"in t)),Za=t=>!(!t||"object"!=typeof t||!("getZMin"in t)),Qa=(t,i,s,e,h,r,n)=>{let o,a,l,c=h,u=r,d=null,f=!0;e&&(f=!1,e.seriesBackground.addEventListener("pointerenter",(()=>{var i;f=!0,t.getCursorMode()&&(a&&l&&!("explicitTarget"in(null!==(i=l[3])&&void 0!==i?i:{}))?A.Le(...l):t.St.Ls())})),e.seriesBackground.addEventListener("pointerleave",(()=>{var i;f=!1,t.getCursorMode()&&(a&&l&&!("explicitTarget"in(null!==(i=l[3])&&void 0!==i?i:{}))?A.Le(...l):t.St.Ls())})),e.seriesBackground.addEventListener("pointermove",(()=>{var i;f=!0,t.getCursorMode()&&(a&&l&&!("explicitTarget"in(null!==(i=l[3])&&void 0!==i?i:{}))?A.Le(...l):t.St.Ls())})),e.addEventListener("seriesadd",(i=>{const s=i.series;s.addEventListener("pointerenter",((i,e)=>{var h;s.BA()&&(a||t.St.Ls(),o=e||void 0),t.getCursorMode()&&(a&&l&&!("explicitTarget"in(null!==(h=l[3])&&void 0!==h?h:{}))?A.Le(...l):t.St.Ls())})),s.addEventListener("pointermove",((i,e)=>{var h;s.BA()&&(a||t.St.Ls(),o=e||void 0),t.getCursorMode()&&(a&&l&&!("explicitTarget"in(null!==(h=l[3])&&void 0!==h?h:{}))?A.Le(...l):t.St.Ls())})),s.addEventListener("pointerleave",(i=>{var e;s.BA()&&(a||t.St.Ls(),o=void 0),t.getCursorMode()&&(a&&l&&!("explicitTarget"in(null!==(e=l[3])&&void 0!==e?e:{}))?A.Le(...l):t.St.Ls())}))})));const A={setCursor:i=>(i(s),t),getCursor:()=>s,setCursorMode:i=>(c=i,t.St.Ls(),t),getCursorMode:()=>c,setCustomCursor:t=>{a=t},setCursorFormatting:i=>(u=i,t.St.Ls(),t),getCursorFormatting:()=>u,G:()=>{s.dispose(),i.G()},Le:(i,e,h,r)=>{l=[i,e,h,r];const A=t.St.jo();let g=[];if((null==r?void 0:r.explicitTarget)&&c)g=Array.isArray(r.explicitTarget)?r.explicitTarget:[r.explicitTarget];else if(!i&&c){const t=e.find((t=>t.getPointed())),i=A&&t&&(!t.getCursorEnabled||t.getCursorEnabled())&&t.Fs?t.Fs(A):void 0;if(o=i||o,o&&"show-all"!==c&&"show-all-interpolated"!==c)g=[o];else if("show-all"===c||"show-all-interpolated"===c||"show-nearest"===c||"show-nearest-interpolated"===c){if((f||void 0!==t)&&A&&h){for(const t of e){if(!t.getVisible()||t.getCursorEnabled&&!t.getCursorEnabled())continue;const i=h(t,A,c);i&&g.push(i)}"show-nearest"!==c&&"show-nearest-interpolated"!==c||(g.sort(((t,i)=>n(t,A)-n(i,A))),g.length=1)}}else if(("show-pointed"===c||"show-pointed-interpolated"===c)&&A&&t&&(!t.getCursorEnabled||t.getCursorEnabled())&&h){const i=h(t,A,c);i&&(g=[i])}}g=ss(g.map((t=>gs(t))));const v=(null==r?void 0:r.overrideCursorPositions)||((t,i)=>i),y=g[0],p=g.length>0?g:void 0;if(y!==d&&A&&(a&&a({hit:y,hits:p,mouseLocation:A}),t.D.R("cursortargetchange",{hit:y,hits:p,mouseLocation:A}),d=y),a)s.getVisible()&&(s.setVisible(!1),s.hr().Le());else{if(g&&g.length>0){const i=u(t,g[0],g);s.setVisible(!0).setPosition(...v(g,g.map((t=>t.cursorPosition)))).setResultTable((t=>t.setContent(i)))}else s.setVisible(!1);(null==r?void 0:r.afterCursorPointedAt)&&r.afterCursorPointedAt(g),s.hr().Le()}},solveNearest:(i,s,e,h)=>{const r=i||t.St.jo();if(!r)return[];let o=[];if("show-all"===s||"show-all-interpolated"===s||"show-nearest"===s||"show-nearest-interpolated"===s){for(const t of e){if(!t.getCursorEnabled()||!t.getVisible())continue;const i=h(t,r,s);i&&o.push(i)}"show-nearest"!==s&&"show-nearest-interpolated"!==s||(o.sort(((t,i)=>n(t,r)-n(i,r))),o.length=1)}return o=ss(o.map((t=>gs(t)))),o},DA:s};return A};class Ja{constructor(t,i){this.EA=t,this.RA=i}alter(t){this.zA=void 0!==this.zA?this.zA:this.RA(),this.VA=t,this.EA(t)}resetValue(){void 0!==this.VA&&(void 0!==this.zA&&this.isAltered()&&this.EA(this.zA),this.zA=void 0,this.VA=void 0)}getNormalValue(){return void 0!==this.zA?this.zA:this.RA()}isAltered(){return void 0!==this.VA&&this.RA()===this.VA}}class Ka{constructor(t){this.OA=[],this.DA=t,this.NA=t.NA}update(){return this.NA.getVisible()?!(this.GA()&&(!this.$A()||(this.resetTable(),this.NA.hr(),this.GA()))&&(this.UA(),this.NA.hr(),this.GA()&&(this.resetTable(),this.NA.hr(),1))):(this.$A()&&this.resetTable(),!0)}$A(){for(let t=0;t<this.OA.length;t+=1)if(this.OA[t].isAltered())return!0;return!1}resetTable(){for(let t=0;t<this.OA.length;t+=1)this.OA[t].resetValue();return this}GA(){const t=this.DA.GA();return t.x||t.y}YA(){return this.DA.GA().x}HA(){return this.DA.GA().y}XA(t){return this.OA.push(t),t}}class qa extends Ka{constructor(){super(...arguments),this.Ua=this.XA(new Ja((t=>this.NA.setOrigin(t)),(()=>this.NA.getOrigin())))}UA(){const t=this.Ua.getNormalValue(),i=r(this.YA()?-t.x:t.x,this.HA()?-t.y:t.y);this.Ua.alter(i)}}class tl extends Ka{constructor(t,i,s){super(t),this.WA=this.XA(new Ja((t=>this.NA.setTextFont((i=>i.setSize(t)))),(()=>this.NA.getTextFont().getSize()))),this.jA=i,this.ZA=s}UA(){const t=this.WA.getNormalValue(),i=this.jA;if(i<t)for(let s=1;s<=this.ZA;s+=1){const e=t-(t-i)*(s/this.ZA);if(this.WA.alter(e),this.NA.hr(),!this.GA())return}}}const il={Flip:t=>new qa(t),FontSize:(t=5,i=5)=>s=>new tl(s,t,i)},sl={None:Qr,Rectangle:qn,Circle:to,Diamond:io,Pointer:so};class el extends uo{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.pn=this._t.cursorResultTableTextFont,this.Cd=0,this.QA=this._t.cursorResultTableTextFillStyle,this.cn=100}setContent(t){let i;void 0===t?i=[]:Array.isArray(t)?(i=[],t.forEach((t=>{i.push(Array.isArray(t)?t:[t])}))):i=[[t]];for(let t=0;t<i.length;t+=1){const s=i[t];let e=!1;for(let t=0;t<s.length;t+=1){const i=s[t],h="object"==typeof i&&"text"in i?i.text:"string"==typeof i?i:void 0,r="object"==typeof i&&"icon"in i?i.icon:wh(i)?i:void 0,n=i instanceof Re&&i;if(!(h&&h.length>0||r||n)){e=!0;break}}e||(s.unshift(""),s.push(""))}const s=i.length;let e=this.getMembers().length;for(let t=0;t<Math.max(s,e);t+=1){const r=this.getRow(t,!0);if(t>=s)this.getMembers()[t].dispose(),t-=1,e-=1;else{const e=i[t].length;let n=r.getMembers().length;for(let o=0;o<Math.max(e,n);o+=1){const a=i[t][o],l="object"==typeof a&&"font"in a?a.font:void 0,c="object"==typeof a&&"fillStyle"in a?a.fillStyle:void 0,u="object"==typeof a&&"text"in a?a.text:"string"==typeof a?a:void 0,d="object"==typeof a&&"icon"in a?a.icon:wh(a)?a:void 0,f=a instanceof Re&&a||("object"==typeof a&&"component"in a?a.component:void 0),A="object"==typeof a&&"componentColor"in a&&a.componentColor,g="object"==typeof a&&"rowFillStyle"in a?a.rowFillStyle:void 0,v=r.getMembers();if(o>=e)r.getMembers()[o].dispose(),o-=1,n-=1;else if(void 0!==u&&u.length>0||d||f){const i=l?this.pn.withMutations((t=>{for(const i of Object.keys(l)){const s=l[i];void 0!==s&&t.set(i,s)}return t})):this.pn,e=c||this.QA,n=v[o];if(u){let t;n&&n instanceof Jn?t=n:(n&&n.dispose(),t=r.addElement(Kn,o)),t.setText(u).setFont(i).setFillStyle(e).setTextRotation(this.Cd)}else if(d){let t;n&&n instanceof eo?t=n:(n&&n.dispose(),t=r.addElement(ho,o)),t.setFillStyle(e).setShape(d).setSize({y:i.size,x:i.size}),t.setMargin(5)}else if(f){let t;n&&"setTextFillStyleHidden"in(h=n)&&"setText"in h?t=n:(n&&n.dispose(),t=r.addElement(Co.setBackground(sl.None),o).setOn(!0));const s=f.$s();void 0!==s&&t.setButtonShape(s),t.setText(f.getName()).setTextFont(i).setTextFillStyle(e).setTextRotation(this.Cd),f.styleLegendEntry(t),A&&t.setButtonOnFillStyle(new $({color:A}))}g&&r.setBackground((i=>{i.setFillStyle(g);const e=this.getBackground();Ve(e)&&i instanceof qn&&i.setCornerRadius(e.getCornerRadius(),{topLeft:0===t,topRight:0===t,bottomLeft:t===s-1,bottomRight:t===s-1})}))}else{const t=v[o];t&&t instanceof ro||(t&&t.dispose(),r.addGap(void 0,o))}}}}var h;return this.Ys.Ls(),this}setTextFillStyle(t){this.QA="function"==typeof t?t(this.QA):t;for(let t=0;t<this.getMemberCount();t+=1){const i=this.getRow(t);for(let t=0;t<i.getMembers().length;t+=1){const s=i.getMembers()[t];s instanceof Jn&&s.setFillStyle(this.QA)}}return this.Ys.Ls(),this}getTextFillStyle(){return this.QA}setTextFont(t){return rh(t)?this.pn=t:this.pn=t(this.pn),this.Ys.Ls(),this}getTextFont(){return this.pn}setTextRotation(t){return this.Cd=t,this.Ys.Ls(),this}getTextRotation(){return this.Cd}JA(){for(let t=0;t<this.dd.length;t+=1)for(let i=0;i<this.dd[t].getMembers().length;i+=1)this.dd[t].getMembers()[i].dispose()}hr(){for(let t=0;t<this.dd.length;t+=1)this.dd[t].setMinimumSize(void 0);super.hr();for(let t=0;t<this.dd.length;t+=1)this.dd[t].setMinimumSize(this.size.x);return super.hr(),this}}class hl{constructor(t,i,s,e,h,r){this.KA=[],this.qA=!0,this.tg=!0,this.sA=!1,this.ft=!0,this.dt=!1,this.ig=[],this.D=new zt,this.Ys=t,this.renderingScale=i,this.scale=s,this.sg=e,this.eg=h,this._t=r,this.NA=new el(this.Ys,this.renderingScale,this.scale,this.eg,ui,r).setPointerEvents(!1).setBackground((t=>t.setFillStyle(r.cursorResultTableFillStyle).setStrokeStyle(r.cursorResultTableStrokeStyle))).setTextFillStyle(r.cursorResultTableTextFillStyle).setTextFont(r.cursorResultTableTextFont),this.hg=il.Flip(this)}isDisposed(){return this.dt}setPointMarkerVisible(t){return this.qA=t,this.KA.forEach((i=>i.pointMarker.setVisible(i.targetVisible&&t))),this.Ys.Ls(),this}getPointMarkerVisible(){return this.qA}setPointMarker(t){return this.KA.forEach((i=>t(i.pointMarker))),this.ig.push(t),this.Ys.Ls(),this}setResultTableVisible(t){return this.tg=t,this.Ys.Ls(),this}getResultTableVisible(){return this.tg}setResultTable(t){return t(this.NA),this.Ys.Ls(),this}setAutoFitStrategy(t){return this.hg&&this.hg.resetTable(),this.hg=t?t(this):void 0,this.Ys.Ls(),this}getAutoFitStrategy(){return void 0!==this.hg}setVisible(t){return this.ft=t,this.Ys.Ls(),this}getVisible(){return this.ft}dispose(){return this.KA.forEach((t=>t.pointMarker.dispose())),this.NA.dispose(),this.ig.length=0,this.sg(this),this.D.R("dispose",{}),this}GA(){const t=this.NA,i=this.Ys.St.ot,s=ot(t.getPosition(r(-1,-1),ti.PaddedBackground),t.scale,i),e=ot(t.getPosition(r(1,1),ti.PaddedBackground),t.scale,i);return{x:s.x<i.x.getInnerStart()||e.x>i.x.getInnerEnd(),y:s.y<i.y.getInnerStart()||e.y>i.y.getInnerEnd()}}Le(){return this.hg&&this.hg.update(),this.NA.setVisible(this.sA&&this.ft&&this.tg),this.KA.forEach((t=>t.pointMarker.setVisible(t.targetVisible&&this.sA&&this.ft&&this.qA))),this.KA.forEach((t=>t.pointMarker.Le())),this.NA.Le(),this}hr(){return this.KA.forEach((t=>t.pointMarker.hr())),this.NA.hr(),this}rg(t,i){const s=i===this.scale?t:ot(t,i,this.scale);this.NA.setPosition(s)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const rl=(t,i)=>t.setResultTable((t=>t.setEffect(!0).setOrigin(r(-1,-1)).setMargin(5).setBackground((t=>{i.cursorResultTableBorderRadius&&Ve(t)&&t.setCornerRadius(i.cursorResultTableBorderRadius)}))));class nl extends hl{setPosition(...t){const i=this.renderingScale,s=za(t[0].resultTableScale,i),e=s===this.scale?t[0].resultTable:ot(t[0].resultTable,s,this.scale);return this.sA=!1,this.KA.forEach((t=>{t.targetVisible=!1})),t.forEach(((t,s)=>{const e=za(t.pointMarkerScale,i),h=e===this.scale?t.pointMarker:ot(t.pointMarker,e,this.scale);let r=this.KA[s];if(!r){const t=new eo(this.Ys,this.renderingScale,this.scale,ui,this._t).setPointerEvents(!1).setFillStyle(this._t.cursorPointMarkerFillStyle).setSize(this._t.cursorPointMarkerSize).setShape(this._t.cursorPointMarkerShape);r={pointMarker:t,targetVisible:!0},this.KA.push(r),this.ig.forEach((i=>i(t)))}r.pointMarker.setPosition(h),r.targetVisible=((t,i,s=i)=>{const e=i!==s?ot(t,i,s):t;return e.x>=s.x.getInnerStart()&&e.x<=s.x.getInnerEnd()&&e.y>=s.y.getInnerStart()&&e.y<=s.y.getInnerEnd()})(t.pointMarker,e),r.targetVisible&&(this.sA=!0)})),this.NA.setPosition(e),this.Ys.Ls(),this}}class ol{constructor(t,i=[]){this.ng=[],this.og=(t,i)=>(this.ng.forEach((s=>s(t,i))),t),this.addStyler=t=>new ol(this.eg,this.ng.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new ol(t,this.ng.map((t=>t))),this.ag=(t,i,s,e,h)=>this.og(new nl(t,i,s,e,this.eg,h),h),this.eg=t,this.ng=i}}const al=new ol(qn,[rl]),ll=al,cl=al,ul=al,dl=al,fl=ll,Al=new ol(qn,[rl,t=>t.setPointMarkerVisible(!1).setResultTable((t=>t.setOrigin(ir.LeftBottom)))]),gl=al;var vl;!function(t){t[t.LabelsInsideSlices=0]="LabelsInsideSlices",t[t.LabelsOnSides=1]="LabelsOnSides"}(vl||(vl={}));const yl={SortByName:(t,i)=>t.getName().localeCompare(i.getName(),void 0,{numeric:!0}),SortByValueAscending:(t,i)=>t.getAnimatedValue()-i.getAnimatedValue(),SortByValueDescending:(t,i)=>i.getAnimatedValue()-t.getAnimatedValue(),None:()=>0},pl={Name:t=>`${t.getName()}`,NamePlusValue:t=>`${t.getName()}: ${Math.round(t.getAnimatedValue())}`,NamePlusRelativeValue:(t,i)=>`${t.getName()}: ${(100*i).toFixed(2)}%`};class ml extends Re{constructor(t,i,s,e){super(t,i,s,e),this.Es="Slice",this.S=0,ni.requestAnimationFrame((()=>{this.addEventListener("pointermove",(()=>{this.chart.St.Ls()}))}))}}class Sl extends ml{}class bl extends Sl{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.lg=!1,this.cg=V,this.ug=V,this.dg=this.S,this.Ag=this.lg?1:0,this.gg=this.getVisible(),this.vg=Gt((()=>this.chart.St.Ls())),this.yg=Gt((()=>this.chart.St.Ls())),this.pg=()=>{this.mg=void 0},this.Sg=()=>{this.bg=void 0},this.D=new zt,this.index=t,this.chart=e,this.scale=h,this.fs=r,this.xg=i.Yu(h).Bt(this.getHighlight()),this.ws(this.xg),this.sr=s.Yr(h).Bt(this.getHighlight()),this.ws(this.sr,{isText:!0}),this.addEventListener("click",(t=>{t.defaultPrevented||((t,i)=>{Bi(i),t.setExploded(!t.getExploded())})(this,t)}))}setValue(t){return this.chart.getAnimationsEnabled()?this.gg&&this.Mg(this.dg,t):this.dg=t,this.S=t,this.chart.St.Ls(),this}getValue(){return this.S}setExploded(t){if(t&&!1===this.chart.getMultipleSliceExplosion()){const t=this.chart.getSlices();for(let i=0;i<t.length;i+=1)t[i]!==this&&t[i].getExploded()&&t[i].setExploded(!1)}return this.chart.getAnimationsEnabled()?(this.bg&&this.bg.finish(),this.bg=this.yg(300,Ot.ease)([[this.Ag,t?1:0]],(([t])=>{this.Ag=t,this.chart.St.Ls()})),this.bg.addEventListener("everyAnimationEnd",this.Sg),this.lg=!this.lg):!1!==this.chart.getMultipleSliceExplosion()||t?(this.Ag=this.lg?0:1,this.lg=!this.lg):(this.Ag=0,this.lg=!this.lg),this.chart.St.Ls(),this}getExploded(){return this.lg}setVisible(t){return this.gg=t,!1===t?this.chart.getAnimationsEnabled()&&this.dg>0?(this.mg&&(this.mg.finish(!1),this.mg=void 0),this.Mg(this.dg,0,(()=>super.setVisible(!1)))):(this.dg=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.mg&&(this.mg.finish(!1),this.mg=void 0),super.setVisible(!0),this.Mg(this.dg,this.S)):(this.dg=this.S,super.setVisible(!0)),this}Mg(t,i,s){this.mg=this.vg(300,Ot.ease)([[t,i]],(([t])=>{this.dg=t,this.chart.St.Ls()})),this.mg.addEventListener("everyAnimationEnd",this.pg),s&&this.mg.addEventListener("end",s)}setStyle(t,i,s,e,h){this.cg=t,this.ug=s,this.xg.Ie(this.cg).Fe(i),this.sr.Ie(this.ug).Xh(e).mr(h);for(let t=0;t<this.ds.length;t+=1)this.styleLegendEntry(this.ds[t])}getAnimatedValue(){return this.dg}getAnimatedExplosion(){return this.Ag}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.cg,stroke:this.xg.da()})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const xl=(t,i,s)=>js(i,Ws(he(.5*(t.kc()+t.Ui())*Math.PI/180),s)),Ml=(t,i,s,e,h,r)=>{const n=t.length;let o=90;for(let a=0;a<n;a+=1){const l=t[a],c=o-360*i[a],u=l.getAnimatedExplosion();if(0===u||1===n)l.xg.Be(s);else{const t=js(s,Ws(he(.5*(o+c)*Math.PI/180),r*u));l.xg.Be(t)}l.xg.Bc(o).$e(c).Ec(e).Rc(e).zc(h),o=c}};class wl extends Ua{constructor(t,i,s,e,h,r,n){super(t,i,s,i.wA("pieChart bg",0),e,i.St._t.pieChartBackgroundFillStyle,i.St._t.pieChartBackgroundStrokeStyle,i.St._t.pieChartTitleFont,i.St._t.pieChartTitleFillStyle,i.St._t.pieChartTitleShadow,r),this.wg=[],this._g=yl.SortByName,this.Sc=0,this.Cg=this._t.pieChartSliceFillStylePalette,this.kg=this._t.pieChartSliceStrokeStyle,this.Tg=!0,this.Fg=this._t.pieChartSliceLabelFont,this.Ig=this._t.pieChartSliceLabelFillStyle,this.Pg=this._t.pieChartSliceLabelShadow,this.Lg=0,this.Bg=!1,this.Dg=20,this.Eg=!0,this.Rg=!0,this.zg=t=>{const i=this.wg.indexOf(t);i>=0&&(this.wg.splice(i,1),this.Vg())},this.D=new zt,this.St.Zo(Gr.Gn),this.Og=i.Ng("pieChart bottom",0),this.Gg=i.Ng("pieChart top",1),this.Sh.Sr("Pie Chart"),this.MA(h,this.xf),this.background.addEventListener("dblclick",(t=>{t.defaultPrevented||(()=>{const t=this.getSlices();for(let i=0;i<t.length;i+=1)t[i].setExploded(!1)})()}));const o=i.$g(),a=gi(n?n.cursorBuilder:void 0,ul);this.Ug=Qa(this,o,a.ag(o,this.uiScale,this.uiScale,ui,this._t),void 0,"show-pointed",_l,(()=>0)),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled))}setCursor(t){return this.Ug.setCursor(t),this}getCursor(){return this.Ug.getCursor()}setCursorMode(t){return this.Ug.setCursorMode(t),this}getCursorMode(){return this.Ug.getCursorMode()}setCustomCursor(t){return this.Ug.setCustomCursor(t),this}setCursorFormatting(t){return this.Ug.setCursorFormatting(t),this}getCursorFormatting(){return this.Ug.getCursorFormatting()}addCursor(t=ul){const i=this.dA(),s=t.ag(i,this.uiScale,this.uiScale,this.nA(i),this._t);return this.SA(s),s}addSlice(t,i){const s=new bl(this.Lg,this.Og,this.Gg,this,this.xf,this.zg,this._t,this.St.vs);this.Lg+=1,s.setName(t);const e=this.ah;return this.ah=!1,s.setValue(i),this.ah=e,s.setEffect(this.Eg),this.Yg(s),this.wg.push(s),this.Vg(),s.setHighlightOnHover(this.Tg),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.wg}setMultipleSliceExplosion(t){return this.Bg=t,this}getMultipleSliceExplosion(){return this.Bg}setInnerRadius(t){return this.Sc=t,this.St.Ls(),this}getInnerRadius(){return this.Sc}setSliceExplosionOffset(t){return this.Dg=t,this.St.Ls(),this}getSliceExplosionOffset(){return this.Dg}setLUT(t){return this.Bd=t,this.St.Ls(),this}setSliceFillStyle(t){this.Cg=t;for(let t=0;t<this.wg.length;t+=1)this.Yg(this.wg[t]);return this.St.Ls(),this}getSliceFillStyle(){return this.Cg}setSliceStrokeStyle(t){this.kg="function"==typeof t?t(this.kg):t;for(let t=0;t<this.wg.length;t+=1)this.Yg(this.wg[t]);return this.St.Ls(),this}getSliceStrokeStyle(){return this.kg}setSliceEffect(t){return this.Eg=t,this.wg.forEach((i=>i.vs.Ss.Ps(t))),this.St.Ls(),this}getSliceEffect(){return this.Eg}setSliceSorter(t){return this._g=t,this.wg=this.wg.sort(this._g),this.St.Ls(),this}getSliceSorter(){return this._g}setLabelFillStyle(t){this.Ig="function"==typeof t?t(this.Ig):t;for(let t=0;t<this.wg.length;t+=1)this.Yg(this.wg[t]);return this.St.Ls(),this}getLabelFillStyle(){return this.Ig}setLabelShadow(t){return this.Pg=t,this.St.Ls(),this}getLabelShadow(){return this.Pg}setLabelFont(t){this.Fg="function"==typeof t?t(this.Fg):t;for(let t=0;t<this.wg.length;t+=1)this.Yg(this.wg[t]);return this.St.Ls(),this}getLabelFont(){return this.Fg}setLabelEffect(t){return this.Rg=t,this.wg.forEach((i=>i.vs.ps.Ps(t))),this.St.Ls(),this}getLabelEffect(){return this.Rg}setLabelFormatter(t){return this.Hg=t,this.St.Ls(),this}getLabelFormatter(){return this.Hg}setSliceHighlightOnHover(t){return this.Tg=t,this.wg.forEach((i=>i.setHighlightOnHover(t))),this}Le(t){super.Le(t),Ya.LA(this.Sh,this._A),super.xA();const i=Ya.PA(this.Sh,this._A),s=r(this.xf.x.getInnerInterval()-(this.nn.left+this.nn.right),this.xf.y.getInnerInterval()-(this.nn.bottom+this.nn.top+i)),e=r(this.nn.left+s.x/2,this.nn.bottom+s.y/2);if(this.Bd){const t=this.Bd;this.wg.forEach((i=>{this.Yg(i,new $({color:t.getColors(i.getAnimatedValue(),void 0)}))}))}for(let t=0;t<this.wg.length;t+=1){const i=this.wg[t].getAnimatedValue()>0;this.wg[t].xg.setVisible(i),this.wg[t].sr.setVisible(i)}this.wg=this.wg.sort(this._g);const h=this.wg.filter((t=>t.getAnimatedValue()>0));let n=0;for(let t=0;t<h.length;t+=1)n+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/n:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.sr.Sr(this.Hg(i,o[t])).hr()}this.Ug.Le(!1,this.wg,((t,i,s)=>{const e=o[h.indexOf(t)]||0,r=this.St.pa(i);return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.St.ot,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.St.ot},slice:t,category:t.getName(),value:t.getValue(),relativeValue:e}})),this.Xg(h,o,e,s)}Yg(t,i=this.Cg(t.index,t)){t.setStyle(i,this.kg,this.Ig,this.Fg,this.Pg)}Vg(){this.wg=this.wg.sort(this._g),this.St.Ls()}Gd(){return this.wg}dispose(){return super.dispose(),this.wg.slice().forEach((t=>t.dispose())),this.Ug.G(),this.Gg.G(),this.Og.G(),this}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const _l=(t,i,s)=>[[{component:i.slice,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:i.value.toString(),font:{weight:"bold"}}]],Cl={UserSeries:{type:"ApplicationType",args:{type:"UserSeries"}},InternalUI:{type:"ApplicationType",args:{type:"InternalUI"}}},kl=(...t)=>{const i=[];return t.forEach((t=>{var s;t&&"object"==typeof(s=t)&&s&&"pattern"in s&&i.push({type:"DataPattern",args:t})})),i};class Tl extends wl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.Hg=pl.NamePlusValue,this.Wg=[],this.jg=40,this.Zg=5,this.Qg=10,this.Jg=this._t.pieChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.Jg=t;for(let t=0;t<this.Wg.length;t+=1)this.Wg[t].Ne(this.Jg);return this.St.Ls(),this}getLabelConnectorStyle(){return this.Jg}setLabelSliceOffset(t){return this.jg=t,this.St.Ls(),this}getLabelSliceOffset(){return this.jg}setLabelConnectorGapStart(t){return this.Zg=t,this.St.Ls(),this}getLabelConnectorGapStart(){return this.Zg}setLabelConnectorEndLength(t){return this.Qg=t,this.St.Ls(),this}getLabelConnectorEndLength(){return this.Qg}Xg(t,i,s,e){const h=this.Fg.getSize(),r=this.jg,n=this.Qg,o=this.Zg,a=Math.min(this.Dg,r-o);let l=0;if(1===t.length)l=t[0].sr.zu().x;else for(let i=0;i<t.length;i+=1)l=Math.max(l,t[i].sr.zu().x);const c=Math.max(.5*(Math.min(e.x-2*l-2*n,e.y-2*h)-2*r),0);if(c<50){const r=Math.max(.5*Math.min(e.x,e.y-2*h),0);Ml(t,i,s,r,this.Sc,a),t.forEach((t=>t.sr.setVisible(!1))),this.Wg.forEach((t=>t.setVisible(!1)))}else{Ml(t,i,s,c,this.Sc,a);let e=90;const h=t.map(((t,h)=>{const o=360*i[h],a=e-o,l=he(se(.5*(e+a))),u=l.x>=0?-1:1,d=js(js(s,Ws(l,c+r)),{x:u*-n,y:0});e=a;const f={x:u,y:0};t.sr.Be(d).ul(f),t.sr.hr();const A=zs(t.sr.Kg());return{position:d,alignment:f,shape:t.sr,boundaries:A,sliceAngleVec:l,slice:t}})),l=[];for(let t=0;t<h.length;t+=1){const i=h[t],s=l[l.length-1];s&&!1!==Fs([s.boundaries,i.boundaries])?i.shape.setVisible(!1):(l.push(i),i.shape.setVisible(!0))}for(let t=0;t<this.Wg.length;t+=1)this.Wg[t].setVisible(!1);l.forEach(((t,i)=>{const e=t.slice.xg,h=xl(e,s,c+o+a*t.slice.getAnimatedExplosion()),r=ie(t.position.y,h,s),n=t.position;this.qg([h,r,n])}))}}getMinimumSize(){return r(500,300)}qg(t){let i;for(let t=0;t<this.Wg.length;t+=1)if(!this.Wg[t].getVisible()){i=this.Wg[t].setVisible(!0);break}void 0===i&&(i=this.Gg.tv(this.xf,void 0,[Cl.InternalUI]).Ne(this.Jg).setPointerEvents(!1),this.Wg.push(i)),i.ti().Dl(t)}}class Fl extends wl{constructor(){super(...arguments),this.Hg=pl.Name,this.sv=.5}Xg(t,i,s,e){const h=this.Dg,r=Math.max(0,.5*Math.min(e.x,e.y)-h);Ml(t,i,s,r,this.Sc,h);for(let i=0;i<t.length;i+=1){const e=t[i],n=e.xg,o=e.sr,a=this.Sc/100,l=((1-a)*this.sv+a)*r+e.getAnimatedExplosion()*h,c=xl(n,s,l);o.Be(c).nl(0).ll(0)}}getMinimumSize(){return r(200,200)}setLabelPosition(t){return this.sv=t,this.St.Ls(),this}getLabelPosition(){return this.sv}}const Il={LabelsOnSides:Tl,LabelsInsideSlices:Fl},Pl=t=>{if(yh(t)){const i=t.getThickness(),s=t.getFillStyle();if(U(s))return 1===i?oh:new lh({size:i,fillStyle:s,shape:"sphere"})}return oh};class Ll{constructor(t,i,s,e,h,r,n,o,a,l){this.S=0,this.ft=!0,this.dt=!1,this.ut=!0,this.D=new zt,this.Ls=t,this.ev=i,this.hv=s,this.rv=e,this.nv=h,this.ov=r,this.Cd=n,this.QA=o,this.av=a,this.Fn=l}setValue(t){return t===this.S||(this.S=t,this.Ls(),this.D.R("valuechange",{value:this.S})),this}getValue(){return this.S}setTickStyle(t){return this.hv="function"==typeof t?t(this.hv):t,this.Ls(),this}getTickStyle(){return this.hv}setTickLength(t){return this.rv=t,this.Ls(),this}getTickLength(){return this.rv}setGridStrokeStyle(t){return this.nv="function"==typeof t?t(this.nv):t,this.Ls(),this}getGridStrokeStyle(){return this.nv}setTextPadding(t){return this.ov=t,this.Ls(),this}getTextPadding(){return this.ov}setTextRotation(t){return this.Cd=t,this.Ls(),this}getTextRotation(){return this.Cd}setTextFillStyle(t){return this.QA="function"==typeof t?t(this.QA):t,this.Ls(),this}getTextFillStyle(){return this.QA}setTextFont(t){return this.av="function"==typeof t?t(this.av):t,this.Ls(),this}getTextFont(){return this.av}setTextFormatter(t){return this.Fn=t,this.Ls(),this}dispose(){return this.dt||(this.dt=!0,this.ev(),this.Ls(),this.D.R("dispose",{})),this}isDisposed(){return this.dt}setVisible(t){const i=this.ft!==t;return this.ft=t,i&&(this.D.R("visiblechange",{isVisible:this.ft}),this.Ls()),this}getVisible(){return this.ft}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.ut=t,this.Ls(),this}getPointerEvents(){return this.ut}}class Bl extends Ll{constructor(t,i,s,e,h,r,n,o,a,l,c,u,d){super(t,i,s,e,h,r,n,o,a,l),this.lv=c,this.cv=u,this.nn=d}setBackgroundFillStyle(t){return this.lv="function"==typeof t?t(this.lv):t,this.Ls(),this}getBackgroundFillStyle(){return this.lv}setBackgroundStrokeStyle(t){return this.cv="function"==typeof t?t(this.cv):t,this.Ls(),this}getBackgroundStrokeStyle(){return this.cv}setPadding(t){return this.nn="number"==typeof t?{left:t,top:t,right:t,bottom:t}:{...this.nn,...t},this.Ls(),this}getPadding(){return this.nn}}class Dl{constructor(t,i,s,e){this.uv=[],this.dv=new Map,this.fv=t,this.Av=i,this.gv=s,this.vv=e}yv(){this.gv&&this.gv();const t=[];return{add:(i,s)=>{t.push({instanceUniqueProperties:i,instanceSharedProperties:s})},finishPlot:()=>{const i=[];let s=[];t.forEach((t=>{const s=i.find((i=>((t,i)=>{const s=Object.keys(t);for(const e of s)if(t[e]!==i[e])return!1;return!0})(i.sharedProperties,t.instanceSharedProperties)));s?s.instances.push(t.instanceUniqueProperties):i.push({sharedProperties:t.instanceSharedProperties,instances:[t.instanceUniqueProperties]})}));const e=this.uv.slice(),h=[];i.forEach((t=>{let i=e.pop();i||(i=this.fv(),this.uv.push(i));const r=[],n=i.pv().slice();t.instances.forEach(((t,i)=>{const s=n.shift();r.push({...t,existingMember:s})}));const o=this.Av(i,r,t.sharedProperties);s=Ui(s,o,{canReturnB:!0});for(let s=0;s<t.instances.length;s+=1)h.push({Mt:t.instances[s].Mt,collection:i,member:o[s]});n.forEach((t=>{null==i||i.Ad(t)}))})),e.forEach((t=>{t.dispose();const i=this.uv.indexOf(t);i<0?Ki(0,(()=>{})):this.uv.splice(i,1)})),h.forEach((t=>{const i=this.dv.get(t.Mt);i&&t.collection.St.ra({entity:i.collection,collectionMember:i.member},{entity:t.collection,collectionMember:t.member})})),this.dv.clear(),h.forEach((t=>{this.dv.set(t.Mt,t)})),this.vv&&this.vv(this.uv,s)}}}mv(){this.uv.forEach((t=>{t.dispose()})),this.uv.length=0}}class El{constructor(t){this.Sv=[],this.bv=t}yv(){return this.xv(),{add:()=>this.Il(),finishPlot:()=>{this.Mv()}}}Il(){let t=this.Sv.find((t=>t.isFree));return t||(t={isFree:!1,shape:this.bv()},this.Sv.push(t)),t.isFree=!1,t.shape}xv(){this.Sv.forEach((t=>{t.isFree=!0}))}Mv(){this.Sv.filter((t=>t.isFree)).forEach((t=>{t.shape.dispose(),this.Sv.splice(this.Sv.indexOf(t),1)}))}mv(){this.Sv.forEach((t=>t.shape.dispose())),this.Sv.length=0}}class Rl extends Tr{constructor(t,i,s,e,h,r,n,o,a){super(t,i,s,e,o,{numeric:i.wv({x:t.St._t.xAxis3DNumericTicks,y:t.St._t.yAxis3DNumericTicks,z:t.St._t.zAxis3DNumericTicks}),datetime:i.wv({x:t.St._t.xAxis3DDateTimeTicks,y:t.St._t.yAxis3DDateTimeTicks,z:t.St._t.zAxis3DDateTimeTicks}),time:i.wv({x:t.St._t.xAxis3DTimeTicks,y:t.St._t.yAxis3DTimeTicks,z:t.St._t.zAxis3DTimeTicks})},{type:"linear"}),this.Zd=[],this.D=new zt,this.chart=t,this._v=h,this.Cv=r,this.kv=n,this.Tv=this._v.ot;const l=this.Lh.wv({x:this._t.xAxis3DStrokeStyle,y:this._t.yAxis3DStrokeStyle,z:this._t.zAxis3DStrokeStyle});this.Fv=this._v.tv([Cl.InternalUI]).Ne(l).Iv(Pl(l)).setPointerEvents(!1),this.Mh=this.Cv.Yr(this.kv).setPointerEvents(!1).Ie(i.wv({x:t.St._t.xAxis3DTitleFillStyle,y:t.St._t.yAxis3DTitleFillStyle,z:t.St._t.zAxis3DTitleFillStyle})).Xh(i.wv({x:t.St._t.xAxis3DTitleFont,y:t.St._t.yAxis3DTitleFont,z:t.St._t.zAxis3DTitleFont})).xa(3),this.Pv=new El((()=>this.Cv.Yr(this.kv).xa(2).Ur(us).$r(us))),this.Lv=new Dl((()=>this.Cv.Bv(this.kv).setPointerEvents(!1).xa(1)),((t,i,s)=>(t.Ie(s.fillStyle).Fe(s.strokeStyle),i.map((({positions:i,existingMember:s})=>{const e=s||t.lo();return e.Hl(i),e}))))),this.Dv=new Dl((()=>this._v.Gf().setPointerEvents(!1)),((t,i,s)=>(t.ti().Ne(s.lineStyle),i.map((({positions:i,existingMember:s})=>s||t.Dl(i)))))),this.vs=a,this.Zh=this.vs.kf([this.Mh]).Ps(e.effectsText),s.gf=this}setTickStrategy(t,i){return super.Rh(t,i)}getTickStrategy(){return this.sh}addCustomTick(){const t=new Bl((()=>this.chart.St.Ls()),(()=>{const i=this.Zd.indexOf(t);i>=0&&this.Zd.splice(i,1)}),this._t.xAxis3DNumericTicks.majorTickStyle.tickStyle,this._t.xAxis3DNumericTicks.majorTickStyle.tickLength,this._t.xAxis3DNumericTicks.majorTickStyle.gridStrokeStyle,this._t.xAxis3DNumericTicks.majorTickStyle.tickPadding,this._t.xAxis3DNumericTicks.majorTickStyle.labelRotation,this._t.xAxis3DNumericTicks.majorTickStyle.labelFillStyle,this._t.xAxis3DNumericTicks.majorTickStyle.labelFont,(t=>this.formatValue(t)),V,Wt,{left:4,right:4,top:4,bottom:4});return this.Zd.push(t),this.chart.St.Ls(),t}setStrokeStyle(t){return this.Fv.Ne(t).Iv(Pl(this.Fv.In())),this.chart.St.Ls(),this}getStrokeStyle(){return this.Fv.In()}setVisible(t){return super.setVisible(t),this.Fv.setVisible(t),!1===t&&(this.Dv.mv(),this.Pv.mv(),this.Lv.mv()),this._v.Ls(),this}Df(){return this.chart.getSeries()}Or(t,i,s){const e=Math.abs(this.ot.J(i-t)*this._v.Ev(1));return{min:t-s*e,max:i+s*e}}lr(t){const i=this.Tv,s=a(i.x.tt(),i.y.tt(),i.z.tt()),{gridlinePositionA:e,gridlinePositionB:h,gridlinePositionC:n}=this.Lh.Rv(t.cameraDirection),o=t=>({x:-1===t.x?this.Tv.x.getInnerStart():1===t.x?this.Tv.x.getInnerEnd():0,y:-1===t.y?this.Tv.y.getInnerStart():1===t.y?this.Tv.y.getInnerEnd():0,z:-1===t.z?this.Tv.z.getInnerStart():1===t.z?this.Tv.z.getInnerEnd():0}),l=o(e),c=o(h),u=o(n),d=this.Lh.Ud,f=Rs(t.start,t.end,.5),A=Ss.addVec(f,Ss.multiplyVec(Ss.multiply(d,-1),s)),g=this._v.zv(f)||r(0,0),v=this._v.zv(A)||r(0,0);return{center:f,wuSize:s,tickDirection3D:d,tickDirection2D:Ys(Zs(ot(g,this.chart.St.ot,this.kv),ot(v,this.chart.St.ot,this.kv))),gridlinePositionA:l,gridlinePositionB:c,gridlinePositionC:u}}Ar(t,i,s,e,h){return{...this.Vv(h,t,i.th.tickLength,i.th.tickPadding),keyValue:t,tickLevel:i,labelText:s,labelOffset:{x:0,y:0},labelRotation:i.th.labelRotation}}br(t,i){const s=new zl(i,t,this.Cv,this.kv,this._v);return s.sr.xa(0),s}yr(t,i){return{ticksInfo:i}}_h(){return this.kv}Vv(t,i,s,e){const{wuSize:h,start:n,end:o,tickDirection3D:a,tickDirection2D:l}=t,c=(i-this.ot.getInnerStart())/(this.ot.getInnerEnd()-this.ot.getInnerStart()),u=Ss.addVec(Rs(n,o,c),Ss.multiplyVec(Ss.multiply(a,this._v.Ev(.5*this.Fv.In().getThickness())),h)),d=Ss.addVec(u,Ss.multiplyVec(Ss.multiply(a,this._v.Ev(s)),h)),f=this._v.zv(d)||r(0,0);return{labelPosition:js(ot(f,this.chart.St.ot,this.kv),Ws(l,e)),labelAlignment:{x:-l.x,y:-l.y},posTickEnd3D:d,posTickStart3D:u,tickPositionRelative:c}}Ov(t,i,s){const{wuSize:e,start:h,end:n,tickDirection3D:o}=i,a=(t-this.ot.getInnerStart())/(this.ot.getInnerEnd()-this.ot.getInnerStart()),l=Ss.addVec(Rs(h,n,a),Ss.multiplyVec(Ss.multiply(o,this._v.Ev(.5*this.Fv.In().getThickness())),e)),c=Ss.addVec(l,Ss.multiplyVec(Ss.multiply(o,this._v.Ev(10)),e)),u=this._v.zv(l)||r(0,0),d=this._v.zv(c)||r(0,0);return this.Cv.Ge(this.kv).Ue(u).$e(d).Ne(new vh({fillStyle:new $({color:b(120*s)}),thickness:1}))}Rr(t,i){return Vl(t,i,this.ot)}Nv(t){const i=this.Tv;let s,e;this.Gv()?(s=a(i.x.getInnerEnd(),i.y.getInnerStart(),i.z.getInnerStart()),e=a(i.x.getInnerEnd(),i.y.getInnerStart(),i.z.getInnerEnd())):(s=a(i.x.getInnerStart(),i.y.getInnerStart(),i.z.getInnerStart()),e=this.Lh.$v(a(i.x.getInnerEnd(),i.y.getInnerEnd(),i.z.getInnerEnd()),s));const h=this._v.zv(s)||r(0,0),n=this._v.zv(e)||r(0,0);return{cameraDirection:t,physicalAxisSize:Xs(Zs(h,n)),start:s,end:e,start2D:h,end2D:n}}Le(t){if(!this.ft)return;const i=Math.min(this.zh,this.Vh),s=Math.max(this.zh,this.Vh);this.Fv.ti().Dl([t.start,t.end]);const e=this.Dv.yv();for(const[i,s]of this.eh)for(const[,h]of s){const s=t.ticksInfo.get(h);if(!s)continue;const r=this.Uv(t,s);e.add({Mt:0,positions:[r.tickStroke.start,r.tickStroke.end]},{lineStyle:i.th.tickStyle}),r.gridStroke&&e.add({Mt:0,positions:r.gridStroke},{lineStyle:i.th.gridStrokeStyle}),h.sr.Be(s.labelPosition).ul(s.labelAlignment).Wh(s.labelRotation).hl(s.labelOffset.x,s.labelOffset.y)}const h=this.Pv.yv(),n=this.Lv.yv(),o={x:0,y:0};this.Zd.forEach((r=>{if(!r.ft||r.S<i||r.S>s)return;const a=this.Vv(t,r.S,r.rv,r.ov),l=this.Uv(t,a);if(r.QA!==V){const t=h.add().Be(a.labelPosition).ul(a.labelAlignment).Ie(r.QA).Xh(r.av).Sr(r.Fn(r.S)).Wh(r.Cd).setPointerEvents(r.ut),i=t.hr().xi();if(o.x=Math.max(o.x,i.x),o.y=Math.max(o.y,i.y),r.lv!==V){const i=t.Kg(),s=[{x:i[0].x-r.nn.left,y:i[0].y+r.nn.top},{x:i[1].x+r.nn.right,y:i[1].y+r.nn.top},{x:i[2].x+r.nn.right,y:i[2].y-r.nn.bottom},{x:i[3].x-r.nn.left,y:i[3].y-r.nn.bottom}];n.add({Mt:0,positions:s},{fillStyle:r.lv,strokeStyle:r.cv})}}e.add({Mt:0,positions:[l.tickStroke.start,l.tickStroke.end]},{lineStyle:r.hv}),l.gridStroke&&e.add({Mt:0,positions:l.gridStroke},{lineStyle:r.nv})})),h.finishPlot(),n.finishPlot(),e.finishPlot();const a=this.Tr(((t,i)=>{const s=i.sr.hr().xi();return t.x=Math.max(t.x,s.x),t.y=Math.max(t.y,s.y),t}),{x:o.x,y:o.y}),l=Math.atan((t.end2D.y-t.start2D.y)/(t.end2D.x-t.start2D.x));this.Mh.ul({x:0,y:0}).Wh(180*-l/Math.PI);const c=Ss.addVec(t.center,Ss.multiplyVec(Ss.multiply(t.tickDirection3D,this._v.Ev(.5*this.Fv.In().getThickness()+this.Ir(((t,i)=>Math.max(t,i.tickLength)),0))),t.wuSize)),u=this._v.zv(c)||r(0,0),d=js(ot(u,this.chart.St.ot,this.kv),js(js(Qs(a,t.tickDirection2D),Ws(t.tickDirection2D,this.Ir(((t,i)=>Math.max(t)),0))),Qs(Ws(this.Mh.hr().xi(),.5),t.tickDirection2D)));this.Mh.Be(d),this.Fv.Yv={overrideFollowing:!1,skipMousePicking:!1}}Uv(t,i){const{gridlinePositionA:s,gridlinePositionB:e,gridlinePositionC:h}=t,r=i.posTickStart3D,n=i.posTickEnd3D,o=i.tickPositionRelative;let a;return di(o,0)||di(o,1)||(a=[this.Hv()?{...s,x:r.x}:this.Xv()?{...s,y:r.y}:this.Gv()?{...s,z:r.z}:{x:0,y:0,z:0},this.Hv()?{...e,x:r.x}:this.Xv()?{...e,y:r.y}:this.Gv()?{...e,z:r.z}:{x:0,y:0,z:0},this.Hv()?{...h,x:r.x}:this.Xv()?{...h,y:r.y}:this.Gv()?{...h,z:r.z}:{x:0,y:0,z:0}]),{gridStroke:a,tickStroke:{start:r,end:n}}}Wv(t){const i=this.zh,s=this.Vh,e=.01*t*(s-i),h=i+e,r=s+e;this.tr(h,r,{allowIntervalLengthChange:!1,skipIntervalRestriction:!1})}jv(t,i,s){if(0===i)return;s<0&&(i*=-1,s*=-1);const e=this.Vh-this.zh,h=e*(i>=1?1+.02*s:1-.02*s)-e;"centered"===t?this.tr(this.zh+h/2,this.Vh-h/2,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1}):"keep-start"===t?this.tr(this.zh,this.Vh-h/2,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1}):"keep-end"===t&&this.tr(this.zh+h/2,this.Vh,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1})}Qh(){super.Qh(),this.Dv.mv(),this.Pv.mv(),this.Lv.mv()}Hv(){return this.Lh.Hv()}Xv(){return this.Lh.Xv()}Gv(){return this.Lh.Gv()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}}class zl extends Fr{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Zv=h}}const Vl=(t,i,s)=>fi(t+.1*(i-t)+Math.abs(s.tt())/100*Math.sign(i-t),Math.min(t,i),Math.max(t,i)),Ol=(t,i,s,e)=>({Pr:()=>{const s=t();let e;for(const t of s){if(!t.Qv())continue;const s=i(t);e=void 0===s?e:void 0!==e?Math.min(e,s):s}return e},Lr:()=>{const i=t();let e;for(const t of i){if(!t.Qv())continue;const i=s(t);e=void 0===i?e:void 0!==e?Math.max(e,i):i}return e},Dr:()=>{const i=t();let s;for(const t of i){if(!t.Qv())continue;const i=e(t);s=void 0===i?s:void 0!==s?Math.max(s,i):i}return s}}),Nl=t=>({...Ol(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.Dr().y)),wv:t=>t.y,$v:(t,i)=>({x:i.x,y:t.y,z:i.z}),Ud:a(-1,0,0),Rv:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:a(i.x,0,i.z),gridlinePositionB:a(i.x,0,-i.z),gridlinePositionC:a(-i.x,0,-i.z)}},Hv:()=>!1,Xv:()=>!0,Gv:()=>!1}),Gl=t=>({...Ol(t,(t=>t.getZMin()),(t=>t.getZMax()),(t=>t.Dr().z)),wv:t=>t.z,$v:(t,i)=>({x:i.x,y:i.y,z:t.z}),Ud:a(1,0,0),Rv:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:a(i.x,-i.y,0),gridlinePositionB:a(i.x,i.y,0),gridlinePositionC:a(-i.x,i.y,0)}},Hv:()=>!1,Xv:()=>!1,Gv:()=>!0});class $l extends Re{constructor(t,i,s,e,h){super(t,i,e,h),this.Jv=ih,this.Kv=!0,this.qv=!0,this.ty=!0,this.chart=t,this._v=s,this.As=new Map}Kt(t,i){const s=null==t?void 0:t.dataPoint;if(s)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.xf,axisLocation:s},...s,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ()}}setCursorEnabled(t){return this.Kv=t,this}getCursorEnabled(){return this.Kv}setCursorFormattingOverride(t){return this.iy=t,this}getCursorFormattingOverride(){return this.iy}BA(){return this.getCursorEnabled()}setAutoScrollingEnabled(t){return this.qv=t,this.chart.St.Ls(),this}getAutoScrollingEnabled(){return this.qv}setColorShadingStyle(t){return this.Jv=t,this.As.forEach(((i,s)=>s.sy(t))),this._v.Ls(),this}getColorShadingStyle(){return this.Jv}setDepthTestEnabled(t){return this.ty=t,this.As.forEach(((i,s)=>s.ey(t))),this._v.Ls(),this}getDepthTestEnabled(){return this.ty}hy(){}Le(){}vv(){}getXMax(){const t=this.vl;return t?t.jt():0}getXMin(){const t=this.vl;return t?t.Wt():0}getYMax(){const t=this.vl;return t?t.Qt():0}getYMin(){const t=this.vl;return t?t.Zt():0}getZMax(){const t=this.vl;return t?t.ny():0}getZMin(){const t=this.vl;return t?t.oy():0}Dr(){const t=this.vl;return t?a(t.Wl(),t.jl(),t.ly()):a(0,0,0)}}class Ul extends $l{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Es="Box Series 3D",this.uy=.25,this.Ay=!1,this.D=new zt,this.Ce=Ji(this._t.boxSeries3DFillStyle,h),this.vl=this._v.vy().ey(this.ty).Ie(this.Ce).gy(this.uy).Bt(this.getHighlight()),this.ws(this.vl)}yy(){return this.Ay}invalidateData(t){const i=t.length;if(0===i)return this;this.Ay&&this.chart.St.Zo(Gr.qn);const s=t[0];if(!s)return this;let e;if("xMin"in s||"yMin"in s||"zMin"in s||"xMax"in s||"yMax"in s||"zMax"in s){e=[];for(let s=0;s<i;s+=1){const i=t[s],h="xMin"in i&&"xMax"in i,r="yMin"in i&&"yMax"in i,n="zMin"in i&&"zMax"in i;e[s]={color:i.color,value:i.value,id:i.id,xCenter:h?(i.xMin+i.xMax)/2:void 0,yCenter:r?(i.yMin+i.yMax)/2:void 0,zCenter:n?(i.zMin+i.zMax)/2:void 0,xSize:h?i.xMax-i.xMin:void 0,ySize:r?i.yMax-i.yMin:void 0,zSize:n?i.zMax-i.zMin:void 0}}}else e=t;return this.vl.py(e.slice()),this.chart.St.Ls(),this.Ay=!0,this}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.vl.Ie(t),this.chart.St.Ls(),this}getFillStyle(){return this.Ce}setRoundedEdges(t){return void 0!==t&&isNaN(t)&&(console.error("'BoxSeries3D.setRoundedEdges | NaN was supplied.'"),t=void 0),this.uy=void 0!==t?fi(t,0,1):void 0,this.vl.gy(this.uy),this._v.Ls(),this}getRoundedEdges(){return this.uy}Qv(){return this.qv&&this.getVisible()}De(t,i){t.Bt(i),this.chart.St.Ls()}Gs(){return ji(this.Ce,this.vl.Tt())}Le(){super.Le(),this.vl.hr(!1)}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Yl extends $l{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Ay=!1,this.D=new zt}yy(){return this.getPointAmount()>0}setStrokeStyle(t){this.Oc="function"==typeof t?t(this.Oc):t;const i=this.Oc;return this.vl.Ne(i),this._v.Ls(),this}getStrokeStyle(){return this.Oc}add(t){return this.Ay&&this.chart.St.Zo(Gr.qn),this.Ay=!0,(t=Array.isArray(t)?t:[t])?(this.vl.Dl(t.slice()),this._v.Ls(),this):this}clear(){return this.vl.ti(),this}getPointAmount(){const t=this.vl;return t.El()+t.Rl()}Qv(){return this.qv&&this.getPointAmount()>0&&this.getVisible()}De(t,i){t.Bt(i),this._v.Ls()}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{stroke:this.Oc})}Gs(){return ji(this.Oc.getFillStyle(),this.vl.Tt())}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Hl extends Yl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Es="Line Series 3D",this.Oc=Ji(e.lineSeries3DStrokeStyle,h),this.my=nn.pointStyle3D,this.Sy(this.Oc),this.vl=this._v.tv([Cl.UserSeries]).ey(this.ty).Ne(this.Oc).Iv(this.my).Bt(this.getHighlight()),this.ws(this.vl)}setStrokeStyle(t){super.setStrokeStyle(t),this.Sy(this.Oc);const i=this.my;return this.vl.Iv(i),this}Sy(t){const i=new Ah.Triangulated({shape:"sphere",fillStyle:t.getFillStyle(),size:t.getThickness()});this.my=i}}class Xl extends Yl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Es="Point Line Series 3D",this.my=Ji(e.pointLineSeries3DPointStyle,h),this.Oc=Ji(e.lineSeries3DStrokeStyle,h),this.by(),this.vl=this._v.tv([Cl.UserSeries]).ey(this.ty).Ne(this.Oc).Iv(this.my).Bt(this.getHighlight()),this.ws(this.vl)}setPointStyle(t){return this.my="function"==typeof t?t(this.my):t,this.by(),this.vl.Iv(this.my),this._v.Ls(),this}getPointStyle(){return this.my}setStrokeStyle(t){super.setStrokeStyle(t);const i=this.Oc,s=Math.abs(i.getThickness()),e=this.my,h=e.getSize();s>("object"==typeof h?Math.max(h.x,h.y,h.z):h)&&(this.my=e.setSize(s)),this.by();const r=this.my;return this.vl.Iv(r),this._v.Ls(),this}Gs(){return ji(this.Oc.getFillStyle(),this.vl.Tt())||ji(this.my.getFillStyle(),this.vl.Tt())}by(){const t=this.my,i=t.getSize();this.my=t.setSize(i)}De(t,i){t.Bt(i),this._v.Ls()}}class Wl extends $l{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.Ay=!1,this.D=new zt,((null==r?void 0:r.individualPointSizeAxisEnabled)||(null==r?void 0:r.individualPointSizeEnabled))&&this.chart.St.Zo(Gr.io)}yy(){return this.getPointAmount()>0}add(t){return this.Ay&&this.chart.St.Zo(Gr.qn),this.Ay=!0,(t=Array.isArray(t)?t:[t])?(this.vl.Dl(t.slice()),this._v.Ls(),this):this}clear(){return this.vl.ti(),this}getPointAmount(){const t=this.vl;return t.El()+t.Rl()}Qv(){return this.qv&&this.getPointAmount()>0&&this.getVisible()}De(t,i){t.Bt(i),this._v.Ls()}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{point3D:this.xy})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class jl extends Wl{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.Es="Point Series 3D";const n=void 0!==(null==r?void 0:r.automaticColorIndex)?r.automaticColorIndex:this.chart.getSeries().length;this.xy=Ji(e.pointSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.vl=this._v.wy(o).ey(this.ty).My(this.xy).Bt(this.getHighlight()),this.ws(this.vl)}setPointStyle(t){this.xy="function"==typeof t?t(this.xy):t;const i=this.xy;return this.vl.My(i),this._v.Ls(),this}getPointStyle(){return this.xy}Gs(){return ji(this.xy.getFillStyle(),this.vl.Tt())}}class Zl extends Wl{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.Es="Point Cloud Series 3D";const n=this.chart.getSeries().length;this.xy=Ji(e.pointCloudSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.vl=this._v.wy(o).My(this.xy).Bt(this.getHighlight()),this.ws(this.vl)}setPointStyle(t){this.xy="function"==typeof t?t(this.xy):t;const i=this.xy;return this.vl.My(i),this._v.Ls(),this}getPointStyle(){return this.xy}Gs(){return ji(this.xy.getFillStyle(),this.vl.Tt())}}const Ql={Triangulated:jl,Pixelated:Zl};class Jl extends Ua{constructor(t,i,s,e,h,r,n,o,a,l,c){super(t,i,s,e,h,r,n,o,a,l,c),this._y=[],this.Cy=0,this.ky=t=>{const i=this._y.indexOf(t);i>=0&&(this._y.splice(i,1),this.D.R("seriesdispose",{series:t}))},this.seriesBackground=new zt,this.Ty=this.vs.kf()}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this._y.forEach((i=>i.setAnimationHighlight(t))),this}Fy(t,i){this.Ty._s([i]),this.seriesBackground.Nt(t)}setSeriesBackgroundFillStyle(t){return this.Iy.Ie(t),this.St.Ls(),this}getSeriesBackgroundFillStyle(){return this.Iy.$h()}setSeriesBackgroundStrokeStyle(t){return this.Py.Fe(t),this.St.Ls(),this}getSeriesBackgroundStrokeStyle(){return this.Py.da()}setSeriesBackgroundEffect(t){return this.Ty.Ps(t),this.St.Ls(),this}getSeriesBackgroundEffect(){return this.Ty.Bs()}Ly(t){this._y.push(t),void 0!==this.By&&t.setHighlightOnHover(this.By),this.D.R("seriesadd",{series:t})}Gd(){return this._y}setSeriesHighlightOnHover(t){return this.By=t,this._y.forEach((i=>i.setHighlightOnHover(t))),this}dispose(){return this._y.slice().forEach(ci),super.dispose()}}const Kl=Ss.normalize({x:-.5610788649579117,y:-.35242840511865414,z:-1.1349149375849081});class ql{constructor(t,i,s,e){this.Dy=!0,this.Ey=!0,this.Ry=2*-Math.PI/2160,this.zy=2*Math.PI/2160,this.Vy=.1,this.Oy=1*Math.PI/180,this.Ny=t,this.Gy=i,this.$y=s,this.zv=e}getDefaultCameraConfiguration(t,i){const s={direction:Kl,location:Ss.multiply(Kl,-1)};return this.cameraLocationChanged({boundingBox:t,cameraDirection:s.direction,cameraLocation:s.location,projection:i})||s}applyCameraInteractions(t,i){let s={direction:t.cameraDirection,location:t.cameraLocation};return i.forEach((t=>{"rotate"===t.type?s=this.Uy(s,t):"wheel-zoom"===t.type?s=this.Yy(s,t):"rotate+zoom"===t.type?s=this.Hy(s,t):"fixed-rotate"===t.type?s=this.Xy(s,t):"move"===t.type&&(s=this.Wy(s,t))})),this.Dy?s=this.jy(t.boundingBox,s):this.Ey&&(s=this.Zy(t.boundingBox,t.projection,s)),s}Uy(t,i){const{rotation:s}=i,e=t.location,h=Ss.multiply(Ss.normalize(t.location),-1),{Right:r,Up:n}=this.Qy(h);let o=e;const a=this.Jy(h),l=s.x*this.Ry*a;o=Ss.rotateAroundAxis(o,n,l);const c=(s.y>0?1:-1)*Math.min(Math.abs(s.y)*this.zy,a-this.Oy);return 0!==c&&(o=Ss.rotateAroundAxis(o,r,c)),{location:o,direction:Ss.multiply(Ss.normalize(o),-1)}}Yy(t,i){const{deltaY:s}=i;this.Dy&&this.Ky(!1);const e=t.location,h=Ss.multiply(Ss.normalize(e),-1),r=s*this.Vy,n=Ss.length(e)*-r;return{direction:h,location:Ss.addVec(e,Ss.multiply(h,n))}}Hy(t,i){const{rotation:s,cameraDistance:e}=i;this.Dy&&this.Ky(!1);let h=this.Uy(t,{type:"rotate",rotation:s});const r=h.location,n=Ss.multiply(Ss.normalize(r),-1),o=Ss.multiply(n,-e);return h={direction:Ss.multiply(Ss.normalize(o),-1),location:o},h}Xy(t,i){this.Dy&&this.Ky(!1);const{rotation:s}=i,e=t.location,h=t.direction,{Right:r,Up:n}=this.Qy(h),o=s.x*this.Ry;let a=Ss.normalize(Ss.rotateAroundAxis(h,n,o));const l=s.y*this.zy;return a=Ss.normalize(Ss.rotateAroundAxis(a,r,l)),{location:e,direction:a}}Wy(t,i){this.Dy&&this.Ky(!1),this.Ey=!1;const{amountRight:s,amountForward:e}=i,h=t.location,r=t.direction,{Right:n}=this.Qy(r);return{location:Ss.addVec(h,Ss.multiply(r,.01*e),Ss.multiply(n,.01*s)),direction:r}}projectionChanged(t,i){return this.viewportChanged(t)}boundingBoxChanged(t){const i={location:t.cameraLocation,direction:Ss.multiply(Ss.normalize(t.cameraLocation),-1)};return this.Dy?this.jy(t.boundingBox,i):this.Zy(t.boundingBox,t.projection,i)}cameraLocationChanged(t){const i={location:t.cameraLocation,direction:Ss.multiply(Ss.normalize(t.cameraLocation),-1)};return this.Dy?this.jy(t.boundingBox,i):this.Zy(t.boundingBox,t.projection,i)}viewportChanged(t){const i={location:t.cameraLocation,direction:Ss.multiply(Ss.normalize(t.cameraLocation),-1)};if(this.Dy)return this.jy(t.boundingBox,i)}jy(t,i,s){let e=i;s=void 0!==s?s:0,e=this.qy(t,e,100,20,1,s,5);const h=this.Jy(e.direction);return e=this.tp(e,this.ip(t,e,100,1),h),e}qy(t,i,s,e,h,r,n){return tc(r,n,(t=>({direction:i.direction,location:Ss.multiply(i.direction,-t)})),(i=>this.sp(t,i)),s,h,"linear",e)}ip(t,i,s,e){const{Right:h,Left:r,Up:n,Down:o}=this.Qy(i.direction),a=this.ep(t,!1,i);let l=i;const c=e,u=.1;return Math.abs(a.bottom-a.top)>c&&(l=a.bottom<a.top?ic(0,u,(t=>({location:l.location,direction:Ss.normalize(Ss.lerp(l.direction,o,t))})),(i=>this.hp(t,i)),0,c,!0,s):ic(0,u,(t=>({location:l.location,direction:Ss.normalize(Ss.lerp(l.direction,n,t))})),(i=>this.hp(t,i)),0,c,!0,s)),Math.abs(a.left-a.right)>c&&(l=a.left<a.right?ic(0,u,(t=>({location:l.location,direction:Ss.normalize(Ss.lerp(l.direction,r,t))})),(i=>this.rp(t,i)),0,c,!0,s):ic(0,u,(t=>({location:l.location,direction:Ss.normalize(Ss.lerp(l.direction,h,t))})),(i=>this.rp(t,i)),0,c,!0,s)),l}sp(t,i){const s=this.ep(t,!0,i);return Math.min(s.left+s.right,s.top+s.bottom)}rp(t,i){const s=this.ep(t,!1,i);return Math.abs(s.left-s.right)}hp(t,i){const s=this.ep(t,!1,i);return Math.abs(s.top-s.bottom)}ep(t,i,s){const e=zs(this.np(t,i,s).map((t=>ot(t,this.Ny,this.Gy))));return{left:e.min.x,right:this.Gy.x.getInnerEnd()-e.max.x,top:this.Gy.y.getInnerEnd()-e.max.y,bottom:e.min.y}}np(t,i,s){const e=this.$y,h=a(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),r=a(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),n=[],o=i?16:4,l=(h.x+r.x)/2,c=(h.z+r.z)/2,u=Math.sqrt(2)*(r.x-l),d=Math.sqrt(2)*(r.z-c);return[h.y,r.y].forEach((t=>{for(let i=0;i<o;i+=1){const s=Math.PI/4+2*Math.PI*i/o,e=l+Math.cos(s)*u,h=c+Math.sin(s)*d;n.push({x:e,y:t,z:h})}})),n.map((t=>this.zv(t,s))).filter((t=>void 0!==t))}Zy(t,i,s){const e=Ss.length(s.location),h=this.op(t,i);return e<h.min?{direction:s.direction,location:Ss.multiply(s.direction,-h.min)}:e>h.max?{direction:s.direction,location:Ss.multiply(s.direction,-h.max)}:s}op(t,i){return{min:("perspective"===i?.8:.5)*Math.sqrt(t.x**2+t.y**2+t.z**2),max:3*Math.sqrt(t.x**2+t.y**2+t.z**2)}}Qy(t){const i=a(0,1,0),s=Ss.normalize(Ss.cross(i,Ss.multiply(t,-1)));let e=Ss.cross(s,t);return e.y=Math.abs(e.y),e=Ss.normalize(e),{Right:s,Up:e,Down:Ss.multiply(e,-1),Left:Ss.multiply(s,-1)}}Jy(t){const i={x:0,y:1,z:0},s=Ss.angle(t,i),e=Ss.angle(t,Ss.multiply(i,-1));return Math.min(s,e)}tp(t,i,s){return{location:Ss.lerp(t.location,i.location,s),direction:Ss.normalize(Ss.lerp(t.direction,i.direction,s))}}Ky(t){return this.Dy=t,this}ap(){return this.Dy}}const tc=(t,i,s,e,h,r,n,o)=>{let a,l=0,c=(i+t)/2;do{const o=s(c);if(a={value:c,result:o,score:e(o)},Math.abs(a.score-h)<=r)break;const u=a.score>h;u&&"linear"===n||!u&&"reversed"===n?(c=(a.value+t)/2,i=a.value):(c=(a.value+i)/2,t=a.value),l+=1}while(l<o);return a.result},ic=(t,i,s,e,h,r,n,o)=>{let a,l=0,c=t;do{const u=s(c),d=e(u);if(void 0===a||Math.abs(d-h)<Math.abs(a.score-h)){if(a={value:c,result:u,score:e(u)},Math.abs(a.score-h)<=r)break}else if(n)break;l+=1,c+=1/(o-1)*(i-t)}while(l<o);return a.result};class sc extends $l{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Es="Surface Grid Series 3D",this.lp={},this.Ay=!1,this.D=new zt,this.Jv=Ke;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.chart.getSeries().length;this.Ce=Ji(this._t.surfaceGridSeries3DFillStyle,n),this.cp=Ji(this._t.surfaceGridSeries3DWireframeStyle,n);const o={heatmapDataType:"intensity",dataOrder:e.dataOrder||"columns",columns:e.columns,rows:e.rows};this.Ko=o,this.vl=this._v.dp(o).Ie(this.Ce).up(this.cp).sy(this.Jv).Bt(this.getHighlight()),this.ws(this.vl),this.setHighlightOnHover(!1)}yy(){return this.Ay}Kt(t,i){const s=null==t?void 0:t.dataPoint;if(s)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.xf,axisLocation:s},...s,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:j(this.Ce)?this.Ce.lut:void 0}}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce})}fp(){const t=this.lp.start||{x:0,z:0};let i;i=this.lp.end?{x:(this.lp.end.x-t.x)/this.Ko.columns,z:(this.lp.end.z-t.z)/this.Ko.rows}:this.lp.step?this.lp.step:{x:1,z:1},this.vl.Ap(t,i),this.chart.St.Ls()}setStart(t){return this.lp.start=t,this.fp(),this}getStart(){return this.vl.gp().start}setStep(t){return this.lp.step=t,this.fp(),this}getStep(){return this.vl.gp().step}setEnd(t){return this.lp.end=t,this.fp(),this}getEnd(){return this.vl.gp().end}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.vl.Ie(this.Ce),this._v.Ls(),this}getFillStyle(){return this.Ce}setWireframeStyle(t){return this.cp="function"==typeof t?t(this.cp):t,this.vl.up(this.cp),this._v.Ls(),this}getWireframeStyle(){return this.vl.vp()}setIntensityInterpolation(t){return t=t||"disabled",this.vl.yp(t),this._v.Ls(),this}getIntensityInterpolation(){return this.vl.pp()}invalidateIntensityValues(t){if(this.Ay&&this.chart.St.Zo(Gr.qn),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Ko.dataOrder?t.length:t[0].length,rows:"rows"===this.Ko.dataOrder?t.length:t[0].length},s="columns"===this.Ko.dataOrder?this.Ko.columns:this.Ko.rows,e="columns"===this.Ko.dataOrder?this.Ko.rows:this.Ko.columns;if(i.x>s||i.y>e){if(!0===this.chart.aA.qo){const t=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.Ko.columns}x${this.Ko.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;ni.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.vl.mp({type:"intensity",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Ko.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Ko.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.Ko.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.Ko.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.Ko.dataOrder?this.Ko.columns:this.Ko.rows)-1,o=("columns"===this.Ko.dataOrder?this.Ko.rows:this.Ko.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.chart.aA.qo){const s=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.Ko.columns}x${this.Ko.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;ni.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),c=Math.max(e-n,0),u=Math.max(r-o,0),d=i.primary-(a+c),f=[];if(0===l&&0===u)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===u?void 0:-u);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),h=Math.max(h,0)}this.vl.mp({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this._v.Ls(),this.Ay=!0,this}invalidateHeightMap(t){if(this.Ay&&this.chart.St.Zo(Gr.qn),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Ko.dataOrder?t.length:t[0].length,rows:"rows"===this.Ko.dataOrder?t.length:t[0].length},s="columns"===this.Ko.dataOrder?this.Ko.columns:this.Ko.rows,e="columns"===this.Ko.dataOrder?this.Ko.rows:this.Ko.columns;if(i.x>s||i.y>e){if(!0===this.chart.aA.qo){const t=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.Ko.columns}x${this.Ko.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;ni.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.vl.Sp({type:"y",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Ko.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Ko.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.Ko.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.Ko.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.Ko.dataOrder?this.Ko.columns:this.Ko.rows)-1,o=("columns"===this.Ko.dataOrder?this.Ko.rows:this.Ko.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.chart.aA.qo){const s=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.Ko.columns}x${this.Ko.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;ni.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),c=Math.max(e-n,0),u=Math.max(r-o,0),d=i.primary-(a+c),f=[];if(0===l&&0===u)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===u?void 0:-u);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),h=Math.max(h,0)}this.vl.Sp({type:"y",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this._v.Ls(),this.Ay=!0,this}setCullMode(t){return this.vl.bp("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.vl.xp()}Gs(){return ji(this.Ce,this.vl.Tt())}hy(){}Le(){}vv(){}Qv(){return this.qv&&this.getVisible()}De(t,i){t.Bt(i),this._v.Ls()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class ec extends $l{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Es="Surface Grid Series 3D",this.Ay=!1,this.lp={},this.D=new zt,this.chart.St.Zo(Gr.qn),this.Jv=Ke;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.chart.getSeries().length;this.Ce=Ji(this._t.surfaceScrollingGridSeries3DFillStyle,n),this.cp=Ji(this._t.surfaceScrollingGridSeries3DWireframeStyle,n);const o={heatmapDataType:"intensity",scrollDimension:e.scrollDimension||"columns",columns:e.columns,rows:e.rows};this.Ko=o,this.vl=this._v.Mp(o).Ie(this.Ce).up(this.cp).sy(this.Jv).Bt(this.getHighlight()),this.ws(this.vl),this.setHighlightOnHover(!1)}yy(){return this.Ay}Kt(t,i){const s=null==t?void 0:t.dataPoint;if(s)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.xf,axisLocation:s},...s,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:j(this.Ce)?this.Ce.lut:void 0}}fp(){const t=this.lp.start||{x:0,z:0};let i;i=this.lp.step?this.lp.step:{x:1,z:1},this.vl.Ap(t,i),this.chart.St.Ls()}setStart(t){return this.lp.start=t,this.fp(),this}getStart(){return this.vl.gp().start}setStep(t){return this.lp.step=t,this.fp(),this}getStep(){return this.vl.gp().step}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.vl.Ie(this.Ce),this._v.Ls(),this}getFillStyle(){return this.Ce}setWireframeStyle(t){return this.cp="function"==typeof t?t(this.cp):t,this.vl.up(this.cp),this._v.Ls(),this}getWireframeStyle(){return this.vl.vp()}setIntensityInterpolation(t){return t=t||"disabled",this.vl.yp(t),this._v.Ls(),this}getIntensityInterpolation(){return this.vl.pp()}clear(){return this.vl.ti(),this._v.Ls(),this}addValues(t){if(!t)return this;let i=t.yValues,s=t.intensityValues;if(!i&&!s)return this;if(i&&0===i.length&&(i=void 0),s&&0===s.length&&(s=void 0),this.Ay=!0,i){const t=i[0].length,s=0+t-1,e="columns"===this.Ko.scrollDimension?this.Ko.rows:this.Ko.columns;if(s>e-1){if(!0===this.chart.aA.qo){const i=`SurfaceScrollingGridSeries3D.addValues input yValues overflow.\nGrid was created with ${e} ${"columns"===this.Ko.scrollDimension?"rows":"columns"}, input yValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;ni.console.warn(i)}const s=[];for(let t=0;t<i.length;t+=1)s[t]=i[t].slice(0,e+1);i=s}}if(s){const t=s[0].length,i=0+t-1,e="columns"===this.Ko.scrollDimension?this.Ko.rows:this.Ko.columns;if(i>e-1){if(!0===this.chart.aA.qo){const i=`SurfaceScrollingGridSeries3D.addValues intensityValues overflow.\nGrid was created with ${e} ${"columns"===this.Ko.scrollDimension?"rows":"columns"}, input intensityValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;ni.console.warn(i)}const i=[];for(let t=0;t<s.length;t+=1)i[t]=s[t].slice(0,e+1);s=i}}if(i&&s){const t=i.length,e=s.length;if(t!==e){if(!0===this.chart.aA.qo){const i=`SurfaceScrollingGridSeries3D.addValues input yValues and intensityValues size does not match.\nyValues: ${t}\nintensityValues: ${e}\nData will be automatically clipped according to the smaller supplied sample. This can result in sub-optimal performance.`;ni.console.warn(i)}t>e?i=i.slice(0,e):s=s.slice(0,t)}}const e=i?i.length:null==s?void 0:s.length,h=i?i[0].length:null==s?void 0:s[0].length;return this.vl.wp({startPrimary:0,startSecondary:0,lengthPrimary:e,lengthSecondary:h,heightMapValues:i,intensityValues:s}),this._v.Ls(),this}invalidateValues(t){return this.vl.mp(t),this.chart.St.Ls(),this}getSampleCount(){return this.vl._p()}setCullMode(t){return this.vl.bp("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.vl.xp()}Gs(){return ji(this.Ce,this.vl.Tt())}hy(){}Le(){}vv(){}Qv(){return this.qv&&this.getVisible()}De(t,i){t.Bt(i),this._v.Ls()}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const hc=t=>!!(t&&"object"==typeof t&&"id"in t&&"chart"in t&&t.chart instanceof yc),rc=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y&&"z"in t&&"number"==typeof t.z),nc=(t,i=/\s+/g)=>Array.from(t.split(i).map(parseFloat)),oc=t=>{if(t.length<=3)return t;const i=new Array;for(let s=1;s<t.length-1;s+=1)i.push(t[0]),i.push(t[s]),i.push(t[s+1]);return i},ac=t=>{const i=t.split(/\s+/g);let s=[],e=[],h=[];for(const t of i){const i=nc(t.trim(),"/");s.push(i[0]),i.length>1&&!Number.isNaN(i[1])&&h.push(i[1]),i.length>2&&!Number.isNaN(i[2])&&e.push(i[2])}return s=oc(s),h=oc(h),e=oc(e),{vertexIndex:s,textureIndex:h||void 0,normalIndex:e||void 0}},lc={id:"",ambient:m(0,0,0,0),diffuse:m(254,204,0),emissive:m(0,0,0,0),specular:m(255,255,255),specularCoeff:1,opacity:1};class cc extends $l{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Es="Mesh Model 3D",this.Cp=new Float32Array,this.kp=new Float32Array,this.Tp=new Uint16Array,this.ot={x:1,y:1,z:1},this.Fp={x:0,y:0,z:0},this.Ip={x:0,y:0,z:0},this.Pp={x:0,y:0,z:0},this.Lp={w:1,x:0,y:0,z:0},this.Bp={x:0,y:0,z:0},this.Dp=new Array,this.Ep=[],this.Sl=ws,this.D=new zt;const n=void 0!==(null==h?void 0:h.automaticColorIndex)?h.automaticColorIndex:this.chart.getSeries().length;this.vl=this._v.Rp().ey(this.ty).Ie(Ji(this._t.meshModel3DFillStyle||this._t.pointSeriesFillStyle,n)).Bt(this.getHighlight()),this.ws(this.vl)}yy(){return this.Cp.length>0}Kt(t,i){const s=this.getFillStyle();return As({series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:j(s)?s.lut:void 0},{cursorPosition:0,index:0,x:0,y:0,z:0,value:0,coordAxis:0,coordModel:0},(()=>{const e=this.vl.zp(t,i);if(e)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.xf,axisLocation:e.coordAxis},...e.coordAxis,index:e.index,value:e.value,coordAxis:e.coordAxis,coordModel:e.coordModel,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:j(s)?s.lut:void 0}}))}setModelGeometry(t){const{indices:i,vertices:s,normals:e}=t;let h=xs,r=bs,n=xs,o=bs,a=xs,l=bs;for(let t=0;t<s.length;t+=3){const i=s[t],e=s[t+1],c=s[t+2];h=Math.max(h,i),r=Math.min(r,i),n=Math.max(n,e),o=Math.min(o,e),a=Math.max(a,c),l=Math.min(l,c)}this.Sl={min:{x:r,y:o,z:l},max:{x:h,y:n,z:a}};for(let t=0;t<s.length;t+=3)s[t]-=this.Sl.min.x,s[t+1]-=this.Sl.min.y,s[t+2]-=this.Sl.min.z;this.Bp={x:this.Sl.max.x-this.Sl.min.x,y:this.Sl.max.y-this.Sl.min.y,z:this.Sl.max.z-this.Sl.min.z},this.Cp=s instanceof Float32Array?s:new Float32Array(s),this.checkedNormals=e&&!Number.isNaN(e[0])?e instanceof Float32Array?e:new Float32Array(e):void 0,this.checkedNormals||this.setColorShadingStyle(Ke);const c=new Array,u={indexStart:0,count:i.length,useIndexBuffer:!0,offset:0,material:{id:lc.id,diffuse:lc.diffuse,specular:lc.specular,ambient:lc.ambient,emissive:lc.emissive,specularCoeff:lc.specularCoeff,opacity:1}};return c.push(u),this.Ep=c,this.vl.Vp({vertices:this.Cp,normals:this.checkedNormals,indices:i instanceof Uint16Array?i:new Uint16Array(i),modelSize:this.Bp,parts:this.Ep}),this.chart.St.Ls(),this}Op(t){if(!t)return this;this.Dp=[];let i={id:lc.id,diffuse:lc.diffuse,specular:lc.specular,ambient:lc.ambient,emissive:lc.emissive,specularCoeff:lc.specularCoeff,opacity:1};const s=t.split("\n");for(let t of s){if(t=t.trim(),""===t||t.startsWith("#"))continue;const s=t.split(/\s+/g);switch(s[0].trim().toLowerCase()){case"ka":{const s=nc(t.substring(2).trim()).map((t=>255*t));i.ambient=m(s[0],s[1],s[2])}break;case"ke":{const s=nc(t.substring(2).trim()).map((t=>255*t));i.emissive=m(s[0],s[1],s[2])}break;case"kd":{const s=nc(t.substring(2).trim()).map((t=>255*t));i.diffuse=m(s[0],s[1],s[2])}break;case"ks":{const s=nc(t.substring(2).trim()).map((t=>255*t));i.specular=m(s[0],s[1],s[2])}break;case"d":i.opacity=parseFloat(s[1].trim());break;case"tr":i.opacity=1-parseFloat(s[1].trim());break;case"newmtl":i.diffuse=m(255*i.diffuse.r,255*i.diffuse.g,255*i.diffuse.b,255*i.opacity),i.specular=m(255*i.specular.r,255*i.specular.g,255*i.specular.b,255*i.opacity),i.emissive=m(255*i.emissive.r,255*i.emissive.g,255*i.emissive.b,255*i.opacity),i={id:s[1],diffuse:lc.diffuse,specular:lc.specular,ambient:lc.ambient,emissive:lc.emissive,specularCoeff:lc.specularCoeff,opacity:lc.opacity},this.Dp.push(i)}}return this}setModelMaterial(t){return t?(this.Op(t),this.setFillStyle(V),this.Ep?(this.Ep.forEach((t=>{const i=this.Dp.find((i=>i.id.toLowerCase()===t.material.id.toLowerCase()));i&&(t.material=i)})),this.Ep.sort(((t,i)=>i.material.opacity-t.material.opacity)),this.chart.St.Ls(),this):this):this}setModelFromObj(t){if(!t)return this;const i=new Array,s=new Array,e=new Array,h=new Array,r=new Array,n=new Array,o=new Array;let a={indexStart:0,count:0,offset:0,useIndexBuffer:!1,material:{id:lc.id,diffuse:lc.diffuse,specular:lc.specular,ambient:lc.ambient,emissive:lc.emissive,specularCoeff:lc.specularCoeff,opacity:lc.opacity}},l=0,c=0,u=0,d=0,f=0,A=0,g=0,v=xs,y=bs,p=xs,m=bs,S=xs,b=bs;const x=t.replace(/\r/g,"").split("\n");for(let t of x){if(t=t.trim(),""===t||t.startsWith("#"))continue;const x=t.split(/\s+/g);let M=0;switch(x[0].trim().toLowerCase()){case"v":{const s=nc(t.substring(1).trim()),e=s[0],h=s[1],r=s[2];v=Math.max(v,e),y=Math.min(y,e),p=Math.max(p,h),m=Math.min(m,h),S=Math.max(S,r),b=Math.min(b,r),i.push(...s.slice(0,3)),l+=1,d=l}break;case"vt":{const i=nc(t.substring(2).trim());s.push(...i),c+=1,f=c}break;case"vn":{const i=nc(t.substring(2).trim());e.push(...i),u+=1,A=u}break;case"usemtl":{const t=this.Dp.find((t=>t.id.toLowerCase()===x[1].toLowerCase()));g+=o.length>0?a.count:0,a={indexStart:void 0!==a?3*g*2:0,count:0,offset:void 0!==a?1*g:0,useIndexBuffer:!1,material:t||{id:x[1].toLowerCase(),diffuse:lc.diffuse,specular:lc.specular,ambient:lc.ambient,emissive:lc.emissive,specularCoeff:1,opacity:1}},o.push(a)}break;case"fo":M+=1;case"f":M+=1;{const o=ac(t.substring(M).trim());for(let t=0;t<o.vertexIndex.length;t+=1){let s=o.vertexIndex[t];s<0?s+=d:s-=1,s*=3,h.push(i[s]),h.push(i[s+1]),h.push(i[s+2])}if(a.count+=o.vertexIndex.length,o.textureIndex)for(let t=0;t<o.textureIndex.length;t+=1){let i=o.textureIndex[t];i<0?i+=f:i-=1,i*=3,n.push(s[i]),n.push(s[i+1]),n.push(s[i+2])}if(o.normalIndex)for(let t=0;t<o.normalIndex.length;t+=1){let i=o.normalIndex[t];i<0?i+=A:i-=1,i*=3,r.push(e[i]),r.push(e[i+1]),r.push(e[i+2])}}}}this.Sl={min:{x:y,y:m,z:b},max:{x:v,y:p,z:S}};for(let t=0;t<h.length;t+=3)h[t]-=this.Sl.min.x,h[t+1]-=this.Sl.min.y,h[t+2]-=this.Sl.min.z;if(this.Bp={x:this.Sl.max.x-this.Sl.min.x,y:this.Sl.max.y-this.Sl.min.y,z:this.Sl.max.z-this.Sl.min.z},o.length<1&&h.length>0&&(a.count=h.length/3,o.push(a)),this.Ep=o,this.Cp=new Float32Array(h),r.length<1)for(let t=0;t<h.length/9;t+=1){const i={x:h[9*t],y:h[9*t+1],z:h[9*t+2]},s={x:h[9*t+3],y:h[9*t+4],z:h[9*t+5]},e={x:h[9*t+6],y:h[9*t+7],z:h[9*t+8]},n=Ss.normalize(Ss.cross(Ss.subtractVec(i,s),Ss.subtractVec(i,e)));for(let t=0;t<3;t+=1)r.push(n.x),r.push(n.y),r.push(n.z)}return this.kp=new Float32Array(r.map(((t,i)=>r[i]))),this.checkedNormals=new Float32Array,this.Dp&&this.Ep.sort(((t,i)=>i.material.opacity-t.material.opacity)),this.vl.Vp({vertices:this.Cp,normals:this.kp,indices:this.Tp,modelSize:this.Bp,parts:this.Ep}),this.chart.St.Ls(),this}setVertexValues(t){return this.vl.Np(t),this.chart.St.Ls(),this}setScale(t){const i={x:"number"==typeof t?t:(null==t?void 0:t.x)||1,y:"number"==typeof t?t:(null==t?void 0:t.y)||1,z:"number"==typeof t?t:(null==t?void 0:t.z)||1};return this.ot=i,this.vl.Gp(i),this.chart.St.Ls(),this}getScale(){return this.ot}setModelLocation(t){return this.Ip=t,this.vl.$p(t),this.chart.St.Ls(),this}getModelLocation(){return this.Ip}setModelAlignment(t){return this.Fp=t,this.vl.Yp(t),this.chart.St.Ls(),this}getModelAlignment(){return this.Fp}setModelRotation(t){return this.setModelRotationEuler(t)}getModelRotation(){return this.Pp}setModelRotationEuler(t){const i={x:se(t.x),y:se(t.y),z:se(t.z)};return this.Pp=i,this.vl.Hp(this.Pp),this.chart.St.Ls(),this}getModelRotationEuler(){return this.Pp}setModelRotationQuaternion(t){return this.Lp=t,this.vl.Xp(this.Lp),this.chart.St.Ls(),this}getModelRotationQuaternion(){return this.Lp}setBackfaceCullingMode(t){return this.vl.Wp(t),this.chart.St.Ls(),this}getBackfaceCullingMode(){return this.vl.jp()}setFillStyle(t){return this.vl.Ie(t),this.chart.St.Ls(),this}getFillStyle(){return this.vl.$h()}setColorShadingStyle(t){return this.checkedNormals||t!==ih?super.setColorShadingStyle(t):(console.warn("Phong shading style is not supported without normals. Switching to Simple shading style."),super.setColorShadingStyle(new sh.Simple))}Qv(){return!1}De(t,i){t.Bt(i),this.chart.St.Ls()}Gs(){return ji(this.getFillStyle(),this.vl.Tt())}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.getFillStyle()})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class uc extends hl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r),this.chart=n,this.Zp=this.chart.getDefaultAxisX().addCustomTick().setVisible(!1).setGridStrokeStyle(r.cursor3DGridStrokeStyleX).setTickStyle(r.cursor3DTickStrokeStyleX).setTextFillStyle(r.cursor3DTickLabelFillStyleX).setTextFont(r.cursor3DTickLabelFontX).setBackgroundFillStyle(r.cursor3DTickLabelBackgroundFillStyleX).setBackgroundStrokeStyle(r.cursor3DTickLabelBackgroundStrokeStyleX).setPadding(r.cursor3DTickLabelPaddingX),this.Qp=this.chart.getDefaultAxisY().addCustomTick().setVisible(!1).setGridStrokeStyle(r.cursor3DGridStrokeStyleY).setTickStyle(r.cursor3DTickStrokeStyleY).setTextFillStyle(r.cursor3DTickLabelFillStyleY).setTextFont(r.cursor3DTickLabelFontY).setBackgroundFillStyle(r.cursor3DTickLabelBackgroundFillStyleY).setBackgroundStrokeStyle(r.cursor3DTickLabelBackgroundStrokeStyleY).setPadding(r.cursor3DTickLabelPaddingY),this.Jp=this.chart.getDefaultAxisZ().addCustomTick().setVisible(!1).setGridStrokeStyle(r.cursor3DGridStrokeStyleZ).setTickStyle(r.cursor3DTickStrokeStyleZ).setTextFillStyle(r.cursor3DTickLabelFillStyleZ).setTextFont(r.cursor3DTickLabelFontZ).setBackgroundFillStyle(r.cursor3DTickLabelBackgroundFillStyleZ).setBackgroundStrokeStyle(r.cursor3DTickLabelBackgroundStrokeStyleZ).setPadding(r.cursor3DTickLabelPaddingZ)}setTickX(t){return t(this.Zp),this.chart.St.Ls(),this}setTickY(t){return t(this.Qp),this.chart.St.Ls(),this}setTickZ(t){return t(this.Jp),this.chart.St.Ls(),this}setTicks(t){return t(this.Zp),t(this.Qp),t(this.Jp),this.chart.St.Ls(),this}dispose(){return super.dispose(),this.Zp.dispose(),this.Qp.dispose(),this.Jp.dispose(),this}Le(){return this.Zp.setVisible(this.ft&&this.sA),this.Qp.setVisible(this.ft&&this.sA),this.Jp.setVisible(this.ft&&this.sA),super.Le()}setPosition(t){this.sA=!0;const i=this.renderingScale,s=za(t.resultTableScale,i),e=s===this.scale?t.resultTable:ot(t.resultTable,s,this.scale);this.NA.setPosition(e),this.Zp.setValue(t.axisLocation.x),this.Qp.setValue(t.axisLocation.y),this.Jp.setValue(t.axisLocation.z);let h=this.KA[0];if(!h){const t=new eo(this.Ys,this.renderingScale,this.scale,ui,this._t).setPointerEvents(!1).setFillStyle(this._t.cursorPointMarkerFillStyle).setSize(this._t.cursorPointMarkerSize).setShape(this._t.cursorPointMarkerShape);h={pointMarker:t,targetVisible:!0},this.KA.push(h),this.ig.forEach((i=>i(t)))}return h.pointMarker.setPosition(e),this.chart.St.Ls(),this}}class dc{constructor(t,i){this.ng=[],this.og=(t,i)=>(this.ng.forEach((s=>s(t,i))),t),this.addStyler=t=>new dc(this.eg,this.ng.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new dc(t,this.ng.map((t=>t))),this.ag=(t,i,s,e,h,r)=>this.og(new uc(t,i,s,e,this.eg,h,r),h),this.eg=t,this.ng=i}}const fc=new dc(qn,[(t,i)=>{rl(t,i)}]),Ac=(t,i,s,e)=>{t.background.addEventListener(i,s,e),t.seriesBackground.addEventListener(i,s,e),t.getSeries().forEach((t=>t.addEventListener(i,s,e)));const h=t=>t.series.addEventListener(i,s,e);return t.addEventListener("seriesadd",h),()=>{t.background.removeEventListener(i,s),t.seriesBackground.removeEventListener(i,s),t.getSeries().forEach((t=>t.removeEventListener(i,s))),t.removeEventListener("seriesadd",h)}},gc=(t,i,s,e)=>{var h,r,n,o,a,l;ms(),i.camera&&s.Kp(),i.x&&t.axisX.fit(null!==(h=i.animationsEnabled)&&void 0!==h?h:void 0,null!==(r=i.stopScroll)&&void 0!==r?r:void 0),i.y&&t.axisY.fit(null!==(n=i.animationsEnabled)&&void 0!==n?n:void 0,null!==(o=i.stopScroll)&&void 0!==o?o:void 0),i.z&&t.axisZ.fit(null!==(a=i.animationsEnabled)&&void 0!==a?a:void 0,null!==(l=i.stopScroll)&&void 0!==l?l:void 0);const c=t.engine.setMouseStyle(tr.ZoomOut);ni.setTimeout((()=>{t.engine.restoreMouseStyle(c)}),500);const u=i.on;u&&ni.requestAnimationFrame((()=>u({event:e})))},vc=(t,i,s,e)=>{ms(),t.restorePreviousZoomState();const h=i.on;h&&ni.requestAnimationFrame((()=>h({event:e})))};class yc extends Jl{constructor(t,i,s,e,h,n,o){var l;super(t,i,s,i.wA("chart3D bg",0),e,i.St._t.chart3DBackgroundFillStyle,i.St._t.chart3DBackgroundStrokeStyle,i.St._t.chart3DTitleFont,i.St._t.chart3DTitleFillStyle,i.St._t.chart3DTitleShadow,n),this.qp=1,this.tm=[],this.im=2,this.sm=!0,this.hm=!0,this.rm=!0,this.nm=0,this.coordsAxis={id:"axes",chart:this},this.coordsWorld={id:"world",chart:this},this.To=[],this.om=[],this.am=!1,this.lm=()=>{if(this.dt)return;const t=new Map;this.forEachAxis((i=>{void 0!==i.Df().find((t=>t.yy()))&&t.set(i,{...i.getInterval(),stopped:i.getStopped()})})),t.size<=0||(this.om.push(t),this.om.length>100&&this.om.shift())},this.Vo=()=>{const t=this._v.um();this.fm.dm(t),this.Am.dm(t);const i=this.gm.viewportChanged(this.vm());i&&this.ym(i),this.St.Ls()},this.D=new zt,this.St.Zo(Gr.Hn),this.Sh.Sr("Chart3D"),this.pm=s.d3(),this.pm.x.W(-1,1),this.pm.y.W(-1,1),this.pm.z.W(-1,1),this._v=i.Sm("chart3D layer3D",0,this.pm),this.fm=i.bm("chart3D series bg",0),this.Am=i.Ng("chart3D axis ui",1),this.xm={x:new Rl(this,(l=()=>this._y,{...Ol(l,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.Dr().x)),wv:t=>t.x,$v:(t,i)=>({x:t.x,y:i.y,z:i.z}),Ud:a(0,-1,0),Rv:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:a(0,i.y,i.z),gridlinePositionB:a(0,i.y,-i.z),gridlinePositionC:a(0,-i.y,-i.z)}},Hv:()=>!0,Xv:()=>!1,Gv:()=>!1}),this.pm.x,this._t,this._v,this.Am,this.xf,!1,this.vs),y:new Rl(this,Nl((()=>this._y)),this.pm.y,this._t,this._v,this.Am,this.xf,!1,this.vs),z:new Rl(this,Gl((()=>this._y)),this.pm.z,this._t,this._v,this.Am,this.xf,!1,this.vs)},this.Mm=this._v.tv([Cl.InternalUI]).setPointerEvents(!1),this.setBoundingBoxStrokeStyle(this._t.chart3DBoundingBoxStrokeStyle),this.Iy=this.fm.Qc(this.St.ot,Fn.Simple).Ie(this._t.chart3DSeriesBackgroundFillStyle).Fe(Wt).setPointerEvents(!0),this.Py=this.fm.Qc(this.St.ot,Fn.Simple).Ie(V).Fe(this._t.chart3DSeriesBackgroundStrokeStyle).setPointerEvents(!1),super.Fy(this.Iy,this.Py),this.wm({x:1,y:1,z:1},!0),this.gm=new ql(this.St.ot,this.xf,this.pm,((t,i)=>(i&&this.ym(i),this._v.zv(t)))),this._m=this.gm.getDefaultCameraConfiguration(this.Cm(this.km),this.getProjection()),this.ym(this._m);const c=gi(o?o.cursorBuilder:void 0,fc),u=i.$g();this.Ug=Qa(this,u,c.ag(u,this.xf,this.xf,ui,this._t,this),this,"show-pointed",pc,(()=>0)),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled)),this.addEventListener("resize",this.Vo),this.Vo(),this.MA(h,this.xf),this.Tm=(t=>{let i=!1,s=!1,e=!1;const h=(t=>{let i=!0,s=t.getCameraLocation(),e=t.getCameraAutomaticFittingEnabled();return{Fm:()=>{i&&(s=t.getCameraLocation(),e=t.getCameraAutomaticFittingEnabled()),i=!1},Kp:()=>{t.setCameraLocation(s).setCameraAutomaticFittingEnabled(e),i=!0}}})(t);let n={};const o=()=>hi({rotate:{drag:{},ctrl:{drag:!1},shift:{drag:!1},alt:{drag:!1}},zoom:{wheel:{},camera:!0,mode:"centered",pinch:{camera:!1,x:!0,y:!0,z:!0}},restoreDefault:{doubleClick:!0,camera:!0,x:!0,y:!0,z:!0},restorePrevious:!1},n),a=r=>{const n=o();let a=!1,l=!1,c=!1;for(const t of Object.keys(n)){const i=n[t];"object"==typeof i&&(void 0!==i.ctrl&&(a=!0),void 0!==i.shift&&(l=!0),void 0!==i.alt&&(c=!0))}s=r.ctrlKey,i=r.shiftKey,e=r.altKey,("Control"===r.key&&a||"Shift"===r.key&&l||"Alt"===r.key&&c)&&r.preventDefault();const u=Te(n.restoreDefault,void 0,r,i,s,e);u&&u.code===r.code&&(Bi(r),gc(t,u,h,r));const d=Te(n.restorePrevious,void 0,r,i,s,e);d&&d.code===r.code&&(Bi(r),vc(t,d,0,r))},l=t=>{s=t.ctrlKey,i=t.shiftKey,e=t.altKey},c=()=>{s=!1,i=!1,e=!1};ni.addEventListener("keydown",a),ni.addEventListener("keyup",l),ni.addEventListener("blur",c),t.addEventListener("dispose",(()=>{ni.removeEventListener("keydown",a),ni.removeEventListener("keyup",l),ni.removeEventListener("blur",c)}));const u=t=>{},d=n=>{const a=Fe(!1!==t.St.Ko.qo),l=o(),c=Te(l.rotate,"drag",n,i,s,e),u=Te(l.pan,"drag",n,i,s,e);u&&a.push((()=>((t,i,s,e)=>{const h=t.getCursorMode();t.setCursorMode(void 0);let r=i;"mouse"===i.pointerType&&i.preventDefault();const n=e=>{var h,n,o;if(e.pointerId!==i.pointerId)return;Bi(e);const a=e.clientX-r.clientX,l=e.clientY-r.clientY;if(r=e,s&&s.x){const i=a+-l;t.axisX.Wv(-Math.sign(i)*(null!==(h=s.sensitivity)&&void 0!==h?h:1)),!1!==s.stopScroll&&t.axisX.setStopped(!0)}if(s&&s.y){const i=-a+l;t.axisY.Wv(Math.sign(i)*(null!==(n=s.sensitivity)&&void 0!==n?n:1)),!1!==s.stopScroll&&t.axisY.setStopped(!0)}if(s&&s.z){const i=-a+l;t.axisZ.Wv(Math.sign(i)*(null!==(o=s.sensitivity)&&void 0!==o?o:1)),!1!==s.stopScroll&&t.axisZ.setStopped(!0)}const c=null==s?void 0:s.on;c&&ni.requestAnimationFrame((()=>c({event:e})))},o=s=>{s.pointerId===i.pointerId&&(Bi(s),t.setCursorMode(h),ni.removeEventListener("pointermove",n),ni.removeEventListener("pointerup",o),t.engine.container.removeEventListener("pointerdown",a),e())},a=s=>{s.pointerId!==i.pointerId&&(t.setCursorMode(h),ni.removeEventListener("pointermove",n),ni.removeEventListener("pointerup",o),t.engine.container.removeEventListener("pointerdown",a),e())};ni.addEventListener("pointermove",n),ni.addEventListener("pointerup",o),t.engine.container.addEventListener("pointerdown",a),ms()})(t,n,u,f()))),c&&a.push((()=>((t,i,s,e,h)=>{const r=t.getCursorMode();t.setCursorMode(void 0);let n=i,o=!1,a=0;"mouse"===i.pointerType&&i.preventDefault();const l=e=>{var r,l;if(e.pointerId!==i.pointerId)return;Bi(e);const c={x:e.clientX-n.clientX,y:e.clientY-n.clientY};n=e,a+=Xs(c),h.Fm(),t.Im({x:c.x*(null!==(r=s.sensitivity)&&void 0!==r?r:1),y:-c.y*(null!==(l=s.sensitivity)&&void 0!==l?l:1)}),o||(ps(),o=!0);const u=s.on;u&&ni.requestAnimationFrame((()=>u({event:e})))},c=s=>{s.pointerId===i.pointerId&&(Bi(s),t.setCursorMode(r),ni.removeEventListener("pointermove",l),ni.removeEventListener("pointerup",c),t.engine.container.removeEventListener("pointerdown",u),e(),a>=10&&ys("click"))},u=s=>{s.pointerId!==i.pointerId&&(t.setCursorMode(r),ni.removeEventListener("pointermove",l),ni.removeEventListener("pointerup",c),t.engine.container.removeEventListener("pointerdown",u),e())};ni.addEventListener("pointermove",l),ni.addEventListener("pointerup",c),t.engine.container.addEventListener("pointerdown",u),ms()})(t,n,c,f(),h)));const d=Te(l.zoom,"drag",n,i,s,e);d&&a.push((()=>((t,i,s,e,h)=>{const r=t.getCursorMode();t.setCursorMode(void 0);let n=i;"mouse"===i.pointerType&&i.preventDefault();const o=e=>{var r,o,a,l,c,u,d;if(e.pointerId!==i.pointerId)return;Bi(e);const f=e.clientX-n.clientX,A=e.clientY-n.clientY;if(n=e,s.x){const i=f+-A;t.axisX.jv(null!==(r=s.mode)&&void 0!==r?r:"centered",Math.sign(i),null!==(o=s.sensitivity)&&void 0!==o?o:1),!1!==s.stopScroll&&t.axisX.setStopped(!0)}if(s.y){const i=-f+A;t.axisY.jv(null!==(a=s.mode)&&void 0!==a?a:"centered",-Math.sign(i),null!==(l=s.sensitivity)&&void 0!==l?l:1),!1!==s.stopScroll&&t.axisY.setStopped(!0)}if(s.z){const i=-f+A;t.axisZ.jv(null!==(c=s.mode)&&void 0!==c?c:"centered",-Math.sign(i),null!==(u=s.sensitivity)&&void 0!==u?u:1),!1!==s.stopScroll&&t.axisZ.setStopped(!0)}if(s.camera){const i=f+-A;h.Fm(),t.Pm(-.15*Math.sign(i)*(null!==(d=s.sensitivity)&&void 0!==d?d:1))}const g=s.on;g&&ni.requestAnimationFrame((()=>g({event:e})))},a=s=>{s.pointerId===i.pointerId&&(Bi(s),t.setCursorMode(r),ni.removeEventListener("pointermove",o),ni.removeEventListener("pointerup",a),t.engine.container.removeEventListener("pointerdown",l),e())},l=i=>{t.setCursorMode(r),ni.removeEventListener("pointermove",o),ni.removeEventListener("pointerup",a),t.engine.container.removeEventListener("pointerdown",l),e()};ni.addEventListener("pointermove",o),ni.addEventListener("pointerup",a),t.engine.container.addEventListener("pointerdown",l),ms()})(t,n,d,f(),h))),a.end();const A=Te(l.rotate,"pinch",n,i,s,e),g=Te(l.pan,"pinch",n,i,s,e),v=Te(l.zoom,"pinch",n,i,s,e);(A||v||g)&&((t,i,s,e,h,n,o)=>{if(!s&&!e&&!h)return;const a=c=>{if(c.pointerId===i.pointerId)return;const u=n();let d;t.engine.container.removeEventListener("pointerdown",a),ni.removeEventListener("pointerup",l);let f,A=c;const g=c,v=t.getCursorMode();t.setCursorMode(void 0);const y=t.getCameraLocation();let p,m,S;const b=[],x=()=>{var n,a,l,u,v,x,w,_;M=void 0;const C=d,k=A;if(b.forEach((t=>{t.pointerId===i.pointerId?d=t:t.pointerId===c.pointerId&&(A=t)})),b.length=0,f=f||d,void 0===d||void 0===C||void 0===f)return;if(!m||!S){const i=t=>{for(;t<0;)t+=360;for(;t>360;)t-=360;return t},s=(s,e)=>{const h=t._v.zv(s),r=t._v.zv(e);if(!h||!r)return{deg:-1,dir:{x:0,y:0}};const n=t.St.ma({engineX:h.x,engineY:h.y}),o=t.St.ma({engineX:r.x,engineY:r.y});return{deg:i(ee(Zs(r,h))),dir:Ys(Zs({x:o.clientX,y:o.clientY},{x:n.clientX,y:n.clientY}))}},e=t.axisX.getInterval(),h=t.axisY.getInterval(),r=t.axisZ.getInterval(),n={x:s({x:e.start,y:h.start,z:r.start},{x:e.end,y:h.start,z:r.start}),y:s({x:e.start,y:h.start,z:r.start},{x:e.start,y:h.end,z:r.start}),z:s({x:e.end,y:h.start,z:r.start},{x:e.end,y:h.start,z:r.end})},o=t.St.pa(f),a=t.St.pa(g),l=i(ee(Zs({x:a.engineX,y:a.engineY},{x:o.engineX,y:o.engineY})));m=["x","y","z"].reduce(((t,s)=>{const e=Math.abs(n[s].deg-l),h=Math.abs(i(n[s].deg+180)-l),r=Math.min(e,h);return Math.min(r,h)<t.angleDiff?{angleDiff:r,axis:s}:t}),{axis:"x",angleDiff:1e3}).axis,S=n[m].dir}const T=d.clientX-C.clientX,F=d.clientY-C.clientY,I=A.clientX-k.clientX,P=A.clientY-k.clientY,L=Math.sqrt((f.clientX-g.clientX)**2+(f.clientY-g.clientY)**2),B=Math.sqrt((d.clientX-A.clientX)**2+(d.clientY-A.clientY)**2),D=Ss.length(y),E=L/B*(null!==(n=null==h?void 0:h.sensitivity)&&void 0!==n?n:1)*D,R=r((null!==(a=null==s?void 0:s.sensitivity)&&void 0!==a?a:1)*(T+I)/2,(null!==(l=null==s?void 0:s.sensitivity)&&void 0!==l?l:1)*-(F+P)/2);o.Fm(),(s||(null==h?void 0:h.camera))&&(t.tm.push({type:"rotate+zoom",rotation:s?R:{x:0,y:0},cameraDistance:(null==h?void 0:h.camera)?E:D}),t.St.Ls());const z=void 0===p?0:B-Xs(p)?1:-1,V=p?.25*(null!==(u=null==h?void 0:h.sensitivity)&&void 0!==u?u:1)*(B-Xs(p)):0;h&&h.x&&("x"===m||void 0===h.y&&void 0===h.z)&&(t.axisX.jv(null!==(v=h.mode)&&void 0!==v?v:"centered",z,V),!1!==h.stopScroll&&t.axisX.setStopped(!0)),h&&h.y&&("y"===m||void 0===h.x&&void 0===h.z)&&(t.axisY.jv(null!==(x=h.mode)&&void 0!==x?x:"centered",z,V),!1!==h.stopScroll&&t.axisY.setStopped(!0)),h&&h.z&&("z"===m||void 0===h.x&&void 0===h.y)&&(t.axisZ.jv(null!==(w=h.mode)&&void 0!==w?w:"centered",z,V),!1!==h.stopScroll&&t.axisZ.setStopped(!0));const O=(C.clientX+k.clientX)/2,N=(C.clientY+k.clientY)/2,G={x:(d.clientX+A.clientX)/2-O,y:(d.clientY+A.clientY)/2-N},$=qs(Ys(G),S),U=Xs(G)*$*.3*(null!==(_=null==e?void 0:e.sensitivity)&&void 0!==_?_:1);e&&e.x&&("x"===m||void 0===e.y&&void 0===e.z)&&(t.axisX.Wv(-U),!1!==e.stopScroll&&t.axisX.setStopped(!0)),e&&e.y&&("y"===m||void 0===e.x&&void 0===e.z)&&(t.axisY.Wv(-U),!1!==e.stopScroll&&t.axisY.setStopped(!0)),e&&e.z&&("z"===m||void 0===e.x&&void 0===e.y)&&(t.axisZ.Wv(-U),!1!==e.stopScroll&&t.axisZ.setStopped(!0)),p={x:Math.abs(d.clientX-A.clientX),y:Math.abs(d.clientY-A.clientY)};const Y=(null==e?void 0:e.on)||(null==s?void 0:s.on)||(null==h?void 0:h.on);Y&&ni.requestAnimationFrame((()=>Y({event:void 0})))};let M;const w=t=>{t.pointerId!==i.pointerId&&t.pointerId!==c.pointerId||(Bi(t),b.push(t),M||(M=ni.requestAnimationFrame(x)))},_=s=>{s.pointerId!==i.pointerId&&s.pointerId!==c.pointerId||(Bi(s),t.setCursorMode(v),ni.removeEventListener("pointermove",w),ni.removeEventListener("pointerup",_),u(),M&&ni.cancelAnimationFrame(M))};ni.addEventListener("pointermove",w),ni.addEventListener("pointerup",_),ms()},l=s=>{s.pointerId===i.pointerId&&(t.engine.container.removeEventListener("pointerdown",a),ni.removeEventListener("pointerup",l))};t.engine.container.addEventListener("pointerdown",a),ni.addEventListener("pointerup",l)})(t,n,A,g,v,f,h)};Ac(t,"wheel",(r=>{const n=Fe(!1!==t.St.Ko.qo),a=o(),l=Te(a.pan,"wheel",r,i,s,e);l&&n.push((()=>((t,i,s)=>{var e,h,r;Bi(i),s.x&&(t.axisX.Wv(2*Math.sign(i.deltaY)*(null!==(e=s.sensitivity)&&void 0!==e?e:1)),!1!==s.stopScroll&&t.axisX.setStopped(!0)),s.y&&(t.axisY.Wv(2*Math.sign(i.deltaY)*(null!==(h=s.sensitivity)&&void 0!==h?h:1)),!1!==s.stopScroll&&t.axisY.setStopped(!0)),s.z&&(t.axisZ.Wv(2*Math.sign(i.deltaY)*(null!==(r=s.sensitivity)&&void 0!==r?r:1)),!1!==s.stopScroll&&t.axisZ.setStopped(!0));const n=s.on;n&&ni.requestAnimationFrame((()=>n({event:i})))})(t,r,l)));const c=Te(a.zoom,"wheel",r,i,s,e);c&&n.push((()=>((t,i,s,e)=>{var h,r,n,o,a,l,c;Bi(i),s.x&&(t.axisX.jv(null!==(h=s.mode)&&void 0!==h?h:"centered",-Math.sign(i.deltaY),3*(null!==(r=s.sensitivity)&&void 0!==r?r:1)),!1!==s.stopScroll&&t.axisX.setStopped(!0)),s.y&&(t.axisY.jv(null!==(n=s.mode)&&void 0!==n?n:"centered",-Math.sign(i.deltaY),3*(null!==(o=s.sensitivity)&&void 0!==o?o:1)),!1!==s.stopScroll&&t.axisY.setStopped(!0)),s.z&&(t.axisZ.jv(null!==(a=s.mode)&&void 0!==a?a:"centered",-Math.sign(i.deltaY),3*(null!==(l=s.sensitivity)&&void 0!==l?l:1)),!1!==s.stopScroll&&t.axisZ.setStopped(!0)),s.camera&&(e.Fm(),t.Pm(.5*Math.sign(i.deltaY)*(null!==(c=s.sensitivity)&&void 0!==c?c:1)));const u=s.on;u&&ni.requestAnimationFrame((()=>u({event:i})))})(t,r,c,h))),n.end()})),Ac(t,"dblclick",(r=>{if(r.defaultPrevented)return;const n=Fe(!1!==t.St.Ko.qo),a=o(),l=Te(a.restoreDefault,void 0,r,i,s,e);l&&(Bi(r),gc(t,l,h,r));const c=Te(a.restorePrevious,void 0,r,i,s,e);c&&(Bi(r),vc(t,c,0,r)),n.end()}));const f=()=>(A(),g(),()=>{A=Ac(t,"pointermove",u),g=Ac(t,"pointerdown",d)});let A=Ac(t,"pointermove",u),g=Ac(t,"pointerdown",d);return{setUserInteractions:t=>{if(void 0===t)n={rotate:!1,zoom:!1,pan:!1,restoreDefault:!1,restorePrevious:!1};else if(0===Object.keys(t).length)n={};else for(const i of Object.keys(t))!1===t[i]||"object"==typeof t[i]?n[i]=t[i]:n[i]={}},getUserInteractions:o}})(this),this.Lm(this.axisX),this.Lm(this.axisY),this.Lm(this.axisZ)}restorePreviousZoomState(t){if(this.om.length<=1)return this;this.om.pop();const i=this.om[this.om.length-1];return i?(this.am=!0,this.forEachAxis((s=>{if((null==t?void 0:t.whitelist)&&!t.whitelist.includes(s))return;const e=i.get(s);e?s.ct(e.start,e.end,null==t?void 0:t.animate,void 0!==(null==t?void 0:t.stopAxisAfter)?t.stopAxisAfter:e.stopped,"userSetInterval"):s.fit(null==t?void 0:t.animate,null==t?void 0:t.stopAxisAfter)})),this.am=!1,this):this}clearPreviousZoomStateHistory(){if(void 0!==this.Bm)this.om.length=0;else for(;this.om.length>1;)this.om.unshift();return this}Lm(t){const i=()=>{this.am||(this.Bm&&ni.clearTimeout(this.Bm),this.Bm=ni.setTimeout((()=>{this.lm(),this.Bm=void 0}),300))};ni.requestAnimationFrame((()=>{i()})),t.addEventListener("intervalchange",i),t.addEventListener("dispose",(()=>{this.om.forEach((i=>{i.delete(t)}))}))}setUserInteractions(t){return this.Tm.setUserInteractions(t),this}getUserInteractions(){return this.Tm.getUserInteractions()}setProjection(t){this._v.Dm(t);const i=this.gm.projectionChanged(this.vm(),t);return i&&this.ym(i),this.St.Ls(),this}getProjection(){return this._v.Em()}setCursor(t){return this.Ug.setCursor(t),this}getCursor(){return this.Ug.getCursor()}setCursorMode(t){return this.Ug.setCursorMode(t),this}getCursorMode(){return this.Ug.getCursorMode()}setCustomCursor(t){return this.Ug.setCustomCursor(t),this}setCursorFormatting(t){return this.Ug.setCursorFormatting(t),this}getCursorFormatting(){return this.Ug.getCursorFormatting()}addCursor(t=fc){const i=this.dA(),s=t.ag(i,this.xf,this.xf,this.nA(i),this._t,this);return this.SA(s),s}addPointSeries(t){const i=new(t&&t.type||jl)(this,this.ky,this._v,this._t,this.St.vs,t);return this.Ly(i),i}addLineSeries(t){const i=new Hl(this,this.ky,this._v,this._t,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,this.St.vs);return this.Ly(i),i}addPointLineSeries(t){const i=new Xl(this,this.ky,this._v,this._t,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,this.St.vs);return this.Ly(i),i}addSurfaceGridSeries(t){const i=new sc(this,this.ky,this._v,t,this._t,this.St.vs);return this.Ly(i),i}addSurfaceScrollingGridSeries(t){const i=new ec(this,this.ky,this._v,t,this._t,this.St.vs);return this.Ly(i),i}addBoxSeries(t){const i=new Ul(this,this.ky,this._v,this._t,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,this.St.vs);return this.Ly(i),i}addMeshModel(t){const i=new cc(this,this.ky,this._v,this._t,t,this.St.vs);return this.Ly(i),i}translateCoordinate(t,i,s){if(hc(i)||hc(s)||rc(t)){if(hc(i)&&hc(s)&&rc(t)){if("axes"===i.id&&"world"===s.id)return this._v.Rm(t);if("world"===i.id&&"axes"===s.id)return this._v.zm(t);if(i.id===s.id)return t}if(hc(i)&&we(s)&&rc(t)){const i=this._v.zv(t);return i?this.St.ma({engineX:i.x,engineY:i.y}):{clientX:-1,clientY:-1}}if(hc(i)&&Ce(s)&&rc(t)){const i=this._v.zv(t);return i?ot(i,this.St.ot,this.xf):{clientX:-1,clientY:-1}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}return Va(t,i,s,this.xf,this.St)}getDefaultAxisX(){return this.xm.x}getDefaultAxisY(){return this.xm.y}getDefaultAxisZ(){return this.xm.z}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}get axisZ(){return this.getDefaultAxisZ()}get zAxis(){return this.getDefaultAxisZ()}getDefaultAxes(){return[this.xm.x,this.xm.y,this.xm.z]}setCameraLocation(t){let i={location:t,direction:Ss.normalize(Ss.multiply(t,-1))};const s=this.gm.cameraLocationChanged(this.vm(i));return s&&(i=s),this.ym(i),this.St.Ls(),this}getCameraLocation(){return this._v.getCameraLocation()}getCameraDirection(){return this._v.getCameraDirection()}setCameraAutomaticFittingEnabled(t){this.gm.Ky(t);const i=this.gm.cameraLocationChanged(this.vm());return i&&this.ym(i),this}getCameraAutomaticFittingEnabled(){return this.gm.ap()}setBoundingBoxStrokeStyle(t){return this.Mm.Ne(t).Iv(Pl(this.Mm.In())),this._v.Ls(),this}getBoundingBoxStrokeStyle(){return this.Mm.In()}setBoundingBox(t){return this.wm(t,!1),this}wm(t,i){this.km=t;const s=this.Cm(t);if(this.pm.x.Z(s.x),this.pm.y.Z(s.y),this.pm.z.Z(-s.z),!i){const t=this.gm.boundingBoxChanged(this.vm());t&&this.ym(t)}this.St.Ls()}getBoundingBox(){return this.km}Le(t){if(Ya.LA(this.Sh,this._A),0!==this.nm){const i=this.nm*t*.006;this.tm.push({type:"wheel-zoom",deltaY:i}),this.nm=Math.sign(this.nm)*Math.max(Math.abs(this.nm)-.01*t,0),0!==this.nm&&this.St.Ls(!0)}const i=this.getCameraDirection();if(this.tm.length>0){const t=this.gm.applyCameraInteractions(this.vm(),this.tm);t&&this.ym(t),this.tm.length=0}this.Vm&&Ss.equals(this.Vm.location,this._m.location)&&Ss.equals(this.Vm.direction,this._m.direction)||this.D.R("camerachange",{cameraLocation:this.getCameraLocation()}),this.Vm=this._m,super.Le(t);for(let t=0;t<this._y.length;t+=1)this._y[t].hy();for(let t=0;t<this._y.length;t+=1)this._y[t].Le();this.xm.x.Er(),this.xm.y.Er(),this.xm.z.Er();const s=this.xm.x.hr(this.xm.x.Nv(i)),e=this.xm.y.hr(this.xm.y.Nv(i)),h=this.xm.z.hr(this.xm.z.Nv(i));this.xm.x.Le(s),this.xm.y.Le(e),this.xm.z.Le(h),this.Ug.Le(!1,this._y,void 0),super.xA();const r=this.pm,n=a(r.x.getInnerStart(),r.y.getInnerStart(),r.z.getInnerStart()),o=a(r.x.getInnerEnd(),r.y.getInnerEnd(),r.z.getInnerEnd());this.Mm.ti().Dl([a(o.x,n.y,n.z),a(o.x,o.y,n.z),a(o.x,o.y,o.z),a(o.x,n.y,o.z),a(n.x,n.y,o.z),a(n.x,o.y,o.z),a(o.x,o.y,o.z),a(o.x,o.y,n.z),a(n.x,o.y,n.z),a(n.x,o.y,o.z),a(n.x,n.y,o.z),a(n.x,n.y,n.z)]);const l=[a(n.x,n.y,n.z),a(o.x,n.y,n.z),a(n.x,o.y,n.z),a(o.x,o.y,n.z),a(n.x,n.y,o.z),a(o.x,n.y,o.z),a(n.x,o.y,o.z),a(o.x,o.y,o.z)].map((t=>this._v.zv(t))),c=this._v.zv(a((n.x+o.x)/2,(n.y+o.y)/2,(n.z+o.z)/2)),u=$i(l,c),d=[];for(let t=0;t<u.length;t+=1){const i=u[t];Gs(i,c,u[t>0?t-1:u.length-1],u[t<u.length-1?t+1:0])||d.push(i)}const f=$i(d,c);this.Iy.Hl(f),this.Py.Hl(f);for(let t=0;t<this._y.length;t+=1)this._y[t].vv()}dispose(){return this.To.forEach((t=>{t()})),this.To.length=0,this.pm.G(),this._v.G(),this.Am.G(),this.fm.G(),this.Ug.G(),super.dispose()}H(){return this.pm.x.H(),this.pm.y.H(),this.pm.z.H(),super.H()}X(){return super.X()}ym(t){this._v.setCameraLocation(t.location).setCameraDirection(t.direction).setLightLocation(Ss.addVec(t.location,Ss.multiply(t.direction,-this.im))),this._m=t,this.St.Ls()}Cm(t){return Ss.divide(t,Ss.length(t)/this.qp)}vm(t=this._m){return{boundingBox:this.Cm(this.km),cameraLocation:t.location,cameraDirection:t.direction,projection:this.getProjection()}}forEachAxis(t){return t(this.xm.x),t(this.xm.y),t(this.xm.z),this}getSeries(){return this._y}getMinimumSize(){}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationZoom(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}setAnimationZoom(t){return this.sm=!!t,this}getAnimationZoom(){return this.sm}Im(t){this.tm.push({type:"rotate",rotation:t}),this.St.Ls()}Pm(t){this.sm?Math.sign(this.nm)!==Math.sign(t)?this.nm=t:this.nm+=t:this.tm.push({type:"wheel-zoom",deltaY:t}),this.St.Ls()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const pc=(t,i,s)=>{var e,h;return At(i)?Xa(i,[[{component:i.series,componentColor:Wa(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[t.getDefaultAxisX().getTitle()||"X","",{text:Pe(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:Pe(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],[t.getDefaultAxisZ().getTitle()||"Z","",{text:Pe(i.axisZ.formatValue(i.z),i.axisZ),font:{weight:"bold"}}],void 0!==i.intensity?["Value","",{text:Pe(i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]:[]]):yt(i)?Xa(i,[[{component:i.series,componentColor:Wa(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],void 0!==i.value?["Value","",{text:Pe(i.value.toFixed(2),null===(h=i.lut)||void 0===h?void 0:h.units),font:{weight:"bold"}}]:[]]):Xa(i,[[{component:i.series,componentColor:Wa(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[t.getDefaultAxisX().getTitle()||"X","",{text:Pe(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:Pe(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],[t.getDefaultAxisZ().getTitle()||"Z","",{text:Pe(i.axisZ.formatValue(i.z),i.axisZ),font:{weight:"bold"}}]])},mc={Column:Ao,Row:go};class Sc extends Ga{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.Om=new Map,this.Nm=this.addUIElement(mc.Row).setPosition({x:0,y:100}).setOrigin(ir.LeftTop).setBackground((t=>t.setFillStyle(V).setStrokeStyle(Wt)))}add(t,i){return(t instanceof Ua?[t]:t instanceof ng?t.getCells().filter((t=>t.panel instanceof Ua)).map((t=>t.panel)):[]).forEach((t=>{const s=this.Nm.addElement(Yo.VerticalLegendBox).setBackground((t=>t.setFillStyle(V).setStrokeStyle(Wt))).add(t,i).setTitle(t.getTitle());this.Om.set(t,s)})),this.St.Ls(),this}setLegendBoxes(t){return this.Om.forEach(((i,s)=>t(i,s))),this}getMinimumSize(){return super.getMinimumSize()||this.Nm.getSize()}}const bc={World:"World",USA:"USA",NorthAmerica:"NorthAmerica",SouthAmerica:"SouthAmerica",Canada:"Canada",Europe:"Europe",Asia:"Asia",Africa:"Africa",Australia:"Australia"},xc=(t,i)=>!(!i.name||t.name.toLowerCase()!==i.name.toLowerCase())||"ISO_A3"in t&&"ISO_A3"in i&&t.ISO_A3.toLowerCase()===i.ISO_A3.toLowerCase(),Mc=(t,i)=>{let s=i.geometry;return s=wc(t,i,s),s=_c(t,i,s),s},wc=(t,i,s)=>{if(t===bc.Asia){const t=[];for(let i=0;i<s.length;i+=1){t[i]=[];const e=s[i],h=t[i];for(let t=0;t<e.length;t+=1){const i=e[t];i.x<-100?h[t]={x:i.x+360,y:i.y}:h[t]=i}}return t}return s},_c=(t,i,s)=>{const e=i.name.toLowerCase();let h;if(t===bc.USA&&("alaska"===e?h={translate:{x:55,y:-25},scale:{x:.16,y:.16}}:"hawaii"===e&&(h={translate:{x:48,y:7},scale:{x:1,y:1}})),h){const{translate:t,scale:r}=h,n=zs(Ai(s)),o=[];for(let i=0;i<s.length;i+=1){o[i]=[];const h=s[i],a=o[i];for(let i=0;i<h.length;i+=1){const s=h[i];let o=s.x;"alaska"===e&&1===Math.sign(o)&&(o=-180-(180-o)),a[i]={x:t.x+(o-n.min.x)*r.x+n.min.x,y:t.y+(s.y-n.min.y)*r.y+n.min.y}}}return i.outlier=!0,i.transform={...h,vertexBoundaries:n},o}return s},Cc={World:{min:{x:-180,y:-90},max:{x:180.0000000000002,y:83.63410065300012}},Europe:{min:{x:-25,y:34},max:{x:40,y:70}},Africa:{min:{x:-17,y:-40},max:{x:52,y:37.37549753800012}},Asia:{min:{x:27,y:-10.922621351999808},max:{x:180.0000000000002,y:81.85871002800009}},NorthAmerica:{min:{x:-179.1435033839999,y:5.515082098000121},max:{x:-50,y:83.11652252800009}},SouthAmerica:{min:{x:-85,y:-55.9185042229998},max:{x:-35,y:15}},USA:{min:{x:-125,y:24},max:{x:-68,y:50}},Canada:{min:{x:-141.0181,y:41.7297},max:{x:-52.6194,y:75}},Australia:{min:{x:111,y:-43.6586},max:{x:155,y:-9.2199}}},kc={World:.6,Europe:1/1.4,Africa:1.3,Asia:.8,NorthAmerica:.9,SouthAmerica:1.5,USA:3/4,Canada:6/8,Australia:11/12};class Tc extends Ua{constructor(t,i,s,e,h,r,n){super(t,i,s,i.wA("mapChart bg",0),e,i.St._t.mapChartBackgroundFillStyle,i.St._t.mapChartBackgroundStrokeStyle,i.St._t.mapChartTitleFont,i.St._t.mapChartTitleFillStyle,i.St._t.mapChartTitleShadow,n),this.Gm=[],this.ot=this.lA.d2({scaleXYConstructor:be}),this.$m=!0,this.Um=this._t.mapChartSeparateRegionFillStyle,this.Ym=this._t.mapChartSeparateRegionStrokeStyle,this.ah=!0,this.Hm=0,this.Xm=!0,this.Wm=new Map,this.regions=new zt,this.jm=t=>{this.ot.x.Z(t.engineWidth).yi([this.oi.left+this.nn.left,this.oi.right+this.nn.right]),this.ot.y.Z(t.engineHeight).yi([this.oi.bottom+this.nn.bottom,this.oi.top+this.nn.top+Ya.PA(this.Sh,this._A)]),this.Zm&&this.Qm(this.Jm,this.ot,this.Zm)},this.D=new zt,this.St.Zo(Gr.Wn),this.ah=!1!==(null==r?void 0:r.animationsEnabled),this.Km=i.Ng("mapChart plotting",0),this.addEventListener("resize",this.jm),this.Sh.Sr("Map Chart");const o=i.$g(),a=gi(r?r.cursorBuilder:void 0,Al);this.Ug=Qa(this,o,a.ag(o,this.uiScale,this.uiScale,ui,this._t),void 0,"show-pointed",Ic,(()=>0)),this.qm=this.vs.kf(),this.MA(h,this.uiScale),this.tS=this.Km.Bv(this.ot).setPointerEvents(this.$m).Ie(this._t.mapChartFillStyle).Fe(this._t.mapChartStrokeStyle),this.regions.Gt(this.tS,(t=>{if(!this.iS)return;const i=this.sS(this.iS,t);return i?i.region:void 0})),this.tS.addEventListener("pointermove",((t,i)=>{const s=i.collectionMember;if(!this.iS||!s)return;const e=this.sS(this.iS,s);this.eS(e),this.Xm&&e&&this.St.xs.Rs(e.region,!0)})),this.tS.addEventListener("pointerleave",((t,i)=>{const s=i.collectionMember;if(!this.iS||!s)return;const e=this.sS(this.iS,s);this.hS(),this.Xm&&e&&this.St.xs.Rs(e.region,!1)})),this.rS=this.Km.Bv(this.ot).setPointerEvents(this.$m).Ie(this._t.mapChartOutlierRegionFillStyle).Fe(this._t.mapChartOutlierRegionStrokeStyle);const l=gi(r&&r.type,bc.World);this.Jm=l,this.nS(l).then((()=>{this.D.R("ready",{})}))}setFillStyle(t){return this.tS.Ie(t),this.St.Ls(),this}getFillStyle(){return this.tS.$h()}setStrokeStyle(t){return this.tS.Fe(t),this.St.Ls(),this}getStrokeStyle(){return this.tS.da()}setEffect(t){return this.qm.Ps(t),this.St.Ls(),this}getEffect(){return this.qm.Bs()}setOutlierRegionFillStyle(t){return this.rS.Ie(t),this.St.Ls(),this}getOutlierRegionFillStyle(){return this.rS.$h()}setOutlierRegionStrokeStyle(t){return this.rS.Fe(t),this.St.Ls(),this}getOutlierRegionStrokeStyle(){return this.rS.da()}setSeparateRegionFillStyle(t){return this.Um="function"==typeof t?t(this.Um):t,this.Gm.forEach((t=>t.Ie(this.Um))),this.St.Ls(),this}getSeparateRegionFillStyle(){return this.Um}setSeparateRegionStrokeStyle(t){return this.Ym="function"==typeof t?t(this.Ym):t,this.Gm.forEach((t=>t.Fe(this.Ym))),this.St.Ls(),this}getSeparateRegionStrokeStyle(){return this.Ym}invalidateRegionValues(t){if(!this.iS||!this.oS)return this.aS=this.aS||[],this.aS.push(t),this;if("function"==typeof t)for(let i=0;i<this.iS.regions.length;i+=1){const s=this.iS.regions[i],e=this.oS[i],h=t({...s,geometry:void 0},e);if(void 0!==h&&h!==e){this.oS[i]=h;const t=this.Wm.get(s);null==t||t.forEach((t=>{t.lS(h)}))}}else for(const i of t)if(i)for(let t=0;t<this.iS.regions.length;t+=1){const s=this.iS.regions[t],e=this.oS[t];if(void 0!==i.value&&i.value!==e&&xc(s,i)){this.oS[t]=i.value;const e=this.Wm.get(s);null==e||e.forEach((t=>{t.lS(i.value)}))}}return this.St.Ls(),this}setPointerEvents(t){return this.$m=t,this.tS.setPointerEvents(t),this}getPointerEvents(){return this.$m}setHighlight(t){var i;return t=es(t),this.Hm=t,null===(i=this.iS)||void 0===i||i.regions.forEach((i=>{this.St.xs.Rs(i,t)})),this.D.R("highlightchange",{highlight:t}),this}getHighlight(){return this.Hm}setAnimationHighlight(t){var i;return null===(i=this.iS)||void 0===i||i.regions.forEach((i=>{this.St.xs.zs(i,t)})),this}getAnimationHighlight(){var t;return this.St.xs.Vs(null===(t=this.iS)||void 0===t?void 0:t.regions[0])}setHighlightOnHover(t){return this.Xm=t,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Xm}async nS(t){const i=await((t,i)=>{let s;if(t===bc.World)s="countries_world.json";else if(t===bc.NorthAmerica)s="countries_northAmerica.json";else if(t===bc.SouthAmerica)s="countries_southAmerica.json";else if(t===bc.Africa)s="countries_africa.json";else if(t===bc.Europe)s="countries_europe.json";else if(t===bc.Asia)s="countries_asia.json";else if(t===bc.USA)s="states_usa.json";else if(t===bc.Canada)s="territoriesProvinces_canada.json";else{if(t!==bc.Australia){const i=`LCJS MapChart unidentified \`type\`: ${t}`;throw ni.alert(i),new Error(i)}s="territories_australia.json"}return new Promise(((t,e)=>{(t=>{if(t.resourcesBaseUrl){const i=`${t.resourcesBaseUrl}${t.fileName}`;return void ni.fetch(i).then((i=>{t.success(i)})).catch((()=>{t.error({url:i})}))}const i=`${ni.location.origin}/resources${t.fileName}`;ni.fetch(i).then((i=>{if(!i.ok)throw new Error;t.success(i)})).catch((()=>{const s=`https://lcjs-resources.lightningchart.com/v1${t.fileName}`;ni.fetch(s).then((i=>{ni.console.warn("LightningChart JS warning | fallbacking publicly hosted asset resources.\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/warning-using-publicly-hosted-resources/"),t.success(i)})).catch((()=>{t.error({url:i})}))}))})({fileName:`/maps/${s}`,resourcesBaseUrl:i,success:i=>i.json().then(t),error:({url:t})=>as(i,t,"Map Chart",{shouldCrash:!0})})}))})(t,this.aA.Qs);this.oS=new Array(i.regions.length).map((t=>{})).fill(void 0);const s=Cc[t];if(!s)throw new Error("Unidentified map type.");for(const t of i.outliers)for(const i of t.geometry)this.rS.lo().Hl(i);if(t===bc.USA){const t=25.8,i=29.7;this.Gm.push(this.rA.Pe(this.ot).setPointerEvents(!1).Ie(this.Um).Fe(this.Ym).Be({x:-126,y:t}).Z({x:10,y:i-t}),this.rA.Pe(this.ot).setPointerEvents(!1).Ie(this.Um).Fe(this.Ym).Be({x:-113,y:t}).Z({x:7,y:i-t}))}const e=this.St.xs.ao(this.tS,{animationEnabled:this.ah});for(let s=0;s<i.regions.length;s+=1){const h=i.regions[s],r=Mc(t,h),n=[];for(const t of r)t.length<3||n.push(this.tS.lo().Hl(t));this.Wm.set(h,n),e.lo(h,(t=>{n.forEach((i=>i.Bt(t)))}))}if(this.qm._s([this.tS]),this.Zm=s,this.Qm(t,this.ot,s),this.iS=i,this.aS){for(const t of this.aS)this.invalidateRegionValues(t);this.aS=void 0}this.St.Ls()}Qm(t,i,s){const e=kc[t],h=i.x.getCellSize(),r=i.y.getCellSize()/h,n={min:{x:s.min.x,y:s.min.y},max:{x:s.max.x,y:s.max.y}};if(r<e){const t=(n.max.x-n.min.x)*(e/r-1);n.min.x-=t/2,n.max.x+=t/2}else if(r>e){const t=(n.max.y-n.min.y)*(r/e-1);n.min.y-=t/2,n.max.y+=t/2}i.x.W(n.min.x,n.max.x),i.y.W(n.min.y,n.max.y);const o=this.ot.x.wi(),a=this.ot.y.wi();this.D.R("viewchange",{latitudeRange:{start:n.min.y,end:n.max.y},longitudeRange:{start:n.min.x,end:n.max.x},margin:{top:a[1],bottom:a[0],left:o[0],right:o[1]}})}eS(t){this.cS=t,this.St.Ls()}hS(){this.cS=void 0,this.St.Ls()}sS(t,i){const s=Array.from(this.Wm.entries()).findIndex((([t,s])=>s.includes(i))),e=null==t?void 0:t.regions[s],h=this.St.jo();if(!h)return;const r=this.St.pa(h),n=this.oS&&this.oS[s];let o=ot({x:r.engineX,y:r.engineY},this.St.ot,this.ot);o={x:fi(o.x,this.ot.x.getInnerStart(),this.ot.x.getInnerEnd()),y:fi(o.y,this.ot.y.getInnerStart(),this.ot.y.getInnerEnd())};let a=o.x,l=o.y;const c=e.transform;e.outlier&&c&&(a=(a-c.translate.x-c.vertexBoundaries.min.x)/c.scale.x+c.vertexBoundaries.min.x,l=(l-c.translate.y-c.vertexBoundaries.min.y)/c.scale.y+c.vertexBoundaries.min.y);const u=this.getFillStyle();return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.St.ot,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.St.ot},region:e,value:n,longitude:l,latitude:a,lut:j(u)?u.lut:void 0}}setCursor(t){return this.Ug.setCursor(t),this}getCursor(){return this.Ug.getCursor()}setCursorMode(t){return this.Ug.setCursorMode(t),this}getCursorMode(){return this.Ug.getCursorMode()}setCustomCursor(t){return this.Ug.setCustomCursor(t),this}setCursorFormatting(t){return this.Ug.setCursorFormatting(t),this}getCursorFormatting(){return this.Ug.getCursorFormatting()}addCursor(t=Al){const i=this.dA(),s=t.ag(i,this.uiScale,this.uiScale,this.nA(i),this._t);return this.SA(s),s}setAnimationsEnabled(t){return this.ah=!t,this}getAnimationsEnabled(){return this.ah}getMinimumSize(){}Gd(){return[this]}Le(t){super.Le(t),super.xA(),Ya.LA(this.Sh,this._A);const i=u(this.ot.x.pi(),this.ot.y.pi(),this.ot.x.Si(),this.ot.y.Si());return this.Km.dm(i),this.Ug.Le(!1,[],void 0,{explicitTarget:this.cS}),this}dispose(){return this.Km.G(),this.Ug.G(),Na(this.ot),super.dispose()}H(){return super.H(),this.ot.H(),this}X(){return super.X(),this.ot.X(),this}Gs(){return ji(this.getFillStyle(),this.tS.Tt())}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),this.styleLegendEntry(t,s),this}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.getFillStyle()})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Fc=(t,i)=>{const s=t>0,e=i>0;return`${[Qi(Math.abs(0|t),2),"° ",Qi(Math.abs(0|(t<0?t=-t:t)%1*60),2),"' "].join("")+(s?"E":"W")}, ${[Qi(Math.abs(0|i),2),"° ",Qi(Math.abs(0|(i<0?i=-i:i)%1*60),2),"' "].join("")+(e?"N":"S")}`},Ic=(t,i,s)=>{var e;const h=[[{text:i.region.name,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[Fc(i.longitude,i.latitude)]];return void 0!==i.value&&h.push({text:Pe(i.value.toFixed(1),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}),h};class Pc extends Tr{constructor(t,i,s,e,h,r,n,o,a){super(t,i,i.uS(s),e,h,{numeric:i.dS({amplitude:e.polarAmplitudeAxisNumericTicks,radial:e.polarAmplitudeAxisNumericTicks}),datetime:i.dS({amplitude:e.polarAmplitudeAxisDateTimeTicks,radial:e.polarAmplitudeAxisDateTimeTicks}),time:i.dS({amplitude:e.polarAmplitudeAxisTimeTicks,radial:e.polarAmplitudeAxisTimeTicks})},{type:"linear"}),this.D=new zt,this.fS=r,this.AS=n,this.gS=o,this.vs=a,this.vS=s,this.yS=i.dS({amplitude:e.polarAmplitudeAxisStrokeStyle,radial:e.polarRadialAxisStrokeStyle}),this.Mh=o.Yr(s).setPointerEvents(!1).Xh(i.dS({amplitude:e.polarAmplitudeAxisTitleFont,radial:e.polarRadialAxisTitleFont})).Ie(i.dS({amplitude:e.polarAmplitudeAxisTitleFillStyle,radial:e.polarRadialAxisTitleFillStyle})),this.Zh=this.vs.kf([this.Mh]).Ps(e.effectsText)}setTickStrategy(t,i){return super.Rh(t,i)}setStrokeStyle(t){return this.yS="function"==typeof t?t(this.yS):t,this.AS.Ls(),this}getStrokeStyle(){return this.yS}lr(t){return{}}Ar(t,i,s,e){const h=this.pS(this.vS,t,i.th);return{keyValue:t,tickLevel:i,labelText:s,labelPosition:js(this.mS(this.vS,t),h.padding),labelAlignment:h.alignment,labelRotation:h.rotation,labelOffset:h.offset}}br(t,i,s,e){return new Lc(i,t,this.vS,this.gS,this.SS(this.fS,this.vS),this.gS.Ge(this.vS).setPointerEvents(!1))}_h(){return this.vS}Le(t){this.bS(this.vS,this.yS,t.zf),this.xS(this.vS,this.Mh,t.zf),t.ticksInfo.forEach(((t,i)=>{i.sr.Be(t.labelPosition).ul(t.labelAlignment).Wh(t.labelRotation).hl(t.labelOffset.x,t.labelOffset.y),this.MS&&!1===this.MS(i)&&i.sr.setVisible(!1),this.wS(this.vS,i._S,i.CS,i)}))}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}}class Lc extends Fr{constructor(t,i,s,e,h,r,n){super(t,i,e,s,n),this._S=h,this.CS=r,h.setPointerEvents(!1),this.As.push(h,r)}}class Bc extends Pc{constructor(t,i,s,e,h,r,n,o,a){super(t,Dc((()=>this.Df())),i,s,e,h,r,n,o),this.Fv=this.AS.Ge(this.vS).setPointerEvents(!1),this.kS=a,this.setScrollStrategy(fr.expansion),this.setTickStrategy(Ar.Numeric),this.setTitle("Amplitude"),this.Mh.mr(s.polarAmplitudeAxisTitleShadow)}Df(){return this.kS()}yr(t,i){return{ticksInfo:i,zf:this.Tr(((t,i)=>{const s=i.Hr.th,e=.5*this.yS.getThickness()+s.tickLength+s.tickPadding+Math.abs(i.sr.hr().zu().y);return Math.max(t,e)}),0)}}Rr(t,i){return Be(t,i,this.vS.y)}Or(t,i,s){const e=2*(i-t),h=this.vS.x.Zi(e);return{min:t-s*h,max:i+s*h}}mS(t,i){return{x:t.TS()?i-t.FS().start:t.FS().start-i,y:0}}SS(t,i){return t.Yu(i)}wS(t,i,s,e){const h=e.Hr.th,r=t.TS()?e.S-t.FS().start:t.FS().start-e.S;di(e.S,t.FS().start)||di(e.S,t.FS().end)?i.setVisible(!1):i.setVisible(!0).Bc(0).$e(360).Vc(void 0).zc(0).Dc(r).Vc(60).Ie(V).Fe(h.gridStrokeStyle);const n=.5*this.yS.getThickness();s.Ue({x:r,y:-n*t.hs().y}).$e({x:r,y:-(n+h.tickLength)*t.hs().y}).Ne(h.tickStyle)}pS(t,i,s){return{alignment:{x:0,y:1},padding:{x:0,y:t.hs().y*-(.5*this.yS.getThickness()+s.tickLength+s.tickPadding)},rotation:0,offset:{x:0,y:0}}}bS(t,i,s){const e=t.TS()?t.FS().end-t.FS().start:t.FS().start-t.FS().end;this.Fv.Ue({x:0,y:0}).$e({x:e,y:0}).Ne(i)}xS(t,i,s){const e=t.TS()?(t.FS().start+t.FS().end)/2-t.FS().start:t.FS().start-(t.FS().start+t.FS().end)/2;i.ul({x:0,y:1}).Be({x:e,y:-s*t.hs().y})}}const Dc=t=>({...Ol(t,(t=>t.getAmplitudeMin()),(t=>t.getAmplitudeMax()),(t=>{})),uS:t=>({getInnerStart:()=>t.FS().start,getInnerEnd:()=>t.FS().end,W:(i,s)=>t.IS(i,s),et:(i,s,e,h,r)=>t.y.et(i,s,e,h,r)}),dS:t=>t.amplitude});class Ec extends Pc{constructor(t,i,s,e,h,r,n,o){var a;super(t,zc,i,s,e,h,r,n,o),this.PS=90,this.LS=12,this.BS=Rc,this.Fv=this.AS.Yu(this.vS).setPointerEvents(!1),this.MS=t=>{if(0===this.getTitle().length||O(this.getTitleFillStyle()))return;let i=180*(t.S-this.vS.DS())/Math.PI%360;for(;i<0;)i+=360;for(;i>360;)i-=360;return!(i>=0&&i<=20||i>=340&&i<=360)&&void 0},this.hh=void 0,this.setTickStyle(s.polarRadialAxisTickStyle),this.setTitle("Degrees"),this.setNorth(this.PS),this.ES=null!==(a=this._t.polarRadialAxisMarginAfterTicks)&&void 0!==a?a:7}setTickStyle(t){return this.RS="function"==typeof t?t(this.RS):t,this.zS(),this.AS.Ls(),this}getTickStyle(){return this.RS}setTickFormattingFunction(t){return this.BS=t,this.zS(),this.AS.Ls(),this}getTickFormattingFunction(){return this.BS}setClockwise(t){this.vS.VS(t);const i=this.PS*Math.PI/180;return t?this.vS.OS(i+Math.PI/2):this.vS.OS(i-Math.PI/2),this.AS.Ls(),this}getClockwise(){return!this.vS.NS()}setNorth(t){for(;t<0;)t+=360;t%=360,this.PS=t;const i=t*Math.PI/180;return this.getClockwise()?this.vS.OS(i+Math.PI/2):this.vS.OS(i-Math.PI/2),this.AS.Ls(),this}getNorth(){return 180*this.vS.DS()/Math.PI}setDivision(t){return this.LS=t,this.zS(),this.AS.Ls(),this}getDivision(){return this.LS}getMarginAfterTicks(){return this.ES}setMarginAfterTicks(t){return this.ES=t,this.chart.St.Ls(),this}Df(){return[]}yr(t,i){return{ticksInfo:i,zf:this.Tr(((t,i)=>{const s=i.Hr.th,e=.5*this.yS.getThickness()+s.tickLength+s.tickPadding+Math.abs(i.sr.hr().zu().y);return Math.max(t,e)}),0)+this.ES}}Rr(t,i){return i}Or(t,i,s){return{min:t,max:i}}mS(t,i){const s=t.NS()?1:-1,e=t.DS(),h=t.TS()?t.FS().end-t.FS().start:t.FS().start-t.FS().end;return{x:Math.cos((i-e)*s)*h,y:Math.sin((i-e)*s)*h}}SS(t,i){return t.Ge(i)}wS(t,i,s,e){const h=this.RS,r=t.NS()?1:-1,n=t.DS(),o=(e.S-n)*r,a=Math.cos(o),l=Math.sin(o),c=t.TS()?t.FS().end-t.FS().start:t.FS().start-t.FS().end,u={x:a*c,y:l*c};i.Ue({x:0,y:0}).$e(u);const d={x:u.x+a*h.tickLength*t.hs().x,y:u.y+l*h.tickLength*t.hs().y};s.Ue(u).$e(d),i.Ne(h.gridStrokeStyle),s.Ne(h.tickStyle)}pS(t,i,s){const e=t.NS()?1:-1;let h,r=(i-t.DS())*e;for(;r<0;)r+=2*Math.PI;for(;r>=2*Math.PI;)r-=2*Math.PI;h=r>0&&r<=Math.PI?-r+Math.PI/2:-r-Math.PI/2;const n=Math.cos(r),o=Math.sin(r),a=s.tickLength+s.tickPadding;return{alignment:{x:0,y:0},padding:{x:n*a*t.hs().x,y:o*a*t.hs().y},rotation:180*h/Math.PI,offset:{x:0,y:0}}}bS(t,i,s){const e=t.TS()?t.FS().end-t.FS().start:t.FS().start-t.FS().end;this.Fv.Bc(0).$e(360).zc(0).Dc(e+.5*i.getThickness()*t.hs().x).Vc(360).Ie(V).Fe(i)}xS(t,i,s){const e=t.DS(),h=this.pS(t,0+e,this.RS),r=t.TS()?t.FS().end-t.FS().start:t.FS().start-t.FS().end;i.ul(h.alignment).Wh(h.rotation).hl(h.offset.x,h.offset.y).Be(js({x:r,y:0},h.padding))}zS(){this.Kh({je:[],Ze:[{sr:"Radial ticks",$f:0,th:this.RS,He:this.BS,jr:(t,i,s,e)=>{const h=[],r=2*Math.PI/this.LS;for(let t=0;t<2*Math.PI;t+=r)h.push(t);return h},Th:{_r:()=>{},Fh:()=>!1,kr:"hide-label"},Zr:void 0}],Qe:Rc,Je:void 0,Ke:void 0},"Numeric")}}const Rc=(t,i,s)=>(180*t/Math.PI).toFixed(0),zc={Pr:()=>{},Lr:()=>{},Dr:()=>{},uS:t=>({getInnerStart:()=>0,getInnerEnd:()=>2*Math.PI,W:(t,i)=>{},et:(i,s,e,h,r)=>t.x.et(i,s,e,h,r)}),dS:t=>t.radial},Vc=t=>!!(t&&"object"==typeof t&&"axisAmplitude"in t&&"axisRadial"in t),Oc=t=>!!(t&&"object"==typeof t&&"angle"in t&&"number"==typeof t.angle&&"amplitude"in t&&"number"==typeof t.amplitude),Nc=(t,i)=>{const s=[],e=i.FS().start,h=i.FS().end,r=i.TS(),n=i.NS()?1:-1,o=i.DS(),a=Math.abs(h-e),l=Math.min(e,h)+.001*a,c=Math.max(e,h)-.001*a;for(const i of t){const t=fi(i.amplitude,l,c),h=i.angle*Math.PI/180-o,a=Math.cos(h*n)*(r?t-e:e-t),u=Math.sin(h*n)*(r?t-e:e-t),d=i.color;s.push({x:a,y:u,color:d})}return s},Gc=t=>{const i={min:bs,max:xs};for(const s of t)i.min=Math.min(i.min,s.amplitude),i.max=Math.max(i.max,s.amplitude);return i},$c=t=>t.slice().map((t=>t.angle>=0&&t.angle<=360?t:{...t,angle:t.angle%360})),Uc=(t,i)=>{let s=ee(t);for(i.NS()||(s*=-1),s+=180*i.DS()/Math.PI;s<0;)s+=360;s%=360;const e=Xs(t),h=i.FS(),r=Math.abs(h.end-h.start);return{angle:s,amplitude:Ue(h.start,h.end,e/r)}};class Yc extends Re{constructor(t,i,s,e,h,r){super(i,s,h,r),this.Es="Sector",this.GS=0,this.$S=1*Math.PI/2,this.US=void 0,this.YS=void 0,this.D=new zt,this.Ys=t,this.vS=e,this.HS=this.Ys.Qc(this.vS).Bt(this.getHighlight()),this.ws(this.HS),this.Ce=h.polarSectorFillStyle,this.ke=h.polarSectorStrokeStyle,this.setPointerEvents(!1)}setAngleStart(t){return this.GS=t,this.Ys.Ls(),this}getAngleStart(){return this.GS}setAngleEnd(t){return this.$S=t,this.Ys.Ls(),this}getAngleEnd(){return this.$S}setAmplitudeStart(t){return this.US=t,this.Ys.Ls(),this}getAmplitudeStart(){return this.US}setAmplitudeEnd(t){return this.YS=t,this.Ys.Ls(),this}getAmplitudeEnd(){return this.YS}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.Ys.Ls(),this}getFillStyle(){return this.Ce}setStrokeStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.Ys.Ls(),this}getStrokeStyle(){return this.ke}Le(){const t=this.vS.FS(),i=void 0!==this.US?fi(this.US,t.start,t.end):t.start,s=void 0!==this.YS?fi(this.YS,t.start,t.end):t.end,e=[],h=Math.min(this.GS,this.$S),r=Math.max(this.GS,this.$S);for(let t=h;t<=r;t+=1)e.push({angle:t,amplitude:i});for(let t=r;t>=h;t-=1)e.push({angle:t,amplitude:s});const n=Nc(e,this.vS);this.HS.Hl(n).Ie(this.Ce).Fe(this.ke)}De(t,i){t.Bt(i),this.Ys.Ls()}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce,stroke:this.ke})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Hc extends Re{constructor(){super(...arguments),this.qv=!0,this.Kv=!0}setAutoScrollingEnabled(t){return this.qv=t,this.chart.St.Ls(),this}getAutoScrollingEnabled(){return this.qv}hy(){}Le(){}vv(){}setCursorEnabled(t){return this.Kv=t,this}getCursorEnabled(){return this.Kv}BA(){return this.getVisible()&&this.getCursorEnabled()}setCursorFormattingOverride(t){return this.iy=t,this}getCursorFormattingOverride(){return this.iy}}class Xc extends Hc{constructor(t,i,s,e,h,r){super(i,s,h,r),this.Ys=t,this.chart=i,this.scale=e}getAmplitudeMin(){return this.XS?this.XS.min:void 0}getAmplitudeMax(){return this.XS?this.XS.max:void 0}}class Wc extends Xc{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r),this.Es="Heatmap Series",this.WS=!0,this.Ay=!1,this.D=new zt;const o=this.chart.getSeries().length;this.Ce=Ji(this._t.polarHeatmapSeriesFillStyle||this._t.heatmapGridSeriesFillStyle,o);const a=n.amplitudeStart||0,l=n.amplitudeEnd?(n.amplitudeEnd-a)/(n.annuli-1):n.amplitudeStep||1,c={sectors:n.sectors,annuli:n.annuli,amplitudeStart:a,amplitudeStep:l,heatmapDataType:"intensity",dataOrder:n.dataOrder||"annuli"};this.Ko=c,this.jS=t.ZS(e,[],c).Ie(this.Ce).Bt(this.getHighlight()),this.ws(this.jS);const u=Math.min(c.amplitudeStart,c.amplitudeStart+(c.annuli-1)*c.amplitudeStep),d=Math.max(c.amplitudeStart,c.amplitudeStart+(c.annuli-1)*c.amplitudeStep);this.XS={min:u,max:d},this.setHighlightOnHover(!1)}solveNearest(t,i="show-nearest"){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=ot(e,this.chart.St.ot,this.scale),r=Uc(h,this.scale),n=Ha(i)?this.jS.QS(r):this.jS.Ru(r);if(!n)return;const o=Nc([n],this.scale)[0];return{cursorPosition:{pointMarker:o,pointMarkerScale:this.scale,resultTable:o,resultTableScale:this.scale},series:this,angle:n.angle,amplitude:n.amplitude,intensity:n.cellValue,annulus:n.iAnnulus,sector:n.iSector,lut:j(this.Ce)?this.Ce.lut:void 0}}Kt(t,i){return As({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0,intensity:0,sector:0,annulus:0,lut:j(this.Ce)?this.Ce.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}invalidateIntensityValues(t){if(this.Ay&&this.chart.St.Zo(Gr.qn),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,sectors:"annuli"===this.Ko.dataOrder?t[0].length:t.length,annuli:"annuli"===this.Ko.dataOrder?t.length:t[0].length},s="annuli"===this.Ko.dataOrder?this.Ko.annuli:this.Ko.sectors,e="annuli"===this.Ko.dataOrder?this.Ko.sectors:this.Ko.annuli;if(i.x>s||i.y>e){if(!0===this.chart.aA.qo){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nHeatmap ${s}x${e}, input ${i.x}x${i.y}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;ni.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);if(0===(t=h).length||0===t[0].length)return this}this.jS.mp({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iSector"in t&&"iAnnulus"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,sectors:"annuli"===this.Ko.dataOrder?t.values[0].length:t.values.length,annuli:"annuli"===this.Ko.dataOrder?t.values.length:t.values[0].length},s="annuli"===this.Ko.dataOrder?t.iAnnulus:t.iSector,e=s+i.primary-1,h="annuli"===this.Ko.dataOrder?t.iSector:t.iAnnulus,r=h+i.secondary-1,n="annuli"===this.Ko.dataOrder?this.Ko.annuli-1:this.Ko.sectors-1,o="annuli"===this.Ko.dataOrder?this.Ko.sectors-1:this.Ko.annuli-1;if(s<0||h<0){if(!0===this.chart.aA.qo){const i=`PolarHeatmapSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niSector: ${t.iSector}, iAnnuli: ${t.iAnnulus}.\nNo intensity values will be invalidated.`;ni.console.warn(i)}return this}if(e>n||r>o){if(!0===this.chart.aA.qo){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nMax indexes ${n}x${o}, input ${i.primary}x${i.secondary} starting at [${s},${h}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;ni.console.warn(t)}const a=Math.max(e-n,0),l=i.primary-a,c=Math.max(r-o,0),u=[];for(let i=0;i<l;i+=1)u[i]=t.values[i].slice(0,c>0?-c:void 0);if(0===(t={iSector:t.iSector,iAnnulus:t.iAnnulus,values:u}).values.length||0===t.values[0].length)return this}this.jS.mp({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.Ys.Ls(),this.Ay=!0,this}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.jS.Ie(this.Ce),this.Ys.Ls(),this}getFillStyle(){return this.Ce}clear(){return this.jS.ti(),this.Ys.Ls(),this}setIntensityInterpolation(t){return t=t||"disabled",this.jS.yp(t),this.Ys.Ls(),this}getIntensityInterpolation(){return this.jS.pp()}Gs(){return ji(this.Ce,this.jS.Tt())}Qv(){return this.qv&&this.getVisible()}De(t,i){t.Bt(i),this.Ys.Ls()}Le(){}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class jc extends Xc{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Es="Line Series",this.JS=[],this.KS=!1,this.qS=!1,this.D=new zt,this.Oc=Ji(this._t.polarLineSeriesStrokeStyle,r),this.tb=t.tv(e,void 0,[Cl.UserSeries]).Ne(this.Oc).Bt(this.getHighlight()),this.ws(this.tb)}solveNearest(t,i){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=this.tb.ib(e);if(!h)return;const r=Uc(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Kt(t,i){return As({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,"show-nearest")))}setData(t){return 0!==this.JS.length&&this.chart.St.Zo(Gr.qn),this.JS=$c(t),this.KS=!0,this.XS=Gc(this.JS),this.Ys.Ls(),this}setStrokeStyle(t){this.Oc="function"==typeof t?t(this.Oc):t;const i=this.Oc;return this.tb.Ne(i),this.Ys.Ls(),this}getStrokeStyle(){return this.Oc}setConnectDataAutomaticallyEnabled(t){return this.qS=t,this.Ys.Ls(),this}getConnectDataAutomaticallyEnabled(){return this.qS}Qv(){return this.qv&&this.JS.length>0&&this.getVisible()}De(t,i){t.Bt(i),this.Ys.Ls()}Le(){if(this.KS||this.scale.sb()){const t=Nc(this.JS,this.scale),i=zs(t);this.qS?(t.push({...t[0]}),this.tb.dc(!0)):this.tb.dc(!1),this.tb.ti().Dl(t).Pt(i),this.KS=!1,this.tb.hr()}}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{stroke:this.Oc})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Zc extends Xc{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Es="Point Line Series",this.JS=[],this.KS=!1,this.qS=!1,this.eb=3,this.Ga=0,this.hb=Oe.Circle,this.D=new zt,this.Ce=Ji(this._t.polarPointLineSeriesFillStyle,r),this.Oc=Ji(this._t.polarPointLineSeriesStrokeStyle,r),this.tb=t.tv(e,void 0,[Cl.UserSeries]).Ne(this.Oc).Bt(this.getHighlight()),this.ws(this.tb),this.rb=t.wy(e).Ie(this.Ce).Fl(this.hb).Z(this.eb).Bt(this.getHighlight()),this.ws(this.rb)}solveNearest(t,i){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=this.tb.ib(e);if(!h)return;const r=Uc(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Kt(t,i){return As({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}setData(t){return 0!==this.JS.length&&this.chart.St.Zo(Gr.qn),this.JS=$c(t),this.KS=!0,this.XS=Gc(this.JS),this.Ys.Ls(),this}setStrokeStyle(t){this.Oc="function"==typeof t?t(this.Oc):t;const i=this.Oc;return this.tb.Ne(i),this.Ys.Ls(),this}getStrokeStyle(){return this.Oc}setPointFillStyle(t){this.Ce="function"==typeof t?t(this.Ce):t;const i=this.Ce;return this.rb.Ie(i),this.Ys.Ls(),this}getPointFillStyle(){return this.Ce}setPointSize(t){return this.eb=t,this.rb.Z(t),this.Ys.Ls(),this}getPointSize(){return this.eb}setPointShape(t){return this.hb=t,this.rb.Fl(this.hb),this}getPointShape(){return this.hb}setPointRotation(t){return this.Ga=t,this.rb.Wh(t),this.Ys.Ls(),this}getPointRotation(){return this.Ga}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce,stroke:this.Oc})}setConnectDataAutomaticallyEnabled(t){return this.qS=t,this.Ys.Ls(),this}getConnectDataAutomaticallyEnabled(){return this.qS}Qv(){return this.qv&&this.JS.length>0&&this.getVisible()}De(t,i){t.Bt(i),this.Ys.Ls()}Le(){if(this.KS||this.scale.sb()){const t=Nc(this.JS,this.scale),i=zs(t);this.qS?(t.push({...t[0]}),this.tb.dc(!0)):this.tb.dc(!1),this.tb.ti().Dl(t).Pt(i),this.rb.ti().Dl(t).Pt(i),this.KS=!1,this.tb.hr(),this.rb.hr()}}$s(){return this.Ds||this.hb}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Qc extends Er{constructor(t,i,s,e,h,r,n,o,a){super(),this.Mt=ds(),this.dt=!1,this.D=new zt,this.nb=e,this.ob=h,this.ab=r,this.lb=n,this.cb=o,this.Ys=t,this.scale=i,this.ub=s,this._t=a}dispose(){return this.ub&&this.ub(this),this.Ys.St.Ls(),this.D.R("dispose",{}),this.dt=!0,this}setVisible(t){return super.setVisible(t),this.ab(),this.Ys.St.Ls(),this}isDisposed(){return this.dt}setPointerEvents(t){return this.lb(this,t),this}getPointerEvents(){return this.cb(this)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Jc extends Qc{constructor(t,i,s,e,h,r,n,o,a,l,u,d,f,A,g,v,y,p){super(i,s,e,h,r,n,o,a,p),this.fb=1,this.Ab=1,this._y=t,this.Ys=i,this.scale=s,this.dimensionStrategy=l,this.start=u,this.end=d,this.lowerExtreme=f,this.lowerQuartile=A,this.median=g,this.upperQuartile=v,this.upperExtreme=y,this.boundaries=c(this.dimensionStrategy.toPoint(u,f),this.dimensionStrategy.toPoint(d,y)),this.gb=this._t.boxSeriesBodyFillStyle,this.yb=this._t.boxSeriesBodyStrokeStyle,this.Oc=this._t.boxSeriesStrokeStyle,this.pb=this._t.boxSeriesMedianStrokeStyle,this.hr()}Kt(t,i){const s=this._y.Hs.toPoint((this.start+this.end)/2,this.median);return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this._y.axisX,y:this._y.axisY}},...s,figure:this,start:this.start,end:this.end,lowerExtreme:this.lowerExtreme,lowerQuartile:this.lowerQuartile,median:this.median,upperQuartile:this.upperQuartile,upperExtreme:this.upperExtreme,series:this._y,axisX:this._y.axisX,axisY:this._y.axisY}}mb(){return this.boundaries}setBodyWidth(t){return this.fb=t,this.hr(),this}getBodyWidth(){return this.fb}setBodyFillStyle(t){return this.gb="function"==typeof t?t(this.gb):t,this.ob(),this}getBodyFillStyle(){return this.gb}setBodyStrokeStyle(t){return this.yb="function"==typeof t?t(this.yb):t,this.ob(),this}getBodyStrokeStyle(){return this.yb}setTailWidth(t){return this.Ab=t,this.hr(),this}getTailWidth(){return this.Ab}setStrokeStyle(t){return this.Oc="function"==typeof t?t(this.Oc):t,this.ob(),this}getStrokeStyle(){return this.Oc}setMedianStrokeStyle(t){return this.pb="function"==typeof t?t(this.pb):t,this.ob(),this}getMedianStrokeStyle(){return this.pb}hr(){this.nb()}getDominantStyle(){return this.getBodyFillStyle()}}class Kc extends Hc{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,a,l),this.Us=!0,this.As=new Map,this.chart=t,this.Ys=s,this.axisX=e,this.axisY=h,this.axisXAttachHandler=r,this.axisYAttachHandler=n,this.Sb=o,this.scale=Me(e.ot,h.ot),this.bb=t.xb,t.xb+=1,this.Mb(this.scale),this.attacheAxis()}get xAxis(){return this.axisX}get yAxis(){return this.axisY}ba(){const t=Array.from(this.As.keys());for(const i of t){const t=i.ba();if(t)return t}}setClipping(t){return this.Us=t,this.Ys.Ls(),this}getClipping(){return this.Us}attacheAxis(){this.wb=this.axisXAttachHandler(this),this._b=this.axisYAttachHandler(this)}ws(t,i){super.ws(t,i),t.xa(this.bb)}getName(){const t=this.Ms(),i="ProgressiveY"===t||"RegressiveY"===t?this.axisX.getTitle():this.axisY.getTitle();return this.Es||i.length>0&&i||"Series"}setDrawOrder(t){return this.bb=t.seriesDrawOrderIndex,this.As.forEach(((t,i)=>{i.xa(this.bb)})),this.chart.St.Ls(),this}dispose(){return super.dispose(),this.wb(this),this._b(this),this}vv(){super.vv(),Ie(this.Us,Array.from(this.As.keys()),this.scale)}getXMax(){var t;return null!==(t=this.Cb(!0))&&void 0!==t?t:0}getXMin(){var t;return null!==(t=this.kb(!0))&&void 0!==t?t:0}getYMax(){var t;return null!==(t=this.Tb(!0))&&void 0!==t?t:0}getYMin(){var t;return null!==(t=this.Fb(!0))&&void 0!==t?t:0}getBoundaries(){return c(r(this.getXMin()||0,this.getYMin()||0),r(this.getXMax()||0,this.getYMax()||0))}setCursorEnabled(t){return super.setCursorEnabled(t)}}const qc=(t,i,s,e)=>{const h=t.length;let r=0;if(void 0!==i){const h=s-i;if(h>0){const i=t.slice(r,h);r+=h,e(i,!0)}}for(;r<h;){const i=t.slice(r,r+s);r+=s,e(i,!1)}},tu=(t,i=t=>t)=>{const s=[];let e;for(let h=0;h<t.length;h+=1){e=t[h];const r=i(e.Tl()),n=e.kl(),o=n?i(n):[];let a=!1,l=!1;"uc"in e&&(a=e.uc(),l=e.fc()),s.push.apply(s,r.slice(a?1:0,r.length-(l&&0===o.length?1:0))),s.push.apply(s,o.slice(a&&0===r.length?1:0,o.length-(l?1:0)))}return s};class iu extends Kc{constructor(){super(...arguments),this.Ib=[],this.Pb=void 0,this.Lb=!1,this.ub=t=>{const i=this.Ib.findIndex((i=>i===t));i>=0&&this.Ib.splice(i,1),this.Lb=!0,this.Pb=void 0,this.Ys.Ls()},this.nb=()=>{this.Pb=void 0,this.Lb=!0,this.chart.St.Ls()},this.ob=()=>{this.Lb=!0,this.chart.St.Ls()},this.ab=()=>{this.Pb=void 0,this.Lb=!0,this.chart.St.Ls()},this.lb=(t,i)=>{this.setPointerEvents(i)},this.Bb=t=>this.getPointerEvents()}yy(){return this.Ib.length>0}Le(){super.Le(),this.Lb&&(this.Db(this.Ib),this.Lb=!1)}clear(){return this.Ib.slice().forEach(ci),this.Ib.length=0,this.Lb=!0,this.Pb=void 0,this.Ys.Ls(),this}Eb(t,i){void 0!==i?this.Ib.splice(i,0,t):this.Ib.push(t),this.Lb=!0,this.Rb&&this.Rb(t),this.D.$t(t),this.Ys.Ls()}Qv(){return this.qv&&this.Ib.length>0&&this.getVisible()}setDefaultStyle(t){this.Rb=t,this.Ib.forEach(t),t(this.zb);for(let t=0;t<this.ds.length;t+=1)this.styleLegendEntry(this.ds[t]);return this.Lb=!0,this.chart.St.Ls(),this}setVisible(t){return super.setVisible(t),t!==this.getVisible()&&this.Ib.forEach((i=>i.setVisible(t))),this}Cb(){return this.Pb||(this.Pb=this.Vb()),this.Pb.max.x}kb(){return this.Pb||(this.Pb=this.Vb()),this.Pb.min.x}Tb(){return this.Pb||(this.Pb=this.Vb()),this.Pb.max.y}Fb(){return this.Pb||(this.Pb=this.Vb()),this.Pb.min.y}Dr(){return r(0,0)}Vb(){const t=c(n(bs,bs),n(xs,xs));for(let i=0;i<this.Ib.length;i+=1)if(this.Ib[i].getVisible()){const s=this.Ib[i].mb();t.min.x=Math.min(t.min.x,s.min.x),t.min.y=Math.min(t.min.y,s.min.y),t.max.x=Math.max(t.max.x,s.max.x),t.max.y=Math.max(t.max.y,s.max.y)}return t}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ib.length>0?this.Ib[0].getDominantStyle():this.zb.getDominantStyle()})}}const su=(t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:e+i*s,y:t[s]};return h};class eu extends Kc{constructor(t,i,s,e,h,r,n,o,a,l,c){super(t,i,s,e,h,r,n,o,l,c),this.Ob=[],this.Xc=[],this.Nb=0,this.Gb=!1,this.cs=Ee.onHover,this.D=new zt,this.chart.St.Zo(Gr.Zn),this.$b=a}yy(){return this.getPointAmount()>0}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.Nb=void 0!==i&&i>0?i:0,this.Ys.Ls(),this}add(t){if(0!==this.Ob.length&&this.chart.St.Zo(Gr.qn),Array.isArray(t)?this.Ub(t):this.Ub([t]),this.Xc.length>0){const t=this.Xc[this.Xc.length-1];this.Yb={x:t.x,y:t.y}}return this}addArrayX(t,i=1,s){let e=s;return e||(e=this.Yb?this.Yb.y+i:0),this.add(((t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:t[s],y:e+i*s};return h})(t,i,e)),this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.Yb?this.Yb.x+i:0),this.add(su(t,i,e)),this}addArraysXY(t,i){if(t.length!==i.length)throw new Error("arrayX and arrayY lengths are not equal");return this.add(((t,i)=>{const s=new Array(t.length);for(let e=0;e<t.length;e+=1)s[e]={x:t[e],y:i[e]};return s})(t,i)),this}getPointAmount(){return this.Ob.reduce(((t,i)=>t+i.El()+i.Rl()),this.Xc.length)}clear(){this.Hb=void 0;for(let t=0;t<this.Ob.length;t+=1)this.Ob[t].ti();return this.Xc.length=0,this.Yb=void 0,this.Ys.Ls(),this.D.R("dataclear",{}),this}getLastPoint(){return this.Yb}Qv(){return this.qv&&this.getPointAmount()>0&&this.getVisible()}Cb(){return this.$b.getXMax(this.Ob,this.Hb)||0}kb(){return this.$b.getXMin(this.Ob,this.Hb)||0}Tb(){return this.$b.getYMax(this.Ob,this.Hb)||0}Fb(){return this.$b.getYMin(this.Ob,this.Hb)||0}Dr(){const t=r(0,0);for(const i of this.Ob)t.x=Math.max(t.x,i.Wl()),t.y=Math.max(t.y,i.jl());return t}Xb(t,i,s,e){this.$b.Xb(t,i,s,e,this.scale,(t=>{}))}hy(){super.hy(),this.Wb&&this.Xb(this.Ob,this.getPointAmount(),this.Wb,this.Nb)}Le(){super.Le();const t=this.getBoundaries();this.Xc.length>0&&(this.jb(this.Xc),this.Xc=[]);for(const i of this.Ob)i.Pt(t);return super.Le()}vv(){super.vv(),this.Hb=void 0,this.Xc.length=0}Ub(t){0!==t.length&&(this.Hb?this.Hb=Os(this.Hb,zs(t)):this.Hb=zs(t),this.D.R("dataadd",{data:t,boundaries:this.Hb}),this.Xc=Ui(this.Xc,t,{canReturnB:!1}),this.Ys.Ls())}Zb(){return tu(this.Ob)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const hu=(t,i,s,e)=>{let h,r,n=Number.MAX_VALUE;for(let o=0;o<i.length;o+=1){const a=i[o],l=s(a,t);if(l){const i=e(t,l);(void 0===h||i<n)&&(h=l,r=a,n=i)}}return h&&r?[h,r]:void 0};class ru extends iu{constructor(t,i,s,e,h,r,n,o,a,l,c,u){super(t,i,s,e,h,r,n,o,l,c),this.Es="Box Series",this.Qb=cs(),this.Jb=t=>ot(this.Hs.toPoint((t.start+t.end)/2,t.median),this.scale,this.Ys.St.ot),this.D=new zt,this.chart.St.Zo(Gr.Jn),this.Hs=a,this.zb=new Jc(this,this.Ys,this.scale,this.ub,ui,ui,ui,ui,(t=>!1),this.Hs,0,0,0,0,0,0,0,this._t).dispose(),this.Kb=new Dl((()=>{const t=this.Ys.Gf(this.scale);return this.ws(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ne(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.lo();return s.Uf(i.start,i.end),s}))))),this.qb=new Dl((()=>{const t=this.Qb.Jt(this.Ys.Bv(this.scale));return this.ws(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ie(s.fillStyle).Fe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.lo();return s.Hl(i.vertices),this.Qb.qt(s,i.figure),s})))),(()=>{this.Qb.ti()}),((t,i)=>{this.ks(i)}))}solveNearest(t,i){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY};if(0===this.Ib.length)return;const h=hu(e,this.Ib.filter((t=>t.getVisible())),this.Jb,Bs);if(!h)return;const r=ot(h[0],this.Ys.St.ot,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],start:h[1].start,end:h[1].end,lowerExtreme:h[1].lowerExtreme,lowerQuartile:h[1].lowerQuartile,median:h[1].median,upperQuartile:h[1].upperQuartile,upperExtreme:h[1].upperExtreme,series:this,axisX:this.axisX,axisY:this.axisY}}Kt(t,i){return As({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,median:0,lowerQuartile:0,upperQuartile:0,lowerExtreme:0,upperExtreme:0,start:0,end:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}Mb(t){if(!(t instanceof be||t instanceof xe))throw new Error("BoxSeries only supports Linear Axes")}Db(t){const i=this.qb.yv(),s=this.Kb.yv();t.forEach((t=>{if(!t.getVisible())return;const e=this.Hs.toPoint((t.start+t.end-t.fb*(t.end-t.start))/2,t.lowerQuartile),h=this.Hs.toPoint((t.end-t.start)*t.fb,t.upperQuartile-t.lowerQuartile),r=this.Hs.toPoint((t.start+t.end)/2,t.lowerQuartile),n=this.Hs.toPoint((t.start+t.end)/2,t.lowerExtreme),o=this.Hs.toPoint((t.start+t.end)/2,t.upperQuartile),a=this.Hs.toPoint((t.start+t.end)/2,t.upperExtreme),l=this.Hs.toPoint((t.start+t.end-t.Ab*(t.end-t.start))/2,t.lowerExtreme),c=this.Hs.toPoint((t.start+t.end+t.Ab*(t.end-t.start))/2,t.lowerExtreme),u=this.Hs.toPoint((t.start+t.end-t.Ab*(t.end-t.start))/2,t.upperExtreme),d=this.Hs.toPoint((t.start+t.end+t.Ab*(t.end-t.start))/2,t.upperExtreme),f=this.Hs.toPoint((t.start+t.end-t.fb*(t.end-t.start))/2,t.median),A=this.Hs.toPoint((t.start+t.end+t.fb*(t.end-t.start))/2,t.median);i.add({Mt:t.Mt,vertices:[{x:e.x,y:e.y},{x:e.x,y:e.y+h.y},{x:e.x+h.x,y:e.y+h.y},{x:e.x+h.x,y:e.y}],figure:t},{fillStyle:t.gb,strokeStyle:t.yb}),s.add({Mt:0,start:r,end:n,figure:t},{strokeStyle:t.Oc}),s.add({Mt:0,start:o,end:a,figure:t},{strokeStyle:t.Oc}),s.add({Mt:0,start:l,end:c,figure:t},{strokeStyle:t.Oc}),s.add({Mt:0,start:u,end:d,figure:t},{strokeStyle:t.Oc}),s.add({Mt:0,start:f,end:A,figure:t},{strokeStyle:t.pb})})),i.finishPlot(),s.finishPlot()}add(t){const i=new Jc(this,this.Ys,this.scale,this.ub,this.nb,this.ob,this.ab,this.lb,this.Bb,this.Hs,t.start,t.end,t.lowerExtreme,t.lowerQuartile,t.median,t.upperQuartile,t.upperExtreme,this._t);return this.Eb(i),this.Lb=!0,this.chart.St.Ls(),i}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class nu extends Qc{constructor(t,i,s,e,h,n,o,a,l,u,d){super(i,s,e,h,n,o,a,l,u),this.dimensions={x:0,y:0,radiusX:0,radiusY:0},this.Sl=c(r(0,0),r(0,0)),this._y=t,this.Ys=i,this.scale=s,this.Ce=Ji(u.ellipseSeriesFillStyle,d),this.ke=Ji(u.ellipseSeriesStrokeStyle,d)}Kt(t,i){const s=this.getDimensions(),e=r(s.x,s.y);return{cursorPosition:{resultTable:e,resultTableScale:this.scale,pointMarker:e,pointMarkerScale:{x:this._y.axisX,y:this._y.axisY}},...e,figure:this,...this.getDimensions(),series:this._y,axisX:this._y.axisX,axisY:this._y.axisY}}mb(){return this.Sl}setDimensions(t){return this.dimensions=t,this.Sl=c(r(t.x-t.radiusX,t.y-t.radiusY),r(t.x+t.radiusX,t.y+t.radiusY)),this.nb(),this.Ys.Ls(),this}getDimensions(){return this.dimensions}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.ob(),this}getFillStyle(){return this.Ce}setStrokeStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.ob(),this}getStrokeStyle(){return this.ke}getDominantStyle(){return this.Ce}}class ou extends iu{constructor(t,i,s,e,h,n,o,a,l,c,u){super(t,i,s,e,h,n,o,a,l,c),this.Es="Ellipse Series",this.Qb=cs(),this.Jb=t=>{const i=t.getDimensions(),s=r(i.x,i.y);return ot(s,this.scale,this.Ys.St.ot)},this.D=new zt,this.chart.St.Zo(Gr.Jn),this.tx=u,this.zb=new nu(this,this.Ys,this.scale,ui,ui,ui,ui,ui,(t=>!1),this._t,this.tx).dispose(),this.qb=new Dl((()=>{const t=this.Qb.Jt(this.Ys.Bv(this.scale));return this.ws(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ie(s.fillStyle).Fe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.lo();return s.Hl(i.vertices),this.Qb.qt(s,i.figure),s})))),(()=>{this.Qb.ti()}),((t,i)=>{this.ks(i)}))}solveNearest(t,i){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY};if(0===this.Ib.length)return;const h=hu(e,this.Ib.filter((t=>t.getVisible())),this.Jb,Bs);if(!h)return;const r=ot(h[0],this.Ys.St.ot,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],...h[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Kt(t,i){return As({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,radiusX:0,radiusY:0,drawSteps:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}Mb(t){if(!(t instanceof be||t instanceof xe))throw new Error("EllipseSeries only supports Linear Axes")}Db(t){const i=this.qb.yv();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=[],h=void 0!==s.drawSteps?s.drawSteps:72;for(let t=0;t<=h;t+=1){const i=t/h*2*Math.PI,r=s.x+s.radiusX*Math.cos(i),n=s.y+s.radiusY*Math.sin(i);e.push({x:r,y:n})}const r=t.getFillStyle(),n=t.getStrokeStyle();i.add({Mt:t.Mt,vertices:e,figure:t},{fillStyle:r,strokeStyle:n})})),i.finishPlot()}add(t){const i=new nu(this,this.Ys,this.scale,this.ub,this.nb,this.ob,this.ab,this.lb,this.Bb,this._t,this.tx).setDimensions(t);return this.Eb(i),this.Lb=!0,this.chart.St.Ls(),i}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class au extends Qc{constructor(t,i,s,e,h,r,n,o,a,l,c){super(i,s,e,h,r,n,o,a,l),this.ix=[],this.Sl=Ms,this._y=t,this.Ys=i,this.scale=s,this.Ce=Ji(l.polygonSeriesFillStyle,c),this.ke=Ji(l.polygonSeriesStrokeStyle,c)}Kt(t,i){const s=this.mb(),e=r((s.min.x+s.max.x)/2,(s.min.y+s.max.y)/2);return{cursorPosition:{resultTable:e,resultTableScale:this.scale,pointMarker:e,pointMarkerScale:{x:this._y.axisX,y:this._y.axisY}},...e,figure:this,coordinates:this.getDimensions(),series:this._y,axisX:this._y.axisX,axisY:this._y.axisY}}mb(){return this.Sl}setDimensions(t){return this.ix=t,this.Sl=zs(this.ix),this.nb(),this.Ys.Ls(),this}getDimensions(){return this.ix}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.ob(),this}getFillStyle(){return this.Ce}setStrokeStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.ob(),this}getStrokeStyle(){return this.ke}getDominantStyle(){return this.Ce}}class lu extends iu{constructor(t,i,s,e,h,n,o,a,l,c,u){super(t,i,s,e,h,n,o,a,l,c),this.Es="Polygon Series",this.Qb=cs(),this.Jb=t=>{const i=t.mb(),s=r((i.min.x+i.max.x)/2,(i.min.y+i.max.y)/2);return ot(s,this.scale,this.Ys.St.ot)},this.D=new zt,this.chart.St.Zo(Gr.Jn),this.tx=u,this.zb=new au(this,this.Ys,this.scale,ui,ui,ui,ui,ui,(t=>!1),this._t,this.tx).dispose(),this.qb=new Dl((()=>{const t=this.Qb.Jt(this.Ys.Bv(this.scale));return this.ws(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ie(s.fillStyle).Fe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.lo();return s.Hl(i.vertices),this.Qb.qt(s,i.figure),s})))),(()=>{this.Qb.ti()}),((t,i)=>{this.ks(i)}))}solveNearest(t,i){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY};if(0===this.Ib.length)return;const h=hu(e,this.Ib.filter((t=>t.getVisible())),this.Jb,Bs);if(!h)return;const r=ot(h[0],this.Ys.St.ot,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],coordinates:h[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Kt(t,i){return As({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,coordinates:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}Mb(t){}Db(t){const i=this.qb.yv();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=t.getFillStyle(),h=t.getStrokeStyle();i.add({Mt:t.Mt,vertices:s,figure:t},{fillStyle:e,strokeStyle:h})})),i.finishPlot()}add(t){const i=new au(this,this.Ys,this.scale,this.ub,this.nb,this.ob,this.ab,this.lb,this.Bb,this._t,this.tx).setDimensions(t);return this.Eb(i),this.Lb=!0,this.chart.St.Ls(),i}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class cu extends Qc{constructor(t,i,s,e,h,n,o,a,l,u,d){super(i,s,e,h,n,o,a,l,u),this.sx={x:0,y:0,width:0,height:0},this.hx={x1:0,y1:0,x2:0,y2:0},this.Sl=c(r(0,0),r(0,0)),this._y=t,this.Ce=Ji(u.rectangleSeriesFillStyle,d),this.Ys=i,this.scale=s,this.ke=Ji(u.rectangleSeriesStrokeStyle,d)}setCornerRadius(t){return this.nx=t,this.nb(),this}getCornerRadius(){return this.nx}Kt(t,i){const s=this.getDimensionsPositionAndSize(),e=r(s.x+s.width/2,s.y+s.height/2);return{cursorPosition:{resultTable:e,resultTableScale:this.scale,pointMarker:e,pointMarkerScale:{x:this._y.axisX,y:this._y.axisY}},...e,figure:this,...this.getDimensionsPositionAndSize(),...this.getDimensionsTwoPoints(),series:this._y,axisX:this._y.axisX,axisY:this._y.axisY}}mb(){return this.Sl}setDimensions(t){return"x"in t?(this.sx=t,this.hx={x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}):(this.hx=t,this.sx={x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}),this.Sl=zs([this.sx,r(this.sx.x+this.sx.width,this.sx.y+this.sx.height)]),this.nb(),this.Ys.Ls(),this}getDimensionsPositionAndSize(){return this.sx}getDimensionsTwoPoints(){return this.hx}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.ob(),this}getFillStyle(){return this.Ce}setStrokeStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.ob(),this}getStrokeStyle(){return this.ke}getDominantStyle(){return this.Ce}}class uu extends iu{constructor(t,i,s,e,h,n,o,a,l,c,u){super(t,i,s,e,h,n,o,a,l,c),this.Es="Rectangle Series",this.ox=cs(),this.Jb=t=>{const i=t.getDimensionsPositionAndSize(),s=r(i.x+i.width/2,i.y+i.height/2);return ot(s,this.scale,this.Ys.St.ot)},this.D=new zt,this.chart.St.Zo(Gr.Jn),this.tx=u,this.zb=new cu(this,this.Ys,this.scale,ui,ui,ui,ui,ui,(t=>!1),this._t,this.tx).dispose(),this.lx=new Dl((()=>{const t=this.ox.Jt(this.Ys.Vu(this.scale));return this.ws(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ie(s.fillStyle).Fe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.lo();return s.$u(i.x1,i.y1,i.x2,i.y2).Gu(i.roundedCorners?{extent:i.roundedCorners,c_x1_y1:!0,c_x1_y2:!0,c_x2_y1:!0,c_x2_y2:!0}:void 0),this.ox.qt(s,i.figure),s})))),(()=>{this.ox.ti()}),((t,i)=>{this.ks(i)}))}solveNearest(t,i){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY};if(0===this.Ib.length)return;const h=hu(e,this.Ib.filter((t=>t.getVisible())),this.Jb,Bs);if(!h)return;const r=ot(h[0],this.Ys.St.ot,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],...h[1].getDimensionsPositionAndSize(),...h[1].getDimensionsTwoPoints(),series:this,axisX:this.axisX,axisY:this.axisY}}Kt(t,i){return As({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,x1:0,y1:0,x2:0,y2:0,width:0,height:0,multiHit:0,figure:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}Mb(t){}Db(t){const i=this.lx.yv();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensionsTwoPoints(),e=t.getFillStyle(),h=t.getStrokeStyle();i.add({Mt:t.Mt,figure:t,roundedCorners:t.nx,...s},{fillStyle:e,strokeStyle:h})})),i.finishPlot()}add(t){const i=new cu(this,this.Ys,this.scale,this.ub,this.nb,this.ob,this.ab,this.lb,this.Bb,this._t,this.tx).setDimensions(t);return this.Eb(i),this.Lb=!0,this.chart.St.Ls(),i}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class du extends Qc{constructor(t,i,s,e,h,n,o,a,l,u,d){super(i,s,e,h,n,o,a,l,u),this.dimensions={startX:0,startY:0,endX:0,endY:0},this.Sl=c(r(0,0),r(0,0)),this._y=t,this._t=u,this.Ys=i,this.scale=s,this.ke=Ji(u.segmentSeriesStrokeStyle,d)}Kt(t,i){const s=this.getDimensions(),e=r((s.startX+s.endX)/2,(s.startY+s.endY)/2);return{cursorPosition:{resultTable:e,resultTableScale:this.scale,pointMarker:e,pointMarkerScale:{x:this._y.axisX,y:this._y.axisY}},...e,figure:this,...this.getDimensions(),series:this._y,axisX:this._y.axisX,axisY:this._y.axisY}}mb(){return this.Sl}setDimensions(t){return this.dimensions=t,this.Sl=c(r(Math.min(t.startX,t.endX),Math.min(t.startY,t.endY)),r(Math.max(t.startX,t.endX),Math.max(t.startY,t.endY))),this.nb(),this.Ys.Ls(),this}getDimensions(){return this.dimensions}setStrokeStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.ob(),this}getStrokeStyle(){return this.ke}getDominantStyle(){const t=this.ke;return t!==Wt?t.getFillStyle():V}}class fu extends iu{constructor(t,i,s,e,h,n,o,a,l,c,u){super(t,i,s,e,h,n,o,a,l,c),this.Es="Segment Series",this.ux=cs(),this.Jb=t=>{const i=t.getDimensions(),s=r((i.startX+i.endX)/2,(i.startY+i.endY)/2);return ot(s,this.scale,this.Ys.St.ot)},this.D=new zt,this.chart.St.Zo(Gr.Jn),this.tx=u,this.zb=new du(this,this.Ys,this.scale,ui,ui,ui,ui,ui,(t=>!1),this._t,this.tx).dispose(),this.Kb=new Dl((()=>{const t=this.ux.Jt(this.Ys.Gf(this.scale));return this.ws(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ne(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.lo();return s.Uf(i.start,i.end),this.ux.qt(s,i.figure),s})))),(()=>{this.ux.ti()}),((t,i)=>{this.ks(i)}))}solveNearest(t,i){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY};if(0===this.Ib.length)return;const h=hu(e,this.Ib.filter((t=>t.getVisible())),this.Jb,Bs);if(!h)return;const r=ot(h[0],this.Ys.St.ot,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],...h[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Kt(t,i){return As({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,startX:0,startY:0,endX:0,endY:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}Mb(t){}Db(t){const i=this.Kb.yv();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e={x:s.startX,y:s.startY},h={x:s.endX,y:s.endY},r=t.getStrokeStyle();i.add({Mt:t.Mt,start:e,end:h,figure:t},{strokeStyle:r})})),i.finishPlot()}add(t){const i=new du(this,this.Ys,this.scale,this.ub,this.nb,this.ob,this.ab,this.lb,this.Bb,this._t,this.tx).setDimensions(t);return this.Eb(i),this.Lb=!0,this.chart.St.Ls(),i}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Au={x:0,y:0};class gu extends Qc{constructor(t,i,s,e,h,r,n,o,a,l,c){var u;super(i,s,e,h,r,n,o,a,l),this.Da="Text",this.wo=Au,this.Td=Au,this.Ga=0,this.oi=us,this._y=t,this.Ce=l.textSeriesFillStyle?Ji(l.textSeriesFillStyle,c):l.uiTextFillStyle,this.pn=null!==(u=l.textSeriesFont)&&void 0!==u?u:l.uiTextFont,this.vl=this.Ys.Yr(s).mr(l.textSeriesShadow),this.vl.Ea=!0,this.D.Nt(this.vl,{getExtraData:(t,i,s)=>this.Kt(s,t)}),this.addEventListener("dispose",(()=>this.vl.dispose()))}Kt(t,i){const s=this.wo;return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this._y.axisX,y:this._y.axisY}},...s,figure:this,series:this._y,axisX:this._y.axisX,axisY:this._y.axisY}}mb(){return{min:{x:this.wo.x,y:this.wo.y},max:{x:this.wo.x,y:this.wo.y}}}Ax(){this.vl.Sr(this.Da).Be(this.wo).ul(this.Td).Wh(this.Ga).$r(this.oi).Ie(this.Ce).Xh(this.pn)}getSizePixels(){return this.Ax(),this.vl.hr().zu()}getBoundingBox(){this.Ax();const t=this.vl.hr().Kg();return 4!==t.length?Ms:{min:{x:Math.min(t[0].x,t[1].x,t[2].x,t[3].x),y:Math.min(t[0].y,t[1].y,t[2].y,t[3].y)},max:{x:Math.max(t[0].x,t[1].x,t[2].x,t[3].x),y:Math.max(t[0].y,t[1].y,t[2].y,t[3].y)}}}setText(t){return this.Da=t,this.nb(),this}getText(){return this.Da}setLocation(t){return this.wo=t,this.nb(),this}getLocation(){return this.wo}setAlignment(t){return this.Td=t,this.nb(),this}getAlignment(){return this.Td}setRotation(t){return this.Ga=t,this.nb(),this}getRotation(){return this.Ga}setMargin(t){return this.oi=g(this.oi,t),this.nb(),this}getMargin(){return this.oi}setLabelShadow(t){return this.vl.mr(t),this.Ys.Ls(),this}getLabelShadow(){return this.vl.el()}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.ob(),this}getFillStyle(){return this.Ce}setFont(t){return this.pn="function"==typeof t?t(this.pn):t,this.ob(),this}getFont(){return this.pn}getDominantStyle(){return this.Ce}}class vu extends iu{constructor(t,i,s,e,h,r,n,o,a,l,c){super(t,i,s,e,h,r,n,o,a,l),this.Es="Text Series",this.Jb=t=>ot(t.getLocation(),this.scale,this.Ys.St.ot),this.D=new zt,this.tx=c,this.zb=new gu(this,this.Ys,this.scale,ui,ui,ui,ui,ui,(t=>!1),this._t,this.tx).dispose()}Mb(t){}Db(t){t.forEach((t=>{t.Ax(),t.vl.setVisible(t.getVisible())}))}add(t){const i=new gu(this,this.Ys,this.scale,this.ub,this.nb,this.ob,this.ab,this.lb,this.Bb,this._t,this.tx);return(null==t?void 0:t.alignment)&&i.setAlignment(t.alignment),(null==t?void 0:t.fillStyle)&&i.setFillStyle(t.fillStyle),(null==t?void 0:t.font)&&i.setFont(t.font),(null==t?void 0:t.location)&&i.setLocation(t.location),(null==t?void 0:t.margin)&&i.setMargin(t.margin),void 0!==(null==t?void 0:t.rotation)&&i.setRotation(t.rotation),(null==t?void 0:t.text)&&i.setText(t.text),this.Eb(i),this.Lb=!0,this.ws(i.vl,{setEventHandlers:!1,isText:!0}),this.chart.St.Ls(),this.D.Nt(i.vl,{getExtraData:(t,s,e)=>i.Kt(e,t)}),i}Kt(t,i){return As({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}solveNearest(t,i){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY};if(0===this.Ib.length)return;const h=hu(e,this.Ib.filter((t=>t.getVisible())),this.Jb,Bs);if(!h)return;const r=ot(h[0],this.Ys.St.ot,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],series:this,axisX:this.axisX,axisY:this.axisY}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class yu extends Kc{constructor(t,i,s,e,h,r,n,o,a,l,c,u){super(t,i,s,e,h,r,n,o,l,c),this.Es="Heatmap Grid Series",this.lp={},this.chart.St.Zo(Gr.Qn),this.gx=a,this._t=l;const d=u;this.Ce=Ji(l.heatmapGridSeriesFillStyle,d),this.cp=Ji(this._t.heatmapGridSeriesWireframeStyle,d);const f={heatmapDataType:"intensity",dataOrder:a.dataOrder||"columns",columns:a.columns,rows:a.rows};this.Ko=f,this.vx=this.Ys.yx(this.scale,[],f).Ie(this.Ce).up(this.cp).Bt(this.getHighlight()),this.ws(this.vx),this.setHighlightOnHover(!1)}solveNearest(t,i="show-nearest"){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=ot(e,this.Ys.St.ot,this.scale),r=Ha(i)?this.vx.QS(h):this.vx.Ru(h);if(r)return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:r.x,y:r.y,column:r.column,row:r.row,intensity:r.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:j(this.Ce)?this.Ce.lut:void 0}}Kt(t,i){return As({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,intensity:0,column:0,row:0,lut:j(this.Ce)?this.Ce.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}fp(){const t=this.lp.start||{x:0,y:0};let i;i=this.lp.end?{x:(this.lp.end.x-t.x)/this.Ko.columns,y:(this.lp.end.y-t.y)/this.Ko.rows}:this.lp.step?this.lp.step:{x:1,y:1},this.vx.Ap(t,i),this.chart.St.Ls()}setStart(t){return this.lp.start=t,this.fp(),this}getStart(){return this.vx.gp().start}setStep(t){return this.lp.step=t,this.fp(),this}getStep(){return this.vx.gp().step}setEnd(t){return this.lp.end=t,this.fp(),this}getEnd(){return this.vx.gp().end}Qv(){return this.qv&&this.getVisible()}Gs(){return ji(this.Ce,this.vx.Tt())}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce})}mx(t){this.vx.mx().forEach((i=>{t.vx.mp(i)}))}Cb(){const t=this.vx;return t?t.jt():void 0}kb(){const t=this.vx;return t?t.Wt():void 0}Tb(){const t=this.vx;return t?t.Qt():void 0}Fb(){const t=this.vx;return t?t.Zt():void 0}Dr(){const t=r(0,0);return t.x=Math.max(t.x,this.vx.Wl()),t.y=Math.max(t.y,this.vx.jl()),t}Mb(t){if(!(t instanceof be))throw new Error("HeatmapGridSeries can only be attached to a pair of Linear Axes.")}De(t,i){t.Bt(i),this.Ys.Ls()}Le(){return super.Le(),this.vx.Pt(this.getBoundaries()),this}}class pu extends yu{constructor(t,i,s,e,h,r,n,o,a,l,c,u){super(t,i,s,e,h,r,n,o,a,l,c,u),this.Ay=!1,this.D=new zt}yy(){return this.Ay}invalidateIntensityValues(t){if(this.Ay&&this.chart.St.Zo(Gr.qn),Array.isArray(t)){if(0===t.length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Ko.dataOrder?t.length:t[0].length,rows:"rows"===this.Ko.dataOrder?t.length:t[0].length},s="columns"===this.Ko.dataOrder?this.Ko.columns:this.Ko.rows,e="columns"===this.Ko.dataOrder?this.Ko.rows:this.Ko.columns;if(i.x>s||i.y>e){if(!0===this.chart.aA.qo){const t=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Ko.columns}x${this.Ko.rows}, input ${i.columns}x${i.rows}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;ni.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.vx.mp({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Ko.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Ko.dataOrder?t.values.length:t.values[0].length},s="columns"===this.Ko.dataOrder?t.iColumn:t.iRow,e=s+i.primary-1,h="columns"===this.Ko.dataOrder?t.iRow:t.iColumn,r=h+i.secondary-1,n=("columns"===this.Ko.dataOrder?this.Ko.columns:this.Ko.rows)-1,o=("columns"===this.Ko.dataOrder?this.Ko.rows:this.Ko.columns)-1;if(s<0||h<0){if(!0===this.chart.aA.qo){const i=`HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niColumn: ${t.iColumn}, iRow: ${t.iRow}.\nNo intensity values will be invalidated.`;ni.console.warn(i)}return this}if(e>n||r>o){if(!0===this.chart.aA.qo){const s=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Ko.columns}x${this.Ko.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;ni.console.warn(s)}const s=Math.max(e-n,0),h=i.primary-s,a=Math.max(r-o,0),l=[];for(let i=0;i<h;i+=1)l[i]=t.values[i].slice(0,a>0?-a:void 0);t={iColumn:t.iColumn,iRow:t.iRow,values:l}}this.vx.mp({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.D.R("invalidateintensity",{value:t}),this.Ys.Ls(),this.Ay=!0,this}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.vx.Ie(this.Ce),this.D.R("stylechange",{}),this.Ys.Ls(),this}getFillStyle(){return this.Ce}setIntensityInterpolation(t){return t=t||"disabled",this.vx.yp(t),this.Ys.Ls(),this.D.R("stylechange",{}),this}getIntensityInterpolation(){return this.vx.pp()}clear(){return this.vx.ti(),this.Ys.Ls(),this.D.R("dataclear",{}),this}setWireframeStyle(t){return this.cp="function"==typeof t?t(this.cp):t,this.vx.up(this.cp),this.Ys.Ls(),this.D.R("stylechange",{}),this}getWireframeStyle(){return this.cp}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class mu extends Kc{constructor(t,i,s,e,h,r,n,o,a,l,c,u){super(t,i,s,e,h,r,n,o,l,c),this.Es="Scrolling Heatmap Grid Series",this.lp={},this.chart.St.Zo(Gr.Qn),this.chart.St.Zo(Gr.qn);const d=u;this.Ce=Ji(l.heatmapScrollingGridSeriesFillStyle,d),this.cp=Ji(this._t.heatmapScrollingGridSeriesWireframeStyle,d);const f={scrollDimension:"columns",heatmapDataType:"intensity",...a};this.Ko=f,this.Sx=this.Ys.bx(this.scale,[],f).Ie(this.Ce).up(this.cp).Bt(this.getHighlight()),this.ws(this.Sx),this.setHighlightOnHover(!1)}yy(){return this.Sx._p()>0}solveNearest(t,i="show-nearest"){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=ot(e,this.Ys.St.ot,this.scale),r=Ha(i)?this.Sx.QS(h):this.Sx.Ru(h);if(r)return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:r.x,y:r.y,column:r.column,row:r.row,intensity:r.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:j(this.Ce)?this.Ce.lut:void 0}}Kt(t,i){return As({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,intensity:0,multiHit:0,column:0,row:0,lut:j(this.Ce)?this.Ce.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}fp(){const t=this.lp.start||{x:0,y:0};let i;i=this.lp.step?this.lp.step:{x:1,y:1},this.Sx.Ap(t,i),this.chart.St.Ls()}setStart(t){return this.lp.start=t,this.fp(),this}getStart(){return this.Sx.gp().start}setStep(t){return this.lp.step=t,this.fp(),this}getStep(){return this.Sx.gp().step}clear(){return this.Sx.ti(),this.Ys.Ls(),this}setWireframeStyle(t){return this.cp="function"==typeof t?t(this.cp):t,this.Sx.up(this.cp),this.Ys.Ls(),this}getWireframeStyle(){return this.cp}setPixelInterpolationMode(t){return t=t||"disabled",this.Sx.yp(t),this.Ys.Ls(),this}getPixelInterpolationMode(){return this.Sx.pp()}setDataCleaning(t){return this.Sx.jc(t),this.Ys.Ls(),this}Qv(){return this.qv&&this.getVisible()}Gs(){return ji(this.Ce,this.Sx.Tt())}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce})}Ie(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.Sx.Ie(this.Ce),this.Ys.Ls(),this}Mb(t){if(!(t instanceof be))throw new Error("HeatmapScrollingGridSeries can only be attached to a pair of Linear Axes.")}Cb(){return this.Sx.jt()||0}kb(){return this.Sx.Wt()||0}Tb(){return this.Sx.Qt()||0}Fb(){return this.Sx.Zt()||0}Dr(){const t=r(0,0);return t.x=Math.max(t.x,this.Sx.Wl()),t.y=Math.max(t.y,this.Sx.jl()),t}De(t,i){t.Bt(i),this.Ys.Ls()}}class Su extends mu{constructor(t,i,s,e,h,r,n,o,a,l,c,u){super(t,i,s,e,h,r,n,o,a,l,c,u),this.D=new zt}addIntensityValues(t){if(0===t.length||0===t[0].length)return this;const i=t.length,s=t[0].length,e=("columns"===this.Ko.scrollDimension?t.length:t[0].length,"rows"===this.Ko.scrollDimension?t.length:t[0].length,0+s-1),h=this.Ko.resolution-1;if(e>h){if(!0===this.chart.aA.qo){const t=`HeatmapScrollingGridSeries.addIntensityValues intensity matrix overflow.\nGrid resolution: ${this.Ko.resolution}, input ${i}x${s}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;ni.console.warn(t)}const e=[];for(let s=0;s<i;s+=1)e[s]=t[s].slice(0,h+1);t=e}return this.Sx.wp(t),this.Ys.Ls(),this}invalidateIntensityValues(t){return this.Sx.mp(t.iSample,t.values),this.Ys.Ls(),this}getSampleCount(){return this.Sx._p()}setFillStyle(t){return this.Ie(t),this}getFillStyle(){return this.Ce}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const bu=(t,i,s)=>{let e,h,r=Number.MAX_VALUE;for(let n=0;n<i.length;n+=1){const o=i[n],a=s(o,t);if(a){const i=Bs(t,a[0]),s=Bs(t,a[1]);(void 0===e||i<r||s<r)&&(e=a,h=o,i<r?r=i:s<r&&(r=s))}}return e&&h?[e,h]:void 0};class xu extends Kc{constructor(){super(...arguments),this.Ob=[],this.Xc=[],this.xx=[],this.Mx=[],this.Wb=1e3,this.Nb=0,this.cs=Ee.onHover,this.Jl={type:"disabled",packager:(t,i,s)=>t.slice()},this.wx=[],this._x=[],this.Cx=!1,this.kx=(t,i)=>{const s=t.ib(i);if(s)return[ot(s[0],this.scale,this.Ys.St.ot),ot(s[1],this.scale,this.Ys.St.ot)]},this.Tx=(t,i)=>{const s=t.Fx(i);if(s)return[ot(s[0],this.scale,this.Ys.St.ot),ot(s[1],this.scale,this.Ys.St.ot)]},this.Ix=t=>{const i=t.length;if(this.Ob.length>0){const s=this.Ob.length-1,e=this.Ob[s];if(i>0){const[i,s]=e.Tl(),[h,n]=e.kl();if((h?i.length+h.length:i.length)>=this.Wb){const a=h&&h.length>0?h[h.length-1]:i[i.length-1],l=n&&n.length>0?n[n.length-1]:s[i.length-1],u=(a.x+t[0].position)/2,d=te(u,a,r(t[0].position,t[0].high)).y,f=te(u,l,r(t[0].position,t[0].low)).y,A=o(u,d,f);e.Dl(A,c(r(u,f),r(u,d))).dc(!0),this.Px([A].concat(t)).cc(!0)}else e.Dl(t)}}else i>0&&this.Px(t)},this.Lx=t=>{const i=this.wx,s=t.length;if(this.wx.length>0){if(s>0){const s=i[i.length-1],e=s.Tl(),h=s.kl();if(e.length+h.length>=this.Wb){const n=h.length>0?h[h.length-1]:e[e.length-1],o=(n.x+t[0].x)/2,a=te(o,n,r(t[0].x,t[0].y)).y,l=r(o,a);s.Dl(l,c(r(o,a),r(o,a))).dc(!0),i.push(this.Bx([l].concat(t),this.Hb).cc(!0))}else s.Dl(t)}}else s>0&&i.push(this.Bx(t))},this.Dx=t=>{const i=this._x,s=t.length;if(this._x.length>0){if(s>0){const s=i[i.length-1],e=s.Tl(),h=s.kl();if(e.length+h.length>=this.Wb){const n=h.length>0?h[h.length-1]:e[e.length-1],o=(n.x+t[0].x)/2,a=te(o,n,r(t[0].x,t[0].y)).y,l=r(o,a);s.Dl(l,c(r(o,a),r(o,a))).dc(!0),i.push(this.Ex([l].concat(t)).cc(!0))}else s.Dl(t)}}else s>0&&i.push(this.Ex(t))}}Ms(){return"ProgressiveX"}yy(){return this.getPointAmount()>0}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.Nb=void 0!==i&&i>0?i:0,this.Ys.Ls(),this}clear(){for(let t=0;t<this.Ob.length;t+=1)this.Ob[t].dispose();for(let t=0;t<this.wx.length;t+=1)this.wx[t].dispose();for(let t=0;t<this._x.length;t+=1)this._x[t].dispose();return this.Xc.length=0,this.xx.length=0,this.Mx.length=0,this.Hb=void 0,this.Ob.length=0,this.wx.length=0,this._x.length=0,this.Ys.Ls(),this.D.R("dataclear",{}),this}getPointAmount(){return this.Ob.reduce(((t,i)=>t+i.El()+i.Rl()),this.Xc.length)}Cb(){return wi(this.Ob,yi,Math.max,bi,this.Hb)||0}kb(){return wi(this.Ob,vi,Math.min,Si,this.Hb)||0}Tb(){return wi(this.Ob,mi,Math.max,Mi,this.Hb)||0}Fb(){return wi(this.Ob,pi,Math.min,xi,this.Hb)||0}Dr(){const t=r(0,0);for(const i of this.Ob)t.x=Math.max(t.x,i.Wl()),t.y=Math.max(t.y,i.jl());return t}Gs(){return ji(this.Rx,void 0)||ji(this.zx,void 0)}Qv(){return this.qv&&this.getPointAmount()>0&&this.getVisible()}Mb(t){}Ub(t,i,s){this.Xc=Ui(this.Xc,t,{canReturnB:!1}),this.xx=Ui(this.xx,i,{canReturnB:!1}),this.Mx=Ui(this.Mx,s,{canReturnB:!1}),this.Ys.Ls()}Vx(t,i,s,e){this.Ox(i,s,e),this.Ub(Array.isArray(t)?t:[t],i,s)}Ox(t,i,s){const e=Os(zs(t),zs(i));this.Hb?this.Hb=Os(this.Hb,e):this.Hb=e,s&&(this.Hb=Os(this.Hb,s))}Nx(){const t=this.Ob.length,i=Math.min(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd());let s=0;if(t>1)for(let e=0;e<t-1;e+=1)this.scale.x.Pi(this.Ob[e].jt(),this.Ob[e].Wl())<i&&(s+=1);return s}Xb(t,i,s,e){if(s>0){const h=Math.ceil(s/i),r=t.length-h;if(r>0&&e>0){const i=r-e>0?e:r;if(i>0){for(let s=0;s<i;s+=1)t[s].dispose();t.splice(0,i)}}}}Gx(t){const i=this.Ob.length>0?this.Ob[this.Ob.length-1]:void 0,s=i?i.Tl()[0].length+(i.kl()[0]?i.kl()[0].length:0):void 0;qc(t,s,this.Wb,this.Ix)}$x(t){const i=this.wx.length>0?this.wx[this.wx.length-1].Tl().length+this.wx[this.wx.length-1].kl().length:void 0;qc(t,i,this.Wb,this.Lx)}Ux(t,i){const s=this.wx.length>0?this.wx[this.wx.length-1].Tl().length+this.wx[this.wx.length-1].kl().length:void 0;qc(t,s,this.Wb,this.Lx),qc(i,s,this.Wb,this.Dx)}Px(t,i){const s=this.Ys.Yx(this.scale).Dl(t,i).Ie(this.Rx).ac(this.zx).nc(this.Jl).Bt(this.getHighlight());return this.Ob.push(s),this.ws(s),s}Hx(t,i,s){const e=this.Ys.tv(this.scale,void 0,[Cl.UserSeries]).Dl(t,s).setPointerEvents(!1).Ne(i).Bt(this.getHighlight());return this.ws(e),e}Bx(t,i){return this.Hx(t,this.Xx,i)}Ex(t,i){return this.Hx(t,this.Wx,i)}jx(t){this.Rx="function"==typeof t?t(this.Rx):t;const i=this.Rx;for(let t=0;t<this.Ob.length;t+=1)this.Ob[t].Ie(i);this.Ys.Ls()}Zx(t){this.zx="function"==typeof t?t(this.zx):t;const i=this.zx;for(let t=0;t<this.Ob.length;t+=1)this.Ob[t].ac(i);this.Ys.Ls()}Qx(){return this.Rx}lc(){return this.zx}Jx(t){this.Xx="function"==typeof t?t(this.Xx):t;const i=this.Xx;for(let t=0;t<this.wx.length;t+=1)this.wx[t].Ne(i);this.Ys.Ls()}Kx(t){this.Wx="function"==typeof t?t(this.Wx):t;const i=this.Wx;for(let t=0;t<this._x.length;t+=1)this._x[t].Ne(i);this.Ys.Ls()}qx(){return this.Xx}tM(){return this.Wx}De(t,i){t.Bt(i),this.iM(i),this.Ys.Ls()}iM(t){for(let i=0;i<this.wx.length;i+=1)this.wx[i].Bt(t);for(let i=0;i<this._x.length;i+=1)this._x[i].Bt(t)}hy(){if(super.hy(),this.Cx=!1,this.Nb>0){const t=this.Nx();this.Xb(this.Ob,this.Wb,this.Nb,t),this.wx.length>0&&this.Xb(this.wx,this.Wb,this.Nb,t),this._x.length>0&&this.Xb(this._x,this.Wb,this.Nb,t),this.Cx=!0}}Le(){if(super.Le(),this.Xc.length>0&&(this.Gx(this.Xc),this.sM(this.xx,this.Mx),this.Cx=!0),this.Cx){const t=this.getBoundaries();for(const i of this.Ob)i.Pt(t);for(const i of this.wx)i.Pt(t);for(const i of this._x)i.Pt(t)}}vv(){super.vv(),this.Hb=void 0,this.Xc.length=0,this.xx.length=0,this.Mx.length=0}}class Mu extends xu{constructor(t,i,s,e,h,r,n,o,a=0,l,c){super(t,i,s,e,h,r,n,o,l,c),this.D=new zt,this.chart.St.Zo(Gr.Zn),this.eM=a}add(t){0!==this.Ob.length&&this.chart.St.Zo(Gr.qn);const i=Array.isArray(t)?t:[t];if(i.length>0){const t=this.hM(i),[s,e]=this.rM(t);this.Vx(t,s,e,c(r(bs,this.eM),r(xs,this.eM)));const h=this.Xc[this.Xc.length-1];this.Yb=h?{position:h.position,high:h.high,low:h.low}:void 0,this.D.R("dataadd",{data:i,boundaries:this.Hb})}return this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.Yb?this.Yb.position+i:0),this.add(su(t,i,e)),this}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class wu extends Mu{constructor(t,i,s,e,h,r,n,o,a,l,c){super(t,i,s,e,h,r,n,o,a,l,c);const u=t.getSeries().length;this.Rx=Ji(this._t.areaSeriesBipolarHighFillStyle,u),this.Xx=Ji(this._t.areaSeriesBipolarHighStrokeStyle,u),this.zx=Ji(this._t.areaSeriesBipolarLowFillStyle,u),this.Wx=Ji(this._t.areaSeriesBipolarLowStrokeStyle,u)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=bu(e,this.Ob,Ha(i)?this.Tx:this.kx);if(void 0!==h&&void 0!==h[0]){const t=ot(h[0][0],this.Ys.St.ot,this.scale),i=ot(h[0][1],this.Ys.St.ot,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY,multiHit:[t,i]}}}hM(t){return this.nM(t)}sM(t,i){return this.Ux(t,i)}nM(t){let i=0;const s=[],e=t.length,h=this.eM;return e>0&&(this.oM&&(this.oM.y<=h&&h<=t[0].y||this.oM.y>=h&&h>=t[0].y)&&(s[i]=o(.5*(this.oM.x+t[0].x),h,h),i+=1),this.oM=t[e-1],1===e?this.aM(t[0],s,i):this.lM(t,s)),s}aM(t,i,s=0){return i[s]=o(t.x,t.y,this.eM),s+1}lM(t,i){let s=0,e=0;const h=t.length-1,r=this.eM;for(;e<h;){const h=t[e],n=t[e+=1],a=o(h.x,h.y,r);if(0!==s&&_i(i[s-1],a)||(i[s]=a,s+=1),h.y<=r&&r<=n.y||h.y>=r&&r>=n.y){const t=h.y,e=n.y,a=r,l=t===e?n.x:Ue(h.x,n.x,(a-t)/(e-t));i[s]=o(l,r,r),s+=1}i[s]=o(n.x,n.y,r),s+=1}return s}rM(t){const i=t.length,s=Array(i),e=Array(i),h=this.eM;for(let n=0;n<i;n+=1){const i=t[n];i.high>h?(s[n]=r(i.position,i.high),e[n]=r(i.position,h)):i.high<h?(s[n]=r(i.position,h),e[n]=r(i.position,i.high)):(s[n]=r(i.position,i.high),e[n]=r(i.position,i.high))}return[s,e]}Zb(){return tu(this.Ob,(t=>t[0]))}setPositiveFillStyle(t){return this.jx(t),this}setNegativeFillStyle(t){return this.Zx(t),this}setPositiveStrokeStyle(t){return this.Jx(t),this}setNegativeStrokeStyle(t){return this.Kx(t),this}getPositiveFillStyle(){return this.Qx()}getNegativeFillStyle(){return this.lc()}getPositiveStrokeStyle(){return this.qx()}getNegativeStrokeStyle(){return this.tM()}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Rx,fill2:this.zx,behavior:{colorStep:!0}})}}class _u extends Mu{constructor(){super(...arguments),this.Wx=Wt}sM(t){return this.$x(t)}rM(t){const i=t.length,s=Array(i);for(let e=0;e<i;e+=1){const i=t[e];s[e]=r(i.position,i.high)}return[s,[]]}setStrokeStyle(t){return this.Jx(t),this}getStrokeStyle(){return this.qx()}}class Cu extends _u{constructor(t,i,s,e,h,r,n,o,a,l,c){super(t,i,s,e,h,r,n,o,a,l,c);const u=t.getSeries().length;this.Rx=V,this.zx=Ji(this._t.areaSeriesNegativeFillStyle,u),this.Xx=Ji(this._t.areaSeriesNegativeStrokeStyle,u)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=bu(e,this.Ob,Ha(i)?this.Tx:this.kx);if(void 0!==h&&void 0!==h[0]){const t=ot(h[0][0],this.Ys.St.ot,this.scale),i=ot(h[0][1],this.Ys.St.ot,this.scale),s=t.y<i.y?t:i;return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.axisX,y:this.axisY}},...s,series:this,axisX:this.axisX,axisY:this.axisY}}}hM(t){return this.cM(t)}cM(t){const i=[];return 1===t.length?this.aM(t[0],i):this.lM(t,i),i}aM(t,i,s=0){const e=this.eM;return i[s]=t.y>e?o(t.x,e,e):o(t.x,t.y,e),s+1}lM(t,i,s=0){let e=0;const h=t.length-1,n=this.eM;for(;e<h;){const h=t[e],a=t[e+=1];if(h.y<=n){const t=o(h.x,h.y,n);if(0!==s&&_i(i[s-1],t)||(i[s]=t,s+=1),a.y>n){const t=re(r(xs,n),r(bs,n),h,a);t&&(i[s]=o(t.x,t.y,n),s+=1),i[s]=o(a.x,n,n),s+=1}else i[s]=o(a.x,a.y,n),s+=1}else{const t=o(h.x,n,n);if(0!==s&&_i(i[s-1],t)||(i[s]=t,s+=1),a.y<=n){const t=re(r(xs,n),r(bs,n),h,a);t&&(i[s]=o(t.x,t.y,n),s+=1),i[s]=o(a.x,a.y,n),s+=1}else i[s]=o(a.x,n,n),s+=1}}return s}Zb(){return tu(this.Ob,(t=>t[1]))}setFillStyle(t){return this.Zx(t),this}getFillStyle(){return this.lc()}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.zx,stroke:this.Xx})}}class ku extends _u{constructor(t,i,s,e,h,r,n,o,a,l,c,u){super(t,i,s,e,h,r,n,o,a,l,c);const d=u;this.Rx=Ji(this._t.areaSeriesPositiveFillStyle,d),this.zx=V,this.Xx=Ji(this._t.areaSeriesPositiveStrokeStyle,d)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=bu(e,this.Ob,Ha(i)?this.Tx:this.kx);if(void 0!==h&&void 0!==h[0]){const t=ot(h[0][0],this.Ys.St.ot,this.scale),i=ot(h[0][1],this.Ys.St.ot,this.scale),s=t.y<i.y?i:t;return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.axisX,y:this.axisY}},...s,series:this,axisX:this.axisX,axisY:this.axisY}}}hM(t){return this.uM(t)}uM(t){const i=[];return 1===t.length?this.aM(t[0],i):this.lM(t,i),i}aM(t,i,s=0){const e=this.eM;return i[s]=t.y<e?o(t.x,e,e):o(t.x,t.y,e),s+1}lM(t,i,s=0){let e=0;const h=t.length-1,n=this.eM;for(;e<h;){const h=t[e],a=t[e+=1];if(h.y>=n){const t=o(h.x,h.y,n);if(0!==s&&_i(i[s-1],t)||(i[s]=t,s+=1),a.y<n){const t=re(r(xs,n),r(bs,n),h,a);t&&(i[s]=o(t.x,t.y,n),s+=1),i[s]=o(a.x,n,n),s+=1}else i[s]=o(a.x,a.y,n),s+=1}else{const t=o(h.x,n,n);if(0!==s&&_i(i[s-1],t)||(i[s]=t,s+=1),a.y>=n){const t=re(r(xs,n),r(bs,n),h,a);t&&(i[s]=o(t.x,t.y,n),s+=1),i[s]=o(a.x,a.y,n),s+=1}else i[s]=o(a.x,n,n),s+=1}}return s}Zb(){return tu(this.Ob,(t=>t[0]||[]))}setFillStyle(t){return this.jx(t),this}getFillStyle(){return this.Qx()}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Rx,stroke:this.Xx})}}const Tu={Positive:ku,Negative:Cu,Bipolar:wu};class Fu extends xu{constructor(t,i,s,e,h,r,n,o,a,l,c){super(t,i,s,e,h,r,n,o,a,l),this.D=new zt,this.chart.St.Zo(Gr.Zn);const u=c;this.Rx=Ji(this._t.areaRangeSeriesFillStyle,u),this.Xx=Ji(this._t.areaRangeSeriesStrokeStyle,u),this.zx=Ji(this._t.areaRangeSeriesFillStyleInverted,u),this.Wx=Ji(this._t.areaRangeSeriesStrokeStyleInverted,u)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=bu(e,this.Ob,Ha(i)?this.Tx:this.kx);if(void 0!==h&&void 0!==h[0]){const t=ot(h[0][0],this.Ys.St.ot,this.scale),i=ot(h[0][1],this.Ys.St.ot,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY,multiHit:[t,i]}}}add(t){const i=Array.isArray(t)?t:[t],[s,e]=l(i);this.Vx(t,s,e);const h=this.Xc[this.Xc.length-1];return this.Yb=h?{position:h.position,high:h.high,low:h.low}:void 0,this.D.R("dataadd",{data:i,boundaries:this.Hb}),this}addArraysHighLow(t,i,s=1,e=0){if(t.length!==i.length)throw new Error("arrayHigh and arrayLow lengths are not equal");{let h=e;h||(h=this.Yb?this.Yb.position+s:0),this.add(((t,i,s=1,e)=>{const h=void 0!==e?e:0,r=new Array(t.length);for(let e=0;e<t.length;e+=1)r[e]={position:h+s*e,high:t[e],low:i[e]};return r})(t,i,s,h))}return this}sM(t,i){this.Ux(t,i)}setHighFillStyle(t){return this.jx(t),this}setLowFillStyle(t){return this.Zx(t),this}setHighStrokeStyle(t){return this.Jx(t),this}setLowStrokeStyle(t){return this.Kx(t),this}getHighFillStyle(){return this.Qx()}getLowFillStyle(){return this.lc()}getHighStrokeStyle(){return this.qx()}getLowStrokeStyle(){return this.tM()}Zb(){return tu(this.Ob,(t=>{const i=t[0],s=t[1];if(!i||!s)return[];const e=[],h=i.length;for(let t=0;t<h;t+=1)e[t]={position:i[t].x,high:i[t].y,low:s[t].y};return e}))}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Rx,fill2:this.zx,behavior:{colorStep:!0}})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}var Iu;!function(t){t[t.before=0]="before",t[t.middle=.5]="middle",t[t.after=1]="after"}(Iu||(Iu={}));const Pu=(t,i)=>{const s=[],e=t.length,h=i;if(e>0){let i=0,n=t[0];s[i]=n,i+=1;for(let o=1;o<e;o+=1){const e=t[o];if(h<=0)s[i]=r(n.x,e.y),i+=1;else{const t=n.x*(1-h)+e.x*h;s[i]=r(t,n.y),i+=1,s[i]=r(t,e.y),i+=1}s[i]=e,i+=1,n=e}}return s},Lu=(t,i)=>{const s=t*t,e=s*t,h=1-t,n=h*h,o=n*h;return r(o*i[0].x+3*t*n*i[1].x+3*s*h*i[2].x+e*i[3].x,o*i[0].y+3*t*n*i[1].y+3*s*h*i[2].y+e*i[3].y)},Bu=(t,i=32)=>{if(2===t.length)return[t[0],t[1]];const s=(t=>{const i=1e-5,s=t.length-1,e=Array(s);if(s>1){let h=r(0,0),n=r(0,0),o=r(0,0),a=Ys(Zs(t[1],t[0]));const l=3;let c=0,u=0;for(let d=0;d<s;d+=1){const f=Array(4);if(f[0]=t[d],f[1]=t[d],f[3]=t[d+1],f[2]=t[d+1],o=a,h=n,d+1<s?(a=t[d+2]===t[d+1]?r(0,0):Ys(Zs(t[d+2],t[d+1])),n=Ys(js(o,a))):n=r(0,0),t[d+1].y===t[d].y)c=0,u=0;else{const s=t[d+1].x-t[d].x;c=Math.abs(h.x)>i?Math.abs(s/(l*h.x)):1,u=Math.abs(n.x)>i?Math.abs(s/(l*n.x)):1}f[1]=js(Ws(h,c),f[1]),f[2]=Zs(f[2],Ws(n,u)),e[d]=f}}return e.length>0?e:[]})(t),e=s.length,h=Array(e*i);let n=0;for(let t=0;t<e;t+=1)for(let e=0;e<=i;e+=1)h[n]=Lu(e/i,s[t]),n+=1;return h};class Du extends eu{constructor(t,i,s,e,h,n,o,a,l,u,d,f,A,g,v){super(t,i,s,e,h,n,o,a,l,d,f),this.Ob=[],this.Wb=1e5,this.eb=5,this.Ga=0,this.yl=!1,this.pl=!1,this.ml=!1,this.dM=1,this.fM=[],this.AM=(t,i)=>{const s=t.Ru(i);if(s)return ot(s,this.scale,this.Ys.St.ot)},this.gM=(t,i)=>{const s=t.Fx(i);if(s)return ot(s,this.scale,this.Ys.St.ot)},this.vM=t=>{if(this.Ob.length>0){const i=this.Ob[this.Ob.length-1];if(t.length>0){const s=i.Tl(),e=i.kl(),h=s.length+e.length-+i.uc();if(h>=this.Wb){const n=e.length>0?e[e.length-1]:s[i.uc()?h:h-1],o=r((n.x+t[0].x)/2,(n.y+t[0].y)/2);i.Dl(o,c(r(o.x,o.y),r(o.x,o.y))).dc(!0),this.yM([o].concat(t)).cc(!0)}else i.Dl(t,this.Hb)}}else t.length>0&&this.yM(t)},this.pM=t=>{if(this.fM.length>0){const i=this.fM[this.fM.length-1];t.length>0&&((i.Tl().length+i.kl().length)*this.dM>=this.Wb?this.mM(t):i.Dl(t))}else t.length>0&&this.mM(t)},this.Ko=v,this.hb=u,this.SM=A,this.bM=Ji(d.pointLineSeriesFillStyle,g),this.Oc=Ji(this._t.pointLineSeriesStrokeStyle,g)}add(t){return super.add(t),this}Zb(){return tu(this.fM)}setStrokeStyle(t){this.Oc="function"==typeof t?t(this.Oc):t;const i=this.Oc;for(let t=0;t<this.Ob.length;t+=1)this.Ob[t].Ne(i);return this.Ys.Ls(),this}getStrokeStyle(){return this.Oc}setPointFillStyle(t){this.bM="function"==typeof t?t(this.bM):t;const i=this.bM;for(let t=0;t<this.fM.length;t+=1)this.fM[t].Ie(i);return this.Ys.Ls(),this}getPointFillStyle(){return this.bM}setPointSize(t){this.eb=t;for(let i=0;i<this.fM.length;i+=1)this.fM[i].Z(t);return this.Ys.Ls(),this}getPointSize(){return this.eb}getPointShape(){return this.hb}setPointRotation(t){this.Ga=t;for(let i=0;i<this.fM.length;i+=1)this.fM[i].Wh(t);return this.Ys.Ls(),this}getPointRotation(){return this.Ga}setIndividualPointSizeEnabled(t){this.yl=t,t&&this.chart.St.Zo(Gr.io);for(let i=0;i<this.fM.length;i+=1)this.fM[i].Pl(t);return this.Ys.Ls(),this}getIndividualPointSizeEnabled(){return this.yl}setIndividualPointRotationEnabled(t){this.pl=t;for(let i=0;i<this.fM.length;i+=1)this.fM[i].Ll(t);return this.Ys.Ls(),this}getIndividualPointRotationEnabled(){return this.pl}setIndividualPointValueEnabled(t){this.ml=t;for(let i=0;i<this.fM.length;i+=1)this.fM[i].Bl(t);return this.Ys.Ls(),this}getIndividualPointValueEnabled(){return this.ml}setVisible(t){return super.setVisible(t),this.fM.forEach((i=>i.setVisible(t))),this}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY};if(0===this.Ob.length)return;const h=this.Ob[0].Ct()||Ct.NearestX,r=Ha(i)?hu(e,this.Ob,this.gM,h===Ct.NearestX?(t,i)=>Math.abs(t.x-i.x):h===Ct.NearestY?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2):hu(e,this.fM,this.AM,h===Ct.NearestX?(t,i)=>Math.abs(t.x-i.x):h===Ct.NearestY?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==r){const t=ot(r[0],this.Ys.St.ot,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}Gs(){return ji(this.bM,void 0)||ji(this.Oc.getFillStyle(),void 0)}$s(){return this.Ds||this.hb}Mb(t){}De(t,i){t.Bt(i),this.Ys.Ls()}jb(t){const i=this.Ob.length>0?this.Ob[this.Ob.length-1].Tl().length+this.Ob[this.Ob.length-1].kl().length-+this.Ob[this.Ob.length-1].uc():void 0;qc(t,i,this.Wb,this.vM),qc(t,i,this.Wb,this.pM)}mM(t,i){const s=this.Ys.wy(this.scale).Dl(t,i).Ie(this.bM).Fl(this.hb).Z(this.eb).Wh(this.Ga).Pl(this.yl).Ll(this.pl).Bl(this.ml).Bt(this.getHighlight());return this.ws(s),this.fM.push(s),s}yM(t,i){const s=this.Ys.tv(this.scale,void 0,[Cl.UserSeries,...this.SM]).Dl(t,i).Ne(this.Oc).Bt(this.getHighlight());return this.ws(s),this.Ob.push(s),s}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{stroke:this.Oc,fill:this.bM})}getPointAmount(){return this.fM.reduce(((t,i)=>t+i.El()+i.Rl()),this.Xc.length)}clear(){super.clear();for(let t=0;t<this.Ob.length;t+=1)this.Ob[t].dispose();this.Ob.length=0;for(let t=0;t<this.fM.length;t+=1)this.fM[t].dispose();return this.fM.length=0,this}Xb(t,i,s,e){super.Xb(t,i,s,e),this.$b.Xb(this.fM,i,s,e,this.scale,(t=>{}))}}const Eu=32,Ru=(t,i)=>t.kl().length>=i?t.kl().slice(-i):Array.prototype.concat(t.Tl(),t.kl()).slice(-i),zu=(t,i,s)=>{const e=Array.prototype.concat(t.Tl(),t.kl()).slice(0,-s-1).concat(i.slice(s+1,2*s+2));t.ti().Dl(e).hr()};class Vu extends Du{constructor(t,i,s,e,h,r,n,o,a,l,c,u,d,f,A){super(t,i,s,e,h,r,n,o,a,l,c,u,d,f,A),this.dM=Eu,this.Wb=8e3,this.xM=t=>{if(0===t.length)return;const i=this.fM.length;if(i>0){const s=i>1,e=this.fM[i-1];if(s){const s=Array.prototype.concat(e.Tl(),e.kl()),h=s.length;if(h*Eu>=this.Wb){const s=Ru(e,3),h=Array.prototype.concat(s,t),r=Bu(h,Eu);zu(this.Ob[i-1],r,Eu),this.yM(r.slice(66))}else if(h<5){const e=this.fM[i-2],h=Ru(e,3),r=Array.prototype.concat(h,s,t),n=Bu(r,Eu),o=this.Ob[i-1],a=n.slice(66);o.ti().Dl(a).hr()}else{const s=this.Ob[i-1],h=Array.prototype.concat(s.Tl(),s.kl()),r=Ru(e,4),n=Array.prototype.concat(r,t),o=Bu(n,Eu),a=h.slice(0,-66).concat(o.slice(33));s.ti().Dl(a).hr()}}else{const s=Array.prototype.concat(e.Tl(),e.kl()),h=s.length,r=this.Ob[i-1];if(h*Eu>=this.Wb){const i=Ru(e,3),s=Array.prototype.concat(i,t),h=Bu(s,Eu);zu(this.Ob[0],h,Eu),this.yM(h.slice(66))}else if(h+t.length>1){const i=Array.prototype.concat(s,t),e=Bu(i,Eu);r.ti().Dl(e).hr()}else r.Dl(t)}}else{const i=t.length>0?Bu(t,Eu):t,s=zs(i);this.yM(i,s)}this.pM(t)}}jb(t){const i=this.fM.length,s=this.fM.length>0?this.fM[i-1].Tl().length+this.fM[i-1].kl().length:void 0;qc(t,s,Math.ceil(this.Wb/this.dM),this.xM)}}class Ou{constructor(){this.es="FreeformPattern",this.Jl={type:"disabled",packager:(t,i,s)=>t.slice()}}Xb(t,i,s,e,h,r){if(e>0){const h=Math.trunc((i-e)/s);if(h>0&&t.length>1){const i=t.splice(0,h);for(let t=0;t<i.length;t+=1)r(i[t]),i[t].dispose()}}}MM(t,i){const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)}getXMax(t=[],i){return wi(t,yi,Math.max,bi,i)}getXMin(t=[],i){return wi(t,vi,Math.min,Si,i)}getYMax(t=[],i){return wi(t,mi,Math.max,Mi,i)}getYMin(t=[],i){return wi(t,pi,Math.min,xi,i)}}const Nu=t=>{switch(t){case"normal":default:return 1;case"high":return.25}},Gu=i({Jl:{type:"disabled",packager:(t,i,s)=>t.slice()}});class $u extends Gu{Xb(t,i,s,e,h,r){if(e>0){const i=Math.ceil(e/s),n=t.length-i;if(n>0){const i=this.Nx(t,h);if(i>0){const s=n-i>0?i:n;if(s>0){for(let i=0;i<s;i+=1)r(t[i]),t[i].dispose();t.splice(0,s)}}}}}}const Uu=(t,i)=>{const s=i.Zt();return t?Math.min(s,t):s},Yu=(t,i)=>{const s=i.Qt();return t?Math.max(s,t):s};class Hu extends $u{MM(t,i){return Math.abs(t.x-i.x)}getYMax(t=[],i){return t.reduce(Yu,i?i.max.y:void 0)}getYMin(t=[],i){return t.reduce(Uu,i?i.min.y:void 0)}}const Xu=(t,i)=>{const s=i.Wt();return t?Math.min(s,t):s},Wu=(t,i)=>{const s=i.jt();return t?Math.max(s,t):s};class ju extends $u{MM(t,i){return Math.abs(t.y-i.y)}getXMax(t=[],i){return t.reduce(Wu,i?i.max.x:void 0)}getXMin(t=[],i){return t.reduce(Xu,i?i.min.x:void 0)}}const Zu={horizontalProgressive:new class extends Hu{constructor(){super({Jl:an()}),this.es="HorizontalProgressivePattern"}Nx(t,i){const s=t.length,e=Math.min(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.x.Pi(t[r].jt(),t[r].Wl())<e&&(h+=1);return h}getXMax(t=[],i){return void 0!==i?i?i.max.x:void 0:t.length>0?t[t.length-1].jt():void 0}getXMin(t=[],i){return t.length>0&&t[0].El()>0?t[0].Wt():i?i.min.x:void 0}setPrecision(t){return this.set("_columnPackaging",an(Nu(t)))}},horizontalRegressive:new class extends Hu{constructor(){super({Jl:ln()}),this.es="HorizontalRegressivePattern"}Nx(t,i){const s=t.length,e=Math.max(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.x.Pi(t[r].Wt(),-t[r].Wl())&&(h+=1);return h}getXMax(t=[],i){return t.length>0&&t[0].El()>0?t[0].jt():i?i.max.x:void 0}getXMin(t=[],i){return void 0!==i?i?i.min.x:void 0:t.length>0?t[t.length-1].Wt():void 0}setPrecision(t){return this.set("_columnPackaging",ln(Nu(t)))}},verticalProgressive:new class extends ju{constructor(){super({Jl:cn()}),this.es="VerticalProgressivePattern"}Nx(t,i){const s=t.length,e=Math.min(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.y.Pi(t[r].Qt(),t[r].jl())<e&&(h+=1);return h}getYMax(t=[],i){return void 0!==i?i?i.max.y:void 0:t.length>0?t[t.length-1].Qt():void 0}getYMin(t=[],i){return t.length>0&&t[0].El()>0?t[0].Zt():i?i.min.y:void 0}setPrecision(t){return this.set("_columnPackaging",cn(Nu(t)))}},verticalRegressive:new class extends ju{constructor(){super({Jl:un()}),this.es="VerticalRegressivePattern"}Nx(t,i){const s=t.length,e=Math.max(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.y.Pi(t[r].Zt(),-t[r].jl())&&(h+=1);return h}getYMax(t=[],i){return t.length>0&&t[0].El()>0?t[0].Qt():i?i.max.y:void 0}getYMin(t=[],i){return void 0!==i?i?i.min.y:void 0:t.length>0?t[t.length-1].Zt():void 0}setPrecision(t){return this.set("_columnPackaging",un(Nu(t)))}},freeform:new Ou};class Qu extends Du{constructor(t,i,s,e,h,n,o,a,l,u,d,f,A,g,v){super(t,i,s,e,h,n,o,a,Zu.horizontalProgressive,l,d,f,A,g,v),this.vM=t=>{const i=this.Ob.length>0?this.Ob[this.Ob.length-1].Tl().length+this.Ob[this.Ob.length-1].kl().length:void 0;qc(t,i,this.Wb,this.wM)},this.wM=t=>{const i=t.length;if(this.Ob.length>0){const s=this.Ob[this.Ob.length-1];if(i>0){const i=s.Tl(),e=s.kl(),h=e.length>0?e[e.length-1]:i[i.length-1],n=Pu([h].concat(t),this._M);n.shift();const o=r((h.x+n[0].x)/2,(h.y+n[0].y)/2),a=Array.prototype.concat(o,n);(e.length>0?i.length+e.length:i.length)>=this.Wb?(s.Dl(o,c(r(o.x,o.y),r(o.x,o.y))).dc(!0),this.yM(a).cc(!0),this.mM(t)):s.Dl(a)}}else i>0&&this.yM(Pu(t,this._M));this.pM(t)},this._M=u,void 0===this.SM.find((t=>"DataPattern"===t.type))&&this.SM.push({type:"DataPattern",args:{pattern:"ProgressiveX"}})}}class Ju extends Kc{constructor(t,i,s,e,h,r,o,a,l,u){super(t,i,s,e,h,r,o,a,l,u),this.CM=t=>t[4]>=t[1],this.Pb=c(n(bs,bs),n(xs,xs)),this.kM=[],this.TM=!1,this.FM=-1,this.IM=[],this.PM=!0,this.LM=!1,this.BM=4,this.DM=[1e-7,1e-6,1e-5,1e-4,.001,.01,.1,1,5,10,30,60,300,600,1800,3600,7200,14400,28800,36e3,43200,50400,57600,64800,72e3,86400,172800,259200,345600,432e3,604800,1209600,2592e3,7776e3,10368e3,15552e3,31536e3,15768e4,31536e4,63072e4,7884e5,15768e5,31536e5,3942e6,47304e5,63072e5,7884e6,15768e6,31536e6,3942e7,47304e6,63072e6,7884e7,15768e7,31536e7,63072e7,7884e8,15768e8,31536e8,47304e8,63072e8],this.D=new zt,this.chart.St.Zo(Gr.On)}yy(){return this.IM.length>0}Ms(){return"ProgressiveX"}Zb(){return this.IM}Qv(){return this.qv&&this.IM.length>0&&this.getVisible()}EM(t){if(!(this.IM.length<1))return[this.IM[t][0],this.IM[t][1],this.IM[t][2],this.IM[t][3],this.IM[t][4]]}solveNearest(t,i){if(0===this.IM.length)return;const s=this.chart.translateCoordinate(t,{x:this.axisX,y:this.axisY}).x,e=void 0!==this.getPackDataState();let h,n,o,a,l;if(e){const t=this.RM;if(!t)return;const i=ls(s,t.length-1,(i=>t[i][0])),e=void 0!==i&&t[i];if(!e)return;a=e[3],o=e[2],n=e[1],l=e[4],h=e[0]}else{const t=ls(s,this.IM.length-1,(t=>this.IM[t][0])),i=void 0!==t&&this.IM[t];if(!i)return;h=i[0],n=i[1],o=i[2],a=i[3],l=i[4]}return{cursorPosition:{resultTable:r(h,l),resultTableScale:this.scale,pointMarker:r(h,l),pointMarkerScale:{x:this.axisX,y:this.axisY}},x:h,y:l,open:n,high:o,low:a,close:l,position:h,isPacked:e,series:this,axisX:this.axisX,axisY:this.axisY}}Kt(t,i){return As({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,open:0,high:0,low:0,close:0,position:0,isPacked:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}Mb(t){if(!(t.x instanceof pe))throw new Error("OHLCSeries must be attached to a Linear X Axis.");this.zM=t.x}Dr(){return r(5,5)}Cx(t){const i=t.length-1;if(i<0)return this;for(let s=0;s<=i;s+=1)t[s][3]<this.Pb.min.y&&(this.Pb.min.y=t[s][3]),this.Pb.max.y<t[s][2]&&(this.Pb.max.y=t[s][2]);return this.Pb.min.x=Math.min(this.Pb.min.x,t[0][0]),this.Pb.max.x=Math.max(this.Pb.max.x,t[i][0]),this}Cb(){return this.Pb.max.x}kb(){return this.Pb.min.x}Tb(){return this.Pb.max.y}Fb(){return this.Pb.min.y}add(t){this.IM.length>0&&this.chart.St.Zo(Gr.qn);const i=Array.isArray(t[0])?t:[t[0]];if(i.length>0){this.TM=!0;const t=this.IM.length,s=this.kM.length,e=i.length;this.IM.length=t+e,this.kM.length=s+e;for(let h=0;h<e;h+=1)this.IM[t+h]=i[h],this.kM[s+h]=this.IM[t+h];this.Cx(i),this.D.R("dataadd",{data:i}),this.Ys.Ls()}return this}setPackData(t){return t!==this.PM&&(this.LM=!0,this.PM=t,this.chart.St.Ls()),this}getPackData(){return this.PM}getPackDataState(){const t=this.FM;if(!(t<0||void 0===this.RM||this.RM.length===this.IM.length))return{figureAxisInterval:t}}setFigureWidth(t){return this.VM=t,this.chart.St.Ls(),this}getFigureWidth(){return this.VM}setFigureMinimumGap(t){return this.BM=t,this.chart.St.Ls(),this}getFigureMinimumGap(){return this.BM}clear(){return this.IM=[],this.kM=[],this.RM=void 0,this.OM(),this.Pb.min.x=bs,this.Pb.min.y=bs,this.Pb.max.x=xs,this.Pb.max.y=xs,this.D.R("dataclear",{}),this}NM(t){return this.zM.getPixelSize()*t/1e3}GM(){const t=this.DM.length-1,i=this.NM(this.VM+this.BM);let s=ls(i,t,(t=>this.DM[t]));return void 0===s?s=i<this.DM[0]?0:this.DM[t]<i?t:this.DM.length/2:this.DM[s]<i&&(s+=1),this.DM.length<=s&&(s=t),1e3*this.DM[s]}Le(){if(super.Le(),!this.PM){this.RM=void 0;let t=null;if(this.LM?(this.LM=!1,t=this.IM,this.OM()):t=this.kM,t.length>=1){for(let i=0;i<t.length;i+=1){const s=t[i],e=s[0];this.CM(s)?this.$M(e,s):this.UM(e,s)}this.kM.length=0,this.TM=!1,this.FM=-1}}}vv(){super.vv();const t=this.GM();if(this.PM&&this.IM.length>=1&&(t!==this.FM||this.TM||this.LM)){this.LM=!1,this.FM=t,this.TM=!1,this.OM(),this.RM=[];const i=this.IM.length;let s=this.IM[0][0]-this.IM[0][0]%(t/2)+t,e=0;for(;e<i;){let h=this.EM(e);if(void 0===h)break;let r=h[3],n=h[2];const o=e;for(e+=1;e<i&&this.IM[e][0]<s;)h=this.IM[e],this.IM[e][3]<r&&(r=this.IM[e][3]),n<this.IM[e][2]&&(n=this.IM[e][2]),e+=1;const a=e-1;let l=h[0];o<a&&(l=this.IM[a][0],h=[l,this.IM[o][1],n,r,this.IM[a][4]]),h[1]<h[4]?this.$M(l,h):this.UM(l,h),this.RM.push(h),s+=t}}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Ku extends Ju{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.YM=1175494351e-14,this.VM=this._t.ohlcCandleThicknessPixels||5,this.HM=this._t.ohlcCandleTailStrokeStylePositive,this.XM=this._t.ohlcCandleTailStrokeStyleNegative,this.WM=this._t.ohlcCandleBodyFillStylePositive,this.jM=this._t.ohlcCandleBodyFillStyleNegative,this.ZM=s.Gf(this.scale).Ne(new vh({thickness:this.VM,fillStyle:this.WM})),this.ZM.Yc={x:0,y:1},this.QM=s.Gf(this.scale).Ne(new vh({thickness:this.VM,fillStyle:this.jM})),this.QM.Yc={x:0,y:-1},this.JM=s.Gf(this.scale).Ne(this.HM),this.KM=s.Gf(this.scale).Ne(this.XM),this.ws(this.ZM),this.ws(this.QM),this.ws(this.JM),this.ws(this.KM)}setBodyThickness(t){return this.VM=t,this.ZM.Ne(new vh({thickness:this.VM,fillStyle:this.WM})),this.QM.Ne(new vh({thickness:this.VM,fillStyle:this.jM})),this.chart.St.Ls(),this}getBodyThickness(){return this.VM}setBodyFillStylePositive(t){return this.WM="function"==typeof t?t(this.WM):t,this.ZM.Ne(new vh({thickness:this.VM,fillStyle:this.WM})),this.chart.St.Ls(),this}getBodyFillStylePositive(){return this.WM}setBodyFillStyleNegative(t){return this.jM="function"==typeof t?t(this.jM):t,this.QM.Ne(new vh({thickness:this.VM,fillStyle:this.jM})),this.chart.St.Ls(),this}getBodyFillStyleNegative(){return this.jM}setTailStrokeStylePositive(t){return this.HM="function"==typeof t?t(this.HM):t,this.JM.Ne(this.HM),this.chart.St.Ls(),this}getTailStrokeStylePositive(){return this.HM}setTailStrokeStyleNegative(t){return this.XM="function"==typeof t?t(this.XM):t,this.KM.Ne(this.XM),this.chart.St.Ls(),this}getTailStrokeStyleNegative(){return this.XM}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.WM,fill2:this.jM,behavior:{colorStep:!0}})}OM(){return this.JM.ti(),this.KM.ti(),this.ZM.ti(),this.QM.ti(),this}$M(t,i){return Math.abs(i[1]-i[4])<this.YM?this.ZM.lo().Uf({x:t,y:i[1]-this.YM},{x:t,y:i[1]+this.YM}):this.ZM.lo().Uf({x:t,y:i[1]},{x:t,y:i[4]}),i[4]<i[2]&&this.JM.lo().Uf({x:t,y:i[4]},{x:t,y:i[2]}),i[3]<i[1]&&this.JM.lo().Uf({x:t,y:i[3]},{x:t,y:i[1]}),this}UM(t,i){return Math.abs(i[1]-i[4])<this.YM?this.QM.lo().Uf({x:t,y:i[1]-this.YM},{x:t,y:i[1]+this.YM}):this.QM.lo().Uf({x:t,y:i[1]},{x:t,y:i[4]}),i[3]<i[4]&&this.KM.lo().Uf({x:t,y:i[3]},{x:t,y:i[4]}),i[1]<i[2]&&this.KM.lo().Uf({x:t,y:i[1]},{x:t,y:i[2]}),this}}class qu extends Ju{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.VM=this._t.ohlcBarThicknessPixels||10,this.qM=this._t.ohlcBarStrokeStylePositive,this.tw=this._t.ohlcBarStrokeStyleNegative,this.iw=s.Gf(this.scale).Ne(this.qM),this.ws(this.iw),this.sw=s.Gf(this.scale).Ne(this.qM),this.sw.Yc={x:-this.VM/2,y:0},this.ws(this.sw),this.ew=s.Gf(this.scale).Ne(this.qM),this.ew.Yc={x:this.VM/2,y:0},this.ws(this.ew),this.hw=s.Gf(this.scale).Ne(this.tw),this.ws(this.hw),this.rw=s.Gf(this.scale).Ne(this.tw),this.rw.Yc={x:-this.VM/2,y:0},this.ws(this.rw),this.nw=s.Gf(this.scale).Ne(this.tw),this.nw.Yc={x:this.VM/2,y:0},this.ws(this.nw)}setStrokeStylePositive(t){return this.qM="function"==typeof t?t(this.qM):t,this.iw.Ne(this.qM),this.sw.Ne(this.qM),this.ew.Ne(this.qM),this.chart.St.Ls(),this}getStrokeStylePositive(){return this.qM}setStrokeStyleNegative(t){return this.tw="function"==typeof t?t(this.tw):t,this.hw.Ne(this.tw),this.rw.Ne(this.tw),this.nw.Ne(this.tw),this.chart.St.Ls(),this}getStrokeStyleNegative(){return this.tw}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.qM.getFillStyle(),fill2:this.tw.getFillStyle(),behavior:{colorStep:!0}})}setFigureWidth(t){return super.setFigureWidth(t),this.sw.Yc={x:-t/2,y:0},this.rw.Yc={x:-t/2,y:0},this.ew.Yc={x:t/2,y:0},this.nw.Yc={x:t/2,y:0},this}OM(){return this.hw.ti(),this.iw.ti(),this.rw.ti(),this.sw.ti(),this.nw.ti(),this.ew.ti(),this}$M(t,i){return this.iw.lo().Uf({x:t,y:i[3]},{x:t,y:i[2]}),this.sw.lo().Uf({x:t,y:i[1]},{x:t,y:i[1]}),this.ew.lo().Uf({x:t,y:i[4]},{x:t,y:i[4]}),this}UM(t,i){return this.hw.lo().Uf({x:t,y:i[3]},{x:t,y:i[2]}),this.rw.lo().Uf({x:t,y:i[1]},{x:t,y:i[1]}),this.nw.lo().Uf({x:t,y:i[4]},{x:t,y:i[4]}),this}}const td={Candlesticks:Ku,Bars:qu},id=t=>({defaultDragMouseStyle:tr.Horizontal,getTitleTextRotation:()=>0,...Ol(t,(t=>t.kb(!1)),(t=>t.Cb(!1)),(t=>t.Dr().x))}),sd=t=>({defaultDragMouseStyle:tr.Vertical,getTitleTextRotation:t=>90*t,...Ol(t,(t=>t.Fb(!1)),(t=>t.Tb(!1)),(t=>t.Dr().y))});class ed extends hl{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,o),this.ow=!1,this.aw=!1,this.lw=!1,this.cw=!1,this.uw=!1,this.dw=new Map,this.fw=new Map,this.Aw=[],this.gw=[],this.yw=!0,this.pw=!0,this.mw=!1,this.Sw=[],this.bw=new Set,this.xw=!1,this.eg=h,this.Mw=r,this.ww=n,this._w=o.cursorGridStrokeStyleX,this.Cw=o.cursorGridStrokeStyleY}setKeepWithinAxisBoundaries(t){return this.ow=t,this.Ys.Ls(),this}getKeepWithinAxisBoundaries(){return this.ow}dispose(){return super.dispose(),this.dw.forEach((t=>t.forEach((t=>t.dispose())))),this.fw.forEach((t=>t.forEach((t=>t.dispose())))),this.Aw.length=0,this.gw.length=0,this.ig.length=0,this}Le(){return this.mw&&this.setPosition(...this.Sw),this.Aw.forEach((t=>t.setVisible(this.ft&&this.sA).setMarkerVisible(this.ft&&this.sA&&this.yw))),this.gw.forEach((t=>t.setVisible(this.ft&&this.sA).setMarkerVisible(this.ft&&this.sA&&this.pw))),super.Le()}GA(){if(!this.ow)return super.GA();const t={x:!0,y:!0},i=this.NA,s=i.getPosition(r(-1,-1),ti.PaddedBackground),e=i.getPosition(r(1,1),ti.PaddedBackground);return this.Sw.forEach(((h,r)=>{const n=h.pointMarkerScale.x,o=h.pointMarkerScale.y,a=ot(s,i.scale,{x:n,y:o}),l=ot(e,i.scale,{x:n,y:o});Ls(a.x,n.zh,n.Vh)&&Ls(l.x,n.zh,n.Vh)&&(t.x=!1),Ls(a.y,o.zh,o.Vh)&&Ls(l.y,o.zh,o.Vh)&&(t.y=!1)})),t}setPosition(...t){if(t=t.filter((t=>!Number.isNaN(t.pointMarker.x)&&!Number.isNaN(t.pointMarker.y))),this.Sw=t,this.Aw.forEach((t=>t.setVisible(!1))),this.gw.forEach((t=>t.setVisible(!1))),this.Aw.length=0,this.gw.length=0,0===t.length)return this;const i=this.renderingScale,s=t[0].resultTable,e=za(t[0].resultTableScale,i),h=e===this.scale?s:ot(s,e,this.scale);this.NA.setPosition(h),this.sA=!1,this.KA.forEach((t=>{t.targetVisible=!1}));const n=new Map;return t.forEach(((t,s)=>{const e=t.pointMarkerScale.x,h=t.pointMarkerScale.y,o=n.get(e)||[],a=n.get(h)||[],l=!o.includes(t.pointMarker.x),c=!a.includes(t.pointMarker.y);o.push(t.pointMarker.x),a.push(t.pointMarker.y),n.set(e,o),n.set(h,a);const u=t.pointMarker,d=nd(r(u.x,u.y),e,h);if(l){const t=this.kw(e,!0);t.setValue(u.x),t.setGridStrokeLength(this.aw?d.x:1).setAllocatesAxisSpace(this.xw),this.Aw.push(t)}if(c){const t=this.kw(h,!1);t.setValue(u.y),t.setGridStrokeLength(this.lw?d.y:1).setAllocatesAxisSpace(this.xw),this.gw.push(t)}let f=this.KA[s];if(!f){const t=new eo(this.Ys,this.renderingScale,this.scale,ui,this._t).setPointerEvents(!1).setFillStyle(this._t.cursorPointMarkerFillStyle).setSize(this._t.cursorPointMarkerSize).setShape(this._t.cursorPointMarkerShape);f={pointMarker:t,targetVisible:!0},this.KA.push(f),this.ig.forEach((i=>i(t)))}const A=za(t.pointMarkerScale,i),g=A===this.scale?t.pointMarker:ot(t.pointMarker,A,this.scale);f.pointMarker.setPosition(g),f.targetVisible=!0;const v=e.getInterval(),y=h.getInterval(),p=Math.min(v.start,v.end),m=Math.max(v.start,v.end),S=Math.min(y.start,y.end),b=Math.max(y.start,y.end);u.x>=p&&u.x<=m&&u.y>=S&&u.y<=b&&(this.sA=!0)})),this}setTickMarkersAllocateAxisSpace(t){return this.xw=t,this.Ys.Ls(),this}getTickMarkersAllocateAxisSpace(){return this.xw}kw(t,i){this.bw.has(t)||(t.addEventListener("dispose",(()=>{var i;null===(i=s.get(t))||void 0===i||i.forEach((t=>t.dispose())),s.delete(t)})),this.bw.add(t));const s=i?this.dw:this.fw,e=i?this.Aw:this.gw,h=s.get(t)||[];s.set(t,h);let r=h.find((t=>!e.includes(t)));return r||(r=i?t.Zf(!1,this.Mw):t.Zf(!1,this.ww),h.push(r),this.pr(r,i),r.setPointerEvents(!1)),r}pr(t,i){const s=i?this._w:this.Cw;return t.setGridStrokeStyle(s),t.setPointerEvents(!1),(i?this.yw:this.pw)?t.setMarkerVisible(!0):t.setMarkerVisible(!1),t}setGridStrokeXCut(t){return this.aw=t,this.Ys.Ls(),this}getGridStrokeXCut(){return this.aw}setGridStrokeYCut(t){return this.lw=t,this.Ys.Ls(),this}getGridStrokeYCut(){return this.lw}setGridStrokeXStyle(t){return this._w=t instanceof Function?t(this.getGridStrokeXStyle()):t,this.dw.forEach((t=>t.forEach((t=>t.setGridStrokeStyle(this._w))))),this}getGridStrokeXStyle(){return this._w}setGridStrokeYStyle(t){return this.Cw=t instanceof Function?t(this.getGridStrokeYStyle()):t,this.fw.forEach((t=>t.forEach((t=>t.setGridStrokeStyle(this.Cw))))),this}getGridStrokeYStyle(){return this.Cw}setTickMarkerXVisible(t){return this.yw=t,this.Ys.Ls(),this}getTickMarkerXVisible(){return this.yw}setTickMarkerYVisible(t){return this.pw=t,this.Ys.Ls(),this}getTickMarkerYVisible(){return this.pw}setTickMarkerX(t){return this.dw.forEach((i=>i.forEach((i=>i.setMarker(t))))),this.Mw=this.Mw.addStyler(t),this.Ys.Ls(),this}setTickMarkerY(t){return this.fw.forEach((i=>i.forEach((i=>i.setMarker(t))))),this.ww=this.ww.addStyler(t),this.Ys.Ls(),this}}class hd{constructor(t,i,s,e){this.ng=[],this.og=(t,i)=>(this.ng.forEach((s=>s(t,i))),t),this.addStyler=t=>new hd(this.eg,this.Mw,this.ww,this.ng.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new hd(t,this.Mw,this.ww,this.ng.map((t=>t))),this.ag=(t,i,s,e,h)=>this.og(new ed(t,i,s,e,this.eg,this.Mw,this.ww,h),h),this.eg=t,this.ng=e,this.Mw=i,this.ww=s}}const rd=new hd(qn,Uo.PointableTextBox,Uo.PointableTextBox,[(t,i)=>{rl(t,i),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),Vr(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),Vr(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),nd=(t,i,s)=>{const e=i.ot,h=s.ot;let n=(t.x-e.getInnerStart())/(e.getInnerEnd()-e.getInnerStart()),o=(t.y-h.getInnerStart())/(h.getInnerEnd()-h.getInnerStart());return 1===s.yf&&(n=1-n),1===i.yf&&(o=1-o),r(o,n)};class od extends eu{constructor(t,i,s,e,h,r,n,o,a,l,c,u,d,f){super(t,i,s,e,h,r,n,o,a,l,c),this.Ob=[],this.WS=!0,this.Wb=void 0,this.Wc=void 0,this.Tw=(t,i)=>{const s=t.ib(i);if(s)return ot(s,this.scale,this.Ys.St.ot)},this.gM=(t,i)=>{const s=t.Fx(i);if(s)return ot(s,this.scale,this.Ys.St.ot)},this.SM=u,this.Ko=f,this.Oc=Ji(this._t.lineSeriesStrokeStyle,d),this.Fw={individualLookupValuesEnabled:void 0!==(null==f?void 0:f.individualLookupValuesEnabled)&&f.individualLookupValuesEnabled}}Ms(){var t,i;return null===(i=null===(t=this.Ko)||void 0===t?void 0:t.dataPattern)||void 0===i?void 0:i.pattern}add(t){return super.add(t),this}setPointerEvents(t){return super.setPointerEvents(t)}setStrokeStyle(t){this.Oc="function"==typeof t?t(this.Oc):t;const i=this.Oc;for(let t=0;t<this.Ob.length;t+=1)this.Ob[t].Ne(i);return this.Ys.Ls(),this}getStrokeStyle(){return this.Oc}setDataCleaning(t){return this.Wc=t,this.Ob.forEach((t=>t.jc(this.Wc))),this.Ys.Ls(),this}setCursorInterpolationEnabled(t){return this.WS=t,this.Ys.St.Ls(),this}getCursorInterpolationEnabled(){return this.WS}Mb(t){}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY};if(0===this.Ob.length)return;const h=this.Ob[0].Ct()||Ct.NearestX,r=hu(e,this.Ob,Ha(i)?this.gM:this.Tw,h===Ct.NearestX?(t,i)=>Math.abs(t.x-i.x):h===Ct.NearestY?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==r){const t=ot(r[0],this.Ys.St.ot,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}jb(t){let i=this.Ob[0];i||(i=this.yM(),this.Ob.push(i),this.ws(i)),i.Dl(t,this.Hb)}Gs(){return ji(this.Oc.getFillStyle(),void 0)}yM(){return this.Ys.tv(this.scale,this.Fw,[Cl.UserSeries,...this.SM]).Ne(this.Oc).jc(this.Wc).Bt(this.getHighlight())}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{stroke:this.Oc})}De(t,i){t.Bt(i),this.Ys.Ls()}Xb(t,i,s,e){}}class ad extends eu{constructor(t,i,s,e,h,r,n,o,a,l,c,u,d){super(t,i,s,e,h,r,n,o,new Ou,l,c),this.Ob=[],this.eb=5,this.Ga=0,this.yl=!1,this.pl=!1,this.ml=!1,this.Wb=void 0,this.AM=(t,i)=>{const s=t.Ru(i);if(s)return ot(s,this.scale,this.Ys.St.ot)},this.Ko=d,this.hb=a,this.Ce=Ji(l.pointSeriesFillStyle,u)}add(t){return super.add(t),this}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=hu(e,this.Ob,this.AM,Bs);if(void 0!==h){const t=ot(h[0],this.Ys.St.ot,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}Gs(){return ji(this.Ce,void 0)}$s(){return this.Ds||this.hb}Mb(t){}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce})}De(t,i){t.Bt(i),this.Ys.Ls()}setPointFillStyle(t){this.Ce="function"==typeof t?t(this.Ce):t;const i=this.Ce;for(let t=0;t<this.Ob.length;t+=1)this.Ob[t].Ie(i);return this.Ys.Ls(),this}getPointFillStyle(){return this.Ce}setPointSize(t){this.eb=t;for(let i=0;i<this.Ob.length;i+=1)this.Ob[i].Z(t);return this.Ys.Ls(),this}getPointSize(){return this.eb}getPointShape(){return this.hb}setPointRotation(t){this.Ga=t;for(let i=0;i<this.Ob.length;i+=1)this.Ob[i].Wh(t);return this.Ys.Ls(),this}getPointRotation(){return this.Ga}setIndividualPointSizeEnabled(t){this.yl=t,t&&this.chart.St.Zo(Gr.io);for(let i=0;i<this.Ob.length;i+=1)this.Ob[i].Pl(t);return this.Ys.Ls(),this}getIndividualPointSizeEnabled(){return this.yl}setIndividualPointRotationEnabled(t){this.pl=t;for(let i=0;i<this.Ob.length;i+=1)this.Ob[i].Ll(t);return this.Ys.Ls(),this}getIndividualPointRotationEnabled(){return this.pl}setIndividualPointValueEnabled(t){this.ml=t;for(let i=0;i<this.Ob.length;i+=1)this.Ob[i].Bl(t);return this.Ys.Ls(),this}getIndividualPointValueEnabled(){return this.ml}jb(t){let i=this.Ob[0];i||(i=this.yM()),i.Dl(t,this.Hb)}yM(){const t=this.Ys.wy(this.scale).Fl(this.hb).Z(this.eb).Wh(this.Ga).Pl(this.yl).Ll(this.pl).Bl(this.ml).Ie(this.Ce).Bt(this.getHighlight());return this.Ob.push(t),this.ws(t),t}}class ld{constructor(t,i,s,e){this.Iw=!1,this.D=new zt,this.chart=s,this.Pw=e,this.Qs=t.Qs,this.ee=e||ar,this.Lw=ni.document.createElement("div"),this.Lw.style.position="absolute",this.Lw.style.pointerEvents="none",ni.document.body.append(this.Lw);const h=()=>{const t=s.engine.container.getBoundingClientRect();this.Lw.style.left=`${t.left}px`,this.Lw.style.top=`${t.top}px`,this.Lw.style.width=`${t.width}px`,this.Lw.style.height=`${t.height}px`};h(),s.addEventListener("resize",h),this.Bw(this.Lw),this.Dw(),this.Ew(),this.Rw(),this.zw(i),this.chart.Vw().push(this)}Bw(t){this.Ow=ni.document.createElement("div"),this.Ow.style.pointerEvents="all",t.append(this.Ow),this.Nw=ni.document.createElement("div"),this.Gw=new qh(this.Qs,this.ee,this.chart,this.Nw),this.$w=ni.document.createElement("table"),this.$w.style.borderSpacing="0",this.Ow.appendChild(this.Gw.de()),this.Ow.appendChild(this.Nw),this.Nw.appendChild(this.$w)}Ew(){let t=0,i=0,s=0,e=0,h=!1;this.Iw=!1,this.Ow.onmousedown=r=>{r=r||ni.event,s=r.clientX,e=r.clientY,h=!0,ni.document.onmouseup=t=>{this.Iw?this.Ow.addEventListener("click",Bi,!0):this.Ow.removeEventListener("click",Bi,!0),h=!1,this.Iw=!1,ni.document.onmouseup=null,ni.document.onmousemove=null},ni.document.onmousemove=r=>{r=r||ni.event,h&&(t=s-r.clientX,i=e-r.clientY,s=r.clientX,e=r.clientY,this.Iw=!0,this.Ow.style.top=this.Ow.offsetTop-i+"px",this.Ow.style.left=this.Ow.offsetLeft-t+"px",this.Ow.style.removeProperty("right"),this.Ow.style.removeProperty("bottom"))}}}Rw(){let t=0,i=0,s=0,e=0,h=!1;this.Ow.ontouchstart=r=>{r=r||ni.event,s=r.touches[0].clientX,e=r.touches[0].clientY,h=!0,this.Ow.ontouchend=()=>{h=!1,ni.document.ontouchend=null,ni.document.ontouchmove=null},this.Ow.ontouchmove=r=>{h&&(Bi(r),r=r||ni.event,t=s-r.touches[0].clientX,i=e-r.touches[0].clientY,s=r.touches[0].clientX,e=r.touches[0].clientY,this.Ow.style.top=this.Ow.offsetTop-i+"px",this.Ow.style.left=this.Ow.offsetLeft-t+"px",this.Ow.style.removeProperty("right"),this.Ow.style.removeProperty("bottom"))}}}Dw(){this.Ow.style.setProperty("top","10px"),this.Ow.style.setProperty("left","10px"),this.Ow.style.position="absolute",this.Ow.style.display="flex",this.Ow.style.alignItems="flex-start",this.Nw.style.setProperty("display","none")}removePositionProperty(){this.Ow.style.removeProperty("top"),this.Ow.style.removeProperty("left"),this.Ow.style.removeProperty("bottom"),this.Ow.style.removeProperty("right")}setPositionProperty(t){switch(this.removePositionProperty(),t){case cr.BottomLeft:this.Ow.style.setProperty("bottom","10px"),this.Ow.style.setProperty("left","10px");break;case cr.TopLeft:this.Ow.style.setProperty("top","10px"),this.Ow.style.setProperty("left","10px");break;case cr.BottomRight:this.Ow.style.setProperty("bottom","10px"),this.Ow.style.setProperty("right","10px");break;case cr.TopRight:default:this.Ow.style.setProperty("top","10px"),this.Ow.style.setProperty("right","10px")}}zw(t){for(let i=0;i<t.length;i+=1){const s=this.$w.insertRow();for(let e=0;e<t[i].length;e+=1){const h=s.insertCell(),r=t[i][e];"object"!=typeof r?this.Uw(r,h):this.addCustomButton(r,h)}}}Uw(t,i){switch(t){case Fh.ZoomIn:this.Yw(new Yh(this.Qs,this.chart,this.ee),i);break;case Fh.ZoomInX:this.Yw(new Hh(this.Qs,this.chart,this.ee),i);break;case Fh.ZoomInY:this.Yw(new Xh(this.Qs,this.chart,this.ee),i);break;case Fh.ZoomOut:this.Yw(new Wh(this.Qs,this.chart,this.ee),i);break;case Fh.ZoomOutX:this.Yw(new jh(this.Qs,this.chart,this.ee),i);break;case Fh.ZoomOutY:this.Yw(new Zh(this.Qs,this.chart,this.ee),i);break;case Fh.ZoomToFit:this.Yw(new Jh(this.Qs,this.chart,this.ee),i);break;case Fh.ToggleAnimations:this.Yw(new Qh(this.Qs,this.chart,this.ee),i);break;default:console.error(`No predefined button like "${Fh[t]}" exists.`)}}Yw(t,i){i.rowSpan=t.Js.rows,i.colSpan=t.Js.columns,t.ue(i)}addCustomButton(t,i){const s=new Kh(this.Qs,t,this.chart);return this.Yw(s,i),this}dispose(){this.Lw.remove(),this.D.R("dispose",{})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class cd extends Kc{constructor(t,i,s,e,h,r,n,o,a,l,c,u){var d;super(t,i,s,e,h,r,n,o,a,l),this.Hw=0,this.D=new zt,this.Ko=u,this.vl=this.Ys.hd(this.scale).Ne(Ji(this._t.lineSeriesStrokeStyle,c)).sd(Ji(this._t.pointSeriesFillStyle,c)).ed(Ji(this._t.areaSeriesPositiveFillStyle,c)).Xw(void 0).ud(7),this.vl.Ww=!1!==(null===(d=this.Ko)||void 0===d?void 0:d.allowDataGrouping),this.ws(this.vl)}yy(){return this.getSampleCount()>0}Ms(){return this.getDataSet().Pu()}setDataSet(t){var i;return t===(null===(i=this.qu)||void 0===i?void 0:i.si)||(t.au&&this.chart.St.Zo(Gr.so),t.cu&&this.chart.St.Zo(Gr.io),this.qu=fs(t,this.qu,(()=>({change:()=>{this.Hw+=1,this.Hw>1&&this.chart.St.Zo(Gr.qn),this.chart.St.Ls()},clear:()=>{this.chart.St.Ls()}}))),this.vl.td(t),this.chart.St.Ls()),this}getDataSet(){return this.jw()}setStrokeStyle(t){return this.vl.Ne(t),this.Ys.Ls(),this}getStrokeStyle(){return this.vl.In()}setAreaFillStyle(t){return this.vl.ed(t),this.Ys.Ls(),this}getAreaFillStyle(){return this.vl.Zw()}setPointFillStyle(t){return this.vl.sd(t),this.Ys.Ls(),this}getPointFillStyle(){return this.vl.ld()}setPointSize(t){return this.vl.ud(t),this.Ys.Ls(),this}getPointSize(){return this.vl.Qw()}setPointShape(t){return this.vl.rd(t),this.Ys.Ls(),this}getPointShape(){return this.vl.nd()}setPointRotation(t){return this.vl.od(t),this.Ys.Ls(),this}getPointRotation(){return this.vl.ad()}setPointAlignment(t){return this.vl.Jw(t),this.chart.St.Ls(),this}getPointAlignment(){return this.vl.Kw()}setCurvePreprocessing(t){return this.vl.Xw(t),this.Ys.Ls(),this}getCurvePreprocessing(){return this.vl.qw()}add(t){return this.jw().add(t),this.Ys.Ls(),this}addArraysXY(t,i){return this.jw().addArraysXY(t,i),this.Ys.Ls(),this}appendJSON(t,i){return this.jw().appendJSON(t,i),this.Ys.Ls(),this}appendSample(t){return this.jw().appendSample(t),this.Ys.Ls(),this}appendSamples(t){return this.jw().appendSamples(t),this.Ys.Ls(),this}fill(t){return this.jw().fill(t),this.Ys.Ls(),this}setSamples(t){return this.jw().setSamples(t),this.Ys.Ls(),this}alterSamples(t,i){return this.jw().alterSamples(t,i),this.Ys.Ls(),this}alterSamplesByID(t,i){return this.jw().alterSamplesByID(t,i),this.Ys.Ls(),this}getSampleCount(){return this.jw().getSampleCount()}getNextSampleIndex(){return this.jw().getNextSampleIndex()}clear(){return this.jw().clear(),this.Ys.Ls(),this}setMaxSampleCount(t){return this.jw().setMaxSampleCount(t),this.Ys.Ls(),this}getMaxSampleCount(){return this.jw().getMaxSampleCount()}readBack(t){return this.jw().readBack(t)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){let s=Ha(i);void 0!==this.getCurvePreprocessing()&&(s=!1);const e=this.t_(),h=_e(t)?this.chart.translateCoordinate(t,{x:this.axisX,y:this.axisY}):t,r=e.Ru(h,s,this.scale,this.chart.xf);if(void 0!==r)return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,series:this,axisX:this.axisX,axisY:this.axisY}}Kt(t,i){const s=this.getDataSet(),e=null==t?void 0:t.dataPoint;return void 0===s.Pu()||e?e?{cursorPosition:{resultTable:e,resultTableScale:this.scale,pointMarker:e,pointMarkerScale:{x:this.axisX,y:this.axisY}},...e,series:this,axisX:this.axisX,axisY:this.axisY}:void 0:As({series:this,axisX:this.axisX,axisY:this.axisY},{x:0,y:0,cursorPosition:0,id:0,rotation:0,size:0,color:0,lookupValue:0,multiHit:0,iSample:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}t_(){return this.jw()}Gs(){return ji(this.getPointFillStyle(),this.vl.Tt())||ji(this.getStrokeStyle().getFillStyle(),this.vl.Tt())||ji(this.getAreaFillStyle(),this.vl.Tt())}Qv(){var t;const i=null===(t=this.qu)||void 0===t?void 0:t.si;return this.getVisible()&&this.getAutoScrollingEnabled()&&void 0!==i&&i.iu>0}Mb(t){}Cb(t){const i=this.vl.ba();return i&&"y"===i.i_&&!t&&i.s_(),this.vl.jt(t)}kb(t){const i=this.vl.ba();return i&&"y"===i.i_&&!t&&i.s_(),this.vl.Wt(t)}Tb(t){const i=this.vl.ba();return i&&"x"===i.i_&&!t&&i.s_(),this.vl.Qt(t)}Fb(t){const i=this.vl.ba();return i&&"x"===i.i_&&!t&&i.s_(),this.vl.Zt(t)}Dr(){return{x:this.vl.Wl(),y:this.vl.jl()}}hy(){var t;super.hy();const i=Ge(null!==(t=this.Ms())&&void 0!==t?t:"ProgressiveX");this.vl.e_("x"===i?0===this.xAxis.vf?"bottom":"top":0===this.yAxis.vf?"left":"right")}jw(){if(!this.qu){const t=new $n(this.Ko);t.au&&this.chart.St.Zo(Gr.so),t.cu&&this.chart.St.Zo(Gr.io),this.qu=fs(t,this.qu,(()=>({change:()=>{this.Hw+=1,this.Hw>1&&this.chart.St.Zo(Gr.qn),this.chart.St.Ls()},clear:()=>{this.chart.St.Ls()}}))),this.vl.td(t)}return this.qu.si}styleLegendEntry(t,i=!1){const s=this.getPointFillStyle(),e=this.getAreaFillStyle();Wi(t,this._t,i,{stroke:this.getStrokeStyle(),fill:s!==V?s:e,behavior:{priority:"stroke"}})}$s(){return this.Ds||this.getPointShape()}De(t,i){t.Bt(i),this.Ys.Ls()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const ud={pan:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,chartInteractions:void 0},dd=(t,i,s,e)=>{t.seriesBackground.addEventListener(i,s,e),t.getSeries().forEach((t=>t.addEventListener(i,s,e)));const h=t=>t.series.addEventListener(i,s,e);return t.addEventListener("seriesadd",h),()=>{t.seriesBackground.removeEventListener(i,s),t.getSeries().forEach((t=>t.removeEventListener(i,s))),t.removeEventListener("seriesadd",h)}},fd=(t,i,s,e)=>{const h=[];return t.forEachAxis((t=>{const r=i=>s(t,i);t.addEventListener(i,r,e),h.push((()=>t.removeEventListener(i,r)))})),t.addEventListener("axisadd",(t=>{const r=i=>s(t.axis,i);t.axis.addEventListener(i,r,e),h.push((()=>t.axis.removeEventListener(i,r)))})),()=>{h.forEach((t=>t()))}},Ad=(...t)=>(i,s)=>t.forEach((t=>t.forEach((t=>{t.axis.ot.Z(i),t.axis.mf.Z(s)})))),gd=r(10,10);var vd;!function(t){t[t.Top=0]="Top",t[t.Bottom=1]="Bottom",t[t.Left=2]="Left",t[t.Right=3]="Right"}(vd||(vd={}));const yd=new Set([vd.Top,vd.Bottom,vd.Left,vd.Right]),pd=t=>t.setStopped(!0),md=(t,i)=>{if(!t||!i)throw new Error("LightningChart JS error | either X or Y axis didn't exist when creating a series.");const s="linear-highPrecision"===t.Dh.type||"linear-highPrecision"===i.Dh.type,e="logarithmic"===t.Dh.type||"logarithmic"===i.Dh.type;if(s&&e){const s=`Invalid Axis combination | 'logarithmic' can't be combined with 'linear-highPrecision' (x: ${t.Dh.type}, y: ${i.Dh.type})`;throw new Error(s)}};var Sd,bd,xd;!function(t){t[t.seriesBackground=0]="seriesBackground",t[t.gridLine0=1]="gridLine0",t[t.gridLine1=2]="gridLine1",t[t.gridLine2=3]="gridLine2",t[t.highlightersBelow=4]="highlightersBelow"}(Sd||(Sd={})),function(t){t[t.plotting=0]="plotting",t[t.highlightersAbove=1]="highlightersAbove",t[t.fg=2]="fg"}(bd||(bd={}));class Md extends Jl{constructor(t,i,s,e,h,r,n){super(t,i,s,i.wA("chartXY bg",0),e,i.St._t.chartXYBackgroundFillStyle,i.St._t.chartXYBackgroundStrokeStyle,i.St._t.chartXYTitleFont,i.St._t.chartXYTitleFillStyle,i.St._t.chartXYTitleShadow,n),this.h_=this.lA.d2({scaleXYConstructor:be}),this.Yf=[],this.Hf=[],this.Wf=[],this.Xf=[],this.r_=new Map,this.n_=!0,this.o_=[],this.a_=this._t.chartXYZoomingRectangleFillStyle,this.l_=this._t.chartXYZoomingRectangleStrokeStyle,this.if=wd,this.xb=0,this.om=[],this.lm=()=>{if(this.dt)return;const t=new Map;this.forEachAxis((i=>{void 0!==i.Df().find((t=>t.yy()))&&t.set(i,{...i.getInterval(),stopped:i.getStopped()})})),t.size<=0||(this.om.push(t),this.om.length>100&&this.om.shift())},this.c_=(t,i,s)=>{const e=t.solveNearest(i,s);return e&&Ls(e.cursorPosition.pointMarker.x,e.axisX.getInterval().start,e.axisX.getInterval().end)&&Ls(e.cursorPosition.pointMarker.y,e.axisY.getInterval().start,e.axisY.getInterval().end)?e:void 0},this.u_=Ad(this.Hf,this.Yf),this.d_=Ad(this.Wf,this.Xf),this.f_=t=>{this.u_(t.engineWidth,t.engineHeight),this.d_(t.engineHeight,t.engineWidth),this.h_.Z(t.engineWidth,t.engineHeight),this.St.Ls()},this.A_=(t,i)=>{this.r_.set(t,i)},this.ff=t=>{const i=this.Hf.findIndex((i=>i.axis===t)),s=this.Yf.findIndex((i=>i.axis===t)),e=this.Wf.findIndex((i=>i.axis===t)),h=this.Xf.findIndex((i=>i.axis===t));i>=0&&this.Hf.splice(i,1),s>=0&&this.Yf.splice(s,1),e>=0&&this.Wf.splice(e,1),h>=0&&this.Xf.splice(h,1),this.r_.delete(t),this.St.Ls()},this.addAreaSeries=t=>{const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=t&&t.baseline?t.baseline:0,h=new(t&&t.type?t.type:Tu.Positive)(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,e,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length);return this.Ly(h),h},this.addAreaRangeSeries=t=>{const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=new Fu(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length);return this.Ly(e),e},this.D=new zt,this.St.Zo(Gr.jn),this.setPadding({right:15}),this.v_=i.bm("chartXY series bg",Sd.seriesBackground),this.y_=[Sd.gridLine0,Sd.gridLine1,Sd.gridLine2].map((t=>i.p_(`chartXY gridline #${t}`,t))),this.uf=i.p_("chartXY highlighters below",Sd.highlightersBelow),this.Km=i.Ng("chartXY plotting",bd.plotting),this.df=i.Ng("chartXY highlighters above",bd.highlightersAbove),this.cf=i.Ng("chartXY fg",bd.fg),this.h_.x.W(0,this.uiScale.x.getCellSize()-(this.oi.left+this.oi.right+this.nn.left+this.nn.right)),this.h_.y.W(0,this.uiScale.y.getCellSize()-(this.oi.bottom+this.oi.top+this.nn.bottom+this.nn.top)),this.h_.Z(this.uiScale.xi().x,this.uiScale.xi().y),this.Iy=this.v_.Pe(this.h_).Ie(this._t.chartXYSeriesBackgroundFillStyle).Fe(Wt),this.Py=this.cf.Pe(this.h_).Ie(V).Fe(this._t.chartXYSeriesBackgroundStrokeStyle).setPointerEvents(!1),super.Fy(this.Iy,this.Py),this.setSeriesBackgroundEffect(!1);const o=gi(r?r.cursorBuilder:void 0,rd),a=i.$g();this.Ug=Qa(this,a,o.ag(a,this.h_,this.h_,ui,this._t),this,"show-all",Fd,((t,i)=>{const s=this.translateCoordinate(t,{x:t.axisX,y:t.axisY},this.coordsClient);return Math.sqrt((s.clientX-i.clientX)**2+(s.clientY-i.clientY)**2)})),this.addAxisX(r&&r.defaultAxisX),this.addAxisY(r&&r.defaultAxisY),this.addEventListener("resize",this.f_),this.Sh.Sr("ChartXY"),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled)),this.MA(h,this.h_),this.Tm=(t=>{let i={},s=!1,e=!1,h=!1;const r=()=>{const s=t.getAxes().find((t=>t.getScrollStrategy()===fr.progressive||t.getScrollStrategy()===fr.regressive)),e=t.getSeries().map((t=>t.Ms())).find((t=>t)),h=t.getSeries().find((t=>t instanceof Mu||t instanceof cd&&!O(t.getAreaFillStyle())&&t.Ms())),r=s?{type:"scrolling",scrollingAxis:s,x:s.isX,y:s.isY}:e?{type:"progressive",x:"ProgressiveX"===e||"RegressiveX"===e,y:"ProgressiveY"===e||"RegressiveY"===e}:{type:"freeform"};if("progressive"===r.type){const t={zoom:{wheel:{},stopScroll:!0},pan:{lmb:!1,rmb:{drag:{}}},restoreDefault:{doubleClick:!0},rectangleZoom:{lmb:{drag:{}},rmb:!1}},s={pan:{lmb:!1,rmb:{drag:{}}},zoom:{wheel:{},mode:h?"keep-start":"centered"},restoreDefault:{doubleClick:!0},rectangleZoom:{lmb:{drag:{}},rmb:!1}};return hi({rectangleZoom:{x:r.x,y:r.y,rmb:!1},pan:{x:r.x,y:r.y,pinch:{},lmb:!1,rmb:{drag:{}}},paginate:{x:r.x,y:r.y},zoom:{x:r.x,y:r.y,wheel:{},pinch:{},stopScroll:!0},restoreDefault:{doubleClick:!0},restorePrevious:{ctrl:{code:"KeyZ"}},xAxis:r.x?t:s,yAxis:r.y?t:s},i)}if("scrolling"===r.type){const t=(r.scrollingAxis.hh===fr.regressive?-1:1)*(r.scrollingAxis.getInterval().end>r.scrollingAxis.getInterval().start?1:-1)>0?"keep-end":"keep-start",s={zoom:{wheel:{},stopScroll:!1,mode:t},pan:{drag:{}},restoreDefault:{doubleClick:!0}},e={rectangleZoom:{lmb:{},rmb:!1,mmb:!1},pan:{lmb:!1,rmb:{drag:{}},mmb:!1},zoom:{drag:!1,wheel:{},mode:h?"keep-start":"centered"},restoreDefault:{doubleClick:!0}};return hi({rectangleZoom:!1,pan:{x:r.x,y:r.y,pinch:{},drag:{}},paginate:{x:r.x,y:r.y},zoom:{x:r.x,y:r.y,wheel:{},pinch:{stopScroll:!0},stopScroll:!1,mode:t},restoreDefault:{doubleClick:!0},restorePrevious:!1,xAxis:r.x?s:e,yAxis:r.y?s:e},i)}return hi({pan:{x:!0,y:!0,pinch:{},lmb:!1,rmb:{drag:{}}},zoom:{x:!0,y:!0,pinch:{},wheel:{},mode:"toward-pointer"},rectangleZoom:{x:!0,y:!0,lmb:!0,rmb:!1},restoreDefault:{doubleClick:!0},restorePrevious:{ctrl:{code:"KeyZ"}},axes:{pan:{rmb:{drag:{}},lmb:!1},rectangleZoom:{lmb:{drag:{}},rmb:!1},zoom:{wheel:{}},restoreDefault:{doubleClick:!0}}},i)},n=t=>{const i=r(),s=t.getUserInteractions();let e=t.isX?i.xAxis:i.yAxis,h=i.axes;return e=!1!==e?e:ud,h=!1!==h?h:ud,hi(null!=h?h:{},null!=e?e:{},s)},o=t=>{},a=i=>{if(!t.axisX||!t.axisY)return;const n=Fe(!1!==t.St.Ko.qo),o=r(),a=Te(o.pan,"drag",i,s,e,h);a&&n.push((()=>((t,i,s,e)=>{let h;const r=t.getCursorMode();let n=!1,o=i;"mouse"===i.pointerType&&i.preventDefault();const a=e=>{if(e.pointerId!==i.pointerId)return;const r=e.clientX-o.clientX,a=e.clientY-o.clientY;if(o=e,!n){if(!("mouse"===e.pointerType||Math.max(Math.abs(e.clientX-i.clientX),Math.abs(e.clientY-i.clientY))>=10))return;n=!0,h=t.engine.setMouseStyle(!1===s.x?tr.Vertical:!1===s.y?tr.Horizontal:tr.Move),t.setCursorMode(void 0),ps()}Bi(e),s.x&&t.forEachAxisX((t=>{var i;const e=t.ze.chartInteractions;!1===e||"object"==typeof e&&!1===e.pan||(!1!==s.stopScroll&&t.setStopped(!0),t.pan(-r*(null!==(i=s.sensitivity)&&void 0!==i?i:1)))})),s.y&&t.forEachAxisY((t=>{var i;const e=t.ze.chartInteractions;!1===e||"object"==typeof e&&!1===e.pan||(!1!==s.stopScroll&&t.setStopped(!0),t.pan(a*(null!==(i=s.sensitivity)&&void 0!==i?i:1)))}));const l=s.on;l&&ni.requestAnimationFrame((()=>l({event:e})))},l=s=>{s.pointerId===i.pointerId&&(ni.removeEventListener("pointermove",a),ni.removeEventListener("pointerup",l),t.engine.container.removeEventListener("pointerdown",c),h=t.engine.restoreMouseStyle(h),e(),t.setCursorMode(r))},c=s=>{s.pointerId!==i.pointerId&&(ni.removeEventListener("pointermove",a),ni.removeEventListener("pointerup",l),t.engine.container.removeEventListener("pointerdown",c),h=t.engine.restoreMouseStyle(h),e(),t.setCursorMode(r))};ni.addEventListener("pointermove",a),ni.addEventListener("pointerup",l),t.engine.container.addEventListener("pointerdown",c),ms()})(t,i,a,f())));const l=Te(o.zoom,"drag",i,s,e,h);l&&n.push((()=>((t,i,s,e)=>{let h=t.engine.setMouseStyle(tr.ZoomIn);const r=t.getCursorMode();t.setCursorMode(void 0);let n=!1,o=i;"mouse"===i.pointerType&&i.preventDefault();const a=e=>{if(e.pointerId!==i.pointerId)return;Bi(e);const r={x:e.clientX-o.clientX,y:e.clientY-o.clientY};o=e,s.x&&t.forEachAxisX((e=>{var n;const o=e.ze.chartInteractions;if(!1===o||"object"==typeof o&&!1===o.zoom)return;let a;a="keep-start"===s.mode?e.getInterval().start:"keep-end"===s.mode?e.getInterval().end:"centered"===s.mode?e.ot.rt((e.ot.pi()+e.ot.mi())/2):t.translateCoordinate(i,{x:e,y:e}).x;const l=.05*e.Lh.getWidth({x:-r.x,y:r.y})*(null!==(n=s.sensitivity)&&void 0!==n?n:1);e.zoom(a,l),!1!==s.stopScroll&&e.setStopped(!0),h=t.engine.setMouseStyle(l<0?tr.ZoomIn:tr.ZoomOut,h)})),s.y&&t.forEachAxisY((e=>{var n;const o=e.ze.chartInteractions;if(!1===o||"object"==typeof o&&!1===o.zoom)return;let a;a="keep-start"===s.mode?e.getInterval().start:"keep-end"===s.mode?e.getInterval().end:"centered"===s.mode?e.ot.rt((e.ot.pi()+e.ot.mi())/2):t.translateCoordinate(i,{x:e,y:e}).y;const l=.05*e.Lh.getWidth({x:-r.x,y:r.y})*(null!==(n=s.sensitivity)&&void 0!==n?n:1);e.zoom(a,l),!1!==s.stopScroll&&e.setStopped(!0),h=t.engine.setMouseStyle(l<0?tr.ZoomIn:tr.ZoomOut,h)})),n||(ps(),n=!0);const a=s.on;a&&ni.requestAnimationFrame((()=>a({event:e})))},l=s=>{s.pointerId===i.pointerId&&(ni.removeEventListener("pointermove",a),ni.removeEventListener("pointerup",l),t.engine.container.removeEventListener("pointerdown",c),h=t.engine.restoreMouseStyle(h),e(),t.setCursorMode(r))},c=s=>{s.pointerId!==i.pointerId&&(ni.removeEventListener("pointermove",a),ni.removeEventListener("pointerup",l),t.engine.container.removeEventListener("pointerdown",c),h=t.engine.restoreMouseStyle(h),e(),t.setCursorMode(r))};ni.addEventListener("pointermove",a),ni.addEventListener("pointerup",l),t.engine.container.addEventListener("pointerdown",c),ms()})(t,i,l,f())));const c=Te(o.rectangleZoom,void 0,i,s,e,h);c&&n.push((()=>((t,i,s,e)=>{let h;const r=t.getCursorMode(),n=t.addRectangleSeries().setDrawOrder({seriesDrawOrderIndex:1e3}).setPointerEvents(!1).setCursorEnabled(!1).setAutoScrollingEnabled(!1).setClipping(!1),o=n.add({x1:0,x2:0,y1:0,y2:0});let a=!1,l=!1;"mouse"===i.pointerType&&i.preventDefault();const c=e=>{if(e.pointerId!==i.pointerId)return;Bi(e),s.x&&t.forEachAxisX((t=>{const i=t.ze.chartInteractions;!1===i||"object"==typeof i&&!1===i.rectangleZoom||t.setStopped(!0)})),s.y&&t.forEachAxisY((t=>{const i=t.ze.chartInteractions;!1===i||"object"==typeof i&&!1===i.rectangleZoom||t.setStopped(!0)}));const n=t.translateCoordinate(i,t.coordsAxis),c=t.translateCoordinate(e,t.coordsAxis),u=ot({x:0,y:0},t.h_,t.coordsAxis),d=ot({x:t.h_.x.getInnerEnd(),y:t.h_.y.getInnerEnd()},t.h_,t.coordsAxis);!1===s.x?o.setDimensions({y1:n.y,x1:u.x,y2:c.y,x2:d.x}):!1===s.y?o.setDimensions({x1:n.x,y1:u.y,x2:c.x,y2:d.y}):o.setDimensions({x1:n.x,y1:n.y,x2:c.x,y2:c.y});const f=Bs({x:e.clientX,y:e.clientY},{x:s.x?i.clientX:e.clientX,y:s.y?i.clientY:e.clientY})>=20,A=Ls(c.x,u.x,d.x)&&Ls(c.y,u.y,d.y);if(o.setFillStyle(f&&A?t.getZoomingRectangleFillStyle():V).setStrokeStyle(f&&A?t.getZoomingRectangleStrokeStyle():Wt),a||(ps(),a=!0),t.setCursorMode(f?void 0:r),f){if(h=t.engine.setMouseStyle(tr.ZoomIn,h),!l){const t=s.start;t&&t({event:e})}}else h=t.engine.restoreMouseStyle(h);l=f},u=o=>{if(o.pointerId!==i.pointerId)return;const a=Bs({x:o.clientX,y:o.clientY},{x:s.x?i.clientX:o.clientX,y:s.y?i.clientY:o.clientY})>=20,l=t.translateCoordinate(o,t.coordsAxis),f=ot({x:0,y:0},t.h_,t.coordsAxis),A=ot({x:t.h_.x.getInnerEnd(),y:t.h_.y.getInnerEnd()},t.h_,t.coordsAxis),g=Ls(l.x,f.x,A.x)&&Ls(l.y,f.y,A.y);a&&g&&t.forEachAxis((e=>{var h,r;if(e.isX&&!s.x)return;if(e.isY&&!s.y)return;const n=e.ze.chartInteractions;if(!1===n||"object"==typeof n&&!1===n.rectangleZoom)return;const a=t.translateCoordinate(i,{x:e,y:e}),l=t.translateCoordinate(o,{x:e,y:e}),c=e.Lh.getWidth(a),u=e.Lh.getWidth(l),d=Math.sign(u-c),f=Math.sign(e.getInterval().end-e.getInterval().start),A=d===f?c:u,g=d===f?u:c;e.ct(A,g,null!==(h=s.animationsEnabled)&&void 0!==h?h:void 0,null!==(r=s.stopScroll)&&void 0!==r?r:void 0,"interactionSetInterval")})),a&&ys("click"),t.setCursorMode(r),n.dispose(),ni.removeEventListener("pointermove",c),ni.removeEventListener("pointerup",u),t.engine.container.removeEventListener("pointerdown",d),h=t.engine.restoreMouseStyle(h),e();const v=a&&g&&s.on;v&&ni.requestAnimationFrame((()=>v({event:o})))},d=s=>{s.pointerId!==i.pointerId&&(t.setCursorMode(r),n.dispose(),ni.removeEventListener("pointermove",c),ni.removeEventListener("pointerup",u),t.engine.container.removeEventListener("pointerdown",d),h=t.engine.restoreMouseStyle(h),e())};ni.addEventListener("pointermove",c),ni.addEventListener("pointerup",u),t.engine.container.addEventListener("pointerdown",d),ms()})(t,i,c,f()))),n.end();const u=Te(o.pan,"pinch",i,s,e,h),d=Te(o.zoom,"pinch",i,s,e,h);(d||u)&&((t,i,s,e,h)=>{if(!s&&!e)return;const r=o=>{if(o.pointerId===i.pointerId)return;const a=h();let l;t.engine.container.removeEventListener("pointerdown",r),ni.removeEventListener("pointerup",n);let c=o;const u=t.getCursorMode();t.setCursorMode(void 0);const d=h=>{var r,n,a,u;const d=l,f=c;if(h.pointerId===i.pointerId)l=h;else{if(h.pointerId!==o.pointerId)return;c=h}if(Bi(h),void 0===l||void 0===d)return;const A={x:(l.clientX-d.clientX+(c.clientX-f.clientX))/2*(null!==(r=null==s?void 0:s.sensitivity)&&void 0!==r?r:1),y:(l.clientY-d.clientY+(c.clientY-f.clientY))/-2*(null!==(n=null==s?void 0:s.sensitivity)&&void 0!==n?n:1)};let g=!1;if(s&&s.x&&(g=!0,t.forEachAxisX((t=>{const i=t.ze.chartInteractions;!1===i||"object"==typeof i&&!1===i.pan||t.Qf({},A)}))),s&&s.y&&(g=!0,t.forEachAxisY((t=>{const i=t.ze.chartInteractions;!1===i||"object"==typeof i&&!1===i.pan||t.Qf({},A)}))),g){const t=null==s?void 0:s.on;t&&ni.requestAnimationFrame((()=>t({event:h})))}const v=Qs(Zs({x:Math.abs(d.clientX-f.clientX),y:Math.abs(d.clientY-f.clientY)},{x:Math.abs(l.clientX-c.clientX),y:Math.abs(l.clientY-c.clientY)}),{x:null!==(a=null==e?void 0:e.sensitivity)&&void 0!==a?a:1,y:null!==(u=null==e?void 0:e.sensitivity)&&void 0!==u?u:1});let y=!1;if(e&&e.x&&(y=!0,t.forEachAxisX((t=>{var i;const s=t.ze.chartInteractions;!1===s||"object"==typeof s&&!1===s.zoom||t.ct(t.ot.Pi(t.getInterval().start,-t.Lh.getWidth(v)),t.ot.Pi(t.getInterval().end,t.Lh.getWidth(v)),!1,null!==(i=e.stopScroll)&&void 0!==i?i:void 0,"interactionZoom")}))),e&&e.y&&(y=!0,t.forEachAxisY((t=>{var i;const s=t.ze.chartInteractions;!1===s||"object"==typeof s&&!1===s.zoom||t.ct(t.ot.Pi(t.getInterval().start,-t.Lh.getWidth(v)),t.ot.Pi(t.getInterval().end,t.Lh.getWidth(v)),!1,null!==(i=e.stopScroll)&&void 0!==i?i:void 0,"interactionZoom")}))),y){const t=null==e?void 0:e.on;t&&ni.requestAnimationFrame((()=>t({event:h})))}},f=s=>{s.pointerId!==i.pointerId&&s.pointerId!==o.pointerId||(Bi(s),t.setCursorMode(u),ni.removeEventListener("pointermove",d),ni.removeEventListener("pointerup",f),a())};ni.addEventListener("pointermove",d),ni.addEventListener("pointerup",f),ms()},n=s=>{s.pointerId===i.pointerId&&(t.engine.container.removeEventListener("pointerdown",r),ni.removeEventListener("pointerup",n))};t.engine.container.addEventListener("pointerdown",r),ni.addEventListener("pointerup",n)})(t,i,u,d,f)};dd(t,"wheel",(i=>{const n=Fe(!1!==t.St.Ko.qo),o=r(),a=Te(o.pan,"wheel",i,s,e,h);a&&n.push((()=>((t,i,s)=>{if(Bi(i),t.forEachAxisX((t=>{var e;const h=t.ze.chartInteractions;!1===h||"object"==typeof h&&!1===h.pan||s.x&&(!1!==s.stopScroll&&t.setStopped(!0),t.pan(-30*Math.sign(i.deltaY)*(null!==(e=s.sensitivity)&&void 0!==e?e:1)))})),t.forEachAxisY((t=>{var e;const h=t.ze.chartInteractions;!1===h||"object"==typeof h&&!1===h.pan||s.y&&(!1!==s.stopScroll&&t.setStopped(!0),t.pan(-30*Math.sign(i.deltaY)*(null!==(e=s.sensitivity)&&void 0!==e?e:1)))})),s.x||s.y){const e=t.engine.setMouseStyle(!s.x&&s.y?tr.Vertical:s.x&&!s.y?tr.Horizontal:tr.Move);ni.setTimeout((()=>{t.engine.restoreMouseStyle(e)}),500);const h=s.on;h&&ni.requestAnimationFrame((()=>h({event:i})))}})(t,i,a)));const l=Te(o.zoom,"wheel",i,s,e,h);l&&n.push((()=>((t,i,s)=>{Bi(i),t.forEachAxisX((e=>{var h;const r=e.ze.chartInteractions;if(!1===r||"object"==typeof r&&!1===r.zoom)return;if(!s.x)return;let n;n="keep-start"===s.mode?e.getInterval().start:"keep-end"===s.mode?e.getInterval().end:"centered"===s.mode?e.ot.rt((e.ot.pi()+e.ot.mi())/2):t.translateCoordinate(i,{x:e,y:e}).x,e.zoom(n,Math.sign(i.deltaY)*(null!==(h=s.sensitivity)&&void 0!==h?h:1)),!1!==s.stopScroll&&e.setStopped(!0)})),t.forEachAxisY((e=>{var h;const r=e.ze.chartInteractions;if(!1===r||"object"==typeof r&&!1===r.zoom)return;if(!s.y)return;let n;n="keep-start"===s.mode?e.getInterval().start:"keep-end"===s.mode?e.getInterval().end:"centered"===s.mode?e.ot.rt((e.ot.pi()+e.ot.mi())/2):t.translateCoordinate(i,{x:e,y:e}).y,e.zoom(n,Math.sign(i.deltaY)*(null!==(h=s.sensitivity)&&void 0!==h?h:1)),!1!==s.stopScroll&&e.setStopped(!0)}));const e=t.engine.setMouseStyle(i.deltaY<0?tr.ZoomIn:tr.ZoomOut);ni.setTimeout((()=>{t.engine.restoreMouseStyle(e)}),500);const h=s.on;h&&ni.requestAnimationFrame((()=>h({event:i})))})(t,i,l))),n.end()})),dd(t,"dblclick",(i=>{if(i.defaultPrevented)return;const n=Fe(!1!==t.St.Ko.qo),o=r(),a=Te(o.restoreDefault,void 0,i,s,e,h);a&&a.doubleClick&&n.push((()=>{Bi(i),((t,i,s)=>{ms();const e=new Map;t.forEachAxis((t=>{var s,h;const r=t.ze.chartInteractions;!1===r||"object"==typeof r&&!1===r.restoreDefault||e.set(t,{animate:null!==(s=i.animationsEnabled)&&void 0!==s?s:void 0,stopAxisAfter:null!==(h=i.stopScroll)&&void 0!==h?h:void 0})})),t.m_(e);const h=t.engine.setMouseStyle(tr.ZoomOut);ni.setTimeout((()=>{t.engine.restoreMouseStyle(h)}),500);const r=i.on;r&&ni.requestAnimationFrame((()=>r({event:s})))})(t,a,i)}));const l=Te(o.restorePrevious,void 0,i,s,e,h);l&&l.doubleClick&&n.push((()=>{Bi(i);const s=t.getAxes().filter((t=>{const i=t.ze.chartInteractions;return!(!1===i||"object"==typeof i&&!1===i.restorePrevious)}));t.restorePreviousZoomState({whitelist:s});const e=t.engine.setMouseStyle(tr.ZoomOut);ni.setTimeout((()=>{t.engine.restoreMouseStyle(e)}),500);const h=l.on;h&&ni.requestAnimationFrame((()=>h({event:i})))})),n.end()}));const l=(i,r)=>{const o=Fe(!1!==t.St.Ko.qo),a=n(i),l=Te(a.pan,"drag",r,s,e,h);l&&o.push((()=>((t,i,s,e)=>{const h=t.chart,r=h.getCursorMode();h.setCursorMode(void 0);let n=h.engine.setMouseStyle(t.isY?tr.Vertical:tr.Horizontal),o=!1,a=i;"mouse"===i.pointerType&&i.preventDefault();const l=e=>{var h;if(e.pointerId!==i.pointerId)return;Bi(e);const r=e.clientX-a.clientX,n=e.clientY-a.clientY;a=e,!1!==s.stopScroll&&t.setStopped(!0),t.pan((t.isX?-r:n)*(null!==(h=s.sensitivity)&&void 0!==h?h:1)),o||(ps(),o=!0);const l=s.on;l&&ni.requestAnimationFrame((()=>l({event:e})))},c=s=>{s.pointerId===i.pointerId&&(Bi(s),ni.removeEventListener("pointermove",l),ni.removeEventListener("pointerup",c),n=t.chart.engine.restoreMouseStyle(n),e(),t.chart.setCursorMode(r))};ni.addEventListener("pointermove",l),ni.addEventListener("pointerup",c)})(i,r,l,f())));const c=Te(a.zoom,"drag",r,s,e,h);c&&o.push((()=>((t,i,s,e)=>{const h=t.chart;let r=h.engine.setMouseStyle(tr.ZoomIn);const n=h.getCursorMode();h.setCursorMode(void 0);let o=!1,a=i;"mouse"===i.pointerType&&i.preventDefault();const l=e=>{var n;if(e.pointerId!==i.pointerId)return;Bi(e);const l={x:e.clientX-a.clientX,y:e.clientY-a.clientY};let c;a=e,c="keep-start"===s.mode?t.getInterval().start:"keep-end"===s.mode?t.getInterval().end:t.ot.rt((t.ot.pi()+t.ot.mi())/2);const u=.05*t.Lh.getWidth({x:-l.x,y:l.y})*(null!==(n=s.sensitivity)&&void 0!==n?n:1);t.zoom(c,u),!1!==s.stopScroll&&t.setStopped(!0),r=h.engine.setMouseStyle(u<0?tr.ZoomIn:tr.ZoomOut,r),o||(ps(),o=!0);const d=s.on;d&&ni.requestAnimationFrame((()=>d({event:e})))},c=t=>{t.pointerId===i.pointerId&&(Bi(t),ni.removeEventListener("pointermove",l),ni.removeEventListener("pointerup",c),r=h.engine.restoreMouseStyle(r),h.setCursorMode(n),e())};ni.addEventListener("pointermove",l),ni.addEventListener("pointerup",c)})(i,r,c,f())));const u=Te(a.rectangleZoom,void 0,r,s,e,h);u&&o.push((()=>((t,i,s,e)=>{const h=t.chart,r=h.getCursorMode();h.setCursorMode(void 0);let n=h.engine.setMouseStyle(tr.ZoomIn);const o=t.addBand(!0).setPointerEvents(!1).setValueStart(t.Lh.getWidth(h.translateCoordinate(i,{x:t,y:t}))).setValueEnd(t.Lh.getWidth(h.translateCoordinate(i,{x:t,y:t}))).setVisible(!1).setFillStyle(h.getZoomingRectangleFillStyle()).setStrokeStyle(h.getZoomingRectangleStrokeStyle());let a=!1,l=!1;"mouse"===i.pointerType&&i.preventDefault();const c=e=>{if(e.pointerId!==i.pointerId)return;Bi(e),t.setStopped(!0);const r=h.translateCoordinate(e,{x:t,y:t});o.setValueEnd(t.Lh.getWidth(r));const n=Bs({x:e.clientX,y:e.clientY},{x:t.isX?i.clientX:e.clientX,y:t.isY?i.clientY:e.clientY})>=20;if(o.setVisible(n),a||(ps(),a=!0),n&&!l){const t=n&&s.start;t&&t({event:e})}l=n},u=a=>{var l,d;if(a.pointerId!==i.pointerId)return;Bi(a);const f=Bs({x:a.clientX,y:a.clientY},{x:t.isX?i.clientX:a.clientX,y:t.isY?i.clientY:a.clientY})>=20;if(f){const e=t.Lh.getWidth(h.translateCoordinate(i,{x:t,y:t})),r=t.Lh.getWidth(h.translateCoordinate(a,{x:t,y:t})),n=Math.sign(r-e),o=Math.sign(t.getInterval().end-t.getInterval().start),c=n===o?e:r,u=n===o?r:e;t.ct(c,u,null!==(l=s.animationsEnabled)&&void 0!==l?l:void 0,null!==(d=s.stopScroll)&&void 0!==d?d:void 0,"interactionSetInterval")}o.dispose(),ni.removeEventListener("pointermove",c),ni.removeEventListener("pointerup",u),n=h.engine.restoreMouseStyle(n),e(),h.setCursorMode(r);const A=f&&s.on;A&&ni.requestAnimationFrame((()=>A({event:a})))};ni.addEventListener("pointermove",c),ni.addEventListener("pointerup",u)})(i,r,u,f()))),o.end()};fd(t,"pointerenter",((t,i)=>{const s=n(t);t.getHighlightOnHover()&&(s.pan||s.rectangleZoom||s.restoreDefault||s.zoom)&&t.setHighlight(!0)})),fd(t,"pointerleave",((t,i)=>{t.getHighlightOnHover()&&t.setHighlight(!1)})),fd(t,"wheel",((i,r)=>{const o=Fe(!1!==t.St.Ko.qo),a=n(i),l=Te(a.zoom,"wheel",r,s,e,h);l&&o.push((()=>((t,i,s)=>{var e;let h;Bi(i),h="keep-start"===s.mode?t.getInterval().start:"keep-end"===s.mode?t.getInterval().end:"centered"===s.mode?t.ot.rt((t.ot.pi()+t.ot.mi())/2):t.Lh.getWidth(t.chart.translateCoordinate(i,{x:t,y:t})),t.zoom(h,Math.sign(i.deltaY)*(null!==(e=s.sensitivity)&&void 0!==e?e:1)),!1!==s.stopScroll&&t.setStopped(!0);const r=t.chart.engine.setMouseStyle(i.deltaY<0?tr.ZoomIn:tr.ZoomOut);ni.setTimeout((()=>{t.chart.engine.restoreMouseStyle(r)}),500);const n=s.on;n&&ni.requestAnimationFrame((()=>n({event:i})))})(i,r,l)));const c=Te(a.pan,"wheel",r,s,e,h);c&&o.push((()=>((t,i,s)=>{var e;Bi(i);const h=t.chart;!1!==s.stopScroll&&t.setStopped(!0),t.pan(30*Math.sign(i.deltaY)*t.Lh.getWidth({x:-1,y:1})*(null!==(e=s.sensitivity)&&void 0!==e?e:1));const r=h.engine.setMouseStyle(t.isY?tr.Vertical:tr.Horizontal);ni.setTimeout((()=>{t.chart.engine.restoreMouseStyle(r)}),500);const n=s.on;n&&ni.requestAnimationFrame((()=>n({event:i})))})(i,r,c))),o.end()})),fd(t,"dblclick",((i,r)=>{var o,a;if(r.defaultPrevented)return;const l=n(i),c=Te(l.restoreDefault,void 0,r,s,e,h);if(c&&c.doubleClick){Bi(r),i.fit(null!==(o=c.animationsEnabled)&&void 0!==o?o:void 0,null!==(a=c.stopScroll)&&void 0!==a?a:void 0);const s=t.engine.setMouseStyle(tr.ZoomOut);ni.setTimeout((()=>{t.engine.restoreMouseStyle(s)}),500);const e=c.on;e&&ni.requestAnimationFrame((()=>e({event:r})))}}));const c=i=>{const n=r();let o=!1,a=!1,l=!1;for(const t of Object.keys(n)){const i=n[t];if("object"==typeof i)if("axes"===t||"xAxis"===t||"yAxis"===t){const t=i;if("object"!=typeof t)continue;for(const i of Object.keys(t)){const s=t[i];"object"==typeof s&&("ctrl"in s&&void 0!==s.ctrl&&(o=!0),"shift"in s&&void 0!==s.shift&&(a=!0),"alt"in s&&void 0!==s.alt&&(l=!0))}}else"ctrl"in i&&void 0!==i.ctrl&&(o=!0),"shift"in i&&void 0!==i.shift&&(a=!0),"alt"in i&&void 0!==i.alt&&(l=!0)}e=i.ctrlKey,s=i.shiftKey,h=i.altKey,("Control"===i.key&&o||"Shift"===i.key&&a||"Alt"===i.key&&l)&&i.preventDefault();const c=Te(n.restorePrevious,void 0,i,s,e,h);if(c&&c.code===i.code){Bi(i);const s=t.getAxes().filter((t=>{const i=t.ze.chartInteractions;return!(!1===i||"object"==typeof i&&!1===i.restorePrevious)}));t.restorePreviousZoomState({whitelist:s});const e=c.on;e&&ni.requestAnimationFrame((()=>e({event:i})))}const u=Te(n.paginate,void 0,i,s,e,h);u&&((t,i,s)=>{var e,h,r,n;const o=null!==(h=null===(e=s.forward)||void 0===e?void 0:e.code)&&void 0!==h?h:"ArrowLeft",a=null!==(n=null===(r=s.backward)||void 0===r?void 0:r.code)&&void 0!==n?n:"ArrowRight",l=i.code===o?1:i.code===a?-1:0;if(0===l)return;let c=!1;if(t.forEachAxis((t=>{var i;const e=t.ze.chartInteractions;!1===e||"object"==typeof e&&!1===e.paginate||t.isX&&!s.x||t.isY&&!s.y||(c=!0,!1!==s.stopScroll&&t.setStopped(!0),t.pan(-l*(t.Vh>t.zh?1:-1)*.5*t.ot.Si()*(null!==(i=s.sensitivity)&&void 0!==i?i:1)))})),c){Bi(i);const e=t.engine.setMouseStyle(!s.x&&s.y?tr.Vertical:s.x&&!s.y?tr.Horizontal:tr.Move);ni.setTimeout((()=>{t.engine.restoreMouseStyle(e)}),500);const h=s.on;h&&ni.requestAnimationFrame((()=>h({event:i})))}})(t,i,u);const d=Te(n.restoreDefault,void 0,i,s,e,h);if(d&&d.code===i.code){Bi(i),t.getAxes().forEach((t=>{var i,s;const e=t.ze.chartInteractions;!1===e||"object"==typeof e&&!1===e.restoreDefault||t.fit(null!==(i=d.animationsEnabled)&&void 0!==i?i:void 0,null!==(s=d.stopScroll)&&void 0!==s?s:void 0)}));const s=d.on;s&&ni.requestAnimationFrame((()=>s({event:i})))}},u=t=>{e=t.ctrlKey,s=t.shiftKey,h=t.altKey},d=()=>{e=!1,s=!1,h=!1};ni.addEventListener("keydown",c),ni.addEventListener("keyup",u),ni.addEventListener("blur",d),t.addEventListener("dispose",(()=>{ni.removeEventListener("keydown",c),ni.removeEventListener("keyup",u),ni.removeEventListener("blur",d)}));const f=()=>(A(),g(),v(),()=>{A=dd(t,"pointermove",o),g=dd(t,"pointerdown",a),v=fd(t,"pointerdown",l)});let A=dd(t,"pointermove",o),g=dd(t,"pointerdown",a),v=fd(t,"pointerdown",l);return{setUserInteractions:t=>{if(void 0===t)i={pan:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,restorePrevious:!1,axes:!1,xAxis:!1,yAxis:!1};else if(0===Object.keys(t).length)i={};else for(const s of Object.keys(t))!1===t[s]||"object"==typeof t[s]?i[s]=t[s]:i[s]={}},getUserInteractions:r}})(this)}get coordsAxis(){return{x:this.getDefaultAxisX(),y:this.getDefaultAxisY()}}getSeries(){return this._y}restorePreviousZoomState(t){if(this.om.length<=1)return this;this.om.pop();const i=this.om[this.om.length-1];return i?(this.S_=ni.performance.now(),this.forEachAxis((s=>{if((null==t?void 0:t.whitelist)&&!t.whitelist.includes(s))return;const e=i.get(s);e?s.ct(e.start,e.end,null==t?void 0:t.animate,void 0!==(null==t?void 0:t.stopAxisAfter)?t.stopAxisAfter:e.stopped,"userSetInterval"):s.fit(null==t?void 0:t.animate,null==t?void 0:t.stopAxisAfter)})),this):this}clearPreviousZoomStateHistory(){if(void 0!==this.Bm)this.om.length=0;else for(;this.om.length>1;)this.om.unshift();return this}setCursor(t){return this.Ug.setCursor(t),this}getCursor(){return this.Ug.getCursor()}setCursorMode(t){return this.Ug.setCursorMode(t),this}getCursorMode(){return this.Ug.getCursorMode()}setCustomCursor(t){return this.Ug.setCustomCursor(t),this}setCursorFormatting(t){return this.Ug.setCursorFormatting(t),this}getCursorFormatting(){return this.Ug.getCursorFormatting()}solveNearest(t,i=this.getCursorMode()||"show-nearest"){return this.Ug.solveNearest(t,i,this._y,this.c_)}addCursor(t=rd){const i=this.dA(),s=t.ag(i,this.h_,this.h_,this.nA(i),this._t);return s.mw=!0,this.SA(s),s}getMinimumSize(){const t={x:0,y:0};t.x+=this.oi.left+this.oi.right+this.nn.left+this.nn.right,t.y+=this.oi.top+this.oi.bottom+this.nn.top+this.nn.bottom;const i=this.Sh.hr().zu(),s=g(_d(this.if||wd),this._A);return t.x+=i.x+s.left+s.right,t.y+=i.y+s.top+s.bottom,this.b_&&(t.x+=this.b_.left,t.x+=this.b_.right,t.y+=this.b_.top,t.y+=this.b_.bottom),t.x+=gd.x,t.y+=gd.y,t}getLayout(){const t=this.x_;return this.St.M_()||!t?new Promise((t=>{this.addEventListener("layoutchange",t,{once:!0}),this.x_=void 0})):new Promise((i=>{i(t)}))}addAxisX(t){var i,s;const{opposite:e,type:h}=Le(t);let r;r="linear"===h.type?this.lA.d1({dimension:"x",scale1DConstructor:pe}):"linear-highPrecision"===h.type?this.lA.d1({dimension:"x",scale1DConstructor:pe}).Vi():this.lA.d1({dimension:"x",scale1DConstructor:le}).Fi(h.base),r.Z(this.h_.x.xi());const n=e?this.Yf:this.Hf,o=new Xo(this.y_,this.cf,this.CA,this.uf,this.df,this.St.vs,r,this.h_.y,(a=()=>o.Df(),{...Zo,...id(a)}),this,e?100:0,this.ff,this.A_,this._t,this.ah,h);var a;let l,c;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=n.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),c=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,c=null!==(s=t.iStack)&&void 0!==s?s:0),n.push({axis:o,iStack:c,iParallel:l}),this.St.Ls(),this.D.R("axisadd",{axis:o}),this.Lm(o),o}addAxisY(t){var i,s;const{opposite:e,type:h}=Le(t);let r;r="linear"===h.type?this.lA.d1({dimension:"y",scale1DConstructor:pe}):"linear-highPrecision"===h.type?this.lA.d1({dimension:"y",scale1DConstructor:pe}).Vi():this.lA.d1({dimension:"y",scale1DConstructor:le}).Fi(h.base),r.Z(this.h_.y.xi());const n=e?this.Xf:this.Wf,o=new Xo(this.y_,this.cf,this.CA,this.uf,this.df,this.St.vs,r,this.h_.x,(a=()=>o.Df(),{...Qo,...sd(a)}),this,e?100:0,this.ff,this.A_,this._t,this.ah,h);var a;let l,c;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=n.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),c=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,c=null!==(s=t.iStack)&&void 0!==s?s:0),n.push({axis:o,iParallel:l,iStack:c}),this.St.Ls(),this.D.R("axisadd",{axis:o}),this.Lm(o),o}Lm(t){const i=()=>{void 0!==this.S_&&ni.performance.now()-this.S_<=1e3||t.getVisible()&&(this.Bm&&ni.clearTimeout(this.Bm),this.Bm=ni.setTimeout((()=>{this.lm(),this.Bm=void 0}),300))};ni.requestAnimationFrame((()=>{i()})),t.addEventListener("intervalchange",i),t.addEventListener("dispose",(()=>{this.om.forEach((i=>{i.delete(t)}))}))}swapAxes(t,i){const s=[this.Hf,this.Wf,this.Xf,this.Yf],e=s.find((i=>void 0!==i.find((i=>i.axis===t)))),h=s.find((t=>void 0!==t.find((t=>t.axis===i))));if(!e||!h)return this;if(e!==h)throw new Error("LightningChart JS ChartXY.swapAxes does not support swapping Axes that are on different sides.");const r=e.find((i=>i.axis===t)),n=e.find((t=>t.axis===i));if(!r||!n)return this;const o=r.iParallel,a=r.iStack;return r.iParallel=n.iParallel,r.iStack=n.iStack,n.iParallel=o,n.iStack=a,this.x_=void 0,this.St.Ls(),this}dispose(){return this.Ug.G(),this.v_.G(),this.Km.G(),this.cf.G(),this.y_.forEach((t=>t.G())),this.df.G(),this.uf.G(),this.Vw().forEach((t=>t.dispose())),Na(this.h_),this.Hf.slice().forEach((t=>t.axis.dispose())),this.Wf.slice().forEach((t=>t.axis.dispose())),this.Xf.slice().forEach((t=>t.axis.dispose())),this.Yf.slice().forEach((t=>t.axis.dispose())),this._y.slice().forEach((t=>{t.dispose()})),super.dispose()}getDefaultAxisX(){var t;return null===(t=[...this.Hf,...this.Yf].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}getDefaultAxisY(){var t;return null===(t=[...this.Wf,...this.Xf].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}getDefaultAxes(){return[this.getDefaultAxisX(),this.getDefaultAxisY()]}getAxes(...t){const i=t&&t.length>0?new Set(t):yd;return Ai(Array.from(i).map((t=>{switch(t){default:case vd.Top:return this.Yf.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis));case vd.Bottom:return this.Hf.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis));case vd.Left:return this.Wf.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis));case vd.Right:return this.Xf.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis))}})))}w_(t){let i;return this.forEachAxisX((s=>{i=t===s?"x":i})),this.forEachAxisY((s=>{i=t===s?"y":i})),i}forEachAxisX(t){this.Hf.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.Yf.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}forEachAxisY(t){this.Wf.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.Xf.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}setTitlePosition(t){return this.if=t,this.St.Ls(),this}getTitlePosition(){return this.if}Le(t,i=!1){super.Le(t);for(const t of this._y)t.hy();for(const t of this._y)t.Le();const s=ss(this._y.map((t=>t.ba()))),e=new Set(s.map((t=>t.i_)));if(1===e.size){const t=Array.from(e)[0],i="x"===t?[this.Hf,this.Yf]:[this.Wf,this.Xf],s="y"===t?[this.Hf,this.Yf]:[this.Wf,this.Xf];i.forEach((t=>t.forEach((t=>t.axis.Er())))),s.forEach((t=>t.forEach((t=>t.axis.Er()))))}else this.Wf.forEach((t=>t.axis.Er())),this.Hf.forEach((t=>t.axis.Er())),this.Yf.forEach((t=>t.axis.Er())),this.Xf.forEach((t=>t.axis.Er()));let h=!1;this.forEachAxis((t=>{(t.Nr()||t.Gr())&&(h=!0)}));const n=!this.n_&&h,o=new Set(this.getAxes().map((t=>t.getStackIndex()))).size>1;this.Ug.Le(n,o?this._y.sort(((t,i)=>i.axisY.getStackIndex()-t.axisY.getStackIndex())):this._y,this.c_,{afterCursorPointedAt:t=>{const i=this.St.jo();if(t.length>1&&i){const t=this.St.pa(i);this.Ug.DA.rg({x:t.engineX,y:t.engineY},this.St.ot)}},overrideCursorPositions:(t,i)=>t.map((t=>t.multiHit?t.multiHit.map((i=>({...t.cursorPosition,pointMarker:i}))):[t.cursorPosition])).flat()});const a=(t,i,s,e,h={})=>{const r=Td(t);let n=0;return{parallels:r.parallels.map((t=>{const r=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()?i.axis.hf+i.axis.rf:0)),0),o=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"pixels"in i.axis.Id?i.axis.Id.pixels:0)),0),a=i-r-o;let l=0;const c=t.stacks.map((s=>{const r=s.axis,o=r.getVisible(),c=Math.max(i-l,0),u=Math.min(o?"pixels"in r.Id?r.Id.pixels:r.Id.relative/t.sumRelativeSize*a:0,c),d=e({...h,availableSpace:i,stack:s,axisLength:u,axisLengthOffset:l,axisThicknessOffset:n});return o&&(l+=u+r.hf+r.rf),{...d,stack:s,axis:r}})),u=c.reduce(((t,i)=>i.axis.getVisible()?Math.max(t,i.zf):t),0),d=c.reduce(((t,i)=>Math.max(t,i.Ef)),0);return c.forEach((t=>{t.Ef=d})),n+=u*s,{...t,stacks:c}})),thicknessTotal:Math.abs(n)}},l=this.getTitleFillStyle()!==V&&this.getTitle().length>0,c=l?this.Sh.hr().zu():{x:0,y:0},d=g(_d(this.if),this._A),f=l?Cd(this.if,c,d):us,A=this.h_.x.getCellSize()-(this.nn.left+this.nn.right+f.left+f.right),v=this.h_.y.getCellSize()-(this.nn.top+this.nn.bottom+f.bottom+f.top),y=new Map,p=t=>{const i={physicalAxisSize:t.axisLength,Of:t.axisLength,__:t.axisLengthOffset,Nf:t.axisThicknessOffset};return t.stack.axis.hr(i)},m=a(this.Wf,v,-1,p),S=a(this.Xf,v,1,p),b=a(this.Hf,A,-1,p),x=a(this.Yf,A,1,p),M=[this.nn.left+f.left+m.thicknessTotal,this.nn.right+f.right+S.thicknessTotal],w=[this.nn.bottom+b.thicknessTotal+f.bottom,this.nn.top+f.top+x.thicknessTotal],_=this.h_.x.getCellSize()-(M[0]+M[1]),C=this.h_.y.getCellSize()-(w[0]+w[1]);this.h_.x.W(0,_),this.h_.y.W(0,C),this.h_.x.yi(M),this.h_.y.yi(w);const k=[...m.parallels,...b.parallels,...S.parallels,...x.parallels].map((t=>t.stacks)).flat(),T=t=>{const i=t.stack.axis,s=k.find((t=>t.axis===i));if(!s)throw new Error("LightningChart JS unexpected runtime error");const e=i.getVisible()?t.margins[0]+t.axisLengthOffset+i.hf:0,h=i.getVisible()?t.margins[1]+(t.availableSpace-t.axisLengthOffset)-t.axisLength-i.hf:0;i.ot.yi([e,h]);const r=t.stack.axis.Le(s);return y.set(t.stack.axis,r),s},F=A-(m.thicknessTotal+S.thicknessTotal),I=v-(b.thicknessTotal+x.thicknessTotal);a(this.Wf,I,-1,T,{margins:w}),a(this.Xf,I,1,T,{margins:w}),a(this.Hf,F,-1,T,{margins:M}),a(this.Yf,F,1,T,{margins:M}),this.b_={left:m.thicknessTotal,top:x.thicknessTotal,right:S.thicknessTotal,bottom:b.thicknessTotal};const P={chartWidth:this.h_.x.getCellSize(),chartHeight:this.h_.y.getCellSize(),viewportWidth:_,viewportHeight:C,margins:{left:M[0],right:M[1],bottom:w[0],top:w[1]},axes:y},L=this.x_;if(i)this.D.R("layoutchange",{...P,userChangedLayout:()=>{}});else if(!L||Math.abs(L.chartWidth-P.chartWidth)>=1||Math.abs(L.chartHeight-P.chartHeight)>=1||Math.abs(L.viewportWidth-P.viewportWidth)>=1||Math.abs(L.viewportHeight-P.viewportHeight)>=1||this.getAxes().find((t=>{var i,s,e,h,r,n,o,a,l,c,u,d;const f=L.axes.get(t),A=P.axes.get(t);if(Math.abs((null!==(i=null==f?void 0:f.width)&&void 0!==i?i:0)-(null!==(s=null==A?void 0:A.width)&&void 0!==s?s:0))>=1||Math.abs((null!==(e=null==f?void 0:f.height)&&void 0!==e?e:0)-(null!==(h=null==A?void 0:A.height)&&void 0!==h?h:0))>=1||Math.abs((null!==(r=null==f?void 0:f.left)&&void 0!==r?r:0)-(null!==(n=null==A?void 0:A.left)&&void 0!==n?n:0))>=1||Math.abs((null!==(o=null==f?void 0:f.right)&&void 0!==o?o:0)-(null!==(a=null==A?void 0:A.right)&&void 0!==a?a:0))>=1||Math.abs((null!==(l=null==f?void 0:f.bottom)&&void 0!==l?l:0)-(null!==(c=null==A?void 0:A.bottom)&&void 0!==c?c:0))>=1||Math.abs((null!==(u=null==f?void 0:f.top)&&void 0!==u?u:0)-(null!==(d=null==A?void 0:A.top)&&void 0!==d?d:0))>=1)return t}))){let i=!1;const s=()=>{i=!0};if(this.D.R("layoutchange",{...P,userChangedLayout:s}),this.hA||i)return this.engine.layout(),this.f_({width:this.uiScale.xi().x,height:this.uiScale.xi().y,engineWidth:this.St.ot.xi().x,engineHeight:this.St.ot.xi().y}),this.hA=!0,void this.Le(t,!0)}this.x_=P,this.Iy.Be(r(0,0)).Z(r(_,C)),this.Py.Be(r(0,0)).Z(r(_,C));const B=kd(this.if,c,d,this.uiScale.hs(),this.nn,M,w);this.Sh.Be(B.position).nl(B.horizontalAlignment).ll(B.verticalAlignment);const D=u(this.h_.x.pi(),this.h_.y.pi(),this.h_.x.Si(),this.h_.y.Si());this.Km.dm(D),this.uf.dm(D),this.df.dm(D),this.iA&&this.iA(),super.xA();for(const t of this._y)t.vv()}m_(t){const i=ss(this._y.map((t=>t.ba()))),s=new Set(i.map((t=>t.i_)));if(1===s.size){const e=Array.from(s)[0],h="x"===e?[this.Hf,this.Yf]:[this.Wf,this.Xf],r="y"===e?[this.Hf,this.Yf]:[this.Wf,this.Xf];h.forEach((i=>i.forEach((i=>{const s=t.get(i.axis);s&&i.axis.fit(s.animate,s.stopAxisAfter)})))),i.forEach((t=>t.s_())),r.forEach((i=>i.forEach((i=>{const s=t.get(i.axis);s&&(i.axis.getScrollStrategy()&&void 0===i.axis.getDefaultInterval()?i.axis.setStopped(!1):i.axis.fit(s.animate,s.stopAxisAfter))}))))}else t.forEach(((t,i)=>i.fit(null==t?void 0:t.animate,null==t?void 0:t.stopAxisAfter)))}H(){for(let t=0;t<this.Hf.length;t+=1)this.Hf[t].axis.H();for(let t=0;t<this.Yf.length;t+=1)this.Yf[t].axis.H();for(let t=0;t<this.Wf.length;t+=1)this.Wf[t].axis.H();for(let t=0;t<this.Xf.length;t+=1)this.Xf[t].axis.H();return super.H()}g_(t){if(this.r_.has(t))return this.r_.get(t);throw new Error("No attach handler for axis Make sure that passed axes definitely belong to this chart and that they haven't been disposed of.")}addLineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);let e=Zu.freeform;t&&t.dataPattern&&(e="ProgressiveX"===t.dataPattern.pattern?Zu.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?Zu.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?Zu.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?Zu.verticalRegressive:Zu.freeform);const h=new od(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,e,this._t,this.St.vs,kl(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,t);return this.Ly(h),h}addPointLineAreaSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=new cd(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,t);return this.Ly(e),e}addPointSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=t&&t.pointShape&&Object.values(Oe).includes(t.pointShape)?"string"==typeof t.pointShape?Oe[t.pointShape]:t.pointShape:Oe.Square,h=new ad(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,e,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,t);return this.Ly(h),h}addPointLineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=t&&t.pointShape&&Object.values(Oe).includes(t.pointShape)?"string"==typeof t.pointShape?Oe[t.pointShape]:t.pointShape:Oe.Square;let h=Zu.freeform;t&&t.dataPattern&&(h="ProgressiveX"===t.dataPattern.pattern?Zu.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?Zu.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?Zu.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?Zu.verticalRegressive:Zu.freeform);const r=new Du(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,h,e,this._t,this.St.vs,kl(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,t);return this.Ly(r),r}addStepSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=t&&t.pointShape?t.pointShape:Oe.Square,h=t&&t.mode?t.mode:Iu.before,r=new Qu(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,e,h,this._t,this.St.vs,kl(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,t);return this.Ly(r),r}addSplineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=t&&t.pointShape?t.pointShape:Oe.Square;let h=Zu.freeform;t&&t.dataPattern&&(h="ProgressiveX"===t.dataPattern.pattern?Zu.horizontalProgressive:"RegressiveX"===t.dataPattern.pattern?Zu.horizontalRegressive:Zu.freeform);const r=new Vu(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,h,e,this._t,this.St.vs,kl(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,t);return this.Ly(r),r}addRectangleSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=new uu(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length);return this.Ly(e),e}addPolygonSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY(),e=new lu(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length);return this.Ly(e),e}addSegmentSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=new fu(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length);return this.Ly(e),e}addEllipseSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=new ou(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length);return this.Ly(e),e}addBoxSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=t&&t.dimensionStrategy?t.dimensionStrategy:Zo,h=new ru(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,e,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length);return this.Ly(h),h}addTextSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=new vu(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length);return this.Ly(e),e}addHeatmapGridSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new pu(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,t,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length),this.Ly(e),e}addHeatmapScrollingGridSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new Su(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,t,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length),this.Ly(e),e}addOHLCSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=new(t&&t.type?t.type:td.Candlesticks)(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,this._t,this.St.vs);return this.Ly(e),e}addOnScreenMenu(t,i){return new ld(this.aA,t,this,i)}setZoomingRectangleFillStyle(t){return this.a_="function"==typeof t?t(this.a_):t,this.St.Ls(),this}getZoomingRectangleFillStyle(){return this.a_}setZoomingRectangleStrokeStyle(t){return this.l_="function"==typeof t?t(this.l_):t,this.St.Ls(),this}getZoomingRectangleStrokeStyle(){return this.l_}addLegendBox(t,i){const s=super.addLegendBox(t,i);if(void 0===i||i===this.uiScale)if(void 0===t||"vertical"===t.getAlignment())s.setOrigin(ir.RightCenter).setPosition({x:this.uiScale.x.rt(this.uiScale.x.mi()-this.nn.right),y:nt(this.h_.y.rt(this.h_.y.pi()+this.h_.y.Si()/2),this.h_.y,this.uiScale.y)});else{const t=this.if||wd,i=Cd(t,this.getTitleFillStyle()===V||0===this.getTitle().length?{x:0,y:0}:this.Sh.hr().zu(),g(_d(t),this._A)).top+this.nn.top;s.setOrigin(ir.RightTop).setPosition(ot({x:this.xf.x.getInnerEnd()-this.nn.right,y:this.xf.y.getInnerEnd()-i},this.xf,this.uiScale))}return s}pan(t){this.forEachAxisX((i=>{i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.setStopped(!0).pan(t.y)}))}zoom(t,i){this.forEachAxis(pd),this.forEachAxisX((s=>{s.zoom(s.ot.rt(t.x),i.x)})),this.forEachAxisY((s=>{s.zoom(s.ot.rt(t.y),i.y)}))}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}Gd(){const t=[];return this.forEachAxis((i=>i.If((i=>t.push(i))))),super.Gd().concat(t)}Vw(){return this.o_}be(){return this.FA(this.Km)}setCursorEnabledDuringAxisAnimation(t){return this.n_=t,this}getCursorEnabledDuringAxisAnimation(){return this.n_}forEachAxis(t){return this.forEachAxisX(t),this.forEachAxisY(t),this}translateCoordinate(t,i,s){if(s){const e=t,h=i,r=Jo(h)?h:Ce(h)?this.xf:void 0;if(r&&we(s)){const t=ot(e,r,this.St.ot);return this.St.ma({engineX:t.x,engineY:t.y})}if(r&&Ce(s))return ot(e,r,this.xf);if(r&&Jo(s))return ot(e,r,s)}else{const s=t;if(Ce(i)){const t=this.St.pa(s);return ot({x:t.engineX,y:t.engineY},this.St.ot,this.xf)}if(Jo(i)){const t=i,e=this.St.pa(s);return ot({x:e.engineX,y:e.engineY},this.St.ot,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addEventListener(t,i,s){this.D.addEventListener(t,i,s),"layoutchange"===t&&this.x_&&i({...this.x_,userChangedLayout:()=>{}})}removeEventListener(t,i){this.D.removeEventListener(t,i)}setUserInteractions(t){return this.Tm.setUserInteractions(t),this}getUserInteractions(){return this.Tm.getUserInteractions()}}!function(t){t.CenterTop="center-top",t.RightTop="right-top",t.LeftTop="left-top",t.CenterBottom="center-bottom",t.RightBottom="right-bottom",t.LeftBottom="left-bottom",t.SeriesCenterTop="series-center-top",t.SeriesRightTop="series-right-top",t.SeriesLeftTop="series-left-top",t.SeriesCenterBottom="series-center-bottom",t.SeriesRightBottom="series-right-bottom",t.SeriesLeftBottom="series-left-bottom"}(xd||(xd={}));const wd=xd.CenterTop,_d=t=>{switch(t){case"center-top":case"series-center-bottom":return{left:0,right:0,top:0,bottom:5};case"left-top":return{left:20,right:0,top:0,bottom:5};case"right-top":return{left:0,right:20,top:0,bottom:5};case"center-bottom":return{left:0,right:0,top:0,bottom:0};case"left-bottom":return{left:20,right:0,top:0,bottom:0};case"right-bottom":return{left:0,right:20,top:0,bottom:0};case"series-center-top":return{left:0,right:0,top:5,bottom:0};case"series-left-top":return{left:5,right:0,top:5,bottom:0};case"series-right-top":return{left:0,right:5,top:5,bottom:0};case"series-left-bottom":return{left:5,right:0,top:0,bottom:5};case"series-right-bottom":return{left:0,right:5,top:0,bottom:5}}return rs(0,`Unexpected ChartXY title position selection ${t}`)},Cd=(t,i,s)=>{switch(t){case"center-top":case"left-top":case"right-top":return{top:i.y+s.top+s.bottom,right:0,bottom:0,left:0};case"center-bottom":case"left-bottom":case"right-bottom":return{bottom:i.y+s.top+s.bottom,right:0,left:0,top:0};default:return us}},kd=(t,i,s,e,h,r,n)=>{const o=(s.left-s.right)*e.x,a=(s.bottom-s.top)*e.y;switch(t){case"center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-(h.top+s.top)*e.y}};case"left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:o,y:100-(h.top-s.top)*e.y}};case"right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100+o,y:100-(h.top-s.top)*e.y}};case"center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50+o,y:(h.bottom+s.bottom)*e.y}};case"left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:o,y:(h.bottom+s.bottom)*e.y}};case"right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100+o,y:(h.bottom+s.bottom)*e.y}};case"series-center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-n[1]*e.y+a}};case"series-left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:r[0]*e.x+o,y:100-n[1]*e.y+a}};case"series-right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100-r[1]*e.x+o,y:100-n[1]*e.y+a}};case"series-center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50,y:n[0]*e.y+a}};case"series-left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:r[0]*e.x+o,y:n[0]*e.y+a}};case"series-right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100-r[1]*e.x+o,y:n[0]*e.y+a}}}return rs(0,`Unexpected ChartXY title position selection ${t}`)},Td=t=>{const i=[];t.forEach(((t,s)=>{const e=i.find((i=>i.iParallel===t.iParallel));e?(e.stacks.push({...t}),e.stacks.sort(((t,i)=>t.iStack-i.iStack))):i.push({iParallel:t.iParallel,stacks:[{...t}]})}));const s=i.map((t=>{const i=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"relative"in i.axis.Id?i.axis.Id.relative:0)),0);return{...t,sumRelativeSize:i}}));return s.sort(((t,i)=>t.iParallel-i.iParallel)),{parallels:s}},Fd=(t,i,s)=>{var e;const h=Array.from(new Set(s.map((t=>t.series.Ms())))),r=1===h.length&&void 0!==h[0]?h[0]:void 0,n="ProgressiveY"===r||"RegressiveY"===r?{progressiveDimension:"Y",progressiveAxis:i.axisY,valueDimension:"X",hitValueAxis:t=>t.axisX,value:t=>t.x,position:t=>t.y}:{progressiveDimension:"X",progressiveAxis:i.axisX,valueDimension:"Y",hitValueAxis:t=>t.axisY,value:t=>t.y,position:t=>t.x},o=n.progressiveAxis.getTickStrategy();return ft(i)?Xa(i,[[{component:i.series,componentColor:Wa(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[t.getDefaultAxisX().getTitle()||"X","",{text:Pe(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:Pe(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],void 0!==i.intensity?["Value","",{text:Pe(i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]:[]]):1===s.length?"Time"===o||"DateTime"===o?i.multiHit?[[{text:Pe(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],...Xa(i,[[{component:i.series,componentColor:Wa(i)},""],[`${n.valueDimension}1`,"",{text:Pe(n.hitValueAxis(i).formatValue(n.value(i.multiHit[0])),n.hitValueAxis(i)),font:{weight:"bold"}}],[`${n.valueDimension}2`,"",{text:Pe(n.hitValueAxis(i).formatValue(n.value(i.multiHit[1])),n.hitValueAxis(i)),font:{weight:"bold"}}]])]:[[{text:Pe(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],...Xa(i,[[{component:i.series,componentColor:Wa(i)},"",{text:Pe(n.hitValueAxis(i).formatValue(n.value(i)),n.hitValueAxis(i)),font:{weight:"bold"}}]])]:i.multiHit?Xa(i,[[{component:i.series,componentColor:Wa(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[n.progressiveDimension,"",{text:Pe(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),font:{weight:"bold"}}],[`${n.valueDimension}1`,"",{text:Pe(n.hitValueAxis(i).formatValue(n.value(i.multiHit[0])),n.hitValueAxis(i)),font:{weight:"bold"}}],[`${n.valueDimension}2`,"",{text:Pe(n.hitValueAxis(i).formatValue(n.value(i.multiHit[1])),n.hitValueAxis(i)),font:{weight:"bold"}}]]):Xa(i,[[{component:i.series,componentColor:Wa(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[n.progressiveDimension,"",{text:Pe(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),font:{weight:"bold"}}],[n.valueDimension,"",{text:Pe(n.hitValueAxis(i).formatValue(n.value(i)),n.hitValueAxis(i)),font:{weight:"bold"}}]]):r?[[{text:Pe(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],...s.map((t=>t.multiHit?Xa(t,[[{component:t.series,componentColor:Wa(t)},""],[`${n.valueDimension}1`,"",{text:Pe(n.hitValueAxis(t).formatValue(n.value(t.multiHit[0])),n.hitValueAxis(t)),font:{weight:"bold"}}],[`${n.valueDimension}2`,"",{text:Pe(n.hitValueAxis(t).formatValue(n.value(t.multiHit[1])),n.hitValueAxis(t)),font:{weight:"bold"}}]]):Xa(t,[[{component:t.series,componentColor:Wa(t)},"",{text:Pe(n.hitValueAxis(t).formatValue(n.value(t)),n.hitValueAxis(t)),font:{weight:"bold"}}]]))).flat()]:s.map((i=>Xa(i,[[{component:i.series,componentColor:Wa(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[n.progressiveDimension,"",{text:Pe(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),font:{weight:"bold"}}],[n.valueDimension,"",{text:Pe(n.hitValueAxis(i).formatValue(n.value(i)),n.hitValueAxis(i)),font:{weight:"bold"}}]]))).flat()},Id=t=>t instanceof eu||t instanceof Mu||t instanceof Fu||t instanceof pu||t instanceof Ju||t instanceof Qu||t instanceof cd;class Pd{constructor(t,i,s,e,h,r,n){this.coordsRelative="relative",this.coordsClient="client",this.C_=[],this.k_=new Map,this._y=new Map,this.T_=new Set,this.F_=()=>{this.I_.St.Ls()},this.P_=(t,i,s)=>{0!==this._y.size&&void 0!==[...this._y.values()].find((({series:t})=>!0===t.getVisible()))||this.L_.ct(i,s,!1,!1,"zoomBandChart"),this.I_.St.Ls()},this.B_=!0,this.D=new zt,i.St.Zo(Gr.Xn),this.aA=t,this.D_=(null==r?void 0:r.orientation)||"x",this.E_=void 0!==(null==r?void 0:r.useSharedValueAxis)&&r.useSharedValueAxis,this.R_=e,this.Sn="x"===this.D_?Zo:Qo;const o={...r,defaultAxisX:this.Sn.getWidth({x:null==r?void 0:r.defaultAxis,y:void 0}),defaultAxisY:this.Sn.getHeight({x:null==r?void 0:r.defaultAxis,y:void 0})};this.I_=new Md(t,i,s,ui,h,o,n).setTitle("Zoom Band Chart").setUserInteractions(void 0).setCursorMode(void 0),this.engine=this.I_.engine;const a=this.I_.getDefaultAxisX().setPointerEvents(!1),l=this.I_.getDefaultAxisY().setPointerEvents(!1);this.L_=this.Sn.getWidth({x:a,y:l}).setScrollStrategy(fr.fitting).setAnimationScroll(!1).setStrokeStyle(Wt).setTickStrategy(Ar.Empty),(null==r?void 0:r.useSharedValueAxis)?this.z_=this.Sn.getHeight({x:a,y:l}):this.Sn.getHeight({x:a,y:l}).dispose();const c=this.getTheme().zoomBandChartDefocusOverlayFillStyle||new $({color:this.getTheme().isDark?m(0,0,0,180):m(255,255,255,180)});this.V_=[this.I_.cf.Pe(this.L_.Sf).Ie(c).Fe(Wt),this.I_.cf.Pe(this.L_.Sf).Ie(c).Fe(Wt)];const u=this.I_.cf.Gf(this.L_.Sf).Ne(this.getTheme().zoomBandChartSplitterStrokeStyle||this.getTheme().chartXYSeriesBackgroundStrokeStyle);this.O_={collection:u,members:new Array(5).fill(0).map((t=>u.lo()))};const d=this.getTheme(),f="function"==typeof d.zoomBandChartKnobFillStyle?ri({resourcesBaseUrl:this.aA.Qs,styleFactory:d.zoomBandChartKnobFillStyle,apply:t=>this.setKnobFillStyle(t)}):d.zoomBandChartKnobFillStyle||V;this.N_=[this.I_.cf.Pe(this.I_.xf).Ie(f).Fe(Wt),this.I_.cf.Pe(this.I_.xf).Ie(f).Fe(Wt)],this.G_=this.getTheme().zoomBandChartKnobSize||{x:0,y:0},this.U_()}setUserInteractions(t){return this.ze=void 0===t?{pan:{drag:!1,click:!1},zoom:{wheel:void 0,dragKnob:!1}}:t,this}getUserInteractions(){return hi({pan:{drag:!0,click:!0},zoom:{wheel:{},dragKnob:!0}},this.ze)}add(t){var i,s,e,h,r;this.T_.has(t.chart)||(this.T_.add(t.chart),t.chart.addEventListener("layoutchange",this.F_));const n=this.C_.map((t=>t.axis)),o="x"===this.D_?t.axisX:t.axisY;if(!n.includes(o)){const t=t=>{this.P_(o,t.start,t.end)};o.addEventListener("intervalchange",t),this.C_.push({axis:o,deattach:()=>{o.removeEventListener("intervalchange",t)}}),this.L_.Kh(o.Jh(),o.getTickStrategy()),this.Y_&&this.Y_.remove(),this.Y_=ut(...this.C_.map((t=>t.axis)))}const a=this.Sn.getHeight({x:t.axisX,y:t.axisY});let l;if(this.E_)l=this.z_;else{const t=this.k_.get(a);t?l=t:(l=this.Sn.getHeight({x:this.I_.addAxisX.bind(this.I_),y:this.I_.addAxisY.bind(this.I_)})(),this.H_(l)),this.k_.set(a,l)}const c=this.Sn.getWidth({x:this.L_,y:l}),u=this.Sn.getHeight({x:this.L_,y:l});let d;const f=[],A=(t,i)=>{const s=t=>{if(0!==t.length)if("x"in t[0]){const s=t;i.add(s)}else{const s=t,e=[];for(let t=0;t<s.length;t+=1){const i=s[t];e.push({x:i[0],y:i[4]})}i.add(e)}},e=t.Zb();s(e);const h=t=>{s(t.data)},r=()=>{i.clear()};t.addEventListener("dataadd",h),t.addEventListener("dataclear",r),f.push((()=>{t.removeEventListener("dataadd",h),t.removeEventListener("dataclear",r)}))};if(t instanceof cd)d=this.I_.addPointLineAreaSeries({...t.Ko,axisX:c,axisY:u,xAxis:c,yAxis:u}).setStrokeStyle(t.getStrokeStyle()).setAreaFillStyle(t.getAreaFillStyle()).setPointFillStyle(t.getPointFillStyle()).setPointAlignment(t.getPointAlignment()).setPointRotation(t.getPointRotation()).setPointShape(t.getPointShape()).setPointSize(t.getPointSize()).setCurvePreprocessing(t.getCurvePreprocessing()),d.setDataSet(t.t_());else if(t instanceof od||t instanceof Ju){const s=this.I_.addLineSeries({axisX:c,axisY:u,xAxis:c,yAxis:u,dataPattern:t instanceof od?null===(i=t.Ko)||void 0===i?void 0:i.dataPattern:void 0});if(t instanceof od)s.setStrokeStyle(t.getStrokeStyle());else{const i=Ld(t);i&&s.setStrokeStyle(i)}A(t,s),d=s}else if(t instanceof _u){const i=this.I_.addAreaSeries({axisX:c,axisY:u,xAxis:c,yAxis:u,baseline:t.eM}).setFillStyle(t.getFillStyle()).setStrokeStyle(t.getStrokeStyle());A(t,i),d=i}else if(t instanceof ad){const i=this.I_.addPointSeries({axisX:c,axisY:u,xAxis:c,yAxis:u,pointShape:null===(s=t.Ko)||void 0===s?void 0:s.pointShape}).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof Qu){const i=this.I_.addStepSeries({axisX:c,axisY:u,xAxis:c,yAxis:u,pointShape:null===(e=t.Ko)||void 0===e?void 0:e.pointShape,mode:t._M}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof Vu){const i=this.I_.addSplineSeries({axisX:c,axisY:u,xAxis:c,yAxis:u,pointShape:null===(h=t.Ko)||void 0===h?void 0:h.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof Du){const i=this.I_.addSplineSeries({axisX:c,axisY:u,xAxis:c,yAxis:u,pointShape:null===(r=t.Ko)||void 0===r?void 0:r.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof Fu){const i=this.I_.addAreaRangeSeries({axisX:c,axisY:u,xAxis:c,yAxis:u}).setLowFillStyle(t.getLowFillStyle()).setHighFillStyle(t.getHighFillStyle()).setLowStrokeStyle(t.getLowStrokeStyle()).setHighStrokeStyle(t.getHighStrokeStyle()).add(t.Zb()),s=t=>i.add(t.data);t.addEventListener("dataadd",s),f.push((()=>t.removeEventListener("dataadd",s))),d=i;const e=t=>i.clear();t.addEventListener("dataclear",e),f.push((()=>{t.removeEventListener("dataclear",e)}))}else{if(!(t instanceof yu))throw new Error("LightningChart JS Zoom Band Chart unsupported series type");{const i=this.I_.addHeatmapGridSeries({...t.gx,axisX:c,axisY:u,xAxis:c,yAxis:u}),s=()=>{i.setWireframeStyle(t.getWireframeStyle()).setIntensityInterpolation(t.getIntensityInterpolation()).setFillStyle(t.getFillStyle())};s(),d=i,t.mx(d);const e=t=>i.invalidateIntensityValues(t.value);t.addEventListener("stylechange",s),f.push((()=>{t.removeEventListener("invalidateintensity",e),t.removeEventListener("stylechange",s)}));const h=()=>{i.clear()};t.addEventListener("dataclear",h),f.push((()=>{t.removeEventListener("dataclear",h)}))}}d.setPointerEvents(!1);const g=t=>{d.setVisible(t.isVisible)};t.addEventListener("visiblechange",g),f.push((()=>{t.removeEventListener("visiblechange",g)}));const v=t=>{d.setHighlight(t.highlight)};f.push((()=>{t.addEventListener("highlightchange",v),t.removeEventListener("highlightchange",v)}));const y=()=>{this.disposeSeries(t)};return t.addEventListener("dispose",y),f.push((()=>{t.removeEventListener("dispose",y)})),this._y.set(t,{series:d,clearReferences:()=>f.forEach((t=>t()))}),d}disposeSeries(t){const i=this._y.get(t);if(i){const{clearReferences:s}=i;s(),this._y.delete(t),i.series.dispose();const e=this.Sn.getHeight({x:t.axisX,y:t.axisY}),h=this.k_.get(e);h&&0===h.Df().length&&(this.k_.delete(e),h.dispose())}const s="x"===this.D_?t.axisX:t.axisY;if(!Array.from(this._y.keys()).find((t=>s===("x"===this.D_?t.axisX:t.axisY)))){const t=this.C_.findIndex((t=>t.axis===s));this.C_[t].deattach(),this.C_.splice(t,1)}const e=Array.from(this._y.keys()).find((t=>t.chart==t.chart));return e||(t.chart.removeEventListener("layoutchange",this.F_),this.T_.delete(t.chart)),this}setDefocusOverlayFillStyle(t){return this.V_.forEach((i=>i.Ie(t))),this.I_.St.Ls(),this}getDefocusOverlayFillStyle(){return this.V_[0].$h()}setSplitterStrokeStyle(t){return this.O_.collection.Ne(t),this.I_.St.Ls(),this}getSplitterStrokeStyle(){return this.O_.collection.In()}setKnobFillStyle(t){return this.N_.forEach((i=>i.Ie(t))),this.I_.St.Ls(),this}getKnobFillStyle(){return this.N_[0].$h()}setKnobStrokeStyle(t){return this.N_.forEach((i=>i.Fe(t))),this.I_.St.Ls(),this}getKnobStrokeStyle(){return this.N_[0].da()}setKnobSize(t){return this.G_=t,this.I_.St.Ls(),this}getKnobSize(){return this.G_}getDefaultAxisX(){return this.I_.getDefaultAxisX()}getDefaultAxisY(){return this.I_.getDefaultAxisY()}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}H_(t){t.setTickStrategy(Ar.Empty).setPointerEvents(!1).setStrokeStyle(Wt)}U_(){let t;const i=(t,i,s)=>{var e,h;const r="x"===this.D_?null===(e=Array.from(this._y.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this._y.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=r.getInterval(),o=this.L_.getInterval();Math.abs(this.L_.ot.nt(t)-this.L_.ot.nt(i))<10||Math.sign(i-t)!==Math.sign(n.end-n.start)||Math.min(t,i)<Math.min(o.start,o.end)||Math.max(t,i)>Math.max(o.start,o.end)&&Math.max(n.start,n.end)<Math.max(t,i)||r.ct(t,i,s,!0,"zoomBandChart")};this.N_.forEach(((s,e)=>{s.addEventListener("pointerenter",(()=>{var i;(null===(i=this.getUserInteractions().zoom)||void 0===i?void 0:i.dragKnob)&&(t=this.engine.setMouseStyle(this.Sn.getWidth({x:tr.Horizontal,y:tr.Vertical}),t))})),s.addEventListener("pointerleave",(()=>{t=this.engine.restoreMouseStyle(t)})),s.addEventListener("pointerdown",(t=>{var s,h,r;if(!(null===(s=this.getUserInteractions().zoom)||void 0===s?void 0:s.dragKnob))return;const n="x"===this.D_?null===(h=Array.from(this._y.keys())[0])||void 0===h?void 0:h.axisX:null===(r=Array.from(this._y.keys())[0])||void 0===r?void 0:r.axisY;if(!n)return;Bi(t);const o=s=>{if(s.pointerId!==t.pointerId)return;Bi(s);const h=this.Sn.getWidth(this.I_.translateCoordinate(s,this.I_.coordsAxis)),r=n.getInterval(),o=0===e?h:r.start,a=1===e?h:r.end;i(o,a,!1)},a=i=>{i.pointerId===t.pointerId&&(Bi(i),ni.removeEventListener("pointermove",o),ni.removeEventListener("pointerup",a))};ni.addEventListener("pointermove",o),ni.addEventListener("pointerup",a)}))})),this.I_.seriesBackground.addEventListener("pointerenter",(()=>{var i;(null===(i=this.getUserInteractions().pan)||void 0===i?void 0:i.drag)&&(t=this.engine.setMouseStyle(tr.Move,t))})),this.I_.seriesBackground.addEventListener("pointerleave",(()=>{t=this.engine.restoreMouseStyle(t)}));const s=(t,s)=>{var e,h,r;if(!(null===(e=this.getUserInteractions().pan)||void 0===e?void 0:e.drag))return;const n="x"===this.D_?null===(h=Array.from(this._y.keys())[0])||void 0===h?void 0:h.axisX:null===(r=Array.from(this._y.keys())[0])||void 0===r?void 0:r.axisY;if(!n)return;const o=n.getInterval(),a=this.L_.ot.Pi(o.start,this.Sn.getWidth(t)),l=this.L_.ot.Pi(o.end,this.Sn.getWidth(t));i(a,l,!1),Bi(s)};this.I_.seriesBackground.addEventListener("pointerdown",(t=>{var i,e;if(!("x"===this.D_?null===(i=Array.from(this._y.keys())[0])||void 0===i?void 0:i.axisX:null===(e=Array.from(this._y.keys())[0])||void 0===e?void 0:e.axisY))return;Bi(t);let h=t;const r=i=>{if(i.pointerId!==t.pointerId)return;const e={x:i.clientX-h.clientX,y:h.clientY-i.clientY};h=i,s(e,i)},n=i=>{i.pointerId===t.pointerId&&(Bi(i),ps(),ni.removeEventListener("pointermove",r),ni.removeEventListener("pointerup",n))};ni.addEventListener("pointermove",r),ni.addEventListener("pointerup",n)})),this.I_.seriesBackground.addEventListener("wheel",(t=>{var s,e,h,r;const n=this.getUserInteractions();if(!(null===(s=n.zoom)||void 0===s?void 0:s.wheel))return;const o="x"===this.D_?null===(e=Array.from(this._y.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this._y.keys())[0])||void 0===h?void 0:h.axisY;if(!o)return;const a=o.getInterval(),l=this.L_.getInterval(),c=this.Sn.getWidth(this.I_.translateCoordinate(t,this.I_.coordsAxis)),u=this.L_.ot.nt(a.start),d=this.L_.ot.nt(a.end),f=this.L_.ot.nt(c),A=fi((f-u)/(d-u),0,1),g=.2*Math.abs(d-u)*(null!==(r=n.zoom.wheel.sensitivity)&&void 0!==r?r:1),v=A*g*-Math.sign(t.deltaY),y=(1-A)*g*Math.sign(t.deltaY),p=fi(this.L_.ot.Pi(a.start,v),l.start,l.end),m=fi(this.L_.ot.Pi(a.end,y),l.start,l.end);i(p,m,!1),Bi(t)})),this.V_.forEach(((s,e)=>{s.addEventListener("pointerenter",(()=>{var i;(null===(i=this.getUserInteractions().pan)||void 0===i?void 0:i.click)&&(t=this.engine.setMouseStyle(tr.Point,t))})),s.addEventListener("pointerleave",(()=>{t=this.engine.restoreMouseStyle(t)})),s.addEventListener("click",(t=>{var s,e,h;if(t.defaultPrevented)return;if(!(null===(s=this.getUserInteractions().pan)||void 0===s?void 0:s.click))return;const r="x"===this.D_?null===(e=Array.from(this._y.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this._y.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=this.Sn.getWidth(this.I_.translateCoordinate(t,this.I_.coordsAxis)),o=r.getInterval(),a=this.L_.getInterval(),l=fi(n-(o.end-o.start)/2,Math.min(a.start,a.end),Math.max(a.start,a.end)-Math.abs(o.end-o.start)),c=l+(o.end-o.start);i(l,c,!0),Bi(t)}))}))}getSizePixels(){return this.I_.getSizePixels()}$r(t){this.I_.$r(t)}getMinimumSize(){return this.I_.getMinimumSize()}H(){return this.I_.H()}X(){return this.I_.X()}Le(t){var i,s,e,h;const r=is(Array.from(this._y.keys()).map((t=>t.chart))),n="x"===this.D_?null===(i=Array.from(this._y.keys())[0])||void 0===i?void 0:i.axisX:null===(s=Array.from(this._y.keys())[0])||void 0===s?void 0:s.axisY;if(this.B_)if("x"===this.D_){const t=r.reduce(((t,i)=>{const s=[];i.forEachAxisY((t=>{if(0!==t.vf)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.jf())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),i=r.reduce(((t,i)=>{const s=[];i.forEachAxisY((t=>{if(100!==t.vf)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.jf())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),s=r.reduce(((t,i)=>Math.max(t,i.getPadding().left)),0),h=r.reduce(((t,i)=>Math.max(t,i.getPadding().right)),0);this.I_.forEachAxisY((t=>t.setThickness(0))),null===(e=this.getDefaultAxisY())||void 0===e||e.setThickness(t),this.I_.setPadding({left:s+(0===r.length?10:0),right:h+i+(0===r.length?10:0)})}else{const t=r.reduce(((t,i)=>{const s=[];i.forEachAxisX((t=>{if(0!==t.vf)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.jf())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),i=r.reduce(((t,i)=>{const s=[];i.forEachAxisX((t=>{if(100!==t.vf)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.jf())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),s=r.reduce(((t,i)=>Math.max(t,i.getPadding().bottom)),0),e=r.reduce(((t,i)=>Math.max(t,i.getPadding().top)),0);this.I_.forEachAxisX((t=>t.setThickness(0))),null===(h=this.getDefaultAxisX())||void 0===h||h.setThickness(t),this.I_.setPadding({bottom:s+(0===r.length?10:0),top:e+i+(0===r.length?10:0)})}this.I_.Le(t);const o=this.L_.getInterval().start,a=this.L_.getInterval().end,l=fi(n?n.getInterval().start:o,o,a),c=fi(n?n.getInterval().end:a,o,a),u=this.Sn.getHeight(this.I_.h_.getInnerIntervalPixels());this.V_[0].Be(this.Sn.toPoint(o,0)).Z(this.Sn.toPoint(l-o,u)),this.V_[1].Be(this.Sn.toPoint(c,0)).Z(this.Sn.toPoint(a-c,u)),this.O_.members[0].Uf(this.Sn.toPoint(o,u),this.Sn.toPoint(l,u)),this.O_.members[1].Uf(this.Sn.toPoint(l,u),this.Sn.toPoint(l,0)),this.O_.members[2].Uf(this.Sn.toPoint(l,0),this.Sn.toPoint(c,0)),this.O_.members[3].Uf(this.Sn.toPoint(c,0),this.Sn.toPoint(c,u)),this.O_.members[4].Uf(this.Sn.toPoint(c,u),this.Sn.toPoint(a,u));const d=ot(this.Sn.toPoint(l,u/2),this.L_.Sf,this.I_.xf),f=ot(this.Sn.toPoint(c,u/2),this.L_.Sf,this.I_.xf),A=this.G_;this.N_[0].Be({x:d.x-A.x/2,y:d.y-A.y/2}).Z({x:A.x,y:A.y}).Wh(this.Sn.getWidth({x:0,y:90})),this.N_[1].Be({x:f.x-A.x/2,y:f.y-A.y/2}).Z({x:A.x,y:A.y}).Wh(this.Sn.getWidth({x:0,y:90}))}setSeriesBackgroundFillStyle(t){return this.I_.setSeriesBackgroundFillStyle(t),this.I_.St.Ls(),this}getSeriesBackgroundFillStyle(){return this.I_.getSeriesBackgroundFillStyle()}setSeriesBackgroundStrokeStyle(t){return this.I_.setSeriesBackgroundStrokeStyle(t),this.I_.St.Ls(),this}getSeriesBackgroundStrokeStyle(){return this.I_.getSeriesBackgroundStrokeStyle()}setSeriesBackgroundEffect(t){return this.I_.setSeriesBackgroundEffect(t),this.I_.St.Ls(),this}getSeriesBackgroundEffect(){return this.I_.getSeriesBackgroundEffect()}getTheme(){return this.I_.getTheme()}setTitle(t){return this.I_.setTitle(t),this}getTitle(){return this.I_.getTitle()}setTitleFillStyle(t){return this.I_.setTitleFillStyle(t),this}getTitleFillStyle(){return this.I_.getTitleFillStyle()}setTitleFont(t){return this.I_.setTitleFont(t),this}getTitleFont(){return this.I_.getTitleFont()}setTitleMargin(t){return this.I_.setTitleMargin(t),this}getTitleMargin(){return this.I_.getTitleMargin()}setPadding(t){return void 0===t?this.B_=!0:(this.B_=!1,this.I_.setPadding(t),this.I_.forEachAxis((t=>t.setThickness(void 0)))),this.I_.St.Ls(),this}getPadding(){return this.I_.getPadding()}setBackgroundFillStyle(t){return this.I_.setBackgroundFillStyle(t),this}getBackgroundFillStyle(){return this.I_.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.I_.setBackgroundStrokeStyle(t),this}getBackgroundStrokeStyle(){return this.I_.getBackgroundStrokeStyle()}translateCoordinate(t,i,s){return Va(t,i,s,this.I_.xf,this.I_.St)}addUIElement(t,i){return this.I_.addUIElement(t,i)}addLegendBox(t,i){return this.I_.addLegendBox(t,i)}getLegendBoxes(){return this.I_.getLegendBoxes()}saveToFile(t,i,s){return this.I_.saveToFile(t,i,s),this}dispose(){return this.I_.dispose(),this.k_.clear(),this._y.clear(),this.R_(this),this}isDisposed(){return this.I_.isDisposed()}addEventListener(t,i,s){this.I_.addEventListener(t,i,s)}removeEventListener(t,i){this.I_.removeEventListener(t,i)}}const Ld=t=>{if("getStrokeStyle"in t)return t.getStrokeStyle();const i=(t=>t instanceof od||t instanceof _u?t.getStrokeStyle().getFillStyle():t instanceof ad||t instanceof Du?t.getPointFillStyle():void 0)(t);return i?new vh({thickness:2,fillStyle:i}):void 0};class Bd extends Xc{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Es="Point Series",this.JS=[],this.KS=!1,this.eb=3,this.Ga=0,this.D=new zt,this.Ce=Ji(this._t.polarPointSeriesFillStyle,r),this.qu=new $n({dataPattern:null}),this.vl=t.hd(e).Ne(Wt).ed(V).sd(this.Ce).rd(Oe.Circle).ud(this.eb).Bt(this.getHighlight()).td(this.qu),this.ws(this.vl)}solveNearest(t,i="show-nearest"){const s=this.chart.translateCoordinate(t,this.chart.coordsAxis),e=Nc([s],this.scale)[0],h=this.qu.Ru(e,Ha(i),this.scale,this.chart.xf);if(!h)return;const r=Uc(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Kt(t,i){return As({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}setData(t){return 0!==this.JS.length&&this.chart.St.Zo(Gr.qn),this.JS=$c(t),this.KS=!0,this.XS=Gc(this.JS),this.Ys.Ls(),this}setPointAlignment(t){return this.vl.Jw(t),this.chart.St.Ls(),this}getPointAlignment(){return this.vl.Kw()}setPointFillStyle(t){this.Ce="function"==typeof t?t(this.Ce):t;const i=this.Ce;return this.vl.sd(i),this.Ys.Ls(),this}getPointFillStyle(){return this.Ce}setPointSize(t){return this.eb=t,this.vl.ud(t),this.Ys.Ls(),this}getPointSize(){return this.eb}setPointShape(t){return this.vl.rd(t),this.chart.St.Ls(),this}getPointShape(){return this.vl.nd()}setPointRotation(t){return this.Ga=t,this.vl.od(t),this.Ys.Ls(),this}getPointRotation(){return this.Ga}Qv(){return this.qv&&this.JS.length>0&&this.getVisible()}De(t,i){t.Bt(i),this.Ys.Ls()}Le(){if(this.KS||this.scale.sb()){const t=Nc(this.JS,this.scale),i=zs(t);this.qu.clear().add(t),this.vl.Pt(i),this.KS=!1,this.vl.hr()}}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce})}$s(){return this.Ds||this.getPointShape()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Dd{constructor(t,i,s,e){this.X_=!1,this.D=new zt,this.he=t,this.W_=i,this._y=s,this.vl=e}setGeometry(t){return this.j_=t,this.X_=!0,this.he.St.Ls(),this}getGeometry(){return this.j_}setPointerEvents(t){return this.vl.setPointerEvents(t),this}dispose(){return this.vl.dispose(),this.W_(this),this.D.R("dispose",{}),this}setVisible(t){const i=this.vl.getVisible()!==t;return this.vl.setVisible(t),i&&this.D.R("visiblechange",{isVisible:t}),this.he.St.Ls(),this}getVisible(){return this.vl.getVisible()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Ed extends Xc{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Es="Polygon Series",this.Z_=[],this.Q_=[],this.J_=t=>{const i=this.Q_.indexOf(t);i>=0&&this.Q_.splice(i,1);const s=this.Z_.findIndex((i=>i===t.vl));s>=0&&this.Z_.splice(s,1),this.Ys.Ls()},this.D=new zt,this.Ce=Ji(this._t.polarPolygonSeriesFillStyle,r),this.ke=Ji(this._t.polarPolygonSeriesStrokeStyle,r)}solveNearest(t,i){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=hu(e,this.Z_,((t,i)=>{const s=t.Ru(i);if(s)return ot(s,this.scale,t.St.ot)}),Bs);if(!h)return;const r=ot(h[0],h[1].St.ot,this.scale);if(!this.K_(h[1]))return;const n=Uc(r,this.scale);return{cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this,...n}}Kt(t,i){return As({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}addPolygon(){const t=new Dd(this.chart,this.J_,this,this.q_());return this.Q_.push(t),t}setFillStyle(t){this.Ce="function"==typeof t?t(this.Ce):t;const i=this.Ce;for(const t of this.Z_)t.Ie(i);return this.Ys.Ls(),this}getFillStyle(){return this.Ce}setStrokeStyle(t){this.ke="function"==typeof t?t(this.ke):t;const i=this.ke;for(const t of this.Z_)t.Fe(i);return this.Ys.Ls(),this}getStrokeStyle(){return this.ke}Qv(){return this.qv&&void 0!==this.Q_.find((t=>void 0!==t.tC))&&this.getVisible()}Le(){this.Q_.forEach((t=>{(t.X_||this.scale.sb())&&t.iC&&(t.vl.Hl(Nc(t.iC,this.scale)),t.X_=!1,t.vl.hr())}))}hy(){super.hy();const t=c(bs,xs);this.Q_.forEach((i=>{if(!i.j_)return;const s=!i.X_&&i.iC?i.iC:$c(i.j_);i.iC=s;const e=!i.X_&&i.tC?i.tC:Gc(s);i.tC=e,t.min=Math.min(t.min,e.min),t.max=Math.max(t.max,e.max)})),this.XS=t}De(t,i){t.Bt(i),this.Ys.Ls()}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce,stroke:this.ke})}q_(){const t=this.Ys.Qc(this.scale,Fn.Simple).Ie(this.Ce).Fe(this.ke).Bt(this.getHighlight());return this.Z_.push(t),this.ws(t),t}K_(t){return this.Q_.find((i=>i.vl===t))}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Rd extends Xc{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Es="Area Series",this.JS=[],this.KS=!1,this.qS=!1,this.sC=!1,this.D=new zt,this.Ce=Ji(this._t.polarAreaSeriesFillStyle,r),this.ke=Ji(this._t.polarAreaSeriesStrokeStyle,r)}setData(t){0!==this.JS.length&&this.chart.St.Zo(Gr.qn);const i=(t=>{const i=[];let s,e,h=!1;for(let r=0;r<t.length;r+=1){const n=t[r];let o=!0;if(s){o=!1;const t=n.angle-s.angle;if(di(t,0))o=!0;else{const i=Math.sign(t);void 0===e?(e=i,o=!0):e===i&&(o=!0)}}o?i.push(n):h=!0,s=n}return{progressivePoints:i,userDataModified:h}})(t);return i.userDataModified&&!1===this.sC&&(console.warn(`${this.Es} setData data format is faulty. Consecutive 'angle' values should progress in the same direction! Invalid data points have been removed.`),this.sC=!0),this.JS=i.progressivePoints,this.KS=!0,this.XS=Gc(this.JS),this.Ys.Ls(),this}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.Ys.Ls(),this}getFillStyle(){return this.Ce}setStrokeStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.Ys.Ls(),this}getStrokeStyle(){return this.ke}setConnectDataAutomaticallyEnabled(t){return this.qS=t,this.Ys.Ls(),this}getConnectDataAutomaticallyEnabled(){return this.qS}Qv(){return this.qv&&this.JS.length>0&&this.getVisible()}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce,stroke:this.ke})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class zd extends Rd{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.HS=this.Ys.Qc(this.scale,Fn.Simple).Bt(this.getHighlight()),this.ws(this.HS)}solveNearest(t,i){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=this.HS.Ru(e);if(!h)return;const r=Uc(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Kt(t,i){return As({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}Le(){if(this.KS||this.scale.sb()){const t=this.JS,i=!0===this.qS?Nc(t,this.scale):[...Nc(t,this.scale),{x:0,y:0}];this.HS.Hl(i).Ie(this.Ce).Fe(this.ke),this.KS=!1,this.HS.hr()}}De(t,i){t.Bt(i),this.Ys.Ls()}}class Vd extends Se{constructor(){super(...arguments),this.es="RadialScale",this.eC={start:0,end:1},this.hC=!1,this.rC=0,this.Y=r(0,0),this.nC=[0,0],this.oC=[0,0],this.o=!0,this.Ei=!0,this.aC=!0,this.lC=!0,this.cC={x:0,y:0},this.ki={x:{displacement:0,scaling:0,highPrecisionOffset:0},y:{displacement:0,scaling:0,highPrecisionOffset:0}}}IS(t,i){return t===this.eC.start&&i===this.eC.end||(this.eC={start:t,end:i},this.aC=!0,this.uC()),this}FS(){return this.eC}TS(){return this.eC.end>=this.eC.start}VS(t){this.hC=t,this.lC=!0}NS(){return!1===this.hC}OS(t){this.rC=t,this.lC=!0}DS(){return this.rC}Li(){return this.Ei}Oi(){return!1}ht(t,i,s,e){return this.x=new pe(t.x,i.x,s.x,e?e.x:void 0),this.y=new pe(t.y,i.y,s.y,e?e.y:void 0),this}Bi(){return this.ki}sb(){return this.aC}dC(){return this.lC}hs(){return this.cC}H(){return this.o=!1,this.Ei=!1,this.aC=!1,this.lC=!1,this}X(){return this.o=!0,this.Ei=!0,this.aC=!0,this.lC=!0,this}Z(t,i){return"object"==typeof t?(this.Y.x=t.x,this.Y.y=t.y):(this.Y.x=t,this.Y.y=i),this.uC(),this}Ji(t){return this.nC=t,this.uC(),this}Ki(t){return this.oC=t,this.uC(),this}bi(){return r(this.nC[0]+this.nC[1],this.oC[0]+this.oC[1])}xi(){return this.Y}uC(){const t=this.eC,i=r(this.x.Mi(this.Y.x),this.y.Mi(this.Y.y)),s=this.nC[0]+this.nC[1],e=this.oC[0]+this.oC[1],h=Math.max(i.x-s,0),n=Math.max(i.y-e,0),o=.5*(h>n?n:h),a=[this.nC[0]+Math.max((h-2*o)/2,0),this.nC[1]+Math.max((h-2*o)/2,0)],l=[this.oC[0]+Math.max((n-2*o)/2,0),this.oC[1]+Math.max((n-2*o)/2,0)],c=Math.abs(t.end-t.start);this.x.Z(this.Y.x).yi(a).W(-c,c),this.y.Z(this.Y.y).yi(l).W(-c,c),this.cC={x:this.x.getPixelSize(),y:this.y.getPixelSize()},this.ki={x:this.x.Bi(),y:this.y.Bi()},this.X()}Pi(t,i){const s=this.hs();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}rs(t,i,s,e){const h=this.hs(),r=Hs(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class Od extends Jl{constructor(t,i,s,e,h,r,n){super(t,i,s,i.wA("polarChart bg",0),e,i.St._t.polarChartBackgroundFillStyle,i.St._t.polarChartBackgroundStrokeStyle,i.St._t.polarChartTitleFont,i.St._t.polarChartTitleFillStyle,i.St._t.polarChartTitleShadow,n),this.coordsClient="client",this.Kd=[],this.fC=t=>{this.vS.Z(t.engineWidth,t.engineHeight)},this.ef=zi(this.Kd),this.AC=t=>{this.Kd.push(t)},this.gC=()=>this._y,this.D=new zt,this.St.Zo(Gr.Yn),this.v_=i.bm("polarChart series bg",0),this.vC=i.Ng("polarChart axis gridlines",0),this.yC=i.Ng("polarChart series",1),this.pC=i.Ng("polarChart axis lines",2),this.mC=i.Ng("polarChart axis ticks",3),this.vS=s.d2({scaleXYConstructor:Vd}),this.addEventListener("resize",this.fC),this.Sh.Sr("Polar Chart"),this.Iy=this.v_.Yu(this.vS).Ie(this._t.polarChartSeriesBackgroundFillStyle).Fe(Wt).Bc(0).$e(360).zc(0),this.Py=this.v_.Yu(this.vS).Ie(V).Fe(this._t.polarChartSeriesBackgroundStrokeStyle).Bc(0).$e(360).zc(0),super.Fy(this.Iy,this.Py),this.MA(h,this.xf),this.SC=new Bc(this,this.vS,this._t,!1!==(null==r?void 0:r.animationsEnabled),this.vC,this.pC,this.mC,this.vs,this.gC),this.bC=new Ec(this,this.vS,this._t,!1!==(null==r?void 0:r.animationsEnabled),this.vC,this.pC,this.mC,this.vs),this.coordsAxis={axisAmplitude:this.SC,axisRadial:this.bC};const o=i.$g(),a=gi(r?r.cursorBuilder:void 0,fl);this.Ug=Qa(this,o,a.ag(o,this.uiScale,this.uiScale,ui,this._t),this,"show-nearest",Gd,((t,i)=>{const s=this.translateCoordinate(t,this.coordsClient);return Math.sqrt((s.clientX-i.clientX)**2+(s.clientY-i.clientY)**2)})),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled))}getSeries(){return this._y}setCursor(t){return this.Ug.setCursor(t),this}getCursor(){return this.Ug.getCursor()}setCursorMode(t){return this.Ug.setCursorMode(t),this}getCursorMode(){return this.Ug.getCursorMode()}setCustomCursor(t){return this.Ug.setCustomCursor(t),this}setCursorFormatting(t){return this.Ug.setCursorFormatting(t),this}getCursorFormatting(){return this.Ug.getCursorFormatting()}solveNearest(t,i=this.getCursorMode()||"show-nearest"){return this.Ug.solveNearest(t,i,this._y,((t,i,s)=>t.solveNearest(i,s)))}addCursor(t=fl){const i=this.dA(),s=t.ag(i,this.uiScale,this.uiScale,this.nA(i),this._t);return this.SA(s),s}translateCoordinate(t,i,s){if(s){const i=t,e=this.xf,h=s;if(we(h)){const t=ot(i,e,this.St.ot);return this.St.ma({engineX:t.x,engineY:t.y})}if(Ce(h))return i;if(Vc(h)){const t=ot(i,e,this.vS);return Uc(t,this.vS)}}else{const s=t,e=i;if(_e(s)){if(Vc(e)){const t=this.St.pa(s),i=ot({x:t.engineX,y:t.engineY},this.St.ot,this.vS);return Uc(i,this.vS)}if(we(e))return s;if(Ce(e)){const t=this.St.pa(s);return ot({x:t.engineX,y:t.engineY},this.St.ot,this.xf)}}else if(Oc(s)){if(Vc(e))return s;const t=Nc([s],this.vS)[0];if(we(e)){const i=ot(t,this.vS,this.St.ot),s={engineX:i.x,engineY:i.y};return this.St.ma(s)}if(Ce(e))return ot(t,this.vS,this.xf)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addLineSeries(t){const i=new jc(this.yC,this,this.ky,this.vS,this._t,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,this.St.vs);return this.Ly(i),i}addPointSeries(t){const i=new Bd(this.yC,this,this.ky,this.vS,this._t,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,this.St.vs);return this.Ly(i),i}addPointLineSeries(t){const i=new Zc(this.yC,this,this.ky,this.vS,this._t,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,this.St.vs);return this.Ly(i),i}addAreaSeries(t){const i=new zd(this.yC,this,this.ky,this.vS,this._t,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,this.St.vs);return this.Ly(i),i}addPolygonSeries(t){const i=new Ed(this.yC,this,this.ky,this.vS,this._t,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,this.St.vs);return this.Ly(i),i}addHeatmapSeries(t){const i=new Wc(this.yC,this,this.ky,this.vS,this._t,this.St.vs,t);return this.Ly(i),i}addSector(){const t=new Yc(this.yC,this,this.ef,this.vS,this._t,this.St.vs);return this.AC(t),t}getAmplitudeAxis(){return this.SC}get amplitudeAxis(){return this.SC}get axisAmplitude(){return this.SC}getRadialAxis(){return this.bC}get radialAxis(){return this.bC}get axisRadial(){return this.bC}Le(t){super.Le(t),Ya.LA(this.Sh,this._A);for(const t of this._y)t.hy();this.SC.Er(),this.bC.Er();for(const t of this._y)t.Le();const i=this.vS.getInnerIntervalPixels().x/2,s=this.SC.hr({physicalAxisSize:i}),e=this.bC.hr({physicalAxisSize:2*Math.PI*i});this.SC.Le(s),this.bC.Le(e);const h=Ya.PA(this.Sh,this._A),r=[this.nn.left+e.zf,this.nn.right+e.zf],n=[this.nn.bottom+e.zf,this.nn.top+e.zf+h];this.vS.Ji(r).Ki(n);const o=this.vS.FS().start,a=this.vS.FS().end,l=this.vS.TS()?(e.zf||0)*this.vS.x.getPixelSize()+a-o:(e.zf||0)*this.vS.x.getPixelSize()+o-a;this.Iy.Dc(l).Vc(360),this.Py.Dc(l).Vc(360);for(const t of this.Kd)t.Le();this.Ug.Le(!1,this._y,((t,i,s)=>t.solveNearest(i,s)));for(const t of this._y)t.vv();return super.xA(),this.xC(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.SC.setAnimationsEnabled(t),this.bC.setAnimationsEnabled(t),this}getMinimumSize(){return r(Nd,Nd)}xC(){}forEachAxis(t){return t(this.SC),t(this.bC),this}dispose(){return this.Kd.slice().forEach((t=>t.dispose())),this.Ug.G(),this.v_.G(),this.vC.G(),this.yC.G(),this.pC.G(),this.mC.G(),super.dispose()}Gd(){return[...this._y,...this.Kd]}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Nd=300,Gd=(t,i,s)=>{var e;return vt(i)?Xa(i,[[{component:i.series,componentColor:Wa(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],["Angle","",{text:i.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:Pe(t.getAmplitudeAxis().formatValue(i.amplitude),t.amplitudeAxis),font:{weight:"bold"}}],["Intensity","",{text:Pe(i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]]):Xa(i,[[{component:i.series,componentColor:Wa(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],["Angle","",{text:i.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:Pe(t.getAmplitudeAxis().formatValue(i.amplitude),t.amplitudeAxis),font:{weight:"bold"}}]])};class $d extends ml{}class Ud extends $d{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.Es="Slice",this.S=0,this.lg=!1,this.MC=V,this.ug=V,this.dg=this.S,this.vg=Gt((()=>this.chart.St.Ls())),this.pg=()=>{this.mg=void 0},this.D=new zt,this.index=t,this.chart=e,this.scale=h,this.fs=r,this.HS=i.Qc(h,Fn.Simple).Bt(this.getHighlight()),this.ws(this.HS),this.sr=s.Yr(h).Bt(this.getHighlight()),this.ws(this.sr,{isText:!0})}setValue(t){return this.chart.getAnimationsEnabled()?this.getVisible()&&this.Mg(this.dg,t):this.dg=t,this.S=t,this.chart.St.Ls(),this}getValue(){return this.S}setVisible(t){return!1===t?this.chart.getAnimationsEnabled()&&this.dg>0?(this.mg&&(this.mg.finish(!1),this.mg=void 0),this.Mg(this.dg,0,(()=>super.setVisible(!1)))):(this.dg=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.mg&&(this.mg.finish(!1),this.mg=void 0),super.setVisible(!0),this.Mg(this.dg,this.S)):(this.dg=this.S,super.setVisible(!0)),this}Mg(t,i,s){this.mg=this.vg(300,Ot.ease)([[t,i]],(([t])=>{this.dg=t,this.chart.St.Ls()})),this.mg.addEventListener("everyAnimationEnd",this.pg),s&&this.mg.addEventListener("end",s)}setStyle(t,i,s,e,h){this.MC=t,this.ug=s,this.HS.Ie(this.MC).Fe(i),this.sr.Ie(this.ug).Xh(e).mr(h);for(let t=0;t<this.ds.length;t+=1)this.styleLegendEntry(this.ds[t])}getAnimatedValue(){return this.dg}De(t,i){return t.Bt(i),this.chart.St.Ls(),this}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.MC,stroke:this.HS.da()})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}var Yd;!function(t){t[t.VariableHeight=0]="VariableHeight",t[t.VariableWidth=1]="VariableWidth"}(Yd||(Yd={}));const Hd=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},Xd=(t,i,s,e,h,r=0,n=Yd.VariableHeight,o)=>{i=Hd(i,e.x),s=Hd(s,e.x);const a=t.length;let l=0,c=0;l=t.reduce(((t,i)=>t+i.getAnimatedValue()),0);let u={x:o-i/2,y:e.y+h.bottom},d={x:o+i/2,y:e.y+h.bottom},f={x:0,y:h.bottom},A={x:0,y:h.bottom},g=0,v=0;if(r)for(let i=0;i<t.length;i+=1){const s=10;v+=t[i].getAnimatedValue();const o=n===Yd.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-v/l*e.y;if(n===Yd.VariableWidth){r=o-r<s?Math.max(20,o-s):r;break}0!==g&&g-o-r<s&&(r=Math.max(0,g-o-s)),g=o}const y=(i-s)/2/e.y;for(let g=0;g<a;g+=1){const v=t[g];c+=v.getAnimatedValue();const p=n===Yd.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-c/l*e.y;let m=0;g>0&&(u={x:f.x+y*r,y:f.y-r},d={x:A.x-y*r,y:A.y-r}),m=(i+c/l*(s-i))/2,f={x:o-m,y:parseInt(`${n===Yd.VariableWidth?u.y-p:p}`,10)},A={x:o+m,y:parseInt(`${n===Yd.VariableWidth?d.y-p:p}`,10)},d.x>=u.x&&A.x>f.x&&v.HS.Hl([f,u,d,A])}};class Wd extends Ua{constructor(t,i,s,e,h,r,n){super(t,i,s,i.wA("funnelChart bg",0),e,i.St._t.funnelChartBackgroundFillStyle,i.St._t.funnelChartBackgroundStrokeStyle,i.St._t.funnelChartTitleFont,i.St._t.funnelChartTitleFillStyle,i.St._t.funnelChartTitleShadow,r),this.wg=[],this._g=yl.None,this.Tg=!0,this.Pg=this._t.funnelChartSliceLabelShadow,this.Lg=0,this.wC=80,this._C=20,this.CC=0,this.kC=Yd.VariableHeight,this.Eg=!0,this.zg=t=>{const i=this.wg.indexOf(t);i>=0&&(this.wg.splice(i,1),this.Vg())},this.D=new zt,this.St.Zo(Gr.Gn),this.Rg=this._t.effectsText,this.Og=i.Ng("funnelChart bottom",0),this.Gg=i.Ng("funnelChart top",1),this.Sh.Sr("Funnel Chart"),this.Cg=this._t.funnelChartSliceFillStylePalette,this.kg=this._t.funnelChartSliceStrokeStyle,this.Fg=this._t.funnelChartSliceLabelFont,this.Ig=this._t.funnelChartSliceLabelFillStyle;const o=i.$g(),a=gi(n?n.cursorBuilder:void 0,ul);this.Ug=Qa(this,o,a.ag(o,this.uiScale,this.uiScale,ui,this._t),void 0,"show-pointed",jd,(()=>0)),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled)),this.MA(h,this.xf)}setCursor(t){return this.Ug.setCursor(t),this}getCursor(){return this.Ug.getCursor()}setCursorMode(t){return this.Ug.setCursorMode(t),this}getCursorMode(){return this.Ug.getCursorMode()}setCustomCursor(t){return this.Ug.setCustomCursor(t),this}setCursorFormatting(t){return this.Ug.setCursorFormatting(t),this}getCursorFormatting(){return this.Ug.getCursorFormatting()}addCursor(t=ul){const i=this.dA(),s=t.ag(i,this.uiScale,this.uiScale,this.nA(i),this._t);return this.SA(s),s}addSlice(t,i){const s=new Ud(this.Lg,this.Og,this.Gg,this,this.xf,this.zg,this._t,this.St.vs);return this.Lg+=1,s.setName(t),s.setValue(i),s.vs.ps.Ps(this.Rg),s.vs.Ss.Ps(this.Eg),this.wg.push(s),this.St.Ls(),s.setHighlightOnHover(this.Tg),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.wg}setHeadWidth(t){return this.wC=t,this.St.Ls(),this}getHeadWidth(){return this.wC}setNeckWidth(t){return this._C=t,this.St.Ls(),this}getNeckWidth(){return this._C}setSliceGap(t){return this.CC=Math.min(Math.max(t,0),20),this.St.Ls(),this}setSliceMode(t){return this.kC=t,this.St.Ls(),this}getFunnelSliceMode(){return this.kC}setLUT(t){return this.Bd=t,this.St.Ls(),this}setSliceFillStyle(t){return this.Cg=t,this.St.Ls(),this}getSliceFillStyle(){return this.Cg}setSliceStrokeStyle(t){return this.kg="function"==typeof t?t(this.kg):t,this.St.Ls(),this}getSliceStrokeStyle(){return this.kg}setSliceEffect(t){return this.Eg=t,this.wg.forEach((i=>i.vs.Ss.Ps(t))),this.St.Ls(),this}getSliceEffect(){return this.Eg}setSliceSorter(t){return this._g=t,this.wg=this.wg.sort(this._g),this.St.Ls(),this}getSliceSorter(){return this._g}setLabelFillStyle(t){return this.Ig="function"==typeof t?t(this.Ig):t,this.St.Ls(),this}getLabelFillStyle(){return this.Ig}setLabelShadow(t){return this.Pg=t,this.St.Ls(),this}getLabelShadow(){return this.Pg}setLabelFont(t){return this.Fg="function"==typeof t?t(this.Fg):t,this.St.Ls(),this}getLabelFont(){return this.Fg}setLabelEffect(t){return this.Rg=t,this.wg.forEach((i=>i.vs.ps.Ps(t))),this.St.Ls(),this}getLabelEffect(){return this.Rg}setLabelFormatter(t){return this.Hg=t,this.St.Ls(),this}getLabelFormatter(){return this.Hg}setSliceHighlightOnHover(t){return this.Tg=t,this.wg.forEach((i=>i.setHighlightOnHover(t))),this}Le(t){super.Le(t),Ya.LA(this.Sh,this._A),super.xA();const i=Ya.PA(this.Sh,this._A),s=r(this.xf.x.getInnerInterval()-(this.nn.left+this.nn.right),this.xf.y.getInnerInterval()-(this.nn.bottom+this.nn.top+i)),e=r(this.nn.left+s.x/2,this.nn.bottom+s.y/2);this.wg=this.wg.sort(this._g);for(let t=0,{length:i}=this.wg;t<i;t+=1)this.Yg(this.wg[t],t);const h=this.wg.filter((t=>t.getAnimatedValue()>0));let n=0;for(let t=0;t<h.length;t+=1)n+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/n:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.sr.Sr(this.Hg(i,o[t])).hr()}o.push(n),this.Ug.Le(!1,this.wg,((t,i,s)=>{const e=o[h.indexOf(t)]||0,r=this.St.pa(i);return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.St.ot,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.St.ot},slice:t,category:t.getName(),value:t.getValue(),relativeValue:e}})),this.Xg(h,o,e,s)}Yg(t,i){t.setStyle(this.Bd?new $({color:this.Bd.getColors(t.getAnimatedValue(),void 0)}):this.Cg(i,t),this.kg,this.Ig,this.Fg,this.Pg)}Vg(){this.wg=this.wg.sort(this._g),this.St.Ls()}Gd(){return this.wg}dispose(){return this.wg.slice().forEach((t=>t.dispose())),this.Ug.G(),this.Og.G(),this.Gg.G(),super.dispose()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const jd=(t,i,s)=>[[{component:i.slice,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:i.value.toString(),font:{weight:"bold"}}]],Zd=(t,i,s)=>{const e=t.Xl();if(e.length>0){let t;const h=(e[1].y-e[0].y)/2+e[0].y;return t=i===tf.Left?(e[0].x-e[1].x)/2+e[1].x-s:(e[2].x-(4===e.length?e[3].x:e[1].x))/2+(4===e.length?e[3].x:e[1].x)+s,{x:t,y:h}}},Qd=t=>{const i=t.Xl();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class Jd extends Wd{constructor(){super(...arguments),this.Hg=pl.NamePlusValue,this.TC=10,this.FC=tf.Left,this.IC=vl.LabelsOnSides,this.Wg=[],this.Jg=this._t.funnelChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.Jg=t;for(let t=0;t<this.Wg.length;t+=1)this.Wg[t].Ne(this.Jg);return this.St.Ls(),this}getLabelConnectorStyle(){return this.Jg}setLabelConnectorGap(t){return this.TC=t,this.St.Ls(),this}getLabelConnectorGap(){return this.TC}setLabelSide(t){return this.FC=t,this.St.Ls(),this}getLabelSide(){return this.FC}Xg(t,i,s,e){const h=e.x+this.nn.left+this.nn.right,n=e.y+this.nn.top+this.nn.bottom<250||h<250,o=this.TC;let a,l=0;if(!n)for(let i=0;i<t.length;i+=1)l=Math.max(l,t[i].sr.xi().x);a=n?h/2:this.FC===tf.Right?(this.nn.left+(h-(this.nn.right+l)))/2:(this.nn.left+l+(h-this.nn.right))/2;const c=e.x-l,u=r(c,e.y);if(Xd(t,this.wC,this._C,u,this.nn,this.CC,this.kC,a),n)return t.forEach((t=>t.sr.setVisible(!1))),void this.Wg.forEach((t=>t.setVisible(!1)));this.PC(t,this.FC===tf.Left?-1:1,-1,s,e);for(let t=0;t<this.Wg.length;t+=1)this.Wg[t].setVisible(!1);for(let i=0;i<t.length;i+=1)t[i].getVisible()&&this.qg(this.LC(t[i],-1,s,o))}getMinimumSize(){return r(500,300)}PC(t,i,s,e,h){if(0===t.length)return;const n=e.x+i*h.x*.5,o=1===s?Math.max:Math.min;let a;for(let e=0;e<t.length;e+=1){const h=t[e];if(0===h.HS.Xl().length)h.sr.setVisible(!1);else{let t;h.sr.setVisible(!0),a&&(t=a.sr.il().y+s*(a.sr.xi().y+10));const e=(Zd(h.HS,this.FC,0)||r(0,0)).y,l=void 0===t?e:o(e,t);h.sr.Be(r(n,l)).nl(i).ll(0),a=h}}}LC(t,i,s,e){const h=t.HS,n=t.sr,o=Zd(h,this.FC,e);if(o){const t={x:te(this.FC===tf.Left?n.il().x-i*(e+n.xi().x):n.il().x+i*(e+n.xi().x),o,s).x,y:ie(n.il().y,o,s).y};return[o,t,r(this.FC===tf.Left?n.il().x-i*(e+n.xi().x):n.il().x+i*(e+n.xi().x),t.y)]}}qg(t){if(t){let i;for(let t=0;t<this.Wg.length;t+=1)if(!this.Wg[t].getVisible()){i=this.Wg[t].setVisible(!0);break}void 0===i&&(i=this.Gg.tv(this.xf,void 0,[Cl.InternalUI]).Ne(this.Jg),this.Wg.push(i)),i.ti().Dl(t)}}}class Kd extends Wd{constructor(){super(...arguments),this.Hg=pl.Name,this.IC=vl.LabelsInsideSlices}Xg(t,i,s,e){const h=this.nn.left+e.x/2;Xd(t,this.wC,this._C,e,this.nn,this.CC,this.kC,h);for(let i=0;i<t.length;i+=1){const s=t[i],e=s.HS,h=s.sr,r=Qd(e);r&&h.Be(r).nl(0).ll(0)}}getMinimumSize(){return r(200,200)}}const qd={LabelsOnSides:Jd,LabelsInsideSlices:Kd};var tf,sf;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(tf||(tf={}));class ef extends ml{}class hf extends ef{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.Es="Slice",this.S=0,this.lg=!1,this.MC=V,this.ug=V,this.dg=this.S,this.vg=Gt((()=>this.chart.St.Ls())),this.pg=()=>{this.mg=void 0},this.D=new zt,this.index=t,this.chart=e,this.scale=h,this.fs=r,this.HS=i.Qc(h,Fn.Simple).Bt(this.getHighlight()),this.ws(this.HS),this.sr=s.Yr(h).Bt(this.getHighlight()),this.ws(this.sr,{isText:!0})}setValue(t){return this.chart.getAnimationsEnabled()?this.getVisible()&&this.Mg(this.dg,t):this.dg=t,this.S=t,this.chart.St.Ls(),this}getValue(){return this.S}setVisible(t){return!1===t?this.chart.getAnimationsEnabled()&&this.dg>0?(this.mg&&(this.mg.finish(!1),this.mg=void 0),this.Mg(this.dg,0,(()=>super.setVisible(!1)))):(this.dg=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.mg&&(this.mg.finish(!1),this.mg=void 0),super.setVisible(!0),this.Mg(this.dg,this.S)):(this.dg=this.S,super.setVisible(!0)),this}Mg(t,i,s){this.mg=this.vg(300,Ot.ease)([[t,i]],(([t])=>{this.dg=t,this.chart.St.Ls()})),this.mg.addEventListener("everyAnimationEnd",this.pg),s&&this.mg.addEventListener("end",s)}setStyle(t,i,s,e,h){this.MC=t,this.ug=s,this.HS.Ie(this.MC).Fe(i),this.sr.Ie(this.ug).Xh(e).mr(h);for(let t=0;t<this.ds.length;t+=1)this.styleLegendEntry(this.ds[t])}getAnimatedValue(){return this.dg}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.MC,stroke:this.HS.da()})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}!function(t){t[t.VariableHeight=0]="VariableHeight",t[t.VariableWidth=1]="VariableWidth"}(sf||(sf={}));const rf=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},nf=(t,i,s,e,h,r=0,n=sf.VariableHeight,o)=>{i=rf(i,e.x),s=rf(s,e.x);const a=t.length;let l=0,c=0;l=t.reduce(((t,i)=>t+i.getAnimatedValue()),0);let u={x:o-i/2,y:e.y+h.bottom},d={x:o+i/2,y:e.y+h.bottom},f={x:0,y:h.bottom},A={x:0,y:h.bottom},g=0,v=0;if(r)for(let i=0;i<t.length;i+=1){const s=10;v+=t[i].getAnimatedValue();const o=n===sf.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-v/l*e.y;if(n===sf.VariableWidth){r=o-r<s?Math.max(20,o-s):r;break}0!==g&&g-o-r<s&&(r=Math.max(0,g-o-s)),g=o}const y=(i-s)/2/e.y;for(let g=0;g<a;g+=1){const v=t[g];c+=v.getAnimatedValue();const p=n===sf.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-c/l*e.y;let m=0;g>0&&(u={x:f.x+y*r,y:f.y-r},d={x:A.x-y*r,y:A.y-r}),m=(i+c/l*(s-i))/2,f={x:o-m,y:parseInt(`${n===sf.VariableWidth?u.y-p:p}`,10)},A={x:o+m,y:parseInt(`${n===sf.VariableWidth?d.y-p:p}`,10)},d.x>=u.x&&A.x>=f.x&&v.HS.Hl([f,u,d,A])}};class of extends Ua{constructor(t,i,s,e,h,r,n){super(t,i,s,i.wA("pyramidChart bg",0),e,i.St._t.pyramidChartBackgroundFillStyle,i.St._t.pyramidChartBackgroundStrokeStyle,i.St._t.pyramidChartTitleFont,i.St._t.pyramidChartTitleFillStyle,i.St._t.pyramidChartTitleShadow,r),this.wg=[],this._g=yl.None,this.Cg=this._t.pyramidChartSliceFillStylePalette,this.kg=this._t.pyramidChartSliceStrokeStyle,this.Tg=!0,this.Fg=this._t.pyramidChartSliceLabelFont,this.Ig=this._t.pyramidChartSliceLabelFillStyle,this.Pg=this._t.pyramidChartSliceLabelShadow,this.Lg=0,this.wC=0,this._C=80,this.CC=0,this.kC=sf.VariableHeight,this.Eg=!0,this.zg=t=>{const i=this.wg.indexOf(t);i>=0&&(this.wg.splice(i,1),this.Vg())},this.D=new zt,this.St.Zo(Gr.Gn),this.Rg=this._t.effectsText,this.Og=i.Ng("pyramidChart bottom",0),this.Gg=i.Ng("pyramidChart top",1),this.Sh.Sr("Pyramid Chart");const o=i.$g(),a=gi(n?n.cursorBuilder:void 0,ul);this.Ug=Qa(this,o,a.ag(o,this.uiScale,this.uiScale,ui,this._t),void 0,"show-pointed",af,(()=>0)),this.MA(h,this.xf),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled))}setCursor(t){return this.Ug.setCursor(t),this}getCursor(){return this.Ug.getCursor()}setCursorMode(t){return this.Ug.setCursorMode(t),this}getCursorMode(){return this.Ug.getCursorMode()}setCustomCursor(t){return this.Ug.setCustomCursor(t),this}setCursorFormatting(t){return this.Ug.setCursorFormatting(t),this}getCursorFormatting(){return this.Ug.getCursorFormatting()}addCursor(t=ul){const i=this.dA(),s=t.ag(i,this.uiScale,this.uiScale,this.nA(i),this._t);return this.SA(s),s}addSlice(t,i){const s=new hf(this.Lg,this.Og,this.Gg,this,this.xf,this.zg,this._t,this.St.vs);return this.Lg+=1,s.setName(t),s.setValue(i),s.vs.ps.Ps(this.Rg),s.vs.Ss.Ps(this.Eg),this.wg.push(s),this.St.Ls(),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.wg}setNeckWidth(t){return this._C=t,this.St.Ls(),this}getNeckWidth(){return this._C}setSliceGap(t){return this.CC=Math.min(Math.max(t,0),20),this.St.Ls(),this}setSliceMode(t){return this.kC=t,this.St.Ls(),this}getPyramidSliceMode(){return this.kC}setLUT(t){return this.Bd=t,this.St.Ls(),this}setSliceFillStyle(t){return this.Cg=t,this.St.Ls(),this}getSliceFillStyle(){return this.Cg}setSliceStrokeStyle(t){return this.kg="function"==typeof t?t(this.kg):t,this.St.Ls(),this}getSliceStrokeStyle(){return this.kg}setSliceEffect(t){return this.Eg=t,this.wg.forEach((i=>i.vs.Ss.Ps(t))),this.St.Ls(),this}getSliceEffect(){return this.Eg}setSliceSorter(t){return this._g=t,this.wg=this.wg.sort(this._g),this.St.Ls(),this}getSliceSorter(){return this._g}setLabelFillStyle(t){return this.Ig="function"==typeof t?t(this.Ig):t,this.St.Ls(),this}getLabelFillStyle(){return this.Ig}setLabelShadow(t){return this.Pg=t,this.St.Ls(),this}getLabelShadow(){return this.Pg}setLabelFont(t){return this.Fg="function"==typeof t?t(this.Fg):t,this.St.Ls(),this}getLabelFont(){return this.Fg}setLabelEffect(t){return this.Rg=t,this.wg.forEach((i=>i.vs.ps.Ps(t))),this.St.Ls(),this}getLabelEffect(){return this.Rg}setLabelFormatter(t){return this.Hg=t,this.St.Ls(),this}getLabelFormatter(){return this.Hg}setSliceHighlightOnHover(t){return this.Tg=t,this.wg.forEach((i=>i.setHighlightOnHover(t))),this}Le(t){super.Le(t),Ya.LA(this.Sh,this._A),super.xA();const i=Ya.PA(this.Sh,this._A),s=r(this.xf.x.getInnerInterval()-(this.nn.left+this.nn.right),this.xf.y.getInnerInterval()-(this.nn.bottom+this.nn.top+i)),e=r(this.nn.left+s.x/2,this.nn.bottom+s.y/2);this.wg=this.wg.sort(this._g);for(let t=0,{length:i}=this.wg;t<i;t+=1)this.Yg(this.wg[t],t);const h=this.wg.filter((t=>t.getAnimatedValue()>0));let n=0;for(let t=0;t<h.length;t+=1)n+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/n:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.sr.Sr(this.Hg(i,o[t])).hr()}o.push(n),this.Ug.Le(!1,this.wg,((t,i,s)=>{const e=o[h.indexOf(t)]||0,r=this.St.pa(i);return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.St.ot,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.St.ot},slice:t,category:t.getName(),value:t.getValue(),relativeValue:e}})),this.Xg(h,o,e,s)}Yg(t,i){t.setStyle(this.Bd?new $({color:this.Bd.getColors(t.getAnimatedValue(),void 0)}):this.Cg(i,t),this.kg,this.Ig,this.Fg,this.Pg)}Vg(){this.wg=this.wg.sort(this._g),this.St.Ls()}Gd(){return this.wg}dispose(){return this.wg.slice().forEach((t=>t.dispose())),this.Ug.G(),this.Og.G(),this.Gg.G(),super.dispose()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const af=(t,i,s)=>[[{component:i.slice,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:i.value.toString(),font:{weight:"bold"}}]],lf=(t,i,s)=>{const e=t.Xl();if(e.length>0){let t;const h=(e[1].y-e[0].y)/2+e[0].y;return t=i===Af.Left?(e[0].x-e[1].x)/2+e[1].x-s:(e[2].x-(4===e.length?e[3].x:e[1].x))/2+(4===e.length?e[3].x:e[1].x)+s,{x:t,y:h}}},cf=t=>{const i=t.Xl();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class uf extends of{constructor(){super(...arguments),this.Hg=pl.NamePlusValue,this.TC=10,this.FC=Af.Left,this.IC=vl.LabelsOnSides,this.Wg=[],this.Jg=this._t.pyramidChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.Jg=t;for(let t=0;t<this.Wg.length;t+=1)this.Wg[t].Ne(this.Jg);return this.St.Ls(),this}getLabelConnectorStyle(){return this.Jg}setLabelConnectorGap(t){return this.TC=t,this.St.Ls(),this}getLabelConnectorGap(){return this.TC}setLabelSide(t){return this.FC=t,this.St.Ls(),this}getLabelSide(){return this.FC}Xg(t,i,s,e){const h=e.x+this.nn.left+this.nn.right,n=e.y+this.nn.top+this.nn.bottom<250||h<250,o=this.TC;let a,l=0;if(!n)for(let i=0;i<t.length;i+=1)l=Math.max(l,t[i].sr.xi().x);a=n?h/2:this.FC===Af.Right?(this.nn.left+(h-(this.nn.right+l)))/2:(this.nn.left+l+(h-this.nn.right))/2;const c=e.x-l,u=r(c,e.y);if(nf(t,this.wC,this._C,u,this.nn,this.CC,this.kC,a),n)return t.forEach((t=>t.sr.setVisible(!1))),void this.Wg.forEach((t=>t.setVisible(!1)));this.PC(t,this.FC===Af.Left?-1:1,-1,s,e);for(let t=0;t<this.Wg.length;t+=1)this.Wg[t].setVisible(!1);for(let i=0;i<t.length;i+=1)if(t[i].getVisible()){const e=this.LC(t[i],-1,s,o);e&&this.qg(e)}}getMinimumSize(){return r(500,300)}PC(t,i,s,e,h){if(0===t.length)return;const n=e.x+i*h.x*.5,o=1===s?Math.max:Math.min;let a;for(let e=0;e<t.length;e+=1){const h=t[e];let l;0===h.HS.Xl().length?h.sr.setVisible(!1):h.sr.setVisible(!0),a&&(l=a.sr.il().y+s*(a.sr.xi().y+10));const c=lf(h.HS,this.FC,0);if(c){const t=c.y,s=void 0===l?t:o(t,l);h.sr.Be(r(n,s)).nl(i).ll(0)}a=h}}LC(t,i,s,e){const h=t.HS,n=t.sr,o=lf(h,this.FC,e);if(o){const t={x:te(this.FC===Af.Left?n.il().x-i*(e+n.xi().x):n.il().x+i*(e+n.xi().x),o,s).x,y:ie(n.il().y,o,s).y};return[o,t,r(this.FC===Af.Left?n.il().x-i*(e+n.xi().x):n.il().x+i*(e+n.xi().x),t.y)]}}qg(t){let i;for(let t=0;t<this.Wg.length;t+=1)if(!this.Wg[t].getVisible()){i=this.Wg[t].setVisible(!0);break}void 0===i&&(i=this.Gg.tv(this.xf,void 0,[Cl.InternalUI]).Ne(this.Jg),this.Wg.push(i)),i.ti().Dl(t)}}class df extends of{constructor(){super(...arguments),this.Hg=pl.Name,this.IC=vl.LabelsInsideSlices}Xg(t,i,s,e){const h=this.nn.left+e.x/2;nf(t,this.wC,this._C,e,this.nn,this.CC,this.kC,h);for(let i=0;i<t.length;i+=1){const s=t[i].HS,e=t[i].sr,h=cf(s);h&&e.Be(h).nl(0).ll(0)}}getMinimumSize(){return r(200,200)}}const ff={LabelsOnSides:uf,LabelsInsideSlices:df};var Af;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(Af||(Af={}));const gf=(t,i,s,e,h,r)=>(t.alignmentX=(h+Math.PI/2)%(2*Math.PI)<=Math.PI?-1:1,t.alignmentY=h%(2*Math.PI)<=Math.PI?-1:1,t.paddingX=Math.cos(h)*r,t.paddingY=Math.sin(h)*r,t),vf=t=>{if(0===t.axisIndex)return t.paddingX=t.labelPadding,t.alignmentX=-1,t;let i=!1;const s=t.chart.getAxes();if(s.length>1){const t=s[0].getInterval();i=s.some((i=>{const s=i.getInterval();return s.start!==t.start||s.end!==t.end}))}return i?(t.paddingX=t.labelPadding,t.alignmentX=-1,t):void 0};var yf;!function(t){t[t.Normal=0]="Normal",t[t.Circle=1]="Circle"}(yf||(yf={}));class pf{constructor(t,i,s,e,h,r,n,o,a){this.uh=!1,this.BC=fr.fittingEnd,this.DC=t=>this.axisScale.Wi(t,ve.Numeric),this.formatValue=t=>this.DC(t,{start:this.axisScale.$,end:this.axisScale.U}),this.EC=t,this.Xr=i,this.scale=s,this.chart=e,this.tag=h,this.axisScale=rt.d1({scale1DConstructor:pe,dimension:"x"}).W(0,1),this.RC=r,this.BC=o,a&&(this.DC=a),n&&this.setInterval(n),this.zC=this.EC.Ge(this.scale).setPointerEvents(!1),this.VC=this.Xr.Yr(this.scale).Sr(this.tag).setPointerEvents(!1),this.OC=this.EC.tv(this.scale,void 0,[Cl.InternalUI]).Ne(this.chart.getNibStyle()),this.RC._s([this.VC])}Xg(t,i,s,e,h,n,o){const a=i.length,l=i[s>0?s-1:a-1],c=i[s],u=i[s<a-1?s+1:0],d=this.chart.getNibLength();this.zC.Ue(t).$e(c).Ne(this.chart.getAxisStyle()),this.OC.ti().Dl(n===yf.Normal?[Es(c,l,fi(.5*d/Xs(Zs(l,c)),0,1)),c,Es(c,u,fi(.5*d/Xs(Zs(u,c)),0,1))]:((t,i,s,e,h=2)=>{const n=e/s,o=[];for(let a=-e/2;a<=e/2;a+=h){const h=n*(a/e)+i,l=r(t.x+Math.cos(h)*s,t.y+Math.sin(h)*s);o.push(l)}return o})(t,e,h,d)),o?this.VC.setVisible(!0).Be(js(c,r(o.paddingX,o.paddingY))).nl(o.alignmentX).ll(o.alignmentY):this.VC.setVisible(!1)}Er(t){if(this.BC&&!this.uh){const i=this.BC.start(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max),s=this.BC.end(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max);this.axisScale.W(i,s)}}getLabelSize(){return this.VC.Xh(this.chart.getAxisLabelFont()).Ie(this.chart.getAxisLabelStyle()).hr().xi()}dispose(){this.zC&&this.zC.dispose(),this.VC&&this.VC.dispose(),this.OC&&this.OC.dispose()}getTag(){return this.tag}setInterval(t){const{start:i,end:s,stopAxisAfter:e}=t;return void 0!==e&&(this.uh=e),this.axisScale.W(null!=i?i:this.axisScale.getInnerStart(),null!=s?s:this.axisScale.getInnerEnd()),this.chart.St.Ls(),this}getInterval(){return{start:this.axisScale.getInnerStart(),end:this.axisScale.getInnerEnd()}}setScaleLabelFormatter(t){return this.DC=t,this.chart.St.Ls(),this}setScrollStrategy(t){return this.BC=t,this.chart.St.Ls(),this}getScrollStrategy(){return this.BC}}class mf extends Hc{constructor(t,i,s,e,h,r,n,o,a,l,c,u){super(t,a,l,u),this.Es="Spider Series",this.NC=new Map,this.GC=new Map,this.cs=Ee.onHover,this.eb=8,this.Ga=0,this.$C=(()=>{const t=Gt((()=>{}));let i;return(s,e,h,r)=>{const n=null==r?void 0:r.onStart,o=null==r?void 0:r.onCompleted,a=(null==r?void 0:r.easing)||Ot.ease,l=(null==r?void 0:r.durationMs)||1e3;let c;if(i)if(0===i.nextAnimations.length){const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);c=t}else{s=i.nextAnimations.pop().values[0][0];const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);c=t}else c=t(l,a)([[s,e]],(([t])=>{h(t)})),i=c;c.addEventListener("end",(()=>{i=void 0})),n&&c.addEventListener("start",n),o&&c.addEventListener("end",o)}})(),this.UC={},this.YC={},this.gg=this.getVisible(),this.HC=1,this.XC=((t,i)=>{const s=Gt((()=>{}));let e,h,r=1;return(n,o,a)=>{if(n===h)return;h=n;const l=(null==a?void 0:a.easing)||Ot.ease,c=(null==a?void 0:a.durationMs)||1e3;e&&(e.finish(!1),e=void 0),!1===n?o&&r&&(e=s(c,l)([[r,0]],(([i])=>{r=i,t(r)})),e.addEventListener("end",(()=>{e=void 0,i(!1)})),r=0,i(!1)):o?(i(!0),e=s(c,l)([[r,1]],(([i])=>{r=i,t(r)})),e.addEventListener("end",(()=>{e=void 0}))):(r=1,i(!0))}})((t=>{this.HC=t,this.Ys.St.Ls()}),(t=>{super.setVisible(t)})),this.WC=!1,this.D=new zt,this.chart=t,this.Ys=i,this.hb=e,this.jC=h,this.xm=r,this.ZC=n,this.QC=o,this.scale=s,this.JC=Ji(l.spiderSeriesFillStyle,c),this.KC=Ji(l.spiderSeriesStrokeStyle,c),this.qC=Ji(l.spiderSeriesPointFillStyle,c)}tk(){return this.WC}Kt(t,i){const s=this.QC(i);if(void 0!==s&&this.NC.has(s.tag)){const t=this.NC.get(s.tag),i=this.ZC(s.tag,t);return{cursorPosition:{pointMarker:i,pointMarkerScale:this.scale,resultTable:i,resultTableScale:this.scale},series:this,axis:s.tag,value:t}}}Qv(){return this.qv&&this.NC.size>0&&this.getVisible()}addPoints(...t){const i=0===this.NC.size;i||this.chart.St.Zo(Gr.qn),t=t.filter((t=>void 0!==t.axis));for(let i=0;i<t.length;i+=1){const s=t[i].axis;this.jC(s)}if(this.chart.getAnimationsEnabled()&&void 0!==this.UC){let s;t.forEach((t=>this.GC.set(t.axis,t.value))),this.$C(0,1,(t=>{this.GC.forEach(((i,e)=>{const h=(null==s?void 0:s.get(e))||0;this.NC.set(e,h+t*(i-h)),this.Ys.St.Ls()}))}),{easing:this.UC.easing,durationMs:this.UC.durationMs,onStart:()=>{this.WC=i,s=new Map(this.NC)},onCompleted:()=>{this.WC=!1}})}else for(let i=0;i<t.length;i+=1){const s=t[i].axis;this.NC.set(s,t[i].value),this.GC.set(s,t[i].value)}return this.Ys.Ls(),this}getValue(t,i=!1){if(this.chart.getAxis(t))return i?this.NC.get(t):this.GC.get(t)}setAnimationAddPoints(t,i){return this.UC=t?{easing:t,durationMs:i}:void 0,this.Ys.Ls(),this}setVisibleStateChangedAnimation(t,i){return this.YC=t?{easing:t,durationMs:i}:void 0,this.Ys.Ls(),this}setFillStyle(t){return this.JC="function"==typeof t?t(this.JC):t,this.HS&&(this.HS.Ie(this.JC),this.Ys.Ls()),this}getFillStyle(){return this.JC}setStrokeStyle(t){return this.KC="function"==typeof t?t(this.KC):t,this.HS&&(this.HS.Fe(this.KC),this.Ys.Ls()),this}getStrokeStyle(){return this.KC}setPointFillStyle(t){return this.qC="function"==typeof t?t(this.qC):t,this.rb&&(this.rb.Ie(this.qC),this.Ys.Ls()),this}getPointFillStyle(){return this.qC}setPointSize(t){return this.eb=t,this.rb&&this.rb.Z(t),this}getPointSize(){return this.eb}getPointShape(){return this.hb}setPointRotation(t){return this.Ga=t,this.rb&&this.rb.Wh(t),this.Ys.Ls(),this}getPointRotation(){return this.Ga}Le(){if(super.Le(),!this.dt){const t=new Array(this.xm.length);for(let i=0;i<this.xm.length;i+=1){const s=this.xm[i].getInterval().start,e=this.NC.get(this.xm[i].tag);t[i]=void 0!==e?this.ZC(this.xm[i].tag,s+this.HC*(e-s)):this.ZC(this.xm[i].tag,s)}Vi(t),t.length>=3&&(this.HS||(this.HS=this.Ys.Qc(this.scale,Fn.Simple).Fe(this.KC).Ie(this.JC).Bt(this.getHighlight()),this.ws(this.HS)),this.HS.Hl(t),this.rb||(this.rb=this.Ys.wy(this.scale).Z(this.eb).Fl(this.hb).Wh(this.Ga).Ie(this.qC).Bt(this.getHighlight()),this.ws(this.rb)),this.rb.ti().Dl(t))}}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.JC,stroke:this.KC})}$s(){return this.Ds||this.hb}ik(){for(let t=0;t<this.ds.length;t+=1)Wi(this.ds[t],this._t,!1,{fill:this.JC,stroke:this.KC})}De(t,i){return t.Bt(i),this.Ys.Ls(),this}setVisible(t){var i,s;return this.gg=t,this.XC(t,this.chart.getAnimationsEnabled()&&void 0!==this.YC,{easing:null===(i=this.YC)||void 0===i?void 0:i.easing,durationMs:null===(s=this.YC)||void 0===s?void 0:s.durationMs}),this}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Sf=(t,i)=>{const s=Math.PI/2-2*t*Math.PI/i;return s>=0?s:s+2*Math.PI},bf=t=>zs(t.VC.Kg()),xf=t=>zs(t.Kg()),Mf=(t,i,s,e)=>t.zc(0).Be(s).Bc(90).$e(-270).Vc(i===yf.Circle?void 0:e.length),wf={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},_f={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},Cf=()=>{_f.alignmentX=0,_f.alignmentY=0,_f.paddingX=0,_f.paddingY=0};class kf extends Jl{constructor(t,i,s,e,h,r,n){super(t,i,s,i.wA("spiderChart bg",0),e,i.St._t.spiderChartBackgroundFillStyle,i.St._t.spiderChartBackgroundStrokeStyle,i.St._t.spiderChartTitleFont,i.St._t.spiderChartTitleFillStyle,i.St._t.spiderChartTitleShadow,n),this.nn=f(20,20,20,20),this.xm=[],this.sk=[],this.ek=[],this.BC=fr.fittingEnd,this.hk=!0,this.rk=vf,this.nk=gf,this.ak=yf.Normal,this.lk=4,this.ck=this._t.spiderChartWebStyle,this.uk=this._t.spiderChartScaleLabelFillStyle,this.dk=this._t.spiderChartScaleLabelShadow,this.fk=this._t.spiderChartScaleLabelFont,this.Ak=5,this.gk=this._t.spiderChartAxisLabelFillStyle,this.vk=this._t.spiderChartAxisLabelFont,this.yk=5,this.pk=this._t.spiderChartAxisStrokeStyle,this.mk=this._t.spiderChartAxisNibStrokeStyle,this.Sk=10,this.bk=f(),this.hasAxis=t=>this.xm.reduce(((i,s)=>i||s.tag===t),!1),this.xk=()=>{const t=this.xm.map(bf).concat(this.ek.map(xf));return Fs(t)},this.Mk=()=>this.wk.Yu(this.xf).setPointerEvents(!1),this._k=t=>t.dispose(),this.Ck=()=>this.cf.Yr(this.xf).setPointerEvents(!1),this.kk=t=>t.dispose(),this.Tk=t=>{this.hk&&!this.hasAxis(t)&&this.addAxis(t)},this.ZC=(t,i)=>{for(const s of this.xm)if(s.tag===t){const t=Math.max(Math.min((i-s.axisScale.getInnerStart())/(s.axisScale.getInnerEnd()-s.axisScale.getInnerStart()),1),0);return Es(s.zC.Hi(),s.zC.Ui(),t)}},this.QC=t=>{if(0===this.xm.length)return;const i=Zs(this.translateCoordinate(t,this.coordsRelative),this.xm[0].zC.Hi()),s=Math.atan2(i.y,i.x);let e,h=bs;for(const t of this.xm){const i=Zs(t.zC.Ui(),t.zC.Hi()),r=Math.atan2(i.y,i.x),n=Math.abs(s-r);n<h&&(e=t,h=n)}return e},this.D=new zt,this.St.Zo(Gr.Un),this.v_=i.bm("spiderChart series bg",0),this.wk=i.Ng("spiderChart web shapes",0),this.Fk=i.Ng("spiderChart axis bg",1),this.Km=i.Ng("spiderChart plotting",2),this.cf=i.Ng("spiderChart fg",3),this.RC=this.vs.kf().Ps(this._t.effectsText),this.Sh.Sr("Spider Chart"),this.Iy=this.v_.Yu(this.xf).Ie(this._t.spiderChartSeriesBackgroundFillStyle).Fe(Wt).Bc(90).$e(-270).zc(0),this.Py=this.v_.Yu(this.xf).Ie(V).Fe(this._t.spiderChartSeriesBackgroundStrokeStyle).Bc(90).$e(-270).zc(0),super.Fy(this.Iy,this.Py);const o=i.$g(),a=gi(r?r.cursorBuilder:void 0,ll);this.Ug=Qa(this,o,a.ag(o,this.uiScale,this.uiScale,ui,this._t),this,"show-pointed",Tf,(()=>0)),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled)),this.MA(h,this.xf)}getSeries(){return this._y}getAxes(){return this.xm}getAxis(t){const i=this.xm.find((i=>i.getTag()===t));if(!i)throw new Error(`Axis with tag "${t}" was not found.`);return i}setCursor(t){return this.Ug.setCursor(t),this}getCursor(){return this.Ug.getCursor()}setCursorMode(t){return this.Ug.setCursorMode(t),this}getCursorMode(){return this.Ug.getCursorMode()}setCustomCursor(t){return this.Ug.setCustomCursor(t),this}setCursorFormatting(t){return this.Ug.setCursorFormatting(t),this}getCursorFormatting(){return this.Ug.getCursorFormatting()}addCursor(t=ll){const i=this.dA(),s=t.ag(i,this.uiScale,this.uiScale,this.nA(i),this._t);return this.SA(s),s}addAxis(t){const i=this.xm.find((i=>i.tag===t));if(i)return i;const s=new pf(this.Fk,this.cf,this.xf,this,t,this.RC,this.Ik,this.BC,this.scaleLabelFormatter);return this.xm.push(s),this.RC._s(this.xm.map((t=>t.VC))),this.St.Ls(),s}addSeries(t){const i=void 0!==(null==t?void 0:t.pointShape)?t.pointShape:Oe.Circle,s=void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,e=new mf(this,this.Km,this.xf,i,this.Tk,this.xm,this.ZC,this.QC,this.ky,this._t,s,this.St.vs);return this.Ly(e),e}getSeriesCount(){return this._y.length}setWebMode(t){return this.ak=t,this.St.Ls(),this}getWebMode(){return this.ak}setWebCount(t){return this.lk=t,this.St.Ls(),this}getWebCount(){return this.lk}setWebStyle(t){return this.ck="function"==typeof t?t(this.ck):t,this.St.Ls(),this}getWebStyle(){return this.ck}setScaleLabelStyle(t){return this.uk="function"==typeof t?t(this.uk):t,this.St.Ls(),this}getScaleLabelStyle(){return this.uk}setScaleLabelShadow(t){return this.dk=t,this.St.Ls(),this}getScaleLabelShadow(){return this.dk}setScaleLabelFont(t){return this.fk="function"==typeof t?t(this.fk):t,this.St.Ls(),this}getScaleLabelFont(){return this.fk}setScaleLabelPadding(t){return this.Ak=t,this.St.Ls(),this}getScaleLabelPadding(){return this.Ak}setScaleLabelStrategy(t){return this.rk=t,this.St.Ls(),this}setScaleLabelFormatter(t){return this.scaleLabelFormatter=t,this.xm.forEach((i=>{i.setScaleLabelFormatter(t)})),this.St.Ls(),this}setAxisLabelStyle(t){return this.gk="function"==typeof t?t(this.gk):t,this.St.Ls(),this}getAxisLabelStyle(){return this.gk}setAxisLabelFont(t){return this.vk="function"==typeof t?t(this.vk):t,this.St.Ls(),this}getAxisLabelFont(){return this.vk}setAxisLabelEffect(t){return this.RC.Ps(t),this.St.Ls(),this}getAxisLabelEffect(){return this.RC.Bs()}setAxisLabelPadding(t){return this.yk=t,this.St.Ls(),this}getAxisLabelPadding(){return this.yk}setAxisLabelStrategy(t){return this.nk=t,this.St.Ls(),this}setAxisStyle(t){return this.pk="function"==typeof t?t(this.pk):t,this.St.Ls(),this}getAxisStyle(){return this.pk}setNibStyle(t){return this.mk="function"==typeof t?t(this.mk):t,this.St.Ls(),this}getNibStyle(){return this.mk}setNibLength(t){return this.Sk=t,this.St.Ls(),this}getNibLength(){return this.Sk}setAutoAxis(t){return this.hk=t,this}getAutoAxis(){return this.hk}setScrollStrategy(t){return this.BC=t,this.xm.forEach((i=>i.setScrollStrategy(t))),this.St.Ls(),this}setAxisInterval(t){return this.Ik=t,this.xm.forEach((i=>i.setInterval(t))),this}Le(t){super.Le(t),Ya.LA(this.Sh,this._A);const i=this.xm.length,s=Ya.PA(this.Sh,this._A),e=r(this.xf.x.getInnerInterval()-(this.nn.left+this.nn.right),this.xf.y.getInnerInterval()-(this.nn.bottom+this.nn.top+s)),h=((t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}))(0,0,0,0);if(void 0!==this.nk){const t=Math.min(e.x,e.y)/2;for(let s=0;s<i;s+=1){const e=Sf(s,i),n=Math.cos(e),o=Math.sin(e),a=this.xm[s].getLabelSize();Cf();const l=this.nk(_f,s,i,this.xm[s].tag,e,this.yk),c=r(n*t+l.paddingX,o*t+l.paddingY);n>0?h.right=Math.max(h.right,c.x+.5*(1-l.alignmentX)*a.x-t):h.left=Math.max(h.left,-c.x+.5*(l.alignmentX+1)*a.x-t),o>0?h.top=Math.max(h.top,c.y+.5*(1-l.alignmentY)*a.y-t):h.bottom=Math.max(h.bottom,-c.y+.5*(l.alignmentY+1)*a.y-t)}}this.xm.forEach((t=>{const i=!this.getSeries().some((t=>t.tk()))&&this.getSeriesCount()>1,s=this.Pk(t.tag,i);s&&t.Er(s)}));const n=r(this.xf.x.getInnerStart()+(h.left+this.xf.x.getInnerInterval()-h.right)/2,this.xf.y.getInnerStart()+(h.bottom+this.xf.y.getInnerInterval()-h.top)/2),o=Math.min(e.x/2-(h.left+h.right)/2,e.y/2-(h.bottom+h.top)/2);this.bk=f(this.oi.left+this.nn.left+h.left,this.oi.top+this.nn.top+s+h.top,this.oi.right+this.nn.right+h.right,this.oi.bottom+this.nn.bottom+h.bottom),this.Xg(n,o);for(const t of this._y)t.hy();for(const t of this._y)t.Le();this.Ug.Le(!1,this._y,void 0),super.xA();for(const t of this._y)t.vv()}dispose(){return this.v_.G(),this.wk.G(),this.Fk.G(),this.Km.G(),this.cf.G(),this.Ug.G(),super.dispose()}getMinimumSize(){return r(this.bk.left+this.bk.right+100,this.bk.bottom+this.bk.top+100)}Xg(t,i){const s=this.xm.length,e=[];for(let h=0;h<s;h+=1){const n=Sf(h,s),o=r(t.x+Math.cos(n)*i,t.y+Math.sin(n)*i);e.push(o)}Mf(this.Iy,this.ak,t,e),Mf(this.Py,this.ak,t,e),this.Iy.Dc(i),this.Py.Dc(i),((t,i,s,e,h,r,n,o)=>{const a=t.length,l=r.length,c=i>0&&l>1;for(let l=0;l<Math.max(i,a);l+=1)if(c&&l<i){l>=a&&t.push(n());const o=t[l];Mf(o,s,e,r);const c=h*((l+1)/i);o.Dc(c)}else l<t.length&&o(t[l]);t.length=c?i:0})(this.sk,this.lk,this.ak,t,i,e,this.Mk,this._k);for(const t of this.sk)t.Ie(V).Fe(this.ck);for(let h=0;h<s;h+=1){const r=this.xm[h],n=Sf(h,s);Cf();const o=void 0!==this.nk?this.nk(_f,h,s,this.xm[h].tag,n,this.yk):void 0;r.Xg(t,e,h,n,i,this.ak,o)}((t,i,s,e,h,n,o,a,l)=>{const c=h.length,u=t.length;let d=0;void 0!==i&&h.forEach(((h,l)=>{var f,A,g,v;const y=h.tag,p=Sf(l,c);for(let m=0;m<s;m+=1){wf.alignmentX=0,wf.alignmentY=0,wf.paddingX=0,wf.paddingY=0;const S=i({...wf,chart:h.chart,axis:h,axisIndex:l,axisCount:c,axisTag:y,axisAngle:p,webIndex:m,webCount:s,labelPadding:e});if(void 0!==S){d>=u&&t.push(a());const i=t[d];d+=1;const e=(s-m)/s,c=h.formatValue(h.axisScale.getInnerStart()+e*(h.axisScale.getInnerEnd()-h.axisScale.getInnerStart())),y=Es(n,o[l],e);i.Be(js(y,r(null!==(f=S.paddingX)&&void 0!==f?f:0,null!==(A=S.paddingY)&&void 0!==A?A:0))).nl(null!==(g=S.alignmentX)&&void 0!==g?g:0).ll(null!==(v=S.alignmentY)&&void 0!==v?v:0).Sr(c)}}}));for(let i=d;i<u;i+=1)l(t[i]);t.length=d})(this.ek,this.rk,this.lk,this.Ak,this.xm,t,e,this.Ck,this.kk);for(const t of this.ek)t.Ie(this.uk).Xh(this.fk).mr(this.dk)}Pk(t,i){let s,e;const h=this.getAxis(t);for(const t of this._y){const r=t.getValue(h.tag,i);void 0!==r&&(s=void 0===s?r:Math.min(s,r),e=void 0===e?r:Math.max(e,r))}if(void 0!==s&&void 0!==e)return c(s,e)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Tf=(t,i,s)=>Xa(i,[[{component:i.series,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[i.axis],[{text:t.getAxis(i.axis).formatValue(i.value),font:{weight:"bold"}}]]),Ff=100001,If=200002,Pf=300002,Lf=400001,Bf=510001,Df=(t,i)=>{const s=Math.floor(99999/i),e=Math.floor(99999/i),h=Math.floor(99998/i),r=Math.floor(99998/i),n=Math.floor(99999/(i+1)),o=Math.floor(89999/(i+1)),a=Bf+i*o;let l=0;return{Lk:()=>{const i=t.Bk("dashboard ui",a+l);return l+=1,i},Dk:()=>t.Bk("dashboard legend",51e4),Ek:i=>{const a=1+i*s,l=Ff+i*e,c=If+i*h,u=Pf+i*r,d=Lf+i*n,f=Bf+i*o;let A=0;return{St:t,wA:(i,s)=>{const e=a+s;return t.Bk(i,e)},bm:(i,s)=>{const e=l+s;return t.Bk(i,e)},p_:(i,s)=>{const e=c+s;return t.Bk(i,e)},Ng:(i,s)=>{const e=u+s;return t.Bk(i,e)},Sm:(i,s,e)=>{const h=u+s;return t.Rk(i,h,e)},kA:(i,s)=>{const e=d+s;return t.Bk(i,e)},fA:i=>{const s=f+A,e=t.Bk(i,s);return A+=1,e},gA:()=>t.Bk("panel legend",500002+i),$g:()=>t.Bk("panel cursor",600001+i)}}}};class Ef{constructor(t){this.D=new zt,this.S=t}_(t){return this.S=t,this.D.R("change",{value:t}),this}C(){return this.S}V(t,i,s){this.D.addEventListener(t,i,s)}N(t,i){this.D.removeEventListener(t,i)}}const Rf={uh:!1,dh:0,fh:!1,gh:0,Ah:!1,yh:0,ph:0,hh:fr.fitting},zf=t=>{if(!t||"object"!=typeof t||null===t)return!1;const i=t.type;return!(!i||!["spark-line","spark-bar","spark-win-loss","spark-area","spark-pie"].includes(i))},Vf=(t,i,s,e,h,r,n,o)=>{const{type:a,data:l}=t;if(0===l.length)return;const c=[e,h];"spark-line"===a&&Wf(t,i,c,r,n,o),"spark-bar"===a&&jf({...t,winLoss:!1},i,c,r,n,o),"spark-win-loss"===a&&jf({...t,winLoss:!0},i,c,r,n,o),"spark-area"===a&&Zf(t,i,c,r,n,o),"spark-pie"===a&&Qf(t,i,c,r,n,o)},Of=(t,i,s,e)=>({x:Gf(t.x,i.x,s.x,e),y:$f(t.y,i.y,s.y,e)}),Nf=(t,i,s,e)=>({position:Gf(t.position,i.x,s.x,e),high:$f(t.high,i.y,s.y,e),low:$f(t.low,i.y,s.y,e)}),Gf=(t,i,s,e)=>{const h=fi(t,i,i+s);return e[0].x+e[1].x*(h-i)/s},$f=(t,i,s,e)=>{const h=fi(t,i,i+s);return e[0].y+e[1].y*(h-i)/s},Uf=(t,i,s,e,h,r,n,o)=>{for(const a of t)"point"===a.type&&Yf(a,i,s,h,r,n,o),"axis-band"===a.type&&Hf(a,s,h,r,n,o),"constant-line"===a.type&&Xf(a,s,e,h,r,n,o)},Yf=(t,i,s,e,h,r,n)=>{const{value:o,fillStyle:a,shape:l,size:c,rotation:u}=t;let d={x:NaN,y:NaN};if("start"===o&&(d=i[0]),"end"===o&&(d=i[i.length-1]),"min"===o){d=i[0];for(const t of i)d=d.y<t.y?d:t}if("max"===o){d=i[0];for(const t of i)d=d.y>t.y?d:t}("object"!=typeof o||(d=Of(o,s,e,h),((t,i)=>{const s=i[0],e=i[1],h=t.x,r=t.y;return s.x<=h&&h<=s.x+e.x&&s.y<=r&&r<=s.y+e.y})(d,h)))&&r.pointSet.add().ti().Fl(void 0!==l?l:Oe.Circle).Wh(u||0).Z(c||5).Ie(a||n.sparkPointChartFillStyle).Dl(d)},Hf=(t,i,s,e,h,n)=>{const{axis:o,start:a,end:l,fillStyle:c,strokeStyle:u}=t;let d=r(xs,bs),f=r(xs,bs);"x"===o&&(d=Of({x:a,y:xs},i,s,e),f=Of({x:l,y:bs},i,s,e)),"y"===o&&(d=Of({x:xs,y:a},i,s,e),f=Of({x:bs,y:l},i,s,e));const A=e[0],g=e[1],v=fi(d.x,A.x,A.x+g.x),y=fi(d.y,A.y,A.y+g.y),p=fi(f.x,A.x,A.x+g.x),m=fi(f.y,A.y,A.y+g.y);h.rect.add().Ol(v).Nl(y).Z(r(p-v,m-y)).Ie(c||n.sparkChartBandFillStyle).Fe(u||n.sparkChartBandStrokeStyle).Fe(Wt)},Xf=(t,i,s,e,h,n,o)=>{const{axis:a,value:l,strokeStyle:c}=t,u=l||0,d=i.y,f=s.y,A=i.x,g=s.x,v=[];if("y"===a&&d<=u&&u<=f){const t=Of(r(A,u),{x:A,y:d},e,h),i=Of(r(g,u),{x:A,y:d},e,h);v.push([t,i])}if("x"===a&&A<=u&&u<=g){const t=Of(r(u,d),{x:A,y:d},e,h),i=Of(r(u,f),{x:A,y:d},e,h);v.push([t,i])}v.length>0&&n.line.add().Ne(c||o.sparkChartConstantLineStrokeStyle).Ue(v[0][0]).$e(v[0][1])},Wf=(t,i,s,e,h,r)=>{const{strokeStyle:n,data:o,markers:a}=t,l=o.length;l>1e4&&h.qo&&ni.console.warn("LightningChart JS warning: SparkLineChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let c=bs,u=xs,d=bs,f=xs;for(let t=0;t<l;t+=1){const i=o[t];c=Math.min(c,i.x),u=Math.max(u,i.x),d=Math.min(d,i.y),f=Math.max(f,i.y)}const A={x:u-c,y:f-d},g=o.map((t=>Of(t,{x:c,y:d},A,s)));i.lineSet.add().Bt(r).Ne(n||e.sparkLineChartStrokeStyle).ti().Dl(g),a&&Uf(a,g,{x:c,y:d},{x:u,y:f},A,s,i,e)},jf=(t,i,s,e,h,r)=>{const{data:n,fillStyle:o,strokeStyle:a,threshold:l,winFillStyle:c,lossFillStyle:u}=t,d=t.barSize||1,f=t.gap||1,A=t.winLoss,g=l||0,v=f/d*1;let y=bs,p=xs;if(A)y=-1,p=1;else for(const t of n)y=Math.min(y,t),p=Math.max(p,t);const m={x:0,y:A?-1:Math.min(0,y)},S={x:1*n.length+(n.length-1)*v,y:A?2:Math.max(p,1e-5)};n.map(((t,i)=>{const e={x:1*(i+1)+i*v,y:A?t>=g?1:0:t},h=Of({x:1*i+i*v,y:A?t>=g?0:-1:0},m,S,s),r=Of(e,m,S,s);return{value:t,position:h,width:r.x-h.x,height:r.y-h.y}})).forEach((t=>{var s;i.rect.add().Bt(r).Be(t.position).$l(t.height).Gl(t.width).Ie((s=t.value,A?(s>=g?c:u)||e.sparkBarChartFillStyle:o||e.sparkBarChartFillStyle)).Fe(a||e.sparkBarChartStrokeStyle)}))},Zf=(t,i,s,e,h,r)=>{const{data:n,fillStyle:a,strokeStyle:l,markers:c}=t,u=n.length;u>1e4&&h.qo&&ni.console.warn("LightningChart JS warning: SparkAreaChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let d=bs,f=xs,A=bs,g=xs;for(let t=0;t<u;t+=1){const i=n[t];d=Math.min(d,i.x),f=Math.max(f,i.x),A=Math.min(A,i.y),g=Math.max(g,i.y)}const v={x:f-d,y:g-A},y=[],p=[];for(const t of n){const i=o(t.x,t.y,A);y.push(Nf(i,{x:d,y:A},v,s)),p.push(Of(t,{x:d,y:A},v,s))}i.junction.add().Bt(r).ti().Dl(y).Ie(a||e.sparkAreaChartFillStyle),i.lineSet.add().Bt(r).ti().Dl(p).Ne(l||e.sparkAreaChartStrokeStyle),c&&Uf(c,p,{x:d,y:A},{x:f,y:g},v,s,i,e)},Qf=(t,i,s,e,h,n)=>{const{data:o,strokeStyle:a}=t,l=o.map((t=>"number"==typeof t?t:t.value)),c=o.map((t=>"object"==typeof t?t.fillStyle:void 0)),u=l.reduce(((t,i)=>t+i),0),d=Of(r(50,50),{x:0,y:0},{x:100,y:100},s),f=s[1],A=f.x<=f.y?f.x/2:f.y/2;let g=90;l.forEach(((t,s)=>{const h=t/u*360;i.arc.add().Bt(n).Be(d).Dc(A).zc(0).Bc(g).$e(g+h).Ie(c[s]||Ji(e.sparkPieChartFillStyle,s)).Fe(a||e.sparkPieChartStrokeStyle),g+=h}))},Jf={XY:rd,Spider:ll,BarChart:cl,Map:Al,Polar:fl,D3:fc},Kf={Angola:{name:"Angola",ISO_A3:"AGO"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Gabon:{name:"Gabon",ISO_A3:"GAB"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Namibia:{name:"Namibia",ISO_A3:"NAM"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Oman:{name:"Oman",ISO_A3:"OMN"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},Somalia:{name:"Somalia",ISO_A3:"SOM"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"}},qf={Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Armenia:{name:"Armenia",ISO_A3:"ARM"},Australia:{name:"Australia",ISO_A3:"AUS"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},China:{name:"China",ISO_A3:"CHN"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},India:{name:"India",ISO_A3:"IND"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Nepal:{name:"Nepal",ISO_A3:"NPL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Philippines:{name:"Philippines",ISO_A3:"PHL"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Palestine:{name:"Palestine",ISO_A3:"PSE"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Russia:{name:"Russia",ISO_A3:"RUS"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Singapore:{name:"Singapore",ISO_A3:"SGP"},Syria:{name:"Syria",ISO_A3:"SYR"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Yemen:{name:"Yemen",ISO_A3:"YEM"}},tA={"New South Wales":{name:"New South Wales"},Victoria:{name:"Victoria"},Queensland:{name:"Queensland"},"South Australia":{name:"South Australia"},"Western Australia":{name:"Western Australia"},Tasmania:{name:"Tasmania"},"Northern Territory":{name:"Northern Territory"},"Australian Capital Territory":{name:"Australian Capital Territory"},"Other Territories":{name:"Other Territories"}},iA={"British Columbia":{name:"British Columbia"},Quebec:{name:"Quebec"},Nunavut:{name:"Nunavut"},"Prince Edward Island":{name:"Prince Edward Island"},Saskatchewan:{name:"Saskatchewan"},Yukon:{name:"Yukon"},Manitoba:{name:"Manitoba"},Ontario:{name:"Ontario"},"New Brunswick":{name:"New Brunswick"},"Northwest Territories":{name:"Northwest Territories"},Alberta:{name:"Alberta"},"Newfoundland and Labrador":{name:"Newfoundland and Labrador"},"Nova Scotia":{name:"Nova Scotia"}},sA={Albania:{name:"Albania",ISO_A3:"ALB"},Austria:{name:"Austria",ISO_A3:"AUT"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Denmark:{name:"Denmark",ISO_A3:"DNK"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Finland:{name:"Finland",ISO_A3:"FIN"},France:{name:"France",ISO_A3:"FRA"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Greece:{name:"Greece",ISO_A3:"GRC"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Italy:{name:"Italy",ISO_A3:"ITA"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Malta:{name:"Malta",ISO_A3:"MLT"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Poland:{name:"Poland",ISO_A3:"POL"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Romania:{name:"Romania",ISO_A3:"ROU"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Russia:{name:"Russia",ISO_A3:"RUS"},Turkey:{name:"Turkey",ISO_A3:"TUR"}},eA={Aruba:{name:"Aruba",ISO_A3:"ABW"},Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},Angola:{name:"Angola",ISO_A3:"AGO"},Anguilla:{name:"Anguilla",ISO_A3:"AIA"},Albania:{name:"Albania",ISO_A3:"ALB"},Aland:{name:"Aland",ISO_A3:"ALA"},Andorra:{name:"Andorra",ISO_A3:"AND"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Argentina:{name:"Argentina",ISO_A3:"ARG"},Armenia:{name:"Armenia",ISO_A3:"ARM"},"American Samoa":{name:"American Samoa",ISO_A3:"ASM"},Antarctica:{name:"Antarctica",ISO_A3:"ATA"},"French Southern and Antarctic Lands":{name:"French Southern and Antarctic Lands",ISO_A3:"ATF"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},Australia:{name:"Australia",ISO_A3:"AUS"},Austria:{name:"Austria",ISO_A3:"AUT"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belize:{name:"Belize",ISO_A3:"BLZ"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},Canada:{name:"Canada",ISO_A3:"CAN"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Chile:{name:"Chile",ISO_A3:"CHL"},China:{name:"China",ISO_A3:"CHN"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Cyprus No Mans Area":{name:"Cyprus No Mans Area",ISO_A3:"-99"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},"Cook Islands":{name:"Cook Islands",ISO_A3:"COK"},Colombia:{name:"Colombia",ISO_A3:"COL"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Curaçao":{name:"Curaçao",ISO_A3:"CUW"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},"Northern Cyprus":{name:"Northern Cyprus",ISO_A3:"-99"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Dominica:{name:"Dominica",ISO_A3:"DMA"},Denmark:{name:"Denmark",ISO_A3:"DNK"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},"Dhekelia Sovereign Base Area":{name:"Dhekelia Sovereign Base Area",ISO_A3:"-99"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Finland:{name:"Finland",ISO_A3:"FIN"},Fiji:{name:"Fiji",ISO_A3:"FJI"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},France:{name:"France",ISO_A3:"FRA"},"Faroe Islands":{name:"Faroe Islands",ISO_A3:"FRO"},"Federated States of Micronesia":{name:"Federated States of Micronesia",ISO_A3:"FSM"},Gabon:{name:"Gabon",ISO_A3:"GAB"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Guernsey:{name:"Guernsey",ISO_A3:"GGY"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Greece:{name:"Greece",ISO_A3:"GRC"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},Guam:{name:"Guam",ISO_A3:"GUM"},Guyana:{name:"Guyana",ISO_A3:"GUY"},"Hong Kong S.A.R.":{name:"Hong Kong S.A.R.",ISO_A3:"HKG"},"Heard Island and McDonald Islands":{name:"Heard Island and McDonald Islands",ISO_A3:"HMD"},Honduras:{name:"Honduras",ISO_A3:"HND"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},"Isle of Man":{name:"Isle of Man",ISO_A3:"IMN"},India:{name:"India",ISO_A3:"IND"},"Indian Ocean Territories":{name:"Indian Ocean Territories",ISO_A3:"-99"},"British Indian Ocean Territory":{name:"British Indian Ocean Territory",ISO_A3:"IOT"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Israel:{name:"Israel",ISO_A3:"ISR"},Italy:{name:"Italy",ISO_A3:"ITA"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},Jersey:{name:"Jersey",ISO_A3:"JEY"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},"Baykonur Cosmodrome":{name:"Baykonur Cosmodrome",ISO_A3:"-99"},"Siachen Glacier":{name:"Siachen Glacier",ISO_A3:"-99"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},Kiribati:{name:"Kiribati",ISO_A3:"KIR"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},Liechtenstein:{name:"Liechtenstein",ISO_A3:"LIE"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},"Macao S.A.R":{name:"Macao S.A.R",ISO_A3:"MAC"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Mexico:{name:"Mexico",ISO_A3:"MEX"},"Marshall Islands":{name:"Marshall Islands",ISO_A3:"MHL"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},"Northern Mariana Islands":{name:"Northern Mariana Islands",ISO_A3:"MNP"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Namibia:{name:"Namibia",ISO_A3:"NAM"},"New Caledonia":{name:"New Caledonia",ISO_A3:"NCL"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Niue:{name:"Niue",ISO_A3:"NIU"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Nepal:{name:"Nepal",ISO_A3:"NPL"},"New Zealand":{name:"New Zealand",ISO_A3:"NZL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Panama:{name:"Panama",ISO_A3:"PAN"},"Pitcairn Islands":{name:"Pitcairn Islands",ISO_A3:"PCN"},Peru:{name:"Peru",ISO_A3:"PER"},"Spratly Islands":{name:"Spratly Islands",ISO_A3:"-99"},Philippines:{name:"Philippines",ISO_A3:"PHL"},Palau:{name:"Palau",ISO_A3:"PLW"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},Poland:{name:"Poland",ISO_A3:"POL"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Palestine:{name:"Palestine",ISO_A3:"PSE"},"French Polynesia":{name:"French Polynesia",ISO_A3:"PYF"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Romania:{name:"Romania",ISO_A3:"ROU"},Russia:{name:"Russia",ISO_A3:"RUS"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},Singapore:{name:"Singapore",ISO_A3:"SGP"},"South Georgia and South Sandwich Islands":{name:"South Georgia and South Sandwich Islands",ISO_A3:"SGS"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Solomon Islands":{name:"Solomon Islands",ISO_A3:"SLB"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Somalia:{name:"Somalia",ISO_A3:"SOM"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},"Sao Tome and Principe":{name:"Sao Tome and Principe",ISO_A3:"STP"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},"East Timor":{name:"East Timor",ISO_A3:"TLS"},Tonga:{name:"Tonga",ISO_A3:"TON"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Tuvalu:{name:"Tuvalu",ISO_A3:"TUV"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},"United States Minor Outlying Islands":{name:"United States Minor Outlying Islands",ISO_A3:"UMI"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"US Naval Base Guantanamo Bay":{name:"US Naval Base Guantanamo Bay",ISO_A3:"-99"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Vanuatu:{name:"Vanuatu",ISO_A3:"VUT"},"Wallis and Futuna":{name:"Wallis and Futuna",ISO_A3:"WLF"},"Akrotiri Sovereign Base Area":{name:"Akrotiri Sovereign Base Area",ISO_A3:"-99"},Samoa:{name:"Samoa",ISO_A3:"WSM"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"}},hA={Alabama:{name:"Alabama"},Alaska:{name:"Alaska"},Arizona:{name:"Arizona"},Arkansas:{name:"Arkansas"},California:{name:"California"},Colorado:{name:"Colorado"},Connecticut:{name:"Connecticut"},Delaware:{name:"Delaware"},"District of Columbia":{name:"District of Columbia"},Florida:{name:"Florida"},Georgia:{name:"Georgia"},Hawaii:{name:"Hawaii"},Idaho:{name:"Idaho"},Illinois:{name:"Illinois"},Indiana:{name:"Indiana"},Iowa:{name:"Iowa"},Kansas:{name:"Kansas"},Kentucky:{name:"Kentucky"},Louisiana:{name:"Louisiana"},Maine:{name:"Maine"},Maryland:{name:"Maryland"},Massachusetts:{name:"Massachusetts"},Michigan:{name:"Michigan"},Minnesota:{name:"Minnesota"},Mississippi:{name:"Mississippi"},Missouri:{name:"Missouri"},Montana:{name:"Montana"},Nebraska:{name:"Nebraska"},Nevada:{name:"Nevada"},"New Hampshire":{name:"New Hampshire"},"New Jersey":{name:"New Jersey"},"New Mexico":{name:"New Mexico"},"New York":{name:"New York"},"North Carolina":{name:"North Carolina"},"North Dakota":{name:"North Dakota"},Ohio:{name:"Ohio"},Oklahoma:{name:"Oklahoma"},Oregon:{name:"Oregon"},Pennsylvania:{name:"Pennsylvania"},"Rhode Island":{name:"Rhode Island"},"South Carolina":{name:"South Carolina"},"South Dakota":{name:"South Dakota"},Tennessee:{name:"Tennessee"},Texas:{name:"Texas"},Utah:{name:"Utah"},Vermont:{name:"Vermont"},Virginia:{name:"Virginia"},Washington:{name:"Washington"},"West Virginia":{name:"West Virginia"},Wisconsin:{name:"Wisconsin"},Wyoming:{name:"Wyoming"}},rA={Anguilla:{name:"Anguilla",ISO_A3:"AIA"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Canada:{name:"Canada",ISO_A3:"CAN"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},Dominica:{name:"Dominica",ISO_A3:"DMA"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Mexico:{name:"Mexico",ISO_A3:"MEX"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"}},nA={Argentina:{name:"Argentina",ISO_A3:"ARG"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Chile:{name:"Chile",ISO_A3:"CHL"},Colombia:{name:"Colombia",ISO_A3:"COL"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},Guyana:{name:"Guyana",ISO_A3:"GUY"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Panama:{name:"Panama",ISO_A3:"PAN"},Peru:{name:"Peru",ISO_A3:"PER"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Honduras:{name:"Honduras",ISO_A3:"HND"}},oA={World:eA,USA:hA,NorthAmerica:rA,SouthAmerica:nA,Canada:iA,Europe:sA,Asia:qf,Africa:Kf,Australia:tA};class aA extends Tr{constructor(t,i,s,e,h,r){super(t,{Lr(){},Pr(){},Dr(){}},e,i,s,{numeric:i.xAxisNumericTicks.setFallBackToExtremeTicksAutomatically(!1),datetime:i.xAxisDateTimeTicks,time:i.xAxisTimeTicks},{type:"linear"}),this.D=new zt,this.chart=t,this.vs=r,this.Ys=h,this.Mh=h.Yr(t.zk).Xh(this._t.barChartCategoryAxisTitleFont||this._t.xAxisTitleFont).Ie(this._t.barChartCategoryAxisTitleFillStyle||this._t.xAxisTitleFillStyle),this.setTitleRotation(this.chart.Hs.getWidth({x:0,y:-90})),this.Zh=this.vs.kf([this.Mh]).Ps(i.effectsText),this.Vk=h.Ge(t.zk).Ne(i.barChartCategoryAxisStrokeStyle||i.xAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.Lf=t,this.Bf=t):"object"==typeof t&&(this.Lf=t.min,this.Bf=t.max),this.chart.St.Ls(),this}getThickness(){return{min:this.Lf,max:this.Bf}}setStrokeStyle(t){return this.Vk.Ne(t),this.chart.St.Ls(),this}getStrokeStyle(){return this.Vk.In()}Le(t){const i=this.getInterval(),s=this.chart.valueAxis.getInterval();this.Vk.Ue(this.chart.Hs.toPoint(i.start,s.start)).$e(this.chart.Hs.toPoint(i.end,s.start)).setVisible(this.ft),this.Mh.Be(this.chart.Hs.toPoint(.5*(i.start+i.end),this.chart.valueAxis.ot.Pi(s.start,-t.Ef))).ul(this.chart.Hs.toPoint(0,1)).setVisible(this.ft),t.ticksInfo.forEach(((t,i)=>{i.sr.Be(t.labelPosition).ul(t.labelAlignment).Wh(t.labelRotation).hl(t.labelOffset.x,t.labelOffset.y)}))}lr(t){return{}}Ar(t,i,s,e){return{keyValue:t,tickLevel:i,labelText:s,labelAlignment:{x:0,y:0},labelPosition:{x:0,y:0},labelOffset:{x:0,y:0},labelRotation:0}}br(t,i){return new Fr(i,t,this.Ys,this.chart.zk)}yr(t,i){const s=t.Ef,e=this.chart.Hs.getHeight(this.Mh.hr().zu());return{Rf:e,Pd:fi(this.Vk.In().Xt()/2+s+e,void 0!==this.Lf?this.Lf:0,void 0!==this.Bf?this.Bf:bs),ticksInfo:i}}_h(){return this.chart.uiScale}Rr(t,i){return i}Or(t,i,s){return{min:t,max:i}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}}class lA extends Tr{constructor(t,i,s,e,h,r,n){super(t,{Lr:()=>{var i;if(t.Ok){if("positive"===t.Nk||"bipolar"===t.Nk){if("after-bar"===(null===(i=t.Gk)||void 0===i?void 0:i.position)){const i=this.ot.Si();return this.ot.Pi(t.Ok.max,Math.min(this.chart.Hs.getHeight(this.chart.$k())+t.Gk.labelMargin,.3*i))}return t.Ok.max}return t.Uk?fi(-1,-1e-6,t.Ok.max):0}},Pr:()=>{var i;if(t.Ok){if("negative"===t.Nk||"bipolar"===t.Nk){if("after-bar"===(null===(i=t.Gk)||void 0===i?void 0:i.position)){const i=this.ot.Si();return this.ot.Pi(t.Ok.min,-Math.min(this.chart.Hs.getHeight(this.chart.$k())+t.Gk.labelMargin,.3*i))}return t.Ok.min}return t.Uk?fi(1,1e-6,t.Ok.min):0}},Dr:()=>{}},e,i,s,{numeric:i.barChartValueAxisTicks||i.yAxisNumericTicks,datetime:i.yAxisDateTimeTicks,time:i.yAxisTimeTicks},n),this.D=new zt,this.chart=t,this.vs=r,this.Ys=h,this.Mh=h.Yr(t.zk).Xh(this._t.barChartValueAxisTitleFont||this._t.yAxisTitleFont).Ie(this._t.barChartValueAxisTitleFillStyle||this._t.yAxisTitleFillStyle),this.setTitleRotation(this.chart.Hs.getHeight({x:0,y:-90})),this.Zh=this.vs.kf([this.Mh]).Ps(i.effectsText),this.Vk=h.Ge(t.zk).Ne(i.barChartValueAxisStrokeStyle||this._t.yAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.Lf=t,this.Bf=t):"object"==typeof t&&(this.Lf=t.min,this.Bf=t.max),this.chart.St.Ls(),this}getThickness(){return{min:this.Lf,max:this.Bf}}setStrokeStyle(t){return this.Vk.Ne(t),this.chart.St.Ls(),this}getStrokeStyle(){return this.Vk.In()}setTickStrategy(t,i){return super.Rh(t,i)}Le(t){const i=this.getInterval();this.Vk.Ue(this.chart.Hs.toPoint(-.5,this.zh)).$e(this.chart.Hs.toPoint(-.5,this.Vh)).setVisible(this.ft);const s="logarithmic"===this.Dh.type?Math.sqrt(i.start+i.end):.5*(i.start+i.end),e=this.chart.Hs.toPoint(this.chart.categoryAxis.ot.Pi(-.5,t.Ef*this.chart.Hs.Yk),s),h=this.chart.Hs.toPoint(this.chart.Hs.Hk,0);this.Mh.Be(e).ul(h).setVisible(this.ft),t.ticksInfo.forEach(((i,s)=>{s.sr.Be(i.labelPosition).ul(i.labelAlignment).Wh(i.labelRotation).hl(i.labelOffset.x,i.labelOffset.y);const e=s.Hr.th;e.tickStyle!==Wt&&0!==e.tickLength&&t.plotLines.add({positions:[i.positionTicklineStart,i.positionTicklineEnd]},{lineStyle:e.tickStyle}),e.gridStrokeStyle!==Wt&&e.gridStrokeLength>0&&t.plotLines.add({positions:[i.positionTicklineStart,i.positionGridlineEnd]},{lineStyle:e.gridStrokeStyle})}))}lr(t){return{}}Ar(t,i,s,e,h){const r=i.th,n=this.chart.Hs.toPoint(-.5,t),o=this.chart.zk.Pi(n,this.chart.Hs.toPoint(r.getTickLength()*this.chart.Hs.Yk,0)),a=this.chart.zk.Pi(n,this.chart.Hs.toPoint(r.gridStrokeLength*e.oppositeAxisSize*-this.chart.Hs.Yk,0));return{keyValue:t,tickLevel:i,labelText:s,labelPosition:this.chart.zk.Pi(o,this.chart.Hs.toPoint(r.getTickPadding()*this.chart.Hs.Yk,0)),labelAlignment:this.chart.Hs.toPoint(this.chart.Hs.Hk,r.getLabelAlignment()),labelOffset:{x:0,y:0},labelRotation:i.th.labelRotation,positionTicklineStart:n,positionTicklineEnd:o,positionGridlineEnd:a}}br(t,i){return new Fr(i,t,this.Ys,this.chart.zk)}yr(t,i){let s=0;for(const t of this.eh.values())for(const i of t.values()){const t=i.Hr.th,e=this.chart.Hs.getWidth(i.sr.hr().zu()),h=t.getTickLength()+t.getTickPadding()+e;s=Math.max(s,h)}const e=s+this.Vk.In().Xt()/2,h=this.chart.Hs.getWidth(this.Mh.hr().zu());return{Ef:e,Rf:h,Pd:fi(e+h,void 0!==this.Lf?this.Lf:0,void 0!==this.Bf?this.Bf:bs),ticksInfo:i}}_h(){return this.chart.zk}Rr(t,i){return"linear"===this.Dh.type?Be(t,i,this.ot):De(t,i,this.ot)}Or(t,i,s){return{min:t,max:i}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}}class cA extends Hc{constructor(t,i,s,e,h,r,n){super(t,i,s,e),this.Mt=ds(),this.S=0,this.Xk=!1,this.D=new zt,this.chart=t,this.chart=t,this.category=h,this.subCategory=r,this.Es=h,this.Ce=Ji(s.barChartBarFillStyle||s.rectangleSeriesFillStyle,n),this.ke=Ji(s.barChartBarStrokeStyle||s.rectangleSeriesStrokeStyle,n),this.addEventListener("visiblechange",(()=>this.chart.Wk())),this.addEventListener("dispose",(()=>{this.chart.Wk(),this.chart.jk.delete(this.category),this.chart.Zk.delete(this)}))}Kt(t,i){const s=this.chart.St.pa(i);return{cursorPosition:{pointMarker:{x:s.engineX,y:s.engineY},pointMarkerScale:this.chart.St.ot,resultTable:{x:s.engineX,y:s.engineY},resultTableScale:this.chart.St.ot},category:this.category,subCategory:this.subCategory,bar:this,value:this.getValue()}}setValue(t){return this.Xk=!0,this.S=t,this.chart.Wk(),this.chart.St.Ls(),this.chart.jk.delete(this.category),this.chart.Zk.delete(this),this}getValue(){return this.S}get value(){return this.S}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.chart.Wk(),this}getFillStyle(){return this.Ce}setStrokeStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.chart.Wk(),this}getStrokeStyle(){return this.ke}Qv(){return this.qv}setEffect(t){return this.chart.setBarsEffect(t),this}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const uA=t=>!!(t&&"object"==typeof t&&"iCategory"in t&&"number"==typeof t.iCategory&&"value"in t&&"number"==typeof t.value);class dA extends Jl{constructor(t,i,s,e,h,r,n){var o;let a;super(t,i,s,i.wA("barChart bg",0),e,i.St._t.barChartBackgroundFillStyle||i.St._t.chartXYBackgroundFillStyle,i.St._t.barChartBackgroundStrokeStyle||i.St._t.chartXYBackgroundStrokeStyle,i.St._t.barChartTitleFont||i.St._t.chartXYTitleFont,i.St._t.barChartTitleFillStyle||i.St._t.chartXYTitleFillStyle,i.St._t.barChartTitleShadow||i.St._t.chartXYTitleShadow,r),this.coordsBars="barChart",this.Qk=AA.Descending,this.Jk=this._t.barChartCategoryLabels,this.Gk=this._t.barChartValueLabelsAfterBars,this.Kk=!0,this.ox=cs(),this.jk=new Map,this.Zk=new Map,this.Nk="positive",this.qk="columns",this.tT=!0,this.iT=new Map,this.sT={speed:1},this.mg={speed:1},this.eT=.08,this.hT=!1,this.rT={left:2,right:2,top:2,bottom:2},this.nT=[],this.Vo=t=>{this.zk.Z(t.engineWidth,t.engineHeight),this.hT=!0},this.D=new zt,this.St.Zo(Gr.Nn),this.oT=this._t.barChartCornerRadius,this.Hs="horizontal"===(null==n?void 0:n.type)?vA:gA,this.Sh.Sr("Bar Chart"),this.aT=i.Ng("barChart plotting 1",0),this.lT=i.Ng("barChart plotting 2",1),this.Uk="logarithmic"===(null===(o=null==n?void 0:n.valueAxis)||void 0===o?void 0:o.type),this.Uk?"horizontal"===this.Hs.cT?(a=s.d1({scale1DConstructor:pe,dimension:"y"}),this.zk=(new xe).Qi(s.d1({scale1DConstructor:le,dimension:"x"}),a)):(a=s.d1({scale1DConstructor:pe,dimension:"x"}),this.zk=(new xe).Qi(a,s.d1({scale1DConstructor:le,dimension:"y"}))):(this.zk=s.d2({scaleXYConstructor:be}),a=this.Hs.getWidth(this.zk)),this.uT=this.vs.kf(),this.lx=new Dl((()=>this.ox.Jt(this.aT.Vu(this.zk).xa(0))),((t,i,s)=>(t.Ie(s.fillStyle).Fe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.lo();return s.$u(i.x1,i.y1,i.x2,i.y2).Gu(i.rounding),this.ox.qt(s,i.bar),i.bar.ks([s]),s})))),(()=>{this.ox.ti()}),(t=>{this.uT._s(t)})),this.Iy=this.rA.Pe(this.zk).Ie(this._t.barChartSeriesBackgroundFillStyle||V).Fe(Wt),this.Py=this.rA.Pe(this.zk).Ie(V).Fe(this._t.barChartSeriesBackgroundStrokeStyle||Wt).setPointerEvents(!1),super.Fy(this.Iy,this.Py),this.categoryAxis=new aA(this,this._t,!1!==(null==n?void 0:n.animationsEnabled),a,this.lT,this.vs),this.categoryAxis.setInterval(this.Hs.getWidth({x:{start:-.5,end:.5},y:{start:.5,end:-.5}}));const l=Le(null==n?void 0:n.valueAxis);this.valueAxis=new lA(this,this._t,!1!==(null==n?void 0:n.animationsEnabled),this.Hs.getHeight(this.zk),this.lT,this.vs,l.type),this.dT=new El((()=>this.lT.Yr(this.zk).Ur(us).$r(us).xa(1))),this.fT=new Dl((()=>this.rA.Gf(this.zk).setPointerEvents(!1)),((t,i,s)=>(t.Ne(s.lineStyle),i.map((({positions:i,existingMember:s})=>(s||t.lo()).Uf(i[0],i[1]))))));const c=i.$g(),u=gi(n?n.cursorBuilder:void 0,cl);this.Ug=Qa(this,c,u.ag(c,this.uiScale,this.uiScale,ui,this._t),this,"show-pointed",yA,(()=>0)),this.addEventListener("resize",this.Vo),this.MA(h,this.zk),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled))}getSeries(){return this._y}setCornerRadius(t){return this.oT=t,this.Kk=!0,this.St.Ls(),this}getCornerRadius(){return this.oT}setCursor(t){return this.Ug.setCursor(t),this}getCursor(){return this.Ug.getCursor()}setCursorMode(t){return this.Ug.setCursorMode(t),this}getCursorMode(){return this.Ug.getCursorMode()}setCustomCursor(t){return this.Ug.setCustomCursor(t),this}setCursorFormatting(t){return this.Ug.setCursorFormatting(t),this}getCursorFormatting(){return this.Ug.getCursorFormatting()}addCursor(t=cl){const i=this.dA(),s=t.ag(i,this.uiScale,this.uiScale,this.nA(i),this._t);return this.SA(s),s}setBarsMargin(t){return this.eT=fi(t,0,.49),this.Kk=!0,this.St.Ls(),this}getBarsMargin(){return this.eT}setBarsEffect(t){return this.uT.Ps(t),this.St.Ls(),this}getBarsEffect(){return this.uT.Bs()}setData(t){let i;if(Array.isArray(t))i=[],t.forEach(((t,s)=>{"string"==typeof t?i.push({category:t}):"number"==typeof t?i.push({category:`Category ${s+1}`,value:t}):"object"==typeof t&&i.push(t)}));else{i=[];const s=Object.keys(t);for(const e of s){const s=t[e];i.push({category:e,value:"number"==typeof s?s:void 0})}}return this.AT("columns",i),this}setDataStacked(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:h}=i;h.forEach(((i,h)=>{const r=t[h];s.push({category:r,subCategory:e,value:i})}))})),this.AT("stacks",s),this}setDataGrouped(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:h}=i;h.forEach(((i,h)=>{const r=t[h];s.push({category:r,subCategory:e,value:i})}))})),this.AT("groups",s),this}AT(t,i){this._y.length>0&&this.St.Zo(Gr.qn),this.qk=t,this.nT=i.map((t=>({category:t.category,subCategory:t.subCategory}))),this.gT(i);const s=is(i.map((t=>t.category))),e=s.length,h=is(i.map((t=>t.subCategory))).filter((t=>void 0!==t));if(i.forEach((t=>{let i=this._y.find((i=>i.category===t.category&&i.subCategory===t.subCategory));if(!i){const e=s.indexOf(t.category),r=void 0!==t.subCategory&&h.includes(t.subCategory)?h.indexOf(t.subCategory):void 0;i=new cA(this,this.ky,this._t,this.St.vs,t.category,t.subCategory,gi(r,e)),this.Ly(i),this.iT.set(i,{category:e,valueStart:this.Uk?1e-6:0,valueEnd:void 0!==t.value?t.value:0})}void 0!==t.value&&i.setValue(t.value)})),this._y.slice().forEach((t=>{void 0===i.find((i=>i.category===t.category&&i.subCategory===t.subCategory))&&(t.dispose(),this.iT.delete(t))})),this.categoryAxis.setInterval(this.Hs.getWidth({x:{start:-.5,end:Math.max(e,1)-.5},y:{start:Math.max(e,1)-.5,end:-.5}})),this.Ok=0===this._y.length?void 0:"stacks"!==t?this._y.reduce(((t,i)=>({min:Math.min(t.min,i.getValue()),max:Math.max(t.max,i.getValue())})),{min:bs,max:xs}):{min:0,max:s.reduce(((t,s)=>Math.max(t,i.reduce(((t,i)=>i.category!==s?t:void 0!==i.value?t+i.value:t),0))),0)},this.Ok&&(this.Nk=this.Ok.min>=0?"positive":this.Ok.max<=0?"negative":"bipolar",("bipolar"===this.Nk||"negative"===this.Nk)&&this.Uk))throw new Error("LightningChart JS BarChart bipolar/negative data + logarithmic value axis combination not supported.");if(this.vT&&this.vT(),"groups"===t||"stacks"===t){const t=h.map((t=>(t=>{let i=!1;const s=new Array;return t.forEach((e=>{const h=s=>{i||(i=!0,t.forEach((t=>e!==t?t.setHighlight(s.highlight):void 0)),i=!1)};e.addEventListener("highlightchange",h),s.push((()=>e.removeEventListener("highlightchange",h)))})),t.forEach((i=>{const e=()=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)};i.addEventListener("dispose",e),s.push((()=>i.removeEventListener("dispose",e)))})),()=>{s.forEach((t=>t()))}})(this._y.filter((i=>i.subCategory===t)))));this.vT=()=>t.forEach((t=>t()))}this.gT(this._y),this.jk.clear(),this.Zk.clear(),this.Kk=!0,this.St.Ls()}setCategoryLabels(t){const i="function"==typeof t?this.Jk?t(this.Jk):this.Jk:t;return this.Jk=i?{...this._t.barChartCategoryLabels,...i}:void 0,this.jk.clear(),this.St.Ls(),this.hT=!0,this}getCategoryLabels(){return this.Jk}setValueLabels(t){var i;const s="function"==typeof t?this.Gk?t(this.Gk):this.Gk:t,e=(null==s?void 0:s.position)||(null===(i=this.Gk)||void 0===i?void 0:i.position);return s&&e?"after-bar"===e?this.Gk={...this._t.barChartValueLabelsAfterBars,...s}:"inside-bar"!==e&&"inside-bar-start"!==e&&"inside-bar-centered"!==e&&"inside-bar-end"!==e||(this.Gk={...this._t.barChartValueLabelsInsideBars,...s}):this.Gk=void 0,this.Zk.clear(),this.St.Ls(),this.hT=!0,this}getValueLabels(){return this.Gk}setLabelFittingEnabled(t){return this.tT=t,this.St.Ls(),this}getLabelFittingEnabled(){return this.tT}setLabelFittingMargins(t){return this.rT="object"==typeof t?t:"number"==typeof t?{left:t,right:t,top:t,bottom:t}:us,this.hT=!0,this.St.Ls(),this}getLabelFittingMargins(){return this.rT}getBar(t,i){if(("groups"===this.qk||"stacks"===this.qk)&&void 0===i)throw new Error("LightningChart JS BarChart.getBar() | `subCategory` parameter is required for grouped and stacked bar charts!");const s=this._y.find((s=>s.category===t&&(void 0===i||i===s.subCategory)));if(!s)throw new Error(`BarChart.getBar() no such bar: "${t}" ${i?`"${i}"`:""}`);return s}getBars(){return this._y}setSorting(t){this.Qk=t;const i=this._y.slice();return this._y.length=0,this._y.push(...ss(this.nT.map((t=>i.find((i=>i.category===t.category&&(void 0===t.subCategory||t.subCategory===i.subCategory))))))),this.gT(this._y),this.St.Ls(),this.Kk=!0,this}getSorting(){return this.Qk}setAnimationCategoryPosition(t,i=1){return this.sT=t?{speed:i}:void 0,this.St.Ls(),this}setAnimationValues(t,i=1){return this.mg=t?{speed:i}:void 0,this.St.Ls(),this}translateCoordinate(t,i,s){if(s&&ke(t)&&Ce(i))return super.translateCoordinate(t,i,s);const e=i;let h;if(_e(t))h=this.St.pa(t);else if(ke(t)){const i=ot(t,this.xf,this.St.ot);h={engineX:i.x,engineY:i.y}}else{if(!uA(t))throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Input coordinate system not recognized.");{const i=ot(this.Hs.toPoint(t.iCategory,t.value),this.zk,this.St.ot);h={engineX:i.x,engineY:i.y}}}if(we(e))return this.St.ma(h);if("barChart"===e){const t=ot({x:h.engineX,y:h.engineY},this.St.ot,this.zk);return{iCategory:this.Hs.getWidth(t),value:this.Hs.getHeight(t)}}if(Ce(e))return ot({x:h.engineX,y:h.engineY},this.St.ot,this.xf);throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Target coordinate system not recognized.")}Gd(){if("columns"===this.qk)return this._y;const t=is(ss(this._y.map((t=>t.subCategory))));return ss(t.map((t=>{const i=this._y.filter((i=>i.subCategory===t)),s=i[0];if(s)return{attach(e,h){return hs(e,i,{toggleVisibilityOnClick:h,label:t,style:s.getFillStyle()}),this},Gs:()=>{}}})))}Le(t){var i,s,e;super.Le(t);const h=this.dT.yv(),r=this.fT.yv(),n=this._y.filter((t=>t.getVisible()&&t.Xk)),o=is(n.map((t=>t.category))),a=is(ss(n.map((t=>t.subCategory)))),l=5e-4*t*((null===(i=this.sT)||void 0===i?void 0:i.speed)||0),c=.003*t*((null===(s=this.sT)||void 0===s?void 0:s.speed)||0),u=this.valueAxis.ot,d=u instanceof pe?(t,i)=>{var s;return Be(t,i,u,(null===(s=this.mg)||void 0===s?void 0:s.speed)||0)}:(t,i)=>{var s;return De(t,i,u,(null===(s=this.mg)||void 0===s?void 0:s.speed)||0)};let f;const A=null!==(e="positive"===this.Nk&&this.Ok?Math.min(this.Ok.min,this.valueAxis.getInterval().start,this.valueAxis.getInterval().end)-(this.Ok.max-this.Ok.min):"negative"===this.Nk&&this.Ok?Math.max(this.Ok.max,this.valueAxis.getInterval().start,this.valueAxis.getInterval().end)+(this.Ok.max-this.Ok.min):void 0)&&void 0!==e?e:0;"columns"===this.qk?f=n.map((t=>({bar:t,position:{category:o.indexOf(t.category),valueStart:this.Uk?1e-6:A,valueEnd:t.value}}))):"groups"===this.qk?f=n.map((t=>{const i=o.indexOf(t.category),s=a.indexOf(t.subCategory),e=1/(a.length+2*(a.length+1)*this.eT),h=this.eT*e;return{bar:t,position:{category:i+(s-(a.length-1)/2)*(e+h),valueStart:this.Uk?1e-6:A,valueEnd:t.value}}})):(f=[],o.forEach((t=>{const i=n.filter((i=>i.category===t));let s=this.Uk?1e-6:0;i.forEach((i=>{f.push({bar:i,position:{category:o.indexOf(t),valueStart:s,valueEnd:s+i.value}}),s+=i.value}))}))),f.forEach((t=>{const{bar:i,position:s}=t;let e,h,r=this.iT.get(i);void 0===r&&(r=s);const n=s.valueStart;if(this.sT&&r.category!==s.category){const t=Math.sign(s.category-r.category);e=r.category+l*t+c*(s.category-r.category),t!==Math.sign(s.category-e)&&(e=s.category)}else e=s.category;if(this.mg&&r.valueEnd!==s.valueEnd){const t=Math.sign(s.valueEnd-r.valueEnd);h=d(r.valueEnd,s.valueEnd),t!==Math.sign(s.valueEnd-h)&&(h=s.valueEnd)}else h=s.valueEnd;this.iT.set(i,{category:e,valueStart:n,valueEnd:h}),e===s.category&&h===s.valueEnd||this.St.Ls(!0),e===r.category&&h===r.valueEnd||(this.Kk=!0)})),Ya.LA(this.Sh,this._A);const g=n.length>0;this.categoryAxis.Er(),this.valueAxis.Er();const{labelMarginBeforeCategoryAxisPixels:v,labels:y}=g?this.yT(o,a,n,h,r):{labelMarginBeforeCategoryAxisPixels:0,labels:[]},p=this.categoryAxis.hr({physicalAxisSize:this.categoryAxis.ot.Si(),Ef:v}),m=this.valueAxis.hr({plotLines:r,physicalAxisSize:this.valueAxis.ot.Si(),oppositeAxisSize:this.Hs.getWidth(this.zk).Si()}),S=Ya.PA(this.Sh,this._A);this.zk.Ki([this.oi.bottom+this.nn.bottom+("vertical"===this.Hs.cT?p.Pd:0),this.oi.top+this.nn.top+S+("horizontal"===this.Hs.cT?m.Pd:0)]),this.zk.Ji([this.oi.left+this.nn.left+this.Hs.getHeight({x:p.Pd,y:m.Pd}),this.oi.right+this.nn.right]),this.aT.dm({x:this.zk.x.pi(),y:this.zk.y.pi(),width:this.zk.x.Si(),height:this.zk.y.Si()}),this.iA&&this.iA();const b={x:Math.min(this.zk.x.getInnerStart(),this.zk.x.getInnerEnd()),y:Math.min(this.zk.y.getInnerStart(),this.zk.y.getInnerEnd())},x=Math.max(this.zk.x.getInnerStart(),this.zk.x.getInnerEnd()),M=Math.max(this.zk.y.getInnerStart(),this.zk.y.getInnerEnd()),w={x:x-b.x,y:M-b.y};if(this.Iy.Be(b),this.Iy.Z(w),this.Py.Be(b),this.Py.Z(w),this.categoryAxis.Le(p),this.valueAxis.Le(m),super.xA(),this.Ug.Le(!1,this._y,void 0),(this.Kk||this.hT)&&this.tT){const t=y.map((t=>{const i=zs(t.setVisible(!0).hr().Kg());if(0!==this.rT.bottom||0!==this.rT.left||0!==this.rT.right||0!==this.rT.top){const s=Math.sign(this.zk.x.U-this.zk.x.$),e=Math.sign(this.zk.y.U-this.zk.y.$),h=e>0?i.min.y:i.max.y,r=e>0?i.max.y:i.min.y,n=s>0?i.min.x:i.max.x,o=s>0?i.max.x:i.min.x,a=t.ot.Pi({x:n,y:h},{x:-this.rT.left,y:-this.rT.bottom}),l=t.ot.Pi({x:o,y:r},{x:this.rT.right,y:this.rT.top});return{min:{x:Math.min(a.x,l.x),y:Math.min(a.y,l.y)},max:{x:Math.max(a.x,l.x),y:Math.max(a.y,l.y)}}}return i}));for(let i=0;i<y.length;i+=1){if(!y[i].getVisible())continue;const s=t[i];let e;do{e=y.findIndex(((e,h)=>h!==i&&y[h].getVisible()&&Cs(s,t[h]))),e>=0&&y[e].setVisible(!1)}while(e>=0)}}if(this.Kk){const t=this.lx.yv(),i="groups"===this.qk?1/(a.length+2*(a.length+1)*this.eT):1-2*this.eT;n.forEach((s=>{const e=this.iT.get(s);if(void 0===e)return;const h=e.category-.5*i,r=e.category+.5*i,n=this.Hs.toPoint(h,e.valueStart),o=this.Hs.toPoint(r,e.valueEnd);let l;this.oT&&(l={extent:this.oT,c_x1_y2:"vertical"===this.Hs.cT,c_x2_y2:"vertical"===this.Hs.cT||"horizontal"===this.Hs.cT,c_x1_y1:!1,c_x2_y1:"horizontal"===this.Hs.cT},"stacks"===this.qk&&s.subCategory&&a.indexOf(s.subCategory)!==a.length-1&&(l=void 0)),t.add({Mt:s.Mt,bar:s,x1:n.x,y1:n.y,x2:o.x,y2:o.y,rounding:l},{fillStyle:s.Ce,strokeStyle:s.ke})})),t.finishPlot()}h.finishPlot(),r.finishPlot(),this.Kk=!1,this.hT=!1}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationCategoryPosition(t),this.setAnimationValues(t),this.valueAxis.setAnimationsEnabled(t),this.categoryAxis.setAnimationsEnabled(t),this}dispose(){return this.lT.G(),this.aT.G(),this.Ug.G(),super.dispose()}gT(t){const i=this.Qk;i&&t.sort(((s,e)=>i({category:s.category,value:t.reduce(((t,i)=>t+(i.category===s.category&&i.value||0)),0)},{category:e.category,value:t.reduce(((t,i)=>t+(i.category===e.category&&i.value||0)),0)})))}yT(t,i,s,e,h){let r=0;const n=this.Jk,o=this.Gk,a=this.valueAxis.getInterval(),l=[];if(n&&n.labelFillStyle!==V){const i=n.tickLength+n.labelMargin,o=this.Hs.toPoint(0,1),c={bd:t.map(((t,e)=>{const h=s.reduce(((i,s)=>s.category!==t?i:i+s.value),0),r=n.formatter(t,h);if(!r)return;const l=e;return void 0!==l?{text:r,position:this.Hs.toPoint(l,this.valueAxis.ot.Pi(a.start,-i)),alignment:o,rotation:n.labelRotation,sizePixels:this.pT(t,h)}:void 0})),pn:n.labelFont,ot:this.zk};c.bd.forEach((t=>{t&&l.push(e.add().Sr(t.text).Be(t.position).ul(t.alignment).Wh(t.rotation).Ie(n.labelFillStyle).Xh(n.labelFont).mr(n.labelShadow))})),n.tickStyle!==Wt&&0!==n.tickLength&&c.bd.forEach((t=>{if(!t)return;const i=this.Hs.getWidth(t.position);h.add({positions:[this.Hs.toPoint(i,this.valueAxis.ot.getInnerStart()),this.Hs.toPoint(i,this.valueAxis.ot.Pi(a.start,-n.tickLength))]},{lineStyle:n.tickStyle})})),r=c.bd.reduce(((t,i)=>i?Math.max(t,this.Hs.getHeight(i.sizePixels)):t),0)+n.tickLength+n.labelMargin}if(o&&o.labelFillStyle!==V){const h={bd:[],pn:o.labelFont,ot:this.zk};"stacks"===this.qk&&o.displayStackedSum&&h.bd.push(...t.map(((t,e)=>{const h=s.reduce(((i,s)=>i+(s.category===t?s.value:0)),0),r=o.formatter({chart:this,bar:void 0,category:t,value:h,subCategory:void 0});if(!r)return;const n=s.filter((i=>i.category===t)).sort(((t,s)=>{var e,h;return i.indexOf(null!==(e=t.subCategory)&&void 0!==e?e:"")-i.indexOf(null!==(h=s.subCategory)&&void 0!==h?h:"")})),a=n[n.length-1],l=this.iT.get(a);return void 0!==l?{text:r,position:this.Hs.toPoint(l.category,this.valueAxis.ot.Pi(l.valueEnd,o.labelMargin*Math.sign(l.valueEnd))),alignment:this.Hs.toPoint(0,-1*Math.sign(l.valueEnd)),rotation:o.labelRotation,sizePixels:this.St.kh.qe(r,o.labelFont,o.labelRotation)}:void 0}))),"after-bar"!==o.position||"stacks"===this.qk&&!o.displayStackedIndividuals?"inside-bar"!==o.position&&"inside-bar-start"!==o.position&&"inside-bar-centered"!==o.position&&"inside-bar-end"!==o.position||h.bd.push(...s.map(((t,i)=>{const s=o.formatter({chart:this,bar:t,category:t.category,value:t.value,subCategory:t.subCategory});if(!s)return;const e=this.iT.get(t);if(void 0===e)return;const h="bipolar"===this.Nk?Math.sign(e.valueEnd):"negative"===this.Nk?-1:1,r=this.Hs.toPoint(0,"inside-bar"===o.position||"inside-bar-end"===o.position?1*h:"inside-bar-centered"===o.position?0:-1*h);return{text:s,position:this.Hs.toPoint(e.category,"inside-bar"===o.position||"inside-bar-end"===o.position?this.valueAxis.ot.Pi(e.valueEnd,-o.labelMargin*h):"inside-bar-centered"===o.position?(e.valueStart+e.valueEnd)/2:this.valueAxis.ot.Pi(e.valueStart,o.labelMargin*h)),alignment:r,rotation:o.labelRotation,sizePixels:this.mT(t)}}))):h.bd.push(...s.map(((t,i)=>{const s=o.formatter({chart:this,bar:t,category:t.category,value:t.value,subCategory:t.subCategory});if(!s)return;const e=this.iT.get(t);return void 0!==e?{text:s,position:this.Hs.toPoint(e.category,this.valueAxis.ot.Pi(e.valueEnd,o.labelMargin*Math.sign(e.valueEnd))),alignment:this.Hs.toPoint(0,-1*Math.sign(e.valueEnd)),rotation:o.labelRotation,sizePixels:this.mT(t)}:void 0}))),h&&h.bd.forEach((t=>{t&&l.push(e.add().Sr(t.text).Be(t.position).ul(t.alignment).Wh(t.rotation).Ie(o.labelFillStyle).Xh(o.labelFont).mr(o.labelShadow).setPointerEvents(!1))}))}return{labelMarginBeforeCategoryAxisPixels:r,labels:l}}pT(t,i){if(!this.Jk||this.Jk.labelFillStyle===V)return{x:0,y:0};const s=this.jk.get(t);if(s)return s;const e=this.Jk.formatter(t,i),h=this.St.kh.qe(e,this.Jk.labelFont,this.Jk.labelRotation);return h.isEstimate?this.St.Ls(!0):this.jk.set(t,h),h}mT(t){if(!this.Gk||this.Gk.labelFillStyle===V)return{x:0,y:0};const i=this.Zk.get(t);if(i)return i;const s=this.St.kh.qe(this.Gk.formatter({chart:this,bar:t,category:t.category,value:t.value,subCategory:t.subCategory}),this.Gk.labelFont,this.Gk.labelRotation);return s.isEstimate?this.St.Ls(!0):this.Zk.set(t,s),s}$k(){return this._y.reduce(((t,i)=>{const s=this.mT(i);return{x:Math.max(t.x,s.x),y:Math.max(t.y,s.y)}}),{x:0,y:0})}Wk(){this.Kk=!0,this.St.Ls()}H(){return super.H(),this.zk.H(),this}X(){return super.X(),this.zk.X(),this}getMinimumSize(){return{x:200,y:200}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const fA={Horizontal:"horizontal",Vertical:"vertical"},AA={Disabled:void 0,None:void 0,Ascending:(t,i)=>t.value-i.value,Descending:(t,i)=>i.value-t.value,Alphabetical:(t,i)=>t.category.localeCompare(i.category)},gA={...Zo,cT:"vertical",Yk:-1,Hk:1},vA={...Qo,cT:"horizontal",Yk:1,Hk:-1},yA=(t,i,s)=>{const e=[[{component:i.bar,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}]],h=t.valueAxis.getTitle();return h&&e.push([h]),i.subCategory?e.push([i.subCategory,"",{text:Pe(t.valueAxis.formatValue(i.bar.getValue()),t.valueAxis),font:{weight:"bold"}}]):e.push({text:Pe(t.valueAxis.formatValue(i.bar.getValue()),t.valueAxis),font:{weight:"bold"}}),e},pA=(t,i)=>Math.abs(t)+Math.abs(i);function mA(t,i){const s=t.reduce(pA,0),e=(h=t,Math.max(...h.map((t=>t))));var h;const r=(t=>Math.min(...t.map((t=>t))))(t);return Math.max(i**2*e/s**2,s**2/(i**2*r))}const SA=({height:t,width:i})=>t>i?{value:i,vertical:!1}:{value:t,vertical:!0},bA=({data:t,dimensions:i})=>{const{x:s,y:e,width:h,height:r}=i,n=t.map((t=>t.value)).reduce(pA,0),o=t.map((t=>t.animatedValue)).reduce(pA,0),a=t.map((t=>t.animatedValue*r*h/o)),l=a.reduce(((t,i)=>t+i),0),c=a.map((t=>t/l*100)),u=a.filter(((t,i)=>c[i])),d={children:[],id:0,parentID:-1,name:"Main Rectangle",value:n,animatedValue:o,x:s,y:e,width:h,height:r,nodeIndex:-1,userNode:{name:"Main Rectangle",value:n}};if(1===t.length){const s={...t[0],x:i.x,y:i.y,width:i.width,height:i.height,userNode:{...t[0].userNode,value:t[0].value}};d.children.push(s)}else MA(u,SA(d).value,t,d);return d.children},xA=(t,i,s,e,h)=>{const r=t.reduce(pA,0)/i;t.forEach(((t,i)=>{const n=Math.abs(t)/r,{x:o,y:a,children:l}=h,c=e[l.length],u={...c,x:o,y:a,width:s?r:n,height:s?n:r,userNode:{...c.userNode,value:c.value}};s?h.y-=n:h.x+=n,l.push(u)})),s?(h.x+=r,h.y+=i,h.width-=r):(h.x-=i,h.y-=r,h.height-=r)},MA=(t,i,s,e)=>{const h=[{children:t,width:i,row:[]}];for(;h.length>0;){const t=h.pop();if(!t)continue;const{children:i,width:r,row:n}=t;let o=0;const a=[...n];for(;o<i.length;){const t=[...a,i[o]],n=mA(a,r),l=mA(t,r);if(!(0===a.length||n>l)){xA(a,r,SA(e).vertical,s,e),h.push({children:i.slice(o),width:SA(e).value,row:[]});break}a.push(i[o]),o+=1}o===i.length&&xA(a,r,SA(e).vertical,s,e)}};class wA extends Ua{constructor(t,i,s,e,h,r,n){if(super(t,i,s,i.wA("treeMapChart bg",0),e,i.St._t.treeMapChartBackgroundFillStyle||i.St._t.chartXYSeriesBackgroundFillStyle,i.St._t.treeMapChartBackgroundStrokeStyle||i.St._t.chartXYBackgroundStrokeStyle,i.St._t.treeMapChartTitleFont||i.St._t.chartXYTitleFont,i.St._t.treeMapChartTitleFillStyle||i.St._t.chartXYTitleFillStyle,i.St._t.treeMapChartTitleShadow||i.St._t.chartXYTitleShadow,n),this.ST=new Map,this.bT=[],this.xT={},this.MT=d([]),this.mg={speed:1},this.wT=bs,this._T="Go Back",this.CT=[],this.kT=this._t.treeMapChartPathLabelFillStyle||this._t.uiTextFillStyle,this.TT=this._t.treeMapChartPathLabelFont||this._t.uiTextFont,this.FT=this._t.treeMapChartLabelHeaderFillStyle||this._t.uiTextFillStyle,this.IT=this._t.treeMapChartLabelHeaderFont||this._t.uiTextFont,this.PT=this._t.treeMapChartLabelFillStyle||this._t.uiTextFillStyle,this.LT=this._t.treeMapChartLabelFont||this._t.uiTextFont,this.Xm=!0,this.BT=!1,this.DT=this._t.treeMapChartParentColor||T,this.ET=this._t.treeMapChartNodeStrokeStyle||this._t.uiBackgroundStrokeStyle,this.nx=this._t.treeMapChartCornerRadius,this.jm=()=>{this.St.Ls(),this.BT=!0},this.RT=(t,i)=>{var s;const{collectionMember:e}=i,h=this.zT(e);h&&(this.cS=this.VT(h,t),this.Xm&&this.St.xs.Rs(e,!0),(null===(s=this.getUserInteractions().drillDown)||void 0===s?void 0:s.click)&&this.engine.setMouseStyle(tr.Point),this.St.Ls())},this.OT=(t,i)=>{const{collectionMember:s}=i;this.zT(s)&&(this.cS=void 0,this.Xm&&this.St.xs.Rs(s,!1),this.engine.setMouseStyle(tr.Default),this.St.Ls())},this.NT=(t,i)=>{var s;const{collectionMember:e}=i,h=this.zT(e);h&&(this.cS=this.VT(h,t),this.Xm&&this.St.xs.Rs(e,!0),(null===(s=this.getUserInteractions().drillDown)||void 0===s?void 0:s.click)&&this.engine.setMouseStyle(tr.Point),this.St.Ls())},this.GT=(t,i)=>{var s;if(t.defaultPrevented)return;const{collectionMember:e}=i,h=this.zT(e);if(h){if(null===(s=this.getUserInteractions().drillDown)||void 0===s?void 0:s.click){const i=(null==h?void 0:h.children.length)?h:h.parentID?this.xT[h.parentID]:void 0;i&&(this.MT._([i]),this.cS=void 0,this.D.R("viewchange",{nodes:this.MT.C().map((t=>t.userNode))}),this.BT=!0),t&&Bi(t)}this.St.Ls()}},this.$T=t=>{const i=this.xT[this.CT[t].id]?[this.xT[this.CT[t].id]]:this.bT;this.MT._(i),this.D.R("viewchange",{nodes:i.map((t=>t.userNode))}),this.BT=!0,this.St.Ls()},this.nodes=new zt,this.D=new zt,this._t.treeMapChartNodeColors)this.UT=this._t.treeMapChartNodeColors;else{const t=this._t.pointSeriesFillStyle,i=t=>U(t)?t.getColor():T;this.UT="function"==typeof t?new Array(5).fill(0).map(((s,e)=>i(t(e)))):[i(t)]}this.St.Zo(Gr.eo),this.Og=i.bm("TreeMapChart plotting",0),this.Gg=i.bm("TreeMap UI plotting",1),this.addEventListener("resize",this.jm),this.Sh.Sr("TreeMap Chart");const o=i.$g(),a=gi(r?r.cursorBuilder:void 0,dl);this.Ug=Qa(this,o,a.ag(o,this.uiScale,this.uiScale,ui,this._t),void 0,"show-pointed",_A,(()=>0)),this.YT=this.vs.kf(),this.MA(h,this.uiScale),this.HT=this.Og.Vu(this.xf).Ie(new Y).Fe(this.ET),this.XT=this.St.xs.ao(this,{animationEnabled:!1!==(null==r?void 0:r.animationsEnabled)}),this.WT=new El((()=>this.Gg.Yr(this.xf).setPointerEvents(!1))),this.jT=new El((()=>this.Gg.Yr(this.uiScale))),this.HT.setPointerEvents(!0),this.nodes.Gt(this.HT,(t=>{const i=this.zT(t);if(i)return i.userNode})),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled)),this.HT.addEventListener("pointerenter",this.RT),this.HT.addEventListener("pointerleave",this.OT),this.HT.addEventListener("click",this.GT),this.HT.addEventListener("pointermove",this.NT)}setCornerRadius(t){return this.nx=t,this.BT=!0,this.St.Ls(),this}getCornerRadius(){return this.nx}setData(t){t=Array.isArray(t)?t.slice():[t];const{ZT:i}=(()=>{let t=0;return{ZT:i=>{var s;const e=i.map(((t,i)=>({node:t,parent:null}))),h=[];for(;e.length>0;){const i=e.pop();if(!i)continue;const{node:r,parent:n}=i;t+=1;const o={id:t,parentID:null==n?void 0:n.id,name:r.name,value:Number(r.value)||0,animatedValue:Number(r.value)||0,children:[],nodeIndex:n?n.nodeIndex:-1,userNode:r};n?n.children.push(o):h.push(o),null===(s=r.children)||void 0===s||s.forEach((t=>{e.push({node:t,parent:o})}))}const r=t=>{t.children.forEach(r),t.children.length>0&&(t.value+=t.children.reduce(((t,i)=>t+i.value),0),t.animatedValue+=t.children.reduce(((t,i)=>t+i.animatedValue),0),t.children.sort(((t,i)=>i.animatedValue-t.animatedValue)))};h.forEach(r);const n=1===i.length?h[0].children:h;return n.sort(((t,i)=>i.animatedValue-t.animatedValue)),n.forEach(((t,i)=>{t.nodeIndex=i;const s=i=>{i.children.forEach((i=>{i.nodeIndex=t.nodeIndex,s(i)}))};s(t)})),h}}})(),s=i(t);return s.forEach((t=>{const i=this.xT[t.id];i&&this.QT(t,i)})),this.cS=void 0,this.MT._(s),this.bT=s,this.xT=this.JT(s),this.BT=!0,this.St.Ls(),this}setAnimationValues(t,i=1){return this.mg=t?{speed:i}:void 0,this.St.Ls(),this}setInitPathButtonText(t){return this._T=t,this.BT=!0,this.St.Ls(),this}setDisplayedLevelsCount(t){return this.wT=t,this.BT=!0,this.St.Ls(),this}setDrillDownNode(t){var i,s;if(this.cS=void 0,void 0===t)this.MT._(this.bT);else{const e=[...this.bT];for(;e.length>0;){const h=e.pop();if(h){if(void 0!==h.value&&h.userNode===t||h.parentID&&Array.isArray(t)&&(null===(s=null===(i=this.xT[h.parentID])||void 0===i?void 0:i.userNode)||void 0===s?void 0:s.children)===t){const t=h.children.length?h:h.parentID?this.xT[h.parentID]:this.bT[0];this.MT._([t]);break}if(h.children)for(let t=h.children.length-1;t>=0;t-=1)e.push(h.children[t])}}}return this.D.R("viewchange",{nodes:this.MT.C().map((t=>t.userNode))}),this.BT=!0,this.St.Ls(),this}setNodeColoring(t){return t instanceof Array?(this.HT.Ie(new Y),this.UT=t):this.HT.Ie(t),this.BT=!0,this.St.Ls(),this}setParentNodeColor(t){return this.DT=t,this.BT=!0,this.St.Ls(),this}setPathLabelFillStyle(t){return this.kT="function"==typeof t?t(this.kT):t,this.BT=!0,this.St.Ls(),this}getPathLabelFillStyle(){return this.kT}setPathLabelFont(t){return rh(t)?this.TT=t:this.TT=t(this.TT),this.BT=!0,this.St.Ls(),this}getPathLabelFont(){return this.TT}setHeaderFont(t){return rh(t)?this.IT=t:this.IT=t(this.IT),this.BT=!0,this.St.Ls(),this}getHeaderFont(){return this.IT}setHeaderFillStyle(t){return this.FT="function"==typeof t?t(this.FT):t,this.BT=!0,this.St.Ls(),this}getHeaderFillStyle(){return this.FT}setLabelFont(t){return rh(t)?this.LT=t:this.LT=t(this.LT),this.BT=!0,this.St.Ls(),this}getLabelFont(){return this.LT}setLabelFillStyle(t){return this.PT="function"==typeof t?t(this.PT):t,this.BT=!0,this.St.Ls(),this}getLabelFillStyle(){return this.PT}setNodeBorderStyle(t){return this.HT.Fe(t),this.BT=!0,this.St.Ls(),this}getNodeBorderStyle(){return this.HT.da()}setNodeEffect(t){return this.YT.Ps(t),this.St.Ls(),this}getNodeEffect(){return this.YT.Bs()}setCursor(t){return this.Ug.setCursor(t),this}getCursor(){return this.Ug.getCursor()}setCursorMode(t){return this.Ug.setCursorMode(t),this}getCursorMode(){return this.Ug.getCursorMode()}setCustomCursor(t){return this.Ug.setCustomCursor(t),this}setCursorFormatting(t){return this.Ug.setCursorFormatting(t),this}getCursorFormatting(){return this.Ug.getCursorFormatting()}addCursor(t=dl){const i=this.dA(),s=t.ag(i,this.uiScale,this.uiScale,this.nA(i),this._t);return this.SA(s),s}setAnimationHighlight(t){return this.XT.uo(t),this}getAnimationHighlight(){return this.XT.do()}setHighlightOnHover(t){return this.Xm=t,this}getHighlightOnHover(){return this.Xm}VT(t,i){const s=this.St.pa(i);return{cursorPosition:{pointMarker:{x:s.engineX,y:s.engineY},pointMarkerScale:this.St.ot,resultTable:{x:s.engineX,y:s.engineY},resultTableScale:this.St.ot},name:t.name,value:t.value,node:t.userNode}}getMinimumSize(){}Gd(){return[this]}Le(t){super.Le(t),super.xA(),Ya.LA(this.Sh,this._A);const i=Ya.PA(this.Sh,this._A);if(this.BT&&this.MT.C().length){this.HT.ti(),this.ST.clear(),this.XT.co(),this.ah&&this.KT(t);const s=bA({data:this.MT.C(),dimensions:{x:0+this.nn.left,y:this.xf.y.getInnerEnd()-i-this.nn.top,width:this.xf.x.getInnerEnd()-this.nn.right-this.nn.left,height:this.xf.y.getInnerEnd()-i-this.nn.top-this.nn.bottom}}),e=this.WT.yv();this.qT(s,e),e.finishPlot(),this.tF(),this.bT!==this.MT.C()&&this.bT.length>1&&this.CT.unshift({name:this._T,id:0});let h=0;const r=this.jT.yv(),n=this.TT;this.CT.forEach(((t,i)=>{const s=r.add(),e=this.St.kh.qe(t.name,n,0);let o;s.Sr(`← ${t.name}`).Xh(n).Be({x:0,y:100}).ul({x:-1,y:1}).$r({left:this.nn.left+h,top:this.nn.top,right:0,bottom:0}).Ie(this.kT),s.addEventListener("click",(()=>this.$T(i))),s.addEventListener("pointerenter",(()=>{o=this.engine.setMouseStyle(tr.Point,o)})),s.addEventListener("pointerleave",(()=>{this.engine.restoreMouseStyle(o)})),h+=e.x+25})),r.finishPlot(),this.MT.C().every((t=>t.value===t.animatedValue))?this.BT=!1:this.St.Ls(!0)}return this.Ug.Le(!1,[],void 0,{explicitTarget:this.cS}),this}dispose(){return this.Gg.G(),this.Og.G(),this.Ug.G(),this.HT.dispose(),this.ST.clear(),this.WT.mv(),this.jT.mv(),super.dispose()}H(){return super.H(),this}X(){return super.X(),this}Gs(){return ji(this.HT.$h(),this.HT.Tt())}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),Wi(t,this._t,s,{}),this}qT(t,i,s=!1,e=0){const h=t.map(((t,i)=>({node:t,isChild:s,visibleDepth:e}))),r=this.nx?{extent:this.nx,c_x1_y1:!0,c_x1_y2:!0,c_x2_y1:!0,c_x2_y2:!0}:void 0;for(;h.length>0;){const t=h.pop();if(!t)continue;const{node:s,visibleDepth:e,opacity:n}=t,{x:o,y:a,height:l,width:c,children:u,animatedValue:d,name:f,nodeIndex:A}=s,g=this.UT,v=0===e&&1===this.MT.C().length?this.DT:g[A%g.length],y=this.HT.lo().$u(o,a,o+c,a-l).iF(v.setA(v.getA()*((null!=n?n:255)/255))).lS(d).Gu(r);this.ST.set(y,s),this.XT.lo(y,(t=>y.Bt(t)));const p=o+5,m=a+25+5,S=Math.max(l-25-5,0),b=Math.max(c-5-5,0);if(u&&u.length&&e<this.wT&&b>15&&S>15){const t=bA({data:u,dimensions:{x:b>0?p:o,y:S>0?a-25:m,width:b,height:S}});for(let i=0;i<t.length;i+=1){const r=(255-(u.length>7?50:150))/(u.length-1),o=1===s.id&&1===this.bT.length||this.bT===this.MT.C()?255:n?n/(e+1):255-i*r;h.push({node:t[i],isChild:!0,visibleDepth:e+1,opacity:o})}}const x=0===e&&1===this.MT.C().length?this.FT:this.PT,M=0===e?this.IT:this.LT,w=this.sF(f,c-25,M),_=this.St.kh.qe(w,M,0),C=i.add();c-25>_.x&&l>25?C.Sr(w).Be({x:o+5,y:a-2.5}).ul({x:-1,y:1}).Ie(x).Xh(M):C.Sr("")}}JT(t){const i={},s=[...t];for(;s.length>0;){const t=s.pop();t&&(i[t.id]=t,t.children&&s.push(...t.children))}return i}zT(t){if(!this.BT&&t)return this.ST.get(t)}tF(){this.CT=[];const t=this.MT.C()[0].id;let i=this.xT[t].parentID;for(;i;)this.CT.push({name:this.xT[i].name,id:i}),i=this.xT[i].parentID;return this.CT.reverse()}sF(t,i,s){let e=this.St.kh.qe(t,s,0).x;if(e<=i)return t;const h=t.split(" ");let r=t;for(;h.length>1&&e>i;)h.pop(),r=`${h.join(" ")}...`,e=this.St.kh.qe(r,s,0).x;if(e>i)for(r=`${h[0]}...`,e=this.St.kh.qe(r,s,0).x;r.length>3&&e>i;)r=`${r.substring(0,r.length-4)}...`,e=this.St.kh.qe(r,s,0).x;return r.length<=3&&e>i?"":r}KT(t){var i;const s=[...this.bT];for(;s.length>0;){const e=s.pop();if(!e)continue;const h=e.value-e.animatedValue;if(Math.abs(h)<.0015*e.value||void 0===this.mg)e.animatedValue=e.value;else{const s=h/255*((null===(i=this.mg)||void 0===i?void 0:i.speed)||1)*t;e.animatedValue+=s,(h>0&&e.animatedValue>e.value||h<0&&e.animatedValue<e.value)&&(e.animatedValue=e.value)}e.children&&e.children.length>0&&s.push(...e.children)}}QT(t,i){const s=[{current:t,previous:i}];for(;s.length>0;){const t=s.pop();if(!t)continue;const{current:i,previous:e}=t;i.animatedValue=this.ah?e.animatedValue:i.value,e.nodeIndex<0?i.nodeIndex=0:i.nodeIndex=e.nodeIndex;const h=new Map(e.children.map((t=>[t.id,t])));i.children.forEach(((t,i)=>{const r=h.get(t.id);s.push({current:t,previous:r||e})}))}}setUserInteractions(t){return this.ze=void 0===t?{drillDown:{click:!1}}:t,this}getUserInteractions(){return hi({drillDown:{click:!0}},this.ze)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const _A=(t,i,s)=>[[{text:i.name,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:i.value.toString(),font:{weight:"bold"}}]];class CA extends Ua{constructor(t,i,s,e,h,r,n){super(t,i,s,i.wA("gaugeChart bg",0),e,i.St._t.gaugeChartBackgroundFillStyle,i.St._t.gaugeChartBackgroundStrokeStyle,i.St._t.gaugeChartTitleFont,i.St._t.gaugeChartTitleFillStyle,i.St._t.gaugeChartTitleShadow,r),this.Mc=this._t.gaugeChartStartAngle,this.wc=this._t.gaugeChartEndAngle,this.eF={start:0,end:100},this.S=0,this.hF=[],this.rF=this._t.gaugeChartBarThickness,this.nF=this._t.gaugeChartValueIndicatorThickness,this.oF=this._t.gaugeChartNeedleLength,this.aF=this._t.gaugeChartNeedleThickness,this.lF=this._t.gaugeChartNeedleFillStyle,this.cF=this._t.gaugeChartNeedleStrokeStyle,this.Nu=this._t.gaugeChartRoundedEdges,this.uF=!0,this.dF=!0,this.fF=!0,this.AF=[],this.gF=[],this.vF=!0,this.yF=!0,this.dg=this.S,this.pF=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.mF=this._t.gaugeChartBarGradient,this.SF=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.bF=this._t.gaugeChartTickFont,this.xF=this._t.gaugeChartValueLabelFont,this.MF=this._t.gaugeChartValueLabelFillStyle,this.wF=this._t.gaugeChartUnitLabelFont,this._F=this._t.gaugeChartUnitLabelFillStyle,this.CF=this._t.gaugeChartTickFillStyle,this.kF=this._t.gaugeChartBarColor,this.TF=this._t.gaugeChartGlowColor,this.FF=this._t.gaugeChartGlowColor.getA(),this.IF=1,this.PF=1,this.LF=this._t.gaugeChartNeedleAlignment,this.BF=!1,this.DF=this._t.gaugeChartGapBetweenBarAndValueIndicators,this.EF=this._t.gaugeChartBarStrokeStyle,this.RF=!1,this.D=new zt,this.St.Zo(Gr.$n),this.Sh.Sr("Gauge Chart"),this.MA(h,this.xf),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled)),this.zF=this.kF,this.VF=this.TF,this.OF=m(0,0,0,0),this.NF=this.vs.kf(),this.GF=this.vs.kf().Ps(this._t.effectsText),this.$F=this.rA.Qc(this.xf).Fe(this.EF).setPointerEvents(!1),this.UF=this.rA.Yu(this.xf).Bc(0).$e(360).zc(0).Fe(Wt).setPointerEvents(!1),this.YF=this.CA.Ge(this.xf).Ne(this._t.gaugeChartNeedleStrokeStyle).setPointerEvents(!1),this.HF=this.CA.Ge(this.xf).Ne(new vh({thickness:this.aF,fillStyle:this.lF})).setPointerEvents(!1),this.XF=this.CA.Yr(this.xf).Xh(this.xF).Ie(this.MF).setPointerEvents(!1),this.Fd=this.CA.Yr(this.xf).Xh(this.wF).Ie(this._F).Sr("").setPointerEvents(!1),this.WF=this.rA.Yr(this.xf).Xh(this.bF).Ie(this.CF).setPointerEvents(!1),this.jF=this.rA.Yr(this.xf).Xh(this.bF).Ie(this.CF).setPointerEvents(!1),this.NF._s([this.$F]),this.GF._s([this.XF,this.Fd,this.WF,this.jF]),this.ZF(),this.addEventListener("resize",(()=>{this.BF=!0}))}ZF(){this.HF.Ne((t=>t.setThickness(this.aF))),this.YF.Ne((t=>t.setThickness(2*this.cF.getThickness()+this.aF)))}setAnimationsEnabled(t){return this.ah=t,this.yF=t,this.vF=t,this}setInterval(t,i){return this.eF={start:t,end:i},this.BF=!0,this.St.Ls(),this}getInterval(){return this.eF}setTickFillStyle(t){return this.CF="function"==typeof t?t(this.CF):t,this.gF.forEach((i=>{i.start.Ie(t),i.end.Ie(t)})),this.WF.Ie(t),this.jF.Ie(t),this.BF=!0,this.St.Ls(),this}getTickFillStyle(){return this.CF}setTickFont(t){return this.bF="function"==typeof t?t(this.bF):t,this.gF.forEach((i=>{i.start.Xh(t),i.end.Xh(t)})),this.WF.Xh(t),this.jF.Xh(t),this.BF=!0,this.St.Ls(),this}getTickFont(){return this.bF}setTickFormatter(t){return this.pF=t,this.BF=!0,this.St.Ls(),this}getTickFormatter(){return this.pF}setValueLabelFillStyle(t){return this.MF="function"==typeof t?t(this.MF):t,this.XF.Ie(t),this.BF=!0,this.St.Ls(),this}getValueLabelFillStyle(){return this.XF.$h()}setValueLabelFont(t){return this.xF="function"==typeof t?t(this.xF):t,this.XF.Xh(t),this.BF=!0,this.St.Ls(),this}getValueLabelFont(){return this.XF.Hh()}setValueFormatter(t){return this.SF="string"==typeof t?i=>t:t,this.BF=!0,this.St.Ls(),this}getValueLabel(){return this.XF.wr()||this.SF}setUnitLabelFillStyle(t){return this._F="function"==typeof t?t(this._F):t,this.Fd.Ie(t),this.BF=!0,this.St.Ls(),this}getUnitLabelFillStyle(){return this.Fd.$h()}setUnitLabelFont(t){return this.wF="function"==typeof t?t(this.wF):t,this.Fd.Xh(t),this.BF=!0,this.St.Ls(),this}getUnitLabelFont(){return this.Fd.Hh()}setUnitLabel(t){return this.Fd.Sr(t),this.BF=!0,this.St.Ls(),this}getUnitLabel(){return this.Fd.wr()}setNeedleFillStyle(t){return this.lF="function"==typeof t?t(this.lF):t,this.HF.Ne((i=>i.setFillStyle(t))),this.BF=!0,this.St.Ls(),this}getNeedleFillStyle(){return this.HF.In().getFillStyle()}setNeedleThickness(t){return this.aF=t,this.ZF(),this.BF=!0,this.St.Ls(),this}getNeedleThickness(){return this.aF}setNeedleStrokeStyle(t){return this.cF="function"==typeof t?t(this.cF):t,this.YF.Ne(t),this.ZF(),this.BF=!0,this.St.Ls(),this}getNeedleStrokeStyle(){return this.YF.In()}setNeedleLength(t){return this.oF=t,this.BF=!0,this.St.Ls(),this}getNeedleLength(){return this.oF}setBarColor(t){return this.kF=t,this.BF=!0,this.St.Ls(),this}getBarColor(){return this.zF}setBarGradient(t){return this.mF=t,this.BF=!0,this.St.Ls(),this}getBarGradient(){return this.mF}setBarStrokeStyle(t){return this.EF="function"==typeof t?t(this.EF):t,this.$F.Fe(t),this.BF=!0,this.St.Ls(),this}getBarStrokeStyle(){return this.$F.da()}setBarThickness(t){return this.rF=t,this.BF=!0,this.St.Ls(),this}getBarThickness(){return this.rF}setAngleInterval(t,i){return Math.abs(t-i)>360&&(i=t<i?t+360:t-360),this.Mc=t,this.wc=i,this.BF=!0,this.St.Ls(),this}getAngleInterval(){return{start:this.Mc,end:this.wc}}setValue(t){return this.RF&&this.St.Zo(Gr.qn),this.RF=!0,this.S=t,this.vF||(this.dg=this.S),this.BF=!0,this.St.Ls(),this}getValue(){return this.S}setValueAnimation(t,i=1){return this.vF=t,this.IF=Math.max(0,i),this.BF=!0,this.St.Ls(),this}setColorAnimation(t,i=1){return this.yF=t,this.PF=Math.max(0,i),this.BF=!0,this.St.Ls(),this}setRoundedEdges(t){return this.Nu=t,this.BF=!0,this.St.Ls(),this}getRoundedEdges(){return this.Nu}setValueIndicators(t){return this.hF=t,this.AF.forEach((t=>{t.dispose()})),this.AF.length=0,this.gF.forEach((t=>{t.start.dispose(),t.end.dispose()})),this.gF.length=0,this.hF.forEach((t=>{const i=this.rA.Qc(this.xf).Fe(Wt).Ie(new $({color:t.color})).setPointerEvents(!1);this.AF.push(i);const s=this.rA.Yr(this.xf).Xh(this.bF).Ie(this.CF).setPointerEvents(!1),e=this.rA.Yr(this.xf).Xh(this.bF).Ie(this.CF).setPointerEvents(!1);this.gF.push({start:s,end:e})})),this.NF._s([this.$F,...this.AF]),this.GF._s([this.XF,this.Fd,this.WF,this.jF,...this.gF.map((t=>[t.start,t.end])).flat()]),this.BF=!0,this.St.Ls(),this}getValueIndicators(){return this.hF}setValueIndicatorThickness(t){return this.nF=t,this.BF=!0,this.St.Ls(),this}getValueIndicatorThickness(){return this.nF}setAutomaticBarColoring(t){return this.fF=!!t,this.BF=!0,this.St.Ls(),this}getAutomaticBarColoring(){return this.fF}setGlowColor(t){return void 0===t?(this.uF=!1,this.VF=void 0):"object"==typeof t&&"auto"in t?(this.dF=t.auto,t.auto&&(this.VF=void 0),void 0!==t.alpha&&(this.FF=t.alpha),this.uF=!0):(this.VF=t,this.FF=t.getA(),this.dF=!1,this.uF=!0),this.BF=!0,this.St.Ls(),this}getAutomaticGlowColoring(){return this.dF}setNeedleAlignment(t){return this.LF=t,this.BF=!0,this.St.Ls(),this}getNeedleAlignment(){return this.LF}setGapBetweenBarAndValueIndicators(t){return this.DF=t,this.BF=!0,this.St.Ls(),this}getGapBetweenBarAndValueIndicators(){return this.DF}setBarEffect(t){return this.NF.Ps(t),this.St.Ls(),this}getBarEffect(){return this.NF.Bs()}setLabelEffect(t){return this.GF.Ps(t),this.St.Ls(),this}getLabelEffect(){return this.GF.Bs()}Le(t){var i;if(super.Le(t),Ya.LA(this.Sh,this._A),super.xA(),this.dg!==this.S){if(this.vF){const i=5e-4*t,s=.003*t,e=Math.sign(this.S-this.dg);this.dg=this.dg+i*e+s*this.IF*(this.S-this.dg),e!==Math.sign(this.S-this.dg)?this.dg=this.S:this.St.Ls(!0)}else this.dg=this.S;this.BF=!0}let s=this.hF.find((t=>this.dg>=t.start&&this.dg<=t.end));if(s||(this.dg<this.eF.start?s=this.hF.find((t=>t.start===this.eF.start)):this.dg>this.eF.end&&(s=this.hF.find((t=>t.end===this.eF.end)))),this.zF=this.fF&&s?s.color:this.kF,this.yF){if(this.OF!==this.zF){const i=this.OF.getR(),s=this.OF.getG(),e=this.OF.getB(),h=this.zF.getR(),r=this.zF.getG(),n=this.zF.getB(),o=Math.sign(h-i),a=Math.sign(r-s),l=Math.sign(n-e),c=.005*t,u=.003*t;this.OF=m(i+c*o+u*this.PF*(h-i),s+c*a+u*this.PF*(r-s),e+c*l+u*this.PF*(n-e));const d=Math.abs(h-this.OF.getR()),f=Math.abs(r-this.OF.getG()),A=Math.abs(n-this.OF.getB());d<1&&f<1&&A<1?this.OF=this.zF:this.St.Ls(!0),this.BF=!0}}else this.OF=this.zF;if(this.BF){let t=bs,e=xs,h=bs,r=xs;if(new Array(100).fill(0).forEach(((i,s,n)=>{const o=this.Mc+s/n.length*(this.wc-this.Mc),a=Math.sin(o*Math.PI/180),l=Math.cos(o*Math.PI/180);a<t&&(t=a),a>e&&(e=a),l<h&&(h=l),l>r&&(r=l)})),this.mF?this.$F.Ie(new K({stops:[{offset:0,color:S("#000000")},{offset:1,color:this.OF}],position:{x:.5,y:.5}})):this.$F.Ie(new $({color:this.OF})),this.uF){const t=this.dF&&s?this.OF:null!==(i=this.VF)&&void 0!==i?i:this.TF;this.UF.Ie(new K({stops:[{offset:0,color:t.setA(this.FF)},{offset:1,color:t.setA(0)}],position:{x:.5,y:.5},extent:Q.farthestSide}))}else this.UF.Ie(V);const n=this.pF(this.eF.start),o=this.pF(this.eF.end);let a=0,l=0;const c=this.St.kh.qe(n,this.WF.Hh(),this.WF.jh()),u=this.St.kh.qe(o,this.jF.Hh(),this.jF.jh());c.x>a&&(a=c.x),c.y>l&&(l=c.y),u.x>a&&(a=u.x),u.y>l&&(l=u.y),this.gF.forEach(((t,i)=>{if(i>=this.hF.length)return;const s=this.hF[i],e=this.pF(s.start),h=this.pF(s.end),r=this.St.kh.qe(e,t.start.Hh(),t.start.jh()),n=this.St.kh.qe(h,t.end.Hh(),t.end.jh());r.x>a&&(a=r.x),r.y>l&&(l=r.y),n.x>a&&(a=n.x),n.y>l&&(l=n.y)}));const d=this.hF.length>0?this.nF:0,f=this.xf.getInnerIntervalPixels(),A=Ya.PA(this.Sh,this._A),g={x:f.x-(this.nn.left+this.nn.right),y:f.y-(this.nn.bottom+this.nn.top)-A},v={x:this.nn.left+.5*g.x,y:this.nn.bottom+.5*g.y},y=d+2*this.DF+this.rF/2,p=a+y,m=l+y,b=m+A,x=g.y-(b+m),M=g.x-(p+p),w=Math.max(0,x<M?x:M),_=.5*w,C=.5*_,k=(t+e)*C,T=(h+r)*C,F={x:v.x-T,y:v.y-k},I=w>0;if(this.$F.setVisible(I),this.AF.forEach((t=>t.setVisible(I))),this.HF.setVisible(I),this.YF.setVisible(I),this.UF.setVisible(I),this.Fd.setVisible(I),this.XF.setVisible(I),this.WF.setVisible(I),this.jF.setVisible(I),this.gF.forEach((t=>{t.start.setVisible(I),t.end.setVisible(I)})),!I)return;const P={x:v.x-.5*T,y:v.y-.5*k};this.UF.Be(v).Dc(.5*Math.min(g.x,g.y)),this.XF.Be(P).Sr(this.SF(this.dg));let L=this.XF.zu(),B=this.Fd.zu();0===L.y&&(L=this.St.kh.qe(this.XF.wr(),this.XF.Hh(),this.XF.jh())),0===B.y&&(B=this.St.kh.qe(this.Fd.wr(),this.Fd.Hh(),this.Fd.jh())),this.Fd.Be({x:P.x,y:P.y-L.y-B.y/4});const D=FA(this.eF,this.Mc,this.wc,this.dg,F,_+this.LF*(this.oF/2+this.rF/2)),E=D.angle*(Math.PI/180),R=.5*this.oF,z=Math.cos(E),O=Math.sin(E);this.HF.Ue({x:D.x+R*z,y:D.y+R*O}).$e({x:D.x-R*z,y:D.y-R*O}),this.YF.Ue({x:D.x+R*z,y:D.y+R*O}).$e({x:D.x-R*z,y:D.y-R*O});const N=kA(F,_,this.Mc,this.wc,this.rF,this.Nu,!1,!1);this.$F.Hl(N).Pt({min:{x:F.x-_,y:F.y-_},max:{x:F.x+_,y:F.y+_}});const G=F.y+_,U=F.y-_,Y=F.x+_,H=F.x-_,[X,W]=this.eF.start<this.eF.end?[this.eF.start,this.eF.end]:[this.eF.end,this.eF.start],j=_+.5*this.rF+d/2+this.DF,Z=j+d/2;this.hF.forEach(((t,i)=>{var s,e;const h=t.start>=X&&t.end<=W;this.AF[i].setVisible(h),this.gF[i].start.setVisible(h),this.gF[i].end.setVisible(h);const r=FA(this.eF,this.Mc,this.wc,t.start,F,Z),n=FA(this.eF,this.Mc,this.wc,t.end,F,Z),o=kA(F,j,r.angle,n.angle,this.nF,this.Nu,!(0===i),!(i===this.hF.length-1));this.AF[i].Hl(o);const a=this.eF.start===t.start||this.eF.end===t.start,l=this.eF.start===t.end||this.eF.end===t.end||this.hF.some((i=>i.start===t.end&&i!==t));this.gF[i].start.Be({x:r.x,y:r.y}).ul({x:Math.min(1,Math.max(-1,2*(r.x-Y)/(H-Y)-1)),y:Math.min(1,Math.max(-1,2*(r.y-G)/(U-G)-1))}).Sr(null!==(s=t.startLabel)&&void 0!==s?s:a?"":this.pF(t.start)),this.gF[i].end.Be({x:n.x,y:n.y}).ul({x:Math.min(1,Math.max(-1,2*(n.x-Y)/(H-Y)-1)),y:Math.min(1,Math.max(-1,2*(n.y-G)/(U-G)-1))}).Sr(null!==(e=t.endLabel)&&void 0!==e?e:l?"":this.pF(t.end))}));const J=this.hF.some((t=>t.start<t.end?this.eF.start>=t.start&&this.eF.start<=t.end:this.eF.start<=t.start&&this.eF.start>=t.end)),q=FA(this.eF,this.Mc,this.wc,this.eF.start,F,J?Z:j-this.DF);this.WF.Be({x:q.x,y:q.y}).ul({x:Math.min(1,Math.max(-1,2*(q.x-Y)/(H-Y)-1)),y:Math.min(1,Math.max(-1,2*(q.y-G)/(U-G)-1))}).Sr(n);const tt=this.hF.some((t=>t.start<t.end?this.eF.end>=t.start&&this.eF.end<=t.end:this.eF.end<=t.start&&this.eF.end>=t.end)),it=FA(this.eF,this.Mc,this.wc,this.eF.end,F,tt?Z:j-this.DF);this.jF.Be({x:it.x,y:it.y}).ul({x:Math.min(1,Math.max(-1,2*(it.x-Y)/(H-Y)-1)),y:Math.min(1,Math.max(-1,2*(it.y-G)/(U-G)-1))}).Sr(o),this.BF=!1}}getMinimumSize(){return{x:150,y:150}}Gs(){}Gd(){return[this]}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),t.setPointerEvents(!1),Wi(t,this._t,s,{fill:new $({color:this.getBarColor()})}),this}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const kA=(t,i,s,e,h,r=!0,n=!0,o=!0)=>{const a=[],l=.5*h,c=s>e,u=Math.sign(s-e),d=-1*u;if(r){const t=l/(2*Math.PI*i)*360+.1;n&&(s+=t*d),o&&(e+=t*u)}else s+=.1*d,e+=.1*u;const f=TA(t,i+l,s,e,c);if(a.push(...f),r){const h={x:t.x+i*Math.cos(e*(Math.PI/180)),y:t.y+i*Math.sin(e*(Math.PI/180))};let r;r=s>e?TA(h,l,e+180,e+360,c):TA(h,l,e-180,e-360,c),a.push(...r)}const A=TA(t,i-l,e,s,!c);if(a.push(...A),r){const h={x:t.x+i*Math.cos(s*(Math.PI/180)),y:t.y+i*Math.sin(s*(Math.PI/180))};let r;r=s>e?TA(h,l,s-180,s-360,c):TA(h,l,s+180,s+360,c),a.push(...r)}return a},TA=(t,i,s,e,h)=>{s<e&&([s,e]=[e,s]);const r=[],n=h?-2:2,o=h?t=>t>e:t=>t<s;for(let a=h?s:e;o(a);a+=n){const s=a*(Math.PI/180),e=t.x+i*Math.cos(s),h=t.y+i*Math.sin(s);r.push({x:e,y:h})}const a=(h?e:s)*(Math.PI/180),l=t.x+i*Math.cos(a),c=t.y+i*Math.sin(a);return r.push({x:l,y:c}),r},FA=(t,i,s,e,h,r)=>{const[n,o]=t.start<t.end?[t.start,t.end]:[t.end,t.start],a=Math.max(n,Math.min(o,e)),l=t.start<t.end?s-i:i-s,c=t.start<t.end?i+(a-t.start)/(t.end-t.start)*l:i-(a-t.start)/(t.end-t.start)*l,u=c*(Math.PI/180);return{x:h.x+r*Math.cos(u),y:h.y+r*Math.sin(u),angle:Math.round(c)}};class IA extends Ll{constructor(t,i,s,e,h,r,n,o,a,l,c){super(t,i,s,e,h,r,n,o,a,l),this.QF=c}setLabelAlignment(t){return this.QF=t,this.Ls(),this}getLabelAlignment(){return this.QF}}class PA extends Tr{constructor(t,i,s,e,h,r,n){let o;super(t,{Lr:()=>t.JF?t.JF[this.key].max:void 0,Pr:()=>t.JF?t.JF[this.key].min:void 0,Dr:()=>{}},r,i,s,{numeric:i.parallelCoordinateAxisNumericTicks||i.yAxisNumericTicks,datetime:i.parallelCoordinateAxisDateTimeTicks||i.yAxisDateTimeTicks,time:i.parallelCoordinateAxisTimeTicks||i.yAxisTimeTicks},{type:"linear"}),this.KF=[],this.Zd=[],this.qF=8,this.dt=!1,this.D=new zt,this.chart=t,this.key=e,this.userID=h,this.vs=this.chart.St.vs.ys(this,{}),this.Ys=n,this.tI=n.Pe(t.iI).Ie(this._t.parallelCoordinateAxisBackgroundFillStyle||V).Fe(Wt).setPointerEvents(!1),this.Mh=n.Yr(t.iI).Xh(this._t.parallelCoordinateAxisTitleFont||this._t.yAxisTitleFont).Ie(this._t.parallelCoordinateAxisTitleFillStyle||this._t.yAxisTitleFillStyle).setPointerEvents(!1).$r(us).Ur(us),this.Zh=this.vs.kf([this.Mh]).Ps(i.effectsText),this.Vk=n.Ge(t.iI).Ne(i.parallelCoordinateAxisStrokeStyle||i.yAxisStrokeStyle),this.setAnimationsEnabled(!1),this.addEventListener("intervalchange",(i=>{t.sI(this,i.start,i.end)})),this.Vk.addEventListener("pointerenter",(()=>{var t,i;(null===(i=null===(t=this.chart.getUserInteractions().rangeSelectors)||void 0===t?void 0:t.create)||void 0===i?void 0:i.doubleClickAxis)&&(o=this.chart.engine.setMouseStyle(tr.Point))})),this.Vk.addEventListener("pointerleave",(()=>{o=this.chart.engine.restoreMouseStyle(o)})),this.Vk.addEventListener("dblclick",(t=>{var i,s;t.defaultPrevented||(null===(s=null===(i=this.chart.getUserInteractions().rangeSelectors)||void 0===i?void 0:i.create)||void 0===s?void 0:s.doubleClickAxis)&&(this.addRangeSelector(),Bi(t))})),this.setTitle(e)}setBackgroundFillStyle(t){return this.tI.Ie(t),this.Ys.Ls(),this}getBackgroundFillStyle(){return this.tI.$h()}setStrokeStyle(t){const i="function"==typeof t?t(this.Vk.In()):t,s=i.getFillStyle();return j(s)?(this.eI=s.lut,this.chart.hI=!0):this.eI=void 0,this.Vk.Ne(i),this.chart.St.Ls(),this}getStrokeStyle(){return this.Vk.In()}setTickStrategy(t,i){return super.Rh(t,i)}getTickStrategy(){return this.sh}addRangeSelector(){const t=this.nr(),i=this.Ys.Pe(this.chart.iI).Ie(this._t.parallelCoordinateAxisRangeSelectorFillStyle||this._t.dataGridScrollBarFillStyle).Fe(this._t.parallelCoordinateAxisRangeSelectorStrokeStyle||this._t.dataGridScrollBarStrokeStyle);let s;const e=t=>{var i,e;(null===(e=null===(i=this.chart.getUserInteractions().rangeSelectors)||void 0===i?void 0:i.move)||void 0===e?void 0:e.drag)&&(s=this.chart.engine.setMouseStyle(tr.Vertical,s))},h=t=>{s=this.chart.engine.restoreMouseStyle(s)};i.addEventListener("pointermove",e),i.addEventListener("pointerleave",h),i.addEventListener("pointerdown",(t=>{var n,o;if(!(null===(o=null===(n=this.chart.getUserInteractions().rangeSelectors)||void 0===n?void 0:n.move)||void 0===o?void 0:o.drag))return;const a=this.chart.getCursorMode();let l;this.chart.setCursorMode(void 0);const c=this.chart.St.pa(t),u=ot({x:c.engineX,y:c.engineY},this.chart.St.ot,this.chart.iI),d=this.chart.iI.y.Pi(i.Zt(),10),f=this.chart.iI.y.Pi(i.Qt(),-10);l=u.y<=d?"scaleMin":u.y>=f?"scaleMax":"move",Bi(t);let A=t;const g=t=>{if(void 0===this.rI)return;const i=.05*Math.abs(this.Vh-this.zh),s=(t.clientX,A.clientX,t.clientY-A.clientY);if(A=t,"move"===l){const t=r.max-r.min,i=this.chart.nI(r.max,this.rI,this).y,e=this.chart.iI.y.Pi(i,-s),h=this.chart.oI(e,this.rI,this);r.max=fi(h,Math.max(this.zh,this.Vh),Math.min(this.zh,this.Vh)+t),r.min=r.max-t}else if("scaleMax"===l){const t=this.chart.nI(r.max,this.rI,this).y,e=this.chart.iI.y.Pi(t,-s),h=this.chart.oI(e,this.rI,this);r.max=fi(h,r.min+i,Math.max(this.zh,this.Vh))}else if("scaleMin"===l){const t=this.chart.nI(r.min,this.rI,this).y,e=this.chart.iI.y.Pi(t,-s),h=this.chart.oI(e,this.rI,this);r.min=fi(h,r.max-i,Math.min(this.zh,this.Vh))}this.chart.aI(),Bi(t)},v=r=>{r.pointerId===t.pointerId&&(this.chart.setCursorMode(a),i.addEventListener("pointermove",e),i.addEventListener("pointerleave",h),ni.removeEventListener("pointermove",g),ni.removeEventListener("pointerup",v),s=this.chart.engine.restoreMouseStyle(s))};i.removeEventListener("pointermove",e),i.removeEventListener("pointerleave",h),ni.addEventListener("pointermove",g),ni.addEventListener("pointerup",v)})),i.addEventListener("dblclick",(t=>{var i,s;if(!(null===(s=null===(i=this.chart.getUserInteractions().rangeSelectors)||void 0===i?void 0:i.dispose)||void 0===s?void 0:s.doubleClick))return;const e=this.KF.indexOf(r);e>=0&&this.KF.splice(e,1),r.shape.dispose(),this.chart.aI(),Bi(t)}));const r={min:t.min+.25*(t.max-t.min),max:t.max-.25*(t.max-t.min),shape:i};this.KF.push(r),this.chart.aI();const n={setInterval:(t,i)=>(r.min=Math.min(t,i),r.max=Math.max(t,i),this.chart.aI(),n),setPointerEvents:t=>(i.setPointerEvents(t),n),dispose:()=>{const t=this.KF.indexOf(r);return t>=0&&(this.KF.splice(t,1),this.chart.aI()),n}};return n}addCustomTick(){const t=new IA((()=>this.chart.St.Ls()),(()=>{const i=this.Zd.indexOf(t);i>=0&&this.Zd.splice(i,1)}),(this._t.parallelCoordinateAxisNumericTicks||this._t.yAxisNumericTicks).majorTickStyle.tickStyle,(this._t.parallelCoordinateAxisNumericTicks||this._t.yAxisNumericTicks).majorTickStyle.tickLength,(this._t.parallelCoordinateAxisNumericTicks||this._t.yAxisNumericTicks).majorTickStyle.gridStrokeStyle,(this._t.parallelCoordinateAxisNumericTicks||this._t.yAxisNumericTicks).majorTickStyle.tickPadding,(this._t.parallelCoordinateAxisNumericTicks||this._t.yAxisNumericTicks).majorTickStyle.labelRotation,(this._t.parallelCoordinateAxisNumericTicks||this._t.yAxisNumericTicks).majorTickStyle.labelFillStyle,(this._t.parallelCoordinateAxisNumericTicks||this._t.yAxisNumericTicks).majorTickStyle.labelFont,(t=>this.formatValue(t)),(this._t.parallelCoordinateAxisNumericTicks||this._t.yAxisNumericTicks).majorTickStyle.labelAlignment);return this.Zd.push(t),this.chart.St.Ls(),t}Le(t){this.rI=t.parallelAxisIndex;const i=Math.min(this.zh,this.Vh),s=Math.max(this.zh,this.Vh);for(const[i,s]of this.eh)for(const[,e]of s){const s=t.ticksInfo.get(e);s&&(t.plotAxisLines.add({positions:[s.positionTicklineStart,s.positionTicklineEnd]},{lineStyle:i.th.tickStyle}),e.sr.Be(s.labelPosition).ul(s.labelAlignment).Wh(s.labelRotation).hl(s.labelOffset.x,s.labelOffset.y))}this.Zd.forEach((e=>{if(!e.ft||e.S<i||e.S>s)return;const h=this.lI(t.parallelAxisIndex,t.halfAxisThickness,e.S,e.rv,e.ov,e.QF);t.plotAxisLines.add({positions:[h.positionTicklineStart,h.positionTicklineEnd]},{lineStyle:e.hv}),t.plotAxisText.add().Be(h.labelPosition).ul(h.labelAlignment).Ie(e.QA).Xh(e.av).Sr(e.Fn(e.S)).Wh(e.Cd).setPointerEvents(e.ut)})),this.Vk.Ue({x:t.parallelAxisIndex,y:0}).$e({x:t.parallelAxisIndex,y:1}),this.Mh.Be({x:t.parallelAxisIndex,y:this.chart.iI.y.Pi(0,-(t.halfAxisThickness+this.qF))}).Wh(this.getTitleRotation()).ul({x:0,y:1});const e=0===t.parallelAxisIndex?t.parallelAxisIndex:this.chart.iI.x.Pi(t.parallelAxisIndex,-1.2*t.Ef);this.tI.Be({x:e,y:0}).Z({x:t.parallelAxisIndex-e,y:1});const h=this.chart.iI.hs();this.KF.forEach((i=>{const s=this.chart.nI(i.min,t.parallelAxisIndex,this),e=this.chart.nI(i.max,t.parallelAxisIndex,this),r={x:t.parallelAxisIndex-10*h.x*.5,y:s.y},n=t.parallelAxisIndex+10*h.x*.5,o=e.y;i.shape.Be(r).Z({x:n-r.x,y:o-r.y})}))}G(){this.tI.dispose(),this.Mh.dispose(),this.Vk.dispose(),this.KF.forEach((t=>t.shape.dispose())),this.KF.length=0,this.Qh(),this.vr(),this.dt=!0,this.D.R("dispose",{})}isDisposed(){return this.dt}lI(t,i,s,e,h,r){const n=this.chart.iI.Pi({x:t,y:(s-this.zh)/(this.Vh-this.zh)},{x:0-i,y:0}),o=this.chart.iI.Pi(n,{x:-e,y:0});return{positionTicklineStart:n,positionTicklineEnd:o,labelPosition:this.chart.iI.Pi(o,{x:-h,y:0}),labelAlignment:{x:1,y:r}}}lr(t){const i=this.Vk.In();return{halfAxisThickness:yh(i)?i.getThickness()/2:0}}Ar(t,i,s,e,h){const r=i.th,n=this.getInterval();return{...this.lI(e.parallelAxisIndex,h.halfAxisThickness,t,r.getTickLength(),r.getTickPadding(),2*(t-n.start)/(n.end-n.start)-1),keyValue:t,tickLevel:i,labelText:s,labelRotation:r.labelRotation,labelOffset:{x:0,y:0}}}br(t,i){return new Fr(i,t,this.Ys,this.chart.iI)}yr(t,i){const s=this.Mh&&this.Mh.wr().length>0&&this.getTitleFillStyle()!==V?this.Mh.hr().zu():{x:0,y:0};let e=0;this.eh.forEach(((t,i)=>{const s=i.th.tickLength+i.th.tickPadding;t.forEach((t=>{if(!t.sr.getVisible())return void(e=Math.max(e,s));const i=s+t.sr.hr().zu().x;e=Math.max(e,i)}))}));const h=this.Zd.reduce(((t,i)=>Math.max(t,i.ft?this.chart.St.kh.qe(i.Fn(i.S),i.av,i.Cd).x+i.rv+i.ov:0)),0);e=Math.max(e,h);const r=s.y+this.qF;e=Math.max(e,s.x/2);const n=e;return{Ef:e,cI:r,uI:s.x,Pd:n,ticksInfo:i}}_h(){return this.chart.iI}Rr(t,i){return Be(t,i,this.ot)}Or(t,i,s){return{min:t,max:i}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}}class LA extends Hc{constructor(t,i,s,e,h){super(t,i,s,e),this.Es="Parallel Coordinate Series",this.dI=!1,this.D=new zt,this.he=t;const r=void 0!==(null==h?void 0:h.automaticColorIndex)?h.automaticColorIndex:this.he.getSeries().length;this.fI=Ji(this._t.parallelCoordinateChartSeriesColor,r)||(()=>{const t=Ji(this._t.lineSeriesStrokeStyle,r).getFillStyle();return(U(t)?t.getColor():void 0)||m(255,255,0)})(),this.addEventListener("visiblechange",(t=>{this.he.AI()})),this.addEventListener("dispose",(t=>{this.he.AI()})),this.setHighlightOnHover(!1)}setData(t){const i=void 0!==this.gI;return this.gI=this.he.vI(t),i&&this.he.yI(),this}getData(){return this.gI}setColor(t){const i="function"==typeof t?t(this.fI):t;return i===this.fI||(this.fI=i,this.he.St.Ls(),this.he.pI(this)),this}getColor(){return this.fI}Qv(){return this.getAutoScrollingEnabled()}hy(){}Le(){}vv(){}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:new $({color:this.fI})})}BA(){return super.BA()&&!this.dI}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class BA extends Jl{constructor(t,i,s,e,h,r,n){var o,a;super(t,i,s,i.wA("parallelAxisChart bg",0),e,i.St._t.parallelCoordinateChartBackgroundFillStyle||i.St._t.chartXYBackgroundFillStyle,i.St._t.parallelCoordinateChartBackgroundStrokeStyle||i.St._t.chartXYBackgroundStrokeStyle,i.St._t.parallelCoordinateChartTitleFont||i.St._t.chartXYTitleFont,i.St._t.parallelCoordinateChartTitleFillStyle||i.St._t.chartXYTitleFillStyle,i.St._t.parallelCoordinateChartTitleShadow||i.St._t.chartXYTitleShadow,r),this.axes=[],this.mI=!0,this.SI=cs(),this.bI=new Map,this.xI=this._t.parallelCoordinateChartSeriesColorUnselected||m(255,255,255,30),this.MI=d({resolution:32}),this.hI=!1,this.wI=!1,this._I=!0,this.CI=!1,this.kI=!1,this.TI=!1,this.FI=!1,this.Vo=t=>{this.iI.Z(t.engineWidth,t.engineHeight)},this.D=new zt,this.yC=i.Ng("parallelAxisChart series",0),this.II=i.Ng("parallelAxisChart labels",1),this.Sh.Sr("Parallel Coordinate Chart"),this.St.Zo(Gr.ho),this.iI=this.lA.d2({scaleXYConstructor:be}).ts(0,1),this.MA(h,this.iI),this.Iy=this.rA.Pe(this.iI).Be({x:0,y:0}).Z({x:0,y:1}).Ie(this._t.parallelCoordinateChartSeriesBackgroundFillStyle||this._t.chartXYSeriesBackgroundFillStyle).Fe(Wt).setPointerEvents(!0),this.Py=this.rA.Pe(this.iI).Be({x:0,y:0}).Z({x:0,y:1}).Ie(V).Fe(this._t.parallelCoordinateChartSeriesBackgroundStrokeStyle||this._t.chartXYBackgroundStrokeStyle).setPointerEvents(!1),super.Fy(this.Iy,this.Py),this.setSeriesBackgroundEffect(!1),this.LI=new vh({thickness:null!==(o=this._t.parallelCoordinateChartSeriesLineThickness)&&void 0!==o?o:2,fillStyle:new Y}),this.BI=new vh({thickness:null!==(a=this._t.parallelCoordinateChartSeriesLineThickness)&&void 0!==a?a:2,fillStyle:new $({color:this._t.parallelCoordinateChartSeriesColorUnselected})}),this.DI=this.SI.Jt(this.yC.Gf(this.iI)).Ne(this.LI),this.DI.Hc=5e4,this.EI=this.yC.Gf(this.iI).Ne(this._t.parallelCoordinateChartPointedSeriesLineStyle||Ji(this._t.lineSeriesStrokeStyle,0)).setPointerEvents(!1),this.RI=new El((()=>this.II.Yr(this.iI))),this.zI=new Dl((()=>this.II.Gf(this.iI).setPointerEvents(!1)),((t,i,s)=>(t.ti().Ne(s.lineStyle),i.map((({positions:i})=>t.lo().Uf(i[0],i[1]))))));const l=i.$g(),c=gi(n?n.cursorBuilder:void 0,gl);this.Ug=Qa(this,l,c.ag(l,this.uiScale,this.uiScale,ui,this._t),this,"show-nearest",DA,(()=>0)),this.addEventListener("resize",this.Vo)}setCursor(t){return this.Ug.setCursor(t),this}getCursor(){return this.Ug.getCursor()}setCursorMode(t){return this.Ug.setCursorMode(t),this}getCursorMode(){return this.Ug.getCursorMode()}setCustomCursor(t){return this.Ug.setCustomCursor(t),this}setCursorFormatting(t){return this.Ug.setCursorFormatting(t),this}getCursorFormatting(){return this.Ug.getCursorFormatting()}addCursor(t=gl){const i=this.dA(),s=t.ag(i,this.uiScale,this.uiScale,this.nA(i),this._t);return this.SA(s),s}setUnselectedSeriesColor(t){return this.xI="function"==typeof t?t(this.xI):t,this.BI=new vh({thickness:this.getSeriesStrokeThickness(),fillStyle:new $({color:this.xI})}),this.St.Ls(),this}getUnselectedSeriesColor(){return this.xI}setPointedSeriesStrokeStyle(t){return this.EI.Ne(t),this.St.Ls(),this}getPointedSeriesStrokeStyle(){return this.EI.In()}setSpline(t,i){return t?this.MI._({resolution:void 0!==(null==i?void 0:i.resolution)?i.resolution:32}):this.MI._(void 0),this.St.Ls(),this}setAxes(t){const i=Array.isArray(t)?t.map(((t,i)=>({key:t,id:i}))):"object"==typeof t?Object.entries(t).map(((t,i)=>({key:t[0],id:t[1]}))):void 0;if(!i)return this;const s=i.filter((t=>void 0===this.axes.find((i=>i.key===t.key)))),e=this.axes.filter((t=>void 0===i.find((i=>t.key===i.key))));return s.forEach((t=>{const i=this.VI(),s=new PA(this,this._t,!this.ah,t.key,t.id,i,this.II),e=()=>{this._I=!0};s.addEventListener("visiblechange",e),s.addEventListener("dispose",(()=>s.removeEventListener("visiblechange",e))),this.axes.push(s)})),e.forEach((t=>{t.G();const i=this.axes.indexOf(t);i>=0&&this.axes.splice(i,1)})),this.axes=i.map((t=>this.axes.find((i=>i.key===t.key)))),this._I=!0,this.JF=void 0,this.St.Ls(),this}getAxis(t){const i=this.OI(t);if(!i)throw new Error(`ParallelAxisChart.getAxis | no such axis: "${t}". Found: ${this.axes.map((t=>void 0!==t.userID?`${t.key}, ${t.userID}`:t.key)).join(", ")}`);return i}hasAxis(t){return void 0!==this.OI(t)}addSeries(t){const i=new LA(this,this.ky,this._t,this.St.vs,t);return super.Ly(i),this.kI=!0,this.JF=void 0,this.St.Ls(),i}setSeriesStrokeThickness(t){return this.LI=this.LI.setThickness(t),this.BI=this.BI.setThickness(t),this.DI.Ne(this.LI),this.St.Ls(),this}getSeriesStrokeThickness(){return this.LI.getThickness()}setLUT(t){return this.Bd=t,this.Bd&&0===this.Bd.lut.units.length&&(this.Bd.lut=this.Bd.lut.setUnits(this.Bd.axis.getTitle())),this.FI=!0,this.St.Ls(),this}Le(t){super.Le(t);const i=this.axes.filter((t=>t.getVisible()));this.iI.qi(0,i.length-1),this.Iy.Z({x:i.length-1,y:1}),this.Py.Z({x:i.length-1,y:1});const s=void 0===this.JF;if(!this.JF){const t={};i.forEach((i=>{t[i.key]={min:bs,max:xs}})),this._y.forEach((i=>{i.gI&&Object.entries(i.gI).forEach((([i,s])=>{const e=t[i];e&&!Number.isNaN(s)&&(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}))})),this.JF=t}if(this.TI||this.CI||this.kI){const t=i.map(((t,i)=>t.KF));this._y.forEach((s=>{const e=s.gI;if(!e)return;let h=!1;for(let s=0;s<i.length;s+=1){const r=i[s],n=t[s],o=void 0!==n.find((t=>Ls(e[r.key],t.min,t.max)));if(n.length>0&&!o){h=!0;break}}s.dI=h}));const s=this._y.filter((t=>!t.dI));this.D.R("seriesselect",{selectedSeries:s})}for(const t of this._y)t.hy();for(const t of this._y)t.Le();super.xA();const e=this.St.Ns(this.Iy)||void 0!==this._y.find((t=>t.getPointed()))?this.NI():void 0;if(this.Ug.Le(!1,this._y,void 0,{explicitTarget:e,afterCursorPointedAt:t=>{const i=this.St.jo();if(t.length>1&&i){const t=this.St.pa(i);this.Ug.DA.rg({x:t.engineX,y:t.engineY},this.St.ot)}}}),Ya.LA(this.Sh,this._A),i.length>=2){const t=this.RI.yv(),e=this.zI.yv(),h=i.map(((i,s)=>(i.Er(),i.hr({plotAxisLines:e,plotAxisText:t,physicalAxisSize:this.iI.y.Si(),parallelAxisIndex:s})))),r=Ya.PA(this.Sh,this._A);this.iI.Ji([this.oi.left+this.nn.left+h[0].Pd,this.oi.right+this.nn.right+h[h.length-1].uI/2]),this.iI.Ki([this.oi.bottom+this.nn.bottom+h.reduce(((t,i)=>Math.max(t,i.cI)),0),this.oi.top+this.nn.top+r]),h.forEach(((t,s)=>i[s].Le(t))),t.finishPlot(),e.finishPlot(),(s||this.hI)&&i.forEach(((t,i)=>{if(!t.eI)return;const s=t.eI.steps.map((s=>({...s,value:this.nI(s.value,i,t).y}))),e=t.eI.setSteps(s);t.Vk.Ne((t=>t.setFillStyle(new W({lookUpProperty:"y",lut:e}))))}));const n=this._I||this.CI||this.mI||this.MI.o;n&&(this.DI.ti(),this.SI.ti(),this.bI.clear(),this._y.forEach((t=>{const s=t.gI;if(!t.getVisible()||!s)return;const e=this.GI(t,s,i,this.DI,this.SI);this.bI.set(t,e),t.ks(e)}))),(n||this.TI||this.FI||this.CI)&&this.$I(this._y),!n&&this.kI&&this._y.forEach((t=>{if(t.us.length>0)return;const s=t.gI;if(!t.getVisible()||!s)return;const e=this.GI(t,s,i,this.DI,this.SI);this.bI.set(t,e),t.ks(e),this.$I([t])})),this._y.find((t=>t.gI&&Object.keys(t.gI).length>0))&&(this.wI=!0)}const h=1===(null==e?void 0:e.length)?e[0]:void 0;(h!==this.UI||this.CI)&&(this.EI.ti(),h&&h.series.gI?(this.GI(h.series,h.series.gI,i,this.EI,void 0),this.DI.Ne(this.BI)):this.DI.Ne(this.LI));const r=u(this.iI.x.pi(),this.iI.y.pi(),this.iI.x.Si(),this.iI.y.Si());this.yC.dm(r);for(const t of this._y)t.vv();this.mI=!1,this.TI=!1,this._I=!1,this.CI=!1,this.kI=!1,this.FI=!1,this.MI.o=!1,this.hI=!1,this.UI=h}$I(t){const i=this.Bd&&{lut:this.Bd.lut,key:this.Bd.axis.key};t.forEach((t=>{const s=t.gI,e=this.bI.get(t);if(!s||!e)return;let h;if(t.dI)h=this.xI;else if(i){const t=s[i.key],e=this.JF&&this.JF[i.key];h=i.lut.getColors(t,e)}else h=t.fI;e.forEach((t=>t.iF(h)))}))}AI(){this.CI=!0,this.St.Ls()}yI(){this.wI&&this.St.Zo(Gr.qn),this.CI=!0,this.St.Ls()}OI(t){return this.axes.find((i=>i.key===t))||this.axes.find((i=>i.userID===t))}VI(){return rt.d1({scale1DConstructor:pe,dimension:"x"}).W(0,1)}vI(t){if(this.JF=void 0,this.St.Ls(),Array.isArray(t)){const i={};return t.forEach(((t,s)=>{var e;if("number"==typeof t){const h=null===(e=this.axes[s])||void 0===e?void 0:e.key;if(!h)throw new Error("ParallelCoordinateSeries Axis count doesnt match supplied data");i[h]=t}else"object"==typeof t&&(i[t.key]=t.value)})),i}if("object"==typeof t)return t;throw new Error("ParallelCoordinateSeries unidentified data format")}sI(t,i,s){this.mI=!0,this.St.Ls()}nI(t,i,s){return{x:i,y:(t-s.ot.$)/(s.ot.U-s.ot.$)}}oI(t,i,s){const e=s.getInterval();return e.start+t*(e.end-e.start)}pI(t){this.FI=!0,this.St.Ls()}aI(){this.TI=!0,this.St.Ls()}getSeries(){return this._y}Gd(){const t=[],i=this.Bd;return i&&t.push({Gs:()=>({lut:i.lut,lookUpProperty:void 0}),attach:(t,s)=>{t.setText("Value based color").setOn(!0),t.addEventListener("switch",(t=>{this.setLUT(t.state?i:void 0)}))}}),t}getMinimumSize(){return{x:200,y:200}}forEachAxis(t){return this.axes.slice().forEach((i=>t(i))),this}dispose(){return super.dispose(),this.axes.forEach((t=>t.G())),this.Ug.G(),this.yC.G(),this.II.G(),this}addLegendBox(t,i){const s=super.addLegendBox(t,i);return void 0!==i&&i!==this.uiScale||void 0!==t&&"vertical"!==t.getAlignment()||s.setOrigin(ir.RightCenter).setPosition({x:this.uiScale.x.rt(this.uiScale.x.mi()-this.nn.right),y:nt(this.xf.y.rt(this.xf.y.pi()+this.xf.y.Si()/2),this.xf.y,this.uiScale.y)}),s}GI(t,i,s,e,h){const r=[];let n;for(let o=0;o<s.length;o+=1){const a=s[o],l=i[a.key],c=this.nI(l,o,a),u=this.MI.C();if(u){if(void 0!==n){const i=u.resolution;let s;for(let o=0;o<=i;o+=1){const a=(o-1)/i,l=o/i,u=l<.5?4*l*l*l:1-(-2*l+2)**3/2;if(void 0!==s){const i={x:n.x+a*(c.x-n.x),y:n.y+s*(c.y-n.y)},o={x:n.x+l*(c.x-n.x),y:n.y+u*(c.y-n.y)},d=e.lo();h&&h.qt(d,t),r.push(d),d.Uf(i,o)}s=u}}}else if(void 0!==n){const i=e.lo();h&&h.qt(i,t),r.push(i),i.Uf(n,c)}n=c}return r}NI(){const t=this.getCursorMode(),i=this.St.jo();if(t&&i){const s=this.St.pa(i),e=ot({x:s.engineX,y:s.engineY},this.St.ot,this.iI),h=Math.round(e.x),r=this.axes.filter((t=>t.getVisible()))[h],n=r.key,o=ss(this._y.map((t=>{if(!t.gI||!t.BA())return;const i=t.gI[n],s=this.nI(i,h,r);return{cursorPosition:{pointMarker:s,pointMarkerScale:this.iI,resultTable:s,resultTableScale:this.iI},value:i,series:t,axis:r}})));return"show-nearest"===t?[o.filter((t=>!Number.isNaN(t.cursorPosition.pointMarker.y))).sort(((t,i)=>Math.abs(t.cursorPosition.pointMarker.y-e.y)-Math.abs(i.cursorPosition.pointMarker.y-e.y)))[0]]:("show-nearest-interpolated"!==t&&"show-all-interpolated"!==t||ni.console.warn('LightningChart JS ParallelCoordinateChart does not support "interpolated" cursor modes.'),o)}}setUserInteractions(t){return this.ze=void 0===t?{rangeSelectors:{create:{doubleClickAxis:!1},move:{drag:!1},dispose:{doubleClick:!1}}}:t,this}getUserInteractions(){return hi({rangeSelectors:{create:{doubleClickAxis:!0},move:{drag:!0},dispose:{doubleClick:!0}}},this.ze)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const DA=(t,i,s)=>{if(s.length>1)return[[{text:s[0].axis.getTitle(),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],...ss(s.map((t=>{const i=t.series.getData(),s=i?i[t.axis.key]:void 0;if(void 0!==s)return Xa(t,[[t.series,"",Pe(t.axis.formatValue(s),t.axis)]])})).flat())];const e=s[0],h=[[{component:e.series,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}]];return t.axes.forEach((i=>{const s=e.series.getData();if(!s)return;const r=s[i.key];if(void 0===r)return;const n=t.axes.filter((t=>t.getVisible()))[e.cursorPosition.pointMarker.x]===i?{weight:"bold"}:{};h.push([{text:i.getTitle(),font:n},"",{text:i.formatValue(r),font:n}])})),h},EA=(t,i)=>{const s=(t=>{const i=new $({color:t.uiStrokeColorContrastHigh}),s=new $({color:t.uiStrokeColorContrastMedium}),e=new $({color:t.uiStrokeColorContrastLow}),h=new hh({family:t.fontFamily,weight:"normal",style:"normal"}),r=t.isDark?m(0,0,0,255):void 0,n=h.setSize(18*t.fontScaler),o=h.setSize(16*t.fontScaler),a=h.setSize(14*t.fontScaler),l=h.setSize(10*t.fontScaler),c=h.withMutations((i=>i.set("size",14*t.fontScaler).set("weight","bold"))),u=h.setSize(13*t.fontScaler),d=new vh({thickness:2,fillStyle:e}),f=new $({color:t.dataHighlightOverlayColor}),A=new vh({thickness:2,fillStyle:t.legendBackgroundBorderFillStyle}),g=t.dataColorPalette.map((t=>new $({color:t.stroke}))),v=t=>g[t%g.length],y=g.map((t=>new vh({thickness:2,fillStyle:t}))),p=t=>y[t%y.length],b=t.dataColorPalette.map((t=>new $({color:t.border}))).map((t=>new vh({thickness:2,fillStyle:t}))),x=t=>b[t%b.length],M=t.dataColorPalette.map((t=>{const i=t.area;return new it({angle:0,stops:[{offset:0,color:i.setA(0)},{offset:.8,color:i}]})})),w=t=>M[t%M.length],_=t.dataColorPaletteInverted.map((t=>{const i=t.area;return new it({angle:180,stops:[{offset:0,color:i.setA(0)},{offset:.8,color:i}]})})),C=t=>_[t%_.length],k=t.dataColorPalette.map((t=>{const i=t.area;return new it({angle:180,stops:[{color:Yi(i,m(255,255,255,i.getA()),.3),offset:0},{color:i,offset:.5},{color:Yi(i,m(0,0,0,i.getA()),.3),offset:1}]})})),T=t=>k[t%k.length],F=t.dataColorPaletteInverted.map((t=>new $({color:t.border}))).map((t=>new vh({thickness:2,fillStyle:t}))),I=t=>F[t%F.length],P=new $({color:t.dataColorPositive}),L=new $({color:t.dataColorNegative}),B=new vh({thickness:1,fillStyle:new $({color:t.dataStrokeColorContrastHigh.setA(50)})}),D=new vh({thickness:2,fillStyle:t.axisLineFillStyle}),E=new $({color:m(0,0,0,1)}),R=new vh({thickness:1,fillStyle:t.axisGridMajorFillStyle}),z=new vh({thickness:1,fillStyle:t.axisTickMajorFillStyle}),O=a,N=t.axisLabelMajorFillStyle,G=new vh({thickness:1,fillStyle:t.axisGridMinorFillStyle}),U=new vh({thickness:1,fillStyle:t.axisTickMinorFillStyle}),Y=l,H=N,X=ia,W=new qo({gridStrokeStyle:R,tickStyle:z,tickLength:7,tickPadding:5,labelFont:O,labelFillStyle:N,labelShadow:r}),j=new qo({gridStrokeStyle:G,tickStyle:U,tickLength:4,tickPadding:10,labelFont:Y,labelFillStyle:H,labelShadow:r}),Z=new Da({extremeTickStyle:X,majorTickStyle:W,minorTickStyle:j.setLabelFillStyle(V)}),Q=new Ca({greatTickStyle:ia,majorTickStyle:W,minorTickStyle:j}),J=Q,K=Q,q=new da({majorTickStyle:W,minorTickStyle:j}),tt=new $({color:t.dataHighlightOverlayColor}),st=new vh({thickness:1,fillStyle:s}),et=new vh({thickness:2,fillStyle:s}),ht=t=>new Ah.Triangulated({shape:"sphere",size:10,fillStyle:g[t%g.length]}),rt=g[0],nt=t.uiTextFillStyle,ot=t.legendBackgroundFillStyle,at=new vh({thickness:1,fillStyle:t.legendBackgroundBorderFillStyle}),lt=Xi(t.legendButtonDefaultColor),ct=Xi(t.isDark?m(70,70,70,255):m(170,170,170,255)),ut=new $({color:t.isDark?m(70,70,70,255):m(170,170,170,255)}),dt=new vh({thickness:1,fillStyle:i}),ft=new Sh({thickness:1,fillStyle:t.cursorGridFillStyle,pattern:ph.DashedEqual,patternScale:3}),At=new vh({thickness:1,fillStyle:t.cursorGridFillStyle}),gt=t.zoomBandChartDefocusOverlayFillStyle,vt=new vh({thickness:2,fillStyle:new $({color:t.zoomBandChartSplitterColor})}),yt=new $({color:t.uiBackgroundColor});let pt={isDark:t.isDark,effect:t.effect,effectsText:t.effectsText,effectsDashboardSplitters:t.effectsDashboardSplitters,lcjsBackgroundFillStyle:t.lcjsBackgroundFillStyle,lcjsBackgroundStrokeStyle:Wt,highlightColorOffset:t.highlightColorOffset,highlightColorOffsetAxisOverlay:t.highlightColorOffsetAxisOverlay,dashboardSplitterStyle:new vh({thickness:4,fillStyle:t.dashboardSplitterFillStyle}),chartXYBackgroundFillStyle:t.panelBackgroundFillStyle,chartXYBackgroundStrokeStyle:Wt,chartXYTitleFont:n,chartXYTitleFillStyle:t.titleFillStyle,chartXYTitleShadow:r,chartXYSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chartXYSeriesBackgroundStrokeStyle:d,chartXYZoomingRectangleFillStyle:f,chartXYZoomingRectangleStrokeStyle:A,lineSeriesStrokeStyle:p,pointLineSeriesStrokeStyle:p,pointLineSeriesFillStyle:v,pointSeriesFillStyle:v,ellipseSeriesFillStyle:v,ellipseSeriesStrokeStyle:p,polygonSeriesFillStyle:v,polygonSeriesStrokeStyle:p,rectangleSeriesFillStyle:v,rectangleSeriesStrokeStyle:Wt,segmentSeriesStrokeStyle:p,boxSeriesBodyFillStyle:v(0),boxSeriesBodyStrokeStyle:Wt,boxSeriesStrokeStyle:new vh({thickness:1,fillStyle:g[0]}),boxSeriesMedianStrokeStyle:new vh({thickness:1,fillStyle:new $({color:m(0,0,0)})}),ohlcCandleThicknessPixels:5,ohlcCandleBodyFillStylePositive:P,ohlcCandleBodyFillStyleNegative:L,ohlcCandleTailStrokeStylePositive:new vh({thickness:1,fillStyle:new $({color:t.uiStrokeColorContrastHigh})}),ohlcCandleTailStrokeStyleNegative:new vh({thickness:1,fillStyle:new $({color:t.uiStrokeColorContrastHigh})}),ohlcBarThicknessPixels:10,ohlcBarStrokeStylePositive:new vh({thickness:2,fillStyle:P}),ohlcBarStrokeStyleNegative:new vh({thickness:2,fillStyle:L}),heatmapGridSeriesFillStyle:v,heatmapGridSeriesWireframeStyle:B,heatmapScrollingGridSeriesFillStyle:v,heatmapScrollingGridSeriesWireframeStyle:B,areaRangeSeriesFillStyle:w,areaRangeSeriesStrokeStyle:x,areaRangeSeriesFillStyleInverted:C,areaRangeSeriesStrokeStyleInverted:I,areaSeriesBipolarHighFillStyle:w,areaSeriesBipolarHighStrokeStyle:x,areaSeriesBipolarLowFillStyle:C,areaSeriesBipolarLowStrokeStyle:I,areaSeriesPositiveFillStyle:w,areaSeriesPositiveStrokeStyle:x,areaSeriesNegativeFillStyle:C,areaSeriesNegativeStrokeStyle:I,xAxisTitleFont:o,xAxisTitleFillStyle:t.axisTitleFillStyle,xAxisStrokeStyle:D,xAxisOverlayStyle:E,xAxisZoomingBandFillStyle:f,xAxisZoomingBandStrokeStyle:Wt,xAxisNumericTicks:Z,xAxisDateTimeTicks:J,xAxisTimeTicks:q,yAxisTitleFont:o,yAxisTitleFillStyle:t.axisTitleFillStyle,yAxisStrokeStyle:D,yAxisOverlayStyle:E,yAxisZoomingBandFillStyle:f,yAxisZoomingBandStrokeStyle:Wt,yAxisNumericTicks:Z,yAxisDateTimeTicks:K,yAxisTimeTicks:q,bandFillStyle:tt,bandStrokeStyle:st,constantLineStrokeStyle:et,barChartBackgroundFillStyle:t.panelBackgroundFillStyle,barChartBackgroundStrokeStyle:Wt,barChartTitleFont:n,barChartTitleFillStyle:t.titleFillStyle,barChartTitleShadow:r,barChartSeriesBackgroundFillStyle:V,barChartSeriesBackgroundStrokeStyle:Wt,barChartBarFillStyle:v,barChartBarStrokeStyle:new vh({thickness:1,fillStyle:e}),barChartValueAxisTitleFont:o,barChartValueAxisTitleFillStyle:t.axisTitleFillStyle,barChartValueAxisStrokeStyle:D,barChartValueAxisTicks:Z.setMajorTickStyle((t=>t.setGridStrokeStyle(Wt))).setMinorTickStyle((t=>t.setGridStrokeStyle(Wt))),barChartCategoryAxisTitleFont:o,barChartCategoryAxisTitleFillStyle:t.axisTitleFillStyle,barChartCategoryAxisStrokeStyle:D,barChartCategoryLabels:{formatter:(t,i)=>t,labelFillStyle:Z.majorTickStyle.labelFillStyle,labelFont:Z.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,tickStyle:Z.majorTickStyle.tickStyle,tickLength:0,labelShadow:r},barChartValueLabelsAfterBars:{position:"after-bar",formatter:t=>t.chart.valueAxis.formatValue(t.value),labelFillStyle:Z.majorTickStyle.labelFillStyle,labelFont:Z.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,displayStackedIndividuals:!1,displayStackedSum:!0,labelShadow:r},barChartValueLabelsInsideBars:{position:"inside-bar",formatter:t=>t.chart.valueAxis.formatValue(t.value),labelFillStyle:Z.majorTickStyle.labelFillStyle,labelFont:Z.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,displayStackedIndividuals:!1,displayStackedSum:!0,labelShadow:r},barChartCornerRadius:10,chart3DBackgroundFillStyle:t.panelBackgroundFillStyle,chart3DBackgroundStrokeStyle:Wt,chart3DTitleFont:n,chart3DTitleFillStyle:t.titleFillStyle,chart3DTitleShadow:r,chart3DSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chart3DSeriesBackgroundStrokeStyle:d,chart3DBoundingBoxStrokeStyle:Wt,xAxis3DTitleFont:o,xAxis3DTitleFillStyle:t.axisTitleFillStyle,xAxis3DStrokeStyle:D,xAxis3DNumericTicks:Z,xAxis3DDateTimeTicks:Q,xAxis3DTimeTicks:q,yAxis3DTitleFont:o,yAxis3DTitleFillStyle:t.axisTitleFillStyle,yAxis3DStrokeStyle:D,yAxis3DNumericTicks:Z,yAxis3DDateTimeTicks:Q,yAxis3DTimeTicks:q,zAxis3DTitleFont:o,zAxis3DTitleFillStyle:t.axisTitleFillStyle,zAxis3DStrokeStyle:D,zAxis3DNumericTicks:Z,zAxis3DDateTimeTicks:Q,zAxis3DTimeTicks:q,lineSeries3DStrokeStyle:p,pointLineSeries3DStrokeStyle:p,pointLineSeries3DPointStyle:ht,pointSeries3DPointStyle:ht,pointCloudSeries3DPointStyle:t=>new Ah.Pixelated({size:5,fillStyle:g[t%g.length]}),surfaceGridSeries3DFillStyle:v,surfaceGridSeries3DWireframeStyle:B,surfaceScrollingGridSeries3DFillStyle:v,surfaceScrollingGridSeries3DWireframeStyle:B,boxSeries3DFillStyle:v,meshModel3DFillStyle:v(0),polarChartBackgroundFillStyle:t.panelBackgroundFillStyle,polarChartBackgroundStrokeStyle:Wt,polarChartTitleFont:n,polarChartTitleFillStyle:t.titleFillStyle,polarChartTitleShadow:r,polarChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,polarChartSeriesBackgroundStrokeStyle:d,polarSectorFillStyle:tt,polarSectorStrokeStyle:st,polarAmplitudeAxisTitleFont:o,polarAmplitudeAxisTitleFillStyle:t.axisTitleFillStyle,polarAmplitudeAxisTitleShadow:r,polarAmplitudeAxisStrokeStyle:D,polarAmplitudeAxisNumericTicks:Z,polarAmplitudeAxisDateTimeTicks:Q,polarAmplitudeAxisTimeTicks:q,polarRadialAxisTitleFont:o,polarRadialAxisTitleFillStyle:t.axisTitleFillStyle,polarRadialAxisStrokeStyle:D,polarRadialAxisTickStyle:W.setTickPadding(10),polarRadialAxisMarginAfterTicks:0,polarLineSeriesStrokeStyle:p,polarPointLineSeriesFillStyle:v,polarPointLineSeriesStrokeStyle:p,polarPointSeriesFillStyle:v,polarPolygonSeriesFillStyle:T,polarPolygonSeriesStrokeStyle:x,polarAreaSeriesFillStyle:T,polarAreaSeriesStrokeStyle:x,polarHeatmapSeriesFillStyle:v,mapChartBackgroundFillStyle:t.panelBackgroundFillStyle,mapChartBackgroundStrokeStyle:Wt,mapChartTitleFont:n,mapChartTitleFillStyle:t.titleFillStyle,mapChartTitleShadow:r,mapChartFillStyle:rt,mapChartStrokeStyle:new vh({thickness:1,fillStyle:new $({color:t.dataStrokeColorContrastMedium})}),mapChartOutlierRegionFillStyle:V,mapChartOutlierRegionStrokeStyle:new vh({thickness:1,fillStyle:e}),mapChartSeparateRegionFillStyle:ot,mapChartSeparateRegionStrokeStyle:at,dataGridBackgroundFillStyle:t.panelBackgroundFillStyle,dataGridBackgroundStrokeStyle:Wt,dataGridTitleFont:n,dataGridTitleFillStyle:t.titleFillStyle,dataGridTitleShadow:r,dataGridTextFont:a,dataGridTextFillStyle:rt,dataGridCellBackgroundFillStyle:new $({color:t.uiBackgroundColor}),dataGridBorderStrokeStyle:new vh({thickness:.4,fillStyle:new $({color:t.uiBackgroundBorderColor})}),dataGridScrollBarBackgroundFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarBackgroundStrokeStyle:Wt,dataGridScrollBarFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarStrokeStyle:at,dataGridScrollBarButtonFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarButtonStrokeStyle:at,dataGridScrollBarButtonArrowFillStyle:new $({color:t.legendButtonDefaultColor}),dataGridScrollBarThickness:20,sparkLineChartStrokeStyle:p(0),sparkPointChartFillStyle:v(0),sparkBarChartFillStyle:v(0),sparkBarChartStrokeStyle:x(0),sparkAreaChartFillStyle:w(0),sparkAreaChartStrokeStyle:x(0),sparkPieChartFillStyle:v,sparkPieChartStrokeStyle:at,sparkChartBandFillStyle:tt,sparkChartBandStrokeStyle:st,sparkChartConstantLineStrokeStyle:et,dataGridTextShadow:r,textSeriesShadow:r,spiderChartBackgroundFillStyle:t.panelBackgroundFillStyle,spiderChartBackgroundStrokeStyle:Wt,spiderChartTitleFont:n,spiderChartTitleFillStyle:t.titleFillStyle,spiderChartTitleShadow:r,spiderChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,spiderChartSeriesBackgroundStrokeStyle:d,spiderChartWebStyle:new vh({thickness:2,fillStyle:e}),spiderChartScaleLabelFillStyle:t.axisLabelMajorFillStyle,spiderChartScaleLabelFont:a,spiderChartAxisLabelFillStyle:t.axisTitleFillStyle,spiderChartAxisLabelFont:o,spiderChartAxisStrokeStyle:new vh({thickness:2,fillStyle:s}),spiderChartAxisNibStrokeStyle:new vh({thickness:2,fillStyle:i}),spiderSeriesFillStyle:T,spiderSeriesStrokeStyle:x,spiderSeriesPointFillStyle:v,spiderChartScaleLabelShadow:r,pieChartBackgroundFillStyle:t.panelBackgroundFillStyle,pieChartBackgroundStrokeStyle:Wt,pieChartTitleFont:n,pieChartTitleFillStyle:t.titleFillStyle,pieChartTitleShadow:r,pieChartSliceFillStylePalette:v,pieChartSliceStrokeStyle:at,pieChartSliceLabelFont:u,pieChartSliceLabelFillStyle:t.uiTextFillStyle,pieChartConnectorStrokeStyle:dt,pieChartSliceLabelShadow:r,funnelChartBackgroundFillStyle:t.panelBackgroundFillStyle,funnelChartBackgroundStrokeStyle:Wt,funnelChartTitleFont:n,funnelChartTitleFillStyle:t.titleFillStyle,funnelChartTitleShadow:r,funnelChartSliceFillStylePalette:v,funnelChartSliceStrokeStyle:at,funnelChartSliceLabelFont:u,funnelChartSliceLabelFillStyle:t.uiTextFillStyle,funnelChartConnectorStrokeStyle:dt,funnelChartSliceLabelShadow:r,pyramidChartBackgroundFillStyle:t.panelBackgroundFillStyle,pyramidChartBackgroundStrokeStyle:Wt,pyramidChartTitleFont:n,pyramidChartTitleFillStyle:t.titleFillStyle,pyramidChartTitleShadow:r,pyramidChartSliceFillStylePalette:v,pyramidChartSliceStrokeStyle:at,pyramidChartSliceLabelFont:u,pyramidChartSliceLabelFillStyle:t.uiTextFillStyle,pyramidChartConnectorStrokeStyle:dt,gaugeChartValueLabelFont:u.setSize(60),gaugeChartUnitLabelFont:u.setSize(40),gaugeChartTickFont:u.setSize(30),gaugeChartBarThickness:40,gaugeChartValueIndicatorThickness:10,gaugeChartRoundedEdges:!0,gaugeChartNeedleLength:40,gaugeChartStartAngle:225,gaugeChartEndAngle:-45,gaugeChartNeedleAlignment:0,gaugeChartGapBetweenBarAndValueIndicators:10,gaugeChartTickFillStyle:t.uiTextFillStyle,gaugeChartBarGradient:!0,gaugeChartBarStrokeStyle:Wt,gaugeChartUnitLabelFillStyle:t.uiTextFillStyle,gaugeChartValueLabelFillStyle:t.uiTextFillStyle,gaugeChartBarColor:m(255,255,255),gaugeChartGlowColor:m(255,255,64),gaugeChartNeedleFillStyle:new $({color:m(255,255,255)}),gaugeChartNeedleThickness:10,gaugeChartNeedleStrokeStyle:new vh({thickness:2,fillStyle:new $({color:m(0,0,0)})}),pyramidChartSliceLabelShadow:r,gaugeChartBackgroundFillStyle:t.panelBackgroundFillStyle,gaugeChartBackgroundStrokeStyle:Wt,gaugeChartTitleFont:n,gaugeChartTitleFillStyle:t.titleFillStyle,gaugeChartTitleShadow:r,treeMapChartBackgroundFillStyle:t.panelBackgroundFillStyle,treeMapChartBackgroundStrokeStyle:Wt,treeMapChartParentColor:t.treeMapChartParentColor,treeMapChartNodeColors:t.treeMapChartNodeColors,treeMapChartNodeStrokeStyle:new vh({thickness:1,fillStyle:new $({color:S("000")})}),treeMapChartTitleFillStyle:t.titleFillStyle,treeMapChartTitleShadow:r,treeMapChartTitleFont:n,treeMapChartPathLabelFillStyle:nt,treeMapChartPathLabelFont:u,treeMapChartLabelHeaderFillStyle:t.treeMapChartLabelHeaderFillStyle,treeMapChartLabelHeaderFont:n,treeMapChartLabelFillStyle:t.treeMapChartLabelFillStyle,treeMapChartLabelFont:u,treeMapChartCornerRadius:8,uiPanelBackgroundFillStyle:t.panelBackgroundFillStyle,uiPanelBackgroundStrokeStyle:Wt,zoomBandChartDefocusOverlayFillStyle:gt,zoomBandChartSplitterStrokeStyle:vt,zoomBandChartKnobFillStyle:t.zoomBandChartKnobFillStyle,zoomBandChartKnobSize:t.zoomBandChartKnobSize,onScreenMenuBackgroundColor:m(254,204,0,.7),parallelCoordinateChartBackgroundFillStyle:t.panelBackgroundFillStyle,parallelCoordinateChartBackgroundStrokeStyle:Wt,parallelCoordinateChartTitleFont:n,parallelCoordinateChartTitleFillStyle:t.titleFillStyle,parallelCoordinateChartTitleShadow:r,parallelCoordinateChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,parallelCoordinateChartSeriesBackgroundStrokeStyle:d,parallelCoordinateChartSeriesColor:i=>t.dataColorPalette[i%t.dataColorPalette.length].stroke,parallelCoordinateChartSeriesColorUnselected:t.dataColorUnselected,parallelCoordinateChartSeriesLineThickness:2,parallelCoordinateChartPointedSeriesLineStyle:y[0],parallelCoordinateAxisTitleFont:o,parallelCoordinateAxisTitleFillStyle:t.axisTitleFillStyle,parallelCoordinateAxisNumericTicks:Z,parallelCoordinateAxisDateTimeTicks:Q,parallelCoordinateAxisTimeTicks:q,parallelCoordinateAxisStrokeStyle:D,parallelCoordinateAxisRangeSelectorFillStyle:t.seriesBackgroundFillStyle,parallelCoordinateAxisRangeSelectorStrokeStyle:at,parallelCoordinateAxisBackgroundFillStyle:new it({angle:90,stops:[{offset:0,color:t.isDark?m(0,0,0,0):m(255,255,255,0)},{offset:1,color:t.isDark?m(0,0,0,255):m(255,255,255,180)}]}),uiButtonFillStyle:lt,uiButtonFillStyleHidden:ct,uiButtonStrokeStyle:at,uiButtonSize:10,uiBackgroundFillStyle:ot,uiBackgroundStrokeStyle:at,uiTextFillStyle:nt,uiTextFillStyleHidden:ut,uiTextFont:u,legendTitleFillStyle:nt,legendTitleFont:c,legendBorderRadius:5,cursorTickMarkerXBackgroundFillStyle:ot,cursorTickMarkerXBackgroundStrokeStyle:at,cursorTickMarkerXTextFillStyle:nt,cursorTickMarkerXTextFont:u,cursorTickMarkerYBackgroundFillStyle:ot,cursorTickMarkerYBackgroundStrokeStyle:at,cursorTickMarkerYTextFillStyle:nt,cursorTickMarkerYTextFont:u,cursorPointMarkerFillStyle:ft.getFillStyle(),cursorPointMarkerSize:{x:9,y:9},cursorPointMarkerShape:Oe.Cross,cursorResultTableFillStyle:t.resultTableBackgroundFillStyle,cursorResultTableStrokeStyle:new vh({thickness:1,fillStyle:t.resultTableBackgroundBorderFillStyle}),cursorResultTableTextFillStyle:nt,cursorResultTableTextFont:u,cursorResultTableHeaderBackgroundFillStyle:t.resultTableHeaderBackgroundFillStyle,cursorResultTableBorderRadius:5,cursorGridStrokeStyleX:ft,cursorGridStrokeStyleY:ft,cursor3DGridStrokeStyleX:At,cursor3DGridStrokeStyleY:At,cursor3DGridStrokeStyleZ:At,cursor3DTickStrokeStyleX:W.tickStyle,cursor3DTickStrokeStyleY:W.tickStyle,cursor3DTickStrokeStyleZ:W.tickStyle,cursor3DTickLabelFillStyleX:nt,cursor3DTickLabelFillStyleY:nt,cursor3DTickLabelFillStyleZ:nt,cursor3DTickLabelFontX:u,cursor3DTickLabelFontY:u,cursor3DTickLabelFontZ:u,cursor3DTickLabelBackgroundFillStyleX:yt,cursor3DTickLabelBackgroundFillStyleY:yt,cursor3DTickLabelBackgroundFillStyleZ:yt,cursor3DTickLabelBackgroundStrokeStyleX:at,cursor3DTickLabelBackgroundStrokeStyleY:at,cursor3DTickLabelBackgroundStrokeStyleZ:at,cursor3DTickLabelPaddingX:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingY:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingZ:{left:4,right:4,top:4,bottom:4}};return t.overrideThemeProperties&&(pt={...pt,...t.overrideThemeProperties}),pt})(t),e={...i,header1Font:s.xAxisTitleFont,header2Font:s.xAxisNumericTicks.getMajorTickStyle().labelFont,header3Font:s.uiTextFont,mainDataColor:t.dataColorPalette[0].stroke};return{...s,examples:e}},RA="Segoe UI, -apple-system, Verdana, Helvetica",zA=(t,i)=>{const s=new Image;s.crossOrigin="*";const e=`${t}/${i}`;return s.src=e,s},VA=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:Yi(i[e%i.length].stroke,m(255,255,255),.5);return new K({stops:[{color:Yi(h,m(255,255,255),.5*s).setA(100),offset:0},{color:h.setA(100),offset:.5},{color:Yi(h,m(30,30,30),.5*s).setA(100),offset:1}]})},OA=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:Yi(i[e%i.length].stroke,m(255,255,255),.2);return new K({stops:[{color:Yi(h,m(255,255,255),.2*s),offset:0},{color:h,offset:.5},{color:Yi(h,m(0,0,0),.2*s),offset:1}]})},NA=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:Yi(i[e%i.length].stroke,m(255,255,255),.2);return new it({angle:90,stops:[{color:Yi(h,m(255,255,255),.5*s),offset:0},{color:h,offset:.35},{color:Yi(h,m(30,30,30),.5*s),offset:1}]})},GA=(t,i,s)=>(()=>{const s=new Map;return e=>{const h=s.get(e);if(h)return h;const r=(s=>{const e=!0===t?i[s%i.length].stroke:Yi(i[s%i.length].stroke,m(255,255,255),.3);return new it({angle:90,stops:[{color:Yi(e,m(255,255,255),.5),offset:0},{color:e,offset:.35},{color:Yi(e,m(30,30,30),.5),offset:1}]})})(e);return s.set(e,r),r}})(),$A=ns((()=>{const t=m(255,255,255),i=new $({color:t}),s=!0,e=new Ch({spread:1,blur:9,offset:{x:0,y:0},color:m(0,0,0,150)}),h=new K({position:{x:.8,y:.8},extent:Q.farthestCorner,shape:Z.ellipse,stops:[{offset:0,color:m(50,51,52)},{offset:.5,color:m(14,15,16)},{offset:1,color:m(0,0,0)}]}),r=new $({color:m(45,45,45)}),n=new K({position:{x:.5,y:.5},extent:Q.farthestCorner,shape:Z.circle,stops:[{offset:0,color:m(120,120,120,100)},{offset:1,color:m(0,0,0,50)}]}),o=new K({position:{x:.5,y:.5},extent:Q.farthestCorner,shape:Z.circle,stops:[{offset:0,color:m(30,30,30,200)},{offset:1,color:m(0,0,0,255)}]}),a=RA,l=new $({color:m(255,255,220)}),c=new $({color:m(255,255,166)}),u=new $({color:m(255,255,220)}),d=new $({color:m(255,255,200)}),f=d,A=f,g=new it({angle:45,stops:[{offset:0,color:m(230,230,230)},{offset:1,color:m(150,150,150)}]}),v=new $({color:m(220,220,220)}),y=new $({color:m(200,200,200,50)}),p=new $({color:m(200,200,200,150)}),S=new $({color:m(200,200,200,20)}),b=new $({color:m(220,220,220)}),x=new it({angle:0,stops:[{offset:0,color:m(10,10,10,220)},{offset:1,color:m(30,30,30,220)}]}),M=i,w=m(255,255,200),_=new $({color:m(0,0,0,224)}),C=new $({color:m(166,166,166)}),k=new $({color:m(49,53,58)}),T=m(20,20,20),F=m(0,0,0),I=t,P=m(150,150,150),L=m(50,50,50),B=m(50,50,50),D=m(100,100,100),E=m(200,200,200),R=[m(255,255,91,255),m(255,205,91,255),m(255,155,91,255),m(255,196,188,255),m(255,148,184,255),m(219,148,198,255),m(235,196,224,255),m(169,148,198,255),m(148,226,198,255),m(148,255,176,255),m(180,255,165,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),z=t.setA(20),V=m(176,255,157,255),O=m(255,112,76,255),N={mapChartFillStyle:new it({angle:135,stops:[{color:m(255,255,91,255),offset:0},{color:m(255,155,91,255),offset:1}]}),spiderSeriesFillStyle:VA(s,R,.5),pieChartSliceFillStylePalette:OA(s,R,1),funnelChartSliceFillStylePalette:NA(s,R,1),pyramidChartSliceFillStylePalette:NA(s,R,1),rectangleSeriesFillStyle:GA(s,R),gaugeChartBarColor:m(255,255,91,255),gaugeChartGlowColor:m(255,255,91,64)},G=new $({color:m(176,255,157,255)}),U=new $({color:m(255,146,146,255)}),Y=new $({color:m(176,255,157,255)}),H=new $({color:m(230,63,63,255)}),X=new $({color:m(176,255,157,120)}),W=new $({color:m(229,63,63,180)}),j=new $({color:m(27,37,36,255)}),J=new $({color:m(62,27,27,255)}),q=[m(255,0,0),m(255,255,0),m(0,255,0)],tt=[m(10,10,255),m(10,190,255),m(251,255,0),m(255,38,0)],st=[m(255,255,0),m(255,204,0),m(255,128,0),m(255,0,0)],et=[m(0,0,0),m(167,4,69,255),m(255,0,0),m(252,252,168,255)],ht=new K({stops:[{color:m(61,61,80,100),offset:0},{color:m(44,44,55,30),offset:1}]}),rt=new $({color:m(148,148,198,255)}),nt=X.getColor().setA(255),ot=m(100,100,100),at=[m(255,241,149,200),m(255,230,65,200),m(238,211,32,200),m(238,176,32,200),m(255,159,13,200),m(254,120,37,200),m(253,91,56,200),m(253,75,84,200),m(254,95,124,200),m(227,56,160,200),m(226,53,134,200),m(216,90,166,200),m(254,151,206,200),m(237,151,254,200),m(243,177,255,200),m(233,133,252,200),m(210,101,230,200),m(178,61,200,200),m(193,81,156,200),m(217,95,145,200)];return EA({isDark:s,highlightColorOffset:m(60,60,60,60),highlightColorOffsetAxisOverlay:m(255,255,255,40),effect:e,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:h,dashboardSplitterFillStyle:r,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:o,fontFamily:a,fontScaler:1,titleFillStyle:l,axisTitleFillStyle:c,axisLabelMajorFillStyle:u,uiTitleFillStyle:d,uiTextFillStyle:f,cursorTextFillStyle:A,axisLineFillStyle:g,axisTickMajorFillStyle:v,axisGridMajorFillStyle:y,axisTickMinorFillStyle:p,axisGridMinorFillStyle:S,cursorGridFillStyle:b,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:w,resultTableBackgroundFillStyle:_,resultTableBackgroundBorderFillStyle:C,resultTableHeaderBackgroundFillStyle:k,uiBackgroundColor:T,uiBackgroundBorderColor:F,uiStrokeColorContrastHigh:I,uiStrokeColorContrastMedium:P,uiStrokeColorContrastLow:L,dataStrokeColorContrastHigh:B,dataStrokeColorContrastMedium:D,dataStrokeColorContrastLow:E,dataColorPalette:R,dataColorPaletteInverted:[{area:m(190,50,50,100),border:m(210,80,80)}],dataHighlightOverlayColor:z,dataColorPositive:V,dataColorNegative:O,zoomBandChartDefocusOverlayFillStyle:new $({color:m(0,0,0,180)}),zoomBandChartSplitterColor:m(251,251,90),zoomBandChartKnobFillStyle:t=>new Yt({source:zA(t,"zoomBandChart/darkgold-selector.png"),fitMode:$t.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:m(255,255,255,24),overrideThemeProperties:N,treeMapChartParentColor:m(24,30,33),treeMapChartNodeColors:at,treeMapChartLabelFillStyle:new $({color:m(33,33,33)}),treeMapChartLabelHeaderFillStyle:new $({color:m(250,250,250)})},{positiveTextFillStyle:G,negativeTextFillStyle:U,positiveFillStyle:Y,negativeFillStyle:H,positiveAreaFillStyle:X,negativeAreaFillStyle:W,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:J,badGoodColorPalette:q,coldHotColorPalette:tt,intensityColorPalette:st,spectrogramColorPalette:et,bollingerFillStyle:ht,bollingerBorderFillStyle:rt,highlightPointColor:t,highlightDataGridColor:nt,unfocusedDataColor:ot})})),UA=ns((()=>{const t=m(255,255,255),i=new $({color:t}),s=!0,e=new Ch({spread:0,blur:9,offset:{x:0,y:0},color:m(105,255,236,40)}),h=new $({color:m(2,21,30)}),r=new K({stops:[{color:m(19,40,66,150),offset:0},{color:m(0,0,0,150),offset:1}]}),n=new $({color:m(0,5,8,150)}),o=RA,a=i,l=i,c=i,u=i,d=i,f=d,A=new $({color:m(20,224,250,255)}),g=i,v=new $({color:m(61,94,110,100)}),y=new $({color:m(61,94,110,255)}),p=new $({color:m(61,94,110,40)}),S=i,b=new $({color:m(0,18,23,255)}),x=i,M=t,w=new $({color:m(0,0,0,225)}),_=i,C=new $({color:m(18,66,75)}),k=m(0,38,48,220),T=m(0,0,0),F=t,I=m(150,150,150),P=m(19,78,93),L=m(50,50,50),B=m(0,36,48),D=m(200,200,200),E=[m(45,253,253,255),m(44,172,247,255),m(46,100,248,255),m(96,84,199,255),m(184,104,245,255),m(98,160,218,255),m(43,238,245,255),m(38,140,206,255),m(112,96,224,255),m(206,157,255,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),R=t.setA(50),z=m(3,217,194,255),V=m(230,63,63,255),O={mapChartFillStyle:new it({angle:135,stops:[{color:m(118,248,231,255),offset:0},{color:m(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:VA(s,E,1),pieChartSliceFillStylePalette:OA(s,E,1),funnelChartSliceFillStylePalette:NA(s,E,1),pyramidChartSliceFillStylePalette:NA(s,E,1),rectangleSeriesFillStyle:GA(s,E),gaugeChartBarColor:m(3,217,194,255),gaugeChartGlowColor:m(3,217,194,120)},N=new $({color:m(45,253,253,255)}),G=new $({color:m(255,146,146,255)}),U=new $({color:m(45,253,253,255)}),Y=new $({color:m(230,63,63,255)}),H=new $({color:m(1,190,164,120)}),X=new $({color:m(229,63,63,180)}),W=new $({color:m(1,53,57,255)}),j=new $({color:m(62,27,27,255)}),Z=[m(1,104,119,255),m(0,165,144,255),m(0,246,214,255)],Q=[m(0,87,95,255),m(0,125,124,255),m(1,209,182,255),m(0,255,221,255),m(218,112,112,255),m(172,47,47,255)],J=[m(126,255,253,255),m(50,233,230,255),m(0,196,193,255),m(62,138,178,255),m(139,88,191,255),m(162,55,143,255)],q=[m(13,31,52,255),m(101,50,118,255),m(1,142,172,255),m(2,196,170,255),m(0,255,221,255)],tt=new K({stops:[{color:m(122,103,254,70),offset:0},{color:m(178,168,255,10),offset:1}]}),st=new $({color:m(122,103,254,255)}),et=H.getColor().setA(255),ht=m(15,83,83),rt=[m(139,252,252,150),m(60,239,239,150),m(2,201,201,150),m(26,159,159,150),m(15,146,187,150),m(65,168,200,150),m(67,146,207,150),m(64,108,209,150),m(189,64,233,150),m(219,84,238,150),m(192,55,212,150),m(212,98,229,150),m(248,110,211,150),m(251,154,225,150),m(251,154,184,150),m(233,105,144,150),m(255,133,170,150),m(249,110,135,150),m(245,72,101,150),m(210,57,84,150)];return EA({isDark:s,highlightColorOffset:m(60,60,60,60),highlightColorOffsetAxisOverlay:m(255,255,255,40),effect:e,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new Yt({source:zA(t,"themes/turquoiseHexagon.jpg"),fitMode:$t.Fill}),dashboardSplitterFillStyle:h,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:o,fontScaler:1,titleFillStyle:a,axisTitleFillStyle:l,axisLabelMajorFillStyle:c,uiTitleFillStyle:u,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:A,axisTickMajorFillStyle:g,axisGridMajorFillStyle:v,axisTickMinorFillStyle:y,axisGridMinorFillStyle:p,cursorGridFillStyle:S,legendBackgroundFillStyle:b,legendBackgroundBorderFillStyle:x,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:_,resultTableHeaderBackgroundFillStyle:C,uiBackgroundColor:k,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:L,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:D,dataColorPalette:E,dataColorPaletteInverted:[{area:m(170,60,210,100),border:m(210,100,250)}],dataHighlightOverlayColor:R,dataColorPositive:z,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new $({color:m(0,0,0,180)}),zoomBandChartSplitterColor:m(43,244,244),zoomBandChartKnobFillStyle:t=>new Yt({source:zA(t,"zoomBandChart/turquoise-selector.png"),fitMode:$t.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:m(255,255,255,24),overrideThemeProperties:O,treeMapChartParentColor:m(0,35,41),treeMapChartNodeColors:rt,treeMapChartLabelFillStyle:new $({color:m(33,33,33)}),treeMapChartLabelHeaderFillStyle:new $({color:m(250,250,250)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:U,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:X,positiveBackgroundFillStyle:W,negativeBackgroundFillStyle:j,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:J,spectrogramColorPalette:q,bollingerFillStyle:tt,bollingerBorderFillStyle:st,highlightPointColor:t,highlightDataGridColor:et,unfocusedDataColor:ht})})),YA=ns((()=>{const t=!1,i=new Ch({spread:0,blur:6,offset:{x:2,y:-2},color:m(0,0,0,30)}),s=new K({position:{x:.8,y:.8},extent:Q.farthestCorner,shape:Z.ellipse,stops:[{offset:0,color:m(255,255,255)},{offset:1,color:m(255,255,255)}]}),e=new $({color:m(219,227,233,255)}),h=new K({position:{x:.5,y:.5},extent:Q.farthestCorner,shape:Z.circle,stops:[{offset:0,color:m(255,255,255,200)},{offset:1,color:m(240,244,246,200)}]}),r=new K({position:{x:.5,y:.5},extent:Q.farthestCorner,shape:Z.circle,stops:[{offset:0,color:m(255,255,255,255)},{offset:1,color:m(255,255,255,255)}]}),n=RA,o=new $({color:m(33,43,49)}),a=new $({color:m(33,43,49)}),l=new $({color:m(33,43,49)}),c=new $({color:m(33,43,49)}),u=c,d=u,f=new it({angle:45,stops:[{offset:0,color:m(225,225,225)},{offset:1,color:m(225,225,225)}]}),A=new $({color:m(150,150,150,255)}),g=new $({color:m(150,150,150,170)}),v=new $({color:m(150,150,150,150)}),y=new $({color:m(150,150,150,100)}),p=new $({color:m(60,70,80)}),S=new it({angle:0,stops:[{offset:0,color:m(255,255,255,240)},{offset:1,color:m(255,255,255,240)}]}),b=new $({color:m(168,186,199)}),x=m(150,150,150),M=new $({color:m(255,255,255,230)}),w=new $({color:m(168,186,199)}),_=new $({color:m(228,235,243)}),C=m(255,255,255,255),k=m(168,168,199,255),T=m(168,186,199,255),F=m(168,186,199,255),I=m(168,186,199,255),P=m(168,186,199,255),L=m(100,100,100),B=m(200,200,200),D=[m(28,181,140,255),m(255,132,0,255),m(240,39,39,255),m(86,121,251,255),m(2,181,213,255),m(13,212,158,255),m(22,167,3,255),m(234,103,232,255),m(62,183,179,255),m(140,93,3,255),m(155,158,186,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),E=m(150,150,150,80),R=m(46,182,120,255),z=m(255,66,66,255),V=new vh({thickness:2,fillStyle:new $({color:m(168,186,199,255)})}),O={mapChartFillStyle:new it({angle:-45,stops:[{color:m(2,181,213,255),offset:0},{color:m(175,243,255,255),offset:1}]}),spiderSeriesFillStyle:VA(t,D,.8),pieChartSliceFillStylePalette:OA(t,D,.8),funnelChartSliceFillStylePalette:NA(t,D,.5),pyramidChartSliceFillStylePalette:NA(t,D,.5),rectangleSeriesFillStyle:GA(t,D),gaugeChartBarColor:m(46,182,120,255),gaugeChartGlowColor:m(46,182,120,120),chartXYSeriesBackgroundStrokeStyle:V,chart3DSeriesBackgroundStrokeStyle:V,polarChartSeriesBackgroundStrokeStyle:V,spiderChartSeriesBackgroundStrokeStyle:V,dataGridTextFillStyle:new $({color:m(0,88,64,255)})},N=new $({color:m(4,146,108,255)}),G=new $({color:m(240,39,39,255)}),U=new $({color:m(28,181,140,255)}),Y=new $({color:m(230,88,88,255)}),H=new $({color:m(28,181,140,180)}),X=new $({color:m(230,88,88,180)}),W=new $({color:m(229,243,228)}),j=new $({color:m(232,225,216)}),J=[m(193,48,48,255),m(240,234,60,255),m(45,191,55,255)],q=[m(10,19,255,255),m(15,191,250,255),m(249,255,2,255),m(253,133,0,255),m(255,24,0,255)],tt=[m(50,99,213),m(8,179,77),m(255,246,0),m(255,126,0),m(189,36,30)],st=[m(16,64,176),m(8,179,77),m(255,246,0),m(255,126,0),m(168,6,0)],et=new $({color:m(185,198,207,255)}),ht=new K({stops:[{color:m(151,190,220,10),offset:0},{color:m(151,190,220,50),offset:1}]}),rt=H.getColor().setA(255),nt=m(150,150,150),ot=[m(255,243,136,125),m(254,237,99,125),m(255,216,109,125),m(255,172,100,125),m(255,133,101,125),m(255,113,142,125),m(230,103,129,125),m(242,126,219,125),m(255,155,235,125),m(255,181,240,125),m(203,143,255,125),m(208,154,255,125),m(171,188,255,125),m(197,209,255,125),m(171,187,255,125),m(84,167,239,125),m(38,196,214,125),m(38,214,196,125),m(69,225,141,125),m(36,191,88,125)];return EA({isDark:t,highlightColorOffset:m(-60,-60,-60,60),highlightColorOffsetAxisOverlay:m(0,0,0,40),effect:i,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:s,dashboardSplitterFillStyle:e,panelBackgroundFillStyle:h,seriesBackgroundFillStyle:r,fontFamily:n,fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,uiTitleFillStyle:c,uiTextFillStyle:u,cursorTextFillStyle:d,axisLineFillStyle:f,axisTickMajorFillStyle:A,axisGridMajorFillStyle:g,axisTickMinorFillStyle:v,axisGridMinorFillStyle:y,cursorGridFillStyle:p,legendBackgroundFillStyle:S,legendBackgroundBorderFillStyle:b,legendButtonDefaultColor:x,resultTableBackgroundFillStyle:M,resultTableBackgroundBorderFillStyle:w,resultTableHeaderBackgroundFillStyle:_,uiBackgroundColor:C,uiBackgroundBorderColor:k,uiStrokeColorContrastHigh:T,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:I,dataStrokeColorContrastHigh:P,dataStrokeColorContrastMedium:L,dataStrokeColorContrastLow:B,dataColorPalette:D,dataColorPaletteInverted:[{area:m(190,50,50,100),border:m(210,80,80)}],dataHighlightOverlayColor:E,dataColorPositive:R,dataColorNegative:z,zoomBandChartDefocusOverlayFillStyle:new $({color:m(255,255,255,180)}),zoomBandChartSplitterColor:m(80,93,101),zoomBandChartKnobFillStyle:t=>new Yt({source:zA(t,"zoomBandChart/light-selector.png"),fitMode:$t.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:m(0,0,0,24),overrideThemeProperties:O,treeMapChartParentColor:m(217,217,217),treeMapChartNodeColors:ot,treeMapChartLabelFillStyle:new $({color:m(0,0,0)}),treeMapChartLabelHeaderFillStyle:new $({color:m(33,33,33)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:U,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:X,positiveBackgroundFillStyle:W,negativeBackgroundFillStyle:j,badGoodColorPalette:J,coldHotColorPalette:q,intensityColorPalette:tt,spectrogramColorPalette:st,bollingerFillStyle:ht,bollingerBorderFillStyle:et,highlightPointColor:m(0,0,0),highlightDataGridColor:rt,unfocusedDataColor:nt})})),HA=ns((()=>{const t=!1,i=new K({position:{x:.8,y:.8},extent:Q.farthestCorner,shape:Z.ellipse,stops:[{offset:0,color:m(255,255,255)},{offset:1,color:m(255,255,255)}]}),s=new $({color:m(214,236,216,255)}),e=new K({position:{x:.5,y:.5},extent:Q.farthestCorner,shape:Z.circle,stops:[{offset:0,color:m(233,244,231,70)},{offset:1,color:m(233,244,231,200)}]}),h=new K({position:{x:.5,y:.5},extent:Q.farthestCorner,shape:Z.circle,stops:[{offset:0,color:m(255,255,255,255)},{offset:1,color:m(255,255,255,255)}]}),r=RA,n=new $({color:m(1,61,53)}),o=new $({color:m(1,61,53)}),a=new $({color:m(1,61,53)}),l=new $({color:m(1,61,53)}),c=l,u=c,d=new it({angle:45,stops:[{offset:0,color:m(225,225,225)},{offset:1,color:m(225,225,225)}]}),f=new $({color:m(188,211,186,255)}),A=new $({color:m(188,211,186,150)}),g=new $({color:m(188,211,186,50)}),v=new $({color:m(188,211,186,50)}),y=new $({color:m(104,148,111,255)}),p=new it({angle:0,stops:[{offset:0,color:m(255,255,255,240)},{offset:1,color:m(255,255,255,240)}]}),S=new $({color:m(104,148,111)}),b=m(150,150,150),x=new $({color:m(255,255,255,230)}),M=new $({color:m(104,148,111)}),w=new $({color:m(226,236,224)}),_=m(255,255,255,255),C=m(179,201,183,255),k=m(188,211,186,255),T=m(188,211,186,255),F=m(188,211,186,255),I=m(188,211,186,255),P=m(100,100,100),L=m(200,200,200),B=[m(138,195,142,255),m(193,161,114,255),m(178,99,99,255),m(142,156,210,255),m(154,209,219,255),m(164,212,199,255),m(104,156,97,255),m(196,147,195,255),m(92,190,187,255),m(126,100,51,255),m(136,138,157,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),D=m(150,150,150,80),E=m(46,182,84,255),R=m(232,96,96,255),z=new vh({thickness:2,fillStyle:new $({color:m(188,211,186,255)})}),V={mapChartFillStyle:new it({angle:-45,stops:[{color:m(118,160,121,255),offset:0},{color:m(174,227,178,255),offset:1}]}),spiderSeriesFillStyle:VA(t,B,.8),pieChartSliceFillStylePalette:OA(t,B,.8),pyramidChartSliceFillStylePalette:NA(t,B,.5),funnelChartSliceFillStylePalette:NA(t,B,.5),rectangleSeriesFillStyle:GA(t,B),gaugeChartBarColor:m(46,182,84,255),gaugeChartGlowColor:m(46,182,84,120),chartXYSeriesBackgroundStrokeStyle:z,chart3DSeriesBackgroundStrokeStyle:z,polarChartSeriesBackgroundStrokeStyle:z,spiderChartSeriesBackgroundStrokeStyle:z,dataGridTextFillStyle:new $({color:m(77,66,21,255)})},O=new $({color:m(93,151,97,255)}),N=new $({color:m(178,99,99,255)}),G=new $({color:m(138,195,142,255)}),U=new $({color:m(178,99,99,255)}),Y=new $({color:m(138,195,142,180)}),H=new $({color:m(178,99,99,180)}),X=new $({color:m(224,240,237)}),W=new $({color:m(251,227,227)}),j=[m(178,99,99,255),m(215,224,111,255),m(80,186,88,255)],J=[m(62,64,142,255),m(66,131,77,255),m(250,250,135,255),m(202,161,78,255),m(179,53,53,255)],q=[m(64,86,138),m(123,192,205),m(255,252,149),m(220,155,92),m(184,78,74)],tt=[m(64,86,138),m(123,192,205),m(255,252,149),m(220,155,92),m(132,60,57)],st=new $({color:m(185,198,207,255)}),et=new K({stops:[{color:m(151,190,220,10),offset:0},{color:m(151,190,220,50),offset:1}]}),ht=Y.getColor().setA(255),rt=m(150,150,150),nt=[m(242,239,210,150),m(243,238,183,150),m(210,222,136,150),m(204,217,148,150),m(157,190,124,150),m(143,178,72,150),m(198,147,88,150),m(216,148,71,150),m(229,142,103,150),m(225,174,152,150),m(219,149,203,150),m(216,188,209,150),m(109,198,189,150),m(172,206,202,150),m(164,223,217,150),m(174,215,233,150),m(203,225,235,150),m(220,227,243,150),m(207,213,227,150),m(171,182,209,150)];return EA({isDark:t,highlightColorOffset:m(-60,-60,-60,60),highlightColorOffsetAxisOverlay:m(0,0,0,40),effect:void 0,effectsText:!1,effectsDashboardSplitters:!1,lcjsBackgroundFillStyle:i,dashboardSplitterFillStyle:s,panelBackgroundFillStyle:e,seriesBackgroundFillStyle:h,fontFamily:r,fontScaler:1,titleFillStyle:n,axisTitleFillStyle:o,axisLabelMajorFillStyle:a,uiTitleFillStyle:l,uiTextFillStyle:c,cursorTextFillStyle:u,axisLineFillStyle:d,axisTickMajorFillStyle:f,axisGridMajorFillStyle:A,axisTickMinorFillStyle:g,axisGridMinorFillStyle:v,cursorGridFillStyle:y,legendBackgroundFillStyle:p,legendBackgroundBorderFillStyle:S,legendButtonDefaultColor:b,resultTableBackgroundFillStyle:x,resultTableBackgroundBorderFillStyle:M,resultTableHeaderBackgroundFillStyle:w,uiBackgroundColor:_,uiBackgroundBorderColor:C,uiStrokeColorContrastHigh:k,uiStrokeColorContrastMedium:T,uiStrokeColorContrastLow:F,dataStrokeColorContrastHigh:I,dataStrokeColorContrastMedium:P,dataStrokeColorContrastLow:L,dataColorPalette:B,dataColorPaletteInverted:[{area:m(210,70,70,100),border:m(200,110,110)}],dataHighlightOverlayColor:D,dataColorPositive:E,dataColorNegative:R,zoomBandChartDefocusOverlayFillStyle:new $({color:m(255,255,255,180)}),zoomBandChartSplitterColor:m(68,106,64),zoomBandChartKnobFillStyle:t=>new Yt({source:zA(t,"zoomBandChart/lightnature-selector.png"),fitMode:$t.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:m(0,0,0,24),overrideThemeProperties:V,treeMapChartParentColor:m(239,247,238),treeMapChartNodeColors:nt,treeMapChartLabelFillStyle:new $({color:m(0,0,0)}),treeMapChartLabelHeaderFillStyle:new $({color:m(33,33,33)})},{positiveTextFillStyle:O,negativeTextFillStyle:N,positiveFillStyle:G,negativeFillStyle:U,positiveAreaFillStyle:Y,negativeAreaFillStyle:H,positiveBackgroundFillStyle:X,negativeBackgroundFillStyle:W,badGoodColorPalette:j,coldHotColorPalette:J,intensityColorPalette:q,spectrogramColorPalette:tt,bollingerFillStyle:et,bollingerBorderFillStyle:st,highlightPointColor:m(0,0,0),highlightDataGridColor:ht,unfocusedDataColor:rt})})),XA=ns((()=>{const t=m(255,255,255),i=new $({color:t}),s=!0,e=new Ch({spread:1,blur:9,offset:{x:0,y:0},color:m(255,255,255,30)}),h=new $({color:m(6,15,36)}),r=new K({stops:[{color:m(46,13,87,50),offset:0},{color:m(0,0,0,150),offset:1}]}),n=new $({color:m(0,5,8,150)}),o=RA,a=i,l=i,c=i,u=i,d=i,f=d,A=new it({angle:45,stops:[{offset:0,color:m(241,133,255,255)},{offset:1,color:m(115,207,238,255)}]}),g=i,v=new $({color:m(61,94,110,100)}),y=new $({color:m(61,94,110,255)}),p=new $({color:m(61,94,110,40)}),S=i,b=new $({color:m(0,18,23,255)}),x=i,M=m(115,207,238,255),w=new $({color:m(0,0,0,224)}),_=i,C=new $({color:m(68,31,78)}),k=m(0,38,48,255),T=m(0,0,0),F=t,I=m(150,150,150),P=m(19,57,93),L=m(50,50,50),B=m(0,17,48),D=m(200,200,200),E=[m(20,211,237,255),m(98,147,252,255),m(164,73,250,255),m(129,117,253,255),m(95,134,252,255),m(22,133,212,255),m(35,200,242,255),m(104,121,233,255),m(137,69,232,255),m(70,72,241,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),R=t.setA(50),z=m(3,217,194,255),V=m(243,21,110,255),O={mapChartFillStyle:new it({angle:135,stops:[{color:m(118,248,231,255),offset:0},{color:m(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:VA(s,E,.5),pieChartSliceFillStylePalette:OA(s,E,2),funnelChartSliceFillStylePalette:NA(s,E,1),pyramidChartSliceFillStylePalette:NA(s,E,1),rectangleSeriesFillStyle:GA(s,E),gaugeChartBarColor:m(3,217,194,255),gaugeChartGlowColor:m(3,217,194,150)},N=new $({color:m(20,211,237,255)}),G=new $({color:m(253,145,178,255)}),U=new $({color:m(20,211,237,255)}),Y=new $({color:m(239,68,121,255)}),H=new $({color:m(20,211,237,120)}),X=new $({color:m(239,68,121,180)}),W=new $({color:m(1,53,57,255)}),j=new $({color:m(94,19,42,255)}),Z=[m(174,51,132,255),m(204,107,218,255),m(189,215,253,255)],Q=[m(0,63,95,255),m(0,149,255,255),m(0,225,255,255),m(255,154,254,255),m(204,98,170,255),m(139,39,84,255)],J=[m(197,241,255,255),m(70,210,255,255),m(0,164,217,255),m(90,99,222,255),m(138,75,192,255),m(151,27,162,255)],q=[m(13,31,52,255),m(129,54,130,255),m(131,108,176,255),m(7,162,213,255),m(26,247,255,255)],tt=new K({stops:[{color:m(219,42,235,60),offset:0},{color:m(237,73,252,10),offset:1}]}),st=new $({color:m(237,73,252,255)}),et=H.getColor().setA(255),ht=m(8,70,100),rt=[m(149,230,255,150),m(93,213,243,150),m(20,189,223,150),m(5,151,181,150),m(2,138,198,150),m(2,113,198,150),m(97,148,236,150),m(93,111,230,150),m(151,120,223,150),m(128,87,227,150),m(153,52,230,150),m(179,92,245,150),m(248,110,211,150),m(255,155,228,150),m(251,88,207,150),m(255,0,162,150),m(214,73,177,150),m(209,71,159,150),m(238,101,169,150),m(210,57,134,150)];return EA({isDark:s,highlightColorOffset:m(60,60,60,60),highlightColorOffsetAxisOverlay:m(255,255,255,40),effect:e,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new Yt({source:zA(t,"themes/cyberSpace.jpg"),fitMode:$t.Fill}),dashboardSplitterFillStyle:h,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:o,fontScaler:1,titleFillStyle:a,axisTitleFillStyle:l,axisLabelMajorFillStyle:c,uiTitleFillStyle:u,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:A,axisTickMajorFillStyle:g,axisGridMajorFillStyle:v,axisTickMinorFillStyle:y,axisGridMinorFillStyle:p,cursorGridFillStyle:S,legendBackgroundFillStyle:b,legendBackgroundBorderFillStyle:x,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:_,resultTableHeaderBackgroundFillStyle:C,uiBackgroundColor:k,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:L,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:D,dataColorPalette:E,dataColorPaletteInverted:[{area:m(41,130,255,100),border:m(45,110,240)}],dataHighlightOverlayColor:R,dataColorPositive:z,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new $({color:m(0,0,0,180)}),zoomBandChartSplitterColor:m(219,119,255),zoomBandChartKnobFillStyle:t=>new Yt({source:zA(t,"zoomBandChart/cyberspace-selector.png"),fitMode:$t.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:m(255,255,255,24),overrideThemeProperties:O,treeMapChartParentColor:m(30,30,59),treeMapChartNodeColors:rt,treeMapChartLabelFillStyle:new $({color:m(33,33,33)}),treeMapChartLabelHeaderFillStyle:new $({color:m(250,250,250)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:U,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:X,positiveBackgroundFillStyle:W,negativeBackgroundFillStyle:j,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:J,spectrogramColorPalette:q,bollingerFillStyle:tt,bollingerBorderFillStyle:st,highlightPointColor:t,highlightDataGridColor:et,unfocusedDataColor:ht})})),WA={};Object.defineProperty(WA,"darkGold",{get:$A,enumerable:!0}),Object.defineProperty(WA,"turquoiseHexagon",{get:UA,enumerable:!0}),Object.defineProperty(WA,"light",{get:YA,enumerable:!0}),Object.defineProperty(WA,"lightNature",{get:HA,enumerable:!0}),Object.defineProperty(WA,"cyberSpace",{get:XA,enumerable:!0});const jA=WA,ZA=jA.darkGold,QA=t=>({...t,effect:void 0}),JA=t=>{var i,s,e;return{...t,dataGridTextShadow:void 0,pieChartSliceLabelShadow:void 0,funnelChartSliceLabelShadow:void 0,spiderChartScaleLabelShadow:void 0,pyramidChartSliceLabelShadow:void 0,xAxisTimeTicks:t.xAxisTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxisTimeTicks:t.yAxisTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxis3DTimeTicks:t.xAxis3DTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxis3DTimeTicks:t.yAxis3DTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),zAxis3DTimeTicks:t.zAxis3DTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxisNumericTicks:t.xAxisNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxisNumericTicks:t.yAxisNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxisDateTimeTicks:t.xAxisDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxisDateTimeTicks:t.yAxisDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxis3DNumericTicks:t.xAxis3DNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxis3DNumericTicks:t.yAxis3DNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),zAxis3DNumericTicks:t.zAxis3DNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxis3DDateTimeTicks:t.xAxis3DDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxis3DDateTimeTicks:t.yAxis3DDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),zAxis3DDateTimeTicks:t.zAxis3DDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),barChartValueAxisTicks:t.barChartValueAxisTicks.setTickStyle((t=>t.setLabelShadow(void 0))),polarAmplitudeAxisNumericTicks:t.polarAmplitudeAxisNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),parallelCoordinateAxisTimeTicks:null===(i=t.parallelCoordinateAxisTimeTicks)||void 0===i?void 0:i.setTickStyle((t=>t.setLabelShadow(void 0))),parallelCoordinateAxisNumericTicks:null===(s=t.parallelCoordinateAxisNumericTicks)||void 0===s?void 0:s.setTickStyle((t=>t.setLabelShadow(void 0))),parallelCoordinateAxisDateTimeTicks:null===(e=t.parallelCoordinateAxisDateTimeTicks)||void 0===e?void 0:e.setTickStyle((t=>t.setLabelShadow(void 0)))}};class KA extends Ua{constructor(t,i,s,e,h,r){let n;super(t,i,s,i.wA("dataGrid bg",0),e,i.St._t.dataGridBackgroundFillStyle,i.St._t.dataGridBackgroundStrokeStyle,i.St._t.dataGridTitleFont,i.St._t.dataGridTitleFillStyle,i.St._t.dataGridTitleShadow,r),this.YI=[],this.HI=[],this.XI=[],this.WI=new Map,this.jI=!0,this.ZI=!0,this.QI=!0,this.JI=!0,this.KI=!0,this.qI=!0,this.tP=!0,this.iP=!0,this.sP=!0,this.eP=!0,this.hP=!0,this.rP=!0,this.nP=!0,this.oP=!0,this.aP=!0,this.lP=!0,this.cP=new Set,this.uP=new Set,this.dP=!0,this.fP=!0,this.AP=(t,i)=>{t.borders=void 0===i?sg:{...t.borders,...i},this.gP(t),this.rP=!0,this.St.Ls()},this.gP=t=>{t.borders&&(!1===t.borders.top&&this.vP(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!1}:{...this.yP,bottom:!1}})),!1===t.borders.bottom&&this.vP(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!1}:{...this.yP,top:!1}})),!1===t.borders.left&&this.vP(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!1}:{...this.yP,right:!1}})),!1===t.borders.right&&this.vP(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!1}:{...this.yP,left:!1}})),!0===t.borders.top&&this.vP(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!0}:{...this.yP,bottom:!0}})),!0===t.borders.bottom&&this.vP(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!0}:{...this.yP,top:!0}})),!0===t.borders.left&&this.vP(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!0}:{...this.yP,right:!0}})),!0===t.borders.right&&this.vP(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!0}:{...this.yP,left:!0}})))},this.pP={x:0,y:0},this.cells=new zt,this.D=new zt,this.St.Zo(Gr.En),this.Sh.Sr("Data Grid"),this.mP=s.d2({scaleXYConstructor:be}),this.mP.x.gf=Rf,this.SP=s.d2({scaleXYConstructor:be}),this.bP={x:0,y:0},this.xP=this._t.dataGridTextFont,this.MP=this._t.dataGridTextFillStyle,this.yP={top:!0,bottom:!0,left:!0,right:!0},this.wP=this._t.dataGridCellBackgroundFillStyle,this._P=this._t.dataGridBorderStrokeStyle,this.CP="left-center",this.kP={left:5,right:5,bottom:5,top:5},this.TP=i.bm("dataGrid grid bg",0),this.FP=i.bm("dataGrid cell bg",1),this.IP=i.Ng("dataGrid cell content",0),this.PP=i.Ng("dataGrid scrollbar bg",1),this.LP=i.Ng("dataGrid scrollbar fg",2),this.BP=this.TP.Qc(this.SP).Ie(this._t.dataGridBackgroundFillStyle).Fe(Wt).setPointerEvents(!1),this.DP=this.IP.Gf(this.mP).setPointerEvents(!1),this.EP=new El((()=>{const t=this.FP.Pe(this.mP).setPointerEvents(!0);return this.cells.Nt(t,{getExtraData:()=>this.WI.get(t),continueIfNotPrevented:(t,i,s)=>{const e=Te(this.getUserInteractions().scroll,"wheel",i,i.shiftKey,i.ctrlKey,i.altKey);if(e&&"wheel"===t&&i instanceof WheelEvent){Bi(i),this.RP({x:!0===e.x?Math.sign(i.deltaY):0,y:!0===e.y?Math.sign(i.deltaY):0});const t=e.on;t&&t({event:i})}}}),t})),this.zP=new El((()=>this.IP.Pe(this.mP).setPointerEvents(!1))),this.VP=new El((()=>this.IP.Yr(this.mP).setPointerEvents(!1))),this.OP=new El((()=>this.IP.tv(this.mP,{},[Cl.InternalUI,{type:"DataPattern",args:{pattern:"ProgressiveX"}}]).setPointerEvents(!1))),this.NP=new El((()=>this.IP.Ge(this.mP).setPointerEvents(!1))),this.GP=new El((()=>this.IP.wy(this.mP).setPointerEvents(!1))),this.$P=new El((()=>this.IP.Pe(this.mP).setPointerEvents(!1))),this.UP=new El((()=>this.IP.Yx(this.mP).setPointerEvents(!1))),this.YP=new El((()=>this.IP.Yu(this.mP).setPointerEvents(!1))),this.HP={background:this.PP.Pe(this.SP).setPointerEvents(!0).Ie(this._t.dataGridScrollBarBackgroundFillStyle).Fe(this._t.dataGridScrollBarBackgroundStrokeStyle),scrollbar:this.LP.Pe(this.SP).setPointerEvents(!0).Ie(this._t.dataGridScrollBarFillStyle).Fe(this._t.dataGridScrollBarStrokeStyle),button1:this.PP.Pe(this.SP).setPointerEvents(!0).Ie(this._t.dataGridScrollBarButtonFillStyle).Fe(this._t.dataGridScrollBarButtonStrokeStyle),button2:this.PP.Pe(this.SP).setPointerEvents(!0).Ie(this._t.dataGridScrollBarButtonFillStyle).Fe(this._t.dataGridScrollBarButtonStrokeStyle),buttonIcon1:this.LP.hd(this.SP).setPointerEvents(!1).Ne(Wt).sd(this._t.dataGridScrollBarButtonArrowFillStyle).rd(Oe.Triangle),buttonIcon2:this.LP.hd(this.SP).setPointerEvents(!1).Ne(Wt).sd(this._t.dataGridScrollBarButtonArrowFillStyle).rd(Oe.Triangle)},this.XP={background:this.PP.Pe(this.SP).setPointerEvents(!0).Ie(this._t.dataGridScrollBarBackgroundFillStyle).Fe(this._t.dataGridScrollBarBackgroundStrokeStyle),scrollbar:this.LP.Pe(this.SP).setPointerEvents(!0).Ie(this._t.dataGridScrollBarFillStyle).Fe(this._t.dataGridScrollBarStrokeStyle),button1:this.PP.Pe(this.SP).setPointerEvents(!0).Ie(this._t.dataGridScrollBarButtonFillStyle).Fe(this._t.dataGridScrollBarButtonStrokeStyle),button2:this.PP.Pe(this.SP).setPointerEvents(!0).Ie(this._t.dataGridScrollBarButtonFillStyle).Fe(this._t.dataGridScrollBarButtonStrokeStyle),buttonIcon1:this.LP.hd(this.SP).setPointerEvents(!1).Ne(Wt).sd(this._t.dataGridScrollBarButtonArrowFillStyle).rd(Oe.Triangle),buttonIcon2:this.LP.hd(this.SP).setPointerEvents(!1).Ne(Wt).sd(this._t.dataGridScrollBarButtonArrowFillStyle).rd(Oe.Triangle)},this.HP.scrollbar.addEventListener("pointerenter",(t=>{n=this.engine.setMouseStyle(tr.Vertical,n)})),this.HP.scrollbar.addEventListener("pointerleave",(t=>{n=this.engine.restoreMouseStyle(n)})),this.HP.scrollbar.addEventListener("pointerdown",(t=>{Bi(t);let i=t;const s=t=>{const s=t.clientY-i.clientY;i=t,this.WP({x:0,y:-s})},e=i=>{i.pointerId===t.pointerId&&(ni.removeEventListener("pointermove",s),ni.removeEventListener("pointerup",e))};ni.addEventListener("pointermove",s),ni.addEventListener("pointerup",e)})),this.HP.scrollbar.addEventListener("wheel",(t=>{Bi(t),this.RP({x:0,y:Math.sign(t.deltaY)})})),this.HP.background.addEventListener("pointerenter",(t=>{n=this.engine.setMouseStyle(tr.Vertical,n)})),this.HP.background.addEventListener("pointerleave",(t=>{n=this.engine.restoreMouseStyle(n)})),this.HP.background.addEventListener("click",(t=>{Bi(t);const i=this.St.pa(t),s=ot({x:i.engineX,y:i.engineY},this.St.ot,this.SP);this.RP({x:0,y:s.y>this.HP.scrollbar.il().y?-1:1})})),this.HP.background.addEventListener("wheel",(t=>{Bi(t),this.RP({x:0,y:Math.sign(t.deltaY)})})),this.HP.button1.addEventListener("pointerenter",(t=>{n=this.engine.setMouseStyle(tr.Point,n)})),this.HP.button1.addEventListener("pointerleave",(t=>{n=this.engine.restoreMouseStyle(n)})),this.HP.button1.addEventListener("click",(t=>{Bi(t),this.RP({x:0,y:1})})),this.HP.button2.addEventListener("click",(t=>{Bi(t),this.RP({x:0,y:-1})})),this.HP.button2.addEventListener("pointerenter",(t=>{n=this.engine.setMouseStyle(tr.Point,n)})),this.HP.button2.addEventListener("pointerleave",(t=>{n=this.engine.restoreMouseStyle(n)})),this.XP.scrollbar.addEventListener("pointerenter",(t=>{n=this.engine.setMouseStyle(tr.Horizontal,n)})),this.XP.scrollbar.addEventListener("pointerleave",(t=>{n=this.engine.restoreMouseStyle(n)})),this.XP.scrollbar.addEventListener("pointerdown",(t=>{Bi(t);let i=t;const s=t=>{const s=t.clientX-i.clientX;i=t,this.WP({x:s,y:0})},e=i=>{i.pointerId===t.pointerId&&(ni.removeEventListener("pointermove",s),ni.removeEventListener("pointerup",e))};ni.addEventListener("pointermove",s),ni.addEventListener("pointerup",e)})),this.XP.scrollbar.addEventListener("wheel",(t=>{Bi(t),this.RP({x:Math.sign(t.deltaY),y:0})})),this.XP.background.addEventListener("pointerenter",(t=>{n=this.engine.setMouseStyle(tr.Horizontal,n)})),this.XP.background.addEventListener("pointerleave",(t=>{n=this.engine.restoreMouseStyle(n)})),this.XP.background.addEventListener("click",(t=>{Bi(t);const i=this.St.pa(t),s=ot({x:i.engineX,y:i.engineY},this.St.ot,this.SP);this.RP({x:s.x<this.XP.scrollbar.il().x?-1:1,y:0})})),this.XP.background.addEventListener("wheel",(t=>{Bi(t),this.RP({x:Math.sign(t.deltaY),y:0})})),this.XP.button1.addEventListener("pointerenter",(t=>{n=this.engine.setMouseStyle(tr.Point,n)})),this.XP.button1.addEventListener("pointerleave",(t=>{n=this.engine.restoreMouseStyle(n)})),this.XP.button1.addEventListener("click",(t=>{Bi(t),this.RP({x:-1,y:0})})),this.XP.button2.addEventListener("click",(t=>{Bi(t),this.RP({x:1,y:0})})),this.XP.button2.addEventListener("pointerenter",(t=>{n=this.engine.setMouseStyle(tr.Point,n)})),this.XP.button2.addEventListener("pointerleave",(t=>{n=this.engine.restoreMouseStyle(n)})),this.MA(h,this.uiScale),this.addEventListener("resize",(()=>{this.jI=!0,this.St.Ls(),this.mP.Z(this.xf.xi()),this.SP.Z(this.xf.xi())})),this.jP=this.vs.kf([this.BP])}getMinimumSize(){return{x:200,y:200}}setAnimationsEnabled(t){return this}Gd(){return[]}dispose(){return super.dispose(),this.TP.G(),this.FP.G(),this.IP.G(),this.PP.G(),this.LP.G(),Na(this.mP),Na(this.SP),this.VP.mv(),this.EP.mv(),this.zP.mv(),this.OP.mv(),this.NP.mv(),this.GP.mv(),this.$P.mv(),this.UP.mv(),this.YP.mv(),this}H(){return super.H(),this.mP.H(),this.SP.H(),this}X(){return super.X(),this.mP.X(),this.SP.X(),this}setBackgroundEffect(t){return this.jP.Ps(t),this.St.Ls(),this}getBackgroundEffect(){return this.jP.Bs()}setUserInteractions(t){return this.ze=void 0===t?{scroll:!1}:t,this}getUserInteractions(){return hi({scroll:{wheel:{x:!1,y:!0},ctrl:{wheel:{x:!0,y:!1}}}},this.ze)}setGridBackgroundFillStyle(t){return this.BP.Ie(t),this.St.Ls(),this}getGridBackgroundFillStyle(){return this.BP.$h()}setCellContent(t,i,s,e,h){if("number"==typeof s&&void 0!==e&&void 0!==h){const r=s,n=e,o=h;let a=[];for(let s=t;s<t+r;s+=1)for(let t=i;t<i+n;t+=1){const i=this.vP(s,t);i&&a.push(i)}a=is(a);let l={highlight:0};for(const t of a){const i=this.YI.indexOf(t);i<0||(l={...l,highlight:t.highlight,textFont:t.textFont,textFillStyle:t.textFillStyle,contentAlignment:t.contentAlignment,borders:t.borders,padding:t.padding,backgroundFillStyle:t.backgroundFillStyle},this.YI.splice(i,1))}const c={...l,column:t,row:i,columnSpan:r,rowSpan:n,content:o};this.YI.push(c),this.JI=!0,"string"==typeof c.content||"number"==typeof c.content?this.ZI=!0:this.QI=!0,this.St.Ls()}else this.ZP(t,i,s);return this}setColumnContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.ZP(t,e,s)}return this}setRowContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.ZP(e,t,s)}return this}setTableContent(t){const i=t.length;if(0===i)return this;const s=t[0].length;if(0===s)return this;for(let e=0;e<s;e+=1)for(let s=0;s<i;s+=1){const i=t[s][e];this.ZP(e,s,i)}return this}setColumnWidth(t,i){let s=this.HI.find((i=>i.column===t));return s||(s={column:t,min:void 0,max:void 0},this.HI.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.HI.splice(this.HI.indexOf(s),1):(s.min=i,s.max=i),this.qI=!0,this.St.Ls(),this}setRowHeight(t,i){let s=this.XI.find((i=>i.row===t));return s||(s={row:t,min:void 0,max:void 0},this.XI.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.XI.splice(this.XI.indexOf(s),1):(s.min=i,s.max=i),this.qI=!0,this.St.Ls(),this}setColumnPaddings(t,i){return"number"==typeof i&&(i=A(i,i,i,i)),this.QP(t,(t=>this.JP(t,i))),this}setRowPaddings(t,i){return"number"==typeof i&&(i=A(i,i,i,i)),this.KP(t,(t=>this.JP(t,i))),this}setCellPadding(t,i,s){return"number"==typeof s&&(s=A(s,s,s,s)),this.vP(t,i,(t=>this.JP(t,s))),this}setCellsPaddings(t){return"number"==typeof t&&(t=A(t,t,t,t)),this.kP={...this.kP,...t},this.qP((t=>this.JP(t,this.kP))),this}setCellBorders(t,i,s){return this.vP(t,i,(t=>this.AP(t,s))),this}setRowBorders(t,i){return this.KP(t,(t=>this.AP(t,i))),this}setColumnBorders(t,i){return this.QP(t,(t=>this.AP(t,i))),this}setCellsBorders(t){return this.yP=void 0===t?sg:t,this.qP((t=>this.AP(t,this.yP))),this}setCellsBorderStrokeStyle(t){return this._P="function"==typeof t?t(this._P):t,this.oP=!0,this.St.Ls(),this}setColumnTextFillStyle(t,i){return this.QP(t,(t=>this.tL(t,i))),this}setRowTextFillStyle(t,i){return this.KP(t,(t=>this.tL(t,i))),this}setCellTextFillStyle(t,i,s){return this.vP(t,i,(t=>this.tL(t,s))),this}setCellsTextFillStyle(t){return this.MP="function"==typeof t?t(this.MP):t,this.qP((t=>this.tL(t,this.MP))),this}setColumnTextFont(t,i){return this.QP(t,(t=>this.iL(t,i))),this}setRowTextFont(t,i){return this.KP(t,(t=>this.iL(t,i))),this}setCellTextFont(t,i,s){return this.vP(t,i,(t=>this.iL(t,s))),this}setCellsTextFont(t){return this.xP="function"==typeof t?t(this.xP):t,this.qP((t=>this.iL(t,this.xP))),this}setColumnContentAlignment(t,i){return this.QP(t,(t=>this.sL(t,i))),this}setRowContentAlignment(t,i){return this.KP(t,(t=>this.sL(t,i))),this}setCellContentAlignment(t,i,s){return this.vP(t,i,(t=>this.sL(t,s))),this}setCellsContentAlignment(t){return this.CP=t,this.qP((t=>this.sL(t,this.CP))),this}setCellBackgroundFillStyle(t,i,s){return this.vP(t,i,(t=>this.eL(t,s))),this}setColumnBackgroundFillStyle(t,i){return this.QP(t,(t=>this.eL(t,i))),this}setRowBackgroundFillStyle(t,i){return this.KP(t,(t=>this.eL(t,i))),this}setCellsBackgroundFillStyle(t){return this.wP="function"==typeof t?t(this.wP):t,this.qP((t=>this.eL(t,this.wP))),this}setCellHighlight(t,i,s){return this.vP(t,i,(t=>{t.highlight=es(s)})),this.nP=!0,this.St.Ls(),this}setColumnHighlight(t,i){const s=es(i);return this.QP(t,(t=>{t.highlight=s})),this.nP=!0,this.St.Ls(),this}setRowHighlight(t,i){const s=es(i);return this.KP(t,(t=>{t.highlight=s})),this.nP=!0,this.St.Ls(),this}removeCell(t,i){return this.vP(t,i,(t=>this.YI.splice(this.YI.indexOf(t),1))),this.KI=!0,this.St.Ls(),this}removeRow(t){return this.KP(t,(t=>this.YI.splice(this.YI.indexOf(t),1))),this.YI.filter((i=>i.row>t)).forEach((t=>{t.row-=1})),this.KI=!0,this.St.Ls(),this}removeColumn(t){return this.QP(t,(t=>this.YI.splice(this.YI.indexOf(t),1))),this.YI.filter((i=>i.column>t)).forEach((t=>{t.column-=1})),this.KI=!0,this.St.Ls(),this}removeCells(){return this.YI.splice(0),this.KI=!0,this.St.Ls(),this}getColumnMax(){return 0===this.YI.length?0:this.YI.reduce(((t,i)=>Math.max(t,i.column+i.columnSpan-1)),0)}getRowMax(){return 0===this.YI.length?0:this.YI.reduce(((t,i)=>Math.max(t,i.row+i.rowSpan-1)),0)}Le(t){var i;super.Le(t),Ya.LA(this.Sh,this._A),super.xA();const s=Math.round(this._P.Xt()),e=s/2;let h=this.ZI||this.QI||this.JI||this.KI||this.qI||this.tP||this.hP||this.rP||this.oP||this.lP;if(h){this.YI.forEach((t=>{this.uP.add(t.column)})),this.YI.forEach((t=>{this.cP.add(t.row)}));const t=this.VP.yv(),i=this.hL(e,t);t.finishPlot();const r=this.rL(this.uP.size,i),n=this.nL(this.cP.size,i),o=r.reduce(Is,0)+s,a=n.reduce(Is,0)+s,l=new Array(r.length+1).fill(0).map(((t,i)=>r.reduce(((t,s,e)=>t+(e<i?s:0)),0))),c=new Array(n.length+1).fill(0).map(((t,i)=>n.reduce(((t,s,e)=>t+(e<i?s:0)),0)));if(this.oL){const t=this.oL.columnWidths.every(((t,i)=>t===r[i])),i=this.oL.rowHeights.every(((t,i)=>t===n[i]));t&&i&&(h=!1)}this.oL={columnWidths:r,rowHeights:n,dataGridWidth:o,dataGridHeight:a,columnWidthsCumulative:l,rowHeightsCumulative:c,cellsContentSizes:i}}const r=h||this.QI||this.JI||this.KI||this.iP||this.sP||this.eP||this.rP||this.nP||this.oP||this.jI||this.lP;if((r||this.aP)&&this.oL){const t=this.xf.getInnerIntervalPixels(),h=Ya.PA(this.Sh,this._A),n=[this.nn.left+e,this.nn.right+e],o=[this.nn.bottom+e,this.nn.top+h+e],a={x:t.x-n[0]-n[1],y:t.y-o[0]-o[1]},l=[this.nn.left,this.nn.right],c=[this.nn.bottom,this.nn.top+h],u={x:Math.round(t.x-l[0]-l[1]),y:Math.round(t.y-c[0]-c[1])},d={x:Math.ceil(e),y:Math.floor(u.y-e)};this.SP.Ji(n).Ki(o).qi(0,a.x).ts(0,a.y);const f=null!==(i=this._t.dataGridScrollBarThickness)&&void 0!==i?i:20,A={x:Math.min(a.x,this.oL.dataGridWidth+f)-f,y:Math.min(a.y,this.oL.dataGridHeight+f)-f};0===this.pP.x&&0===this.pP.y||(this.bP.y+=this.oL.dataGridHeight*this.pP.y/A.y,this.bP.x+=this.oL.dataGridWidth*this.pP.x/A.x,this.pP.x=0,this.pP.y=0),this.bP.y=fi(this.bP.y,a.y-this.oL.dataGridHeight-f,0),this.bP.x=fi(this.bP.x,0,this.oL.dataGridWidth-a.x+f);const g=this.bP;this.mP.Ji(l).Ki(c).qi(g.x,u.x+g.x).ts(g.y,u.y+g.y);const v={x:this.mP.x.pi(),y:this.mP.y.pi()+f,width:this.mP.x.Si()+s-f,height:this.mP.y.Si()+s-f};this.IP.dm(v),this.FP.dm(v);const y=this.oL,p=[{x:this.mP.x.getInnerStart(),y:this.mP.y.getInnerStart()},{x:this.mP.x.getInnerEnd(),y:this.mP.y.getInnerStart()},{x:this.mP.x.getInnerEnd(),y:this.mP.y.getInnerEnd()},{x:this.mP.x.getInnerStart(),y:this.mP.y.getInnerEnd()}];y.cellsContentSizes.forEach((t=>{var i;const s={x:d.x+y.columnWidthsCumulative[t.cell.column],y:d.y-y.rowHeightsCumulative[t.cell.row+t.cell.rowSpan]},e={x:s.x+y.columnWidths[t.cell.column],y:s.y+y.rowHeights[t.cell.row]},h=ks([s,{x:e.x,y:s.y},e,{x:s.x,y:e.y}],p);null===(i=t.text)||void 0===i||i.setVisible(h)})),r&&this.aL(d,this.oL,s);const m=a.y-f<this.oL.dataGridHeight;this.HP.background.setVisible(m).Be({x:A.x,y:f}).Z({x:f,y:A.y}),this.HP.scrollbar.setVisible(m).Be({x:A.x,y:f+A.y-f+-(A.y-2*f)*(-this.bP.y/this.oL.dataGridHeight)}).Z({x:f,y:-(A.y-2*f)*(A.y/this.oL.dataGridHeight)}),this.HP.button1.setVisible(m).Be({x:A.x,y:f}).Z({x:f,y:f}),this.HP.buttonIcon1.setVisible(m).ud(.5*f).od(0).td(new $n({dataPattern:null}).appendSample({x:A.x+f/2,y:1.5*f})),this.HP.button2.setVisible(m).Be({x:A.x,y:A.y}).Z({x:f,y:f}),this.HP.buttonIcon2.setVisible(m).ud(.5*f).od(180).td(new $n({dataPattern:null}).appendSample({x:A.x+f/2,y:A.y+f/2}));const S=a.x-f<this.oL.dataGridWidth,b=Math.max(a.y-this.oL.dataGridHeight-f,0);this.XP.background.setVisible(S).Be({x:0,y:b}).Z({x:A.x,y:f}),this.XP.scrollbar.setVisible(S).Be({x:f+(A.x-2*f)*(this.bP.x/this.oL.dataGridWidth),y:b}).Z({x:(A.x-2*f)*(A.x/this.oL.dataGridWidth),y:f}),this.XP.button1.setVisible(S).Be({x:0,y:b}).Z({x:f,y:f}),this.XP.buttonIcon1.setVisible(S).ud(.5*f).od(90).td(new $n({dataPattern:null}).appendSample({x:f/2,y:b+f/2})),this.XP.button2.setVisible(S).Be({x:A.x-f,y:b}).Z({x:f,y:f}),this.XP.buttonIcon2.setVisible(S).ud(.5*f).od(270).td(new $n({dataPattern:null}).appendSample({x:A.x-f/2,y:b+f/2})),this.BP.Hl([d,{x:d.x+A.x+(m?f:0),y:d.y},{x:d.x+A.x+(m?f:0),y:d.y-A.y},{x:d.x+A.x,y:d.y-A.y},{x:d.x+A.x,y:d.y-A.y-(S?f:0)},{x:d.x,y:d.y-A.y-(S?f:0)}])}this.jI=!1,this.ZI=!1,this.QI=!1,this.JI=!1,this.KI=!1,this.qI=!1,this.tP=!1,this.iP=!1,this.sP=!1,this.eP=!1,this.hP=!1,this.rP=!1,this.nP=!1,this.oP=!1,this.aP=!1,this.lP=!1}hL(t,i){const s=[],e={left:Math.ceil(t),right:Math.ceil(t),top:Math.ceil(t),bottom:Math.ceil(t)};for(const t of this.YI){const{content:h}=t,r={...this.kP,...t.padding};let n,o,a,l={x:0,y:0};if("string"==typeof h||"number"==typeof h){const s=String(h);n=i.add(),l=n.Sr(s).Xh(t.textFont||this.xP).hr().zu()}if(zf(h)&&(o=h,l={x:200,y:50}),wh(h)){const t=this.St.lL(h);t.cL()?(a=h,l=a.xi()):t.uL((()=>{this.lP=!0,this.St.Ls()}))}if(n||o||a){r.top=Math.round(r.top),r.left=Math.round(r.left),r.right=Math.round(r.right),r.bottom=Math.round(r.bottom);const i={x:Math.round(l.x+r.left+r.right+e.left+e.right),y:Math.round(l.y+r.top+r.bottom+e.top+e.bottom)};s.push({cell:t,contentSize:i,text:n,sparkChart:o,icon:a,cellPadding:r,cellMargin:e})}}return s}aL(t,i,s){const{cellsContentSizes:e,columnWidths:h,columnWidthsCumulative:r,rowHeights:n,rowHeightsCumulative:o}=i;this.DP.Ne(this._P),this.WI.clear();const a={cellBackground:this.EP.yv(),cellIconRect:this.zP.yv(),lineSet:this.OP.yv(),line:this.NP.yv(),pointSet:this.GP.yv(),rect:this.$P.yv(),junction:this.UP.yv(),arc:this.YP.yv()},l=[];for(const i of e){const{cell:e,text:c,sparkChart:u,icon:d,cellPadding:f,cellMargin:A}=i,g={column:e.column,row:e.row},v={x:t.x+r[e.column],y:t.y-o[e.row+e.rowSpan]},y={x:v.x+A.left,y:v.y+A.bottom},p={x:y.x+f.left,y:y.y+f.bottom},m={x:new Array(e.columnSpan).fill(0).reduce(((t,i,s)=>t+h[e.column+s]),0),y:new Array(e.rowSpan).fill(0).reduce(((t,i,s)=>t+n[e.row+s]),0)},S={x:m.x-A.left-A.right,y:m.y-A.top-A.bottom},b={x:S.x-f.left-f.right,y:S.y-f.top-f.bottom};if(c){const t=ig(p,b,e.contentAlignment||this.CP);c.Be(t[0]).ul({x:t[1],y:t[2]}).Ie(this.dL(e.textFillStyle||this.MP,e.content,this.MP)).Bt(e.highlight).mr(this._t.dataGridTextShadow)}const x=this.dL(e.backgroundFillStyle||this.wP,e.content);if(x!==V){const t=a.cellBackground.add();t.Be(v).Z(m).Ie(x).Fe(Wt).Bt(e.highlight),this.WI.set(t,g)}const M=e.borders||this.yP;if(M&&tg(v,m,M,s,l),u){const t=p,i=b;Vf(u,a,this.mP,t,i,this._t,this.aA,e.highlight)}if(d){const t=d.xi(),i=ig(p,b,e.contentAlignment||this.CP);a.cellIconRect.add().Be({x:i[0].x+t.x*(-.5-i[1]/2),y:i[0].y+t.y*(-.5-i[2]/2)}).Z(t).Ie(new Yt({source:d.Ws,fitMode:$t.Stretch})).Fe(Wt).Bt(e.highlight)}}this.DP.ti();for(const t of l)this.DP.lo().Uf(t[0],t[1]);a.cellBackground.finishPlot(),a.cellIconRect.finishPlot(),a.lineSet.finishPlot(),a.line.finishPlot(),a.pointSet.finishPlot(),a.rect.finishPlot(),a.junction.finishPlot(),a.arc.finishPlot()}rL(t,i){const s=new Array(t).fill(0);for(const t of this.uP.values()){const e=i.filter((i=>t>=i.cell.column&&t+1<=i.cell.column+i.cell.columnSpan)).reduce(((t,i)=>{const s=i.contentSize.x/i.cell.columnSpan;return Math.max(t,s)}),0),h=this.HI.find((i=>i.column===t)),r=h?fi(e,void 0!==h.min?h.min:xs,void 0!==h.max?h.max:bs):e;s[t]=r}return s}nL(t,i){const s=new Array(t).fill(0);for(const t of this.cP.values()){const e=i.filter((i=>t>=i.cell.row&&t+1<=i.cell.row+i.cell.rowSpan)).reduce(((t,i)=>{const s=i.contentSize.y/i.cell.rowSpan;return Math.max(t,s)}),0),h=this.XI.find((i=>i.row===t)),r=h?fi(e,void 0!==h.min?h.min:xs,void 0!==h.max?h.max:bs):e;s[t]=r}return s}dL(t,i,s){if(j(t)){try{const s=Number(i);return new $({color:t.getPalette().getColors(s,void 0)})}catch(t){}return s||V}return t}tL(t,i){t.textFillStyle="function"==typeof i?i(t.textFillStyle||this.MP):i,this.eP=!0,this.St.Ls()}iL(t,i){t.textFont="function"==typeof i?i(t.textFont||this.xP):i,this.hP=!0,this.St.Ls()}eL(t,i){t.backgroundFillStyle="function"==typeof i?i(t.backgroundFillStyle||this.wP):i,this.sP=!0,this.St.Ls()}sL(t,i){t.contentAlignment=i,this.iP=!0,this.St.Ls()}JP(t,i){t.padding={...t.padding,...i},this.tP=!0,this.St.Ls()}ZP(t,i,s){let e=this.vP(t,i);e?e.content=s:(e={column:t,row:i,columnSpan:1,rowSpan:1,content:s,highlight:0},this.YI.push(e),this.JI=!0),"string"==typeof e.content||"number"==typeof e.content?this.ZI=!0:this.QI=!0,this.St.Ls()}qP(t){this.YI.forEach((i=>t(i)))}vP(t,i,s){const e=this.YI.find((s=>t>=s.column&&t+1<=s.column+s.columnSpan&&i>=s.row&&i+1<=s.row+s.rowSpan));return e&&s&&s(e),e}QP(t,i){const s=this.YI.filter((i=>t>=i.column&&t+1<=i.column+i.columnSpan));for(const t of s)t&&i(t)}KP(t,i){const s=this.YI.filter((i=>t>=i.row&&t+1<=i.row+i.rowSpan));for(const t of s)t&&i(t)}RP(t){var i,s,e,h,r,n;if(this.oL){if(0!==t.y){const h=null!==(s=null===(i=this.oL.rowHeightsCumulative.map(((t,i)=>({value:t,index:i}))).reverse().find((i=>-this.bP.y+(t.y>0?1:0)>=i.value)))||void 0===i?void 0:i.index)&&void 0!==s?s:0,r=null!==(e=this.oL.rowHeightsCumulative[h+t.y])&&void 0!==e?e:0;this.bP.y=-r,this.aP=!0,this.St.Ls()}if(0!==t.x){const i=null!==(r=null===(h=this.oL.columnWidthsCumulative.map(((t,i)=>({value:t,index:i}))).reverse().find((i=>this.bP.x+(t.x>0?1:0)>=i.value)))||void 0===h?void 0:h.index)&&void 0!==r?r:0,s=null!==(n=this.oL.columnWidthsCumulative[i+t.x])&&void 0!==n?n:0;this.bP.x=s,this.aP=!0,this.St.Ls()}}}WP(t){this.oL&&(this.pP.x+=t.x,this.pP.y+=t.y,this.aP=!0,this.St.Ls())}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}var qA;!function(t){t.Center="center",t.RightCenter="right-center",t.LeftCenter="left-center",t.RightTop="right-top",t.LeftTop="left-top",t.RightBottom="right-bottom",t.LeftBottom="left-bottom",t.CenterTop="center-top",t.CenterBottom="center-bottom"}(qA||(qA={}));const tg=(t,i,s,e,h)=>{const r={x:t.x,y:t.y},n={x:t.x,y:t.y+i.y},o={x:t.x+i.x,y:t.y},a={x:t.x+i.x,y:t.y+i.y};s.top&&h.push([n,a]),s.bottom&&h.push([r,o]),s.left&&h.push([r,n]),s.right&&h.push([o,a])},ig=(t,i,s)=>{const e=t.x,h=t.x+i.x,n=t.x+i.x/2,o=t.y+i.y,a=t.y,l=t.y+i.y/2;switch(s){case"left-center":return[r(e,l),-1,0];case"right-center":return[r(h,l),1,0];case"center":return[r(n,l),0,0];case"left-bottom":return[r(e,a),-1,-1];case"right-bottom":return[r(h,a),1,-1];case"center-bottom":return[r(n,a),0,-1];case"left-top":return[r(e,o),-1,1];case"right-top":return[r(h,o),1,1];case"center-top":return[r(n,o),0,1]}return rs(0,`Unidentified DataGrid cell content alignment option: ${s}`)},sg={top:!1,bottom:!1,left:!1,right:!1},eg=(t,i)=>i?t.x:t.y,hg=(t,i,s,e)=>1===i&&e===(s?t.columnIndex:t.rowIndex)||-1===i&&e===(s?t.columnIndex+t.columnSpan:t.rowIndex+t.rowSpan),rg=(t,i,s,e,h,r)=>{const n=i.length,o=Math.sign(e),a=[],l=i.reduce(((t,i)=>t+i));for(let t=1;t<=n-1;t+=1)a.push(eg(h,r)*i.slice(0,t).reduce(((t,i)=>t+i),0)/l);const c=a.map((t=>0));let u=a[s-1]+e;for(let i=s;i>0&&i<n;i+=o){const e=t.filter((t=>hg(t,o,r,i))).reduce(((t,i)=>Math.max(t,eg(i.panel.getMinimumSize()||{x:0,y:0},r))),20),n=a[i-1];if(1===o&&u>eg(h,r)-e||-1===o&&u<0+e){c.fill(0);break}if(i!==s&&(1===o?n>u:n<u))break;c[i-1]=u-n,u+=e*o}const d=c.map(((t,i)=>a[i]+t)),f=d.map(((t,i)=>(t-(i>0?d[i-1]:0))/eg(h,r)));return f.push(1-f.reduce(((t,i)=>t+i),0)),f};class ng{constructor(t,i,s,e,h){this.coordsRelative="relative",this.coordsClient="client",this.dt=!1,this.YI=new Array,this.fL=[],this.Kf=[],this.AL=void 0,this.gL=!0,this.vL=!0,this.yL=!0,this.sA=!1,this.pL=!0,this.mL=()=>{this.pL=!0,this.St.Ls()},this.SL=[],this.bL=t=>{for(let i=0;i<this.YI.length;i+=1)if(this.YI[i].panel===t){this.YI.splice(i,1),this.gL=!0,this.St.Ls();break}},this.xL=t=>{const i=this.fL.indexOf(t);i>=0&&this.fL.splice(i,1)},this.oA=t=>{const i=this.Kf.indexOf(t);i>=0&&this.Kf.splice(i,1)},this.ML=(t,i,s,e,h)=>{if(this.wL(i,s,e,h)){const r={panel:t,columnIndex:i,rowIndex:s,columnSpan:e,rowSpan:h};return this.YI.push(r),this._L(r),this.gL=!0,t}throw new Jt("Out of dashboard range.")},this.D=new zt,this.CL=i.numberOfRows,this.kL=i.numberOfColumns,this.aA=t,this.TL=i,this.FL=e;const r=this.kL*this.CL;this.IL={x:new Ef(new Array(this.kL).fill(1)),y:new Ef(new Array(this.CL).fill(1))},this._t=s._t,this.PL=this._t.dashboardSplitterStyle,this.ah=!1!==(null==i?void 0:i.animationsEnabled),this.LL=Df(s,r),this.BL=s.Bk("dashboard splitters",500001),this.Sb=()=>this.LL.Lk(),this.AA=this.LL.Dk(),this.vs=s.vs.ys(this,{DL:{}}),this.vs.DL.Ps(this._t.effectsDashboardSplitters);const n=s.xi();this.uiScale=rt.d2({scaleXYConstructor:be}).qi(0,100).ts(0,100).Z(n),this.xf=rt.d2({scaleXYConstructor:be}).qi(0,this.uiScale.x.getCellSize()).ts(0,this.uiScale.y.getCellSize()).Z(n),this.EL=s.RL.bind(s),this.zL=s.VL.bind(s),this.OL=s.NL.bind(s),this.GL=s.$L.bind(s),this.oa=s.oa.bind(s),this.la=s.la.bind(s),this.engine=s.cA,this.St=s.uA,s.V("resize",this.mL),s.Ls();const o=t=>{this.sA=t.isInView,this.D.R("inviewchange",{isInView:this.sA})};s.V("inviewchanged",o),this.mA=()=>{s.N("inviewchanged",o)},this.UL(),this.setAnimationsEnabled(this.ah),this.createChartXY=t=>{const i=og(t,this.TL,this.ah);return this.ML(new Md(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createSpiderChart=t=>{const i=og(t,this.TL,this.ah);return this.ML(new kf(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPolarChart=t=>{const i=og(t,this.TL,this.ah);return this.ML(new Od(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPieChart=t=>{const i=og(t,this.TL,this.ah),s=i&&i.type?i.type:Tl;return this.ML(new s(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,this,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createGaugeChart=t=>{const i=og(t,this.TL,this.ah);return this.ML(new CA(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,this,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createFunnelChart=t=>{const i=og(t,this.TL,this.ah),s=i&&i.type?i.type:Jd;return this.ML(new s(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,this,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPyramidChart=t=>{const i=og(t,this.TL,this.ah),s=t&&t.type?t.type:uf;return this.ML(new s(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,this,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createUIPanel=t=>{const i=og(t,this.TL,this.ah);return this.ML(new Ga(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createLegendBoxPanel=t=>{const i=og(t,this.TL,this.ah);return this.ML(new Sc(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createZoomBandChart=t=>{const i=og(t,this.TL,this.ah);return this.ML(new Pd(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createMapChart=t=>{const i=og(t,this.TL,this.ah);return this.ML(new Tc(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createChart3D=t=>{const i=og(t,this.TL,this.ah),s=new yc(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,this,i);return this.ML(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createDataGrid=t=>{const i=og(t,this.TL,this.ah),s=new KA(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,this);return this.ML(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createBarChart=t=>{const i=og(t,this.TL,this.ah),s=new dA(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,this,i);return this.ML(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createParallelCoordinateChart=t=>{const i=og(t,this.TL,this.ah),s=new BA(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,this,i);return this.ML(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createParallelCoordinateChart=t=>{const i=og(t,this.TL,this.ah),s=new BA(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,this,i);return this.ML(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)}}YL(t,i){return t+i*this.kL}HL(t,i){return{d1:s=>new s.scale1DConstructor("x"===s.dimension?t.columnIndex:t.rowIndex,"x"===s.dimension?t.columnSpan:t.rowSpan,"x"===s.dimension?this.kL:this.CL,"x"===s.dimension?i.x:i.y),d2:s=>(new s.scaleXYConstructor).ht({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.kL,y:this.CL},i),d3:()=>new et({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.kL,y:this.CL},i)}}setWidth(t){return t instanceof Array||(t=[t,t]),this.EL(t[0]),this.zL(t[1]),this}setHeight(t){return t instanceof Array||(t=[t,t]),this.OL(t[0]),this.GL(t[1]),this}getWidth(){return this.oa()}getHeight(){return this.la()}setBackgroundFillStyle(t){return this.engine.setBackgroundFillStyle(t),this.BL.Ls(),this}getBackgroundFillStyle(){return this.engine.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.engine.setBackgroundStrokeStyle(t),this.BL.Ls(),this}getBackgroundStrokeStyle(){return this.engine.getBackgroundStrokeStyle()}getTheme(){return this._t}setSplitterStyle(t){const i=this.PL;return this.PL="function"==typeof t?t(this.PL):t,this.XL(i),this}getSplitterStyle(){return this.PL}setSplitterEffect(t){return this.vs.DL.Ps(t),this.St.Ls(),this}getSplitterEffect(){return this.vs.DL.Bs()}setAnimationHighlight(t){return this.yL=t,this.SL.forEach((i=>this.St.xs.zs(i.line,t))),this}getAnimationHighlight(){return this.yL}XL(t){for(const t of this.SL)t.line.Ne(this.PL);this.UL()}setColumnWidth(t,i){const s=this.IL.x.C();return t>=0&&t<s.length&&(s[t]=i,this.IL.x._(s)),this.mL(),this}getColumnWidth(t){const i=this.IL.x.C();if(t>=i.length)throw new Jt("Column index is out of dashboard range.");return i[t]}setRowHeight(t,i){const s=this.IL.y.C();return t>=0&&t<s.length&&(s[Math.abs(s.length-1-t)]=i,this.IL.y._(s)),this.mL(),this}getRowHeight(t){const i=this.IL.y.C();if(t>=i.length)throw new Jt("Row index is out of dashboard range.");return i[Math.abs(i.length-1-t)]}getSizePixels(){return this.xf.getInnerIntervalPixels()}WL(t,i,s){if(s&&Math.abs(t.x)>0)this.jL(i,t.x);else{if(s||!(Math.abs(t.y)>0))return;this.ZL(i,t.y)}for(const t of this.YI)t.panel.X();this.mL()}ZL(t,i){const s=rg(this.YI,this.IL.y.C(),t,i,this.xf.xi(),!1);this.IL.y._(s),this.mL()}jL(t,i){const s=rg(this.YI,this.IL.x.C(),t,i,this.xf.xi(),!0);this.IL.x._(s),this.mL()}QL(){this.SL.forEach((t=>t.line.dispose())),this.SL.length=0;for(let t=1;t<=this.kL-1;t+=1)for(let i=0;i<=this.CL-1;i+=1)if(void 0!==this.YI.find((s=>Ls(i,s.rowIndex,s.rowIndex+s.rowSpan-1)&&(t===s.columnIndex||t===s.columnIndex+s.columnSpan)))){const s=this.BL.Ge(this.xf).Ne(this.PL);s.addEventListener("pointerenter",(i=>{this.SL.forEach((i=>{"vertical"===i.alignment&&i.column===t&&(this.St.xs.Rs(i.line,1),this.BL.JL(i.line))})),this.AL=this.engine.setMouseStyle(tr.ResizeColumn,this.AL),this.St.Ls()})),s.addEventListener("pointerleave",(i=>{this.SL.forEach((i=>{"vertical"===i.alignment&&i.column===t&&this.St.xs.Rs(i.line,0)})),this.AL=this.engine.restoreMouseStyle(this.AL),this.St.Ls()})),s.addEventListener("pointerdown",(i=>{Bi(i);let s=i;const e=i=>{Bi(i),this.AL=this.engine.setMouseStyle(tr.ResizeColumn,this.AL),this.SL.forEach((i=>{"vertical"===i.alignment&&i.column===t&&(this.St.xs.Rs(i.line,1),this.BL.JL(i.line))}));const e={x:i.clientX-s.clientX,y:i.clientY-s.clientY};s=i,this.WL(e,t,!0)},h=s=>{s.pointerId===i.pointerId&&(this.SL.forEach((i=>{"vertical"===i.alignment&&i.column===t&&this.St.xs.Rs(i.line,0)})),this.AL=this.engine.restoreMouseStyle(this.AL),ni.removeEventListener("pointermove",e),ni.removeEventListener("pointerup",h))};ni.addEventListener("pointermove",e),ni.addEventListener("pointerup",h)})),this.St.xs.bs(s,(t=>s.Bt(t)),{animationEnabled:this.yL}),this.SL.push({row:i,column:t,line:s,alignment:"vertical"})}for(let t=1;t<=this.CL-1;t+=1)for(let i=0;i<=this.kL-1;i+=1)if(void 0!==this.YI.find((s=>Ls(i,s.columnIndex,s.columnIndex+s.columnSpan-1)&&(t===s.rowIndex||t===s.rowIndex+s.rowSpan)))){const s=this.BL.Ge(this.xf).Ne(this.PL);s.addEventListener("pointerenter",(i=>{this.SL.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&(this.St.xs.Rs(i.line,1),this.BL.JL(i.line))})),this.AL=this.engine.setMouseStyle(tr.ResizeRow,this.AL),this.St.Ls()})),s.addEventListener("pointerleave",(i=>{this.SL.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&this.St.xs.Rs(i.line,0)})),this.AL=this.engine.restoreMouseStyle(this.AL),this.St.Ls()})),s.addEventListener("pointerdown",(i=>{Bi(i);let s=i;const e=i=>{Bi(i),this.AL=this.engine.setMouseStyle(tr.ResizeRow,this.AL),this.SL.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&(this.St.xs.Rs(i.line,1),this.BL.JL(i.line))}));const e={x:i.clientX-s.clientX,y:-(i.clientY-s.clientY)};s=i,this.WL(e,t,!1)},h=s=>{s.pointerId===i.pointerId&&(this.SL.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&this.St.xs.Rs(i.line,0)})),this.AL=this.engine.restoreMouseStyle(this.AL),ni.removeEventListener("pointermove",e),ni.removeEventListener("pointerup",h))};ni.addEventListener("pointermove",e),ni.addEventListener("pointerup",h)})),this.St.xs.bs(s,(t=>s.Bt(t)),{animationEnabled:this.yL}),this.SL.push({row:t,column:i,line:s,alignment:"horizontal"})}this.vs.DL._s(this.SL.map((t=>t.line)))}KL(){const t=this.xf.xi(),i=this.IL.x.C(),s=i.reduce(((t,i)=>t+i)),e=this.IL.y.C(),h=e.reduce(((t,i)=>t+i));this.SL.forEach((n=>{if("vertical"===n.alignment){const o=r(t.x*i.slice(0,n.column).reduce(((t,i)=>t+i),0)/s,t.y*e.slice(0,n.row).reduce(((t,i)=>t+i),0)/h),a=r(o.x,t.y*e.slice(0,n.row+1).reduce(((t,i)=>t+i),0)/h);n.line.Ue(o).$e(a)}else{const o=r(t.x*i.slice(0,n.column).reduce(((t,i)=>t+i),0)/s,t.y*e.slice(0,n.row).reduce(((t,i)=>t+i),0)/h),a=r(t.x*i.slice(0,n.column+1).reduce(((t,i)=>t+i),0)/s,o.y);n.line.Ue(o).$e(a)}}))}setAnimationsEnabled(t){return this.ah=t,this.getCells().filter((t=>t.panel instanceof Ua)).forEach((i=>i.panel.setAnimationsEnabled(t))),this.setAnimationHighlight(this.ah),this}getAnimationsEnabled(){return this.ah}getCells(){return this.YI.slice()}dispose(){return this.dt||(this.mA&&this.mA(),this.YI.slice().forEach((t=>t.panel.dispose())),this.fL.slice().forEach((t=>t.dispose())),this.Kf.slice().forEach((t=>t.dispose())),this.dt=!0,this.FL(),this.D.R("dispose",{})),this}isDisposed(){return this.dt}getIsInView(){return this.sA}saveToFile(t,i,s){return Ea(this.engine,t,i,s),this}qL(t){if(this.pL){const t=this.St.ot.xi(),i=t.x,s=t.y;this.uiScale.Z(i,s),this.xf.Z(i,s);const e=this.uiScale.getInnerIntervalPixels();this.xf.qi(0,e.x).ts(0,e.y),this.D.R("resize",{width:e.x,height:e.y,engineWidth:i,engineHeight:s}),this.vL=!0}this.gL&&(this.QL(),this.gL=!1,this.vL=!0),this.vL&&(this.KL(),this.vL=!1);for(const i of this.YI)i.panel.Le(t);return this.fL.forEach((t=>t.hr())),this.fL.forEach((t=>t.Le())),this.Kf.forEach((t=>t.hr())),this.Kf.forEach((t=>t.Le())),this.pL=!1,this}H(){for(const t of this.YI)t.panel.H();return this.xf.x.H(),this.xf.y.H(),this.uiScale.x.H(),this.uiScale.y.H(),this}X(){for(const t of this.YI)t.panel.X();return this.xf.x.X(),this.xf.y.X(),this.uiScale.x.X(),this.uiScale.y.X(),this}translateCoordinate(t,i,s){return Va(t,i,s,this.xf,this.St)}addUIElement(t=xo,i=this.uiScale){i=za(i,this.xf);const s=Ra(t,this.Sb(),this.uiScale,i,this.xL,this._t);return this.fL.push(s),s}addLegendBox(t=Eo,i=this.uiScale){i=za(i,this.xf);const s=Ra(t,this.AA,this.uiScale,i,this.oA,this._t);return s.setDraggingMode(si.notDraggable),this.Kf.push(s),s}getLegendBoxes(){return this.Kf}wL(t,i,s,e){return i>=0&&t>=0&&i+e<=this.CL&&t+s<=this.kL}_L(t){const i=this.PL,s=i===Wt?0:i.getThickness()/2,e={left:t.columnIndex>0?s:0,top:t.rowIndex<this.CL-1?s:0,right:t.columnIndex<this.kL-1?s:0,bottom:t.rowIndex>0?s:0};t.panel.$r(e)}UL(){this.uiScale.x.yi([0,0]),this.uiScale.y.yi([0,0]),this.xf.x.yi([0,0]),this.xf.y.yi([0,0]);for(const t of this.YI)this._L(t);this.St.Ls()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const og=(t,i,s)=>{const e={...t,columnSpan:t.columnSpan||1,rowSpan:t.rowSpan||1,animationsEnabled:void 0!==t.animationsEnabled?t.animationsEnabled:s};var h,r;return e.rowIndex=(h=e.rowIndex,r=e.rowSpan,i.numberOfRows-(h+r)),e},ag=(t,i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAsa2NhQlgAACxranVtYgAAAB5qdW1kYzJwYQARABCAAACqADibcQNjMnBhAAAALEVqdW1iAAAAR2p1bWRjMm1hABEAEIAAAKoAOJtxA3Vybjp1dWlkOjlmZDBkZjkzLTVmMDMtNDczYi1hZThhLTFhNDM4NmMzNmJhYQAAAAGzanVtYgAAAClqdW1kYzJhcwARABCAAACqADibcQNjMnBhLmFzc2VydGlvbnMAAAAA12p1bWIAAAAmanVtZGNib3IAEQAQgAAAqgA4m3EDYzJwYS5hY3Rpb25zAAAAAKljYm9yoWdhY3Rpb25zgaNmYWN0aW9ua2MycGEuZWRpdGVkbXNvZnR3YXJlQWdlbnRtQWRvYmUgRmlyZWZseXFkaWdpdGFsU291cmNlVHlwZXhTaHR0cDovL2N2LmlwdGMub3JnL25ld3Njb2Rlcy9kaWdpdGFsc291cmNldHlwZS9jb21wb3NpdGVXaXRoVHJhaW5lZEFsZ29yaXRobWljTWVkaWEAAACranVtYgAAAChqdW1kY2JvcgARABCAAACqADibcQNjMnBhLmhhc2guZGF0YQAAAAB7Y2JvcqVqZXhjbHVzaW9uc4GiZXN0YXJ0GCFmbGVuZ3RoGSx3ZG5hbWVuanVtYmYgbWFuaWZlc3RjYWxnZnNoYTI1NmRoYXNoWCBvErgv+J0u7bVCYViyMUgw5yMb8idAv1erA3/DALx9NWNwYWRIAAAAAAAAAAAAAAIDanVtYgAAACRqdW1kYzJjbAARABCAAACqADibcQNjMnBhLmNsYWltAAAAAddjYm9yqGhkYzp0aXRsZW9HZW5lcmF0ZWQgaW1hZ2VpZGM6Zm9ybWF0aWltYWdlL3BuZ2ppbnN0YW5jZUlEeCh4bXAuaWlkOjI3NEMxQjdDN0E0MDExRUVBQkZFQUNFQjJDOTA0NzVCb2NsYWltX2dlbmVyYXRvcng2QWRvYmVfUGhvdG9zaG9wLzI1LjIuMCBhZG9iZV9jMnBhLzAuNy42IGMycGEtcnMvMC4yNS4ydGNsYWltX2dlbmVyYXRvcl9pbmZvgb9kbmFtZW9BZG9iZSBQaG90b3Nob3BndmVyc2lvbmYyNS4yLjD/aXNpZ25hdHVyZXgZc2VsZiNqdW1iZj1jMnBhLnNpZ25hdHVyZWphc3NlcnRpb25zgqJjdXJseCdzZWxmI2p1bWJmPWMycGEuYXNzZXJ0aW9ucy9jMnBhLmFjdGlvbnNkaGFzaFggSmnBvf+o3kEweL4k7cz4MTrB0WSVNFZxoA1rBrM31K+iY3VybHgpc2VsZiNqdW1iZj1jMnBhLmFzc2VydGlvbnMvYzJwYS5oYXNoLmRhdGFkaGFzaFggL2g6Dghd536quyA5vPlS/9NGA5WvLRkkKJmqn0VxCoFjYWxnZnNoYTI1NgAAKEBqdW1iAAAAKGp1bWRjMmNzABEAEIAAAKoAOJtxA2MycGEuc2lnbmF0dXJlAAAAKBBjYm9y0oREoQE4JKNmc2lnVHN0oWl0c3RUb2tlbnOBoWN2YWxZDjYwgg4yMAMCAQAwgg4pBgkqhkiG9w0BBwKggg4aMIIOFgIBAzEPMA0GCWCGSAFlAwQCAQUAMIGCBgsqhkiG9w0BCRABBKBzBHEwbwIBAQYJYIZIAYb9bAcBMDEwDQYJYIZIAWUDBAIBBQAEIHj4VpJDPzaO0x4hOPnj/w1GTHuwXU0IpBf4VVocIQzoAhB3SsxvHza2JR1fKj3Mjr0yGA8yMDIzMTEwMzExNTcyNloCCQCyOL6wAOGCbaCCC70wggUHMIIC76ADAgECAhAFHp6R1x6RCrvkPVzt0N3ZMA0GCSqGSIb3DQEBCwUAMGMxCzAJBgNVBAYTAlVTMRcwFQYDVQQKEw5EaWdpQ2VydCwgSW5jLjE7MDkGA1UEAxMyRGlnaUNlcnQgVHJ1c3RlZCBHNCBSU0E0MDk2IFNIQTI1NiBUaW1lU3RhbXBpbmcgQ0EwHhcNMjMwOTA4MDAwMDAwWhcNMzQxMjA3MjM1OTU5WjBYMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xMDAuBgNVBAMTJ0RpZ2lDZXJ0IEFkb2JlIEFBVEwgVGltZXN0YW1wIFJlc3BvbmRlcjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABE0srlH5A/+15/MFl1asNh8Q8TubOsEVfu0qlJrF0smjtwL1IeHZ/AB7J59u1Trpho1BDN85lfTY30rNBsfT+myjggGLMIIBhzAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH/BAIwADAWBgNVHSUBAf8EDDAKBggrBgEFBQcDCDAgBgNVHSAEGTAXMAgGBmeBDAEEAjALBglghkgBhv1sBwEwHwYDVR0jBBgwFoAUuhbZbU2FL3MpdpovdYxqII+eyG8wHQYDVR0OBBYEFLA1qlbDIamLztO4vIsWJVed7zThMFoGA1UdHwRTMFEwT6BNoEuGSWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcmwwgZAGCCsGAQUFBwEBBIGDMIGAMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wWAYIKwYBBQUHMAKGTGh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcnQwDQYJKoZIhvcNAQELBQADggIBAHgrjELHhBCEWJSCyRX7lsL0C9LJgbX1ryVYySNRxHkMR2LqC7PQZRJgDNR+kJop8P5v2Bzp/jMrzw4U4pY6rYv3I8HpFlJa4uBwUTIUgHWpi8Xxd1JEEX94POODi7HySekX60A055BozFb7GGVaxb0LreQTRXnkr6ggPNUPX9Gh+2ScOxlTdQQLgZbkdYvxo3Ap6cy9riZijRxOZqiOyWSxMUhgKxeKzwrFW6Xbe0awNhOUXZzIxc4ixpKzWSItpPJ30ZiBQn49U3ADYTnshbN9ZkTA1pHf/Nov2ZUvvddkZ8UYvwo9vBvLTDvnmABnRMBKaXYAs3ZCvw9CkDPOWTeUJMFRAtmUx52ohaA3nD8bCJ6UfpQ2pFfOdShwpb6GKv0g+BgcdIG2LHPJ0Ufmr+XmpgZgq/HIge0hjcCADpjDgq2z4B0L4xtAA1M8MrUx02hxb7104nFKqMuv5zJTQl3sgwqXUyP+9zHQP9y/Z5Fx/AQWrOXCW56dV7P4cFBJl8zHqinlhkOStZ1m22+9Hlq+eC0hJ2lkF1LuzRdJJb/51LXoPKRnopFDng6XpoD7eG6w4YpAx9+P00JuUoBsYSrdsuFiyWyQQGBAnjI69ggbSLcW+hJytuinaxawVlItJkS2eV5Z4XsxPg7f82uRkdtN0hTHeI93CN3OWeRebnK7MIIGrjCCBJagAwIBAgIQBzY3tyRUfNhHrP0oZipeWzANBgkqhkiG9w0BAQsFADBiMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29tMSEwHwYDVQQDExhEaWdpQ2VydCBUcnVzdGVkIFJvb3QgRzQwHhcNMjIwMzIzMDAwMDAwWhcNMzcwMzIyMjM1OTU5WjBjMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xOzA5BgNVBAMTMkRpZ2lDZXJ0IFRydXN0ZWQgRzQgUlNBNDA5NiBTSEEyNTYgVGltZVN0YW1waW5nIENBMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAxoY1BkmzwT1ySVFVxyUDxPKRN6mXUaHW0oPRnkyibaCwzIP5WvYRoUQVQl+kiPNo+n3znIkLf50fng8zH1ATCyZzlm34V6gCff1DtITaEfFzsbPuK4CEiiIY3+vaPcQXf6sZKz5C3GeO6lE98NZW1OcoLevTsbV15x8GZY2UKdPZ7Gnf2ZCHRgB720RBidx8ald68Dd5n12sy+iEZLRS8nZH92GDGd1ftFQLIWhuNyG7QKxfst5Kfc71ORJn7w6lY2zkpsUdzTYNXNXmG6jBZHRAp8ByxbpOH7G1WE15/tePc5OsLDnipUjW8LAxE6lXKZYnLvWHpo9OdhVVJnCYJn+gGkcgQ+NDY4B7dW4nJZCYOjgRs/b2nuY7W+yB3iIU2YIqx5K/oN7jPqJz+ucfWmyU8lKVEStYdEAoq3NDzt9KoRxrOMUp88qqlnNCaJ+2RrOdOqPVA+C/8KI8ykLcGEh/FDTP0kyr75s9/g64ZCr6dSgkQe1CvwWcZklSUPRR8zZJTYsg0ixXNXkrqPNFYLwjjVj33GHek/45wPmyMKVM1+mYSlg+0wOI/rOP015LdhJRk8mMDDtbiiKowSYI+RQQEgN9XyO7ZONj4KbhPvbCdLI/Hgl27KtdRnXiYKNYCQEoAA6EVO7O6V3IXjASvUaetdN2udIOa5kM0jO0zbECAwEAAaOCAV0wggFZMBIGA1UdEwEB/wQIMAYBAf8CAQAwHQYDVR0OBBYEFLoW2W1NhS9zKXaaL3WMaiCPnshvMB8GA1UdIwQYMBaAFOzX44LScV1kTN8uZz/nupiuHA9PMA4GA1UdDwEB/wQEAwIBhjATBgNVHSUEDDAKBggrBgEFBQcDCDB3BggrBgEFBQcBAQRrMGkwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBBBggrBgEFBQcwAoY1aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcnQwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcmwwIAYDVR0gBBkwFzAIBgZngQwBBAIwCwYJYIZIAYb9bAcBMA0GCSqGSIb3DQEBCwUAA4ICAQB9WY7Ak7ZvmKlEIgF+ZtbYIULhsBguEE0TzzBTzr8Y+8dQXeJLKftwig2qKWn8acHPHQfpPmDI2AvlXFvXbYf6hCAlNDFnzbYSlm/EUExiHQwIgqgWvalWzxVzjQEiJc6VaT9Hd/tydBTX/6tPiix6q4XNQ1/tYLaqT5Fmniye4Iqs5f2MvGQmh2ySvZ180HAKfO+ovHVPulr3qRCyXen/KFSJ8NWKcXZl2szwcqMj+sAngkSumScbqyQeJsG33irr9p6xeZmBo1aGqwpFyd/EjaDnmPv7pp1yr8THwcFqcdnGE4AJxLafzYeHJLtPo0m5d2aR8XKc6UsCUqc3fpNTrDsdCEkPlM05et3/JWOZJyw9P2un8WbDQc1PtkCbISFA0LcTJM3cHXg65J6t5TRxktcma+Q4c6umAU+9Pzt4rUyt+8SVe+0KXzM5h0F4ejjpnOHdI/0dKNPH+ejxmF/7K9h+8kaddSweJywm228Vex4Ziza4k9Tm8heZWcpw8De/mADfIBZPJ/tgZxahZrrdVcA6KYawmKAr7ZVBtzrVFZgxtGIJDwq9gdkT/r+k0fNX2bwE+oLeMt8EifAAzV3C+dAjfwAL5HYCJtnwZXZCpimHCUcr5n8apIUP/JiW9lVUKx+A+sDyDivl1vupL0QVSucTDh3bNzgaoSv27dZ8/DGCAbgwggG0AgEBMHcwYzELMAkGA1UEBhMCVVMxFzAVBgNVBAoTDkRpZ2lDZXJ0LCBJbmMuMTswOQYDVQQDEzJEaWdpQ2VydCBUcnVzdGVkIEc0IFJTQTQwOTYgU0hBMjU2IFRpbWVTdGFtcGluZyBDQQIQBR6ekdcekQq75D1c7dDd2TANBglghkgBZQMEAgEFAKCB0TAaBgkqhkiG9w0BCQMxDQYLKoZIhvcNAQkQAQQwHAYJKoZIhvcNAQkFMQ8XDTIzMTEwMzExNTcyNlowKwYLKoZIhvcNAQkQAgwxHDAaMBgwFgQU2Rq5M/4XremCHqYT9aQ6cU4+fn0wLwYJKoZIhvcNAQkEMSIEIGmY+GsCefCDmP0PFcYjdxBUfi0EgKYuEZb9pUMyLNuVMDcGCyqGSIb3DQEJEAIvMSgwJjAkMCIEIILa8ZSVezaEAkWP1ScAaf5ixxRW+p4Lhqv4J+hTICfZMAoGCCqGSM49BAMCBEcwRQIgcxxuf7QHV9Fkpj1VhPrFqhNFh8dZzl8qUU/2N3Sr4eoCIQDKu0KGYL++CSsDAXjJciMDbr5ImTy3jw0yQU5GYYeLimd4NWNoYWluglkGMzCCBi8wggQXoAMCAQICEBtbCzvasORd8vMNnlTR2tIwDQYJKoZIhvcNAQELBQAwdTELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEiMCAGA1UEAxMZQWRvYmUgUHJvZHVjdCBTZXJ2aWNlcyBHMzAeFw0yMzAyMDEwMDAwMDBaFw0yNDAyMDEyMzU5NTlaMIGhMREwDwYDVQQDDAhjYWktcHJvZDEcMBoGA1UECwwTQ29udGVudCBDcmVkZW50aWFsczETMBEGA1UECgwKQWRvYmUgSW5jLjERMA8GA1UEBwwIU2FuIEpvc2UxEzARBgNVBAgMCkNhbGlmb3JuaWExCzAJBgNVBAYTAlVTMSQwIgYJKoZIhvcNAQkBFhVncnAtY2FpLW9wc0BhZG9iZS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDv0wCnfYY9lkHDsykrTG7FYlnYHBcyualuD5u9ULjzv+FsTWOLg8Nhrz9RTxI9EeBbu3Wm7f4vqPsQYfxkEp0wIa6DVmEOZhbAeRfbhybWQ/D4Wvvck4mEZR+QZmTpIn7HX61gbtMFHlJUxkYBctIoAt9TBAFbz9d5Ig2WG0bsH39b6/8USXnIIk4FB6dtBRT1xeEwSDtwOd1YBpXXNBJmRWHXNJZZ85of2tBTesg/kMvTrOJJxYDZ97U416wcvbVomlees+NXUY3/ZB4xH+NsZils7m1bL2v2hSnHiLoqZeUKklbHUmT4ZpjrZCdtuIsWm5j2PPXKr7HKUuCbZSXBAgMBAAWjggGMMIIBiDAMBgNVHRMBAf8EAjAAMA4GA1UdDwEB/wQEAwIHgDAeBgNVHSUEFzAVBgkqhkiG9y8BAQwGCCsGAQUFBwMEMIGOBgNVHSAEgYYwgYMwgYAGCSqGSIb3LwECAzBzMHEGCCsGAQUFBwICMGUMY1lvdSBhcmUgbm90IHBlcm1pdHRlZCB0byB1c2UgdGhpcyBMaWNlbnNlIENlcnRpZmljYXRlIGV4Y2VwdCBhcyBwZXJtaXR0ZWQgYnkgdGhlIGxpY2Vuc2UgYWdyZWVtZW50LjBdBgNVHR8EVjBUMFKgUKBOhkxodHRwOi8vcGtpLWNybC5zeW1hdXRoLmNvbS9jYV83YTVjM2EwYzczMTE3NDA2YWRkMTkzMTJiYzFiYzIzZi9MYXRlc3RDUkwuY3JsMDcGCCsGAQUFBwEBBCswKTAnBggrBgEFBQcwAYYbaHR0cDovL3BraS1vY3NwLnN5bWF1dGguY29tMB8GA1UdIwQYMBaAFFcpejJNzP7kNU7AHyRzznNTq99qMA0GCSqGSIb3DQEBCwUAA4ICAQBXjlGa3yAK/Gijn6n/JNU9FZm72MP6vc5czrWe9y0T+EawuRvhpD5Edi1TnXkrpe8sMkgSjTGdbY+yGhq8zlCWQeXN1/aWo3L9Xr1uNxY/oVpLn0uWWfnfJ7yR9gKl/yoMfhjydT4t1fXHi/MhfhrWSVRHqX2U31UFGz/e298P2kv+vqhzpIUo1bj+jibtoPLMMQcCOTtKiJOTh4o3VSZpwQDERCzo91NkF+LnZjwYl6fE5USIkg/oCoomXxSPpowybDrcRJ9ilbtJcER48/LGgwzv/c7OYdron4PnEXm1FkOaVj+QRf7OwiNTizonhIzLR5Vfp0QHOWv/bPzvCjPQd+Xr0Q4032WlSxQwostNTAPtoVAU4OCwVH3Ech38emJ00/6fkDCdr7MN8/4n2LSNrMUvaBEZdmLqDCBnO02dbFrmpg3pTc0FqRQ4GL/88pjRNSMy5tU9SoQnSCGYqIsjfL8AzgPEGiXXRgABYc1uXecf4/eayb3K2MPs7hnWTbUKpHHJIwxpdN3vTGdZNWpz9Oxfuo3eELQlkTvACHgqkaXi/FAanHe5PChn6fr1/4cNF8goD0buPApgS3zzwqjRhxrH8ISwPfJn8JqzurMaLDMnnc18tHzUiMtX73jf6oXh7voCxX/T4D3nFPlxU3om2cpcLQ1Wd4026x18rlSGR1kGpTCCBqEwggSJoAMCAQICEAyotlR7iebSBol1zYubieIwDQYJKoZIhvcNAQELBQAwbDELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEZMBcGA1UEAxMQQWRvYmUgUm9vdCBDQSBHMjAeFw0xNjExMjkwMDAwMDBaFw00MTExMjgyMzU5NTlaMHUxCzAJBgNVBAYTAlVTMSMwIQYDVQQKExpBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZDEdMBsGA1UECxMUQWRvYmUgVHJ1c3QgU2VydmljZXMxIjAgBgNVBAMTGUFkb2JlIFByb2R1Y3QgU2VydmljZXMgRzMwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC3Hy69vQmzXEhs/gyDrmwB6lF4JaSAPomnsbKIZNr2iXaB+fkd85X8eJiNmI7P5O4cVT4Nc1p3zrESqBV4ZUyW8gcZ78QdwoHG8QNd2VNcHnMgSR+XT9Iafsnq9Nfww3Jt9KL3l5ANQ5n1+MJqr48EWNLll942bOL/JH4ywDSMoqhZqtJEIUUUGlQVBZ8CAvJc7LE6ddA5C52PE2Ppa7RfQgHXf4gfXVZwpxYRZcziPiOHqEvLb0J3cShUbejFxV6cwX8QyAPa1ePHg1RtM0HX+D34xHo3DkyGnmT+Ddq00TEDGG26AL5PdINKFIQl+zaq6KJFQe1fdGE5wrWzU4mBPmzaz3EbLn+7FWlwAhorYqIMldbfHE3ydc+aTU1JW7+bG19qmvhO9IluGtTtQDeqFBj2fg6faxsfVfVPD7stN6TwoIDlkOCE4RE+Iin8m3z3eqi/VsTmsmRqBxWDRaqOHz02EJoEDxXJG3ei+UbIIp01XZQvdufm90WxOTuqqan2ZqTPX9K5VdjEh/ovr7xFc5q1dZo+Sa5y4sTVM854/tLU3klOgUKzzSXYPYS3GhBcYJHjwr9xNRHnNX99D6F0g7OijScWfvtjxh13aTv/H0ETvymah4yfDpVdh9cK5YSCPqnuOlsujFAyhYwJXOWDvZZU2EkWVLDhoPx9zp7N4QIDAQABo4IBNDCCATAwEgYDVR0TAQH/BAgwBgEB/wIBADA1BgNVHR8ELjAsMCqgKKAmhiRodHRwOi8vY3JsLmFkb2JlLmNvbS9hZG9iZXJvb3RnMi5jcmwwDgYDVR0PAQH/BAQDAgEGMBQGA1UdJQQNMAsGCSqGSIb3LwEBBzBXBgNVHSAEUDBOMEwGCSqGSIb3LwECAzA/MD0GCCsGAQUFBwIBFjFodHRwczovL3d3dy5hZG9iZS5jb20vbWlzYy9wa2kvcHJvZF9zdmNlX2Nwcy5odG1sMCQGA1UdEQQdMBukGTAXMRUwEwYDVQQDEwxTWU1DLTQwOTYtMzMwHQYDVR0OBBYEFFcpejJNzP7kNU7AHyRzznNTq99qMB8GA1UdIwQYMBaAFKYc4W1UJEyoj0hyv26pjNXk7DHUMA0GCSqGSIb3DQEBCwUAA4ICAQBxzuUHjKbcLdzI4DtlXgCSgZXrlSAkr59pOF3JfPG42qVNAGU7JcEYXJ6+WbfcGwY7WYMl+jO7IvJPb7shXFYW9bnJgxX7lLU14KExchmcLNY1ee6IhBJ2Y8PzZMRUKSd5CkURPg0PBLGjz/KR/DofHx+G4rPTCOGORYxeYrd01lci5hVxvKccvIk7MD69ZTewfZPSM+0WnsU3f0Zmd7hgbRpUyWceG0eHFpdUKK/ZFWhHjDVC28odCnN885tHncKXviItK0ZUUo/AIthFKlhEXsnq9VL9fFbgvO83ZvpUQo5y8mY3cuGnEVGXdhjNb53CfC1u4dbpYmWaN99subUzEsUaUb3loLPfVfzDOpg2y9v37kBdy/wuXr20teY7U62xj/fAgs1QSnhUtlMTfCqbefyEycKVmKIrJkJLsvgTSYKVvH4FFIwfd5WjqOC97jX98rcVAzhAI0iSkazsWOMvL6m0L4nLJapx+85GsVX8Y6AHmEP4bmCElwil6KAP+UewJFiw5rmwV2pESHAhYuZJa03B8tl0nd2QJzvJGmbeBqXqpF9ORinFM3HErK8puRokOjFH2+1asLeI2tB31W/ELdNe27Ogduq6Z6qBwCp59YX27qydDhD0WRfN64kCs25K88iGAGNW2CAfTDS+b+WYJBiIL9jXYZ4LF+BiUvfdu2NwYWRZC70AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPZZAQBKX2Q2ihN2fLDLReHISpfOF0xIqNpOZXbBwZ0XanWG98erbIBdawl7r9nVma/uZjYH457wp00TVpKYUTJHMnzJMKskvM2Df4K6t5pUKGtJqEvMXLUy3g9kJq53aYDwikcUE+8wv+CYtu/+vii4XYSXQIxT4NN+JKoTDXmrNH1G46Nmpfq6SKk0g9GQ2brbkW3fzGR0xDxY3BXRy71guSBxN9TAbQGqUjMnkIyBcwV9wUQ2oCW9oIMNKASjW0CRkcFEzzmrQ+y+zHYpNvUaG7QehHcyhvOec3plzlyP6DZeQWp3PHA5bmonI8t5j6Qj15X1KnQiXuJ0rW+xoMA89aIVmpx4VgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAOSaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA5LjEtYzAwMSA3OS4xNDYyODk5Nzc3LCAyMDIzLzA2LzI1LTIzOjU3OjE0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjYyYTdmYWExLWJmZTMtMjE0Ny04MjAwLWMxM2NlMGU4ZTc1NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzRDMUI3RDdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzRDMUI3QzdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjUuMiAoMjAyMzEwMjQubS4yMzc0IDRhYjk0MzkpICAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphYjQzZjNjYy1hNTY4LTRkNGQtOTdiZC1iYjk0YjBlZjhjYmQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjJhN2ZhYTEtYmZlMy0yMTQ3LTgyMDAtYzEzY2UwZThlNzU0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HNvo5wAADZFJREFUeNrsXFtPVUkW3gc4yP0qDigKON517FFbHRGn1TamjaOJvvhsjIkvPplgfEKe1AefNDE+GP+AmWTszPTYcbpn2piJzc1GWwlOekRBEBFQ7jeZ9ZVrnVkUtfc5CGp3h5VU9qUuu3bVV9+67DonND4+7omEQiHPJaWlpYlxcXGLKX8epTCdB5aXNnHU6c2bN5POcaREp+O9dHxSX1/f5s3KL1ImYCkasMrKyvIISJspD+AyZSTpOrodDSaIBpQCkwtgSM8oVd2/f39M2quoqAijmcrKyjG/l7L77vde+v6sfCRgbdu2LY3AtJNSgg0qDa5oTOViKQtM9nXTgQMHaqmpPEoLKXUQqJpcYIqPj/cSEhLMUZgUbYyNjZkjRPpu50n+VEUvKtditMEb7Xom5OrVqzvpkOXIukFps5XXTunO4cOHR7heKp1/ye1gEX9BCcdv6H4330cbCyh9iXrRgJUQ1FmarFWUIqDS4ApiCT9AobxMpj24uI/209LSvMLCwiLKz6fyQModAlW73TeAac6cOV5SUpIBlasv9qKRvgBYIyMj3tDQkDmPdaLRPzwrHA6bhGsNWr9xsMfEZnC7XDSg+tzv4lRCCRPfjJtHjhzpu3LlCkDVx4BKZICsx9gy4PT4rmFQQbIpdfM5ynX7gWrS/Phl7NixI0SDWCCD52Is14vqAXIByoluAkl+fr43f/58Lyvr7cIaHh4OJSYmfkug6rXZApOamprqUb6vned3X4CBujj29/cbkEl/7EUj74o+og4S2gh6xkypk6mUPXnyZN25c+fCDKzm8vLyOuQzqCAtJ06cuH/+/PkwAytMLCR57VjQFy5cmKeAiXJZGOeLFy/iPBVt4Nqeb60dogKLBm9O/FvxXIwVxBAaUBpgixYt8np7e7329vYJZUtKSkwSefHihVdTU9N2586dXrtfmNj09HQz0dMRvAsYD0dhLryrvG8s7/w+ZCrPcJSdx8duAb+6l0WgWqeu/8uMZMoDWCTr+BpMVoZ8jLUq18XXgdohEFg0cXF6kF2s5Uf9NqBwxL0FCxaYSXz58qWZSNzr6+vzioqKIm01NTV5ZLgbT9HuExgGAzBdUOmJEeb6EKD5AJKt1KJ9TwAFNrpz6tSpljNnzgiQuuh8DbNSNx9HlF0mx26/cbTHLy6AsSKGcVCyjWepJwnS2trqbdiwwZyDJaDyUBbslZmZGTG6Hz9+7D18+NDdUSqTkpIyY6B6V5b4mYsBAIGm27rXR/f+DFXGKm5Ega6P7a5lqvw6sbMIcFkKlCUAI6esQI0QBCwBjxirNqCkDACSkZFhQKLVCSassbHR27Jli6kvsnDhQnN8/vy5t3Hjxsj95ubmSQ6CVoEA5a8IBO+LsSKgoskPKxaC1DKo1mmDXF1/AwAyCO+rNoX1FrANVqLA6V6sfuGGgwcPphBovrCBIuwCgRp7+vSpAUd2dra5bmtrM6pvdHTUu3fvnrGdNHhEbt265XV1dXn79+9/y8V0XltbGwkDkKpsqqqqqhG2AmgBrFn5+Qo0Uyw21gRm0kwCLwqAAgC2b99u2AQCVYWyACtUGkRUoC2bNm0yYBIBe/l5ncKaWmg1hrj/47TCRu32ebUam4LyAweEymK1QG+PUdk3PmXCrGZicrej9e99CD0znvs4NsPtRh2fmMMNLmBBYHgDmTC4ly1bNslWAbhu375tyh06dGgCw2kB+yDEAIEh39HR4RsjE+/NkgJKf0DwlNJ3jkndi2Yo/QXOZ5RxWElpOaUqSk99QLWPErzUr2OcD+j7T+GPUKqZocldyu2mWWbMv1mt4T3q2OObSVnNz46MD49xMfelE85ArOGGiA2FSR0cHDRggVe3fv16Lzc317cXCBeUlZUZu8sVBLUF7YrnaDMWygsjWpLJx1eOvCS8LKX+GFeYdPS1T356wLOC7NcOK/g4HSbaSmku2zZtlo0D6l8U5R2mIxmO91/F79iP8aY+lmhAR2Us09PXr439hAles2ZNoK2Tl5dnwgorV66clHfz5k1v165dk8CFuJYfWwm4/Twgn4FMZqO0U00OPg/lsgck0k3Ae6JACq8HamsAJgPl9fOAzef8VLpey1HtVGXUQoZ45b7QawzgojqpauJNZIYnpEXUFpWZw8ZxMqsdEdgUixlUqPMt1RlygE8mv4jO5/M7tFHZXs4HI+uJG4YFQvldnF+sAPRGjd8SSjl8fzGVG6I6Dxk76GcKl8uOlbESh4eHDVOBpWCcQ/1F88qQv2fPnknlnjx5YsIJOBYXF/9/NqhtANcV8ZbYlc8zswJYJJ8H5Eem7A3WxEYmjdVcigycyltBeV/RsVANbDKDrJnL5jom+Dsa+A5e0WDOn7g/Kx3PR/06qpPDjBS28gG6e6pfDT6gimeV5LF6iqh4focxHo84Ne8hzv8ng2sJA6tfjUedROkZbPkqRhbie8JauTEBi7y6ePncAQaaO3fulKLaWgDQgYEBoxrh+WlgiW3l9znFNtp5IBN5kv0YS6vJYgYVVlU120mfUPot58sqbeaBxJh8zqs7TIN+i573R2aMfykGQD2w21dcfx2DMI3yXjOosLqH6Fr6U8VqDHGhzVw2ns8T2BaTWNMefrc09a7PA1R1iNuuYibZwfXmUB8Qq/qrZa9tZjs1i65fcRswHf5O1zuYgZ7yeG1jdq3SbM9gauFF8yimOBYABaN66dKlUwKVS0TVQT2+evVqgjcIYAWxXxQ12O/jcWUq0MlqvwtQsIeo8zOUWoQHOcCTNMbqQsqPcTARE5PCk/+a64woB6HPYf/JMzq57KgqW8AAaKa8Jn4fbfOlKe92wGeoMq13GFQqdwD95aDmZ5Q+Z9AJwwwoYL5Wn3vqHH2JCOU9pkMjg7jWMgH8GYtspVx8cIwW6QYDrV271rccgATGAkhgm8GTfPDggbd161YTWIUqdLGVnPt4lQKsQQebJTCVj7CNlO4YmAwFlCUaBAo0XVR/nK6T+RqTNh5g7GuwLrTyMxlMfY760r/eKI4J+hJSffA1rlm9o989DK5SLtOmnpOm+pCr6zNoojpJVK6HnxFbuKGiomI5u5hRQVVdXW0+0UjowGa97u6Jn5ewewExMIAN3mA0lepjX8nLgsYXMy2P8SAmWJM6zGoJhnkrr7BEBRwbJLYHJJ/zQ5gwZhx7IkMMkEFWfZF8BcxOFU9zAes33L9+yzERMKLP66nMM8V4HjNFpgPI0r9kft4AmwLjzE4wD0Z58S0OMCvk/RMDgB1zHGtZtIoIgopKe/TokRNYnZ2dzroAIsAFo93Vrq0OAxgLdPZ7TZBsLOtBAl2vZbvqE1VWT4JWM/YkDfJk4P4+GtxqR5l07otrYjMdk6Ydj24ebxjwO23CZ6A+YGegiJOn+vY3xcC9jncY5TwA7E92+zGEW/r5+CnbUjdijbXYbJXs8E6ck11aWmp2G+B7oC1Qc2AsP+AAVHqT3RR3Vd5nQ9dO93hw6ik95hX9H7jonF/PIQBjj7ARC9f5rhUTQrlWrt/L9e/y/XbOq1ce0ihfy0A85useZop6K2gJ8P8A0FACo/7De7tV5Qd4sgIa8QDp2IBoDTNOvU7Mlo1sQ44rwNSzwS3t19l14WWq/tb4qLW76rn3Yp2gSd8KCVjwWMqC1JP6nmei8Ddu3DBRdgmI4jshDHbkByVpQ5+rY9P3339fk5OT46m9RVMNLGLQf2cxdCGff62M3I8m1EcY73nqVg4nhBYe/FK+EwJH+E4cpAozgxoQlhEQwGNctWqVUW2rV6+OGOx++96jbcm193bJBrx3lBQV3NRu8o+xgCrWvervsoddWD8pKamQ40Py9QEM00htNrzrnvxY3yeW/kUTIRlbO7kYa4OlxyMsZG87loQ8Yhdv9+7dJkIPYGk28mOrFStWGOMeux+wdx0foq9fvx7Z3QDGgmeK9D63y8j74D2QpI+unZHTAZdsgJzKxE33vfQzowEuluC3q57eyx/EWBn2DQQ3MdDa9bd/xrV8+fLIpx8beH4/HigoKHgbKi4u9s6ePeuVl5cbYOkOIxwB0M30Bj+0DRDhy4LE7KSfszJ9SbAMd0+5vxEjG6EB+SWMRq3eepycnGwMdq0mfX7aNWHbsrAhovvXrl2bpCKRB2DDSZjuKpd2AVa0qX9EMSszK3GOmEWCjopLgBMJE4GEyZajVh8OA9zJXBpUOL98+bJ37Ngxr6WlRbPbuIABrILPS+8KAtRD/3t6ekzsTBbLLKg+HLC0GrxLkzCmAaWTDSptm0QDGf92cMKvdy5duuQdPXpU6+sB7TAAWFCzOI8VTCiLOoinIeaGNqbyO8JZmXlg3a2srPyJANQqQHIBTIPLBlYQc8GTxM5SAdHevXvNr3NgSylGe2Z7owAG2AZHcSbshHJgOJQDoCSeNgumj2hjMbAMqHBBE/IAv0imiU6AjSUGvN9Pv1z2lAtc2AiILTg4r6mpMfGP48ePew0NDdJGU21t7SuXaysAt3e26l85z7LSx5cJ4YbTp0/PJVBN2G6wb9++PJrAzdif5fpBhTaK/f70I1qygPeMrqvq6upi0nmuPyWZlY8XJPWNY7mEVJX5GyNK8yiFg34J7fM3RYEgIyCN09H8jVF1dfXs3xj9CoD1PwEGAKorJqR4atjIAAAAAElFTkSuQmCC",s)=>{let e,h=0,r=0;const n=[],o=t=>{const i=new ni.Image;i.src=t,i.onload=()=>{n.forEach((t=>{var s;const e=new Yt({source:i,fitMode:$t.Stretch});null===(s=t.Ou)||void 0===s||s.Ie(e),h=i.width,r=i.height,c(t)}))}};o(i);const a=t=>{o(t.logoDataURI)};let l;if(t.Qo.addEventListener("logochange",a),new ni.Image instanceof ni.HTMLImageElement){const t=new ni.Image;t.src=i,l=new Yt({source:t,fitMode:$t.Stretch})}else if(ni.lcjs_setup){const t=new ni.Image;t.src=i;const s=ni.lcjs_setup(t.naturalWidth,t.naturalHeight);s.getContext("2d").drawImage(t,0,0),l=new Yt({source:s,fitMode:$t.Stretch})}else l=new $({color:S("#f00")});const c=t=>{if(t.Ou){const i=t.ot.Pi({x:t.ot.x.getInnerEnd(),y:t.ot.y.getInnerStart()},{x:-(3+h),y:3}),s=t.ot.Pi({x:t.ot.x.getInnerEnd(),y:t.ot.y.getInnerStart()},{x:-3,y:3+r}),e={x:s.x-i.x,y:s.y-i.y};t.Ou.Be(i).Z(e)}e&&e.Ls()};return e=t.Bk("logo",Number.MAX_SAFE_INTEGER),i=>{const h={ot:i};return(i=>{const h=s&&"cGx1Z2lu"in s&&"cHl0aG9u"===s.cGx1Z2lu?cg:lg;if(i.Ou&&i.Ou.dispose(),e){let s;i.Ou=e.Pe(i.ot).Ie(l).setPointerEvents(!0).Fe(Wt),i.Ou.addEventListener("pointerenter",(()=>{s=t.tn(tr.Point)})),i.Ou.addEventListener("pointerleave",(()=>{s=t.sn(s)})),i.Ou.addEventListener("click",h),c(i)}})(h),n.push(h),{hr:()=>c(h),G:()=>(i=>{i.Ou&&(i.Ou.dispose(),i.Ou=void 0);const s=n.indexOf(i);s>=0&&n.splice(s,1),n.length<=0&&t.Qo.removeEventListener("logochange",a)})(h)}}},lg=()=>ni.open("https://lightningchart.com/lightningchart-js/"),cg=()=>ni.open("https://lightningchart.com/python-charts/");class ug{constructor(){this.tB=this.iB.bind(this),ni.addEventListener("scroll",this.tB,{passive:!0})}G(){this.tB&&ni.removeEventListener("scroll",this.tB),this.tB=void 0}}class dg{constructor(t,i){this.Ua=t,this.Y=i,this.sB=!0,this.eB=null,this.hB=null}}class fg{constructor(t){this.rB=!1,this.nB=1,this.oB=t,this.aB={Ua:r(0,0),Y:r(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),sB:!0,eB:null,hB:null},this.lB=r(64,64),this.cB=new Uint8ClampedArray(this.lB.x*this.lB.y*this.nB)}uB(t,i){if(!t.sB)return null;if(t.eB&&t.hB){const s=this.uB(t.eB,i);return null!==s?s:this.uB(t.hB,i)}const s=n(t.Y.x,t.Y.y);if(t.Ua.x+t.Y.x>=Number.MAX_SAFE_INTEGER&&(s.x=this.lB.x-t.Ua.x-1),t.Ua.y+t.Y.y>=Number.MAX_SAFE_INTEGER&&(s.y=this.lB.y-t.Ua.y-1),t.Y.x===i.x&&t.Y.y===i.y)return t.sB=!1,t;if(s.x<i.x||s.y<i.y)return null;let e,h;const o=s.x-i.x,a=s.y-i.y;let l=o<a;return 0===o&&0===a&&(l=!(t.Y.x>t.Y.y)),l?(e=new dg(js(t.Ua,{x:0,y:1}),r(t.Y.x,i.y)),h=new dg(js(t.Ua,{x:0,y:i.y+1}),r(t.Y.x,t.Y.y-1-i.y))):(e=new dg(js(t.Ua,{x:1,y:0}),r(i.x,t.Y.y)),h=new dg(js(t.Ua,{x:i.x+1,y:0}),r(t.Y.x-1-i.x,t.Y.y))),t.eB=e,t.hB=h,this.uB(t.eB,i)}dB(t,i){const s={fB:!1,Ua:null};let e=this.uB(this.aB,i);if(null===e)for(;null===e&&this.lB.x<this.oB&&this.lB.y<this.oB;){if(!this.AB(r(2*this.lB.x,2*this.lB.y)))return this.rB=!0,null;s.fB=!0,e=this.uB(this.aB,i)}if(null===e)return this.rB=!0,null;for(let s=0;s<i.y;s+=1)for(let h=0;h<i.x;h+=1){const r=e.Ua.y+s,n=e.Ua.x+h;this.cB[r*this.nB*this.lB.x+n*this.nB+0]=t[s*this.nB*i.x+h*this.nB+0]}return s.Ua=e.Ua,s}AB(t){if(t.x>this.oB||t.y>this.oB)return!1;const i=new Uint8ClampedArray(t.x*t.y*this.nB);for(let s=0;s<this.lB.y;s+=1)for(let e=0;e<this.lB.x;e+=1)i[s*t.x*this.nB+e*this.nB+0]=this.cB[s*this.lB.x*this.nB+e*this.nB+0];return this.lB=t,this.cB=i,!0}}class Ag{constructor(t){this.gB=new Map,this.oB=t,this.gB.set(this.gB.size,new fg(this.oB))}vB(t){return this.gB.get(t)}dB(t,i){let s=-1;const e=Array.from(this.gB.values());for(let t=0;t<e.length;t+=1){const i=e[t];if(!i)break;if(!i.rB){s=t;break}}-1===s&&(s=this.gB.size,this.gB.set(this.gB.size,new fg(this.oB)));const h=this.gB.get(s);if(!h)return null;let r=h.dB(t,i);if(!r&&h.rB){const e=this.gB.size,h=new fg(this.oB);this.gB.set(e,h),s=e,r=h.dB(t,i)}return r?{yB:s,...r}:null}}var gg;!function(t){t[t.Fail=0]="Fail",t[t.Success=1]="Success",t[t.Resize=2]="Resize"}(gg||(gg={}));const vg=Zi("font-texture");class yg{constructor(t){this.pB=new Map,this.mB=new Map,this.Mt=vg(),this.SB=t,this.bB=new Ag(this.SB.xB||4096)}MB(){return this.mB.forEach((t=>{this.SB.wB(t)})),this.mB.clear(),this}_B(t,i){const s=this.pB.get(i);if(s)return s.get(t)}CB(t,i,s){let e=this.pB.get(i);if(e||(e=new Map,this.pB.set(i,e)),e.has(t.glyph))return gg.Success;const h=this.bB.dB(s,t.size);if(!h||!h.Ua)return gg.Fail;h.fB&&this.kB();const r=this.bB.vB(h.yB);if(!r)return gg.Fail;let n=this.mB.get(h.yB);if(!n){const t=this.SB.gl.createTexture();if(!t)throw new Kt("Failed to create texture for font!");n=t,this.mB.set(h.yB,t)}const o=h.Ua,a=r.lB.x,l=r.lB.y,c=-t.offsetX,u=t.baseline-t.size.y,d=-t.offsetX+t.size.x,f=t.baseline,A=o.x/a,g=(o.y+t.size.y)/l,v=(o.x+t.size.x)/a,y=o.y/l,p=[A,g,v,g,A,y,A,y,v,g,v,y],m=[c,u,d,u,c,f,c,f,d,u,d,f],S={origin:o,size:t.size,advanceX:t.advance,baseline:t.baseline,vertices:m,texCoords:p,packerId:h.yB,texture:n};e.set(t.glyph,S);const b=this.SB.gl;return b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),b.bindTexture(b.TEXTURE_2D,n),b.texImage2D(b.TEXTURE_2D,0,b.LUMINANCE,r.lB.x,r.lB.y,0,b.LUMINANCE,b.UNSIGNED_BYTE,this.SB.TB?r.cB:new Uint8Array(r.cB)),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.bindTexture(b.TEXTURE_2D,null),h.fB?gg.Resize:gg.Success}kB(){this.pB.forEach((t=>{t.forEach(((i,s)=>{const e=this.bB.vB(i.packerId);if(!e)return;const h=i.origin,r=e.lB.x,n=e.lB.y,o=h.x/r,a=(h.y+i.size.y)/n,l=(h.x+i.size.x)/r,c=h.y/n,u=[o,a,l,a,o,c,o,c,l,a,l,c];i.texCoords=u,t.set(s,i)}))}))}}const pg=t=>{if(t instanceof be||t instanceof Vd)return t.Oi()?"linear-highPrecision":"linear";if(t instanceof xe){const i={};return t.x instanceof le&&(i.x={base:t.x.Ii()}),t.y instanceof le&&(i.y={base:t.y.Ii()}),["logarithmic",i]}return"linear"},mg=t=>{const i=Object.keys(t),s={};return i.forEach((i=>{const e=t[i];let h=!1;s[i]=t=>{if(!t)return h;const i=e();return h=i,i}})),s},Sg=(t,i,s)=>"value"===t.getLookUpProperty()?s:"x"===t.getLookUpProperty()?{min:i.Wt(),max:i.jt()}:"y"===t.getLookUpProperty()?{min:i.Zt(),max:i.Qt()}:"z"===t.getLookUpProperty()?{min:i.oy(),max:i.ny()}:void 0,bg=t=>!(!t||"value"!==t.lookUpProperty||!t.lut.percentageValues),xg=t=>(i,s)=>s%2?i:i+t;class Mg{constructor(t){this.FB=new Map,this.IB=Zi("font"),this.PB=new Map,this.LB=new Set,this.SB=t}MB(t=!1){return(t||0===this.LB.size)&&(this.FB.forEach(((t,i)=>{t.MB(),this.FB.delete(i)})),this.LB.clear()),this}BB(t){this.LB.add(t)}DB(t){this.LB.delete(t)}EB(t,i,s,e){const h=ni.devicePixelRatio,r=`${e?"dark":"light"} - ${qr(i,h).id}`,n=this.PB.get(r),o=this.FB.get(n);let a=0,l=0,c=0;const u=t.split(""),d=i.size,f=.45*i.size*h,A=Math.round(1*i.size*h);let g=!1;for(let t=0;t<u.length;t+=1){const i=u[t],s=o&&o._B(i,d);if(s)""!==i.trim()&&(l=Math.max(l,s.baseline),a=Math.min(a,s.baseline-(s.size.y-1))),c+=s.advanceX;else{if(""!==i.trim()){const t=0;l=Math.max(l,t),a=Math.min(a,t-(A-1))}c+=f,g=!0}}const v=((t,i,s)=>{if(0===s||360===s||180===s||s%180==0)return{x:t,y:i};if(90===s||-90===s||(s+90)%180==0)return{x:i,y:t};const e=s*Math.PI/180,h=Math.cos(e),r=Math.sin(e);return{x:Math.abs(t*h)+Math.abs(i*r),y:Math.abs(t*r)+Math.abs(i*h)}})(c/h,(l-a+1)/h,s);return{x:v.x,y:v.y,isEstimate:g}}RB(t,i,s){const e=`${s?"dark":"light"} - ${i.id}`;let h=this.PB.get(e);h||(h=this.IB(),this.FB.set(h,new yg(this.SB)),this.PB.set(e,h));const n=this.FB.get(h);if(!n)throw new Kt("Failed to get font texture!");let o=0,a=0,l=0;const u=t.split(""),d=new Map;let f=0;const A=i.properties.size;for(let t=0;t<u.length;t+=1){const e=u[t],h=Math.ceil(f);let r=n._B(e,A);if(!r){const h=this.SB.zB(e,i.properties,i.dpr,s);if(!h)continue;const l=n.CB(h[1],A,h[0]);if(l===gg.Resize){this.LB.forEach((t=>{t.Da.o=!0})),t=-1,f=0,a=0,o=0,d.clear(),this.SB.St.Ls(!0);continue}if(l===gg.Fail)throw new Kt("Failed to create glyph");if(r=n._B(e,A),!r)throw new Kt("Failed to get glyph after creation")}if(""!==e.trim()){let t=d.get(r.texture);t||(t={vertices:[],texCoords:[]},d.set(r.texture,t)),t.vertices.push(...r.vertices.map(xg(h))),t.texCoords.push(...r.texCoords),a=Math.max(a,r.baseline),o=Math.min(o,r.baseline-(r.size.y-1))}f+=r.advanceX}l=f;const g=c(r(0,o),r(l,a)),v=[];return d.forEach(((t,i)=>{v.push({texCoords:new Float32Array(t.texCoords),vertices:new Float32Array(t.vertices),texture:i})})),[v,g]}}const wg={roundUnsigned:{VB:"roundUnsigned",OB:"float roundUnsigned(float number) {\n  return floor(number + 0.5);\n}"},linearStep:{VB:"linearStep",OB:"float linearStep(float step0, float step1, float step) {\n  return clamp((step - step0) / (step1 - step0), 0.0, 1.0);\n}"},decodeUbyteRGBAEncodedFloat:{VB:"decodeUbyteRGBAEncodedFloat",OB:"\n      // Denormalize 8-bit color channels to integers in the range 0 to 255.\n      ivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {\n        ivec4 bytes = ivec4(inputFloats * 255.0);\n        return (\n          littleEndian\n          ? bytes.abgr\n          : bytes\n        );\n      }\n      \n      // Break the four bytes down into an array of 32 bits.\n      void bytesToBits(const in ivec4 bytes, out bool bits[32]) {\n        for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {\n          float acc = float(bytes[channelIndex]);\n          for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {\n            float powerOfTwo = exp2(float(indexInByte));\n            bool bit = acc >= powerOfTwo;\n            bits[channelIndex * 8 + (7 - indexInByte)] = bit;\n            acc = mod(acc, powerOfTwo);\n          }\n        }\n      }\n      \n      // Compute the exponent of the 32-bit float.\n      float getExponent(bool bits[32]) {\n        const int startIndex = 1;\n        const int bitStringLength = 8;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        float acc = 0.0;\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Compute the mantissa of the 32-bit float.\n      float getMantissa(bool bits[32], bool subnormal) {\n        const int startIndex = 9;\n        const int bitStringLength = 23;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        // Leading/implicit/hidden bit convention:\n        // If the number is not subnormal (with exponent 0), we add a leading 1 digit.\n        float acc = float(!subnormal) * exp2(float(bitStringLength));\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Parse the float from its 32 bits.\n      float bitsToFloat(bool bits[32]) {\n        float signBit = float(bits[0]) * -2.0 + 1.0;\n        float exponent = getExponent(bits);\n        bool subnormal = abs(exponent - 0.0) < 0.01;\n        float mantissa = getMantissa(bits, subnormal);\n        float exponentBias = 127.0;\n        return signBit * mantissa * exp2(exponent - exponentBias - 23.0);\n      }\n      \n      // Decode a 32-bit float from the RGBA color channels of a texel.\n      float decodeUbyteRGBAEncodedFloat(vec4 rgba, bool littleEndian) {\n        ivec4 rgbaBytes = floatsToBytes(rgba, littleEndian);\n        bool bits[32];\n        bytesToBits(rgbaBytes, bits);\n        return bitsToFloat(bits);\n      }\n      "},texelFetchWithFallback:{webgl2:{VB:"texelFetchWithFallback",OB:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{VB:"texelFetchWithFallback",OB:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},texelFetchUnsignedWithFallback:{webgl2:{VB:"texelFetchUnsignedWithFallback",OB:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{VB:"texelFetchUnsignedWithFallback",OB:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},modulus:{VB:"modulus",OB:"int modulus(int a, int b) {\n  return (a)-((a)/(b))*(b);\n}"},computeScreenSpaceWireframe:{VB:"computeScreenSpaceWireframe",OB:"#extension GL_OES_standard_derivatives : enable\nfloat computeScreenSpaceWireframe (vec3 barycentric, float lineWidth) {\n  vec3 dist = fwidth(barycentric);\n  vec3 smoothed = smoothstep(dist * ((lineWidth * 0.5) - 0.5), dist * ((lineWidth * 0.5) + 0.5), barycentric);\n  return 1.0 - min(min(smoothed.x, smoothed.y), smoothed.z);\n}"}},_g="posAxis",Cg="posWorld",kg="normal",Tg="rotatedGeo",Fg="colorFragment",Ig="antiAliasFactor",Pg="mousePickingIdOffset",Lg="uRatioPxClip",Bg="uRatioNwuWu",Dg="uColorTexture",Eg="uSizePixels",Rg="uOffsetAlignment",zg="uMaskTexture",Vg="aInstanceGeo",Og="aNormal";class Ng{constructor(t){this.modifiers=[],this.modifiers=t}build(t){const i=this.modifiers.filter((t=>Gg(t)));for(const s of i)t=s(t);return`${is(this.modifiers.filter((t=>Ug(t)))).map((t=>t.OB)).join("\n")}\n${t}`}}const Gg=t=>"function"==typeof t,$g={VB:"ratioPxClip",OB:`uniform vec2 ${Lg};`},Ug=t=>t&&"object"==typeof t&&"VB"in t,Yg=(...t)=>i=>{t=t.reverse();for(let s of t)"string"==typeof s&&(s=s.includes("{")||s.endsWith(";")?s:`${s};`,s=s.trim(),i=i.replace("void main(void)",`${s}\nvoid main(void)`));return i},Hg=t=>i=>(t=t.endsWith(";")?t:`${t};`,i.replace(t,"")),Xg=(...t)=>i=>{const s=t.filter((t=>t));for(let t=0;t<s.length;t+=1)s[t]=s[t].endsWith(";")?s[t]:`${s[t]};`,s[t]=s[t].startsWith("\t")?s[t]:`\t${s[t]}`;const e=s.join("\n");return i.replace("void main(void) {\n",`void main(void) {\n${e}\n`)},Wg=(t,...i)=>s=>{for(let t=0;t<i.length;t+=1)i[t]=i[t].endsWith(";")?i[t]:`${i[t]};`,i[t]=i[t].startsWith("\t")?i[t]:`\t${i[t]}`;const e=i.join("\n"),h=new RegExp(`(.*${t}.*)`),r=s.replace(h,`${e}\n$1`);return i.forEach((i=>{if(!r.includes(i))throw new Error(`ShaderBefore misusage (not found: \n${i}\nmatch: \n${t}\nresult: \n${r}\n)`)})),r},jg=(t,...i)=>s=>{const e=i.filter((t=>"string"==typeof t));for(let t=0;t<e.length;t+=1)e[t]=e[t].endsWith(";")?e[t]:`${e[t]};`,e[t]=e[t].startsWith("\t")?e[t]:`\t${e[t]}`;const h=e.join("\n"),r=s.lastIndexOf(t),n=s.substring(r),o=n.indexOf("\n"),a=n.substring(o),l=`${s.substring(0,r+o)}\n${h}${a}`;return e.forEach((i=>{if(!l.includes(i))throw new Error(`ShaderAfter misusage (not found: "${i}", match: "${t}", result: "${l}")`)})),l},Zg=(...t)=>i=>{for(let s of t)if("string"==typeof s){s=s.endsWith(";")?s:`${s};`,s=s.trim(),s=s.startsWith("\t")?s:`\t${s}`;const t=i.lastIndexOf("}");i=`${i.substring(0,t-1)}\n${s}\n}`}return i},Qg=(t,i)=>s=>{let e,h;if(t.includes("uniform")||t.includes("attribute")){const i=t.endsWith(";")?t:`${t};`;s=Yg(i)(s),e=t.split(" ")[2].replace(";","")}else e=t;if(i.includes(" ")){const t=i.endsWith(";")?i:`${i};`;s=Yg(t)(s),h=i.split(" ")[2].replace(";","")}else h=i;return Zg(`\t${h} = ${e};`)(s)},Jg=(...t)=>i=>{t=t.reverse();for(const s of t)i=s+i;return i},Kg=(t,i)=>{const s=i.steps,e=s.length-1,h=[Yg("uniform vec4 uFallbackColor")],r=[],n=[];for(let t=0;t<i.steps.length;t+=1)r.push(`uniform float uLUTValue${t}`),n.push(`uniform vec4 uLUTColor${t}`);return h.push(Yg(...r,...n),i.percentageValues&&Yg("uniform float uMinValue","uniform float uMaxValue")),i.interpolate?h.push(jg(`${Fg} =`,"vec4 colorLookup = uLUTColor0","float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),`if (value <= ${Qt}) {\n                    colorLookup = uFallbackColor;\n                }`,`if (value >= uLUTValue${e}) {\n                    colorLookup = uLUTColor${e};\n                }`,...s.slice(0,-1).map(((t,i)=>`if (value >= uLUTValue${i} && value <= uLUTValue${i+1}) {\ncolorLookup = uLUTColor${i} + vec4(uLUTColor${i+1}.r -  uLUTColor${i}.r, uLUTColor${i+1}.g -  uLUTColor${i}.g, uLUTColor${i+1}.b -  uLUTColor${i}.b, uLUTColor${i+1}.a -  uLUTColor${i}.a) * (value - uLUTValue${i})/(uLUTValue${i+1} - uLUTValue${i});} `)),`${Fg} = colorLookup`)):h.push(jg(`${Fg} =`,"vec4 colorLookup = vec4(uLUTValue0)","float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),`if (${t} <= ${Qt}) {\n                    colorLookup = uFallbackColor;\n                } else if (${t} < uLUTValue0) { colorLookup = uLUTColor0;} ${s.slice().reverse().map((t=>{const i=s.indexOf(t);return`else if (value >= uLUTValue${i}) { colorLookup = uLUTColor${i};} `})).join("")}`,`${Fg} = colorLookup`)),h},qg=[Yg(`uniform sampler2D ${zg}`),Yg("varying vec2 vMaskTextureCoord"),jg(`${Ig} =`,`vec4 maskTextureSample = texture2D(${zg}, vMaskTextureCoord)`,`${Ig} = maskTextureSample.r`)],tv=[Yg(`uniform sampler2D ${zg}`),Yg("varying vec2 vMaskTextureCoord"),jg(`${Ig} =`,`vec4 maskTextureSample = texture2D(${zg}, vMaskTextureCoord)`,`${Ig} = maskTextureSample.a`)],iv=[Yg("varying vec3 vPosWorld;","varying vec3 vNormal;","uniform vec3 uCameraLoc;","uniform vec3 uLightLoc;","uniform vec4 uLightColor;","uniform vec4 uAmbientColor;","uniform float uShininess;","uniform float uAmbientReflection;","uniform float uDiffuseReflection;","uniform float uSpecularReflection;"),jg(`${Fg} =`,"float ambientReflection = uAmbientReflection","float diffuseReflection = uDiffuseReflection","float specularReflection = uSpecularReflection","vec3 ambientColor = uAmbientColor.rgb",`vec3 diffuseColor = ${Fg}.rgb`,"vec3 specularColor = uLightColor.rgb","vec3 vNormalNormalized = normalize(vNormal)","vNormalNormalized = (float(gl_FrontFacing) * 2.0 - 1.0) * vNormalNormalized","vec3 lightDir = normalize( uLightLoc - vPosWorld )","float lambertian = abs(dot(vNormalNormalized, lightDir))","float specular = 0.0","vec3 R =  reflect(-lightDir, vNormalNormalized)","vec3 V = normalize(uCameraLoc - vPosWorld)","float specAngle = max(dot(R,V),0.0)","specular = pow(specAngle, uShininess)",`${Fg} = vec4(ambientReflection * ambientColor + diffuseReflection * lambertian * diffuseColor + specularReflection * specular * specularColor, ${Fg}.a)`)],sv=(t,...i)=>{var s,e;if("linear-highPrecision"!==t||0===i.length)return{vertexShaderModifiers:[],fragmentShaderModifiers:[]};const h=i[0];return{vertexShaderModifiers:[Yg("varying vec4 d"),Zg(`d = vec4(${i[0]}.x, ${i[0]}.y, ${null!==(s=i[1])&&void 0!==s?s:h}.x, ${null!==(e=i[1])&&void 0!==e?e:h}.y)`)],idFragment:"hpfix",fragmentShaderModifiers:[Yg("varying vec4 d"),Zg("if (d.z == -100.0 + d.z / 10.0) { gl_FragColor = d; }")]}};class ev extends Error{constructor(t,i,s){super(`Dynamic shader generation error\n(id: ${i})\n ${s?`when applying feature: ${s.idVertex?`vert: ${s.idVertex}`:""} ${s.idFragment?`frag: ${s.idFragment}`:""}`:""} | ${t}`)}}const hv=(...t)=>{let i="";for(const s of t){if("object"!=typeof s){i+=`${String(s)},`;continue}const t=[{prefix:"",obj:s}];for(;t.length>0;){const{prefix:s,obj:e}=t.shift();i+=`${s}:`;const h=Object.keys(e).sort();for(const s of h){const h=e[s];"object"==typeof h&&h.__proto__===Object.prototype||Array.isArray(h)?t.push({prefix:s,obj:h}):i+=`${s}=${String(h)},`}}}return i},rv=t=>void 0!==t.find((t=>{var i;return null===(i=t.NB)||void 0===i?void 0:i.GB})),nv=t=>void 0!==t.find((t=>{var i;return null===(i=t.NB)||void 0===i?void 0:i.$B})),ov=(t,i,...s)=>{const e=[],h=i?"vec3":"vec2",{axisWorldTranslation:r,scaling:n,translation:o,offset:a,flipXY:l,flipXZ:c,splitPosAttribute:u,normalSource:d}=t,f=[];if("attribute"===d&&e.push(Yg(`attribute vec3 ${Og}`),Xg(`vec3 ${kg} = ${Og}`)),"linear-highPrecision"!==r?s.forEach((t=>{void 0!==t.attributeNameAxisCoord&&void 0!==t.variableNameAxisCoord&&(!0!==u?f.push(`${h} ${t.variableNameAxisCoord} = ${t.attributeNameAxisCoord}`):f.push(`${h} ${t.variableNameAxisCoord} = ${i?`vec3(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y, ${t.attributeNameAxisCoord}Z)`:`vec2(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y)`}`))})):s.forEach((i=>{!0!==t.splitPosAttribute?f.push(`${h} ${i.variableNameAxisCoord}_highpart = ${i.attributeNameAxisCoord}_highpart`,`${h} ${i.variableNameAxisCoord}_lowpart = ${i.attributeNameAxisCoord}_lowpart`):f.push(`${h} ${i.variableNameAxisCoord}_highpart = vec2(${i.attributeNameAxisCoord}_highpartX, ${i.attributeNameAxisCoord}_highpartY)`,`${h} ${i.variableNameAxisCoord}_lowpart = vec2(${i.attributeNameAxisCoord}_lowpartX, ${i.attributeNameAxisCoord}_lowpartY)`)})),a&&a.rotation){const t=a.rotation.dataType,i="uniform"===t?"u":"a";if("attribute-deg"===t){e.push(Yg("attribute float aRotDeg"),Yg("uniform float uBaseRotDeg"));const t="cRot",i=Vg;e.push(Xg(`vec2 ${t} = vec2(sin((aRotDeg + uBaseRotDeg) * 0.01745329252), cos((aRotDeg + uBaseRotDeg) * 0.01745329252))`,`vec2 ${Tg} = vec2(${i}.x * ${t}.y + ${i}.y * ${t}.x, ${i}.y * ${t}.y - ${i}.x * ${t}.x)`))}else{const s=`${i}Rot`;e.push(Yg(`${t} vec2 ${s}`));const h=Vg;e.push(Xg(`vec2 ${Tg} = vec2(${h}.x * ${s}.y + ${h}.y * ${s}.x, ${h}.y * ${s}.y - ${h}.x * ${s}.x)`))}}if(a&&e.push(Yg(`attribute ${h} ${Vg}`)),!0===l){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXY");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${i?`vec3(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x, ${t.variableNameAxisCoord}.z)`:`vec2(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`}`)}))}if(!0===c){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXZ");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = vec3(${t.variableNameAxisCoord}.z, ${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`)}))}if(n){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + scaling");const t=("attribute"===n.dataType?"a":"u")+"Scaling",h=i?"vec3":"vec2";e.push(Yg(`${n.dataType} ${h} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} * ${t}`)}))}if(o&&"axis"===o.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + translation (axis)");const t=("attribute"===o.dataType?"a":"u")+"TranslationAxis",h=i?"vec3":"vec2";e.push(Yg(`${o.dataType} ${h} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} + ${t}`)}))}if(a&&"axis"===a.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + offset (axis)");const t=("attribute"===a.dataType?"a":"u")+"OffsetAxis",n=!0===a.symmetric?"float":h;e.push(Yg(`${a.dataType} ${n} ${t}`));const o=a.halved?" * 0.5":"",l=a.rotation?Tg:Vg,c="offsetGeometry";f.push(`${h} ${c} = ${t} * ${l}${o} * sign(uScale)`),i&&"gpu-calculate"===d&&f.push(`${h} ${kg} = ${l}`),s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${t.variableNameAxisCoord} + ${c}`)}))}if(void 0===r||"linear"===r)e.push(Yg(`uniform ${h} uDisp`,`uniform ${h} uScale`)),s.forEach((t=>{f.push(`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord} - uDisp) / uScale`)}));else if("linear-highPrecision"===r)e.push(Yg(`uniform ${h} uDisp`,`uniform ${h} uScale`,`uniform ${h} uScaleStart_highpart`,`uniform ${h} uScaleStart_lowpart`)),s.forEach((t=>{f.push(`${h} ${t.variableNameAxisCoord}_hprecision = (${t.variableNameAxisCoord}_highpart - uScaleStart_highpart) + (${t.variableNameAxisCoord}_lowpart - uScaleStart_lowpart)`,`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord}_hprecision - uDisp) / uScale`,`${h} ${t.variableNameAxisCoord} = ${t.variableNameAxisCoord}_highpart + ${t.variableNameAxisCoord}_lowpart`)}));else if("matrix"===r)e.push(Yg("uniform mat3 uMatrix")),s.forEach((t=>{f.push(`vec2 ${t.variableNameWorldCoord} = (uMatrix * vec3(${t.variableNameAxisCoord}, 1.0)).xy`)}));else if("matrix4"===r)e.push(Yg("uniform mat4 uMatrix")),s.forEach((t=>{f.push(`vec4 ${t.variableNameWorldCoord} = uMatrix * ${t.attributeNameAxisCoord}`)}));else if("logarithmic"===r[0]){e.push(Yg(`uniform ${h} uScaleStart`,`uniform ${h} uScaleStartLog`,`uniform ${h} uScaleInterval`,`uniform ${h} uScaleIntervalLog`,`uniform ${h} uViewportStart`,`uniform ${h} uViewportSize`));const t=i?["x","y","z"]:["x","y"],n=[];t.forEach((t=>{const i=r[1][t];if(void 0!==i){const t=i.base;if("e"===t)return;const s=`float cLog${t} = 1.0 / log(${ue(t).toFixed(1)})`;n.includes(s)||n.push(s)}})),e.push(Yg(...n)),s.forEach(((i,s)=>{const e=`${s}`,n=[];t.forEach((t=>{const s=t.toUpperCase(),h=r[1][t];if(void 0===h)f.push(`float posPercent${s}${e} = (${i.variableNameAxisCoord}.${t} - uScaleStart.${t}) / uScaleInterval.${t}`);else{const r=h.base,n="e"===r;f.push(`float posLog${s}${e} = log(${i.variableNameAxisCoord}.${t})${n?"":` * cLog${r}`}`,`float posPercent${s}${e} = (posLog${s}${e} - uScaleStartLog.${t}) / uScaleIntervalLog.${t}`)}n.push(`posPercent${s}${e}`)})),f.push(`${h} ${i.variableNameWorldCoord} = uViewportStart + ${h}(${n.join(", ")}) * uViewportSize`)}))}if(a&&"px"===a.sizeUnit){e.push($g);let t="vec2(0.0, 0.0)";if(a.useAlignment&&(e.push(Yg(`uniform vec2 ${Rg}`)),t=Rg),s.find((t=>t.overrideOffsetPixels)))s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${t.overrideOffsetPixels} * ${Lg}`)}));else{const i=("attribute"===a.dataType?"a":"u")+"OffsetPixels",r=!0===a.symmetric?"float":h;e.push(Yg(`${a.dataType} ${r} ${i}`));const n=a.halved?" * 0.5":"";let o;if(!1!==a.useGeometry){const s=a.rotation?Tg:Vg;o=`(${s} + ${t}) * ${i}${n} * ${Lg}`}else o=`${i}${n} * ${Lg}`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${o}`)}))}}if(a&&"scale"===a.sizeUnit){e.push($g),e.push(Yg(`uniform vec2 ${Eg}`));let t="vec2(0.0, 0.0)";a.useAlignment&&(e.push(Yg(`uniform vec2 ${Rg}`)),t=Rg);const i=("uniform"===a.dataType?"u":"a")+"OffsetScale";e.push(Yg(`${a.dataType} float ${i}`));const h=`(${a.rotation?Tg:Vg} + ${t}) * ${i} * ${Eg} * ${Lg}`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${h}`)}))}if(a&&"wu"===a.sizeUnit){const t=("attribute"===a.dataType?"a":"u")+"OffsetWU",r=!0===a.symmetric?"float":h;e.push(Yg(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?Tg:Vg,l="offsetGeometry";f.push(`${h} ${l} = ${t} * ${o}${n}`),i&&"gpu-calculate"===d&&f.push(`${h} ${kg} = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l}`)}))}if(a&&"nwu"===a.sizeUnit){e.push(Yg(`uniform float ${Bg}`));const t=("attribute"===a.dataType?"a":"u")+"OffsetNWU",r=!0===a.symmetric?"float":h;e.push(Yg(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?Tg:Vg,l="offsetGeometry";f.push(`${h} ${l} = ${t} * ${o}${n}`),i&&"gpu-calculate"===d&&f.push(`${h} ${kg} = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l} * ${Bg}`)}))}return t.snapToNearestPixel&&(e.push(Yg("uniform vec2 uViewportSizePx")),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = 2.0 * floor(((${t.variableNameWorldCoord} + 1.0) * 0.5) * uViewportSizePx + 0.5) / uViewportSizePx - 1.0`)}))),e.push(Wg("gl_Position =",...f)),e},av=(t,i,s,e)=>{const h=[],r=t.axisWorldTranslation,n=i?"vec3":"vec2";if("linear"===r)h.push(jg(s,`${n} ${e} = ${s} * uScale + uDisp`));else if("linear-highPrecision"===r)h.push(jg(s,`${n} ${e} = ${s} * uScale + uDisp + uScaleStart_highpart + uScaleStart_lowpart`));else{if("matrix"===r)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("matrix4"===r)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("logarithmic"!==r[0])throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");{const t=[`${n} ${s}_percent = (${s} - uViewportStart) / uViewportSize`];(i?["x","y","z"]:["x","y"]).forEach((i=>{const e=i.toUpperCase(),h=r[1][i];if(void 0===h)t.push(`float pos${e}Back = ${s}_percent.${i} * uScaleInterval.${i} + uScaleStart.${i}`);else{const r=h.base,n="e"===r?"1.0":`cLog${r}`;t.push(`float pos${e}Back = pow(2.71828, (${s}_percent.${i} * uScaleIntervalLog.${i} + uScaleStartLog.${i}) / ${n})`)}})),t.push(`${n} ${e} = ${n}(posXBack, posYBack${i?", posZBack":""})`),h.push(jg(s,...t))}}return h},lv=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.NB)||void 0===i?void 0:i.UB})))(t)?[Hg("attribute vec4 aColor"),Hg("vColor = aColor"),Yg("attribute vec4 aColorA"),Yg("attribute vec4 aColorB"),Zg("vColor = mix(aColorA, aColorB, aSegmentSide)")]:[],cv=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.NB)||void 0===i?void 0:i.YB})))(t)?[Hg("attribute float aLookupValue"),Hg("vLookupValue = aLookupValue"),Yg("attribute float aLookupValueA"),Yg("attribute float aLookupValueB"),Zg("vLookupValue = mix(aLookupValueA, aLookupValueB, aSegmentSide)")]:[],uv={"2D":{idFeature:"2D",apply:t=>({idVertex:"2D",idFragment:"2D",defaultVertexShader:"2D",defaultFragmentShader:"FragmentShader"})},"2DCompose":{idFeature:"2DCompose",apply:t=>({idVertex:"2DCompose",idFragment:"2DCompose",defaultVertexShader:"2DMatrix",defaultFragmentShader:"Empty"})},"3D":{idFeature:"3D",NB:{GB:!0},apply:t=>({idVertex:"3D",idFragment:"3D",defaultVertexShader:"3D",defaultFragmentShader:"FragmentShader"})},PointSize:t=>({idFeature:"PointSize",apply:i=>{const s="uniform"===t?"u":"a";return{idVertex:`SizePrimitive:${hv(t)}`,idFragment:void 0,vertexShaderModifiers:[Yg(`${t} float ${s}PointSize`,"uniform float uDevicePixelRatio"),Zg(`gl_PointSize = ${s}PointSize * uDevicePixelRatio`)]}}}),Color:t=>{const i=t&&t.dataType,s=t&&t.maskTextureText,e=t&&t.maskTexture,h=t&&t.overrideOpacity;return{idFeature:"Color",NB:{$B:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,YB:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0,UB:"attribute"===t.dataType||void 0},apply:(r,n)=>{let o,a=`Color:${hv(t)}`;const l=[];let c="FragmentShader";const u=[];if("uniform"===i)u.push(Yg("uniform vec4 uColor"),jg(`${Fg} =`,`${Fg} = uColor`),...s?qg:[],...e?tv:[]);else if("attribute"===i)o="colorAttribute",l.push(Qg("attribute vec4 aColor","varying vec4 vColor")),u.push(Yg("varying vec4 vColor"),jg(`${Fg} =`,`${Fg} = vColor`),...s?qg:[],...e?tv:[]);else if("texture"===i)o="colorTexCoord",l.push(Qg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),u.push(Yg("varying vec2 vTextureCoord"),Yg(`uniform sampler2D ${Dg}`),Yg("uniform vec4 uColor"),jg(`${Fg} =`,`${Fg} = texture2D(${Dg}, vTextureCoord)`,`if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.) {\n                        ${Fg} = uColor;\n                    }`),...s?qg:[],...e?tv:[]);else if("texture-coord-calc-gpu"===i)o="colorTexCoord",c="Empty",l.push(Yg("attribute vec2 aTextureCoord"),Yg("varying vec2 vTextureCoord"),Zg("vTextureCoord = gl_Position.xy * 0.5 + 0.5")),u.push(Yg("varying vec2 vTextureCoord"),Yg(`uniform sampler2D ${Dg}`),Xg(`vec4 ${Fg} = texture2D(${Dg}, vTextureCoord)`,`gl_FragColor = ${Fg};`));else if(Array.isArray(i)&&"image"===i[0])o="colorTexCoord",l.push(Qg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),i[1].fitMode===$t.Tile?u.push(Yg(`uniform sampler2D ${Dg}`),Yg("varying vec2 vTextureCoord"),jg(`${Fg} =`,`${Fg} = texture2D(${Dg}, vTextureCoord);`)):u.push(Yg(`uniform sampler2D ${Dg}`),Yg("varying vec2 vTextureCoord"),Yg("uniform vec4 uColor"),jg(`${Fg} =`,`${Fg} = texture2D(${Dg}, vTextureCoord);`,`if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.){\n                                ${Fg} = uColor;\n                            }`));else if(Array.isArray(i)&&"lookup"===i[0]){const t=i[1];if("value"===t)o="lookup:value",l.push(Qg("attribute float aLookupValue","varying float vLookupValue"));else{const i=`${_g}.${t}`;o=`lookup:${t}`,l.push(Qg(i,"varying float vLookupValue"))}u.push(Yg("varying float vLookupValue"),...Kg("vLookupValue",i[2]),...s?qg:[],...e?tv:[])}else if(Array.isArray(i)&&"gradient"===i[0]){const t=i[1],h=t.getColorStops();q(t)?(a=`rgradient${h.length},${e},${s}`,u.push(Yg("uniform vec4 uBounds","uniform vec2 uCenter","uniform vec2 uDistance","uniform float uAspect"),Yg(...Ai(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),wg.linearStep,jg(`${Fg} =`,"vec2 uv = vec2((((gl_FragCoord.x)-uBounds.x)/(uBounds.z))*uAspect,((gl_FragCoord.y)-uBounds.y)/(uBounds.w))","float mixVal = distance(uv/uDistance, uCenter/uDistance)","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, mixVal))",...h.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, mixVal));`)),`${Fg} = color`),...s?qg:[],...e?tv:[])):st(t)&&(a=`lgradient${h.length},${e},${s}`,u.push(Yg("uniform vec4 uBounds","uniform vec2 uStartPoint","uniform vec2 uEndPoint"),Yg(...Ai(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),wg.linearStep,jg(`${Fg} =`,"vec2 uv = gl_FragCoord.xy - uBounds.xy","float magnitude = ((uv.x-uStartPoint.x) * (uEndPoint.x-uStartPoint.x) + (uv.y-uStartPoint.y) * (uEndPoint.y-uStartPoint.y)) / (pow(uEndPoint.x - uStartPoint.x, 2.0) + pow(uEndPoint.y-uStartPoint.y,2.0))","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, magnitude))",...h.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, magnitude))`)),`${Fg} = color`),...s?qg:[],...e?tv:[]))}if(s||e){const t="maskTexture";o=o?`${o} ${t}`:`Color:${t}`,l.push(Qg("attribute vec2 aMaskTextureCoord","varying vec2 vMaskTextureCoord"))}return h&&u.push(Yg("uniform float uOpacity"),jg(`${Fg} =`,`${Fg}.a *= uOpacity`)),{vertexShaderModifiers:l,fragmentShader:c,fragmentShaderModifiers:u,idVertex:o,idFragment:a}}}},ColorShaded3D:t=>{const{dataType:i,shadingStyle:s,wireframe:e}=t;let h;const r=`ColorShaded3D:${hv(t)}`;return{idFeature:"ColorShaded3D",NB:{$B:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,YB:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0},apply:(t,n)=>{const o=[],a=[];if(o.push("phong"===s&&Qg(kg,"varying vec3 vNormal"),Qg(Cg,"varying vec3 vPosWorld")),"uniform"===i)a.push(Yg("uniform vec4 uColorDiffuse"),jg(`${Fg} =`,`${Fg} = uColorDiffuse`));else if("attribute"===i)h="per-vertex-color",o.push(Qg("attribute vec4 aColor","varying vec4 vColor")),a.push(Yg("varying vec4 vColor"),jg(`${Fg} =`,`${Fg} = vColor`));else if(Array.isArray(i)){const t=i[1];if("value"===t)h="lookup:value",o.push(Qg("attribute float aLookupValue","varying float vLookupValue"));else{const i=`${_g}.${t}`;h=`lookup:${t}`,o.push(Qg(i,"varying float vLookupValue"))}a.push(Yg("varying float vLookupValue"),...Kg("vLookupValue",i[2]))}if(e){const t="wireframe";h=h?`${h},${t}`:t,o.push(Qg("attribute vec3 aTriangleBary","varying vec3 vTriangleBary")),a.push(Yg("varying vec3 vTriangleBary"),Yg("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),wg.computeScreenSpaceWireframe,jg(`${Fg} =`,"float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",`${Fg} = mix(${Fg}, uWireframeColor, edge)`))}return"phong"===s&&a.push(...iv),{idVertex:h,idFragment:r,vertexShaderModifiers:o,fragmentShader:"FragmentShader",fragmentShaderModifiers:a}}}},VertexLocation:t=>({idFeature:"VertexLocation",apply:i=>{const s=sv(t.axisWorldTranslation,"posAxis_hprecision"),e=[],h=rv(i),r=t.coordType?t.coordType:h?"vec3":"vec2";return t.isInstanceRectangleRendering?e.push(Yg("attribute vec2 aRectCorner","attribute vec2 aMemberStart","attribute vec2 aMemberEnd"),Xg("vec2 aPos = mix(aMemberStart, aMemberEnd, aRectCorner)")):"linear-highPrecision"!==t.axisWorldTranslation?!0!==t.splitPosAttribute?e.push(Yg(`attribute ${r} aPos`)):e.push(Yg("attribute float aPosX"),Yg("attribute float aPosY"),h&&Yg("attribute float aPosZ")):!0===t.splitPosAttribute?e.push(Yg("attribute float aPos_highpartX"),Yg("attribute float aPos_lowpartX"),Yg("attribute float aPos_highpartY"),Yg("attribute float aPos_lowpartY")):e.push(Yg(`attribute ${r} aPos_highpart`),Yg(`attribute ${r} aPos_lowpart`)),e.push(...ov(t,h,{attributeNameAxisCoord:"aPos",variableNameAxisCoord:"vec4"===t.coordType?void 0:_g,variableNameWorldCoord:Cg})),e.push(...s.vertexShaderModifiers),{idVertex:`VertexLocation:${hv(t)}`,idFragment:s.idFragment,vertexShaderModifiers:e,fragmentShaderModifiers:s.fragmentShaderModifiers}}}),Model3D:t=>({idFeature:"Model3D",apply:i=>{const s=[];return s.push(Yg("attribute vec3 aGeoPos"),Yg("uniform mat4 uModelRotation"),Yg("uniform mat4 uModelRotationNormals"),Yg("uniform vec3 uLocationAxis"),Yg("uniform vec3 uModelAlignment"),Yg("uniform vec3 uModelScale"),Yg("uniform vec3 uModelSize"),...ov({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,{attributeNameAxisCoord:"uLocationAxis",variableNameAxisCoord:"locationAxis",variableNameWorldCoord:"locationWorld"}),Wg("gl_Position =","vec3 posWorld = locationWorld + ((uModelRotation * vec4(aGeoPos, 1.0)).xyz  - (uModelAlignment + 1.0) * uModelSize/2.0) * uModelScale;"),"attribute"===t.normalSource&&jg(`vec3 ${kg} =`,` ${kg} = (uModelRotationNormals * vec4(${kg}, 1.0)).xyz;`),...nv(i)?av({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,Cg,_g):[]),{vertexShaderModifiers:s,idVertex:`Model3D:${hv(t)}`,idFragment:void 0}}}),LineInstanced2D:t=>{const i=sv(t.axisWorldTranslation,"locationA_hprecision","locationB_hprecision");return{idFeature:"LineInstanced2D",apply:s=>({idVertex:`LineInstanced2D:${hv(t)}`,idFragment:i.idFragment,vertexShaderModifiers:[Yg("uniform float uThicknessPixels"),$g,..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[Yg("attribute vec2 aLocationA"),Yg("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[Yg("attribute vec2 aLocationA_highpart"),Yg("attribute vec2 aLocationB_highpart"),Yg("attribute vec2 aLocationA_lowpart"),Yg("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[Yg("attribute float aLocationAX"),Yg("attribute float aLocationAY"),Yg("attribute float aLocationBX"),Yg("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[Yg("attribute float aLocationA_highpartX"),Yg("attribute float aLocationA_highpartY"),Yg("attribute float aLocationB_highpartX"),Yg("attribute float aLocationB_highpartY"),Yg("attribute float aLocationA_lowpartX"),Yg("attribute float aLocationA_lowpartY"),Yg("attribute float aLocationB_lowpartX"),Yg("attribute float aLocationB_lowpartY")]:[],Yg("attribute vec2 aSegmentPosition"),Yg("attribute float aSegmentSide"),t.offset&&Yg("attribute vec2 aOffsetPixelsA","attribute vec2 aOffsetPixelsB"),...ov(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA",overrideOffsetPixels:t.offset?"aOffsetPixelsA":void 0},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB",overrideOffsetPixels:t.offset?"aOffsetPixelsB":void 0}),t.ensureMinimumSegmentLength&&Yg("uniform vec2 uMinSegmentPixelVector"),jg("worldB = ",t.ensureMinimumSegmentLength&&"float segmentLengthPixels = sqrt(pow(worldB.x - worldA.x, 2.0) + pow(worldB.y - worldA.y, 2.0)) / length(uRatioPxClip)",t.ensureMinimumSegmentLength&&"if (segmentLengthPixels == 0.0 || segmentLengthPixels < length(uMinSegmentPixelVector)) {\n                            worldB = worldA + uMinSegmentPixelVector * uRatioPxClip;\n                        }","vec2 directionBasis = worldB - worldA","vec2 directionBasisNorm = normalize(directionBasis)","vec2 perpendBasisNorm = vec2(-directionBasisNorm.y, directionBasisNorm.x)","vec2 offset = mix(worldA, worldB, aSegmentSide)","vec2 thicknessDirection = aSegmentPosition.x * directionBasisNorm + aSegmentPosition.y * perpendBasisNorm",`vec2 ${Cg} = offset + thicknessDirection * uThicknessPixels * ${Lg}`),...cv(s),...lv(s),...nv(s)?av(t,!1,Cg,_g):[],...i.vertexShaderModifiers],fragmentShaderModifiers:i.fragmentShaderModifiers})}},Area2D:t=>({idFeature:"Area2D",apply:i=>{const s=sv(t.axisWorldTranslation,"locationA_hprecision","locationB_hprecision");return{idVertex:`Area2D:${hv(t)}`,idFragment:s.idFragment,vertexShaderModifiers:[..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[Yg("attribute vec2 aLocationA"),Yg("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[Yg("attribute vec2 aLocationA_highpart"),Yg("attribute vec2 aLocationB_highpart"),Yg("attribute vec2 aLocationA_lowpart"),Yg("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[Yg("attribute float aLocationAX"),Yg("attribute float aLocationAY"),Yg("attribute float aLocationBX"),Yg("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[Yg("attribute float aLocationA_highpartX"),Yg("attribute float aLocationA_highpartY"),Yg("attribute float aLocationB_highpartX"),Yg("attribute float aLocationB_highpartY"),Yg("attribute float aLocationA_lowpartX"),Yg("attribute float aLocationA_lowpartY"),Yg("attribute float aLocationB_lowpartX"),Yg("attribute float aLocationB_lowpartY")]:[],Yg("attribute float aCurveOrBaseline"),Yg("attribute float aSegmentSide"),...ov(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),jg("worldB = ","vec2 posCoord = mix(worldA, worldB, aSegmentSide)","bottom"===t.fill?"float baseline = min(posCoord.y, -1.0)":"top"===t.fill?"float baseline = max(posCoord.y, 1.0)":"left"===t.fill?"float baseline = min(posCoord.x, -1.0)":"float baseline = max(posCoord.x, 1.0)",`vec2 ${Cg} = ${"bottom"===t.fill||"top"===t.fill?"vec2(posCoord.x, mix(posCoord.y, baseline, aCurveOrBaseline))":"vec2(mix(posCoord.x, baseline, aCurveOrBaseline), posCoord.y)"}`),...cv(i),...lv(i),...nv(i)?av(t,!1,Cg,_g):[],...s.vertexShaderModifiers],fragmentShaderModifiers:s.fragmentShaderModifiers}}}),LineInstanced3D:t=>({idFeature:"LineInstanced3D",apply:i=>({idVertex:`LineInstanced3D:${hv(t)}`,idFragment:void 0,defaultFragmentShader:"FragmentShader",vertexShaderModifiers:[Yg("uniform float uOffsetWU"),Yg("attribute vec3 aLocationA"),Yg("attribute vec3 aLocationB"),Yg("attribute float aSegmentPosition"),Yg("attribute float aPerpendHorizontal"),Yg("attribute float aPerpendVertical"),...ov({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},rv(i),{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),jg("worldB = ","vec3 directionBasis = worldB - worldA","vec3 directionBasisNorm = normalize(directionBasis)","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(directionBasis.y), 0.9 ) ))","vec3 horizontalBasis = normalize( cross( notParallel, directionBasisNorm ) )","vec3 verticalBasis = normalize( cross( horizontalBasis, directionBasisNorm ) )",`vec3 ${kg} = aPerpendHorizontal * horizontalBasis + aPerpendVertical * verticalBasis`,`vec3 ${Cg} = worldA + aSegmentPosition * directionBasis + ${kg} * uOffsetWU * 0.5`),...nv(i)?av({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,Cg,_g):[]]})}),RoundedEdges3D:{idFeature:"RoundedEdges3D",apply:t=>({idVertex:"RoundedEdges3D",idFragment:void 0,vertexShaderModifiers:[Yg("attribute vec3 aEdge"),Yg("uniform float uEdgeRoundness"),jg(`${Cg} =`,"vec3 boxSizeWorld = abs( aOffsetAxis / uScale )","float boxMinDimensionWorldXZ = min( boxSizeWorld.x, boxSizeWorld.z )","vec3 edgeRoundAmount = uEdgeRoundness * vec3( boxMinDimensionWorldXZ, min( boxMinDimensionWorldXZ, boxSizeWorld.y ), boxMinDimensionWorldXZ )",`${Cg} = ${Cg} + aEdge * edgeRoundAmount`)]})},ColorGrid2D:t=>{const i=t.flipXY,s=t.intensityTextureType,e=t.littleEndian;return{idFeature:"ColorGrid2D",apply:(h,r)=>({idVertex:void 0,idFragment:`ColorGrid2D:${hv(t)}`,fragmentShader:"FragmentShader",fragmentShaderModifiers:[Yg("uniform vec4 uTileBounds","uniform vec2 uTileDimensions","uniform sampler2D uTileIntensityValues"),"ubyte"===s&&wg.decodeUbyteRGBAEncodedFloat,"bilinear"===t.interpolation?Xg("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions - 1.0)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensions - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensions - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${i?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${i?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${i?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${i?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===s?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${e})`),"float intensity01 = "+("float"===s?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${e})`),"float intensity10 = "+("float"===s?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${e})`),"float intensity11 = "+("float"===s?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${e})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${i?"lerpFactors.y":"lerpFactors.x"})`):Xg("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellIndexNormalized = cellIndex / uTileDimensions",`vec4 sample0 = texture2D(uTileIntensityValues, ${i?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = "+("float"===s?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${e})`)),...Kg("intensityP",t.lut)]})}},DrawToNormalTexture:t=>{const i=t.flipXZ,s=t.vertexIdSource,e=t.normalTextureType,h=t.heightmapTextureType,r=t.littleEndian;return{idFeature:"DrawToNormalTexture",apply:(n,o)=>{const a=[],l=[];return a.push(Yg("uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB","attribute"===s&&"attribute float aVertexID"),void 0!==s&&wg.roundUnsigned,wg.modulus,wg.texelFetchWithFallback[o],"ubyte"===h&&wg.decodeUbyteRGBAEncodedFloat,Xg(void 0===s?"int iVertex = gl_VertexID":"int iVertex = int(roundUnsigned(aVertexID))","int iSecondary = modulus(iVertex, (uTileDimensions.y - 1))","int iPrimary = iVertex / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(uTileDimensions) - 1.0","vec2 halfTexelWorld = 2.0 / (uTileDimensionsMinus1 * 2.0)","vec2 posWorld = vec2(-1.0 + halfTexelWorld.y + iCell.y * 2.0 * halfTexelWorld.y, -1.0 + halfTexelWorld.x + iCell.x * 2.0 * halfTexelWorld.x)","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec3 posAxis0 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`} ,\n                            uTileStartLocationAxisXZ.y + iCell.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell1 = iCell + vec2(1.0, 0.0)",`vec3 posAxis1 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell1.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell1.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell2 = iCell + vec2(0.0, 1.0)",`vec3 posAxis2 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell2.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell2.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell3 = iCell + vec2(1.0, 1.0)",`vec3 posAxis3 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell3.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell3.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec3 normal = normalize(cross(posAxis2 - posAxis0, posAxis1 - posAxis0) + cross(posAxis1 - posAxis3, posAxis2 - posAxis3))","uint"===e?"vNormalRGB = uvec3(((normal / 2.0) + 0.5) * float(-1u))":"vNormalRGB = (normal / 2.0) + 0.5","gl_PointSize = 1.0")),l.push(Yg("uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB"),Xg("uint"===e?"gl_FragColor = uvec4(vNormalRGB, -1u)":"gl_FragColor = vec4(vNormalRGB, 1.0)")),{idVertex:`DrawToNormalTexture:${hv(t)}`,idFragment:`DrawToNormalTexture:${hv(t)}`,vertexShaderModifiers:a,fragmentShaderModifiers:l,fragmentShader:"Empty",hints:["uint"===e&&{type:"fragOutput",fragOutput:"uvec4"}]}}}},SurfaceGrid:t=>{const i=t.fillColor,s=t.interpolation,e=t.flipXZ,h=t.shadingStyle,r=t.wireframe,n=t.normalTextureType,o=t.heightmapTextureType,a=t.intensityTextureType,l=t.littleEndian;return{idFeature:"SurfaceGrid",NB:{HB:!0},apply:(c,u)=>{const d=[],f=[];return d.push(Yg("attribute vec2 aGeoCellOffset","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture"),wg.modulus,wg.texelFetchWithFallback[u],"ubyte"===o&&wg.decodeUbyteRGBAEncodedFloat,Xg("int iSecondary = modulus(iInstance + uBaseInstance, (uTileDimensions.y - 1))","int iPrimary = (iInstance + uBaseInstance) / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 iCellVertex = iCell + aGeoCellOffset","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","vec2 ySampleCoordinate = vec2(iCellVertex.y, iCellVertex.x) / vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x)","float y = "+("float"===o?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${l})`),"vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)","vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * "+(e?"vec2(iCellVertex.y, iCellVertex.x)":"iCellVertex"),"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)")),d.push(...ov({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:_g,variableNameWorldCoord:Cg})),"phong"===h&&d.push(Qg(Cg,"varying vec3 vPosWorld"),..."uint"===n?[wg.texelFetchUnsignedWithFallback[u],Zg("vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)")]:[Zg("vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))")],Zg("vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vNormal = normalize(normalAxis * uScale)"),Yg("varying vec3 vNormal",..."uint"===n?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"])),f.push(Yg("varying vec3 vTriangleBary")),"uniform"===i?f.push(Yg("uniform vec4 uColorDiffuse"),jg(`${Fg} =`,`${Fg} = uColorDiffuse`)):Array.isArray(i)&&"lookup"===i[0]&&("value"===i[1]?(d.push(Qg(`${_g}.xz`,"varying vec2 vVertexLocationAxisXZ")),f.push(Yg("uniform vec4 uTileBoundsAxisXZ","uniform vec2 uTileDimensionsXZ","varying vec2 vVertexLocationAxisXZ","uniform sampler2D uTileIntensityValues","uniform mat4 uViewProjectionMatrix","uniform vec3 uScale","uniform vec3 uDisp"),"ubyte"===a&&wg.decodeUbyteRGBAEncodedFloat,"bilinear"===s?Xg("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = (vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensionsXZ - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensionsXZ - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${e?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${e?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${e?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${e?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===a?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${l})`),"float intensity01 = "+("float"===a?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${l})`),"float intensity10 = "+("float"===a?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${l})`),"float intensity11 = "+("float"===a?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${l})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${e?"lerpFactors.y":"lerpFactors.x"})`):Xg("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = floor((vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ)","vec2 cellIndexNormalized = cellIndex / (uTileDimensionsXZ - 1.0)",`vec4 sample0 = texture2D(uTileIntensityValues, ${e?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = sample0.x"),...Kg("intensityP",i[2]))):(d.push(Qg(`${_g}.${i[1]}`,"varying float vLookupValue")),f.push(Yg("varying float vLookupValue"),...Kg("vLookupValue",i[2])))),"phong"===h&&f.push(...iv),r&&(d.push(Yg("attribute vec3 aTriangleBary"),Qg("aTriangleBary","varying vec3 vTriangleBary")),f.push(Yg("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),wg.computeScreenSpaceWireframe,jg(`${Fg} =`,"float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",i?`if (edge > 0.0) {\n                                    ${Fg} = vec4(mix(${Fg}.rgb, uWireframeColor.rgb, edge * uWireframeColor.a), max(${Fg}.a, uWireframeColor.a));\n                                }`:`if (edge > 0.0) {\n                                    ${Fg} = uWireframeColor;\n                                  } else {\n                                      discard;\n                                  }`))),{idVertex:`SurfaceGrid:${hv(t)}`,idFragment:`SurfaceGrid:${hv(t)}`,vertexShaderModifiers:d,fragmentShader:"FragmentShader",fragmentShaderModifiers:f}}}},DebugSurfaceGridNormals:t=>({idFeature:"DebugSurfaceGridNormals",apply:(i,s)=>({idVertex:`DebugSurfaceGridNormals:${hv(t)}`,idFragment:`DebugSurfaceGridNormals:${hv(t)}`,vertexShaderModifiers:[Yg("attribute float aNormalArrow","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===t.instanceIdSource&&"attribute float aInstanceID",..."uint"===t.normalTextureType?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"]),wg.roundUnsigned,wg.modulus,wg.texelFetchWithFallback[s],"ubyte"===t.heightmapTextureType&&wg.decodeUbyteRGBAEncodedFloat,Xg(void 0===t.instanceIdSource?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","float y00 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y01 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y10 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y11 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y = (y00 + y01 + y10 + y11) / 4.0","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * (0.5 + ${t.flipXZ?"vec2(iCell.y, iCell.x)":"iCell"})`,"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)",..."uint"===t.normalTextureType?["vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)"]:["vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))"],"vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vec3 normalWorld = normalize(normalAxis * uScale)"),..."uint"===t.normalTextureType?[wg.texelFetchUnsignedWithFallback[s]]:[],...ov({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:_g,variableNameWorldCoord:Cg}),jg("posWorld =","vec3 dirArrow = normalWorld","vec3 posArrowStart = posWorld","vec3 posArrowEnd = posWorld + dirArrow * 0.010","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(dirArrow.y), 0.9 ) ))","vec3 dirArrowLeft = normalize(-dirArrow + 0.50 * normalize(cross(dirArrow, notParallel)))","vec3 dirArrowRight = normalize(-dirArrow + 0.50 * normalize(cross(notParallel, dirArrow)))","vec3 posArrowLeft = posArrowEnd + dirArrowLeft * 0.0025","vec3 posArrowRight = posArrowEnd + dirArrowRight * 0.0025","if (aNormalArrow == 0.0) {\n                        posWorld = posArrowStart;\n                    } else if (aNormalArrow == 1.0) {\n                        posWorld = posArrowEnd;\n                    } else if (aNormalArrow == 2.0) {\n                        posWorld = posArrowLeft;\n                    } else if (aNormalArrow == 3.0) {\n                        posWorld = posArrowRight;\n                    }")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[Zg("gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0)")]})}),OffsetTowardsCamera:()=>({idFeature:"OffsetTowardsCamera",apply:t=>({idVertex:"OffsetTowardsCamera",idFragment:void 0,vertexShaderModifiers:[Yg("uniform vec3 uCameraLoc"),jg("posWorld =","posWorld = posWorld + normalize(uCameraLoc) * 0.0025")]})}),AliasedEdge:{idFeature:"AliasedEdge",apply:t=>({idVertex:"AliasedEdge",idFragment:"AliasedEdge",vertexShaderModifiers:[Yg("attribute float aSegmentInside"),Yg("varying float vSegmentInside"),Yg("varying float vSegmentSide"),jg("gl_Position = ","\n                vSegmentInside = aSegmentInside;\n                vSegmentSide = aSegmentSide;\n                ")],fragmentShaderModifiers:[Jg("#extension GL_OES_standard_derivatives : enable"),Yg("uniform float uAALimit"),Yg("varying float vSegmentInside"),Yg("varying float vSegmentSide"),jg(`${Ig} = `,`\n                float dist = (uAALimit - vSegmentInside);\n                vec2 ddist = vec2(dFdx(dist), dFdy(dist));\n                float pixelDist = dist / length(ddist);\n                // additional blurring\n                pixelDist *= 0.5;\n\n                float aa = clamp(0.5 - pixelDist, 0.0, 1.0);\n                if((vSegmentSide <= 0.0 || vSegmentSide >= 1.0) && aa <=0.99){\n                    aa *= 0.5;\n                }\n                ${Ig} = aa;\n                `)]})},Glow1D:t=>({idFeature:"Glow1D",apply:()=>{const i=Math.round(t.spreadPx),s=Math.round(t.blurPx),e=i+s,h=t.firstPass,r=[];for(let t=-e;t<=e;t+=1){const i=Math.abs(t);r.push(h?{x:t.toFixed(1),y:"0.0",distPx:i.toFixed(1)}:{x:"0.0",y:t.toFixed(1),distPx:i.toFixed(1)})}return{idVertex:`Glow1D:${hv(t)}`,idFragment:`Glow1D:${hv(t)}`,vertexShaderModifiers:[Qg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[Yg("uniform sampler2D uTexture"),Yg("varying vec2 vTextureCoord"),Yg("uniform vec2 uTextureSize"),h&&Yg("uniform vec2 uOffsetPx"),!h&&Yg("uniform sampler2D uTextureFirstGlowPass"),!h&&Yg("uniform vec4 uGlowColor"),jg(`${Ig} =`,"vec2 oneTexel = vec2(1.0, 1.0) / uTextureSize","vec2 vTexCoordPixelCenter = vTextureCoord + vec2(0.5, 0.5) / uTextureSize",...h?[]:["float inverseIntensity =\n                                    0.25 * texture2D(uTexture, vTexCoordPixelCenter).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(-oneTexel.x, 0.0)).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(oneTexel.x, 0.0)).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(0.0, -oneTexel.y)).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(0.0, oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(-oneTexel.x, -oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(oneTexel.x, -oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(-oneTexel.x, oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(oneTexel.x, oneTexel.y)).a",`${Ig} *= 1.0 - (inverseIntensity * inverseIntensity)`,`if (${Ig} <= 0.0) { discard; }`],"float distancePx = 255.0","vec2 sample_tx = vec2(0.0)",...h?["vec2 texCoordOffset = vTexCoordPixelCenter - uOffsetPx * oneTexel",...r.map(((t,i)=>[`sample_tx = texCoordOffset + oneTexel * vec2(${t.x}, ${t.y})`,`if (distancePx > ${t.distPx} && sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0 && texture2D(uTexture, sample_tx).a > 0.0) { distancePx = ${t.distPx}; }`])).flat(),`${Fg} = vec4(distancePx / 255.0, 0.0, 0.0, 1.0)`]:["vec4 sample_horizontal = vec4(0.0)","float horizontal_dist = 255.0","float min_horizontal_dist = 255.0",...r.map(((t,i)=>[`sample_tx = vTexCoordPixelCenter + oneTexel * vec2(${t.x}, ${t.y})`,"if (sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0) {\n                                                sample_horizontal = texture2D(uTextureFirstGlowPass, sample_tx);\n                                                horizontal_dist = sample_horizontal.r * 255.0;\n                                            }","if (sample_horizontal.a < 0.9) { horizontal_dist = 255.0; }","min_horizontal_dist = min(min_horizontal_dist, horizontal_dist)",`distancePx = min(distancePx, pow(horizontal_dist * horizontal_dist + ${t.y} * ${t.y}, 0.5))`])).flat(),`if (distancePx > ${e.toFixed(1)}) { discard; }`,"vec4 pixelGlowColor = vec4(0.0, 0.0, 0.0, 0.0)",`if (distancePx > ${i.toFixed(1)}) {\n                                        float lerpAmount = (distancePx - ${i.toFixed(1)}) / ${(s+1).toFixed(1)};\n                                        pixelGlowColor = mix(uGlowColor, vec4(uGlowColor.rgb, 0.0), 1.0 - (1.0 - lerpAmount) * (1.0 - lerpAmount));\n                                    } else {\n                                        pixelGlowColor = uGlowColor;\n                                    }`,`${Fg} = pixelGlowColor`])]}}}),MousePicking:t=>{const i=!!(null==t?void 0:t.customMousePickingIdInput),s=!i&&!!(null==t?void 0:t.useVertexId),e=!i&&!!(null==t?void 0:t.useAttribute),h=!i&&!s&&!e;return{idFeature:"MousePicking",NB:{HB:h,XB:s},apply:(r,n)=>{const o="webgl2"===n?"flat":"",a="webgl2"===n?"int":"float";return{idVertex:`MousePicking:${hv(t)}`,idFragment:`MousePicking:${hv(t)}`,vertexShaderModifiers:[...h?[Yg(`${o} varying ${a} vPickingIdOffset`),Zg(`vPickingIdOffset = ${a}(iInstance)`)]:[],...s?[Yg(`${o} varying ${a} vPickingIdOffset`),Zg(`vPickingIdOffset = ${a}(iVertex)`)]:[],...e?[Yg("attribute float aPickingIdOffset",`${o} varying ${a} vPickingIdOffset`),Zg(`vPickingIdOffset = ${a}(aPickingIdOffset)`)]:[]],fragmentShaderModifiers:[Yg("uniform int uFirstId"),...i?[]:[Yg(`${o} varying ${a} vPickingIdOffset`),Xg(`int ${Pg} = ${"int"===a?"vPickingIdOffset":"int(floor(vPickingIdOffset + 0.5))"}`)],jg(`${Fg} =`,`int remainder = ${Pg} + uFirstId`,"int r = remainder / 16777216","remainder -= r * 16777216","int g = remainder / 65536","remainder -= g * 65536","int b = remainder / 256","remainder -= b * 256","int a = remainder",`${Fg} = vec4(float(r) / 255.0, float(g) / 255.0, float(b) / 255.0, float(a) / 255.0)`),t=>t.replace(`gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * ${Ig})`,`if (${Ig} <= 0.0) { discard; }\ngl_FragColor = fragColorEnd`).replace("if (fragColorEnd.a <= 0.0) { discard; }","")]}}}},AttributeHighlight:{idFeature:"AttributeHighlight",apply:t=>({idVertex:"AttributeHighlight",idFragment:"AttributeHighlight",vertexShaderModifiers:[Qg("attribute float aIsHighlighted","varying float vIsHighlighted")],fragmentShaderModifiers:[t=>t.replace("uniform float uIsHighlighted","varying float vIsHighlighted").replace("uIsHighlighted","vIsHighlighted")]})},StippleTexture:{idFeature:"StippleTexture",apply:(t,i)=>({idVertex:"StippleTexture",idFragment:"StippleTexture",vertexShaderModifiers:[Yg("attribute vec2 aLengthSoFar"),Yg("varying float vLengthSoFar"),Yg("uniform vec2 uStippleCount"),Zg("\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[Yg("uniform sampler2D uStippleTexture"),Yg("uniform float uStippleScale"),Yg("varying float vLengthSoFar"),"webgl1"===i&&Yg("uniform float uStippleTextureWidthLimiter"),jg(`${Ig} = `,`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    ${Ig} *= stippleAA;\n                    if (${Ig} <= 0.0) { discard; }`)]})},StippleTextureInstanced:{idFeature:"StippleTextureInstanced",apply:(t,i)=>({idVertex:"StippleTextureInstanced",idFragment:"StippleTextureInstanced",vertexShaderModifiers:[Yg("attribute vec2 aLengthSoFarA"),Yg("attribute vec2 aLengthSoFarB"),Yg("varying float vLengthSoFar"),Yg("uniform vec2 uStippleCount"),Zg("\n                vec2 aLengthSoFar = mix(aLengthSoFarA, aLengthSoFarB, aSegmentSide);\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[Yg("uniform sampler2D uStippleTexture"),Yg("uniform float uStippleScale"),Yg("varying float vLengthSoFar"),"webgl1"===i&&Yg("uniform float uStippleTextureWidthLimiter"),jg(`${Ig} = `,`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    ${Ig} *= stippleAA;\n                    if (${Ig} <= 0.0) { discard; }`)]})},PolarHeatmap:t=>({idFeature:"PolarHeatmap",apply:(i,s)=>{const e="dataType"in t,h="interpolation"in t?t:void 0,r=h?h.flipXY:void 0,n="bilinear"===(null==h?void 0:h.interpolation),o=null==h?void 0:h.intensityTextureType,a=null==h?void 0:h.littleEndian;return{idVertex:void 0,idFragment:`PolarHeatmap:${hv(t)}`,vertexShaderModifiers:[],fragmentShaderModifiers:[Yg("uniform vec2 uViewportSize","uniform vec2 uScale","uniform vec2 uDisp","uniform float uSectors","uniform float uAnnuli","uniform float uAmplitudeStart","uniform float uAmplitudeStep","uniform float uAmplitudeAxisStart","uniform float uAmplitudeAxisEnd","uniform float uAngleOffset","uniform float uAngleDirection",h&&"uniform sampler2D uTileIntensityValues",e&&"uniform vec4 uColor"),wg.texelFetchWithFallback[s],"ubyte"===o&&wg.decodeUbyteRGBAEncodedFloat,Xg("vec2 posWorld = (2.0 * gl_FragCoord.xy / uViewportSize) - 1.0","vec2 posAxis = posWorld * uScale + uDisp","float amplitudeAxisInterval = uAmplitudeAxisEnd - uAmplitudeAxisStart","float amplitude = uAmplitudeAxisStart + sign(amplitudeAxisInterval) * sqrt(posAxis.x * posAxis.x + posAxis.y * posAxis.y)","float iAnnulus = (amplitude - uAmplitudeStart) / uAmplitudeStep"),h&&jg("iAnnulus","float angRad = atan(posAxis.y, posAxis.x) * uAngleDirection + uAngleOffset","if (angRad < 0.0) { angRad = angRad + 2.0 * 3.1415926538; }","if (angRad > 2.0 * 3.1415926538) { angRad = angRad - 2.0 * 3.1415926538; }","float iSector = uSectors * angRad / (2.0 * 3.1415926538)","vec2 cellIndex = vec2(iSector, iAnnulus)","ivec2 cellStart = ivec2(floor(cellIndex))","ivec2 cellEnd = cellStart + ivec2(1)","if (cellEnd.x >= int(uSectors)) { cellEnd = ivec2(0, cellEnd.y); }",r&&"cellIndex = vec2(cellIndex.y, cellIndex.x)",r&&"cellStart = ivec2(cellStart.y, cellStart.x)",r&&"cellEnd = ivec2(cellEnd.y, cellEnd.x)"),e&&jg(`${Fg} =`,`${Fg} = uColor`),h&&jg("cellEnd","vec2 tileDimensions = "+(r?"vec2(uAnnuli, uSectors)":"vec2(uSectors, uAnnuli)"),n&&"vec4 sample00 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",n&&"vec4 sample01 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellStart.x, cellEnd.y), tileDimensions)",n&&"vec4 sample10 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellEnd.x, cellStart.y), tileDimensions)",n&&"vec4 sample11 = texelFetchWithFallback(uTileIntensityValues, cellEnd, tileDimensions)",n&&"float intensity00 = "+("float"===o?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${a})`),n&&"float intensity01 = "+("float"===o?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${a})`),n&&"float intensity10 = "+("float"===o?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${a})`),n&&"float intensity11 = "+("float"===o?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${a})`),n&&"vec2 lerpFactors = cellIndex - vec2(cellStart)",n&&"float intensityR1 = mix(intensity00, intensity10, lerpFactors.x)",n&&"float intensityR2 = mix(intensity01, intensity11, lerpFactors.x)",n&&"float intensityP = mix(intensityR1, intensityR2,  lerpFactors.y)",!n&&"vec4 sample0 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",!n&&"float intensityP = "+("float"===o?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${a})`)),...h?Kg("intensityP",h.lut):[]]}}})},dv={"2D":"\nvoid main(void) {\n    gl_Position = vec4(posWorld, 0.0, 1.0 );\n}\n","2DMatrix":"\nvoid main(void) {\n    gl_Position = posWorld;\n}\n","3D":"\nuniform mat4 uViewProjectionMatrix;\nvoid main(void) {\n    gl_Position = uViewProjectionMatrix * vec4(posWorld, 1.0);\n}\n"},fv={FragmentShader:`\nuniform float uIsHighlighted;\nuniform vec4 uHighlightColorOffset;\nuniform float uRenderEffectMask;\nvoid main(void) {\n    vec4 ${Fg} = vec4(0.0, 0.0, 0.0, 0.0);\n    float ${Ig} = 1.0;\n    vec4 fragColorEnd = ${Fg};\n    if (fragColorEnd.a <= 0.0) { discard; }\n    fragColorEnd = clamp(fragColorEnd + uIsHighlighted * uHighlightColorOffset, vec4(0.0), vec4(1.0));\n    fragColorEnd = mix(fragColorEnd, vec4(1.0), uRenderEffectMask * fragColorEnd.a * 1000.0);\n    gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * ${Ig});\n}\n`,Empty:"\nvoid main(void) {\n}\n"};class Av{constructor(t,i,s,e,h){if(this.id=t,this.shader=s,this.gl=e,this.info=h,!i||!s)throw new qt(`Could not find ${this.WB()} ${this.jB()} shader source code.`);this.gl.shaderSource(s,i),this.gl.compileShader(s)}get src(){return""}WB(){return this.id.toString()}jB(){return this.gl.getShaderParameter(this.shader,this.gl.SHADER_TYPE)===this.gl.FRAGMENT_SHADER?"fragment":"vertex"}}class gv extends Av{constructor(t,i,s,e){super(t,i,s.createShader(s.VERTEX_SHADER),s,e)}}class vv extends Av{constructor(t,i,s,e){super(t,i,s.createShader(s.FRAGMENT_SHADER),s,e)}}class yv{constructor(t,i,s,e){this.ZB=new Map,this.QB=new Map,this.JB=s,this.KB=s.createProgram(),this.qB=`${t.WB()} vertex`,this.tD=`${i.WB()} fragment`,s.attachShader(this.KB,t.shader),s.attachShader(this.KB,i.shader),s.bindAttribLocation(this.KB,0,"aPos"),s.linkProgram(this.KB),s.deleteShader(t.shader),s.deleteShader(i.shader),this.allAttributeNames=t.info.allAttributeNames,this.allUniformNames=Array.from(new Set(t.info.allUniformNames.concat(i.info.allUniformNames)).values()),this.vertexSharedRemovedVariables=t.info.removedVariableNames,this.fragmentSharedRemovedVariables=i.info.removedVariableNames}get vertexShaderSrc(){return""}get fragmentShaderSrc(){return""}iD(t){return Ki(0,(()=>qi()))}sD(t){const i=this.eD(t);if(void 0===i)throw this.iD(`Could not get ${t} uniform from ${this.qB} and ${this.tD} shaders.`);return i}eD(t){const i=this.ZB.get(t);if(i)return i;const s=this.JB.getUniformLocation(this.KB,t);return s?(this.ZB.set(t,s),s):void 0}hD(t){const i=this.rD(t);if(void 0===i)throw this.iD(`Could not get ${t} attribute from ${this.qB} and ${this.tD} shaders.`);return i}rD(t){const i=this.QB.get(t);if(i||0===i)return i;const s=this.JB.getAttribLocation(this.KB,t);return s>=0?(this.QB.set(t,s),s):void 0}G(){this.JB.deleteProgram(this.KB)}}const pv=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/,mv=t=>{let i;try{i=ni.getComputedStyle(t)}catch(t){return null}return i};
+import*as t from"immutable";import{Record as i}from"immutable";import s from"earcut";class e{constructor(){this.o=!0}u(){return this.o}}class h extends e{constructor(t,i){super(),this.S=t,this.M=t,this.o=i}_(t){return t!==this.S&&(this.M=this.S,this.S=t,this.o=!0),this}C(){return this.S}u(){return super.u()}}const r=(t,i)=>({x:t,y:i}),n=(t,i)=>({x:t,y:i}),o=(t,i,s)=>({position:t,high:i,low:s}),a=(t,i,s)=>({x:t,y:i,z:s}),l=t=>{const i=Array(0),s=Array(0);return t.length>0&&t.forEach((t=>{i.push(r(t.position,t.high)),s.push(r(t.position,t.low))})),[i,s]},c=(t,i)=>({min:t,max:i}),u=(t,i,s,e)=>({x:t,y:i,width:s,height:e}),d=(t,i=!0)=>new h(t,i),f=(t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}),A=f,g=(t,i)=>({left:void 0!==i.left?i.left:t.left,top:void 0!==i.top?i.top:t.top,right:void 0!==i.right?i.right:t.right,bottom:void 0!==i.bottom?i.bottom:t.bottom}),v=i({type:"color",r:1,g:1,b:1,a:1});class y extends v{constructor(t){super(t)}toUint32(){return void 0!==this.T||(this.T=F(this.getR(),this.getG(),this.getB(),this.getA())),this.T}toString(){return`color:${this.r},${this.g},${this.b},${this.a}`}setA(t){return this.set("a",t/255)}setR(t){return this.set("r",t/255)}setG(t){return this.set("g",t/255)}setB(t){return this.set("b",t/255)}getA(){return 255*this.get("a")}getR(){return 255*this.get("r")}getG(){return 255*this.get("g")}getB(){return 255*this.get("b")}getHighlight(){return this.F||(this.F=new y({r:this.r+.45*(1-this.r),g:this.g+.45*(1-this.g),b:this.b+.45*(1-this.b),a:this.a<1?this.a+.45*(1-this.a):1})),this.F}getLighter(){return this.I||(this.I=new y({r:this.r+.4*(1-this.r),g:this.g+.4*(1-this.g),b:this.b+.4*(1-this.b),a:this.a})),this.I}getDarker(){return this.P||(this.P=new y({r:this.r-.4*(1-this.r),g:this.g-.4*(1-this.g),b:this.b-.4*(1-this.b),a:this.a})),this.P}toRGBAString(){return`rgba( ${255*this.r}, ${255*this.g}, ${255*this.b}, ${255*this.a} )`}}const p=t=>!(!t||"object"!=typeof t||!("type"in t)||"color"!==t.type),m=(t,i,s,e=255)=>new y({r:t/255,g:i/255,b:s/255,a:e/255}),S=t=>{const i=t.startsWith("#")?t.substring(1):t.startsWith("0x")?t.substr(2):t;switch(i.length){case 8:return new y({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255,a:Number(`0x${i.substring(6,8)}`)/255});case 6:return new y({r:Number(`0x${i.substring(0,2)}`)/255,g:Number(`0x${i.substring(2,4)}`)/255,b:Number(`0x${i.substring(4,6)}`)/255});case 4:return new y({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255,a:Number(`0x${i.charAt(3)}${i.charAt(3)}`)/255});case 3:return new y({r:Number(`0x${i.charAt(0)}${i.charAt(0)}`)/255,g:Number(`0x${i.charAt(1)}${i.charAt(1)}`)/255,b:Number(`0x${i.charAt(2)}${i.charAt(2)}`)/255});default:throw new Error(`ColorHEX parsing error | input: ${t}`)}},b=(t,i=1,s=1)=>{let e,h,r;t/=360;const n=Math.floor(6*t),o=6*t-n,a=s*(1-i),l=s*(1-o*i),c=s*(1-(1-o)*i);switch(n%6){case 0:e=s,h=c,r=a;break;case 1:e=l,h=s,r=a;break;case 2:e=a,h=s,r=c;break;case 3:e=a,h=l,r=s;break;case 4:e=c,h=a,r=s;break;default:e=s,h=a,r=l}return new y({r:e,g:h,b:r})},x=t=>{try{if(t.startsWith("rgba")){const i=t.substr(5).slice(0,-1),s=JSON.parse(`[${i}]`);return m(s[0],s[1],s[2],255*s[3])}if(t.startsWith("rgb")){const i=t.substr(4).slice(0,-1),s=JSON.parse(`[${i}]`);return m(s[0],s[1],s[2])}if(t.startsWith("hsl")){const i=t.substr(4).slice(0,-1).split(",").map(parseFloat),s=w(i[0],i[1],i[2]);return m(s[0],s[1],s[2])}return t.startsWith("#")||t.startsWith("0x")?S(t):S(C(t))}catch(t){}return console.warn(`ColorCSS parsing error: ${t}`),S("#fff")},M=t=>m(255&t,255&(t>>=8),255&(t>>=8),255&(t>>=8)),w=(t,i,s)=>{i/=100,s/=100;const e=(1-Math.abs(2*s-1))*i,h=t/60,r=e*(1-Math.abs(h%2-1));let n=[];isNaN(t)?n=[0,0,0]:h<=1?n=[e,r,0]:h<=2?n=[r,e,0]:h<=3?n=[0,e,r]:h<=4?n=[0,r,e]:h<=5?n=[r,0,e]:h<=6&&(n=[e,0,r]);const o=s-.5*e;return[Math.round(255*(n[0]+o)),Math.round(255*(n[1]+o)),Math.round(255*(n[2]+o))]},_={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},C=t=>{const i=_[t.toLowerCase()];if(i)return i;throw new Error(`Unknown color code: ${t}`)},k=new y({}),T=m(0,0,0,0),F=(t,i,s,e=255)=>(e<<24|s<<16|i<<8|t)>>>0,I=t=>F(255*t.r,255*t.g,255*t.b,255*t.a),P=(t,i)=>t.value-i.value,L=i({type:"lut",steps:[],title:"",units:"",interpolate:!0,color:m(0,0,0,255),length:0,min:0,max:0,subranges:[],isValid:!1,percentageValues:!1}),B=t=>{const{steps:i}=t,s=i.length;i.sort(P);const[e,h]=s>0?[i[0].value,i[s-1].value]:[0,0],r=s>0?s-1:0,n=Array(r);for(let t=0;t<r;t+=1)n[t]={min:i[t],max:i[t+1]};return{min:e,max:h,length:s,steps:i,subranges:n,isValid:s>0&&e!==h}};class D extends L{constructor(t){super(((t,i)=>({steps:t.steps,title:t.title,units:t.units,interpolate:t.interpolate,percentageValues:t.percentageValues,color:t.color,length:i.length,min:i.min,max:i.max,subranges:i.subranges,isValid:i.isValid}))(t,B(t)))}toString(){return`LUT:interpolate=${this.interpolate},steps=${this.steps.length},percentage=${this.percentageValues}`}setSteps(t){return this.merge(B({...this,steps:t}))}getSteps(){return this.get("steps")}setTitle(t){return this.set("title",t)}getTitle(){return this.get("title")}setUnits(t){return this.set("units",t)}getUnits(){return this.get("units")}setInterpolation(t){return this.set("interpolate",t)}getInterpolation(){return this.get("interpolate")}setFallbackColor(t){return this.set("color",t)}getFallbackColor(){return this.get("color")}setPercentageValues(t){return this.set("percentageValues",t)}getPercentageValues(){return this.get("percentageValues")}getColors(t,i){if(Array.isArray(t)){if(Array.isArray(t[0])){const s=t,e=s.length,h=s[0].length,r=[...Array(e)].map((()=>Array(h)));for(let t=0;t<e;t+=1)for(let e=0;e<h;e+=1)r[t][e]=this.L(s[t][e],i);return r}const s=t,e=s.length,h=Array(e);for(let t=0;t<e;t+=1)h[t]=this.L(s[t],i);return h}return this.L(t,i)}L(t,i){const{steps:s}=this,e=s.length;if(0===e)return this.getFallbackColor();if(1===e)return s[0].color||this.color;if(this.percentageValues,this.percentageValues&&i&&(t=Math.max(Math.min((t-i.min)/(i.max-i.min),1),0)),this.interpolate){for(let i=0;i<e-1;i+=1){const e=s[i],o=s[i+1],a=Math.min(e.value,o.value),l=Math.max(e.value,o.value);if(t>=a&&t<=l){if(a===l)return e.color;const i=(t-e.value)/(o.value-e.value);return h=e.color,r=o.color,n=i,new y({r:h.r+(r.r-h.r)*n,g:h.g+(r.g-h.g)*n,b:h.b+(r.b-h.b)*n,a:h.a+(r.a-h.a)*n})}}return t<s[0].value?s[0].color:s[e-1].color}var h,r,n;for(let i=e-1;i>=0;i-=1)if(t>=s[i].value)return s[i].color;return s[0].color}}const E=t=>!(!t||"object"!=typeof t||!("type"in t)||"lut"!==t.type),R=i({type:"fillstyle",fillType:"empty"});class z extends R{toString(){return"emptyFill"}}const V=new z,O=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"empty"===t.fillType),N=i({type:"fillstyle",fillType:"solid",color:m(255,255,255)});class G extends N{}class $ extends G{constructor(t){super({...t,fillType:"solid"})}toString(){return`solidFill:${this.color.toString()}`}setColor(t){return p(t)?this.set("color",t):this.set("color",t(this.get("color")))}getColor(){return this.get("color")}setA(t){return this.setColor(this.getColor().setA(t))}setR(t){return this.setColor(this.getColor().setR(t))}setG(t){return this.setColor(this.getColor().setG(t))}setB(t){return this.setColor(this.getColor().setB(t))}}const U=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"solid"===t.fillType);class Y extends G{constructor(t){super({...t,fillType:"individual"})}toString(){return`individualPointFill:${this.color.toString()}`}setFallbackColor(t){return p(t)?this.set("color",t):this.set("color",t(this.get("color")))}getFallbackColor(){return this.get("color")}}const H=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"individual"===t.fillType),X=i({type:"fillstyle",fillType:"palette",lut:new D({steps:[]}),lookUpProperty:"value"});class W extends X{constructor(t){super({...t,fillType:"palette"})}toString(){return`palettedFill:lut=${this.lut.toString()},lookUpProperty=${this.lookUpProperty}`}getPalette(){return this.get("lut")}setLookUpProperty(t){return"function"==typeof t?this.set("lookUpProperty",t(this.get("lookUpProperty"))):this.set("lookUpProperty",t)}getLookUpProperty(){return this.get("lookUpProperty")}}const j=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"palette"===t.fillType);var Z,Q;!function(t){t.circle="circle",t.ellipse="ellipse"}(Z||(Z={})),function(t){t.closestSide="closest-side",t.closestCorner="closest-corner",t.farthestSide="farthest-side",t.farthestCorner="farthest-corner"}(Q||(Q={}));const J=i({type:"fillstyle",fillType:"radial-gradient",stops:[{color:S("#f00"),offset:0},{color:S("#0f0"),offset:1}],position:r(.5,.5),shape:Z.ellipse,extent:Q.farthestCorner});class K extends J{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("RadialGradientFill requires minimum two color stops to be defined.")}toString(){return`radialGradientFill:${this.shape},${this.extent},${this.position.x},${this.position.y},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");return this.set("stops",t)}getColorStops(){return this.get("stops")}setPosition(t){return this.set("position",t)}getPosition(){return this.get("position")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}setExtent(t){return this.set("extent",t)}getExtent(){return this.get("extent")}}const q=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"radial-gradient"===t.fillType),tt=i({type:"fillstyle",fillType:"linear-gradient",stops:[{color:S("#f00"),offset:0},{color:S("#0f0"),offset:1}],angle:0});class it extends tt{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("LinearGradientFill requires minimum two color stops to be defined.")}toString(){return`linearGradientFill:${this.angle},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");const i=t.sort(((t,i)=>t.offset-i.offset));return this.set("stops",i)}getColorStops(){return this.get("stops")}setAngle(t,i){return this.set("angle",i?function(t){return 180*t/Math.PI}(t):t)}getAngle(t){return t?se(this.get("angle")):this.get("angle")}}const st=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"linear-gradient"===t.fillType);class et{constructor(t,i,s,e){this.D=new zt,this.cellIndex=t,this.cellSpan=i,this.cellsAmount=s,this.observedAmount=e,this.x=new ht,this.y=new ht,this.z=new ht;const h={...t},r={...i};if(e){const t=t=>{const i=t.value;this.cellsAmount.x=i.reduce(Is,0),this.cellIndex.x=i.reduce(((t,i,s)=>s>=h.x?t:t+i),0),this.cellSpan.x=i.reduce(((t,i,s)=>s>=h.x&&s<h.x+r.x?t+i:t),0),this.D.R("cellresize",{})};e.x.V("change",t),t({value:e.x.C()});const i=t=>{const i=t.value;this.cellsAmount.y=i.reduce(Is,0),this.cellIndex.y=i.reduce(((t,i,s)=>s>=h.y?t:t+i),0),this.cellSpan.y=i.reduce(((t,i,s)=>s>=h.y&&s<h.y+r.y?t+i:t),0),this.D.R("cellresize",{})};e.y.V("change",i),i({value:e.y.C()}),this.O=()=>{e.x.N("change",t),e.y.N("change",i)}}}G(){return this.O&&(this.O(),this.O=void 0),this}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class ht extends e{constructor(){super(...arguments),this.$=0,this.U=10,this.Y=1}H(){return this.o=!1,this}X(){return this.o=!0,this}getInnerStart(){return this.$}getInnerEnd(){return this.U}getInnerInterval(){return Math.abs(this.getInnerEnd()-this.getInnerStart())}W(t,i){return this.$=t,this.U=i,this.j(),this}Z(t){return this.Y=t,this.j(),this}J(t){return t/this.Y}j(){const t=this.J(this.U-this.$),i=this.Y;void 0!==this.K&&!1!==di(t,this.K)||(this.o=!0,this.q=i,this.K=t)}tt(){return this.K}it(){return this.q}st(){return this.U<this.$}et(t,i){return!0}}const rt={d1:t=>new t.scale1DConstructor(0,1,1,void 0),d2:t=>(new t.scaleXYConstructor).ht({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0),d3:()=>new et({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0)},nt=(t,i,s)=>i===s?t:s.rt(i.nt(t)),ot=(t,i,s)=>{if(i===s)return t;const e=i instanceof Se?i.x:i.x instanceof Se?i.x.x:i.x.ot,h=i instanceof Se?i.y:i.y instanceof Se?i.y.y:i.y.ot,r=s instanceof Se?s.x:s.x instanceof Se?s.x.x:s.x.ot,n=s instanceof Se?s.y:s.y instanceof Se?s.y.y:s.y.ot;return{...t,x:nt(t.x,e,r),y:nt(t.y,h,n)}},at=(t,i,s)=>{const e=t(i,s);return t=>new $({color:e(t)})},lt=(t,i,s)=>{const e=t(i+1,s);return t=>new K({stops:[{offset:0,color:e(t)},{offset:1,color:e(t).getDarker()}]})},ct=(t,i,s,e)=>{const h=t(i+1,e);return t=>new it({stops:[{offset:0,color:h(t).getDarker()},{offset:.5,color:h(t)},{offset:1,color:h(t).getDarker()}],angle:s||90})},ut=(...t)=>{if(0===t.length)return{remove:ui};let i=!1;const s=t.map((s=>{const e=e=>{((s,e,h)=>{i||(i=!0,t.filter((t=>t!==s)).forEach((t=>t.ct(e,h,!1,s.getStopped(),"synchronizedAxis"))),i=!1)})(s,e.start,e.end)};return s.addEventListener("intervalchange",e),e}));let e=!1;const h=t.map((i=>{const s=s=>{((i,s)=>{e||(e=!0,t.filter((t=>t!==i)).forEach((t=>t.setStopped(s))),e=!1)})(i,s.isStopped)};return i.addEventListener("stoppedchange",s),s}));return{remove:()=>{t.forEach(((t,i)=>{t.removeEventListener("intervalchange",s[i]),t.removeEventListener("stoppedchange",h[i])}))}}},dt=(t,i,s,e)=>{if(!s||0===s.length)throw new Error("Invalid use regularColorSteps 'colorPalette' is undefined or empty");const h=null==e?void 0:e.formatLabels,r=null==e?void 0:e.alpha;return s.map(((e,n)=>{const o=t+n/(s.length-1)*(i-t);return{color:void 0!==r?e.setA(r):e,value:o,label:h?h(o):void 0}}))},ft=t=>t&&"object"==typeof t&&"column"in t&&"row"in t,At=t=>t&&"object"==typeof t&&"z"in t&&"column"in t&&"row"in t,gt=t=>t&&"object"==typeof t&&"position"in t&&"open"in t&&"high"in t&&"isPacked"in t,vt=t=>t&&"object"==typeof t&&"annulus"in t&&"sector"in t,yt=t=>t&&"object"==typeof t&&"index"in t,pt=t=>t&&"object"==typeof t&&"xSize"in t&&"ySize"in t&&"zSize"in t,mt=t=>t&&"object"==typeof t&&"figure"in t&&"x1"in t&&"y2"in t&&"height"in t,St=t=>t&&"object"==typeof t&&"figure"in t&&"start"in t&&"end"in t&&"median"in t&&"upperQuartile"in t,bt=t=>t&&"object"==typeof t&&"figure"in t&&"x"in t&&"radiusX"in t&&"radiusY"in t,xt=t=>t&&"object"==typeof t&&"figure"in t&&"x"in t&&"coordinates"in t,Mt=t=>t&&"object"==typeof t&&"figure"in t&&"startX"in t&&"endX"in t,wt=t=>t&&"object"==typeof t&&"x"in t&&"y"in t,_t=t=>!0===t.isLcjsArtificialEvent;var Ct;!function(t){t[t.Nearest=0]="Nearest",t[t.NearestX=1]="NearestX",t[t.NearestY=2]="NearestY"}(Ct||(Ct={}));const kt=(t,i,s,e,h,r,n,o,a,l)=>{const c=t.length;if(0===c)return;const u=e?1:0,d=c-(h?2:1);if(s===Ct.Nearest)return Tt(t,i,r,n,u,d);if(s===Ct.NearestX||s===Ct.NearestY){if("boolean"==typeof l&&("x"===a&&s===Ct.NearestX||"y"===a&&s===Ct.NearestY))return Pt(t,ot(i,n,r),a,l,u,d);if(s===Ct.NearestX)return Ft(t,ot(i,n,r),o,u,d);if(s===Ct.NearestY)return It(t,ot(i,n,r),o,u,d)}},Tt=(t,i,s,e,h,r)=>{let n,o=Number.MAX_VALUE;for(let a=h;a<=r;a+=1){const h=t[a];if(!Number.isNaN(h.x)&&!Number.isNaN(h.y)){const t=ot(h,s,e),r=(t.x-i.x)**2+(t.y-i.y)**2;r<o&&(o=r,n=a)}}return n},Ft=(t,i,s,e,h)=>{if(i.x<s.min.x||i.x>s.max.x)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.x>i.x?e.x-i.x:i.x-e.x;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},It=(t,i,s,e,h)=>{if(i.y<s.min.y||i.y>s.max.y)return;let r,n=Number.MAX_VALUE;for(let s=e;s<=h;s+=1){const e=t[s],h=e.y>i.y?e.y-i.y:i.y-e.y;h<n&&!Number.isNaN(e.x)&&!Number.isNaN(e.y)&&(n=h,r=s)}return r},Pt=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],c=a.x<l.x?a.x:l.x,u=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<c||o>d)||!n&&(o<u||o>f))return;let A=h,g=Math.floor((h+r)/2),v=r,y=-1;for(;;){const i=o-(n?t[g].x:t[g].y);if(i*(e?-1:1)>0)A=Math.min(g+1,v),y=Math.floor((A+v)/2);else{if(0===Math.abs(i))return g;v=Math.max(g-1,A),y=Math.floor((A+v)/2)}if(y===g){const s=g>h?Math.abs(o-(n?t[g-1].x:t[g-1].y)):bs,e=g<r?Math.abs(o-(n?t[g+1].x:t[g+1].y)):bs,a=Math.abs(i);switch(Math.min(a,s,e)){case s:return g-1;case e:return g+1;default:return g}}else g=y}},Lt=(t,i,s,e,h,r)=>{const n="x"===s,o=n?i.x:i.y,a=t[h],l=t[r],c=a.x<l.x?a.x:l.x,u=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(n&&(o<c||o>d)||!n&&(o<u||o>f))return;let A=h,g=Math.floor((h+r)/2),v=r,y=-1;for(;;){const s=o-(n?t[g].x:t[g].y);if(s*(e?-1:1)>0)A=Math.min(g+1,v),y=Math.floor((A+v)/2);else{if(0===Math.abs(s))return{a:g,b:g,lerpAmount:0};v=Math.max(g-1,A),y=Math.floor((A+v)/2)}if(y===g){if(s*(e?-1:1)<0&&g>h){const s=t[g-1],e=t[g];return{a:g-1,b:g,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}if(g<r){const s=t[g],e=t[g+1];return{a:g,b:g+1,lerpAmount:n?(i.x-s.x)/(e.x-s.x):(i.y-s.y)/(e.y-s.y)}}return{a:g,b:g,lerpAmount:0}}g=y}};let Bt=0;class Dt{constructor(t,i,s){this.ut=d(!0),this.dt=!1,this.ft=!0,this.At=!1,this.vt=void 0,this.yt=0,this.D=new zt,this.St=t,this.bt=i,this.xt=s,this.Mt=Bt,Bt+=1,this.wt=t._t.highlightColorOffset}Ct(){let t;return this.kt("DataPattern",(i=>(t=i.pattern,!0))),"ProgressiveX"===t||"RegressiveX"===t?Ct.NearestX:"ProgressiveY"===t||"RegressiveY"===t?Ct.NearestY:Ct.Nearest}Tt(){}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}R(t,i,s,e){this.D.R(t,i,{collectionMember:s,info:e})}removeEventListener(t,i){this.D.removeEventListener(t,i)}Ft(t){return void 0!==this.xt.find((i=>i.type===t))}kt(t,i){var s;return!!this.Ft(t)&&!0===i(null===(s=this.xt.find((i=>i.type===t)))||void 0===s?void 0:s.args)}dispose(){return this.dt||(this.St.It(this),this.dt=!0,this.bt(this),this.D.R("dispose",{})),this}isDisposed(){return this.dt}setVisible(t){const i=this.ft;return this.ft=t,!t&&i&&this.ut.C()&&this.St.It(this),this}getVisible(){return this.ft}setPointerEvents(t){const i=this.ut.C();return this.ut._(t),t||i&&this.St.It(this),this}getPointerEvents(){return this.ut.C()}Pt(t){return this.vt=t,this}Lt(){return this.vt?this.vt:Et}Bt(t){return this.yt=t,this}Dt(){return this.yt}Et(t){return this.wt=t,this}Rt(){return this.wt}}const Et=c(r(0,0),r(0,0)),Rt={click:!0,contextmenu:!0,dblclick:!0,gotpointercapture:!0,lostpointercapture:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,wheel:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0};class zt{constructor(){this.zt=new Array,this.Vt=[],this.ut=!0,this.Ot=!1}setPointerEvents(t){this.ut=t,this.Vt.forEach((i=>i.setPointerEvents(t)))}getPointerEvents(){return this.ut}addEventListener(t,i,s){this.zt.push({listener:i,key:t,options:s||{}})}removeEventListener(t,i){const s=this.zt.findIndex((t=>t.listener===i));s>=0&&this.zt.splice(s,1)}set draggable(t){this.Ot=t,this.Vt.forEach((i=>{i.At=t}))}get draggable(){return this.Ot}R(t,i,s=void 0){this.zt.slice().reverse().forEach((e=>{e.key===t&&(e.listener(i,s),!0===e.options.once&&this.removeEventListener(t,e.listener))}))}Nt(t,i){Object.keys(Rt).forEach((s=>{t.addEventListener(s,((t,e)=>{const h=Vt(t)?{clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY}:t,r=(null==i?void 0:i.getExtraData)&&void 0!==h.clientX?i.getExtraData(h,e.collectionMember,e.info):{};this.R(s,t,r),!t.defaultPrevented&&(null==i?void 0:i.continueIfNotPrevented)&&i.continueIfNotPrevented(s,t,r)}))})),this.Vt.push(t),t.addEventListener("dispose",(()=>{const i=this.Vt.indexOf(t);i>=0&&this.Vt.splice(i,1)})),t.At=this.Ot,t.setPointerEvents(this.ut)}Gt(t,i){Object.keys(Rt).forEach((s=>{t.addEventListener(s,((t,e)=>{const h=i(e.collectionMember);h&&this.R(s,t,h)}))})),this.Vt.push(t),t.addEventListener("dispose",(()=>{const i=this.Vt.indexOf(t);i>=0&&this.Vt.splice(i,1)})),t.setPointerEvents(this.ut),t.At=this.Ot}$t(t){Object.keys(Rt).forEach((i=>{t.addEventListener(i,((t,s)=>{this.R(i,t,s)}))})),t.setPointerEvents(this.ut),t.draggable=this.Ot}}const Vt=t=>!(!t||"object"!=typeof t||!("touches"in t)),Ot={linear:(t,i,s)=>{const e=i-t;return h=>h<s?t+e/s*h:i},easeIn:(t,i,s)=>e=>e<s?t+Math.abs(2*(Math.sqrt(.5)*e/s)**2)*(i-t):i,easeOut:(t,i,s)=>e=>e<s?t+Math.abs(1-2*(Math.sqrt(.5)*(1-e/s))**2)*(i-t):i,ease:(t,i,s)=>e=>e<s?t+(e<s/2?.5*(e/s*2)**2.5:.5+.5*(1-(1-2*(e/s-.5))**2.5))*(i-t):i,logarithmic:t=>{const i=Oi(t);return(s,e,h)=>{const r=i(s),n=i(e);return i=>i<h?t**(r+Math.abs(1-2*(Math.sqrt(.5)*(1-i/h))**2)*(n-r)):e}}};class Nt{constructor(t,i,s,e=Ot.linear,h){this.delta=0,this.nextAnimations=new Array,this.Ut=!1,this.easing=Ot.linear,this.isOver=()=>(this.delta===this.duration||this.Ut)&&0===this.nextAnimations.length,this.D=new zt,this.values=t,this.action=i,this.duration=s,this.easing=e,this.Yt=h,this.eases=t.map((([t,i])=>e(t,i,s)))}Ht(){this.D.R("start",{})}start(){return this.Yt.includes(this)||this.Yt.push(this),this}addNextAnimations(t){return t instanceof Array?t.forEach((t=>this.nextAnimations.push(t))):this.nextAnimations.push(t),this}NextAnimation(t,i,s=this.duration,e=this.easing){const h=new Nt(t,i,s,e,this.Yt);return this.nextAnimations.push(h),h}finish(t=!0){if(this.Ut=!0,this.Yt.splice(this.Yt.indexOf(this),1),this.nextAnimations.length>0){const i=this.nextAnimations[0];return t&&this.D.zt.forEach((t=>{"allAnimationEnd"===t.key&&i.addEventListener("allAnimationEnd",t.listener),"everyAnimationEnd"===t.key&&i.addEventListener("everyAnimationEnd",t.listener)})),i.addNextAnimations(this.nextAnimations.slice(1)),i.start(),t&&(this.D.R("end",{nextAnimation:i}),this.D.R("everyAnimationEnd",{nextAnimation:i})),i}t&&(this.D.R("end",{nextAnimation:void 0}),this.D.R("everyAnimationEnd",{nextAnimation:void 0}),this.D.R("allAnimationEnd",{}))}finishAll(t=!0){let i=this;for(;i;)i=i.finish(t)}getFinalValues(){return this.nextAnimations.length>0?this.nextAnimations[this.nextAnimations.length-1].values.map(li):this.values.map(li)}getTimeUntilFinish(){let t=this.duration-this.delta;for(let i=0;i<this.nextAnimations.length;i+=1)t+=this.nextAnimations[i].duration-this.nextAnimations[i].delta;return t}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Gt=(t,i=60)=>{i>60&&console.log("Note: Animator FPS is usually capped at 60 by the browser!");const s=[];let e,h,r=0;const n=()=>{e=void 0;const o=Date.now();h=h||o,r=o-h,r/1e3>=1/i&&(h=Date.now()-r%(1e3/i),s.forEach((t=>{0===t.delta&&t.Ht(),t.delta+=r-r%(1e3/i),t.delta>t.duration&&(t.delta=t.duration),t.action(t.eases.map((i=>i(t.delta)))),t.delta===t.duration&&t.finish()})),t()),s.length>0?e=ni.requestAnimationFrame(n):(e=void 0,h=void 0)};return(t=1e3,i=Ot.linear)=>(h,r,o=t)=>{const a=new Nt(h,r,o,i,s).start();return e||(e=ni.requestAnimationFrame(n)),a}};var $t;!function(t){t[t.Fill=0]="Fill",t[t.Fit=1]="Fit",t[t.Stretch=2]="Stretch",t[t.Center=3]="Center",t[t.Tile=4]="Tile"}($t||($t={}));const Ut=i({type:"fillstyle",fillType:"image",source:void 0,surroundingColor:m(0,0,0,0),sourceMissingColor:m(0,0,0,0),fitMode:$t.Fill});class Yt extends Ut{constructor(t){super(t)}setSource(t){return this.set("source",t)}getSource(){return this.get("source")}setSurroundingColor(t){return p(t)?this.set("surroundingColor",t):this.set("surroundingColor",t(this.get("surroundingColor")))}getSurroundingColor(){return this.get("surroundingColor")}setSourceMissingColor(t){return p(t)?this.set("sourceMissingColor",t):this.set("sourceMissingColor",t(this.get("sourceMissingColor")))}getSourceMissingColor(){return this.get("sourceMissingColor")}setFitMode(t){return this.set("fitMode",t)}getFitMode(){return this.get("fitMode")}toString(){return`imagefill:${this.fitMode}`}}const Ht=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"image"===t.fillType),Xt=i({type:"linestyle",lineType:"empty"}),Wt=new class extends Xt{constructor(){super(...arguments),this.thickness=0}setThickness(t){return this}getThickness(){return 0}Xt(){return 0}setFillStyle(t){return this}getFillStyle(){return V}},jt=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"empty"!==t.lineType),Zt=-34028234663852886e22,Qt="-340282346638528859811704183484516925440.0";class Jt extends Error{constructor(t,i){super(`ChartError: ${t} ${i?`in ${i.constructor.name}`:""}`),Object.setPrototypeOf(this,Jt.prototype)}}class Kt extends Error{constructor(t,i,s=!1){const e=`EngineError: ${t} ${i?`in ${i.constructor.name}`:""}`;super(e),s&&ni.alert(e),Object.setPrototypeOf(this,Kt.prototype)}}class qt extends Kt{constructor(t){super(t),Object.setPrototypeOf(this,qt.prototype)}}var ti,ii,si,ei;!function(t){t[t.Content=0]="Content",t[t.PaddedContent=1]="PaddedContent",t[t.PaddedBackground=2]="PaddedBackground",t[t.Everything=3]="Everything"}(ti||(ti={})),function(t){t[t.never=0]="never",t[t.always=1]="always",t[t.whenHovered=2]="whenHovered",t[t.whenDragged=3]="whenDragged",t[t.whenNotDragged=4]="whenNotDragged",t[t.whenHoveredOrDragged=5]="whenHoveredOrDragged"}(ii||(ii={})),function(t){t[t.notDraggable=0]="notDraggable",t[t.draggable=1]="draggable",t[t.onlyHorizontal=2]="onlyHorizontal",t[t.onlyVertical=3]="onlyVertical"}(si||(si={})),function(t){t[t.Up=0]="Up",t[t.Right=1]="Right",t[t.Down=2]="Down",t[t.Left=3]="Left"}(ei||(ei={}));const hi=(...t)=>{const i=t=>t&&"object"==typeof t&&!Array.isArray(t);return t.reduce(((t,s)=>s?(Object.keys(s).forEach((e=>{const h=t[e],r=s[e];i(h)&&i(r)?t[e]=hi(h,r):t[e]=r})),t):t),{})},ri=t=>{if(t.resourcesBaseUrl){const i=t.styleFactory(t.resourcesBaseUrl),s=Ht(i)&&i.getSource(),e=s&&s instanceof Image?s:void 0;return null==e||e.addEventListener("error",(()=>{as(t.resourcesBaseUrl,e.src,"Theme resource",{shouldCrash:!1})})),i}const i=`${ni.location.origin}/resources`,s=t.styleFactory(i);if(Ht(s)){const i=s.getSource();i instanceof Image&&i.addEventListener("error",(()=>{const s=t.styleFactory("https://lcjs-resources.lightningchart.com/v1"),e=Ht(s)&&s.getSource(),h=e&&e instanceof Image?e:void 0;ni.console.warn("LightningChart JS warning | fallbacking to publicly hosted asset resources.\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/warning-using-publicly-hosted-resources/"),null==h||h.addEventListener("load",(()=>{t.apply(s)})),null==h||h.addEventListener("error",(()=>{as(t.resourcesBaseUrl,i.src,"Theme resource",{shouldCrash:!1})}))}))}return s},ni="undefined"!=typeof window?window:"undefined"!=typeof global&&global._lcjs?global._lcjs:{},oi=(t,i)=>t.x===i.x&&t.y===i.y,ai=t=>t!==bs&&t!==xs&&!Number.isNaN(t)&&Number.isFinite(t)&&t!==1/0&&t!==-1/0,li=t=>t[1],ci=t=>t.dispose(),ui=()=>{},di=(t,i)=>t===i,fi=(t,i,s)=>s>i?Math.min(Math.max(t,i),s):Math.min(Math.max(t,s),i),Ai=t=>Array.prototype.concat.apply([],t),gi=(t,i)=>void 0===t||Number.isNaN(t)?i:t,vi=t=>t.Wt(),yi=t=>t.jt(),pi=t=>t.Zt(),mi=t=>t.Qt(),Si=t=>t.min.x,bi=t=>t.max.x,xi=t=>t.min.y,Mi=t=>t.max.y,wi=(t,i,s,e,h)=>{if(t.length>0){let r=h?e(h):void 0;for(let e=0;e<t.length;e+=1){const h=i(t[e]);void 0!==h&&(r=void 0!==r?s(r,h):h)}return r}if(h)return e(h)},_i=(t,i)=>t.position===i.position&&t.high===i.high&&t.low===i.low,Ci=r(0,1),ki=r(1,0),Ti=r(0,-1),Fi=r(-1,0),Ii=r(0,0),Pi=t=>{switch(t){case ei.Up:return Ci;case ei.Right:return ki;case ei.Down:return Ti;case ei.Left:return Fi;default:return Ii}},Li=t=>t===ei.Left||t===ei.Right,Bi=t=>{t.stopPropagation(),t.preventDefault()},Di=(t,i)=>{if(!i)return t;const s=t.length,e=new Float32Array(2*s);let h=0;for(let i=0;i<s;i+=1){const s=t[i],r=Math.fround(s);e[h+0]=r,e[h+1]=s-r,h+=2}return e},Ei=(t,i,s=Float32Array)=>{if(!i){const i=t.length,e=new s(2*i);let h=0;for(let s=0;s<i;s+=1){const i=t[s];e[h+0]=i.x,e[h+1]=i.y,h+=2}return e}const e=t.length,h=new s(4*e);let r=0;for(let i=0;i<e;i+=1){const s=t[i],e=Math.fround(s.x),n=Math.fround(s.y);h[r+0]=e,h[r+1]=n,h[r+2]=s.x-e,h[r+3]=s.y-n,r+=4}return h},Ri=t=>{const i=t.length,s=new Float32Array(3*i);let e=0;for(let h=0;h<i;h+=1){const i=t[h];s[e+0]=i.x,s[e+1]=i.y,s[e+2]=i.z,e+=3}return s},zi=t=>i=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)},Vi=t=>{let i=t.length;for(let s=0;s<i-1;s+=1)t[s].x===t[s+1].x&&t[s].y===t[s+1].y&&(t.splice(s,1),s-=1,i-=1);return t},Oi=t=>{const i=Math.log(t);return t=>Math.log(t)/i},Ni=Oi(Math.E),Gi=(t,i)=>{const s=i[t];return s?s():void 0},$i=(t,i)=>{let s;if(i)s=i;else{const i={x:0,y:0};for(let s=0;s<t.length;s+=1)i.x+=t[s].x/t.length,i.y+=t[s].y/t.length;s=i}return t.sort(((t,i)=>ee(Zs(t,s))-ee(Zs(i,s))))},Ui=(t,i,s)=>{if(0===t.length)return!1===s.canReturnB?i.slice():i;const e=i.length;if(e<1e5)return t.push.apply(t,i),t;for(let s=0;s<e;s+=1)t.push(i[s]);return t},Yi=(t,i,s)=>s<0?t:s>1?i:m(t.getR()+s*(i.getR()-t.getR()),t.getG()+s*(i.getG()-t.getG()),t.getB()+s*(i.getB()-t.getB()),t.getA()+s*(i.getA()-t.getA())),Hi=t=>255===t.getA()?t:t.setA(255),Xi=(()=>{const t=m(0,0,0);return i=>(i=Hi(i),new it({angle:180,stops:[{offset:0,color:i},{offset:1,color:Yi(i,t,.5)}]}))})(),Wi=(()=>{const t=t=>{var i;if(t){if(U(t)){if(0===t.getColor().getA())return;return t.getColor()}if(q(t)||st(t)){const s=t.getColorStops();return 3===s.length?s[1].color:null===(i=s[0])||void 0===i?void 0:i.color}j(t)}};return(i,s,e,h)=>{var r;const n=[];if(h.fill&&n.push(h.fill),h.fill2&&n.push(h.fill2),h.stroke){const t=h.stroke.getFillStyle();t!==V&&("stroke"===(null===(r=h.behavior)||void 0===r?void 0:r.priority)?n.unshift(t):n.push(t))}if(h.point3D){const t=h.point3D;n.push(t.getFillStyle())}let o;if(h.behavior&&!0===h.behavior.colorStep){const[i,e]=n.reduce(((i,s)=>{if(i[0]&&i[1])return i;const e=t(s);return e&&(void 0===i[0]?i[0]=e:i[1]=e),i}),[void 0,void 0]);o=i&&e?(a=i)===(l=e)||a.getR()===l.getR()&&a.getG()===l.getG()&&a.getB()===l.getB()?Xi(a):(a=Hi(a),l=Hi(l),new it({angle:0,stops:[{offset:0,color:l},{offset:.5,color:l},{offset:.5,color:a},{offset:1,color:a}]})):s.uiButtonFillStyle}else{const i=n.reduce(((i,s)=>i||t(s)),void 0);o=i?e?new $({color:i}):Xi(i):s.uiButtonFillStyle}var a,l;i.setButtonOnFillStyle(o)}})(),ji=(t,i)=>{const s=t;if(j(s))return{lut:s.getPalette(),lookUpProperty:s.getLookUpProperty(),valueRange:i}},Zi=t=>{let i=0;return()=>(i+=1,`${t}-${i}`)},Qi=(t,i)=>{let s="string"==typeof t?t:String(t);const e=s.indexOf(".");let h=e>=0?e:s.length;for(;h<i;h+=1)s=`0${s}`;return s},Ji=(t,i)=>"function"==typeof t?t(i):t,Ki=(t,i)=>i(),qi=()=>new Error("LightningChart JS encountered an unexpected error.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact");new $({color:m(255,255,255,1)});const ts=t=>t===Ms||t.min.x===Ms.min.x&&t.max.x===Ms.max.x&&t.min.y===Ms.min.y&&t.max.y===Ms.max.y,is=t=>Array.from(new Set(t)),ss=t=>t.filter((t=>void 0!==t)),es=t=>"boolean"==typeof t?t?1:0:t>1?1:t<0?0:t,hs=(t,i,s)=>{i.length<=0||(t.setText(s.label).setOn(i[0].getVisible()),s.style&&t.setButtonOnFillStyle(s.style),s.toggleVisibilityOnClick&&t.addEventListener("switch",(t=>{i.forEach((i=>i.setVisible(t.state)))})),t.addEventListener("pointerenter",(()=>{i.forEach((t=>t.setHighlight(!0)))})),t.addEventListener("pointerleave",(()=>{i.forEach((t=>t.setHighlight(!1)))})),i.forEach((i=>i.addEventListener("pointerenter",(()=>t.setHighlight(!0))))),i.forEach((i=>i.addEventListener("pointerleave",(()=>t.setHighlight(!1))))))},rs=(t,i)=>{throw new Error(i)},ns=t=>{let i;return()=>i||(i=t(),i)},os=t=>{if(t===Wt)return 0;const i=t.getThickness();return i<0?1:1*i},as=(t,i,s,e)=>{const h=`LightningChart JS Resources not found.\nresourcesBaseUrl: "${t}"\ninitiator: ${s}\nresource url: ${i}\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/error-resources-not-found/`;if(e.shouldCrash)throw ni.alert(h),new Error(h);ni.console.warn(h)},ls=(t,i,s,e=0)=>{if(t<s(e)||s(i)<t)return;const h=i;for(;e!==i;){const h=Math.ceil((e+i)/2);t<s(h)?i=h-1:e=h}const r=Math.abs(t-s(e));return e<h&&Math.abs(t-s(e+1))<r?e+1:e},cs=()=>{const t=new Map;return{Jt:i=>(Object.keys(Rt).forEach((s=>{i.addEventListener(s,((i,e)=>{const h=e.collectionMember&&t.get(e.collectionMember);if(!h)return;const r=Vt(i)?{clientX:i.changedTouches[0].clientX,clientY:i.changedTouches[0].clientY}:i,n=h.Kt(e.info,r);h.D.R(s,i,n)}))})),i),qt:(i,s)=>{t.set(i,s)},ti:()=>{t.clear()}}},us={left:0,right:0,top:0,bottom:0},ds=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER),fs=(t,i,s)=>{i&&i.ii();const e=s();return Object.keys(e).forEach((i=>{const s=i,h=e[s];t.addEventListener(s,h)})),{si:t,ii:()=>{Object.entries(e).forEach((([i,s])=>{const e=i,h=s;t.removeEventListener(e,h)}))}}},As=(t,i,s)=>{let e;const h=()=>(e=s(),e),r={...t,resolve:()=>e||h()};for(const t of Object.keys(i))Object.defineProperty(r,t,{get:function(){return e?e[t]:h()[t]}});return r},gs=t=>{if(t)return"resolve"in t?t.resolve():t},vs=t=>{let i=t;return{ei:t=>{const s=i;return i=s+t,[s,t]}}},ys=t=>{ni.document.body.addEventListener(t,(t=>{t.stopPropagation(),t.preventDefault()}),{once:!0,capture:!0})},ps=()=>{const t=ni.performance.now();ni.document.body.addEventListener("contextmenu",(i=>{ni.performance.now()-t>5e3||i.preventDefault()}),{once:!0})},ms=()=>{const t=ni.performance.now();ni.document.body.addEventListener("touchstart",(i=>{ni.performance.now()-t>5e3||i.preventDefault()}),{once:!0})},Ss={add:(t,i)=>a(t.x+i,t.y+i,t.z+i),addVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x+=t.x,s.y+=t.y,s.z+=t.z;return s},subtract:(t,i)=>a(t.x-i,t.y-i,t.z-i),subtractVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x-=t.x,s.y-=t.y,s.z-=t.z;return s},multiply:(t,i)=>a(t.x*i,t.y*i,t.z*i),divide:(t,i)=>a(t.x/i,t.y/i,t.z/i),multiplyVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x*=t.x,s.y*=t.y,s.z*=t.z;return s},divideVec(t,...i){const s={x:t.x,y:t.y,z:t.z};for(const t of i)s.x/=t.x,s.y/=t.y,s.z/=t.z;return s},length:t=>Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),normalize:t=>Ss.divide(t,Ss.length(t)),dot:(t,i)=>t.x*i.x+t.y*i.y+t.z*i.z,cross:(t,i)=>a(t.y*i.z-t.z*i.y,t.z*i.x-t.x*i.z,t.x*i.y-t.y*i.x),angle:(t,i)=>Math.acos(Ss.dot(t,i)/(Ss.length(t)*Ss.length(i))),rotateAroundAxis(t,i,s){const e=Math.cos(s),h=Math.sin(s),r=Ss.dot(i,t),n=Ss.cross(i,t);return Ss.addVec(Ss.multiply(t,e),Ss.addVec(Ss.multiply(i,(1-e)*r),Ss.multiply(n,h)))},lerp:(t,i,s)=>(s=fi(s,0,1),Ss.addVec(Ss.multiply(t,1-s),Ss.multiply(i,s))),equals:(t,i)=>di(t.x,i.x)&&di(t.y,i.y)&&di(t.z,i.z),abs:t=>({x:Math.abs(t.x),y:Math.abs(t.y),z:Math.abs(t.z)}),sign:t=>({x:Math.sign(t.x),y:Math.sign(t.y),z:Math.sign(t.z)})},bs=Number.MAX_SAFE_INTEGER,xs=-Number.MAX_SAFE_INTEGER,Ms=c(r(bs,bs),r(xs,xs)),ws=c(a(bs,bs,bs),a(xs,xs,xs)),_s=(t,i)=>{const s=Math.log(t)/Math.log(i);return Math.floor((t=>(Math.ceil(t)-t<1e-4?t=Math.ceil(t):t-Math.floor(t)<1e-4&&(t=Math.floor(t)),t))(s))},Cs=(t,i)=>!(i.min.x>t.max.x||i.max.x<t.min.x||i.min.y>t.max.y||i.max.y<t.min.y),ks=(t,i)=>!(t[1].x<i[0].x||t[0].x>i[1].x||t[3].y<i[0].y||t[0].y>i[3].y),Ts=(t,i)=>({min:{x:Math.min(t[0].x,i[0].x),y:Math.min(t[0].y,i[0].y)},max:{x:Math.max(t[2].x,i[2].x),y:Math.max(t[2].y,i[2].y)}}),Fs=t=>{const i=t.length;for(let s=0;s<i;s+=1)for(let e=s+1;e<i;e+=1)if(Cs(t[s],t[e]))return!0;return!1},Is=(t,i)=>i+t,Ps=(t,i,s)=>{const e=Zs(i,t),h=e.x*e.x+e.y*e.y;if(0===h)return t;const n=Zs(s,t),o=(n.x*e.x+n.y*e.y)/h;return o<=0?t:o>=1?i:r(t.x+o*e.x,t.y+o*e.y)},Ls=(t,i,s)=>s>i?t>=i&&t<=s:t>=s&&t<=i,Bs=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)},Ds=(t,i)=>{const s=t.x-i.x,e=t.y-i.y;return s*s+e*e},Es=(t,i,s)=>js(t,Ws(Zs(i,t),s)),Rs=(t,i,s)=>Ss.addVec(t,Ss.multiply(Ss.subtractVec(i,t),s));function zs(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,h=t[0].y,n=t[0].y;for(let r=0;r<i;r+=1){const i=t[r];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>h&&(h=i.y),i.y<n&&(n=i.y)}return c(r(e,n),r(s,h))}return Ms}function Vs(t){const i=t.length;if(i>0){let s=t[0].x,e=t[0].x,h=t[0].y,r=t[0].y,n=t[0].z,o=t[0].z;for(let a=0;a<i;a+=1){const i=t[a];i.x>s&&(s=i.x),i.x<e&&(e=i.x),i.y>h&&(h=i.y),i.y<r&&(r=i.y),i.z>n&&(n=i.z),i.z<o&&(o=i.z)}return c(a(e,r,o),a(s,h,n))}return ws}const Os=(...t)=>{const i={min:{x:bs,y:bs},max:{x:xs,y:xs}};for(const s of t)i.min.x=i.min.x<s.min.x?i.min.x:s.min.x,i.max.x=i.max.x>s.max.x?i.max.x:s.max.x,i.min.y=i.min.y<s.min.y?i.min.y:s.min.y,i.max.y=i.max.y>s.max.y?i.max.y:s.max.y;return i},Ns=(t,i)=>c(a(t.min.x<i.min.x?t.min.x:i.min.x,t.min.y<i.min.y?t.min.y:i.min.y,t.min.z<i.min.z?t.min.z:i.min.z),a(t.max.x>i.max.x?t.max.x:i.max.x,t.max.y>i.max.y?t.max.y:i.max.y,t.max.z>i.max.z?t.max.z:i.max.z));function Gs(t,i,s,e){const h=t.x-e.x,r=t.y-e.y,n=e.x-s.x,o=s.y-e.y,a=o*h+n*r,l=(e.y-i.y)*h+(i.x-e.x)*r,c=o*(i.x-e.x)+n*(i.y-e.y);return c<0?a<=0&&l<=0&&a+l>=c:a>=0&&l>=0&&a+l<=c}function $s(t,i,s){return r(Math.cos(s)*(t.x-i.x)+Math.sin(s)*(t.y-i.y)+i.x,-Math.sin(s)*(t.x-i.x)+Math.cos(s)*(t.y-i.y)+i.y)}function Us(t,i){return r(t.x-i.x,t.y-i.y)}function Ys(t){const i=Xs(t);return 0===i?r(0,0):r(t.x/i,t.y/i)}function Hs(t,i){let s={x:i.x-t.x,y:i.y-t.y};s=Ys(s);const e=Math.PI/2,h=s.x;return s.x=-Math.sin(e)*s.y,s.y=h*Math.sin(e),s}function Xs(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function Ws(t,i){return r(t.x*i,t.y*i)}function js(t,i){return r(t.x+i.x,t.y+i.y)}function Zs(t,i){return r(t.x-i.x,t.y-i.y)}function Qs(t,i){return r(t.x*i.x,t.y*i.y)}function Js(t,i){return r(t.x/i.x,t.y/i.y)}function Ks(t){return Ws(t,-1)}function qs(t,i){return t.x*i.x+t.y*i.y}const te=(t,i,s)=>{const e=(s.y-i.y)/(s.x-i.x),h=i.y+(t-i.x)*e;return r(t,h)},ie=(t,i,s)=>{const e=(s.y-i.y)/(s.x-i.x),h=i.x+(t-i.y)/e;return r(h,t)};function se(t){return t*Math.PI/180}function ee(t){return 180*Math.atan2(t.y,t.x)/Math.PI}function he(t){return r(Math.cos(t),Math.sin(t))}const re=(t,i,s,e)=>{let h,n,o,a;if(i.x-t.x!=0||e.x-s.x!=0)return i.x-t.x==0?(o=i.x,n=(e.y-s.y)/(e.x-s.x),a=n*(o-s.x)+s.y):e.x-s.x==0?(o=e.x,h=(i.y-t.y)/(i.x-t.x),a=h*(o-t.x)+t.y):(h=(i.y-t.y)/(i.x-t.x),n=(e.y-s.y)/(e.x-s.x),o=(s.y-n*s.x+h*t.x-t.y)/(h-n),a=h*(o-t.x)+t.y),r(o,a)},ne=(t,i)=>{const s=t.length,e=i.length,h=new Uint16Array(s+e);return h.set(t,0),h.set(i,s),h};class oe{constructor(){this.hi=!0}getInnerStart(){return this.$}getInnerEnd(){return this.U}getInnerInterval(){return Math.abs(this.U-this.$)}W(t,i){return this.hi=t!==this.$||i!==this.U,this.$=t,this.U=i,this}H(){return this.hi=!1,this}X(){return this.hi=!0,this}}class ae extends oe{constructor(t,i,s,e){if(super(),this.ri=!0,this.ni=!0,this.oi=[0,0],this.ai=!0,this.li=t,this.ci=i,this.ui=s,this.di=t,this.fi=i,e){const t=t=>{this.Ai(t.value)};e.V("change",t),this.Ai(e.C()),this.gi=()=>e.N("change",t)}}Z(t){return this.Y=t,this.ni=!0,this}yi(t){return this.oi=t.map(Math.abs),this.ai=!0,this}pi(){return this.li/this.ui*this.Y+this.oi[0]}mi(){return(this.li+this.ci)/this.ui*this.Y-this.oi[1]}Si(){return this.getCellSize()-this.bi()}xi(){return this.Y}getCellSize(){return this.Mi(this.Y)}bi(){return this.oi[0]+this.oi[1]}wi(){return this.oi}Ai(t){this.ui=t.reduce(Is,0),this.li=t.reduce(((t,i,s)=>s>=this.di?t:t+i),0),this.ci=t.reduce(((t,i,s)=>s>=this.di&&s<this.di+this.fi?t+i:t),0),this.ri=!0,this._i()}Mi(t){return t*this.ci/this.ui}H(){return super.H(),this.ni=!1,this.ai=!1,this.ri=!1,this}X(){return super.X(),this.ni=!0,this.ai=!0,this.ri=!0,this}}class le extends ae{constructor(t,i,s,e){super(t,i,s,e),this.Ci={internal:10,function:ce(10),number:10},this.Y=1e3,this.W(1,1e3),this.ki=this.Ti()}et(t,i,s,e,h){if(t===i)return!1;const r=Math.min(t,i)<de,n=Math.max(t,i)>fe;return!r&&!n||!!h&&(i>t?{start:r?de:t,end:n?fe:i}:{start:n?fe:t,end:r?de:i})}nt(t){const i=this.pi(),s=this.mi(),e=Math.max(t,de);return i+(this.Ci.function(e)-this.ki.scaleStartLog)/this.ki.scaleIntervalLog*(s-i)}rt(t){const i=this.pi(),s=(t-i)/(this.mi()-i),e=this.ki.scaleStartLog+s*this.ki.scaleIntervalLog;return this.Ci.number**e}_i(){this.Ci&&this.Ti()}W(t,i){return super.W(t,i),this.Ci&&this.Ti(),this}yi(t){return super.yi(t),this.Ci&&this.Ti(),this}Z(t){return super.Z(t),this.Ci&&this.Ti(),this}Fi(t){return this.Ci={internal:t,function:ce(t),number:ue(t)},this}Ii(){return this.Ci.internal}Pi(t,i){const s=this.nt(t)+i;return this.rt(s)}Li(){return this.ni||this.hi||this.ai||this.ri}Ti(){const t=this.Ci.function(this.$),i=this.Ci.function(this.U)-t,s=2*this.pi()/this.Y-1,e=2*this.mi()/this.Y-1-s;return this.ki={scaleStartLog:t,scaleIntervalLog:i,viewportStart:s,viewportSize:e},this.ki}Bi(){return this.ki}}const ce=t=>"e"===t?Ni:Oi(t),ue=t=>"e"===t?Math.E:t,de=.9*10**-20,fe=1.1*10**25,Ae=[{prefix:"T",unit:10**12},{prefix:"B",unit:10**9},{prefix:"M",unit:1e6},{prefix:"K",unit:1e3}],ge=(t,i,s)=>{const e=Math.abs(s-i);if(0===e)return t.toFixed(0);const h=Math.max(2-_s(e,10),0);return t.toFixed(h)},ve={Numeric:(t,i)=>{const{start:s,end:e}=i;return ge(t,s,e)},NumericUnits:(t,i)=>{const{start:s,end:e}=i,h=Math.abs(e-s),r=t<0;t=Math.abs(t);let n="",o="";if(h>=1e3&&t>1e3){let i="";for(const s of Ae){const e=Math.round(1e3*t/s.unit)/1e3;if(e>=1){i=e.toString(),o=s.prefix;break}}n=(r?"-":"")+i}else{let i=String(Math.floor(t));const s=_s(t,1e3);for(let t=1;t<=s;t+=1){const s=i.length-(3*t+(t-1));i=`${i.substring(0,s)} ${i.substring(s,i.length)}`}n=(r?"-":"")+i+(h<=10?((t,i)=>{if(0===i)return"";let s=(Math.abs(t)-Math.abs(Math.floor(t))).toString().substring(1);return s.length>i&&(s=s.substring(0,i+1)),s})(t,2-_s(h,10)):"")}return n+=o,n},LogarithmicExponentsRounded:(t,i,s,e=10)=>{const h=ce(e)(t);return`${e}${ye(h)}`},LogarithmicExponents:(t,i,s,e=10)=>{const h=ce(e),r=Math.floor(h(t)),n=t/ue(e)**r;return`${Math.round(n)}×${e}${ye(r)}`},LogarithmicExtreme:(t,i,s,e=10)=>{const h=ce(e),r=Math.floor(h(t));return`${(t/ue(e)**r).toFixed(2)}×${e}${ye(r)}`},LogarithmicNoExponents:(t,i,s,e=10)=>{const h=ce(e);if("e"===e)return`${Math.floor(h(t))}e`;const r=t.toString();if(t>1)return r;const n=Math.floor(h(t));return t.toFixed(Math.abs(n))},Scientific:(t,i)=>{const{start:s,end:e}=i,h=Math.max(Math.abs(s),Math.abs(e)),r=Math.floor(Math.log10(h));return 0===t?`0.00e${r<0?"":"+"}${r}`:t.toExponential(2)}},ye=t=>Math.round(t).toString().split("").map((t=>{switch(t){case"0":return"⁰";case"1":return"¹";case"2":return"²";case"3":return"³";case"4":return"⁴";case"5":return"⁵";case"6":return"⁶";case"7":return"⁷";case"8":return"⁸";case"9":return"⁹";case"-":return"⁻";default:return t}})).join("");class pe extends ae{constructor(t,i,s,e){super(t,i,s,e),this.Di=!1,this.Ei=!1,this.Ri=0,this.Y=1e3,this.W(0,10),this.j()}Li(){return this.Ei}et(t,i,s,e,h){if(t===i)return!1;const r=Math.abs(e-s),n=Math.abs(i-t);if(!this.Di){const s=((t,i,s)=>{const e=((t,i)=>{if(i<bs&&i>xs&&t<bs&&t>xs){const s=Math.abs(t/2**23),e=Math.abs(i/2**23),h=Math.min(s,e);return 10**Math.floor(Math.log10(h))}})(t,i);if(void 0!==e)return e*s})(t,i,this.getCellSize());if(void 0===s)return!1;if(n>s)return!0;const e=(i+t)/2,o=(h?s/2:r/2)*(t>i?-1:1);return{start:e-o,end:e+o}}const o=10**-(12-Math.log10(Math.max(Math.abs(t),1)));if(n>o)return!0;const a=(i+t)/2,l=(h?o/2:r/2)*(t>i?-1:1);return{start:a-l,end:a+l}}_i(){this.j()}nt(t){return this.pi()+(t-this.$)/(this.U-this.$)*(this.mi()-this.pi())}rt(t){return this.$+(t-this.pi())/(this.mi()-this.pi())*(this.U-this.$)}W(t,i){return super.W(t,i),this.j(),this}yi(t){return super.yi(t),this.j(),this}Z(t){return super.Z(t),this.zi=me(this.U-this.$,this.oi,this.Y,this.ci,this.ui),this.j(),this}Vi(){return this.Di=!0,this}Oi(){return this.Di}Ni(){return Math.abs(this.Gi)}$i(){return this.Ni()/this.zi}Ui(){return this.Yi}Hi(){return this.Xi}getPixelSize(){return this.zi}Bi(){return this.ki}X(){return super.X(),this.Ei=!0,this}H(){return super.H(),this.Ei=!1,this}Wi(t,i=ve.Numeric){return i(t,{start:this.$,end:this.U})}ji(){const t=Math.abs(this.getInnerEnd()).toString().length,i=Math.abs(this.getInnerStart()).toString().length;return t>i?t:i}Zi(t){return me(t,this.oi,this.Y,this.ci,this.ui)}j(){let t=this.$,i=this.U,s=0;this.Di&&(t=0,i=this.U-this.$,s=this.$);const e=i-t,h=me(e,this.oi,this.Y,this.ci,this.ui);this.Xi=t-this.oi[0]*h,this.Yi=i+this.oi[1]*h;const r=this.Yi-this.Xi,n=r-this.Gi,o=Math.abs(n/h),a=e-this.Ri,l=Math.abs(a/h);(!this.ki||o>=.4||l>=.4)&&(this.Ri=e,this.Gi=r,this.zi=h,this.Ei=!0);const c=this.Gi*this.ui/(2*this.ci),u=-(this.Xi-this.Gi*this.li/this.ci)-c,d=2*this.pi()/this.Y-1,f=2*this.mi()/this.Y-1-d;this.ki={displacement:u,scaling:c,highPrecisionOffset:s,viewportStart:d,viewportSize:f,scaleStartLog:0,scaleIntervalLog:0}}Pi(t,i){return t+this.zi*i}}const me=(t,i,s,e=1,h=1)=>t/(s*e/h-(i[0]+i[1]));class Se{Qi(t,i){return"x"in t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=i),this}H(){return this.x.H(),this.y.H(),this}X(){return this.x.X(),this.y.X(),this}Z(t,i){return"object"==typeof t?(this.x.Z(t.x),this.y.Z(t.y)):(this.x.Z(t),this.y.Z(i)),this}xi(){return r(this.x.xi(),this.y.xi())}Ji(t){return this.x.yi(t),this}Ki(t){return this.y.yi(t),this}bi(){return r(this.x.bi(),this.y.bi())}qi(t,i){return this.x.W(t,i),this}ts(t,i){return this.y.W(t,i),this}getInnerIntervalPixels(){const t=this.x.getCellSize(),i=this.y.getCellSize();return{x:t-this.x.bi(),y:i-this.y.bi()}}ss(){return this.x.Li()||this.y.Li()}}class be extends Se{constructor(){super(...arguments),this.es="LinearScaleXY"}ht(t,i,s,e){return this.x=new pe(t.x,i.x,s.x,e?e.x:void 0),this.y=new pe(t.y,i.y,s.y,e?e.y:void 0),this}Oi(){return this.x.Oi()||this.y.Oi()}hs(){return r(this.x.getPixelSize(),this.y.getPixelSize())}Bi(){return{x:this.x.Bi(),y:this.y.Bi()}}Pi(t,i){const s=this.hs();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}rs(t,i,s,e){const h=this.hs(),r=Hs(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class xe extends Se{constructor(){super(...arguments),this.es="MixedScaleXY"}Oi(){return!1}Pi(t,i){const s=this.x.nt(t.x),e=this.y.nt(t.y),h={x:s+i.x,y:e+i.y};return{x:this.x.rt(h.x),y:this.y.rt(h.y)}}rs(t,i,s,e){const h={x:this.x.nt(t.x),y:this.y.nt(t.y)},r={x:this.x.nt(i.x),y:this.y.nt(i.y)},n=Ys(Zs(r,h)),o=Hs(r,h),a={x:h.x+n.x*e+o.x*s,y:h.y+n.y*e+o.y*s};return{x:this.x.rt(a.x),y:this.y.rt(a.y)}}Bi(){const t=this.x.Bi(),i=this.y.Bi();return{uScaleStart:[this.x.$,this.y.$],uScaleInterval:[this.x.getInnerInterval(),this.y.getInnerInterval()],uScaleStartLog:[t.scaleStartLog,i.scaleStartLog],uScaleIntervalLog:[t.scaleIntervalLog,i.scaleIntervalLog],uViewportStart:[t.viewportStart,i.viewportStart],uViewportSize:[t.viewportSize,i.viewportSize]}}}const Me=(t,i)=>t instanceof le||i instanceof le?(new xe).Qi(t,i):(new be).Qi(t,i),we=t=>"client"===t,_e=t=>!!(t&&"object"==typeof t&&"clientX"in t&&"number"==typeof t.clientX&&"clientY"in t&&"number"==typeof t.clientY),Ce=t=>"relative"===t,ke=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y),Te=(t,i,s,e,h,r)=>{if(!t)return;let n=t;if(s instanceof PointerEvent&&"mouse"===s.pointerType)if(0===s.button){if(!1===t.lmb)return;void 0!==t.lmb&&(n=hi(n,t.lmb))}else if(1===s.button){if(!1===t.mmb)return;void 0!==t.mmb&&(n=hi(n,t.mmb))}else if(2===s.button){if(!1===t.rmb)return;void 0!==t.rmb&&(n=hi(n,t.rmb))}if(e){if(!1===t.shift)return;n=hi(n,t.shift)}if(h){if(!1===t.ctrl)return;n=hi(n,t.ctrl)}if(r){if(!1===t.alt)return;n=hi(n,t.alt)}if(!i)return n;const o=n[i];return o?!0===o?n:hi(n,o):void 0},Fe=t=>{const i=[];return{push:t=>{i.push(t)},end:()=>{i.length>1&&t&&ni.console.warn("LightningChart JS warning | event handler triggered more than 1 interaction.\nThis likely means that your `chart.setUserInteractions` configuration either enables conflicting interactions or more likely doesn't disable conflicting default interactions."),i.forEach((t=>t()))}}},Ie=(t,i,s)=>{if(t){const t={x:s.x.pi(),y:s.y.pi(),width:s.x.Si(),height:s.y.Si()};i.forEach((i=>{i.ns=t}))}else i.forEach((t=>{t.ns=void 0}))},Pe=(t,i)=>{var s;return i?"string"==typeof i?`${t} ${i}`:!1!==(null===(s=i.ls)||void 0===s?void 0:s.displayInCursor)&&i.getUnits()?`${t} ${i.getUnits()}`:t:t},Le=t=>{let i=!1,s={type:"linear"};if(t&&(void 0!==t.opposite&&(i=t.opposite),t.type&&"linear-highPrecision"===t.type&&(s={type:"linear-highPrecision"}),t.type&&"logarithmic"===t.type)){let i=10;if(t.base)if("E"===t.base||"e"===t.base||"natural"===t.base)i="e";else if("number"==typeof t.base)i=t.base;else if("string"==typeof t.base)try{i=Number(t.base)}catch(i){console.warn(`Unidentified logarithmic base "${t.base}"`)}s={base:i,type:"logarithmic"}}return{opposite:i,type:s}},Be=(t,i,s,e=1)=>fi(t+.1*e*(i-t)+.5*e*Math.abs(s.getPixelSize())*Math.sign(i-t),t,i),De=(t,i,s,e=1)=>{const h=s.nt(t),r=s.nt(i);return fi(s.rt(h+.1*e*(r-h)+.5*e*Math.sign(r-h)),t,i)};var Ee;!function(t){t[t.noHighlighting=0]="noHighlighting",t[t.onHover=1]="onHover"}(Ee||(Ee={}));class Re{constructor(t,i,s,e){this.cs=Ee.onHover,this.dt=!1,this.ft=!0,this.us=[],this.ds=[],this.chart=t,this.fs=i,this._t=s,this.As=new Map,this.gs=e,this.vs=this.gs.ys(this,{ps:{themeEffectEnabled:this._t.effectsText},Ss:{}}),this.chart.St.xs.bs(this,(t=>{this.As.forEach(((i,s)=>s.Bt(t))),this.ds.forEach((i=>i.setHighlight(t))),this.us.forEach((i=>i.Bt(t)))}),{animationEnabled:this.chart.getAnimationsEnabled()}),ni.requestAnimationFrame((()=>{this.addEventListener("pointerenter",(()=>{this.cs===Ee.onHover&&this.setHighlight(!0)})),this.addEventListener("pointerleave",(()=>{this.cs===Ee.onHover&&this.setHighlight(!1)}))}))}Ms(){}ws(t,i){const s=void 0===(null==i?void 0:i.setEventHandlers)||i.setEventHandlers,e=void 0!==(null==i?void 0:i.isText)&&i.isText;this.As.set(t,{isText:e});const h=Array.from(this.As);this.vs.ps._s(h.filter((t=>t[1].isText)).map((t=>t[0]))),this.vs.Ss._s(h.filter((t=>!t[1].isText)).map((t=>t[0]))),t.setVisible(this.ft).Bt(this.chart.St.xs.Cs(this,!0)),ni.requestAnimationFrame((()=>{t.setPointerEvents(this.getPointerEvents()),s&&this.D.Nt(t,{getExtraData:(t,i,s)=>this.Kt(s,t)})}));const r=i=>{t.removeEventListener("dispose",r),this.As.delete(t)};t.addEventListener("dispose",r)}ks(t){this.us=t;const i=this.chart.St.xs.Cs(this,!0);t.forEach((t=>{t.Bt(i).Ts(this.ft)}))}Kt(t,i){}Fs(t){const i=this.chart.St.Is(t);if(i&&Array.from(this.As.keys()).includes(i.entity))return this.Kt(i.info,t)}setEffect(t){return this.vs.ps.Ps(t&&this._t.effectsText),this.vs.Ss.Ps(t),this.chart.St.Ls(),this}getEffect(){return this.vs.ps.Bs()||this.vs.Ss.Bs()}setIcon(t){return this.Ds=t,this.chart.St.Ls(),this}getIcon(){return this.Ds}setName(t){return this.Es=t,this.ds.forEach((i=>i.setText(t))),this}getName(){return this.Es||"Component"}dispose(){return this.dt||(this.dt=!0,this.As.forEach(((t,i)=>i.dispose())),this.fs(this),this.ds.forEach((t=>{t.dispose()})),this.ds.length=0,this.D.R("dispose",{}),this.chart.St.Ls()),this}setVisible(t){return t===this.ft||(this.ft=t,this.As.forEach(((i,s)=>s.setVisible(t))),this.us.forEach((i=>i.Ts(t))),this.ds.forEach((i=>i.setOn(t))),this.D.R("visiblechange",{isVisible:t}),this.chart.St.Ls()),this}getVisible(){return this.ft}setHighlight(t){return this.chart.St.xs.Rs(this,t),this.D.R("highlightchange",{highlight:es(t)}),this}getHighlight(){return this.chart.St.xs.Cs(this)}setAnimationHighlight(t){return this.chart.St.xs.zs(this,t),this}getAnimationHighlight(){return this.chart.St.xs.Vs(this)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}getPointed(){if(!this.chart.St.Os())return!1;for(const t of this.As)if(this.chart.St.Ns(t[0]))return!0;for(const t of this.us)if(this.chart.St.Ns(void 0,t))return!0;return!1}setHighlightOnHover(t){return this.cs=t?Ee.onHover:Ee.noHighlighting,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.cs!==Ee.noHighlighting}Gs(){}attach(t,i=!0,s=!1){return this.styleLegendEntry(t,s),hs(t,[this],{toggleVisibilityOnClick:i,label:this.getName(),style:void 0}),this.ds.push(t),t.addEventListener("dispose",(()=>{const i=this.ds.indexOf(t);i>=0&&this.ds.splice(i,1)})),this}$s(){return this.Ds}isDisposed(){return this.dt}set draggable(t){this.D.draggable=t}get draggable(){return this.D.draggable}}class ze extends Re{constructor(t,i,s,e,h,r,n,o){super(i,s,n,o),this.Us=!0,this.Ys=t,this.axis=e,this.ot=h,this.Hs=r,ni.requestAnimationFrame((()=>this.Xs()))}setClipping(t){return this.Us=t,this.Ys.Ls(),this}getClipping(){return this.Us}}const Ve=t=>"object"==typeof t&&null!==t&&"setCornerRadius"in t;var Oe;!function(t){t[t.Square=0]="Square",t[t.Circle=1]="Circle",t[t.HollowCircle=2]="HollowCircle",t[t.Triangle=3]="Triangle",t[t.Cross=4]="Cross",t[t.Diamond=5]="Diamond",t[t.Plus=6]="Plus",t[t.Minus=7]="Minus",t[t.Arrow=8]="Arrow",t[t.Star=9]="Star"}(Oe||(Oe={}));const Ne={ProgressiveX:"ProgressiveX",ProgressiveY:"ProgressiveY",RegressiveX:"RegressiveX",RegressiveY:"RegressiveY"},Ge=t=>"ProgressiveX"===t||"RegressiveX"===t?"x":"y",$e=t=>"ProgressiveX"===t||"ProgressiveY"===t,Ue=(t,i,s)=>t*(1-s)+i*s,Ye=(t,i,s,e,h)=>{if(void 0===i.value||void 0===s.value||void 0===e.value||void 0===h.value)return;const r=(t.x-s.point.x)/(h.point.x-s.point.x),n=(h.point.y-s.point.y)*r+s.point.y,o=(t.x-i.point.x)/(e.point.x-i.point.x),a=(e.point.y-i.point.y)*o+i.point.y,l=(t.y-a)/(n-a),c=Ue(s.value,h.value,r),u=Ue(i.value,e.value,o);return Ue(u,c,l)},He={warm:t=>i=>b(60/(t-1)*i,.8,.8),cold:t=>i=>b(60/(t-1)*i+180,.8,.8),fullSpectrum:t=>i=>b(360/t*i,.8,.8),reverseSpectrum:t=>i=>b(360/t*(t-i),.8,.8),flatUI:t=>i=>b(360/t*i+8,.8,.8-.15/t*i),arction:t=>i=>{const s=1-.2/t*i;return b(360/t*i+51,s,s)},arctionWarm:t=>i=>{const s=t-1,e=1-.2/s*i;return b(46-46/s*i+4,e,e)},sunset:t=>i=>{const s=[170,320];return b(i%2?s[0]:s[1],.8,.5+.5/(t-1)*i)},dynamic:t=>i=>{const s=i%2,e=[234,346];return b(s?e[0]:e[1],s?.3:.9,.5+.5/(t-1)*i)},magenta:t=>i=>{const s=[.9,.6];return b(354,i%2?s[0]:s[1],.5+.5/(t-1)*i)},greyscale:t=>i=>b(0,0,.25+.5/(t-1)*i),frozen:t=>i=>{const s=[.8,.6];return b(160+80/(t-1)*i,.6,i%2?s[0]:s[1])},retro:t=>i=>{const s=[6,183];return b(i%2?s[0]:s[1],.7,.5+.5/(t-1)*i)},crayons:t=>i=>{let s=180+230/(t-1)*i;return s>360&&(s-=360),b(s,.9,.8)},custom:(t,i)=>s=>{const e=.25+.5/(t-1)*s;if(!i)return b(0,0,e);const h=i.getR()/255,r=i.getG()/255,n=i.getB()/255,o=Math.max(h,r,n),a=Math.min(h,r,n);let l=0;if(o!==a){const t=o-a;switch(o){case h:l=(r-n)/t+(r<n?6:0);break;case r:l=(n-h)/t+2;break;case n:l=(h-r)/t+4;break;default:l=0}return l=l/6*360,b(l,.8,e)}return b(0,0,e)},sector:(t,i,s=.8,e=.8)=>h=>r=>b(t+(i-t)/h*r,s,e),auroraBorealis:t=>i=>Xe([{value:0,hex:"#23FF7A"},{value:1/9,hex:"#03E65D"},{value:2/9,hex:"#04D155"},{value:3/9,hex:"#00B849"},{value:4/9,hex:"#00A869"},{value:5/9,hex:"#008F68"},{value:6/9,hex:"#00815E"},{value:7/9,hex:"#017153"},{value:8/9,hex:"#704A85"},{value:1,hex:"#743A70"}],t,i),blueSciFi:t=>i=>Xe([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#E2E7FF"},{value:2/9,hex:"#ACB9F8"},{value:3/9,hex:"#889DFF"},{value:4/9,hex:"#547EEF"},{value:5/9,hex:"#4068D8"},{value:6/9,hex:"#2B50B7"},{value:7/9,hex:"#1B3E9F"},{value:8/9,hex:"#8D1395"},{value:1,hex:"#780A74"}],t,i),light:t=>i=>Xe([{value:0,hex:"#FECC00"},{value:1/9,hex:"#F7B300"},{value:2/9,hex:"#EF9900"},{value:3/9,hex:"#E88000"},{value:4/9,hex:"#E06600"},{value:5/9,hex:"#DD5A00"},{value:6/9,hex:"#D94D00"},{value:7/9,hex:"#D13300"},{value:8/9,hex:"#C91A00"},{value:1,hex:"#C10000"}],t,i),monochrome:t=>i=>Xe([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#EEEEEE"},{value:2/9,hex:"#DCDCDC"},{value:3/9,hex:"#C1C1C1"},{value:4/9,hex:"#A4A2A2"},{value:5/9,hex:"#8B8B8B"},{value:6/9,hex:"#787878"},{value:7/9,hex:"#656565"},{value:8/9,hex:"#565555"},{value:1,hex:"#434343"}],t,i),night:t=>i=>Xe([{value:0,hex:"#F0F9E0"},{value:1/9,hex:"#C9DFA4"},{value:2/9,hex:"#B5C796"},{value:3/9,hex:"#8998B7"},{value:4/9,hex:"#6E7E9E"},{value:5/9,hex:"#5C6D8F"},{value:6/9,hex:"#47587A"},{value:7/9,hex:"#374B72"},{value:8/9,hex:"#273C65"},{value:1,hex:"#192847"}],t,i),sunset2:t=>i=>Xe([{value:0,hex:"#22334D"},{value:1/9,hex:"#82062C"},{value:2/9,hex:"#AB001D"},{value:3/9,hex:"#D80428"},{value:4/9,hex:"#CF5D1B"},{value:5/9,hex:"#CF8229"},{value:6/9,hex:"#CF9D29"},{value:7/9,hex:"#C4BE25"},{value:8/9,hex:"#E1DC49"},{value:1,hex:"#FFFA67"}],t,i)},Xe=(t,i,s)=>{const e=je(i,s),[h,r]=Ze(e,t),n=We(t[h]),o=We(t[r]),a=0!==n.value?(o.value-e)/n.value:0,l={value:a,h:Ue(n.h,o.h,a),s:Ue(n.s,o.s,a),v:Ue(n.v,o.v,a)};return b(l.h,l.s,l.v)},We=t=>{const i=(t=>{const i=t.r,s=t.g,e=t.b,h=Math.max(i,s,e),r=Math.min(i,s,e);let n=0;const o=h,a=h-r,l=0===h?0:a/h;if(h===r)n=0;else{switch(h){case i:n=(s-e)/a+(s<e?6:0);break;case s:n=(e-i)/a+2;break;case e:n=(i-s)/a+4}n/=6}return[360*n,l,o]})(S(t.hex));return{value:t.value,h:i[0],s:i[1],v:i[2]}},je=(t,i)=>{const s=i/t;return s<0?0:s>1?1:s},Ze=(t,i)=>{if(i.length<2)throw new Error("Invalid palette size");for(let s=0;s<i.length;s+=1)if(t<i[s].value)return[s-1,s];return[i.length-2,i.length-1]};class Qe{constructor(){this.type="simple"}}const Je=t=>!(!t||"object"!=typeof t||!("type"in t)||"simple"!==t.type),Ke=new Qe;class qe{constructor(t){this.type="phong",this.ambientReflection=1,this.specularReflection=.1,this.diffuseReflection=1,this.ambientColor=S("#000"),this.specularColor=S("#fff"),this.shininess=32,t&&(this.ambientReflection=Number.isNaN(Number(t.ambientReflection))?this.ambientReflection:Number(t.ambientReflection),this.specularReflection=Number.isNaN(Number(t.specularReflection))?this.specularReflection:Number(t.specularReflection),this.diffuseReflection=Number.isNaN(Number(t.diffuseReflection))?this.diffuseReflection:Number(t.diffuseReflection),this.ambientColor=t.ambientColor||this.ambientColor,this.specularColor=t.specularColor||this.specularColor,this.shininess=t.shininess||this.shininess)}}const th=t=>!(!t||"object"!=typeof t||!("type"in t)||"phong"!==t.type),ih=new qe,sh={Simple:Qe,Phong:qe},eh=i({type:"font",size:14,family:"Arial",weight:"normal",style:"normal",variant:!1});class hh extends eh{constructor(t){super(t)}setSize(t){return this.set("size",t)}setFamily(t){return this.set("family",t)}setWeight(t){return this.set("weight",t)}setStyle(t){return this.set("style",t)}setVariant(t){return this.set("variant",t)}getSize(){return this.get("size")}getFamily(){return this.get("family")}getWeight(){return this.get("weight")}getStyle(){return this.get("style")}getVariant(){return this.get("variant")}}const rh=t=>!(!t||"object"!=typeof t||!("type"in t)||"font"!==t.type),nh=new hh,oh=new class{getFillStyle(){return V}},ah=i({type:"triangulated-points-3d",shape:"sphere",size:10,fillStyle:new $,wireframeStyle:Wt});class lh extends ah{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setWireframeStyle(t){return"function"==typeof t?this.set("wireframeStyle",t(this.get("wireframeStyle"))):this.set("wireframeStyle",t)}getWireframeStyle(){return this.get("wireframeStyle")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}}const ch=t=>!(!t||"object"!=typeof t||!("type"in t)||"triangulated-points-3d"!==t.type),uh=i({type:"pixelated-points-3d",size:5,fillStyle:new $});class dh extends uh{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}}const fh=t=>!(!t||"object"!=typeof t||!("type"in t)||"pixelated-points-3d"!==t.type),Ah={Triangulated:lh,Pixelated:dh},gh=i({type:"linestyle",lineType:"solid",fillStyle:new $({color:m(255,255,255)}),thickness:1});class vh extends gh{constructor(t){super({...t,lineType:"solid"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}Xt(){const t=this.getThickness();return t<0?1:t}}const yh=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"solid"!==t.lineType),ph={Dotted:[1,3],DottedDense:[1,1],Dashed:[3,1],DashedEqual:[2,2],DashedLoose:[2,4],DashDotted:[3,2,1,2]},mh=i({type:"linestyle",lineType:"dashed",pattern:ph.DashedEqual,fillStyle:new $({color:m(255,255,255)}),thickness:1,patternScale:3});class Sh extends mh{constructor(t){super({...t,lineType:"dashed"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}Xt(){const t=this.getThickness();return t<0?1:t}setPattern(t){return"function"==typeof t?this.set("pattern",t(this.getPattern())):this.set("pattern",t)}getPattern(){return this.get("pattern")}setPatternScale(t){return"function"==typeof t?this.set("patternScale",t(this.getPatternScale())):this.set("patternScale",t)}getPatternScale(){return this.get("patternScale")}}const bh=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"dashed"!==t.lineType),xh=i({type:"icon",width:void 0,height:void 0,Ws:void 0,js:ui,Zs:ui});class Mh extends xh{constructor(t,i,s,e){super({...e,Ws:t,js:i,Zs:s})}dispose(){return this.Zs(this),this}setWidth(t){const i=this.set("width",t);return this.js(i),i}getWidth(){return this.get("width")}setHeight(t){const i=this.set("height",t);return this.js(i),i}getHeight(){return this.get("height")}setSize(t,i){const s=this.withMutations((s=>{s.set("width",t).set("height",i)}));return this.js(s),s}xi(){if(!this.Ws)return{x:0,y:0};const t=this.Ws.width,i=this.Ws.height;if(0===t||0===i)return{x:0,y:0};const s=this.width,e=this.height;return"number"==typeof s&&"number"==typeof e?{x:s,y:e}:"number"==typeof s?{x:s,y:i*s/t}:"number"==typeof e?{x:t*e/i,y:e}:{x:t,y:i}}}const wh=t=>!(!t||"object"!=typeof t||!("type"in t)||"icon"!==t.type),_h=i({type:"glow",color:m(255,255,255,50),spread:1,blur:4,offset:{x:0,y:0}});class Ch extends _h{constructor(t){super(t)}setSpread(t){return this.set("spread","function"==typeof t?t(this.get("spread")):t)}getSpread(){return this.get("spread")}setBlur(t){return this.set("blur","function"==typeof t?t(this.get("blur")):t)}getBlur(){return this.get("blur")}setColor(t){return this.set("color","function"==typeof t?t(this.get("color")):t)}getColor(){return this.get("color")}setOffset(t){return this.set("offset","function"==typeof t?t(this.get("offset")):t)}getOffset(){return this.get("offset")}}const kh=t=>!(!t||"object"!=typeof t||!("type"in t)||"glow"!==t.type);class Th{constructor(t,i){this.Qs=t,this.Js=i,this.Ks=i.rows*hr,this.qs=i.columns*rr}}var Fh,Ih;!function(t){t[t.ZoomIn=0]="ZoomIn",t[t.ZoomInX=1]="ZoomInX",t[t.ZoomInY=2]="ZoomInY",t[t.ZoomOut=3]="ZoomOut",t[t.ZoomOutX=4]="ZoomOutX",t[t.ZoomOutY=5]="ZoomOutY",t[t.ZoomToFit=6]="ZoomToFit",t[t.ToggleAnimations=7]="ToggleAnimations"}(Fh||(Fh={})),function(t){t[t.Circle=0]="Circle",t[t.Rectangle=1]="Rectangle",t[t.RoundedRectangle=2]="RoundedRectangle"}(Ih||(Ih={}));const Ph={x:-43,y:0},Lh={x:-65,y:0},Bh={x:-86,y:0},Dh={x:-107,y:-1},Eh={x:-128,y:-3},Rh={x:-150,y:0},zh={x:-171,y:0},Vh={x:-276,y:0},Oh={x:-298,y:0},Nh={x:0,y:0},Gh={x:-21,y:0};class $h extends Th{constructor(t,i,s,e){super(t,s),this.te=ni.document.createElement("button"),this.ie=ni.document.createElement("div"),this.se=ni.document.createElement("label"),this.Js=s,this.ee=i,this.he=e}re(t,i,s,e){this.ne(t,e),this.oe(),this.ae(i),this.le(),this.se.textContent=s||"";const h=ni.document.createElement("div");this.ce(h),this.te.onclick=this.onClick.bind(this),h.appendChild(this.ie),h.appendChild(this.se),this.te.appendChild(h)}le(){this.te.style.cursor="pointer"}ce(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignContent="center",t.style.flexDirection="column"}ae(t){"string"==typeof t?(this.ie.style.backgroundImage=`url(${t})`,this.ie.style.backgroundSize="100%",this.ie.style.backgroundRepeat="no-repeat",this.ie.style.backgroundPosition="center",this.ie.style.width="20px",this.ie.style.height="20px"):this.applyStyleForSprite(t),this.ie.style.margin="auto"}oe(){switch(this.ee){case Ih.RoundedRectangle:this.te.style.borderRadius="10px";break;case Ih.Rectangle:this.te.style.borderRadius="0px";break;case Ih.Circle:default:this.te.style.borderRadius="31px"}}ne(t,i){this.te.style.width=`${this.qs.toString()}px`,this.te.style.height=`${this.Ks.toString()}px`,this.te.style.backgroundColor=t,this.te.style.opacity=i||nr,this.te.style.alignItems="center",this.te.style.border="2px solid #707070",this.te.style.transition="background-color .8s ease"}applyStyleForSprite(t){this.ie.style.backgroundImage=`url(${this.Qs}/${or})`,this.ie.style.backgroundPositionX=`${t.x}px`,this.ie.style.backgroundPositionY=`${t.y}px`,this.ie.style.backgroundSize="1600%",this.ie.style.backgroundRepeat="no-repeat",this.ie.style.width="20px",this.ie.style.height="20px"}ue(t){return t.appendChild(this.te),t}de(){return this.te}}class Uh extends $h{constructor(t,i,s,e){super(t,i,s,e),this.fe="",this.Ae="",this.ge=!1,this.he=e}ve(){this.ye(),this.onToggledStateAction()}pe(){this.me(),this.onInitialStateAction()}me(){this.Se(this.fe)}ye(){this.Se(this.Ae)}Se(t){"string"==typeof t?this.ie.style.background=t:(this.ie.style.backgroundImage=`url(${this.Qs}/${or})`,this.ie.style.backgroundPositionX=`${t.x}px`,this.ie.style.backgroundPositionY=`${t.y}px`)}onClick(){this.ge?this.pe():this.ve(),this.ge=!this.ge}}class Yh extends $h{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.he=i;const e=this.he.getTheme();this.re(e.onScreenMenuBackgroundColor.toRGBAString(),Ph)}onClick(){const t=this.he.be();t&&this.he.zoom(t,{x:-1,y:-1})}}class Hh extends $h{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.he=i;const e=this.he.getTheme();this.re(e.onScreenMenuBackgroundColor.toRGBAString(),Dh)}onClick(){const t=this.he.be();t&&this.he.zoom(t,{x:-1,y:0})}}class Xh extends $h{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.he=i;const e=this.he.getTheme();this.re(e.onScreenMenuBackgroundColor.toRGBAString(),Rh)}onClick(){const t=this.he.be();t&&this.he.zoom(t,{x:0,y:-1})}}class Wh extends $h{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.he=i;const e=this.he.getTheme();this.re(e.onScreenMenuBackgroundColor.toRGBAString(),Lh)}onClick(){const t=this.he.be();t&&this.he.zoom(t,{x:1,y:1})}}class jh extends $h{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.he=i;const e=this.he.getTheme();this.re(e.onScreenMenuBackgroundColor.toRGBAString(),Eh)}onClick(){const t=this.he.be();t&&this.he.zoom(t,{x:1,y:0})}}class Zh extends $h{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.he=i;const e=this.he.getTheme();this.re(e.onScreenMenuBackgroundColor.toRGBAString(),zh)}onClick(){const t=this.he.be();t&&this.he.zoom(t,{x:0,y:1})}}class Qh extends Uh{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.he=i;const e=this.he.getTheme();this.fe=Vh,this.Ae=Oh,this.re(e.onScreenMenuBackgroundColor.toRGBAString(),this.fe)}onToggledStateAction(){this.he.setAnimationsEnabled(!1)}onInitialStateAction(){this.he.setAnimationsEnabled(!0)}}class Jh extends $h{constructor(t,i,s){super(t,s,{rows:1,columns:1},i),this.he=i;const e=this.he.getTheme();this.re(e.onScreenMenuBackgroundColor.toRGBAString(),Bh)}onClick(){this.he.forEachAxis((t=>{t.fit(!0)}))}}class Kh extends $h{constructor(t,i,s){super(t,i.shape||ar,i.dimensions||{rows:1,columns:1},s);const e=s.getTheme(),h=i.color||e.onScreenMenuBackgroundColor.toRGBAString(),r=i.icon||"",n=i.label||"",o=i.opacity||"";this.re(h,r,n,o),this.xe=i.action}onClick(){this.xe(this.he)}}class qh extends Uh{constructor(t,i,s,e){super(t,i,{rows:1,columns:1},s),this.he=s,this.Me=e,this.fe=Gh,this.Ae=Nh,this.re(lr,this.fe)}me(){this.Se(this.fe),this.te.style.backgroundColor=lr,this.te.style.border="2px solid #707070",this.te.style.margin="0px"}ye(){this.Se(this.Ae),this.te.style.background="#FECC00 0% 0% no-repeat padding-box",this.te.style.border="10px solid #BCBCBC12",this.te.style.margin="1px"}onToggledStateAction(){var t;null===(t=this.Me)||void 0===t||t.style.setProperty("display","block")}onInitialStateAction(){var t;null===(t=this.Me)||void 0===t||t.style.setProperty("display","none")}}var tr;!function(t){t.Move="move",t.ResizeColumn="col-resize",t.ResizeRow="row-resize",t.Horizontal="ew-resize",t.Vertical="ns-resize",t.NorthWest="nw-resize",t.NorthEast="ne-resize",t.Copy="copy",t.CrossHair="crosshair",t.Default="default",t.Help="help",t.Restricted="not-allowed",t.None="none",t.Point="pointer",t.Text="text",t.Wait="wait",t.ZoomIn="zoom-in",t.ZoomOut="zoom-out"}(tr||(tr={}));const ir={LeftBottom:r(-1,-1),CenterBottom:r(0,-1),RightBottom:r(1,-1),LeftCenter:r(-1,0),Center:r(0,0),RightCenter:r(1,0),LeftTop:r(-1,1),CenterTop:r(0,1),RightTop:r(1,1)},sr=new $({color:m(255,255,255,0)}),er=new vh({thickness:1,fillStyle:sr}),hr=60,rr=60,nr="1.0",or="osm/osm-sprite-transparent.png",ar=Ih.Circle,lr="#363636";var cr;!function(t){t[t.TopRight=0]="TopRight",t[t.TopLeft=1]="TopLeft",t[t.BottomLeft=2]="BottomLeft",t[t.BottomRight=3]="BottomRight"}(cr||(cr={}));class ur extends ze{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.Es="Band",this.we=0,this._e=1,this.Ce=this._t.bandFillStyle,this.ke=this._t.bandStrokeStyle,this.D=new zt,this.Te=this.Ys.Pe(this.ot).Ie(this.Ce).Fe(this.ke).Bt(this.getHighlight()),this.ws(this.Te)}setValueStart(t){return this.we=t,this.D.R("valuechange",{start:this.we,end:this._e}),this.Ys.Ls(),this}getValueStart(){return this.we}setValueEnd(t){return this._e=t,this.D.R("valuechange",{start:this.we,end:this._e}),this.Ys.Ls(),this}getValueEnd(){return this._e}setFillStyle(t){this.Ce="function"==typeof t?t(this.Ce):t;const i=this.Ce;return this.Te.Ie(i),this.Ys.Ls(),this}getFillStyle(){return this.Ce}setStrokeStyle(t){this.ke="function"==typeof t?t(this.ke):t;const i=this.ke;return this.Te.Fe(i),this.Ys.Ls(),this}getStrokeStyle(){return this.ke}Le(){return this.Te.Be(this.Hs.toVec2(this.we,this.Hs.getHeight(this.ot).getInnerStart())).Z(this.Hs.toVec2(this._e-this.we,this.Hs.getHeight(this.ot).getInnerInterval())),Ie(this.Us,[this.Te],this.ot),this}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce,stroke:this.ke})}De(t,i){t.Bt(i),this.Ys.Ls()}Xs(){let t,i,s;const e=(e,h,r)=>{const n=ot(this.Ys.St.Ee(e.clientX,e.clientY),this.Ys.St.ot,this.ot),o=this.Hs.getWidth(n),a=this.axis.ot.nt(this.we),l=this.axis.ot.nt(this._e),c=(this.axis.ot.nt(o)-a)/(l-a);t=h&&(!(c<.1||c>.9)||!r),i=r&&!t,i&&(s=c<.5)},h=s=>{const h=this.getUserInteractions(),r=Te(h.move,"drag",s,s.shiftKey,s.ctrlKey,s.altKey),n=Te(h.scale,"drag",s,s.shiftKey,s.ctrlKey,s.altKey);e(s,!!(null==r?void 0:r.drag),!!(null==n?void 0:n.drag));const o=t?tr.Point:i?this.Hs.getWidth({x:tr.Horizontal,y:tr.Vertical}):tr.Default;this.Re=this.chart.engine.setMouseStyle(o,this.Re)},r=t=>{this.Re=this.chart.engine.restoreMouseStyle(this.Re)};this.addEventListener("pointermove",h),this.addEventListener("pointerleave",r);const n=(e,h,r,n)=>{const o=this.Hs.getWidth(e);if(t){this.we=this.axis.ot.Pi(this.we,o),this._e=this.axis.ot.Pi(this._e,o);const t=null==r?void 0:r.on;t&&t({event:h})}else if(i&&s){this.we=this.axis.ot.Pi(this.we,o);const t=null==n?void 0:n.on;t&&t({event:h})}else if(i&&!s){this._e=this.axis.ot.Pi(this._e,o);const t=null==n?void 0:n.on;t&&t({event:h})}Bi(h),this.D.R("valuechange",{start:this.we,end:this._e}),this.Ys.Ls()};this.addEventListener("pointerdown",(s=>{const e=this.getUserInteractions(),o=Te(e.move,"drag",s,s.shiftKey,s.ctrlKey,s.altKey),a=Te(e.scale,"drag",s,s.shiftKey,s.ctrlKey,s.altKey);if(!(null==o?void 0:o.drag)&&t)return;if(!(null==a?void 0:a.drag)&&i)return;Bi(s);let l=s;const c=t=>{if(t.pointerId!==s.pointerId)return;const i={x:t.clientX-l.clientX,y:l.clientY-t.clientY};n(i,t,o,a),l=t},u=t=>{t.pointerId===s.pointerId&&(this.addEventListener("pointermove",h),this.addEventListener("pointerleave",r),ni.removeEventListener("pointermove",c),ni.removeEventListener("pointerup",u),ps())};this.removeEventListener("pointermove",h),this.removeEventListener("pointerleave",r),ni.addEventListener("pointermove",c),ni.addEventListener("pointerup",u)}))}setUserInteractions(t){return this.ze=void 0===t?{move:!1,scale:!1}:t,this}getUserInteractions(){return hi({move:{drag:!0},scale:{drag:!0}},this.ze)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class dr extends ze{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,r,n,o),this.Es="Constant Line",this.S=0,this.ke=this._t.constantLineStrokeStyle,this.Ve=!0,this.D=new zt,this.Oe=this.Ys.Ge(this.ot).Ne(this.ke).Bt(this.getHighlight()),this.ws(this.Oe)}setValue(t){return this.S=t,this.D.R("valuechange",{value:this.S}),this.Ys.Ls(),this}getValue(){return this.S}setStrokeStyle(t){this.ke="function"==typeof t?t(this.ke):t;const i=this.ke;return this.Oe.Ne(i),this.Ys.Ls(),this}getStrokeStyle(){return this.ke}Le(){return this.Oe.Ue(this.Hs.toVec2(this.S,this.Hs.getHeight(this.ot).getInnerStart())).$e(this.Hs.toVec2(this.S,this.Hs.getHeight(this.ot).getInnerEnd())),Ie(this.Us,[this.Oe],this.ot),this}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{stroke:this.ke})}De(t,i){t.Bt(i),this.Ys.Ls()}setUserInteractions(t){return this.ze=void 0===t?{move:!1}:t,this}getUserInteractions(){return hi({move:{drag:!0}},this.ze)}Xs(){this.addEventListener("pointerenter",(t=>{const i=this.getUserInteractions();if(Te(i.move,"drag",t,t.shiftKey,t.ctrlKey,t.altKey)){const t=this.Hs.getWidth({x:tr.Horizontal,y:tr.Vertical});this.Re=this.chart.engine.setMouseStyle(t,this.Re)}})),this.addEventListener("pointerleave",(t=>{this.Re=this.chart.engine.restoreMouseStyle(this.Re)})),this.addEventListener("pointerdown",(t=>{const i=this.getUserInteractions(),s=Te(i.move,"drag",t,t.shiftKey,t.ctrlKey,t.altKey);if(s){Bi(t),ps();let i=t;const e=t=>{const e={x:t.clientX-i.clientX,y:i.clientY-t.clientY};i=t,this.S=this.axis.ot.Pi(this.S,this.Hs.getWidth(e)),this.D.R("valuechange",{value:this.S}),this.Ys.Ls();const h=s.on;h&&h({event:t})},h=i=>{i.pointerId===t.pointerId&&(ni.removeEventListener("pointermove",e),ni.removeEventListener("pointerup",h))};ni.addEventListener("pointermove",e),ni.addEventListener("pointerup",h)}}))}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const fr={fitting:{start:(t,i,s,e)=>i>=t?s:e,end:(t,i,s,e)=>i>=t?e:s,allowIntervalLengthChange:!0},expansion:{start:(t,i,s,e)=>i>=t?s<t?s:t:e>t?e:t,end:(t,i,s,e)=>i>=t?e>i?e:i:s<i?s:i,allowIntervalLengthChange:!0},progressive:{start:(t,i,s,e)=>i>t?fr.progressive.end(t,i,s,e)+(t-i):e>t?e:t,end:(t,i,s,e)=>i>t?e>i?e:i:fr.progressive.start(t,i,s,e)+(i-t),allowIntervalLengthChange:!1},regressive:{start:(t,i,s,e)=>i>t?s<t?s:t:fr.regressive.end(t,i,s,e)+(t-i),end:(t,i,s,e)=>i>t?fr.regressive.start(t,i,s,e)+(i-t):s<i?s:i,allowIntervalLengthChange:!1},fittingStart:{start:(t,i,s,e)=>i>=t?s:e,end:(t,i,s,e)=>i,allowIntervalLengthChange:!0},fittingEnd:{start:(t,i,s,e)=>t,end:(t,i,s,e)=>i>=t?e:s,allowIntervalLengthChange:!0},nextPowerOf10:{start:(t,i,s,e)=>i>=t?s:e,end:(t,i,s,e)=>i>=t?10**Math.ceil(Math.log10(e)):10**Math.ceil(Math.log10(s)),allowIntervalLengthChange:!0},fittingStepped:{start:(t,i,s,e)=>{if(i>=t){if(s<t)return t-(i-t);const e=t+.5*(i-t);return s>e?e:t}if(e>t)return t+(t-i);const h=t-.5*(t-i);return e<h?h:t},end:(t,i,s,e)=>{if(i>=t){if(e>i)return i+(i-t);const s=i-.5*(i-t);return e<s?s:i}if(s<i)return i-(t-i);const h=i+.5*(t-i);return s>h?h:i},allowIntervalLengthChange:!0}},Ar={Empty:"Empty",Numeric:"Numeric",DateTime:"DateTime",Time:"Time"},gr=t=>void 0!==t.Ye,vr=t=>void 0!==t.He,yr=t=>void 0!==t.Xe,pr=(t,i,s,e,h,r,n)=>[r,n],mr=(t,i,s,e)=>{const h=[],r=Math.round(Math.abs((t-i)/s));for(let n=1;n<r;n+=1){const r=Math.round((t+s*n)*e)/e;r<i&&h.push(r)}return h},Sr=(t,i,s,e,h)=>{di(t,0)&&(t=0),di(i,0)&&(i=0);const r=[];let n=void 0!==e?((t,i,s)=>t-(t-s)%i)(t,s,e):t;if(s<=0)throw new Error(`_getRegularGreatKeyValues unit less than or equal to 0, unit: ${s}`);for(;n<i&&!1===di(n,i);)r.push(n),n+=s,n=Math.round(n*h)/h;return r.push(n),r},br=(t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i&&!1===di(r,i);)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h},xr=(t,...i)=>{const s=i.length>0?i.length:t?1:0;return(e,h,r,n,o,a)=>{if(h>=s)return;const l=i[h]||1;let c=!1,u=!1,d=1;return t&&(c="ignore"in t?"first"===t.ignore||"both"===t.ignore:c,u="ignore"in t?"last"===t.ignore||"both"===t.ignore:u,d="offset"in t&&void 0!==t.offset?t.offset:d),((t,i,s,e,h)=>(s&&(t=t.filter(((t,i)=>i>0))),e&&(t=t.filter(((i,s)=>s<t.length-1))),t.filter(((t,s)=>(s+h)%i==0))))(e,l,c,u,d)}},Mr=(...t)=>{const i=t.length>0?t.length:0;return(s,e,h,r,n,o)=>{if(e>=i)return;const a=t[e]||1;return s.filter(((t,i)=>i%a==0))}},wr=i({cursorFormatter:void 0});class _r extends wr{We(t){return{je:[],Ze:[],Qe:this.cursorFormatter?this.cursorFormatter:ve.Numeric,Je:void 0,Ke:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}}const Cr=(t,i,s,e,h,r,n,o,a,l,c)=>{let u=a.get(n);if(u||(u=new Map,a.set(n,u)),u.has(t))return u.get(t);if(0===i.length)return Ms;const d=c.qe(i,n.th.labelFont,h),f=o.Pi(s,{x:-(e.x/2+.5)*d.x+r.x-l,y:-(e.y/2+.5)*d.y+r.y-l}),A=o.Pi(f,{x:d.x+l,y:d.y+l}),g={min:{x:Math.min(f.x,A.x),y:Math.min(f.y,A.y)},max:{x:Math.max(f.x,A.x),y:Math.max(f.y,A.y)}};return u.set(t,g),g},kr=(new _r).We({type:"linear"});class Tr{constructor(t,i,s,e,h,r,n){this.ih=kr,this.sh=Ar.Empty,this.eh=new Map,this.hh=fr.fitting,this.rh=!0,this.oh=Gt((()=>this.chart.St.Ls()))(300,Ot.linear),this.ah=!0,this.ft=!0,this.uh=!1,this.dh=xs,this.fh=!1,this.Ah=!1,this.gh=xs,this.yh=xs,this.ph=xs,this.mh=!1,this.Sh="",this.bh=!1,this.xh=()=>{this.Mh.setPointerEvents(!0),this.title.Nt(this.Mh),this.xh=void 0},this.wh=(t,i,s,e,h,r,n,o,a,l,c)=>{const u=this._h(),d=[],f=t.filter((t=>this.Ch(t.keyValue,t.labelText,i))),A=[...f,...a.filter((t=>this.Ch(t.keyValue,t.labelText,t.tickLevel))),...l.filter((t=>t.labelText.length>0))];for(let t=0;t<f.length;t+=1){const a=f[t];let l,g=[];if(this.Ch(a.keyValue,a.labelText,i)){const t=Cr(a.keyValue,a.labelText,a.labelPosition,a.labelAlignment,a.labelRotation,a.labelOffset,i,u,o,c,this.chart.St.kh);g=ss(A.map((i=>i&&i!==a&&Cs(t,Cr(i.keyValue,i.labelText,i.labelPosition,i.labelAlignment,i.labelRotation,i.labelOffset,i.tickLevel,u,o,c,this.chart.St.kh))?i:void 0))),l=g.length>0}else l=!1;if(l){let o=!0;if(o&&g.every((t=>gr(t.tickLevel)))&&(o=!1),o&&i.Th&&i.Th.Fh&&!1===i.Th.Fh(a.keyValue,s,e,h,r,n)&&(o=!1),!1===o){f.splice(t,1),t-=1;continue}return!0}d.push(a)}return d},this.formatValue=t=>this.ih.Qe(t,{start:this.ot.getInnerStart(),end:this.ot.getInnerEnd()}),this.Ih=!0,this.Ph=!0,this.title=new zt,this.chart=t,this.Lh=i,this._t=e,this.Bh=r,this.ot=s,this.Dh=n,"logarithmic"===n.type&&this.setAnimationZoom(Ot.logarithmic(ue(n.base))),this.Eh=r.numeric,this.Rh("Numeric"),this.zh=s.getInnerStart(),this.Vh=s.getInnerEnd(),this.setAnimationsEnabled(h)}setUnits(t,i={}){return this.Oh=t,this.ls=i,this.Nh(),this}getUnits(){return this.Oh}setDefaultInterval(t,i){return this.Gh=t,!1!==(null==i?void 0:i.applyImmediately)&&(this.mh=!0,this.chart.St.Ls()),this}getDefaultInterval(){return this.Gh}getTitle(){return this.Sh}setTitle(t){return this.Sh=t,this.Nh(),this}getTitleFillStyle(){return this.Mh.$h()}setIntervalRestrictions(t){return this.Uh=t,this.bh=void 0!==t,this.chart.St.Ls(),this}getIntervalRestrictions(){if("function"==typeof this.Uh){const t=this.Yh();return this.Uh({curStart:this.zh,curEnd:this.Vh,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max})}return this.Uh}setTitleFillStyle(t){return this.Mh.Ie(t),this.chart.St.Ls(),this}getTitleFont(){return this.Mh.Hh()}setTitleFont(t){return this.Mh.Xh(t),this.chart.St.Ls(),this}setTitleRotation(t){return this.Mh.Wh(t),this.chart.St.Ls(),this}getTitleRotation(){return this.Mh.jh()}setTitleEffect(t){return this.Zh.Ps(t),this.chart.St.Ls(),this}getTitleEffect(){return this.Zh.Bs()}Rh(t,i){if(this.eh.size>0&&this.Qh(),"Empty"===t){const s=i||(t=>t);this.Eh=s(new _r),this.ih=this.Eh.We(this.Dh),this.sh=t}else if("Numeric"===t){"Numeric"!==this.sh&&(this.Eh=this.Bh.numeric);const s=i||(t=>t);this.Eh=s(this.Eh),this.ih=this.Eh.We(this.Dh),this.sh=t}else if("DateTime"===t){"DateTime"!==this.sh&&(this.Eh=this.Bh.datetime);const s=i||(t=>t);this.Eh=s(this.Eh),this.ih=this.Eh.We(this.Dh),this.sh=t}else if("Time"===t){"Time"!==this.sh&&(this.Eh=this.Bh.time);const s=i||(t=>t);this.Eh=s(this.Eh),this.ih=this.Eh.We(this.Dh),this.sh=t}return this.chart.St.Ls(),this}Jh(){return this.ih}Kh(t,i){this.ih=t,this.sh=i,this.chart.St.Ls()}setInterval(t){const{start:i,end:s,animate:e,stopAxisAfter:h}=t;return this.bh||(this.Uh=void 0),this.ct(void 0!==i?i:this.zh,void 0!==s?s:this.Vh,void 0!==e&&e,void 0===h||h,"userSetInterval"),this}ct(t,i,s=!1,e=!0,h){let r={start:t,end:i};const n="synchronizedAxis"===h||"setDefaultInterval"===h,o="setDefaultInterval"!==h,a=Math.abs(i-t),l=Math.abs(this.Vh-this.zh);if(void 0!==this.ih.Je&&this.ih.Je>a){const s=(i+t)/2,e=(o?this.ih.Je/2:l/2)*(t>i?-1:1);r={start:s-e,end:s+e}}if(void 0!==this.ih.Ke&&this.ih.Ke<a){const s=(i+t)/2,e=(o?this.ih.Ke/2:l/2)*(t>i?-1:1);r={start:s-e,end:s+e}}const c=this.ot.et(r.start,r.end,this.zh,this.Vh,o);if(!1===c)return this;if(!0===c);else if(r=c,"zoomBandChart"===h)return this;let u;switch(h){case"userSetInterval":case"userFit":case"interactionSetInterval":case"interactionZoom":case"setDefaultInterval":u=!0;break;case"zoomBandChart":case"synchronizedAxis":u=!1;break;default:return rs(0,""),this}if(this.qh&&this.qh.finishAll(!1),this.oh&&(!0===s||s>0)){this.setStopped(!0);const t=!0===s?void 0:s,i=!this.qh||this.qh.isOver()?this.oh:this.qh.NextAnimation.bind(this);this.qh=i([[this.zh,r.start],[this.Vh,r.end]],(([t,i])=>{this.tr(t,i,{allowIntervalLengthChange:o,skipIntervalRestriction:n})}),t),this.qh.addEventListener("end",(()=>{this.qh=void 0,u&&(this.ph=ni.performance.now())})),this.qh.addEventListener("end",(()=>{this.setStopped(e)}))}else this.tr(r.start,r.end,{allowIntervalLengthChange:o,skipIntervalRestriction:n}),this.setStopped(e),u&&(this.ph=ni.performance.now());return this}getInterval(){return{start:this.zh,end:this.Vh}}setStopped(t){return t===this.uh||(t&&(this.qh&&this.qh.finishAll(!1),this.qh=void 0),this.uh=t,this.D.R("stoppedchange",{isStopped:this.uh}),this.dh=ni.performance.now(),this.chart.St.Ls()),this}getStopped(){return this.uh}fit(t,i){const s=this.Yh(),e=this.Gh||Br,h="function"==typeof e?e({curStart:this.zh,curEnd:this.Vh,dataMin:null==s?void 0:s.min,dataMax:null==s?void 0:s.max}):e;return this.ct(void 0!==h.start?h.start:this.zh,void 0!==h.end?h.end:this.Vh,void 0!==t?t:void 0!==h.animate?h.animate:this.ah,void 0!==i?i:void 0===h.stopAxisAfter||h.stopAxisAfter,this.Gh?"setDefaultInterval":"userFit"),this}setScrollStrategy(t){return this.hh=t,this.bh||t!==fr.expansion||(this.Uh=void 0),this.chart.St.Ls(),this}getScrollStrategy(){return this.hh}setAnimationScroll(t){return this.rh=Boolean(t),this.chart.St.Ls(),this}setAnimationZoom(t,i=300){return this.qh&&(this.qh.finishAll(!1),this.qh=void 0),this.oh=t?Gt((()=>this.chart.St.Ls()))(i,t):void 0,this}setAnimationsEnabled(t){return this.ah=t,t?(this.setAnimationScroll(!0),this.setAnimationZoom(Ot.ease,void 0)):(this.setAnimationScroll(void 0),this.setAnimationZoom(void 0)),this}getAnimationsEnabled(){return this.ah}setVisible(t){const i=this.ft!==t;return this.ft=t,this.Mh.setVisible(t),this.ir((i=>{i.sr.setVisible(t)})),i&&this.D.R("visiblechange",{isVisible:this.ft}),this}getVisible(){return this.ft}er(t){return!1}hr(t){if(this.xh&&this.xh(),this.title.setPointerEvents(this.title.zt.length>0),!this.er(t)||!this.rr){const i=new Map,s=new Map,e=this.nr(),h=e.min,r=e.max,n=Ir(this.ih,h,r,this.zh,this.Vh,t.physicalAxisSize,Math.min(this.zh,this.Vh),Math.max(this.zh,this.Vh));this.ar();const o=Ue(3,20,fi((t.physicalAxisSize-30)/270,0,1)),a={...t,...this.lr(t)},l=this.cr(this.ih,Math.min(h,this.zh,this.Vh),Math.max(r,this.zh,this.Vh),n,i,a,s,o),c=this.ur(this.ih,Math.min(h,this.zh,this.Vh),Math.max(r,this.zh,this.Vh),n,i,a,l,s,o),u=new Map([...l,...c]),d=this.ih.dr,f=void 0!==this.ih.Ze.find((t=>vr(t)&&!O(t.th.labelFillStyle)));if(d&&f&&Array.from(u).reduce(((t,i)=>t+(i[1].labelText.length>0&&!O(i[0].sr.$h())?1:0)),0)<=1){this.ar(),u.clear();const i=[Math.min(this.zh,this.Vh),Math.max(this.zh,this.Vh)],s={start:this.ot.getInnerStart(),end:this.ot.getInnerEnd()};i.forEach((i=>{const e=this.Ar(i,d,d.He(i,s),t,a),h=this.gr(e.keyValue,d,a,e,e.labelText);u.set(h,e)}))}this.vr(),this.rr={...a,...this.yr(t,u),min:h,max:r}}return this.rr}pr(t,i,s){const e=i.th;s.length>0?t.sr.Ie(e.getLabelFillStyle()).Xh(e.getLabelFont()).Sr(s).setVisible(this.getVisible()).mr(e.getLabelShadow()):t.sr.setVisible(!1)}gr(t,i,s,e,h){const r=this.eh.get(i)||new Map;this.eh.set(i,r);let n=r.get(t);return n||(n=this.br(t,i,s,e),r.set(t,n)),this.pr(n,i,h),n.Mr=!1,n}cr(t,i,s,e,h,r,n,o){const a=new Map,l=this._h(),c=[];for(const u of t.je){const t=e.get(u).filter((t=>t>=i&&t<=s)),d=t.map((t=>this.Ar(t,u,u.He(t,{start:this.ot.getInnerStart(),end:this.ot.getInnerEnd()}),r,r)));for(let i=0;i<t.length;i+=1){const s=t[i],e=d[i],f=this.gr(s,u,r,e,e.labelText),A=Cr(f.S,f.sr.wr(),e.labelPosition,e.labelAlignment,e.labelRotation,{x:0,y:0},u,l,h,o,this.chart.St.kh);c.find(((t,i)=>{const s=d[i];return Cs(A,Cr(t.S,t.sr.wr(),s.labelPosition,s.labelAlignment,s.labelRotation,{x:0,y:0},u,l,h,o,this.chart.St.kh))}))&&f.sr.setVisible(!1),f.Mr=!1,n.set(f,e),c.push(f),a.set(f,e)}}return a}ur(t,i,s,e,h,r,n,o,a){var l;const c={start:this.ot.getInnerStart(),end:this.ot.getInnerEnd()},u=new Map,d=Array.from(n.values());let f,A=[];for(const n of t.Ze){const g=n===t.Ze[t.Ze.length-1],v=e.get(n);if(!v)break;let y;if(void 0===f)y=[{start:i,end:s,keyValues:v}];else{y=[];for(let t=0;t<f.length-1;t+=1){const e=f[t],h=f[t+1],r={start:e,end:h,keyValues:[]};for(const t of v)t>=e&&t<h&&r.keyValues.push(t);r.end<i||r.start>s||y.push(r)}}if(f=v,yr(n))continue;let p,m=0,S=!1,b=-1,x=!0,M=[];for(let t=0;t<y.length;t+=1){const i=y[t].keyValues.map((t=>this.Ar(t,n,n.He(t,c),r,r)));M=M.concat(i)}if(n.th.getLabelFillStyle()!==V)for(p=[];++b<y.length;){const t=y[b],e=t.start,r=t.end;let o=t.keyValues;if(m>0){if(void 0===n.Th){x=!1;break}if(o=(0,n.Th._r)(t.keyValues,m-1,e,r,i,s),void 0===o)break}const l=ss(o.map((t=>M.find((i=>i.keyValue===t)))));if(S)p=p.concat(l);else{const t=this.wh(l,n,m,e,r,i,s,h,d,A,a);if(!0===t){m+=1,b=-1,p=[];continue}p=p.concat(t)}t!==y[y.length-1]||p.reduce(((t,e)=>t+(Ls(e.keyValue,i,s)?1:0)),0)>=2||g||S||(S=!0,m-=1,b=-1,p=[])}else p=M;const w=p.reduce(((t,e)=>t+(Ls(e.keyValue,i,s)?1:0)),0);void 0!==n.Cr&&w<n.Cr&&(p.length=0);const _=[];for(const t of M){if(t.keyValue<i||t.keyValue>s)continue;const e=p.includes(t);if(!e&&"hide-tick"===(null===(l=n.Th)||void 0===l?void 0:l.kr))continue;t.labelText=e?t.labelText:"";const h=this.gr(t.keyValue,n,r,t,t.labelText);o.set(h,t),_.push(t),u.set(h,t)}if(A=_,!x)break}return u}ir(t){for(const i of this.eh.values())for(const s of i.values())t(s)}Tr(t,i){for(const s of this.eh.values())for(const e of s.values())i=t(i,e);return i}Qh(){this.eh.forEach(((t,i)=>{t.forEach((t=>{t.dispose()}))})),this.eh.clear()}ar(){for(const t of this.eh.values())for(const i of t.values())i.Mr=!0}vr(){for(const t of this.eh.values()){const i=Array.from(t.entries());for(let s=0;s<i.length;s+=1){const[e,h]=i[s];h.Mr&&(h.dispose(),t.delete(e))}}}nr(){const t=this.ot.getInnerStart()<this.ot.getInnerEnd()?this.ot.getInnerStart():this.ot.getInnerEnd(),i=this.ot.getInnerEnd()>this.ot.getInnerStart()?this.ot.getInnerEnd():this.ot.getInnerStart();return c(t,i)}Ch(t,i,s){return 0!==i.length&&(!gr(s)||!0===s.Fr)}Ir(t,i){return"Empty"===this.sh||(this.ih.je.forEach((s=>{i=t(i,s.th)})),this.ih.Ze.forEach((s=>{vr(s)&&(i=t(i,s.th))}))),i}Yh(){let t=this.Lh.Pr();const i=this.Lh.Lr();let s;if(void 0!==t&&ai(t)&&void 0!==i&&ai(i)&&("logarithmic"===this.Dh.type&&(0===t&&(t=Math.min(1,i)),Math.sign(t)!==Math.sign(i)&&(t=Math.min(1,i-.1))),s?(s.min=Math.min(s.min,t),s.max=Math.max(s.max,i)):s=c(t,i)),s&&ai(s.min)&&ai(s.max))return di(s.min,s.max)?{min:s.min-1,max:s.max+1,emptyBounds:!0}:s}Br(){if(!this.Ih)return 0;let t=0;const i=this.Lh.Dr();return i&&(t=Math.max(t,i)),t}setAutoRegionsEnabled(t){return this.Ih=t,this.chart.St.Ls(),this}Er(){var t;const i=this.fh;let s=!1;if(this.mh&&this.Gh){const t=this.Yh();if(t){const i="function"==typeof this.Gh?this.Gh({curStart:this.zh,curEnd:this.Vh,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max}):this.Gh;if("object"==typeof this.Gh&&!this.bh){const s=Lr(this.Uh,t,{start:void 0!==i.start?i.start:this.zh,end:void 0!==i.end?i.end:this.Vh},this.getInterval(),!0);s.start===i.start&&s.end===i.end||(this.Uh=void 0)}this.ct(void 0!==i.start?i.start:this.zh,void 0!==i.end?i.end:this.Vh,void 0!==i.animate&&i.animate,void 0===i.stopAxisAfter||i.stopAxisAfter,"setDefaultInterval"),this.mh=!1}}if(this.hh&&!this.uh){let i=this.Yh();if((null==i?void 0:i.emptyBounds)&&this.hh===fr.expansion&&(i=void 0),i){const e=this.zh,h=this.Vh;let r=this.hh.start(e,h,i.min,i.max),n=this.hh.end(e,h,i.min,i.max);const o=null===(t=this.hh.allowIntervalLengthChange)||void 0===t||t,a=Lr(this.Uh,i,{start:r,end:n},{start:e,end:h},o);r=a.start,n=a.end;const l=!1===di(e,r),c=!1===di(h,n);if(r=l?r:e,n=c?n:h,l||c){let t=!1;if(this.rh&&!this.Ph)if(this.rh){t=!0;const i=l?this.Rr(e,r):e,a=c?this.Rr(h,n):h;if(!0===this.tr(i,a,{allowIntervalLengthChange:o,skipIntervalRestriction:!1})&&(l&&!1===di(i,r)||c&&!1===di(a,n))){this.chart.St.Ls(!0),s=!0;let t=Math.abs(n-r)/Math.abs(i-a);t<1&&(t=1/t),this.Ah=t>=1.4}}else t=!1;t||this.tr(r,n,{allowIntervalLengthChange:o,skipIntervalRestriction:!1}),this.Ph=!1}}}return s?(this.fh!==s&&(this.fh=s,this.gh=ni.performance.now()),this.zr&&(clearTimeout(this.zr),this.zr=void 0)):!0===i&&void 0===this.zr&&(this.Ah=!1,this.zr=setTimeout((()=>{!1!==this.fh&&(this.fh=!1,this.gh=ni.performance.now()),this.zr=void 0,this.chart.St.Ls()}),200)),this}Vr(){const t=this.getInterval(),i=this.Yh();return"function"==typeof this.Uh?this.Uh({curStart:t.start,curEnd:t.end,dataMin:null==i?void 0:i.min,dataMax:null==i?void 0:i.max}):this.Uh}tr(t,i,s){let e={start:t,end:i};const{allowIntervalLengthChange:h,skipIntervalRestriction:r}=s;let n=!0;if(this.Uh&&!r){const t=this.Yh();e=Lr(this.Uh,t,e,{start:this.zh,end:this.Vh},h)}const o=Math.abs(i-t),a=Math.abs(this.Vh-this.zh);if(void 0!==this.ih.Je&&this.ih.Je>o){const s=(i+t)/2,r=(h?this.ih.Je/2:a/2)*(t>i?-1:1);e={start:s-r,end:s+r},n=!1}if(void 0!==this.ih.Ke&&this.ih.Ke<o){const s=(i+t)/2,r=(h?this.ih.Ke/2:a/2)*(t>i?-1:1);e={start:s-r,end:s+r},n=!1}let l=this.ot.et(e.start,e.end,this.zh,this.Vh,h);if(!1===l)return!1;!0!==l&&(e=l);const c=this.Br(),u=this.Or(Math.min(e.start,e.end),Math.max(e.start,e.end),c);return l=this.ot.et(e.end>e.start?u.min:u.max,e.end>e.start?u.max:u.min,this.zh,this.Vh,!1),!!l&&(!0===l?this.ot.W(e.end>e.start?u.min:u.max,e.end>e.start?u.max:u.min):this.ot.W(e.start,e.end),this.zh=e.start,this.Vh=e.end,this.D.R("intervalchange",{start:e.start,end:e.end}),this.yh=ni.performance.now(),this.chart.St.Ls(),n)}Nr(){return this.fh}Gr(){return void 0!==this.qh}Nh(){var t;const i=!1!==(null===(t=this.ls)||void 0===t?void 0:t.displayOnAxis);this.Mh.Sr(this.Oh&&i&&this.Sh?`${this.Sh} (${this.Oh})`:this.Sh),this.chart.St.Ls()}}class Fr{constructor(t,i,s,e,h=s.Yr(e).Ur(us).$r(us).setPointerEvents(!1)){this.Mr=!1,this.dt=!1,this.As=[],this.Hr=t,this.S=i,this.Xr=s,this.Wr=e,this.sr=h,this.As.push(h)}Ts(t){this.As.forEach((i=>i.setVisible(t)))}dispose(){return this.dt||(this.dt=!0,this.As.forEach((t=>t.dispose()))),this}}const Ir=(t,i,s,e,h,r,n,o,a=!1)=>{const l=new Map;for(const a of t.je){let t=a.jr(i,s,e,h,r,n,o);t=Pr(t),l.set(a,t)}let c;for(const e of t.Ze){let h;if(void 0===c)h=e.jr(i,s,i,s,r);else{if(a&&e===t.Ze[t.Ze.length-1])break;let n=[];const o=c.filter((t=>i<=t&&t<=s)).length;if(o>0){const t=r/(o-1);if(void 0!==e.Zr&&e.Zr>t)break}for(let t=0;t<c.length-1;t+=1){const h=e.jr(c[t],c[t+1],i,s,r);n=n.concat(h)}h=n}h=Pr(h),l.set(e,h),c=h}return l},Pr=t=>(t=(t=>{const i={},s=[],e=t.length;let h=0;for(let r=0;r<e;r+=1){const e=t[r];1!==i[e]&&(i[e]=1,s[h]=e,h+=1)}return s})(t)).sort(((t,i)=>t-i)),Lr=(t,i,s,e,h)=>{const r="function"==typeof t?t({curStart:e.start,curEnd:e.end,dataMin:null==i?void 0:i.min,dataMax:null==i?void 0:i.max}):t;if(!r)return s;const n={start:s.start,end:s.end};let o=Math.abs(s.end-s.start);if(void 0!==r.intervalMin&&o<r.intervalMin){const t=(n.start+n.end)/2;n.start=t+.5*Math.sign(s.start-t)*r.intervalMin,n.end=t+.5*Math.sign(s.end-t)*r.intervalMin}if(o=Math.abs(s.end-s.start),void 0!==r.intervalMax&&o>r.intervalMax){const t=(n.start+n.end)/2;n.start=t+.5*Math.sign(s.start-t)*r.intervalMax,n.end=t+.5*Math.sign(s.end-t)*r.intervalMax}return o=Math.abs(s.end-s.start),void 0!==r.startMin&&(n.start=Math.max(n.start,r.startMin),h||di(Math.abs(n.start-n.end),o)||(n.end=n.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==r.startMax&&(n.start=Math.min(n.start,r.startMax),h||di(Math.abs(n.start-n.end),o)||(n.end=n.start+Math.sign(s.end-s.start)*o)),o=Math.abs(s.end-s.start),void 0!==r.endMin&&(n.end=Math.max(n.end,r.endMin),h||di(Math.abs(n.start-n.end),o)||(n.start=n.end+Math.sign(s.start-s.end)*o)),o=Math.abs(s.end-s.start),void 0!==r.endMax&&(n.end=Math.min(n.end,r.endMax),h||di(Math.abs(n.start-n.end),o)||(n.start=n.end+Math.sign(s.start-s.end)*o)),Math.sign(n.end-n.start)!==Math.sign(s.end-s.start)?{end:n.start,start:n.end}:n},Br=t=>{if(void 0===t.dataMin||void 0===t.dataMax)return{stopAxisAfter:!1};const i=t.curEnd>=t.curStart;return{start:i?t.dataMin:t.dataMax,end:i?t.dataMax:t.dataMin,stopAxisAfter:!1}},Dr=t=>{const i=t.getDraggingMode();return void 0!==i&&i!==si.notDraggable?i===si.draggable?tr.Move:i===si.onlyHorizontal?tr.Horizontal:tr.Vertical:void 0};class Er{constructor(){this.ft=!0}set draggable(t){this.D.draggable=t}get draggable(){return this.D.draggable}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}setVisible(t){const i=this.ft!==t;return this.ft=t,i&&this.D.R("visiblechange",{isVisible:this.ft}),this}getVisible(){return this.ft}}class Rr extends Er{constructor(t,i,s,e,h){super(),this.D=new zt,this.position=r(50,50),this.origin=r(0,0),this.size=r(0,0),this.dt=!1,this.Qr=void 0,this.Jr=void 0,this.Kr=Dr,this.qr=void 0,this.oi=f(0,0,0,0),this.Ys=t,this.renderingScale=i,this.scale=s,this.bt=e,this._t=h,this.Ys.Ls(),this._t=h,this.addEventListener("pointerenter",(()=>{const t="function"==typeof this.Kr?this.Kr(this):this.Kr;t&&(this.Jr=this.Ys.St.tn(t))})),this.addEventListener("pointerleave",(()=>{this.Ys.St.sn(this.Jr)}));const n=t=>{const i=this.getDraggingMode();if(i===si.notDraggable)return;Bi(t);let s=t;const e=t=>{const e={x:t.clientX-s.clientX,y:t.clientY-s.clientY};s=t;const h=this.scale.Pi(this.getPosition(),{x:i!==si.onlyVertical?e.x:0,y:i!==si.onlyHorizontal?-e.y:0}),r=this.scale,n=this.getSize(),o=this.getOrigin(),a=r.Pi({x:r.x.getInnerStart(),y:r.y.getInnerStart()},Qs({x:(1+o.x)/2,y:(1+o.y)/2},n)),l=r.Pi({x:r.x.getInnerEnd(),y:r.y.getInnerEnd()},Qs({x:(o.x-1)/2,y:(o.y-1)/2},n)),c={x:Math.min(Math.max(h.x,a.x),l.x),y:Math.min(Math.max(h.y,a.y),l.y)};this.setPosition(c)},h=t=>{this.Ys.St.en.removeEventListener("pointermove",e),this.Ys.St.en.removeEventListener("pointerup",h),this.addEventListener("pointerdown",n)};this.removeEventListener("pointerdown",n),this.Ys.St.en.addEventListener("pointermove",e),this.Ys.St.en.addEventListener("pointerup",h)};this.addEventListener("pointerdown",n)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}setEffect(t){return this.vs=this.vs||this.Ys.St.vs.ys(this,{hn:{shapes:this.rn()}}),this.vs.hn.Ps(t),this}getEffect(){return!!this.vs&&this.vs.hn.Bs()}setAutoDispose(t){return this.qr=t,this.Ys.Ls(),this}getAutoDispose(){return this.qr}getSize(t=ti.Everything){return t===ti.Everything?r(this.size.x+(this.oi.left+this.oi.right),this.size.y+(this.oi.bottom+this.oi.top)):this.size}setContentSize(t){this.size=t}setMargin(t){return this.oi="object"==typeof t?g(this.oi,t):{left:t,top:t,right:t,bottom:t},this.Ys.Ls(),this}getMargin(){return this.oi}Le(){if(this.qr){const t=this.size,i=this.renderingScale.xi(),s={x:t.x/i.x,y:t.y/i.y};("max-width"===this.qr.type&&s.x>=this.qr.maxWidth||"max-height"===this.qr.type&&s.y>=this.qr.maxHeight)&&this.dispose()}return this}hr(){return this}dispose(){return this.dt||(this.Ys.Ls(),this.dt=!0,this.bt(this),this.D.R("dispose",{}),this.rn().forEach((t=>t.dispose()))),this}setVisible(t){return super.setVisible(t),this.rn().forEach((i=>i.setVisible(t))),this.Ys.Ls(),this}isDisposed(){return this.dt}setPosition(t){return this.position=t,this.Ys.Ls(),this}getPosition(t=this.origin,i=ti.Everything){const s=this.getSize(ti.Everything),e=this.scale.Pi(this.position,Qs({x:-(this.origin.x+1)/2,y:-(this.origin.y+1)/2},s));if(i===ti.Everything)return this.scale.Pi(e,Qs({x:(t.x+1)/2,y:(t.y+1)/2},s));const h=this.scale.Pi(e,{x:this.oi.left,y:this.oi.bottom}),r=this.getSize(ti.Content);return this.scale.Pi(h,Qs({x:(t.x+1)/2,y:(t.y+1)/2},r))}setOrigin(t){return this.origin=t,this.Ys.Ls(),this}getOrigin(){return this.origin}setDraggingMode(t=si.notDraggable){return this.Qr=t,this.Ys.Ls(),this}getDraggingMode(){return void 0!==this.Qr?this.Qr:si.notDraggable}setMouseStyle(t){return this.Kr=t,this}getMouseStyle(){return this.Kr}}class zr extends Rr{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.nn=f(),this.an=0,this.Ys=t,this.ln=e,this.backgroundElement=new this.ln(this.Ys,this.renderingScale,this.scale,ui,r),this.D.$t(this.backgroundElement)}setPointerEvents(t){return super.setPointerEvents(t),this.backgroundElement.setPointerEvents(t),this}rn(){return this.backgroundElement.rn()}setBackground(t){return t(this.backgroundElement),this}getBackground(){return this.backgroundElement}Le(){return super.Le(),this.dt||(void 0!==this.cn&&(this.backgroundElement.cn=this.cn-.01),this.backgroundElement.setOrigin(this.origin).setPosition(this.getPosition(this.origin,ti.PaddedBackground)).Le()),this}hr(){const t=this.getSize(ti.PaddedContent);return this.backgroundElement.un(t).hr(),super.hr()}dispose(){return super.dispose(),this.backgroundElement.dispose(),this}setVisible(t){return super.setVisible(t),this.backgroundElement.setVisible(t),this}setPadding(t){return this.nn="object"==typeof t?g(this.nn,t):{left:t,top:t,right:t,bottom:t},this.Ys.Ls(),this}getPadding(){return this.nn}getSize(t=ti.Everything){let i=super.getSize(t);return t>=ti.PaddedContent&&(i=r(i.x+this.nn.left+this.nn.right,i.y+this.nn.bottom+this.nn.top)),t>=ti.PaddedBackground&&(i=r(i.x+this.backgroundElement.dn()+this.backgroundElement.fn(),i.y+this.backgroundElement.An()+this.backgroundElement.gn())),i}getPosition(t=this.origin,i=ti.Everything){if(i===ti.Everything)return super.getPosition(t,i);const s=super.getPosition(r(-1,-1),ti.Everything),e=this.getMargin(),h=this.scale.Pi(s,{x:e.left,y:e.bottom});if(i===ti.PaddedBackground){const i=this.getSize(ti.PaddedBackground);return this.scale.Pi(h,Qs({x:(t.x+1)/2,y:(t.y+1)/2},i))}const n=this.scale.Pi(h,{x:this.backgroundElement.dn(),y:this.backgroundElement.An()});if(i===ti.PaddedContent){const i=this.getSize(ti.PaddedContent);return this.scale.Pi(n,Qs({x:(t.x+1)/2,y:(t.y+1)/2},i))}const o=this.getPadding(),a=this.scale.Pi(n,{x:o.left,y:o.bottom}),l=this.getSize(ti.Content);return this.scale.Pi(a,Qs({x:(t.x+1)/2,y:(t.y+1)/2},l))}getHighlight(){return this.an}setHighlight(t){return this.an=es(t),this.backgroundElement.setHighlight(t),this.D.R("highlightchange",{highlight:this.an}),this}}const Vr=t=>"setBackground"in t;class Or extends Er{constructor(t,i,s,e,h,r,n,o,a,l,c){super(),this.S=0,this.vn=1,this.yn=!0,this.pn=new hh,this.mn=!0,this.dt=!1,this.D=new zt,this.axisScale=e,this.renderingScale=h,this.Sn=n,this.bn=o,this.xn=a,this.bt=l,this.Mn=i,this.wn=s,this._n=this.Mn.Ge(this.renderingScale),this.D.Nt(this._n),this._t=c,this.Cn=this.xn.setDirection(this.bn).kn(this.wn,this.renderingScale,r,ui,this._t,!1).setOrigin(Pi(this.bn)),this.D.$t(this.Cn),this.axis=t,this.setPointerEvents(!1),"major"===this.Cn.Tn?this._n.Ne(c.xAxisNumericTicks.majorTickStyle.gridStrokeStyle):"minor"===this.Cn.Tn?this._n.Ne(c.xAxisNumericTicks.minorTickStyle.gridStrokeStyle):"other"===this.Cn.Tn&&this._n.Ne(c.cursorGridStrokeStyleX)}setValue(t){return this.S=t,this.wn.Ls(),this.D.R("valuechange",{value:this.S}),this}getValue(){return this.S}setTextFormatter(t){return this.Fn=t,this.wn.Ls(),this}setTickLength(t){return this.Cn.setPointerLength(t),this.Mn.Ls(),this}getTickLength(){return this.Cn.getPointerLength()}setTickLabelPadding(t){return this.Cn.setTickLabelPadding(t),this.Mn.Ls(),this}setTickLabelRotation(t){return this.Cn.setTextRotation(t),this.Mn.Ls(),this}getTickLabelRotation(){return this.Cn.getTextRotation()}getTickLabelPadding(){return this.Cn.getTickLabelPadding()}setGridStrokeLength(t){return this.vn=t,this.Mn.Ls(),this}getGridStrokeLength(){return this.vn}setGridStrokeStyle(t){return this._n.Ne(t),this.Mn.Ls(),this}getGridStrokeStyle(){return this._n.In()}dispose(){return this.dt||(this.dt=!0,this._n.dispose(),this.Cn.dispose(),this.bt(this),this.Mn.St.Ls(),this.D.R("dispose",{})),this}setMarkerVisible(t){return this.yn=t,this.wn.Ls(),this}getMarkerVisible(){return this.yn}setMarker(t){return t(this.Cn),this.wn.Ls(),this}getMarker(){return this.Cn}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}setAllocatesAxisSpace(t){return this.mn=t,this.wn.Ls(),this}getAllocatesAxisSpace(){return this.mn}isInScale(){return Ls(this.S,this.axisScale.getInnerStart(),this.axisScale.getInnerEnd())}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Nr extends Or{constructor(t,i,s,e,h,r,n,o,a,l,c){super(t,i,s,e,h,r,n,o,c,a,l),this.Pn=!1,this.bt=a,this.Mn=i,this.wn=s}dispose(){return this.Pn=!1,super.dispose()}update(){return this}plot(t,i,s,e,h){if(this.isInScale()&&this.getVisible()&&t){this.Pn=!1;const t=nt(this.S,this.axisScale,this.Sn.getWidth(this.renderingScale));this._n.setVisible(!0).Ue(this.Sn.toPoint(t,i)).$e(this.Sn.toPoint(t,i-(e+s*this.vn))),this.yn?(this.Fn&&this.Cn.setText(this.Fn(this.S,this)),this.Cn.setVisible(!0).setPosition(this.Sn.toPoint(t,h))):this.Cn.setVisible(!1)}else this._n.setVisible(!1),this.Cn.setVisible(!1);return this.Cn.hr().Le(),this}Ln(){this.yn?(this.Fn&&this.Cn.setText(this.Fn(this.S,this)),this.Cn.setVisible(!0)):this.Cn.setVisible(!1);const t=this.Cn.hr().getSize();return this.Sn.getHeight(t)}}const Gr={Bn:"X0Z1bGxBY2Nlc3M=",Dn:"X0Jhc2VDaGFydHM=",En:"RGF0YSBHcmlk",Rn:"X0hhc0hhcmRFeHBpcmF0aW9u",zn:"X0lzVHJpYWw=",Vn:"X0lzQ29tbXVuaXR5",On:"T0hMQyBTZXJpZXM=",Nn:"QmFyIENoYXJ0",Gn:"c2xpY2VkIGNoYXJ0cw==",$n:"R2F1Z2UgQ2hhcnQ=",Un:"U3BpZGVyIENoYXJ0",Yn:"UG9sYXIgQ2hhcnQ=",Hn:"M0QgQ2hhcnQ=",Xn:"Wm9vbSBCYW5kIENoYXJ0",Wn:"TWFwIENoYXJ0",jn:"WFkgQ2hhcnQ=",Zn:"WFkgU2VyaWVz",Qn:"SGVhdG1hcCBTZXJpZXM=",Jn:"RmlndXJlIFNlcmllcw==",Kn:"bG9nYXJpdGhtaWMgYXhpcw==",qn:"cmVhbC10aW1lIHZpc3VhbGl6YXRpb24=",io:"aW5kaXZpZHVhbCBwb2ludCBzaXpl",so:"aW5kaXZpZHVhbCBwb2ludCBjb2xvcg==",eo:"VHJlZU1hcCBDaGFydA==",ho:"UGFyYWxsZWwgQ29vcmRpbmF0ZSBDaGFydA==",ro:"X1B5dGhvbkxpY2Vuc2U="},$r=(t,i)=>t.setTextFillStyle(i.uiTextFillStyle).setTextFont(i.uiTextFont),Ur=(t,i)=>(Wi(t.setButtonSize(i.uiButtonSize),i,!1,{fill:i.uiButtonFillStyle}),t),Yr=(t,i,s)=>{s&&Vr(t)&&t.setBackground((t=>t.setFillStyle(i.uiBackgroundFillStyle).setStrokeStyle(i.uiBackgroundStrokeStyle))).setEffect(!0)},Hr={uiElement:void 0,stylers:t.List(),addStyler(t){return{...this,stylers:this.stylers.push(t)}},applyStylers(t,i){return this.stylers.forEach((s=>void 0!==s?s(t,i):void 0)),t}},Xr={background:void 0,setBackground(t){return{...this,background:t}}},Wr={kn(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,e,h),h);return Yr(n,h,r),n}},jr={kn(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.background,e,h),h);return Yr(n,h,r),n}};class Zr extends Rr{constructor(){super(...arguments),this.no=!0}Le(){return super.Le(),this}setPointerEvents(t){return this.no=t,this}getPointerEvents(){return this.no}rn(){return[]}}class Qr extends Zr{un(t){return this.size=t,this}dn(){return 0}fn(){return 0}gn(){return 0}An(){return 0}setHighlight(t){return this}getHighlight(){return 0}setFillStyle(){return this}getFillStyle(){return V}setStrokeStyle(){return this}getStrokeStyle(){return Wt}setStrokeThickness(){return this}getStrokeThickness(){return 0}}class Jr{constructor(t){this.oo=new Map,this.St=t}bs(t,i,s){const e=s.animationEnabled;this.oo.set(t,{applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:e,curAnimatedHighlightValue:0});const h=()=>{this.oo.delete(t),t.removeEventListener("dispose",h)};ni.requestAnimationFrame((()=>{t.addEventListener("dispose",h)}))}ao(t,i){let s=i.animationEnabled;const e=[],h=()=>{e.forEach((t=>{this.oo.delete(t)})),t.removeEventListener("dispose",h)};return ni.requestAnimationFrame((()=>{t.addEventListener("dispose",h)})),{lo:(t,i)=>{const h={applyHighlight:i,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:s,curAnimatedHighlightValue:0};e.push(t),this.oo.set(t,h)},co:()=>{e.forEach((t=>{this.oo.delete(t)})),e.length=0},uo:t=>{s=t,e.forEach((t=>{this.zs(t,s)}))},do:()=>s}}Rs(t,i){const s=this.oo.get(t);s&&(s.curUnanimatedHighlightValue=es(i),this.St.Ls())}Cs(t,i=!1){const s=this.oo.get(t);return s?i?s.curAnimatedHighlightValue:s.curUnanimatedHighlightValue:0}zs(t,i){const s=this.oo.get(t);s&&(s.animationEnabled=i)}Vs(t){const i=this.oo.get(t);return!!i&&i.animationEnabled}hr(t){let i=!1;this.oo.forEach(((s,e)=>{let h;if(s.animationEnabled){const e=1e3;if(s.curUnanimatedHighlightValue>0){const r=s.curAnimationPositionMillis/e;h=s.curUnanimatedHighlightValue*Math.abs(Math.sin(r*Math.PI/2+.5));const n=0===s.curAnimatedHighlightValue?1:t;s.curAnimationPositionMillis+=n,i=!0}else s.curAnimatedHighlightValue>0&&0===s.curUnanimatedHighlightValue?(h=Math.max(s.curAnimatedHighlightValue-t/e,0),i=i||h>0):h=0,s.curAnimationPositionMillis=0}else h=s.curUnanimatedHighlightValue;h!==s.curAnimatedHighlightValue&&(s.applyHighlight(h),s.curAnimatedHighlightValue=h)})),i&&this.St.Ls(!0)}}const Kr=new Map,qr=(t,i)=>{const s=t.getSize(),e=t.getFamily(),h=t.getWeight(),r=t.getStyle(),n=t.getVariant(),o=`${r} ${n?"small-caps":"normal"} ${h} ${s}px ${e}`,a=`${o} ${i.toFixed(2)}`;let l=Kr.get(a);return l||(l=((t,i,s,e)=>({font:t,properties:i,dpr:s,id:e}))(o,{type:"font",size:s,family:e,style:r,variant:n,weight:h},i,a),Kr.set(a,l)),l},tn=t=>({container:t.en,setMouseStyle:(i,s)=>t.tn(i,s),restoreMouseStyle:i=>t.sn(i),clearMouseStyle:()=>t.fo(),captureFrame:(i,s,e)=>t.Ao(i,s,e),renderFrame:(i,s,e=!1)=>t.vo(i,s,e),layout:()=>{t.yo(),t.po(),t.So.mo(),t.Ls()},setBackgroundFillStyle(i){return t.setBackgroundFillStyle(i),this},setBackgroundStrokeStyle(i){return t.setBackgroundStrokeStyle(i),this},getBackgroundFillStyle:()=>t.getBackgroundFillStyle(),getBackgroundStrokeStyle:()=>t.getBackgroundStrokeStyle(),addCustomIcon:(i,s)=>t.bo(i,s),addEventListener:(i,s,e)=>t.V(i,s,e),removeEventListener:(i,s)=>t.N(i,s)}),sn=[];let en;const hn=()=>{if(void 0!==en){const t=ni.getComputedStyle(ni.document.body),i=Number(t.getPropertyValue("margin-top").replace("px",""))+Number(t.getPropertyValue("margin-bottom").replace("px",""));en.style.height=ni.innerHeight-i+"px",(()=>{for(let t=0;t<sn.length;t+=1)sn[t]()})()}},rn=new $({color:m(255,255,255)}),nn={font:qr(nh,0),fillStyle:rn,lineStyle:new vh({fillStyle:rn,thickness:1}),pointStyle3D:new Ah.Triangulated};class on{constructor(t,i,s){this.ot=rt.d2({scaleXYConstructor:be}),this.xo=new Map,this.Mo=Gt((()=>this.Ls()),60),this.wo=r(0,0),this._o=!1,this.Co=ui,this.ko=()=>{},this.To=[],this.Fo=-1,this.Io=[],this.dt=!1,this.Po=!1,this.Lo=t=>{t.dataTransfer&&t.dataTransfer.setDragImage(new Image,0,0)},this.Bo=new Map,this.Do=(t,i)=>{var s,e,h;const r=i instanceof PointerEvent&&i,n=Vt(i)?{clientX:i.changedTouches[0].clientX,clientY:i.changedTouches[0].clientY}:{clientX:i.clientX,clientY:i.clientY};if(r){if(!r.pointerType)return;this.Eo=i}const o=this.Is({x:n.clientX,y:n.clientY});if(("pointermove"===t||"pointerenter"===t)&&o&&r){const t=this.Bo.get(r.pointerId);let e=t;e||(e={lastEvent:r,entity:o.entity,collectionMember:o.collectionMember,info:o.info},this.Bo.set(r.pointerId,e));const h=void 0===t||t.entity!==o.entity||t.collectionMember!==o.collectionMember;h&&t&&t.entity.R("pointerleave",i,t.collectionMember,t.info),h&&o&&o.entity.R("pointerenter",i,o.collectionMember,o.info),o&&(o.entity.R("pointermove",i,o.collectionMember,o.info),this.en.draggable=null!==(s=o.entity.At)&&void 0!==s&&s),e.lastEvent=r,e.entity=o.entity,e.collectionMember=o.collectionMember,e.info=o.info}else if("pointerleave"===t&&r){const t=this.Bo.get(r.pointerId);t&&(t.entity.R("pointerleave",i,t.collectionMember,t.info),this.Bo.delete(r.pointerId))}else if("click"===t&&r){const t=(null===(e=this.Ro)||void 0===e?void 0:e.event)instanceof PointerEvent&&this.Ro.event.pointerId===r.pointerId&&this.Ro;t&&t.entity.R("click",r,t.collectionMember,t.info)}else if("dblclick"===t&&i instanceof MouseEvent){const t="click"===(null===(h=this.Ro)||void 0===h?void 0:h.event.type)&&this.Ro;t&&t.entity.R("dblclick",i,t.collectionMember,t.info)}else{const s=i instanceof PointerEvent?this.Bo.get(i.pointerId):o;null==s||s.entity.R(t,i,s.collectionMember,s.info)}i&&o&&(this.Ro={...o,event:i})},this.po=()=>{const{bottom:t,left:i}=this.en.getBoundingClientRect();return this.wo=r(Math.floor(i),Math.floor(t)),this.zo=ni.performance.now(),this},this.yo=()=>{this.Vo&&this.Vo()},this.tn=(t,i)=>{if(void 0!==i){const s=this.Io.find((t=>t[0]===i));return s&&(s[1]=t,this.Io.indexOf(s)===this.Io.length-1&&(this.en.style.cursor=t)),i}const s=this.Fo;return this.Fo+=1,this.Io.push([s,t]),this.en.style.cursor=t,s},this.sn=t=>{var i;const s=this.Io.find((i=>i[0]===t));if(s){const t=this.Io.indexOf(s),e=t===this.Io.length-1;if(this.Io.splice(t,1),e){const t=(null===(i=this.Io[this.Io.length-1])||void 0===i?void 0:i[1])||"default";this.en.style.cursor=t}}},this.Oo=t=>(this.No._(t),this),this.Go=()=>this.No.C(),this.$o=()=>{this.Co&&this.Co(1e3/60),this.Uo(),this.Yo(),this.ko&&this.ko()},this.Ho=t=>(this.xo.set(t.Xo(),t),this.xo=new Map([...this.xo.entries()].sort(((t,i)=>t[0]-i[0]))),t),this.Wo=t=>(this.xo.delete(t),this),this.H=()=>(this.No.o=!1,this),this.X=()=>(this.No.o=!0,this),this.jo=()=>this.Eo,this.D=new zt,this.So=t,this._t=i.theme,this.Zo=s.Zo,this.Qo=s.Jo,this.Ko={Qs:i&&void 0!==i.resourcesBaseUrl&&null!==i.resourcesBaseUrl?i.resourcesBaseUrl:void 0,qo:!i||!("warnings"in i)||"boolean"!=typeof i.warnings||i.warnings,ta:(()=>{const t=null==i?void 0:i.pickingPrecision;if("string"==typeof t){const i=t.toLowerCase();if("best"===i)return 1;if("high"===i)return.5;if("low"===i)return 1/8}return 1/4})(),ia:void 0===(null==i?void 0:i.interactable)||i.interactable,sa:void 0===i.textPixelSnappingEnabled||i.textPixelSnappingEnabled};const e=i?i.container:void 0;if(e){if("string"==typeof e){const t=ni.document.getElementById(e);if(!t)throw new Error(`Container "${e}" doesn't exist.`);this.en=t}else this.en=e;ni.addEventListener("resize",this.yo),this.To.push((()=>{ni.removeEventListener("resize",this.yo)}))}else{if(void 0===en){const t=ni.document.createElement("div");t.id="lcjs-auto-flexbox",t.style.position="relative",t.style.width="100%",t.style.display="flex",t.style.flexDirection="column",ni.document.body.appendChild(t),en=t,ni.addEventListener("resize",hn)}let t=1;for(;null!==ni.document.getElementById(`chart-${t}`);)t+=1;this.en=ni.document.createElement("div"),this.en.id=`chart-${t}`,this.en.style.flex="1",this.en.style.height="100%",en.appendChild(this.en),hn(),sn.push(this.yo),this.To.push((()=>{en&&en.removeChild(this.en),sn.includes(this.yo)&&sn.splice(sn.indexOf(this.yo),1),0===sn.length&&en&&(ni.document.body.removeChild(en),en=void 0,ni.removeEventListener("resize",hn))}))}if(ni.ResizeObserver){const t=t=>{for(const i of t)i.target===this.en&&this.yo()};this.ea=new ni.ResizeObserver(t.bind(this)),this.ea.observe(this.en)}const h=ni.getComputedStyle(this.en)||this.en.style;""!==h.position&&"static"!==h.position||(this.en.style.position="relative"),""===h.boxSizing&&(this.en.style.boxSizing="content-box"),!1!==this.Ko.ia&&""===h.touchAction&&(this.en.style.touchAction="none"),this.en.addEventListener("fullscreenchange",this.yo),this.en.addEventListener("webkitfullscreenchange",this.yo),this.en.addEventListener("dragstart",this.Lo);const n=i?i.maxFps:void 0;this.ha=n?-1===n?-1:0!==n?1e3/n:0:0,Object.keys(Rt).forEach((t=>{const i=i=>{this.Do(t,i)};this.en.addEventListener(t,i),this.To.push((()=>{this.en.removeEventListener(t,i)}))})),ni.addEventListener("scroll",this.po,{passive:!0}),this.No=d(new y({r:0,g:0,b:0,a:0})),this.xs=new Jr(this)}ra(t,i){const s=Array.from(this.Bo.values()).find((i=>i.entity===t.entity&&(void 0===t.collectionMember||t.collectionMember===i.collectionMember)));s&&(s.entity=i.entity,s.collectionMember=i.collectionMember)}It(t,i=void 0){const s=Array.from(this.Bo.values()).find((s=>s.entity===t&&(void 0===i||i===s.collectionMember)));s&&(t.R("pointerleave",s.lastEvent,s.collectionMember,s.info),this.Bo.delete(s.lastEvent.pointerId))}na(){this.Po=!0,this.Co=void 0,this.ko=void 0}fo(){this.Io.length=0,this.en.style.cursor="unset"}oa(){return this.aa}la(){return this.ca}setBackgroundFillStyle(t){return this.ua.Ie(t),this.Ls(),this}getBackgroundFillStyle(){return this.ua.$h()}setBackgroundStrokeStyle(t){return this.ua.Fe(t),this.Ls(),this}getBackgroundStrokeStyle(){return this.ua.da()}fa(t){return this.ko=t,this}Aa(t){return this.Co=t,this}ga(t){return this.xo.get(t)}va(){return Array.from(this.xo.keys()).reverse().reduce(((t,i)=>i!==Number.MAX_SAFE_INTEGER&&i>t?i:t),0)+1}G(){if(!this.dt){if(this.dt=!0,this.xo)for(const t of this.xo.values())t.G();this.Co=void 0,this.ko=void 0,ni.removeEventListener("scroll",this.po),this.en.removeEventListener("fullscreenchange",this.yo),this.en.removeEventListener("webkitfullscreenchange",this.yo),this.en.removeEventListener("dragstart",this.Lo),this.ea&&(this.ea.disconnect(),this.ea=void 0),this.To.forEach((t=>{t()})),this.To.length=0}}Ee(t,i){return r(t-this.wo.x,this.wo.y-i)}ya(t,i){return r(t+this.wo.x,this.wo.y-i)}pa(t){const i=this.Ee(t.clientX,t.clientY);return{engineX:i.x,engineY:i.y}}ma(t){const i=this.ya(t.engineX,t.engineY);return{clientX:i.x,clientY:i.y}}V(t,i,s){this.D.addEventListener(t,i,s)}N(t,i){this.D.removeEventListener(t,i)}}const an=(t=1)=>({type:"horizontalProgressive",packager:(i,s,e)=>{if(i.length>1){const h=Ws(s,e*t),n=Math.abs(h.x),o=i.length,a=[];let l=0,c=0,u=i[0].x+n;for(;c<o;){const t=i[c];if(a[l]=t,l+=1,c+=1,t.x<u&&c<o){const s=c;let e=t.y,h=t.y;for(;c<o&&i[c].x<=u;)i[c].y>e&&(e=i[c].y),i[c].y<h&&(h=i[c].y),c+=1;if(s!==c){const t=(a[l-1].x+i[c-1].x)/2;a[l+0]=r(t,h),a[l+1]=r(t,e),a[l+2]=i[c-1],l+=3}}u+=n}return a}return i.slice()}}),ln=(t=1)=>({type:"horizontalRegressive",packager:(i,s,e)=>{if(i.length>1){const h=Ws(s,e*t),n=Math.abs(h.x),o=i.length,a=[];let l=0,c=0,u=i[0].x-n;for(;c<o;){const t=i[c];if(a[l]=t,l+=1,c+=1,t.x>u&&c<o){const s=c;let e=t.y,h=t.y;for(;c<o&&i[c].x>=u;)i[c].y>e&&(e=i[c].y),i[c].y<h&&(h=i[c].y),c+=1;if(s!==c){const t=(a[l-1].x+i[c-1].x)/2;a[l+0]=r(t,h),a[l+1]=r(t,e),a[l+2]=i[c-1],l+=3}}u-=n}return a}return i.slice()}}),cn=(t=1)=>({type:"verticalProgressive",packager:(i,s,e)=>{if(i.length>1){const h=Ws(s,e*t),n=Math.abs(h.y),o=i.length,a=[];let l=0,c=0,u=i[0].y+n;for(;c<o;){const t=i[c];if(a[l]=t,l+=1,c+=1,t.y<u&&c<o){const s=c;let e=t.x,h=t.x;for(;c<o&&i[c].y<=u;)i[c].x>e&&(e=i[c].x),i[c].x<h&&(h=i[c].x),c+=1;if(s!==c){const t=(a[l-1].y+i[c-1].y)/2;a[l+0]=r(h,t),a[l+1]=r(e,t),a[l+2]=i[c-1],l+=3}}u+=n}return a}return i.slice()}}),un=(t=1)=>({type:"verticalRegressive",packager:(i,s,e)=>{if(i.length>1){const h=Ws(s,e*t),n=Math.abs(h.y),o=i.length,a=[];let l=0,c=0,u=i[0].y-n;for(;c<o;){const t=i[c];if(a[l]=t,l+=1,c+=1,t.y>u&&c<o){const s=c;let e=t.x,h=t.x;for(;c<o&&i[c].y>=u;)i[c].x>e&&(e=i[c].x),i[c].x<h&&(h=i[c].x),c+=1;if(s!==c){const t=(a[l-1].y+i[c-1].y)/2;a[l+0]=r(h,t),a[l+1]=r(e,t),a[l+2]=i[c-1],l+=3}}u-=n}return a}return i.slice()}});class dn extends Dt{constructor(t,i,s,e){super(t,s,e),this.cn=0,this.Ys=i,this.Ys.Sa=!0}ba(){}xa(t){return this.cn===t||(this.cn=t,this.Ys.Sa=!0),this}Ma(){return this.cn}}class fn extends dn{constructor(t,i,s,e,h){super(t,i,e,h),this.wa=!0,this.ot=s}}const An=(t,i,s)=>{if(s instanceof be){const e=s.hs(),h=Qs(i,{x:Math.abs(e.x),y:Math.abs(e.y)});return c(r(t.min.x-h.x,t.min.y-h.y),r(t.max.x+h.x,t.max.y+h.y))}return c(s.Pi(r(t.min.x,t.min.y),Ws(i,-1)),s.Pi(r(t.max.x,t.max.y),i))},gn=(t,i)=>"function"==typeof i?i(t):i,vn=(t,i)=>!t||t!==i,yn=(t,i)=>t===V&&i!==V,pn=t=>t!==V;class mn extends fn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Ce=nn.fillStyle,this.St=t}Ie(t){return this.Ce=gn(this.Ce,t),this}$h(){return this.Ce}_a(){return vn(this.Ca,this.Ce)}ka(){return yn(this.Ca,this.Ce)}Ta(){return pn(this.Ce)}Fa(t){this.Ca=t}}class Sn extends mn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.ke=nn.lineStyle,this.St=t}Fe(t){return this.ke="function"==typeof t?t(this.ke):t,this}da(){return this.ke}Ia(){return!this.Pa||this.Pa!==this.ke}La(t){return!this.Pa||this.Pa.getThickness()!==t}Ta(){return this.ke!==Wt||super.Ta()}ka(){return(this.ke!==Wt||this.Ce!==V)&&this.Pa===Wt&&this.Ca===V}Ba(t){this.Pa=t}}class bn extends mn{constructor(t,i,s,e,h,r=d(5)){super(t,i,s,e,h),this.size=d(5),this.size=r}Z(t){return this.size._(t),this}}class xn extends mn{constructor(t,i,s,e,h,n=d(nn.font)){super(t,i,s,e,h),this.Da=d(""),this.Ea=!1,this.Ra={x:1,y:-1},this.za=d(r(0,0)),this.Va=d(0),this.Oa=d(0),this.Na=d(r(0,0)),this.Ga=d(0),this.$a=d(nh),this.Ua=r(0,0),this.oi=d(f(1,1,1,1)),this.nn=d(A(4,4,4,4)),this.font=d(nn.font),this.Ya=!1,this.font=n}Ta(){return pn(this.Ce)&&this.Da.C().length>0}ka(){return!1===this.Ya&&this.Ta()}Sr(t){return this.Da._(t),this}wr(){return this.Da.C()}Xh(t){return rh(t)?this.$a._(t):this.$a._(t(this.$a.C())),this}Hh(){return this.$a.C()}Ha(t){return this.$a._(this.$a.C().setFamily(t)),this}Xa(){return this.$a.C().getFamily()}Wa(t){return this.$a._(this.$a.C().setSize(t)),this}ja(){return this.$a.C().getSize()}Za(t){return this.$a._(this.$a.C().setWeight(t)),this}Qa(){return this.$a.C().getWeight()}Ja(t){return this.$a._(this.$a.C().setStyle(t)),this}Ka(){return this.$a.C().getStyle()}qa(t){return this.$a._(this.$a.C().setVariant(t)),this}tl(){return this.$a.C().getVariant()}Be(t){return this.za._(t),this}il(){return this.za.C()}Wh(t){return this.Ga._(t),this}jh(){return this.Ga.C()}mr(t){return this.sl=t,this}el(){return this.sl}hl(t,i){return this.Na._(r(t,i)),this}rl(){return this.Na.C()}nl(t){return this.Oa._(t),this}ol(){return this.Oa.C()}al(){return{x:this.Oa.C(),y:this.Va.C()}}ll(t){return this.Va._(t),this}cl(){return this.Va.C()}ul(t){return this.Oa._(t.x),this.Va._(t.y),this}$r(t){return this.oi._(t),this}dl(){return this.oi.C()}Ur(t){return this.nn._(t),this}fl(){return this.nn.C()}}class Mn extends bn{constructor(t,i,s,e,h,r=5){super(t,i,s,e,h,d(r)),this.Al=[],this.vl=d(Oe.Square),this.Ga=d(0),this.yl=d(!1),this.pl=d(!1),this.ml=d(!1),this.Sl=Ms,this.bl=0,this.xl=[],this.Ml=0,this.wl=Ms,this._l=!1,this.Cl=void 0}kl(){return this.xl}Tl(){return this.Al}Fl(t){return this.vl._(t),this}Il(){return this.vl.C()}Wh(t){return this.Ga._(t),this}jh(){return this.Ga.C()}Pl(t){return this.yl._(t),this}Ll(t){return this.pl._(t),this}Bl(t){return this.ml._(t),this}Dl(t,i){return Array.isArray(t)||(t=[t]),this.Ml+=t.length,this.xl=Ui(this.xl,t,{canReturnB:!0}),this.wl&&(this.wl=i?Os(this.wl,i):void 0),this.Cl=void 0,this}ti(){return this._l=!0,this.Al.length=0,this.bl=0,this.Sl=Ms,this.xl=[],this.Ml=0,this.Cl=void 0,this}El(){return this.bl}Rl(){return this.Ml}}class wn extends Sn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.za=d(r(0,0)),this.Y=d(r(100,100)),this.Ga=d(0),this.Ua=d(r(0,0)),this.zl=!1}hr(){return this.Vl(),this}Be(t){const i=this.za.C();return t.x===i.x&&t.y===i.y||(this.za._(t),this.Vl()),this}il(){return this.za.C()}Ol(t){const i=this.za.C();return t!==i.x&&(this.za._(r(t,i.y)),this.Vl()),this}Nl(t){const i=this.za.C();return t!==i.y&&(this.za._(r(i.x,t)),this.Vl()),this}Z(t){const i=this.Y.C();return t.x===i.x&&t.y===i.y||(this.Y._(r(t.x,t.y)),this.Vl()),this}xi(){return this.Y.C()}Gl(t){const i=this.Y.C();return t!==i.x&&(this.Y._(r(t,i.y)),this.Vl()),this}$l(t){const i=this.Y.C();return t!==i.x&&(this.Y._(r(i.x,t)),this.Vl()),this}Wh(t){return this.Ga._(t),this}jh(){return this.Ga.C()}Ul(t){const i=this.Ua.C();return t===i&&i.x===t.x&&i.y===t.y||(void 0===t?(this.zl=!1,this.Vl()):(this.zl=!0,this.Ua._(t))),this}Vl(){if(!this.zl){const t=this.za.C(),i=this.Y.C(),s=r(t.x+i.x/2,t.y+i.y/2),e=this.Ua.C();s.x===e.x&&s.y===e.y||this.Ua._(s)}}}class _n extends Sn{constructor(){super(...arguments),this.Al=[],this.za=d(r(0,0)),this.Sl=Ms,this.Yl=!1}Hl(t){return t=Vi(t),this.Al=t,this.Yl=!0,this}Xl(){return this.Al}jt(){return this.Sl.max.x}Wt(){return this.Sl.min.x}Qt(){return this.Sl.max.y}Zt(){return this.Sl.min.y}Wl(){return 0}jl(){return 0}}class Cn extends _n{}class kn extends mn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Zl=new Array,this.Ql=new Array,this.Jl=d({type:"disabled",packager:(t,i,s)=>t.slice()}),this.Sl=Ms,this.Kl=0,this.ql=!1,this.xl=[Array(),Array()],this.tc=!1,this.sc=(new $).setColor(m(42,171,240)),this._l=!1,this.hc=!1,this.rc=!1}Dl(t,i){const s=this.Kl-1,e=s>0&&!this.tc;let[h,n]=e?[[this.Zl[s]],[this.Ql[s]]]:[[],[]];if(t instanceof Array){const[i,s]=l(t);h=Ui(h,i,{canReturnB:!0}),n=Ui(n,s,{canReturnB:!0})}else{const i=t.position;h.push(r(i,t.high)),n.push(r(i,t.low))}return this.tc?(this.xl[0]=Ui(this.xl[0],h,{canReturnB:!0}),this.xl[1]=Ui(this.xl[1],n,{canReturnB:!0})):(this.xl=[h,n],this.tc=!0),this.Sl=Os(this.Sl,i||Os(zs(h),zs(n))),this}ti(){return this._l=!0,this.Zl.length=0,this.Ql.length=0,this.Kl=0,this.Sl=Ms,this}Tl(){return[this.Zl,this.Ql]}kl(){return[this.xl[0],this.xl[1]]}nc(t){return this.Jl._(t),this}oc(){return this.Jl.C()}ac(t){return this.sc="function"==typeof t?t(this.sc):t,this}lc(){return this.sc}El(){return this.Kl-(Number(this.hc)+Number(this.rc))}Rl(){return this.xl.length}cc(t){return this.hc=t,this}uc(){return this.hc}dc(t){return this.rc=t,this}fc(){return this.rc}ka(){return this.Ca===V&&this.Ac===V&&(this.Ce!==V||this.sc!==V)}gc(t){this.Ac=t}Ta(){return this.sc!==V||super.Ta()}_a(){return super._a()||!this.Ac||this.Ac!==this.sc}}class Tn extends Sn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.za=d(r(0,0)),this.vc=d(0),this.Yi=d(360),this.yc=d(100),this.mc=d(100),this.Sc=d(0),this.bc=d(void 0),this.xc=r(0,0),this.Mc=r(0,0),this.wc=r(0,0)}_c(){return this.yc.C()}Cc(){return this.mc.C()}il(){return this.za.C()}kc(){return this.vc.C()}Ui(){return this.Yi.C()}Tc(){return this.Sc.C()}Fc(){return this.bc.C()}Ic(){return this.xc}Pc(){return this.Mc}Lc(){return this.wc}Be(t){return this.za._(t),this}Bc(t){return this.vc._(t),this}$e(t){return this.Yi._(t),this}Dc(t){return this.mc._(t),this.yc._(t),this}Ec(t){return this.yc._(t),this}Rc(t){return this.mc._(t),this}zc(t){return this.Sc._(t<0?0:t),this}Vc(t){return this.bc._(void 0!==t&&t<=0?void 0:t),this}}var Fn;!function(t){t[t.Complex=0]="Complex",t[t.Simple=1]="Simple"}(Fn||(Fn={}));const In=(t,i)=>"function"==typeof i?i(t):i,Pn=(t,i)=>!t||t!==i,Ln=(t,i)=>!t||t.getThickness()!==i,Bn=(t,i)=>t===Wt&&i!==Wt,Dn=t=>t!==Wt&&t.getFillStyle()!==V;class En extends fn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Oc=nn.lineStyle,this.engine=t}Ne(t){return this.Oc=In(this.Oc,t),this}In(){return this.Oc}Ia(){return Pn(this.Nc,this.Oc)}Gc(t){return Ln(this.Nc,t)}ka(){return Bn(this.Nc,this.Oc)}Ta(){return Dn(this.Oc)}$c(t){this.Nc=t}}class Rn extends En{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Xi=r(0,0),this.Yi=r(0,0),this.Uc=!1}_({min:t,max:i}){return t.x===this.Xi.x&&t.y===this.Xi.y&&i.x===this.Yi.x&&i.y===this.Yi.y||(this.Uc=!0,this.Xi=t,this.Yi=i),this}Hi(){return this.Xi}Ui(){return this.Yi}Ue(t){return t.x===this.Xi.x&&t.y===this.Xi.y||(this.Uc=!0,this.Xi=t),this}$e(t){return t.x===this.Yi.x&&t.y===this.Yi.y||(this.Uc=!0,this.Yi=t),this}}class zn extends En{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Yc=void 0,this.Hc=0}}class Vn extends En{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Xc=[],this.Sl=Ms,this.xl=new Array,this.bl=0,this._l=!1,this.Wc=d(void 0),this.hc=!1,this.rc=!1}jc(t){return this.Wc._(t),this}Zc(){return this.Wc.C()}kl(){return this.xl}Tl(){return this.Xc}ti(){return this._l=!0,this.Xc.length=0,this.bl=0,this.xl=[],this.Sl=Ms,this}El(){return this.bl-(Number(this.hc)+Number(this.rc))}Rl(){return this.xl.length}cc(t){return this.hc=t,this}uc(){return this.hc}dc(t){return this.rc=t,this}fc(){return this.rc}}class On extends Rr{constructor(){super(...arguments),this.an=0}getHighlight(){return this.an}setHighlight(t){return this.an=t,this.rn().forEach((i=>i.Bt(t))),this.D.R("highlightchange",{highlight:t}),this.Ys.Ls(),this}}class Nn extends On{}class Gn extends Nn{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Ys=t,this.vl=this.Ys.Qc(this.renderingScale,Fn.Simple).setVisible(!1).Ie(V).Fe(Wt),this.D.Nt(this.vl)}Jc(){const t=this.Kc();if(t.length>2){const i=zs(t),s=r(i.max.x-i.min.x,i.max.y-i.min.y);this.setContentSize(s);const e=t.map((t=>{const e=js(t,Ws(i.min,-1));return this.scale.Pi(this.position,js(e,Qs(Ws(js(this.origin,r(1,1)),-.5),s)))})).map((t=>ot(t,this.scale,this.renderingScale)));this.vl.Hl(e).setVisible(this.getVisible()).setVisible(this.getVisible())}else this.vl&&this.vl.setVisible(!1),this.setContentSize(r(0,0))}Le(){return super.Le(),this.dt||(this.Jc(),void 0!==this.cn&&this.vl.xa(this.cn)),this}hr(){return this.Jc(),super.hr()}setVisible(t){return super.setVisible(t),this.vl.setVisible(t),this}}class $n{constructor(t){this.qc=0,this.tu=0,this.iu=0,this.su=!1,this.eu=!0,this.hu=!1,this.ru={warningDisplayed:!1,expandEvents:[]},this.D=new zt,this.eu=!t||void 0===t.autoSortingEnabled||t.autoSortingEnabled,void 0!==(null==t?void 0:t.dataPattern)&&(this.nu={userSpecified:null===t.dataPattern?void 0:t.dataPattern}),this.ou=void 0!==(null==t?void 0:t.lookupValues)&&t.lookupValues,this.au=void 0!==(null==t?void 0:t.colors)&&t.colors,this.lu=void 0!==(null==t?void 0:t.ids)&&t.ids,this.cu=void 0!==(null==t?void 0:t.sizes)&&t.sizes,this.uu=void 0!==(null==t?void 0:t.rotations)&&t.rotations,this.du=(null==t?void 0:t.dataStorage)?t.dataStorage:Float64Array,this.fu=!1!==(null==t?void 0:t.allowInputModification),this.Au=void 0===(null==t?void 0:t.includesNaN)||t.includesNaN}add(t){return Array.isArray(t)?this.appendJSON(t,{x:"x",y:"y"}):this.appendSample(t),this}addArraysXY(t,i){return this.appendSamples({xValues:t,yValues:i}),this}appendJSON(t,i={x:"x",y:"y"}){const s=t.length,e=i.x,h=i.y,r=i.lookupValue,n=i.size,o=i.rotation,a=i.color,l=i.id;let c,u,d,f,A,g,v;if(e){c=new this.du(s);const i=t[0]&&t[0][e]instanceof Date,h=t[0]&&Qn(t[0][e]);if(!h&&t[0]&&"string"==typeof t[0][e])throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(h)for(let i=0;i<s;i+=1){const s=t[i];c[i]=new Date(s[e]).getTime()}else if(i)for(let i=0;i<s;i+=1){const s=t[i];c[i]=s[e].getTime()}else for(let i=0;i<s;i+=1){const s=t[i];c[i]=s[e]}}if(h){u=new this.du(s);const i=t[0]&&t[0][h]instanceof Date,e=t[0]&&Qn(t[0][h]);if(!e&&t[0]&&"string"==typeof t[0][h])throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(e)for(let i=0;i<s;i+=1){const s=t[i];u[i]=new Date(s[h]).getTime()}else if(i)for(let i=0;i<s;i+=1){const s=t[i];u[i]=s[h].getTime()}else for(let i=0;i<s;i+=1){const s=t[i];u[i]=s[h]}}if(r){d=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];d[i]=s[r]}}if(a){f=[];for(let i=0;i<s;i+=1){const s=t[i];f[i]=s[a]}}if(l){A=new Uint32Array(s);for(let i=0;i<s;i+=1){const s=t[i];A[i]=s[l]}}if(n){g=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];g[i]=s[n]}}if(o){v=new Float32Array(s);for(let i=0;i<s;i+=1){const s=t[i];v[i]=s[o]}}return this.appendSamples({xValues:c,yValues:u,ids:A,colors:f,lookupValues:d,sizes:g,rotations:v,start:i.start,step:i.step}),this}appendSample(t){const{samplesCacheX:i,samplesCacheY:s,samplesCacheColors:e,samplesCacheIDs:h,samplesCacheLookup:r,samplesCacheSize:n,samplesCacheRotation:o,maxSampleCount:a,dataPattern:l}=this.gu({appendCount:1}),c=this.vu(),u=void 0!==t.step?t.step:l?$e(l)?1:-1:1,d=t.x&&t.x instanceof Date&&t.x,f=t.x&&Qn(t.x)&&t.x,A=t.y&&t.y instanceof Date&&t.y,g=t.y&&Qn(t.y)&&t.y;if(!f&&"string"==typeof t.x)throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(!g&&"string"==typeof t.y)throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");const v=d?d.getTime():f?Date.parse(f):"number"==typeof t.x?t.x:c?c.x+u:0,y=A?A.getTime():g?Date.parse(g):"number"==typeof t.y?t.y:c?c.y+u:0;if(l&&this.eu&&this.yu&&this.pu&&!this.mu(l,v,y)&&!this.hu)return this.Su(this.yu,this.pu,new this.du([v]),new this.du([y]),void 0!==t.lookupValue?new Float32Array([t.lookupValue]):void 0,void 0!==t.color?this.bu((t.color,[t.color])):void 0,void 0!==t.id?new Uint32Array([t.id]):void 0,void 0!==t.size?new Float32Array([t.size]):void 0,void 0!==t.rotation?new Float32Array([t.rotation]):void 0,l),this;if(i[this.qc]=v,s[this.qc]=y,void 0!==t.lookupValue&&r&&(r[this.qc]=t.lookupValue),void 0!==t.color&&e){const i=this.bu((t.color,[t.color]));void 0!==i&&(e[this.qc]=i[0])}return void 0!==t.id&&h&&(h[this.qc]=t.id),void 0!==t.size&&n&&(n[this.qc]=t.size),void 0!==t.rotation&&o&&(o[this.qc]=t.rotation),this.D.R("change",{iDataStart:this.qc,iDataEnd:this.qc}),this.qc+=1,this.qc>a-1&&(this.qc=0,this.su=!0),this.tu=Math.min(this.tu+1,a),this.iu+=1,this}appendSamples(t){const{lookupValues:i,colors:s,ids:e,sizes:h,rotations:r,start:n,step:o}=t;let a=t.offset,l=t.count;const c=t.xValues||t.yValues;if(!c)return this;const u=c.length;if(a=void 0!==a?a:0,l=void 0!==l?l:u-a,l<=0)return this;const d=void 0!==t.offsetLookupValues?t.offsetLookupValues:a,f=void 0!==t.offsetColors?t.offsetColors:a,A=void 0!==t.offsetIds?t.offsetIds:a,g=void 0!==t.offsetSizes?t.offsetSizes:a,v=void 0!==t.offsetRotations?t.offsetRotations:a,y=this.xu(!0),[p,m]=this.Mu(l,t.xValues,"x","ProgressiveX"===y||"RegressiveX"===y||void 0===y?n:void 0,"ProgressiveX"===y||"RegressiveX"===y||void 0===y?o:void 0,a,y),[S,b]=this.Mu(l,t.yValues,"y","ProgressiveY"===y||"RegressiveY"===y?n:void 0,"ProgressiveY"===y||"RegressiveY"===y?o:void 0,a,y),x=this.bu(s),{samplesCacheX:M,samplesCacheY:w,samplesCacheLookup:_,samplesCacheColors:C,samplesCacheIDs:k,samplesCacheSize:T,samplesCacheRotation:F,maxSampleCount:I,dataPattern:P,incomingDataReplacedCache:L}=this.gu({appendCount:l,...0===m&&0===b&&0===a&&0===d&&0===f&&0===A&&0===g&&0===v?{incomingDataX:p,incomingDataY:S,incomingDataLookup:i,incomingDataIDs:e,incomingDataColors:x,incomingDataSize:h,incomingDataRotation:r}:{}});if(!L&&P&&this.eu&&this.yu&&this.pu){const t=p[m],s=S[b];if(!this.mu(P,t,s)&&!this.hu)return this.Su(this.yu,this.pu,jn(p,m,m+l),jn(S,b,b+l),jn(i,d,d+l),jn(x,f,f+l),jn(e,A,A+l),jn(h,g,g+l),jn(r,v,v+l),P),this}const B=I-this.qc,D=Math.min(l,B);if(D>0&&(L||(Xn(M,p,m,D,this.qc),Xn(w,S,b,D,this.qc),i&&_&&Xn(_,i,d,D,this.qc),e&&k&&Xn(k,e,A,D,this.qc),x&&C&&Xn(C,x,f,D,this.qc),h&&T&&Xn(T,h,g,D,this.qc),r&&F&&Xn(F,r,v,D,this.qc)),this.D.R("change",{iDataStart:this.qc,iDataEnd:this.qc+D-1}),this.qc+=D,this.qc>I-1&&(this.qc=0,this.su=!0)),this.tu=Math.min(this.tu+D,I),this.iu+=D,this.xu(),l-D>0){const t={xValues:p?jn(p,m+D,void 0):void 0,yValues:S?jn(S,b+D,void 0):void 0,lookupValues:i?jn(i,d+D,void 0):void 0,ids:e?jn(e,A+D,void 0):void 0,colors:x?jn(x,f+D,void 0):void 0,sizes:h?jn(h,g+D,void 0):void 0,rotations:r?jn(r,v+D,void 0):void 0};this.appendSamples(t)}return this}setSamples(t){return this.clear().appendSamples(t)}fill(t){const i=this.yu||this.pu;if(!i)return this;const s=i.length;if(void 0!==t.x&&(this.yu=this.yu||new this.du(s),this.yu.fill(t.x)),void 0!==t.y&&(this.pu=this.pu||new this.du(s),this.pu.fill(t.y)),void 0!==t.lookupValue&&(this.wu=this.wu||new Float32Array(s),this.wu.fill(t.lookupValue)),void 0!==t.color){const i=this.bu([t.color]);i&&(this._u=this._u||new Uint32Array(s),this._u.fill(i[0]))}return void 0!==t.size&&(this.Cu=this.Cu||new Float32Array(s),this.Cu.fill(t.size)),void 0!==t.rotation&&(this.ku=this.ku||new Float32Array(s),this.ku.fill(t.rotation)),this.D.R("clear",{}),this}alterSamples(t,i){const{xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a}=i;let l=i.offset,c=i.count;const u=s||e||h||r||n||o||a,d=u?u.length:void 0!==i.x||void 0!==i.y?1:0;if(l=void 0!==l?l:0,c=void 0!==c?c:d-l,c<=0)return this;const f=void 0!==i.offsetLookupValues?i.offsetLookupValues:l,A=void 0!==i.offsetColors?i.offsetColors:l,g=void 0!==i.offsetIds?i.offsetIds:l,v=void 0!==i.offsetSizes?i.offsetSizes:l,y=void 0!==i.offsetRotations?i.offsetRotations:l,p=this.bu(r),m=this.iu-1,S=void 0!==this.Tu?Math.max(this.iu-this.Tu,0):0,b=t+c-1,x=Math.max(t,S),M=Math.min(b,m),w=M-x+1;if(this.iu>0&&w>0){const{samplesCacheX:r,samplesCacheY:c,samplesCacheColors:u,samplesCacheIDs:d,samplesCacheLookup:m,samplesCacheSize:b,samplesCacheRotation:_}=this.gu({appendCount:0}),C=r.length;if(void 0!==this.Tu&&this.su&&this.iu%this.Tu!=0){const S=this.iu-this.iu%this.Tu,w=this.iu-1,k=this.iu-this.tu,T=S-1,F=Math.max(x,k),I=Math.min(M,T)-F+1;if(I>0){const S=F-t,x=Un(F,this.iu,C,this.qc);if(void 0!==i.x)for(let t=x;t<x+I;t+=1)r[t]=i.x;if(void 0!==i.y)for(let t=x;t<x+I;t+=1)c[t]=i.y;s&&Xn(r,s,l+S,I,x),e&&Xn(c,e,l+S,I,x),h&&m&&Xn(m,h,f+S,I,x),n&&d&&Xn(d,n,g+S,I,x),p&&u&&Xn(u,p,A+S,I,x),o&&b&&Xn(b,o,v+S,I,x),a&&_&&Xn(_,a,y+S,I,x)}const P=Math.max(x,S),L=Math.min(M,w)-P+1;if(L>0){const S=P-t,x=Un(P,this.iu,C,this.qc);if(void 0!==i.x)for(let t=x;t<x+L;t+=1)r[t]=i.x;if(void 0!==i.y)for(let t=x;t<x+L;t+=1)c[t]=i.y;s&&Xn(r,s,l+S,L,x),e&&Xn(c,e,l+S,L,x),h&&m&&Xn(m,h,f+S,L,x),n&&d&&Xn(d,n,g+S,L,x),p&&u&&Xn(u,p,A+S,L,x),o&&b&&Xn(b,o,v+S,L,x),a&&_&&Xn(_,a,y+S,L,x)}}else{const t=x-S;if(void 0!==i.x)for(let s=t;s<t+w;s+=1)r[s]=i.x;if(void 0!==i.y)for(let s=t;s<t+w;s+=1)c[s]=i.y;e&&Xn(c,e,l,w,t),s&&Xn(r,s,l,w,t),e&&Xn(c,e,l,w,t),h&&m&&Xn(m,h,f,w,t),n&&d&&Xn(d,n,g,w,t),p&&u&&Xn(u,p,A,w,t),o&&b&&Xn(b,o,v,w,t),a&&_&&Xn(_,a,y,w,t)}this.D.R("clear",{})}const _=t+c-1-m;if(_>0){const i=M+1-t;this.appendSamples({xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a,offset:l+i,offsetLookupValues:f+i,offsetColors:A+i,offsetIds:g+i,offsetSizes:v+i,offsetRotations:y+i,count:_})}return this}alterSamplesByID(t,i){if(!this.lu)throw new Error("LightningChart JS attempted to use alterSamplesByID on DataSetXY that doesn't have IDs enabled.");const s=t.length,e=this.Fu;if(s<=0||!e)return this;const h=(("object"==typeof i.color?this.bu([i.color]):"number"==typeof i.color?[i.color]:[])||[])[0],r=Array.isArray(i.xValues)?new this.du(i.xValues):i.xValues,n=Array.isArray(i.yValues)?new this.du(i.yValues):i.yValues,o=Array.isArray(i.yValues)?new Float32Array(i.yValues):i.yValues,a=this.bu(i.colors),l=Array.isArray(i.sizes)?new Float32Array(i.sizes):i.sizes,c=Array.isArray(i.rotations)?new Float32Array(i.rotations):i.rotations,u=e.length,d=this.tu,f=this.iu-1,A=Math.max(f-d+1,0);for(let d=0;d<s;d+=1){const s=t[d],g=Hn(s,A,f,!0,(t=>e[Un(t,this.iu,u,this.qc)])),v=Un(g,this.iu,u,this.qc);e[v]===s&&(void 0!==i.x&&this.yu&&(this.yu[v]=i.x),void 0!==i.y&&this.pu&&(this.pu[v]=i.y),void 0!==i.lookupValue&&this.wu&&(this.wu[v]=i.lookupValue),void 0!==i.size&&this.Cu&&(this.Cu[v]=i.size),void 0!==i.rotation&&this.ku&&(this.ku[v]=i.rotation),void 0!==h&&this._u&&(this._u[v]=h),r&&this.yu&&(this.yu[v]=r[d]),n&&this.pu&&(this.pu[v]=n[d]),o&&this.wu&&(this.wu[v]=o[d]),a&&this._u&&(this._u[v]=a[d]),l&&this.Cu&&(this.Cu[v]=l[d]),c&&this.ku&&(this.ku[v]=c[d]))}return this.D.R("clear",{}),this}clear(){return this.qc=0,this.tu=0,this.iu=0,this.su=!1,this.D.R("clear",{}),this}getSampleCount(){return this.tu}getNextSampleIndex(){return this.iu}setMaxSampleCount(t){if("object"==typeof t){this.Iu&&this.removeEventListener("maxsamplecountexceed",this.Iu);const i=t.max,s=t.initial;this.Iu=t=>{if(void 0!==i&&t.currentMaxSampleCount>=i)return;let s=Math.max(2*t.currentMaxSampleCount,t.newTotalSampleCount);void 0!==i&&(s=Math.min(s,i)),this.setMaxSampleCount(s)},this.addEventListener("maxsamplecountexceed",this.Iu),void 0===this.Tu&&(void 0!==s?this.setMaxSampleCount(s):this.setMaxSampleCount(Math.min(2*this.tu,void 0!==i?i:Number.MAX_SAFE_INTEGER)))}else if("number"==typeof t){const i=t;if(void 0!==this.Tu&&this.Tu>i)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to shrink data set. This is currently not supported.");if(!this.yu||!this.pu)return this.Tu=i,this;if(i===this.Tu)return this;if(this.su&&0!==this.qc)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to expand data set that has exceeded its max sample count. This is currently not supported.");this.Tu=i,this.tu<i?(this.qc=this.tu,this.su=!1):(this.qc=0,this.su=!0);const s=new this.du(this.Tu);s.set(this.yu);const e=new this.du(this.Tu);if(e.set(this.pu),this.yu=s,this.pu=e,this.ou){const t=new Float32Array(this.Tu);this.wu&&t.set(this.wu),this.wu=t}if(this.lu){const t=new Uint32Array(this.Tu);this.Fu&&t.set(this.Fu),this.Fu=t}if(this.au){const t=new Uint32Array(this.Tu);this._u&&t.set(this._u),this._u=t}if(this.cu){const t=new Float32Array(this.Tu);this.Cu&&t.set(this.Cu),this.Cu=t}if(this.uu){const t=new Float32Array(this.Tu);this.ku&&t.set(this.ku),this.ku=t}}return this}getMaxSampleCount(){return this.Tu}readBack(t){if(!this.yu||!this.pu)return{xValues:new this.du,yValues:new this.du,iSampleFirst:0};const i=this.yu.length;let s,e=[];if(null==t?void 0:t.onlyInRange){const i=this.Pu();if(!i)throw new Error("LightningChart JS - attempted to use `DataSetXY.readBack` with `visibleOnly: true` without a data pattern.\nThis operation is only supported for patterned data (e.g. 'ProgressiveX')");const h=Math.min(t.onlyInRange.start,t.onlyInRange.end),r=Math.max(t.onlyInRange.start,t.onlyInRange.end),n=Yn(h,r,"x"===Ge(i)?this.yu:this.pu,this.iu,this.tu,this.qc,i,0);if(!n)return{xValues:new this.du,yValues:new this.du,iSampleFirst:0};e=n.dataRanges,s=n.iFirstSample}else if(void 0!==this.Tu&&this.su&&this.iu%this.Tu!=0){const t=this.qc,h=i-t,r=this.qc-1;e.push({offset:t,count:h}),e.push({offset:0,count:r+1}),s=this.iu-i}else e.push({offset:0,count:this.tu}),s=0;const h=e.reduce(((t,i)=>t+i.count),0),r=new this.du(h),n=new this.du(h),o=this.au?new Uint32Array(h):void 0,a=this.ou?new Float32Array(h):void 0,l=this.lu?new Uint32Array(h):void 0,c=this.cu?new Float32Array(h):void 0,u=this.uu?new Float32Array(h):void 0;let d=0;for(const t of e)r.set(this.yu.subarray(t.offset,t.offset+t.count),d),n.set(this.pu.subarray(t.offset,t.offset+t.count),d),this.au&&o&&this._u&&o.set(this._u.subarray(t.offset,t.offset+t.count),d),this.ou&&a&&this.wu&&a.set(this.wu.subarray(t.offset,t.offset+t.count),d),this.lu&&l&&this.Fu&&l.set(this.Fu.subarray(t.offset,t.offset+t.count),d),this.cu&&c&&this.Cu&&c.set(this.Cu.subarray(t.offset,t.offset+t.count),d),this.uu&&u&&this.ku&&u.set(this.ku.subarray(t.offset,t.offset+t.count),d),d+=t.count;return{xValues:r,yValues:n,iSampleFirst:s,lookupValues:a,colors:o,ids:l,sizes:c,rotations:u}}Mu(t,i,s,e,h,r,n){if(void 0===i){const i=this.vu();h=void 0!==h?h:n&&Ge(n)===s?$e(n)?1:-1:1,e=void 0!==e?e:i?i[s]+h:0;const r=new this.du(t);for(let i=0;i<t;i+=1)r[i]=e+i*h;return[r,0]}const o=i[0]&&i[0]instanceof Date,a=i[0]&&Qn(i[0]);if(!a&&i[0]&&"string"==typeof i[0])throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(void 0!==e||void 0!==h){const l=this.vu();h=void 0!==h?h:n&&Ge(n)===s?$e(n)?1:-1:1,e=void 0!==e?e:l?l[s]+h:0;const c=new this.du(t);if(a)for(let s=0;s<t;s+=1)c[s]=e+new Date(i[s+r]).getTime()*h;else if(o)for(let s=0;s<t;s+=1)c[s]=e+i[s+r].getTime()*h;else for(let s=0;s<t;s+=1)c[s]=e+i[s+r]*h;return[c,0]}if(a){const s=new this.du(t);for(let e=0;e<t;e+=1)s[e]=new Date(i[e]).getTime();return[s,r]}if(o){const s=new this.du(t);for(let e=0;e<t;e+=1)s[e]=i[e].getTime();return[s,r]}return[i,r]}bu(t){if(!t||0===t.length)return;const i=t[0];if(p(i)){const i=t.length,s=new Uint32Array(i);for(let e=0;e<i;e+=1){const i=t[e],h=255*i.a<<24|255*i.b<<16|255*i.g<<8|255*i.r;s[e]=h}return s}return t}Lu(){return{min:0,max:void 0!==this.Tu&&this.su?this.Tu-1:this.tu-1}}Bu(t){t=Math.min(t,this.tu),this.iu-=t,this.tu-=t,this.qc-=t,this.qc<0&&void 0!==this.Tu&&(this.qc+=this.Tu)}Su(t,i,s,e,h,r,n,o,a,l){const c=Ge(l),u=$e(l),d="x"===c?t:i,f="x"===c?s:e,A=s.length,g=f[0];if(this.mu(l,s[A-1],e[A-1])){const t=this.vu(),i=t?t[c]:0;let l=0;for(let t=0;t<A;t+=1)if(f[t]>i){l=t;break}const u={xValues:s,yValues:e,lookupValues:h,colors:r,ids:n,sizes:o,rotations:a,offset:l};this.hu=!0,this.appendSamples(u),this.hu=!1}else{const l=t.length,c=this.tu,f=this.iu-1,v=Math.max(f-c+1,0),y=Hn(g,v,f,u,(t=>d[Un(t,this.iu,l,this.qc)])),p=y-1,m=y+1,S=d[Un(y,this.iu,l,this.qc)],b=m<=this.iu-1?d[Un(m,this.iu,l,this.qc)]:void 0,x=void 0!==b&&(u&&b<g||!u&&b>g)?m+1:u&&S<g||!u&&S>g?y+1:p+1,M=f-x+1,w=new this.du(M),_=new this.du(M),C=this.ou?new Float32Array(M):void 0,k=this.au?new Uint32Array(M):void 0,T=this.lu?new Uint32Array(M):void 0,F=this.cu?new Float32Array(M):void 0,I=this.uu?new Float32Array(M):void 0;let P=0;for(let s=x;s<=f;s+=1){const e=Un(s,this.iu,l,this.qc);w[P]=t[e],_[P]=i[e],C&&this.wu&&(C[P]=this.wu[e]),k&&this._u&&(k[P]=this._u[e]),T&&this.Fu&&(T[P]=this.Fu[e]),F&&this.Cu&&(F[P]=this.Cu[e]),I&&this.ku&&(I[P]=this.ku[e]),P+=1}this.Bu(M);const L=new this.du(A+M);L.set(s),L.set(w,A);const B=new this.du(A+M);let D,E,R,z,V;B.set(e),B.set(_,A),h&&C&&(D=new Float32Array(A+M),D.set(h),D.set(C,A)),r&&k&&(E=new Uint32Array(A+M),E.set(r),E.set(k,A)),n&&T&&(R=new Uint32Array(A+M),R.set(n),R.set(T,A)),o&&F&&(z=new Float32Array(A+M),z.set(o),z.set(F,A)),a&&I&&(V=new Float32Array(A+M),V.set(a),V.set(I,A)),this.hu=!0,this.appendSamples({xValues:L,yValues:B,lookupValues:D,colors:E,ids:R,sizes:z,rotations:V}),this.hu=!1,this.D.R("clear",{})}}Pu(){return this.xu()}xu(t=!1){let i;if(this.nu&&"userSpecified"in this.nu)i=this.nu.userSpecified;else if(this.nu&&"autoDetectResult"in this.nu)i=this.nu.autoDetectResult;else if(this.yu&&this.pu&&this.iu>0&&!t){const t=void 0!==this.Tu&&this.su?this.qc:0,s=this.tu-1,e=void 0!==this.Tu&&this.su?0:void 0,h=void 0!==this.Tu&&this.su?this.qc-1:void 0,[r,n]=void 0!==e&&void 0!==h&&Math.abs(h-e)>Math.abs(s-t)?[e,h]:[t,s];if(1+n-r>=2){let t,s,e=this.yu[r],h=this.pu[r];for(let i=r+1;i<=n;i+=1){if(!1!==t){const s=this.yu[i],h=Math.sign(s-e);0!==h&&t&&t.direction!==h?t=!1:0===h||t||(t={direction:h}),e=s}if(!1!==s){const t=this.pu[i],e=Math.sign(t-h);0!==e&&s&&s.direction!==e?s=!1:0===e||s||(s={direction:e}),h=t}}i=t&&t.direction>0?Ne.ProgressiveX:t&&t.direction<0?Ne.RegressiveX:s&&s.direction>0?Ne.ProgressiveY:s&&s.direction<0?Ne.RegressiveY:void 0,this.nu={autoDetectResult:i},i&&ni.console.warn(`LightningChart JS DataSetXY warning | Data pattern was detected automatically (DataPatterns.${i}).\nAutomatic detection is only intended for kick-starting application development, not for production use.\nAdd { dataPattern: '${i}'} } to your application when creating series or DataSetXY to clear this warning.`)}}return i}mu(t,i,s){const e=this.vu();return!e||("ProgressiveX"===t?i>=e.x:"RegressiveX"===t?i<=e.x:"ProgressiveY"===t?s>=e.y:"RegressiveY"!==t||s<=e.y)}gu(t){if(t.incomingDataX&&t.incomingDataY&&0===this.tu&&!this.yu&&!this.pu&&(void 0===this.Tu||this.Tu===t.appendCount)&&this.fu)return this.yu=Wn(t.incomingDataX,this.du)||new this.du,this.pu=Wn(t.incomingDataY,this.du)||new this.du,this.wu=this.ou?Wn(t.incomingDataLookup,Float32Array):void 0,this.Fu=this.lu?Wn(t.incomingDataIDs,Uint32Array):void 0,this._u=this.au?Wn(t.incomingDataColors,Uint32Array):void 0,this.Cu=this.cu?Wn(t.incomingDataSize,Float32Array):void 0,this.ku=this.uu?Wn(t.incomingDataRotation,Float32Array):void 0,{dataPattern:this.xu(),samplesCacheX:this.yu,samplesCacheY:this.pu,samplesCacheLookup:this.wu,samplesCacheIDs:this.Fu,samplesCacheColors:this._u,samplesCacheSize:this.Cu,samplesCacheRotation:this.ku,maxSampleCount:t.appendCount,incomingDataReplacedCache:!0};if(void 0===this.Tu){const i=this.tu+t.appendCount;if(!this.yu||!this.pu)return this.yu=new this.du(i),this.pu=new this.du(i),this.wu=this.ou?new Float32Array(i):void 0,this.Fu=this.lu?new Uint32Array(i):void 0,this._u=this.au?new Uint32Array(i):void 0,this.Cu=this.cu?new Float32Array(i):void 0,this.ku=this.uu?new Float32Array(i):void 0,{dataPattern:this.xu(),samplesCacheX:this.yu,samplesCacheY:this.pu,samplesCacheLookup:this.wu,samplesCacheIDs:this.Fu,samplesCacheColors:this._u,samplesCacheSize:this.Cu,samplesCacheRotation:this.ku,maxSampleCount:i};const s=this.yu.length;if(s<i){if(!this.ru.warningDisplayed){const s=ni.performance.now();if(this.ru.expandEvents=this.ru.expandEvents.filter((t=>s-t.timestamp<5e3)),i>1e3&&this.ru.expandEvents.push({timestamp:s}),this.ru.expandEvents.length>5)return ni.console.warn("LightningChart JS warning - DataSetXY append operation was performed more than 5 times in 5 seconds.\nAutomatic max sample count control was enabled.\nFor streaming applications, DataSetXY.setMaxSampleCount() or Series.setMaxSampleCount() should be configured explicitly to get rid of this warning."),this.ru.warningDisplayed=!0,this.setMaxSampleCount({mode:"auto"}),this.gu(t)}const s=new this.du(i);s.set(this.yu),this.yu=s;const e=new this.du(i);if(e.set(this.pu),this.pu=e,this.ou){const t=new Float32Array(i);this.wu&&t.set(this.wu),this.wu=t}if(this.lu){const t=new Uint32Array(i);this.Fu&&t.set(this.Fu),this.Fu=t}if(this.au){const t=new Uint32Array(i);this._u&&t.set(this._u),this._u=t}if(this.cu){const t=new Float32Array(i);this.Cu&&t.set(this.Cu),this.Cu=t}if(this.uu){const t=new Float32Array(i);this.ku&&t.set(this.ku),this.ku=t}return this.qc=this.tu,{dataPattern:this.xu(),samplesCacheX:this.yu,samplesCacheY:this.pu,samplesCacheLookup:this.wu,samplesCacheIDs:this.Fu,samplesCacheColors:this._u,samplesCacheSize:this.Cu,samplesCacheRotation:this.ku,maxSampleCount:i}}if(s>4*i){const t=new this.du(i);t.set(this.yu.subarray(0,this.tu)),this.yu=t;const s=new this.du(i);if(s.set(this.pu.subarray(0,this.tu)),this.pu=s,this.ou){const t=new Float32Array(i);this.wu&&t.set(this.wu.subarray(0,this.tu)),this.wu=t}if(this.lu){const t=new Uint32Array(i);this.Fu&&t.set(this.Fu.subarray(0,this.tu)),this.Fu=t}if(this.au){const t=new Uint32Array(i);this._u&&t.set(this._u.subarray(0,this.tu)),this._u=t}if(this.cu){const t=new Float32Array(i);this.Cu&&t.set(this.Cu.subarray(0,this.tu)),this.Cu=t}if(this.uu){const t=new Float32Array(i);this.ku&&t.set(this.ku.subarray(0,this.tu)),this.ku=t}return{dataPattern:this.xu(),samplesCacheX:this.yu,samplesCacheY:this.pu,samplesCacheLookup:this.wu,samplesCacheIDs:this.Fu,samplesCacheColors:this._u,samplesCacheSize:this.Cu,samplesCacheRotation:this.ku,maxSampleCount:i}}return{dataPattern:this.xu(),samplesCacheX:this.yu,samplesCacheY:this.pu,samplesCacheLookup:this.wu,samplesCacheIDs:this.Fu,samplesCacheColors:this._u,samplesCacheSize:this.Cu,samplesCacheRotation:this.ku,maxSampleCount:s}}return t.appendCount+this.tu>this.Tu&&this.D.R("maxsamplecountexceed",{currentSampleCount:this.tu,currentMaxSampleCount:this.Tu,newTotalSampleCount:this.tu+t.appendCount}),this.yu=this.yu||new this.du(this.Tu),this.pu=this.pu||new this.du(this.Tu),this.wu=this.wu||(this.ou?new Float32Array(this.Tu):void 0),this.Fu=this.Fu||(this.lu?new Uint32Array(this.Tu):void 0),this._u=this._u||(this.au?new Uint32Array(this.Tu):void 0),this.Cu=this.Cu||(this.cu?new Float32Array(this.Tu):void 0),this.ku=this.ku||(this.uu?new Float32Array(this.Tu):void 0),{dataPattern:this.xu(),samplesCacheX:this.yu,samplesCacheY:this.pu,samplesCacheLookup:this.wu,samplesCacheIDs:this.Fu,samplesCacheColors:this._u,samplesCacheSize:this.Cu,samplesCacheRotation:this.ku,maxSampleCount:this.Tu}}Du(){if(!this.yu||!this.pu||0===this.tu)return;if(void 0===this.Tu)return this.iu>0?{x:this.yu[0],y:this.pu[0]}:void 0;if(!this.su)return{x:this.yu[0],y:this.pu[0]};let t=this.qc-this.tu;return t<0&&(t+=this.Tu),{x:this.yu[t],y:this.pu[t]}}vu(){if(!this.yu||!this.pu||0===this.tu)return;if(void 0===this.Tu){const t=this.tu-1;return t>=0?{x:this.yu[t],y:this.pu[t]}:void 0}let t=this.qc-1;return t<0&&(t+=this.Tu),{x:this.yu[t],y:this.pu[t]}}Eu(t){if(!this.yu||!this.pu)return;const i=this.yu.length,s=this.tu,e=this.iu-1,h=Math.max(e-s+1,0)+t,r=Un(h,this.iu,i,this.qc);return{x:this.yu[r],y:this.pu[r],lookupValue:this.ou&&this.wu?this.wu[r]:void 0,id:this.lu&&this.Fu?this.Fu[r]:void 0,color:this.au&&this._u?this._u[r]:void 0,size:this.cu&&this.Cu?this.Cu[r]:void 0,rotation:this.uu&&this.ku?this.ku[r]:void 0,iSample:h}}Ru(t,i,s,e){const h=this.xu(),r=this.yu,n=this.pu;if(!r||!n)return;const o=(t,i)=>({x:r[t],y:n[t],lookupValue:this.ou&&this.wu?this.wu[t]:void 0,id:this.lu&&this.Fu?this.Fu[t]:void 0,color:this.au&&this._u?this._u[t]:void 0,size:this.cu&&this.Cu?this.Cu[t]:void 0,rotation:this.uu&&this.ku?this.ku[t]:void 0,iSample:i}),a=r.length,l=this.tu,c=this.iu-1,u=Math.max(c-l+1,0);if(h){const s=$e(h),e=this.Du(),r=this.vu();if(!(e&&r&&this.yu&&this.pu))return;const n="ProgressiveX"===h||"RegressiveX"===h?"x":"y",l="x"===n?"y":"x",d="x"===n?this.yu:this.pu,f="x"===l?this.yu:this.pu,A=t[n],g=Math.min(e[n],r[n]),v=Math.max(e[n],r[n]);if(A<g||A>v)return;const y=Hn(A,u,c,s,(t=>d[Un(t,this.iu,a,this.qc)])),p=Un(y,this.iu,a,this.qc);if(!i)return o(p,y);const m=y-1,S=y+1,b=d[p],x=s?A>=b?S<=c?S:void 0:m>=u?m:void 0:A<=b?S<=c?S:void 0:m>=u?m:void 0;if(void 0===x)return;const M=Un(x,this.iu,a,this.qc),w=y<x?{pos:d[p],val:f[p],iSample:y}:{pos:d[M],val:f[M],iSample:x},_=y>x?{pos:d[p],val:f[p],iSample:y}:{pos:d[M],val:f[M],iSample:x},C=(A-w.pos)/(_.pos-w.pos),k=Ue(w.val,_.val,C);return"x"===Ge(h)?{x:A,y:k,iSample:Ue(w.iSample,_.iSample,C)}:{y:A,x:k,iSample:Ue(w.iSample,_.iSample,C)}}let d,f=Number.MAX_VALUE;const A=ot(t,s,e),g=this.tu-1;for(let t=0;t<=g;t+=1){const i=r[t],h=n[t];if(!this.Au||!Number.isNaN(i)&&!Number.isNaN(h)){const r=nt(i,s.x,e.x),n=nt(h,s.y,e.y),o=(r-A.x)**2+(n-A.y)**2;o<f&&(f=o,d=t)}}return void 0===d?void 0:o(d,d)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Un=(t,i,s,e)=>t%s,Yn=(t,i,s,e,h,r,n,o)=>{if(0===e||0===h)return;const a=$e(n),l=s.length,c=e-1,u=Math.max(c-h+1,0),d=Hn(t,u,c,a,(t=>s[Un(t,e,l)])),f=Hn(i,u,c,a,(t=>s[Un(t,e,l)])),A=Math.min(d,f),g=Math.max(d,f),v=Math.max(A-o,u),y=Math.min(g+o,c),p=Un(v,e,l),m=Un(y,e,l);return p>m?{iFirstSample:v,iLastSample:y,iFirstSampleDataArray:p,iLastSampleDataArray:m,dataRanges:[{offset:p,count:l-p},{offset:0,count:m+1}]}:{iFirstSample:v,iLastSample:y,iFirstSampleDataArray:p,iLastSampleDataArray:m,dataRanges:[{offset:p,count:m-p+1}]}},Hn=(t,i,s,e,h)=>{const r=s;for(;i!==s;){const r=Math.ceil((i+s)/2),n=h(r);e&&t<n||!e&&t>n?s=r-1:i=r}const n=Math.abs(t-h(i));return i<r&&Math.abs(t-h(i+1))<n?i+1:i},Xn=(t,i,s,e,h)=>{const r=i.length;if(Array.isArray(i))for(let r=0;r<e;r+=1)t[h+r]=i[s+r];else t.set(r===e?i:i.subarray(s,s+e),h)},Wn=(t,i)=>void 0===t?void 0:Array.isArray(t)?new i(t):t instanceof i?t:new i(t),jn=(t,i,s)=>{if(void 0!==t)return Array.isArray(t)?t.slice(i,s):t.subarray(i,s)},Zn=/^(\d{4}-\d{2}-\d{2})(?:T(\d{2}:\d{2}:\d{2}(?:\.\d+)?)(Z|[+-]\d{2}:\d{2})?)?$/,Qn=t=>"string"==typeof t&&Zn.test(t)&&!ni.isNaN(Date.parse(t));class Jn extends On{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Da="label",this.vl=this.Ys.Yr(this.renderingScale).Sr(this.Da).Ie(V).$r(us).Ur(us),this.setMargin(5),this.D.Nt(this.vl)}rn(){return[this.vl]}setFillStyle(t){return this.vl.Ie(t),this.Ys.Ls(),this}getFillStyle(){return this.vl.$h()}Le(){void 0!==this.cn&&this.vl.xa(this.cn);const t=this.getPosition(r(0,0),ti.Content),i=ot(t,this.scale,this.renderingScale);return this.vl.Be(i),this}hr(){this.vl.hr();const t=0===this.Da.length?r(0,0):this.vl.zu();return this.setContentSize(t),super.hr()}setText(t){return this.Da=t,this.vl.Sr(this.Da),this.Ys.Ls(),this}getText(){return this.Da}setFont(t){return this.vl.Xh(t),this.Ys.Ls(),this}getFont(){return this.vl.Hh()}setTextRotation(t){return this.vl.Wh(t),this.Ys.Ls(),this}getTextRotation(){return this.vl.jh()}}const Kn={...Hr,...Wr,uiElement:Jn};class qn extends Nn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.fitTo=this.un.bind(this),this.setSize=this.fitTo,this.vl=this.Ys.Vu(i).Ie(V).Fe(Wt),this.Ou=this.vl.lo(),this.D.Nt(this.vl)}rn(){return[this.vl]}setCornerRadius(t,i){var s,e,h,r;return this.Nu=t,this.Ou.Gu(t?{extent:t,c_x1_y1:null===(s=null==i?void 0:i.bottomLeft)||void 0===s||s,c_x1_y2:null===(e=null==i?void 0:i.topLeft)||void 0===e||e,c_x2_y1:null===(h=null==i?void 0:i.bottomRight)||void 0===h||h,c_x2_y2:null===(r=null==i?void 0:i.topRight)||void 0===r||r,skipTooSmallCheck:!!i}:void 0),this.Ys.Ls(),this}getCornerRadius(){return this.Nu}setFillStyle(t){return this.vl.Ie(t),this.Ys.Ls(),this}getFillStyle(){return this.vl.$h()}setStrokeStyle(t){return this.vl.Fe(t),this.Ys.Ls(),this}getStrokeStyle(){return this.vl.da()}Le(){void 0!==this.cn&&this.vl.xa(this.cn);const t=zs([this.getPosition(r(-1,-1),ti.Content),this.getPosition(r(1,1),ti.Content)].map((t=>ot(t,this.scale,this.renderingScale))));return this.Ou.$u(t.min.x,t.min.y,t.max.x,t.max.y),this}un(t){return this.setContentSize(t),this.Ys.Ls(),this}dn(){return 0}fn(){return 0}gn(){return 0}An(){return 0}}class to extends Nn{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Uu=r(0,0),this.vl=t.Yu(i).Bc(0).$e(360).Ie(V).Fe(Wt),this.D.Nt(this.vl)}rn(){return[this.vl]}setFillStyle(t){return this.vl.Ie(t),this.Ys.Ls(),this}getFillStyle(){return this.vl.$h()}setStrokeStyle(t){return this.vl.Fe(t),this.Ys.Ls(),this}getStrokeStyle(){return this.vl.da()}Le(){void 0!==this.cn&&this.vl.xa(this.cn);const t=this.getSize(ti.Content).x/2;return this.vl.Ec(t*this.renderingScale.hs().x).Rc(t*this.renderingScale.hs().y).Be(ot(this.getPosition(r(0,0),ti.Content),this.scale,this.renderingScale)).Vc(255).hr(),this}un(t){const i=Math.sqrt(t.x*t.x/4+t.y*t.y/4);return this.setContentSize(r(2*i,2*i)),this.Uu=t,this.Ys.Ls(),this}dn(){return(this.getSize(ti.Content).x-this.Uu.x)/2}fn(){return(this.getSize(ti.Content).x-this.Uu.x)/2}gn(){return(this.getSize(ti.Content).y-this.Uu.y)/2}An(){return(this.getSize(ti.Content).y-this.Uu.y)/2}fitTo(t){const i=Math.min(t.x,t.y);return this.setContentSize(r(i,i)),this.Uu=t,this}}class io extends Gn{constructor(t,i,s,e,h){super(t,i,s,Fn.Simple,e,h),this.Hu=d(r(0,0)),this.Xu=!1,this.Ys=t,this.Jc()}Kc(){const t=this.Hu.C();if(this.Xu){const i=Math.min(t.x,t.y);return[r(0,0),r(i/2,i/2),r(0,i),r(-i/2,i/2)]}const i=2*Math.sqrt(this.Hu.C().x*this.Hu.C().x/4+this.Hu.C().y*this.Hu.C().y/4),s=r(Math.cos(Math.PI/4)*i,0),e=r(0,Math.sin(Math.PI/4)*i),h=r(0,0),n=js(h,js(s,e)),o=js(n,js(e,Ws(s,-1)));return[h,n,o,Zs(o,js(s,e))]}rn(){return[this.vl]}setFillStyle(t){return this.vl.Ie(t),this.Ys.Ls(),this}getFillStyle(){return this.vl.$h()}setStrokeStyle(t){return this.vl.Fe(t),this.Ys.Ls(),this}getStrokeStyle(){return this.vl.da()}un(t){return this.Hu._(t),this.Xu=!1,this.Ys.Ls(),this}dn(){return this.Xu?0:(this.getSize(ti.Content).x-this.Hu.C().x)/2}fn(){return this.Xu?0:(this.getSize(ti.Content).x-this.Hu.C().x)/2}gn(){return this.Xu?0:(this.getSize(ti.Content).y-this.Hu.C().y)/2}An(){return this.Xu?0:(this.getSize(ti.Content).y-this.Hu.C().y)/2}fitTo(t){return this.Hu._(t),this.Xu=!0,this.Ys.Ls(),this}}class so extends Gn{constructor(t,i,s,e,h){super(t,i,s,Fn.Simple,e,h),this.Wu=d(r(0,0)),this.ju=d(10),this.Zu=d(void 0),this.bn=d(ei.Right),this.Jc()}rn(){return[this.vl]}setFillStyle(t){return this.vl.Ie(t),this.Ys.Ls(),this}getFillStyle(){return this.vl.$h()}setStrokeStyle(t){return this.vl.Fe(t),this.Ys.Ls(),this}getStrokeStyle(){return this.vl.da()}setDirection(t){return this.bn._(t),this.Ys.Ls(),this}getDirection(){return this.bn.C()}setPointerLength(t){return this.ju._(t),this.Ys.Ls(),this}getPointerLength(){return this.ju.C()}setPointerAngle(t){return this.Zu._(t),this.Ys.Ls(),this}getPointerAngle(){let t=this.Zu.C();if(void 0===t){const i=this.Qu();if(0===i)return 0;t=0!==i?180*Math.atan(2*this.getPointerLength()/i)/Math.PI:0}return Math.min(Math.max(t,1),89)}un(t){return this.Wu._(t),this.Ys.Ls(),this}Ju(){const t=this.getPointerAngle();return 0===t?0:2*this.getPointerLength()/Math.tan(t*Math.PI/180)}Ku(){return Li(this.bn.C())?this.Wu.C().x:this.Wu.C().y}Qu(){return Li(this.bn.C())?this.Wu.C().y:this.Wu.C().x}dn(){switch(this.bn.C()){case ei.Right:return 0;case ei.Left:return this.getPointerLength();case ei.Up:case ei.Down:return Math.max(0,this.Ju()-this.Qu());default:return 0}}fn(){switch(this.bn.C()){case ei.Right:return this.getPointerLength();case ei.Left:return 0;case ei.Up:case ei.Down:return Math.max(0,this.Ju()-this.Qu());default:return 0}}gn(){switch(this.bn.C()){case ei.Right:case ei.Left:return Math.max(0,this.Ju()-this.Qu());case ei.Up:return this.getPointerLength();case ei.Down:default:return 0}}An(){switch(this.bn.C()){case ei.Right:case ei.Left:return Math.max(0,this.Ju()-this.Qu());case ei.Up:return 0;case ei.Down:return this.getPointerLength();default:return 0}}Kc(){const t=Pi(this.bn.C()),i=Hs(r(0,0),t),s=this.getPointerLength(),e=this.Ju(),h=this.Ku(),n=this.Qu();if(!(0!==s&&0!==e||0!==h&&0!==n))return[];const o=r(0,0),a=js(js(o,Ws(t,-s)),Ws(i,e/2)),l=js(a,Ws(i,(n-e)/2)),c=js(l,Ws(t,-h)),u=js(js(o,Ws(t,-s)),Ws(i,-e/2)),d=js(u,Ws(i,-(n-e)/2)),f=js(d,Ws(t,-h));let A;return A=0===h||0===n?[o,a,u]:0===s||0===e?[l,c,f,d]:di(n,e)?[o,a,c,f,u]:[o,a,l,c,f,d,u],A}}class eo extends On{constructor(t,i,s,e,h){super(t,i,s,e,h),this.fitTo=this.un.bind(this),this.setSize=this.fitTo,this.qu=new $n,this.vl=this.Ys.hd(i).Ne(Wt).ed(V).sd(V).td(this.qu),this.D.Nt(this.vl)}rn(){return[this.vl]}setShape(t){return this.vl.rd(t),this}getShape(){return this.vl.nd()}setRotation(t){return this.vl.od(t),this}getRotation(){return this.vl.ad()}setFillStyle(t){return this.vl.sd(t),this.Ys.Ls(),this}getFillStyle(){return this.vl.ld()}Le(){void 0!==this.cn&&this.vl.xa(this.cn);const t=ot(this.getPosition({x:0,y:0},ti.Content),this.scale,this.renderingScale),i=Math.max(this.size.x,this.size.y);if(this.qu.clear(),i>0){const s=this.vl.nd(),e=this.vl.ld(),h=wh(s)&&s,r=Ht(e)&&e;if(h){const t=i/h.xi().y;this.vl.ud(t)}else if(r){const t=r.source;if(t instanceof Image){const s=i/t.height;this.vl.ud(s)}}else this.vl.ud(i);this.qu.appendSample(t)}return this}un(t){return this.setContentSize(t),this.Ys.Ls(),this}dn(){return 0}fn(){return 0}gn(){return 0}An(){return 0}}const ho={...Hr,...Wr,uiElement:eo};class ro extends Zr{setSize(t){return this.setContentSize(t),this.Ys.Ls(),this}}class no extends zr{constructor(){super(...arguments),this.dd=[],this.fd=0,this.Ad=t=>{const i=this.dd.indexOf(t);i>=0&&this.dd.splice(i,1)}}getMembers(){return this.dd}getMemberCount(){return this.dd.length}setMinimumSize(t){return this.gd=t,this.Ys.Ls(),this}getMinimumSize(){return this.gd}addElement(t,i=-1){const s=t.kn(this.Ys,this.renderingScale,this.scale,this.Ad,this._t,!1);return s.setPointerEvents(this.getPointerEvents()),i>=0?this.dd.splice(i,0,s):this.dd.push(s),s.setVisible(this.getVisible()),this.D.$t(s),this.dt&&(Ki(0,(()=>{})),s.dispose()),s}dispose(){return super.dispose(),this.dd.slice().forEach(ci),this}Le(){super.Le();const t=this.cn;return void 0!==t&&this.dd.forEach(((i,s)=>{i.cn=t+1+.01*s})),this}setVisible(t){return super.setVisible(t),this.dd.forEach((i=>i.setVisible(t))),this}setPointerEvents(t){super.setPointerEvents(t);for(let i=0;i<this.dd.length;i+=1)this.dd[i].setPointerEvents(t);return this}getPointerEvents(){if(super.getPointerEvents())return!0;for(let t=0;t<this.dd.length;t+=1)if(this.dd[t].getPointerEvents())return!0;return!1}setHighlight(t){super.setHighlight(t);for(let s=0;s<this.dd.length;s+=1){const e=this.dd[s];"getHighlight"in(i=e)&&"setHighlight"in i&&e.setHighlight(t)}var i;return this}}class oo extends no{Le(){super.Le();const t=this.getPosition(r(-1,1),ti.Content),i=this.dd.reduce(((t,i)=>t+ +(i instanceof ro)),0),s=i>0?(this.size.x-this.fd)/i:0;return this.dd.reduce(((i,e)=>e instanceof ro?this.scale.Pi({x:i,y:t.y},{x:s+e.getSize().x,y:0}).x:e.setOrigin(r(-1,1)).setPosition(r(i,t.y)).Le().getPosition(r(1,0)).x),t.x),this}hr(){for(let t=0;t<this.dd.length;t+=1){const i=this.dd[t];i instanceof ao&&i.setMinimumSize(0),i.hr()}const t=this.dd.reduce(this.vd.bind(this),n(0,0));this.fd=t.x;const i=void 0===this.gd?t:r(Math.max(t.x,this.gd),t.y);this.setContentSize(i);for(let t=0;t<this.dd.length;t+=1){const s=this.dd[t];s instanceof ao&&s.setMinimumSize(i.y).hr()}return super.hr()}vd(t,i){const s=i.getSize();return t.x+=s.x,t.y=Math.max(t.y,s.y),t}addGap(t=0,i=-1){return this.addElement(lo,i).setSize(r(0,t))}}class ao extends no{Le(){super.Le();const t=this.getPosition(r(-1,1),ti.Content),i=this.dd.reduce(((t,i)=>t+ +(i instanceof ro)),0),s=i>0?(this.size.y-this.fd)/i:0;return this.dd.reduce(((i,e)=>e instanceof ro?this.scale.Pi({x:t.x,y:i},{x:0,y:-(s+e.getSize().y)}).y:e.setOrigin(r(-1,1)).setPosition(r(t.x,i)).Le().getPosition(r(0,-1)).y),t.y),this}hr(){for(let t=0;t<this.dd.length;t+=1){const i=this.dd[t];i instanceof oo&&i.setMinimumSize(0),i.hr()}const t=this.dd.reduce(this.vd.bind(this),n(0,0));this.fd=t.y;const i=void 0===this.gd?t:r(t.x,Math.max(t.y,this.gd));this.setContentSize(i);for(let t=0;t<this.dd.length;t+=1){const s=this.dd[t];s instanceof oo&&s.setMinimumSize(i.x).hr()}return super.hr()}vd(t,i){const s=i.getSize();return t.y+=s.y,t.x=Math.max(t.x,s.x),t}addGap(t=0,i=-1){return this.addElement(lo,i).setSize(r(0,t))}}const lo={...Hr,...Wr,uiElement:ro};class co extends oo{constructor(){super(...arguments),this.dd=[]}addColumn(){return this.addElement(Ao,void 0)}getColumn(t,i=!1){return i&&this.dd.length<=t?(this.addColumn(),this.getColumn(t,!0)):this.dd[t]}}class uo extends ao{constructor(){super(...arguments),this.dd=[]}addRow(){return this.addElement(go,void 0)}getRow(t,i=!1){return i&&this.dd.length<=t?(this.addRow(),this.getRow(t,!0)):this.dd[t]}}const fo={...Hr,...Xr,...jr},Ao={...fo,uiElement:ao,background:qn},go={...fo,uiElement:oo,background:qn},vo={setTextLabel:null,setText(t){return this.setTextLabel.setText(t),this},getText(){return this.setTextLabel.getText()}},yo=(t,i)=>{const s={},e=`stylable${t}s`;return s[e]=i,s[`set${t}FillStyle`]=function(t){return this[e].forEach((i=>i.setFillStyle(t))),this},s[`get${t}FillStyle`]=function(){return this[e][0].getFillStyle()},s[`set${t}Font`]=function(t){return this[e].forEach((i=>i.setFont(t))),this},s[`get${t}Font`]=function(){return this[e][0].getFont()},s[`set${t}Rotation`]=function(t){return this[e].forEach((i=>i.setTextRotation(t))),this},s[`get${t}Rotation`]=function(){return this[e][0].getTextRotation()},s},po=yo("Text",[]),mo={button:void 0,isLocked:!1,setOn(t){const i=this.button.getOn()!==t;return this.button.setOn(t),i&&this.D.R("switch",{state:t}),this},getOn(){return this.button.getOn()},setLocked(t){return this.isLocked=t,this},getLocked(){return this.isLocked},setButtonOffFillStyle(t){return this.button.setOffFillStyle(t),this},getButtonOffFillStyle(){return this.button.getOffFillStyle()},setButtonOnFillStyle(t){return this.button.setOnFillStyle(t),this},getButtonOnFillStyle(){return this.button.getOnFillStyle()},setButtonSize(t){return this.button.setSize(t),this},getButtonSize(){return this.button.getSize()},setButtonShape(t){return this.button.setButtonShape(t),this},getButtonShape(){return this.button.getButtonShape()}},So={textFillStyleHidden:void 0,setTextFillStyleHidden(t){return this.textFillStyleHidden="function"==typeof t?t(this.textFillStyleHidden):t,this},getTextFillStyleHidden(){return this.textFillStyleHidden}},bo={pointable:void 0,setDirection(t){return this.pointable.setDirection(t),this},getDirection(){return this.pointable.getDirection()},setPointerLength(t){return this.pointable.setPointerLength(t),this},getPointerLength(){return this.pointable.getPointerLength()}},xo={...Hr,...Xr,background:qn,kn(t,i,s,e,h,r){const n=new oo(t,i,s,this.background,e,h),o=n.addElement(Kn,void 0),a=Object.assign(n,vo,{setTextLabel:o},po,{stylableTexts:[o]});return Yr(a,h,r),this.applyStylers(a,h)}}.addStyler($r),Mo={...Hr,...Xr,background:so,direction:ei.Up,setDirection(t){return this.direction=t,this},kn(t,i,s,e,h,r){const n=this.direction,o=new oo(t,i,s,this.background,e,h),a=o.addElement(Kn,void 0),l=o.getBackground().setDirection(n),c=Object.assign(o,vo,{setTextLabel:a},po,{stylableTexts:[a]},bo,{pointable:l},{setTickLabelPadding(t){return this.getDirection()===ei.Up?(this.setPadding({top:t}),a.setMargin({top:0})):this.getDirection()===ei.Down?(this.setPadding({bottom:t}),a.setMargin({bottom:0})):this.getDirection()===ei.Right?(this.setPadding({right:t}),a.setMargin({right:0})):this.getDirection()===ei.Left&&(this.setPadding({left:t}),a.setMargin({left:0})),this},getTickLabelPadding(){return this.getDirection()===ei.Up?this.getPadding().top:this.getDirection()===ei.Down?this.getPadding().bottom:this.getDirection()===ei.Right?this.getPadding().right:this.getPadding().left}});return c.Tn="other",c.setPointerLength(h.xAxisNumericTicks.majorTickStyle.getTickLength()).setTickLabelPadding(h.xAxisNumericTicks.majorTickStyle.getTickPadding()).setTextFont(h.uiTextFont).setTextFillStyle(h.uiTextFillStyle).setBackground((t=>t.setFillStyle(h.uiBackgroundFillStyle).setStrokeStyle(h.uiBackgroundStrokeStyle))),Yr(c,h,r),this.applyStylers(c,h)}};class wo extends Rr{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.yd=!1,this.pd=V,this.md=V,this.getOn=()=>this.yd,this.md=r.uiButtonFillStyleHidden||r.uiButtonFillStyle,this.Sd=new eo(this.Ys,this.renderingScale,this.scale,ui,r).setShape(e).setFillStyle(this.md),this.D.$t(this.Sd)}rn(){return[...this.Sd.rn()]}setOn(t){return this.yd=t,this.Sd.setFillStyle(t?this.pd:this.md),this.Ys.Ls(),this}setOffFillStyle(t){return this.md="function"==typeof t?t(this.md):t,this.yd||this.Sd.setFillStyle(this.md),this}getOffFillStyle(){return this.md}setSize(t){return this.Sd.fitTo("number"==typeof t?r(t,t):t),this}getSize(){return this.Sd.getSize()}setOnFillStyle(t){return this.pd="function"==typeof t?t(this.pd):t,this.yd&&this.Sd.setFillStyle(this.pd),this}getOnFillStyle(){return this.pd}setButtonShape(t){return this.Sd.setShape(t),this.Ys.Ls(),this}getButtonShape(){return this.Sd.getShape()}Le(){return super.Le(),this.Sd.cn=this.cn,this.Sd.setVisible(this.getVisible()).setPosition(this.getPosition(r(0,0),ti.Content)).Le(),this}hr(){const t=this.Sd.hr().getSize();return this.setContentSize(t),super.hr()}dispose(){return super.dispose(),this.Sd.dispose(),this}setPointerEvents(t){return this.Sd.setPointerEvents(t),this}getPointerEvents(){return this.Sd.getPointerEvents()}setHighlight(t){const i=es(t);return this.Sd.setHighlight(i),this.D.R("highlightchange",{highlight:i}),this.Ys.Ls(),this}getHighlight(){return this.Sd.getHighlight()}}const _o={...Hr,uiElement:wo,buttonShape:Oe.Circle,setButtonShape(t){return{...this,buttonShape:t}},kn(t,i,s,e,h,r){const n=this.applyStylers(new this.uiElement(t,i,s,this.buttonShape,e,h),h);return Yr(n,h,r),n}},Co={...Hr,...Xr,background:qn,buttonBuilder:_o,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},kn(t,i,s,e,h,r){const n=new oo(t,i,s,this.background,e,h),o=n.addElement(Ao);o.addGap();const a=o.addElement(this.buttonBuilder);o.addGap();const l=n.addElement(Ao);l.addGap();const c=l.addElement(Kn);l.addGap(),n.addGap();const u=Object.assign(n,vo,{setTextLabel:c},po,{stylableTexts:[c]},mo,{button:a},So);let d;return u.addEventListener("click",(()=>{u.getLocked()||u.setOn(!u.getOn())})),u.addEventListener("pointerenter",(()=>{u.setHighlight(!0)})),u.addEventListener("pointerleave",(()=>{u.setHighlight(!1)})),u.setMouseStyle(tr.Point),u.setTextFillStyleHidden(h.uiTextFillStyleHidden||h.uiTextFillStyle),u.addEventListener("switch",(t=>{t.state?d&&u.setTextFillStyle(d):(d=u.getTextFillStyle(),u.setTextFillStyle(u.getTextFillStyleHidden()))})),u.setPadding({left:5}),Yr(u,h,r),this.applyStylers(u,h)}}.addStyler($r).addStyler(Ur);class ko extends Rr{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.bd=[],this.xd=2,this.Md="",this.wd=(t,i)=>void 0!==t.label?t.label:i.percentageValues?`${(100*t.value).toFixed(0)}%`:ge(t.value,i.min,i.max),this._d=0,this.Cd=0,this.kd=!1,this.Ys=t,this.Td=r,this.Ou=t.Pe(i).Fe(Wt),this.D.Nt(this.Ou),this.Fd=t.Yr(i).Ie(h.uiTextFillStyle).Xh(h.uiTextFont).setPointerEvents(!1),this.D.Nt(this.Fd),"vertical"===r?(this.Id=140,this.Pd=25):(this.Id=160,this.Pd=15)}rn(){return[this.Ou,this.Fd]}Ld(t){this.Bd=t;const i=Io(t,"vertical"===this.Td?0:90,this.kd);return this.Ou.Ie(i),this.Ys.Ls(),this}Gs(){return this.Bd}Dd(t){return this.Id=t,this.Ys.Ls(),this}Ed(){return this.Id}Rd(t){return this.Pd=t,this.Ys.Ls(),this}zd(){return this.Pd}Vd(t){return this.Md=t,this.Ys.Ls(),this}Od(){return this.Md}Nd(t){return this.wd=t,this.Ys.Ls(),this}setLUTDisplayProportionalSteps(t){if(this.kd=t,this.Bd){const t=Io(this.Bd,"vertical"===this.Td?0:90,this.kd);this.Ou.Ie(t)}return this.Ys.Ls(),this}getLUTDisplayProportionalSteps(){return this.kd}setFillStyle(t){return this.Fd.Ie(t),this.Ys.Ls(),this}getFillStyle(){return this.Fd.$h()}setFont(t){return this.Fd.Xh(t),this.Ys.Ls(),this}getFont(){return this.Fd.Hh()}setTextRotation(t){return this.Cd=t,this.Fd.Wh(t),this.Ys.Ls(),this}getTextRotation(){return this.Fd.jh()}Le(){var t,i,s,e;if(super.Le(),this.dt||!this.getVisible())return this;const h=this.Bd;if(h){const r=this.renderingScale.hs(),n=h.min,o=h.max;if("vertical"===this.Td){const s=this.getPosition({x:-1,y:-1},ti.Content),e=js(s,{x:this.Ou.xi().x+this.xd*r.x,y:0}),a={x:e.x,y:e.y+(this.Md.length>0?this._d*r.y+this.Fd.xi().y:0)+.5*((null===(t=this.bd[0])||void 0===t?void 0:t.xi().y)||0)},l={x:a.x,y:this.getPosition({x:-1,y:1},ti.Content).y-.5*((null===(i=this.bd[this.bd.length-1])||void 0===i?void 0:i.xi().y)||0)};this.Ou.Be({x:s.x,y:a.y}),this.Fd.ul({x:-1,y:-1}).Be(e),h.getSteps().forEach(((t,i)=>{const s=Es(a,l,this.kd?!0===h.getInterpolation()?(t.value-n)/(o-n):.9*(t.value-n)/(o-n):!0===h.getInterpolation()?i/(h.getSteps().length-1):i/h.getSteps().length);this.bd[i].ul({x:-1,y:0}).Be(s)}))}else{const t=this.getPosition({x:-1,y:-1},ti.Content),i=this.getPosition({x:1,y:1},ti.Content),a=this.bd.reduce(((t,i)=>Math.max(t,i.xi().y)),0),l=js(t,{x:.5*((null===(s=this.bd[0])||void 0===s?void 0:s.xi().x)||0),y:a}),c={x:i.x,y:l.y},u={x:c.x-(.5*((null===(e=this.bd[this.bd.length-1])||void 0===e?void 0:e.xi().x)||0)+(this.Md.length>0?this._d*r.x+this.Fd.xi().x:0)),y:l.y},d={x:l.x,y:l.y+this.xd*r.y};this.Ou.Be(d),this.Fd.ul({x:1,y:1}).Be(c),h.getSteps().forEach(((t,i)=>{const s=Es(l,u,this.kd?!0===h.getInterpolation()?(t.value-n)/(o-n):.9*(t.value-n)/(o-n):!0===h.getInterpolation()?i/(h.getSteps().length-1):i/h.getSteps().length);this.bd[i].ul({x:0,y:1}).Be(s)}))}}return this}hr(){if(this.Bd&&this.getVisible()){const t=this.Bd.getSteps();for(let i=this.bd.length;i<t.length;i+=1){const t=this.Ys.Yr(this.renderingScale).setPointerEvents(!1);this.bd.push(t),this.D.Nt(t)}for(let i=0;i<t.length;i+=1)this.bd[i].Ie(this.Fd.$h()).Xh(this.Fd.Hh()).Sr(this.wd(t[i],this.Bd)).Wh(this.Cd);for(let i=t.length;i<this.bd.length;i+=1)this.bd[i].dispose();if(this.bd.length=t.length,this.Fd.Sr(this.Md),"vertical"===this.Td){const t=this.Pd,i=this.Id;this.Ou.Z({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=t+Math.max(this.bd.reduce(((t,i)=>Math.max(t,i.hr().zu().x)),0),this.Fd.hr().zu().x),e=(this.Md.length>0?this._d+this.Fd.hr().zu().y:0)+i+.5*this.bd[0].hr().zu().y+.5*this.bd[this.bd.length-1].hr().zu().y;this.setContentSize({x:s,y:e})}else{const t=this.Id,i=this.Pd;this.Ou.Z({x:t*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=Math.max(this.Md.length>0?this._d+this.Fd.hr().zu().x:0,.5*this.bd[this.bd.length-1].hr().zu().x),e=t+.5*this.bd[0].hr().zu().x+s,h=i+this.xd+this.bd.reduce(((t,i)=>Math.max(t,i.hr().zu().y)),0);this.setContentSize({x:e,y:h})}}else this.bd.forEach((t=>t.dispose())),this.bd.length=0,this.Fd.setVisible(!1),this.Ou.setVisible(!1),this.setContentSize({x:0,y:0});return super.hr()}dispose(){return super.dispose(),this.Ou.dispose(),this.bd.forEach(ci),this.Fd.dispose(),this}setPointerEvents(t){return this.Ou.setPointerEvents(t),this}getPointerEvents(){return this.Ou.getPointerEvents()}}const To={lutElement:{},setLUT(t){return this.lutElement.Ld(t),this},getLUT(){return this.lutElement.Gs()},setLUTLength(t){return this.lutElement.Dd(t),this},getLUTLength(){return this.lutElement.Ed()},setLUTThickness(t){return this.lutElement.Rd(t),this},getLUTThickness(){return this.lutElement.zd()},setLookUpUnit(t){return this.lutElement.Vd(t),this},getLookUpUnit(){return this.lutElement.Od()},setLUTStepValueFormatter(t){return this.lutElement.Nd(t),this},setLUTDisplayProportionalSteps(t){return this.lutElement.setLUTDisplayProportionalSteps(t),this},getLUTDisplayProportionalSteps(){return this.lutElement.getLUTDisplayProportionalSteps()}},Fo={...Hr,...Xr,background:qn,alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},kn(t,i,s,e,h,r){const n=new ao(t,i,s,this.background,e,h),o=n.addElement({kn:()=>new ko(t,i,s,ui,h,this.alignment)}),a=Object.assign(n,po,{stylableTexts:[o]},To,{lutElement:o});return Yr(a,h,r),this.applyStylers(a,h)}}.addStyler($r),Io=(t,i,s)=>{const e=t.getSteps(),h=t.min,r=t.max-h;if(!0===t.getInterpolation())return new it({angle:i,stops:e.map(((i,n)=>({offset:s?(i.value-h)/r:n/(e.length-1),color:i.color||t.color})))});const n=[];for(let i=0;i<e.length;i+=1){const o=e[i];n.push({offset:s?.9*(o.value-h)/r:i/e.length,color:o.color||t.color});const a=i<e.length-1?e[i+1]:void 0;n.push({offset:s?a?.9*(a.value-h)/r:1:a?(i+1)/e.length:1,color:o.color||t.color})}return new it({angle:i,stops:n})},Po={...Hr,...Xr,background:qn,buttonBuilder:_o,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},kn(t,i,s,e,h){const r=new ao(t,i,s,this.background,e,h),n=r.addElement(go),o=n.addElement(Ao);o.addGap();const a=o.addElement(this.buttonBuilder);o.addGap();const l=n.addElement(Ao);l.addGap();const c=l.addElement(Kn);l.addGap();const u=r.addElement({kn:()=>new ko(t,i,s,ui,h,this.alignment)});"vertical"===this.alignment&&u.setMargin({left:h.uiButtonSize+6});const d=Object.assign(r,vo,{setTextLabel:c},po,{stylableTexts:[c,u]},yo("LUTText",[u]),mo,{button:a},To,{lutElement:u},So);let f;return d.addEventListener("click",(()=>{d.getLocked()||d.setOn(!d.getOn())})),d.addEventListener("pointerenter",(()=>{d.setHighlight(!0)})),d.addEventListener("pointerleave",(()=>{d.setHighlight(!1)})),d.setMouseStyle(tr.Point),d.setTextFillStyleHidden(h.uiTextFillStyleHidden||h.uiTextFillStyle),d.addEventListener("switch",(t=>{t.state?f&&d.setTextFillStyle(f):(f=d.getTextFillStyle(),d.setTextFillStyle(d.getTextFillStyleHidden()))})),d.setPadding({left:5}),this.applyStylers(d,h)}}.addStyler($r).addStyler(Ur),Lo=t=>"attach"in t,Bo={alignment:null,title:null,entryStylers:null,legendBoxDisposed:null,entries:[],add(t,i){const s=!i||"object"!=typeof i||void 0===i.toggleVisibilityOnClick||i.toggleVisibilityOnClick,e=null==i?void 0:i.matchStyleExactly,h=i&&"object"==typeof i&&void 0!==i.builder?i.builder:void 0;return this.legendBoxDisposed()||(t instanceof Ua?this.addChart(t,s,h,e):Lo(t)?this.addAttachable(t,s,h,e):t&&this.addDashboard(t,s,h,e)),this},addAttachable(t,i,s,e){const h=t.Gs&&t.Gs(),r=t.$s&&t.$s(),n=void 0!==e&&e;let o=s;if(!o){let t=h?Po.setAlignment(this.alignment):Co;void 0!==r&&(t=t.setButtonShape(r)),o=t}const a=this.addElement(o);if(h&&"setLUT"in a){a.setLUT(h.lut);const t=h.lut.getUnits(),i=h.lookUpProperty,s=t.length>0?t:"x"===i?"x":"y"===i?"y":"z"===i?"z":"";a.setLookUpUnit(s)}this.entryStylers.forEach((t=>t(a)));const l={entry:a,component:t};return this.entries.push(l),a.addEventListener("dispose",(()=>{const t=this.entries.indexOf(l);t>=0&&this.entries.splice(t,1)})),t.attach(a,i,n),i||a.setLocked(!0),this},addChart(t,i,s,e){return t.Gd().forEach((t=>this.addAttachable(t,i,s,e))),this},addDashboard(t,i,s,e){return t.getCells().filter((t=>t.panel instanceof Ua)).forEach((t=>this.addChart(t.panel,i,s,e))),this},setTitle(t){return this.title.setText(t),this},getTitle(){return this.title.getText()},setTitleFillStyle(t){return this.title.setTextFillStyle(t),this},getTitleFillStyle(){return this.title.getTextFillStyle()},setTitleFont(t){return this.title.setTextFont(t),this},getTitleFont(){return this.title.getTextFont()},setTitleRotation(t){return this.title.setTextRotation(t),this},getTitleRotation(){return this.title.getTextRotation()},setEntries(t){return this.entries.slice().forEach((i=>t(i.entry,i.component))),this}},Do={alignment:"vertical",layoutBuilder:Ao,setAlignment(t){return{...this,alignment:t,layoutBuilder:"horizontal"===t?go:Ao}},getAlignment(){return this.alignment},titleBuilder:xo,styleTitle(t){return{...this,titleBuilder:this.titleBuilder.addStyler(t)}},entryStylers:[],styleEntries(t){return{...this,entryStylers:[...this.entryStylers,t]}}},Eo={...Hr,...Xr,...Do,background:qn,kn(t,i,s,e,h,r){const n=this.layoutBuilder.setBackground(this.background).kn(t,i,s,e,h,!1);let o=Object.assign(n,Bo,{alignment:this.alignment,entryStylers:this.entryStylers,legendBoxDisposed:()=>n.dt});o.entries=[];const a=o.addElement("horizontal"===this.alignment?Ao:go),l=a.addElement(this.titleBuilder).setText("Legend").setTextFillStyle(h.legendTitleFillStyle).setTextFont(h.legendTitleFont);return a.addGap(),o=Object.assign(o,{title:l}),"horizontal"===this.alignment&&l.setMargin({right:6}),Yr(o,h,r),this.applyStylers(o,h)}}.addStyler(((t,i)=>t.setPadding(5).setBackground((t=>{i.legendBorderRadius&&Ve(t)&&t.setCornerRadius(i.legendBorderRadius)}))));class Ro extends Rr{constructor(t,i,s,e,h){super(t,i,s,e,h),this.$d=10,this.Ud=ei.Up,this.Yd=0,this.Tn="major",this.Da=t.Yr(this.renderingScale).$r(us).Ur(us),this.D.Nt(this.Da),this.Oe=t.Ge(this.renderingScale),this.D.Nt(this.Oe)}rn(){return[this.Da]}Le(){if(super.Le(),this.dt)return this;const t=ot(this.getPosition(),this.scale,this.renderingScale),i=this.renderingScale.Pi(t,{x:this.Ud===ei.Right?-this.$d:this.Ud===ei.Left?this.$d:0,y:this.Ud===ei.Up?-this.$d:this.Ud===ei.Down?this.$d:0}),s=this.renderingScale.Pi(i,{x:this.Ud===ei.Right?-this.Yd:this.Ud===ei.Left?this.Yd:0,y:this.Ud===ei.Up?-this.Yd:this.Ud===ei.Down?this.Yd:0});return this.Oe.Ue(t).$e(i),this.Da.Be(s).ul(this.Ud===ei.Up?{x:0,y:1}:this.Ud===ei.Down?{x:0,y:-1}:this.Ud===ei.Right?{x:1,y:0}:{x:-1,y:0}),this}hr(){const t=this.Oe.In().getThickness();return this.size=this.Ud===ei.Left||this.Ud===ei.Right?{x:this.$d+this.Yd+this.Da.hr().zu().x,y:t}:{y:this.$d+this.Yd+this.Da.hr().zu().y,x:t},super.hr()}dispose(){return super.dispose(),this.Da.dispose(),this.Oe.dispose(),this}setVisible(t){return super.setVisible(t),this.Da.setVisible(t),this.Oe.setVisible(t),this}setPointerEvents(t){return this.Da.setPointerEvents(t),this.Oe.setPointerEvents(t),this}getPointerEvents(){return this.Da.getPointerEvents()}getText(){return this.Da.wr()}setTextFillStyle(t){return this.Da.Ie(t),this.Ys.Ls(),this}getTextFillStyle(){return this.Da.$h()}setTextFont(t){return this.Da.Xh(t),this}setTextRotation(t){return this.Da.Wh(t),this}getTextRotation(){return this.Da.jh()}getTextFont(){return this.Da.Hh()}setText(t){return this.Da.Sr(t),this.Ys.Ls(),this}setDirection(t){return this.Ud=t,this.Ys.Ls(),this}getDirection(){return this.Ud}setPointerLength(t){return this.$d=t,this.Ys.Ls(),this}getPointerLength(){return this.$d}setTickLabelPadding(t){return this.Yd=t,this.Ys.Ls(),this}getTickLabelPadding(){return this.Yd}setTickStyle(t){return this.Oe.Ne(t),this.Ys.Ls(),this}getTickStyle(){return this.Oe.In()}}const zo={...Hr,direction:ei.Up,setDirection(t){return this.direction=t,this},kn(t,i,s,e,h,r){const n=this.direction,o=new Ro(t,i,s,e,h);return Yr(o,h,r),o.setDirection(n),this.applyStylers(o,h)}}.addStyler($r),Vo=zo.addStyler(((t,i)=>(t.Tn="major",t.setPointerLength(i.xAxisNumericTicks.majorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.majorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.majorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.majorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.majorTickStyle.labelFillStyle)))),Oo=zo.addStyler(((t,i)=>(t.Tn="minor",t.setPointerLength(i.xAxisNumericTicks.minorTickStyle.tickLength).setTickLabelPadding(i.xAxisNumericTicks.minorTickStyle.tickPadding).setTickStyle(i.xAxisNumericTicks.minorTickStyle.tickStyle).setTextFont(i.xAxisNumericTicks.minorTickStyle.labelFont).setTextFillStyle(i.xAxisNumericTicks.minorTickStyle.labelFillStyle)))),No=Co.addStyler((t=>t.addEventListener("switch",(i=>!0===i.state?setTimeout((()=>t.setOn(!1)),300):void 0)))),Go=Eo.setAlignment("horizontal"),$o=Eo.setAlignment("vertical"),Uo={TextBox:xo,CheckBox:Co,ButtonBox:No,PointableTextBox:Mo,AxisTickMajor:Vo,AxisTickMinor:Oo,LUTRange:Fo},Yo={HorizontalLegendBox:Go,VerticalLegendBox:$o};class Ho extends Fr{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Hd=h}}class Xo extends Tr{constructor(t,i,s,e,h,r,n,o,a,l,c,u,d,f,A,g){var v,y,p;super(l,a,n,f,A,{numeric:a.getWidth({x:f.xAxisNumericTicks,y:f.yAxisNumericTicks}),datetime:a.getWidth({x:f.xAxisDateTimeTicks,y:f.yAxisDateTimeTicks}),time:a.getWidth({x:f.xAxisTimeTicks,y:f.yAxisTimeTicks})},g),this.Xd=new Map,this.Wd=void 0,this.jd=0,this.Zd=[],this.Qd=[],this.hh=fr.fitting,this.Jd=!0,this.Kd=[],this.qd=t=>{const i=this.Qd.indexOf(t);i>=0&&this.Qd.splice(i,1)},this.tf=t=>(this.Qd.indexOf(t)<0&&this.Qd.push(t),this.qd),this.if="center",this.sf=!0,this.ef=zi(this.Kd),this.Id={relative:1},this.hf=0,this.rf=0,this.nf=(t,i)=>i.getAllocatesAxisSpace()?Math.max(t,i.update().Ln()):t,this.af=t=>{const i=this.Zd.indexOf(t);-1!==i&&this.Zd.splice(i,1)},this.cs=Ee.onHover,this.D=new zt,this.ze={},this.isX=this.Lh.getWidth({x:!0,y:!1}),this.isY=this.Lh.getHeight({x:!0,y:!1}),this.lf=t,this.cf=i,this.uf=e,this.df=h,this.chart=l,this.ff=u,this.Af=s,this.gs=r,"logarithmic"===g.type&&this.chart.St.Zo(Gr.Kn),this.Uh=jo,d(this,this.tf),n.gf=this,this.vf=c,this.yf=this.vf>50?1:-1,this.pf=(p=this.Lh.toPoint(0,-this.yf),Math.abs(p.x)>=Math.abs(p.y)?p.x>=0?ei.Right:ei.Left:p.y>=0?ei.Up:ei.Down),this.mf=o,this.Sf=this.ot instanceof pe?(new be).Qi(this.Lh.toVec2(this.ot,this.mf)):(new xe).Qi(this.Lh.toVec2(this.ot,this.mf)),this.bf=this.chart.xf,this.Mf=(new be).Qi(this.Lh.toVec2(this.Lh.getWidth(this.bf),this.mf)),this.wf=this.cf.Ge(this.Sf).setPointerEvents(!1),this._f=this.Af.Pe(this.bf).Ie(a.getWidth({x:f.xAxisOverlayStyle,y:f.yAxisOverlayStyle})).Fe(Wt).Et(f.highlightColorOffsetAxisOverlay||f.highlightColorOffset),this.Cf=this.Af.Pe(this.bf).Ie(a.getWidth({x:f.xAxisZoomingBandFillStyle,y:f.yAxisZoomingBandFillStyle})).Fe(a.getWidth({x:f.xAxisZoomingBandStrokeStyle,y:f.yAxisZoomingBandStrokeStyle})).Et(f.highlightColorOffsetAxisOverlay||f.highlightColorOffset),this.Mh=this.Af.Yr(this.Sf).setPointerEvents(!1).Wh(this.Lh.getTitleTextRotation(this.yf)).Ur(us).$r(us),this.chart.St.xs.bs(this._f,(t=>this._f.Bt(t)),{animationEnabled:this.ah}),this.D.Nt(this._f),this.wf.Ne(a.getWidth({x:f.xAxisStrokeStyle,y:f.yAxisStrokeStyle})),this.Mh.Ie(a.getWidth({x:f.xAxisTitleFillStyle,y:f.yAxisTitleFillStyle})).Xh(a.getWidth({x:f.xAxisTitleFont,y:f.yAxisTitleFont})),this.vs=r.ys(this,{}),this.Zh=this.vs.kf([this.Mh]).Ps(f.effectsText),this.Tf=null!==(v=a.getWidth({x:f.xAxisMarginAfterTicks,y:f.yAxisMarginAfterTicks}))&&void 0!==v?v:7,this.Ff=null!==(y=a.getWidth({x:f.xAxisMarginAfterTitle,y:f.yAxisMarginAfterTitle}))&&void 0!==y?y:7}setHighlight(t){return this.chart.St.xs.Rs(this._f,t),this.D.R("highlightchange",{highlight:es(t)}),this}getHighlight(){return this.chart.St.xs.Cs(this)}Nr(){return this.fh}Gr(){return void 0!==this.qh}setKeepTickLabelsInAxisBounds(t){return this.sf=t,this.chart.St.Ls(),this}getKeepTickLabelsInAxisBounds(){return this.sf}setTickStrategy(t,i){return super.Rh(t,i)}getTickStrategy(){return this.sh}addBand(t=!0){const i=t?this.df:this.uf,s=new ur(i,this.chart,this.ef,this,this.Sf,this.Lh,this._t,this.gs);return this.Kd.push(s),s}addConstantLine(t=!0){const i=t?this.df:this.uf,s=new dr(i,this.chart,this.ef,this,this.Sf,this.Lh,this._t,this.gs);return this.Kd.push(s),s}If(t){this.Kd.forEach(t)}Pf(t){return this.Kd.map(t)}getHighlighters(){return this.Kd}setThickness(t){return"number"==typeof t?(this.Lf=t,this.Bf=t):"object"==typeof t?(this.Lf=t.min,this.Bf=t.max):void 0===t&&(this.Lf=void 0,this.Bf=void 0),this.chart.St.Ls(),this}getThickness(){return{min:this.Lf,max:this.Bf}}Df(){return this.Qd}lr(t){return{}}Ar(t,i,s,e,h){const r=i.th;return{keyValue:t,tickLevel:i,labelText:s,labelPosition:this.Lh.toPoint(t,0),labelAlignment:this.Lh.toPoint(r.getLabelAlignment(),-this.yf),labelOffset:{x:0,y:0},labelRotation:i.th.labelRotation}}yr(t,i){if(!this.ft)return{Ef:0,Rf:0,zf:0,ticksInfo:i};const s=this.Mh&&this.Mh.wr().length>0&&this.getTitleFillStyle()!==V,e=this.Lh.getHeight(s?this.Mh.hr().zu():{x:0,y:0})+(s?this.Ff:0);let h=0;this.eh.forEach(((t,i)=>{const s=i.th.tickLength+i.th.tickPadding;t.forEach((t=>{if(!t.sr.getVisible()||O(t.sr.$h()))return void(h=Math.max(h,s));const i=s+this.Lh.getHeight(t.sr.hr().zu());h=Math.max(h,i)}))}));const r=this.Zd.reduce(this.nf,0);h=Math.max(h,r),h+=this.Tf;const n=fi(e+h,void 0!==this.Lf?this.Lf:0,void 0!==this.Bf?this.Bf:bs);return this.jd=n,{Ef:h,Rf:e,zf:n,ticksInfo:i}}br(t,i){return new Ho(i,t,this.cf,this.Sf,this.Sf)}_h(){return this.Sf}Qh(){if(this.Xd){for(const t of this.Xd)t[1].grid.dispose(),t[1].tick.dispose();this.Xd.clear()}super.Qh()}Rr(t,i){return"linear"===this.Dh.type||"linear-highPrecision"===this.Dh.type?Be(t,i,this.ot):De(t,i,this.ot)}Vf(t,i){return i instanceof pe?Be:De}Or(t,i,s){if("logarithmic"!==this.Dh.type){const e=this.ot.Zi(i-t);return{min:t-s*e,max:i+s*e}}const e=this.ot,h={start:e.$,end:e.U};e.W(t,i).Ti();const r={min:e.Pi(t,-s),max:e.Pi(i,s)};return e.W(h.start,h.end).Ti(),r}er(t){var i,s;const e=this.nr(),h=e.min,r=e.max,n=this.eh.size>0,o=(null===(i=this.rr)||void 0===i?void 0:i.physicalAxisSize)!==t.physicalAxisSize,a=(null===(s=this.rr)||void 0===s?void 0:s.min)!==h||this.rr.max!==r;return!(!n||o||a)}Le(t){const i=this.getVisible()&&t.Of>0,s=this.ot.getInnerStart()<this.ot.getInnerEnd()?this.ot.getInnerStart():this.ot.getInnerEnd(),e=this.ot.getInnerEnd()>this.ot.getInnerStart()?this.ot.getInnerEnd():this.ot.getInnerStart();i||this.Qh();const h=this.wf.In().getThickness()*this.yf/2,r=this.mf.getInnerInterval(),n=this.vf/100*r,o=n+t.Nf,a=r*this.yf,l=o+h;if("Empty"!==this.sh&&i){const i=this.ot.pi(),s=this.ot.mi(),e=Math.min(i,s),h=Math.max(i,s);for(const[i,s]of this.eh){let r=this.Xd.get(i);if(!r)if(i.Ye)r={grid:this.lf[0].Gf(this.Sf).setPointerEvents(!1),tick:this.lf[0].Gf(this.Sf).setPointerEvents(!1)};else if("$f"in i){const t=Array.from(this.eh.keys()).filter((t=>"$f"in t)).reverse().indexOf(i),s=this.lf[t];if(!s)throw new Error("Not enough tick layers. This is an internal LCJS error - if you see this, please contact LightningChart support.");r={grid:s.Gf(this.Sf).setPointerEvents(!1),tick:s.Gf(this.Sf).setPointerEvents(!1)}}if(!r)continue;r.grid.ti(),r.tick.ti();const c=i.th,u=n-a*c.getGridStrokeLength(),d=l+c.getTickLength()*this.yf,f=d+c.getTickPadding()*this.yf;for(const[i,n]of s){const i=t.ticksInfo.get(n);if(!i)continue;const s={start:this.Lh.toPoint(n.S,o),end:this.Lh.toPoint(n.S,u)},a={start:this.Lh.toPoint(n.S,l),end:this.Lh.toPoint(n.S,d)};let c=0;if(this.sf){const t=n.sr.zu(),s=this.ot.nt(i.keyValue)+this.Lh.getWidth(i.labelOffset)+(-.5*this.Lh.getWidth(i.labelAlignment)-.5)*this.Lh.getWidth(t),r=s+this.Lh.getWidth(t);c=r>h?h-r:s<e?e-s:0}n.sr.Be(this.Lh.toPoint(this.ot.Pi(n.S,c),f)).ul(i.labelAlignment).Wh(i.labelRotation),r.grid.lo().Uf(s.start,s.end),r.tick.lo().Uf(a.start,a.end)}r.grid.Ne(i.th.getGridStrokeStyle()),r.tick.Ne(i.th.getTickStyle()),this.Xd.set(i,r)}}const c=l,u=c+this.yf*t.zf,d={start:this.Lh.toVec2(this.ot.getInnerStart(),c),end:this.Lh.toVec2(this.ot.getInnerEnd(),u)},f=ot(d.start,this.Sf,this.bf),A=ot(d.end,this.Sf,this.bf);this.wf.Ue(this.Lh.toPoint(s,o)).$e(this.Lh.toPoint(e,o)).setVisible(i);const g=o+t.Ef*this.yf;if(this.Mh.Be(this.Lh.toPoint(this.Lh.getWidth(ot("center"===this.if?Ws(js(f,A),.5):"start"===this.if?f:A,this.bf,this.Sf)),g)).ul(this.Lh.toPoint("center"===this.if?0:"start"===this.if?-1:1,-1*this.yf)).setVisible(i),this.Wd){const i=this.vf/100*r+t.Nf,s=-this.yf*r-t.Nf,e={start:this.Lh.toVec2(this.Wd.min,l+this.yf*this.jd),end:this.Lh.toVec2(this.Wd.max,i+s)},h=ot(e.start,this.Sf,this.bf),n=ot(e.end,this.Sf,this.bf);this.Cf.Be(h).Z(Zs(n,h)).setVisible(!0)}else this.Cf.setVisible(!1);this._f.Be(f).Z(Zs(A,f)).setVisible(i);for(const s of this.Zd)s.update().plot(i,o,a,t.Nf,l);for(const t of this.Kd)t.Le();return{width:Math.abs(A.x-f.x),height:Math.abs(A.y-f.y),left:Math.min(f.x,A.x),right:this.bf.x.getInnerEnd()-Math.max(f.x,A.x),bottom:Math.min(f.y,A.y),top:this.bf.y.getInnerEnd()-Math.max(f.y,A.y)}}setLength(t){return this.Id=t,this.chart.St.Ls(),this}getLength(){return this.Id}setMargins(t,i){return this.hf=t,this.rf=i,this.chart.St.Ls(),this}getMargins(){return{start:this.hf,end:this.rf}}getStackIndex(){var t,i;return null!==(i=null===(t=[...this.chart.Yf,...this.chart.Hf,...this.chart.Xf,...this.chart.Wf].find((t=>t.axis===this)))||void 0===t?void 0:t.iStack)&&void 0!==i?i:0}getParallelIndex(){var t,i;return null!==(i=null===(t=[...this.chart.Yf,...this.chart.Hf,...this.chart.Xf,...this.chart.Wf].find((t=>t.axis===this)))||void 0===t?void 0:t.iParallel)&&void 0!==i?i:0}jf(){return this.jd}Zf(t,i){i=i||Uo.AxisTickMajor;const s=new Nr(this,t?this.lf[0]:this.Af,this.Af,this.ot,this.Mf,this.Mf,this.Lh,this.pf,this.af,this._t,i).setTextFormatter(this.formatValue);return this.Zd.push(s),this.rr=void 0,s}Qf(t,i){const s=-this.Lh.getWidth(i);this.pan(s)}pan(t,i){const s=this.zh,e=this.Vh,h=this.ot.Pi(s,t),r=this.ot.Pi(e,t);if(this.tr(h,r,{allowIntervalLengthChange:!1,skipIntervalRestriction:!1}),!1!==(null==i?void 0:i.releaseScrollingAxisIfLiveReached)&&this.hh===fr.progressive&&this.uh){const t=this.Yh();t&&(this.Vh>this.zh&&this.Vh>=t.max||this.Vh<this.zh&&this.zh>=t.max)&&this.setStopped(!1)}if(!1!==(null==i?void 0:i.releaseScrollingAxisIfLiveReached)&&this.hh===fr.regressive&&this.uh){const t=this.Yh();t&&(this.Vh<this.zh&&this.Vh<=t.min||this.Vh>this.zh&&this.zh<=t.min)&&this.setStopped(!1)}}zoom(t,i){const s=this.ot.nt(this.zh),e=this.ot.nt(this.Vh),h=this.ot.nt(t),r=fi((h-s)/(e-s),0,1),n=.2*this.ot.Si(),o=r*n*-i,a=(1-r)*n*i,l=this.ot.Pi(this.zh,o),c=this.ot.Pi(this.Vh,a),u=this.Vr();let d=l,f=c;if(void 0!==(null==u?void 0:u.intervalMax)&&Math.abs(f-d)>u.intervalMax){const t=u.intervalMax-Math.abs(f-d);d-=t*r,f+=t*(1-r)}if(void 0!==(null==u?void 0:u.intervalMin)&&Math.abs(f-d)<u.intervalMin){const t=u.intervalMin-Math.abs(f-d);d-=t*r,f+=t*(1-r)}this.tr(d,f,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1})}addCustomTick(t){return this.Zf(!0,t)}setTitlePosition(t){return this.if=t,this.chart.St.Ls(),this}getTitlePosition(){return this.if}getUiPosition(){return this.vf}setStrokeStyle(t){return this.wf.Ne(t),this.cf.Ls(),this}getStrokeStyle(){return this.wf.In()}getOverlayStyle(){return this._f.$h()}setOverlayStyle(t){return this._f.Ie(t),this.cf.Ls(),this}setAnimationHighlight(t){return this.chart.St.xs.zs(this._f,t),this}getAnimationHighlight(){return this.chart.St.xs.Vs(this._f)}getMarginAfterTicks(){return this.Tf}setMarginAfterTicks(t){return this.Tf=t,this.cf.Ls(),this}getMarginAfterTitle(){return this.Ff}setMarginAfterTitle(t){return this.Ff=t,this.cf.Ls(),this}H(){return this.ot.H(),this}X(){return this.ot.X(),this}dispose(){this.wf.dispose(),this._f.dispose(),this.Cf.dispose(),this.Mh.dispose(),this.ir(ci);for(const t of this.Xd.values())t.grid.dispose(),t.tick.dispose();return this.Qd.slice().forEach(ci),this.Kd.slice().forEach(ci),this.ff(this),this.D.R("dispose",{}),this}setVisible(t){this.wf.setVisible(t),this.Mh.setVisible(t),this._f.setVisible(t),this.ir((i=>{i.Ts(t)}));for(const i of this.Xd.values())i.grid.setVisible(t),i.tick.setVisible(t);return super.setVisible(t),this.chart.St.Ls(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationHighlight(this.ah),this}setHighlightOnHover(t){return this.cs=t?Ee.onHover:Ee.noHighlighting,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.cs!==Ee.noHighlighting}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}set draggable(t){this.D.draggable=t}get draggable(){return this.D.draggable}setUserInteractions(t){return this.ze=void 0===t?{pan:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,chartInteractions:{pan:!1,paginate:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,restorePrevious:!1}}:t,this}getUserInteractions(){return this.ze}}var Wo;!function(t){t.Start="start",t.Center="center",t.End="end"}(Wo||(Wo={}));const jo=t=>t.curEnd>t.curStart?{startMin:t.dataMin,endMax:t.dataMax}:{endMin:t.dataMin,startMax:t.dataMax},Zo={getWidth:t=>t.x,getHeight:t=>t.y,toVec2:(t,i)=>({x:t,y:i}),toPoint:(t,i)=>r(t,i)},Qo={getWidth:t=>t.y,getHeight:t=>t.x,toVec2:(t,i)=>({x:i,y:t}),toPoint:(t,i)=>r(i,t)},Jo=t=>!!(t&&"object"==typeof t&&"x"in t&&t.x instanceof Xo&&"y"in t&&t.y instanceof Xo),Ko=i({type:"tick-style",gridStrokeLength:1,gridStrokeStyle:new vh,tickLength:7,tickStyle:new vh,tickPadding:0,labelFont:new hh,labelFillStyle:new $,labelAlignment:0,labelRotation:0,labelShadow:void 0});class qo extends Ko{constructor(t){super(t)}setGridStrokeLength(t){return this.set("gridStrokeLength",t)}getGridStrokeLength(){return this.get("gridStrokeLength")}setGridStrokeStyle(t){return this.set("gridStrokeStyle","function"==typeof t?t(this.get("gridStrokeStyle")):t)}getGridStrokeStyle(){return this.get("gridStrokeStyle")}setTickLength(t){return this.set("tickLength",t)}getTickLength(){return this.get("tickLength")}setTickStyle(t){return this.set("tickStyle","function"==typeof t?t(this.get("tickStyle")):t)}getTickStyle(){return this.get("tickStyle")}setTickPadding(t){return this.set("tickPadding",t)}getTickPadding(){return this.get("tickPadding")}setLabelFillStyle(t){return this.set("labelFillStyle","function"==typeof t?t(this.get("labelFillStyle")):t)}getLabelFillStyle(){return this.get("labelFillStyle")}setLabelShadow(t){return this.set("labelShadow",t)}getLabelShadow(){return this.get("labelShadow")}setLabelFont(t){return this.set("labelFont","function"==typeof t?t(this.get("labelFont")):t)}getLabelFont(){return this.get("labelFont")}setLabelAlignment(t){return this.set("labelAlignment",t)}getLabelAlignment(){return this.get("labelAlignment")}setLabelRotation(t){return this.set("labelRotation",t)}getLabelRotation(){return this.get("labelRotation")}}const ta=t=>!(!t||"object"!=typeof t||!("type"in t)||"tick-style"!==t.type),ia=new qo({labelFillStyle:V,gridStrokeStyle:Wt,tickStyle:Wt}),sa=t=>ta(t)&&O(t.labelFillStyle)&&jt(t.gridStrokeStyle)&&jt(t.tickStyle),ea=1e6,ha=i({type:"time-ticks",cursorFormatter:void 0,timeOrigin:void 0,majorTickStyle:new qo,minorTickStyle:new qo,majorFormattingFunction:void 0,minorFormattingFunction:void 0}),ra=36e5,na=6e4,oa=1e3,aa=1e-6,la=(t,i)=>{const s=i-t;return s>=864e5?"MajorHours12":s>=ra?"MajorHours":s>=6e5?"MajorMinutes15":s>=9e4?"MajorMinutes":s>=10500?"MajorSeconds15":s>=oa?"MajorSeconds":s>=100?"MajorMilliseconds100":s>=10?"MajorMilliseconds10":s>=1?"MajorMilliseconds":s>=.1?"MajorMicroseconds100":s>=.01?"MajorMicroseconds10":s>=.001?"MajorMicroseconds":s<=.001?"MajorNanoseconds100":"Unknown"},ca={hhmmss:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/ra);i%=ra;const h=Math.floor(i/na);i%=na;const r=Math.floor(i/oa);return`${s}${Qi(e,2)}:${Qi(h,2)}:${Qi(r,2)}`},hhmmssmmm:t=>{let i=Math.abs(t);const s=t>=0?"":"-",e=Math.floor(i/ra);i%=ra;const h=Math.floor(i/na);i%=na;const r=Math.floor(i/oa);i%=oa;const n=Math.floor(i/1);return`${s}${Qi(e,2)}:${Qi(h,2)}:${Qi(r,2)}.${Qi(n,3)}`},hhmmssmmmuuu:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/ra),h=Math.floor(i/na)%60,r=Math.floor(i/oa)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}).split(".")[1];return`${s}${Qi(e,2)}:${Qi(h,2)}:${Qi(r,2)}.${Qi(n,3)}${o}`},hhmmssmmmuuunnn:t=>{const i=Math.abs(t),s=t>=0?"":"-",e=Math.floor(i/ra),h=Math.floor(i/na)%60,r=Math.floor(i/oa)%60,n=Math.floor(i/1)%1e3,o=t.toLocaleString("en-US",{minimumFractionDigits:6,maximumFractionDigits:6}).split(".")[1];return`${s}${Qi(e,2)}:${Qi(h,2)}:${Qi(r,2)}.${Qi(n,3)}${o}`}},ua={MajorHours12:{major:{format:ca.hhmmss,getKeyValues:(t,i,s,e)=>{const h=432e5;return t=Math.floor(t/(4*h))*h*4,Sr(t,i,h,void 0,ea)},fitKeyValues:xr({ignore:"first"},2,4)},minor:{format:ca.hhmmss,getKeyValues:(t,i,s,e)=>mr(t,i,36e5,ea),fitKeyValues:xr({},2,3,4,6)},defaultValueFormatter:ca.hhmmss},MajorHours:{major:{format:ca.hhmmss,getKeyValues:(t,i,s,e)=>{const h=ra;return t=Math.floor(t/(12*h))*h*12,Sr(t,i,h,void 0,ea)},fitKeyValues:xr({ignore:"first"},2,6,12)},minor:{format:ca.hhmmss,getKeyValues:(t,i,s,e)=>mr(t,i,3e5,ea),fitKeyValues:xr({},2,4,6)},defaultValueFormatter:ca.hhmmss},MajorMinutes15:{major:{format:ca.hhmmss,getKeyValues:(t,i,s,e)=>(t=Math.floor(t/ra)*ra,Sr(t,i,9e5,void 0,ea)),fitKeyValues:xr({ignore:"first"},2)},minor:{format:ca.hhmmss,getKeyValues:(t,i,s,e)=>mr(t,i,6e4,ea),fitKeyValues:xr({},3,5)},defaultValueFormatter:ca.hhmmss},MajorMinutes:{major:{format:ca.hhmmss,getKeyValues:(t,i,s,e)=>{const h=na;return t=Math.floor(t/6e5)*h*10,Sr(t,i,h,void 0,ea)},fitKeyValues:xr({ignore:"first"},2,5)},minor:{format:ca.hhmmss,getKeyValues:(t,i,s,e)=>mr(t,i,5e3,ea),fitKeyValues:xr({},2,3,4,6)},defaultValueFormatter:ca.hhmmss},MajorSeconds15:{major:{format:ca.hhmmss,getKeyValues:(t,i,s,e)=>{const h=15e3;return t=Math.floor(t/6e4)*h*4,Sr(t,i,h,void 0,ea)},fitKeyValues:xr({ignore:"first"},2,4)},minor:{format:ca.hhmmss,getKeyValues:(t,i,s,e)=>mr(t,i,1e3,ea),fitKeyValues:xr({},3,5)},defaultValueFormatter:ca.hhmmss},MajorSeconds:{major:{format:ca.hhmmss,getKeyValues:(t,i,s,e)=>{const h=oa;return t=Math.floor(t/1e4)*h*10,Sr(t,i,h,void 0,ea)},fitKeyValues:xr({ignore:"first"},2,5)},minor:{format:ca.hhmmssmmm,getKeyValues:(t,i,s,e)=>mr(t,i,100,ea),fitKeyValues:xr({},2,3,5)},defaultValueFormatter:ca.hhmmssmmm},MajorMilliseconds100:{major:{format:ca.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=100*Math.floor(t/1e3)*10,Sr(t,i,100,void 0,ea)),fitKeyValues:xr({ignore:"first"},2,5)},minor:{format:ca.hhmmssmmm,getKeyValues:(t,i,s,e)=>mr(t,i,10,ea),fitKeyValues:xr({},2,3,5)},defaultValueFormatter:ca.hhmmssmmm},MajorMilliseconds10:{major:{format:ca.hhmmssmmm,getKeyValues:(t,i,s,e)=>(t=10*Math.floor(t/100)*10,Sr(t,i,10,void 0,ea)),fitKeyValues:xr({ignore:"first"},2,5)},minor:{format:ca.hhmmssmmm,getKeyValues:(t,i,s,e)=>mr(t,i,1,ea),fitKeyValues:xr({},2,3,5)},defaultValueFormatter:ca.hhmmssmmm},MajorMilliseconds:{major:{format:ca.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=1*Math.floor(t/10)*10,Sr(t,i,1,void 0,ea)),fitKeyValues:xr({ignore:"first"},2,5)},minor:{format:ca.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>mr(t,i,.1,ea),fitKeyValues:xr({},2)},defaultValueFormatter:ca.hhmmssmmmuuu},MajorMicroseconds100:{major:{format:ca.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>(t=.1*Math.floor(t/1)*10,Sr(t,i,.1,void 0,ea)),fitKeyValues:xr({ignore:"first"},2,5)},minor:{format:ca.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>mr(t,i,.01,ea),fitKeyValues:xr({},2,3,5)},defaultValueFormatter:ca.hhmmssmmmuuu},MajorMicroseconds10:{major:{format:ca.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>{const h=.01;return t=Math.floor(t/.1)*h*10,Sr(t,i,h,void 0,ea)},fitKeyValues:xr({ignore:"first"},2,5)},minor:{format:ca.hhmmssmmmuuu,getKeyValues:(t,i,s,e)=>mr(t,i,.001,ea),fitKeyValues:xr({},2,3,5)},defaultValueFormatter:ca.hhmmssmmmuuu},MajorMicroseconds:{major:{format:ca.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=.001;return t=Math.floor(t/.01)*h*10,Sr(t,i,h,void 0,ea)},fitKeyValues:xr({ignore:"first"},2,5)},minor:{format:ca.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>mr(t,i,100*aa,ea),fitKeyValues:xr({},2,3,5)},defaultValueFormatter:ca.hhmmssmmmuuunnn},MajorNanoseconds100:{major:{format:ca.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>{const h=100*aa;return t=Math.floor(t/.001)*h*10,Sr(t,i,h,void 0,ea)},fitKeyValues:xr({ignore:"first"},2,5)},minor:{format:ca.hhmmssmmmuuunnn,getKeyValues:(t,i,s,e)=>mr(t,i,10*aa,ea),fitKeyValues:xr({},2,3,5)},defaultValueFormatter:ca.hhmmssmmmuuunnn},Unknown:{major:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},minor:{format:(t,i,s)=>"",getKeyValues:(t,i,s,e)=>[],fitKeyValues:void 0},defaultValueFormatter:(t,i,s)=>""}};class da extends ha{We(t){const i=this.timeOrigin||0,s=[{sr:"Major ticks",$f:0,th:this.majorTickStyle,He:this.majorFormattingFunction?this.majorFormattingFunction:(t,s,e)=>{const h=la(Math.min(s.start,s.end),Math.max(s.start,s.end));return(0,ua[h].major.format)(t+i,s,e)},jr:(t,i,s,e,h)=>{const r=la(s,e);return(0,ua[r].major.getKeyValues)(t,i,s,e,h)},Th:{_r:(t,i,s,e,h,r)=>{const n=la(h,r),o=ua[n].major.fitKeyValues;if(o)return o(t,i,s,e,h,r)},kr:"hide-label"},Zr:void 0}];return ta(this.minorTickStyle)&&s.push({sr:"Minor ticks",$f:1,th:this.minorTickStyle,He:this.minorFormattingFunction?this.minorFormattingFunction:(t,s,e)=>{const h=la(Math.min(s.start,s.end),Math.max(s.start,s.end));return(0,ua[h].minor.format)(t+i,s,e)},jr:(t,i,s,e,h)=>{const r=la(s,e);return(0,ua[r].minor.getKeyValues)(t,i,s,e,h)},Th:{_r:(t,i,s,e,h,r)=>{const n=la(h,r),o=ua[n].minor.fitKeyValues;if(o)return o(t,i,s,e,h,r)},kr:"hide-tick"},Zr:void 0}),{je:[],Ze:s,Qe:this.cursorFormatter||((t,s,e)=>{const h=la(Math.min(s.start,s.end),Math.max(s.start,s.end));return ua[h].defaultValueFormatter(t+i,s,e)}),Je:1e-4,Ke:864e6}}setTickStyle(t){return this.setMajorTickStyle(t).setMinorTickStyle(t)}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTimeOrigin(t){return this.set("timeOrigin",t)}getTimeOrigin(){return this.get("timeOrigin")}setFormattingFunction(t){return this.withMutations((i=>i.set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const fa=(t,i,s,e,h)=>(r,n)=>o=>{const a=new Date(o+r),l={year:n?a.getUTCFullYear():a.getFullYear(),monthIndex:n?a.getUTCMonth():a.getMonth(),day:n?a.getUTCDate():a.getDate(),hours:n?a.getUTCHours():a.getHours(),minutes:n?a.getUTCMinutes():a.getMinutes(),seconds:n?a.getUTCSeconds():a.getSeconds(),millis:n?a.getUTCMilliseconds():a.getMilliseconds()},c=e?e(l):void 0;if(0===t&&!0===c)return o;const u=l[i];h.includes("year")&&(l.year=Math.floor(l.year/s)*s),h.includes("monthIndex")&&(l.monthIndex=0),h.includes("day")&&(l.day=1),h.includes("hours")&&(l.hours=0),h.includes("minutes")&&(l.minutes=0),h.includes("seconds")&&(l.seconds=0),h.includes("millis")&&(l.millis=0);let d=(0===t?1:t)*s;return-1===t&&!1===c&&(d=0),0!==d&&(l[i]=s*(d>0?Math.floor((u+d)/s):Math.ceil((u+d)/s))),n?Date.UTC(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis)-r:new Date(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis).getTime()-r},Aa=(t,i,s,...e)=>fa(-1,t,i,s,e),ga=(t,i,s,...e)=>fa(-1,t,i,s,e),va=(t,i,s,...e)=>fa(0,t,i,s,e),ya=(t,i,...s)=>fa(1,t,i,void 0,s),pa=t=>(i,s)=>e=>{const h=new Date(e+i),r=s?h.getUTCDay():h.getDay(),n=1===r&&0===(s?h.getUTCHours():h.getHours())&&0===(s?h.getUTCMinutes():h.getMinutes())&&0===h.getSeconds()&&0===h.getMilliseconds();if(0===t&&!0===n)return e;let o=s?h.getUTCDate():h.getDate();return-1===t&&1===r&&!1===n||(-1===t?o-=r>=2?r-1:r+6:o+=r>0?8-r:1),s?Date.UTC(h.getUTCFullYear(),h.getUTCMonth(),o,0,0,0,0)-i:new Date(h.getFullYear(),h.getMonth(),o,0,0,0,0).getTime()-i},ma=[{label:"MilliSecond1",unit:1,irregular:!1,greatTicks:void 0,majorTicks:{fitFunction:xr({offset:0},2,5)},minorTicks:{amount:4,fitFunction:xr(void 0,2)}},{label:"MilliSecond10",unit:10,irregular:!1,greatTicks:{getReferenceKeyValue:Aa("millis",10,(t=>t.millis%10==0),"millis")},majorTicks:{fitFunction:xr({offset:0},2,5)},minorTicks:{amount:4,fitFunction:xr(void 0,2)}},{label:"MilliSecond100",unit:100,irregular:!1,greatTicks:{getReferenceKeyValue:Aa("millis",100,(t=>t.millis%100==0),"millis")},majorTicks:{fitFunction:xr({offset:0},2,5)},minorTicks:{amount:4,fitFunction:xr(void 0,2)}},{label:"Second",unit:1e3,irregular:!1,greatTicks:{getReferenceKeyValue:Aa("seconds",1,(t=>0===t.millis),"millis")},majorTicks:{fitFunction:Mr(3,5,10,15,30)},minorTicks:{amount:4,fitFunction:xr(void 0,2)}},{label:"Minute",unit:6e4,irregular:!1,greatTicks:{getReferenceKeyValue:Aa("minutes",1,(t=>0===t.seconds&&0===t.millis),"seconds","millis")},majorTicks:{fitFunction:Mr(3,5,10,15,30)},minorTicks:{amount:12,fitFunction:xr(void 0,3,6)}},{label:"Hour",unit:36e5,irregular:!1,greatTicks:{getReferenceKeyValue:Aa("hours",1,(t=>0===t.minutes&&0===t.seconds&&0===t.millis),"minutes","seconds","millis")},majorTicks:{fitFunction:Mr(3,6,12)},minorTicks:{amount:8,fitFunction:xr(void 0,2,4)}},{label:"Day",unit:864e5,irregular:!1,greatTicks:{getReferenceKeyValue:Aa("day",1,(t=>0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"hours","minutes","seconds","millis")},majorTicks:{fitFunction:xr({ignore:"last"},2,4)},minorTicks:{amount:7,fitFunction:xr({ignore:"last"},2,3)}},{label:"Week",unit:6048e5,irregular:!0,getPrevKeyValue:pa(-1),getNextKeyValueIncludingRef:pa(0),getNextKeyValue:pa(1),greatTicks:!0,majorTicks:{fitFunction:xr(void 0,2)},minorTicks:{fitFunction:void 0}},{label:"Month",unit:2592e6,irregular:!0,getPrevKeyValue:ga("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:va("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValue:ya("monthIndex",1,"day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:xr(void 0,2,3,6)},minorTicks:{fitFunction:xr(void 0,2,4,6)}},{label:"Year",unit:31536e6,irregular:!0,getPrevKeyValue:ga("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:va("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:ya("year",1,"monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:xr({ignore:"first"},2,5)},minorTicks:{fitFunction:xr(void 0,2,5)}},{label:"Decade",unit:31536e7,irregular:!0,getPrevKeyValue:ga("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:va("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:ya("year",10,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:xr(void 0,2,4)},minorTicks:{fitFunction:xr(void 0,2,5)}},{label:"Century",unit:316224e7,irregular:!0,getPrevKeyValue:ga("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:va("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:ya("year",100,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0},{label:"Millennium",unit:316224e8,irregular:!0,getPrevKeyValue:ga("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:va("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:ya("year",1e3,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0}],Sa=(t,i,s,e,h)=>{const r=i-t;let n;for(let t=h?0:ma.length-1;h?t<ma.length:t>=0;h?t+=1:t-=1){const i=r/ma[t].unit;if((void 0===s||i>=s)&&(void 0===e||i<=e)){n=ma[t];break}}return n},ba=(t,i,s)=>{let e=Sa(i,s,void 0,2,!0);if(void 0!==e&&0===ma.indexOf(e)&&(e=ma[1]),void 0===e)return;if("great"===t)return e;const h="major"===t?1:2,r=ma[ma.indexOf(e)-h];return void 0===r?ma[0]:r},xa=(t,i,s)=>(e,h,r,n)=>{const o=ba("great",e,h);if(void 0===o)return[];if("Decade"===o.label||"Century"===o.label||"Millennium"===o.label)return[];const a=n>r?e:h,l=(e+h)/2,c=n>r?h:e;if(ma.indexOf(o)<=ma.findIndex((t=>"Hour"===t.label)))return"left"===s?[a]:[];let u;if(!0===o.irregular)u=br(e,h,o.getPrevKeyValue(t,i),o.getNextKeyValue(t,i));else{const s=o.greatTicks.getReferenceKeyValue(t,i)(e);u=Sr(e,h,o.unit,s,1)}const d=((t,i,s)=>{for(const e of s)if(e>=t&&e<=i)return e})(e,h,u);return"left"===s?void 0===d||Ls(d,l,c)?[a]:[d]:void 0!==d&&Ls(d,l,c)?[d]:[c]},Ma=(t,i,s)=>(e,h,r,n)=>{const o=ba(t,r,n);let a;if(void 0===o)return[];if("great"===t&&void 0!==o.greatTicks)if(!0===o.irregular)a=br(e,h,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s));else{const t=o.greatTicks.getReferenceKeyValue(i,s)(e);a=Sr(e,h,o.unit,t,1)}else if("major"===t&&void 0!==o.majorTicks)a=!0===o.irregular?((t,i,s,e)=>{const h=[];let r=s(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h.push(r),h})(e,h,o.getPrevKeyValue(i,s),o.getNextKeyValue(i,s)):((t,i,s)=>{const e=[];let h=t,r=0;for(;h<i;)if(e.push(h),h+=s,r+=1,r>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return e.push(h),e})(e,h,o.unit);else{if("minor"!==t||void 0===o.minorTicks)return[];if(!0===o.irregular)a=((t,i,s,e)=>{const h=[];let r=e(t),n=0;for(;r<i;)if(h.push(r),r=e(r),n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return h})(e,h,o.getNextKeyValueIncludingRef(i,s),o.getNextKeyValue(i,s));else{const t=(t=>{if(void 0!==t)return ma[ma.indexOf(t)+1]})(o);if(void 0===t)return[];a=mr(e,h,t.unit/o.minorTicks.amount,1)}}return a},wa=t=>(i,s,e,h,r,n)=>{const o=ba(t,r,n);if(void 0===o)return;let a;return"major"===t?a=o.majorTicks.fitFunction:o.minorTicks&&(a=o.minorTicks.fitFunction),a?a(i,s,e,h,r,n):void 0},_a=i({utc:!1,locale:void 0,dateOrigin:void 0,cursorFormatter:void 0,greatTickStyle:new qo,majorTickStyle:new qo,minorTickStyle:new qo,formatOptionsMajorCentury:{year:"numeric",hour12:!1},formatOptionsMinorDecade:{year:"numeric",hour12:!1},formatOptionsMajorDecade:{year:"numeric",hour12:!1},formatOptionsMinorYear:{year:"numeric",hour12:!1},formatOptionsMajorYear:{year:"numeric",hour12:!1},formatOptionsMinorMonth:{month:"short",hour12:!1},formatOptionsGreatYear:{year:"numeric",hour12:!1},formatOptionsMajorMonth:{month:"long",hour12:!1},formatOptionsMinorWeek:{day:"numeric",hour12:!1},formatOptionsGreatMonth:{year:"numeric",month:"long",hour12:!1},formatOptionsMajorWeek:{day:"numeric",weekday:"short",hour12:!1},formatOptionsMinorDay:{day:"numeric",weekday:"short",hour12:!1},formatOptionsGreatWeek:(t,i,s)=>{const e=new Date(t),h=(t=>{const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));i.setUTCDate(i.getUTCDate()+4-(i.getUTCDay()||7));const s=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i.getTime()-s.getTime())/864e5+1)/7)})(e);return`${new Intl.DateTimeFormat(s,{year:"numeric",month:"long",hour12:!1}).format(e)} Week ${h}`},formatOptionsMajorDay:{weekday:"long",day:"numeric",hour12:!1},formatOptionsMinorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatDay:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatHour:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsGreatMinute:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsMinorMillisecond:t=>{const i=new Date(t);return i.setHours(0,0,0,0),ca.hhmmssmmm(t-i.getTime())},formatMillisecondRange:t=>{const i=new Date(t);return i.setHours(0,0,0,0),ca.hhmmssmmm(t-i.getTime())},formatOptionsGreatSecond:{},formatOptionsMajorMilliSecond:{}});class Ca extends _a{We(t){const i=void 0!==this.dateOrigin?this.dateOrigin.getTime():0,s=t=>ma.map((i=>{const s=((t,i,s)=>{switch(s.label){case"MilliSecond1":case"MilliSecond10":case"MilliSecond100":return"Great"===i?t.formatOptionsGreatMinute:t.formatMillisecondRange;case"Second":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorSecond:t.formatOptionsMinorSecond;case"Minute":return"Great"===i?t.formatOptionsGreatMinute:"Major"===i?t.formatOptionsMajorMinute:t.formatOptionsMinorMinute;default:case"Hour":return"Great"===i?t.formatOptionsGreatHour:"Major"===i?t.formatOptionsMajorHour:t.formatOptionsMinorHour;case"Day":return"Great"===i?t.formatOptionsGreatDay:"Major"===i?t.formatOptionsMajorDay:t.formatOptionsMinorDay;case"Week":return"Great"===i?t.formatOptionsGreatWeek:"Major"===i?t.formatOptionsMajorWeek:t.formatOptionsMinorWeek;case"Month":return"Great"===i?t.formatOptionsGreatMonth:"Major"===i?t.formatOptionsMajorMonth:t.formatOptionsMinorMonth;case"Year":return"Great"===i?t.formatOptionsGreatYear:"Major"===i?t.formatOptionsMajorYear:t.formatOptionsMinorYear;case"Decade":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorDecade:t.formatOptionsMinorDecade;case"Century":return"Great"===i?void 0:"Major"===i?t.formatOptionsMajorCentury:void 0;case"Millennium":return}})(this,t,i);if("object"!=typeof s)return s;try{return new Intl.DateTimeFormat(this.locale,s)}catch(t){let i="";for(const t in s)i+=` ${t}: ${s[t]},`;ni.console.error(`Invalid Intl.DateTimeFormat ( locale: ${this.locale}, formatOptions {${i}} )`)}})),e=new Map;e.set("great",s("Great")),e.set("major",s("Major")),e.set("minor",s("Minor"));const h=t=>String(t),r=(t,s)=>(r,n)=>{let o=r+i;const a=n.start,l=n.end,c=a>l,u=ba(t,c?l:a,c?a:l);if(void 0===u)return h(o);if("great"===t){const t=di(r,"left"===s?a:l);let e;if(e=!1===t?r:!1===u.irregular?"left"===s&&!1===c||"right"===s&&!0===c?u.greatTicks.getReferenceKeyValue(i,this.utc)(r):u.greatTicks.getReferenceKeyValue(i,this.utc)(r+1*u.unit):"left"===s&&!1===c||"right"===s&&!0===c?u.getPrevKeyValue(i,this.utc)(r):u.getNextKeyValue(i,this.utc)(r),o=e+i,"right"===s&&!0===t)return"";if("right"===s&&"Week"===u.label)return""}const d=e.get(t);if(void 0===d)return h(o);const f=d[ma.indexOf(u)];return void 0===f?"":"function"==typeof f?f(o,n,this.locale):f.format(o)},n=[],o=[{sr:"Great ticks (directive)",$f:0,Xe:!0,jr:Ma("great",i,this.utc),Zr:void 0},{sr:"Major ticks",$f:1,th:this.majorTickStyle,He:r("major"),jr:Ma("major",i,this.utc),Th:{_r:wa("major"),kr:"hide-tick"},Zr:void 0}];sa(this.greatTickStyle)||n.push({sr:"Great ticks (left)",th:this.greatTickStyle.setLabelAlignment(-1),He:r("great","left"),jr:xa(i,this.utc,"left"),Ye:!0,Fr:!1}),sa(this.minorTickStyle)||o.push({sr:"Minor ticks",$f:2,th:this.minorTickStyle,He:r("minor"),jr:Ma("minor",i,this.utc),Th:{_r:wa("minor"),Fh:(t,i,s,e,h,r)=>{const n=ba("minor",h,r);return!n||"Week"!==n.label},kr:"hide-tick"},Zr:void 0,Cr:2});const a=this.cursorFormatter;return{je:n,Ze:o,Qe:a?(t,s,e)=>a(i+t,s,e):(t,s,e)=>{const h=Sa(Math.min(s.start,s.end),Math.max(s.start,s.end),void 0,1,!0),r=h&&h.unit<=6e4,n=new Date(i+t),o=new Date(i+t);o.setHours(0,0,0,0);const a=r?ca.hhmmssmmm:ca.hhmmss;return`${new Intl.DateTimeFormat(e,{year:"numeric",month:"numeric",day:"numeric"}).format(n)} ${a(n.getTime()-o.getTime())}`},Je:1,Ke:31536e9}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTickStyle(t){return this.setGreatTickStyle(t).setMajorTickStyle(t).setMinorTickStyle(t)}setGreatTickStyle(t){if("function"==typeof t){const i=this.get("greatTickStyle");return this.set("greatTickStyle",t(i))}return this.set("greatTickStyle",t)}getGreatTickStyle(){return this.get("greatTickStyle")}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setUTC(t){return this.set("utc",t)}getUTC(){return this.get("utc")}setLocale(t){return this.set("locale",t)}getLocale(){return this.get("locale")}setDateOrigin(t){return this.set("dateOrigin",t)}getDateOrigin(){return this.get("dateOrigin")}setFormatting(t,i,s){return this.withMutations((e=>e.set("formatOptionsGreatYear",t||this.formatOptionsGreatYear).set("formatOptionsGreatMonth",t||this.formatOptionsGreatMonth).set("formatOptionsGreatWeek",t||this.formatOptionsGreatWeek).set("formatOptionsGreatDay",t||this.formatOptionsGreatDay).set("formatOptionsGreatHour",t||this.formatOptionsGreatHour).set("formatOptionsGreatMinute",t||this.formatOptionsGreatMinute).set("formatOptionsMajorCentury",i||this.formatOptionsMajorCentury).set("formatOptionsMajorDecade",i||this.formatOptionsMajorDecade).set("formatOptionsMajorYear",i||this.formatOptionsMajorYear).set("formatOptionsMajorMonth",i||this.formatOptionsMajorMonth).set("formatOptionsMajorWeek",i||this.formatOptionsMajorWeek).set("formatOptionsMajorDay",i||this.formatOptionsMajorDay).set("formatOptionsMajorHour",i||this.formatOptionsMajorHour).set("formatOptionsMajorMinute",i||this.formatOptionsMajorMinute).set("formatOptionsMajorSecond",i||this.formatOptionsMajorSecond).set("formatOptionsMinorDecade",s||this.formatOptionsMinorDecade).set("formatOptionsMinorYear",s||this.formatOptionsMinorYear).set("formatOptionsMinorMonth",s||this.formatOptionsMinorMonth).set("formatOptionsMinorWeek",s||this.formatOptionsMinorWeek).set("formatOptionsMinorDay",s||this.formatOptionsMinorDay).set("formatOptionsMinorHour",s||this.formatOptionsMinorHour).set("formatOptionsMinorMinute",s||this.formatOptionsMinorMinute).set("formatOptionsMinorSecond",s||this.formatOptionsMinorSecond)))}setFormattingDecade(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorDecade",t)),i&&(s=s.set("formatOptionsMinorYear",i)),s)))}setFormattingYear(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsMajorYear",t)),i&&(s=s.set("formatOptionsMinorMonth",i)),s)))}setFormattingMonth(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatYear",t)),i&&(e=e.set("formatOptionsMajorMonth",i)),s&&(e=e.set("formatOptionsMinorWeek",s)),e)))}setFormattingWeek(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMonth",t)),i&&(e=e.set("formatOptionsMajorWeek",i)),s&&(e=e.set("formatOptionsMinorDay",s)),e)))}setFormattingDay(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatWeek",t)),i&&(e=e.set("formatOptionsMajorDay",i)),s&&(e=e.set("formatOptionsMinorHour",s)),e)))}setFormattingHour(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatDay",t)),i&&(e=e.set("formatOptionsMajorHour",i)),s&&(e=e.set("formatOptionsMinorMinute",s)),e)))}setFormattingMinute(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatHour",t)),i&&(e=e.set("formatOptionsMajorMinute",i)),s&&(e=e.set("formatOptionsMinorSecond",s)),e)))}setFormattingSecond(t,i,s){return this.withMutations((e=>(t&&(e=e.set("formatOptionsGreatMinute",t)),i&&(e=e.set("formatOptionsMajorSecond",i)),s&&(e=e.set("formatOptionsMinorMillisecond",s)),e)))}setFormattingMilliSecond(t,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatSecond",t)),i&&(s=s.set("formatOptionsMajorMilliSecond",i)),s)))}}const ka=(t,i)=>(s,e,h,r,n)=>{const o=e-s;if(i){let i=5;n<=125?i=2:n<=250?i=3:n<=500&&(i=4);const h=Math.log10(o/i),r=Math.floor(2*h)/2;let a;a=r%1==0?10**(r-t):10**Math.ceil(r)/2;const l=1/a;a=Math.round(a*l)/l;const c=Math.round(Math.floor(s/(10*a))*a*10*l)/l;return Sr(c,e,a,void 0,l)}let a=o/5;const l=1/a;return a=Math.round(a*l)/l,mr(s,e,a,l)},Ta=(t,i,s,e,h,r)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%5==0)):2===i?t.filter(((t,i)=>i%10==0)):void 0,Fa=(t,i,s,e,h,r)=>{},Ia=(t,i,s,e,h,r)=>0===i?t.filter(((t,i)=>i%2==0)):1===i?t.filter(((t,i)=>i%3==0)):2===i?t.filter(((t,i)=>i%4==0)):3===i?t.filter(((t,i)=>i%5==0)):void 0,Pa=(t,i,s,e,h,r)=>0===i?[t[1],t[3],t[5]]:1===i?[t[0],t[3]]:2===i?[t[1]]:void 0,La=(t,i)=>{const s=ce(t),e=ue(t);if(i)return(t,i)=>{const h=[],r=Math.floor(s(t)),n=Math.ceil(s(i));for(let t=r-1;t<=n+1;t+=1){const i=e**t;h.push(i)}return h};const h=10===t?9:4;return(t,i)=>{const r=Math.round(s(t)),n=Math.round(s(i)),o=[],a=e**r,l=(e**n-a)/h;for(let s=1;s<=h;s+=1){const e=a+l*s;e>t&&e<i&&o.push(e)}return o}},Ba=i({cursorFormatter:void 0,extremeTickStyle:new qo,majorTickStyle:new qo,minorTickStyle:new qo,formattingOffset:void 0,extremeFormattingFunction:void 0,majorFormattingFunction:void 0,minorFormattingFunction:void 0,fallBackToExtremeTicksAutomatically:!0});class Da extends Ba{We(t){const i=this.formattingOffset,s=this.get("extremeFormattingFunction")||("logarithmic"===t.type?(i,s)=>ve.LogarithmicNoExponents(i,s,void 0,t.base):ve.Numeric),e=this.get("majorFormattingFunction")||("logarithmic"===t.type?(i,s)=>ve.LogarithmicNoExponents(i,s,void 0,t.base):ve.Numeric),h=this.get("minorFormattingFunction")||("logarithmic"===t.type?(i,s)=>ve.LogarithmicNoExponents(i,s,void 0,t.base):ve.Numeric),r=[],n=[];sa(this.extremeTickStyle)||r.push({sr:"Extreme ticks",th:this.extremeTickStyle,He:void 0===i?s:(t,e,h)=>s(i+t,e,h),jr:pr,Ye:!0,Fr:!0});const o={sr:"Major ticks",$f:0,th:this.majorTickStyle,He:void 0===i?e:(t,s,h)=>e(i+t,s,h),jr:"logarithmic"===t.type?La(t.base,!0):ka(0,!0),Th:{kr:"hide-label",_r:"logarithmic"===t.type?Ia:Ta},Zr:void 0};if(n.push(o),!sa(this.minorTickStyle)){const s="logarithmic"===t.type?La(t.base,!1):ka(1,!1);n.push({sr:"Minor ticks",$f:1,th:this.minorTickStyle,He:void 0===i?h:(t,s,e)=>h(i+t,s,e),jr:(t,i,e,h,r)=>s(t,i,e,h,r),Th:{kr:"hide-tick",_r:"logarithmic"===t.type?Pa:Fa},Zr:80})}const a=this.cursorFormatter?this.cursorFormatter:ve.Numeric;return{je:r,Ze:n,Qe:void 0===i?a:(t,s,e)=>a(i+t,s,e),Je:1e-9,Ke:void 0,dr:this.fallBackToExtremeTicksAutomatically?o:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setExtremeTickStyle(t){if("function"==typeof t){const i=this.get("extremeTickStyle");return this.set("extremeTickStyle",t(i))}return this.set("extremeTickStyle",t)}getExtremeTickStyle(){return this.get("extremeTickStyle")}setFormattingOffset(t){return this.set("formattingOffset",t)}getFormattingOffset(){return this.get("formattingOffset")}setTickStyle(t){const i=this.setMajorTickStyle(t).setMinorTickStyle(t);return i.extremeTickStyle!==ia?i.setExtremeTickStyle(t):i}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const i=this.get("minorTickStyle");return this.set("minorTickStyle",t(i))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setFormattingFunction(t){return this.withMutations((i=>i.set("extremeFormattingFunction",t).set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getExtremeFormattingFunction(){return this.get("extremeFormattingFunction")}setExtremeFormattingFunction(t){return this.set("extremeFormattingFunction",t)}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}getFallBackToExtremeTicksAutomatically(){return this.get("fallBackToExtremeTicksAutomatically")}setFallBackToExtremeTicksAutomatically(t){return this.set("fallBackToExtremeTicksAutomatically",t)}}const Ea=(t,i,s="image/png",e)=>{i+=`.${s.slice(s.indexOf("image/")+6)}`;const h=t.captureFrame(s,e);if("image/png"!==s&&h.type.includes("image/png"))throw new Error(`saveToFile | type not supported by browser: ${s}\nCheck support table for HTMLCanvasElement.toDataURL`);if(ni.navigator.msSaveBlob)ni.navigator.msSaveBlob(h,i);else{const t=ni.document.createElement("a");ni.document.body.appendChild(t);const s=ni.URL.createObjectURL(h);t.href=s,t.download=i,t.click(),setTimeout((()=>{ni.URL.revokeObjectURL(s),ni.document.body.removeChild(t)}),0)}},Ra=(t,i,s,e,h,r)=>{const n=t.kn(i,s,e,h,r,!0);return n.setDraggingMode(si.draggable),n},za=(t,i)=>{if("relative"===t)return i;if(t instanceof Se)return t;const s=t.x instanceof Tr?t.x.ot:t.x.x,e=t.y instanceof Tr?t.y.ot:t.y.y;return Me(s,e)},Va=(t,i,s,e,h)=>{if(s){const r=t,n=i,o=Jo(n)?n:Ce(n)?e:void 0;if(o&&we(s)){const t=ot(r,o,h.ot);return h.ma({engineX:t.x,engineY:t.y})}if(o&&Ce(s))return ot(r,o,e);if(o&&Jo(s))return ot(r,o,s)}else{const s=t;if(Ce(i)){const t=h.pa(s);return ot({x:t.engineX,y:t.engineY},h.ot,e)}if(Jo(i)){const t=i,e=h.pa(s);return ot({x:e.engineX,y:e.engineY},h.ot,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")};class Oa{constructor(t,i,s,e,h,n,o,a){this.coordsRelative="relative",this.coordsClient="client",this.Jf=[],this.Kf=[],this.qf=void 0,this.tA=void 0,this.iA=void 0,this.oi=f(0,0,0,0),this.sA=!1,this.dt=!1,this.eA=()=>{this.hA=!0,this.rA.Ls()},this.nA=t=>i=>{const s=this.Jf.indexOf(i);-1!==s&&this.Jf.splice(s,1),this.St.Ls(),t.G()},this.oA=t=>{const i=this.Kf.indexOf(t);-1!==i&&this.Kf.splice(i,1),this.St.Ls()},this.hA=!0,this.background=new zt,this.aA=t,this.lA=s,this.rA=e,this.removePanel=h,this._t=i.St._t;const l=i.St.xi();this.uiScale=s.d2({scaleXYConstructor:be}).qi(0,100).ts(0,100).Z(l),this.xf=s.d2({scaleXYConstructor:be}).qi(0,this.uiScale.x.getCellSize()).ts(0,this.uiScale.y.getCellSize()).Z(l),this.engine=i.St.cA,this.St=i.St.uA,this.vs=this.St.vs.ys(this,{}),this.dA=()=>i.fA("unidentified ui"),this.AA=i.gA(),this.vA=this.rA.Pe(this.uiScale).Be(r(0,0)).Z(r(100,100)).Ie(n).Fe(o),this.background.Nt(this.vA),a?(a.addEventListener("resize",this.eA),this.yA=()=>a.removeEventListener("resize",this.eA)):(i.St.V("resize",this.eA),this.pA=()=>i.St.N("resize",this.eA));const c=t=>{this.sA=t.isInView,this.D.R("inviewchanged",{isInView:this.sA})};i.St.V("inviewchanged",c),this.mA=()=>i.St.N("inviewchanged",c),this.qf=h}getTheme(){return this._t}getSizePixels(){return this.xf.getInnerIntervalPixels()}setBackgroundFillStyle(t){return this.vA.Ie(t),this.rA.Ls(),this}getBackgroundFillStyle(){return this.vA.$h()}setBackgroundStrokeStyle(t){return this.vA.Fe(t),this.rA.Ls(),this}getBackgroundStrokeStyle(){return this.vA.da()}translateCoordinate(t,i,s){return Va(t,i,s,this.xf,this.St)}SA(t){return this.Jf.push(t),this.St.Ls(),t}bA(t){return this.Kf.push(t),this.St.Ls(),t}addUIElement(t=xo,i=this.uiScale){i=za(i,this.xf);const s=this.dA();return this.SA(Ra(t,s,this.uiScale,i,this.nA(s),this._t))}addLegendBox(t=Eo,i=this.uiScale){i=za(i,this.xf);const s=this.bA(Ra(t,this.AA,this.uiScale,i,this.oA,this._t));return s.setDraggingMode(si.notDraggable),void 0!==i&&i!==this.uiScale||(void 0===t||"vertical"===t.getAlignment()?s.setOrigin(ir.RightCenter).setPosition({x:100,y:50}):s.setOrigin(ir.CenterBottom).setPosition(this.uiScale.Pi({x:50,y:0},{x:0,y:3}))),s}getLegendBoxes(){return this.Kf}dispose(){return this.dt||(this.dt=!0,this.pA&&this.pA(),this.yA&&this.yA(),Na(this.uiScale),Na(this.xf),this.mA&&this.mA(),this.tA&&this.tA(),this.rA.G(),this.AA.G(),this.Jf.slice().forEach((t=>{t.dispose()})),this.Kf.slice().forEach((t=>{t.dispose()})),this.St.Ls(),this.qf&&this.qf(this),this.D.R("dispose",{})),this}isDisposed(){return this.dt}saveToFile(t,i,s){return Ea(this.engine,t,i,s),this}$r(t){this.oi=t,this.eA()}H(){return this.xf.H(),this.uiScale.H(),this}X(){return this.xf.X(),this.uiScale.X(),this}Le(t){if(this.hA){const t=this.rA.St.xi(),i=t.x,s=t.y;this.uiScale.Z(i,s),this.xf.Z(i,s);const e=[this.oi.left,this.oi.right],h=[this.oi.bottom,this.oi.top];this.uiScale.Ji(e),this.uiScale.Ki(h);const r=this.uiScale.getInnerIntervalPixels();this.xf.qi(0,r.x).Ji(e).ts(0,r.y).Ki(h),this.D.R("resize",{width:r.x,height:r.y,engineHeight:s,engineWidth:i})}this.hA=!1}xA(){for(let t=0;t<this.Jf.length;t+=1)this.Jf[t].hr().Le();for(let t=0;t<this.Kf.length;t+=1)this.Kf[t].hr().Le();this.iA&&this.iA()}MA(t,i){if(t){const s=t(i);this.addEventListener("resize",s.hr.bind(s)),this.tA=s.G.bind(s),this.iA=s.hr.bind(s)}}getIsInView(){return this.sA}}const Na=t=>{t.gi&&t.gi()};class Ga extends Oa{constructor(t,i,s,e,h,r){super(t,i,s,i.wA("uipanel bg",0),e,i.St._t.uiPanelBackgroundFillStyle,i.St._t.uiPanelBackgroundStrokeStyle,r),this.D=new zt,this.MA(h,this.xf)}setMinimumSize(t){return this.gd=t,this.St.Ls(),this}getMinimumSize(){return this.gd}Le(t){super.Le(t),super.xA()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const $a=f(10,10,10,10);class Ua extends Oa{constructor(t,i,s,e,h,n,o,a,l,c,u){super(t,i,s,e,h,n,o,u),this._A={},this.nn=$a,this.ah=!0,this.title=new zt,this.CA=i.kA("chart internal ui",0),this.Sh=this.CA.Yr(this.uiScale).Sr("Chart").Be(r(50,100)).ul(r(0,1)).Xh(a).Ie(l).setPointerEvents(!1).mr(c),this.title.Nt(this.Sh),this.TA=this.vs.kf([this.Sh]).Ps(this._t.effectsText)}setAnimationsEnabled(t){return this.ah=t,this}getAnimationsEnabled(){return this.ah}setTitle(t){return this.Sh.Sr(t),this.St.Ls(),this}getTitle(){return this.Sh.wr()}getTitleSize(){return this.Sh.hr().zu()}setTitleFillStyle(t){return this.Sh.Ie(t),this.eA(),this}getTitleFillStyle(){return this.Sh.$h()}setTitleShadow(t){return this.Sh.mr(t),this.St.Ls(),this}getTitleShadow(){return this.Sh.el()}setTitleFont(t){return this.Sh.Xh(t),this.eA(),this}getTitleFont(){return this.Sh.Hh()}setTitleRotation(t){return this.Sh.Wh(t),this.St.Ls(),this}getTitleRotation(){return this.Sh.jh()}setTitleEffect(t){return this.TA.Ps(t),this.St.Ls(),this}getTitleEffect(){return this.TA.Bs()}setTitleMargin(t){var i,s;return this._A="object"==typeof t?this._A?(i=this._A,{left:void 0!==(s=t).left?s.left:i.left,top:void 0!==s.top?s.top:i.top,right:void 0!==s.right?s.right:i.right,bottom:void 0!==s.bottom?s.bottom:i.bottom}):t:{left:t,top:t,right:t,bottom:t},this.eA(),this}getTitleMargin(){return this._A}setPadding(t){const i="object"==typeof t?g(this.nn,t):{left:t,top:t,right:t,bottom:t};return i.bottom===this.nn.bottom&&i.left===this.nn.left&&i.right===this.nn.right&&i.top===this.nn.top||(this.nn=i,this.eA()),this}getPadding(){return this.nn}FA(t){const i=t.IA(),s=null==i?void 0:i.height,e=null==i?void 0:i.width;if(void 0!==s&&void 0!==e)return{x:s/2,y:e/2}}dispose(){return super.dispose(),this.CA.G(),this}}const Ya={PA:(t,i)=>t.$h()!==V&&0!==t.wr().length&&t.getVisible()?t.hr().zu().y:0,LA(t,i){t.Be(r(50,100)).$r({top:void 0!==i.top?i.top:10,right:i.right||0,left:i.left||0,bottom:i.bottom||0})}},Ha=t=>"show-all-interpolated"===t||"show-nearest-interpolated"===t||"show-pointed-interpolated"===t,Xa=(t,i)=>{const s="series"in t?t.series:void 0;if(!s||!("getCursorFormattingOverride"in s))return i;const e=s.getCursorFormattingOverride();return e?e(t,i):i},Wa=t=>{const i="series"in t&&t.series,s=i&&Lo(i)&&i.Gs(),e="x"in t&&t.x,h="y"in t&&t.y,r="z"in t&&t.z,n="color"in t&&t.color,o=("lookupValue"in t?t.lookupValue:void 0)||("intensity"in t?t.intensity:void 0)||("value"in t?t.value:void 0);return n||(void 0!==o&&s&&"value"===s.lookUpProperty?s.lut.getColors(o,s.valueRange):void 0!==e&&!1!==e&&s&&"x"===s.lookUpProperty?s.lut.getColors(e,ja(i)?{min:i.getXMin(),max:i.getXMax()}:void 0):void 0!==h&&!1!==h&&s&&"y"===s.lookUpProperty?s.lut.getColors(h,ja(i)?{min:i.getYMin(),max:i.getYMax()}:void 0):void 0!==r&&!1!==r&&s&&"z"===s.lookUpProperty?s.lut.getColors(r,Za(i)?{min:i.getZMin(),max:i.getZMax()}:void 0):void 0)},ja=t=>!(!t||"object"!=typeof t||!("getXMin"in t)),Za=t=>!(!t||"object"!=typeof t||!("getZMin"in t)),Qa=(t,i,s,e,h,r,n)=>{let o,a,l,c=h,u=r,d=null,f=!0;e&&(f=!1,e.seriesBackground.addEventListener("pointerenter",(()=>{var i;f=!0,t.getCursorMode()&&(a&&l&&!("explicitTarget"in(null!==(i=l[3])&&void 0!==i?i:{}))?A.Le(...l):t.St.Ls())})),e.seriesBackground.addEventListener("pointerleave",(()=>{var i;f=!1,t.getCursorMode()&&(a&&l&&!("explicitTarget"in(null!==(i=l[3])&&void 0!==i?i:{}))?A.Le(...l):t.St.Ls())})),e.seriesBackground.addEventListener("pointermove",(()=>{var i;f=!0,t.getCursorMode()&&(a&&l&&!("explicitTarget"in(null!==(i=l[3])&&void 0!==i?i:{}))?A.Le(...l):t.St.Ls())})),e.addEventListener("seriesadd",(i=>{const s=i.series;s.addEventListener("pointerenter",((i,e)=>{var h;s.BA()&&(a||t.St.Ls(),o=e||void 0),t.getCursorMode()&&(a&&l&&!("explicitTarget"in(null!==(h=l[3])&&void 0!==h?h:{}))?A.Le(...l):t.St.Ls())})),s.addEventListener("pointermove",((i,e)=>{var h;s.BA()&&(a||t.St.Ls(),o=e||void 0),t.getCursorMode()&&(a&&l&&!("explicitTarget"in(null!==(h=l[3])&&void 0!==h?h:{}))?A.Le(...l):t.St.Ls())})),s.addEventListener("pointerleave",(i=>{var e;s.BA()&&(a||t.St.Ls(),o=void 0),t.getCursorMode()&&(a&&l&&!("explicitTarget"in(null!==(e=l[3])&&void 0!==e?e:{}))?A.Le(...l):t.St.Ls())}))})));const A={setCursor:i=>(i(s),t),getCursor:()=>s,setCursorMode:i=>(c=i,t.St.Ls(),t),getCursorMode:()=>c,setCustomCursor:t=>{a=t},setCursorFormatting:i=>(u=i,t.St.Ls(),t),getCursorFormatting:()=>u,G:()=>{s.dispose(),i.G()},Le:(i,e,h,r)=>{l=[i,e,h,r];const A=t.St.jo();let g=[];if((null==r?void 0:r.explicitTarget)&&c)g=Array.isArray(r.explicitTarget)?r.explicitTarget:[r.explicitTarget];else if(!i&&c){const t=e.find((t=>t.getPointed())),i=A&&t&&(!t.getCursorEnabled||t.getCursorEnabled())&&t.Fs?t.Fs(A):void 0;if(o=i||o,o&&"show-all"!==c&&"show-all-interpolated"!==c)g=[o];else if("show-all"===c||"show-all-interpolated"===c||"show-nearest"===c||"show-nearest-interpolated"===c){if((f||void 0!==t)&&A&&h){for(const t of e){if(!t.getVisible()||t.getCursorEnabled&&!t.getCursorEnabled())continue;const i=h(t,A,c);i&&g.push(i)}"show-nearest"!==c&&"show-nearest-interpolated"!==c||(g.sort(((t,i)=>n(t,A)-n(i,A))),g.length=1)}}else if(("show-pointed"===c||"show-pointed-interpolated"===c)&&A&&t&&(!t.getCursorEnabled||t.getCursorEnabled())&&h){const i=h(t,A,c);i&&(g=[i])}}g=ss(g.map((t=>gs(t))));const v=(null==r?void 0:r.overrideCursorPositions)||((t,i)=>i),y=g[0],p=g.length>0?g:void 0;if(y!==d&&A&&(a&&a({hit:y,hits:p,mouseLocation:A}),t.D.R("cursortargetchange",{hit:y,hits:p,mouseLocation:A}),d=y),a)s.getVisible()&&(s.setVisible(!1),s.hr().Le());else{if(g&&g.length>0){const i=u(t,g[0],g);s.setVisible(!0).setPosition(...v(g,g.map((t=>t.cursorPosition)))).setResultTable((t=>t.setContent(i)))}else s.setVisible(!1);(null==r?void 0:r.afterCursorPointedAt)&&r.afterCursorPointedAt(g),s.hr().Le()}},solveNearest:(i,s,e,h)=>{const r=i||t.St.jo();if(!r)return[];let o=[];if("show-all"===s||"show-all-interpolated"===s||"show-nearest"===s||"show-nearest-interpolated"===s){for(const t of e){if(!t.getCursorEnabled()||!t.getVisible())continue;const i=h(t,r,s);i&&o.push(i)}"show-nearest"!==s&&"show-nearest-interpolated"!==s||(o.sort(((t,i)=>n(t,r)-n(i,r))),o.length=1)}return o=ss(o.map((t=>gs(t)))),o},DA:s};return A};class Ja{constructor(t,i){this.EA=t,this.RA=i}alter(t){this.zA=void 0!==this.zA?this.zA:this.RA(),this.VA=t,this.EA(t)}resetValue(){void 0!==this.VA&&(void 0!==this.zA&&this.isAltered()&&this.EA(this.zA),this.zA=void 0,this.VA=void 0)}getNormalValue(){return void 0!==this.zA?this.zA:this.RA()}isAltered(){return void 0!==this.VA&&this.RA()===this.VA}}class Ka{constructor(t){this.OA=[],this.DA=t,this.NA=t.NA}update(){return this.NA.getVisible()?!(this.GA()&&(!this.$A()||(this.resetTable(),this.NA.hr(),this.GA()))&&(this.UA(),this.NA.hr(),this.GA()&&(this.resetTable(),this.NA.hr(),1))):(this.$A()&&this.resetTable(),!0)}$A(){for(let t=0;t<this.OA.length;t+=1)if(this.OA[t].isAltered())return!0;return!1}resetTable(){for(let t=0;t<this.OA.length;t+=1)this.OA[t].resetValue();return this}GA(){const t=this.DA.GA();return t.x||t.y}YA(){return this.DA.GA().x}HA(){return this.DA.GA().y}XA(t){return this.OA.push(t),t}}class qa extends Ka{constructor(){super(...arguments),this.Ua=this.XA(new Ja((t=>this.NA.setOrigin(t)),(()=>this.NA.getOrigin())))}UA(){const t=this.Ua.getNormalValue(),i=r(this.YA()?-t.x:t.x,this.HA()?-t.y:t.y);this.Ua.alter(i)}}class tl extends Ka{constructor(t,i,s){super(t),this.WA=this.XA(new Ja((t=>this.NA.setTextFont((i=>i.setSize(t)))),(()=>this.NA.getTextFont().getSize()))),this.jA=i,this.ZA=s}UA(){const t=this.WA.getNormalValue(),i=this.jA;if(i<t)for(let s=1;s<=this.ZA;s+=1){const e=t-(t-i)*(s/this.ZA);if(this.WA.alter(e),this.NA.hr(),!this.GA())return}}}const il={Flip:t=>new qa(t),FontSize:(t=5,i=5)=>s=>new tl(s,t,i)},sl={None:Qr,Rectangle:qn,Circle:to,Diamond:io,Pointer:so};class el extends uo{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.pn=this._t.cursorResultTableTextFont,this.Cd=0,this.QA=this._t.cursorResultTableTextFillStyle,this.cn=100}setContent(t){let i;void 0===t?i=[]:Array.isArray(t)?(i=[],t.forEach((t=>{i.push(Array.isArray(t)?t:[t])}))):i=[[t]];for(let t=0;t<i.length;t+=1){const s=i[t];let e=!1;for(let t=0;t<s.length;t+=1){const i=s[t],h="object"==typeof i&&"text"in i?i.text:"string"==typeof i?i:void 0,r="object"==typeof i&&"icon"in i?i.icon:wh(i)?i:void 0,n=i instanceof Re&&i;if(!(h&&h.length>0||r||n)){e=!0;break}}e||(s.unshift(""),s.push(""))}const s=i.length;let e=this.getMembers().length;for(let t=0;t<Math.max(s,e);t+=1){const r=this.getRow(t,!0);if(t>=s)this.getMembers()[t].dispose(),t-=1,e-=1;else{const e=i[t].length;let n=r.getMembers().length;for(let o=0;o<Math.max(e,n);o+=1){const a=i[t][o],l="object"==typeof a&&"font"in a?a.font:void 0,c="object"==typeof a&&"fillStyle"in a?a.fillStyle:void 0,u="object"==typeof a&&"text"in a?a.text:"string"==typeof a?a:void 0,d="object"==typeof a&&"icon"in a?a.icon:wh(a)?a:void 0,f=a instanceof Re&&a||("object"==typeof a&&"component"in a?a.component:void 0),A="object"==typeof a&&"componentColor"in a&&a.componentColor,g="object"==typeof a&&"rowFillStyle"in a?a.rowFillStyle:void 0,v=r.getMembers();if(o>=e)r.getMembers()[o].dispose(),o-=1,n-=1;else if(void 0!==u&&u.length>0||d||f){const i=l?this.pn.withMutations((t=>{for(const i of Object.keys(l)){const s=l[i];void 0!==s&&t.set(i,s)}return t})):this.pn,e=c||this.QA,n=v[o];if(u){let t;n&&n instanceof Jn?t=n:(n&&n.dispose(),t=r.addElement(Kn,o)),t.setText(u).setFont(i).setFillStyle(e).setTextRotation(this.Cd)}else if(d){let t;n&&n instanceof eo?t=n:(n&&n.dispose(),t=r.addElement(ho,o)),t.setFillStyle(e).setShape(d).setSize({y:i.size,x:i.size}),t.setMargin(5)}else if(f){let t;n&&"setTextFillStyleHidden"in(h=n)&&"setText"in h?t=n:(n&&n.dispose(),t=r.addElement(Co.setBackground(sl.None),o).setOn(!0));const s=f.$s();void 0!==s&&t.setButtonShape(s),t.setText(f.getName()).setTextFont(i).setTextFillStyle(e).setTextRotation(this.Cd),f.styleLegendEntry(t),A&&t.setButtonOnFillStyle(new $({color:A}))}g&&r.setBackground((i=>{i.setFillStyle(g);const e=this.getBackground();Ve(e)&&i instanceof qn&&i.setCornerRadius(e.getCornerRadius(),{topLeft:0===t,topRight:0===t,bottomLeft:t===s-1,bottomRight:t===s-1})}))}else{const t=v[o];t&&t instanceof ro||(t&&t.dispose(),r.addGap(void 0,o))}}}}var h;return this.Ys.Ls(),this}setTextFillStyle(t){this.QA="function"==typeof t?t(this.QA):t;for(let t=0;t<this.getMemberCount();t+=1){const i=this.getRow(t);for(let t=0;t<i.getMembers().length;t+=1){const s=i.getMembers()[t];s instanceof Jn&&s.setFillStyle(this.QA)}}return this.Ys.Ls(),this}getTextFillStyle(){return this.QA}setTextFont(t){return rh(t)?this.pn=t:this.pn=t(this.pn),this.Ys.Ls(),this}getTextFont(){return this.pn}setTextRotation(t){return this.Cd=t,this.Ys.Ls(),this}getTextRotation(){return this.Cd}JA(){for(let t=0;t<this.dd.length;t+=1)for(let i=0;i<this.dd[t].getMembers().length;i+=1)this.dd[t].getMembers()[i].dispose()}hr(){for(let t=0;t<this.dd.length;t+=1)this.dd[t].setMinimumSize(void 0);super.hr();for(let t=0;t<this.dd.length;t+=1)this.dd[t].setMinimumSize(this.size.x);return super.hr(),this}}class hl{constructor(t,i,s,e,h,r){this.KA=[],this.qA=!0,this.tg=!0,this.sA=!1,this.ft=!0,this.dt=!1,this.ig=[],this.D=new zt,this.Ys=t,this.renderingScale=i,this.scale=s,this.sg=e,this.eg=h,this._t=r,this.NA=new el(this.Ys,this.renderingScale,this.scale,this.eg,ui,r).setPointerEvents(!1).setBackground((t=>t.setFillStyle(r.cursorResultTableFillStyle).setStrokeStyle(r.cursorResultTableStrokeStyle))).setTextFillStyle(r.cursorResultTableTextFillStyle).setTextFont(r.cursorResultTableTextFont),this.hg=il.Flip(this)}isDisposed(){return this.dt}setPointMarkerVisible(t){return this.qA=t,this.KA.forEach((i=>i.pointMarker.setVisible(i.targetVisible&&t))),this.Ys.Ls(),this}getPointMarkerVisible(){return this.qA}setPointMarker(t){return this.KA.forEach((i=>t(i.pointMarker))),this.ig.push(t),this.Ys.Ls(),this}setResultTableVisible(t){return this.tg=t,this.Ys.Ls(),this}getResultTableVisible(){return this.tg}setResultTable(t){return t(this.NA),this.Ys.Ls(),this}setAutoFitStrategy(t){return this.hg&&this.hg.resetTable(),this.hg=t?t(this):void 0,this.Ys.Ls(),this}getAutoFitStrategy(){return void 0!==this.hg}setVisible(t){return this.ft=t,this.Ys.Ls(),this}getVisible(){return this.ft}dispose(){return this.KA.forEach((t=>t.pointMarker.dispose())),this.NA.dispose(),this.ig.length=0,this.sg(this),this.D.R("dispose",{}),this}GA(){const t=this.NA,i=this.Ys.St.ot,s=ot(t.getPosition(r(-1,-1),ti.PaddedBackground),t.scale,i),e=ot(t.getPosition(r(1,1),ti.PaddedBackground),t.scale,i);return{x:s.x<i.x.getInnerStart()||e.x>i.x.getInnerEnd(),y:s.y<i.y.getInnerStart()||e.y>i.y.getInnerEnd()}}Le(){return this.hg&&this.hg.update(),this.NA.setVisible(this.sA&&this.ft&&this.tg),this.KA.forEach((t=>t.pointMarker.setVisible(t.targetVisible&&this.sA&&this.ft&&this.qA))),this.KA.forEach((t=>t.pointMarker.Le())),this.NA.Le(),this}hr(){return this.KA.forEach((t=>t.pointMarker.hr())),this.NA.hr(),this}rg(t,i){const s=i===this.scale?t:ot(t,i,this.scale);this.NA.setPosition(s)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const rl=(t,i)=>t.setResultTable((t=>t.setEffect(!0).setOrigin(r(-1,-1)).setMargin(5).setBackground((t=>{i.cursorResultTableBorderRadius&&Ve(t)&&t.setCornerRadius(i.cursorResultTableBorderRadius)}))));class nl extends hl{setPosition(...t){const i=this.renderingScale,s=za(t[0].resultTableScale,i),e=s===this.scale?t[0].resultTable:ot(t[0].resultTable,s,this.scale);return this.sA=!1,this.KA.forEach((t=>{t.targetVisible=!1})),t.forEach(((t,s)=>{const e=za(t.pointMarkerScale,i),h=e===this.scale?t.pointMarker:ot(t.pointMarker,e,this.scale);let r=this.KA[s];if(!r){const t=new eo(this.Ys,this.renderingScale,this.scale,ui,this._t).setPointerEvents(!1).setFillStyle(this._t.cursorPointMarkerFillStyle).setSize(this._t.cursorPointMarkerSize).setShape(this._t.cursorPointMarkerShape);r={pointMarker:t,targetVisible:!0},this.KA.push(r),this.ig.forEach((i=>i(t)))}r.pointMarker.setPosition(h),r.targetVisible=((t,i,s=i)=>{const e=i!==s?ot(t,i,s):t;return e.x>=s.x.getInnerStart()&&e.x<=s.x.getInnerEnd()&&e.y>=s.y.getInnerStart()&&e.y<=s.y.getInnerEnd()})(t.pointMarker,e),r.targetVisible&&(this.sA=!0)})),this.NA.setPosition(e),this.Ys.Ls(),this}}class ol{constructor(t,i=[]){this.ng=[],this.og=(t,i)=>(this.ng.forEach((s=>s(t,i))),t),this.addStyler=t=>new ol(this.eg,this.ng.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new ol(t,this.ng.map((t=>t))),this.ag=(t,i,s,e,h)=>this.og(new nl(t,i,s,e,this.eg,h),h),this.eg=t,this.ng=i}}const al=new ol(qn,[rl]),ll=al,cl=al,ul=al,dl=al,fl=ll,Al=new ol(qn,[rl,t=>t.setPointMarkerVisible(!1).setResultTable((t=>t.setOrigin(ir.LeftBottom)))]),gl=al;var vl;!function(t){t[t.LabelsInsideSlices=0]="LabelsInsideSlices",t[t.LabelsOnSides=1]="LabelsOnSides"}(vl||(vl={}));const yl={SortByName:(t,i)=>t.getName().localeCompare(i.getName(),void 0,{numeric:!0}),SortByValueAscending:(t,i)=>t.getAnimatedValue()-i.getAnimatedValue(),SortByValueDescending:(t,i)=>i.getAnimatedValue()-t.getAnimatedValue(),None:()=>0},pl={Name:t=>`${t.getName()}`,NamePlusValue:t=>`${t.getName()}: ${Math.round(t.getAnimatedValue())}`,NamePlusRelativeValue:(t,i)=>`${t.getName()}: ${(100*i).toFixed(2)}%`};class ml extends Re{constructor(t,i,s,e){super(t,i,s,e),this.Es="Slice",this.S=0,ni.requestAnimationFrame((()=>{this.addEventListener("pointermove",(()=>{this.chart.St.Ls()}))}))}}class Sl extends ml{}class bl extends Sl{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.lg=!1,this.cg=V,this.ug=V,this.dg=this.S,this.Ag=this.lg?1:0,this.gg=this.getVisible(),this.vg=Gt((()=>this.chart.St.Ls())),this.yg=Gt((()=>this.chart.St.Ls())),this.pg=()=>{this.mg=void 0},this.Sg=()=>{this.bg=void 0},this.D=new zt,this.index=t,this.chart=e,this.scale=h,this.fs=r,this.xg=i.Yu(h).Bt(this.getHighlight()),this.ws(this.xg),this.sr=s.Yr(h).Bt(this.getHighlight()),this.ws(this.sr,{isText:!0}),this.addEventListener("click",(t=>{t.defaultPrevented||((t,i)=>{Bi(i),t.setExploded(!t.getExploded())})(this,t)}))}setValue(t){return this.chart.getAnimationsEnabled()?this.gg&&this.Mg(this.dg,t):this.dg=t,this.S=t,this.chart.St.Ls(),this}getValue(){return this.S}setExploded(t){if(t&&!1===this.chart.getMultipleSliceExplosion()){const t=this.chart.getSlices();for(let i=0;i<t.length;i+=1)t[i]!==this&&t[i].getExploded()&&t[i].setExploded(!1)}return this.chart.getAnimationsEnabled()?(this.bg&&this.bg.finish(),this.bg=this.yg(300,Ot.ease)([[this.Ag,t?1:0]],(([t])=>{this.Ag=t,this.chart.St.Ls()})),this.bg.addEventListener("everyAnimationEnd",this.Sg),this.lg=!this.lg):!1!==this.chart.getMultipleSliceExplosion()||t?(this.Ag=this.lg?0:1,this.lg=!this.lg):(this.Ag=0,this.lg=!this.lg),this.chart.St.Ls(),this}getExploded(){return this.lg}setVisible(t){return this.gg=t,!1===t?this.chart.getAnimationsEnabled()&&this.dg>0?(this.mg&&(this.mg.finish(!1),this.mg=void 0),this.Mg(this.dg,0,(()=>super.setVisible(!1)))):(this.dg=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.mg&&(this.mg.finish(!1),this.mg=void 0),super.setVisible(!0),this.Mg(this.dg,this.S)):(this.dg=this.S,super.setVisible(!0)),this}Mg(t,i,s){this.mg=this.vg(300,Ot.ease)([[t,i]],(([t])=>{this.dg=t,this.chart.St.Ls()})),this.mg.addEventListener("everyAnimationEnd",this.pg),s&&this.mg.addEventListener("end",s)}setStyle(t,i,s,e,h){this.cg=t,this.ug=s,this.xg.Ie(this.cg).Fe(i),this.sr.Ie(this.ug).Xh(e).mr(h);for(let t=0;t<this.ds.length;t+=1)this.styleLegendEntry(this.ds[t])}getAnimatedValue(){return this.dg}getAnimatedExplosion(){return this.Ag}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.cg,stroke:this.xg.da()})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const xl=(t,i,s)=>js(i,Ws(he(.5*(t.kc()+t.Ui())*Math.PI/180),s)),Ml=(t,i,s,e,h,r)=>{const n=t.length;let o=90;for(let a=0;a<n;a+=1){const l=t[a],c=o-360*i[a],u=l.getAnimatedExplosion();if(0===u||1===n)l.xg.Be(s);else{const t=js(s,Ws(he(.5*(o+c)*Math.PI/180),r*u));l.xg.Be(t)}l.xg.Bc(o).$e(c).Ec(e).Rc(e).zc(h),o=c}};class wl extends Ua{constructor(t,i,s,e,h,r,n){super(t,i,s,i.wA("pieChart bg",0),e,i.St._t.pieChartBackgroundFillStyle,i.St._t.pieChartBackgroundStrokeStyle,i.St._t.pieChartTitleFont,i.St._t.pieChartTitleFillStyle,i.St._t.pieChartTitleShadow,r),this.wg=[],this._g=yl.SortByName,this.Sc=0,this.Cg=this._t.pieChartSliceFillStylePalette,this.kg=this._t.pieChartSliceStrokeStyle,this.Tg=!0,this.Fg=this._t.pieChartSliceLabelFont,this.Ig=this._t.pieChartSliceLabelFillStyle,this.Pg=this._t.pieChartSliceLabelShadow,this.Lg=0,this.Bg=!1,this.Dg=20,this.Eg=!0,this.Rg=!0,this.zg=t=>{const i=this.wg.indexOf(t);i>=0&&(this.wg.splice(i,1),this.Vg())},this.D=new zt,this.St.Zo(Gr.Gn),this.Og=i.Ng("pieChart bottom",0),this.Gg=i.Ng("pieChart top",1),this.Sh.Sr("Pie Chart"),this.MA(h,this.xf),this.background.addEventListener("dblclick",(t=>{t.defaultPrevented||(()=>{const t=this.getSlices();for(let i=0;i<t.length;i+=1)t[i].setExploded(!1)})()}));const o=i.$g(),a=gi(n?n.cursorBuilder:void 0,ul);this.Ug=Qa(this,o,a.ag(o,this.uiScale,this.uiScale,ui,this._t),void 0,"show-pointed",_l,(()=>0)),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled))}setCursor(t){return this.Ug.setCursor(t),this}getCursor(){return this.Ug.getCursor()}setCursorMode(t){return this.Ug.setCursorMode(t),this}getCursorMode(){return this.Ug.getCursorMode()}setCustomCursor(t){return this.Ug.setCustomCursor(t),this}setCursorFormatting(t){return this.Ug.setCursorFormatting(t),this}getCursorFormatting(){return this.Ug.getCursorFormatting()}addCursor(t=ul){const i=this.dA(),s=t.ag(i,this.uiScale,this.uiScale,this.nA(i),this._t);return this.SA(s),s}addSlice(t,i){const s=new bl(this.Lg,this.Og,this.Gg,this,this.xf,this.zg,this._t,this.St.vs);this.Lg+=1,s.setName(t);const e=this.ah;return this.ah=!1,s.setValue(i),this.ah=e,s.setEffect(this.Eg),this.Yg(s),this.wg.push(s),this.Vg(),s.setHighlightOnHover(this.Tg),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.wg}setMultipleSliceExplosion(t){return this.Bg=t,this}getMultipleSliceExplosion(){return this.Bg}setInnerRadius(t){return this.Sc=t,this.St.Ls(),this}getInnerRadius(){return this.Sc}setSliceExplosionOffset(t){return this.Dg=t,this.St.Ls(),this}getSliceExplosionOffset(){return this.Dg}setLUT(t){return this.Bd=t,this.St.Ls(),this}setSliceFillStyle(t){this.Cg=t;for(let t=0;t<this.wg.length;t+=1)this.Yg(this.wg[t]);return this.St.Ls(),this}getSliceFillStyle(){return this.Cg}setSliceStrokeStyle(t){this.kg="function"==typeof t?t(this.kg):t;for(let t=0;t<this.wg.length;t+=1)this.Yg(this.wg[t]);return this.St.Ls(),this}getSliceStrokeStyle(){return this.kg}setSliceEffect(t){return this.Eg=t,this.wg.forEach((i=>i.vs.Ss.Ps(t))),this.St.Ls(),this}getSliceEffect(){return this.Eg}setSliceSorter(t){return this._g=t,this.wg=this.wg.sort(this._g),this.St.Ls(),this}getSliceSorter(){return this._g}setLabelFillStyle(t){this.Ig="function"==typeof t?t(this.Ig):t;for(let t=0;t<this.wg.length;t+=1)this.Yg(this.wg[t]);return this.St.Ls(),this}getLabelFillStyle(){return this.Ig}setLabelShadow(t){return this.Pg=t,this.St.Ls(),this}getLabelShadow(){return this.Pg}setLabelFont(t){this.Fg="function"==typeof t?t(this.Fg):t;for(let t=0;t<this.wg.length;t+=1)this.Yg(this.wg[t]);return this.St.Ls(),this}getLabelFont(){return this.Fg}setLabelEffect(t){return this.Rg=t,this.wg.forEach((i=>i.vs.ps.Ps(t))),this.St.Ls(),this}getLabelEffect(){return this.Rg}setLabelFormatter(t){return this.Hg=t,this.St.Ls(),this}getLabelFormatter(){return this.Hg}setSliceHighlightOnHover(t){return this.Tg=t,this.wg.forEach((i=>i.setHighlightOnHover(t))),this}Le(t){super.Le(t),Ya.LA(this.Sh,this._A),super.xA();const i=Ya.PA(this.Sh,this._A),s=r(this.xf.x.getInnerInterval()-(this.nn.left+this.nn.right),this.xf.y.getInnerInterval()-(this.nn.bottom+this.nn.top+i)),e=r(this.nn.left+s.x/2,this.nn.bottom+s.y/2);if(this.Bd){const t=this.Bd;this.wg.forEach((i=>{this.Yg(i,new $({color:t.getColors(i.getAnimatedValue(),void 0)}))}))}for(let t=0;t<this.wg.length;t+=1){const i=this.wg[t].getAnimatedValue()>0;this.wg[t].xg.setVisible(i),this.wg[t].sr.setVisible(i)}this.wg=this.wg.sort(this._g);const h=this.wg.filter((t=>t.getAnimatedValue()>0));let n=0;for(let t=0;t<h.length;t+=1)n+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/n:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.sr.Sr(this.Hg(i,o[t])).hr()}this.Ug.Le(!1,this.wg,((t,i,s)=>{const e=o[h.indexOf(t)]||0,r=this.St.pa(i);return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.St.ot,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.St.ot},slice:t,category:t.getName(),value:t.getValue(),relativeValue:e}})),this.Xg(h,o,e,s)}Yg(t,i=this.Cg(t.index,t)){t.setStyle(i,this.kg,this.Ig,this.Fg,this.Pg)}Vg(){this.wg=this.wg.sort(this._g),this.St.Ls()}Gd(){return this.wg}dispose(){return super.dispose(),this.wg.slice().forEach((t=>t.dispose())),this.Ug.G(),this.Gg.G(),this.Og.G(),this}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const _l=(t,i,s)=>[[{component:i.slice,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:i.value.toString(),font:{weight:"bold"}}]],Cl={UserSeries:{type:"ApplicationType",args:{type:"UserSeries"}},InternalUI:{type:"ApplicationType",args:{type:"InternalUI"}}},kl=(...t)=>{const i=[];return t.forEach((t=>{var s;t&&"object"==typeof(s=t)&&s&&"pattern"in s&&i.push({type:"DataPattern",args:t})})),i};class Tl extends wl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.Hg=pl.NamePlusValue,this.Wg=[],this.jg=40,this.Zg=5,this.Qg=10,this.Jg=this._t.pieChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.Jg=t;for(let t=0;t<this.Wg.length;t+=1)this.Wg[t].Ne(this.Jg);return this.St.Ls(),this}getLabelConnectorStyle(){return this.Jg}setLabelSliceOffset(t){return this.jg=t,this.St.Ls(),this}getLabelSliceOffset(){return this.jg}setLabelConnectorGapStart(t){return this.Zg=t,this.St.Ls(),this}getLabelConnectorGapStart(){return this.Zg}setLabelConnectorEndLength(t){return this.Qg=t,this.St.Ls(),this}getLabelConnectorEndLength(){return this.Qg}Xg(t,i,s,e){const h=this.Fg.getSize(),r=this.jg,n=this.Qg,o=this.Zg,a=Math.min(this.Dg,r-o);let l=0;if(1===t.length)l=t[0].sr.zu().x;else for(let i=0;i<t.length;i+=1)l=Math.max(l,t[i].sr.zu().x);const c=Math.max(.5*(Math.min(e.x-2*l-2*n,e.y-2*h)-2*r),0);if(c<50){const r=Math.max(.5*Math.min(e.x,e.y-2*h),0);Ml(t,i,s,r,this.Sc,a),t.forEach((t=>t.sr.setVisible(!1))),this.Wg.forEach((t=>t.setVisible(!1)))}else{Ml(t,i,s,c,this.Sc,a);let e=90;const h=t.map(((t,h)=>{const o=360*i[h],a=e-o,l=he(se(.5*(e+a))),u=l.x>=0?-1:1,d=js(js(s,Ws(l,c+r)),{x:u*-n,y:0});e=a;const f={x:u,y:0};t.sr.Be(d).ul(f),t.sr.hr();const A=zs(t.sr.Kg());return{position:d,alignment:f,shape:t.sr,boundaries:A,sliceAngleVec:l,slice:t}})),l=[];for(let t=0;t<h.length;t+=1){const i=h[t],s=l[l.length-1];s&&!1!==Fs([s.boundaries,i.boundaries])?i.shape.setVisible(!1):(l.push(i),i.shape.setVisible(!0))}for(let t=0;t<this.Wg.length;t+=1)this.Wg[t].setVisible(!1);l.forEach(((t,i)=>{const e=t.slice.xg,h=xl(e,s,c+o+a*t.slice.getAnimatedExplosion()),r=ie(t.position.y,h,s),n=t.position;this.qg([h,r,n])}))}}getMinimumSize(){return r(500,300)}qg(t){let i;for(let t=0;t<this.Wg.length;t+=1)if(!this.Wg[t].getVisible()){i=this.Wg[t].setVisible(!0);break}void 0===i&&(i=this.Gg.tv(this.xf,void 0,[Cl.InternalUI]).Ne(this.Jg).setPointerEvents(!1),this.Wg.push(i)),i.ti().Dl(t)}}class Fl extends wl{constructor(){super(...arguments),this.Hg=pl.Name,this.sv=.5}Xg(t,i,s,e){const h=this.Dg,r=Math.max(0,.5*Math.min(e.x,e.y)-h);Ml(t,i,s,r,this.Sc,h);for(let i=0;i<t.length;i+=1){const e=t[i],n=e.xg,o=e.sr,a=this.Sc/100,l=((1-a)*this.sv+a)*r+e.getAnimatedExplosion()*h,c=xl(n,s,l);o.Be(c).nl(0).ll(0)}}getMinimumSize(){return r(200,200)}setLabelPosition(t){return this.sv=t,this.St.Ls(),this}getLabelPosition(){return this.sv}}const Il={LabelsOnSides:Tl,LabelsInsideSlices:Fl},Pl=t=>{if(yh(t)){const i=t.getThickness(),s=t.getFillStyle();if(U(s))return 1===i?oh:new lh({size:i,fillStyle:s,shape:"sphere"})}return oh};class Ll{constructor(t,i,s,e,h,r,n,o,a,l){this.S=0,this.ft=!0,this.dt=!1,this.ut=!0,this.D=new zt,this.Ls=t,this.ev=i,this.hv=s,this.rv=e,this.nv=h,this.ov=r,this.Cd=n,this.QA=o,this.av=a,this.Fn=l}setValue(t){return t===this.S||(this.S=t,this.Ls(),this.D.R("valuechange",{value:this.S})),this}getValue(){return this.S}setTickStyle(t){return this.hv="function"==typeof t?t(this.hv):t,this.Ls(),this}getTickStyle(){return this.hv}setTickLength(t){return this.rv=t,this.Ls(),this}getTickLength(){return this.rv}setGridStrokeStyle(t){return this.nv="function"==typeof t?t(this.nv):t,this.Ls(),this}getGridStrokeStyle(){return this.nv}setTextPadding(t){return this.ov=t,this.Ls(),this}getTextPadding(){return this.ov}setTextRotation(t){return this.Cd=t,this.Ls(),this}getTextRotation(){return this.Cd}setTextFillStyle(t){return this.QA="function"==typeof t?t(this.QA):t,this.Ls(),this}getTextFillStyle(){return this.QA}setTextFont(t){return this.av="function"==typeof t?t(this.av):t,this.Ls(),this}getTextFont(){return this.av}setTextFormatter(t){return this.Fn=t,this.Ls(),this}dispose(){return this.dt||(this.dt=!0,this.ev(),this.Ls(),this.D.R("dispose",{})),this}isDisposed(){return this.dt}setVisible(t){const i=this.ft!==t;return this.ft=t,i&&(this.D.R("visiblechange",{isVisible:this.ft}),this.Ls()),this}getVisible(){return this.ft}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.ut=t,this.Ls(),this}getPointerEvents(){return this.ut}}class Bl extends Ll{constructor(t,i,s,e,h,r,n,o,a,l,c,u,d){super(t,i,s,e,h,r,n,o,a,l),this.lv=c,this.cv=u,this.nn=d}setBackgroundFillStyle(t){return this.lv="function"==typeof t?t(this.lv):t,this.Ls(),this}getBackgroundFillStyle(){return this.lv}setBackgroundStrokeStyle(t){return this.cv="function"==typeof t?t(this.cv):t,this.Ls(),this}getBackgroundStrokeStyle(){return this.cv}setPadding(t){return this.nn="number"==typeof t?{left:t,top:t,right:t,bottom:t}:{...this.nn,...t},this.Ls(),this}getPadding(){return this.nn}}class Dl{constructor(t,i,s,e){this.uv=[],this.dv=new Map,this.fv=t,this.Av=i,this.gv=s,this.vv=e}yv(){this.gv&&this.gv();const t=[];return{add:(i,s)=>{t.push({instanceUniqueProperties:i,instanceSharedProperties:s})},finishPlot:()=>{const i=[];let s=[];t.forEach((t=>{const s=i.find((i=>((t,i)=>{const s=Object.keys(t);for(const e of s)if(t[e]!==i[e])return!1;return!0})(i.sharedProperties,t.instanceSharedProperties)));s?s.instances.push(t.instanceUniqueProperties):i.push({sharedProperties:t.instanceSharedProperties,instances:[t.instanceUniqueProperties]})}));const e=this.uv.slice(),h=[];i.forEach((t=>{let i=e.pop();i||(i=this.fv(),this.uv.push(i));const r=[],n=i.pv().slice();t.instances.forEach(((t,i)=>{const s=n.shift();r.push({...t,existingMember:s})}));const o=this.Av(i,r,t.sharedProperties);s=Ui(s,o,{canReturnB:!0});for(let s=0;s<t.instances.length;s+=1)h.push({Mt:t.instances[s].Mt,collection:i,member:o[s]});n.forEach((t=>{null==i||i.Ad(t)}))})),e.forEach((t=>{t.dispose();const i=this.uv.indexOf(t);i<0?Ki(0,(()=>{})):this.uv.splice(i,1)})),h.forEach((t=>{const i=this.dv.get(t.Mt);i&&t.collection.St.ra({entity:i.collection,collectionMember:i.member},{entity:t.collection,collectionMember:t.member})})),this.dv.clear(),h.forEach((t=>{this.dv.set(t.Mt,t)})),this.vv&&this.vv(this.uv,s)}}}mv(){this.uv.forEach((t=>{t.dispose()})),this.uv.length=0}}class El{constructor(t){this.Sv=[],this.bv=t}yv(){return this.xv(),{add:()=>this.Il(),finishPlot:()=>{this.Mv()}}}Il(){let t=this.Sv.find((t=>t.isFree));return t||(t={isFree:!1,shape:this.bv()},this.Sv.push(t)),t.isFree=!1,t.shape}xv(){this.Sv.forEach((t=>{t.isFree=!0}))}Mv(){this.Sv.filter((t=>t.isFree)).forEach((t=>{t.shape.dispose(),this.Sv.splice(this.Sv.indexOf(t),1)}))}mv(){this.Sv.forEach((t=>t.shape.dispose())),this.Sv.length=0}}class Rl extends Tr{constructor(t,i,s,e,h,r,n,o,a){super(t,i,s,e,o,{numeric:i.wv({x:t.St._t.xAxis3DNumericTicks,y:t.St._t.yAxis3DNumericTicks,z:t.St._t.zAxis3DNumericTicks}),datetime:i.wv({x:t.St._t.xAxis3DDateTimeTicks,y:t.St._t.yAxis3DDateTimeTicks,z:t.St._t.zAxis3DDateTimeTicks}),time:i.wv({x:t.St._t.xAxis3DTimeTicks,y:t.St._t.yAxis3DTimeTicks,z:t.St._t.zAxis3DTimeTicks})},{type:"linear"}),this.Zd=[],this.D=new zt,this.chart=t,this._v=h,this.Cv=r,this.kv=n,this.Tv=this._v.ot;const l=this.Lh.wv({x:this._t.xAxis3DStrokeStyle,y:this._t.yAxis3DStrokeStyle,z:this._t.zAxis3DStrokeStyle});this.Fv=this._v.tv([Cl.InternalUI]).Ne(l).Iv(Pl(l)).setPointerEvents(!1),this.Mh=this.Cv.Yr(this.kv).setPointerEvents(!1).Ie(i.wv({x:t.St._t.xAxis3DTitleFillStyle,y:t.St._t.yAxis3DTitleFillStyle,z:t.St._t.zAxis3DTitleFillStyle})).Xh(i.wv({x:t.St._t.xAxis3DTitleFont,y:t.St._t.yAxis3DTitleFont,z:t.St._t.zAxis3DTitleFont})).xa(3),this.Pv=new El((()=>this.Cv.Yr(this.kv).xa(2).Ur(us).$r(us))),this.Lv=new Dl((()=>this.Cv.Bv(this.kv).setPointerEvents(!1).xa(1)),((t,i,s)=>(t.Ie(s.fillStyle).Fe(s.strokeStyle),i.map((({positions:i,existingMember:s})=>{const e=s||t.lo();return e.Hl(i),e}))))),this.Dv=new Dl((()=>this._v.Gf().setPointerEvents(!1)),((t,i,s)=>(t.ti().Ne(s.lineStyle),i.map((({positions:i,existingMember:s})=>s||t.Dl(i)))))),this.vs=a,this.Zh=this.vs.kf([this.Mh]).Ps(e.effectsText),s.gf=this}setTickStrategy(t,i){return super.Rh(t,i)}getTickStrategy(){return this.sh}addCustomTick(){const t=new Bl((()=>this.chart.St.Ls()),(()=>{const i=this.Zd.indexOf(t);i>=0&&this.Zd.splice(i,1)}),this._t.xAxis3DNumericTicks.majorTickStyle.tickStyle,this._t.xAxis3DNumericTicks.majorTickStyle.tickLength,this._t.xAxis3DNumericTicks.majorTickStyle.gridStrokeStyle,this._t.xAxis3DNumericTicks.majorTickStyle.tickPadding,this._t.xAxis3DNumericTicks.majorTickStyle.labelRotation,this._t.xAxis3DNumericTicks.majorTickStyle.labelFillStyle,this._t.xAxis3DNumericTicks.majorTickStyle.labelFont,(t=>this.formatValue(t)),V,Wt,{left:4,right:4,top:4,bottom:4});return this.Zd.push(t),this.chart.St.Ls(),t}setStrokeStyle(t){return this.Fv.Ne(t).Iv(Pl(this.Fv.In())),this.chart.St.Ls(),this}getStrokeStyle(){return this.Fv.In()}setVisible(t){return super.setVisible(t),this.Fv.setVisible(t),!1===t&&(this.Dv.mv(),this.Pv.mv(),this.Lv.mv()),this._v.Ls(),this}Df(){return this.chart.getSeries()}Or(t,i,s){const e=Math.abs(this.ot.J(i-t)*this._v.Ev(1));return{min:t-s*e,max:i+s*e}}lr(t){const i=this.Tv,s=a(i.x.tt(),i.y.tt(),i.z.tt()),{gridlinePositionA:e,gridlinePositionB:h,gridlinePositionC:n}=this.Lh.Rv(t.cameraDirection),o=t=>({x:-1===t.x?this.Tv.x.getInnerStart():1===t.x?this.Tv.x.getInnerEnd():0,y:-1===t.y?this.Tv.y.getInnerStart():1===t.y?this.Tv.y.getInnerEnd():0,z:-1===t.z?this.Tv.z.getInnerStart():1===t.z?this.Tv.z.getInnerEnd():0}),l=o(e),c=o(h),u=o(n),d=this.Lh.Ud,f=Rs(t.start,t.end,.5),A=Ss.addVec(f,Ss.multiplyVec(Ss.multiply(d,-1),s)),g=this._v.zv(f)||r(0,0),v=this._v.zv(A)||r(0,0);return{center:f,wuSize:s,tickDirection3D:d,tickDirection2D:Ys(Zs(ot(g,this.chart.St.ot,this.kv),ot(v,this.chart.St.ot,this.kv))),gridlinePositionA:l,gridlinePositionB:c,gridlinePositionC:u}}Ar(t,i,s,e,h){return{...this.Vv(h,t,i.th.tickLength,i.th.tickPadding),keyValue:t,tickLevel:i,labelText:s,labelOffset:{x:0,y:0},labelRotation:i.th.labelRotation}}br(t,i){const s=new zl(i,t,this.Cv,this.kv,this._v);return s.sr.xa(0),s}yr(t,i){return{ticksInfo:i}}_h(){return this.kv}Vv(t,i,s,e){const{wuSize:h,start:n,end:o,tickDirection3D:a,tickDirection2D:l}=t,c=(i-this.ot.getInnerStart())/(this.ot.getInnerEnd()-this.ot.getInnerStart()),u=Ss.addVec(Rs(n,o,c),Ss.multiplyVec(Ss.multiply(a,this._v.Ev(.5*this.Fv.In().getThickness())),h)),d=Ss.addVec(u,Ss.multiplyVec(Ss.multiply(a,this._v.Ev(s)),h)),f=this._v.zv(d)||r(0,0);return{labelPosition:js(ot(f,this.chart.St.ot,this.kv),Ws(l,e)),labelAlignment:{x:-l.x,y:-l.y},posTickEnd3D:d,posTickStart3D:u,tickPositionRelative:c}}Ov(t,i,s){const{wuSize:e,start:h,end:n,tickDirection3D:o}=i,a=(t-this.ot.getInnerStart())/(this.ot.getInnerEnd()-this.ot.getInnerStart()),l=Ss.addVec(Rs(h,n,a),Ss.multiplyVec(Ss.multiply(o,this._v.Ev(.5*this.Fv.In().getThickness())),e)),c=Ss.addVec(l,Ss.multiplyVec(Ss.multiply(o,this._v.Ev(10)),e)),u=this._v.zv(l)||r(0,0),d=this._v.zv(c)||r(0,0);return this.Cv.Ge(this.kv).Ue(u).$e(d).Ne(new vh({fillStyle:new $({color:b(120*s)}),thickness:1}))}Rr(t,i){return Vl(t,i,this.ot)}Nv(t){const i=this.Tv;let s,e;this.Gv()?(s=a(i.x.getInnerEnd(),i.y.getInnerStart(),i.z.getInnerStart()),e=a(i.x.getInnerEnd(),i.y.getInnerStart(),i.z.getInnerEnd())):(s=a(i.x.getInnerStart(),i.y.getInnerStart(),i.z.getInnerStart()),e=this.Lh.$v(a(i.x.getInnerEnd(),i.y.getInnerEnd(),i.z.getInnerEnd()),s));const h=this._v.zv(s)||r(0,0),n=this._v.zv(e)||r(0,0);return{cameraDirection:t,physicalAxisSize:Xs(Zs(h,n)),start:s,end:e,start2D:h,end2D:n}}Le(t){if(!this.ft)return;const i=Math.min(this.zh,this.Vh),s=Math.max(this.zh,this.Vh);this.Fv.ti().Dl([t.start,t.end]);const e=this.Dv.yv();for(const[i,s]of this.eh)for(const[,h]of s){const s=t.ticksInfo.get(h);if(!s)continue;const r=this.Uv(t,s);e.add({Mt:0,positions:[r.tickStroke.start,r.tickStroke.end]},{lineStyle:i.th.tickStyle}),r.gridStroke&&e.add({Mt:0,positions:r.gridStroke},{lineStyle:i.th.gridStrokeStyle}),h.sr.Be(s.labelPosition).ul(s.labelAlignment).Wh(s.labelRotation).hl(s.labelOffset.x,s.labelOffset.y)}const h=this.Pv.yv(),n=this.Lv.yv(),o={x:0,y:0};this.Zd.forEach((r=>{if(!r.ft||r.S<i||r.S>s)return;const a=this.Vv(t,r.S,r.rv,r.ov),l=this.Uv(t,a);if(r.QA!==V){const t=h.add().Be(a.labelPosition).ul(a.labelAlignment).Ie(r.QA).Xh(r.av).Sr(r.Fn(r.S)).Wh(r.Cd).setPointerEvents(r.ut),i=t.hr().xi();if(o.x=Math.max(o.x,i.x),o.y=Math.max(o.y,i.y),r.lv!==V){const i=t.Kg(),s=[{x:i[0].x-r.nn.left,y:i[0].y+r.nn.top},{x:i[1].x+r.nn.right,y:i[1].y+r.nn.top},{x:i[2].x+r.nn.right,y:i[2].y-r.nn.bottom},{x:i[3].x-r.nn.left,y:i[3].y-r.nn.bottom}];n.add({Mt:0,positions:s},{fillStyle:r.lv,strokeStyle:r.cv})}}e.add({Mt:0,positions:[l.tickStroke.start,l.tickStroke.end]},{lineStyle:r.hv}),l.gridStroke&&e.add({Mt:0,positions:l.gridStroke},{lineStyle:r.nv})})),h.finishPlot(),n.finishPlot(),e.finishPlot();const a=this.Tr(((t,i)=>{const s=i.sr.hr().xi();return t.x=Math.max(t.x,s.x),t.y=Math.max(t.y,s.y),t}),{x:o.x,y:o.y}),l=Math.atan((t.end2D.y-t.start2D.y)/(t.end2D.x-t.start2D.x));this.Mh.ul({x:0,y:0}).Wh(180*-l/Math.PI);const c=Ss.addVec(t.center,Ss.multiplyVec(Ss.multiply(t.tickDirection3D,this._v.Ev(.5*this.Fv.In().getThickness()+this.Ir(((t,i)=>Math.max(t,i.tickLength)),0))),t.wuSize)),u=this._v.zv(c)||r(0,0),d=js(ot(u,this.chart.St.ot,this.kv),js(js(Qs(a,t.tickDirection2D),Ws(t.tickDirection2D,this.Ir(((t,i)=>Math.max(t)),0))),Qs(Ws(this.Mh.hr().xi(),.5),t.tickDirection2D)));this.Mh.Be(d),this.Fv.Yv={overrideFollowing:!1,skipMousePicking:!1}}Uv(t,i){const{gridlinePositionA:s,gridlinePositionB:e,gridlinePositionC:h}=t,r=i.posTickStart3D,n=i.posTickEnd3D,o=i.tickPositionRelative;let a;return di(o,0)||di(o,1)||(a=[this.Hv()?{...s,x:r.x}:this.Xv()?{...s,y:r.y}:this.Gv()?{...s,z:r.z}:{x:0,y:0,z:0},this.Hv()?{...e,x:r.x}:this.Xv()?{...e,y:r.y}:this.Gv()?{...e,z:r.z}:{x:0,y:0,z:0},this.Hv()?{...h,x:r.x}:this.Xv()?{...h,y:r.y}:this.Gv()?{...h,z:r.z}:{x:0,y:0,z:0}]),{gridStroke:a,tickStroke:{start:r,end:n}}}Wv(t){const i=this.zh,s=this.Vh,e=.01*t*(s-i),h=i+e,r=s+e;this.tr(h,r,{allowIntervalLengthChange:!1,skipIntervalRestriction:!1})}jv(t,i,s){if(0===i)return;s<0&&(i*=-1,s*=-1);const e=this.Vh-this.zh,h=e*(i>=1?1+.02*s:1-.02*s)-e;"centered"===t?this.tr(this.zh+h/2,this.Vh-h/2,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1}):"keep-start"===t?this.tr(this.zh,this.Vh-h/2,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1}):"keep-end"===t&&this.tr(this.zh+h/2,this.Vh,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1})}Qh(){super.Qh(),this.Dv.mv(),this.Pv.mv(),this.Lv.mv()}Hv(){return this.Lh.Hv()}Xv(){return this.Lh.Xv()}Gv(){return this.Lh.Gv()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}}class zl extends Fr{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Zv=h}}const Vl=(t,i,s)=>fi(t+.1*(i-t)+Math.abs(s.tt())/100*Math.sign(i-t),Math.min(t,i),Math.max(t,i)),Ol=(t,i,s,e)=>({Pr:()=>{const s=t();let e;for(const t of s){if(!t.Qv())continue;const s=i(t);e=void 0===s?e:void 0!==e?Math.min(e,s):s}return e},Lr:()=>{const i=t();let e;for(const t of i){if(!t.Qv())continue;const i=s(t);e=void 0===i?e:void 0!==e?Math.max(e,i):i}return e},Dr:()=>{const i=t();let s;for(const t of i){if(!t.Qv())continue;const i=e(t);s=void 0===i?s:void 0!==s?Math.max(s,i):i}return s}}),Nl=t=>({...Ol(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.Dr().y)),wv:t=>t.y,$v:(t,i)=>({x:i.x,y:t.y,z:i.z}),Ud:a(-1,0,0),Rv:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:a(i.x,0,i.z),gridlinePositionB:a(i.x,0,-i.z),gridlinePositionC:a(-i.x,0,-i.z)}},Hv:()=>!1,Xv:()=>!0,Gv:()=>!1}),Gl=t=>({...Ol(t,(t=>t.getZMin()),(t=>t.getZMax()),(t=>t.Dr().z)),wv:t=>t.z,$v:(t,i)=>({x:i.x,y:i.y,z:t.z}),Ud:a(1,0,0),Rv:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:a(i.x,-i.y,0),gridlinePositionB:a(i.x,i.y,0),gridlinePositionC:a(-i.x,i.y,0)}},Hv:()=>!1,Xv:()=>!1,Gv:()=>!0});class $l extends Re{constructor(t,i,s,e,h){super(t,i,e,h),this.Jv=ih,this.Kv=!0,this.qv=!0,this.ty=!0,this.chart=t,this._v=s,this.As=new Map}Kt(t,i){const s=null==t?void 0:t.dataPoint;if(s)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.xf,axisLocation:s},...s,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ()}}setCursorEnabled(t){return this.Kv=t,this}getCursorEnabled(){return this.Kv}setCursorFormattingOverride(t){return this.iy=t,this}getCursorFormattingOverride(){return this.iy}BA(){return this.getCursorEnabled()}setAutoScrollingEnabled(t){return this.qv=t,this.chart.St.Ls(),this}getAutoScrollingEnabled(){return this.qv}setColorShadingStyle(t){return this.Jv=t,this.As.forEach(((i,s)=>s.sy(t))),this._v.Ls(),this}getColorShadingStyle(){return this.Jv}setDepthTestEnabled(t){return this.ty=t,this.As.forEach(((i,s)=>s.ey(t))),this._v.Ls(),this}getDepthTestEnabled(){return this.ty}hy(){}Le(){}vv(){}getXMax(){const t=this.vl;return t?t.jt():0}getXMin(){const t=this.vl;return t?t.Wt():0}getYMax(){const t=this.vl;return t?t.Qt():0}getYMin(){const t=this.vl;return t?t.Zt():0}getZMax(){const t=this.vl;return t?t.ny():0}getZMin(){const t=this.vl;return t?t.oy():0}Dr(){const t=this.vl;return t?a(t.Wl(),t.jl(),t.ly()):a(0,0,0)}}class Ul extends $l{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Es="Box Series 3D",this.uy=.25,this.Ay=!1,this.D=new zt,this.Ce=Ji(this._t.boxSeries3DFillStyle,h),this.vl=this._v.vy().ey(this.ty).Ie(this.Ce).gy(this.uy).Bt(this.getHighlight()),this.ws(this.vl)}yy(){return this.Ay}invalidateData(t){const i=t.length;if(0===i)return this;this.Ay&&this.chart.St.Zo(Gr.qn);const s=t[0];if(!s)return this;let e;if("xMin"in s||"yMin"in s||"zMin"in s||"xMax"in s||"yMax"in s||"zMax"in s){e=[];for(let s=0;s<i;s+=1){const i=t[s],h="xMin"in i&&"xMax"in i,r="yMin"in i&&"yMax"in i,n="zMin"in i&&"zMax"in i;e[s]={color:i.color,value:i.value,id:i.id,xCenter:h?(i.xMin+i.xMax)/2:void 0,yCenter:r?(i.yMin+i.yMax)/2:void 0,zCenter:n?(i.zMin+i.zMax)/2:void 0,xSize:h?i.xMax-i.xMin:void 0,ySize:r?i.yMax-i.yMin:void 0,zSize:n?i.zMax-i.zMin:void 0}}}else e=t;return this.vl.py(e.slice()),this.chart.St.Ls(),this.Ay=!0,this}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.vl.Ie(t),this.chart.St.Ls(),this}getFillStyle(){return this.Ce}setRoundedEdges(t){return void 0!==t&&isNaN(t)&&(console.error("'BoxSeries3D.setRoundedEdges | NaN was supplied.'"),t=void 0),this.uy=void 0!==t?fi(t,0,1):void 0,this.vl.gy(this.uy),this._v.Ls(),this}getRoundedEdges(){return this.uy}Qv(){return this.qv&&this.getVisible()}De(t,i){t.Bt(i),this.chart.St.Ls()}Gs(){return ji(this.Ce,this.vl.Tt())}Le(){super.Le(),this.vl.hr(!1)}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Yl extends $l{constructor(t,i,s,e,h){super(t,i,s,e,h),this.Ay=!1,this.D=new zt}yy(){return this.getPointAmount()>0}setStrokeStyle(t){this.Oc="function"==typeof t?t(this.Oc):t;const i=this.Oc;return this.vl.Ne(i),this._v.Ls(),this}getStrokeStyle(){return this.Oc}add(t){return this.Ay&&this.chart.St.Zo(Gr.qn),this.Ay=!0,(t=Array.isArray(t)?t:[t])?(this.vl.Dl(t.slice()),this._v.Ls(),this):this}clear(){return this.vl.ti(),this}getPointAmount(){const t=this.vl;return t.El()+t.Rl()}Qv(){return this.qv&&this.getPointAmount()>0&&this.getVisible()}De(t,i){t.Bt(i),this._v.Ls()}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{stroke:this.Oc})}Gs(){return ji(this.Oc.getFillStyle(),this.vl.Tt())}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Hl extends Yl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Es="Line Series 3D",this.Oc=Ji(e.lineSeries3DStrokeStyle,h),this.my=nn.pointStyle3D,this.Sy(this.Oc),this.vl=this._v.tv([Cl.UserSeries]).ey(this.ty).Ne(this.Oc).Iv(this.my).Bt(this.getHighlight()),this.ws(this.vl)}setStrokeStyle(t){super.setStrokeStyle(t),this.Sy(this.Oc);const i=this.my;return this.vl.Iv(i),this}Sy(t){const i=new Ah.Triangulated({shape:"sphere",fillStyle:t.getFillStyle(),size:t.getThickness()});this.my=i}}class Xl extends Yl{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Es="Point Line Series 3D",this.my=Ji(e.pointLineSeries3DPointStyle,h),this.Oc=Ji(e.lineSeries3DStrokeStyle,h),this.by(),this.vl=this._v.tv([Cl.UserSeries]).ey(this.ty).Ne(this.Oc).Iv(this.my).Bt(this.getHighlight()),this.ws(this.vl)}setPointStyle(t){return this.my="function"==typeof t?t(this.my):t,this.by(),this.vl.Iv(this.my),this._v.Ls(),this}getPointStyle(){return this.my}setStrokeStyle(t){super.setStrokeStyle(t);const i=this.Oc,s=Math.abs(i.getThickness()),e=this.my,h=e.getSize();s>("object"==typeof h?Math.max(h.x,h.y,h.z):h)&&(this.my=e.setSize(s)),this.by();const r=this.my;return this.vl.Iv(r),this._v.Ls(),this}Gs(){return ji(this.Oc.getFillStyle(),this.vl.Tt())||ji(this.my.getFillStyle(),this.vl.Tt())}by(){const t=this.my,i=t.getSize();this.my=t.setSize(i)}De(t,i){t.Bt(i),this._v.Ls()}}class Wl extends $l{constructor(t,i,s,e,h,r){super(t,i,s,e,h),this.Ay=!1,this.D=new zt,((null==r?void 0:r.individualPointSizeAxisEnabled)||(null==r?void 0:r.individualPointSizeEnabled))&&this.chart.St.Zo(Gr.io)}yy(){return this.getPointAmount()>0}add(t){return this.Ay&&this.chart.St.Zo(Gr.qn),this.Ay=!0,(t=Array.isArray(t)?t:[t])?(this.vl.Dl(t.slice()),this._v.Ls(),this):this}clear(){return this.vl.ti(),this}getPointAmount(){const t=this.vl;return t.El()+t.Rl()}Qv(){return this.qv&&this.getPointAmount()>0&&this.getVisible()}De(t,i){t.Bt(i),this._v.Ls()}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{point3D:this.xy})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class jl extends Wl{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.Es="Point Series 3D";const n=void 0!==(null==r?void 0:r.automaticColorIndex)?r.automaticColorIndex:this.chart.getSeries().length;this.xy=Ji(e.pointSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.vl=this._v.wy(o).ey(this.ty).My(this.xy).Bt(this.getHighlight()),this.ws(this.vl)}setPointStyle(t){this.xy="function"==typeof t?t(this.xy):t;const i=this.xy;return this.vl.My(i),this._v.Ls(),this}getPointStyle(){return this.xy}Gs(){return ji(this.xy.getFillStyle(),this.vl.Tt())}}class Zl extends Wl{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.Es="Point Cloud Series 3D";const n=this.chart.getSeries().length;this.xy=Ji(e.pointCloudSeries3DPointStyle,n);const o={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...r};this.vl=this._v.wy(o).My(this.xy).Bt(this.getHighlight()),this.ws(this.vl)}setPointStyle(t){this.xy="function"==typeof t?t(this.xy):t;const i=this.xy;return this.vl.My(i),this._v.Ls(),this}getPointStyle(){return this.xy}Gs(){return ji(this.xy.getFillStyle(),this.vl.Tt())}}const Ql={Triangulated:jl,Pixelated:Zl};class Jl extends Ua{constructor(t,i,s,e,h,r,n,o,a,l,c){super(t,i,s,e,h,r,n,o,a,l,c),this._y=[],this.Cy=0,this.ky=t=>{const i=this._y.indexOf(t);i>=0&&(this._y.splice(i,1),this.D.R("seriesdispose",{series:t}))},this.seriesBackground=new zt,this.Ty=this.vs.kf()}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this._y.forEach((i=>i.setAnimationHighlight(t))),this}Fy(t,i){this.Ty._s([i]),this.seriesBackground.Nt(t)}setSeriesBackgroundFillStyle(t){return this.Iy.Ie(t),this.St.Ls(),this}getSeriesBackgroundFillStyle(){return this.Iy.$h()}setSeriesBackgroundStrokeStyle(t){return this.Py.Fe(t),this.St.Ls(),this}getSeriesBackgroundStrokeStyle(){return this.Py.da()}setSeriesBackgroundEffect(t){return this.Ty.Ps(t),this.St.Ls(),this}getSeriesBackgroundEffect(){return this.Ty.Bs()}Ly(t){this._y.push(t),void 0!==this.By&&t.setHighlightOnHover(this.By),this.D.R("seriesadd",{series:t})}Gd(){return this._y}setSeriesHighlightOnHover(t){return this.By=t,this._y.forEach((i=>i.setHighlightOnHover(t))),this}dispose(){return this._y.slice().forEach(ci),super.dispose()}}const Kl=Ss.normalize({x:-.5610788649579117,y:-.35242840511865414,z:-1.1349149375849081});class ql{constructor(t,i,s,e){this.Dy=!0,this.Ey=!0,this.Ry=2*-Math.PI/2160,this.zy=2*Math.PI/2160,this.Vy=.1,this.Oy=1*Math.PI/180,this.Ny=t,this.Gy=i,this.$y=s,this.zv=e}getDefaultCameraConfiguration(t,i){const s={direction:Kl,location:Ss.multiply(Kl,-1)};return this.cameraLocationChanged({boundingBox:t,cameraDirection:s.direction,cameraLocation:s.location,projection:i})||s}applyCameraInteractions(t,i){let s={direction:t.cameraDirection,location:t.cameraLocation};return i.forEach((t=>{"rotate"===t.type?s=this.Uy(s,t):"wheel-zoom"===t.type?s=this.Yy(s,t):"rotate+zoom"===t.type?s=this.Hy(s,t):"fixed-rotate"===t.type?s=this.Xy(s,t):"move"===t.type&&(s=this.Wy(s,t))})),this.Dy?s=this.jy(t.boundingBox,s):this.Ey&&(s=this.Zy(t.boundingBox,t.projection,s)),s}Uy(t,i){const{rotation:s}=i,e=t.location,h=Ss.multiply(Ss.normalize(t.location),-1),{Right:r,Up:n}=this.Qy(h);let o=e;const a=this.Jy(h),l=s.x*this.Ry*a;o=Ss.rotateAroundAxis(o,n,l);const c=(s.y>0?1:-1)*Math.min(Math.abs(s.y)*this.zy,a-this.Oy);return 0!==c&&(o=Ss.rotateAroundAxis(o,r,c)),{location:o,direction:Ss.multiply(Ss.normalize(o),-1)}}Yy(t,i){const{deltaY:s}=i;this.Dy&&this.Ky(!1);const e=t.location,h=Ss.multiply(Ss.normalize(e),-1),r=s*this.Vy,n=Ss.length(e)*-r;return{direction:h,location:Ss.addVec(e,Ss.multiply(h,n))}}Hy(t,i){const{rotation:s,cameraDistance:e}=i;this.Dy&&this.Ky(!1);let h=this.Uy(t,{type:"rotate",rotation:s});const r=h.location,n=Ss.multiply(Ss.normalize(r),-1),o=Ss.multiply(n,-e);return h={direction:Ss.multiply(Ss.normalize(o),-1),location:o},h}Xy(t,i){this.Dy&&this.Ky(!1);const{rotation:s}=i,e=t.location,h=t.direction,{Right:r,Up:n}=this.Qy(h),o=s.x*this.Ry;let a=Ss.normalize(Ss.rotateAroundAxis(h,n,o));const l=s.y*this.zy;return a=Ss.normalize(Ss.rotateAroundAxis(a,r,l)),{location:e,direction:a}}Wy(t,i){this.Dy&&this.Ky(!1),this.Ey=!1;const{amountRight:s,amountForward:e}=i,h=t.location,r=t.direction,{Right:n}=this.Qy(r);return{location:Ss.addVec(h,Ss.multiply(r,.01*e),Ss.multiply(n,.01*s)),direction:r}}projectionChanged(t,i){return this.viewportChanged(t)}boundingBoxChanged(t){const i={location:t.cameraLocation,direction:Ss.multiply(Ss.normalize(t.cameraLocation),-1)};return this.Dy?this.jy(t.boundingBox,i):this.Zy(t.boundingBox,t.projection,i)}cameraLocationChanged(t){const i={location:t.cameraLocation,direction:Ss.multiply(Ss.normalize(t.cameraLocation),-1)};return this.Dy?this.jy(t.boundingBox,i):this.Zy(t.boundingBox,t.projection,i)}viewportChanged(t){const i={location:t.cameraLocation,direction:Ss.multiply(Ss.normalize(t.cameraLocation),-1)};if(this.Dy)return this.jy(t.boundingBox,i)}jy(t,i,s){let e=i;s=void 0!==s?s:0,e=this.qy(t,e,100,20,1,s,5);const h=this.Jy(e.direction);return e=this.tp(e,this.ip(t,e,100,1),h),e}qy(t,i,s,e,h,r,n){return tc(r,n,(t=>({direction:i.direction,location:Ss.multiply(i.direction,-t)})),(i=>this.sp(t,i)),s,h,"linear",e)}ip(t,i,s,e){const{Right:h,Left:r,Up:n,Down:o}=this.Qy(i.direction),a=this.ep(t,!1,i);let l=i;const c=e,u=.1;return Math.abs(a.bottom-a.top)>c&&(l=a.bottom<a.top?ic(0,u,(t=>({location:l.location,direction:Ss.normalize(Ss.lerp(l.direction,o,t))})),(i=>this.hp(t,i)),0,c,!0,s):ic(0,u,(t=>({location:l.location,direction:Ss.normalize(Ss.lerp(l.direction,n,t))})),(i=>this.hp(t,i)),0,c,!0,s)),Math.abs(a.left-a.right)>c&&(l=a.left<a.right?ic(0,u,(t=>({location:l.location,direction:Ss.normalize(Ss.lerp(l.direction,r,t))})),(i=>this.rp(t,i)),0,c,!0,s):ic(0,u,(t=>({location:l.location,direction:Ss.normalize(Ss.lerp(l.direction,h,t))})),(i=>this.rp(t,i)),0,c,!0,s)),l}sp(t,i){const s=this.ep(t,!0,i);return Math.min(s.left+s.right,s.top+s.bottom)}rp(t,i){const s=this.ep(t,!1,i);return Math.abs(s.left-s.right)}hp(t,i){const s=this.ep(t,!1,i);return Math.abs(s.top-s.bottom)}ep(t,i,s){const e=zs(this.np(t,i,s).map((t=>ot(t,this.Ny,this.Gy))));return{left:e.min.x,right:this.Gy.x.getInnerEnd()-e.max.x,top:this.Gy.y.getInnerEnd()-e.max.y,bottom:e.min.y}}np(t,i,s){const e=this.$y,h=a(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),r=a(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),n=[],o=i?16:4,l=(h.x+r.x)/2,c=(h.z+r.z)/2,u=Math.sqrt(2)*(r.x-l),d=Math.sqrt(2)*(r.z-c);return[h.y,r.y].forEach((t=>{for(let i=0;i<o;i+=1){const s=Math.PI/4+2*Math.PI*i/o,e=l+Math.cos(s)*u,h=c+Math.sin(s)*d;n.push({x:e,y:t,z:h})}})),n.map((t=>this.zv(t,s))).filter((t=>void 0!==t))}Zy(t,i,s){const e=Ss.length(s.location),h=this.op(t,i);return e<h.min?{direction:s.direction,location:Ss.multiply(s.direction,-h.min)}:e>h.max?{direction:s.direction,location:Ss.multiply(s.direction,-h.max)}:s}op(t,i){return{min:("perspective"===i?.8:.5)*Math.sqrt(t.x**2+t.y**2+t.z**2),max:3*Math.sqrt(t.x**2+t.y**2+t.z**2)}}Qy(t){const i=a(0,1,0),s=Ss.normalize(Ss.cross(i,Ss.multiply(t,-1)));let e=Ss.cross(s,t);return e.y=Math.abs(e.y),e=Ss.normalize(e),{Right:s,Up:e,Down:Ss.multiply(e,-1),Left:Ss.multiply(s,-1)}}Jy(t){const i={x:0,y:1,z:0},s=Ss.angle(t,i),e=Ss.angle(t,Ss.multiply(i,-1));return Math.min(s,e)}tp(t,i,s){return{location:Ss.lerp(t.location,i.location,s),direction:Ss.normalize(Ss.lerp(t.direction,i.direction,s))}}Ky(t){return this.Dy=t,this}ap(){return this.Dy}}const tc=(t,i,s,e,h,r,n,o)=>{let a,l=0,c=(i+t)/2;do{const o=s(c);if(a={value:c,result:o,score:e(o)},Math.abs(a.score-h)<=r)break;const u=a.score>h;u&&"linear"===n||!u&&"reversed"===n?(c=(a.value+t)/2,i=a.value):(c=(a.value+i)/2,t=a.value),l+=1}while(l<o);return a.result},ic=(t,i,s,e,h,r,n,o)=>{let a,l=0,c=t;do{const u=s(c),d=e(u);if(void 0===a||Math.abs(d-h)<Math.abs(a.score-h)){if(a={value:c,result:u,score:e(u)},Math.abs(a.score-h)<=r)break}else if(n)break;l+=1,c+=1/(o-1)*(i-t)}while(l<o);return a.result};class sc extends $l{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Es="Surface Grid Series 3D",this.lp={},this.Ay=!1,this.D=new zt,this.Jv=Ke;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.chart.getSeries().length;this.Ce=Ji(this._t.surfaceGridSeries3DFillStyle,n),this.cp=Ji(this._t.surfaceGridSeries3DWireframeStyle,n);const o={heatmapDataType:"intensity",dataOrder:e.dataOrder||"columns",columns:e.columns,rows:e.rows};this.Ko=o,this.vl=this._v.dp(o).Ie(this.Ce).up(this.cp).sy(this.Jv).Bt(this.getHighlight()),this.ws(this.vl),this.setHighlightOnHover(!1)}yy(){return this.Ay}Kt(t,i){const s=null==t?void 0:t.dataPoint;if(s)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.xf,axisLocation:s},...s,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:j(this.Ce)?this.Ce.lut:void 0}}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce})}fp(){const t=this.lp.start||{x:0,z:0};let i;i=this.lp.end?{x:(this.lp.end.x-t.x)/this.Ko.columns,z:(this.lp.end.z-t.z)/this.Ko.rows}:this.lp.step?this.lp.step:{x:1,z:1},this.vl.Ap(t,i),this.chart.St.Ls()}setStart(t){return this.lp.start=t,this.fp(),this}getStart(){return this.vl.gp().start}setStep(t){return this.lp.step=t,this.fp(),this}getStep(){return this.vl.gp().step}setEnd(t){return this.lp.end=t,this.fp(),this}getEnd(){return this.vl.gp().end}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.vl.Ie(this.Ce),this._v.Ls(),this}getFillStyle(){return this.Ce}setWireframeStyle(t){return this.cp="function"==typeof t?t(this.cp):t,this.vl.up(this.cp),this._v.Ls(),this}getWireframeStyle(){return this.vl.vp()}setIntensityInterpolation(t){return t=t||"disabled",this.vl.yp(t),this._v.Ls(),this}getIntensityInterpolation(){return this.vl.pp()}invalidateIntensityValues(t){if(this.Ay&&this.chart.St.Zo(Gr.qn),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Ko.dataOrder?t.length:t[0].length,rows:"rows"===this.Ko.dataOrder?t.length:t[0].length},s="columns"===this.Ko.dataOrder?this.Ko.columns:this.Ko.rows,e="columns"===this.Ko.dataOrder?this.Ko.rows:this.Ko.columns;if(i.x>s||i.y>e){if(!0===this.chart.aA.qo){const t=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.Ko.columns}x${this.Ko.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;ni.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.vl.mp({type:"intensity",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Ko.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Ko.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.Ko.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.Ko.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.Ko.dataOrder?this.Ko.columns:this.Ko.rows)-1,o=("columns"===this.Ko.dataOrder?this.Ko.rows:this.Ko.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.chart.aA.qo){const s=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.Ko.columns}x${this.Ko.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;ni.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),c=Math.max(e-n,0),u=Math.max(r-o,0),d=i.primary-(a+c),f=[];if(0===l&&0===u)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===u?void 0:-u);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),h=Math.max(h,0)}this.vl.mp({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this._v.Ls(),this.Ay=!0,this}invalidateHeightMap(t){if(this.Ay&&this.chart.St.Zo(Gr.qn),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Ko.dataOrder?t.length:t[0].length,rows:"rows"===this.Ko.dataOrder?t.length:t[0].length},s="columns"===this.Ko.dataOrder?this.Ko.columns:this.Ko.rows,e="columns"===this.Ko.dataOrder?this.Ko.rows:this.Ko.columns;if(i.x>s||i.y>e){if(!0===this.chart.aA.qo){const t=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.Ko.columns}x${this.Ko.rows}, input ${i.columns}x${i.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;ni.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.vl.Sp({type:"y",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Ko.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Ko.dataOrder?t.values.length:t.values[0].length};let s="columns"===this.Ko.dataOrder?t.iColumn:t.iRow;const e=s+i.primary-1;let h="columns"===this.Ko.dataOrder?t.iRow:t.iColumn;const r=h+i.secondary-1,n=("columns"===this.Ko.dataOrder?this.Ko.columns:this.Ko.rows)-1,o=("columns"===this.Ko.dataOrder?this.Ko.rows:this.Ko.columns)-1;if(s<0||h<0||e>n||r>o){if(!0===this.chart.aA.qo){const s=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.Ko.columns}x${this.Ko.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;ni.console.warn(s)}const a=Math.max(-s,0),l=Math.max(-h,0),c=Math.max(e-n,0),u=Math.max(r-o,0),d=i.primary-(a+c),f=[];if(0===l&&0===u)for(let i=0;i<d;i+=1)f[i]=t.values[a+i];else for(let i=0;i<d;i+=1)f[i]=t.values[a+i].slice(l,0===u?void 0:-u);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},s=Math.max(s,0),h=Math.max(h,0)}this.vl.Sp({type:"y",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this._v.Ls(),this.Ay=!0,this}setCullMode(t){return this.vl.bp("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.vl.xp()}Gs(){return ji(this.Ce,this.vl.Tt())}hy(){}Le(){}vv(){}Qv(){return this.qv&&this.getVisible()}De(t,i){t.Bt(i),this._v.Ls()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class ec extends $l{constructor(t,i,s,e,h,r){super(t,i,s,h,r),this.Es="Surface Grid Series 3D",this.Ay=!1,this.lp={},this.D=new zt,this.chart.St.Zo(Gr.qn),this.Jv=Ke;const n=void 0!==(null==e?void 0:e.automaticColorIndex)?e.automaticColorIndex:this.chart.getSeries().length;this.Ce=Ji(this._t.surfaceScrollingGridSeries3DFillStyle,n),this.cp=Ji(this._t.surfaceScrollingGridSeries3DWireframeStyle,n);const o={heatmapDataType:"intensity",scrollDimension:e.scrollDimension||"columns",columns:e.columns,rows:e.rows};this.Ko=o,this.vl=this._v.Mp(o).Ie(this.Ce).up(this.cp).sy(this.Jv).Bt(this.getHighlight()),this.ws(this.vl),this.setHighlightOnHover(!1)}yy(){return this.Ay}Kt(t,i){const s=null==t?void 0:t.dataPoint;if(s)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.xf,axisLocation:s},...s,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:j(this.Ce)?this.Ce.lut:void 0}}fp(){const t=this.lp.start||{x:0,z:0};let i;i=this.lp.step?this.lp.step:{x:1,z:1},this.vl.Ap(t,i),this.chart.St.Ls()}setStart(t){return this.lp.start=t,this.fp(),this}getStart(){return this.vl.gp().start}setStep(t){return this.lp.step=t,this.fp(),this}getStep(){return this.vl.gp().step}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.vl.Ie(this.Ce),this._v.Ls(),this}getFillStyle(){return this.Ce}setWireframeStyle(t){return this.cp="function"==typeof t?t(this.cp):t,this.vl.up(this.cp),this._v.Ls(),this}getWireframeStyle(){return this.vl.vp()}setIntensityInterpolation(t){return t=t||"disabled",this.vl.yp(t),this._v.Ls(),this}getIntensityInterpolation(){return this.vl.pp()}clear(){return this.vl.ti(),this._v.Ls(),this}addValues(t){if(!t)return this;let i=t.yValues,s=t.intensityValues;if(!i&&!s)return this;if(i&&0===i.length&&(i=void 0),s&&0===s.length&&(s=void 0),this.Ay=!0,i){const t=i[0].length,s=0+t-1,e="columns"===this.Ko.scrollDimension?this.Ko.rows:this.Ko.columns;if(s>e-1){if(!0===this.chart.aA.qo){const i=`SurfaceScrollingGridSeries3D.addValues input yValues overflow.\nGrid was created with ${e} ${"columns"===this.Ko.scrollDimension?"rows":"columns"}, input yValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;ni.console.warn(i)}const s=[];for(let t=0;t<i.length;t+=1)s[t]=i[t].slice(0,e+1);i=s}}if(s){const t=s[0].length,i=0+t-1,e="columns"===this.Ko.scrollDimension?this.Ko.rows:this.Ko.columns;if(i>e-1){if(!0===this.chart.aA.qo){const i=`SurfaceScrollingGridSeries3D.addValues intensityValues overflow.\nGrid was created with ${e} ${"columns"===this.Ko.scrollDimension?"rows":"columns"}, input intensityValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;ni.console.warn(i)}const i=[];for(let t=0;t<s.length;t+=1)i[t]=s[t].slice(0,e+1);s=i}}if(i&&s){const t=i.length,e=s.length;if(t!==e){if(!0===this.chart.aA.qo){const i=`SurfaceScrollingGridSeries3D.addValues input yValues and intensityValues size does not match.\nyValues: ${t}\nintensityValues: ${e}\nData will be automatically clipped according to the smaller supplied sample. This can result in sub-optimal performance.`;ni.console.warn(i)}t>e?i=i.slice(0,e):s=s.slice(0,t)}}const e=i?i.length:null==s?void 0:s.length,h=i?i[0].length:null==s?void 0:s[0].length;return this.vl.wp({startPrimary:0,startSecondary:0,lengthPrimary:e,lengthSecondary:h,heightMapValues:i,intensityValues:s}),this._v.Ls(),this}invalidateValues(t){return this.vl.mp(t),this.chart.St.Ls(),this}getSampleCount(){return this.vl._p()}setCullMode(t){return this.vl.bp("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.vl.xp()}Gs(){return ji(this.Ce,this.vl.Tt())}hy(){}Le(){}vv(){}Qv(){return this.qv&&this.getVisible()}De(t,i){t.Bt(i),this._v.Ls()}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const hc=t=>!!(t&&"object"==typeof t&&"id"in t&&"chart"in t&&t.chart instanceof yc),rc=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y&&"z"in t&&"number"==typeof t.z),nc=(t,i=/\s+/g)=>Array.from(t.split(i).map(parseFloat)),oc=t=>{if(t.length<=3)return t;const i=new Array;for(let s=1;s<t.length-1;s+=1)i.push(t[0]),i.push(t[s]),i.push(t[s+1]);return i},ac=t=>{const i=t.split(/\s+/g);let s=[],e=[],h=[];for(const t of i){const i=nc(t.trim(),"/");s.push(i[0]),i.length>1&&!Number.isNaN(i[1])&&h.push(i[1]),i.length>2&&!Number.isNaN(i[2])&&e.push(i[2])}return s=oc(s),h=oc(h),e=oc(e),{vertexIndex:s,textureIndex:h||void 0,normalIndex:e||void 0}},lc={id:"",ambient:m(0,0,0,0),diffuse:m(254,204,0),emissive:m(0,0,0,0),specular:m(255,255,255),specularCoeff:1,opacity:1};class cc extends $l{constructor(t,i,s,e,h,r){super(t,i,s,e,r),this.Es="Mesh Model 3D",this.Cp=new Float32Array,this.kp=new Float32Array,this.Tp=new Uint16Array,this.ot={x:1,y:1,z:1},this.Fp={x:0,y:0,z:0},this.Ip={x:0,y:0,z:0},this.Pp={x:0,y:0,z:0},this.Lp={w:1,x:0,y:0,z:0},this.Bp={x:0,y:0,z:0},this.Dp=new Array,this.Ep=[],this.Sl=ws,this.D=new zt;const n=void 0!==(null==h?void 0:h.automaticColorIndex)?h.automaticColorIndex:this.chart.getSeries().length;this.vl=this._v.Rp().ey(this.ty).Ie(Ji(this._t.meshModel3DFillStyle||this._t.pointSeriesFillStyle,n)).Bt(this.getHighlight()),this.ws(this.vl)}yy(){return this.Cp.length>0}Kt(t,i){const s=this.getFillStyle();return As({series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:j(s)?s.lut:void 0},{cursorPosition:0,index:0,x:0,y:0,z:0,value:0,coordAxis:0,coordModel:0},(()=>{const e=this.vl.zp(t,i);if(e)return{cursorPosition:{resultTable:this.chart.translateCoordinate(i,this.chart.coordsRelative),resultTableScale:this.chart.xf,axisLocation:e.coordAxis},...e.coordAxis,index:e.index,value:e.value,coordAxis:e.coordAxis,coordModel:e.coordModel,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:j(s)?s.lut:void 0}}))}setModelGeometry(t){const{indices:i,vertices:s,normals:e}=t;let h=xs,r=bs,n=xs,o=bs,a=xs,l=bs;for(let t=0;t<s.length;t+=3){const i=s[t],e=s[t+1],c=s[t+2];h=Math.max(h,i),r=Math.min(r,i),n=Math.max(n,e),o=Math.min(o,e),a=Math.max(a,c),l=Math.min(l,c)}this.Sl={min:{x:r,y:o,z:l},max:{x:h,y:n,z:a}};for(let t=0;t<s.length;t+=3)s[t]-=this.Sl.min.x,s[t+1]-=this.Sl.min.y,s[t+2]-=this.Sl.min.z;this.Bp={x:this.Sl.max.x-this.Sl.min.x,y:this.Sl.max.y-this.Sl.min.y,z:this.Sl.max.z-this.Sl.min.z},this.Cp=s instanceof Float32Array?s:new Float32Array(s),this.checkedNormals=e&&!Number.isNaN(e[0])?e instanceof Float32Array?e:new Float32Array(e):void 0,this.checkedNormals||this.setColorShadingStyle(Ke);const c=new Array,u={indexStart:0,count:i.length,useIndexBuffer:!0,offset:0,material:{id:lc.id,diffuse:lc.diffuse,specular:lc.specular,ambient:lc.ambient,emissive:lc.emissive,specularCoeff:lc.specularCoeff,opacity:1}};return c.push(u),this.Ep=c,this.vl.Vp({vertices:this.Cp,normals:this.checkedNormals,indices:i instanceof Uint16Array?i:new Uint16Array(i),modelSize:this.Bp,parts:this.Ep}),this.chart.St.Ls(),this}Op(t){if(!t)return this;this.Dp=[];let i={id:lc.id,diffuse:lc.diffuse,specular:lc.specular,ambient:lc.ambient,emissive:lc.emissive,specularCoeff:lc.specularCoeff,opacity:1};const s=t.split("\n");for(let t of s){if(t=t.trim(),""===t||t.startsWith("#"))continue;const s=t.split(/\s+/g);switch(s[0].trim().toLowerCase()){case"ka":{const s=nc(t.substring(2).trim()).map((t=>255*t));i.ambient=m(s[0],s[1],s[2])}break;case"ke":{const s=nc(t.substring(2).trim()).map((t=>255*t));i.emissive=m(s[0],s[1],s[2])}break;case"kd":{const s=nc(t.substring(2).trim()).map((t=>255*t));i.diffuse=m(s[0],s[1],s[2])}break;case"ks":{const s=nc(t.substring(2).trim()).map((t=>255*t));i.specular=m(s[0],s[1],s[2])}break;case"d":i.opacity=parseFloat(s[1].trim());break;case"tr":i.opacity=1-parseFloat(s[1].trim());break;case"newmtl":i.diffuse=m(255*i.diffuse.r,255*i.diffuse.g,255*i.diffuse.b,255*i.opacity),i.specular=m(255*i.specular.r,255*i.specular.g,255*i.specular.b,255*i.opacity),i.emissive=m(255*i.emissive.r,255*i.emissive.g,255*i.emissive.b,255*i.opacity),i={id:s[1],diffuse:lc.diffuse,specular:lc.specular,ambient:lc.ambient,emissive:lc.emissive,specularCoeff:lc.specularCoeff,opacity:lc.opacity},this.Dp.push(i)}}return this}setModelMaterial(t){return t?(this.Op(t),this.setFillStyle(V),this.Ep?(this.Ep.forEach((t=>{const i=this.Dp.find((i=>i.id.toLowerCase()===t.material.id.toLowerCase()));i&&(t.material=i)})),this.Ep.sort(((t,i)=>i.material.opacity-t.material.opacity)),this.chart.St.Ls(),this):this):this}setModelFromObj(t){if(!t)return this;const i=new Array,s=new Array,e=new Array,h=new Array,r=new Array,n=new Array,o=new Array;let a={indexStart:0,count:0,offset:0,useIndexBuffer:!1,material:{id:lc.id,diffuse:lc.diffuse,specular:lc.specular,ambient:lc.ambient,emissive:lc.emissive,specularCoeff:lc.specularCoeff,opacity:lc.opacity}},l=0,c=0,u=0,d=0,f=0,A=0,g=0,v=xs,y=bs,p=xs,m=bs,S=xs,b=bs;const x=t.replace(/\r/g,"").split("\n");for(let t of x){if(t=t.trim(),""===t||t.startsWith("#"))continue;const x=t.split(/\s+/g);let M=0;switch(x[0].trim().toLowerCase()){case"v":{const s=nc(t.substring(1).trim()),e=s[0],h=s[1],r=s[2];v=Math.max(v,e),y=Math.min(y,e),p=Math.max(p,h),m=Math.min(m,h),S=Math.max(S,r),b=Math.min(b,r),i.push(...s.slice(0,3)),l+=1,d=l}break;case"vt":{const i=nc(t.substring(2).trim());s.push(...i),c+=1,f=c}break;case"vn":{const i=nc(t.substring(2).trim());e.push(...i),u+=1,A=u}break;case"usemtl":{const t=this.Dp.find((t=>t.id.toLowerCase()===x[1].toLowerCase()));g+=o.length>0?a.count:0,a={indexStart:void 0!==a?3*g*2:0,count:0,offset:void 0!==a?1*g:0,useIndexBuffer:!1,material:t||{id:x[1].toLowerCase(),diffuse:lc.diffuse,specular:lc.specular,ambient:lc.ambient,emissive:lc.emissive,specularCoeff:1,opacity:1}},o.push(a)}break;case"fo":M+=1;case"f":M+=1;{const o=ac(t.substring(M).trim());for(let t=0;t<o.vertexIndex.length;t+=1){let s=o.vertexIndex[t];s<0?s+=d:s-=1,s*=3,h.push(i[s]),h.push(i[s+1]),h.push(i[s+2])}if(a.count+=o.vertexIndex.length,o.textureIndex)for(let t=0;t<o.textureIndex.length;t+=1){let i=o.textureIndex[t];i<0?i+=f:i-=1,i*=3,n.push(s[i]),n.push(s[i+1]),n.push(s[i+2])}if(o.normalIndex)for(let t=0;t<o.normalIndex.length;t+=1){let i=o.normalIndex[t];i<0?i+=A:i-=1,i*=3,r.push(e[i]),r.push(e[i+1]),r.push(e[i+2])}}}}this.Sl={min:{x:y,y:m,z:b},max:{x:v,y:p,z:S}};for(let t=0;t<h.length;t+=3)h[t]-=this.Sl.min.x,h[t+1]-=this.Sl.min.y,h[t+2]-=this.Sl.min.z;if(this.Bp={x:this.Sl.max.x-this.Sl.min.x,y:this.Sl.max.y-this.Sl.min.y,z:this.Sl.max.z-this.Sl.min.z},o.length<1&&h.length>0&&(a.count=h.length/3,o.push(a)),this.Ep=o,this.Cp=new Float32Array(h),r.length<1)for(let t=0;t<h.length/9;t+=1){const i={x:h[9*t],y:h[9*t+1],z:h[9*t+2]},s={x:h[9*t+3],y:h[9*t+4],z:h[9*t+5]},e={x:h[9*t+6],y:h[9*t+7],z:h[9*t+8]},n=Ss.normalize(Ss.cross(Ss.subtractVec(i,s),Ss.subtractVec(i,e)));for(let t=0;t<3;t+=1)r.push(n.x),r.push(n.y),r.push(n.z)}return this.kp=new Float32Array(r.map(((t,i)=>r[i]))),this.checkedNormals=new Float32Array,this.Dp&&this.Ep.sort(((t,i)=>i.material.opacity-t.material.opacity)),this.vl.Vp({vertices:this.Cp,normals:this.kp,indices:this.Tp,modelSize:this.Bp,parts:this.Ep}),this.chart.St.Ls(),this}setVertexValues(t){return this.vl.Np(t),this.chart.St.Ls(),this}setScale(t){const i={x:"number"==typeof t?t:(null==t?void 0:t.x)||1,y:"number"==typeof t?t:(null==t?void 0:t.y)||1,z:"number"==typeof t?t:(null==t?void 0:t.z)||1};return this.ot=i,this.vl.Gp(i),this.chart.St.Ls(),this}getScale(){return this.ot}setModelLocation(t){return this.Ip=t,this.vl.$p(t),this.chart.St.Ls(),this}getModelLocation(){return this.Ip}setModelAlignment(t){return this.Fp=t,this.vl.Yp(t),this.chart.St.Ls(),this}getModelAlignment(){return this.Fp}setModelRotation(t){return this.setModelRotationEuler(t)}getModelRotation(){return this.Pp}setModelRotationEuler(t){const i={x:se(t.x),y:se(t.y),z:se(t.z)};return this.Pp=i,this.vl.Hp(this.Pp),this.chart.St.Ls(),this}getModelRotationEuler(){return this.Pp}setModelRotationQuaternion(t){return this.Lp=t,this.vl.Xp(this.Lp),this.chart.St.Ls(),this}getModelRotationQuaternion(){return this.Lp}setBackfaceCullingMode(t){return this.vl.Wp(t),this.chart.St.Ls(),this}getBackfaceCullingMode(){return this.vl.jp()}setFillStyle(t){return this.vl.Ie(t),this.chart.St.Ls(),this}getFillStyle(){return this.vl.$h()}setColorShadingStyle(t){return this.checkedNormals||t!==ih?super.setColorShadingStyle(t):(console.warn("Phong shading style is not supported without normals. Switching to Simple shading style."),super.setColorShadingStyle(new sh.Simple))}Qv(){return!1}De(t,i){t.Bt(i),this.chart.St.Ls()}Gs(){return ji(this.getFillStyle(),this.vl.Tt())}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.getFillStyle()})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class uc extends hl{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r),this.chart=n,this.Zp=this.chart.getDefaultAxisX().addCustomTick().setVisible(!1).setGridStrokeStyle(r.cursor3DGridStrokeStyleX).setTickStyle(r.cursor3DTickStrokeStyleX).setTextFillStyle(r.cursor3DTickLabelFillStyleX).setTextFont(r.cursor3DTickLabelFontX).setBackgroundFillStyle(r.cursor3DTickLabelBackgroundFillStyleX).setBackgroundStrokeStyle(r.cursor3DTickLabelBackgroundStrokeStyleX).setPadding(r.cursor3DTickLabelPaddingX),this.Qp=this.chart.getDefaultAxisY().addCustomTick().setVisible(!1).setGridStrokeStyle(r.cursor3DGridStrokeStyleY).setTickStyle(r.cursor3DTickStrokeStyleY).setTextFillStyle(r.cursor3DTickLabelFillStyleY).setTextFont(r.cursor3DTickLabelFontY).setBackgroundFillStyle(r.cursor3DTickLabelBackgroundFillStyleY).setBackgroundStrokeStyle(r.cursor3DTickLabelBackgroundStrokeStyleY).setPadding(r.cursor3DTickLabelPaddingY),this.Jp=this.chart.getDefaultAxisZ().addCustomTick().setVisible(!1).setGridStrokeStyle(r.cursor3DGridStrokeStyleZ).setTickStyle(r.cursor3DTickStrokeStyleZ).setTextFillStyle(r.cursor3DTickLabelFillStyleZ).setTextFont(r.cursor3DTickLabelFontZ).setBackgroundFillStyle(r.cursor3DTickLabelBackgroundFillStyleZ).setBackgroundStrokeStyle(r.cursor3DTickLabelBackgroundStrokeStyleZ).setPadding(r.cursor3DTickLabelPaddingZ)}setTickX(t){return t(this.Zp),this.chart.St.Ls(),this}setTickY(t){return t(this.Qp),this.chart.St.Ls(),this}setTickZ(t){return t(this.Jp),this.chart.St.Ls(),this}setTicks(t){return t(this.Zp),t(this.Qp),t(this.Jp),this.chart.St.Ls(),this}dispose(){return super.dispose(),this.Zp.dispose(),this.Qp.dispose(),this.Jp.dispose(),this}Le(){return this.Zp.setVisible(this.ft&&this.sA),this.Qp.setVisible(this.ft&&this.sA),this.Jp.setVisible(this.ft&&this.sA),super.Le()}setPosition(t){this.sA=!0;const i=this.renderingScale,s=za(t.resultTableScale,i),e=s===this.scale?t.resultTable:ot(t.resultTable,s,this.scale);this.NA.setPosition(e),this.Zp.setValue(t.axisLocation.x),this.Qp.setValue(t.axisLocation.y),this.Jp.setValue(t.axisLocation.z);let h=this.KA[0];if(!h){const t=new eo(this.Ys,this.renderingScale,this.scale,ui,this._t).setPointerEvents(!1).setFillStyle(this._t.cursorPointMarkerFillStyle).setSize(this._t.cursorPointMarkerSize).setShape(this._t.cursorPointMarkerShape);h={pointMarker:t,targetVisible:!0},this.KA.push(h),this.ig.forEach((i=>i(t)))}return h.pointMarker.setPosition(e),this.chart.St.Ls(),this}}class dc{constructor(t,i){this.ng=[],this.og=(t,i)=>(this.ng.forEach((s=>s(t,i))),t),this.addStyler=t=>new dc(this.eg,this.ng.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new dc(t,this.ng.map((t=>t))),this.ag=(t,i,s,e,h,r)=>this.og(new uc(t,i,s,e,this.eg,h,r),h),this.eg=t,this.ng=i}}const fc=new dc(qn,[(t,i)=>{rl(t,i)}]),Ac=(t,i,s,e)=>{t.background.addEventListener(i,s,e),t.seriesBackground.addEventListener(i,s,e),t.getSeries().forEach((t=>t.addEventListener(i,s,e)));const h=t=>t.series.addEventListener(i,s,e);return t.addEventListener("seriesadd",h),()=>{t.background.removeEventListener(i,s),t.seriesBackground.removeEventListener(i,s),t.getSeries().forEach((t=>t.removeEventListener(i,s))),t.removeEventListener("seriesadd",h)}},gc=(t,i,s,e)=>{var h,r,n,o,a,l;ms(),i.camera&&s.Kp(),i.x&&t.axisX.fit(null!==(h=i.animationsEnabled)&&void 0!==h?h:void 0,null!==(r=i.stopScroll)&&void 0!==r?r:void 0),i.y&&t.axisY.fit(null!==(n=i.animationsEnabled)&&void 0!==n?n:void 0,null!==(o=i.stopScroll)&&void 0!==o?o:void 0),i.z&&t.axisZ.fit(null!==(a=i.animationsEnabled)&&void 0!==a?a:void 0,null!==(l=i.stopScroll)&&void 0!==l?l:void 0);const c=t.engine.setMouseStyle(tr.ZoomOut);ni.setTimeout((()=>{t.engine.restoreMouseStyle(c)}),500);const u=i.on;u&&ni.requestAnimationFrame((()=>u({event:e})))},vc=(t,i,s,e)=>{ms(),t.restorePreviousZoomState();const h=i.on;h&&ni.requestAnimationFrame((()=>h({event:e})))};class yc extends Jl{constructor(t,i,s,e,h,n,o){var l;super(t,i,s,i.wA("chart3D bg",0),e,i.St._t.chart3DBackgroundFillStyle,i.St._t.chart3DBackgroundStrokeStyle,i.St._t.chart3DTitleFont,i.St._t.chart3DTitleFillStyle,i.St._t.chart3DTitleShadow,n),this.qp=1,this.tm=[],this.im=2,this.sm=!0,this.hm=!0,this.rm=!0,this.nm=0,this.coordsAxis={id:"axes",chart:this},this.coordsWorld={id:"world",chart:this},this.To=[],this.om=[],this.am=!1,this.lm=()=>{if(this.dt)return;const t=new Map;this.forEachAxis((i=>{void 0!==i.Df().find((t=>t.yy()))&&t.set(i,{...i.getInterval(),stopped:i.getStopped()})})),t.size<=0||(this.om.push(t),this.om.length>100&&this.om.shift())},this.Vo=()=>{const t=this._v.um();this.fm.dm(t),this.Am.dm(t);const i=this.gm.viewportChanged(this.vm());i&&this.ym(i),this.St.Ls()},this.D=new zt,this.St.Zo(Gr.Hn),this.Sh.Sr("Chart3D"),this.pm=s.d3(),this.pm.x.W(-1,1),this.pm.y.W(-1,1),this.pm.z.W(-1,1),this._v=i.Sm("chart3D layer3D",0,this.pm),this.fm=i.bm("chart3D series bg",0),this.Am=i.Ng("chart3D axis ui",1),this.xm={x:new Rl(this,(l=()=>this._y,{...Ol(l,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.Dr().x)),wv:t=>t.x,$v:(t,i)=>({x:t.x,y:i.y,z:i.z}),Ud:a(0,-1,0),Rv:t=>{const i={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:a(0,i.y,i.z),gridlinePositionB:a(0,i.y,-i.z),gridlinePositionC:a(0,-i.y,-i.z)}},Hv:()=>!0,Xv:()=>!1,Gv:()=>!1}),this.pm.x,this._t,this._v,this.Am,this.xf,!1,this.vs),y:new Rl(this,Nl((()=>this._y)),this.pm.y,this._t,this._v,this.Am,this.xf,!1,this.vs),z:new Rl(this,Gl((()=>this._y)),this.pm.z,this._t,this._v,this.Am,this.xf,!1,this.vs)},this.Mm=this._v.tv([Cl.InternalUI]).setPointerEvents(!1),this.setBoundingBoxStrokeStyle(this._t.chart3DBoundingBoxStrokeStyle),this.Iy=this.fm.Qc(this.St.ot,Fn.Simple).Ie(this._t.chart3DSeriesBackgroundFillStyle).Fe(Wt).setPointerEvents(!0),this.Py=this.fm.Qc(this.St.ot,Fn.Simple).Ie(V).Fe(this._t.chart3DSeriesBackgroundStrokeStyle).setPointerEvents(!1),super.Fy(this.Iy,this.Py),this.wm({x:1,y:1,z:1},!0),this.gm=new ql(this.St.ot,this.xf,this.pm,((t,i)=>(i&&this.ym(i),this._v.zv(t)))),this._m=this.gm.getDefaultCameraConfiguration(this.Cm(this.km),this.getProjection()),this.ym(this._m);const c=gi(o?o.cursorBuilder:void 0,fc),u=i.$g();this.Ug=Qa(this,u,c.ag(u,this.xf,this.xf,ui,this._t,this),this,"show-pointed",pc,(()=>0)),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled)),this.addEventListener("resize",this.Vo),this.Vo(),this.MA(h,this.xf),this.Tm=(t=>{let i=!1,s=!1,e=!1;const h=(t=>{let i=!0,s=t.getCameraLocation(),e=t.getCameraAutomaticFittingEnabled();return{Fm:()=>{i&&(s=t.getCameraLocation(),e=t.getCameraAutomaticFittingEnabled()),i=!1},Kp:()=>{t.setCameraLocation(s).setCameraAutomaticFittingEnabled(e),i=!0}}})(t);let n={};const o=()=>hi({rotate:{drag:{},ctrl:{drag:!1},shift:{drag:!1},alt:{drag:!1}},zoom:{wheel:{},camera:!0,mode:"centered",pinch:{camera:!1,x:!0,y:!0,z:!0}},restoreDefault:{doubleClick:!0,camera:!0,x:!0,y:!0,z:!0},restorePrevious:!1},n),a=r=>{const n=o();let a=!1,l=!1,c=!1;for(const t of Object.keys(n)){const i=n[t];"object"==typeof i&&(void 0!==i.ctrl&&(a=!0),void 0!==i.shift&&(l=!0),void 0!==i.alt&&(c=!0))}s=r.ctrlKey,i=r.shiftKey,e=r.altKey,("Control"===r.key&&a||"Shift"===r.key&&l||"Alt"===r.key&&c)&&r.preventDefault();const u=Te(n.restoreDefault,void 0,r,i,s,e);u&&u.code===r.code&&(Bi(r),gc(t,u,h,r));const d=Te(n.restorePrevious,void 0,r,i,s,e);d&&d.code===r.code&&(Bi(r),vc(t,d,0,r))},l=t=>{s=t.ctrlKey,i=t.shiftKey,e=t.altKey},c=()=>{s=!1,i=!1,e=!1};ni.addEventListener("keydown",a),ni.addEventListener("keyup",l),ni.addEventListener("blur",c),t.addEventListener("dispose",(()=>{ni.removeEventListener("keydown",a),ni.removeEventListener("keyup",l),ni.removeEventListener("blur",c)}));const u=t=>{},d=n=>{const a=Fe(!1!==t.St.Ko.qo),l=o(),c=Te(l.rotate,"drag",n,i,s,e),u=Te(l.pan,"drag",n,i,s,e);u&&a.push((()=>((t,i,s,e)=>{const h=t.getCursorMode();t.setCursorMode(void 0);let r=i;"mouse"===i.pointerType&&i.preventDefault();const n=e=>{var h,n,o;if(e.pointerId!==i.pointerId)return;Bi(e);const a=e.clientX-r.clientX,l=e.clientY-r.clientY;if(r=e,s&&s.x){const i=a+-l;t.axisX.Wv(-Math.sign(i)*(null!==(h=s.sensitivity)&&void 0!==h?h:1)),!1!==s.stopScroll&&t.axisX.setStopped(!0)}if(s&&s.y){const i=-a+l;t.axisY.Wv(Math.sign(i)*(null!==(n=s.sensitivity)&&void 0!==n?n:1)),!1!==s.stopScroll&&t.axisY.setStopped(!0)}if(s&&s.z){const i=-a+l;t.axisZ.Wv(Math.sign(i)*(null!==(o=s.sensitivity)&&void 0!==o?o:1)),!1!==s.stopScroll&&t.axisZ.setStopped(!0)}const c=null==s?void 0:s.on;c&&ni.requestAnimationFrame((()=>c({event:e})))},o=s=>{s.pointerId===i.pointerId&&(Bi(s),t.setCursorMode(h),ni.removeEventListener("pointermove",n),ni.removeEventListener("pointerup",o),t.engine.container.removeEventListener("pointerdown",a),e())},a=s=>{s.pointerId!==i.pointerId&&(t.setCursorMode(h),ni.removeEventListener("pointermove",n),ni.removeEventListener("pointerup",o),t.engine.container.removeEventListener("pointerdown",a),e())};ni.addEventListener("pointermove",n),ni.addEventListener("pointerup",o),t.engine.container.addEventListener("pointerdown",a),ms()})(t,n,u,f()))),c&&a.push((()=>((t,i,s,e,h)=>{const r=t.getCursorMode();t.setCursorMode(void 0);let n=i,o=!1,a=0;"mouse"===i.pointerType&&i.preventDefault();const l=e=>{var r,l;if(e.pointerId!==i.pointerId)return;Bi(e);const c={x:e.clientX-n.clientX,y:e.clientY-n.clientY};n=e,a+=Xs(c),h.Fm(),t.Im({x:c.x*(null!==(r=s.sensitivity)&&void 0!==r?r:1),y:-c.y*(null!==(l=s.sensitivity)&&void 0!==l?l:1)}),o||(ps(),o=!0);const u=s.on;u&&ni.requestAnimationFrame((()=>u({event:e})))},c=s=>{s.pointerId===i.pointerId&&(Bi(s),t.setCursorMode(r),ni.removeEventListener("pointermove",l),ni.removeEventListener("pointerup",c),t.engine.container.removeEventListener("pointerdown",u),e(),a>=10&&ys("click"))},u=s=>{s.pointerId!==i.pointerId&&(t.setCursorMode(r),ni.removeEventListener("pointermove",l),ni.removeEventListener("pointerup",c),t.engine.container.removeEventListener("pointerdown",u),e())};ni.addEventListener("pointermove",l),ni.addEventListener("pointerup",c),t.engine.container.addEventListener("pointerdown",u),ms()})(t,n,c,f(),h)));const d=Te(l.zoom,"drag",n,i,s,e);d&&a.push((()=>((t,i,s,e,h)=>{const r=t.getCursorMode();t.setCursorMode(void 0);let n=i;"mouse"===i.pointerType&&i.preventDefault();const o=e=>{var r,o,a,l,c,u,d;if(e.pointerId!==i.pointerId)return;Bi(e);const f=e.clientX-n.clientX,A=e.clientY-n.clientY;if(n=e,s.x){const i=f+-A;t.axisX.jv(null!==(r=s.mode)&&void 0!==r?r:"centered",Math.sign(i),null!==(o=s.sensitivity)&&void 0!==o?o:1),!1!==s.stopScroll&&t.axisX.setStopped(!0)}if(s.y){const i=-f+A;t.axisY.jv(null!==(a=s.mode)&&void 0!==a?a:"centered",-Math.sign(i),null!==(l=s.sensitivity)&&void 0!==l?l:1),!1!==s.stopScroll&&t.axisY.setStopped(!0)}if(s.z){const i=-f+A;t.axisZ.jv(null!==(c=s.mode)&&void 0!==c?c:"centered",-Math.sign(i),null!==(u=s.sensitivity)&&void 0!==u?u:1),!1!==s.stopScroll&&t.axisZ.setStopped(!0)}if(s.camera){const i=f+-A;h.Fm(),t.Pm(-.15*Math.sign(i)*(null!==(d=s.sensitivity)&&void 0!==d?d:1))}const g=s.on;g&&ni.requestAnimationFrame((()=>g({event:e})))},a=s=>{s.pointerId===i.pointerId&&(Bi(s),t.setCursorMode(r),ni.removeEventListener("pointermove",o),ni.removeEventListener("pointerup",a),t.engine.container.removeEventListener("pointerdown",l),e())},l=i=>{t.setCursorMode(r),ni.removeEventListener("pointermove",o),ni.removeEventListener("pointerup",a),t.engine.container.removeEventListener("pointerdown",l),e()};ni.addEventListener("pointermove",o),ni.addEventListener("pointerup",a),t.engine.container.addEventListener("pointerdown",l),ms()})(t,n,d,f(),h))),a.end();const A=Te(l.rotate,"pinch",n,i,s,e),g=Te(l.pan,"pinch",n,i,s,e),v=Te(l.zoom,"pinch",n,i,s,e);(A||v||g)&&((t,i,s,e,h,n,o)=>{if(!s&&!e&&!h)return;const a=c=>{if(c.pointerId===i.pointerId)return;const u=n();let d;t.engine.container.removeEventListener("pointerdown",a),ni.removeEventListener("pointerup",l);let f,A=c;const g=c,v=t.getCursorMode();t.setCursorMode(void 0);const y=t.getCameraLocation();let p,m,S;const b=[],x=()=>{var n,a,l,u,v,x,w,_;M=void 0;const C=d,k=A;if(b.forEach((t=>{t.pointerId===i.pointerId?d=t:t.pointerId===c.pointerId&&(A=t)})),b.length=0,f=f||d,void 0===d||void 0===C||void 0===f)return;if(!m||!S){const i=t=>{for(;t<0;)t+=360;for(;t>360;)t-=360;return t},s=(s,e)=>{const h=t._v.zv(s),r=t._v.zv(e);if(!h||!r)return{deg:-1,dir:{x:0,y:0}};const n=t.St.ma({engineX:h.x,engineY:h.y}),o=t.St.ma({engineX:r.x,engineY:r.y});return{deg:i(ee(Zs(r,h))),dir:Ys(Zs({x:o.clientX,y:o.clientY},{x:n.clientX,y:n.clientY}))}},e=t.axisX.getInterval(),h=t.axisY.getInterval(),r=t.axisZ.getInterval(),n={x:s({x:e.start,y:h.start,z:r.start},{x:e.end,y:h.start,z:r.start}),y:s({x:e.start,y:h.start,z:r.start},{x:e.start,y:h.end,z:r.start}),z:s({x:e.end,y:h.start,z:r.start},{x:e.end,y:h.start,z:r.end})},o=t.St.pa(f),a=t.St.pa(g),l=i(ee(Zs({x:a.engineX,y:a.engineY},{x:o.engineX,y:o.engineY})));m=["x","y","z"].reduce(((t,s)=>{const e=Math.abs(n[s].deg-l),h=Math.abs(i(n[s].deg+180)-l),r=Math.min(e,h);return Math.min(r,h)<t.angleDiff?{angleDiff:r,axis:s}:t}),{axis:"x",angleDiff:1e3}).axis,S=n[m].dir}const T=d.clientX-C.clientX,F=d.clientY-C.clientY,I=A.clientX-k.clientX,P=A.clientY-k.clientY,L=Math.sqrt((f.clientX-g.clientX)**2+(f.clientY-g.clientY)**2),B=Math.sqrt((d.clientX-A.clientX)**2+(d.clientY-A.clientY)**2),D=Ss.length(y),E=L/B*(null!==(n=null==h?void 0:h.sensitivity)&&void 0!==n?n:1)*D,R=r((null!==(a=null==s?void 0:s.sensitivity)&&void 0!==a?a:1)*(T+I)/2,(null!==(l=null==s?void 0:s.sensitivity)&&void 0!==l?l:1)*-(F+P)/2);o.Fm(),(s||(null==h?void 0:h.camera))&&(t.tm.push({type:"rotate+zoom",rotation:s?R:{x:0,y:0},cameraDistance:(null==h?void 0:h.camera)?E:D}),t.St.Ls());const z=void 0===p?0:B-Xs(p)?1:-1,V=p?.25*(null!==(u=null==h?void 0:h.sensitivity)&&void 0!==u?u:1)*(B-Xs(p)):0;h&&h.x&&("x"===m||void 0===h.y&&void 0===h.z)&&(t.axisX.jv(null!==(v=h.mode)&&void 0!==v?v:"centered",z,V),!1!==h.stopScroll&&t.axisX.setStopped(!0)),h&&h.y&&("y"===m||void 0===h.x&&void 0===h.z)&&(t.axisY.jv(null!==(x=h.mode)&&void 0!==x?x:"centered",z,V),!1!==h.stopScroll&&t.axisY.setStopped(!0)),h&&h.z&&("z"===m||void 0===h.x&&void 0===h.y)&&(t.axisZ.jv(null!==(w=h.mode)&&void 0!==w?w:"centered",z,V),!1!==h.stopScroll&&t.axisZ.setStopped(!0));const O=(C.clientX+k.clientX)/2,N=(C.clientY+k.clientY)/2,G={x:(d.clientX+A.clientX)/2-O,y:(d.clientY+A.clientY)/2-N},$=qs(Ys(G),S),U=Xs(G)*$*.3*(null!==(_=null==e?void 0:e.sensitivity)&&void 0!==_?_:1);e&&e.x&&("x"===m||void 0===e.y&&void 0===e.z)&&(t.axisX.Wv(-U),!1!==e.stopScroll&&t.axisX.setStopped(!0)),e&&e.y&&("y"===m||void 0===e.x&&void 0===e.z)&&(t.axisY.Wv(-U),!1!==e.stopScroll&&t.axisY.setStopped(!0)),e&&e.z&&("z"===m||void 0===e.x&&void 0===e.y)&&(t.axisZ.Wv(-U),!1!==e.stopScroll&&t.axisZ.setStopped(!0)),p={x:Math.abs(d.clientX-A.clientX),y:Math.abs(d.clientY-A.clientY)};const Y=(null==e?void 0:e.on)||(null==s?void 0:s.on)||(null==h?void 0:h.on);Y&&ni.requestAnimationFrame((()=>Y({event:void 0})))};let M;const w=t=>{t.pointerId!==i.pointerId&&t.pointerId!==c.pointerId||(Bi(t),b.push(t),M||(M=ni.requestAnimationFrame(x)))},_=s=>{s.pointerId!==i.pointerId&&s.pointerId!==c.pointerId||(Bi(s),t.setCursorMode(v),ni.removeEventListener("pointermove",w),ni.removeEventListener("pointerup",_),u(),M&&ni.cancelAnimationFrame(M))};ni.addEventListener("pointermove",w),ni.addEventListener("pointerup",_),ms()},l=s=>{s.pointerId===i.pointerId&&(t.engine.container.removeEventListener("pointerdown",a),ni.removeEventListener("pointerup",l))};t.engine.container.addEventListener("pointerdown",a),ni.addEventListener("pointerup",l)})(t,n,A,g,v,f,h)};Ac(t,"wheel",(r=>{const n=Fe(!1!==t.St.Ko.qo),a=o(),l=Te(a.pan,"wheel",r,i,s,e);l&&n.push((()=>((t,i,s)=>{var e,h,r;Bi(i),s.x&&(t.axisX.Wv(2*Math.sign(i.deltaY)*(null!==(e=s.sensitivity)&&void 0!==e?e:1)),!1!==s.stopScroll&&t.axisX.setStopped(!0)),s.y&&(t.axisY.Wv(2*Math.sign(i.deltaY)*(null!==(h=s.sensitivity)&&void 0!==h?h:1)),!1!==s.stopScroll&&t.axisY.setStopped(!0)),s.z&&(t.axisZ.Wv(2*Math.sign(i.deltaY)*(null!==(r=s.sensitivity)&&void 0!==r?r:1)),!1!==s.stopScroll&&t.axisZ.setStopped(!0));const n=s.on;n&&ni.requestAnimationFrame((()=>n({event:i})))})(t,r,l)));const c=Te(a.zoom,"wheel",r,i,s,e);c&&n.push((()=>((t,i,s,e)=>{var h,r,n,o,a,l,c;Bi(i),s.x&&(t.axisX.jv(null!==(h=s.mode)&&void 0!==h?h:"centered",-Math.sign(i.deltaY),3*(null!==(r=s.sensitivity)&&void 0!==r?r:1)),!1!==s.stopScroll&&t.axisX.setStopped(!0)),s.y&&(t.axisY.jv(null!==(n=s.mode)&&void 0!==n?n:"centered",-Math.sign(i.deltaY),3*(null!==(o=s.sensitivity)&&void 0!==o?o:1)),!1!==s.stopScroll&&t.axisY.setStopped(!0)),s.z&&(t.axisZ.jv(null!==(a=s.mode)&&void 0!==a?a:"centered",-Math.sign(i.deltaY),3*(null!==(l=s.sensitivity)&&void 0!==l?l:1)),!1!==s.stopScroll&&t.axisZ.setStopped(!0)),s.camera&&(e.Fm(),t.Pm(.5*Math.sign(i.deltaY)*(null!==(c=s.sensitivity)&&void 0!==c?c:1)));const u=s.on;u&&ni.requestAnimationFrame((()=>u({event:i})))})(t,r,c,h))),n.end()})),Ac(t,"dblclick",(r=>{if(r.defaultPrevented)return;const n=Fe(!1!==t.St.Ko.qo),a=o(),l=Te(a.restoreDefault,void 0,r,i,s,e);l&&(Bi(r),gc(t,l,h,r));const c=Te(a.restorePrevious,void 0,r,i,s,e);c&&(Bi(r),vc(t,c,0,r)),n.end()}));const f=()=>(A(),g(),()=>{A=Ac(t,"pointermove",u),g=Ac(t,"pointerdown",d)});let A=Ac(t,"pointermove",u),g=Ac(t,"pointerdown",d);return{setUserInteractions:t=>{if(void 0===t)n={rotate:!1,zoom:!1,pan:!1,restoreDefault:!1,restorePrevious:!1};else if(0===Object.keys(t).length)n={};else for(const i of Object.keys(t))!1===t[i]||"object"==typeof t[i]?n[i]=t[i]:n[i]={}},getUserInteractions:o}})(this),this.Lm(this.axisX),this.Lm(this.axisY),this.Lm(this.axisZ)}restorePreviousZoomState(t){if(this.om.length<=1)return this;this.om.pop();const i=this.om[this.om.length-1];return i?(this.am=!0,this.forEachAxis((s=>{if((null==t?void 0:t.whitelist)&&!t.whitelist.includes(s))return;const e=i.get(s);e?s.ct(e.start,e.end,null==t?void 0:t.animate,void 0!==(null==t?void 0:t.stopAxisAfter)?t.stopAxisAfter:e.stopped,"userSetInterval"):s.fit(null==t?void 0:t.animate,null==t?void 0:t.stopAxisAfter)})),this.am=!1,this):this}clearPreviousZoomStateHistory(){if(void 0!==this.Bm)this.om.length=0;else for(;this.om.length>1;)this.om.unshift();return this}Lm(t){const i=()=>{this.am||(this.Bm&&ni.clearTimeout(this.Bm),this.Bm=ni.setTimeout((()=>{this.lm(),this.Bm=void 0}),300))};ni.requestAnimationFrame((()=>{i()})),t.addEventListener("intervalchange",i),t.addEventListener("dispose",(()=>{this.om.forEach((i=>{i.delete(t)}))}))}setUserInteractions(t){return this.Tm.setUserInteractions(t),this}getUserInteractions(){return this.Tm.getUserInteractions()}setProjection(t){this._v.Dm(t);const i=this.gm.projectionChanged(this.vm(),t);return i&&this.ym(i),this.St.Ls(),this}getProjection(){return this._v.Em()}setCursor(t){return this.Ug.setCursor(t),this}getCursor(){return this.Ug.getCursor()}setCursorMode(t){return this.Ug.setCursorMode(t),this}getCursorMode(){return this.Ug.getCursorMode()}setCustomCursor(t){return this.Ug.setCustomCursor(t),this}setCursorFormatting(t){return this.Ug.setCursorFormatting(t),this}getCursorFormatting(){return this.Ug.getCursorFormatting()}addCursor(t=fc){const i=this.dA(),s=t.ag(i,this.xf,this.xf,this.nA(i),this._t,this);return this.SA(s),s}addPointSeries(t){const i=new(t&&t.type||jl)(this,this.ky,this._v,this._t,this.St.vs,t);return this.Ly(i),i}addLineSeries(t){const i=new Hl(this,this.ky,this._v,this._t,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,this.St.vs);return this.Ly(i),i}addPointLineSeries(t){const i=new Xl(this,this.ky,this._v,this._t,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,this.St.vs);return this.Ly(i),i}addSurfaceGridSeries(t){const i=new sc(this,this.ky,this._v,t,this._t,this.St.vs);return this.Ly(i),i}addSurfaceScrollingGridSeries(t){const i=new ec(this,this.ky,this._v,t,this._t,this.St.vs);return this.Ly(i),i}addBoxSeries(t){const i=new Ul(this,this.ky,this._v,this._t,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,this.St.vs);return this.Ly(i),i}addMeshModel(t){const i=new cc(this,this.ky,this._v,this._t,t,this.St.vs);return this.Ly(i),i}translateCoordinate(t,i,s){if(hc(i)||hc(s)||rc(t)){if(hc(i)&&hc(s)&&rc(t)){if("axes"===i.id&&"world"===s.id)return this._v.Rm(t);if("world"===i.id&&"axes"===s.id)return this._v.zm(t);if(i.id===s.id)return t}if(hc(i)&&we(s)&&rc(t)){const i=this._v.zv(t);return i?this.St.ma({engineX:i.x,engineY:i.y}):{clientX:-1,clientY:-1}}if(hc(i)&&Ce(s)&&rc(t)){const i=this._v.zv(t);return i?ot(i,this.St.ot,this.xf):{clientX:-1,clientY:-1}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}return Va(t,i,s,this.xf,this.St)}getDefaultAxisX(){return this.xm.x}getDefaultAxisY(){return this.xm.y}getDefaultAxisZ(){return this.xm.z}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}get axisZ(){return this.getDefaultAxisZ()}get zAxis(){return this.getDefaultAxisZ()}getDefaultAxes(){return[this.xm.x,this.xm.y,this.xm.z]}setCameraLocation(t){let i={location:t,direction:Ss.normalize(Ss.multiply(t,-1))};const s=this.gm.cameraLocationChanged(this.vm(i));return s&&(i=s),this.ym(i),this.St.Ls(),this}getCameraLocation(){return this._v.getCameraLocation()}getCameraDirection(){return this._v.getCameraDirection()}setCameraAutomaticFittingEnabled(t){this.gm.Ky(t);const i=this.gm.cameraLocationChanged(this.vm());return i&&this.ym(i),this}getCameraAutomaticFittingEnabled(){return this.gm.ap()}setBoundingBoxStrokeStyle(t){return this.Mm.Ne(t).Iv(Pl(this.Mm.In())),this._v.Ls(),this}getBoundingBoxStrokeStyle(){return this.Mm.In()}setBoundingBox(t){return this.wm(t,!1),this}wm(t,i){this.km=t;const s=this.Cm(t);if(this.pm.x.Z(s.x),this.pm.y.Z(s.y),this.pm.z.Z(-s.z),!i){const t=this.gm.boundingBoxChanged(this.vm());t&&this.ym(t)}this.St.Ls()}getBoundingBox(){return this.km}Le(t){if(Ya.LA(this.Sh,this._A),0!==this.nm){const i=this.nm*t*.006;this.tm.push({type:"wheel-zoom",deltaY:i}),this.nm=Math.sign(this.nm)*Math.max(Math.abs(this.nm)-.01*t,0),0!==this.nm&&this.St.Ls(!0)}const i=this.getCameraDirection();if(this.tm.length>0){const t=this.gm.applyCameraInteractions(this.vm(),this.tm);t&&this.ym(t),this.tm.length=0}this.Vm&&Ss.equals(this.Vm.location,this._m.location)&&Ss.equals(this.Vm.direction,this._m.direction)||this.D.R("camerachange",{cameraLocation:this.getCameraLocation()}),this.Vm=this._m,super.Le(t);for(let t=0;t<this._y.length;t+=1)this._y[t].hy();for(let t=0;t<this._y.length;t+=1)this._y[t].Le();this.xm.x.Er(),this.xm.y.Er(),this.xm.z.Er();const s=this.xm.x.hr(this.xm.x.Nv(i)),e=this.xm.y.hr(this.xm.y.Nv(i)),h=this.xm.z.hr(this.xm.z.Nv(i));this.xm.x.Le(s),this.xm.y.Le(e),this.xm.z.Le(h),this.Ug.Le(!1,this._y,void 0),super.xA();const r=this.pm,n=a(r.x.getInnerStart(),r.y.getInnerStart(),r.z.getInnerStart()),o=a(r.x.getInnerEnd(),r.y.getInnerEnd(),r.z.getInnerEnd());this.Mm.ti().Dl([a(o.x,n.y,n.z),a(o.x,o.y,n.z),a(o.x,o.y,o.z),a(o.x,n.y,o.z),a(n.x,n.y,o.z),a(n.x,o.y,o.z),a(o.x,o.y,o.z),a(o.x,o.y,n.z),a(n.x,o.y,n.z),a(n.x,o.y,o.z),a(n.x,n.y,o.z),a(n.x,n.y,n.z)]);const l=[a(n.x,n.y,n.z),a(o.x,n.y,n.z),a(n.x,o.y,n.z),a(o.x,o.y,n.z),a(n.x,n.y,o.z),a(o.x,n.y,o.z),a(n.x,o.y,o.z),a(o.x,o.y,o.z)].map((t=>this._v.zv(t))),c=this._v.zv(a((n.x+o.x)/2,(n.y+o.y)/2,(n.z+o.z)/2)),u=$i(l,c),d=[];for(let t=0;t<u.length;t+=1){const i=u[t];Gs(i,c,u[t>0?t-1:u.length-1],u[t<u.length-1?t+1:0])||d.push(i)}const f=$i(d,c);this.Iy.Hl(f),this.Py.Hl(f);for(let t=0;t<this._y.length;t+=1)this._y[t].vv()}dispose(){return this.To.forEach((t=>{t()})),this.To.length=0,this.pm.G(),this._v.G(),this.Am.G(),this.fm.G(),this.Ug.G(),super.dispose()}H(){return this.pm.x.H(),this.pm.y.H(),this.pm.z.H(),super.H()}X(){return super.X()}ym(t){this._v.setCameraLocation(t.location).setCameraDirection(t.direction).setLightLocation(Ss.addVec(t.location,Ss.multiply(t.direction,-this.im))),this._m=t,this.St.Ls()}Cm(t){return Ss.divide(t,Ss.length(t)/this.qp)}vm(t=this._m){return{boundingBox:this.Cm(this.km),cameraLocation:t.location,cameraDirection:t.direction,projection:this.getProjection()}}forEachAxis(t){return t(this.xm.x),t(this.xm.y),t(this.xm.z),this}getSeries(){return this._y}getMinimumSize(){}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationZoom(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}setAnimationZoom(t){return this.sm=!!t,this}getAnimationZoom(){return this.sm}Im(t){this.tm.push({type:"rotate",rotation:t}),this.St.Ls()}Pm(t){this.sm?Math.sign(this.nm)!==Math.sign(t)?this.nm=t:this.nm+=t:this.tm.push({type:"wheel-zoom",deltaY:t}),this.St.Ls()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const pc=(t,i,s)=>{var e,h;return At(i)?Xa(i,[[{component:i.series,componentColor:Wa(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[t.getDefaultAxisX().getTitle()||"X","",{text:Pe(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:Pe(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],[t.getDefaultAxisZ().getTitle()||"Z","",{text:Pe(i.axisZ.formatValue(i.z),i.axisZ),font:{weight:"bold"}}],void 0!==i.intensity?["Value","",{text:Pe(i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]:[]]):yt(i)?Xa(i,[[{component:i.series,componentColor:Wa(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],void 0!==i.value?["Value","",{text:Pe(i.value.toFixed(2),null===(h=i.lut)||void 0===h?void 0:h.units),font:{weight:"bold"}}]:[]]):Xa(i,[[{component:i.series,componentColor:Wa(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[t.getDefaultAxisX().getTitle()||"X","",{text:Pe(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:Pe(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],[t.getDefaultAxisZ().getTitle()||"Z","",{text:Pe(i.axisZ.formatValue(i.z),i.axisZ),font:{weight:"bold"}}]])},mc={Column:Ao,Row:go};class Sc extends Ga{constructor(t,i,s,e,h,r){super(t,i,s,e,h,r),this.Om=new Map,this.Nm=this.addUIElement(mc.Row).setPosition({x:0,y:100}).setOrigin(ir.LeftTop).setBackground((t=>t.setFillStyle(V).setStrokeStyle(Wt)))}add(t,i){return(t instanceof Ua?[t]:t instanceof ng?t.getCells().filter((t=>t.panel instanceof Ua)).map((t=>t.panel)):[]).forEach((t=>{const s=this.Nm.addElement(Yo.VerticalLegendBox).setBackground((t=>t.setFillStyle(V).setStrokeStyle(Wt))).add(t,i).setTitle(t.getTitle());this.Om.set(t,s)})),this.St.Ls(),this}setLegendBoxes(t){return this.Om.forEach(((i,s)=>t(i,s))),this}getMinimumSize(){return super.getMinimumSize()||this.Nm.getSize()}}const bc={World:"World",USA:"USA",NorthAmerica:"NorthAmerica",SouthAmerica:"SouthAmerica",Canada:"Canada",Europe:"Europe",Asia:"Asia",Africa:"Africa",Australia:"Australia"},xc=(t,i)=>!(!i.name||t.name.toLowerCase()!==i.name.toLowerCase())||"ISO_A3"in t&&"ISO_A3"in i&&t.ISO_A3.toLowerCase()===i.ISO_A3.toLowerCase(),Mc=(t,i)=>{let s=i.geometry;return s=wc(t,i,s),s=_c(t,i,s),s},wc=(t,i,s)=>{if(t===bc.Asia){const t=[];for(let i=0;i<s.length;i+=1){t[i]=[];const e=s[i],h=t[i];for(let t=0;t<e.length;t+=1){const i=e[t];i.x<-100?h[t]={x:i.x+360,y:i.y}:h[t]=i}}return t}return s},_c=(t,i,s)=>{const e=i.name.toLowerCase();let h;if(t===bc.USA&&("alaska"===e?h={translate:{x:55,y:-25},scale:{x:.16,y:.16}}:"hawaii"===e&&(h={translate:{x:48,y:7},scale:{x:1,y:1}})),h){const{translate:t,scale:r}=h,n=zs(Ai(s)),o=[];for(let i=0;i<s.length;i+=1){o[i]=[];const h=s[i],a=o[i];for(let i=0;i<h.length;i+=1){const s=h[i];let o=s.x;"alaska"===e&&1===Math.sign(o)&&(o=-180-(180-o)),a[i]={x:t.x+(o-n.min.x)*r.x+n.min.x,y:t.y+(s.y-n.min.y)*r.y+n.min.y}}}return i.outlier=!0,i.transform={...h,vertexBoundaries:n},o}return s},Cc={World:{min:{x:-180,y:-90},max:{x:180.0000000000002,y:83.63410065300012}},Europe:{min:{x:-25,y:34},max:{x:40,y:70}},Africa:{min:{x:-17,y:-40},max:{x:52,y:37.37549753800012}},Asia:{min:{x:27,y:-10.922621351999808},max:{x:180.0000000000002,y:81.85871002800009}},NorthAmerica:{min:{x:-179.1435033839999,y:5.515082098000121},max:{x:-50,y:83.11652252800009}},SouthAmerica:{min:{x:-85,y:-55.9185042229998},max:{x:-35,y:15}},USA:{min:{x:-125,y:24},max:{x:-68,y:50}},Canada:{min:{x:-141.0181,y:41.7297},max:{x:-52.6194,y:75}},Australia:{min:{x:111,y:-43.6586},max:{x:155,y:-9.2199}}},kc={World:.6,Europe:1/1.4,Africa:1.3,Asia:.8,NorthAmerica:.9,SouthAmerica:1.5,USA:3/4,Canada:6/8,Australia:11/12};class Tc extends Ua{constructor(t,i,s,e,h,r,n){super(t,i,s,i.wA("mapChart bg",0),e,i.St._t.mapChartBackgroundFillStyle,i.St._t.mapChartBackgroundStrokeStyle,i.St._t.mapChartTitleFont,i.St._t.mapChartTitleFillStyle,i.St._t.mapChartTitleShadow,n),this.Gm=[],this.ot=this.lA.d2({scaleXYConstructor:be}),this.$m=!0,this.Um=this._t.mapChartSeparateRegionFillStyle,this.Ym=this._t.mapChartSeparateRegionStrokeStyle,this.ah=!0,this.Hm=0,this.Xm=!0,this.Wm=new Map,this.regions=new zt,this.jm=t=>{this.ot.x.Z(t.engineWidth).yi([this.oi.left+this.nn.left,this.oi.right+this.nn.right]),this.ot.y.Z(t.engineHeight).yi([this.oi.bottom+this.nn.bottom,this.oi.top+this.nn.top+Ya.PA(this.Sh,this._A)]),this.Zm&&this.Qm(this.Jm,this.ot,this.Zm)},this.D=new zt,this.St.Zo(Gr.Wn),this.ah=!1!==(null==r?void 0:r.animationsEnabled),this.Km=i.Ng("mapChart plotting",0),this.addEventListener("resize",this.jm),this.Sh.Sr("Map Chart");const o=i.$g(),a=gi(r?r.cursorBuilder:void 0,Al);this.Ug=Qa(this,o,a.ag(o,this.uiScale,this.uiScale,ui,this._t),void 0,"show-pointed",Ic,(()=>0)),this.qm=this.vs.kf(),this.MA(h,this.uiScale),this.tS=this.Km.Bv(this.ot).setPointerEvents(this.$m).Ie(this._t.mapChartFillStyle).Fe(this._t.mapChartStrokeStyle),this.regions.Gt(this.tS,(t=>{if(!this.iS)return;const i=this.sS(this.iS,t);return i?i.region:void 0})),this.tS.addEventListener("pointermove",((t,i)=>{const s=i.collectionMember;if(!this.iS||!s)return;const e=this.sS(this.iS,s);this.eS(e),this.Xm&&e&&this.St.xs.Rs(e.region,!0)})),this.tS.addEventListener("pointerleave",((t,i)=>{const s=i.collectionMember;if(!this.iS||!s)return;const e=this.sS(this.iS,s);this.hS(),this.Xm&&e&&this.St.xs.Rs(e.region,!1)})),this.rS=this.Km.Bv(this.ot).setPointerEvents(this.$m).Ie(this._t.mapChartOutlierRegionFillStyle).Fe(this._t.mapChartOutlierRegionStrokeStyle);const l=gi(r&&r.type,bc.World);this.Jm=l,this.nS(l).then((()=>{this.D.R("ready",{})}))}setFillStyle(t){return this.tS.Ie(t),this.St.Ls(),this}getFillStyle(){return this.tS.$h()}setStrokeStyle(t){return this.tS.Fe(t),this.St.Ls(),this}getStrokeStyle(){return this.tS.da()}setEffect(t){return this.qm.Ps(t),this.St.Ls(),this}getEffect(){return this.qm.Bs()}setOutlierRegionFillStyle(t){return this.rS.Ie(t),this.St.Ls(),this}getOutlierRegionFillStyle(){return this.rS.$h()}setOutlierRegionStrokeStyle(t){return this.rS.Fe(t),this.St.Ls(),this}getOutlierRegionStrokeStyle(){return this.rS.da()}setSeparateRegionFillStyle(t){return this.Um="function"==typeof t?t(this.Um):t,this.Gm.forEach((t=>t.Ie(this.Um))),this.St.Ls(),this}getSeparateRegionFillStyle(){return this.Um}setSeparateRegionStrokeStyle(t){return this.Ym="function"==typeof t?t(this.Ym):t,this.Gm.forEach((t=>t.Fe(this.Ym))),this.St.Ls(),this}getSeparateRegionStrokeStyle(){return this.Ym}invalidateRegionValues(t){if(!this.iS||!this.oS)return this.aS=this.aS||[],this.aS.push(t),this;if("function"==typeof t)for(let i=0;i<this.iS.regions.length;i+=1){const s=this.iS.regions[i],e=this.oS[i],h=t({...s,geometry:void 0},e);if(void 0!==h&&h!==e){this.oS[i]=h;const t=this.Wm.get(s);null==t||t.forEach((t=>{t.lS(h)}))}}else for(const i of t)if(i)for(let t=0;t<this.iS.regions.length;t+=1){const s=this.iS.regions[t],e=this.oS[t];if(void 0!==i.value&&i.value!==e&&xc(s,i)){this.oS[t]=i.value;const e=this.Wm.get(s);null==e||e.forEach((t=>{t.lS(i.value)}))}}return this.St.Ls(),this}setPointerEvents(t){return this.$m=t,this.tS.setPointerEvents(t),this}getPointerEvents(){return this.$m}setHighlight(t){var i;return t=es(t),this.Hm=t,null===(i=this.iS)||void 0===i||i.regions.forEach((i=>{this.St.xs.Rs(i,t)})),this.D.R("highlightchange",{highlight:t}),this}getHighlight(){return this.Hm}setAnimationHighlight(t){var i;return null===(i=this.iS)||void 0===i||i.regions.forEach((i=>{this.St.xs.zs(i,t)})),this}getAnimationHighlight(){var t;return this.St.xs.Vs(null===(t=this.iS)||void 0===t?void 0:t.regions[0])}setHighlightOnHover(t){return this.Xm=t,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Xm}async nS(t){const i=await((t,i)=>{let s;if(t===bc.World)s="countries_world.json";else if(t===bc.NorthAmerica)s="countries_northAmerica.json";else if(t===bc.SouthAmerica)s="countries_southAmerica.json";else if(t===bc.Africa)s="countries_africa.json";else if(t===bc.Europe)s="countries_europe.json";else if(t===bc.Asia)s="countries_asia.json";else if(t===bc.USA)s="states_usa.json";else if(t===bc.Canada)s="territoriesProvinces_canada.json";else{if(t!==bc.Australia){const i=`LCJS MapChart unidentified \`type\`: ${t}`;throw ni.alert(i),new Error(i)}s="territories_australia.json"}return new Promise(((t,e)=>{(t=>{if(t.resourcesBaseUrl){const i=`${t.resourcesBaseUrl}${t.fileName}`;return void ni.fetch(i).then((i=>{t.success(i)})).catch((()=>{t.error({url:i})}))}const i=`${ni.location.origin}/resources${t.fileName}`;ni.fetch(i).then((i=>{if(!i.ok)throw new Error;t.success(i)})).catch((()=>{const s=`https://lcjs-resources.lightningchart.com/v1${t.fileName}`;ni.fetch(s).then((i=>{ni.console.warn("LightningChart JS warning | fallbacking publicly hosted asset resources.\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/warning-using-publicly-hosted-resources/"),t.success(i)})).catch((()=>{t.error({url:i})}))}))})({fileName:`/maps/${s}`,resourcesBaseUrl:i,success:i=>i.json().then(t),error:({url:t})=>as(i,t,"Map Chart",{shouldCrash:!0})})}))})(t,this.aA.Qs);this.oS=new Array(i.regions.length).map((t=>{})).fill(void 0);const s=Cc[t];if(!s)throw new Error("Unidentified map type.");for(const t of i.outliers)for(const i of t.geometry)this.rS.lo().Hl(i);if(t===bc.USA){const t=25.8,i=29.7;this.Gm.push(this.rA.Pe(this.ot).setPointerEvents(!1).Ie(this.Um).Fe(this.Ym).Be({x:-126,y:t}).Z({x:10,y:i-t}),this.rA.Pe(this.ot).setPointerEvents(!1).Ie(this.Um).Fe(this.Ym).Be({x:-113,y:t}).Z({x:7,y:i-t}))}const e=this.St.xs.ao(this.tS,{animationEnabled:this.ah});for(let s=0;s<i.regions.length;s+=1){const h=i.regions[s],r=Mc(t,h),n=[];for(const t of r)t.length<3||n.push(this.tS.lo().Hl(t));this.Wm.set(h,n),e.lo(h,(t=>{n.forEach((i=>i.Bt(t)))}))}if(this.qm._s([this.tS]),this.Zm=s,this.Qm(t,this.ot,s),this.iS=i,this.aS){for(const t of this.aS)this.invalidateRegionValues(t);this.aS=void 0}this.St.Ls()}Qm(t,i,s){const e=kc[t],h=i.x.getCellSize(),r=i.y.getCellSize()/h,n={min:{x:s.min.x,y:s.min.y},max:{x:s.max.x,y:s.max.y}};if(r<e){const t=(n.max.x-n.min.x)*(e/r-1);n.min.x-=t/2,n.max.x+=t/2}else if(r>e){const t=(n.max.y-n.min.y)*(r/e-1);n.min.y-=t/2,n.max.y+=t/2}i.x.W(n.min.x,n.max.x),i.y.W(n.min.y,n.max.y);const o=this.ot.x.wi(),a=this.ot.y.wi();this.D.R("viewchange",{latitudeRange:{start:n.min.y,end:n.max.y},longitudeRange:{start:n.min.x,end:n.max.x},margin:{top:a[1],bottom:a[0],left:o[0],right:o[1]}})}eS(t){this.cS=t,this.St.Ls()}hS(){this.cS=void 0,this.St.Ls()}sS(t,i){const s=Array.from(this.Wm.entries()).findIndex((([t,s])=>s.includes(i))),e=null==t?void 0:t.regions[s],h=this.St.jo();if(!h)return;const r=this.St.pa(h),n=this.oS&&this.oS[s];let o=ot({x:r.engineX,y:r.engineY},this.St.ot,this.ot);o={x:fi(o.x,this.ot.x.getInnerStart(),this.ot.x.getInnerEnd()),y:fi(o.y,this.ot.y.getInnerStart(),this.ot.y.getInnerEnd())};let a=o.x,l=o.y;const c=e.transform;e.outlier&&c&&(a=(a-c.translate.x-c.vertexBoundaries.min.x)/c.scale.x+c.vertexBoundaries.min.x,l=(l-c.translate.y-c.vertexBoundaries.min.y)/c.scale.y+c.vertexBoundaries.min.y);const u=this.getFillStyle();return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.St.ot,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.St.ot},region:e,value:n,longitude:l,latitude:a,lut:j(u)?u.lut:void 0}}setCursor(t){return this.Ug.setCursor(t),this}getCursor(){return this.Ug.getCursor()}setCursorMode(t){return this.Ug.setCursorMode(t),this}getCursorMode(){return this.Ug.getCursorMode()}setCustomCursor(t){return this.Ug.setCustomCursor(t),this}setCursorFormatting(t){return this.Ug.setCursorFormatting(t),this}getCursorFormatting(){return this.Ug.getCursorFormatting()}addCursor(t=Al){const i=this.dA(),s=t.ag(i,this.uiScale,this.uiScale,this.nA(i),this._t);return this.SA(s),s}setAnimationsEnabled(t){return this.ah=!t,this}getAnimationsEnabled(){return this.ah}getMinimumSize(){}Gd(){return[this]}Le(t){super.Le(t),super.xA(),Ya.LA(this.Sh,this._A);const i=u(this.ot.x.pi(),this.ot.y.pi(),this.ot.x.Si(),this.ot.y.Si());return this.Km.dm(i),this.Ug.Le(!1,[],void 0,{explicitTarget:this.cS}),this}dispose(){return this.Km.G(),this.Ug.G(),Na(this.ot),super.dispose()}H(){return super.H(),this.ot.H(),this}X(){return super.X(),this.ot.X(),this}Gs(){return ji(this.getFillStyle(),this.tS.Tt())}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),this.styleLegendEntry(t,s),this}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.getFillStyle()})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Fc=(t,i)=>{const s=t>0,e=i>0;return`${[Qi(Math.abs(0|t),2),"° ",Qi(Math.abs(0|(t<0?t=-t:t)%1*60),2),"' "].join("")+(s?"E":"W")}, ${[Qi(Math.abs(0|i),2),"° ",Qi(Math.abs(0|(i<0?i=-i:i)%1*60),2),"' "].join("")+(e?"N":"S")}`},Ic=(t,i,s)=>{var e;const h=[[{text:i.region.name,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[Fc(i.longitude,i.latitude)]];return void 0!==i.value&&h.push({text:Pe(i.value.toFixed(1),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}),h};class Pc extends Tr{constructor(t,i,s,e,h,r,n,o,a){super(t,i,i.uS(s),e,h,{numeric:i.dS({amplitude:e.polarAmplitudeAxisNumericTicks,radial:e.polarAmplitudeAxisNumericTicks}),datetime:i.dS({amplitude:e.polarAmplitudeAxisDateTimeTicks,radial:e.polarAmplitudeAxisDateTimeTicks}),time:i.dS({amplitude:e.polarAmplitudeAxisTimeTicks,radial:e.polarAmplitudeAxisTimeTicks})},{type:"linear"}),this.D=new zt,this.fS=r,this.AS=n,this.gS=o,this.vs=a,this.vS=s,this.yS=i.dS({amplitude:e.polarAmplitudeAxisStrokeStyle,radial:e.polarRadialAxisStrokeStyle}),this.Mh=o.Yr(s).setPointerEvents(!1).Xh(i.dS({amplitude:e.polarAmplitudeAxisTitleFont,radial:e.polarRadialAxisTitleFont})).Ie(i.dS({amplitude:e.polarAmplitudeAxisTitleFillStyle,radial:e.polarRadialAxisTitleFillStyle})),this.Zh=this.vs.kf([this.Mh]).Ps(e.effectsText)}setTickStrategy(t,i){return super.Rh(t,i)}setStrokeStyle(t){return this.yS="function"==typeof t?t(this.yS):t,this.AS.Ls(),this}getStrokeStyle(){return this.yS}lr(t){return{}}Ar(t,i,s,e){const h=this.pS(this.vS,t,i.th);return{keyValue:t,tickLevel:i,labelText:s,labelPosition:js(this.mS(this.vS,t),h.padding),labelAlignment:h.alignment,labelRotation:h.rotation,labelOffset:h.offset}}br(t,i,s,e){return new Lc(i,t,this.vS,this.gS,this.SS(this.fS,this.vS),this.gS.Ge(this.vS).setPointerEvents(!1))}_h(){return this.vS}Le(t){this.bS(this.vS,this.yS,t.zf),this.xS(this.vS,this.Mh,t.zf),t.ticksInfo.forEach(((t,i)=>{i.sr.Be(t.labelPosition).ul(t.labelAlignment).Wh(t.labelRotation).hl(t.labelOffset.x,t.labelOffset.y),this.MS&&!1===this.MS(i)&&i.sr.setVisible(!1),this.wS(this.vS,i._S,i.CS,i)}))}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}}class Lc extends Fr{constructor(t,i,s,e,h,r,n){super(t,i,e,s,n),this._S=h,this.CS=r,h.setPointerEvents(!1),this.As.push(h,r)}}class Bc extends Pc{constructor(t,i,s,e,h,r,n,o,a){super(t,Dc((()=>this.Df())),i,s,e,h,r,n,o),this.Fv=this.AS.Ge(this.vS).setPointerEvents(!1),this.kS=a,this.setScrollStrategy(fr.expansion),this.setTickStrategy(Ar.Numeric),this.setTitle("Amplitude"),this.Mh.mr(s.polarAmplitudeAxisTitleShadow)}Df(){return this.kS()}yr(t,i){return{ticksInfo:i,zf:this.Tr(((t,i)=>{const s=i.Hr.th,e=.5*this.yS.getThickness()+s.tickLength+s.tickPadding+Math.abs(i.sr.hr().zu().y);return Math.max(t,e)}),0)}}Rr(t,i){return Be(t,i,this.vS.y)}Or(t,i,s){const e=2*(i-t),h=this.vS.x.Zi(e);return{min:t-s*h,max:i+s*h}}mS(t,i){return{x:t.TS()?i-t.FS().start:t.FS().start-i,y:0}}SS(t,i){return t.Yu(i)}wS(t,i,s,e){const h=e.Hr.th,r=t.TS()?e.S-t.FS().start:t.FS().start-e.S;di(e.S,t.FS().start)||di(e.S,t.FS().end)?i.setVisible(!1):i.setVisible(!0).Bc(0).$e(360).Vc(void 0).zc(0).Dc(r).Vc(60).Ie(V).Fe(h.gridStrokeStyle);const n=.5*this.yS.getThickness();s.Ue({x:r,y:-n*t.hs().y}).$e({x:r,y:-(n+h.tickLength)*t.hs().y}).Ne(h.tickStyle)}pS(t,i,s){return{alignment:{x:0,y:1},padding:{x:0,y:t.hs().y*-(.5*this.yS.getThickness()+s.tickLength+s.tickPadding)},rotation:0,offset:{x:0,y:0}}}bS(t,i,s){const e=t.TS()?t.FS().end-t.FS().start:t.FS().start-t.FS().end;this.Fv.Ue({x:0,y:0}).$e({x:e,y:0}).Ne(i)}xS(t,i,s){const e=t.TS()?(t.FS().start+t.FS().end)/2-t.FS().start:t.FS().start-(t.FS().start+t.FS().end)/2;i.ul({x:0,y:1}).Be({x:e,y:-s*t.hs().y})}}const Dc=t=>({...Ol(t,(t=>t.getAmplitudeMin()),(t=>t.getAmplitudeMax()),(t=>{})),uS:t=>({getInnerStart:()=>t.FS().start,getInnerEnd:()=>t.FS().end,W:(i,s)=>t.IS(i,s),et:(i,s,e,h,r)=>t.y.et(i,s,e,h,r)}),dS:t=>t.amplitude});class Ec extends Pc{constructor(t,i,s,e,h,r,n,o){var a;super(t,zc,i,s,e,h,r,n,o),this.PS=90,this.LS=12,this.BS=Rc,this.Fv=this.AS.Yu(this.vS).setPointerEvents(!1),this.MS=t=>{if(0===this.getTitle().length||O(this.getTitleFillStyle()))return;let i=180*(t.S-this.vS.DS())/Math.PI%360;for(;i<0;)i+=360;for(;i>360;)i-=360;return!(i>=0&&i<=20||i>=340&&i<=360)&&void 0},this.hh=void 0,this.setTickStyle(s.polarRadialAxisTickStyle),this.setTitle("Degrees"),this.setNorth(this.PS),this.ES=null!==(a=this._t.polarRadialAxisMarginAfterTicks)&&void 0!==a?a:7}setTickStyle(t){return this.RS="function"==typeof t?t(this.RS):t,this.zS(),this.AS.Ls(),this}getTickStyle(){return this.RS}setTickFormattingFunction(t){return this.BS=t,this.zS(),this.AS.Ls(),this}getTickFormattingFunction(){return this.BS}setClockwise(t){this.vS.VS(t);const i=this.PS*Math.PI/180;return t?this.vS.OS(i+Math.PI/2):this.vS.OS(i-Math.PI/2),this.AS.Ls(),this}getClockwise(){return!this.vS.NS()}setNorth(t){for(;t<0;)t+=360;t%=360,this.PS=t;const i=t*Math.PI/180;return this.getClockwise()?this.vS.OS(i+Math.PI/2):this.vS.OS(i-Math.PI/2),this.AS.Ls(),this}getNorth(){return 180*this.vS.DS()/Math.PI}setDivision(t){return this.LS=t,this.zS(),this.AS.Ls(),this}getDivision(){return this.LS}getMarginAfterTicks(){return this.ES}setMarginAfterTicks(t){return this.ES=t,this.chart.St.Ls(),this}Df(){return[]}yr(t,i){return{ticksInfo:i,zf:this.Tr(((t,i)=>{const s=i.Hr.th,e=.5*this.yS.getThickness()+s.tickLength+s.tickPadding+Math.abs(i.sr.hr().zu().y);return Math.max(t,e)}),0)+this.ES}}Rr(t,i){return i}Or(t,i,s){return{min:t,max:i}}mS(t,i){const s=t.NS()?1:-1,e=t.DS(),h=t.TS()?t.FS().end-t.FS().start:t.FS().start-t.FS().end;return{x:Math.cos((i-e)*s)*h,y:Math.sin((i-e)*s)*h}}SS(t,i){return t.Ge(i)}wS(t,i,s,e){const h=this.RS,r=t.NS()?1:-1,n=t.DS(),o=(e.S-n)*r,a=Math.cos(o),l=Math.sin(o),c=t.TS()?t.FS().end-t.FS().start:t.FS().start-t.FS().end,u={x:a*c,y:l*c};i.Ue({x:0,y:0}).$e(u);const d={x:u.x+a*h.tickLength*t.hs().x,y:u.y+l*h.tickLength*t.hs().y};s.Ue(u).$e(d),i.Ne(h.gridStrokeStyle),s.Ne(h.tickStyle)}pS(t,i,s){const e=t.NS()?1:-1;let h,r=(i-t.DS())*e;for(;r<0;)r+=2*Math.PI;for(;r>=2*Math.PI;)r-=2*Math.PI;h=r>0&&r<=Math.PI?-r+Math.PI/2:-r-Math.PI/2;const n=Math.cos(r),o=Math.sin(r),a=s.tickLength+s.tickPadding;return{alignment:{x:0,y:0},padding:{x:n*a*t.hs().x,y:o*a*t.hs().y},rotation:180*h/Math.PI,offset:{x:0,y:0}}}bS(t,i,s){const e=t.TS()?t.FS().end-t.FS().start:t.FS().start-t.FS().end;this.Fv.Bc(0).$e(360).zc(0).Dc(e+.5*i.getThickness()*t.hs().x).Vc(360).Ie(V).Fe(i)}xS(t,i,s){const e=t.DS(),h=this.pS(t,0+e,this.RS),r=t.TS()?t.FS().end-t.FS().start:t.FS().start-t.FS().end;i.ul(h.alignment).Wh(h.rotation).hl(h.offset.x,h.offset.y).Be(js({x:r,y:0},h.padding))}zS(){this.Kh({je:[],Ze:[{sr:"Radial ticks",$f:0,th:this.RS,He:this.BS,jr:(t,i,s,e)=>{const h=[],r=2*Math.PI/this.LS;for(let t=0;t<2*Math.PI;t+=r)h.push(t);return h},Th:{_r:()=>{},Fh:()=>!1,kr:"hide-label"},Zr:void 0}],Qe:Rc,Je:void 0,Ke:void 0},"Numeric")}}const Rc=(t,i,s)=>(180*t/Math.PI).toFixed(0),zc={Pr:()=>{},Lr:()=>{},Dr:()=>{},uS:t=>({getInnerStart:()=>0,getInnerEnd:()=>2*Math.PI,W:(t,i)=>{},et:(i,s,e,h,r)=>t.x.et(i,s,e,h,r)}),dS:t=>t.radial},Vc=t=>!!(t&&"object"==typeof t&&"axisAmplitude"in t&&"axisRadial"in t),Oc=t=>!!(t&&"object"==typeof t&&"angle"in t&&"number"==typeof t.angle&&"amplitude"in t&&"number"==typeof t.amplitude),Nc=(t,i)=>{const s=[],e=i.FS().start,h=i.FS().end,r=i.TS(),n=i.NS()?1:-1,o=i.DS(),a=Math.abs(h-e),l=Math.min(e,h)+.001*a,c=Math.max(e,h)-.001*a;for(const i of t){const t=fi(i.amplitude,l,c),h=i.angle*Math.PI/180-o,a=Math.cos(h*n)*(r?t-e:e-t),u=Math.sin(h*n)*(r?t-e:e-t),d=i.color;s.push({x:a,y:u,color:d})}return s},Gc=t=>{const i={min:bs,max:xs};for(const s of t)i.min=Math.min(i.min,s.amplitude),i.max=Math.max(i.max,s.amplitude);return i},$c=t=>t.slice().map((t=>t.angle>=0&&t.angle<=360?t:{...t,angle:t.angle%360})),Uc=(t,i)=>{let s=ee(t);for(i.NS()||(s*=-1),s+=180*i.DS()/Math.PI;s<0;)s+=360;s%=360;const e=Xs(t),h=i.FS(),r=Math.abs(h.end-h.start);return{angle:s,amplitude:Ue(h.start,h.end,e/r)}};class Yc extends Re{constructor(t,i,s,e,h,r){super(i,s,h,r),this.Es="Sector",this.GS=0,this.$S=1*Math.PI/2,this.US=void 0,this.YS=void 0,this.D=new zt,this.Ys=t,this.vS=e,this.HS=this.Ys.Qc(this.vS).Bt(this.getHighlight()),this.ws(this.HS),this.Ce=h.polarSectorFillStyle,this.ke=h.polarSectorStrokeStyle,this.setPointerEvents(!1)}setAngleStart(t){return this.GS=t,this.Ys.Ls(),this}getAngleStart(){return this.GS}setAngleEnd(t){return this.$S=t,this.Ys.Ls(),this}getAngleEnd(){return this.$S}setAmplitudeStart(t){return this.US=t,this.Ys.Ls(),this}getAmplitudeStart(){return this.US}setAmplitudeEnd(t){return this.YS=t,this.Ys.Ls(),this}getAmplitudeEnd(){return this.YS}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.Ys.Ls(),this}getFillStyle(){return this.Ce}setStrokeStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.Ys.Ls(),this}getStrokeStyle(){return this.ke}Le(){const t=this.vS.FS(),i=void 0!==this.US?fi(this.US,t.start,t.end):t.start,s=void 0!==this.YS?fi(this.YS,t.start,t.end):t.end,e=[],h=Math.min(this.GS,this.$S),r=Math.max(this.GS,this.$S);for(let t=h;t<=r;t+=1)e.push({angle:t,amplitude:i});for(let t=r;t>=h;t-=1)e.push({angle:t,amplitude:s});const n=Nc(e,this.vS);this.HS.Hl(n).Ie(this.Ce).Fe(this.ke)}De(t,i){t.Bt(i),this.Ys.Ls()}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce,stroke:this.ke})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Hc extends Re{constructor(){super(...arguments),this.qv=!0,this.Kv=!0}setAutoScrollingEnabled(t){return this.qv=t,this.chart.St.Ls(),this}getAutoScrollingEnabled(){return this.qv}hy(){}Le(){}vv(){}setCursorEnabled(t){return this.Kv=t,this}getCursorEnabled(){return this.Kv}BA(){return this.getVisible()&&this.getCursorEnabled()}setCursorFormattingOverride(t){return this.iy=t,this}getCursorFormattingOverride(){return this.iy}}class Xc extends Hc{constructor(t,i,s,e,h,r){super(i,s,h,r),this.Ys=t,this.chart=i,this.scale=e}getAmplitudeMin(){return this.XS?this.XS.min:void 0}getAmplitudeMax(){return this.XS?this.XS.max:void 0}}class Wc extends Xc{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r),this.Es="Heatmap Series",this.WS=!0,this.Ay=!1,this.D=new zt;const o=this.chart.getSeries().length;this.Ce=Ji(this._t.polarHeatmapSeriesFillStyle||this._t.heatmapGridSeriesFillStyle,o);const a=n.amplitudeStart||0,l=n.amplitudeEnd?(n.amplitudeEnd-a)/(n.annuli-1):n.amplitudeStep||1,c={sectors:n.sectors,annuli:n.annuli,amplitudeStart:a,amplitudeStep:l,heatmapDataType:"intensity",dataOrder:n.dataOrder||"annuli"};this.Ko=c,this.jS=t.ZS(e,[],c).Ie(this.Ce).Bt(this.getHighlight()),this.ws(this.jS);const u=Math.min(c.amplitudeStart,c.amplitudeStart+(c.annuli-1)*c.amplitudeStep),d=Math.max(c.amplitudeStart,c.amplitudeStart+(c.annuli-1)*c.amplitudeStep);this.XS={min:u,max:d},this.setHighlightOnHover(!1)}solveNearest(t,i="show-nearest"){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=ot(e,this.chart.St.ot,this.scale),r=Uc(h,this.scale),n=Ha(i)?this.jS.QS(r):this.jS.Ru(r);if(!n)return;const o=Nc([n],this.scale)[0];return{cursorPosition:{pointMarker:o,pointMarkerScale:this.scale,resultTable:o,resultTableScale:this.scale},series:this,angle:n.angle,amplitude:n.amplitude,intensity:n.cellValue,annulus:n.iAnnulus,sector:n.iSector,lut:j(this.Ce)?this.Ce.lut:void 0}}Kt(t,i){return As({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0,intensity:0,sector:0,annulus:0,lut:j(this.Ce)?this.Ce.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}invalidateIntensityValues(t){if(this.Ay&&this.chart.St.Zo(Gr.qn),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const i={x:t.length,y:t[0].length,sectors:"annuli"===this.Ko.dataOrder?t[0].length:t.length,annuli:"annuli"===this.Ko.dataOrder?t.length:t[0].length},s="annuli"===this.Ko.dataOrder?this.Ko.annuli:this.Ko.sectors,e="annuli"===this.Ko.dataOrder?this.Ko.sectors:this.Ko.annuli;if(i.x>s||i.y>e){if(!0===this.chart.aA.qo){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nHeatmap ${s}x${e}, input ${i.x}x${i.y}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;ni.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);if(0===(t=h).length||0===t[0].length)return this}this.jS.mp({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iSector"in t&&"iAnnulus"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const i={primary:t.values.length,secondary:t.values[0].length,sectors:"annuli"===this.Ko.dataOrder?t.values[0].length:t.values.length,annuli:"annuli"===this.Ko.dataOrder?t.values.length:t.values[0].length},s="annuli"===this.Ko.dataOrder?t.iAnnulus:t.iSector,e=s+i.primary-1,h="annuli"===this.Ko.dataOrder?t.iSector:t.iAnnulus,r=h+i.secondary-1,n="annuli"===this.Ko.dataOrder?this.Ko.annuli-1:this.Ko.sectors-1,o="annuli"===this.Ko.dataOrder?this.Ko.sectors-1:this.Ko.annuli-1;if(s<0||h<0){if(!0===this.chart.aA.qo){const i=`PolarHeatmapSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niSector: ${t.iSector}, iAnnuli: ${t.iAnnulus}.\nNo intensity values will be invalidated.`;ni.console.warn(i)}return this}if(e>n||r>o){if(!0===this.chart.aA.qo){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nMax indexes ${n}x${o}, input ${i.primary}x${i.secondary} starting at [${s},${h}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;ni.console.warn(t)}const a=Math.max(e-n,0),l=i.primary-a,c=Math.max(r-o,0),u=[];for(let i=0;i<l;i+=1)u[i]=t.values[i].slice(0,c>0?-c:void 0);if(0===(t={iSector:t.iSector,iAnnulus:t.iAnnulus,values:u}).values.length||0===t.values[0].length)return this}this.jS.mp({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.Ys.Ls(),this.Ay=!0,this}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.jS.Ie(this.Ce),this.Ys.Ls(),this}getFillStyle(){return this.Ce}clear(){return this.jS.ti(),this.Ys.Ls(),this}setIntensityInterpolation(t){return t=t||"disabled",this.jS.yp(t),this.Ys.Ls(),this}getIntensityInterpolation(){return this.jS.pp()}Gs(){return ji(this.Ce,this.jS.Tt())}Qv(){return this.qv&&this.getVisible()}De(t,i){t.Bt(i),this.Ys.Ls()}Le(){}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class jc extends Xc{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Es="Line Series",this.JS=[],this.KS=!1,this.qS=!1,this.D=new zt,this.Oc=Ji(this._t.polarLineSeriesStrokeStyle,r),this.tb=t.tv(e,void 0,[Cl.UserSeries]).Ne(this.Oc).Bt(this.getHighlight()),this.ws(this.tb)}solveNearest(t,i){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=this.tb.ib(e);if(!h)return;const r=Uc(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Kt(t,i){return As({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,"show-nearest")))}setData(t){return 0!==this.JS.length&&this.chart.St.Zo(Gr.qn),this.JS=$c(t),this.KS=!0,this.XS=Gc(this.JS),this.Ys.Ls(),this}setStrokeStyle(t){this.Oc="function"==typeof t?t(this.Oc):t;const i=this.Oc;return this.tb.Ne(i),this.Ys.Ls(),this}getStrokeStyle(){return this.Oc}setConnectDataAutomaticallyEnabled(t){return this.qS=t,this.Ys.Ls(),this}getConnectDataAutomaticallyEnabled(){return this.qS}Qv(){return this.qv&&this.JS.length>0&&this.getVisible()}De(t,i){t.Bt(i),this.Ys.Ls()}Le(){if(this.KS||this.scale.sb()){const t=Nc(this.JS,this.scale),i=zs(t);this.qS?(t.push({...t[0]}),this.tb.dc(!0)):this.tb.dc(!1),this.tb.ti().Dl(t).Pt(i),this.KS=!1,this.tb.hr()}}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{stroke:this.Oc})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Zc extends Xc{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Es="Point Line Series",this.JS=[],this.KS=!1,this.qS=!1,this.eb=3,this.Ga=0,this.hb=Oe.Circle,this.D=new zt,this.Ce=Ji(this._t.polarPointLineSeriesFillStyle,r),this.Oc=Ji(this._t.polarPointLineSeriesStrokeStyle,r),this.tb=t.tv(e,void 0,[Cl.UserSeries]).Ne(this.Oc).Bt(this.getHighlight()),this.ws(this.tb),this.rb=t.wy(e).Ie(this.Ce).Fl(this.hb).Z(this.eb).Bt(this.getHighlight()),this.ws(this.rb)}solveNearest(t,i){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=this.tb.ib(e);if(!h)return;const r=Uc(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Kt(t,i){return As({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}setData(t){return 0!==this.JS.length&&this.chart.St.Zo(Gr.qn),this.JS=$c(t),this.KS=!0,this.XS=Gc(this.JS),this.Ys.Ls(),this}setStrokeStyle(t){this.Oc="function"==typeof t?t(this.Oc):t;const i=this.Oc;return this.tb.Ne(i),this.Ys.Ls(),this}getStrokeStyle(){return this.Oc}setPointFillStyle(t){this.Ce="function"==typeof t?t(this.Ce):t;const i=this.Ce;return this.rb.Ie(i),this.Ys.Ls(),this}getPointFillStyle(){return this.Ce}setPointSize(t){return this.eb=t,this.rb.Z(t),this.Ys.Ls(),this}getPointSize(){return this.eb}setPointShape(t){return this.hb=t,this.rb.Fl(this.hb),this}getPointShape(){return this.hb}setPointRotation(t){return this.Ga=t,this.rb.Wh(t),this.Ys.Ls(),this}getPointRotation(){return this.Ga}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce,stroke:this.Oc})}setConnectDataAutomaticallyEnabled(t){return this.qS=t,this.Ys.Ls(),this}getConnectDataAutomaticallyEnabled(){return this.qS}Qv(){return this.qv&&this.JS.length>0&&this.getVisible()}De(t,i){t.Bt(i),this.Ys.Ls()}Le(){if(this.KS||this.scale.sb()){const t=Nc(this.JS,this.scale),i=zs(t);this.qS?(t.push({...t[0]}),this.tb.dc(!0)):this.tb.dc(!1),this.tb.ti().Dl(t).Pt(i),this.rb.ti().Dl(t).Pt(i),this.KS=!1,this.tb.hr(),this.rb.hr()}}$s(){return this.Ds||this.hb}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Qc extends Er{constructor(t,i,s,e,h,r,n,o,a){super(),this.Mt=ds(),this.dt=!1,this.D=new zt,this.nb=e,this.ob=h,this.ab=r,this.lb=n,this.cb=o,this.Ys=t,this.scale=i,this.ub=s,this._t=a}dispose(){return this.ub&&this.ub(this),this.Ys.St.Ls(),this.D.R("dispose",{}),this.dt=!0,this}setVisible(t){return super.setVisible(t),this.ab(),this.Ys.St.Ls(),this}isDisposed(){return this.dt}setPointerEvents(t){return this.lb(this,t),this}getPointerEvents(){return this.cb(this)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Jc extends Qc{constructor(t,i,s,e,h,r,n,o,a,l,u,d,f,A,g,v,y,p){super(i,s,e,h,r,n,o,a,p),this.fb=1,this.Ab=1,this._y=t,this.Ys=i,this.scale=s,this.dimensionStrategy=l,this.start=u,this.end=d,this.lowerExtreme=f,this.lowerQuartile=A,this.median=g,this.upperQuartile=v,this.upperExtreme=y,this.boundaries=c(this.dimensionStrategy.toPoint(u,f),this.dimensionStrategy.toPoint(d,y)),this.gb=this._t.boxSeriesBodyFillStyle,this.yb=this._t.boxSeriesBodyStrokeStyle,this.Oc=this._t.boxSeriesStrokeStyle,this.pb=this._t.boxSeriesMedianStrokeStyle,this.hr()}Kt(t,i){const s=this._y.Hs.toPoint((this.start+this.end)/2,this.median);return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this._y.axisX,y:this._y.axisY}},...s,figure:this,start:this.start,end:this.end,lowerExtreme:this.lowerExtreme,lowerQuartile:this.lowerQuartile,median:this.median,upperQuartile:this.upperQuartile,upperExtreme:this.upperExtreme,series:this._y,axisX:this._y.axisX,axisY:this._y.axisY}}mb(){return this.boundaries}setBodyWidth(t){return this.fb=t,this.hr(),this}getBodyWidth(){return this.fb}setBodyFillStyle(t){return this.gb="function"==typeof t?t(this.gb):t,this.ob(),this}getBodyFillStyle(){return this.gb}setBodyStrokeStyle(t){return this.yb="function"==typeof t?t(this.yb):t,this.ob(),this}getBodyStrokeStyle(){return this.yb}setTailWidth(t){return this.Ab=t,this.hr(),this}getTailWidth(){return this.Ab}setStrokeStyle(t){return this.Oc="function"==typeof t?t(this.Oc):t,this.ob(),this}getStrokeStyle(){return this.Oc}setMedianStrokeStyle(t){return this.pb="function"==typeof t?t(this.pb):t,this.ob(),this}getMedianStrokeStyle(){return this.pb}hr(){this.nb()}getDominantStyle(){return this.getBodyFillStyle()}}class Kc extends Hc{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,a,l),this.Us=!0,this.As=new Map,this.chart=t,this.Ys=s,this.axisX=e,this.axisY=h,this.axisXAttachHandler=r,this.axisYAttachHandler=n,this.Sb=o,this.scale=Me(e.ot,h.ot),this.bb=t.xb,t.xb+=1,this.Mb(this.scale),this.attacheAxis()}get xAxis(){return this.axisX}get yAxis(){return this.axisY}ba(){const t=Array.from(this.As.keys());for(const i of t){const t=i.ba();if(t)return t}}setClipping(t){return this.Us=t,this.Ys.Ls(),this}getClipping(){return this.Us}attacheAxis(){this.wb=this.axisXAttachHandler(this),this._b=this.axisYAttachHandler(this)}ws(t,i){super.ws(t,i),t.xa(this.bb)}getName(){const t=this.Ms(),i="ProgressiveY"===t||"RegressiveY"===t?this.axisX.getTitle():this.axisY.getTitle();return this.Es||i.length>0&&i||"Series"}setDrawOrder(t){return this.bb=t.seriesDrawOrderIndex,this.As.forEach(((t,i)=>{i.xa(this.bb)})),this.chart.St.Ls(),this}dispose(){return super.dispose(),this.wb(this),this._b(this),this}vv(){super.vv(),Ie(this.Us,Array.from(this.As.keys()),this.scale)}getXMax(){var t;return null!==(t=this.Cb(!0))&&void 0!==t?t:0}getXMin(){var t;return null!==(t=this.kb(!0))&&void 0!==t?t:0}getYMax(){var t;return null!==(t=this.Tb(!0))&&void 0!==t?t:0}getYMin(){var t;return null!==(t=this.Fb(!0))&&void 0!==t?t:0}getBoundaries(){return c(r(this.getXMin()||0,this.getYMin()||0),r(this.getXMax()||0,this.getYMax()||0))}setCursorEnabled(t){return super.setCursorEnabled(t)}}const qc=(t,i,s,e)=>{const h=t.length;let r=0;if(void 0!==i){const h=s-i;if(h>0){const i=t.slice(r,h);r+=h,e(i,!0)}}for(;r<h;){const i=t.slice(r,r+s);r+=s,e(i,!1)}},tu=(t,i=t=>t)=>{const s=[];let e;for(let h=0;h<t.length;h+=1){e=t[h];const r=i(e.Tl()),n=e.kl(),o=n?i(n):[];let a=!1,l=!1;"uc"in e&&(a=e.uc(),l=e.fc()),s.push.apply(s,r.slice(a?1:0,r.length-(l&&0===o.length?1:0))),s.push.apply(s,o.slice(a&&0===r.length?1:0,o.length-(l?1:0)))}return s};class iu extends Kc{constructor(){super(...arguments),this.Ib=[],this.Pb=void 0,this.Lb=!1,this.ub=t=>{const i=this.Ib.findIndex((i=>i===t));i>=0&&this.Ib.splice(i,1),this.Lb=!0,this.Pb=void 0,this.Ys.Ls()},this.nb=()=>{this.Pb=void 0,this.Lb=!0,this.chart.St.Ls()},this.ob=()=>{this.Lb=!0,this.chart.St.Ls()},this.ab=()=>{this.Pb=void 0,this.Lb=!0,this.chart.St.Ls()},this.lb=(t,i)=>{this.setPointerEvents(i)},this.Bb=t=>this.getPointerEvents()}yy(){return this.Ib.length>0}Le(){super.Le(),this.Lb&&(this.Db(this.Ib),this.Lb=!1)}clear(){return this.Ib.slice().forEach(ci),this.Ib.length=0,this.Lb=!0,this.Pb=void 0,this.Ys.Ls(),this}Eb(t,i){void 0!==i?this.Ib.splice(i,0,t):this.Ib.push(t),this.Lb=!0,this.Rb&&this.Rb(t),this.D.$t(t),this.Ys.Ls()}Qv(){return this.qv&&this.Ib.length>0&&this.getVisible()}setDefaultStyle(t){this.Rb=t,this.Ib.forEach(t),t(this.zb);for(let t=0;t<this.ds.length;t+=1)this.styleLegendEntry(this.ds[t]);return this.Lb=!0,this.chart.St.Ls(),this}setVisible(t){return super.setVisible(t),t!==this.getVisible()&&this.Ib.forEach((i=>i.setVisible(t))),this}Cb(){return this.Pb||(this.Pb=this.Vb()),this.Pb.max.x}kb(){return this.Pb||(this.Pb=this.Vb()),this.Pb.min.x}Tb(){return this.Pb||(this.Pb=this.Vb()),this.Pb.max.y}Fb(){return this.Pb||(this.Pb=this.Vb()),this.Pb.min.y}Dr(){return r(0,0)}Vb(){const t=c(n(bs,bs),n(xs,xs));for(let i=0;i<this.Ib.length;i+=1)if(this.Ib[i].getVisible()){const s=this.Ib[i].mb();t.min.x=Math.min(t.min.x,s.min.x),t.min.y=Math.min(t.min.y,s.min.y),t.max.x=Math.max(t.max.x,s.max.x),t.max.y=Math.max(t.max.y,s.max.y)}return t}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ib.length>0?this.Ib[0].getDominantStyle():this.zb.getDominantStyle()})}}const su=(t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:e+i*s,y:t[s]};return h};class eu extends Kc{constructor(t,i,s,e,h,r,n,o,a,l,c){super(t,i,s,e,h,r,n,o,l,c),this.Ob=[],this.Xc=[],this.Nb=0,this.Gb=!1,this.cs=Ee.onHover,this.D=new zt,this.chart.St.Zo(Gr.Zn),this.$b=a}yy(){return this.getPointAmount()>0}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.Nb=void 0!==i&&i>0?i:0,this.Ys.Ls(),this}add(t){if(0!==this.Ob.length&&this.chart.St.Zo(Gr.qn),Array.isArray(t)?this.Ub(t):this.Ub([t]),this.Xc.length>0){const t=this.Xc[this.Xc.length-1];this.Yb={x:t.x,y:t.y}}return this}addArrayX(t,i=1,s){let e=s;return e||(e=this.Yb?this.Yb.y+i:0),this.add(((t,i=1,s)=>{const e=void 0!==s?s:0,h=new Array(t.length);for(let s=0;s<t.length;s+=1)h[s]={x:t[s],y:e+i*s};return h})(t,i,e)),this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.Yb?this.Yb.x+i:0),this.add(su(t,i,e)),this}addArraysXY(t,i){if(t.length!==i.length)throw new Error("arrayX and arrayY lengths are not equal");return this.add(((t,i)=>{const s=new Array(t.length);for(let e=0;e<t.length;e+=1)s[e]={x:t[e],y:i[e]};return s})(t,i)),this}getPointAmount(){return this.Ob.reduce(((t,i)=>t+i.El()+i.Rl()),this.Xc.length)}clear(){this.Hb=void 0;for(let t=0;t<this.Ob.length;t+=1)this.Ob[t].ti();return this.Xc.length=0,this.Yb=void 0,this.Ys.Ls(),this.D.R("dataclear",{}),this}getLastPoint(){return this.Yb}Qv(){return this.qv&&this.getPointAmount()>0&&this.getVisible()}Cb(){return this.$b.getXMax(this.Ob,this.Hb)||0}kb(){return this.$b.getXMin(this.Ob,this.Hb)||0}Tb(){return this.$b.getYMax(this.Ob,this.Hb)||0}Fb(){return this.$b.getYMin(this.Ob,this.Hb)||0}Dr(){const t=r(0,0);for(const i of this.Ob)t.x=Math.max(t.x,i.Wl()),t.y=Math.max(t.y,i.jl());return t}Xb(t,i,s,e){this.$b.Xb(t,i,s,e,this.scale,(t=>{}))}hy(){super.hy(),this.Wb&&this.Xb(this.Ob,this.getPointAmount(),this.Wb,this.Nb)}Le(){super.Le();const t=this.getBoundaries();this.Xc.length>0&&(this.jb(this.Xc),this.Xc=[]);for(const i of this.Ob)i.Pt(t);return super.Le()}vv(){super.vv(),this.Hb=void 0,this.Xc.length=0}Ub(t){0!==t.length&&(this.Hb?this.Hb=Os(this.Hb,zs(t)):this.Hb=zs(t),this.D.R("dataadd",{data:t,boundaries:this.Hb}),this.Xc=Ui(this.Xc,t,{canReturnB:!1}),this.Ys.Ls())}Zb(){return tu(this.Ob)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const hu=(t,i,s,e)=>{let h,r,n=Number.MAX_VALUE;for(let o=0;o<i.length;o+=1){const a=i[o],l=s(a,t);if(l){const i=e(t,l);(void 0===h||i<n)&&(h=l,r=a,n=i)}}return h&&r?[h,r]:void 0};class ru extends iu{constructor(t,i,s,e,h,r,n,o,a,l,c,u){super(t,i,s,e,h,r,n,o,l,c),this.Es="Box Series",this.Qb=cs(),this.Jb=t=>ot(this.Hs.toPoint((t.start+t.end)/2,t.median),this.scale,this.Ys.St.ot),this.D=new zt,this.chart.St.Zo(Gr.Jn),this.Hs=a,this.zb=new Jc(this,this.Ys,this.scale,this.ub,ui,ui,ui,ui,(t=>!1),this.Hs,0,0,0,0,0,0,0,this._t).dispose(),this.Kb=new Dl((()=>{const t=this.Ys.Gf(this.scale);return this.ws(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ne(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.lo();return s.Uf(i.start,i.end),s}))))),this.qb=new Dl((()=>{const t=this.Qb.Jt(this.Ys.Bv(this.scale));return this.ws(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ie(s.fillStyle).Fe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.lo();return s.Hl(i.vertices),this.Qb.qt(s,i.figure),s})))),(()=>{this.Qb.ti()}),((t,i)=>{this.ks(i)}))}solveNearest(t,i){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY};if(0===this.Ib.length)return;const h=hu(e,this.Ib.filter((t=>t.getVisible())),this.Jb,Bs);if(!h)return;const r=ot(h[0],this.Ys.St.ot,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],start:h[1].start,end:h[1].end,lowerExtreme:h[1].lowerExtreme,lowerQuartile:h[1].lowerQuartile,median:h[1].median,upperQuartile:h[1].upperQuartile,upperExtreme:h[1].upperExtreme,series:this,axisX:this.axisX,axisY:this.axisY}}Kt(t,i){return As({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,median:0,lowerQuartile:0,upperQuartile:0,lowerExtreme:0,upperExtreme:0,start:0,end:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}Mb(t){if(!(t instanceof be||t instanceof xe))throw new Error("BoxSeries only supports Linear Axes")}Db(t){const i=this.qb.yv(),s=this.Kb.yv();t.forEach((t=>{if(!t.getVisible())return;const e=this.Hs.toPoint((t.start+t.end-t.fb*(t.end-t.start))/2,t.lowerQuartile),h=this.Hs.toPoint((t.end-t.start)*t.fb,t.upperQuartile-t.lowerQuartile),r=this.Hs.toPoint((t.start+t.end)/2,t.lowerQuartile),n=this.Hs.toPoint((t.start+t.end)/2,t.lowerExtreme),o=this.Hs.toPoint((t.start+t.end)/2,t.upperQuartile),a=this.Hs.toPoint((t.start+t.end)/2,t.upperExtreme),l=this.Hs.toPoint((t.start+t.end-t.Ab*(t.end-t.start))/2,t.lowerExtreme),c=this.Hs.toPoint((t.start+t.end+t.Ab*(t.end-t.start))/2,t.lowerExtreme),u=this.Hs.toPoint((t.start+t.end-t.Ab*(t.end-t.start))/2,t.upperExtreme),d=this.Hs.toPoint((t.start+t.end+t.Ab*(t.end-t.start))/2,t.upperExtreme),f=this.Hs.toPoint((t.start+t.end-t.fb*(t.end-t.start))/2,t.median),A=this.Hs.toPoint((t.start+t.end+t.fb*(t.end-t.start))/2,t.median);i.add({Mt:t.Mt,vertices:[{x:e.x,y:e.y},{x:e.x,y:e.y+h.y},{x:e.x+h.x,y:e.y+h.y},{x:e.x+h.x,y:e.y}],figure:t},{fillStyle:t.gb,strokeStyle:t.yb}),s.add({Mt:0,start:r,end:n,figure:t},{strokeStyle:t.Oc}),s.add({Mt:0,start:o,end:a,figure:t},{strokeStyle:t.Oc}),s.add({Mt:0,start:l,end:c,figure:t},{strokeStyle:t.Oc}),s.add({Mt:0,start:u,end:d,figure:t},{strokeStyle:t.Oc}),s.add({Mt:0,start:f,end:A,figure:t},{strokeStyle:t.pb})})),i.finishPlot(),s.finishPlot()}add(t){const i=new Jc(this,this.Ys,this.scale,this.ub,this.nb,this.ob,this.ab,this.lb,this.Bb,this.Hs,t.start,t.end,t.lowerExtreme,t.lowerQuartile,t.median,t.upperQuartile,t.upperExtreme,this._t);return this.Eb(i),this.Lb=!0,this.chart.St.Ls(),i}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class nu extends Qc{constructor(t,i,s,e,h,n,o,a,l,u,d){super(i,s,e,h,n,o,a,l,u),this.dimensions={x:0,y:0,radiusX:0,radiusY:0},this.Sl=c(r(0,0),r(0,0)),this._y=t,this.Ys=i,this.scale=s,this.Ce=Ji(u.ellipseSeriesFillStyle,d),this.ke=Ji(u.ellipseSeriesStrokeStyle,d)}Kt(t,i){const s=this.getDimensions(),e=r(s.x,s.y);return{cursorPosition:{resultTable:e,resultTableScale:this.scale,pointMarker:e,pointMarkerScale:{x:this._y.axisX,y:this._y.axisY}},...e,figure:this,...this.getDimensions(),series:this._y,axisX:this._y.axisX,axisY:this._y.axisY}}mb(){return this.Sl}setDimensions(t){return this.dimensions=t,this.Sl=c(r(t.x-t.radiusX,t.y-t.radiusY),r(t.x+t.radiusX,t.y+t.radiusY)),this.nb(),this.Ys.Ls(),this}getDimensions(){return this.dimensions}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.ob(),this}getFillStyle(){return this.Ce}setStrokeStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.ob(),this}getStrokeStyle(){return this.ke}getDominantStyle(){return this.Ce}}class ou extends iu{constructor(t,i,s,e,h,n,o,a,l,c,u){super(t,i,s,e,h,n,o,a,l,c),this.Es="Ellipse Series",this.Qb=cs(),this.Jb=t=>{const i=t.getDimensions(),s=r(i.x,i.y);return ot(s,this.scale,this.Ys.St.ot)},this.D=new zt,this.chart.St.Zo(Gr.Jn),this.tx=u,this.zb=new nu(this,this.Ys,this.scale,ui,ui,ui,ui,ui,(t=>!1),this._t,this.tx).dispose(),this.qb=new Dl((()=>{const t=this.Qb.Jt(this.Ys.Bv(this.scale));return this.ws(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ie(s.fillStyle).Fe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.lo();return s.Hl(i.vertices),this.Qb.qt(s,i.figure),s})))),(()=>{this.Qb.ti()}),((t,i)=>{this.ks(i)}))}solveNearest(t,i){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY};if(0===this.Ib.length)return;const h=hu(e,this.Ib.filter((t=>t.getVisible())),this.Jb,Bs);if(!h)return;const r=ot(h[0],this.Ys.St.ot,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],...h[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Kt(t,i){return As({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,radiusX:0,radiusY:0,drawSteps:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}Mb(t){if(!(t instanceof be||t instanceof xe))throw new Error("EllipseSeries only supports Linear Axes")}Db(t){const i=this.qb.yv();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=[],h=void 0!==s.drawSteps?s.drawSteps:72;for(let t=0;t<=h;t+=1){const i=t/h*2*Math.PI,r=s.x+s.radiusX*Math.cos(i),n=s.y+s.radiusY*Math.sin(i);e.push({x:r,y:n})}const r=t.getFillStyle(),n=t.getStrokeStyle();i.add({Mt:t.Mt,vertices:e,figure:t},{fillStyle:r,strokeStyle:n})})),i.finishPlot()}add(t){const i=new nu(this,this.Ys,this.scale,this.ub,this.nb,this.ob,this.ab,this.lb,this.Bb,this._t,this.tx).setDimensions(t);return this.Eb(i),this.Lb=!0,this.chart.St.Ls(),i}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class au extends Qc{constructor(t,i,s,e,h,r,n,o,a,l,c){super(i,s,e,h,r,n,o,a,l),this.ix=[],this.Sl=Ms,this._y=t,this.Ys=i,this.scale=s,this.Ce=Ji(l.polygonSeriesFillStyle,c),this.ke=Ji(l.polygonSeriesStrokeStyle,c)}Kt(t,i){const s=this.mb(),e=r((s.min.x+s.max.x)/2,(s.min.y+s.max.y)/2);return{cursorPosition:{resultTable:e,resultTableScale:this.scale,pointMarker:e,pointMarkerScale:{x:this._y.axisX,y:this._y.axisY}},...e,figure:this,coordinates:this.getDimensions(),series:this._y,axisX:this._y.axisX,axisY:this._y.axisY}}mb(){return this.Sl}setDimensions(t){return this.ix=t,this.Sl=zs(this.ix),this.nb(),this.Ys.Ls(),this}getDimensions(){return this.ix}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.ob(),this}getFillStyle(){return this.Ce}setStrokeStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.ob(),this}getStrokeStyle(){return this.ke}getDominantStyle(){return this.Ce}}class lu extends iu{constructor(t,i,s,e,h,n,o,a,l,c,u){super(t,i,s,e,h,n,o,a,l,c),this.Es="Polygon Series",this.Qb=cs(),this.Jb=t=>{const i=t.mb(),s=r((i.min.x+i.max.x)/2,(i.min.y+i.max.y)/2);return ot(s,this.scale,this.Ys.St.ot)},this.D=new zt,this.chart.St.Zo(Gr.Jn),this.tx=u,this.zb=new au(this,this.Ys,this.scale,ui,ui,ui,ui,ui,(t=>!1),this._t,this.tx).dispose(),this.qb=new Dl((()=>{const t=this.Qb.Jt(this.Ys.Bv(this.scale));return this.ws(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ie(s.fillStyle).Fe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.lo();return s.Hl(i.vertices),this.Qb.qt(s,i.figure),s})))),(()=>{this.Qb.ti()}),((t,i)=>{this.ks(i)}))}solveNearest(t,i){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY};if(0===this.Ib.length)return;const h=hu(e,this.Ib.filter((t=>t.getVisible())),this.Jb,Bs);if(!h)return;const r=ot(h[0],this.Ys.St.ot,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],coordinates:h[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Kt(t,i){return As({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,coordinates:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}Mb(t){}Db(t){const i=this.qb.yv();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e=t.getFillStyle(),h=t.getStrokeStyle();i.add({Mt:t.Mt,vertices:s,figure:t},{fillStyle:e,strokeStyle:h})})),i.finishPlot()}add(t){const i=new au(this,this.Ys,this.scale,this.ub,this.nb,this.ob,this.ab,this.lb,this.Bb,this._t,this.tx).setDimensions(t);return this.Eb(i),this.Lb=!0,this.chart.St.Ls(),i}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class cu extends Qc{constructor(t,i,s,e,h,n,o,a,l,u,d){super(i,s,e,h,n,o,a,l,u),this.sx={x:0,y:0,width:0,height:0},this.hx={x1:0,y1:0,x2:0,y2:0},this.Sl=c(r(0,0),r(0,0)),this._y=t,this.Ce=Ji(u.rectangleSeriesFillStyle,d),this.Ys=i,this.scale=s,this.ke=Ji(u.rectangleSeriesStrokeStyle,d)}setCornerRadius(t){return this.nx=t,this.nb(),this}getCornerRadius(){return this.nx}Kt(t,i){const s=this.getDimensionsPositionAndSize(),e=r(s.x+s.width/2,s.y+s.height/2);return{cursorPosition:{resultTable:e,resultTableScale:this.scale,pointMarker:e,pointMarkerScale:{x:this._y.axisX,y:this._y.axisY}},...e,figure:this,...this.getDimensionsPositionAndSize(),...this.getDimensionsTwoPoints(),series:this._y,axisX:this._y.axisX,axisY:this._y.axisY}}mb(){return this.Sl}setDimensions(t){return"x"in t?(this.sx=t,this.hx={x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}):(this.hx=t,this.sx={x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}),this.Sl=zs([this.sx,r(this.sx.x+this.sx.width,this.sx.y+this.sx.height)]),this.nb(),this.Ys.Ls(),this}getDimensionsPositionAndSize(){return this.sx}getDimensionsTwoPoints(){return this.hx}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.ob(),this}getFillStyle(){return this.Ce}setStrokeStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.ob(),this}getStrokeStyle(){return this.ke}getDominantStyle(){return this.Ce}}class uu extends iu{constructor(t,i,s,e,h,n,o,a,l,c,u){super(t,i,s,e,h,n,o,a,l,c),this.Es="Rectangle Series",this.ox=cs(),this.Jb=t=>{const i=t.getDimensionsPositionAndSize(),s=r(i.x+i.width/2,i.y+i.height/2);return ot(s,this.scale,this.Ys.St.ot)},this.D=new zt,this.chart.St.Zo(Gr.Jn),this.tx=u,this.zb=new cu(this,this.Ys,this.scale,ui,ui,ui,ui,ui,(t=>!1),this._t,this.tx).dispose(),this.lx=new Dl((()=>{const t=this.ox.Jt(this.Ys.Vu(this.scale));return this.ws(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ie(s.fillStyle).Fe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.lo();return s.$u(i.x1,i.y1,i.x2,i.y2).Gu(i.roundedCorners?{extent:i.roundedCorners,c_x1_y1:!0,c_x1_y2:!0,c_x2_y1:!0,c_x2_y2:!0}:void 0),this.ox.qt(s,i.figure),s})))),(()=>{this.ox.ti()}),((t,i)=>{this.ks(i)}))}solveNearest(t,i){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY};if(0===this.Ib.length)return;const h=hu(e,this.Ib.filter((t=>t.getVisible())),this.Jb,Bs);if(!h)return;const r=ot(h[0],this.Ys.St.ot,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],...h[1].getDimensionsPositionAndSize(),...h[1].getDimensionsTwoPoints(),series:this,axisX:this.axisX,axisY:this.axisY}}Kt(t,i){return As({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,x1:0,y1:0,x2:0,y2:0,width:0,height:0,multiHit:0,figure:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}Mb(t){}Db(t){const i=this.lx.yv();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensionsTwoPoints(),e=t.getFillStyle(),h=t.getStrokeStyle();i.add({Mt:t.Mt,figure:t,roundedCorners:t.nx,...s},{fillStyle:e,strokeStyle:h})})),i.finishPlot()}add(t){const i=new cu(this,this.Ys,this.scale,this.ub,this.nb,this.ob,this.ab,this.lb,this.Bb,this._t,this.tx).setDimensions(t);return this.Eb(i),this.Lb=!0,this.chart.St.Ls(),i}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class du extends Qc{constructor(t,i,s,e,h,n,o,a,l,u,d){super(i,s,e,h,n,o,a,l,u),this.dimensions={startX:0,startY:0,endX:0,endY:0},this.Sl=c(r(0,0),r(0,0)),this._y=t,this._t=u,this.Ys=i,this.scale=s,this.ke=Ji(u.segmentSeriesStrokeStyle,d)}Kt(t,i){const s=this.getDimensions(),e=r((s.startX+s.endX)/2,(s.startY+s.endY)/2);return{cursorPosition:{resultTable:e,resultTableScale:this.scale,pointMarker:e,pointMarkerScale:{x:this._y.axisX,y:this._y.axisY}},...e,figure:this,...this.getDimensions(),series:this._y,axisX:this._y.axisX,axisY:this._y.axisY}}mb(){return this.Sl}setDimensions(t){return this.dimensions=t,this.Sl=c(r(Math.min(t.startX,t.endX),Math.min(t.startY,t.endY)),r(Math.max(t.startX,t.endX),Math.max(t.startY,t.endY))),this.nb(),this.Ys.Ls(),this}getDimensions(){return this.dimensions}setStrokeStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.ob(),this}getStrokeStyle(){return this.ke}getDominantStyle(){const t=this.ke;return t!==Wt?t.getFillStyle():V}}class fu extends iu{constructor(t,i,s,e,h,n,o,a,l,c,u){super(t,i,s,e,h,n,o,a,l,c),this.Es="Segment Series",this.ux=cs(),this.Jb=t=>{const i=t.getDimensions(),s=r((i.startX+i.endX)/2,(i.startY+i.endY)/2);return ot(s,this.scale,this.Ys.St.ot)},this.D=new zt,this.chart.St.Zo(Gr.Jn),this.tx=u,this.zb=new du(this,this.Ys,this.scale,ui,ui,ui,ui,ui,(t=>!1),this._t,this.tx).dispose(),this.Kb=new Dl((()=>{const t=this.ux.Jt(this.Ys.Gf(this.scale));return this.ws(t,{setEventHandlers:!1}),t}),((t,i,s)=>(t.Ne(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.lo();return s.Uf(i.start,i.end),this.ux.qt(s,i.figure),s})))),(()=>{this.ux.ti()}),((t,i)=>{this.ks(i)}))}solveNearest(t,i){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY};if(0===this.Ib.length)return;const h=hu(e,this.Ib.filter((t=>t.getVisible())),this.Jb,Bs);if(!h)return;const r=ot(h[0],this.Ys.St.ot,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],...h[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Kt(t,i){return As({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,startX:0,startY:0,endX:0,endY:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}Mb(t){}Db(t){const i=this.Kb.yv();t.forEach((t=>{if(!t.getVisible())return;const s=t.getDimensions(),e={x:s.startX,y:s.startY},h={x:s.endX,y:s.endY},r=t.getStrokeStyle();i.add({Mt:t.Mt,start:e,end:h,figure:t},{strokeStyle:r})})),i.finishPlot()}add(t){const i=new du(this,this.Ys,this.scale,this.ub,this.nb,this.ob,this.ab,this.lb,this.Bb,this._t,this.tx).setDimensions(t);return this.Eb(i),this.Lb=!0,this.chart.St.Ls(),i}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Au={x:0,y:0};class gu extends Qc{constructor(t,i,s,e,h,r,n,o,a,l,c){var u;super(i,s,e,h,r,n,o,a,l),this.Da="Text",this.wo=Au,this.Td=Au,this.Ga=0,this.oi=us,this._y=t,this.Ce=l.textSeriesFillStyle?Ji(l.textSeriesFillStyle,c):l.uiTextFillStyle,this.pn=null!==(u=l.textSeriesFont)&&void 0!==u?u:l.uiTextFont,this.vl=this.Ys.Yr(s).mr(l.textSeriesShadow),this.vl.Ea=!0,this.D.Nt(this.vl,{getExtraData:(t,i,s)=>this.Kt(s,t)}),this.addEventListener("dispose",(()=>this.vl.dispose()))}Kt(t,i){const s=this.wo;return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this._y.axisX,y:this._y.axisY}},...s,figure:this,series:this._y,axisX:this._y.axisX,axisY:this._y.axisY}}mb(){return{min:{x:this.wo.x,y:this.wo.y},max:{x:this.wo.x,y:this.wo.y}}}Ax(){this.vl.Sr(this.Da).Be(this.wo).ul(this.Td).Wh(this.Ga).$r(this.oi).Ie(this.Ce).Xh(this.pn)}getSizePixels(){return this.Ax(),this.vl.hr().zu()}getBoundingBox(){this.Ax();const t=this.vl.hr().Kg();return 4!==t.length?Ms:{min:{x:Math.min(t[0].x,t[1].x,t[2].x,t[3].x),y:Math.min(t[0].y,t[1].y,t[2].y,t[3].y)},max:{x:Math.max(t[0].x,t[1].x,t[2].x,t[3].x),y:Math.max(t[0].y,t[1].y,t[2].y,t[3].y)}}}setText(t){return this.Da=t,this.nb(),this}getText(){return this.Da}setLocation(t){return this.wo=t,this.nb(),this}getLocation(){return this.wo}setAlignment(t){return this.Td=t,this.nb(),this}getAlignment(){return this.Td}setRotation(t){return this.Ga=t,this.nb(),this}getRotation(){return this.Ga}setMargin(t){return this.oi=g(this.oi,t),this.nb(),this}getMargin(){return this.oi}setLabelShadow(t){return this.vl.mr(t),this.Ys.Ls(),this}getLabelShadow(){return this.vl.el()}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.ob(),this}getFillStyle(){return this.Ce}setFont(t){return this.pn="function"==typeof t?t(this.pn):t,this.ob(),this}getFont(){return this.pn}getDominantStyle(){return this.Ce}}class vu extends iu{constructor(t,i,s,e,h,r,n,o,a,l,c){super(t,i,s,e,h,r,n,o,a,l),this.Es="Text Series",this.Jb=t=>ot(t.getLocation(),this.scale,this.Ys.St.ot),this.D=new zt,this.tx=c,this.zb=new gu(this,this.Ys,this.scale,ui,ui,ui,ui,ui,(t=>!1),this._t,this.tx).dispose()}Mb(t){}Db(t){t.forEach((t=>{t.Ax(),t.vl.setVisible(t.getVisible())}))}add(t){const i=new gu(this,this.Ys,this.scale,this.ub,this.nb,this.ob,this.ab,this.lb,this.Bb,this._t,this.tx);return(null==t?void 0:t.alignment)&&i.setAlignment(t.alignment),(null==t?void 0:t.fillStyle)&&i.setFillStyle(t.fillStyle),(null==t?void 0:t.font)&&i.setFont(t.font),(null==t?void 0:t.location)&&i.setLocation(t.location),(null==t?void 0:t.margin)&&i.setMargin(t.margin),void 0!==(null==t?void 0:t.rotation)&&i.setRotation(t.rotation),(null==t?void 0:t.text)&&i.setText(t.text),this.Eb(i),this.Lb=!0,this.ws(i.vl,{setEventHandlers:!1,isText:!0}),this.chart.St.Ls(),this.D.Nt(i.vl,{getExtraData:(t,s,e)=>i.Kt(e,t)}),i}Kt(t,i){return As({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}solveNearest(t,i){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY};if(0===this.Ib.length)return;const h=hu(e,this.Ib.filter((t=>t.getVisible())),this.Jb,Bs);if(!h)return;const r=ot(h[0],this.Ys.St.ot,this.scale);return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,figure:h[1],series:this,axisX:this.axisX,axisY:this.axisY}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class yu extends Kc{constructor(t,i,s,e,h,r,n,o,a,l,c,u){super(t,i,s,e,h,r,n,o,l,c),this.Es="Heatmap Grid Series",this.lp={},this.chart.St.Zo(Gr.Qn),this.gx=a,this._t=l;const d=u;this.Ce=Ji(l.heatmapGridSeriesFillStyle,d),this.cp=Ji(this._t.heatmapGridSeriesWireframeStyle,d);const f={heatmapDataType:"intensity",dataOrder:a.dataOrder||"columns",columns:a.columns,rows:a.rows};this.Ko=f,this.vx=this.Ys.yx(this.scale,[],f).Ie(this.Ce).up(this.cp).Bt(this.getHighlight()),this.ws(this.vx),this.setHighlightOnHover(!1)}solveNearest(t,i="show-nearest"){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=ot(e,this.Ys.St.ot,this.scale),r=Ha(i)?this.vx.QS(h):this.vx.Ru(h);if(r)return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:r.x,y:r.y,column:r.column,row:r.row,intensity:r.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:j(this.Ce)?this.Ce.lut:void 0}}Kt(t,i){return As({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,intensity:0,column:0,row:0,lut:j(this.Ce)?this.Ce.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}fp(){const t=this.lp.start||{x:0,y:0};let i;i=this.lp.end?{x:(this.lp.end.x-t.x)/this.Ko.columns,y:(this.lp.end.y-t.y)/this.Ko.rows}:this.lp.step?this.lp.step:{x:1,y:1},this.vx.Ap(t,i),this.chart.St.Ls()}setStart(t){return this.lp.start=t,this.fp(),this}getStart(){return this.vx.gp().start}setStep(t){return this.lp.step=t,this.fp(),this}getStep(){return this.vx.gp().step}setEnd(t){return this.lp.end=t,this.fp(),this}getEnd(){return this.vx.gp().end}Qv(){return this.qv&&this.getVisible()}Gs(){return ji(this.Ce,this.vx.Tt())}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce})}mx(t){this.vx.mx().forEach((i=>{t.vx.mp(i)}))}Cb(){const t=this.vx;return t?t.jt():void 0}kb(){const t=this.vx;return t?t.Wt():void 0}Tb(){const t=this.vx;return t?t.Qt():void 0}Fb(){const t=this.vx;return t?t.Zt():void 0}Dr(){const t=r(0,0);return t.x=Math.max(t.x,this.vx.Wl()),t.y=Math.max(t.y,this.vx.jl()),t}Mb(t){if(!(t instanceof be))throw new Error("HeatmapGridSeries can only be attached to a pair of Linear Axes.")}De(t,i){t.Bt(i),this.Ys.Ls()}Le(){return super.Le(),this.vx.Pt(this.getBoundaries()),this}}class pu extends yu{constructor(t,i,s,e,h,r,n,o,a,l,c,u){super(t,i,s,e,h,r,n,o,a,l,c,u),this.Ay=!1,this.D=new zt}yy(){return this.Ay}invalidateIntensityValues(t){if(this.Ay&&this.chart.St.Zo(Gr.qn),Array.isArray(t)){if(0===t.length)return this;const i={x:t.length,y:t[0].length,columns:"columns"===this.Ko.dataOrder?t.length:t[0].length,rows:"rows"===this.Ko.dataOrder?t.length:t[0].length},s="columns"===this.Ko.dataOrder?this.Ko.columns:this.Ko.rows,e="columns"===this.Ko.dataOrder?this.Ko.rows:this.Ko.columns;if(i.x>s||i.y>e){if(!0===this.chart.aA.qo){const t=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Ko.columns}x${this.Ko.rows}, input ${i.columns}x${i.rows}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;ni.console.warn(t)}const h=[];for(let i=0;i<s;i+=1)h[i]=t[i].slice(0,e);t=h}this.vx.mp({type:"intensity",lengthPrimary:i.x,lengthSecondary:i.y,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length)return this;const i={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Ko.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Ko.dataOrder?t.values.length:t.values[0].length},s="columns"===this.Ko.dataOrder?t.iColumn:t.iRow,e=s+i.primary-1,h="columns"===this.Ko.dataOrder?t.iRow:t.iColumn,r=h+i.secondary-1,n=("columns"===this.Ko.dataOrder?this.Ko.columns:this.Ko.rows)-1,o=("columns"===this.Ko.dataOrder?this.Ko.rows:this.Ko.columns)-1;if(s<0||h<0){if(!0===this.chart.aA.qo){const i=`HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niColumn: ${t.iColumn}, iRow: ${t.iRow}.\nNo intensity values will be invalidated.`;ni.console.warn(i)}return this}if(e>n||r>o){if(!0===this.chart.aA.qo){const s=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Ko.columns}x${this.Ko.rows}, input ${i.columns}x${i.rows} starting at [${t.iColumn},${t.iRow}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;ni.console.warn(s)}const s=Math.max(e-n,0),h=i.primary-s,a=Math.max(r-o,0),l=[];for(let i=0;i<h;i+=1)l[i]=t.values[i].slice(0,a>0?-a:void 0);t={iColumn:t.iColumn,iRow:t.iRow,values:l}}this.vx.mp({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:s,startSecondary:h,values:t.values})}return this.D.R("invalidateintensity",{value:t}),this.Ys.Ls(),this.Ay=!0,this}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.vx.Ie(this.Ce),this.D.R("stylechange",{}),this.Ys.Ls(),this}getFillStyle(){return this.Ce}setIntensityInterpolation(t){return t=t||"disabled",this.vx.yp(t),this.Ys.Ls(),this.D.R("stylechange",{}),this}getIntensityInterpolation(){return this.vx.pp()}clear(){return this.vx.ti(),this.Ys.Ls(),this.D.R("dataclear",{}),this}setWireframeStyle(t){return this.cp="function"==typeof t?t(this.cp):t,this.vx.up(this.cp),this.Ys.Ls(),this.D.R("stylechange",{}),this}getWireframeStyle(){return this.cp}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class mu extends Kc{constructor(t,i,s,e,h,r,n,o,a,l,c,u){super(t,i,s,e,h,r,n,o,l,c),this.Es="Scrolling Heatmap Grid Series",this.lp={},this.chart.St.Zo(Gr.Qn),this.chart.St.Zo(Gr.qn);const d=u;this.Ce=Ji(l.heatmapScrollingGridSeriesFillStyle,d),this.cp=Ji(this._t.heatmapScrollingGridSeriesWireframeStyle,d);const f={scrollDimension:"columns",heatmapDataType:"intensity",...a};this.Ko=f,this.Sx=this.Ys.bx(this.scale,[],f).Ie(this.Ce).up(this.cp).Bt(this.getHighlight()),this.ws(this.Sx),this.setHighlightOnHover(!1)}yy(){return this.Sx._p()>0}solveNearest(t,i="show-nearest"){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=ot(e,this.Ys.St.ot,this.scale),r=Ha(i)?this.Sx.QS(h):this.Sx.Ru(h);if(r)return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:r.x,y:r.y,column:r.column,row:r.row,intensity:r.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:j(this.Ce)?this.Ce.lut:void 0}}Kt(t,i){return As({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,intensity:0,multiHit:0,column:0,row:0,lut:j(this.Ce)?this.Ce.lut:void 0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}fp(){const t=this.lp.start||{x:0,y:0};let i;i=this.lp.step?this.lp.step:{x:1,y:1},this.Sx.Ap(t,i),this.chart.St.Ls()}setStart(t){return this.lp.start=t,this.fp(),this}getStart(){return this.Sx.gp().start}setStep(t){return this.lp.step=t,this.fp(),this}getStep(){return this.Sx.gp().step}clear(){return this.Sx.ti(),this.Ys.Ls(),this}setWireframeStyle(t){return this.cp="function"==typeof t?t(this.cp):t,this.Sx.up(this.cp),this.Ys.Ls(),this}getWireframeStyle(){return this.cp}setPixelInterpolationMode(t){return t=t||"disabled",this.Sx.yp(t),this.Ys.Ls(),this}getPixelInterpolationMode(){return this.Sx.pp()}setDataCleaning(t){return this.Sx.jc(t),this.Ys.Ls(),this}Qv(){return this.qv&&this.getVisible()}Gs(){return ji(this.Ce,this.Sx.Tt())}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce})}Ie(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.Sx.Ie(this.Ce),this.Ys.Ls(),this}Mb(t){if(!(t instanceof be))throw new Error("HeatmapScrollingGridSeries can only be attached to a pair of Linear Axes.")}Cb(){return this.Sx.jt()||0}kb(){return this.Sx.Wt()||0}Tb(){return this.Sx.Qt()||0}Fb(){return this.Sx.Zt()||0}Dr(){const t=r(0,0);return t.x=Math.max(t.x,this.Sx.Wl()),t.y=Math.max(t.y,this.Sx.jl()),t}De(t,i){t.Bt(i),this.Ys.Ls()}}class Su extends mu{constructor(t,i,s,e,h,r,n,o,a,l,c,u){super(t,i,s,e,h,r,n,o,a,l,c,u),this.D=new zt}addIntensityValues(t){if(0===t.length||0===t[0].length)return this;const i=t.length,s=t[0].length,e=("columns"===this.Ko.scrollDimension?t.length:t[0].length,"rows"===this.Ko.scrollDimension?t.length:t[0].length,0+s-1),h=this.Ko.resolution-1;if(e>h){if(!0===this.chart.aA.qo){const t=`HeatmapScrollingGridSeries.addIntensityValues intensity matrix overflow.\nGrid resolution: ${this.Ko.resolution}, input ${i}x${s}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;ni.console.warn(t)}const e=[];for(let s=0;s<i;s+=1)e[s]=t[s].slice(0,h+1);t=e}return this.Sx.wp(t),this.Ys.Ls(),this}invalidateIntensityValues(t){return this.Sx.mp(t.iSample,t.values),this.Ys.Ls(),this}getSampleCount(){return this.Sx._p()}setFillStyle(t){return this.Ie(t),this}getFillStyle(){return this.Ce}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const bu=(t,i,s)=>{let e,h,r=Number.MAX_VALUE;for(let n=0;n<i.length;n+=1){const o=i[n],a=s(o,t);if(a){const i=Bs(t,a[0]),s=Bs(t,a[1]);(void 0===e||i<r||s<r)&&(e=a,h=o,i<r?r=i:s<r&&(r=s))}}return e&&h?[e,h]:void 0};class xu extends Kc{constructor(){super(...arguments),this.Ob=[],this.Xc=[],this.xx=[],this.Mx=[],this.Wb=1e3,this.Nb=0,this.cs=Ee.onHover,this.Jl={type:"disabled",packager:(t,i,s)=>t.slice()},this.wx=[],this._x=[],this.Cx=!1,this.kx=(t,i)=>{const s=t.ib(i);if(s)return[ot(s[0],this.scale,this.Ys.St.ot),ot(s[1],this.scale,this.Ys.St.ot)]},this.Tx=(t,i)=>{const s=t.Fx(i);if(s)return[ot(s[0],this.scale,this.Ys.St.ot),ot(s[1],this.scale,this.Ys.St.ot)]},this.Ix=t=>{const i=t.length;if(this.Ob.length>0){const s=this.Ob.length-1,e=this.Ob[s];if(i>0){const[i,s]=e.Tl(),[h,n]=e.kl();if((h?i.length+h.length:i.length)>=this.Wb){const a=h&&h.length>0?h[h.length-1]:i[i.length-1],l=n&&n.length>0?n[n.length-1]:s[i.length-1],u=(a.x+t[0].position)/2,d=te(u,a,r(t[0].position,t[0].high)).y,f=te(u,l,r(t[0].position,t[0].low)).y,A=o(u,d,f);e.Dl(A,c(r(u,f),r(u,d))).dc(!0),this.Px([A].concat(t)).cc(!0)}else e.Dl(t)}}else i>0&&this.Px(t)},this.Lx=t=>{const i=this.wx,s=t.length;if(this.wx.length>0){if(s>0){const s=i[i.length-1],e=s.Tl(),h=s.kl();if(e.length+h.length>=this.Wb){const n=h.length>0?h[h.length-1]:e[e.length-1],o=(n.x+t[0].x)/2,a=te(o,n,r(t[0].x,t[0].y)).y,l=r(o,a);s.Dl(l,c(r(o,a),r(o,a))).dc(!0),i.push(this.Bx([l].concat(t),this.Hb).cc(!0))}else s.Dl(t)}}else s>0&&i.push(this.Bx(t))},this.Dx=t=>{const i=this._x,s=t.length;if(this._x.length>0){if(s>0){const s=i[i.length-1],e=s.Tl(),h=s.kl();if(e.length+h.length>=this.Wb){const n=h.length>0?h[h.length-1]:e[e.length-1],o=(n.x+t[0].x)/2,a=te(o,n,r(t[0].x,t[0].y)).y,l=r(o,a);s.Dl(l,c(r(o,a),r(o,a))).dc(!0),i.push(this.Ex([l].concat(t)).cc(!0))}else s.Dl(t)}}else s>0&&i.push(this.Ex(t))}}Ms(){return"ProgressiveX"}yy(){return this.getPointAmount()>0}setDataCleaning(t){const i=t&&t.minDataPointCount;return this.Nb=void 0!==i&&i>0?i:0,this.Ys.Ls(),this}clear(){for(let t=0;t<this.Ob.length;t+=1)this.Ob[t].dispose();for(let t=0;t<this.wx.length;t+=1)this.wx[t].dispose();for(let t=0;t<this._x.length;t+=1)this._x[t].dispose();return this.Xc.length=0,this.xx.length=0,this.Mx.length=0,this.Hb=void 0,this.Ob.length=0,this.wx.length=0,this._x.length=0,this.Ys.Ls(),this.D.R("dataclear",{}),this}getPointAmount(){return this.Ob.reduce(((t,i)=>t+i.El()+i.Rl()),this.Xc.length)}Cb(){return wi(this.Ob,yi,Math.max,bi,this.Hb)||0}kb(){return wi(this.Ob,vi,Math.min,Si,this.Hb)||0}Tb(){return wi(this.Ob,mi,Math.max,Mi,this.Hb)||0}Fb(){return wi(this.Ob,pi,Math.min,xi,this.Hb)||0}Dr(){const t=r(0,0);for(const i of this.Ob)t.x=Math.max(t.x,i.Wl()),t.y=Math.max(t.y,i.jl());return t}Gs(){return ji(this.Rx,void 0)||ji(this.zx,void 0)}Qv(){return this.qv&&this.getPointAmount()>0&&this.getVisible()}Mb(t){}Ub(t,i,s){this.Xc=Ui(this.Xc,t,{canReturnB:!1}),this.xx=Ui(this.xx,i,{canReturnB:!1}),this.Mx=Ui(this.Mx,s,{canReturnB:!1}),this.Ys.Ls()}Vx(t,i,s,e){this.Ox(i,s,e),this.Ub(Array.isArray(t)?t:[t],i,s)}Ox(t,i,s){const e=Os(zs(t),zs(i));this.Hb?this.Hb=Os(this.Hb,e):this.Hb=e,s&&(this.Hb=Os(this.Hb,s))}Nx(){const t=this.Ob.length,i=Math.min(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd());let s=0;if(t>1)for(let e=0;e<t-1;e+=1)this.scale.x.Pi(this.Ob[e].jt(),this.Ob[e].Wl())<i&&(s+=1);return s}Xb(t,i,s,e){if(s>0){const h=Math.ceil(s/i),r=t.length-h;if(r>0&&e>0){const i=r-e>0?e:r;if(i>0){for(let s=0;s<i;s+=1)t[s].dispose();t.splice(0,i)}}}}Gx(t){const i=this.Ob.length>0?this.Ob[this.Ob.length-1]:void 0,s=i?i.Tl()[0].length+(i.kl()[0]?i.kl()[0].length:0):void 0;qc(t,s,this.Wb,this.Ix)}$x(t){const i=this.wx.length>0?this.wx[this.wx.length-1].Tl().length+this.wx[this.wx.length-1].kl().length:void 0;qc(t,i,this.Wb,this.Lx)}Ux(t,i){const s=this.wx.length>0?this.wx[this.wx.length-1].Tl().length+this.wx[this.wx.length-1].kl().length:void 0;qc(t,s,this.Wb,this.Lx),qc(i,s,this.Wb,this.Dx)}Px(t,i){const s=this.Ys.Yx(this.scale).Dl(t,i).Ie(this.Rx).ac(this.zx).nc(this.Jl).Bt(this.getHighlight());return this.Ob.push(s),this.ws(s),s}Hx(t,i,s){const e=this.Ys.tv(this.scale,void 0,[Cl.UserSeries]).Dl(t,s).setPointerEvents(!1).Ne(i).Bt(this.getHighlight());return this.ws(e),e}Bx(t,i){return this.Hx(t,this.Xx,i)}Ex(t,i){return this.Hx(t,this.Wx,i)}jx(t){this.Rx="function"==typeof t?t(this.Rx):t;const i=this.Rx;for(let t=0;t<this.Ob.length;t+=1)this.Ob[t].Ie(i);this.Ys.Ls()}Zx(t){this.zx="function"==typeof t?t(this.zx):t;const i=this.zx;for(let t=0;t<this.Ob.length;t+=1)this.Ob[t].ac(i);this.Ys.Ls()}Qx(){return this.Rx}lc(){return this.zx}Jx(t){this.Xx="function"==typeof t?t(this.Xx):t;const i=this.Xx;for(let t=0;t<this.wx.length;t+=1)this.wx[t].Ne(i);this.Ys.Ls()}Kx(t){this.Wx="function"==typeof t?t(this.Wx):t;const i=this.Wx;for(let t=0;t<this._x.length;t+=1)this._x[t].Ne(i);this.Ys.Ls()}qx(){return this.Xx}tM(){return this.Wx}De(t,i){t.Bt(i),this.iM(i),this.Ys.Ls()}iM(t){for(let i=0;i<this.wx.length;i+=1)this.wx[i].Bt(t);for(let i=0;i<this._x.length;i+=1)this._x[i].Bt(t)}hy(){if(super.hy(),this.Cx=!1,this.Nb>0){const t=this.Nx();this.Xb(this.Ob,this.Wb,this.Nb,t),this.wx.length>0&&this.Xb(this.wx,this.Wb,this.Nb,t),this._x.length>0&&this.Xb(this._x,this.Wb,this.Nb,t),this.Cx=!0}}Le(){if(super.Le(),this.Xc.length>0&&(this.Gx(this.Xc),this.sM(this.xx,this.Mx),this.Cx=!0),this.Cx){const t=this.getBoundaries();for(const i of this.Ob)i.Pt(t);for(const i of this.wx)i.Pt(t);for(const i of this._x)i.Pt(t)}}vv(){super.vv(),this.Hb=void 0,this.Xc.length=0,this.xx.length=0,this.Mx.length=0}}class Mu extends xu{constructor(t,i,s,e,h,r,n,o,a=0,l,c){super(t,i,s,e,h,r,n,o,l,c),this.D=new zt,this.chart.St.Zo(Gr.Zn),this.eM=a}add(t){0!==this.Ob.length&&this.chart.St.Zo(Gr.qn);const i=Array.isArray(t)?t:[t];if(i.length>0){const t=this.hM(i),[s,e]=this.rM(t);this.Vx(t,s,e,c(r(bs,this.eM),r(xs,this.eM)));const h=this.Xc[this.Xc.length-1];this.Yb=h?{position:h.position,high:h.high,low:h.low}:void 0,this.D.R("dataadd",{data:i,boundaries:this.Hb})}return this}addArrayY(t,i=1,s=0){let e=s;return e||(e=this.Yb?this.Yb.position+i:0),this.add(su(t,i,e)),this}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class wu extends Mu{constructor(t,i,s,e,h,r,n,o,a,l,c){super(t,i,s,e,h,r,n,o,a,l,c);const u=t.getSeries().length;this.Rx=Ji(this._t.areaSeriesBipolarHighFillStyle,u),this.Xx=Ji(this._t.areaSeriesBipolarHighStrokeStyle,u),this.zx=Ji(this._t.areaSeriesBipolarLowFillStyle,u),this.Wx=Ji(this._t.areaSeriesBipolarLowStrokeStyle,u)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=bu(e,this.Ob,Ha(i)?this.Tx:this.kx);if(void 0!==h&&void 0!==h[0]){const t=ot(h[0][0],this.Ys.St.ot,this.scale),i=ot(h[0][1],this.Ys.St.ot,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY,multiHit:[t,i]}}}hM(t){return this.nM(t)}sM(t,i){return this.Ux(t,i)}nM(t){let i=0;const s=[],e=t.length,h=this.eM;return e>0&&(this.oM&&(this.oM.y<=h&&h<=t[0].y||this.oM.y>=h&&h>=t[0].y)&&(s[i]=o(.5*(this.oM.x+t[0].x),h,h),i+=1),this.oM=t[e-1],1===e?this.aM(t[0],s,i):this.lM(t,s)),s}aM(t,i,s=0){return i[s]=o(t.x,t.y,this.eM),s+1}lM(t,i){let s=0,e=0;const h=t.length-1,r=this.eM;for(;e<h;){const h=t[e],n=t[e+=1],a=o(h.x,h.y,r);if(0!==s&&_i(i[s-1],a)||(i[s]=a,s+=1),h.y<=r&&r<=n.y||h.y>=r&&r>=n.y){const t=h.y,e=n.y,a=r,l=t===e?n.x:Ue(h.x,n.x,(a-t)/(e-t));i[s]=o(l,r,r),s+=1}i[s]=o(n.x,n.y,r),s+=1}return s}rM(t){const i=t.length,s=Array(i),e=Array(i),h=this.eM;for(let n=0;n<i;n+=1){const i=t[n];i.high>h?(s[n]=r(i.position,i.high),e[n]=r(i.position,h)):i.high<h?(s[n]=r(i.position,h),e[n]=r(i.position,i.high)):(s[n]=r(i.position,i.high),e[n]=r(i.position,i.high))}return[s,e]}Zb(){return tu(this.Ob,(t=>t[0]))}setPositiveFillStyle(t){return this.jx(t),this}setNegativeFillStyle(t){return this.Zx(t),this}setPositiveStrokeStyle(t){return this.Jx(t),this}setNegativeStrokeStyle(t){return this.Kx(t),this}getPositiveFillStyle(){return this.Qx()}getNegativeFillStyle(){return this.lc()}getPositiveStrokeStyle(){return this.qx()}getNegativeStrokeStyle(){return this.tM()}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Rx,fill2:this.zx,behavior:{colorStep:!0}})}}class _u extends Mu{constructor(){super(...arguments),this.Wx=Wt}sM(t){return this.$x(t)}rM(t){const i=t.length,s=Array(i);for(let e=0;e<i;e+=1){const i=t[e];s[e]=r(i.position,i.high)}return[s,[]]}setStrokeStyle(t){return this.Jx(t),this}getStrokeStyle(){return this.qx()}}class Cu extends _u{constructor(t,i,s,e,h,r,n,o,a,l,c){super(t,i,s,e,h,r,n,o,a,l,c);const u=t.getSeries().length;this.Rx=V,this.zx=Ji(this._t.areaSeriesNegativeFillStyle,u),this.Xx=Ji(this._t.areaSeriesNegativeStrokeStyle,u)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=bu(e,this.Ob,Ha(i)?this.Tx:this.kx);if(void 0!==h&&void 0!==h[0]){const t=ot(h[0][0],this.Ys.St.ot,this.scale),i=ot(h[0][1],this.Ys.St.ot,this.scale),s=t.y<i.y?t:i;return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.axisX,y:this.axisY}},...s,series:this,axisX:this.axisX,axisY:this.axisY}}}hM(t){return this.cM(t)}cM(t){const i=[];return 1===t.length?this.aM(t[0],i):this.lM(t,i),i}aM(t,i,s=0){const e=this.eM;return i[s]=t.y>e?o(t.x,e,e):o(t.x,t.y,e),s+1}lM(t,i,s=0){let e=0;const h=t.length-1,n=this.eM;for(;e<h;){const h=t[e],a=t[e+=1];if(h.y<=n){const t=o(h.x,h.y,n);if(0!==s&&_i(i[s-1],t)||(i[s]=t,s+=1),a.y>n){const t=re(r(xs,n),r(bs,n),h,a);t&&(i[s]=o(t.x,t.y,n),s+=1),i[s]=o(a.x,n,n),s+=1}else i[s]=o(a.x,a.y,n),s+=1}else{const t=o(h.x,n,n);if(0!==s&&_i(i[s-1],t)||(i[s]=t,s+=1),a.y<=n){const t=re(r(xs,n),r(bs,n),h,a);t&&(i[s]=o(t.x,t.y,n),s+=1),i[s]=o(a.x,a.y,n),s+=1}else i[s]=o(a.x,n,n),s+=1}}return s}Zb(){return tu(this.Ob,(t=>t[1]))}setFillStyle(t){return this.Zx(t),this}getFillStyle(){return this.lc()}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.zx,stroke:this.Xx})}}class ku extends _u{constructor(t,i,s,e,h,r,n,o,a,l,c,u){super(t,i,s,e,h,r,n,o,a,l,c);const d=u;this.Rx=Ji(this._t.areaSeriesPositiveFillStyle,d),this.zx=V,this.Xx=Ji(this._t.areaSeriesPositiveStrokeStyle,d)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=bu(e,this.Ob,Ha(i)?this.Tx:this.kx);if(void 0!==h&&void 0!==h[0]){const t=ot(h[0][0],this.Ys.St.ot,this.scale),i=ot(h[0][1],this.Ys.St.ot,this.scale),s=t.y<i.y?i:t;return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.axisX,y:this.axisY}},...s,series:this,axisX:this.axisX,axisY:this.axisY}}}hM(t){return this.uM(t)}uM(t){const i=[];return 1===t.length?this.aM(t[0],i):this.lM(t,i),i}aM(t,i,s=0){const e=this.eM;return i[s]=t.y<e?o(t.x,e,e):o(t.x,t.y,e),s+1}lM(t,i,s=0){let e=0;const h=t.length-1,n=this.eM;for(;e<h;){const h=t[e],a=t[e+=1];if(h.y>=n){const t=o(h.x,h.y,n);if(0!==s&&_i(i[s-1],t)||(i[s]=t,s+=1),a.y<n){const t=re(r(xs,n),r(bs,n),h,a);t&&(i[s]=o(t.x,t.y,n),s+=1),i[s]=o(a.x,n,n),s+=1}else i[s]=o(a.x,a.y,n),s+=1}else{const t=o(h.x,n,n);if(0!==s&&_i(i[s-1],t)||(i[s]=t,s+=1),a.y>=n){const t=re(r(xs,n),r(bs,n),h,a);t&&(i[s]=o(t.x,t.y,n),s+=1),i[s]=o(a.x,a.y,n),s+=1}else i[s]=o(a.x,n,n),s+=1}}return s}Zb(){return tu(this.Ob,(t=>t[0]||[]))}setFillStyle(t){return this.jx(t),this}getFillStyle(){return this.Qx()}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Rx,stroke:this.Xx})}}const Tu={Positive:ku,Negative:Cu,Bipolar:wu};class Fu extends xu{constructor(t,i,s,e,h,r,n,o,a,l,c){super(t,i,s,e,h,r,n,o,a,l),this.D=new zt,this.chart.St.Zo(Gr.Zn);const u=c;this.Rx=Ji(this._t.areaRangeSeriesFillStyle,u),this.Xx=Ji(this._t.areaRangeSeriesStrokeStyle,u),this.zx=Ji(this._t.areaRangeSeriesFillStyleInverted,u),this.Wx=Ji(this._t.areaRangeSeriesStrokeStyleInverted,u)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=bu(e,this.Ob,Ha(i)?this.Tx:this.kx);if(void 0!==h&&void 0!==h[0]){const t=ot(h[0][0],this.Ys.St.ot,this.scale),i=ot(h[0][1],this.Ys.St.ot,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY,multiHit:[t,i]}}}add(t){const i=Array.isArray(t)?t:[t],[s,e]=l(i);this.Vx(t,s,e);const h=this.Xc[this.Xc.length-1];return this.Yb=h?{position:h.position,high:h.high,low:h.low}:void 0,this.D.R("dataadd",{data:i,boundaries:this.Hb}),this}addArraysHighLow(t,i,s=1,e=0){if(t.length!==i.length)throw new Error("arrayHigh and arrayLow lengths are not equal");{let h=e;h||(h=this.Yb?this.Yb.position+s:0),this.add(((t,i,s=1,e)=>{const h=void 0!==e?e:0,r=new Array(t.length);for(let e=0;e<t.length;e+=1)r[e]={position:h+s*e,high:t[e],low:i[e]};return r})(t,i,s,h))}return this}sM(t,i){this.Ux(t,i)}setHighFillStyle(t){return this.jx(t),this}setLowFillStyle(t){return this.Zx(t),this}setHighStrokeStyle(t){return this.Jx(t),this}setLowStrokeStyle(t){return this.Kx(t),this}getHighFillStyle(){return this.Qx()}getLowFillStyle(){return this.lc()}getHighStrokeStyle(){return this.qx()}getLowStrokeStyle(){return this.tM()}Zb(){return tu(this.Ob,(t=>{const i=t[0],s=t[1];if(!i||!s)return[];const e=[],h=i.length;for(let t=0;t<h;t+=1)e[t]={position:i[t].x,high:i[t].y,low:s[t].y};return e}))}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Rx,fill2:this.zx,behavior:{colorStep:!0}})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}var Iu;!function(t){t[t.before=0]="before",t[t.middle=.5]="middle",t[t.after=1]="after"}(Iu||(Iu={}));const Pu=(t,i)=>{const s=[],e=t.length,h=i;if(e>0){let i=0,n=t[0];s[i]=n,i+=1;for(let o=1;o<e;o+=1){const e=t[o];if(h<=0)s[i]=r(n.x,e.y),i+=1;else{const t=n.x*(1-h)+e.x*h;s[i]=r(t,n.y),i+=1,s[i]=r(t,e.y),i+=1}s[i]=e,i+=1,n=e}}return s},Lu=(t,i)=>{const s=t*t,e=s*t,h=1-t,n=h*h,o=n*h;return r(o*i[0].x+3*t*n*i[1].x+3*s*h*i[2].x+e*i[3].x,o*i[0].y+3*t*n*i[1].y+3*s*h*i[2].y+e*i[3].y)},Bu=(t,i=32)=>{if(2===t.length)return[t[0],t[1]];const s=(t=>{const i=1e-5,s=t.length-1,e=Array(s);if(s>1){let h=r(0,0),n=r(0,0),o=r(0,0),a=Ys(Zs(t[1],t[0]));const l=3;let c=0,u=0;for(let d=0;d<s;d+=1){const f=Array(4);if(f[0]=t[d],f[1]=t[d],f[3]=t[d+1],f[2]=t[d+1],o=a,h=n,d+1<s?(a=t[d+2]===t[d+1]?r(0,0):Ys(Zs(t[d+2],t[d+1])),n=Ys(js(o,a))):n=r(0,0),t[d+1].y===t[d].y)c=0,u=0;else{const s=t[d+1].x-t[d].x;c=Math.abs(h.x)>i?Math.abs(s/(l*h.x)):1,u=Math.abs(n.x)>i?Math.abs(s/(l*n.x)):1}f[1]=js(Ws(h,c),f[1]),f[2]=Zs(f[2],Ws(n,u)),e[d]=f}}return e.length>0?e:[]})(t),e=s.length,h=Array(e*i);let n=0;for(let t=0;t<e;t+=1)for(let e=0;e<=i;e+=1)h[n]=Lu(e/i,s[t]),n+=1;return h};class Du extends eu{constructor(t,i,s,e,h,n,o,a,l,u,d,f,A,g,v){super(t,i,s,e,h,n,o,a,l,d,f),this.Ob=[],this.Wb=1e5,this.eb=5,this.Ga=0,this.yl=!1,this.pl=!1,this.ml=!1,this.dM=1,this.fM=[],this.AM=(t,i)=>{const s=t.Ru(i);if(s)return ot(s,this.scale,this.Ys.St.ot)},this.gM=(t,i)=>{const s=t.Fx(i);if(s)return ot(s,this.scale,this.Ys.St.ot)},this.vM=t=>{if(this.Ob.length>0){const i=this.Ob[this.Ob.length-1];if(t.length>0){const s=i.Tl(),e=i.kl(),h=s.length+e.length-+i.uc();if(h>=this.Wb){const n=e.length>0?e[e.length-1]:s[i.uc()?h:h-1],o=r((n.x+t[0].x)/2,(n.y+t[0].y)/2);i.Dl(o,c(r(o.x,o.y),r(o.x,o.y))).dc(!0),this.yM([o].concat(t)).cc(!0)}else i.Dl(t,this.Hb)}}else t.length>0&&this.yM(t)},this.pM=t=>{if(this.fM.length>0){const i=this.fM[this.fM.length-1];t.length>0&&((i.Tl().length+i.kl().length)*this.dM>=this.Wb?this.mM(t):i.Dl(t))}else t.length>0&&this.mM(t)},this.Ko=v,this.hb=u,this.SM=A,this.bM=Ji(d.pointLineSeriesFillStyle,g),this.Oc=Ji(this._t.pointLineSeriesStrokeStyle,g)}add(t){return super.add(t),this}Zb(){return tu(this.fM)}setStrokeStyle(t){this.Oc="function"==typeof t?t(this.Oc):t;const i=this.Oc;for(let t=0;t<this.Ob.length;t+=1)this.Ob[t].Ne(i);return this.Ys.Ls(),this}getStrokeStyle(){return this.Oc}setPointFillStyle(t){this.bM="function"==typeof t?t(this.bM):t;const i=this.bM;for(let t=0;t<this.fM.length;t+=1)this.fM[t].Ie(i);return this.Ys.Ls(),this}getPointFillStyle(){return this.bM}setPointSize(t){this.eb=t;for(let i=0;i<this.fM.length;i+=1)this.fM[i].Z(t);return this.Ys.Ls(),this}getPointSize(){return this.eb}getPointShape(){return this.hb}setPointRotation(t){this.Ga=t;for(let i=0;i<this.fM.length;i+=1)this.fM[i].Wh(t);return this.Ys.Ls(),this}getPointRotation(){return this.Ga}setIndividualPointSizeEnabled(t){this.yl=t,t&&this.chart.St.Zo(Gr.io);for(let i=0;i<this.fM.length;i+=1)this.fM[i].Pl(t);return this.Ys.Ls(),this}getIndividualPointSizeEnabled(){return this.yl}setIndividualPointRotationEnabled(t){this.pl=t;for(let i=0;i<this.fM.length;i+=1)this.fM[i].Ll(t);return this.Ys.Ls(),this}getIndividualPointRotationEnabled(){return this.pl}setIndividualPointValueEnabled(t){this.ml=t;for(let i=0;i<this.fM.length;i+=1)this.fM[i].Bl(t);return this.Ys.Ls(),this}getIndividualPointValueEnabled(){return this.ml}setVisible(t){return super.setVisible(t),this.fM.forEach((i=>i.setVisible(t))),this}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY};if(0===this.Ob.length)return;const h=this.Ob[0].Ct()||Ct.NearestX,r=Ha(i)?hu(e,this.Ob,this.gM,h===Ct.NearestX?(t,i)=>Math.abs(t.x-i.x):h===Ct.NearestY?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2):hu(e,this.fM,this.AM,h===Ct.NearestX?(t,i)=>Math.abs(t.x-i.x):h===Ct.NearestY?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==r){const t=ot(r[0],this.Ys.St.ot,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}Gs(){return ji(this.bM,void 0)||ji(this.Oc.getFillStyle(),void 0)}$s(){return this.Ds||this.hb}Mb(t){}De(t,i){t.Bt(i),this.Ys.Ls()}jb(t){const i=this.Ob.length>0?this.Ob[this.Ob.length-1].Tl().length+this.Ob[this.Ob.length-1].kl().length-+this.Ob[this.Ob.length-1].uc():void 0;qc(t,i,this.Wb,this.vM),qc(t,i,this.Wb,this.pM)}mM(t,i){const s=this.Ys.wy(this.scale).Dl(t,i).Ie(this.bM).Fl(this.hb).Z(this.eb).Wh(this.Ga).Pl(this.yl).Ll(this.pl).Bl(this.ml).Bt(this.getHighlight());return this.ws(s),this.fM.push(s),s}yM(t,i){const s=this.Ys.tv(this.scale,void 0,[Cl.UserSeries,...this.SM]).Dl(t,i).Ne(this.Oc).Bt(this.getHighlight());return this.ws(s),this.Ob.push(s),s}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{stroke:this.Oc,fill:this.bM})}getPointAmount(){return this.fM.reduce(((t,i)=>t+i.El()+i.Rl()),this.Xc.length)}clear(){super.clear();for(let t=0;t<this.Ob.length;t+=1)this.Ob[t].dispose();this.Ob.length=0;for(let t=0;t<this.fM.length;t+=1)this.fM[t].dispose();return this.fM.length=0,this}Xb(t,i,s,e){super.Xb(t,i,s,e),this.$b.Xb(this.fM,i,s,e,this.scale,(t=>{}))}}const Eu=32,Ru=(t,i)=>t.kl().length>=i?t.kl().slice(-i):Array.prototype.concat(t.Tl(),t.kl()).slice(-i),zu=(t,i,s)=>{const e=Array.prototype.concat(t.Tl(),t.kl()).slice(0,-s-1).concat(i.slice(s+1,2*s+2));t.ti().Dl(e).hr()};class Vu extends Du{constructor(t,i,s,e,h,r,n,o,a,l,c,u,d,f,A){super(t,i,s,e,h,r,n,o,a,l,c,u,d,f,A),this.dM=Eu,this.Wb=8e3,this.xM=t=>{if(0===t.length)return;const i=this.fM.length;if(i>0){const s=i>1,e=this.fM[i-1];if(s){const s=Array.prototype.concat(e.Tl(),e.kl()),h=s.length;if(h*Eu>=this.Wb){const s=Ru(e,3),h=Array.prototype.concat(s,t),r=Bu(h,Eu);zu(this.Ob[i-1],r,Eu),this.yM(r.slice(66))}else if(h<5){const e=this.fM[i-2],h=Ru(e,3),r=Array.prototype.concat(h,s,t),n=Bu(r,Eu),o=this.Ob[i-1],a=n.slice(66);o.ti().Dl(a).hr()}else{const s=this.Ob[i-1],h=Array.prototype.concat(s.Tl(),s.kl()),r=Ru(e,4),n=Array.prototype.concat(r,t),o=Bu(n,Eu),a=h.slice(0,-66).concat(o.slice(33));s.ti().Dl(a).hr()}}else{const s=Array.prototype.concat(e.Tl(),e.kl()),h=s.length,r=this.Ob[i-1];if(h*Eu>=this.Wb){const i=Ru(e,3),s=Array.prototype.concat(i,t),h=Bu(s,Eu);zu(this.Ob[0],h,Eu),this.yM(h.slice(66))}else if(h+t.length>1){const i=Array.prototype.concat(s,t),e=Bu(i,Eu);r.ti().Dl(e).hr()}else r.Dl(t)}}else{const i=t.length>0?Bu(t,Eu):t,s=zs(i);this.yM(i,s)}this.pM(t)}}jb(t){const i=this.fM.length,s=this.fM.length>0?this.fM[i-1].Tl().length+this.fM[i-1].kl().length:void 0;qc(t,s,Math.ceil(this.Wb/this.dM),this.xM)}}class Ou{constructor(){this.es="FreeformPattern",this.Jl={type:"disabled",packager:(t,i,s)=>t.slice()}}Xb(t,i,s,e,h,r){if(e>0){const h=Math.trunc((i-e)/s);if(h>0&&t.length>1){const i=t.splice(0,h);for(let t=0;t<i.length;t+=1)r(i[t]),i[t].dispose()}}}MM(t,i){const s=t.x-i.x,e=t.y-i.y;return Math.sqrt(s*s+e*e)}getXMax(t=[],i){return wi(t,yi,Math.max,bi,i)}getXMin(t=[],i){return wi(t,vi,Math.min,Si,i)}getYMax(t=[],i){return wi(t,mi,Math.max,Mi,i)}getYMin(t=[],i){return wi(t,pi,Math.min,xi,i)}}const Nu=t=>{switch(t){case"normal":default:return 1;case"high":return.25}},Gu=i({Jl:{type:"disabled",packager:(t,i,s)=>t.slice()}});class $u extends Gu{Xb(t,i,s,e,h,r){if(e>0){const i=Math.ceil(e/s),n=t.length-i;if(n>0){const i=this.Nx(t,h);if(i>0){const s=n-i>0?i:n;if(s>0){for(let i=0;i<s;i+=1)r(t[i]),t[i].dispose();t.splice(0,s)}}}}}}const Uu=(t,i)=>{const s=i.Zt();return t?Math.min(s,t):s},Yu=(t,i)=>{const s=i.Qt();return t?Math.max(s,t):s};class Hu extends $u{MM(t,i){return Math.abs(t.x-i.x)}getYMax(t=[],i){return t.reduce(Yu,i?i.max.y:void 0)}getYMin(t=[],i){return t.reduce(Uu,i?i.min.y:void 0)}}const Xu=(t,i)=>{const s=i.Wt();return t?Math.min(s,t):s},Wu=(t,i)=>{const s=i.jt();return t?Math.max(s,t):s};class ju extends $u{MM(t,i){return Math.abs(t.y-i.y)}getXMax(t=[],i){return t.reduce(Wu,i?i.max.x:void 0)}getXMin(t=[],i){return t.reduce(Xu,i?i.min.x:void 0)}}const Zu={horizontalProgressive:new class extends Hu{constructor(){super({Jl:an()}),this.es="HorizontalProgressivePattern"}Nx(t,i){const s=t.length,e=Math.min(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.x.Pi(t[r].jt(),t[r].Wl())<e&&(h+=1);return h}getXMax(t=[],i){return void 0!==i?i?i.max.x:void 0:t.length>0?t[t.length-1].jt():void 0}getXMin(t=[],i){return t.length>0&&t[0].El()>0?t[0].Wt():i?i.min.x:void 0}setPrecision(t){return this.set("_columnPackaging",an(Nu(t)))}},horizontalRegressive:new class extends Hu{constructor(){super({Jl:ln()}),this.es="HorizontalRegressivePattern"}Nx(t,i){const s=t.length,e=Math.max(i.x.getInnerStart(),i.x.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.x.Pi(t[r].Wt(),-t[r].Wl())&&(h+=1);return h}getXMax(t=[],i){return t.length>0&&t[0].El()>0?t[0].jt():i?i.max.x:void 0}getXMin(t=[],i){return void 0!==i?i?i.min.x:void 0:t.length>0?t[t.length-1].Wt():void 0}setPrecision(t){return this.set("_columnPackaging",ln(Nu(t)))}},verticalProgressive:new class extends ju{constructor(){super({Jl:cn()}),this.es="VerticalProgressivePattern"}Nx(t,i){const s=t.length,e=Math.min(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)i.y.Pi(t[r].Qt(),t[r].jl())<e&&(h+=1);return h}getYMax(t=[],i){return void 0!==i?i?i.max.y:void 0:t.length>0?t[t.length-1].Qt():void 0}getYMin(t=[],i){return t.length>0&&t[0].El()>0?t[0].Zt():i?i.min.y:void 0}setPrecision(t){return this.set("_columnPackaging",cn(Nu(t)))}},verticalRegressive:new class extends ju{constructor(){super({Jl:un()}),this.es="VerticalRegressivePattern"}Nx(t,i){const s=t.length,e=Math.max(i.y.getInnerStart(),i.y.getInnerEnd());let h=0;if(s>1)for(let r=0;r<s-1;r+=1)e<i.y.Pi(t[r].Zt(),-t[r].jl())&&(h+=1);return h}getYMax(t=[],i){return t.length>0&&t[0].El()>0?t[0].Qt():i?i.max.y:void 0}getYMin(t=[],i){return void 0!==i?i?i.min.y:void 0:t.length>0?t[t.length-1].Zt():void 0}setPrecision(t){return this.set("_columnPackaging",un(Nu(t)))}},freeform:new Ou};class Qu extends Du{constructor(t,i,s,e,h,n,o,a,l,u,d,f,A,g,v){super(t,i,s,e,h,n,o,a,Zu.horizontalProgressive,l,d,f,A,g,v),this.vM=t=>{const i=this.Ob.length>0?this.Ob[this.Ob.length-1].Tl().length+this.Ob[this.Ob.length-1].kl().length:void 0;qc(t,i,this.Wb,this.wM)},this.wM=t=>{const i=t.length;if(this.Ob.length>0){const s=this.Ob[this.Ob.length-1];if(i>0){const i=s.Tl(),e=s.kl(),h=e.length>0?e[e.length-1]:i[i.length-1],n=Pu([h].concat(t),this._M);n.shift();const o=r((h.x+n[0].x)/2,(h.y+n[0].y)/2),a=Array.prototype.concat(o,n);(e.length>0?i.length+e.length:i.length)>=this.Wb?(s.Dl(o,c(r(o.x,o.y),r(o.x,o.y))).dc(!0),this.yM(a).cc(!0),this.mM(t)):s.Dl(a)}}else i>0&&this.yM(Pu(t,this._M));this.pM(t)},this._M=u,void 0===this.SM.find((t=>"DataPattern"===t.type))&&this.SM.push({type:"DataPattern",args:{pattern:"ProgressiveX"}})}}class Ju extends Kc{constructor(t,i,s,e,h,r,o,a,l,u){super(t,i,s,e,h,r,o,a,l,u),this.CM=t=>t[4]>=t[1],this.Pb=c(n(bs,bs),n(xs,xs)),this.kM=[],this.TM=!1,this.FM=-1,this.IM=[],this.PM=!0,this.LM=!1,this.BM=4,this.DM=[1e-7,1e-6,1e-5,1e-4,.001,.01,.1,1,5,10,30,60,300,600,1800,3600,7200,14400,28800,36e3,43200,50400,57600,64800,72e3,86400,172800,259200,345600,432e3,604800,1209600,2592e3,7776e3,10368e3,15552e3,31536e3,15768e4,31536e4,63072e4,7884e5,15768e5,31536e5,3942e6,47304e5,63072e5,7884e6,15768e6,31536e6,3942e7,47304e6,63072e6,7884e7,15768e7,31536e7,63072e7,7884e8,15768e8,31536e8,47304e8,63072e8],this.D=new zt,this.chart.St.Zo(Gr.On)}yy(){return this.IM.length>0}Ms(){return"ProgressiveX"}Zb(){return this.IM}Qv(){return this.qv&&this.IM.length>0&&this.getVisible()}EM(t){if(!(this.IM.length<1))return[this.IM[t][0],this.IM[t][1],this.IM[t][2],this.IM[t][3],this.IM[t][4]]}solveNearest(t,i){if(0===this.IM.length)return;const s=this.chart.translateCoordinate(t,{x:this.axisX,y:this.axisY}).x,e=void 0!==this.getPackDataState();let h,n,o,a,l;if(e){const t=this.RM;if(!t)return;const i=ls(s,t.length-1,(i=>t[i][0])),e=void 0!==i&&t[i];if(!e)return;a=e[3],o=e[2],n=e[1],l=e[4],h=e[0]}else{const t=ls(s,this.IM.length-1,(t=>this.IM[t][0])),i=void 0!==t&&this.IM[t];if(!i)return;h=i[0],n=i[1],o=i[2],a=i[3],l=i[4]}return{cursorPosition:{resultTable:r(h,l),resultTableScale:this.scale,pointMarker:r(h,l),pointMarkerScale:{x:this.axisX,y:this.axisY}},x:h,y:l,open:n,high:o,low:a,close:l,position:h,isPacked:e,series:this,axisX:this.axisX,axisY:this.axisY}}Kt(t,i){return As({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,open:0,high:0,low:0,close:0,position:0,isPacked:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}Mb(t){if(!(t.x instanceof pe))throw new Error("OHLCSeries must be attached to a Linear X Axis.");this.zM=t.x}Dr(){return r(5,5)}Cx(t){const i=t.length-1;if(i<0)return this;for(let s=0;s<=i;s+=1)t[s][3]<this.Pb.min.y&&(this.Pb.min.y=t[s][3]),this.Pb.max.y<t[s][2]&&(this.Pb.max.y=t[s][2]);return this.Pb.min.x=Math.min(this.Pb.min.x,t[0][0]),this.Pb.max.x=Math.max(this.Pb.max.x,t[i][0]),this}Cb(){return this.Pb.max.x}kb(){return this.Pb.min.x}Tb(){return this.Pb.max.y}Fb(){return this.Pb.min.y}add(t){this.IM.length>0&&this.chart.St.Zo(Gr.qn);const i=Array.isArray(t[0])?t:[t[0]];if(i.length>0){this.TM=!0;const t=this.IM.length,s=this.kM.length,e=i.length;this.IM.length=t+e,this.kM.length=s+e;for(let h=0;h<e;h+=1)this.IM[t+h]=i[h],this.kM[s+h]=this.IM[t+h];this.Cx(i),this.D.R("dataadd",{data:i}),this.Ys.Ls()}return this}setPackData(t){return t!==this.PM&&(this.LM=!0,this.PM=t,this.chart.St.Ls()),this}getPackData(){return this.PM}getPackDataState(){const t=this.FM;if(!(t<0||void 0===this.RM||this.RM.length===this.IM.length))return{figureAxisInterval:t}}setFigureWidth(t){return this.VM=t,this.chart.St.Ls(),this}getFigureWidth(){return this.VM}setFigureMinimumGap(t){return this.BM=t,this.chart.St.Ls(),this}getFigureMinimumGap(){return this.BM}clear(){return this.IM=[],this.kM=[],this.RM=void 0,this.OM(),this.Pb.min.x=bs,this.Pb.min.y=bs,this.Pb.max.x=xs,this.Pb.max.y=xs,this.D.R("dataclear",{}),this}NM(t){return this.zM.getPixelSize()*t/1e3}GM(){const t=this.DM.length-1,i=this.NM(this.VM+this.BM);let s=ls(i,t,(t=>this.DM[t]));return void 0===s?s=i<this.DM[0]?0:this.DM[t]<i?t:this.DM.length/2:this.DM[s]<i&&(s+=1),this.DM.length<=s&&(s=t),1e3*this.DM[s]}Le(){if(super.Le(),!this.PM){this.RM=void 0;let t=null;if(this.LM?(this.LM=!1,t=this.IM,this.OM()):t=this.kM,t.length>=1){for(let i=0;i<t.length;i+=1){const s=t[i],e=s[0];this.CM(s)?this.$M(e,s):this.UM(e,s)}this.kM.length=0,this.TM=!1,this.FM=-1}}}vv(){super.vv();const t=this.GM();if(this.PM&&this.IM.length>=1&&(t!==this.FM||this.TM||this.LM)){this.LM=!1,this.FM=t,this.TM=!1,this.OM(),this.RM=[];const i=this.IM.length;let s=this.IM[0][0]-this.IM[0][0]%(t/2)+t,e=0;for(;e<i;){let h=this.EM(e);if(void 0===h)break;let r=h[3],n=h[2];const o=e;for(e+=1;e<i&&this.IM[e][0]<s;)h=this.IM[e],this.IM[e][3]<r&&(r=this.IM[e][3]),n<this.IM[e][2]&&(n=this.IM[e][2]),e+=1;const a=e-1;let l=h[0];o<a&&(l=this.IM[a][0],h=[l,this.IM[o][1],n,r,this.IM[a][4]]),h[1]<h[4]?this.$M(l,h):this.UM(l,h),this.RM.push(h),s+=t}}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Ku extends Ju{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.YM=1175494351e-14,this.VM=this._t.ohlcCandleThicknessPixels||5,this.HM=this._t.ohlcCandleTailStrokeStylePositive,this.XM=this._t.ohlcCandleTailStrokeStyleNegative,this.WM=this._t.ohlcCandleBodyFillStylePositive,this.jM=this._t.ohlcCandleBodyFillStyleNegative,this.ZM=s.Gf(this.scale).Ne(new vh({thickness:this.VM,fillStyle:this.WM})),this.ZM.Yc={x:0,y:1},this.QM=s.Gf(this.scale).Ne(new vh({thickness:this.VM,fillStyle:this.jM})),this.QM.Yc={x:0,y:-1},this.JM=s.Gf(this.scale).Ne(this.HM),this.KM=s.Gf(this.scale).Ne(this.XM),this.ws(this.ZM),this.ws(this.QM),this.ws(this.JM),this.ws(this.KM)}setBodyThickness(t){return this.VM=t,this.ZM.Ne(new vh({thickness:this.VM,fillStyle:this.WM})),this.QM.Ne(new vh({thickness:this.VM,fillStyle:this.jM})),this.chart.St.Ls(),this}getBodyThickness(){return this.VM}setBodyFillStylePositive(t){return this.WM="function"==typeof t?t(this.WM):t,this.ZM.Ne(new vh({thickness:this.VM,fillStyle:this.WM})),this.chart.St.Ls(),this}getBodyFillStylePositive(){return this.WM}setBodyFillStyleNegative(t){return this.jM="function"==typeof t?t(this.jM):t,this.QM.Ne(new vh({thickness:this.VM,fillStyle:this.jM})),this.chart.St.Ls(),this}getBodyFillStyleNegative(){return this.jM}setTailStrokeStylePositive(t){return this.HM="function"==typeof t?t(this.HM):t,this.JM.Ne(this.HM),this.chart.St.Ls(),this}getTailStrokeStylePositive(){return this.HM}setTailStrokeStyleNegative(t){return this.XM="function"==typeof t?t(this.XM):t,this.KM.Ne(this.XM),this.chart.St.Ls(),this}getTailStrokeStyleNegative(){return this.XM}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.WM,fill2:this.jM,behavior:{colorStep:!0}})}OM(){return this.JM.ti(),this.KM.ti(),this.ZM.ti(),this.QM.ti(),this}$M(t,i){return Math.abs(i[1]-i[4])<this.YM?this.ZM.lo().Uf({x:t,y:i[1]-this.YM},{x:t,y:i[1]+this.YM}):this.ZM.lo().Uf({x:t,y:i[1]},{x:t,y:i[4]}),i[4]<i[2]&&this.JM.lo().Uf({x:t,y:i[4]},{x:t,y:i[2]}),i[3]<i[1]&&this.JM.lo().Uf({x:t,y:i[3]},{x:t,y:i[1]}),this}UM(t,i){return Math.abs(i[1]-i[4])<this.YM?this.QM.lo().Uf({x:t,y:i[1]-this.YM},{x:t,y:i[1]+this.YM}):this.QM.lo().Uf({x:t,y:i[1]},{x:t,y:i[4]}),i[3]<i[4]&&this.KM.lo().Uf({x:t,y:i[3]},{x:t,y:i[4]}),i[1]<i[2]&&this.KM.lo().Uf({x:t,y:i[1]},{x:t,y:i[2]}),this}}class qu extends Ju{constructor(t,i,s,e,h,r,n,o,a,l){super(t,i,s,e,h,r,n,o,a,l),this.VM=this._t.ohlcBarThicknessPixels||10,this.qM=this._t.ohlcBarStrokeStylePositive,this.tw=this._t.ohlcBarStrokeStyleNegative,this.iw=s.Gf(this.scale).Ne(this.qM),this.ws(this.iw),this.sw=s.Gf(this.scale).Ne(this.qM),this.sw.Yc={x:-this.VM/2,y:0},this.ws(this.sw),this.ew=s.Gf(this.scale).Ne(this.qM),this.ew.Yc={x:this.VM/2,y:0},this.ws(this.ew),this.hw=s.Gf(this.scale).Ne(this.tw),this.ws(this.hw),this.rw=s.Gf(this.scale).Ne(this.tw),this.rw.Yc={x:-this.VM/2,y:0},this.ws(this.rw),this.nw=s.Gf(this.scale).Ne(this.tw),this.nw.Yc={x:this.VM/2,y:0},this.ws(this.nw)}setStrokeStylePositive(t){return this.qM="function"==typeof t?t(this.qM):t,this.iw.Ne(this.qM),this.sw.Ne(this.qM),this.ew.Ne(this.qM),this.chart.St.Ls(),this}getStrokeStylePositive(){return this.qM}setStrokeStyleNegative(t){return this.tw="function"==typeof t?t(this.tw):t,this.hw.Ne(this.tw),this.rw.Ne(this.tw),this.nw.Ne(this.tw),this.chart.St.Ls(),this}getStrokeStyleNegative(){return this.tw}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.qM.getFillStyle(),fill2:this.tw.getFillStyle(),behavior:{colorStep:!0}})}setFigureWidth(t){return super.setFigureWidth(t),this.sw.Yc={x:-t/2,y:0},this.rw.Yc={x:-t/2,y:0},this.ew.Yc={x:t/2,y:0},this.nw.Yc={x:t/2,y:0},this}OM(){return this.hw.ti(),this.iw.ti(),this.rw.ti(),this.sw.ti(),this.nw.ti(),this.ew.ti(),this}$M(t,i){return this.iw.lo().Uf({x:t,y:i[3]},{x:t,y:i[2]}),this.sw.lo().Uf({x:t,y:i[1]},{x:t,y:i[1]}),this.ew.lo().Uf({x:t,y:i[4]},{x:t,y:i[4]}),this}UM(t,i){return this.hw.lo().Uf({x:t,y:i[3]},{x:t,y:i[2]}),this.rw.lo().Uf({x:t,y:i[1]},{x:t,y:i[1]}),this.nw.lo().Uf({x:t,y:i[4]},{x:t,y:i[4]}),this}}const td={Candlesticks:Ku,Bars:qu},id=t=>({defaultDragMouseStyle:tr.Horizontal,getTitleTextRotation:()=>0,...Ol(t,(t=>t.kb(!1)),(t=>t.Cb(!1)),(t=>t.Dr().x))}),sd=t=>({defaultDragMouseStyle:tr.Vertical,getTitleTextRotation:t=>90*t,...Ol(t,(t=>t.Fb(!1)),(t=>t.Tb(!1)),(t=>t.Dr().y))});class ed extends hl{constructor(t,i,s,e,h,r,n,o){super(t,i,s,e,h,o),this.ow=!1,this.aw=!1,this.lw=!1,this.cw=!1,this.uw=!1,this.dw=new Map,this.fw=new Map,this.Aw=[],this.gw=[],this.yw=!0,this.pw=!0,this.mw=!1,this.Sw=[],this.bw=new Set,this.xw=!1,this.eg=h,this.Mw=r,this.ww=n,this._w=o.cursorGridStrokeStyleX,this.Cw=o.cursorGridStrokeStyleY}setKeepWithinAxisBoundaries(t){return this.ow=t,this.Ys.Ls(),this}getKeepWithinAxisBoundaries(){return this.ow}dispose(){return super.dispose(),this.dw.forEach((t=>t.forEach((t=>t.dispose())))),this.fw.forEach((t=>t.forEach((t=>t.dispose())))),this.Aw.length=0,this.gw.length=0,this.ig.length=0,this}Le(){return this.mw&&this.setPosition(...this.Sw),this.Aw.forEach((t=>t.setVisible(this.ft&&this.sA).setMarkerVisible(this.ft&&this.sA&&this.yw))),this.gw.forEach((t=>t.setVisible(this.ft&&this.sA).setMarkerVisible(this.ft&&this.sA&&this.pw))),super.Le()}GA(){if(!this.ow)return super.GA();const t={x:!0,y:!0},i=this.NA,s=i.getPosition(r(-1,-1),ti.PaddedBackground),e=i.getPosition(r(1,1),ti.PaddedBackground);return this.Sw.forEach(((h,r)=>{const n=h.pointMarkerScale.x,o=h.pointMarkerScale.y,a=ot(s,i.scale,{x:n,y:o}),l=ot(e,i.scale,{x:n,y:o});Ls(a.x,n.zh,n.Vh)&&Ls(l.x,n.zh,n.Vh)&&(t.x=!1),Ls(a.y,o.zh,o.Vh)&&Ls(l.y,o.zh,o.Vh)&&(t.y=!1)})),t}setPosition(...t){if(t=t.filter((t=>!Number.isNaN(t.pointMarker.x)&&!Number.isNaN(t.pointMarker.y))),this.Sw=t,this.Aw.forEach((t=>t.setVisible(!1))),this.gw.forEach((t=>t.setVisible(!1))),this.Aw.length=0,this.gw.length=0,0===t.length)return this;const i=this.renderingScale,s=t[0].resultTable,e=za(t[0].resultTableScale,i),h=e===this.scale?s:ot(s,e,this.scale);this.NA.setPosition(h),this.sA=!1,this.KA.forEach((t=>{t.targetVisible=!1}));const n=new Map;return t.forEach(((t,s)=>{const e=t.pointMarkerScale.x,h=t.pointMarkerScale.y,o=n.get(e)||[],a=n.get(h)||[],l=!o.includes(t.pointMarker.x),c=!a.includes(t.pointMarker.y);o.push(t.pointMarker.x),a.push(t.pointMarker.y),n.set(e,o),n.set(h,a);const u=t.pointMarker,d=nd(r(u.x,u.y),e,h);if(l){const t=this.kw(e,!0);t.setValue(u.x),t.setGridStrokeLength(this.aw?d.x:1).setAllocatesAxisSpace(this.xw),this.Aw.push(t)}if(c){const t=this.kw(h,!1);t.setValue(u.y),t.setGridStrokeLength(this.lw?d.y:1).setAllocatesAxisSpace(this.xw),this.gw.push(t)}let f=this.KA[s];if(!f){const t=new eo(this.Ys,this.renderingScale,this.scale,ui,this._t).setPointerEvents(!1).setFillStyle(this._t.cursorPointMarkerFillStyle).setSize(this._t.cursorPointMarkerSize).setShape(this._t.cursorPointMarkerShape);f={pointMarker:t,targetVisible:!0},this.KA.push(f),this.ig.forEach((i=>i(t)))}const A=za(t.pointMarkerScale,i),g=A===this.scale?t.pointMarker:ot(t.pointMarker,A,this.scale);f.pointMarker.setPosition(g),f.targetVisible=!0;const v=e.getInterval(),y=h.getInterval(),p=Math.min(v.start,v.end),m=Math.max(v.start,v.end),S=Math.min(y.start,y.end),b=Math.max(y.start,y.end);u.x>=p&&u.x<=m&&u.y>=S&&u.y<=b&&(this.sA=!0)})),this}setTickMarkersAllocateAxisSpace(t){return this.xw=t,this.Ys.Ls(),this}getTickMarkersAllocateAxisSpace(){return this.xw}kw(t,i){this.bw.has(t)||(t.addEventListener("dispose",(()=>{var i;null===(i=s.get(t))||void 0===i||i.forEach((t=>t.dispose())),s.delete(t)})),this.bw.add(t));const s=i?this.dw:this.fw,e=i?this.Aw:this.gw,h=s.get(t)||[];s.set(t,h);let r=h.find((t=>!e.includes(t)));return r||(r=i?t.Zf(!1,this.Mw):t.Zf(!1,this.ww),h.push(r),this.pr(r,i),r.setPointerEvents(!1)),r}pr(t,i){const s=i?this._w:this.Cw;return t.setGridStrokeStyle(s),t.setPointerEvents(!1),(i?this.yw:this.pw)?t.setMarkerVisible(!0):t.setMarkerVisible(!1),t}setGridStrokeXCut(t){return this.aw=t,this.Ys.Ls(),this}getGridStrokeXCut(){return this.aw}setGridStrokeYCut(t){return this.lw=t,this.Ys.Ls(),this}getGridStrokeYCut(){return this.lw}setGridStrokeXStyle(t){return this._w=t instanceof Function?t(this.getGridStrokeXStyle()):t,this.dw.forEach((t=>t.forEach((t=>t.setGridStrokeStyle(this._w))))),this}getGridStrokeXStyle(){return this._w}setGridStrokeYStyle(t){return this.Cw=t instanceof Function?t(this.getGridStrokeYStyle()):t,this.fw.forEach((t=>t.forEach((t=>t.setGridStrokeStyle(this.Cw))))),this}getGridStrokeYStyle(){return this.Cw}setTickMarkerXVisible(t){return this.yw=t,this.Ys.Ls(),this}getTickMarkerXVisible(){return this.yw}setTickMarkerYVisible(t){return this.pw=t,this.Ys.Ls(),this}getTickMarkerYVisible(){return this.pw}setTickMarkerX(t){return this.dw.forEach((i=>i.forEach((i=>i.setMarker(t))))),this.Mw=this.Mw.addStyler(t),this.Ys.Ls(),this}setTickMarkerY(t){return this.fw.forEach((i=>i.forEach((i=>i.setMarker(t))))),this.ww=this.ww.addStyler(t),this.Ys.Ls(),this}}class hd{constructor(t,i,s,e){this.ng=[],this.og=(t,i)=>(this.ng.forEach((s=>s(t,i))),t),this.addStyler=t=>new hd(this.eg,this.Mw,this.ww,this.ng.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new hd(t,this.Mw,this.ww,this.ng.map((t=>t))),this.ag=(t,i,s,e,h)=>this.og(new ed(t,i,s,e,this.eg,this.Mw,this.ww,h),h),this.eg=t,this.ng=e,this.Mw=i,this.ww=s}}const rd=new hd(qn,Uo.PointableTextBox,Uo.PointableTextBox,[(t,i)=>{rl(t,i),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerXTextFont).setTextFillStyle(i.cursorTickMarkerXTextFillStyle),Vr(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(i.cursorTickMarkerYTextFont).setTextFillStyle(i.cursorTickMarkerYTextFillStyle),Vr(t)&&t.setBackground((t=>t.setFillStyle(i.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(i.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),nd=(t,i,s)=>{const e=i.ot,h=s.ot;let n=(t.x-e.getInnerStart())/(e.getInnerEnd()-e.getInnerStart()),o=(t.y-h.getInnerStart())/(h.getInnerEnd()-h.getInnerStart());return 1===s.yf&&(n=1-n),1===i.yf&&(o=1-o),r(o,n)};class od extends eu{constructor(t,i,s,e,h,r,n,o,a,l,c,u,d,f){super(t,i,s,e,h,r,n,o,a,l,c),this.Ob=[],this.WS=!0,this.Wb=void 0,this.Wc=void 0,this.Tw=(t,i)=>{const s=t.ib(i);if(s)return ot(s,this.scale,this.Ys.St.ot)},this.gM=(t,i)=>{const s=t.Fx(i);if(s)return ot(s,this.scale,this.Ys.St.ot)},this.SM=u,this.Ko=f,this.Oc=Ji(this._t.lineSeriesStrokeStyle,d),this.Fw={individualLookupValuesEnabled:void 0!==(null==f?void 0:f.individualLookupValuesEnabled)&&f.individualLookupValuesEnabled}}Ms(){var t,i;return null===(i=null===(t=this.Ko)||void 0===t?void 0:t.dataPattern)||void 0===i?void 0:i.pattern}add(t){return super.add(t),this}setPointerEvents(t){return super.setPointerEvents(t)}setStrokeStyle(t){this.Oc="function"==typeof t?t(this.Oc):t;const i=this.Oc;for(let t=0;t<this.Ob.length;t+=1)this.Ob[t].Ne(i);return this.Ys.Ls(),this}getStrokeStyle(){return this.Oc}setDataCleaning(t){return this.Wc=t,this.Ob.forEach((t=>t.jc(this.Wc))),this.Ys.Ls(),this}setCursorInterpolationEnabled(t){return this.WS=t,this.Ys.St.Ls(),this}getCursorInterpolationEnabled(){return this.WS}Mb(t){}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY};if(0===this.Ob.length)return;const h=this.Ob[0].Ct()||Ct.NearestX,r=hu(e,this.Ob,Ha(i)?this.gM:this.Tw,h===Ct.NearestX?(t,i)=>Math.abs(t.x-i.x):h===Ct.NearestY?(t,i)=>Math.abs(t.y-i.y):(t,i)=>(t.x-i.x)**2+(t.y-i.y)**2);if(void 0!==r){const t=ot(r[0],this.Ys.St.ot,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}jb(t){let i=this.Ob[0];i||(i=this.yM(),this.Ob.push(i),this.ws(i)),i.Dl(t,this.Hb)}Gs(){return ji(this.Oc.getFillStyle(),void 0)}yM(){return this.Ys.tv(this.scale,this.Fw,[Cl.UserSeries,...this.SM]).Ne(this.Oc).jc(this.Wc).Bt(this.getHighlight())}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{stroke:this.Oc})}De(t,i){t.Bt(i),this.Ys.Ls()}Xb(t,i,s,e){}}class ad extends eu{constructor(t,i,s,e,h,r,n,o,a,l,c,u,d){super(t,i,s,e,h,r,n,o,new Ou,l,c),this.Ob=[],this.eb=5,this.Ga=0,this.yl=!1,this.pl=!1,this.ml=!1,this.Wb=void 0,this.AM=(t,i)=>{const s=t.Ru(i);if(s)return ot(s,this.scale,this.Ys.St.ot)},this.Ko=d,this.hb=a,this.Ce=Ji(l.pointSeriesFillStyle,u)}add(t){return super.add(t),this}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=hu(e,this.Ob,this.AM,Bs);if(void 0!==h){const t=ot(h[0],this.Ys.St.ot,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}Gs(){return ji(this.Ce,void 0)}$s(){return this.Ds||this.hb}Mb(t){}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce})}De(t,i){t.Bt(i),this.Ys.Ls()}setPointFillStyle(t){this.Ce="function"==typeof t?t(this.Ce):t;const i=this.Ce;for(let t=0;t<this.Ob.length;t+=1)this.Ob[t].Ie(i);return this.Ys.Ls(),this}getPointFillStyle(){return this.Ce}setPointSize(t){this.eb=t;for(let i=0;i<this.Ob.length;i+=1)this.Ob[i].Z(t);return this.Ys.Ls(),this}getPointSize(){return this.eb}getPointShape(){return this.hb}setPointRotation(t){this.Ga=t;for(let i=0;i<this.Ob.length;i+=1)this.Ob[i].Wh(t);return this.Ys.Ls(),this}getPointRotation(){return this.Ga}setIndividualPointSizeEnabled(t){this.yl=t,t&&this.chart.St.Zo(Gr.io);for(let i=0;i<this.Ob.length;i+=1)this.Ob[i].Pl(t);return this.Ys.Ls(),this}getIndividualPointSizeEnabled(){return this.yl}setIndividualPointRotationEnabled(t){this.pl=t;for(let i=0;i<this.Ob.length;i+=1)this.Ob[i].Ll(t);return this.Ys.Ls(),this}getIndividualPointRotationEnabled(){return this.pl}setIndividualPointValueEnabled(t){this.ml=t;for(let i=0;i<this.Ob.length;i+=1)this.Ob[i].Bl(t);return this.Ys.Ls(),this}getIndividualPointValueEnabled(){return this.ml}jb(t){let i=this.Ob[0];i||(i=this.yM()),i.Dl(t,this.Hb)}yM(){const t=this.Ys.wy(this.scale).Fl(this.hb).Z(this.eb).Wh(this.Ga).Pl(this.yl).Ll(this.pl).Bl(this.ml).Ie(this.Ce).Bt(this.getHighlight());return this.Ob.push(t),this.ws(t),t}}class ld{constructor(t,i,s,e){this.Iw=!1,this.D=new zt,this.chart=s,this.Pw=e,this.Qs=t.Qs,this.ee=e||ar,this.Lw=ni.document.createElement("div"),this.Lw.style.position="absolute",this.Lw.style.pointerEvents="none",ni.document.body.append(this.Lw);const h=()=>{const t=s.engine.container.getBoundingClientRect();this.Lw.style.left=`${t.left}px`,this.Lw.style.top=`${t.top}px`,this.Lw.style.width=`${t.width}px`,this.Lw.style.height=`${t.height}px`};h(),s.addEventListener("resize",h),this.Bw(this.Lw),this.Dw(),this.Ew(),this.Rw(),this.zw(i),this.chart.Vw().push(this)}Bw(t){this.Ow=ni.document.createElement("div"),this.Ow.style.pointerEvents="all",t.append(this.Ow),this.Nw=ni.document.createElement("div"),this.Gw=new qh(this.Qs,this.ee,this.chart,this.Nw),this.$w=ni.document.createElement("table"),this.$w.style.borderSpacing="0",this.Ow.appendChild(this.Gw.de()),this.Ow.appendChild(this.Nw),this.Nw.appendChild(this.$w)}Ew(){let t=0,i=0,s=0,e=0,h=!1;this.Iw=!1,this.Ow.onmousedown=r=>{r=r||ni.event,s=r.clientX,e=r.clientY,h=!0,ni.document.onmouseup=t=>{this.Iw?this.Ow.addEventListener("click",Bi,!0):this.Ow.removeEventListener("click",Bi,!0),h=!1,this.Iw=!1,ni.document.onmouseup=null,ni.document.onmousemove=null},ni.document.onmousemove=r=>{r=r||ni.event,h&&(t=s-r.clientX,i=e-r.clientY,s=r.clientX,e=r.clientY,this.Iw=!0,this.Ow.style.top=this.Ow.offsetTop-i+"px",this.Ow.style.left=this.Ow.offsetLeft-t+"px",this.Ow.style.removeProperty("right"),this.Ow.style.removeProperty("bottom"))}}}Rw(){let t=0,i=0,s=0,e=0,h=!1;this.Ow.ontouchstart=r=>{r=r||ni.event,s=r.touches[0].clientX,e=r.touches[0].clientY,h=!0,this.Ow.ontouchend=()=>{h=!1,ni.document.ontouchend=null,ni.document.ontouchmove=null},this.Ow.ontouchmove=r=>{h&&(Bi(r),r=r||ni.event,t=s-r.touches[0].clientX,i=e-r.touches[0].clientY,s=r.touches[0].clientX,e=r.touches[0].clientY,this.Ow.style.top=this.Ow.offsetTop-i+"px",this.Ow.style.left=this.Ow.offsetLeft-t+"px",this.Ow.style.removeProperty("right"),this.Ow.style.removeProperty("bottom"))}}}Dw(){this.Ow.style.setProperty("top","10px"),this.Ow.style.setProperty("left","10px"),this.Ow.style.position="absolute",this.Ow.style.display="flex",this.Ow.style.alignItems="flex-start",this.Nw.style.setProperty("display","none")}removePositionProperty(){this.Ow.style.removeProperty("top"),this.Ow.style.removeProperty("left"),this.Ow.style.removeProperty("bottom"),this.Ow.style.removeProperty("right")}setPositionProperty(t){switch(this.removePositionProperty(),t){case cr.BottomLeft:this.Ow.style.setProperty("bottom","10px"),this.Ow.style.setProperty("left","10px");break;case cr.TopLeft:this.Ow.style.setProperty("top","10px"),this.Ow.style.setProperty("left","10px");break;case cr.BottomRight:this.Ow.style.setProperty("bottom","10px"),this.Ow.style.setProperty("right","10px");break;case cr.TopRight:default:this.Ow.style.setProperty("top","10px"),this.Ow.style.setProperty("right","10px")}}zw(t){for(let i=0;i<t.length;i+=1){const s=this.$w.insertRow();for(let e=0;e<t[i].length;e+=1){const h=s.insertCell(),r=t[i][e];"object"!=typeof r?this.Uw(r,h):this.addCustomButton(r,h)}}}Uw(t,i){switch(t){case Fh.ZoomIn:this.Yw(new Yh(this.Qs,this.chart,this.ee),i);break;case Fh.ZoomInX:this.Yw(new Hh(this.Qs,this.chart,this.ee),i);break;case Fh.ZoomInY:this.Yw(new Xh(this.Qs,this.chart,this.ee),i);break;case Fh.ZoomOut:this.Yw(new Wh(this.Qs,this.chart,this.ee),i);break;case Fh.ZoomOutX:this.Yw(new jh(this.Qs,this.chart,this.ee),i);break;case Fh.ZoomOutY:this.Yw(new Zh(this.Qs,this.chart,this.ee),i);break;case Fh.ZoomToFit:this.Yw(new Jh(this.Qs,this.chart,this.ee),i);break;case Fh.ToggleAnimations:this.Yw(new Qh(this.Qs,this.chart,this.ee),i);break;default:console.error(`No predefined button like "${Fh[t]}" exists.`)}}Yw(t,i){i.rowSpan=t.Js.rows,i.colSpan=t.Js.columns,t.ue(i)}addCustomButton(t,i){const s=new Kh(this.Qs,t,this.chart);return this.Yw(s,i),this}dispose(){this.Lw.remove(),this.D.R("dispose",{})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class cd extends Kc{constructor(t,i,s,e,h,r,n,o,a,l,c,u){var d;super(t,i,s,e,h,r,n,o,a,l),this.Hw=0,this.D=new zt,this.Ko=u,this.vl=this.Ys.hd(this.scale).Ne(Ji(this._t.lineSeriesStrokeStyle,c)).sd(Ji(this._t.pointSeriesFillStyle,c)).ed(Ji(this._t.areaSeriesPositiveFillStyle,c)).Xw(void 0).ud(7),this.vl.Ww=!1!==(null===(d=this.Ko)||void 0===d?void 0:d.allowDataGrouping),this.ws(this.vl)}yy(){return this.getSampleCount()>0}Ms(){return this.getDataSet().Pu()}setDataSet(t){var i;return t===(null===(i=this.qu)||void 0===i?void 0:i.si)||(t.au&&this.chart.St.Zo(Gr.so),t.cu&&this.chart.St.Zo(Gr.io),this.qu=fs(t,this.qu,(()=>({change:()=>{this.Hw+=1,this.Hw>1&&this.chart.St.Zo(Gr.qn),this.chart.St.Ls()},clear:()=>{this.chart.St.Ls()}}))),this.vl.td(t),this.chart.St.Ls()),this}getDataSet(){return this.jw()}setStrokeStyle(t){return this.vl.Ne(t),this.Ys.Ls(),this}getStrokeStyle(){return this.vl.In()}setAreaFillStyle(t){return this.vl.ed(t),this.Ys.Ls(),this}getAreaFillStyle(){return this.vl.Zw()}setPointFillStyle(t){return this.vl.sd(t),this.Ys.Ls(),this}getPointFillStyle(){return this.vl.ld()}setPointSize(t){return this.vl.ud(t),this.Ys.Ls(),this}getPointSize(){return this.vl.Qw()}setPointShape(t){return this.vl.rd(t),this.Ys.Ls(),this}getPointShape(){return this.vl.nd()}setPointRotation(t){return this.vl.od(t),this.Ys.Ls(),this}getPointRotation(){return this.vl.ad()}setPointAlignment(t){return this.vl.Jw(t),this.chart.St.Ls(),this}getPointAlignment(){return this.vl.Kw()}setCurvePreprocessing(t){return this.vl.Xw(t),this.Ys.Ls(),this}getCurvePreprocessing(){return this.vl.qw()}add(t){return this.jw().add(t),this.Ys.Ls(),this}addArraysXY(t,i){return this.jw().addArraysXY(t,i),this.Ys.Ls(),this}appendJSON(t,i){return this.jw().appendJSON(t,i),this.Ys.Ls(),this}appendSample(t){return this.jw().appendSample(t),this.Ys.Ls(),this}appendSamples(t){return this.jw().appendSamples(t),this.Ys.Ls(),this}fill(t){return this.jw().fill(t),this.Ys.Ls(),this}setSamples(t){return this.jw().setSamples(t),this.Ys.Ls(),this}alterSamples(t,i){return this.jw().alterSamples(t,i),this.Ys.Ls(),this}alterSamplesByID(t,i){return this.jw().alterSamplesByID(t,i),this.Ys.Ls(),this}getSampleCount(){return this.jw().getSampleCount()}getNextSampleIndex(){return this.jw().getNextSampleIndex()}clear(){return this.jw().clear(),this.Ys.Ls(),this}setMaxSampleCount(t){return this.jw().setMaxSampleCount(t),this.Ys.Ls(),this}getMaxSampleCount(){return this.jw().getMaxSampleCount()}readBack(t){return this.jw().readBack(t)}solveNearest(t,i=this.chart.getCursorMode()||"show-nearest"){let s=Ha(i);void 0!==this.getCurvePreprocessing()&&(s=!1);const e=this.t_(),h=_e(t)?this.chart.translateCoordinate(t,{x:this.axisX,y:this.axisY}):t,r=e.Ru(h,s,this.scale,this.chart.xf);if(void 0!==r)return{cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}},...r,series:this,axisX:this.axisX,axisY:this.axisY}}Kt(t,i){const s=this.getDataSet(),e=null==t?void 0:t.dataPoint;return void 0===s.Pu()||e?e?{cursorPosition:{resultTable:e,resultTableScale:this.scale,pointMarker:e,pointMarkerScale:{x:this.axisX,y:this.axisY}},...e,series:this,axisX:this.axisX,axisY:this.axisY}:void 0:As({series:this,axisX:this.axisX,axisY:this.axisY},{x:0,y:0,cursorPosition:0,id:0,rotation:0,size:0,color:0,lookupValue:0,multiHit:0,iSample:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}t_(){return this.jw()}Gs(){return ji(this.getPointFillStyle(),this.vl.Tt())||ji(this.getStrokeStyle().getFillStyle(),this.vl.Tt())||ji(this.getAreaFillStyle(),this.vl.Tt())}Qv(){var t;const i=null===(t=this.qu)||void 0===t?void 0:t.si;return this.getVisible()&&this.getAutoScrollingEnabled()&&void 0!==i&&i.iu>0}Mb(t){}Cb(t){const i=this.vl.ba();return i&&"y"===i.i_&&!t&&i.s_(),this.vl.jt(t)}kb(t){const i=this.vl.ba();return i&&"y"===i.i_&&!t&&i.s_(),this.vl.Wt(t)}Tb(t){const i=this.vl.ba();return i&&"x"===i.i_&&!t&&i.s_(),this.vl.Qt(t)}Fb(t){const i=this.vl.ba();return i&&"x"===i.i_&&!t&&i.s_(),this.vl.Zt(t)}Dr(){return{x:this.vl.Wl(),y:this.vl.jl()}}hy(){var t;super.hy();const i=Ge(null!==(t=this.Ms())&&void 0!==t?t:"ProgressiveX");this.vl.e_("x"===i?0===this.xAxis.vf?"bottom":"top":0===this.yAxis.vf?"left":"right")}jw(){if(!this.qu){const t=new $n(this.Ko);t.au&&this.chart.St.Zo(Gr.so),t.cu&&this.chart.St.Zo(Gr.io),this.qu=fs(t,this.qu,(()=>({change:()=>{this.Hw+=1,this.Hw>1&&this.chart.St.Zo(Gr.qn),this.chart.St.Ls()},clear:()=>{this.chart.St.Ls()}}))),this.vl.td(t)}return this.qu.si}styleLegendEntry(t,i=!1){const s=this.getPointFillStyle(),e=this.getAreaFillStyle();Wi(t,this._t,i,{stroke:this.getStrokeStyle(),fill:s!==V?s:e,behavior:{priority:"stroke"}})}$s(){return this.Ds||this.getPointShape()}De(t,i){t.Bt(i),this.Ys.Ls()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const ud={pan:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,chartInteractions:void 0},dd=(t,i,s,e)=>{t.seriesBackground.addEventListener(i,s,e),t.getSeries().forEach((t=>t.addEventListener(i,s,e)));const h=t=>t.series.addEventListener(i,s,e);return t.addEventListener("seriesadd",h),()=>{t.seriesBackground.removeEventListener(i,s),t.getSeries().forEach((t=>t.removeEventListener(i,s))),t.removeEventListener("seriesadd",h)}},fd=(t,i,s,e)=>{const h=[];return t.forEachAxis((t=>{const r=i=>s(t,i);t.addEventListener(i,r,e),h.push((()=>t.removeEventListener(i,r)))})),t.addEventListener("axisadd",(t=>{const r=i=>s(t.axis,i);t.axis.addEventListener(i,r,e),h.push((()=>t.axis.removeEventListener(i,r)))})),()=>{h.forEach((t=>t()))}},Ad=(...t)=>(i,s)=>t.forEach((t=>t.forEach((t=>{t.axis.ot.Z(i),t.axis.mf.Z(s)})))),gd=r(10,10);var vd;!function(t){t[t.Top=0]="Top",t[t.Bottom=1]="Bottom",t[t.Left=2]="Left",t[t.Right=3]="Right"}(vd||(vd={}));const yd=new Set([vd.Top,vd.Bottom,vd.Left,vd.Right]),pd=t=>t.setStopped(!0),md=(t,i)=>{if(!t||!i)throw new Error("LightningChart JS error | either X or Y axis didn't exist when creating a series.");const s="linear-highPrecision"===t.Dh.type||"linear-highPrecision"===i.Dh.type,e="logarithmic"===t.Dh.type||"logarithmic"===i.Dh.type;if(s&&e){const s=`Invalid Axis combination | 'logarithmic' can't be combined with 'linear-highPrecision' (x: ${t.Dh.type}, y: ${i.Dh.type})`;throw new Error(s)}};var Sd,bd,xd;!function(t){t[t.seriesBackground=0]="seriesBackground",t[t.gridLine0=1]="gridLine0",t[t.gridLine1=2]="gridLine1",t[t.gridLine2=3]="gridLine2",t[t.highlightersBelow=4]="highlightersBelow"}(Sd||(Sd={})),function(t){t[t.plotting=0]="plotting",t[t.highlightersAbove=1]="highlightersAbove",t[t.fg=2]="fg"}(bd||(bd={}));class Md extends Jl{constructor(t,i,s,e,h,r,n){super(t,i,s,i.wA("chartXY bg",0),e,i.St._t.chartXYBackgroundFillStyle,i.St._t.chartXYBackgroundStrokeStyle,i.St._t.chartXYTitleFont,i.St._t.chartXYTitleFillStyle,i.St._t.chartXYTitleShadow,n),this.h_=this.lA.d2({scaleXYConstructor:be}),this.Yf=[],this.Hf=[],this.Wf=[],this.Xf=[],this.r_=new Map,this.n_=!0,this.o_=[],this.a_=this._t.chartXYZoomingRectangleFillStyle,this.l_=this._t.chartXYZoomingRectangleStrokeStyle,this.if=wd,this.xb=0,this.om=[],this.lm=()=>{if(this.dt)return;const t=new Map;this.forEachAxis((i=>{void 0!==i.Df().find((t=>t.yy()))&&t.set(i,{...i.getInterval(),stopped:i.getStopped()})})),t.size<=0||(this.om.push(t),this.om.length>100&&this.om.shift())},this.c_=(t,i,s)=>{const e=t.solveNearest(i,s);return e&&Ls(e.cursorPosition.pointMarker.x,e.axisX.getInterval().start,e.axisX.getInterval().end)&&Ls(e.cursorPosition.pointMarker.y,e.axisY.getInterval().start,e.axisY.getInterval().end)?e:void 0},this.u_=Ad(this.Hf,this.Yf),this.d_=Ad(this.Wf,this.Xf),this.f_=t=>{this.u_(t.engineWidth,t.engineHeight),this.d_(t.engineHeight,t.engineWidth),this.h_.Z(t.engineWidth,t.engineHeight),this.St.Ls()},this.A_=(t,i)=>{this.r_.set(t,i)},this.ff=t=>{const i=this.Hf.findIndex((i=>i.axis===t)),s=this.Yf.findIndex((i=>i.axis===t)),e=this.Wf.findIndex((i=>i.axis===t)),h=this.Xf.findIndex((i=>i.axis===t));i>=0&&this.Hf.splice(i,1),s>=0&&this.Yf.splice(s,1),e>=0&&this.Wf.splice(e,1),h>=0&&this.Xf.splice(h,1),this.r_.delete(t),this.St.Ls()},this.addAreaSeries=t=>{const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=t&&t.baseline?t.baseline:0,h=new(t&&t.type?t.type:Tu.Positive)(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,e,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length);return this.Ly(h),h},this.addAreaRangeSeries=t=>{const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=new Fu(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length);return this.Ly(e),e},this.D=new zt,this.St.Zo(Gr.jn),this.setPadding({right:15}),this.v_=i.bm("chartXY series bg",Sd.seriesBackground),this.y_=[Sd.gridLine0,Sd.gridLine1,Sd.gridLine2].map((t=>i.p_(`chartXY gridline #${t}`,t))),this.uf=i.p_("chartXY highlighters below",Sd.highlightersBelow),this.Km=i.Ng("chartXY plotting",bd.plotting),this.df=i.Ng("chartXY highlighters above",bd.highlightersAbove),this.cf=i.Ng("chartXY fg",bd.fg),this.h_.x.W(0,this.uiScale.x.getCellSize()-(this.oi.left+this.oi.right+this.nn.left+this.nn.right)),this.h_.y.W(0,this.uiScale.y.getCellSize()-(this.oi.bottom+this.oi.top+this.nn.bottom+this.nn.top)),this.h_.Z(this.uiScale.xi().x,this.uiScale.xi().y),this.Iy=this.v_.Pe(this.h_).Ie(this._t.chartXYSeriesBackgroundFillStyle).Fe(Wt),this.Py=this.cf.Pe(this.h_).Ie(V).Fe(this._t.chartXYSeriesBackgroundStrokeStyle).setPointerEvents(!1),super.Fy(this.Iy,this.Py),this.setSeriesBackgroundEffect(!1);const o=gi(r?r.cursorBuilder:void 0,rd),a=i.$g();this.Ug=Qa(this,a,o.ag(a,this.h_,this.h_,ui,this._t),this,"show-all",Fd,((t,i)=>{const s=this.translateCoordinate(t,{x:t.axisX,y:t.axisY},this.coordsClient);return Math.sqrt((s.clientX-i.clientX)**2+(s.clientY-i.clientY)**2)})),this.addAxisX(r&&r.defaultAxisX),this.addAxisY(r&&r.defaultAxisY),this.addEventListener("resize",this.f_),this.Sh.Sr("ChartXY"),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled)),this.MA(h,this.h_),this.Tm=(t=>{let i={},s=!1,e=!1,h=!1;const r=()=>{const s=t.getAxes().find((t=>t.getScrollStrategy()===fr.progressive||t.getScrollStrategy()===fr.regressive)),e=t.getSeries().map((t=>t.Ms())).find((t=>t)),h=t.getSeries().find((t=>t instanceof Mu||t instanceof cd&&!O(t.getAreaFillStyle())&&t.Ms())),r=s?{type:"scrolling",scrollingAxis:s,x:s.isX,y:s.isY}:e?{type:"progressive",x:"ProgressiveX"===e||"RegressiveX"===e,y:"ProgressiveY"===e||"RegressiveY"===e}:{type:"freeform"};if("progressive"===r.type){const t={zoom:{wheel:{},stopScroll:!0},pan:{lmb:!1,rmb:{drag:{}}},restoreDefault:{doubleClick:!0},rectangleZoom:{lmb:{drag:{}},rmb:!1}},s={pan:{lmb:!1,rmb:{drag:{}}},zoom:{wheel:{},mode:h?"keep-start":"centered"},restoreDefault:{doubleClick:!0},rectangleZoom:{lmb:{drag:{}},rmb:!1}};return hi({rectangleZoom:{x:r.x,y:r.y,rmb:!1},pan:{x:r.x,y:r.y,pinch:{},lmb:!1,rmb:{drag:{}}},paginate:{x:r.x,y:r.y},zoom:{x:r.x,y:r.y,wheel:{},pinch:{},stopScroll:!0},restoreDefault:{doubleClick:!0},restorePrevious:{ctrl:{code:"KeyZ"}},xAxis:r.x?t:s,yAxis:r.y?t:s},i)}if("scrolling"===r.type){const t=(r.scrollingAxis.hh===fr.regressive?-1:1)*(r.scrollingAxis.getInterval().end>r.scrollingAxis.getInterval().start?1:-1)>0?"keep-end":"keep-start",s={zoom:{wheel:{},stopScroll:!1,mode:t},pan:{drag:{}},restoreDefault:{doubleClick:!0}},e={rectangleZoom:{lmb:{},rmb:!1,mmb:!1},pan:{lmb:!1,rmb:{drag:{}},mmb:!1},zoom:{drag:!1,wheel:{},mode:h?"keep-start":"centered"},restoreDefault:{doubleClick:!0}};return hi({rectangleZoom:!1,pan:{x:r.x,y:r.y,pinch:{},drag:{}},paginate:{x:r.x,y:r.y},zoom:{x:r.x,y:r.y,wheel:{},pinch:{stopScroll:!0},stopScroll:!1,mode:t},restoreDefault:{doubleClick:!0},restorePrevious:!1,xAxis:r.x?s:e,yAxis:r.y?s:e},i)}return hi({pan:{x:!0,y:!0,pinch:{},lmb:!1,rmb:{drag:{}}},zoom:{x:!0,y:!0,pinch:{},wheel:{},mode:"toward-pointer"},rectangleZoom:{x:!0,y:!0,lmb:!0,rmb:!1},restoreDefault:{doubleClick:!0},restorePrevious:{ctrl:{code:"KeyZ"}},axes:{pan:{rmb:{drag:{}},lmb:!1},rectangleZoom:{lmb:{drag:{}},rmb:!1},zoom:{wheel:{}},restoreDefault:{doubleClick:!0}}},i)},n=t=>{const i=r(),s=t.getUserInteractions();let e=t.isX?i.xAxis:i.yAxis,h=i.axes;return e=!1!==e?e:ud,h=!1!==h?h:ud,hi(null!=h?h:{},null!=e?e:{},s)},o=t=>{},a=i=>{if(!t.axisX||!t.axisY)return;const n=Fe(!1!==t.St.Ko.qo),o=r(),a=Te(o.pan,"drag",i,s,e,h);a&&n.push((()=>((t,i,s,e)=>{let h;const r=t.getCursorMode();let n=!1,o=i;"mouse"===i.pointerType&&i.preventDefault();const a=e=>{if(e.pointerId!==i.pointerId)return;const r=e.clientX-o.clientX,a=e.clientY-o.clientY;if(o=e,!n){if(!("mouse"===e.pointerType||Math.max(Math.abs(e.clientX-i.clientX),Math.abs(e.clientY-i.clientY))>=10))return;n=!0,h=t.engine.setMouseStyle(!1===s.x?tr.Vertical:!1===s.y?tr.Horizontal:tr.Move),t.setCursorMode(void 0),ps()}Bi(e),s.x&&t.forEachAxisX((t=>{var i;const e=t.ze.chartInteractions;!1===e||"object"==typeof e&&!1===e.pan||(!1!==s.stopScroll&&t.setStopped(!0),t.pan(-r*(null!==(i=s.sensitivity)&&void 0!==i?i:1)))})),s.y&&t.forEachAxisY((t=>{var i;const e=t.ze.chartInteractions;!1===e||"object"==typeof e&&!1===e.pan||(!1!==s.stopScroll&&t.setStopped(!0),t.pan(a*(null!==(i=s.sensitivity)&&void 0!==i?i:1)))}));const l=s.on;l&&ni.requestAnimationFrame((()=>l({event:e})))},l=s=>{s.pointerId===i.pointerId&&(ni.removeEventListener("pointermove",a),ni.removeEventListener("pointerup",l),t.engine.container.removeEventListener("pointerdown",c),h=t.engine.restoreMouseStyle(h),e(),t.setCursorMode(r))},c=s=>{s.pointerId!==i.pointerId&&(ni.removeEventListener("pointermove",a),ni.removeEventListener("pointerup",l),t.engine.container.removeEventListener("pointerdown",c),h=t.engine.restoreMouseStyle(h),e(),t.setCursorMode(r))};ni.addEventListener("pointermove",a),ni.addEventListener("pointerup",l),t.engine.container.addEventListener("pointerdown",c),ms()})(t,i,a,f())));const l=Te(o.zoom,"drag",i,s,e,h);l&&n.push((()=>((t,i,s,e)=>{let h=t.engine.setMouseStyle(tr.ZoomIn);const r=t.getCursorMode();t.setCursorMode(void 0);let n=!1,o=i;"mouse"===i.pointerType&&i.preventDefault();const a=e=>{if(e.pointerId!==i.pointerId)return;Bi(e);const r={x:e.clientX-o.clientX,y:e.clientY-o.clientY};o=e,s.x&&t.forEachAxisX((e=>{var n;const o=e.ze.chartInteractions;if(!1===o||"object"==typeof o&&!1===o.zoom)return;let a;a="keep-start"===s.mode?e.getInterval().start:"keep-end"===s.mode?e.getInterval().end:"centered"===s.mode?e.ot.rt((e.ot.pi()+e.ot.mi())/2):t.translateCoordinate(i,{x:e,y:e}).x;const l=.05*e.Lh.getWidth({x:-r.x,y:r.y})*(null!==(n=s.sensitivity)&&void 0!==n?n:1);e.zoom(a,l),!1!==s.stopScroll&&e.setStopped(!0),h=t.engine.setMouseStyle(l<0?tr.ZoomIn:tr.ZoomOut,h)})),s.y&&t.forEachAxisY((e=>{var n;const o=e.ze.chartInteractions;if(!1===o||"object"==typeof o&&!1===o.zoom)return;let a;a="keep-start"===s.mode?e.getInterval().start:"keep-end"===s.mode?e.getInterval().end:"centered"===s.mode?e.ot.rt((e.ot.pi()+e.ot.mi())/2):t.translateCoordinate(i,{x:e,y:e}).y;const l=.05*e.Lh.getWidth({x:-r.x,y:r.y})*(null!==(n=s.sensitivity)&&void 0!==n?n:1);e.zoom(a,l),!1!==s.stopScroll&&e.setStopped(!0),h=t.engine.setMouseStyle(l<0?tr.ZoomIn:tr.ZoomOut,h)})),n||(ps(),n=!0);const a=s.on;a&&ni.requestAnimationFrame((()=>a({event:e})))},l=s=>{s.pointerId===i.pointerId&&(ni.removeEventListener("pointermove",a),ni.removeEventListener("pointerup",l),t.engine.container.removeEventListener("pointerdown",c),h=t.engine.restoreMouseStyle(h),e(),t.setCursorMode(r))},c=s=>{s.pointerId!==i.pointerId&&(ni.removeEventListener("pointermove",a),ni.removeEventListener("pointerup",l),t.engine.container.removeEventListener("pointerdown",c),h=t.engine.restoreMouseStyle(h),e(),t.setCursorMode(r))};ni.addEventListener("pointermove",a),ni.addEventListener("pointerup",l),t.engine.container.addEventListener("pointerdown",c),ms()})(t,i,l,f())));const c=Te(o.rectangleZoom,void 0,i,s,e,h);c&&n.push((()=>((t,i,s,e)=>{let h;const r=t.getCursorMode(),n=t.addRectangleSeries().setDrawOrder({seriesDrawOrderIndex:1e3}).setPointerEvents(!1).setCursorEnabled(!1).setAutoScrollingEnabled(!1).setClipping(!1),o=n.add({x1:0,x2:0,y1:0,y2:0});let a=!1,l=!1;"mouse"===i.pointerType&&i.preventDefault();const c=e=>{if(e.pointerId!==i.pointerId)return;Bi(e),s.x&&t.forEachAxisX((t=>{const i=t.ze.chartInteractions;!1===i||"object"==typeof i&&!1===i.rectangleZoom||t.setStopped(!0)})),s.y&&t.forEachAxisY((t=>{const i=t.ze.chartInteractions;!1===i||"object"==typeof i&&!1===i.rectangleZoom||t.setStopped(!0)}));const n=t.translateCoordinate(i,t.coordsAxis),c=t.translateCoordinate(e,t.coordsAxis),u=ot({x:0,y:0},t.h_,t.coordsAxis),d=ot({x:t.h_.x.getInnerEnd(),y:t.h_.y.getInnerEnd()},t.h_,t.coordsAxis);!1===s.x?o.setDimensions({y1:n.y,x1:u.x,y2:c.y,x2:d.x}):!1===s.y?o.setDimensions({x1:n.x,y1:u.y,x2:c.x,y2:d.y}):o.setDimensions({x1:n.x,y1:n.y,x2:c.x,y2:c.y});const f=Bs({x:e.clientX,y:e.clientY},{x:s.x?i.clientX:e.clientX,y:s.y?i.clientY:e.clientY})>=20,A=Ls(c.x,u.x,d.x)&&Ls(c.y,u.y,d.y);if(o.setFillStyle(f&&A?t.getZoomingRectangleFillStyle():V).setStrokeStyle(f&&A?t.getZoomingRectangleStrokeStyle():Wt),a||(ps(),a=!0),t.setCursorMode(f?void 0:r),f){if(h=t.engine.setMouseStyle(tr.ZoomIn,h),!l){const t=s.start;t&&t({event:e})}}else h=t.engine.restoreMouseStyle(h);l=f},u=o=>{if(o.pointerId!==i.pointerId)return;const a=Bs({x:o.clientX,y:o.clientY},{x:s.x?i.clientX:o.clientX,y:s.y?i.clientY:o.clientY})>=20,l=t.translateCoordinate(o,t.coordsAxis),f=ot({x:0,y:0},t.h_,t.coordsAxis),A=ot({x:t.h_.x.getInnerEnd(),y:t.h_.y.getInnerEnd()},t.h_,t.coordsAxis),g=Ls(l.x,f.x,A.x)&&Ls(l.y,f.y,A.y);a&&g&&t.forEachAxis((e=>{var h,r;if(e.isX&&!s.x)return;if(e.isY&&!s.y)return;const n=e.ze.chartInteractions;if(!1===n||"object"==typeof n&&!1===n.rectangleZoom)return;const a=t.translateCoordinate(i,{x:e,y:e}),l=t.translateCoordinate(o,{x:e,y:e}),c=e.Lh.getWidth(a),u=e.Lh.getWidth(l),d=Math.sign(u-c),f=Math.sign(e.getInterval().end-e.getInterval().start),A=d===f?c:u,g=d===f?u:c;e.ct(A,g,null!==(h=s.animationsEnabled)&&void 0!==h?h:void 0,null!==(r=s.stopScroll)&&void 0!==r?r:void 0,"interactionSetInterval")})),a&&ys("click"),t.setCursorMode(r),n.dispose(),ni.removeEventListener("pointermove",c),ni.removeEventListener("pointerup",u),t.engine.container.removeEventListener("pointerdown",d),h=t.engine.restoreMouseStyle(h),e();const v=a&&g&&s.on;v&&ni.requestAnimationFrame((()=>v({event:o})))},d=s=>{s.pointerId!==i.pointerId&&(t.setCursorMode(r),n.dispose(),ni.removeEventListener("pointermove",c),ni.removeEventListener("pointerup",u),t.engine.container.removeEventListener("pointerdown",d),h=t.engine.restoreMouseStyle(h),e())};ni.addEventListener("pointermove",c),ni.addEventListener("pointerup",u),t.engine.container.addEventListener("pointerdown",d),ms()})(t,i,c,f()))),n.end();const u=Te(o.pan,"pinch",i,s,e,h),d=Te(o.zoom,"pinch",i,s,e,h);(d||u)&&((t,i,s,e,h)=>{if(!s&&!e)return;const r=o=>{if(o.pointerId===i.pointerId)return;const a=h();let l;t.engine.container.removeEventListener("pointerdown",r),ni.removeEventListener("pointerup",n);let c=o;const u=t.getCursorMode();t.setCursorMode(void 0);const d=h=>{var r,n,a,u;const d=l,f=c;if(h.pointerId===i.pointerId)l=h;else{if(h.pointerId!==o.pointerId)return;c=h}if(Bi(h),void 0===l||void 0===d)return;const A={x:(l.clientX-d.clientX+(c.clientX-f.clientX))/2*(null!==(r=null==s?void 0:s.sensitivity)&&void 0!==r?r:1),y:(l.clientY-d.clientY+(c.clientY-f.clientY))/-2*(null!==(n=null==s?void 0:s.sensitivity)&&void 0!==n?n:1)};let g=!1;if(s&&s.x&&(g=!0,t.forEachAxisX((t=>{const i=t.ze.chartInteractions;!1===i||"object"==typeof i&&!1===i.pan||t.Qf({},A)}))),s&&s.y&&(g=!0,t.forEachAxisY((t=>{const i=t.ze.chartInteractions;!1===i||"object"==typeof i&&!1===i.pan||t.Qf({},A)}))),g){const t=null==s?void 0:s.on;t&&ni.requestAnimationFrame((()=>t({event:h})))}const v=Qs(Zs({x:Math.abs(d.clientX-f.clientX),y:Math.abs(d.clientY-f.clientY)},{x:Math.abs(l.clientX-c.clientX),y:Math.abs(l.clientY-c.clientY)}),{x:null!==(a=null==e?void 0:e.sensitivity)&&void 0!==a?a:1,y:null!==(u=null==e?void 0:e.sensitivity)&&void 0!==u?u:1});let y=!1;if(e&&e.x&&(y=!0,t.forEachAxisX((t=>{var i;const s=t.ze.chartInteractions;!1===s||"object"==typeof s&&!1===s.zoom||t.ct(t.ot.Pi(t.getInterval().start,-t.Lh.getWidth(v)),t.ot.Pi(t.getInterval().end,t.Lh.getWidth(v)),!1,null!==(i=e.stopScroll)&&void 0!==i?i:void 0,"interactionZoom")}))),e&&e.y&&(y=!0,t.forEachAxisY((t=>{var i;const s=t.ze.chartInteractions;!1===s||"object"==typeof s&&!1===s.zoom||t.ct(t.ot.Pi(t.getInterval().start,-t.Lh.getWidth(v)),t.ot.Pi(t.getInterval().end,t.Lh.getWidth(v)),!1,null!==(i=e.stopScroll)&&void 0!==i?i:void 0,"interactionZoom")}))),y){const t=null==e?void 0:e.on;t&&ni.requestAnimationFrame((()=>t({event:h})))}},f=s=>{s.pointerId!==i.pointerId&&s.pointerId!==o.pointerId||(Bi(s),t.setCursorMode(u),ni.removeEventListener("pointermove",d),ni.removeEventListener("pointerup",f),a())};ni.addEventListener("pointermove",d),ni.addEventListener("pointerup",f),ms()},n=s=>{s.pointerId===i.pointerId&&(t.engine.container.removeEventListener("pointerdown",r),ni.removeEventListener("pointerup",n))};t.engine.container.addEventListener("pointerdown",r),ni.addEventListener("pointerup",n)})(t,i,u,d,f)};dd(t,"wheel",(i=>{const n=Fe(!1!==t.St.Ko.qo),o=r(),a=Te(o.pan,"wheel",i,s,e,h);a&&n.push((()=>((t,i,s)=>{if(Bi(i),t.forEachAxisX((t=>{var e;const h=t.ze.chartInteractions;!1===h||"object"==typeof h&&!1===h.pan||s.x&&(!1!==s.stopScroll&&t.setStopped(!0),t.pan(-30*Math.sign(i.deltaY)*(null!==(e=s.sensitivity)&&void 0!==e?e:1)))})),t.forEachAxisY((t=>{var e;const h=t.ze.chartInteractions;!1===h||"object"==typeof h&&!1===h.pan||s.y&&(!1!==s.stopScroll&&t.setStopped(!0),t.pan(-30*Math.sign(i.deltaY)*(null!==(e=s.sensitivity)&&void 0!==e?e:1)))})),s.x||s.y){const e=t.engine.setMouseStyle(!s.x&&s.y?tr.Vertical:s.x&&!s.y?tr.Horizontal:tr.Move);ni.setTimeout((()=>{t.engine.restoreMouseStyle(e)}),500);const h=s.on;h&&ni.requestAnimationFrame((()=>h({event:i})))}})(t,i,a)));const l=Te(o.zoom,"wheel",i,s,e,h);l&&n.push((()=>((t,i,s)=>{Bi(i),t.forEachAxisX((e=>{var h;const r=e.ze.chartInteractions;if(!1===r||"object"==typeof r&&!1===r.zoom)return;if(!s.x)return;let n;n="keep-start"===s.mode?e.getInterval().start:"keep-end"===s.mode?e.getInterval().end:"centered"===s.mode?e.ot.rt((e.ot.pi()+e.ot.mi())/2):t.translateCoordinate(i,{x:e,y:e}).x,e.zoom(n,Math.sign(i.deltaY)*(null!==(h=s.sensitivity)&&void 0!==h?h:1)),!1!==s.stopScroll&&e.setStopped(!0)})),t.forEachAxisY((e=>{var h;const r=e.ze.chartInteractions;if(!1===r||"object"==typeof r&&!1===r.zoom)return;if(!s.y)return;let n;n="keep-start"===s.mode?e.getInterval().start:"keep-end"===s.mode?e.getInterval().end:"centered"===s.mode?e.ot.rt((e.ot.pi()+e.ot.mi())/2):t.translateCoordinate(i,{x:e,y:e}).y,e.zoom(n,Math.sign(i.deltaY)*(null!==(h=s.sensitivity)&&void 0!==h?h:1)),!1!==s.stopScroll&&e.setStopped(!0)}));const e=t.engine.setMouseStyle(i.deltaY<0?tr.ZoomIn:tr.ZoomOut);ni.setTimeout((()=>{t.engine.restoreMouseStyle(e)}),500);const h=s.on;h&&ni.requestAnimationFrame((()=>h({event:i})))})(t,i,l))),n.end()})),dd(t,"dblclick",(i=>{if(i.defaultPrevented)return;const n=Fe(!1!==t.St.Ko.qo),o=r(),a=Te(o.restoreDefault,void 0,i,s,e,h);a&&a.doubleClick&&n.push((()=>{Bi(i),((t,i,s)=>{ms();const e=new Map;t.forEachAxis((t=>{var s,h;const r=t.ze.chartInteractions;!1===r||"object"==typeof r&&!1===r.restoreDefault||e.set(t,{animate:null!==(s=i.animationsEnabled)&&void 0!==s?s:void 0,stopAxisAfter:null!==(h=i.stopScroll)&&void 0!==h?h:void 0})})),t.m_(e);const h=t.engine.setMouseStyle(tr.ZoomOut);ni.setTimeout((()=>{t.engine.restoreMouseStyle(h)}),500);const r=i.on;r&&ni.requestAnimationFrame((()=>r({event:s})))})(t,a,i)}));const l=Te(o.restorePrevious,void 0,i,s,e,h);l&&l.doubleClick&&n.push((()=>{Bi(i);const s=t.getAxes().filter((t=>{const i=t.ze.chartInteractions;return!(!1===i||"object"==typeof i&&!1===i.restorePrevious)}));t.restorePreviousZoomState({whitelist:s});const e=t.engine.setMouseStyle(tr.ZoomOut);ni.setTimeout((()=>{t.engine.restoreMouseStyle(e)}),500);const h=l.on;h&&ni.requestAnimationFrame((()=>h({event:i})))})),n.end()}));const l=(i,r)=>{const o=Fe(!1!==t.St.Ko.qo),a=n(i),l=Te(a.pan,"drag",r,s,e,h);l&&o.push((()=>((t,i,s,e)=>{const h=t.chart,r=h.getCursorMode();h.setCursorMode(void 0);let n=h.engine.setMouseStyle(t.isY?tr.Vertical:tr.Horizontal),o=!1,a=i;"mouse"===i.pointerType&&i.preventDefault();const l=e=>{var h;if(e.pointerId!==i.pointerId)return;Bi(e);const r=e.clientX-a.clientX,n=e.clientY-a.clientY;a=e,!1!==s.stopScroll&&t.setStopped(!0),t.pan((t.isX?-r:n)*(null!==(h=s.sensitivity)&&void 0!==h?h:1)),o||(ps(),o=!0);const l=s.on;l&&ni.requestAnimationFrame((()=>l({event:e})))},c=s=>{s.pointerId===i.pointerId&&(Bi(s),ni.removeEventListener("pointermove",l),ni.removeEventListener("pointerup",c),n=t.chart.engine.restoreMouseStyle(n),e(),t.chart.setCursorMode(r))};ni.addEventListener("pointermove",l),ni.addEventListener("pointerup",c)})(i,r,l,f())));const c=Te(a.zoom,"drag",r,s,e,h);c&&o.push((()=>((t,i,s,e)=>{const h=t.chart;let r=h.engine.setMouseStyle(tr.ZoomIn);const n=h.getCursorMode();h.setCursorMode(void 0);let o=!1,a=i;"mouse"===i.pointerType&&i.preventDefault();const l=e=>{var n;if(e.pointerId!==i.pointerId)return;Bi(e);const l={x:e.clientX-a.clientX,y:e.clientY-a.clientY};let c;a=e,c="keep-start"===s.mode?t.getInterval().start:"keep-end"===s.mode?t.getInterval().end:t.ot.rt((t.ot.pi()+t.ot.mi())/2);const u=.05*t.Lh.getWidth({x:-l.x,y:l.y})*(null!==(n=s.sensitivity)&&void 0!==n?n:1);t.zoom(c,u),!1!==s.stopScroll&&t.setStopped(!0),r=h.engine.setMouseStyle(u<0?tr.ZoomIn:tr.ZoomOut,r),o||(ps(),o=!0);const d=s.on;d&&ni.requestAnimationFrame((()=>d({event:e})))},c=t=>{t.pointerId===i.pointerId&&(Bi(t),ni.removeEventListener("pointermove",l),ni.removeEventListener("pointerup",c),r=h.engine.restoreMouseStyle(r),h.setCursorMode(n),e())};ni.addEventListener("pointermove",l),ni.addEventListener("pointerup",c)})(i,r,c,f())));const u=Te(a.rectangleZoom,void 0,r,s,e,h);u&&o.push((()=>((t,i,s,e)=>{const h=t.chart,r=h.getCursorMode();h.setCursorMode(void 0);let n=h.engine.setMouseStyle(tr.ZoomIn);const o=t.addBand(!0).setPointerEvents(!1).setValueStart(t.Lh.getWidth(h.translateCoordinate(i,{x:t,y:t}))).setValueEnd(t.Lh.getWidth(h.translateCoordinate(i,{x:t,y:t}))).setVisible(!1).setFillStyle(h.getZoomingRectangleFillStyle()).setStrokeStyle(h.getZoomingRectangleStrokeStyle());let a=!1,l=!1;"mouse"===i.pointerType&&i.preventDefault();const c=e=>{if(e.pointerId!==i.pointerId)return;Bi(e),t.setStopped(!0);const r=h.translateCoordinate(e,{x:t,y:t});o.setValueEnd(t.Lh.getWidth(r));const n=Bs({x:e.clientX,y:e.clientY},{x:t.isX?i.clientX:e.clientX,y:t.isY?i.clientY:e.clientY})>=20;if(o.setVisible(n),a||(ps(),a=!0),n&&!l){const t=n&&s.start;t&&t({event:e})}l=n},u=a=>{var l,d;if(a.pointerId!==i.pointerId)return;Bi(a);const f=Bs({x:a.clientX,y:a.clientY},{x:t.isX?i.clientX:a.clientX,y:t.isY?i.clientY:a.clientY})>=20;if(f){const e=t.Lh.getWidth(h.translateCoordinate(i,{x:t,y:t})),r=t.Lh.getWidth(h.translateCoordinate(a,{x:t,y:t})),n=Math.sign(r-e),o=Math.sign(t.getInterval().end-t.getInterval().start),c=n===o?e:r,u=n===o?r:e;t.ct(c,u,null!==(l=s.animationsEnabled)&&void 0!==l?l:void 0,null!==(d=s.stopScroll)&&void 0!==d?d:void 0,"interactionSetInterval")}o.dispose(),ni.removeEventListener("pointermove",c),ni.removeEventListener("pointerup",u),n=h.engine.restoreMouseStyle(n),e(),h.setCursorMode(r);const A=f&&s.on;A&&ni.requestAnimationFrame((()=>A({event:a})))};ni.addEventListener("pointermove",c),ni.addEventListener("pointerup",u)})(i,r,u,f()))),o.end()};fd(t,"pointerenter",((t,i)=>{const s=n(t);t.getHighlightOnHover()&&(s.pan||s.rectangleZoom||s.restoreDefault||s.zoom)&&t.setHighlight(!0)})),fd(t,"pointerleave",((t,i)=>{t.getHighlightOnHover()&&t.setHighlight(!1)})),fd(t,"wheel",((i,r)=>{const o=Fe(!1!==t.St.Ko.qo),a=n(i),l=Te(a.zoom,"wheel",r,s,e,h);l&&o.push((()=>((t,i,s)=>{var e;let h;Bi(i),h="keep-start"===s.mode?t.getInterval().start:"keep-end"===s.mode?t.getInterval().end:"centered"===s.mode?t.ot.rt((t.ot.pi()+t.ot.mi())/2):t.Lh.getWidth(t.chart.translateCoordinate(i,{x:t,y:t})),t.zoom(h,Math.sign(i.deltaY)*(null!==(e=s.sensitivity)&&void 0!==e?e:1)),!1!==s.stopScroll&&t.setStopped(!0);const r=t.chart.engine.setMouseStyle(i.deltaY<0?tr.ZoomIn:tr.ZoomOut);ni.setTimeout((()=>{t.chart.engine.restoreMouseStyle(r)}),500);const n=s.on;n&&ni.requestAnimationFrame((()=>n({event:i})))})(i,r,l)));const c=Te(a.pan,"wheel",r,s,e,h);c&&o.push((()=>((t,i,s)=>{var e;Bi(i);const h=t.chart;!1!==s.stopScroll&&t.setStopped(!0),t.pan(30*Math.sign(i.deltaY)*t.Lh.getWidth({x:-1,y:1})*(null!==(e=s.sensitivity)&&void 0!==e?e:1));const r=h.engine.setMouseStyle(t.isY?tr.Vertical:tr.Horizontal);ni.setTimeout((()=>{t.chart.engine.restoreMouseStyle(r)}),500);const n=s.on;n&&ni.requestAnimationFrame((()=>n({event:i})))})(i,r,c))),o.end()})),fd(t,"dblclick",((i,r)=>{var o,a;if(r.defaultPrevented)return;const l=n(i),c=Te(l.restoreDefault,void 0,r,s,e,h);if(c&&c.doubleClick){Bi(r),i.fit(null!==(o=c.animationsEnabled)&&void 0!==o?o:void 0,null!==(a=c.stopScroll)&&void 0!==a?a:void 0);const s=t.engine.setMouseStyle(tr.ZoomOut);ni.setTimeout((()=>{t.engine.restoreMouseStyle(s)}),500);const e=c.on;e&&ni.requestAnimationFrame((()=>e({event:r})))}}));const c=i=>{const n=r();let o=!1,a=!1,l=!1;for(const t of Object.keys(n)){const i=n[t];if("object"==typeof i)if("axes"===t||"xAxis"===t||"yAxis"===t){const t=i;if("object"!=typeof t)continue;for(const i of Object.keys(t)){const s=t[i];"object"==typeof s&&("ctrl"in s&&void 0!==s.ctrl&&(o=!0),"shift"in s&&void 0!==s.shift&&(a=!0),"alt"in s&&void 0!==s.alt&&(l=!0))}}else"ctrl"in i&&void 0!==i.ctrl&&(o=!0),"shift"in i&&void 0!==i.shift&&(a=!0),"alt"in i&&void 0!==i.alt&&(l=!0)}e=i.ctrlKey,s=i.shiftKey,h=i.altKey,("Control"===i.key&&o||"Shift"===i.key&&a||"Alt"===i.key&&l)&&i.preventDefault();const c=Te(n.restorePrevious,void 0,i,s,e,h);if(c&&c.code===i.code){Bi(i);const s=t.getAxes().filter((t=>{const i=t.ze.chartInteractions;return!(!1===i||"object"==typeof i&&!1===i.restorePrevious)}));t.restorePreviousZoomState({whitelist:s});const e=c.on;e&&ni.requestAnimationFrame((()=>e({event:i})))}const u=Te(n.paginate,void 0,i,s,e,h);u&&((t,i,s)=>{var e,h,r,n;const o=null!==(h=null===(e=s.forward)||void 0===e?void 0:e.code)&&void 0!==h?h:"ArrowLeft",a=null!==(n=null===(r=s.backward)||void 0===r?void 0:r.code)&&void 0!==n?n:"ArrowRight",l=i.code===o?1:i.code===a?-1:0;if(0===l)return;let c=!1;if(t.forEachAxis((t=>{var i;const e=t.ze.chartInteractions;!1===e||"object"==typeof e&&!1===e.paginate||t.isX&&!s.x||t.isY&&!s.y||(c=!0,!1!==s.stopScroll&&t.setStopped(!0),t.pan(-l*(t.Vh>t.zh?1:-1)*.5*t.ot.Si()*(null!==(i=s.sensitivity)&&void 0!==i?i:1)))})),c){Bi(i);const e=t.engine.setMouseStyle(!s.x&&s.y?tr.Vertical:s.x&&!s.y?tr.Horizontal:tr.Move);ni.setTimeout((()=>{t.engine.restoreMouseStyle(e)}),500);const h=s.on;h&&ni.requestAnimationFrame((()=>h({event:i})))}})(t,i,u);const d=Te(n.restoreDefault,void 0,i,s,e,h);if(d&&d.code===i.code){Bi(i),t.getAxes().forEach((t=>{var i,s;const e=t.ze.chartInteractions;!1===e||"object"==typeof e&&!1===e.restoreDefault||t.fit(null!==(i=d.animationsEnabled)&&void 0!==i?i:void 0,null!==(s=d.stopScroll)&&void 0!==s?s:void 0)}));const s=d.on;s&&ni.requestAnimationFrame((()=>s({event:i})))}},u=t=>{e=t.ctrlKey,s=t.shiftKey,h=t.altKey},d=()=>{e=!1,s=!1,h=!1};ni.addEventListener("keydown",c),ni.addEventListener("keyup",u),ni.addEventListener("blur",d),t.addEventListener("dispose",(()=>{ni.removeEventListener("keydown",c),ni.removeEventListener("keyup",u),ni.removeEventListener("blur",d)}));const f=()=>(A(),g(),v(),()=>{A=dd(t,"pointermove",o),g=dd(t,"pointerdown",a),v=fd(t,"pointerdown",l)});let A=dd(t,"pointermove",o),g=dd(t,"pointerdown",a),v=fd(t,"pointerdown",l);return{setUserInteractions:t=>{if(void 0===t)i={pan:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,restorePrevious:!1,axes:!1,xAxis:!1,yAxis:!1};else if(0===Object.keys(t).length)i={};else for(const s of Object.keys(t))!1===t[s]||"object"==typeof t[s]?i[s]=t[s]:i[s]={}},getUserInteractions:r}})(this)}get coordsAxis(){return{x:this.getDefaultAxisX(),y:this.getDefaultAxisY()}}getSeries(){return this._y}restorePreviousZoomState(t){if(this.om.length<=1)return this;this.om.pop();const i=this.om[this.om.length-1];return i?(this.S_=ni.performance.now(),this.forEachAxis((s=>{if((null==t?void 0:t.whitelist)&&!t.whitelist.includes(s))return;const e=i.get(s);e?s.ct(e.start,e.end,null==t?void 0:t.animate,void 0!==(null==t?void 0:t.stopAxisAfter)?t.stopAxisAfter:e.stopped,"userSetInterval"):s.fit(null==t?void 0:t.animate,null==t?void 0:t.stopAxisAfter)})),this):this}clearPreviousZoomStateHistory(){if(void 0!==this.Bm)this.om.length=0;else for(;this.om.length>1;)this.om.unshift();return this}setCursor(t){return this.Ug.setCursor(t),this}getCursor(){return this.Ug.getCursor()}setCursorMode(t){return this.Ug.setCursorMode(t),this}getCursorMode(){return this.Ug.getCursorMode()}setCustomCursor(t){return this.Ug.setCustomCursor(t),this}setCursorFormatting(t){return this.Ug.setCursorFormatting(t),this}getCursorFormatting(){return this.Ug.getCursorFormatting()}solveNearest(t,i=this.getCursorMode()||"show-nearest"){return this.Ug.solveNearest(t,i,this._y,this.c_)}addCursor(t=rd){const i=this.dA(),s=t.ag(i,this.h_,this.h_,this.nA(i),this._t);return s.mw=!0,this.SA(s),s}getMinimumSize(){const t={x:0,y:0};t.x+=this.oi.left+this.oi.right+this.nn.left+this.nn.right,t.y+=this.oi.top+this.oi.bottom+this.nn.top+this.nn.bottom;const i=this.Sh.hr().zu(),s=g(_d(this.if||wd),this._A);return t.x+=i.x+s.left+s.right,t.y+=i.y+s.top+s.bottom,this.b_&&(t.x+=this.b_.left,t.x+=this.b_.right,t.y+=this.b_.top,t.y+=this.b_.bottom),t.x+=gd.x,t.y+=gd.y,t}getLayout(){const t=this.x_;return this.St.M_()||!t?new Promise((t=>{this.addEventListener("layoutchange",t,{once:!0}),this.x_=void 0})):new Promise((i=>{i(t)}))}addAxisX(t){var i,s;const{opposite:e,type:h}=Le(t);let r;r="linear"===h.type?this.lA.d1({dimension:"x",scale1DConstructor:pe}):"linear-highPrecision"===h.type?this.lA.d1({dimension:"x",scale1DConstructor:pe}).Vi():this.lA.d1({dimension:"x",scale1DConstructor:le}).Fi(h.base),r.Z(this.h_.x.xi());const n=e?this.Yf:this.Hf,o=new Xo(this.y_,this.cf,this.CA,this.uf,this.df,this.St.vs,r,this.h_.y,(a=()=>o.Df(),{...Zo,...id(a)}),this,e?100:0,this.ff,this.A_,this._t,this.ah,h);var a;let l,c;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=n.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),c=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,c=null!==(s=t.iStack)&&void 0!==s?s:0),n.push({axis:o,iStack:c,iParallel:l}),this.St.Ls(),this.D.R("axisadd",{axis:o}),this.Lm(o),o}addAxisY(t){var i,s;const{opposite:e,type:h}=Le(t);let r;r="linear"===h.type?this.lA.d1({dimension:"y",scale1DConstructor:pe}):"linear-highPrecision"===h.type?this.lA.d1({dimension:"y",scale1DConstructor:pe}).Vi():this.lA.d1({dimension:"y",scale1DConstructor:le}).Fi(h.base),r.Z(this.h_.y.xi());const n=e?this.Xf:this.Wf,o=new Xo(this.y_,this.cf,this.CA,this.uf,this.df,this.St.vs,r,this.h_.x,(a=()=>o.Df(),{...Qo,...sd(a)}),this,e?100:0,this.ff,this.A_,this._t,this.ah,h);var a;let l,c;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=n.reduce(((t,i)=>Math.max(t,i.iParallel+1)),0),c=0):(l=null!==(i=t.iParallel)&&void 0!==i?i:0,c=null!==(s=t.iStack)&&void 0!==s?s:0),n.push({axis:o,iParallel:l,iStack:c}),this.St.Ls(),this.D.R("axisadd",{axis:o}),this.Lm(o),o}Lm(t){const i=()=>{void 0!==this.S_&&ni.performance.now()-this.S_<=1e3||t.getVisible()&&(this.Bm&&ni.clearTimeout(this.Bm),this.Bm=ni.setTimeout((()=>{this.lm(),this.Bm=void 0}),300))};ni.requestAnimationFrame((()=>{i()})),t.addEventListener("intervalchange",i),t.addEventListener("dispose",(()=>{this.om.forEach((i=>{i.delete(t)}))}))}swapAxes(t,i){const s=[this.Hf,this.Wf,this.Xf,this.Yf],e=s.find((i=>void 0!==i.find((i=>i.axis===t)))),h=s.find((t=>void 0!==t.find((t=>t.axis===i))));if(!e||!h)return this;if(e!==h)throw new Error("LightningChart JS ChartXY.swapAxes does not support swapping Axes that are on different sides.");const r=e.find((i=>i.axis===t)),n=e.find((t=>t.axis===i));if(!r||!n)return this;const o=r.iParallel,a=r.iStack;return r.iParallel=n.iParallel,r.iStack=n.iStack,n.iParallel=o,n.iStack=a,this.x_=void 0,this.St.Ls(),this}dispose(){return this.Ug.G(),this.v_.G(),this.Km.G(),this.cf.G(),this.y_.forEach((t=>t.G())),this.df.G(),this.uf.G(),this.Vw().forEach((t=>t.dispose())),Na(this.h_),this.Hf.slice().forEach((t=>t.axis.dispose())),this.Wf.slice().forEach((t=>t.axis.dispose())),this.Xf.slice().forEach((t=>t.axis.dispose())),this.Yf.slice().forEach((t=>t.axis.dispose())),this._y.slice().forEach((t=>{t.dispose()})),super.dispose()}getDefaultAxisX(){var t;return null===(t=[...this.Hf,...this.Yf].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}getDefaultAxisY(){var t;return null===(t=[...this.Wf,...this.Xf].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}getDefaultAxes(){return[this.getDefaultAxisX(),this.getDefaultAxisY()]}getAxes(...t){const i=t&&t.length>0?new Set(t):yd;return Ai(Array.from(i).map((t=>{switch(t){default:case vd.Top:return this.Yf.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis));case vd.Bottom:return this.Hf.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis));case vd.Left:return this.Wf.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis));case vd.Right:return this.Xf.slice().sort(((t,i)=>t.iStack-i.iStack)).map((t=>t.axis))}})))}w_(t){let i;return this.forEachAxisX((s=>{i=t===s?"x":i})),this.forEachAxisY((s=>{i=t===s?"y":i})),i}forEachAxisX(t){this.Hf.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.Yf.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}forEachAxisY(t){this.Wf.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis))))),this.Xf.forEach(((i,s,e)=>t(i.axis,s,e.map((t=>t.axis)))))}setTitlePosition(t){return this.if=t,this.St.Ls(),this}getTitlePosition(){return this.if}Le(t,i=!1){super.Le(t);for(const t of this._y)t.hy();for(const t of this._y)t.Le();const s=ss(this._y.map((t=>t.ba()))),e=new Set(s.map((t=>t.i_)));if(1===e.size){const t=Array.from(e)[0],i="x"===t?[this.Hf,this.Yf]:[this.Wf,this.Xf],s="y"===t?[this.Hf,this.Yf]:[this.Wf,this.Xf];i.forEach((t=>t.forEach((t=>t.axis.Er())))),s.forEach((t=>t.forEach((t=>t.axis.Er()))))}else this.Wf.forEach((t=>t.axis.Er())),this.Hf.forEach((t=>t.axis.Er())),this.Yf.forEach((t=>t.axis.Er())),this.Xf.forEach((t=>t.axis.Er()));let h=!1;this.forEachAxis((t=>{(t.Nr()||t.Gr())&&(h=!0)}));const n=!this.n_&&h,o=new Set(this.getAxes().map((t=>t.getStackIndex()))).size>1;this.Ug.Le(n,o?this._y.sort(((t,i)=>i.axisY.getStackIndex()-t.axisY.getStackIndex())):this._y,this.c_,{afterCursorPointedAt:t=>{const i=this.St.jo();if(t.length>1&&i){const t=this.St.pa(i);this.Ug.DA.rg({x:t.engineX,y:t.engineY},this.St.ot)}},overrideCursorPositions:(t,i)=>t.map((t=>t.multiHit?t.multiHit.map((i=>({...t.cursorPosition,pointMarker:i}))):[t.cursorPosition])).flat()});const a=(t,i,s,e,h={})=>{const r=Td(t);let n=0;return{parallels:r.parallels.map((t=>{const r=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()?i.axis.hf+i.axis.rf:0)),0),o=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"pixels"in i.axis.Id?i.axis.Id.pixels:0)),0),a=i-r-o;let l=0;const c=t.stacks.map((s=>{const r=s.axis,o=r.getVisible(),c=Math.max(i-l,0),u=Math.min(o?"pixels"in r.Id?r.Id.pixels:r.Id.relative/t.sumRelativeSize*a:0,c),d=e({...h,availableSpace:i,stack:s,axisLength:u,axisLengthOffset:l,axisThicknessOffset:n});return o&&(l+=u+r.hf+r.rf),{...d,stack:s,axis:r}})),u=c.reduce(((t,i)=>i.axis.getVisible()?Math.max(t,i.zf):t),0),d=c.reduce(((t,i)=>Math.max(t,i.Ef)),0);return c.forEach((t=>{t.Ef=d})),n+=u*s,{...t,stacks:c}})),thicknessTotal:Math.abs(n)}},l=this.getTitleFillStyle()!==V&&this.getTitle().length>0,c=l?this.Sh.hr().zu():{x:0,y:0},d=g(_d(this.if),this._A),f=l?Cd(this.if,c,d):us,A=this.h_.x.getCellSize()-(this.nn.left+this.nn.right+f.left+f.right),v=this.h_.y.getCellSize()-(this.nn.top+this.nn.bottom+f.bottom+f.top),y=new Map,p=t=>{const i={physicalAxisSize:t.axisLength,Of:t.axisLength,__:t.axisLengthOffset,Nf:t.axisThicknessOffset};return t.stack.axis.hr(i)},m=a(this.Wf,v,-1,p),S=a(this.Xf,v,1,p),b=a(this.Hf,A,-1,p),x=a(this.Yf,A,1,p),M=[this.nn.left+f.left+m.thicknessTotal,this.nn.right+f.right+S.thicknessTotal],w=[this.nn.bottom+b.thicknessTotal+f.bottom,this.nn.top+f.top+x.thicknessTotal],_=this.h_.x.getCellSize()-(M[0]+M[1]),C=this.h_.y.getCellSize()-(w[0]+w[1]);this.h_.x.W(0,_),this.h_.y.W(0,C),this.h_.x.yi(M),this.h_.y.yi(w);const k=[...m.parallels,...b.parallels,...S.parallels,...x.parallels].map((t=>t.stacks)).flat(),T=t=>{const i=t.stack.axis,s=k.find((t=>t.axis===i));if(!s)throw new Error("LightningChart JS unexpected runtime error");const e=i.getVisible()?t.margins[0]+t.axisLengthOffset+i.hf:0,h=i.getVisible()?t.margins[1]+(t.availableSpace-t.axisLengthOffset)-t.axisLength-i.hf:0;i.ot.yi([e,h]);const r=t.stack.axis.Le(s);return y.set(t.stack.axis,r),s},F=A-(m.thicknessTotal+S.thicknessTotal),I=v-(b.thicknessTotal+x.thicknessTotal);a(this.Wf,I,-1,T,{margins:w}),a(this.Xf,I,1,T,{margins:w}),a(this.Hf,F,-1,T,{margins:M}),a(this.Yf,F,1,T,{margins:M}),this.b_={left:m.thicknessTotal,top:x.thicknessTotal,right:S.thicknessTotal,bottom:b.thicknessTotal};const P={chartWidth:this.h_.x.getCellSize(),chartHeight:this.h_.y.getCellSize(),viewportWidth:_,viewportHeight:C,margins:{left:M[0],right:M[1],bottom:w[0],top:w[1]},axes:y},L=this.x_;if(i)this.D.R("layoutchange",{...P,userChangedLayout:()=>{}});else if(!L||Math.abs(L.chartWidth-P.chartWidth)>=1||Math.abs(L.chartHeight-P.chartHeight)>=1||Math.abs(L.viewportWidth-P.viewportWidth)>=1||Math.abs(L.viewportHeight-P.viewportHeight)>=1||this.getAxes().find((t=>{var i,s,e,h,r,n,o,a,l,c,u,d;const f=L.axes.get(t),A=P.axes.get(t);if(Math.abs((null!==(i=null==f?void 0:f.width)&&void 0!==i?i:0)-(null!==(s=null==A?void 0:A.width)&&void 0!==s?s:0))>=1||Math.abs((null!==(e=null==f?void 0:f.height)&&void 0!==e?e:0)-(null!==(h=null==A?void 0:A.height)&&void 0!==h?h:0))>=1||Math.abs((null!==(r=null==f?void 0:f.left)&&void 0!==r?r:0)-(null!==(n=null==A?void 0:A.left)&&void 0!==n?n:0))>=1||Math.abs((null!==(o=null==f?void 0:f.right)&&void 0!==o?o:0)-(null!==(a=null==A?void 0:A.right)&&void 0!==a?a:0))>=1||Math.abs((null!==(l=null==f?void 0:f.bottom)&&void 0!==l?l:0)-(null!==(c=null==A?void 0:A.bottom)&&void 0!==c?c:0))>=1||Math.abs((null!==(u=null==f?void 0:f.top)&&void 0!==u?u:0)-(null!==(d=null==A?void 0:A.top)&&void 0!==d?d:0))>=1)return t}))){let i=!1;const s=()=>{i=!0};if(this.D.R("layoutchange",{...P,userChangedLayout:s}),this.hA||i)return this.engine.layout(),this.f_({width:this.uiScale.xi().x,height:this.uiScale.xi().y,engineWidth:this.St.ot.xi().x,engineHeight:this.St.ot.xi().y}),this.hA=!0,void this.Le(t,!0)}this.x_=P,this.Iy.Be(r(0,0)).Z(r(_,C)),this.Py.Be(r(0,0)).Z(r(_,C));const B=kd(this.if,c,d,this.uiScale.hs(),this.nn,M,w);this.Sh.Be(B.position).nl(B.horizontalAlignment).ll(B.verticalAlignment);const D=u(this.h_.x.pi(),this.h_.y.pi(),this.h_.x.Si(),this.h_.y.Si());this.Km.dm(D),this.uf.dm(D),this.df.dm(D),this.iA&&this.iA(),super.xA();for(const t of this._y)t.vv()}m_(t){const i=ss(this._y.map((t=>t.ba()))),s=new Set(i.map((t=>t.i_)));if(1===s.size){const e=Array.from(s)[0],h="x"===e?[this.Hf,this.Yf]:[this.Wf,this.Xf],r="y"===e?[this.Hf,this.Yf]:[this.Wf,this.Xf];h.forEach((i=>i.forEach((i=>{const s=t.get(i.axis);s&&i.axis.fit(s.animate,s.stopAxisAfter)})))),i.forEach((t=>t.s_())),r.forEach((i=>i.forEach((i=>{const s=t.get(i.axis);s&&(i.axis.getScrollStrategy()&&void 0===i.axis.getDefaultInterval()?i.axis.setStopped(!1):i.axis.fit(s.animate,s.stopAxisAfter))}))))}else t.forEach(((t,i)=>i.fit(null==t?void 0:t.animate,null==t?void 0:t.stopAxisAfter)))}H(){for(let t=0;t<this.Hf.length;t+=1)this.Hf[t].axis.H();for(let t=0;t<this.Yf.length;t+=1)this.Yf[t].axis.H();for(let t=0;t<this.Wf.length;t+=1)this.Wf[t].axis.H();for(let t=0;t<this.Xf.length;t+=1)this.Xf[t].axis.H();return super.H()}g_(t){if(this.r_.has(t))return this.r_.get(t);throw new Error("No attach handler for axis Make sure that passed axes definitely belong to this chart and that they haven't been disposed of.")}addLineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);let e=Zu.freeform;t&&t.dataPattern&&(e="ProgressiveX"===t.dataPattern.pattern?Zu.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?Zu.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?Zu.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?Zu.verticalRegressive:Zu.freeform);const h=new od(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,e,this._t,this.St.vs,kl(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,t);return this.Ly(h),h}addPointLineAreaSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=new cd(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,t);return this.Ly(e),e}addPointSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=t&&t.pointShape&&Object.values(Oe).includes(t.pointShape)?"string"==typeof t.pointShape?Oe[t.pointShape]:t.pointShape:Oe.Square,h=new ad(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,e,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,t);return this.Ly(h),h}addPointLineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=t&&t.pointShape&&Object.values(Oe).includes(t.pointShape)?"string"==typeof t.pointShape?Oe[t.pointShape]:t.pointShape:Oe.Square;let h=Zu.freeform;t&&t.dataPattern&&(h="ProgressiveX"===t.dataPattern.pattern?Zu.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?Zu.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?Zu.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?Zu.verticalRegressive:Zu.freeform);const r=new Du(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,h,e,this._t,this.St.vs,kl(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,t);return this.Ly(r),r}addStepSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=t&&t.pointShape?t.pointShape:Oe.Square,h=t&&t.mode?t.mode:Iu.before,r=new Qu(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,e,h,this._t,this.St.vs,kl(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,t);return this.Ly(r),r}addSplineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=t&&t.pointShape?t.pointShape:Oe.Square;let h=Zu.freeform;t&&t.dataPattern&&(h="ProgressiveX"===t.dataPattern.pattern?Zu.horizontalProgressive:"RegressiveX"===t.dataPattern.pattern?Zu.horizontalRegressive:Zu.freeform);const r=new Vu(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,h,e,this._t,this.St.vs,kl(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,t);return this.Ly(r),r}addRectangleSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=new uu(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length);return this.Ly(e),e}addPolygonSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY(),e=new lu(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length);return this.Ly(e),e}addSegmentSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=new fu(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length);return this.Ly(e),e}addEllipseSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=new ou(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length);return this.Ly(e),e}addBoxSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=t&&t.dimensionStrategy?t.dimensionStrategy:Zo,h=new ru(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,e,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length);return this.Ly(h),h}addTextSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=new vu(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length);return this.Ly(e),e}addHeatmapGridSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new pu(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,t,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length),this.Ly(e),e}addHeatmapScrollingGridSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let e;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return e=new Su(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,t,this._t,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length),this.Ly(e),e}addOHLCSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();md(i,s);const e=new(t&&t.type?t.type:td.Candlesticks)(this,this.ky,this.Km,i,s,this.g_(i),this.g_(s),this.dA,this._t,this.St.vs);return this.Ly(e),e}addOnScreenMenu(t,i){return new ld(this.aA,t,this,i)}setZoomingRectangleFillStyle(t){return this.a_="function"==typeof t?t(this.a_):t,this.St.Ls(),this}getZoomingRectangleFillStyle(){return this.a_}setZoomingRectangleStrokeStyle(t){return this.l_="function"==typeof t?t(this.l_):t,this.St.Ls(),this}getZoomingRectangleStrokeStyle(){return this.l_}addLegendBox(t,i){const s=super.addLegendBox(t,i);if(void 0===i||i===this.uiScale)if(void 0===t||"vertical"===t.getAlignment())s.setOrigin(ir.RightCenter).setPosition({x:this.uiScale.x.rt(this.uiScale.x.mi()-this.nn.right),y:nt(this.h_.y.rt(this.h_.y.pi()+this.h_.y.Si()/2),this.h_.y,this.uiScale.y)});else{const t=this.if||wd,i=Cd(t,this.getTitleFillStyle()===V||0===this.getTitle().length?{x:0,y:0}:this.Sh.hr().zu(),g(_d(t),this._A)).top+this.nn.top;s.setOrigin(ir.RightTop).setPosition(ot({x:this.xf.x.getInnerEnd()-this.nn.right,y:this.xf.y.getInnerEnd()-i},this.xf,this.uiScale))}return s}pan(t){this.forEachAxisX((i=>{i.setStopped(!0).pan(t.x)})),this.forEachAxisY((i=>{i.setStopped(!0).pan(t.y)}))}zoom(t,i){this.forEachAxis(pd),this.forEachAxisX((s=>{s.zoom(s.ot.rt(t.x),i.x)})),this.forEachAxisY((s=>{s.zoom(s.ot.rt(t.y),i.y)}))}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.forEachAxis((i=>i.setAnimationsEnabled(t))),this}Gd(){const t=[];return this.forEachAxis((i=>i.If((i=>t.push(i))))),super.Gd().concat(t)}Vw(){return this.o_}be(){return this.FA(this.Km)}setCursorEnabledDuringAxisAnimation(t){return this.n_=t,this}getCursorEnabledDuringAxisAnimation(){return this.n_}forEachAxis(t){return this.forEachAxisX(t),this.forEachAxisY(t),this}translateCoordinate(t,i,s){if(s){const e=t,h=i,r=Jo(h)?h:Ce(h)?this.xf:void 0;if(r&&we(s)){const t=ot(e,r,this.St.ot);return this.St.ma({engineX:t.x,engineY:t.y})}if(r&&Ce(s))return ot(e,r,this.xf);if(r&&Jo(s))return ot(e,r,s)}else{const s=t;if(Ce(i)){const t=this.St.pa(s);return ot({x:t.engineX,y:t.engineY},this.St.ot,this.xf)}if(Jo(i)){const t=i,e=this.St.pa(s);return ot({x:e.engineX,y:e.engineY},this.St.ot,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addEventListener(t,i,s){this.D.addEventListener(t,i,s),"layoutchange"===t&&this.x_&&i({...this.x_,userChangedLayout:()=>{}})}removeEventListener(t,i){this.D.removeEventListener(t,i)}setUserInteractions(t){return this.Tm.setUserInteractions(t),this}getUserInteractions(){return this.Tm.getUserInteractions()}}!function(t){t.CenterTop="center-top",t.RightTop="right-top",t.LeftTop="left-top",t.CenterBottom="center-bottom",t.RightBottom="right-bottom",t.LeftBottom="left-bottom",t.SeriesCenterTop="series-center-top",t.SeriesRightTop="series-right-top",t.SeriesLeftTop="series-left-top",t.SeriesCenterBottom="series-center-bottom",t.SeriesRightBottom="series-right-bottom",t.SeriesLeftBottom="series-left-bottom"}(xd||(xd={}));const wd=xd.CenterTop,_d=t=>{switch(t){case"center-top":case"series-center-bottom":return{left:0,right:0,top:0,bottom:5};case"left-top":return{left:20,right:0,top:0,bottom:5};case"right-top":return{left:0,right:20,top:0,bottom:5};case"center-bottom":return{left:0,right:0,top:0,bottom:0};case"left-bottom":return{left:20,right:0,top:0,bottom:0};case"right-bottom":return{left:0,right:20,top:0,bottom:0};case"series-center-top":return{left:0,right:0,top:5,bottom:0};case"series-left-top":return{left:5,right:0,top:5,bottom:0};case"series-right-top":return{left:0,right:5,top:5,bottom:0};case"series-left-bottom":return{left:5,right:0,top:0,bottom:5};case"series-right-bottom":return{left:0,right:5,top:0,bottom:5}}return rs(0,`Unexpected ChartXY title position selection ${t}`)},Cd=(t,i,s)=>{switch(t){case"center-top":case"left-top":case"right-top":return{top:i.y+s.top+s.bottom,right:0,bottom:0,left:0};case"center-bottom":case"left-bottom":case"right-bottom":return{bottom:i.y+s.top+s.bottom,right:0,left:0,top:0};default:return us}},kd=(t,i,s,e,h,r,n)=>{const o=(s.left-s.right)*e.x,a=(s.bottom-s.top)*e.y;switch(t){case"center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-(h.top+s.top)*e.y}};case"left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:o,y:100-(h.top-s.top)*e.y}};case"right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100+o,y:100-(h.top-s.top)*e.y}};case"center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50+o,y:(h.bottom+s.bottom)*e.y}};case"left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:o,y:(h.bottom+s.bottom)*e.y}};case"right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100+o,y:(h.bottom+s.bottom)*e.y}};case"series-center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-n[1]*e.y+a}};case"series-left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:r[0]*e.x+o,y:100-n[1]*e.y+a}};case"series-right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100-r[1]*e.x+o,y:100-n[1]*e.y+a}};case"series-center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50,y:n[0]*e.y+a}};case"series-left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:r[0]*e.x+o,y:n[0]*e.y+a}};case"series-right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100-r[1]*e.x+o,y:n[0]*e.y+a}}}return rs(0,`Unexpected ChartXY title position selection ${t}`)},Td=t=>{const i=[];t.forEach(((t,s)=>{const e=i.find((i=>i.iParallel===t.iParallel));e?(e.stacks.push({...t}),e.stacks.sort(((t,i)=>t.iStack-i.iStack))):i.push({iParallel:t.iParallel,stacks:[{...t}]})}));const s=i.map((t=>{const i=t.stacks.reduce(((t,i)=>t+(i.axis.getVisible()&&"relative"in i.axis.Id?i.axis.Id.relative:0)),0);return{...t,sumRelativeSize:i}}));return s.sort(((t,i)=>t.iParallel-i.iParallel)),{parallels:s}},Fd=(t,i,s)=>{var e;const h=Array.from(new Set(s.map((t=>t.series.Ms())))),r=1===h.length&&void 0!==h[0]?h[0]:void 0,n="ProgressiveY"===r||"RegressiveY"===r?{progressiveDimension:"Y",progressiveAxis:i.axisY,valueDimension:"X",hitValueAxis:t=>t.axisX,value:t=>t.x,position:t=>t.y}:{progressiveDimension:"X",progressiveAxis:i.axisX,valueDimension:"Y",hitValueAxis:t=>t.axisY,value:t=>t.y,position:t=>t.x},o=n.progressiveAxis.getTickStrategy();return ft(i)?Xa(i,[[{component:i.series,componentColor:Wa(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[t.getDefaultAxisX().getTitle()||"X","",{text:Pe(i.axisX.formatValue(i.x),i.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:Pe(i.axisY.formatValue(i.y),i.axisY),font:{weight:"bold"}}],void 0!==i.intensity?["Value","",{text:Pe(i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]:[]]):1===s.length?"Time"===o||"DateTime"===o?i.multiHit?[[{text:Pe(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],...Xa(i,[[{component:i.series,componentColor:Wa(i)},""],[`${n.valueDimension}1`,"",{text:Pe(n.hitValueAxis(i).formatValue(n.value(i.multiHit[0])),n.hitValueAxis(i)),font:{weight:"bold"}}],[`${n.valueDimension}2`,"",{text:Pe(n.hitValueAxis(i).formatValue(n.value(i.multiHit[1])),n.hitValueAxis(i)),font:{weight:"bold"}}]])]:[[{text:Pe(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],...Xa(i,[[{component:i.series,componentColor:Wa(i)},"",{text:Pe(n.hitValueAxis(i).formatValue(n.value(i)),n.hitValueAxis(i)),font:{weight:"bold"}}]])]:i.multiHit?Xa(i,[[{component:i.series,componentColor:Wa(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[n.progressiveDimension,"",{text:Pe(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),font:{weight:"bold"}}],[`${n.valueDimension}1`,"",{text:Pe(n.hitValueAxis(i).formatValue(n.value(i.multiHit[0])),n.hitValueAxis(i)),font:{weight:"bold"}}],[`${n.valueDimension}2`,"",{text:Pe(n.hitValueAxis(i).formatValue(n.value(i.multiHit[1])),n.hitValueAxis(i)),font:{weight:"bold"}}]]):Xa(i,[[{component:i.series,componentColor:Wa(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[n.progressiveDimension,"",{text:Pe(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),font:{weight:"bold"}}],[n.valueDimension,"",{text:Pe(n.hitValueAxis(i).formatValue(n.value(i)),n.hitValueAxis(i)),font:{weight:"bold"}}]]):r?[[{text:Pe(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],...s.map((t=>t.multiHit?Xa(t,[[{component:t.series,componentColor:Wa(t)},""],[`${n.valueDimension}1`,"",{text:Pe(n.hitValueAxis(t).formatValue(n.value(t.multiHit[0])),n.hitValueAxis(t)),font:{weight:"bold"}}],[`${n.valueDimension}2`,"",{text:Pe(n.hitValueAxis(t).formatValue(n.value(t.multiHit[1])),n.hitValueAxis(t)),font:{weight:"bold"}}]]):Xa(t,[[{component:t.series,componentColor:Wa(t)},"",{text:Pe(n.hitValueAxis(t).formatValue(n.value(t)),n.hitValueAxis(t)),font:{weight:"bold"}}]]))).flat()]:s.map((i=>Xa(i,[[{component:i.series,componentColor:Wa(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[n.progressiveDimension,"",{text:Pe(n.progressiveAxis.formatValue(n.position(i)),n.progressiveAxis),font:{weight:"bold"}}],[n.valueDimension,"",{text:Pe(n.hitValueAxis(i).formatValue(n.value(i)),n.hitValueAxis(i)),font:{weight:"bold"}}]]))).flat()},Id=t=>t instanceof eu||t instanceof Mu||t instanceof Fu||t instanceof pu||t instanceof Ju||t instanceof Qu||t instanceof cd;class Pd{constructor(t,i,s,e,h,r,n){this.coordsRelative="relative",this.coordsClient="client",this.C_=[],this.k_=new Map,this._y=new Map,this.T_=new Set,this.F_=()=>{this.I_.St.Ls()},this.P_=(t,i,s)=>{0!==this._y.size&&void 0!==[...this._y.values()].find((({series:t})=>!0===t.getVisible()))||this.L_.ct(i,s,!1,!1,"zoomBandChart"),this.I_.St.Ls()},this.B_=!0,this.D=new zt,i.St.Zo(Gr.Xn),this.aA=t,this.D_=(null==r?void 0:r.orientation)||"x",this.E_=void 0!==(null==r?void 0:r.useSharedValueAxis)&&r.useSharedValueAxis,this.R_=e,this.Sn="x"===this.D_?Zo:Qo;const o={...r,defaultAxisX:this.Sn.getWidth({x:null==r?void 0:r.defaultAxis,y:void 0}),defaultAxisY:this.Sn.getHeight({x:null==r?void 0:r.defaultAxis,y:void 0})};this.I_=new Md(t,i,s,ui,h,o,n).setTitle("Zoom Band Chart").setUserInteractions(void 0).setCursorMode(void 0),this.engine=this.I_.engine;const a=this.I_.getDefaultAxisX().setPointerEvents(!1),l=this.I_.getDefaultAxisY().setPointerEvents(!1);this.L_=this.Sn.getWidth({x:a,y:l}).setScrollStrategy(fr.fitting).setAnimationScroll(!1).setStrokeStyle(Wt).setTickStrategy(Ar.Empty),(null==r?void 0:r.useSharedValueAxis)?this.z_=this.Sn.getHeight({x:a,y:l}):this.Sn.getHeight({x:a,y:l}).dispose();const c=this.getTheme().zoomBandChartDefocusOverlayFillStyle||new $({color:this.getTheme().isDark?m(0,0,0,180):m(255,255,255,180)});this.V_=[this.I_.cf.Pe(this.L_.Sf).Ie(c).Fe(Wt),this.I_.cf.Pe(this.L_.Sf).Ie(c).Fe(Wt)];const u=this.I_.cf.Gf(this.L_.Sf).Ne(this.getTheme().zoomBandChartSplitterStrokeStyle||this.getTheme().chartXYSeriesBackgroundStrokeStyle);this.O_={collection:u,members:new Array(5).fill(0).map((t=>u.lo()))};const d=this.getTheme(),f="function"==typeof d.zoomBandChartKnobFillStyle?ri({resourcesBaseUrl:this.aA.Qs,styleFactory:d.zoomBandChartKnobFillStyle,apply:t=>this.setKnobFillStyle(t)}):d.zoomBandChartKnobFillStyle||V;this.N_=[this.I_.cf.Pe(this.I_.xf).Ie(f).Fe(Wt),this.I_.cf.Pe(this.I_.xf).Ie(f).Fe(Wt)],this.G_=this.getTheme().zoomBandChartKnobSize||{x:0,y:0},this.U_()}setUserInteractions(t){return this.ze=void 0===t?{pan:{drag:!1,click:!1},zoom:{wheel:void 0,dragKnob:!1}}:t,this}getUserInteractions(){return hi({pan:{drag:!0,click:!0},zoom:{wheel:{},dragKnob:!0}},this.ze)}add(t){var i,s,e,h,r;this.T_.has(t.chart)||(this.T_.add(t.chart),t.chart.addEventListener("layoutchange",this.F_));const n=this.C_.map((t=>t.axis)),o="x"===this.D_?t.axisX:t.axisY;if(!n.includes(o)){const t=t=>{this.P_(o,t.start,t.end)};o.addEventListener("intervalchange",t),this.C_.push({axis:o,deattach:()=>{o.removeEventListener("intervalchange",t)}}),this.L_.Kh(o.Jh(),o.getTickStrategy()),this.Y_&&this.Y_.remove(),this.Y_=ut(...this.C_.map((t=>t.axis)))}const a=this.Sn.getHeight({x:t.axisX,y:t.axisY});let l;if(this.E_)l=this.z_;else{const t=this.k_.get(a);t?l=t:(l=this.Sn.getHeight({x:this.I_.addAxisX.bind(this.I_),y:this.I_.addAxisY.bind(this.I_)})(),this.H_(l)),this.k_.set(a,l)}const c=this.Sn.getWidth({x:this.L_,y:l}),u=this.Sn.getHeight({x:this.L_,y:l});let d;const f=[],A=(t,i)=>{const s=t=>{if(0!==t.length)if("x"in t[0]){const s=t;i.add(s)}else{const s=t,e=[];for(let t=0;t<s.length;t+=1){const i=s[t];e.push({x:i[0],y:i[4]})}i.add(e)}},e=t.Zb();s(e);const h=t=>{s(t.data)},r=()=>{i.clear()};t.addEventListener("dataadd",h),t.addEventListener("dataclear",r),f.push((()=>{t.removeEventListener("dataadd",h),t.removeEventListener("dataclear",r)}))};if(t instanceof cd)d=this.I_.addPointLineAreaSeries({...t.Ko,axisX:c,axisY:u,xAxis:c,yAxis:u}).setStrokeStyle(t.getStrokeStyle()).setAreaFillStyle(t.getAreaFillStyle()).setPointFillStyle(t.getPointFillStyle()).setPointAlignment(t.getPointAlignment()).setPointRotation(t.getPointRotation()).setPointShape(t.getPointShape()).setPointSize(t.getPointSize()).setCurvePreprocessing(t.getCurvePreprocessing()),d.setDataSet(t.t_());else if(t instanceof od||t instanceof Ju){const s=this.I_.addLineSeries({axisX:c,axisY:u,xAxis:c,yAxis:u,dataPattern:t instanceof od?null===(i=t.Ko)||void 0===i?void 0:i.dataPattern:void 0});if(t instanceof od)s.setStrokeStyle(t.getStrokeStyle());else{const i=Ld(t);i&&s.setStrokeStyle(i)}A(t,s),d=s}else if(t instanceof _u){const i=this.I_.addAreaSeries({axisX:c,axisY:u,xAxis:c,yAxis:u,baseline:t.eM}).setFillStyle(t.getFillStyle()).setStrokeStyle(t.getStrokeStyle());A(t,i),d=i}else if(t instanceof ad){const i=this.I_.addPointSeries({axisX:c,axisY:u,xAxis:c,yAxis:u,pointShape:null===(s=t.Ko)||void 0===s?void 0:s.pointShape}).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof Qu){const i=this.I_.addStepSeries({axisX:c,axisY:u,xAxis:c,yAxis:u,pointShape:null===(e=t.Ko)||void 0===e?void 0:e.pointShape,mode:t._M}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof Vu){const i=this.I_.addSplineSeries({axisX:c,axisY:u,xAxis:c,yAxis:u,pointShape:null===(h=t.Ko)||void 0===h?void 0:h.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof Du){const i=this.I_.addSplineSeries({axisX:c,axisY:u,xAxis:c,yAxis:u,pointShape:null===(r=t.Ko)||void 0===r?void 0:r.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());A(t,i),d=i}else if(t instanceof Fu){const i=this.I_.addAreaRangeSeries({axisX:c,axisY:u,xAxis:c,yAxis:u}).setLowFillStyle(t.getLowFillStyle()).setHighFillStyle(t.getHighFillStyle()).setLowStrokeStyle(t.getLowStrokeStyle()).setHighStrokeStyle(t.getHighStrokeStyle()).add(t.Zb()),s=t=>i.add(t.data);t.addEventListener("dataadd",s),f.push((()=>t.removeEventListener("dataadd",s))),d=i;const e=t=>i.clear();t.addEventListener("dataclear",e),f.push((()=>{t.removeEventListener("dataclear",e)}))}else{if(!(t instanceof yu))throw new Error("LightningChart JS Zoom Band Chart unsupported series type");{const i=this.I_.addHeatmapGridSeries({...t.gx,axisX:c,axisY:u,xAxis:c,yAxis:u}),s=()=>{i.setWireframeStyle(t.getWireframeStyle()).setIntensityInterpolation(t.getIntensityInterpolation()).setFillStyle(t.getFillStyle())};s(),d=i,t.mx(d);const e=t=>i.invalidateIntensityValues(t.value);t.addEventListener("stylechange",s),f.push((()=>{t.removeEventListener("invalidateintensity",e),t.removeEventListener("stylechange",s)}));const h=()=>{i.clear()};t.addEventListener("dataclear",h),f.push((()=>{t.removeEventListener("dataclear",h)}))}}d.setPointerEvents(!1);const g=t=>{d.setVisible(t.isVisible)};t.addEventListener("visiblechange",g),f.push((()=>{t.removeEventListener("visiblechange",g)}));const v=t=>{d.setHighlight(t.highlight)};f.push((()=>{t.addEventListener("highlightchange",v),t.removeEventListener("highlightchange",v)}));const y=()=>{this.disposeSeries(t)};return t.addEventListener("dispose",y),f.push((()=>{t.removeEventListener("dispose",y)})),this._y.set(t,{series:d,clearReferences:()=>f.forEach((t=>t()))}),d}disposeSeries(t){const i=this._y.get(t);if(i){const{clearReferences:s}=i;s(),this._y.delete(t),i.series.dispose();const e=this.Sn.getHeight({x:t.axisX,y:t.axisY}),h=this.k_.get(e);h&&0===h.Df().length&&(this.k_.delete(e),h.dispose())}const s="x"===this.D_?t.axisX:t.axisY;if(!Array.from(this._y.keys()).find((t=>s===("x"===this.D_?t.axisX:t.axisY)))){const t=this.C_.findIndex((t=>t.axis===s));this.C_[t].deattach(),this.C_.splice(t,1)}const e=Array.from(this._y.keys()).find((t=>t.chart==t.chart));return e||(t.chart.removeEventListener("layoutchange",this.F_),this.T_.delete(t.chart)),this}setDefocusOverlayFillStyle(t){return this.V_.forEach((i=>i.Ie(t))),this.I_.St.Ls(),this}getDefocusOverlayFillStyle(){return this.V_[0].$h()}setSplitterStrokeStyle(t){return this.O_.collection.Ne(t),this.I_.St.Ls(),this}getSplitterStrokeStyle(){return this.O_.collection.In()}setKnobFillStyle(t){return this.N_.forEach((i=>i.Ie(t))),this.I_.St.Ls(),this}getKnobFillStyle(){return this.N_[0].$h()}setKnobStrokeStyle(t){return this.N_.forEach((i=>i.Fe(t))),this.I_.St.Ls(),this}getKnobStrokeStyle(){return this.N_[0].da()}setKnobSize(t){return this.G_=t,this.I_.St.Ls(),this}getKnobSize(){return this.G_}getDefaultAxisX(){return this.I_.getDefaultAxisX()}getDefaultAxisY(){return this.I_.getDefaultAxisY()}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}H_(t){t.setTickStrategy(Ar.Empty).setPointerEvents(!1).setStrokeStyle(Wt)}U_(){let t;const i=(t,i,s)=>{var e,h;const r="x"===this.D_?null===(e=Array.from(this._y.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this._y.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=r.getInterval(),o=this.L_.getInterval();Math.abs(this.L_.ot.nt(t)-this.L_.ot.nt(i))<10||Math.sign(i-t)!==Math.sign(n.end-n.start)||Math.min(t,i)<Math.min(o.start,o.end)||Math.max(t,i)>Math.max(o.start,o.end)&&Math.max(n.start,n.end)<Math.max(t,i)||r.ct(t,i,s,!0,"zoomBandChart")};this.N_.forEach(((s,e)=>{s.addEventListener("pointerenter",(()=>{var i;(null===(i=this.getUserInteractions().zoom)||void 0===i?void 0:i.dragKnob)&&(t=this.engine.setMouseStyle(this.Sn.getWidth({x:tr.Horizontal,y:tr.Vertical}),t))})),s.addEventListener("pointerleave",(()=>{t=this.engine.restoreMouseStyle(t)})),s.addEventListener("pointerdown",(t=>{var s,h,r;if(!(null===(s=this.getUserInteractions().zoom)||void 0===s?void 0:s.dragKnob))return;const n="x"===this.D_?null===(h=Array.from(this._y.keys())[0])||void 0===h?void 0:h.axisX:null===(r=Array.from(this._y.keys())[0])||void 0===r?void 0:r.axisY;if(!n)return;Bi(t);const o=s=>{if(s.pointerId!==t.pointerId)return;Bi(s);const h=this.Sn.getWidth(this.I_.translateCoordinate(s,this.I_.coordsAxis)),r=n.getInterval(),o=0===e?h:r.start,a=1===e?h:r.end;i(o,a,!1)},a=i=>{i.pointerId===t.pointerId&&(Bi(i),ni.removeEventListener("pointermove",o),ni.removeEventListener("pointerup",a))};ni.addEventListener("pointermove",o),ni.addEventListener("pointerup",a)}))})),this.I_.seriesBackground.addEventListener("pointerenter",(()=>{var i;(null===(i=this.getUserInteractions().pan)||void 0===i?void 0:i.drag)&&(t=this.engine.setMouseStyle(tr.Move,t))})),this.I_.seriesBackground.addEventListener("pointerleave",(()=>{t=this.engine.restoreMouseStyle(t)}));const s=(t,s)=>{var e,h,r;if(!(null===(e=this.getUserInteractions().pan)||void 0===e?void 0:e.drag))return;const n="x"===this.D_?null===(h=Array.from(this._y.keys())[0])||void 0===h?void 0:h.axisX:null===(r=Array.from(this._y.keys())[0])||void 0===r?void 0:r.axisY;if(!n)return;const o=n.getInterval(),a=this.L_.ot.Pi(o.start,this.Sn.getWidth(t)),l=this.L_.ot.Pi(o.end,this.Sn.getWidth(t));i(a,l,!1),Bi(s)};this.I_.seriesBackground.addEventListener("pointerdown",(t=>{var i,e;if(!("x"===this.D_?null===(i=Array.from(this._y.keys())[0])||void 0===i?void 0:i.axisX:null===(e=Array.from(this._y.keys())[0])||void 0===e?void 0:e.axisY))return;Bi(t);let h=t;const r=i=>{if(i.pointerId!==t.pointerId)return;const e={x:i.clientX-h.clientX,y:h.clientY-i.clientY};h=i,s(e,i)},n=i=>{i.pointerId===t.pointerId&&(Bi(i),ps(),ni.removeEventListener("pointermove",r),ni.removeEventListener("pointerup",n))};ni.addEventListener("pointermove",r),ni.addEventListener("pointerup",n)})),this.I_.seriesBackground.addEventListener("wheel",(t=>{var s,e,h,r;const n=this.getUserInteractions();if(!(null===(s=n.zoom)||void 0===s?void 0:s.wheel))return;const o="x"===this.D_?null===(e=Array.from(this._y.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this._y.keys())[0])||void 0===h?void 0:h.axisY;if(!o)return;const a=o.getInterval(),l=this.L_.getInterval(),c=this.Sn.getWidth(this.I_.translateCoordinate(t,this.I_.coordsAxis)),u=this.L_.ot.nt(a.start),d=this.L_.ot.nt(a.end),f=this.L_.ot.nt(c),A=fi((f-u)/(d-u),0,1),g=.2*Math.abs(d-u)*(null!==(r=n.zoom.wheel.sensitivity)&&void 0!==r?r:1),v=A*g*-Math.sign(t.deltaY),y=(1-A)*g*Math.sign(t.deltaY),p=fi(this.L_.ot.Pi(a.start,v),l.start,l.end),m=fi(this.L_.ot.Pi(a.end,y),l.start,l.end);i(p,m,!1),Bi(t)})),this.V_.forEach(((s,e)=>{s.addEventListener("pointerenter",(()=>{var i;(null===(i=this.getUserInteractions().pan)||void 0===i?void 0:i.click)&&(t=this.engine.setMouseStyle(tr.Point,t))})),s.addEventListener("pointerleave",(()=>{t=this.engine.restoreMouseStyle(t)})),s.addEventListener("click",(t=>{var s,e,h;if(t.defaultPrevented)return;if(!(null===(s=this.getUserInteractions().pan)||void 0===s?void 0:s.click))return;const r="x"===this.D_?null===(e=Array.from(this._y.keys())[0])||void 0===e?void 0:e.axisX:null===(h=Array.from(this._y.keys())[0])||void 0===h?void 0:h.axisY;if(!r)return;const n=this.Sn.getWidth(this.I_.translateCoordinate(t,this.I_.coordsAxis)),o=r.getInterval(),a=this.L_.getInterval(),l=fi(n-(o.end-o.start)/2,Math.min(a.start,a.end),Math.max(a.start,a.end)-Math.abs(o.end-o.start)),c=l+(o.end-o.start);i(l,c,!0),Bi(t)}))}))}getSizePixels(){return this.I_.getSizePixels()}$r(t){this.I_.$r(t)}getMinimumSize(){return this.I_.getMinimumSize()}H(){return this.I_.H()}X(){return this.I_.X()}Le(t){var i,s,e,h;const r=is(Array.from(this._y.keys()).map((t=>t.chart))),n="x"===this.D_?null===(i=Array.from(this._y.keys())[0])||void 0===i?void 0:i.axisX:null===(s=Array.from(this._y.keys())[0])||void 0===s?void 0:s.axisY;if(this.B_)if("x"===this.D_){const t=r.reduce(((t,i)=>{const s=[];i.forEachAxisY((t=>{if(0!==t.vf)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.jf())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),i=r.reduce(((t,i)=>{const s=[];i.forEachAxisY((t=>{if(100!==t.vf)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.jf())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),s=r.reduce(((t,i)=>Math.max(t,i.getPadding().left)),0),h=r.reduce(((t,i)=>Math.max(t,i.getPadding().right)),0);this.I_.forEachAxisY((t=>t.setThickness(0))),null===(e=this.getDefaultAxisY())||void 0===e||e.setThickness(t),this.I_.setPadding({left:s+(0===r.length?10:0),right:h+i+(0===r.length?10:0)})}else{const t=r.reduce(((t,i)=>{const s=[];i.forEachAxisX((t=>{if(0!==t.vf)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.jf())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),i=r.reduce(((t,i)=>{const s=[];i.forEachAxisX((t=>{if(100!==t.vf)return;let i=s.find((i=>i.iParallel===t.getParallelIndex()));i||(i={iParallel:t.getParallelIndex(),maxHeight:0},s.push(i)),i.maxHeight=Math.max(i.maxHeight,t.jf())}));const e=s.reduce(((t,i)=>t+i.maxHeight),0);return Math.max(t,e)}),0),s=r.reduce(((t,i)=>Math.max(t,i.getPadding().bottom)),0),e=r.reduce(((t,i)=>Math.max(t,i.getPadding().top)),0);this.I_.forEachAxisX((t=>t.setThickness(0))),null===(h=this.getDefaultAxisX())||void 0===h||h.setThickness(t),this.I_.setPadding({bottom:s+(0===r.length?10:0),top:e+i+(0===r.length?10:0)})}this.I_.Le(t);const o=this.L_.getInterval().start,a=this.L_.getInterval().end,l=fi(n?n.getInterval().start:o,o,a),c=fi(n?n.getInterval().end:a,o,a),u=this.Sn.getHeight(this.I_.h_.getInnerIntervalPixels());this.V_[0].Be(this.Sn.toPoint(o,0)).Z(this.Sn.toPoint(l-o,u)),this.V_[1].Be(this.Sn.toPoint(c,0)).Z(this.Sn.toPoint(a-c,u)),this.O_.members[0].Uf(this.Sn.toPoint(o,u),this.Sn.toPoint(l,u)),this.O_.members[1].Uf(this.Sn.toPoint(l,u),this.Sn.toPoint(l,0)),this.O_.members[2].Uf(this.Sn.toPoint(l,0),this.Sn.toPoint(c,0)),this.O_.members[3].Uf(this.Sn.toPoint(c,0),this.Sn.toPoint(c,u)),this.O_.members[4].Uf(this.Sn.toPoint(c,u),this.Sn.toPoint(a,u));const d=ot(this.Sn.toPoint(l,u/2),this.L_.Sf,this.I_.xf),f=ot(this.Sn.toPoint(c,u/2),this.L_.Sf,this.I_.xf),A=this.G_;this.N_[0].Be({x:d.x-A.x/2,y:d.y-A.y/2}).Z({x:A.x,y:A.y}).Wh(this.Sn.getWidth({x:0,y:90})),this.N_[1].Be({x:f.x-A.x/2,y:f.y-A.y/2}).Z({x:A.x,y:A.y}).Wh(this.Sn.getWidth({x:0,y:90}))}setSeriesBackgroundFillStyle(t){return this.I_.setSeriesBackgroundFillStyle(t),this.I_.St.Ls(),this}getSeriesBackgroundFillStyle(){return this.I_.getSeriesBackgroundFillStyle()}setSeriesBackgroundStrokeStyle(t){return this.I_.setSeriesBackgroundStrokeStyle(t),this.I_.St.Ls(),this}getSeriesBackgroundStrokeStyle(){return this.I_.getSeriesBackgroundStrokeStyle()}setSeriesBackgroundEffect(t){return this.I_.setSeriesBackgroundEffect(t),this.I_.St.Ls(),this}getSeriesBackgroundEffect(){return this.I_.getSeriesBackgroundEffect()}getTheme(){return this.I_.getTheme()}setTitle(t){return this.I_.setTitle(t),this}getTitle(){return this.I_.getTitle()}setTitleFillStyle(t){return this.I_.setTitleFillStyle(t),this}getTitleFillStyle(){return this.I_.getTitleFillStyle()}setTitleFont(t){return this.I_.setTitleFont(t),this}getTitleFont(){return this.I_.getTitleFont()}setTitleMargin(t){return this.I_.setTitleMargin(t),this}getTitleMargin(){return this.I_.getTitleMargin()}setPadding(t){return void 0===t?this.B_=!0:(this.B_=!1,this.I_.setPadding(t),this.I_.forEachAxis((t=>t.setThickness(void 0)))),this.I_.St.Ls(),this}getPadding(){return this.I_.getPadding()}setBackgroundFillStyle(t){return this.I_.setBackgroundFillStyle(t),this}getBackgroundFillStyle(){return this.I_.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.I_.setBackgroundStrokeStyle(t),this}getBackgroundStrokeStyle(){return this.I_.getBackgroundStrokeStyle()}translateCoordinate(t,i,s){return Va(t,i,s,this.I_.xf,this.I_.St)}addUIElement(t,i){return this.I_.addUIElement(t,i)}addLegendBox(t,i){return this.I_.addLegendBox(t,i)}getLegendBoxes(){return this.I_.getLegendBoxes()}saveToFile(t,i,s){return this.I_.saveToFile(t,i,s),this}dispose(){return this.I_.dispose(),this.k_.clear(),this._y.clear(),this.R_(this),this}isDisposed(){return this.I_.isDisposed()}addEventListener(t,i,s){this.I_.addEventListener(t,i,s)}removeEventListener(t,i){this.I_.removeEventListener(t,i)}}const Ld=t=>{if("getStrokeStyle"in t)return t.getStrokeStyle();const i=(t=>t instanceof od||t instanceof _u?t.getStrokeStyle().getFillStyle():t instanceof ad||t instanceof Du?t.getPointFillStyle():void 0)(t);return i?new vh({thickness:2,fillStyle:i}):void 0};class Bd extends Xc{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Es="Point Series",this.JS=[],this.KS=!1,this.eb=3,this.Ga=0,this.D=new zt,this.Ce=Ji(this._t.polarPointSeriesFillStyle,r),this.qu=new $n({dataPattern:null}),this.vl=t.hd(e).Ne(Wt).ed(V).sd(this.Ce).rd(Oe.Circle).ud(this.eb).Bt(this.getHighlight()).td(this.qu),this.ws(this.vl)}solveNearest(t,i="show-nearest"){const s=this.chart.translateCoordinate(t,this.chart.coordsAxis),e=Nc([s],this.scale)[0],h=this.qu.Ru(e,Ha(i),this.scale,this.chart.xf);if(!h)return;const r=Uc(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Kt(t,i){return As({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}setData(t){return 0!==this.JS.length&&this.chart.St.Zo(Gr.qn),this.JS=$c(t),this.KS=!0,this.XS=Gc(this.JS),this.Ys.Ls(),this}setPointAlignment(t){return this.vl.Jw(t),this.chart.St.Ls(),this}getPointAlignment(){return this.vl.Kw()}setPointFillStyle(t){this.Ce="function"==typeof t?t(this.Ce):t;const i=this.Ce;return this.vl.sd(i),this.Ys.Ls(),this}getPointFillStyle(){return this.Ce}setPointSize(t){return this.eb=t,this.vl.ud(t),this.Ys.Ls(),this}getPointSize(){return this.eb}setPointShape(t){return this.vl.rd(t),this.chart.St.Ls(),this}getPointShape(){return this.vl.nd()}setPointRotation(t){return this.Ga=t,this.vl.od(t),this.Ys.Ls(),this}getPointRotation(){return this.Ga}Qv(){return this.qv&&this.JS.length>0&&this.getVisible()}De(t,i){t.Bt(i),this.Ys.Ls()}Le(){if(this.KS||this.scale.sb()){const t=Nc(this.JS,this.scale),i=zs(t);this.qu.clear().add(t),this.vl.Pt(i),this.KS=!1,this.vl.hr()}}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce})}$s(){return this.Ds||this.getPointShape()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Dd{constructor(t,i,s,e){this.X_=!1,this.D=new zt,this.he=t,this.W_=i,this._y=s,this.vl=e}setGeometry(t){return this.j_=t,this.X_=!0,this.he.St.Ls(),this}getGeometry(){return this.j_}setPointerEvents(t){return this.vl.setPointerEvents(t),this}dispose(){return this.vl.dispose(),this.W_(this),this.D.R("dispose",{}),this}setVisible(t){const i=this.vl.getVisible()!==t;return this.vl.setVisible(t),i&&this.D.R("visiblechange",{isVisible:t}),this.he.St.Ls(),this}getVisible(){return this.vl.getVisible()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Ed extends Xc{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Es="Polygon Series",this.Z_=[],this.Q_=[],this.J_=t=>{const i=this.Q_.indexOf(t);i>=0&&this.Q_.splice(i,1);const s=this.Z_.findIndex((i=>i===t.vl));s>=0&&this.Z_.splice(s,1),this.Ys.Ls()},this.D=new zt,this.Ce=Ji(this._t.polarPolygonSeriesFillStyle,r),this.ke=Ji(this._t.polarPolygonSeriesStrokeStyle,r)}solveNearest(t,i){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=hu(e,this.Z_,((t,i)=>{const s=t.Ru(i);if(s)return ot(s,this.scale,t.St.ot)}),Bs);if(!h)return;const r=ot(h[0],h[1].St.ot,this.scale);if(!this.K_(h[1]))return;const n=Uc(r,this.scale);return{cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this,...n}}Kt(t,i){return As({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}addPolygon(){const t=new Dd(this.chart,this.J_,this,this.q_());return this.Q_.push(t),t}setFillStyle(t){this.Ce="function"==typeof t?t(this.Ce):t;const i=this.Ce;for(const t of this.Z_)t.Ie(i);return this.Ys.Ls(),this}getFillStyle(){return this.Ce}setStrokeStyle(t){this.ke="function"==typeof t?t(this.ke):t;const i=this.ke;for(const t of this.Z_)t.Fe(i);return this.Ys.Ls(),this}getStrokeStyle(){return this.ke}Qv(){return this.qv&&void 0!==this.Q_.find((t=>void 0!==t.tC))&&this.getVisible()}Le(){this.Q_.forEach((t=>{(t.X_||this.scale.sb())&&t.iC&&(t.vl.Hl(Nc(t.iC,this.scale)),t.X_=!1,t.vl.hr())}))}hy(){super.hy();const t=c(bs,xs);this.Q_.forEach((i=>{if(!i.j_)return;const s=!i.X_&&i.iC?i.iC:$c(i.j_);i.iC=s;const e=!i.X_&&i.tC?i.tC:Gc(s);i.tC=e,t.min=Math.min(t.min,e.min),t.max=Math.max(t.max,e.max)})),this.XS=t}De(t,i){t.Bt(i),this.Ys.Ls()}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce,stroke:this.ke})}q_(){const t=this.Ys.Qc(this.scale,Fn.Simple).Ie(this.Ce).Fe(this.ke).Bt(this.getHighlight());return this.Z_.push(t),this.ws(t),t}K_(t){return this.Q_.find((i=>i.vl===t))}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class Rd extends Xc{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,n),this.Es="Area Series",this.JS=[],this.KS=!1,this.qS=!1,this.sC=!1,this.D=new zt,this.Ce=Ji(this._t.polarAreaSeriesFillStyle,r),this.ke=Ji(this._t.polarAreaSeriesStrokeStyle,r)}setData(t){0!==this.JS.length&&this.chart.St.Zo(Gr.qn);const i=(t=>{const i=[];let s,e,h=!1;for(let r=0;r<t.length;r+=1){const n=t[r];let o=!0;if(s){o=!1;const t=n.angle-s.angle;if(di(t,0))o=!0;else{const i=Math.sign(t);void 0===e?(e=i,o=!0):e===i&&(o=!0)}}o?i.push(n):h=!0,s=n}return{progressivePoints:i,userDataModified:h}})(t);return i.userDataModified&&!1===this.sC&&(console.warn(`${this.Es} setData data format is faulty. Consecutive 'angle' values should progress in the same direction! Invalid data points have been removed.`),this.sC=!0),this.JS=i.progressivePoints,this.KS=!0,this.XS=Gc(this.JS),this.Ys.Ls(),this}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.Ys.Ls(),this}getFillStyle(){return this.Ce}setStrokeStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.Ys.Ls(),this}getStrokeStyle(){return this.ke}setConnectDataAutomaticallyEnabled(t){return this.qS=t,this.Ys.Ls(),this}getConnectDataAutomaticallyEnabled(){return this.qS}Qv(){return this.qv&&this.JS.length>0&&this.getVisible()}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce,stroke:this.ke})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class zd extends Rd{constructor(t,i,s,e,h,r,n){super(t,i,s,e,h,r,n),this.HS=this.Ys.Qc(this.scale,Fn.Simple).Bt(this.getHighlight()),this.ws(this.HS)}solveNearest(t,i){const s=this.chart.St.pa(t),e={x:s.engineX,y:s.engineY},h=this.HS.Ru(e);if(!h)return;const r=Uc(h,this.scale);return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,...r}}Kt(t,i){return As({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(i,this.chart.getCursorMode())))}Le(){if(this.KS||this.scale.sb()){const t=this.JS,i=!0===this.qS?Nc(t,this.scale):[...Nc(t,this.scale),{x:0,y:0}];this.HS.Hl(i).Ie(this.Ce).Fe(this.ke),this.KS=!1,this.HS.hr()}}De(t,i){t.Bt(i),this.Ys.Ls()}}class Vd extends Se{constructor(){super(...arguments),this.es="RadialScale",this.eC={start:0,end:1},this.hC=!1,this.rC=0,this.Y=r(0,0),this.nC=[0,0],this.oC=[0,0],this.o=!0,this.Ei=!0,this.aC=!0,this.lC=!0,this.cC={x:0,y:0},this.ki={x:{displacement:0,scaling:0,highPrecisionOffset:0},y:{displacement:0,scaling:0,highPrecisionOffset:0}}}IS(t,i){return t===this.eC.start&&i===this.eC.end||(this.eC={start:t,end:i},this.aC=!0,this.uC()),this}FS(){return this.eC}TS(){return this.eC.end>=this.eC.start}VS(t){this.hC=t,this.lC=!0}NS(){return!1===this.hC}OS(t){this.rC=t,this.lC=!0}DS(){return this.rC}Li(){return this.Ei}Oi(){return!1}ht(t,i,s,e){return this.x=new pe(t.x,i.x,s.x,e?e.x:void 0),this.y=new pe(t.y,i.y,s.y,e?e.y:void 0),this}Bi(){return this.ki}sb(){return this.aC}dC(){return this.lC}hs(){return this.cC}H(){return this.o=!1,this.Ei=!1,this.aC=!1,this.lC=!1,this}X(){return this.o=!0,this.Ei=!0,this.aC=!0,this.lC=!0,this}Z(t,i){return"object"==typeof t?(this.Y.x=t.x,this.Y.y=t.y):(this.Y.x=t,this.Y.y=i),this.uC(),this}Ji(t){return this.nC=t,this.uC(),this}Ki(t){return this.oC=t,this.uC(),this}bi(){return r(this.nC[0]+this.nC[1],this.oC[0]+this.oC[1])}xi(){return this.Y}uC(){const t=this.eC,i=r(this.x.Mi(this.Y.x),this.y.Mi(this.Y.y)),s=this.nC[0]+this.nC[1],e=this.oC[0]+this.oC[1],h=Math.max(i.x-s,0),n=Math.max(i.y-e,0),o=.5*(h>n?n:h),a=[this.nC[0]+Math.max((h-2*o)/2,0),this.nC[1]+Math.max((h-2*o)/2,0)],l=[this.oC[0]+Math.max((n-2*o)/2,0),this.oC[1]+Math.max((n-2*o)/2,0)],c=Math.abs(t.end-t.start);this.x.Z(this.Y.x).yi(a).W(-c,c),this.y.Z(this.Y.y).yi(l).W(-c,c),this.cC={x:this.x.getPixelSize(),y:this.y.getPixelSize()},this.ki={x:this.x.Bi(),y:this.y.Bi()},this.X()}Pi(t,i){const s=this.hs();return{x:t.x+i.x*s.x,y:t.y+i.y*s.y}}rs(t,i,s,e){const h=this.hs(),r=Hs(t,i);return r.x*=e,r.y*=e,{x:t.x+s*h.x*r.x,y:t.y+s*h.y*r.y}}}class Od extends Jl{constructor(t,i,s,e,h,r,n){super(t,i,s,i.wA("polarChart bg",0),e,i.St._t.polarChartBackgroundFillStyle,i.St._t.polarChartBackgroundStrokeStyle,i.St._t.polarChartTitleFont,i.St._t.polarChartTitleFillStyle,i.St._t.polarChartTitleShadow,n),this.coordsClient="client",this.Kd=[],this.fC=t=>{this.vS.Z(t.engineWidth,t.engineHeight)},this.ef=zi(this.Kd),this.AC=t=>{this.Kd.push(t)},this.gC=()=>this._y,this.D=new zt,this.St.Zo(Gr.Yn),this.v_=i.bm("polarChart series bg",0),this.vC=i.Ng("polarChart axis gridlines",0),this.yC=i.Ng("polarChart series",1),this.pC=i.Ng("polarChart axis lines",2),this.mC=i.Ng("polarChart axis ticks",3),this.vS=s.d2({scaleXYConstructor:Vd}),this.addEventListener("resize",this.fC),this.Sh.Sr("Polar Chart"),this.Iy=this.v_.Yu(this.vS).Ie(this._t.polarChartSeriesBackgroundFillStyle).Fe(Wt).Bc(0).$e(360).zc(0),this.Py=this.v_.Yu(this.vS).Ie(V).Fe(this._t.polarChartSeriesBackgroundStrokeStyle).Bc(0).$e(360).zc(0),super.Fy(this.Iy,this.Py),this.MA(h,this.xf),this.SC=new Bc(this,this.vS,this._t,!1!==(null==r?void 0:r.animationsEnabled),this.vC,this.pC,this.mC,this.vs,this.gC),this.bC=new Ec(this,this.vS,this._t,!1!==(null==r?void 0:r.animationsEnabled),this.vC,this.pC,this.mC,this.vs),this.coordsAxis={axisAmplitude:this.SC,axisRadial:this.bC};const o=i.$g(),a=gi(r?r.cursorBuilder:void 0,fl);this.Ug=Qa(this,o,a.ag(o,this.uiScale,this.uiScale,ui,this._t),this,"show-nearest",Gd,((t,i)=>{const s=this.translateCoordinate(t,this.coordsClient);return Math.sqrt((s.clientX-i.clientX)**2+(s.clientY-i.clientY)**2)})),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled))}getSeries(){return this._y}setCursor(t){return this.Ug.setCursor(t),this}getCursor(){return this.Ug.getCursor()}setCursorMode(t){return this.Ug.setCursorMode(t),this}getCursorMode(){return this.Ug.getCursorMode()}setCustomCursor(t){return this.Ug.setCustomCursor(t),this}setCursorFormatting(t){return this.Ug.setCursorFormatting(t),this}getCursorFormatting(){return this.Ug.getCursorFormatting()}solveNearest(t,i=this.getCursorMode()||"show-nearest"){return this.Ug.solveNearest(t,i,this._y,((t,i,s)=>t.solveNearest(i,s)))}addCursor(t=fl){const i=this.dA(),s=t.ag(i,this.uiScale,this.uiScale,this.nA(i),this._t);return this.SA(s),s}translateCoordinate(t,i,s){if(s){const i=t,e=this.xf,h=s;if(we(h)){const t=ot(i,e,this.St.ot);return this.St.ma({engineX:t.x,engineY:t.y})}if(Ce(h))return i;if(Vc(h)){const t=ot(i,e,this.vS);return Uc(t,this.vS)}}else{const s=t,e=i;if(_e(s)){if(Vc(e)){const t=this.St.pa(s),i=ot({x:t.engineX,y:t.engineY},this.St.ot,this.vS);return Uc(i,this.vS)}if(we(e))return s;if(Ce(e)){const t=this.St.pa(s);return ot({x:t.engineX,y:t.engineY},this.St.ot,this.xf)}}else if(Oc(s)){if(Vc(e))return s;const t=Nc([s],this.vS)[0];if(we(e)){const i=ot(t,this.vS,this.St.ot),s={engineX:i.x,engineY:i.y};return this.St.ma(s)}if(Ce(e))return ot(t,this.vS,this.xf)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addLineSeries(t){const i=new jc(this.yC,this,this.ky,this.vS,this._t,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,this.St.vs);return this.Ly(i),i}addPointSeries(t){const i=new Bd(this.yC,this,this.ky,this.vS,this._t,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,this.St.vs);return this.Ly(i),i}addPointLineSeries(t){const i=new Zc(this.yC,this,this.ky,this.vS,this._t,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,this.St.vs);return this.Ly(i),i}addAreaSeries(t){const i=new zd(this.yC,this,this.ky,this.vS,this._t,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,this.St.vs);return this.Ly(i),i}addPolygonSeries(t){const i=new Ed(this.yC,this,this.ky,this.vS,this._t,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,this.St.vs);return this.Ly(i),i}addHeatmapSeries(t){const i=new Wc(this.yC,this,this.ky,this.vS,this._t,this.St.vs,t);return this.Ly(i),i}addSector(){const t=new Yc(this.yC,this,this.ef,this.vS,this._t,this.St.vs);return this.AC(t),t}getAmplitudeAxis(){return this.SC}get amplitudeAxis(){return this.SC}get axisAmplitude(){return this.SC}getRadialAxis(){return this.bC}get radialAxis(){return this.bC}get axisRadial(){return this.bC}Le(t){super.Le(t),Ya.LA(this.Sh,this._A);for(const t of this._y)t.hy();this.SC.Er(),this.bC.Er();for(const t of this._y)t.Le();const i=this.vS.getInnerIntervalPixels().x/2,s=this.SC.hr({physicalAxisSize:i}),e=this.bC.hr({physicalAxisSize:2*Math.PI*i});this.SC.Le(s),this.bC.Le(e);const h=Ya.PA(this.Sh,this._A),r=[this.nn.left+e.zf,this.nn.right+e.zf],n=[this.nn.bottom+e.zf,this.nn.top+e.zf+h];this.vS.Ji(r).Ki(n);const o=this.vS.FS().start,a=this.vS.FS().end,l=this.vS.TS()?(e.zf||0)*this.vS.x.getPixelSize()+a-o:(e.zf||0)*this.vS.x.getPixelSize()+o-a;this.Iy.Dc(l).Vc(360),this.Py.Dc(l).Vc(360);for(const t of this.Kd)t.Le();this.Ug.Le(!1,this._y,((t,i,s)=>t.solveNearest(i,s)));for(const t of this._y)t.vv();return super.xA(),this.xC(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.SC.setAnimationsEnabled(t),this.bC.setAnimationsEnabled(t),this}getMinimumSize(){return r(Nd,Nd)}xC(){}forEachAxis(t){return t(this.SC),t(this.bC),this}dispose(){return this.Kd.slice().forEach((t=>t.dispose())),this.Ug.G(),this.v_.G(),this.vC.G(),this.yC.G(),this.pC.G(),this.mC.G(),super.dispose()}Gd(){return[...this._y,...this.Kd]}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Nd=300,Gd=(t,i,s)=>{var e;return vt(i)?Xa(i,[[{component:i.series,componentColor:Wa(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],["Angle","",{text:i.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:Pe(t.getAmplitudeAxis().formatValue(i.amplitude),t.amplitudeAxis),font:{weight:"bold"}}],["Intensity","",{text:Pe(i.intensity.toFixed(2),null===(e=i.lut)||void 0===e?void 0:e.units),font:{weight:"bold"}}]]):Xa(i,[[{component:i.series,componentColor:Wa(i),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],["Angle","",{text:i.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:Pe(t.getAmplitudeAxis().formatValue(i.amplitude),t.amplitudeAxis),font:{weight:"bold"}}]])};class $d extends ml{}class Ud extends $d{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.Es="Slice",this.S=0,this.lg=!1,this.MC=V,this.ug=V,this.dg=this.S,this.vg=Gt((()=>this.chart.St.Ls())),this.pg=()=>{this.mg=void 0},this.D=new zt,this.index=t,this.chart=e,this.scale=h,this.fs=r,this.HS=i.Qc(h,Fn.Simple).Bt(this.getHighlight()),this.ws(this.HS),this.sr=s.Yr(h).Bt(this.getHighlight()),this.ws(this.sr,{isText:!0})}setValue(t){return this.chart.getAnimationsEnabled()?this.getVisible()&&this.Mg(this.dg,t):this.dg=t,this.S=t,this.chart.St.Ls(),this}getValue(){return this.S}setVisible(t){return!1===t?this.chart.getAnimationsEnabled()&&this.dg>0?(this.mg&&(this.mg.finish(!1),this.mg=void 0),this.Mg(this.dg,0,(()=>super.setVisible(!1)))):(this.dg=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.mg&&(this.mg.finish(!1),this.mg=void 0),super.setVisible(!0),this.Mg(this.dg,this.S)):(this.dg=this.S,super.setVisible(!0)),this}Mg(t,i,s){this.mg=this.vg(300,Ot.ease)([[t,i]],(([t])=>{this.dg=t,this.chart.St.Ls()})),this.mg.addEventListener("everyAnimationEnd",this.pg),s&&this.mg.addEventListener("end",s)}setStyle(t,i,s,e,h){this.MC=t,this.ug=s,this.HS.Ie(this.MC).Fe(i),this.sr.Ie(this.ug).Xh(e).mr(h);for(let t=0;t<this.ds.length;t+=1)this.styleLegendEntry(this.ds[t])}getAnimatedValue(){return this.dg}De(t,i){return t.Bt(i),this.chart.St.Ls(),this}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.MC,stroke:this.HS.da()})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}var Yd;!function(t){t[t.VariableHeight=0]="VariableHeight",t[t.VariableWidth=1]="VariableWidth"}(Yd||(Yd={}));const Hd=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},Xd=(t,i,s,e,h,r=0,n=Yd.VariableHeight,o)=>{i=Hd(i,e.x),s=Hd(s,e.x);const a=t.length;let l=0,c=0;l=t.reduce(((t,i)=>t+i.getAnimatedValue()),0);let u={x:o-i/2,y:e.y+h.bottom},d={x:o+i/2,y:e.y+h.bottom},f={x:0,y:h.bottom},A={x:0,y:h.bottom},g=0,v=0;if(r)for(let i=0;i<t.length;i+=1){const s=10;v+=t[i].getAnimatedValue();const o=n===Yd.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-v/l*e.y;if(n===Yd.VariableWidth){r=o-r<s?Math.max(20,o-s):r;break}0!==g&&g-o-r<s&&(r=Math.max(0,g-o-s)),g=o}const y=(i-s)/2/e.y;for(let g=0;g<a;g+=1){const v=t[g];c+=v.getAnimatedValue();const p=n===Yd.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-c/l*e.y;let m=0;g>0&&(u={x:f.x+y*r,y:f.y-r},d={x:A.x-y*r,y:A.y-r}),m=(i+c/l*(s-i))/2,f={x:o-m,y:parseInt(`${n===Yd.VariableWidth?u.y-p:p}`,10)},A={x:o+m,y:parseInt(`${n===Yd.VariableWidth?d.y-p:p}`,10)},d.x>=u.x&&A.x>f.x&&v.HS.Hl([f,u,d,A])}};class Wd extends Ua{constructor(t,i,s,e,h,r,n){super(t,i,s,i.wA("funnelChart bg",0),e,i.St._t.funnelChartBackgroundFillStyle,i.St._t.funnelChartBackgroundStrokeStyle,i.St._t.funnelChartTitleFont,i.St._t.funnelChartTitleFillStyle,i.St._t.funnelChartTitleShadow,r),this.wg=[],this._g=yl.None,this.Tg=!0,this.Pg=this._t.funnelChartSliceLabelShadow,this.Lg=0,this.wC=80,this._C=20,this.CC=0,this.kC=Yd.VariableHeight,this.Eg=!0,this.zg=t=>{const i=this.wg.indexOf(t);i>=0&&(this.wg.splice(i,1),this.Vg())},this.D=new zt,this.St.Zo(Gr.Gn),this.Rg=this._t.effectsText,this.Og=i.Ng("funnelChart bottom",0),this.Gg=i.Ng("funnelChart top",1),this.Sh.Sr("Funnel Chart"),this.Cg=this._t.funnelChartSliceFillStylePalette,this.kg=this._t.funnelChartSliceStrokeStyle,this.Fg=this._t.funnelChartSliceLabelFont,this.Ig=this._t.funnelChartSliceLabelFillStyle;const o=i.$g(),a=gi(n?n.cursorBuilder:void 0,ul);this.Ug=Qa(this,o,a.ag(o,this.uiScale,this.uiScale,ui,this._t),void 0,"show-pointed",jd,(()=>0)),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled)),this.MA(h,this.xf)}setCursor(t){return this.Ug.setCursor(t),this}getCursor(){return this.Ug.getCursor()}setCursorMode(t){return this.Ug.setCursorMode(t),this}getCursorMode(){return this.Ug.getCursorMode()}setCustomCursor(t){return this.Ug.setCustomCursor(t),this}setCursorFormatting(t){return this.Ug.setCursorFormatting(t),this}getCursorFormatting(){return this.Ug.getCursorFormatting()}addCursor(t=ul){const i=this.dA(),s=t.ag(i,this.uiScale,this.uiScale,this.nA(i),this._t);return this.SA(s),s}addSlice(t,i){const s=new Ud(this.Lg,this.Og,this.Gg,this,this.xf,this.zg,this._t,this.St.vs);return this.Lg+=1,s.setName(t),s.setValue(i),s.vs.ps.Ps(this.Rg),s.vs.Ss.Ps(this.Eg),this.wg.push(s),this.St.Ls(),s.setHighlightOnHover(this.Tg),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.wg}setHeadWidth(t){return this.wC=t,this.St.Ls(),this}getHeadWidth(){return this.wC}setNeckWidth(t){return this._C=t,this.St.Ls(),this}getNeckWidth(){return this._C}setSliceGap(t){return this.CC=Math.min(Math.max(t,0),20),this.St.Ls(),this}setSliceMode(t){return this.kC=t,this.St.Ls(),this}getFunnelSliceMode(){return this.kC}setLUT(t){return this.Bd=t,this.St.Ls(),this}setSliceFillStyle(t){return this.Cg=t,this.St.Ls(),this}getSliceFillStyle(){return this.Cg}setSliceStrokeStyle(t){return this.kg="function"==typeof t?t(this.kg):t,this.St.Ls(),this}getSliceStrokeStyle(){return this.kg}setSliceEffect(t){return this.Eg=t,this.wg.forEach((i=>i.vs.Ss.Ps(t))),this.St.Ls(),this}getSliceEffect(){return this.Eg}setSliceSorter(t){return this._g=t,this.wg=this.wg.sort(this._g),this.St.Ls(),this}getSliceSorter(){return this._g}setLabelFillStyle(t){return this.Ig="function"==typeof t?t(this.Ig):t,this.St.Ls(),this}getLabelFillStyle(){return this.Ig}setLabelShadow(t){return this.Pg=t,this.St.Ls(),this}getLabelShadow(){return this.Pg}setLabelFont(t){return this.Fg="function"==typeof t?t(this.Fg):t,this.St.Ls(),this}getLabelFont(){return this.Fg}setLabelEffect(t){return this.Rg=t,this.wg.forEach((i=>i.vs.ps.Ps(t))),this.St.Ls(),this}getLabelEffect(){return this.Rg}setLabelFormatter(t){return this.Hg=t,this.St.Ls(),this}getLabelFormatter(){return this.Hg}setSliceHighlightOnHover(t){return this.Tg=t,this.wg.forEach((i=>i.setHighlightOnHover(t))),this}Le(t){super.Le(t),Ya.LA(this.Sh,this._A),super.xA();const i=Ya.PA(this.Sh,this._A),s=r(this.xf.x.getInnerInterval()-(this.nn.left+this.nn.right),this.xf.y.getInnerInterval()-(this.nn.bottom+this.nn.top+i)),e=r(this.nn.left+s.x/2,this.nn.bottom+s.y/2);this.wg=this.wg.sort(this._g);for(let t=0,{length:i}=this.wg;t<i;t+=1)this.Yg(this.wg[t],t);const h=this.wg.filter((t=>t.getAnimatedValue()>0));let n=0;for(let t=0;t<h.length;t+=1)n+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/n:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.sr.Sr(this.Hg(i,o[t])).hr()}o.push(n),this.Ug.Le(!1,this.wg,((t,i,s)=>{const e=o[h.indexOf(t)]||0,r=this.St.pa(i);return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.St.ot,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.St.ot},slice:t,category:t.getName(),value:t.getValue(),relativeValue:e}})),this.Xg(h,o,e,s)}Yg(t,i){t.setStyle(this.Bd?new $({color:this.Bd.getColors(t.getAnimatedValue(),void 0)}):this.Cg(i,t),this.kg,this.Ig,this.Fg,this.Pg)}Vg(){this.wg=this.wg.sort(this._g),this.St.Ls()}Gd(){return this.wg}dispose(){return this.wg.slice().forEach((t=>t.dispose())),this.Ug.G(),this.Og.G(),this.Gg.G(),super.dispose()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const jd=(t,i,s)=>[[{component:i.slice,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:i.value.toString(),font:{weight:"bold"}}]],Zd=(t,i,s)=>{const e=t.Xl();if(e.length>0){let t;const h=(e[1].y-e[0].y)/2+e[0].y;return t=i===tf.Left?(e[0].x-e[1].x)/2+e[1].x-s:(e[2].x-(4===e.length?e[3].x:e[1].x))/2+(4===e.length?e[3].x:e[1].x)+s,{x:t,y:h}}},Qd=t=>{const i=t.Xl();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class Jd extends Wd{constructor(){super(...arguments),this.Hg=pl.NamePlusValue,this.TC=10,this.FC=tf.Left,this.IC=vl.LabelsOnSides,this.Wg=[],this.Jg=this._t.funnelChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.Jg=t;for(let t=0;t<this.Wg.length;t+=1)this.Wg[t].Ne(this.Jg);return this.St.Ls(),this}getLabelConnectorStyle(){return this.Jg}setLabelConnectorGap(t){return this.TC=t,this.St.Ls(),this}getLabelConnectorGap(){return this.TC}setLabelSide(t){return this.FC=t,this.St.Ls(),this}getLabelSide(){return this.FC}Xg(t,i,s,e){const h=e.x+this.nn.left+this.nn.right,n=e.y+this.nn.top+this.nn.bottom<250||h<250,o=this.TC;let a,l=0;if(!n)for(let i=0;i<t.length;i+=1)l=Math.max(l,t[i].sr.xi().x);a=n?h/2:this.FC===tf.Right?(this.nn.left+(h-(this.nn.right+l)))/2:(this.nn.left+l+(h-this.nn.right))/2;const c=e.x-l,u=r(c,e.y);if(Xd(t,this.wC,this._C,u,this.nn,this.CC,this.kC,a),n)return t.forEach((t=>t.sr.setVisible(!1))),void this.Wg.forEach((t=>t.setVisible(!1)));this.PC(t,this.FC===tf.Left?-1:1,-1,s,e);for(let t=0;t<this.Wg.length;t+=1)this.Wg[t].setVisible(!1);for(let i=0;i<t.length;i+=1)t[i].getVisible()&&this.qg(this.LC(t[i],-1,s,o))}getMinimumSize(){return r(500,300)}PC(t,i,s,e,h){if(0===t.length)return;const n=e.x+i*h.x*.5,o=1===s?Math.max:Math.min;let a;for(let e=0;e<t.length;e+=1){const h=t[e];if(0===h.HS.Xl().length)h.sr.setVisible(!1);else{let t;h.sr.setVisible(!0),a&&(t=a.sr.il().y+s*(a.sr.xi().y+10));const e=(Zd(h.HS,this.FC,0)||r(0,0)).y,l=void 0===t?e:o(e,t);h.sr.Be(r(n,l)).nl(i).ll(0),a=h}}}LC(t,i,s,e){const h=t.HS,n=t.sr,o=Zd(h,this.FC,e);if(o){const t={x:te(this.FC===tf.Left?n.il().x-i*(e+n.xi().x):n.il().x+i*(e+n.xi().x),o,s).x,y:ie(n.il().y,o,s).y};return[o,t,r(this.FC===tf.Left?n.il().x-i*(e+n.xi().x):n.il().x+i*(e+n.xi().x),t.y)]}}qg(t){if(t){let i;for(let t=0;t<this.Wg.length;t+=1)if(!this.Wg[t].getVisible()){i=this.Wg[t].setVisible(!0);break}void 0===i&&(i=this.Gg.tv(this.xf,void 0,[Cl.InternalUI]).Ne(this.Jg),this.Wg.push(i)),i.ti().Dl(t)}}}class Kd extends Wd{constructor(){super(...arguments),this.Hg=pl.Name,this.IC=vl.LabelsInsideSlices}Xg(t,i,s,e){const h=this.nn.left+e.x/2;Xd(t,this.wC,this._C,e,this.nn,this.CC,this.kC,h);for(let i=0;i<t.length;i+=1){const s=t[i],e=s.HS,h=s.sr,r=Qd(e);r&&h.Be(r).nl(0).ll(0)}}getMinimumSize(){return r(200,200)}}const qd={LabelsOnSides:Jd,LabelsInsideSlices:Kd};var tf,sf;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(tf||(tf={}));class ef extends ml{}class hf extends ef{constructor(t,i,s,e,h,r,n,o){super(e,r,n,o),this.Es="Slice",this.S=0,this.lg=!1,this.MC=V,this.ug=V,this.dg=this.S,this.vg=Gt((()=>this.chart.St.Ls())),this.pg=()=>{this.mg=void 0},this.D=new zt,this.index=t,this.chart=e,this.scale=h,this.fs=r,this.HS=i.Qc(h,Fn.Simple).Bt(this.getHighlight()),this.ws(this.HS),this.sr=s.Yr(h).Bt(this.getHighlight()),this.ws(this.sr,{isText:!0})}setValue(t){return this.chart.getAnimationsEnabled()?this.getVisible()&&this.Mg(this.dg,t):this.dg=t,this.S=t,this.chart.St.Ls(),this}getValue(){return this.S}setVisible(t){return!1===t?this.chart.getAnimationsEnabled()&&this.dg>0?(this.mg&&(this.mg.finish(!1),this.mg=void 0),this.Mg(this.dg,0,(()=>super.setVisible(!1)))):(this.dg=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.mg&&(this.mg.finish(!1),this.mg=void 0),super.setVisible(!0),this.Mg(this.dg,this.S)):(this.dg=this.S,super.setVisible(!0)),this}Mg(t,i,s){this.mg=this.vg(300,Ot.ease)([[t,i]],(([t])=>{this.dg=t,this.chart.St.Ls()})),this.mg.addEventListener("everyAnimationEnd",this.pg),s&&this.mg.addEventListener("end",s)}setStyle(t,i,s,e,h){this.MC=t,this.ug=s,this.HS.Ie(this.MC).Fe(i),this.sr.Ie(this.ug).Xh(e).mr(h);for(let t=0;t<this.ds.length;t+=1)this.styleLegendEntry(this.ds[t])}getAnimatedValue(){return this.dg}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.MC,stroke:this.HS.da()})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}!function(t){t[t.VariableHeight=0]="VariableHeight",t[t.VariableWidth=1]="VariableWidth"}(sf||(sf={}));const rf=(t,i)=>{let s=100;return t<=0?t=0:(s=t>=100?100:t,t=i*(s/100)),t},nf=(t,i,s,e,h,r=0,n=sf.VariableHeight,o)=>{i=rf(i,e.x),s=rf(s,e.x);const a=t.length;let l=0,c=0;l=t.reduce(((t,i)=>t+i.getAnimatedValue()),0);let u={x:o-i/2,y:e.y+h.bottom},d={x:o+i/2,y:e.y+h.bottom},f={x:0,y:h.bottom},A={x:0,y:h.bottom},g=0,v=0;if(r)for(let i=0;i<t.length;i+=1){const s=10;v+=t[i].getAnimatedValue();const o=n===sf.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-v/l*e.y;if(n===sf.VariableWidth){r=o-r<s?Math.max(20,o-s):r;break}0!==g&&g-o-r<s&&(r=Math.max(0,g-o-s)),g=o}const y=(i-s)/2/e.y;for(let g=0;g<a;g+=1){const v=t[g];c+=v.getAnimatedValue();const p=n===sf.VariableWidth?(e.y-r*a)/a:e.y+h.bottom-c/l*e.y;let m=0;g>0&&(u={x:f.x+y*r,y:f.y-r},d={x:A.x-y*r,y:A.y-r}),m=(i+c/l*(s-i))/2,f={x:o-m,y:parseInt(`${n===sf.VariableWidth?u.y-p:p}`,10)},A={x:o+m,y:parseInt(`${n===sf.VariableWidth?d.y-p:p}`,10)},d.x>=u.x&&A.x>=f.x&&v.HS.Hl([f,u,d,A])}};class of extends Ua{constructor(t,i,s,e,h,r,n){super(t,i,s,i.wA("pyramidChart bg",0),e,i.St._t.pyramidChartBackgroundFillStyle,i.St._t.pyramidChartBackgroundStrokeStyle,i.St._t.pyramidChartTitleFont,i.St._t.pyramidChartTitleFillStyle,i.St._t.pyramidChartTitleShadow,r),this.wg=[],this._g=yl.None,this.Cg=this._t.pyramidChartSliceFillStylePalette,this.kg=this._t.pyramidChartSliceStrokeStyle,this.Tg=!0,this.Fg=this._t.pyramidChartSliceLabelFont,this.Ig=this._t.pyramidChartSliceLabelFillStyle,this.Pg=this._t.pyramidChartSliceLabelShadow,this.Lg=0,this.wC=0,this._C=80,this.CC=0,this.kC=sf.VariableHeight,this.Eg=!0,this.zg=t=>{const i=this.wg.indexOf(t);i>=0&&(this.wg.splice(i,1),this.Vg())},this.D=new zt,this.St.Zo(Gr.Gn),this.Rg=this._t.effectsText,this.Og=i.Ng("pyramidChart bottom",0),this.Gg=i.Ng("pyramidChart top",1),this.Sh.Sr("Pyramid Chart");const o=i.$g(),a=gi(n?n.cursorBuilder:void 0,ul);this.Ug=Qa(this,o,a.ag(o,this.uiScale,this.uiScale,ui,this._t),void 0,"show-pointed",af,(()=>0)),this.MA(h,this.xf),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled))}setCursor(t){return this.Ug.setCursor(t),this}getCursor(){return this.Ug.getCursor()}setCursorMode(t){return this.Ug.setCursorMode(t),this}getCursorMode(){return this.Ug.getCursorMode()}setCustomCursor(t){return this.Ug.setCustomCursor(t),this}setCursorFormatting(t){return this.Ug.setCursorFormatting(t),this}getCursorFormatting(){return this.Ug.getCursorFormatting()}addCursor(t=ul){const i=this.dA(),s=t.ag(i,this.uiScale,this.uiScale,this.nA(i),this._t);return this.SA(s),s}addSlice(t,i){const s=new hf(this.Lg,this.Og,this.Gg,this,this.xf,this.zg,this._t,this.St.vs);return this.Lg+=1,s.setName(t),s.setValue(i),s.vs.ps.Ps(this.Rg),s.vs.Ss.Ps(this.Eg),this.wg.push(s),this.St.Ls(),s}addSlices(t){const i=[];for(let s=0;s<t.length;s+=1)i.push(this.addSlice(t[s].name,t[s].value));return i}getSlices(){return this.wg}setNeckWidth(t){return this._C=t,this.St.Ls(),this}getNeckWidth(){return this._C}setSliceGap(t){return this.CC=Math.min(Math.max(t,0),20),this.St.Ls(),this}setSliceMode(t){return this.kC=t,this.St.Ls(),this}getPyramidSliceMode(){return this.kC}setLUT(t){return this.Bd=t,this.St.Ls(),this}setSliceFillStyle(t){return this.Cg=t,this.St.Ls(),this}getSliceFillStyle(){return this.Cg}setSliceStrokeStyle(t){return this.kg="function"==typeof t?t(this.kg):t,this.St.Ls(),this}getSliceStrokeStyle(){return this.kg}setSliceEffect(t){return this.Eg=t,this.wg.forEach((i=>i.vs.Ss.Ps(t))),this.St.Ls(),this}getSliceEffect(){return this.Eg}setSliceSorter(t){return this._g=t,this.wg=this.wg.sort(this._g),this.St.Ls(),this}getSliceSorter(){return this._g}setLabelFillStyle(t){return this.Ig="function"==typeof t?t(this.Ig):t,this.St.Ls(),this}getLabelFillStyle(){return this.Ig}setLabelShadow(t){return this.Pg=t,this.St.Ls(),this}getLabelShadow(){return this.Pg}setLabelFont(t){return this.Fg="function"==typeof t?t(this.Fg):t,this.St.Ls(),this}getLabelFont(){return this.Fg}setLabelEffect(t){return this.Rg=t,this.wg.forEach((i=>i.vs.ps.Ps(t))),this.St.Ls(),this}getLabelEffect(){return this.Rg}setLabelFormatter(t){return this.Hg=t,this.St.Ls(),this}getLabelFormatter(){return this.Hg}setSliceHighlightOnHover(t){return this.Tg=t,this.wg.forEach((i=>i.setHighlightOnHover(t))),this}Le(t){super.Le(t),Ya.LA(this.Sh,this._A),super.xA();const i=Ya.PA(this.Sh,this._A),s=r(this.xf.x.getInnerInterval()-(this.nn.left+this.nn.right),this.xf.y.getInnerInterval()-(this.nn.bottom+this.nn.top+i)),e=r(this.nn.left+s.x/2,this.nn.bottom+s.y/2);this.wg=this.wg.sort(this._g);for(let t=0,{length:i}=this.wg;t<i;t+=1)this.Yg(this.wg[t],t);const h=this.wg.filter((t=>t.getAnimatedValue()>0));let n=0;for(let t=0;t<h.length;t+=1)n+=h[t].getAnimatedValue();const o=[];for(let t=0;t<h.length;t+=1)o.push((a=h[t].getAnimatedValue())>0?a/n:0);var a;for(let t=0;t<h.length;t+=1){const i=h[t];i.sr.Sr(this.Hg(i,o[t])).hr()}o.push(n),this.Ug.Le(!1,this.wg,((t,i,s)=>{const e=o[h.indexOf(t)]||0,r=this.St.pa(i);return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.St.ot,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.St.ot},slice:t,category:t.getName(),value:t.getValue(),relativeValue:e}})),this.Xg(h,o,e,s)}Yg(t,i){t.setStyle(this.Bd?new $({color:this.Bd.getColors(t.getAnimatedValue(),void 0)}):this.Cg(i,t),this.kg,this.Ig,this.Fg,this.Pg)}Vg(){this.wg=this.wg.sort(this._g),this.St.Ls()}Gd(){return this.wg}dispose(){return this.wg.slice().forEach((t=>t.dispose())),this.Ug.G(),this.Og.G(),this.Gg.G(),super.dispose()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const af=(t,i,s)=>[[{component:i.slice,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:i.value.toString(),font:{weight:"bold"}}]],lf=(t,i,s)=>{const e=t.Xl();if(e.length>0){let t;const h=(e[1].y-e[0].y)/2+e[0].y;return t=i===Af.Left?(e[0].x-e[1].x)/2+e[1].x-s:(e[2].x-(4===e.length?e[3].x:e[1].x))/2+(4===e.length?e[3].x:e[1].x)+s,{x:t,y:h}}},cf=t=>{const i=t.Xl();if(i.length>0)return{x:(i[2].x-i[1].x)/2+i[1].x,y:(i[1].y-i[0].y)/2+i[0].y}};class uf extends of{constructor(){super(...arguments),this.Hg=pl.NamePlusValue,this.TC=10,this.FC=Af.Left,this.IC=vl.LabelsOnSides,this.Wg=[],this.Jg=this._t.pyramidChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.Jg=t;for(let t=0;t<this.Wg.length;t+=1)this.Wg[t].Ne(this.Jg);return this.St.Ls(),this}getLabelConnectorStyle(){return this.Jg}setLabelConnectorGap(t){return this.TC=t,this.St.Ls(),this}getLabelConnectorGap(){return this.TC}setLabelSide(t){return this.FC=t,this.St.Ls(),this}getLabelSide(){return this.FC}Xg(t,i,s,e){const h=e.x+this.nn.left+this.nn.right,n=e.y+this.nn.top+this.nn.bottom<250||h<250,o=this.TC;let a,l=0;if(!n)for(let i=0;i<t.length;i+=1)l=Math.max(l,t[i].sr.xi().x);a=n?h/2:this.FC===Af.Right?(this.nn.left+(h-(this.nn.right+l)))/2:(this.nn.left+l+(h-this.nn.right))/2;const c=e.x-l,u=r(c,e.y);if(nf(t,this.wC,this._C,u,this.nn,this.CC,this.kC,a),n)return t.forEach((t=>t.sr.setVisible(!1))),void this.Wg.forEach((t=>t.setVisible(!1)));this.PC(t,this.FC===Af.Left?-1:1,-1,s,e);for(let t=0;t<this.Wg.length;t+=1)this.Wg[t].setVisible(!1);for(let i=0;i<t.length;i+=1)if(t[i].getVisible()){const e=this.LC(t[i],-1,s,o);e&&this.qg(e)}}getMinimumSize(){return r(500,300)}PC(t,i,s,e,h){if(0===t.length)return;const n=e.x+i*h.x*.5,o=1===s?Math.max:Math.min;let a;for(let e=0;e<t.length;e+=1){const h=t[e];let l;0===h.HS.Xl().length?h.sr.setVisible(!1):h.sr.setVisible(!0),a&&(l=a.sr.il().y+s*(a.sr.xi().y+10));const c=lf(h.HS,this.FC,0);if(c){const t=c.y,s=void 0===l?t:o(t,l);h.sr.Be(r(n,s)).nl(i).ll(0)}a=h}}LC(t,i,s,e){const h=t.HS,n=t.sr,o=lf(h,this.FC,e);if(o){const t={x:te(this.FC===Af.Left?n.il().x-i*(e+n.xi().x):n.il().x+i*(e+n.xi().x),o,s).x,y:ie(n.il().y,o,s).y};return[o,t,r(this.FC===Af.Left?n.il().x-i*(e+n.xi().x):n.il().x+i*(e+n.xi().x),t.y)]}}qg(t){let i;for(let t=0;t<this.Wg.length;t+=1)if(!this.Wg[t].getVisible()){i=this.Wg[t].setVisible(!0);break}void 0===i&&(i=this.Gg.tv(this.xf,void 0,[Cl.InternalUI]).Ne(this.Jg),this.Wg.push(i)),i.ti().Dl(t)}}class df extends of{constructor(){super(...arguments),this.Hg=pl.Name,this.IC=vl.LabelsInsideSlices}Xg(t,i,s,e){const h=this.nn.left+e.x/2;nf(t,this.wC,this._C,e,this.nn,this.CC,this.kC,h);for(let i=0;i<t.length;i+=1){const s=t[i].HS,e=t[i].sr,h=cf(s);h&&e.Be(h).nl(0).ll(0)}}getMinimumSize(){return r(200,200)}}const ff={LabelsOnSides:uf,LabelsInsideSlices:df};var Af;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(Af||(Af={}));const gf=(t,i,s,e,h,r)=>(t.alignmentX=(h+Math.PI/2)%(2*Math.PI)<=Math.PI?-1:1,t.alignmentY=h%(2*Math.PI)<=Math.PI?-1:1,t.paddingX=Math.cos(h)*r,t.paddingY=Math.sin(h)*r,t),vf=t=>{if(0===t.axisIndex)return t.paddingX=t.labelPadding,t.alignmentX=-1,t;let i=!1;const s=t.chart.getAxes();if(s.length>1){const t=s[0].getInterval();i=s.some((i=>{const s=i.getInterval();return s.start!==t.start||s.end!==t.end}))}return i?(t.paddingX=t.labelPadding,t.alignmentX=-1,t):void 0};var yf;!function(t){t[t.Normal=0]="Normal",t[t.Circle=1]="Circle"}(yf||(yf={}));class pf{constructor(t,i,s,e,h,r,n,o,a){this.uh=!1,this.BC=fr.fittingEnd,this.DC=t=>this.axisScale.Wi(t,ve.Numeric),this.formatValue=t=>this.DC(t,{start:this.axisScale.$,end:this.axisScale.U}),this.EC=t,this.Xr=i,this.scale=s,this.chart=e,this.tag=h,this.axisScale=rt.d1({scale1DConstructor:pe,dimension:"x"}).W(0,1),this.RC=r,this.BC=o,a&&(this.DC=a),n&&this.setInterval(n),this.zC=this.EC.Ge(this.scale).setPointerEvents(!1),this.VC=this.Xr.Yr(this.scale).Sr(this.tag).setPointerEvents(!1),this.OC=this.EC.tv(this.scale,void 0,[Cl.InternalUI]).Ne(this.chart.getNibStyle()),this.RC._s([this.VC])}Xg(t,i,s,e,h,n,o){const a=i.length,l=i[s>0?s-1:a-1],c=i[s],u=i[s<a-1?s+1:0],d=this.chart.getNibLength();this.zC.Ue(t).$e(c).Ne(this.chart.getAxisStyle()),this.OC.ti().Dl(n===yf.Normal?[Es(c,l,fi(.5*d/Xs(Zs(l,c)),0,1)),c,Es(c,u,fi(.5*d/Xs(Zs(u,c)),0,1))]:((t,i,s,e,h=2)=>{const n=e/s,o=[];for(let a=-e/2;a<=e/2;a+=h){const h=n*(a/e)+i,l=r(t.x+Math.cos(h)*s,t.y+Math.sin(h)*s);o.push(l)}return o})(t,e,h,d)),o?this.VC.setVisible(!0).Be(js(c,r(o.paddingX,o.paddingY))).nl(o.alignmentX).ll(o.alignmentY):this.VC.setVisible(!1)}Er(t){if(this.BC&&!this.uh){const i=this.BC.start(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max),s=this.BC.end(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max);this.axisScale.W(i,s)}}getLabelSize(){return this.VC.Xh(this.chart.getAxisLabelFont()).Ie(this.chart.getAxisLabelStyle()).hr().xi()}dispose(){this.zC&&this.zC.dispose(),this.VC&&this.VC.dispose(),this.OC&&this.OC.dispose()}getTag(){return this.tag}setInterval(t){const{start:i,end:s,stopAxisAfter:e}=t;return void 0!==e&&(this.uh=e),this.axisScale.W(null!=i?i:this.axisScale.getInnerStart(),null!=s?s:this.axisScale.getInnerEnd()),this.chart.St.Ls(),this}getInterval(){return{start:this.axisScale.getInnerStart(),end:this.axisScale.getInnerEnd()}}setScaleLabelFormatter(t){return this.DC=t,this.chart.St.Ls(),this}setScrollStrategy(t){return this.BC=t,this.chart.St.Ls(),this}getScrollStrategy(){return this.BC}}class mf extends Hc{constructor(t,i,s,e,h,r,n,o,a,l,c,u){super(t,a,l,u),this.Es="Spider Series",this.NC=new Map,this.GC=new Map,this.cs=Ee.onHover,this.eb=8,this.Ga=0,this.$C=(()=>{const t=Gt((()=>{}));let i;return(s,e,h,r)=>{const n=null==r?void 0:r.onStart,o=null==r?void 0:r.onCompleted,a=(null==r?void 0:r.easing)||Ot.ease,l=(null==r?void 0:r.durationMs)||1e3;let c;if(i)if(0===i.nextAnimations.length){const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);c=t}else{s=i.nextAnimations.pop().values[0][0];const t=i.NextAnimation([[s,e]],(([s])=>{i=t,h(s)}),l,a);c=t}else c=t(l,a)([[s,e]],(([t])=>{h(t)})),i=c;c.addEventListener("end",(()=>{i=void 0})),n&&c.addEventListener("start",n),o&&c.addEventListener("end",o)}})(),this.UC={},this.YC={},this.gg=this.getVisible(),this.HC=1,this.XC=((t,i)=>{const s=Gt((()=>{}));let e,h,r=1;return(n,o,a)=>{if(n===h)return;h=n;const l=(null==a?void 0:a.easing)||Ot.ease,c=(null==a?void 0:a.durationMs)||1e3;e&&(e.finish(!1),e=void 0),!1===n?o&&r&&(e=s(c,l)([[r,0]],(([i])=>{r=i,t(r)})),e.addEventListener("end",(()=>{e=void 0,i(!1)})),r=0,i(!1)):o?(i(!0),e=s(c,l)([[r,1]],(([i])=>{r=i,t(r)})),e.addEventListener("end",(()=>{e=void 0}))):(r=1,i(!0))}})((t=>{this.HC=t,this.Ys.St.Ls()}),(t=>{super.setVisible(t)})),this.WC=!1,this.D=new zt,this.chart=t,this.Ys=i,this.hb=e,this.jC=h,this.xm=r,this.ZC=n,this.QC=o,this.scale=s,this.JC=Ji(l.spiderSeriesFillStyle,c),this.KC=Ji(l.spiderSeriesStrokeStyle,c),this.qC=Ji(l.spiderSeriesPointFillStyle,c)}tk(){return this.WC}Kt(t,i){const s=this.QC(i);if(void 0!==s&&this.NC.has(s.tag)){const t=this.NC.get(s.tag),i=this.ZC(s.tag,t);return{cursorPosition:{pointMarker:i,pointMarkerScale:this.scale,resultTable:i,resultTableScale:this.scale},series:this,axis:s.tag,value:t}}}Qv(){return this.qv&&this.NC.size>0&&this.getVisible()}addPoints(...t){const i=0===this.NC.size;i||this.chart.St.Zo(Gr.qn),t=t.filter((t=>void 0!==t.axis));for(let i=0;i<t.length;i+=1){const s=t[i].axis;this.jC(s)}if(this.chart.getAnimationsEnabled()&&void 0!==this.UC){let s;t.forEach((t=>this.GC.set(t.axis,t.value))),this.$C(0,1,(t=>{this.GC.forEach(((i,e)=>{const h=(null==s?void 0:s.get(e))||0;this.NC.set(e,h+t*(i-h)),this.Ys.St.Ls()}))}),{easing:this.UC.easing,durationMs:this.UC.durationMs,onStart:()=>{this.WC=i,s=new Map(this.NC)},onCompleted:()=>{this.WC=!1}})}else for(let i=0;i<t.length;i+=1){const s=t[i].axis;this.NC.set(s,t[i].value),this.GC.set(s,t[i].value)}return this.Ys.Ls(),this}getValue(t,i=!1){if(this.chart.getAxis(t))return i?this.NC.get(t):this.GC.get(t)}setAnimationAddPoints(t,i){return this.UC=t?{easing:t,durationMs:i}:void 0,this.Ys.Ls(),this}setVisibleStateChangedAnimation(t,i){return this.YC=t?{easing:t,durationMs:i}:void 0,this.Ys.Ls(),this}setFillStyle(t){return this.JC="function"==typeof t?t(this.JC):t,this.HS&&(this.HS.Ie(this.JC),this.Ys.Ls()),this}getFillStyle(){return this.JC}setStrokeStyle(t){return this.KC="function"==typeof t?t(this.KC):t,this.HS&&(this.HS.Fe(this.KC),this.Ys.Ls()),this}getStrokeStyle(){return this.KC}setPointFillStyle(t){return this.qC="function"==typeof t?t(this.qC):t,this.rb&&(this.rb.Ie(this.qC),this.Ys.Ls()),this}getPointFillStyle(){return this.qC}setPointSize(t){return this.eb=t,this.rb&&this.rb.Z(t),this}getPointSize(){return this.eb}getPointShape(){return this.hb}setPointRotation(t){return this.Ga=t,this.rb&&this.rb.Wh(t),this.Ys.Ls(),this}getPointRotation(){return this.Ga}Le(){if(super.Le(),!this.dt){const t=new Array(this.xm.length);for(let i=0;i<this.xm.length;i+=1){const s=this.xm[i].getInterval().start,e=this.NC.get(this.xm[i].tag);t[i]=void 0!==e?this.ZC(this.xm[i].tag,s+this.HC*(e-s)):this.ZC(this.xm[i].tag,s)}Vi(t),t.length>=3&&(this.HS||(this.HS=this.Ys.Qc(this.scale,Fn.Simple).Fe(this.KC).Ie(this.JC).Bt(this.getHighlight()),this.ws(this.HS)),this.HS.Hl(t),this.rb||(this.rb=this.Ys.wy(this.scale).Z(this.eb).Fl(this.hb).Wh(this.Ga).Ie(this.qC).Bt(this.getHighlight()),this.ws(this.rb)),this.rb.ti().Dl(t))}}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.JC,stroke:this.KC})}$s(){return this.Ds||this.hb}ik(){for(let t=0;t<this.ds.length;t+=1)Wi(this.ds[t],this._t,!1,{fill:this.JC,stroke:this.KC})}De(t,i){return t.Bt(i),this.Ys.Ls(),this}setVisible(t){var i,s;return this.gg=t,this.XC(t,this.chart.getAnimationsEnabled()&&void 0!==this.YC,{easing:null===(i=this.YC)||void 0===i?void 0:i.easing,durationMs:null===(s=this.YC)||void 0===s?void 0:s.durationMs}),this}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Sf=(t,i)=>{const s=Math.PI/2-2*t*Math.PI/i;return s>=0?s:s+2*Math.PI},bf=t=>zs(t.VC.Kg()),xf=t=>zs(t.Kg()),Mf=(t,i,s,e)=>t.zc(0).Be(s).Bc(90).$e(-270).Vc(i===yf.Circle?void 0:e.length),wf={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},_f={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},Cf=()=>{_f.alignmentX=0,_f.alignmentY=0,_f.paddingX=0,_f.paddingY=0};class kf extends Jl{constructor(t,i,s,e,h,r,n){super(t,i,s,i.wA("spiderChart bg",0),e,i.St._t.spiderChartBackgroundFillStyle,i.St._t.spiderChartBackgroundStrokeStyle,i.St._t.spiderChartTitleFont,i.St._t.spiderChartTitleFillStyle,i.St._t.spiderChartTitleShadow,n),this.nn=f(20,20,20,20),this.xm=[],this.sk=[],this.ek=[],this.BC=fr.fittingEnd,this.hk=!0,this.rk=vf,this.nk=gf,this.ak=yf.Normal,this.lk=4,this.ck=this._t.spiderChartWebStyle,this.uk=this._t.spiderChartScaleLabelFillStyle,this.dk=this._t.spiderChartScaleLabelShadow,this.fk=this._t.spiderChartScaleLabelFont,this.Ak=5,this.gk=this._t.spiderChartAxisLabelFillStyle,this.vk=this._t.spiderChartAxisLabelFont,this.yk=5,this.pk=this._t.spiderChartAxisStrokeStyle,this.mk=this._t.spiderChartAxisNibStrokeStyle,this.Sk=10,this.bk=f(),this.hasAxis=t=>this.xm.reduce(((i,s)=>i||s.tag===t),!1),this.xk=()=>{const t=this.xm.map(bf).concat(this.ek.map(xf));return Fs(t)},this.Mk=()=>this.wk.Yu(this.xf).setPointerEvents(!1),this._k=t=>t.dispose(),this.Ck=()=>this.cf.Yr(this.xf).setPointerEvents(!1),this.kk=t=>t.dispose(),this.Tk=t=>{this.hk&&!this.hasAxis(t)&&this.addAxis(t)},this.ZC=(t,i)=>{for(const s of this.xm)if(s.tag===t){const t=Math.max(Math.min((i-s.axisScale.getInnerStart())/(s.axisScale.getInnerEnd()-s.axisScale.getInnerStart()),1),0);return Es(s.zC.Hi(),s.zC.Ui(),t)}},this.QC=t=>{if(0===this.xm.length)return;const i=Zs(this.translateCoordinate(t,this.coordsRelative),this.xm[0].zC.Hi()),s=Math.atan2(i.y,i.x);let e,h=bs;for(const t of this.xm){const i=Zs(t.zC.Ui(),t.zC.Hi()),r=Math.atan2(i.y,i.x),n=Math.abs(s-r);n<h&&(e=t,h=n)}return e},this.D=new zt,this.St.Zo(Gr.Un),this.v_=i.bm("spiderChart series bg",0),this.wk=i.Ng("spiderChart web shapes",0),this.Fk=i.Ng("spiderChart axis bg",1),this.Km=i.Ng("spiderChart plotting",2),this.cf=i.Ng("spiderChart fg",3),this.RC=this.vs.kf().Ps(this._t.effectsText),this.Sh.Sr("Spider Chart"),this.Iy=this.v_.Yu(this.xf).Ie(this._t.spiderChartSeriesBackgroundFillStyle).Fe(Wt).Bc(90).$e(-270).zc(0),this.Py=this.v_.Yu(this.xf).Ie(V).Fe(this._t.spiderChartSeriesBackgroundStrokeStyle).Bc(90).$e(-270).zc(0),super.Fy(this.Iy,this.Py);const o=i.$g(),a=gi(r?r.cursorBuilder:void 0,ll);this.Ug=Qa(this,o,a.ag(o,this.uiScale,this.uiScale,ui,this._t),this,"show-pointed",Tf,(()=>0)),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled)),this.MA(h,this.xf)}getSeries(){return this._y}getAxes(){return this.xm}getAxis(t){const i=this.xm.find((i=>i.getTag()===t));if(!i)throw new Error(`Axis with tag "${t}" was not found.`);return i}setCursor(t){return this.Ug.setCursor(t),this}getCursor(){return this.Ug.getCursor()}setCursorMode(t){return this.Ug.setCursorMode(t),this}getCursorMode(){return this.Ug.getCursorMode()}setCustomCursor(t){return this.Ug.setCustomCursor(t),this}setCursorFormatting(t){return this.Ug.setCursorFormatting(t),this}getCursorFormatting(){return this.Ug.getCursorFormatting()}addCursor(t=ll){const i=this.dA(),s=t.ag(i,this.uiScale,this.uiScale,this.nA(i),this._t);return this.SA(s),s}addAxis(t){const i=this.xm.find((i=>i.tag===t));if(i)return i;const s=new pf(this.Fk,this.cf,this.xf,this,t,this.RC,this.Ik,this.BC,this.scaleLabelFormatter);return this.xm.push(s),this.RC._s(this.xm.map((t=>t.VC))),this.St.Ls(),s}addSeries(t){const i=void 0!==(null==t?void 0:t.pointShape)?t.pointShape:Oe.Circle,s=void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this._y.length,e=new mf(this,this.Km,this.xf,i,this.Tk,this.xm,this.ZC,this.QC,this.ky,this._t,s,this.St.vs);return this.Ly(e),e}getSeriesCount(){return this._y.length}setWebMode(t){return this.ak=t,this.St.Ls(),this}getWebMode(){return this.ak}setWebCount(t){return this.lk=t,this.St.Ls(),this}getWebCount(){return this.lk}setWebStyle(t){return this.ck="function"==typeof t?t(this.ck):t,this.St.Ls(),this}getWebStyle(){return this.ck}setScaleLabelStyle(t){return this.uk="function"==typeof t?t(this.uk):t,this.St.Ls(),this}getScaleLabelStyle(){return this.uk}setScaleLabelShadow(t){return this.dk=t,this.St.Ls(),this}getScaleLabelShadow(){return this.dk}setScaleLabelFont(t){return this.fk="function"==typeof t?t(this.fk):t,this.St.Ls(),this}getScaleLabelFont(){return this.fk}setScaleLabelPadding(t){return this.Ak=t,this.St.Ls(),this}getScaleLabelPadding(){return this.Ak}setScaleLabelStrategy(t){return this.rk=t,this.St.Ls(),this}setScaleLabelFormatter(t){return this.scaleLabelFormatter=t,this.xm.forEach((i=>{i.setScaleLabelFormatter(t)})),this.St.Ls(),this}setAxisLabelStyle(t){return this.gk="function"==typeof t?t(this.gk):t,this.St.Ls(),this}getAxisLabelStyle(){return this.gk}setAxisLabelFont(t){return this.vk="function"==typeof t?t(this.vk):t,this.St.Ls(),this}getAxisLabelFont(){return this.vk}setAxisLabelEffect(t){return this.RC.Ps(t),this.St.Ls(),this}getAxisLabelEffect(){return this.RC.Bs()}setAxisLabelPadding(t){return this.yk=t,this.St.Ls(),this}getAxisLabelPadding(){return this.yk}setAxisLabelStrategy(t){return this.nk=t,this.St.Ls(),this}setAxisStyle(t){return this.pk="function"==typeof t?t(this.pk):t,this.St.Ls(),this}getAxisStyle(){return this.pk}setNibStyle(t){return this.mk="function"==typeof t?t(this.mk):t,this.St.Ls(),this}getNibStyle(){return this.mk}setNibLength(t){return this.Sk=t,this.St.Ls(),this}getNibLength(){return this.Sk}setAutoAxis(t){return this.hk=t,this}getAutoAxis(){return this.hk}setScrollStrategy(t){return this.BC=t,this.xm.forEach((i=>i.setScrollStrategy(t))),this.St.Ls(),this}setAxisInterval(t){return this.Ik=t,this.xm.forEach((i=>i.setInterval(t))),this}Le(t){super.Le(t),Ya.LA(this.Sh,this._A);const i=this.xm.length,s=Ya.PA(this.Sh,this._A),e=r(this.xf.x.getInnerInterval()-(this.nn.left+this.nn.right),this.xf.y.getInnerInterval()-(this.nn.bottom+this.nn.top+s)),h=((t=0,i=0,s=0,e=0)=>({left:t,top:i,right:s,bottom:e}))(0,0,0,0);if(void 0!==this.nk){const t=Math.min(e.x,e.y)/2;for(let s=0;s<i;s+=1){const e=Sf(s,i),n=Math.cos(e),o=Math.sin(e),a=this.xm[s].getLabelSize();Cf();const l=this.nk(_f,s,i,this.xm[s].tag,e,this.yk),c=r(n*t+l.paddingX,o*t+l.paddingY);n>0?h.right=Math.max(h.right,c.x+.5*(1-l.alignmentX)*a.x-t):h.left=Math.max(h.left,-c.x+.5*(l.alignmentX+1)*a.x-t),o>0?h.top=Math.max(h.top,c.y+.5*(1-l.alignmentY)*a.y-t):h.bottom=Math.max(h.bottom,-c.y+.5*(l.alignmentY+1)*a.y-t)}}this.xm.forEach((t=>{const i=!this.getSeries().some((t=>t.tk()))&&this.getSeriesCount()>1,s=this.Pk(t.tag,i);s&&t.Er(s)}));const n=r(this.xf.x.getInnerStart()+(h.left+this.xf.x.getInnerInterval()-h.right)/2,this.xf.y.getInnerStart()+(h.bottom+this.xf.y.getInnerInterval()-h.top)/2),o=Math.min(e.x/2-(h.left+h.right)/2,e.y/2-(h.bottom+h.top)/2);this.bk=f(this.oi.left+this.nn.left+h.left,this.oi.top+this.nn.top+s+h.top,this.oi.right+this.nn.right+h.right,this.oi.bottom+this.nn.bottom+h.bottom),this.Xg(n,o);for(const t of this._y)t.hy();for(const t of this._y)t.Le();this.Ug.Le(!1,this._y,void 0),super.xA();for(const t of this._y)t.vv()}dispose(){return this.v_.G(),this.wk.G(),this.Fk.G(),this.Km.G(),this.cf.G(),this.Ug.G(),super.dispose()}getMinimumSize(){return r(this.bk.left+this.bk.right+100,this.bk.bottom+this.bk.top+100)}Xg(t,i){const s=this.xm.length,e=[];for(let h=0;h<s;h+=1){const n=Sf(h,s),o=r(t.x+Math.cos(n)*i,t.y+Math.sin(n)*i);e.push(o)}Mf(this.Iy,this.ak,t,e),Mf(this.Py,this.ak,t,e),this.Iy.Dc(i),this.Py.Dc(i),((t,i,s,e,h,r,n,o)=>{const a=t.length,l=r.length,c=i>0&&l>1;for(let l=0;l<Math.max(i,a);l+=1)if(c&&l<i){l>=a&&t.push(n());const o=t[l];Mf(o,s,e,r);const c=h*((l+1)/i);o.Dc(c)}else l<t.length&&o(t[l]);t.length=c?i:0})(this.sk,this.lk,this.ak,t,i,e,this.Mk,this._k);for(const t of this.sk)t.Ie(V).Fe(this.ck);for(let h=0;h<s;h+=1){const r=this.xm[h],n=Sf(h,s);Cf();const o=void 0!==this.nk?this.nk(_f,h,s,this.xm[h].tag,n,this.yk):void 0;r.Xg(t,e,h,n,i,this.ak,o)}((t,i,s,e,h,n,o,a,l)=>{const c=h.length,u=t.length;let d=0;void 0!==i&&h.forEach(((h,l)=>{var f,A,g,v;const y=h.tag,p=Sf(l,c);for(let m=0;m<s;m+=1){wf.alignmentX=0,wf.alignmentY=0,wf.paddingX=0,wf.paddingY=0;const S=i({...wf,chart:h.chart,axis:h,axisIndex:l,axisCount:c,axisTag:y,axisAngle:p,webIndex:m,webCount:s,labelPadding:e});if(void 0!==S){d>=u&&t.push(a());const i=t[d];d+=1;const e=(s-m)/s,c=h.formatValue(h.axisScale.getInnerStart()+e*(h.axisScale.getInnerEnd()-h.axisScale.getInnerStart())),y=Es(n,o[l],e);i.Be(js(y,r(null!==(f=S.paddingX)&&void 0!==f?f:0,null!==(A=S.paddingY)&&void 0!==A?A:0))).nl(null!==(g=S.alignmentX)&&void 0!==g?g:0).ll(null!==(v=S.alignmentY)&&void 0!==v?v:0).Sr(c)}}}));for(let i=d;i<u;i+=1)l(t[i]);t.length=d})(this.ek,this.rk,this.lk,this.Ak,this.xm,t,e,this.Ck,this.kk);for(const t of this.ek)t.Ie(this.uk).Xh(this.fk).mr(this.dk)}Pk(t,i){let s,e;const h=this.getAxis(t);for(const t of this._y){const r=t.getValue(h.tag,i);void 0!==r&&(s=void 0===s?r:Math.min(s,r),e=void 0===e?r:Math.max(e,r))}if(void 0!==s&&void 0!==e)return c(s,e)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const Tf=(t,i,s)=>Xa(i,[[{component:i.series,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[i.axis],[{text:t.getAxis(i.axis).formatValue(i.value),font:{weight:"bold"}}]]),Ff=100001,If=200002,Pf=300002,Lf=400001,Bf=510001,Df=(t,i)=>{const s=Math.floor(99999/i),e=Math.floor(99999/i),h=Math.floor(99998/i),r=Math.floor(99998/i),n=Math.floor(99999/(i+1)),o=Math.floor(89999/(i+1)),a=Bf+i*o;let l=0;return{Lk:()=>{const i=t.Bk("dashboard ui",a+l);return l+=1,i},Dk:()=>t.Bk("dashboard legend",51e4),Ek:i=>{const a=1+i*s,l=Ff+i*e,c=If+i*h,u=Pf+i*r,d=Lf+i*n,f=Bf+i*o;let A=0;return{St:t,wA:(i,s)=>{const e=a+s;return t.Bk(i,e)},bm:(i,s)=>{const e=l+s;return t.Bk(i,e)},p_:(i,s)=>{const e=c+s;return t.Bk(i,e)},Ng:(i,s)=>{const e=u+s;return t.Bk(i,e)},Sm:(i,s,e)=>{const h=u+s;return t.Rk(i,h,e)},kA:(i,s)=>{const e=d+s;return t.Bk(i,e)},fA:i=>{const s=f+A,e=t.Bk(i,s);return A+=1,e},gA:()=>t.Bk("panel legend",500002+i),$g:()=>t.Bk("panel cursor",600001+i)}}}};class Ef{constructor(t){this.D=new zt,this.S=t}_(t){return this.S=t,this.D.R("change",{value:t}),this}C(){return this.S}V(t,i,s){this.D.addEventListener(t,i,s)}N(t,i){this.D.removeEventListener(t,i)}}const Rf={uh:!1,dh:0,fh:!1,gh:0,Ah:!1,yh:0,ph:0,hh:fr.fitting},zf=t=>{if(!t||"object"!=typeof t||null===t)return!1;const i=t.type;return!(!i||!["spark-line","spark-bar","spark-win-loss","spark-area","spark-pie"].includes(i))},Vf=(t,i,s,e,h,r,n,o)=>{const{type:a,data:l}=t;if(0===l.length)return;const c=[e,h];"spark-line"===a&&Wf(t,i,c,r,n,o),"spark-bar"===a&&jf({...t,winLoss:!1},i,c,r,n,o),"spark-win-loss"===a&&jf({...t,winLoss:!0},i,c,r,n,o),"spark-area"===a&&Zf(t,i,c,r,n,o),"spark-pie"===a&&Qf(t,i,c,r,n,o)},Of=(t,i,s,e)=>({x:Gf(t.x,i.x,s.x,e),y:$f(t.y,i.y,s.y,e)}),Nf=(t,i,s,e)=>({position:Gf(t.position,i.x,s.x,e),high:$f(t.high,i.y,s.y,e),low:$f(t.low,i.y,s.y,e)}),Gf=(t,i,s,e)=>{const h=fi(t,i,i+s);return e[0].x+e[1].x*(h-i)/s},$f=(t,i,s,e)=>{const h=fi(t,i,i+s);return e[0].y+e[1].y*(h-i)/s},Uf=(t,i,s,e,h,r,n,o)=>{for(const a of t)"point"===a.type&&Yf(a,i,s,h,r,n,o),"axis-band"===a.type&&Hf(a,s,h,r,n,o),"constant-line"===a.type&&Xf(a,s,e,h,r,n,o)},Yf=(t,i,s,e,h,r,n)=>{const{value:o,fillStyle:a,shape:l,size:c,rotation:u}=t;let d={x:NaN,y:NaN};if("start"===o&&(d=i[0]),"end"===o&&(d=i[i.length-1]),"min"===o){d=i[0];for(const t of i)d=d.y<t.y?d:t}if("max"===o){d=i[0];for(const t of i)d=d.y>t.y?d:t}("object"!=typeof o||(d=Of(o,s,e,h),((t,i)=>{const s=i[0],e=i[1],h=t.x,r=t.y;return s.x<=h&&h<=s.x+e.x&&s.y<=r&&r<=s.y+e.y})(d,h)))&&r.pointSet.add().ti().Fl(void 0!==l?l:Oe.Circle).Wh(u||0).Z(c||5).Ie(a||n.sparkPointChartFillStyle).Dl(d)},Hf=(t,i,s,e,h,n)=>{const{axis:o,start:a,end:l,fillStyle:c,strokeStyle:u}=t;let d=r(xs,bs),f=r(xs,bs);"x"===o&&(d=Of({x:a,y:xs},i,s,e),f=Of({x:l,y:bs},i,s,e)),"y"===o&&(d=Of({x:xs,y:a},i,s,e),f=Of({x:bs,y:l},i,s,e));const A=e[0],g=e[1],v=fi(d.x,A.x,A.x+g.x),y=fi(d.y,A.y,A.y+g.y),p=fi(f.x,A.x,A.x+g.x),m=fi(f.y,A.y,A.y+g.y);h.rect.add().Ol(v).Nl(y).Z(r(p-v,m-y)).Ie(c||n.sparkChartBandFillStyle).Fe(u||n.sparkChartBandStrokeStyle).Fe(Wt)},Xf=(t,i,s,e,h,n,o)=>{const{axis:a,value:l,strokeStyle:c}=t,u=l||0,d=i.y,f=s.y,A=i.x,g=s.x,v=[];if("y"===a&&d<=u&&u<=f){const t=Of(r(A,u),{x:A,y:d},e,h),i=Of(r(g,u),{x:A,y:d},e,h);v.push([t,i])}if("x"===a&&A<=u&&u<=g){const t=Of(r(u,d),{x:A,y:d},e,h),i=Of(r(u,f),{x:A,y:d},e,h);v.push([t,i])}v.length>0&&n.line.add().Ne(c||o.sparkChartConstantLineStrokeStyle).Ue(v[0][0]).$e(v[0][1])},Wf=(t,i,s,e,h,r)=>{const{strokeStyle:n,data:o,markers:a}=t,l=o.length;l>1e4&&h.qo&&ni.console.warn("LightningChart JS warning: SparkLineChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let c=bs,u=xs,d=bs,f=xs;for(let t=0;t<l;t+=1){const i=o[t];c=Math.min(c,i.x),u=Math.max(u,i.x),d=Math.min(d,i.y),f=Math.max(f,i.y)}const A={x:u-c,y:f-d},g=o.map((t=>Of(t,{x:c,y:d},A,s)));i.lineSet.add().Bt(r).Ne(n||e.sparkLineChartStrokeStyle).ti().Dl(g),a&&Uf(a,g,{x:c,y:d},{x:u,y:f},A,s,i,e)},jf=(t,i,s,e,h,r)=>{const{data:n,fillStyle:o,strokeStyle:a,threshold:l,winFillStyle:c,lossFillStyle:u}=t,d=t.barSize||1,f=t.gap||1,A=t.winLoss,g=l||0,v=f/d*1;let y=bs,p=xs;if(A)y=-1,p=1;else for(const t of n)y=Math.min(y,t),p=Math.max(p,t);const m={x:0,y:A?-1:Math.min(0,y)},S={x:1*n.length+(n.length-1)*v,y:A?2:Math.max(p,1e-5)};n.map(((t,i)=>{const e={x:1*(i+1)+i*v,y:A?t>=g?1:0:t},h=Of({x:1*i+i*v,y:A?t>=g?0:-1:0},m,S,s),r=Of(e,m,S,s);return{value:t,position:h,width:r.x-h.x,height:r.y-h.y}})).forEach((t=>{var s;i.rect.add().Bt(r).Be(t.position).$l(t.height).Gl(t.width).Ie((s=t.value,A?(s>=g?c:u)||e.sparkBarChartFillStyle:o||e.sparkBarChartFillStyle)).Fe(a||e.sparkBarChartStrokeStyle)}))},Zf=(t,i,s,e,h,r)=>{const{data:n,fillStyle:a,strokeStyle:l,markers:c}=t,u=n.length;u>1e4&&h.qo&&ni.console.warn("LightningChart JS warning: SparkAreaChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let d=bs,f=xs,A=bs,g=xs;for(let t=0;t<u;t+=1){const i=n[t];d=Math.min(d,i.x),f=Math.max(f,i.x),A=Math.min(A,i.y),g=Math.max(g,i.y)}const v={x:f-d,y:g-A},y=[],p=[];for(const t of n){const i=o(t.x,t.y,A);y.push(Nf(i,{x:d,y:A},v,s)),p.push(Of(t,{x:d,y:A},v,s))}i.junction.add().Bt(r).ti().Dl(y).Ie(a||e.sparkAreaChartFillStyle),i.lineSet.add().Bt(r).ti().Dl(p).Ne(l||e.sparkAreaChartStrokeStyle),c&&Uf(c,p,{x:d,y:A},{x:f,y:g},v,s,i,e)},Qf=(t,i,s,e,h,n)=>{const{data:o,strokeStyle:a}=t,l=o.map((t=>"number"==typeof t?t:t.value)),c=o.map((t=>"object"==typeof t?t.fillStyle:void 0)),u=l.reduce(((t,i)=>t+i),0),d=Of(r(50,50),{x:0,y:0},{x:100,y:100},s),f=s[1],A=f.x<=f.y?f.x/2:f.y/2;let g=90;l.forEach(((t,s)=>{const h=t/u*360;i.arc.add().Bt(n).Be(d).Dc(A).zc(0).Bc(g).$e(g+h).Ie(c[s]||Ji(e.sparkPieChartFillStyle,s)).Fe(a||e.sparkPieChartStrokeStyle),g+=h}))},Jf={XY:rd,Spider:ll,BarChart:cl,Map:Al,Polar:fl,D3:fc},Kf={Angola:{name:"Angola",ISO_A3:"AGO"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Gabon:{name:"Gabon",ISO_A3:"GAB"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Namibia:{name:"Namibia",ISO_A3:"NAM"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Oman:{name:"Oman",ISO_A3:"OMN"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},Somalia:{name:"Somalia",ISO_A3:"SOM"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"}},qf={Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Armenia:{name:"Armenia",ISO_A3:"ARM"},Australia:{name:"Australia",ISO_A3:"AUS"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},China:{name:"China",ISO_A3:"CHN"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},India:{name:"India",ISO_A3:"IND"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Nepal:{name:"Nepal",ISO_A3:"NPL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Philippines:{name:"Philippines",ISO_A3:"PHL"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Palestine:{name:"Palestine",ISO_A3:"PSE"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Russia:{name:"Russia",ISO_A3:"RUS"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Singapore:{name:"Singapore",ISO_A3:"SGP"},Syria:{name:"Syria",ISO_A3:"SYR"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Yemen:{name:"Yemen",ISO_A3:"YEM"}},tA={"New South Wales":{name:"New South Wales"},Victoria:{name:"Victoria"},Queensland:{name:"Queensland"},"South Australia":{name:"South Australia"},"Western Australia":{name:"Western Australia"},Tasmania:{name:"Tasmania"},"Northern Territory":{name:"Northern Territory"},"Australian Capital Territory":{name:"Australian Capital Territory"},"Other Territories":{name:"Other Territories"}},iA={"British Columbia":{name:"British Columbia"},Quebec:{name:"Quebec"},Nunavut:{name:"Nunavut"},"Prince Edward Island":{name:"Prince Edward Island"},Saskatchewan:{name:"Saskatchewan"},Yukon:{name:"Yukon"},Manitoba:{name:"Manitoba"},Ontario:{name:"Ontario"},"New Brunswick":{name:"New Brunswick"},"Northwest Territories":{name:"Northwest Territories"},Alberta:{name:"Alberta"},"Newfoundland and Labrador":{name:"Newfoundland and Labrador"},"Nova Scotia":{name:"Nova Scotia"}},sA={Albania:{name:"Albania",ISO_A3:"ALB"},Austria:{name:"Austria",ISO_A3:"AUT"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Denmark:{name:"Denmark",ISO_A3:"DNK"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Finland:{name:"Finland",ISO_A3:"FIN"},France:{name:"France",ISO_A3:"FRA"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Greece:{name:"Greece",ISO_A3:"GRC"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Italy:{name:"Italy",ISO_A3:"ITA"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Malta:{name:"Malta",ISO_A3:"MLT"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Poland:{name:"Poland",ISO_A3:"POL"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Romania:{name:"Romania",ISO_A3:"ROU"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Russia:{name:"Russia",ISO_A3:"RUS"},Turkey:{name:"Turkey",ISO_A3:"TUR"}},eA={Aruba:{name:"Aruba",ISO_A3:"ABW"},Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},Angola:{name:"Angola",ISO_A3:"AGO"},Anguilla:{name:"Anguilla",ISO_A3:"AIA"},Albania:{name:"Albania",ISO_A3:"ALB"},Aland:{name:"Aland",ISO_A3:"ALA"},Andorra:{name:"Andorra",ISO_A3:"AND"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Argentina:{name:"Argentina",ISO_A3:"ARG"},Armenia:{name:"Armenia",ISO_A3:"ARM"},"American Samoa":{name:"American Samoa",ISO_A3:"ASM"},Antarctica:{name:"Antarctica",ISO_A3:"ATA"},"French Southern and Antarctic Lands":{name:"French Southern and Antarctic Lands",ISO_A3:"ATF"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},Australia:{name:"Australia",ISO_A3:"AUS"},Austria:{name:"Austria",ISO_A3:"AUT"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belize:{name:"Belize",ISO_A3:"BLZ"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},Canada:{name:"Canada",ISO_A3:"CAN"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Chile:{name:"Chile",ISO_A3:"CHL"},China:{name:"China",ISO_A3:"CHN"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Cyprus No Mans Area":{name:"Cyprus No Mans Area",ISO_A3:"-99"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},"Cook Islands":{name:"Cook Islands",ISO_A3:"COK"},Colombia:{name:"Colombia",ISO_A3:"COL"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Curaçao":{name:"Curaçao",ISO_A3:"CUW"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},"Northern Cyprus":{name:"Northern Cyprus",ISO_A3:"-99"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Dominica:{name:"Dominica",ISO_A3:"DMA"},Denmark:{name:"Denmark",ISO_A3:"DNK"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},"Dhekelia Sovereign Base Area":{name:"Dhekelia Sovereign Base Area",ISO_A3:"-99"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Finland:{name:"Finland",ISO_A3:"FIN"},Fiji:{name:"Fiji",ISO_A3:"FJI"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},France:{name:"France",ISO_A3:"FRA"},"Faroe Islands":{name:"Faroe Islands",ISO_A3:"FRO"},"Federated States of Micronesia":{name:"Federated States of Micronesia",ISO_A3:"FSM"},Gabon:{name:"Gabon",ISO_A3:"GAB"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Guernsey:{name:"Guernsey",ISO_A3:"GGY"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Greece:{name:"Greece",ISO_A3:"GRC"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},Guam:{name:"Guam",ISO_A3:"GUM"},Guyana:{name:"Guyana",ISO_A3:"GUY"},"Hong Kong S.A.R.":{name:"Hong Kong S.A.R.",ISO_A3:"HKG"},"Heard Island and McDonald Islands":{name:"Heard Island and McDonald Islands",ISO_A3:"HMD"},Honduras:{name:"Honduras",ISO_A3:"HND"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},"Isle of Man":{name:"Isle of Man",ISO_A3:"IMN"},India:{name:"India",ISO_A3:"IND"},"Indian Ocean Territories":{name:"Indian Ocean Territories",ISO_A3:"-99"},"British Indian Ocean Territory":{name:"British Indian Ocean Territory",ISO_A3:"IOT"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Israel:{name:"Israel",ISO_A3:"ISR"},Italy:{name:"Italy",ISO_A3:"ITA"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},Jersey:{name:"Jersey",ISO_A3:"JEY"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},"Baykonur Cosmodrome":{name:"Baykonur Cosmodrome",ISO_A3:"-99"},"Siachen Glacier":{name:"Siachen Glacier",ISO_A3:"-99"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},Kiribati:{name:"Kiribati",ISO_A3:"KIR"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},Liechtenstein:{name:"Liechtenstein",ISO_A3:"LIE"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},"Macao S.A.R":{name:"Macao S.A.R",ISO_A3:"MAC"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Mexico:{name:"Mexico",ISO_A3:"MEX"},"Marshall Islands":{name:"Marshall Islands",ISO_A3:"MHL"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},"Northern Mariana Islands":{name:"Northern Mariana Islands",ISO_A3:"MNP"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Namibia:{name:"Namibia",ISO_A3:"NAM"},"New Caledonia":{name:"New Caledonia",ISO_A3:"NCL"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Niue:{name:"Niue",ISO_A3:"NIU"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Nepal:{name:"Nepal",ISO_A3:"NPL"},"New Zealand":{name:"New Zealand",ISO_A3:"NZL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Panama:{name:"Panama",ISO_A3:"PAN"},"Pitcairn Islands":{name:"Pitcairn Islands",ISO_A3:"PCN"},Peru:{name:"Peru",ISO_A3:"PER"},"Spratly Islands":{name:"Spratly Islands",ISO_A3:"-99"},Philippines:{name:"Philippines",ISO_A3:"PHL"},Palau:{name:"Palau",ISO_A3:"PLW"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},Poland:{name:"Poland",ISO_A3:"POL"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Palestine:{name:"Palestine",ISO_A3:"PSE"},"French Polynesia":{name:"French Polynesia",ISO_A3:"PYF"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Romania:{name:"Romania",ISO_A3:"ROU"},Russia:{name:"Russia",ISO_A3:"RUS"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},Singapore:{name:"Singapore",ISO_A3:"SGP"},"South Georgia and South Sandwich Islands":{name:"South Georgia and South Sandwich Islands",ISO_A3:"SGS"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Solomon Islands":{name:"Solomon Islands",ISO_A3:"SLB"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Somalia:{name:"Somalia",ISO_A3:"SOM"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},"Sao Tome and Principe":{name:"Sao Tome and Principe",ISO_A3:"STP"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},"East Timor":{name:"East Timor",ISO_A3:"TLS"},Tonga:{name:"Tonga",ISO_A3:"TON"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Tuvalu:{name:"Tuvalu",ISO_A3:"TUV"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},"United States Minor Outlying Islands":{name:"United States Minor Outlying Islands",ISO_A3:"UMI"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"US Naval Base Guantanamo Bay":{name:"US Naval Base Guantanamo Bay",ISO_A3:"-99"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Vanuatu:{name:"Vanuatu",ISO_A3:"VUT"},"Wallis and Futuna":{name:"Wallis and Futuna",ISO_A3:"WLF"},"Akrotiri Sovereign Base Area":{name:"Akrotiri Sovereign Base Area",ISO_A3:"-99"},Samoa:{name:"Samoa",ISO_A3:"WSM"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"}},hA={Alabama:{name:"Alabama"},Alaska:{name:"Alaska"},Arizona:{name:"Arizona"},Arkansas:{name:"Arkansas"},California:{name:"California"},Colorado:{name:"Colorado"},Connecticut:{name:"Connecticut"},Delaware:{name:"Delaware"},"District of Columbia":{name:"District of Columbia"},Florida:{name:"Florida"},Georgia:{name:"Georgia"},Hawaii:{name:"Hawaii"},Idaho:{name:"Idaho"},Illinois:{name:"Illinois"},Indiana:{name:"Indiana"},Iowa:{name:"Iowa"},Kansas:{name:"Kansas"},Kentucky:{name:"Kentucky"},Louisiana:{name:"Louisiana"},Maine:{name:"Maine"},Maryland:{name:"Maryland"},Massachusetts:{name:"Massachusetts"},Michigan:{name:"Michigan"},Minnesota:{name:"Minnesota"},Mississippi:{name:"Mississippi"},Missouri:{name:"Missouri"},Montana:{name:"Montana"},Nebraska:{name:"Nebraska"},Nevada:{name:"Nevada"},"New Hampshire":{name:"New Hampshire"},"New Jersey":{name:"New Jersey"},"New Mexico":{name:"New Mexico"},"New York":{name:"New York"},"North Carolina":{name:"North Carolina"},"North Dakota":{name:"North Dakota"},Ohio:{name:"Ohio"},Oklahoma:{name:"Oklahoma"},Oregon:{name:"Oregon"},Pennsylvania:{name:"Pennsylvania"},"Rhode Island":{name:"Rhode Island"},"South Carolina":{name:"South Carolina"},"South Dakota":{name:"South Dakota"},Tennessee:{name:"Tennessee"},Texas:{name:"Texas"},Utah:{name:"Utah"},Vermont:{name:"Vermont"},Virginia:{name:"Virginia"},Washington:{name:"Washington"},"West Virginia":{name:"West Virginia"},Wisconsin:{name:"Wisconsin"},Wyoming:{name:"Wyoming"}},rA={Anguilla:{name:"Anguilla",ISO_A3:"AIA"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Canada:{name:"Canada",ISO_A3:"CAN"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},Dominica:{name:"Dominica",ISO_A3:"DMA"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Mexico:{name:"Mexico",ISO_A3:"MEX"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"}},nA={Argentina:{name:"Argentina",ISO_A3:"ARG"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Chile:{name:"Chile",ISO_A3:"CHL"},Colombia:{name:"Colombia",ISO_A3:"COL"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},Guyana:{name:"Guyana",ISO_A3:"GUY"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Panama:{name:"Panama",ISO_A3:"PAN"},Peru:{name:"Peru",ISO_A3:"PER"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Honduras:{name:"Honduras",ISO_A3:"HND"}},oA={World:eA,USA:hA,NorthAmerica:rA,SouthAmerica:nA,Canada:iA,Europe:sA,Asia:qf,Africa:Kf,Australia:tA};class aA extends Tr{constructor(t,i,s,e,h,r){super(t,{Lr(){},Pr(){},Dr(){}},e,i,s,{numeric:i.xAxisNumericTicks.setFallBackToExtremeTicksAutomatically(!1),datetime:i.xAxisDateTimeTicks,time:i.xAxisTimeTicks},{type:"linear"}),this.D=new zt,this.chart=t,this.vs=r,this.Ys=h,this.Mh=h.Yr(t.zk).Xh(this._t.barChartCategoryAxisTitleFont||this._t.xAxisTitleFont).Ie(this._t.barChartCategoryAxisTitleFillStyle||this._t.xAxisTitleFillStyle),this.setTitleRotation(this.chart.Hs.getWidth({x:0,y:-90})),this.Zh=this.vs.kf([this.Mh]).Ps(i.effectsText),this.Vk=h.Ge(t.zk).Ne(i.barChartCategoryAxisStrokeStyle||i.xAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.Lf=t,this.Bf=t):"object"==typeof t&&(this.Lf=t.min,this.Bf=t.max),this.chart.St.Ls(),this}getThickness(){return{min:this.Lf,max:this.Bf}}setStrokeStyle(t){return this.Vk.Ne(t),this.chart.St.Ls(),this}getStrokeStyle(){return this.Vk.In()}Le(t){const i=this.getInterval(),s=this.chart.valueAxis.getInterval();this.Vk.Ue(this.chart.Hs.toPoint(i.start,s.start)).$e(this.chart.Hs.toPoint(i.end,s.start)).setVisible(this.ft),this.Mh.Be(this.chart.Hs.toPoint(.5*(i.start+i.end),this.chart.valueAxis.ot.Pi(s.start,-t.Ef))).ul(this.chart.Hs.toPoint(0,1)).setVisible(this.ft),t.ticksInfo.forEach(((t,i)=>{i.sr.Be(t.labelPosition).ul(t.labelAlignment).Wh(t.labelRotation).hl(t.labelOffset.x,t.labelOffset.y)}))}lr(t){return{}}Ar(t,i,s,e){return{keyValue:t,tickLevel:i,labelText:s,labelAlignment:{x:0,y:0},labelPosition:{x:0,y:0},labelOffset:{x:0,y:0},labelRotation:0}}br(t,i){return new Fr(i,t,this.Ys,this.chart.zk)}yr(t,i){const s=t.Ef,e=this.chart.Hs.getHeight(this.Mh.hr().zu());return{Rf:e,Pd:fi(this.Vk.In().Xt()/2+s+e,void 0!==this.Lf?this.Lf:0,void 0!==this.Bf?this.Bf:bs),ticksInfo:i}}_h(){return this.chart.uiScale}Rr(t,i){return i}Or(t,i,s){return{min:t,max:i}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}}class lA extends Tr{constructor(t,i,s,e,h,r,n){super(t,{Lr:()=>{var i;if(t.Ok){if("positive"===t.Nk||"bipolar"===t.Nk){if("after-bar"===(null===(i=t.Gk)||void 0===i?void 0:i.position)){const i=this.ot.Si();return this.ot.Pi(t.Ok.max,Math.min(this.chart.Hs.getHeight(this.chart.$k())+t.Gk.labelMargin,.3*i))}return t.Ok.max}return t.Uk?fi(-1,-1e-6,t.Ok.max):0}},Pr:()=>{var i;if(t.Ok){if("negative"===t.Nk||"bipolar"===t.Nk){if("after-bar"===(null===(i=t.Gk)||void 0===i?void 0:i.position)){const i=this.ot.Si();return this.ot.Pi(t.Ok.min,-Math.min(this.chart.Hs.getHeight(this.chart.$k())+t.Gk.labelMargin,.3*i))}return t.Ok.min}return t.Uk?fi(1,1e-6,t.Ok.min):0}},Dr:()=>{}},e,i,s,{numeric:i.barChartValueAxisTicks||i.yAxisNumericTicks,datetime:i.yAxisDateTimeTicks,time:i.yAxisTimeTicks},n),this.D=new zt,this.chart=t,this.vs=r,this.Ys=h,this.Mh=h.Yr(t.zk).Xh(this._t.barChartValueAxisTitleFont||this._t.yAxisTitleFont).Ie(this._t.barChartValueAxisTitleFillStyle||this._t.yAxisTitleFillStyle),this.setTitleRotation(this.chart.Hs.getHeight({x:0,y:-90})),this.Zh=this.vs.kf([this.Mh]).Ps(i.effectsText),this.Vk=h.Ge(t.zk).Ne(i.barChartValueAxisStrokeStyle||this._t.yAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.Lf=t,this.Bf=t):"object"==typeof t&&(this.Lf=t.min,this.Bf=t.max),this.chart.St.Ls(),this}getThickness(){return{min:this.Lf,max:this.Bf}}setStrokeStyle(t){return this.Vk.Ne(t),this.chart.St.Ls(),this}getStrokeStyle(){return this.Vk.In()}setTickStrategy(t,i){return super.Rh(t,i)}Le(t){const i=this.getInterval();this.Vk.Ue(this.chart.Hs.toPoint(-.5,this.zh)).$e(this.chart.Hs.toPoint(-.5,this.Vh)).setVisible(this.ft);const s="logarithmic"===this.Dh.type?Math.sqrt(i.start+i.end):.5*(i.start+i.end),e=this.chart.Hs.toPoint(this.chart.categoryAxis.ot.Pi(-.5,t.Ef*this.chart.Hs.Yk),s),h=this.chart.Hs.toPoint(this.chart.Hs.Hk,0);this.Mh.Be(e).ul(h).setVisible(this.ft),t.ticksInfo.forEach(((i,s)=>{s.sr.Be(i.labelPosition).ul(i.labelAlignment).Wh(i.labelRotation).hl(i.labelOffset.x,i.labelOffset.y);const e=s.Hr.th;e.tickStyle!==Wt&&0!==e.tickLength&&t.plotLines.add({positions:[i.positionTicklineStart,i.positionTicklineEnd]},{lineStyle:e.tickStyle}),e.gridStrokeStyle!==Wt&&e.gridStrokeLength>0&&t.plotLines.add({positions:[i.positionTicklineStart,i.positionGridlineEnd]},{lineStyle:e.gridStrokeStyle})}))}lr(t){return{}}Ar(t,i,s,e,h){const r=i.th,n=this.chart.Hs.toPoint(-.5,t),o=this.chart.zk.Pi(n,this.chart.Hs.toPoint(r.getTickLength()*this.chart.Hs.Yk,0)),a=this.chart.zk.Pi(n,this.chart.Hs.toPoint(r.gridStrokeLength*e.oppositeAxisSize*-this.chart.Hs.Yk,0));return{keyValue:t,tickLevel:i,labelText:s,labelPosition:this.chart.zk.Pi(o,this.chart.Hs.toPoint(r.getTickPadding()*this.chart.Hs.Yk,0)),labelAlignment:this.chart.Hs.toPoint(this.chart.Hs.Hk,r.getLabelAlignment()),labelOffset:{x:0,y:0},labelRotation:i.th.labelRotation,positionTicklineStart:n,positionTicklineEnd:o,positionGridlineEnd:a}}br(t,i){return new Fr(i,t,this.Ys,this.chart.zk)}yr(t,i){let s=0;for(const t of this.eh.values())for(const i of t.values()){const t=i.Hr.th,e=this.chart.Hs.getWidth(i.sr.hr().zu()),h=t.getTickLength()+t.getTickPadding()+e;s=Math.max(s,h)}const e=s+this.Vk.In().Xt()/2,h=this.chart.Hs.getWidth(this.Mh.hr().zu());return{Ef:e,Rf:h,Pd:fi(e+h,void 0!==this.Lf?this.Lf:0,void 0!==this.Bf?this.Bf:bs),ticksInfo:i}}_h(){return this.chart.zk}Rr(t,i){return"linear"===this.Dh.type?Be(t,i,this.ot):De(t,i,this.ot)}Or(t,i,s){return{min:t,max:i}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}}class cA extends Hc{constructor(t,i,s,e,h,r,n){super(t,i,s,e),this.Mt=ds(),this.S=0,this.Xk=!1,this.D=new zt,this.chart=t,this.chart=t,this.category=h,this.subCategory=r,this.Es=h,this.Ce=Ji(s.barChartBarFillStyle||s.rectangleSeriesFillStyle,n),this.ke=Ji(s.barChartBarStrokeStyle||s.rectangleSeriesStrokeStyle,n),this.addEventListener("visiblechange",(()=>this.chart.Wk())),this.addEventListener("dispose",(()=>{this.chart.Wk(),this.chart.jk.delete(this.category),this.chart.Zk.delete(this)}))}Kt(t,i){const s=this.chart.St.pa(i);return{cursorPosition:{pointMarker:{x:s.engineX,y:s.engineY},pointMarkerScale:this.chart.St.ot,resultTable:{x:s.engineX,y:s.engineY},resultTableScale:this.chart.St.ot},category:this.category,subCategory:this.subCategory,bar:this,value:this.getValue()}}setValue(t){return this.Xk=!0,this.S=t,this.chart.Wk(),this.chart.St.Ls(),this.chart.jk.delete(this.category),this.chart.Zk.delete(this),this}getValue(){return this.S}get value(){return this.S}setFillStyle(t){return this.Ce="function"==typeof t?t(this.Ce):t,this.chart.Wk(),this}getFillStyle(){return this.Ce}setStrokeStyle(t){return this.ke="function"==typeof t?t(this.ke):t,this.chart.Wk(),this}getStrokeStyle(){return this.ke}Qv(){return this.qv}setEffect(t){return this.chart.setBarsEffect(t),this}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:this.Ce})}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const uA=t=>!!(t&&"object"==typeof t&&"iCategory"in t&&"number"==typeof t.iCategory&&"value"in t&&"number"==typeof t.value);class dA extends Jl{constructor(t,i,s,e,h,r,n){var o;let a;super(t,i,s,i.wA("barChart bg",0),e,i.St._t.barChartBackgroundFillStyle||i.St._t.chartXYBackgroundFillStyle,i.St._t.barChartBackgroundStrokeStyle||i.St._t.chartXYBackgroundStrokeStyle,i.St._t.barChartTitleFont||i.St._t.chartXYTitleFont,i.St._t.barChartTitleFillStyle||i.St._t.chartXYTitleFillStyle,i.St._t.barChartTitleShadow||i.St._t.chartXYTitleShadow,r),this.coordsBars="barChart",this.Qk=AA.Descending,this.Jk=this._t.barChartCategoryLabels,this.Gk=this._t.barChartValueLabelsAfterBars,this.Kk=!0,this.ox=cs(),this.jk=new Map,this.Zk=new Map,this.Nk="positive",this.qk="columns",this.tT=!0,this.iT=new Map,this.sT={speed:1},this.mg={speed:1},this.eT=.08,this.hT=!1,this.rT={left:2,right:2,top:2,bottom:2},this.nT=[],this.Vo=t=>{this.zk.Z(t.engineWidth,t.engineHeight),this.hT=!0},this.D=new zt,this.St.Zo(Gr.Nn),this.oT=this._t.barChartCornerRadius,this.Hs="horizontal"===(null==n?void 0:n.type)?vA:gA,this.Sh.Sr("Bar Chart"),this.aT=i.Ng("barChart plotting 1",0),this.lT=i.Ng("barChart plotting 2",1),this.Uk="logarithmic"===(null===(o=null==n?void 0:n.valueAxis)||void 0===o?void 0:o.type),this.Uk?"horizontal"===this.Hs.cT?(a=s.d1({scale1DConstructor:pe,dimension:"y"}),this.zk=(new xe).Qi(s.d1({scale1DConstructor:le,dimension:"x"}),a)):(a=s.d1({scale1DConstructor:pe,dimension:"x"}),this.zk=(new xe).Qi(a,s.d1({scale1DConstructor:le,dimension:"y"}))):(this.zk=s.d2({scaleXYConstructor:be}),a=this.Hs.getWidth(this.zk)),this.uT=this.vs.kf(),this.lx=new Dl((()=>this.ox.Jt(this.aT.Vu(this.zk).xa(0))),((t,i,s)=>(t.Ie(s.fillStyle).Fe(s.strokeStyle),i.map((i=>{const s=i.existingMember||t.lo();return s.$u(i.x1,i.y1,i.x2,i.y2).Gu(i.rounding),this.ox.qt(s,i.bar),i.bar.ks([s]),s})))),(()=>{this.ox.ti()}),(t=>{this.uT._s(t)})),this.Iy=this.rA.Pe(this.zk).Ie(this._t.barChartSeriesBackgroundFillStyle||V).Fe(Wt),this.Py=this.rA.Pe(this.zk).Ie(V).Fe(this._t.barChartSeriesBackgroundStrokeStyle||Wt).setPointerEvents(!1),super.Fy(this.Iy,this.Py),this.categoryAxis=new aA(this,this._t,!1!==(null==n?void 0:n.animationsEnabled),a,this.lT,this.vs),this.categoryAxis.setInterval(this.Hs.getWidth({x:{start:-.5,end:.5},y:{start:.5,end:-.5}}));const l=Le(null==n?void 0:n.valueAxis);this.valueAxis=new lA(this,this._t,!1!==(null==n?void 0:n.animationsEnabled),this.Hs.getHeight(this.zk),this.lT,this.vs,l.type),this.dT=new El((()=>this.lT.Yr(this.zk).Ur(us).$r(us).xa(1))),this.fT=new Dl((()=>this.rA.Gf(this.zk).setPointerEvents(!1)),((t,i,s)=>(t.Ne(s.lineStyle),i.map((({positions:i,existingMember:s})=>(s||t.lo()).Uf(i[0],i[1]))))));const c=i.$g(),u=gi(n?n.cursorBuilder:void 0,cl);this.Ug=Qa(this,c,u.ag(c,this.uiScale,this.uiScale,ui,this._t),this,"show-pointed",yA,(()=>0)),this.addEventListener("resize",this.Vo),this.MA(h,this.zk),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled))}getSeries(){return this._y}setCornerRadius(t){return this.oT=t,this.Kk=!0,this.St.Ls(),this}getCornerRadius(){return this.oT}setCursor(t){return this.Ug.setCursor(t),this}getCursor(){return this.Ug.getCursor()}setCursorMode(t){return this.Ug.setCursorMode(t),this}getCursorMode(){return this.Ug.getCursorMode()}setCustomCursor(t){return this.Ug.setCustomCursor(t),this}setCursorFormatting(t){return this.Ug.setCursorFormatting(t),this}getCursorFormatting(){return this.Ug.getCursorFormatting()}addCursor(t=cl){const i=this.dA(),s=t.ag(i,this.uiScale,this.uiScale,this.nA(i),this._t);return this.SA(s),s}setBarsMargin(t){return this.eT=fi(t,0,.49),this.Kk=!0,this.St.Ls(),this}getBarsMargin(){return this.eT}setBarsEffect(t){return this.uT.Ps(t),this.St.Ls(),this}getBarsEffect(){return this.uT.Bs()}setData(t){let i;if(Array.isArray(t))i=[],t.forEach(((t,s)=>{"string"==typeof t?i.push({category:t}):"number"==typeof t?i.push({category:`Category ${s+1}`,value:t}):"object"==typeof t&&i.push(t)}));else{i=[];const s=Object.keys(t);for(const e of s){const s=t[e];i.push({category:e,value:"number"==typeof s?s:void 0})}}return this.AT("columns",i),this}setDataStacked(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:h}=i;h.forEach(((i,h)=>{const r=t[h];s.push({category:r,subCategory:e,value:i})}))})),this.AT("stacks",s),this}setDataGrouped(t,i){const s=[];return i.forEach((i=>{const{subCategory:e,values:h}=i;h.forEach(((i,h)=>{const r=t[h];s.push({category:r,subCategory:e,value:i})}))})),this.AT("groups",s),this}AT(t,i){this._y.length>0&&this.St.Zo(Gr.qn),this.qk=t,this.nT=i.map((t=>({category:t.category,subCategory:t.subCategory}))),this.gT(i);const s=is(i.map((t=>t.category))),e=s.length,h=is(i.map((t=>t.subCategory))).filter((t=>void 0!==t));if(i.forEach((t=>{let i=this._y.find((i=>i.category===t.category&&i.subCategory===t.subCategory));if(!i){const e=s.indexOf(t.category),r=void 0!==t.subCategory&&h.includes(t.subCategory)?h.indexOf(t.subCategory):void 0;i=new cA(this,this.ky,this._t,this.St.vs,t.category,t.subCategory,gi(r,e)),this.Ly(i),this.iT.set(i,{category:e,valueStart:this.Uk?1e-6:0,valueEnd:void 0!==t.value?t.value:0})}void 0!==t.value&&i.setValue(t.value)})),this._y.slice().forEach((t=>{void 0===i.find((i=>i.category===t.category&&i.subCategory===t.subCategory))&&(t.dispose(),this.iT.delete(t))})),this.categoryAxis.setInterval(this.Hs.getWidth({x:{start:-.5,end:Math.max(e,1)-.5},y:{start:Math.max(e,1)-.5,end:-.5}})),this.Ok=0===this._y.length?void 0:"stacks"!==t?this._y.reduce(((t,i)=>({min:Math.min(t.min,i.getValue()),max:Math.max(t.max,i.getValue())})),{min:bs,max:xs}):{min:0,max:s.reduce(((t,s)=>Math.max(t,i.reduce(((t,i)=>i.category!==s?t:void 0!==i.value?t+i.value:t),0))),0)},this.Ok&&(this.Nk=this.Ok.min>=0?"positive":this.Ok.max<=0?"negative":"bipolar",("bipolar"===this.Nk||"negative"===this.Nk)&&this.Uk))throw new Error("LightningChart JS BarChart bipolar/negative data + logarithmic value axis combination not supported.");if(this.vT&&this.vT(),"groups"===t||"stacks"===t){const t=h.map((t=>(t=>{let i=!1;const s=new Array;return t.forEach((e=>{const h=s=>{i||(i=!0,t.forEach((t=>e!==t?t.setHighlight(s.highlight):void 0)),i=!1)};e.addEventListener("highlightchange",h),s.push((()=>e.removeEventListener("highlightchange",h)))})),t.forEach((i=>{const e=()=>{const s=t.indexOf(i);s>=0&&t.splice(s,1)};i.addEventListener("dispose",e),s.push((()=>i.removeEventListener("dispose",e)))})),()=>{s.forEach((t=>t()))}})(this._y.filter((i=>i.subCategory===t)))));this.vT=()=>t.forEach((t=>t()))}this.gT(this._y),this.jk.clear(),this.Zk.clear(),this.Kk=!0,this.St.Ls()}setCategoryLabels(t){const i="function"==typeof t?this.Jk?t(this.Jk):this.Jk:t;return this.Jk=i?{...this._t.barChartCategoryLabels,...i}:void 0,this.jk.clear(),this.St.Ls(),this.hT=!0,this}getCategoryLabels(){return this.Jk}setValueLabels(t){var i;const s="function"==typeof t?this.Gk?t(this.Gk):this.Gk:t,e=(null==s?void 0:s.position)||(null===(i=this.Gk)||void 0===i?void 0:i.position);return s&&e?"after-bar"===e?this.Gk={...this._t.barChartValueLabelsAfterBars,...s}:"inside-bar"!==e&&"inside-bar-start"!==e&&"inside-bar-centered"!==e&&"inside-bar-end"!==e||(this.Gk={...this._t.barChartValueLabelsInsideBars,...s}):this.Gk=void 0,this.Zk.clear(),this.St.Ls(),this.hT=!0,this}getValueLabels(){return this.Gk}setLabelFittingEnabled(t){return this.tT=t,this.St.Ls(),this}getLabelFittingEnabled(){return this.tT}setLabelFittingMargins(t){return this.rT="object"==typeof t?t:"number"==typeof t?{left:t,right:t,top:t,bottom:t}:us,this.hT=!0,this.St.Ls(),this}getLabelFittingMargins(){return this.rT}getBar(t,i){if(("groups"===this.qk||"stacks"===this.qk)&&void 0===i)throw new Error("LightningChart JS BarChart.getBar() | `subCategory` parameter is required for grouped and stacked bar charts!");const s=this._y.find((s=>s.category===t&&(void 0===i||i===s.subCategory)));if(!s)throw new Error(`BarChart.getBar() no such bar: "${t}" ${i?`"${i}"`:""}`);return s}getBars(){return this._y}setSorting(t){this.Qk=t;const i=this._y.slice();return this._y.length=0,this._y.push(...ss(this.nT.map((t=>i.find((i=>i.category===t.category&&(void 0===t.subCategory||t.subCategory===i.subCategory))))))),this.gT(this._y),this.St.Ls(),this.Kk=!0,this}getSorting(){return this.Qk}setAnimationCategoryPosition(t,i=1){return this.sT=t?{speed:i}:void 0,this.St.Ls(),this}setAnimationValues(t,i=1){return this.mg=t?{speed:i}:void 0,this.St.Ls(),this}translateCoordinate(t,i,s){if(s&&ke(t)&&Ce(i))return super.translateCoordinate(t,i,s);const e=i;let h;if(_e(t))h=this.St.pa(t);else if(ke(t)){const i=ot(t,this.xf,this.St.ot);h={engineX:i.x,engineY:i.y}}else{if(!uA(t))throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Input coordinate system not recognized.");{const i=ot(this.Hs.toPoint(t.iCategory,t.value),this.zk,this.St.ot);h={engineX:i.x,engineY:i.y}}}if(we(e))return this.St.ma(h);if("barChart"===e){const t=ot({x:h.engineX,y:h.engineY},this.St.ot,this.zk);return{iCategory:this.Hs.getWidth(t),value:this.Hs.getHeight(t)}}if(Ce(e))return ot({x:h.engineX,y:h.engineY},this.St.ot,this.xf);throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Target coordinate system not recognized.")}Gd(){if("columns"===this.qk)return this._y;const t=is(ss(this._y.map((t=>t.subCategory))));return ss(t.map((t=>{const i=this._y.filter((i=>i.subCategory===t)),s=i[0];if(s)return{attach(e,h){return hs(e,i,{toggleVisibilityOnClick:h,label:t,style:s.getFillStyle()}),this},Gs:()=>{}}})))}Le(t){var i,s,e;super.Le(t);const h=this.dT.yv(),r=this.fT.yv(),n=this._y.filter((t=>t.getVisible()&&t.Xk)),o=is(n.map((t=>t.category))),a=is(ss(n.map((t=>t.subCategory)))),l=5e-4*t*((null===(i=this.sT)||void 0===i?void 0:i.speed)||0),c=.003*t*((null===(s=this.sT)||void 0===s?void 0:s.speed)||0),u=this.valueAxis.ot,d=u instanceof pe?(t,i)=>{var s;return Be(t,i,u,(null===(s=this.mg)||void 0===s?void 0:s.speed)||0)}:(t,i)=>{var s;return De(t,i,u,(null===(s=this.mg)||void 0===s?void 0:s.speed)||0)};let f;const A=null!==(e="positive"===this.Nk&&this.Ok?Math.min(this.Ok.min,this.valueAxis.getInterval().start,this.valueAxis.getInterval().end)-(this.Ok.max-this.Ok.min):"negative"===this.Nk&&this.Ok?Math.max(this.Ok.max,this.valueAxis.getInterval().start,this.valueAxis.getInterval().end)+(this.Ok.max-this.Ok.min):void 0)&&void 0!==e?e:0;"columns"===this.qk?f=n.map((t=>({bar:t,position:{category:o.indexOf(t.category),valueStart:this.Uk?1e-6:A,valueEnd:t.value}}))):"groups"===this.qk?f=n.map((t=>{const i=o.indexOf(t.category),s=a.indexOf(t.subCategory),e=1/(a.length+2*(a.length+1)*this.eT),h=this.eT*e;return{bar:t,position:{category:i+(s-(a.length-1)/2)*(e+h),valueStart:this.Uk?1e-6:A,valueEnd:t.value}}})):(f=[],o.forEach((t=>{const i=n.filter((i=>i.category===t));let s=this.Uk?1e-6:0;i.forEach((i=>{f.push({bar:i,position:{category:o.indexOf(t),valueStart:s,valueEnd:s+i.value}}),s+=i.value}))}))),f.forEach((t=>{const{bar:i,position:s}=t;let e,h,r=this.iT.get(i);void 0===r&&(r=s);const n=s.valueStart;if(this.sT&&r.category!==s.category){const t=Math.sign(s.category-r.category);e=r.category+l*t+c*(s.category-r.category),t!==Math.sign(s.category-e)&&(e=s.category)}else e=s.category;if(this.mg&&r.valueEnd!==s.valueEnd){const t=Math.sign(s.valueEnd-r.valueEnd);h=d(r.valueEnd,s.valueEnd),t!==Math.sign(s.valueEnd-h)&&(h=s.valueEnd)}else h=s.valueEnd;this.iT.set(i,{category:e,valueStart:n,valueEnd:h}),e===s.category&&h===s.valueEnd||this.St.Ls(!0),e===r.category&&h===r.valueEnd||(this.Kk=!0)})),Ya.LA(this.Sh,this._A);const g=n.length>0;this.categoryAxis.Er(),this.valueAxis.Er();const{labelMarginBeforeCategoryAxisPixels:v,labels:y}=g?this.yT(o,a,n,h,r):{labelMarginBeforeCategoryAxisPixels:0,labels:[]},p=this.categoryAxis.hr({physicalAxisSize:this.categoryAxis.ot.Si(),Ef:v}),m=this.valueAxis.hr({plotLines:r,physicalAxisSize:this.valueAxis.ot.Si(),oppositeAxisSize:this.Hs.getWidth(this.zk).Si()}),S=Ya.PA(this.Sh,this._A);this.zk.Ki([this.oi.bottom+this.nn.bottom+("vertical"===this.Hs.cT?p.Pd:0),this.oi.top+this.nn.top+S+("horizontal"===this.Hs.cT?m.Pd:0)]),this.zk.Ji([this.oi.left+this.nn.left+this.Hs.getHeight({x:p.Pd,y:m.Pd}),this.oi.right+this.nn.right]),this.aT.dm({x:this.zk.x.pi(),y:this.zk.y.pi(),width:this.zk.x.Si(),height:this.zk.y.Si()}),this.iA&&this.iA();const b={x:Math.min(this.zk.x.getInnerStart(),this.zk.x.getInnerEnd()),y:Math.min(this.zk.y.getInnerStart(),this.zk.y.getInnerEnd())},x=Math.max(this.zk.x.getInnerStart(),this.zk.x.getInnerEnd()),M=Math.max(this.zk.y.getInnerStart(),this.zk.y.getInnerEnd()),w={x:x-b.x,y:M-b.y};if(this.Iy.Be(b),this.Iy.Z(w),this.Py.Be(b),this.Py.Z(w),this.categoryAxis.Le(p),this.valueAxis.Le(m),super.xA(),this.Ug.Le(!1,this._y,void 0),(this.Kk||this.hT)&&this.tT){const t=y.map((t=>{const i=zs(t.setVisible(!0).hr().Kg());if(0!==this.rT.bottom||0!==this.rT.left||0!==this.rT.right||0!==this.rT.top){const s=Math.sign(this.zk.x.U-this.zk.x.$),e=Math.sign(this.zk.y.U-this.zk.y.$),h=e>0?i.min.y:i.max.y,r=e>0?i.max.y:i.min.y,n=s>0?i.min.x:i.max.x,o=s>0?i.max.x:i.min.x,a=t.ot.Pi({x:n,y:h},{x:-this.rT.left,y:-this.rT.bottom}),l=t.ot.Pi({x:o,y:r},{x:this.rT.right,y:this.rT.top});return{min:{x:Math.min(a.x,l.x),y:Math.min(a.y,l.y)},max:{x:Math.max(a.x,l.x),y:Math.max(a.y,l.y)}}}return i}));for(let i=0;i<y.length;i+=1){if(!y[i].getVisible())continue;const s=t[i];let e;do{e=y.findIndex(((e,h)=>h!==i&&y[h].getVisible()&&Cs(s,t[h]))),e>=0&&y[e].setVisible(!1)}while(e>=0)}}if(this.Kk){const t=this.lx.yv(),i="groups"===this.qk?1/(a.length+2*(a.length+1)*this.eT):1-2*this.eT;n.forEach((s=>{const e=this.iT.get(s);if(void 0===e)return;const h=e.category-.5*i,r=e.category+.5*i,n=this.Hs.toPoint(h,e.valueStart),o=this.Hs.toPoint(r,e.valueEnd);let l;this.oT&&(l={extent:this.oT,c_x1_y2:"vertical"===this.Hs.cT,c_x2_y2:"vertical"===this.Hs.cT||"horizontal"===this.Hs.cT,c_x1_y1:!1,c_x2_y1:"horizontal"===this.Hs.cT},"stacks"===this.qk&&s.subCategory&&a.indexOf(s.subCategory)!==a.length-1&&(l=void 0)),t.add({Mt:s.Mt,bar:s,x1:n.x,y1:n.y,x2:o.x,y2:o.y,rounding:l},{fillStyle:s.Ce,strokeStyle:s.ke})})),t.finishPlot()}h.finishPlot(),r.finishPlot(),this.Kk=!1,this.hT=!1}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationCategoryPosition(t),this.setAnimationValues(t),this.valueAxis.setAnimationsEnabled(t),this.categoryAxis.setAnimationsEnabled(t),this}dispose(){return this.lT.G(),this.aT.G(),this.Ug.G(),super.dispose()}gT(t){const i=this.Qk;i&&t.sort(((s,e)=>i({category:s.category,value:t.reduce(((t,i)=>t+(i.category===s.category&&i.value||0)),0)},{category:e.category,value:t.reduce(((t,i)=>t+(i.category===e.category&&i.value||0)),0)})))}yT(t,i,s,e,h){let r=0;const n=this.Jk,o=this.Gk,a=this.valueAxis.getInterval(),l=[];if(n&&n.labelFillStyle!==V){const i=n.tickLength+n.labelMargin,o=this.Hs.toPoint(0,1),c={bd:t.map(((t,e)=>{const h=s.reduce(((i,s)=>s.category!==t?i:i+s.value),0),r=n.formatter(t,h);if(!r)return;const l=e;return void 0!==l?{text:r,position:this.Hs.toPoint(l,this.valueAxis.ot.Pi(a.start,-i)),alignment:o,rotation:n.labelRotation,sizePixels:this.pT(t,h)}:void 0})),pn:n.labelFont,ot:this.zk};c.bd.forEach((t=>{t&&l.push(e.add().Sr(t.text).Be(t.position).ul(t.alignment).Wh(t.rotation).Ie(n.labelFillStyle).Xh(n.labelFont).mr(n.labelShadow))})),n.tickStyle!==Wt&&0!==n.tickLength&&c.bd.forEach((t=>{if(!t)return;const i=this.Hs.getWidth(t.position);h.add({positions:[this.Hs.toPoint(i,this.valueAxis.ot.getInnerStart()),this.Hs.toPoint(i,this.valueAxis.ot.Pi(a.start,-n.tickLength))]},{lineStyle:n.tickStyle})})),r=c.bd.reduce(((t,i)=>i?Math.max(t,this.Hs.getHeight(i.sizePixels)):t),0)+n.tickLength+n.labelMargin}if(o&&o.labelFillStyle!==V){const h={bd:[],pn:o.labelFont,ot:this.zk};"stacks"===this.qk&&o.displayStackedSum&&h.bd.push(...t.map(((t,e)=>{const h=s.reduce(((i,s)=>i+(s.category===t?s.value:0)),0),r=o.formatter({chart:this,bar:void 0,category:t,value:h,subCategory:void 0});if(!r)return;const n=s.filter((i=>i.category===t)).sort(((t,s)=>{var e,h;return i.indexOf(null!==(e=t.subCategory)&&void 0!==e?e:"")-i.indexOf(null!==(h=s.subCategory)&&void 0!==h?h:"")})),a=n[n.length-1],l=this.iT.get(a);return void 0!==l?{text:r,position:this.Hs.toPoint(l.category,this.valueAxis.ot.Pi(l.valueEnd,o.labelMargin*Math.sign(l.valueEnd))),alignment:this.Hs.toPoint(0,-1*Math.sign(l.valueEnd)),rotation:o.labelRotation,sizePixels:this.St.kh.qe(r,o.labelFont,o.labelRotation)}:void 0}))),"after-bar"!==o.position||"stacks"===this.qk&&!o.displayStackedIndividuals?"inside-bar"!==o.position&&"inside-bar-start"!==o.position&&"inside-bar-centered"!==o.position&&"inside-bar-end"!==o.position||h.bd.push(...s.map(((t,i)=>{const s=o.formatter({chart:this,bar:t,category:t.category,value:t.value,subCategory:t.subCategory});if(!s)return;const e=this.iT.get(t);if(void 0===e)return;const h="bipolar"===this.Nk?Math.sign(e.valueEnd):"negative"===this.Nk?-1:1,r=this.Hs.toPoint(0,"inside-bar"===o.position||"inside-bar-end"===o.position?1*h:"inside-bar-centered"===o.position?0:-1*h);return{text:s,position:this.Hs.toPoint(e.category,"inside-bar"===o.position||"inside-bar-end"===o.position?this.valueAxis.ot.Pi(e.valueEnd,-o.labelMargin*h):"inside-bar-centered"===o.position?(e.valueStart+e.valueEnd)/2:this.valueAxis.ot.Pi(e.valueStart,o.labelMargin*h)),alignment:r,rotation:o.labelRotation,sizePixels:this.mT(t)}}))):h.bd.push(...s.map(((t,i)=>{const s=o.formatter({chart:this,bar:t,category:t.category,value:t.value,subCategory:t.subCategory});if(!s)return;const e=this.iT.get(t);return void 0!==e?{text:s,position:this.Hs.toPoint(e.category,this.valueAxis.ot.Pi(e.valueEnd,o.labelMargin*Math.sign(e.valueEnd))),alignment:this.Hs.toPoint(0,-1*Math.sign(e.valueEnd)),rotation:o.labelRotation,sizePixels:this.mT(t)}:void 0}))),h&&h.bd.forEach((t=>{t&&l.push(e.add().Sr(t.text).Be(t.position).ul(t.alignment).Wh(t.rotation).Ie(o.labelFillStyle).Xh(o.labelFont).mr(o.labelShadow).setPointerEvents(!1))}))}return{labelMarginBeforeCategoryAxisPixels:r,labels:l}}pT(t,i){if(!this.Jk||this.Jk.labelFillStyle===V)return{x:0,y:0};const s=this.jk.get(t);if(s)return s;const e=this.Jk.formatter(t,i),h=this.St.kh.qe(e,this.Jk.labelFont,this.Jk.labelRotation);return h.isEstimate?this.St.Ls(!0):this.jk.set(t,h),h}mT(t){if(!this.Gk||this.Gk.labelFillStyle===V)return{x:0,y:0};const i=this.Zk.get(t);if(i)return i;const s=this.St.kh.qe(this.Gk.formatter({chart:this,bar:t,category:t.category,value:t.value,subCategory:t.subCategory}),this.Gk.labelFont,this.Gk.labelRotation);return s.isEstimate?this.St.Ls(!0):this.Zk.set(t,s),s}$k(){return this._y.reduce(((t,i)=>{const s=this.mT(i);return{x:Math.max(t.x,s.x),y:Math.max(t.y,s.y)}}),{x:0,y:0})}Wk(){this.Kk=!0,this.St.Ls()}H(){return super.H(),this.zk.H(),this}X(){return super.X(),this.zk.X(),this}getMinimumSize(){return{x:200,y:200}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const fA={Horizontal:"horizontal",Vertical:"vertical"},AA={Disabled:void 0,None:void 0,Ascending:(t,i)=>t.value-i.value,Descending:(t,i)=>i.value-t.value,Alphabetical:(t,i)=>t.category.localeCompare(i.category)},gA={...Zo,cT:"vertical",Yk:-1,Hk:1},vA={...Qo,cT:"horizontal",Yk:1,Hk:-1},yA=(t,i,s)=>{const e=[[{component:i.bar,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}]],h=t.valueAxis.getTitle();return h&&e.push([h]),i.subCategory?e.push([i.subCategory,"",{text:Pe(t.valueAxis.formatValue(i.bar.getValue()),t.valueAxis),font:{weight:"bold"}}]):e.push({text:Pe(t.valueAxis.formatValue(i.bar.getValue()),t.valueAxis),font:{weight:"bold"}}),e},pA=(t,i)=>Math.abs(t)+Math.abs(i);function mA(t,i){const s=t.reduce(pA,0),e=(h=t,Math.max(...h.map((t=>t))));var h;const r=(t=>Math.min(...t.map((t=>t))))(t);return Math.max(i**2*e/s**2,s**2/(i**2*r))}const SA=({height:t,width:i})=>t>i?{value:i,vertical:!1}:{value:t,vertical:!0},bA=({data:t,dimensions:i})=>{const{x:s,y:e,width:h,height:r}=i,n=t.map((t=>t.value)).reduce(pA,0),o=t.map((t=>t.animatedValue)).reduce(pA,0),a=t.map((t=>t.animatedValue*r*h/o)),l=a.reduce(((t,i)=>t+i),0),c=a.map((t=>t/l*100)),u=a.filter(((t,i)=>c[i])),d={children:[],id:0,parentID:-1,name:"Main Rectangle",value:n,animatedValue:o,x:s,y:e,width:h,height:r,nodeIndex:-1,userNode:{name:"Main Rectangle",value:n}};if(1===t.length){const s={...t[0],x:i.x,y:i.y,width:i.width,height:i.height,userNode:{...t[0].userNode,value:t[0].value}};d.children.push(s)}else MA(u,SA(d).value,t,d);return d.children},xA=(t,i,s,e,h)=>{const r=t.reduce(pA,0)/i;t.forEach(((t,i)=>{const n=Math.abs(t)/r,{x:o,y:a,children:l}=h,c=e[l.length],u={...c,x:o,y:a,width:s?r:n,height:s?n:r,userNode:{...c.userNode,value:c.value}};s?h.y-=n:h.x+=n,l.push(u)})),s?(h.x+=r,h.y+=i,h.width-=r):(h.x-=i,h.y-=r,h.height-=r)},MA=(t,i,s,e)=>{const h=[{children:t,width:i,row:[]}];for(;h.length>0;){const t=h.pop();if(!t)continue;const{children:i,width:r,row:n}=t;let o=0;const a=[...n];for(;o<i.length;){const t=[...a,i[o]],n=mA(a,r),l=mA(t,r);if(!(0===a.length||n>l)){xA(a,r,SA(e).vertical,s,e),h.push({children:i.slice(o),width:SA(e).value,row:[]});break}a.push(i[o]),o+=1}o===i.length&&xA(a,r,SA(e).vertical,s,e)}};class wA extends Ua{constructor(t,i,s,e,h,r,n){if(super(t,i,s,i.wA("treeMapChart bg",0),e,i.St._t.treeMapChartBackgroundFillStyle||i.St._t.chartXYSeriesBackgroundFillStyle,i.St._t.treeMapChartBackgroundStrokeStyle||i.St._t.chartXYBackgroundStrokeStyle,i.St._t.treeMapChartTitleFont||i.St._t.chartXYTitleFont,i.St._t.treeMapChartTitleFillStyle||i.St._t.chartXYTitleFillStyle,i.St._t.treeMapChartTitleShadow||i.St._t.chartXYTitleShadow,n),this.ST=new Map,this.bT=[],this.xT={},this.MT=d([]),this.mg={speed:1},this.wT=bs,this._T="Go Back",this.CT=[],this.kT=this._t.treeMapChartPathLabelFillStyle||this._t.uiTextFillStyle,this.TT=this._t.treeMapChartPathLabelFont||this._t.uiTextFont,this.FT=this._t.treeMapChartLabelHeaderFillStyle||this._t.uiTextFillStyle,this.IT=this._t.treeMapChartLabelHeaderFont||this._t.uiTextFont,this.PT=this._t.treeMapChartLabelFillStyle||this._t.uiTextFillStyle,this.LT=this._t.treeMapChartLabelFont||this._t.uiTextFont,this.Xm=!0,this.BT=!1,this.DT=this._t.treeMapChartParentColor||T,this.ET=this._t.treeMapChartNodeStrokeStyle||this._t.uiBackgroundStrokeStyle,this.nx=this._t.treeMapChartCornerRadius,this.jm=()=>{this.St.Ls(),this.BT=!0},this.RT=(t,i)=>{var s;const{collectionMember:e}=i,h=this.zT(e);h&&(this.cS=this.VT(h,t),this.Xm&&this.St.xs.Rs(e,!0),(null===(s=this.getUserInteractions().drillDown)||void 0===s?void 0:s.click)&&this.engine.setMouseStyle(tr.Point),this.St.Ls())},this.OT=(t,i)=>{const{collectionMember:s}=i;this.zT(s)&&(this.cS=void 0,this.Xm&&this.St.xs.Rs(s,!1),this.engine.setMouseStyle(tr.Default),this.St.Ls())},this.NT=(t,i)=>{var s;const{collectionMember:e}=i,h=this.zT(e);h&&(this.cS=this.VT(h,t),this.Xm&&this.St.xs.Rs(e,!0),(null===(s=this.getUserInteractions().drillDown)||void 0===s?void 0:s.click)&&this.engine.setMouseStyle(tr.Point),this.St.Ls())},this.GT=(t,i)=>{var s;if(t.defaultPrevented)return;const{collectionMember:e}=i,h=this.zT(e);if(h){if(null===(s=this.getUserInteractions().drillDown)||void 0===s?void 0:s.click){const i=(null==h?void 0:h.children.length)?h:h.parentID?this.xT[h.parentID]:void 0;i&&(this.MT._([i]),this.cS=void 0,this.D.R("viewchange",{nodes:this.MT.C().map((t=>t.userNode))}),this.BT=!0),t&&Bi(t)}this.St.Ls()}},this.$T=t=>{const i=this.xT[this.CT[t].id]?[this.xT[this.CT[t].id]]:this.bT;this.MT._(i),this.D.R("viewchange",{nodes:i.map((t=>t.userNode))}),this.BT=!0,this.St.Ls()},this.nodes=new zt,this.D=new zt,this._t.treeMapChartNodeColors)this.UT=this._t.treeMapChartNodeColors;else{const t=this._t.pointSeriesFillStyle,i=t=>U(t)?t.getColor():T;this.UT="function"==typeof t?new Array(5).fill(0).map(((s,e)=>i(t(e)))):[i(t)]}this.St.Zo(Gr.eo),this.Og=i.bm("TreeMapChart plotting",0),this.Gg=i.bm("TreeMap UI plotting",1),this.addEventListener("resize",this.jm),this.Sh.Sr("TreeMap Chart");const o=i.$g(),a=gi(r?r.cursorBuilder:void 0,dl);this.Ug=Qa(this,o,a.ag(o,this.uiScale,this.uiScale,ui,this._t),void 0,"show-pointed",_A,(()=>0)),this.YT=this.vs.kf(),this.MA(h,this.uiScale),this.HT=this.Og.Vu(this.xf).Ie(new Y).Fe(this.ET),this.XT=this.St.xs.ao(this,{animationEnabled:!1!==(null==r?void 0:r.animationsEnabled)}),this.WT=new El((()=>this.Gg.Yr(this.xf).setPointerEvents(!1))),this.jT=new El((()=>this.Gg.Yr(this.uiScale))),this.HT.setPointerEvents(!0),this.nodes.Gt(this.HT,(t=>{const i=this.zT(t);if(i)return i.userNode})),this.setAnimationsEnabled(!1!==(null==r?void 0:r.animationsEnabled)),this.HT.addEventListener("pointerenter",this.RT),this.HT.addEventListener("pointerleave",this.OT),this.HT.addEventListener("click",this.GT),this.HT.addEventListener("pointermove",this.NT)}setCornerRadius(t){return this.nx=t,this.BT=!0,this.St.Ls(),this}getCornerRadius(){return this.nx}setData(t){t=Array.isArray(t)?t.slice():[t];const{ZT:i}=(()=>{let t=0;return{ZT:i=>{var s;const e=i.map(((t,i)=>({node:t,parent:null}))),h=[];for(;e.length>0;){const i=e.pop();if(!i)continue;const{node:r,parent:n}=i;t+=1;const o={id:t,parentID:null==n?void 0:n.id,name:r.name,value:Number(r.value)||0,animatedValue:Number(r.value)||0,children:[],nodeIndex:n?n.nodeIndex:-1,userNode:r};n?n.children.push(o):h.push(o),null===(s=r.children)||void 0===s||s.forEach((t=>{e.push({node:t,parent:o})}))}const r=t=>{t.children.forEach(r),t.children.length>0&&(t.value+=t.children.reduce(((t,i)=>t+i.value),0),t.animatedValue+=t.children.reduce(((t,i)=>t+i.animatedValue),0),t.children.sort(((t,i)=>i.animatedValue-t.animatedValue)))};h.forEach(r);const n=1===i.length?h[0].children:h;return n.sort(((t,i)=>i.animatedValue-t.animatedValue)),n.forEach(((t,i)=>{t.nodeIndex=i;const s=i=>{i.children.forEach((i=>{i.nodeIndex=t.nodeIndex,s(i)}))};s(t)})),h}}})(),s=i(t);return s.forEach((t=>{const i=this.xT[t.id];i&&this.QT(t,i)})),this.cS=void 0,this.MT._(s),this.bT=s,this.xT=this.JT(s),this.BT=!0,this.St.Ls(),this}setAnimationValues(t,i=1){return this.mg=t?{speed:i}:void 0,this.St.Ls(),this}setInitPathButtonText(t){return this._T=t,this.BT=!0,this.St.Ls(),this}setDisplayedLevelsCount(t){return this.wT=t,this.BT=!0,this.St.Ls(),this}setDrillDownNode(t){var i,s;if(this.cS=void 0,void 0===t)this.MT._(this.bT);else{const e=[...this.bT];for(;e.length>0;){const h=e.pop();if(h){if(void 0!==h.value&&h.userNode===t||h.parentID&&Array.isArray(t)&&(null===(s=null===(i=this.xT[h.parentID])||void 0===i?void 0:i.userNode)||void 0===s?void 0:s.children)===t){const t=h.children.length?h:h.parentID?this.xT[h.parentID]:this.bT[0];this.MT._([t]);break}if(h.children)for(let t=h.children.length-1;t>=0;t-=1)e.push(h.children[t])}}}return this.D.R("viewchange",{nodes:this.MT.C().map((t=>t.userNode))}),this.BT=!0,this.St.Ls(),this}setNodeColoring(t){return t instanceof Array?(this.HT.Ie(new Y),this.UT=t):this.HT.Ie(t),this.BT=!0,this.St.Ls(),this}setParentNodeColor(t){return this.DT=t,this.BT=!0,this.St.Ls(),this}setPathLabelFillStyle(t){return this.kT="function"==typeof t?t(this.kT):t,this.BT=!0,this.St.Ls(),this}getPathLabelFillStyle(){return this.kT}setPathLabelFont(t){return rh(t)?this.TT=t:this.TT=t(this.TT),this.BT=!0,this.St.Ls(),this}getPathLabelFont(){return this.TT}setHeaderFont(t){return rh(t)?this.IT=t:this.IT=t(this.IT),this.BT=!0,this.St.Ls(),this}getHeaderFont(){return this.IT}setHeaderFillStyle(t){return this.FT="function"==typeof t?t(this.FT):t,this.BT=!0,this.St.Ls(),this}getHeaderFillStyle(){return this.FT}setLabelFont(t){return rh(t)?this.LT=t:this.LT=t(this.LT),this.BT=!0,this.St.Ls(),this}getLabelFont(){return this.LT}setLabelFillStyle(t){return this.PT="function"==typeof t?t(this.PT):t,this.BT=!0,this.St.Ls(),this}getLabelFillStyle(){return this.PT}setNodeBorderStyle(t){return this.HT.Fe(t),this.BT=!0,this.St.Ls(),this}getNodeBorderStyle(){return this.HT.da()}setNodeEffect(t){return this.YT.Ps(t),this.St.Ls(),this}getNodeEffect(){return this.YT.Bs()}setCursor(t){return this.Ug.setCursor(t),this}getCursor(){return this.Ug.getCursor()}setCursorMode(t){return this.Ug.setCursorMode(t),this}getCursorMode(){return this.Ug.getCursorMode()}setCustomCursor(t){return this.Ug.setCustomCursor(t),this}setCursorFormatting(t){return this.Ug.setCursorFormatting(t),this}getCursorFormatting(){return this.Ug.getCursorFormatting()}addCursor(t=dl){const i=this.dA(),s=t.ag(i,this.uiScale,this.uiScale,this.nA(i),this._t);return this.SA(s),s}setAnimationHighlight(t){return this.XT.uo(t),this}getAnimationHighlight(){return this.XT.do()}setHighlightOnHover(t){return this.Xm=t,this}getHighlightOnHover(){return this.Xm}VT(t,i){const s=this.St.pa(i);return{cursorPosition:{pointMarker:{x:s.engineX,y:s.engineY},pointMarkerScale:this.St.ot,resultTable:{x:s.engineX,y:s.engineY},resultTableScale:this.St.ot},name:t.name,value:t.value,node:t.userNode}}getMinimumSize(){}Gd(){return[this]}Le(t){super.Le(t),super.xA(),Ya.LA(this.Sh,this._A);const i=Ya.PA(this.Sh,this._A);if(this.BT&&this.MT.C().length){this.HT.ti(),this.ST.clear(),this.XT.co(),this.ah&&this.KT(t);const s=bA({data:this.MT.C(),dimensions:{x:0+this.nn.left,y:this.xf.y.getInnerEnd()-i-this.nn.top,width:this.xf.x.getInnerEnd()-this.nn.right-this.nn.left,height:this.xf.y.getInnerEnd()-i-this.nn.top-this.nn.bottom}}),e=this.WT.yv();this.qT(s,e),e.finishPlot(),this.tF(),this.bT!==this.MT.C()&&this.bT.length>1&&this.CT.unshift({name:this._T,id:0});let h=0;const r=this.jT.yv(),n=this.TT;this.CT.forEach(((t,i)=>{const s=r.add(),e=this.St.kh.qe(t.name,n,0);let o;s.Sr(`← ${t.name}`).Xh(n).Be({x:0,y:100}).ul({x:-1,y:1}).$r({left:this.nn.left+h,top:this.nn.top,right:0,bottom:0}).Ie(this.kT),s.addEventListener("click",(()=>this.$T(i))),s.addEventListener("pointerenter",(()=>{o=this.engine.setMouseStyle(tr.Point,o)})),s.addEventListener("pointerleave",(()=>{this.engine.restoreMouseStyle(o)})),h+=e.x+25})),r.finishPlot(),this.MT.C().every((t=>t.value===t.animatedValue))?this.BT=!1:this.St.Ls(!0)}return this.Ug.Le(!1,[],void 0,{explicitTarget:this.cS}),this}dispose(){return this.Gg.G(),this.Og.G(),this.Ug.G(),this.HT.dispose(),this.ST.clear(),this.WT.mv(),this.jT.mv(),super.dispose()}H(){return super.H(),this}X(){return super.X(),this}Gs(){return ji(this.HT.$h(),this.HT.Tt())}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),Wi(t,this._t,s,{}),this}qT(t,i,s=!1,e=0){const h=t.map(((t,i)=>({node:t,isChild:s,visibleDepth:e}))),r=this.nx?{extent:this.nx,c_x1_y1:!0,c_x1_y2:!0,c_x2_y1:!0,c_x2_y2:!0}:void 0;for(;h.length>0;){const t=h.pop();if(!t)continue;const{node:s,visibleDepth:e,opacity:n}=t,{x:o,y:a,height:l,width:c,children:u,animatedValue:d,name:f,nodeIndex:A}=s,g=this.UT,v=0===e&&1===this.MT.C().length?this.DT:g[A%g.length],y=this.HT.lo().$u(o,a,o+c,a-l).iF(v.setA(v.getA()*((null!=n?n:255)/255))).lS(d).Gu(r);this.ST.set(y,s),this.XT.lo(y,(t=>y.Bt(t)));const p=o+5,m=a+25+5,S=Math.max(l-25-5,0),b=Math.max(c-5-5,0);if(u&&u.length&&e<this.wT&&b>15&&S>15){const t=bA({data:u,dimensions:{x:b>0?p:o,y:S>0?a-25:m,width:b,height:S}});for(let i=0;i<t.length;i+=1){const r=(255-(u.length>7?50:150))/(u.length-1),o=1===s.id&&1===this.bT.length||this.bT===this.MT.C()?255:n?n/(e+1):255-i*r;h.push({node:t[i],isChild:!0,visibleDepth:e+1,opacity:o})}}const x=0===e&&1===this.MT.C().length?this.FT:this.PT,M=0===e?this.IT:this.LT,w=this.sF(f,c-25,M),_=this.St.kh.qe(w,M,0),C=i.add();c-25>_.x&&l>25?C.Sr(w).Be({x:o+5,y:a-2.5}).ul({x:-1,y:1}).Ie(x).Xh(M):C.Sr("")}}JT(t){const i={},s=[...t];for(;s.length>0;){const t=s.pop();t&&(i[t.id]=t,t.children&&s.push(...t.children))}return i}zT(t){if(!this.BT&&t)return this.ST.get(t)}tF(){this.CT=[];const t=this.MT.C()[0].id;let i=this.xT[t].parentID;for(;i;)this.CT.push({name:this.xT[i].name,id:i}),i=this.xT[i].parentID;return this.CT.reverse()}sF(t,i,s){let e=this.St.kh.qe(t,s,0).x;if(e<=i)return t;const h=t.split(" ");let r=t;for(;h.length>1&&e>i;)h.pop(),r=`${h.join(" ")}...`,e=this.St.kh.qe(r,s,0).x;if(e>i)for(r=`${h[0]}...`,e=this.St.kh.qe(r,s,0).x;r.length>3&&e>i;)r=`${r.substring(0,r.length-4)}...`,e=this.St.kh.qe(r,s,0).x;return r.length<=3&&e>i?"":r}KT(t){var i;const s=[...this.bT];for(;s.length>0;){const e=s.pop();if(!e)continue;const h=e.value-e.animatedValue;if(Math.abs(h)<.0015*e.value||void 0===this.mg)e.animatedValue=e.value;else{const s=h/255*((null===(i=this.mg)||void 0===i?void 0:i.speed)||1)*t;e.animatedValue+=s,(h>0&&e.animatedValue>e.value||h<0&&e.animatedValue<e.value)&&(e.animatedValue=e.value)}e.children&&e.children.length>0&&s.push(...e.children)}}QT(t,i){const s=[{current:t,previous:i}];for(;s.length>0;){const t=s.pop();if(!t)continue;const{current:i,previous:e}=t;i.animatedValue=this.ah?e.animatedValue:i.value,e.nodeIndex<0?i.nodeIndex=0:i.nodeIndex=e.nodeIndex;const h=new Map(e.children.map((t=>[t.id,t])));i.children.forEach(((t,i)=>{const r=h.get(t.id);s.push({current:t,previous:r||e})}))}}setUserInteractions(t){return this.ze=void 0===t?{drillDown:{click:!1}}:t,this}getUserInteractions(){return hi({drillDown:{click:!0}},this.ze)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const _A=(t,i,s)=>[[{text:i.name,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:i.value.toString(),font:{weight:"bold"}}]];class CA extends Ua{constructor(t,i,s,e,h,r,n){super(t,i,s,i.wA("gaugeChart bg",0),e,i.St._t.gaugeChartBackgroundFillStyle,i.St._t.gaugeChartBackgroundStrokeStyle,i.St._t.gaugeChartTitleFont,i.St._t.gaugeChartTitleFillStyle,i.St._t.gaugeChartTitleShadow,r),this.Mc=this._t.gaugeChartStartAngle,this.wc=this._t.gaugeChartEndAngle,this.eF={start:0,end:100},this.S=0,this.hF=[],this.rF=this._t.gaugeChartBarThickness,this.nF=this._t.gaugeChartValueIndicatorThickness,this.oF=this._t.gaugeChartNeedleLength,this.aF=this._t.gaugeChartNeedleThickness,this.lF=this._t.gaugeChartNeedleFillStyle,this.cF=this._t.gaugeChartNeedleStrokeStyle,this.Nu=this._t.gaugeChartRoundedEdges,this.uF=!0,this.dF=!0,this.fF=!0,this.AF=[],this.gF=[],this.vF=!0,this.yF=!0,this.dg=this.S,this.pF=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.mF=this._t.gaugeChartBarGradient,this.SF=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.bF=this._t.gaugeChartTickFont,this.xF=this._t.gaugeChartValueLabelFont,this.MF=this._t.gaugeChartValueLabelFillStyle,this.wF=this._t.gaugeChartUnitLabelFont,this._F=this._t.gaugeChartUnitLabelFillStyle,this.CF=this._t.gaugeChartTickFillStyle,this.kF=this._t.gaugeChartBarColor,this.TF=this._t.gaugeChartGlowColor,this.FF=this._t.gaugeChartGlowColor.getA(),this.IF=1,this.PF=1,this.LF=this._t.gaugeChartNeedleAlignment,this.BF=!1,this.DF=this._t.gaugeChartGapBetweenBarAndValueIndicators,this.EF=this._t.gaugeChartBarStrokeStyle,this.RF=!1,this.D=new zt,this.St.Zo(Gr.$n),this.Sh.Sr("Gauge Chart"),this.MA(h,this.xf),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled)),this.zF=this.kF,this.VF=this.TF,this.OF=m(0,0,0,0),this.NF=this.vs.kf(),this.GF=this.vs.kf().Ps(this._t.effectsText),this.$F=this.rA.Qc(this.xf).Fe(this.EF).setPointerEvents(!1),this.UF=this.rA.Yu(this.xf).Bc(0).$e(360).zc(0).Fe(Wt).setPointerEvents(!1),this.YF=this.CA.Ge(this.xf).Ne(this._t.gaugeChartNeedleStrokeStyle).setPointerEvents(!1),this.HF=this.CA.Ge(this.xf).Ne(new vh({thickness:this.aF,fillStyle:this.lF})).setPointerEvents(!1),this.XF=this.CA.Yr(this.xf).Xh(this.xF).Ie(this.MF).setPointerEvents(!1),this.Fd=this.CA.Yr(this.xf).Xh(this.wF).Ie(this._F).Sr("").setPointerEvents(!1),this.WF=this.rA.Yr(this.xf).Xh(this.bF).Ie(this.CF).setPointerEvents(!1),this.jF=this.rA.Yr(this.xf).Xh(this.bF).Ie(this.CF).setPointerEvents(!1),this.NF._s([this.$F]),this.GF._s([this.XF,this.Fd,this.WF,this.jF]),this.ZF(),this.addEventListener("resize",(()=>{this.BF=!0}))}ZF(){this.HF.Ne((t=>t.setThickness(this.aF))),this.YF.Ne((t=>t.setThickness(2*this.cF.getThickness()+this.aF)))}setAnimationsEnabled(t){return this.ah=t,this.yF=t,this.vF=t,this}setInterval(t,i){return this.eF={start:t,end:i},this.BF=!0,this.St.Ls(),this}getInterval(){return this.eF}setTickFillStyle(t){return this.CF="function"==typeof t?t(this.CF):t,this.gF.forEach((i=>{i.start.Ie(t),i.end.Ie(t)})),this.WF.Ie(t),this.jF.Ie(t),this.BF=!0,this.St.Ls(),this}getTickFillStyle(){return this.CF}setTickFont(t){return this.bF="function"==typeof t?t(this.bF):t,this.gF.forEach((i=>{i.start.Xh(t),i.end.Xh(t)})),this.WF.Xh(t),this.jF.Xh(t),this.BF=!0,this.St.Ls(),this}getTickFont(){return this.bF}setTickFormatter(t){return this.pF=t,this.BF=!0,this.St.Ls(),this}getTickFormatter(){return this.pF}setValueLabelFillStyle(t){return this.MF="function"==typeof t?t(this.MF):t,this.XF.Ie(t),this.BF=!0,this.St.Ls(),this}getValueLabelFillStyle(){return this.XF.$h()}setValueLabelFont(t){return this.xF="function"==typeof t?t(this.xF):t,this.XF.Xh(t),this.BF=!0,this.St.Ls(),this}getValueLabelFont(){return this.XF.Hh()}setValueFormatter(t){return this.SF="string"==typeof t?i=>t:t,this.BF=!0,this.St.Ls(),this}getValueLabel(){return this.XF.wr()||this.SF}setUnitLabelFillStyle(t){return this._F="function"==typeof t?t(this._F):t,this.Fd.Ie(t),this.BF=!0,this.St.Ls(),this}getUnitLabelFillStyle(){return this.Fd.$h()}setUnitLabelFont(t){return this.wF="function"==typeof t?t(this.wF):t,this.Fd.Xh(t),this.BF=!0,this.St.Ls(),this}getUnitLabelFont(){return this.Fd.Hh()}setUnitLabel(t){return this.Fd.Sr(t),this.BF=!0,this.St.Ls(),this}getUnitLabel(){return this.Fd.wr()}setNeedleFillStyle(t){return this.lF="function"==typeof t?t(this.lF):t,this.HF.Ne((i=>i.setFillStyle(t))),this.BF=!0,this.St.Ls(),this}getNeedleFillStyle(){return this.HF.In().getFillStyle()}setNeedleThickness(t){return this.aF=t,this.ZF(),this.BF=!0,this.St.Ls(),this}getNeedleThickness(){return this.aF}setNeedleStrokeStyle(t){return this.cF="function"==typeof t?t(this.cF):t,this.YF.Ne(t),this.ZF(),this.BF=!0,this.St.Ls(),this}getNeedleStrokeStyle(){return this.YF.In()}setNeedleLength(t){return this.oF=t,this.BF=!0,this.St.Ls(),this}getNeedleLength(){return this.oF}setBarColor(t){return this.kF=t,this.BF=!0,this.St.Ls(),this}getBarColor(){return this.zF}setBarGradient(t){return this.mF=t,this.BF=!0,this.St.Ls(),this}getBarGradient(){return this.mF}setBarStrokeStyle(t){return this.EF="function"==typeof t?t(this.EF):t,this.$F.Fe(t),this.BF=!0,this.St.Ls(),this}getBarStrokeStyle(){return this.$F.da()}setBarThickness(t){return this.rF=t,this.BF=!0,this.St.Ls(),this}getBarThickness(){return this.rF}setAngleInterval(t,i){return Math.abs(t-i)>360&&(i=t<i?t+360:t-360),this.Mc=t,this.wc=i,this.BF=!0,this.St.Ls(),this}getAngleInterval(){return{start:this.Mc,end:this.wc}}setValue(t){return this.RF&&this.St.Zo(Gr.qn),this.RF=!0,this.S=t,this.vF||(this.dg=this.S),this.BF=!0,this.St.Ls(),this}getValue(){return this.S}setValueAnimation(t,i=1){return this.vF=t,this.IF=Math.max(0,i),this.BF=!0,this.St.Ls(),this}setColorAnimation(t,i=1){return this.yF=t,this.PF=Math.max(0,i),this.BF=!0,this.St.Ls(),this}setRoundedEdges(t){return this.Nu=t,this.BF=!0,this.St.Ls(),this}getRoundedEdges(){return this.Nu}setValueIndicators(t){return this.hF=t,this.AF.forEach((t=>{t.dispose()})),this.AF.length=0,this.gF.forEach((t=>{t.start.dispose(),t.end.dispose()})),this.gF.length=0,this.hF.forEach((t=>{const i=this.rA.Qc(this.xf).Fe(Wt).Ie(new $({color:t.color})).setPointerEvents(!1);this.AF.push(i);const s=this.rA.Yr(this.xf).Xh(this.bF).Ie(this.CF).setPointerEvents(!1),e=this.rA.Yr(this.xf).Xh(this.bF).Ie(this.CF).setPointerEvents(!1);this.gF.push({start:s,end:e})})),this.NF._s([this.$F,...this.AF]),this.GF._s([this.XF,this.Fd,this.WF,this.jF,...this.gF.map((t=>[t.start,t.end])).flat()]),this.BF=!0,this.St.Ls(),this}getValueIndicators(){return this.hF}setValueIndicatorThickness(t){return this.nF=t,this.BF=!0,this.St.Ls(),this}getValueIndicatorThickness(){return this.nF}setAutomaticBarColoring(t){return this.fF=!!t,this.BF=!0,this.St.Ls(),this}getAutomaticBarColoring(){return this.fF}setGlowColor(t){return void 0===t?(this.uF=!1,this.VF=void 0):"object"==typeof t&&"auto"in t?(this.dF=t.auto,t.auto&&(this.VF=void 0),void 0!==t.alpha&&(this.FF=t.alpha),this.uF=!0):(this.VF=t,this.FF=t.getA(),this.dF=!1,this.uF=!0),this.BF=!0,this.St.Ls(),this}getAutomaticGlowColoring(){return this.dF}setNeedleAlignment(t){return this.LF=t,this.BF=!0,this.St.Ls(),this}getNeedleAlignment(){return this.LF}setGapBetweenBarAndValueIndicators(t){return this.DF=t,this.BF=!0,this.St.Ls(),this}getGapBetweenBarAndValueIndicators(){return this.DF}setBarEffect(t){return this.NF.Ps(t),this.St.Ls(),this}getBarEffect(){return this.NF.Bs()}setLabelEffect(t){return this.GF.Ps(t),this.St.Ls(),this}getLabelEffect(){return this.GF.Bs()}Le(t){var i;if(super.Le(t),Ya.LA(this.Sh,this._A),super.xA(),this.dg!==this.S){if(this.vF){const i=5e-4*t,s=.003*t,e=Math.sign(this.S-this.dg);this.dg=this.dg+i*e+s*this.IF*(this.S-this.dg),e!==Math.sign(this.S-this.dg)?this.dg=this.S:this.St.Ls(!0)}else this.dg=this.S;this.BF=!0}let s=this.hF.find((t=>this.dg>=t.start&&this.dg<=t.end));if(s||(this.dg<this.eF.start?s=this.hF.find((t=>t.start===this.eF.start)):this.dg>this.eF.end&&(s=this.hF.find((t=>t.end===this.eF.end)))),this.zF=this.fF&&s?s.color:this.kF,this.yF){if(this.OF!==this.zF){const i=this.OF.getR(),s=this.OF.getG(),e=this.OF.getB(),h=this.zF.getR(),r=this.zF.getG(),n=this.zF.getB(),o=Math.sign(h-i),a=Math.sign(r-s),l=Math.sign(n-e),c=.005*t,u=.003*t;this.OF=m(i+c*o+u*this.PF*(h-i),s+c*a+u*this.PF*(r-s),e+c*l+u*this.PF*(n-e));const d=Math.abs(h-this.OF.getR()),f=Math.abs(r-this.OF.getG()),A=Math.abs(n-this.OF.getB());d<1&&f<1&&A<1?this.OF=this.zF:this.St.Ls(!0),this.BF=!0}}else this.OF=this.zF;if(this.BF){let t=bs,e=xs,h=bs,r=xs;if(new Array(100).fill(0).forEach(((i,s,n)=>{const o=this.Mc+s/n.length*(this.wc-this.Mc),a=Math.sin(o*Math.PI/180),l=Math.cos(o*Math.PI/180);a<t&&(t=a),a>e&&(e=a),l<h&&(h=l),l>r&&(r=l)})),this.mF?this.$F.Ie(new K({stops:[{offset:0,color:S("#000000")},{offset:1,color:this.OF}],position:{x:.5,y:.5}})):this.$F.Ie(new $({color:this.OF})),this.uF){const t=this.dF&&s?this.OF:null!==(i=this.VF)&&void 0!==i?i:this.TF;this.UF.Ie(new K({stops:[{offset:0,color:t.setA(this.FF)},{offset:1,color:t.setA(0)}],position:{x:.5,y:.5},extent:Q.farthestSide}))}else this.UF.Ie(V);const n=this.pF(this.eF.start),o=this.pF(this.eF.end);let a=0,l=0;const c=this.St.kh.qe(n,this.WF.Hh(),this.WF.jh()),u=this.St.kh.qe(o,this.jF.Hh(),this.jF.jh());c.x>a&&(a=c.x),c.y>l&&(l=c.y),u.x>a&&(a=u.x),u.y>l&&(l=u.y),this.gF.forEach(((t,i)=>{if(i>=this.hF.length)return;const s=this.hF[i],e=this.pF(s.start),h=this.pF(s.end),r=this.St.kh.qe(e,t.start.Hh(),t.start.jh()),n=this.St.kh.qe(h,t.end.Hh(),t.end.jh());r.x>a&&(a=r.x),r.y>l&&(l=r.y),n.x>a&&(a=n.x),n.y>l&&(l=n.y)}));const d=this.hF.length>0?this.nF:0,f=this.xf.getInnerIntervalPixels(),A=Ya.PA(this.Sh,this._A),g={x:f.x-(this.nn.left+this.nn.right),y:f.y-(this.nn.bottom+this.nn.top)-A},v={x:this.nn.left+.5*g.x,y:this.nn.bottom+.5*g.y},y=d+2*this.DF+this.rF/2,p=a+y,m=l+y,b=m+A,x=g.y-(b+m),M=g.x-(p+p),w=Math.max(0,x<M?x:M),_=.5*w,C=.5*_,k=(t+e)*C,T=(h+r)*C,F={x:v.x-T,y:v.y-k},I=w>0;if(this.$F.setVisible(I),this.AF.forEach((t=>t.setVisible(I))),this.HF.setVisible(I),this.YF.setVisible(I),this.UF.setVisible(I),this.Fd.setVisible(I),this.XF.setVisible(I),this.WF.setVisible(I),this.jF.setVisible(I),this.gF.forEach((t=>{t.start.setVisible(I),t.end.setVisible(I)})),!I)return;const P={x:v.x-.5*T,y:v.y-.5*k};this.UF.Be(v).Dc(.5*Math.min(g.x,g.y)),this.XF.Be(P).Sr(this.SF(this.dg));let L=this.XF.zu(),B=this.Fd.zu();0===L.y&&(L=this.St.kh.qe(this.XF.wr(),this.XF.Hh(),this.XF.jh())),0===B.y&&(B=this.St.kh.qe(this.Fd.wr(),this.Fd.Hh(),this.Fd.jh())),this.Fd.Be({x:P.x,y:P.y-L.y-B.y/4});const D=FA(this.eF,this.Mc,this.wc,this.dg,F,_+this.LF*(this.oF/2+this.rF/2)),E=D.angle*(Math.PI/180),R=.5*this.oF,z=Math.cos(E),O=Math.sin(E);this.HF.Ue({x:D.x+R*z,y:D.y+R*O}).$e({x:D.x-R*z,y:D.y-R*O}),this.YF.Ue({x:D.x+R*z,y:D.y+R*O}).$e({x:D.x-R*z,y:D.y-R*O});const N=kA(F,_,this.Mc,this.wc,this.rF,this.Nu,!1,!1);this.$F.Hl(N).Pt({min:{x:F.x-_,y:F.y-_},max:{x:F.x+_,y:F.y+_}});const G=F.y+_,U=F.y-_,Y=F.x+_,H=F.x-_,[X,W]=this.eF.start<this.eF.end?[this.eF.start,this.eF.end]:[this.eF.end,this.eF.start],j=_+.5*this.rF+d/2+this.DF,Z=j+d/2;this.hF.forEach(((t,i)=>{var s,e;const h=t.start>=X&&t.end<=W;this.AF[i].setVisible(h),this.gF[i].start.setVisible(h),this.gF[i].end.setVisible(h);const r=FA(this.eF,this.Mc,this.wc,t.start,F,Z),n=FA(this.eF,this.Mc,this.wc,t.end,F,Z),o=kA(F,j,r.angle,n.angle,this.nF,this.Nu,!(0===i),!(i===this.hF.length-1));this.AF[i].Hl(o);const a=this.eF.start===t.start||this.eF.end===t.start,l=this.eF.start===t.end||this.eF.end===t.end||this.hF.some((i=>i.start===t.end&&i!==t));this.gF[i].start.Be({x:r.x,y:r.y}).ul({x:Math.min(1,Math.max(-1,2*(r.x-Y)/(H-Y)-1)),y:Math.min(1,Math.max(-1,2*(r.y-G)/(U-G)-1))}).Sr(null!==(s=t.startLabel)&&void 0!==s?s:a?"":this.pF(t.start)),this.gF[i].end.Be({x:n.x,y:n.y}).ul({x:Math.min(1,Math.max(-1,2*(n.x-Y)/(H-Y)-1)),y:Math.min(1,Math.max(-1,2*(n.y-G)/(U-G)-1))}).Sr(null!==(e=t.endLabel)&&void 0!==e?e:l?"":this.pF(t.end))}));const J=this.hF.some((t=>t.start<t.end?this.eF.start>=t.start&&this.eF.start<=t.end:this.eF.start<=t.start&&this.eF.start>=t.end)),q=FA(this.eF,this.Mc,this.wc,this.eF.start,F,J?Z:j-this.DF);this.WF.Be({x:q.x,y:q.y}).ul({x:Math.min(1,Math.max(-1,2*(q.x-Y)/(H-Y)-1)),y:Math.min(1,Math.max(-1,2*(q.y-G)/(U-G)-1))}).Sr(n);const tt=this.hF.some((t=>t.start<t.end?this.eF.end>=t.start&&this.eF.end<=t.end:this.eF.end<=t.start&&this.eF.end>=t.end)),it=FA(this.eF,this.Mc,this.wc,this.eF.end,F,tt?Z:j-this.DF);this.jF.Be({x:it.x,y:it.y}).ul({x:Math.min(1,Math.max(-1,2*(it.x-Y)/(H-Y)-1)),y:Math.min(1,Math.max(-1,2*(it.y-G)/(U-G)-1))}).Sr(o),this.BF=!1}}getMinimumSize(){return{x:150,y:150}}Gs(){}Gd(){return[this]}attach(t,i=!0,s=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),t.setPointerEvents(!1),Wi(t,this._t,s,{fill:new $({color:this.getBarColor()})}),this}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const kA=(t,i,s,e,h,r=!0,n=!0,o=!0)=>{const a=[],l=.5*h,c=s>e,u=Math.sign(s-e),d=-1*u;if(r){const t=l/(2*Math.PI*i)*360+.1;n&&(s+=t*d),o&&(e+=t*u)}else s+=.1*d,e+=.1*u;const f=TA(t,i+l,s,e,c);if(a.push(...f),r){const h={x:t.x+i*Math.cos(e*(Math.PI/180)),y:t.y+i*Math.sin(e*(Math.PI/180))};let r;r=s>e?TA(h,l,e+180,e+360,c):TA(h,l,e-180,e-360,c),a.push(...r)}const A=TA(t,i-l,e,s,!c);if(a.push(...A),r){const h={x:t.x+i*Math.cos(s*(Math.PI/180)),y:t.y+i*Math.sin(s*(Math.PI/180))};let r;r=s>e?TA(h,l,s-180,s-360,c):TA(h,l,s+180,s+360,c),a.push(...r)}return a},TA=(t,i,s,e,h)=>{s<e&&([s,e]=[e,s]);const r=[],n=h?-2:2,o=h?t=>t>e:t=>t<s;for(let a=h?s:e;o(a);a+=n){const s=a*(Math.PI/180),e=t.x+i*Math.cos(s),h=t.y+i*Math.sin(s);r.push({x:e,y:h})}const a=(h?e:s)*(Math.PI/180),l=t.x+i*Math.cos(a),c=t.y+i*Math.sin(a);return r.push({x:l,y:c}),r},FA=(t,i,s,e,h,r)=>{const[n,o]=t.start<t.end?[t.start,t.end]:[t.end,t.start],a=Math.max(n,Math.min(o,e)),l=t.start<t.end?s-i:i-s,c=t.start<t.end?i+(a-t.start)/(t.end-t.start)*l:i-(a-t.start)/(t.end-t.start)*l,u=c*(Math.PI/180);return{x:h.x+r*Math.cos(u),y:h.y+r*Math.sin(u),angle:Math.round(c)}};class IA extends Ll{constructor(t,i,s,e,h,r,n,o,a,l,c){super(t,i,s,e,h,r,n,o,a,l),this.QF=c}setLabelAlignment(t){return this.QF=t,this.Ls(),this}getLabelAlignment(){return this.QF}}class PA extends Tr{constructor(t,i,s,e,h,r,n){let o;super(t,{Lr:()=>t.JF?t.JF[this.key].max:void 0,Pr:()=>t.JF?t.JF[this.key].min:void 0,Dr:()=>{}},r,i,s,{numeric:i.parallelCoordinateAxisNumericTicks||i.yAxisNumericTicks,datetime:i.parallelCoordinateAxisDateTimeTicks||i.yAxisDateTimeTicks,time:i.parallelCoordinateAxisTimeTicks||i.yAxisTimeTicks},{type:"linear"}),this.KF=[],this.Zd=[],this.qF=8,this.dt=!1,this.D=new zt,this.chart=t,this.key=e,this.userID=h,this.vs=this.chart.St.vs.ys(this,{}),this.Ys=n,this.tI=n.Pe(t.iI).Ie(this._t.parallelCoordinateAxisBackgroundFillStyle||V).Fe(Wt).setPointerEvents(!1),this.Mh=n.Yr(t.iI).Xh(this._t.parallelCoordinateAxisTitleFont||this._t.yAxisTitleFont).Ie(this._t.parallelCoordinateAxisTitleFillStyle||this._t.yAxisTitleFillStyle).setPointerEvents(!1).$r(us).Ur(us),this.Zh=this.vs.kf([this.Mh]).Ps(i.effectsText),this.Vk=n.Ge(t.iI).Ne(i.parallelCoordinateAxisStrokeStyle||i.yAxisStrokeStyle),this.setAnimationsEnabled(!1),this.addEventListener("intervalchange",(i=>{t.sI(this,i.start,i.end)})),this.Vk.addEventListener("pointerenter",(()=>{var t,i;(null===(i=null===(t=this.chart.getUserInteractions().rangeSelectors)||void 0===t?void 0:t.create)||void 0===i?void 0:i.doubleClickAxis)&&(o=this.chart.engine.setMouseStyle(tr.Point))})),this.Vk.addEventListener("pointerleave",(()=>{o=this.chart.engine.restoreMouseStyle(o)})),this.Vk.addEventListener("dblclick",(t=>{var i,s;t.defaultPrevented||(null===(s=null===(i=this.chart.getUserInteractions().rangeSelectors)||void 0===i?void 0:i.create)||void 0===s?void 0:s.doubleClickAxis)&&(this.addRangeSelector(),Bi(t))})),this.setTitle(e)}setBackgroundFillStyle(t){return this.tI.Ie(t),this.Ys.Ls(),this}getBackgroundFillStyle(){return this.tI.$h()}setStrokeStyle(t){const i="function"==typeof t?t(this.Vk.In()):t,s=i.getFillStyle();return j(s)?(this.eI=s.lut,this.chart.hI=!0):this.eI=void 0,this.Vk.Ne(i),this.chart.St.Ls(),this}getStrokeStyle(){return this.Vk.In()}setTickStrategy(t,i){return super.Rh(t,i)}getTickStrategy(){return this.sh}addRangeSelector(){const t=this.nr(),i=this.Ys.Pe(this.chart.iI).Ie(this._t.parallelCoordinateAxisRangeSelectorFillStyle||this._t.dataGridScrollBarFillStyle).Fe(this._t.parallelCoordinateAxisRangeSelectorStrokeStyle||this._t.dataGridScrollBarStrokeStyle);let s;const e=t=>{var i,e;(null===(e=null===(i=this.chart.getUserInteractions().rangeSelectors)||void 0===i?void 0:i.move)||void 0===e?void 0:e.drag)&&(s=this.chart.engine.setMouseStyle(tr.Vertical,s))},h=t=>{s=this.chart.engine.restoreMouseStyle(s)};i.addEventListener("pointermove",e),i.addEventListener("pointerleave",h),i.addEventListener("pointerdown",(t=>{var n,o;if(!(null===(o=null===(n=this.chart.getUserInteractions().rangeSelectors)||void 0===n?void 0:n.move)||void 0===o?void 0:o.drag))return;const a=this.chart.getCursorMode();let l;this.chart.setCursorMode(void 0);const c=this.chart.St.pa(t),u=ot({x:c.engineX,y:c.engineY},this.chart.St.ot,this.chart.iI),d=this.chart.iI.y.Pi(i.Zt(),10),f=this.chart.iI.y.Pi(i.Qt(),-10);l=u.y<=d?"scaleMin":u.y>=f?"scaleMax":"move",Bi(t);let A=t;const g=t=>{if(void 0===this.rI)return;const i=.05*Math.abs(this.Vh-this.zh),s=(t.clientX,A.clientX,t.clientY-A.clientY);if(A=t,"move"===l){const t=r.max-r.min,i=this.chart.nI(r.max,this.rI,this).y,e=this.chart.iI.y.Pi(i,-s),h=this.chart.oI(e,this.rI,this);r.max=fi(h,Math.max(this.zh,this.Vh),Math.min(this.zh,this.Vh)+t),r.min=r.max-t}else if("scaleMax"===l){const t=this.chart.nI(r.max,this.rI,this).y,e=this.chart.iI.y.Pi(t,-s),h=this.chart.oI(e,this.rI,this);r.max=fi(h,r.min+i,Math.max(this.zh,this.Vh))}else if("scaleMin"===l){const t=this.chart.nI(r.min,this.rI,this).y,e=this.chart.iI.y.Pi(t,-s),h=this.chart.oI(e,this.rI,this);r.min=fi(h,r.max-i,Math.min(this.zh,this.Vh))}this.chart.aI(),Bi(t)},v=r=>{r.pointerId===t.pointerId&&(this.chart.setCursorMode(a),i.addEventListener("pointermove",e),i.addEventListener("pointerleave",h),ni.removeEventListener("pointermove",g),ni.removeEventListener("pointerup",v),s=this.chart.engine.restoreMouseStyle(s))};i.removeEventListener("pointermove",e),i.removeEventListener("pointerleave",h),ni.addEventListener("pointermove",g),ni.addEventListener("pointerup",v)})),i.addEventListener("dblclick",(t=>{var i,s;if(!(null===(s=null===(i=this.chart.getUserInteractions().rangeSelectors)||void 0===i?void 0:i.dispose)||void 0===s?void 0:s.doubleClick))return;const e=this.KF.indexOf(r);e>=0&&this.KF.splice(e,1),r.shape.dispose(),this.chart.aI(),Bi(t)}));const r={min:t.min+.25*(t.max-t.min),max:t.max-.25*(t.max-t.min),shape:i};this.KF.push(r),this.chart.aI();const n={setInterval:(t,i)=>(r.min=Math.min(t,i),r.max=Math.max(t,i),this.chart.aI(),n),setPointerEvents:t=>(i.setPointerEvents(t),n),dispose:()=>{const t=this.KF.indexOf(r);return t>=0&&(this.KF.splice(t,1),this.chart.aI()),n}};return n}addCustomTick(){const t=new IA((()=>this.chart.St.Ls()),(()=>{const i=this.Zd.indexOf(t);i>=0&&this.Zd.splice(i,1)}),(this._t.parallelCoordinateAxisNumericTicks||this._t.yAxisNumericTicks).majorTickStyle.tickStyle,(this._t.parallelCoordinateAxisNumericTicks||this._t.yAxisNumericTicks).majorTickStyle.tickLength,(this._t.parallelCoordinateAxisNumericTicks||this._t.yAxisNumericTicks).majorTickStyle.gridStrokeStyle,(this._t.parallelCoordinateAxisNumericTicks||this._t.yAxisNumericTicks).majorTickStyle.tickPadding,(this._t.parallelCoordinateAxisNumericTicks||this._t.yAxisNumericTicks).majorTickStyle.labelRotation,(this._t.parallelCoordinateAxisNumericTicks||this._t.yAxisNumericTicks).majorTickStyle.labelFillStyle,(this._t.parallelCoordinateAxisNumericTicks||this._t.yAxisNumericTicks).majorTickStyle.labelFont,(t=>this.formatValue(t)),(this._t.parallelCoordinateAxisNumericTicks||this._t.yAxisNumericTicks).majorTickStyle.labelAlignment);return this.Zd.push(t),this.chart.St.Ls(),t}Le(t){this.rI=t.parallelAxisIndex;const i=Math.min(this.zh,this.Vh),s=Math.max(this.zh,this.Vh);for(const[i,s]of this.eh)for(const[,e]of s){const s=t.ticksInfo.get(e);s&&(t.plotAxisLines.add({positions:[s.positionTicklineStart,s.positionTicklineEnd]},{lineStyle:i.th.tickStyle}),e.sr.Be(s.labelPosition).ul(s.labelAlignment).Wh(s.labelRotation).hl(s.labelOffset.x,s.labelOffset.y))}this.Zd.forEach((e=>{if(!e.ft||e.S<i||e.S>s)return;const h=this.lI(t.parallelAxisIndex,t.halfAxisThickness,e.S,e.rv,e.ov,e.QF);t.plotAxisLines.add({positions:[h.positionTicklineStart,h.positionTicklineEnd]},{lineStyle:e.hv}),t.plotAxisText.add().Be(h.labelPosition).ul(h.labelAlignment).Ie(e.QA).Xh(e.av).Sr(e.Fn(e.S)).Wh(e.Cd).setPointerEvents(e.ut)})),this.Vk.Ue({x:t.parallelAxisIndex,y:0}).$e({x:t.parallelAxisIndex,y:1}),this.Mh.Be({x:t.parallelAxisIndex,y:this.chart.iI.y.Pi(0,-(t.halfAxisThickness+this.qF))}).Wh(this.getTitleRotation()).ul({x:0,y:1});const e=0===t.parallelAxisIndex?t.parallelAxisIndex:this.chart.iI.x.Pi(t.parallelAxisIndex,-1.2*t.Ef);this.tI.Be({x:e,y:0}).Z({x:t.parallelAxisIndex-e,y:1});const h=this.chart.iI.hs();this.KF.forEach((i=>{const s=this.chart.nI(i.min,t.parallelAxisIndex,this),e=this.chart.nI(i.max,t.parallelAxisIndex,this),r={x:t.parallelAxisIndex-10*h.x*.5,y:s.y},n=t.parallelAxisIndex+10*h.x*.5,o=e.y;i.shape.Be(r).Z({x:n-r.x,y:o-r.y})}))}G(){this.tI.dispose(),this.Mh.dispose(),this.Vk.dispose(),this.KF.forEach((t=>t.shape.dispose())),this.KF.length=0,this.Qh(),this.vr(),this.dt=!0,this.D.R("dispose",{})}isDisposed(){return this.dt}lI(t,i,s,e,h,r){const n=this.chart.iI.Pi({x:t,y:(s-this.zh)/(this.Vh-this.zh)},{x:0-i,y:0}),o=this.chart.iI.Pi(n,{x:-e,y:0});return{positionTicklineStart:n,positionTicklineEnd:o,labelPosition:this.chart.iI.Pi(o,{x:-h,y:0}),labelAlignment:{x:1,y:r}}}lr(t){const i=this.Vk.In();return{halfAxisThickness:yh(i)?i.getThickness()/2:0}}Ar(t,i,s,e,h){const r=i.th,n=this.getInterval();return{...this.lI(e.parallelAxisIndex,h.halfAxisThickness,t,r.getTickLength(),r.getTickPadding(),2*(t-n.start)/(n.end-n.start)-1),keyValue:t,tickLevel:i,labelText:s,labelRotation:r.labelRotation,labelOffset:{x:0,y:0}}}br(t,i){return new Fr(i,t,this.Ys,this.chart.iI)}yr(t,i){const s=this.Mh&&this.Mh.wr().length>0&&this.getTitleFillStyle()!==V?this.Mh.hr().zu():{x:0,y:0};let e=0;this.eh.forEach(((t,i)=>{const s=i.th.tickLength+i.th.tickPadding;t.forEach((t=>{if(!t.sr.getVisible())return void(e=Math.max(e,s));const i=s+t.sr.hr().zu().x;e=Math.max(e,i)}))}));const h=this.Zd.reduce(((t,i)=>Math.max(t,i.ft?this.chart.St.kh.qe(i.Fn(i.S),i.av,i.Cd).x+i.rv+i.ov:0)),0);e=Math.max(e,h);const r=s.y+this.qF;e=Math.max(e,s.x/2);const n=e;return{Ef:e,cI:r,uI:s.x,Pd:n,ticksInfo:i}}_h(){return this.chart.iI}Rr(t,i){return Be(t,i,this.ot)}Or(t,i,s){return{min:t,max:i}}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}setPointerEvents(t){return this.D.setPointerEvents(t),this}getPointerEvents(){return this.D.getPointerEvents()}}class LA extends Hc{constructor(t,i,s,e,h){super(t,i,s,e),this.Es="Parallel Coordinate Series",this.dI=!1,this.D=new zt,this.he=t;const r=void 0!==(null==h?void 0:h.automaticColorIndex)?h.automaticColorIndex:this.he.getSeries().length;this.fI=Ji(this._t.parallelCoordinateChartSeriesColor,r)||(()=>{const t=Ji(this._t.lineSeriesStrokeStyle,r).getFillStyle();return(U(t)?t.getColor():void 0)||m(255,255,0)})(),this.addEventListener("visiblechange",(t=>{this.he.AI()})),this.addEventListener("dispose",(t=>{this.he.AI()})),this.setHighlightOnHover(!1)}setData(t){const i=void 0!==this.gI;return this.gI=this.he.vI(t),i&&this.he.yI(),this}getData(){return this.gI}setColor(t){const i="function"==typeof t?t(this.fI):t;return i===this.fI||(this.fI=i,this.he.St.Ls(),this.he.pI(this)),this}getColor(){return this.fI}Qv(){return this.getAutoScrollingEnabled()}hy(){}Le(){}vv(){}styleLegendEntry(t,i=!1){Wi(t,this._t,i,{fill:new $({color:this.fI})})}BA(){return super.BA()&&!this.dI}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}class BA extends Jl{constructor(t,i,s,e,h,r,n){var o,a;super(t,i,s,i.wA("parallelAxisChart bg",0),e,i.St._t.parallelCoordinateChartBackgroundFillStyle||i.St._t.chartXYBackgroundFillStyle,i.St._t.parallelCoordinateChartBackgroundStrokeStyle||i.St._t.chartXYBackgroundStrokeStyle,i.St._t.parallelCoordinateChartTitleFont||i.St._t.chartXYTitleFont,i.St._t.parallelCoordinateChartTitleFillStyle||i.St._t.chartXYTitleFillStyle,i.St._t.parallelCoordinateChartTitleShadow||i.St._t.chartXYTitleShadow,r),this.axes=[],this.mI=!0,this.SI=cs(),this.bI=new Map,this.xI=this._t.parallelCoordinateChartSeriesColorUnselected||m(255,255,255,30),this.MI=d({resolution:32}),this.hI=!1,this.wI=!1,this._I=!0,this.CI=!1,this.kI=!1,this.TI=!1,this.FI=!1,this.Vo=t=>{this.iI.Z(t.engineWidth,t.engineHeight)},this.D=new zt,this.yC=i.Ng("parallelAxisChart series",0),this.II=i.Ng("parallelAxisChart labels",1),this.Sh.Sr("Parallel Coordinate Chart"),this.St.Zo(Gr.ho),this.iI=this.lA.d2({scaleXYConstructor:be}).ts(0,1),this.MA(h,this.iI),this.Iy=this.rA.Pe(this.iI).Be({x:0,y:0}).Z({x:0,y:1}).Ie(this._t.parallelCoordinateChartSeriesBackgroundFillStyle||this._t.chartXYSeriesBackgroundFillStyle).Fe(Wt).setPointerEvents(!0),this.Py=this.rA.Pe(this.iI).Be({x:0,y:0}).Z({x:0,y:1}).Ie(V).Fe(this._t.parallelCoordinateChartSeriesBackgroundStrokeStyle||this._t.chartXYBackgroundStrokeStyle).setPointerEvents(!1),super.Fy(this.Iy,this.Py),this.setSeriesBackgroundEffect(!1),this.LI=new vh({thickness:null!==(o=this._t.parallelCoordinateChartSeriesLineThickness)&&void 0!==o?o:2,fillStyle:new Y}),this.BI=new vh({thickness:null!==(a=this._t.parallelCoordinateChartSeriesLineThickness)&&void 0!==a?a:2,fillStyle:new $({color:this._t.parallelCoordinateChartSeriesColorUnselected})}),this.DI=this.SI.Jt(this.yC.Gf(this.iI)).Ne(this.LI),this.DI.Hc=5e4,this.EI=this.yC.Gf(this.iI).Ne(this._t.parallelCoordinateChartPointedSeriesLineStyle||Ji(this._t.lineSeriesStrokeStyle,0)).setPointerEvents(!1),this.RI=new El((()=>this.II.Yr(this.iI))),this.zI=new Dl((()=>this.II.Gf(this.iI).setPointerEvents(!1)),((t,i,s)=>(t.ti().Ne(s.lineStyle),i.map((({positions:i})=>t.lo().Uf(i[0],i[1]))))));const l=i.$g(),c=gi(n?n.cursorBuilder:void 0,gl);this.Ug=Qa(this,l,c.ag(l,this.uiScale,this.uiScale,ui,this._t),this,"show-nearest",DA,(()=>0)),this.addEventListener("resize",this.Vo)}setCursor(t){return this.Ug.setCursor(t),this}getCursor(){return this.Ug.getCursor()}setCursorMode(t){return this.Ug.setCursorMode(t),this}getCursorMode(){return this.Ug.getCursorMode()}setCustomCursor(t){return this.Ug.setCustomCursor(t),this}setCursorFormatting(t){return this.Ug.setCursorFormatting(t),this}getCursorFormatting(){return this.Ug.getCursorFormatting()}addCursor(t=gl){const i=this.dA(),s=t.ag(i,this.uiScale,this.uiScale,this.nA(i),this._t);return this.SA(s),s}setUnselectedSeriesColor(t){return this.xI="function"==typeof t?t(this.xI):t,this.BI=new vh({thickness:this.getSeriesStrokeThickness(),fillStyle:new $({color:this.xI})}),this.St.Ls(),this}getUnselectedSeriesColor(){return this.xI}setPointedSeriesStrokeStyle(t){return this.EI.Ne(t),this.St.Ls(),this}getPointedSeriesStrokeStyle(){return this.EI.In()}setSpline(t,i){return t?this.MI._({resolution:void 0!==(null==i?void 0:i.resolution)?i.resolution:32}):this.MI._(void 0),this.St.Ls(),this}setAxes(t){const i=Array.isArray(t)?t.map(((t,i)=>({key:t,id:i}))):"object"==typeof t?Object.entries(t).map(((t,i)=>({key:t[0],id:t[1]}))):void 0;if(!i)return this;const s=i.filter((t=>void 0===this.axes.find((i=>i.key===t.key)))),e=this.axes.filter((t=>void 0===i.find((i=>t.key===i.key))));return s.forEach((t=>{const i=this.VI(),s=new PA(this,this._t,!this.ah,t.key,t.id,i,this.II),e=()=>{this._I=!0};s.addEventListener("visiblechange",e),s.addEventListener("dispose",(()=>s.removeEventListener("visiblechange",e))),this.axes.push(s)})),e.forEach((t=>{t.G();const i=this.axes.indexOf(t);i>=0&&this.axes.splice(i,1)})),this.axes=i.map((t=>this.axes.find((i=>i.key===t.key)))),this._I=!0,this.JF=void 0,this.St.Ls(),this}getAxis(t){const i=this.OI(t);if(!i)throw new Error(`ParallelAxisChart.getAxis | no such axis: "${t}". Found: ${this.axes.map((t=>void 0!==t.userID?`${t.key}, ${t.userID}`:t.key)).join(", ")}`);return i}hasAxis(t){return void 0!==this.OI(t)}addSeries(t){const i=new LA(this,this.ky,this._t,this.St.vs,t);return super.Ly(i),this.kI=!0,this.JF=void 0,this.St.Ls(),i}setSeriesStrokeThickness(t){return this.LI=this.LI.setThickness(t),this.BI=this.BI.setThickness(t),this.DI.Ne(this.LI),this.St.Ls(),this}getSeriesStrokeThickness(){return this.LI.getThickness()}setLUT(t){return this.Bd=t,this.Bd&&0===this.Bd.lut.units.length&&(this.Bd.lut=this.Bd.lut.setUnits(this.Bd.axis.getTitle())),this.FI=!0,this.St.Ls(),this}Le(t){super.Le(t);const i=this.axes.filter((t=>t.getVisible()));this.iI.qi(0,i.length-1),this.Iy.Z({x:i.length-1,y:1}),this.Py.Z({x:i.length-1,y:1});const s=void 0===this.JF;if(!this.JF){const t={};i.forEach((i=>{t[i.key]={min:bs,max:xs}})),this._y.forEach((i=>{i.gI&&Object.entries(i.gI).forEach((([i,s])=>{const e=t[i];e&&!Number.isNaN(s)&&(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}))})),this.JF=t}if(this.TI||this.CI||this.kI){const t=i.map(((t,i)=>t.KF));this._y.forEach((s=>{const e=s.gI;if(!e)return;let h=!1;for(let s=0;s<i.length;s+=1){const r=i[s],n=t[s],o=void 0!==n.find((t=>Ls(e[r.key],t.min,t.max)));if(n.length>0&&!o){h=!0;break}}s.dI=h}));const s=this._y.filter((t=>!t.dI));this.D.R("seriesselect",{selectedSeries:s})}for(const t of this._y)t.hy();for(const t of this._y)t.Le();super.xA();const e=this.St.Ns(this.Iy)||void 0!==this._y.find((t=>t.getPointed()))?this.NI():void 0;if(this.Ug.Le(!1,this._y,void 0,{explicitTarget:e,afterCursorPointedAt:t=>{const i=this.St.jo();if(t.length>1&&i){const t=this.St.pa(i);this.Ug.DA.rg({x:t.engineX,y:t.engineY},this.St.ot)}}}),Ya.LA(this.Sh,this._A),i.length>=2){const t=this.RI.yv(),e=this.zI.yv(),h=i.map(((i,s)=>(i.Er(),i.hr({plotAxisLines:e,plotAxisText:t,physicalAxisSize:this.iI.y.Si(),parallelAxisIndex:s})))),r=Ya.PA(this.Sh,this._A);this.iI.Ji([this.oi.left+this.nn.left+h[0].Pd,this.oi.right+this.nn.right+h[h.length-1].uI/2]),this.iI.Ki([this.oi.bottom+this.nn.bottom+h.reduce(((t,i)=>Math.max(t,i.cI)),0),this.oi.top+this.nn.top+r]),h.forEach(((t,s)=>i[s].Le(t))),t.finishPlot(),e.finishPlot(),(s||this.hI)&&i.forEach(((t,i)=>{if(!t.eI)return;const s=t.eI.steps.map((s=>({...s,value:this.nI(s.value,i,t).y}))),e=t.eI.setSteps(s);t.Vk.Ne((t=>t.setFillStyle(new W({lookUpProperty:"y",lut:e}))))}));const n=this._I||this.CI||this.mI||this.MI.o;n&&(this.DI.ti(),this.SI.ti(),this.bI.clear(),this._y.forEach((t=>{const s=t.gI;if(!t.getVisible()||!s)return;const e=this.GI(t,s,i,this.DI,this.SI);this.bI.set(t,e),t.ks(e)}))),(n||this.TI||this.FI||this.CI)&&this.$I(this._y),!n&&this.kI&&this._y.forEach((t=>{if(t.us.length>0)return;const s=t.gI;if(!t.getVisible()||!s)return;const e=this.GI(t,s,i,this.DI,this.SI);this.bI.set(t,e),t.ks(e),this.$I([t])})),this._y.find((t=>t.gI&&Object.keys(t.gI).length>0))&&(this.wI=!0)}const h=1===(null==e?void 0:e.length)?e[0]:void 0;(h!==this.UI||this.CI)&&(this.EI.ti(),h&&h.series.gI?(this.GI(h.series,h.series.gI,i,this.EI,void 0),this.DI.Ne(this.BI)):this.DI.Ne(this.LI));const r=u(this.iI.x.pi(),this.iI.y.pi(),this.iI.x.Si(),this.iI.y.Si());this.yC.dm(r);for(const t of this._y)t.vv();this.mI=!1,this.TI=!1,this._I=!1,this.CI=!1,this.kI=!1,this.FI=!1,this.MI.o=!1,this.hI=!1,this.UI=h}$I(t){const i=this.Bd&&{lut:this.Bd.lut,key:this.Bd.axis.key};t.forEach((t=>{const s=t.gI,e=this.bI.get(t);if(!s||!e)return;let h;if(t.dI)h=this.xI;else if(i){const t=s[i.key],e=this.JF&&this.JF[i.key];h=i.lut.getColors(t,e)}else h=t.fI;e.forEach((t=>t.iF(h)))}))}AI(){this.CI=!0,this.St.Ls()}yI(){this.wI&&this.St.Zo(Gr.qn),this.CI=!0,this.St.Ls()}OI(t){return this.axes.find((i=>i.key===t))||this.axes.find((i=>i.userID===t))}VI(){return rt.d1({scale1DConstructor:pe,dimension:"x"}).W(0,1)}vI(t){if(this.JF=void 0,this.St.Ls(),Array.isArray(t)){const i={};return t.forEach(((t,s)=>{var e;if("number"==typeof t){const h=null===(e=this.axes[s])||void 0===e?void 0:e.key;if(!h)throw new Error("ParallelCoordinateSeries Axis count doesnt match supplied data");i[h]=t}else"object"==typeof t&&(i[t.key]=t.value)})),i}if("object"==typeof t)return t;throw new Error("ParallelCoordinateSeries unidentified data format")}sI(t,i,s){this.mI=!0,this.St.Ls()}nI(t,i,s){return{x:i,y:(t-s.ot.$)/(s.ot.U-s.ot.$)}}oI(t,i,s){const e=s.getInterval();return e.start+t*(e.end-e.start)}pI(t){this.FI=!0,this.St.Ls()}aI(){this.TI=!0,this.St.Ls()}getSeries(){return this._y}Gd(){const t=[],i=this.Bd;return i&&t.push({Gs:()=>({lut:i.lut,lookUpProperty:void 0}),attach:(t,s)=>{t.setText("Value based color").setOn(!0),t.addEventListener("switch",(t=>{this.setLUT(t.state?i:void 0)}))}}),t}getMinimumSize(){return{x:200,y:200}}forEachAxis(t){return this.axes.slice().forEach((i=>t(i))),this}dispose(){return super.dispose(),this.axes.forEach((t=>t.G())),this.Ug.G(),this.yC.G(),this.II.G(),this}addLegendBox(t,i){const s=super.addLegendBox(t,i);return void 0!==i&&i!==this.uiScale||void 0!==t&&"vertical"!==t.getAlignment()||s.setOrigin(ir.RightCenter).setPosition({x:this.uiScale.x.rt(this.uiScale.x.mi()-this.nn.right),y:nt(this.xf.y.rt(this.xf.y.pi()+this.xf.y.Si()/2),this.xf.y,this.uiScale.y)}),s}GI(t,i,s,e,h){const r=[];let n;for(let o=0;o<s.length;o+=1){const a=s[o],l=i[a.key],c=this.nI(l,o,a),u=this.MI.C();if(u){if(void 0!==n){const i=u.resolution;let s;for(let o=0;o<=i;o+=1){const a=(o-1)/i,l=o/i,u=l<.5?4*l*l*l:1-(-2*l+2)**3/2;if(void 0!==s){const i={x:n.x+a*(c.x-n.x),y:n.y+s*(c.y-n.y)},o={x:n.x+l*(c.x-n.x),y:n.y+u*(c.y-n.y)},d=e.lo();h&&h.qt(d,t),r.push(d),d.Uf(i,o)}s=u}}}else if(void 0!==n){const i=e.lo();h&&h.qt(i,t),r.push(i),i.Uf(n,c)}n=c}return r}NI(){const t=this.getCursorMode(),i=this.St.jo();if(t&&i){const s=this.St.pa(i),e=ot({x:s.engineX,y:s.engineY},this.St.ot,this.iI),h=Math.round(e.x),r=this.axes.filter((t=>t.getVisible()))[h],n=r.key,o=ss(this._y.map((t=>{if(!t.gI||!t.BA())return;const i=t.gI[n],s=this.nI(i,h,r);return{cursorPosition:{pointMarker:s,pointMarkerScale:this.iI,resultTable:s,resultTableScale:this.iI},value:i,series:t,axis:r}})));return"show-nearest"===t?[o.filter((t=>!Number.isNaN(t.cursorPosition.pointMarker.y))).sort(((t,i)=>Math.abs(t.cursorPosition.pointMarker.y-e.y)-Math.abs(i.cursorPosition.pointMarker.y-e.y)))[0]]:("show-nearest-interpolated"!==t&&"show-all-interpolated"!==t||ni.console.warn('LightningChart JS ParallelCoordinateChart does not support "interpolated" cursor modes.'),o)}}setUserInteractions(t){return this.ze=void 0===t?{rangeSelectors:{create:{doubleClickAxis:!1},move:{drag:!1},dispose:{doubleClick:!1}}}:t,this}getUserInteractions(){return hi({rangeSelectors:{create:{doubleClickAxis:!0},move:{drag:!0},dispose:{doubleClick:!0}}},this.ze)}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const DA=(t,i,s)=>{if(s.length>1)return[[{text:s[0].axis.getTitle(),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],...ss(s.map((t=>{const i=t.series.getData(),s=i?i[t.axis.key]:void 0;if(void 0!==s)return Xa(t,[[t.series,"",Pe(t.axis.formatValue(s),t.axis)]])})).flat())];const e=s[0],h=[[{component:e.series,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}]];return t.axes.forEach((i=>{const s=e.series.getData();if(!s)return;const r=s[i.key];if(void 0===r)return;const n=t.axes.filter((t=>t.getVisible()))[e.cursorPosition.pointMarker.x]===i?{weight:"bold"}:{};h.push([{text:i.getTitle(),font:n},"",{text:i.formatValue(r),font:n}])})),h},EA=(t,i)=>{const s=(t=>{const i=new $({color:t.uiStrokeColorContrastHigh}),s=new $({color:t.uiStrokeColorContrastMedium}),e=new $({color:t.uiStrokeColorContrastLow}),h=new hh({family:t.fontFamily,weight:"normal",style:"normal"}),r=t.isDark?m(0,0,0,255):void 0,n=h.setSize(18*t.fontScaler),o=h.setSize(16*t.fontScaler),a=h.setSize(14*t.fontScaler),l=h.setSize(10*t.fontScaler),c=h.withMutations((i=>i.set("size",14*t.fontScaler).set("weight","bold"))),u=h.setSize(13*t.fontScaler),d=new vh({thickness:2,fillStyle:e}),f=new $({color:t.dataHighlightOverlayColor}),A=new vh({thickness:2,fillStyle:t.legendBackgroundBorderFillStyle}),g=t.dataColorPalette.map((t=>new $({color:t.stroke}))),v=t=>g[t%g.length],y=g.map((t=>new vh({thickness:2,fillStyle:t}))),p=t=>y[t%y.length],b=t.dataColorPalette.map((t=>new $({color:t.border}))).map((t=>new vh({thickness:2,fillStyle:t}))),x=t=>b[t%b.length],M=t.dataColorPalette.map((t=>{const i=t.area;return new it({angle:0,stops:[{offset:0,color:i.setA(0)},{offset:.8,color:i}]})})),w=t=>M[t%M.length],_=t.dataColorPaletteInverted.map((t=>{const i=t.area;return new it({angle:180,stops:[{offset:0,color:i.setA(0)},{offset:.8,color:i}]})})),C=t=>_[t%_.length],k=t.dataColorPalette.map((t=>{const i=t.area;return new it({angle:180,stops:[{color:Yi(i,m(255,255,255,i.getA()),.3),offset:0},{color:i,offset:.5},{color:Yi(i,m(0,0,0,i.getA()),.3),offset:1}]})})),T=t=>k[t%k.length],F=t.dataColorPaletteInverted.map((t=>new $({color:t.border}))).map((t=>new vh({thickness:2,fillStyle:t}))),I=t=>F[t%F.length],P=new $({color:t.dataColorPositive}),L=new $({color:t.dataColorNegative}),B=new vh({thickness:1,fillStyle:new $({color:t.dataStrokeColorContrastHigh.setA(50)})}),D=new vh({thickness:2,fillStyle:t.axisLineFillStyle}),E=new $({color:m(0,0,0,1)}),R=new vh({thickness:1,fillStyle:t.axisGridMajorFillStyle}),z=new vh({thickness:1,fillStyle:t.axisTickMajorFillStyle}),O=a,N=t.axisLabelMajorFillStyle,G=new vh({thickness:1,fillStyle:t.axisGridMinorFillStyle}),U=new vh({thickness:1,fillStyle:t.axisTickMinorFillStyle}),Y=l,H=N,X=ia,W=new qo({gridStrokeStyle:R,tickStyle:z,tickLength:7,tickPadding:5,labelFont:O,labelFillStyle:N,labelShadow:r}),j=new qo({gridStrokeStyle:G,tickStyle:U,tickLength:4,tickPadding:10,labelFont:Y,labelFillStyle:H,labelShadow:r}),Z=new Da({extremeTickStyle:X,majorTickStyle:W,minorTickStyle:j.setLabelFillStyle(V)}),Q=new Ca({greatTickStyle:ia,majorTickStyle:W,minorTickStyle:j}),J=Q,K=Q,q=new da({majorTickStyle:W,minorTickStyle:j}),tt=new $({color:t.dataHighlightOverlayColor}),st=new vh({thickness:1,fillStyle:s}),et=new vh({thickness:2,fillStyle:s}),ht=t=>new Ah.Triangulated({shape:"sphere",size:10,fillStyle:g[t%g.length]}),rt=g[0],nt=t.uiTextFillStyle,ot=t.legendBackgroundFillStyle,at=new vh({thickness:1,fillStyle:t.legendBackgroundBorderFillStyle}),lt=Xi(t.legendButtonDefaultColor),ct=Xi(t.isDark?m(70,70,70,255):m(170,170,170,255)),ut=new $({color:t.isDark?m(70,70,70,255):m(170,170,170,255)}),dt=new vh({thickness:1,fillStyle:i}),ft=new Sh({thickness:1,fillStyle:t.cursorGridFillStyle,pattern:ph.DashedEqual,patternScale:3}),At=new vh({thickness:1,fillStyle:t.cursorGridFillStyle}),gt=t.zoomBandChartDefocusOverlayFillStyle,vt=new vh({thickness:2,fillStyle:new $({color:t.zoomBandChartSplitterColor})}),yt=new $({color:t.uiBackgroundColor});let pt={isDark:t.isDark,effect:t.effect,effectsText:t.effectsText,effectsDashboardSplitters:t.effectsDashboardSplitters,lcjsBackgroundFillStyle:t.lcjsBackgroundFillStyle,lcjsBackgroundStrokeStyle:Wt,highlightColorOffset:t.highlightColorOffset,highlightColorOffsetAxisOverlay:t.highlightColorOffsetAxisOverlay,dashboardSplitterStyle:new vh({thickness:4,fillStyle:t.dashboardSplitterFillStyle}),chartXYBackgroundFillStyle:t.panelBackgroundFillStyle,chartXYBackgroundStrokeStyle:Wt,chartXYTitleFont:n,chartXYTitleFillStyle:t.titleFillStyle,chartXYTitleShadow:r,chartXYSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chartXYSeriesBackgroundStrokeStyle:d,chartXYZoomingRectangleFillStyle:f,chartXYZoomingRectangleStrokeStyle:A,lineSeriesStrokeStyle:p,pointLineSeriesStrokeStyle:p,pointLineSeriesFillStyle:v,pointSeriesFillStyle:v,ellipseSeriesFillStyle:v,ellipseSeriesStrokeStyle:p,polygonSeriesFillStyle:v,polygonSeriesStrokeStyle:p,rectangleSeriesFillStyle:v,rectangleSeriesStrokeStyle:Wt,segmentSeriesStrokeStyle:p,boxSeriesBodyFillStyle:v(0),boxSeriesBodyStrokeStyle:Wt,boxSeriesStrokeStyle:new vh({thickness:1,fillStyle:g[0]}),boxSeriesMedianStrokeStyle:new vh({thickness:1,fillStyle:new $({color:m(0,0,0)})}),ohlcCandleThicknessPixels:5,ohlcCandleBodyFillStylePositive:P,ohlcCandleBodyFillStyleNegative:L,ohlcCandleTailStrokeStylePositive:new vh({thickness:1,fillStyle:new $({color:t.uiStrokeColorContrastHigh})}),ohlcCandleTailStrokeStyleNegative:new vh({thickness:1,fillStyle:new $({color:t.uiStrokeColorContrastHigh})}),ohlcBarThicknessPixels:10,ohlcBarStrokeStylePositive:new vh({thickness:2,fillStyle:P}),ohlcBarStrokeStyleNegative:new vh({thickness:2,fillStyle:L}),heatmapGridSeriesFillStyle:v,heatmapGridSeriesWireframeStyle:B,heatmapScrollingGridSeriesFillStyle:v,heatmapScrollingGridSeriesWireframeStyle:B,areaRangeSeriesFillStyle:w,areaRangeSeriesStrokeStyle:x,areaRangeSeriesFillStyleInverted:C,areaRangeSeriesStrokeStyleInverted:I,areaSeriesBipolarHighFillStyle:w,areaSeriesBipolarHighStrokeStyle:x,areaSeriesBipolarLowFillStyle:C,areaSeriesBipolarLowStrokeStyle:I,areaSeriesPositiveFillStyle:w,areaSeriesPositiveStrokeStyle:x,areaSeriesNegativeFillStyle:C,areaSeriesNegativeStrokeStyle:I,xAxisTitleFont:o,xAxisTitleFillStyle:t.axisTitleFillStyle,xAxisStrokeStyle:D,xAxisOverlayStyle:E,xAxisZoomingBandFillStyle:f,xAxisZoomingBandStrokeStyle:Wt,xAxisNumericTicks:Z,xAxisDateTimeTicks:J,xAxisTimeTicks:q,yAxisTitleFont:o,yAxisTitleFillStyle:t.axisTitleFillStyle,yAxisStrokeStyle:D,yAxisOverlayStyle:E,yAxisZoomingBandFillStyle:f,yAxisZoomingBandStrokeStyle:Wt,yAxisNumericTicks:Z,yAxisDateTimeTicks:K,yAxisTimeTicks:q,bandFillStyle:tt,bandStrokeStyle:st,constantLineStrokeStyle:et,barChartBackgroundFillStyle:t.panelBackgroundFillStyle,barChartBackgroundStrokeStyle:Wt,barChartTitleFont:n,barChartTitleFillStyle:t.titleFillStyle,barChartTitleShadow:r,barChartSeriesBackgroundFillStyle:V,barChartSeriesBackgroundStrokeStyle:Wt,barChartBarFillStyle:v,barChartBarStrokeStyle:new vh({thickness:1,fillStyle:e}),barChartValueAxisTitleFont:o,barChartValueAxisTitleFillStyle:t.axisTitleFillStyle,barChartValueAxisStrokeStyle:D,barChartValueAxisTicks:Z.setMajorTickStyle((t=>t.setGridStrokeStyle(Wt))).setMinorTickStyle((t=>t.setGridStrokeStyle(Wt))),barChartCategoryAxisTitleFont:o,barChartCategoryAxisTitleFillStyle:t.axisTitleFillStyle,barChartCategoryAxisStrokeStyle:D,barChartCategoryLabels:{formatter:(t,i)=>t,labelFillStyle:Z.majorTickStyle.labelFillStyle,labelFont:Z.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,tickStyle:Z.majorTickStyle.tickStyle,tickLength:0,labelShadow:r},barChartValueLabelsAfterBars:{position:"after-bar",formatter:t=>t.chart.valueAxis.formatValue(t.value),labelFillStyle:Z.majorTickStyle.labelFillStyle,labelFont:Z.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,displayStackedIndividuals:!1,displayStackedSum:!0,labelShadow:r},barChartValueLabelsInsideBars:{position:"inside-bar",formatter:t=>t.chart.valueAxis.formatValue(t.value),labelFillStyle:Z.majorTickStyle.labelFillStyle,labelFont:Z.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,displayStackedIndividuals:!1,displayStackedSum:!0,labelShadow:r},barChartCornerRadius:10,chart3DBackgroundFillStyle:t.panelBackgroundFillStyle,chart3DBackgroundStrokeStyle:Wt,chart3DTitleFont:n,chart3DTitleFillStyle:t.titleFillStyle,chart3DTitleShadow:r,chart3DSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chart3DSeriesBackgroundStrokeStyle:d,chart3DBoundingBoxStrokeStyle:Wt,xAxis3DTitleFont:o,xAxis3DTitleFillStyle:t.axisTitleFillStyle,xAxis3DStrokeStyle:D,xAxis3DNumericTicks:Z,xAxis3DDateTimeTicks:Q,xAxis3DTimeTicks:q,yAxis3DTitleFont:o,yAxis3DTitleFillStyle:t.axisTitleFillStyle,yAxis3DStrokeStyle:D,yAxis3DNumericTicks:Z,yAxis3DDateTimeTicks:Q,yAxis3DTimeTicks:q,zAxis3DTitleFont:o,zAxis3DTitleFillStyle:t.axisTitleFillStyle,zAxis3DStrokeStyle:D,zAxis3DNumericTicks:Z,zAxis3DDateTimeTicks:Q,zAxis3DTimeTicks:q,lineSeries3DStrokeStyle:p,pointLineSeries3DStrokeStyle:p,pointLineSeries3DPointStyle:ht,pointSeries3DPointStyle:ht,pointCloudSeries3DPointStyle:t=>new Ah.Pixelated({size:5,fillStyle:g[t%g.length]}),surfaceGridSeries3DFillStyle:v,surfaceGridSeries3DWireframeStyle:B,surfaceScrollingGridSeries3DFillStyle:v,surfaceScrollingGridSeries3DWireframeStyle:B,boxSeries3DFillStyle:v,meshModel3DFillStyle:v(0),polarChartBackgroundFillStyle:t.panelBackgroundFillStyle,polarChartBackgroundStrokeStyle:Wt,polarChartTitleFont:n,polarChartTitleFillStyle:t.titleFillStyle,polarChartTitleShadow:r,polarChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,polarChartSeriesBackgroundStrokeStyle:d,polarSectorFillStyle:tt,polarSectorStrokeStyle:st,polarAmplitudeAxisTitleFont:o,polarAmplitudeAxisTitleFillStyle:t.axisTitleFillStyle,polarAmplitudeAxisTitleShadow:r,polarAmplitudeAxisStrokeStyle:D,polarAmplitudeAxisNumericTicks:Z,polarAmplitudeAxisDateTimeTicks:Q,polarAmplitudeAxisTimeTicks:q,polarRadialAxisTitleFont:o,polarRadialAxisTitleFillStyle:t.axisTitleFillStyle,polarRadialAxisStrokeStyle:D,polarRadialAxisTickStyle:W.setTickPadding(10),polarRadialAxisMarginAfterTicks:0,polarLineSeriesStrokeStyle:p,polarPointLineSeriesFillStyle:v,polarPointLineSeriesStrokeStyle:p,polarPointSeriesFillStyle:v,polarPolygonSeriesFillStyle:T,polarPolygonSeriesStrokeStyle:x,polarAreaSeriesFillStyle:T,polarAreaSeriesStrokeStyle:x,polarHeatmapSeriesFillStyle:v,mapChartBackgroundFillStyle:t.panelBackgroundFillStyle,mapChartBackgroundStrokeStyle:Wt,mapChartTitleFont:n,mapChartTitleFillStyle:t.titleFillStyle,mapChartTitleShadow:r,mapChartFillStyle:rt,mapChartStrokeStyle:new vh({thickness:1,fillStyle:new $({color:t.dataStrokeColorContrastMedium})}),mapChartOutlierRegionFillStyle:V,mapChartOutlierRegionStrokeStyle:new vh({thickness:1,fillStyle:e}),mapChartSeparateRegionFillStyle:ot,mapChartSeparateRegionStrokeStyle:at,dataGridBackgroundFillStyle:t.panelBackgroundFillStyle,dataGridBackgroundStrokeStyle:Wt,dataGridTitleFont:n,dataGridTitleFillStyle:t.titleFillStyle,dataGridTitleShadow:r,dataGridTextFont:a,dataGridTextFillStyle:rt,dataGridCellBackgroundFillStyle:new $({color:t.uiBackgroundColor}),dataGridBorderStrokeStyle:new vh({thickness:.4,fillStyle:new $({color:t.uiBackgroundBorderColor})}),dataGridScrollBarBackgroundFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarBackgroundStrokeStyle:Wt,dataGridScrollBarFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarStrokeStyle:at,dataGridScrollBarButtonFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarButtonStrokeStyle:at,dataGridScrollBarButtonArrowFillStyle:new $({color:t.legendButtonDefaultColor}),dataGridScrollBarThickness:20,sparkLineChartStrokeStyle:p(0),sparkPointChartFillStyle:v(0),sparkBarChartFillStyle:v(0),sparkBarChartStrokeStyle:x(0),sparkAreaChartFillStyle:w(0),sparkAreaChartStrokeStyle:x(0),sparkPieChartFillStyle:v,sparkPieChartStrokeStyle:at,sparkChartBandFillStyle:tt,sparkChartBandStrokeStyle:st,sparkChartConstantLineStrokeStyle:et,dataGridTextShadow:r,textSeriesShadow:r,spiderChartBackgroundFillStyle:t.panelBackgroundFillStyle,spiderChartBackgroundStrokeStyle:Wt,spiderChartTitleFont:n,spiderChartTitleFillStyle:t.titleFillStyle,spiderChartTitleShadow:r,spiderChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,spiderChartSeriesBackgroundStrokeStyle:d,spiderChartWebStyle:new vh({thickness:2,fillStyle:e}),spiderChartScaleLabelFillStyle:t.axisLabelMajorFillStyle,spiderChartScaleLabelFont:a,spiderChartAxisLabelFillStyle:t.axisTitleFillStyle,spiderChartAxisLabelFont:o,spiderChartAxisStrokeStyle:new vh({thickness:2,fillStyle:s}),spiderChartAxisNibStrokeStyle:new vh({thickness:2,fillStyle:i}),spiderSeriesFillStyle:T,spiderSeriesStrokeStyle:x,spiderSeriesPointFillStyle:v,spiderChartScaleLabelShadow:r,pieChartBackgroundFillStyle:t.panelBackgroundFillStyle,pieChartBackgroundStrokeStyle:Wt,pieChartTitleFont:n,pieChartTitleFillStyle:t.titleFillStyle,pieChartTitleShadow:r,pieChartSliceFillStylePalette:v,pieChartSliceStrokeStyle:at,pieChartSliceLabelFont:u,pieChartSliceLabelFillStyle:t.uiTextFillStyle,pieChartConnectorStrokeStyle:dt,pieChartSliceLabelShadow:r,funnelChartBackgroundFillStyle:t.panelBackgroundFillStyle,funnelChartBackgroundStrokeStyle:Wt,funnelChartTitleFont:n,funnelChartTitleFillStyle:t.titleFillStyle,funnelChartTitleShadow:r,funnelChartSliceFillStylePalette:v,funnelChartSliceStrokeStyle:at,funnelChartSliceLabelFont:u,funnelChartSliceLabelFillStyle:t.uiTextFillStyle,funnelChartConnectorStrokeStyle:dt,funnelChartSliceLabelShadow:r,pyramidChartBackgroundFillStyle:t.panelBackgroundFillStyle,pyramidChartBackgroundStrokeStyle:Wt,pyramidChartTitleFont:n,pyramidChartTitleFillStyle:t.titleFillStyle,pyramidChartTitleShadow:r,pyramidChartSliceFillStylePalette:v,pyramidChartSliceStrokeStyle:at,pyramidChartSliceLabelFont:u,pyramidChartSliceLabelFillStyle:t.uiTextFillStyle,pyramidChartConnectorStrokeStyle:dt,gaugeChartValueLabelFont:u.setSize(60),gaugeChartUnitLabelFont:u.setSize(40),gaugeChartTickFont:u.setSize(30),gaugeChartBarThickness:40,gaugeChartValueIndicatorThickness:10,gaugeChartRoundedEdges:!0,gaugeChartNeedleLength:40,gaugeChartStartAngle:225,gaugeChartEndAngle:-45,gaugeChartNeedleAlignment:0,gaugeChartGapBetweenBarAndValueIndicators:10,gaugeChartTickFillStyle:t.uiTextFillStyle,gaugeChartBarGradient:!0,gaugeChartBarStrokeStyle:Wt,gaugeChartUnitLabelFillStyle:t.uiTextFillStyle,gaugeChartValueLabelFillStyle:t.uiTextFillStyle,gaugeChartBarColor:m(255,255,255),gaugeChartGlowColor:m(255,255,64),gaugeChartNeedleFillStyle:new $({color:m(255,255,255)}),gaugeChartNeedleThickness:10,gaugeChartNeedleStrokeStyle:new vh({thickness:2,fillStyle:new $({color:m(0,0,0)})}),pyramidChartSliceLabelShadow:r,gaugeChartBackgroundFillStyle:t.panelBackgroundFillStyle,gaugeChartBackgroundStrokeStyle:Wt,gaugeChartTitleFont:n,gaugeChartTitleFillStyle:t.titleFillStyle,gaugeChartTitleShadow:r,treeMapChartBackgroundFillStyle:t.panelBackgroundFillStyle,treeMapChartBackgroundStrokeStyle:Wt,treeMapChartParentColor:t.treeMapChartParentColor,treeMapChartNodeColors:t.treeMapChartNodeColors,treeMapChartNodeStrokeStyle:new vh({thickness:1,fillStyle:new $({color:S("000")})}),treeMapChartTitleFillStyle:t.titleFillStyle,treeMapChartTitleShadow:r,treeMapChartTitleFont:n,treeMapChartPathLabelFillStyle:nt,treeMapChartPathLabelFont:u,treeMapChartLabelHeaderFillStyle:t.treeMapChartLabelHeaderFillStyle,treeMapChartLabelHeaderFont:n,treeMapChartLabelFillStyle:t.treeMapChartLabelFillStyle,treeMapChartLabelFont:u,treeMapChartCornerRadius:8,uiPanelBackgroundFillStyle:t.panelBackgroundFillStyle,uiPanelBackgroundStrokeStyle:Wt,zoomBandChartDefocusOverlayFillStyle:gt,zoomBandChartSplitterStrokeStyle:vt,zoomBandChartKnobFillStyle:t.zoomBandChartKnobFillStyle,zoomBandChartKnobSize:t.zoomBandChartKnobSize,onScreenMenuBackgroundColor:m(254,204,0,.7),parallelCoordinateChartBackgroundFillStyle:t.panelBackgroundFillStyle,parallelCoordinateChartBackgroundStrokeStyle:Wt,parallelCoordinateChartTitleFont:n,parallelCoordinateChartTitleFillStyle:t.titleFillStyle,parallelCoordinateChartTitleShadow:r,parallelCoordinateChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,parallelCoordinateChartSeriesBackgroundStrokeStyle:d,parallelCoordinateChartSeriesColor:i=>t.dataColorPalette[i%t.dataColorPalette.length].stroke,parallelCoordinateChartSeriesColorUnselected:t.dataColorUnselected,parallelCoordinateChartSeriesLineThickness:2,parallelCoordinateChartPointedSeriesLineStyle:y[0],parallelCoordinateAxisTitleFont:o,parallelCoordinateAxisTitleFillStyle:t.axisTitleFillStyle,parallelCoordinateAxisNumericTicks:Z,parallelCoordinateAxisDateTimeTicks:Q,parallelCoordinateAxisTimeTicks:q,parallelCoordinateAxisStrokeStyle:D,parallelCoordinateAxisRangeSelectorFillStyle:t.seriesBackgroundFillStyle,parallelCoordinateAxisRangeSelectorStrokeStyle:at,parallelCoordinateAxisBackgroundFillStyle:new it({angle:90,stops:[{offset:0,color:t.isDark?m(0,0,0,0):m(255,255,255,0)},{offset:1,color:t.isDark?m(0,0,0,255):m(255,255,255,180)}]}),uiButtonFillStyle:lt,uiButtonFillStyleHidden:ct,uiButtonStrokeStyle:at,uiButtonSize:10,uiBackgroundFillStyle:ot,uiBackgroundStrokeStyle:at,uiTextFillStyle:nt,uiTextFillStyleHidden:ut,uiTextFont:u,legendTitleFillStyle:nt,legendTitleFont:c,legendBorderRadius:5,cursorTickMarkerXBackgroundFillStyle:ot,cursorTickMarkerXBackgroundStrokeStyle:at,cursorTickMarkerXTextFillStyle:nt,cursorTickMarkerXTextFont:u,cursorTickMarkerYBackgroundFillStyle:ot,cursorTickMarkerYBackgroundStrokeStyle:at,cursorTickMarkerYTextFillStyle:nt,cursorTickMarkerYTextFont:u,cursorPointMarkerFillStyle:ft.getFillStyle(),cursorPointMarkerSize:{x:9,y:9},cursorPointMarkerShape:Oe.Cross,cursorResultTableFillStyle:t.resultTableBackgroundFillStyle,cursorResultTableStrokeStyle:new vh({thickness:1,fillStyle:t.resultTableBackgroundBorderFillStyle}),cursorResultTableTextFillStyle:nt,cursorResultTableTextFont:u,cursorResultTableHeaderBackgroundFillStyle:t.resultTableHeaderBackgroundFillStyle,cursorResultTableBorderRadius:5,cursorGridStrokeStyleX:ft,cursorGridStrokeStyleY:ft,cursor3DGridStrokeStyleX:At,cursor3DGridStrokeStyleY:At,cursor3DGridStrokeStyleZ:At,cursor3DTickStrokeStyleX:W.tickStyle,cursor3DTickStrokeStyleY:W.tickStyle,cursor3DTickStrokeStyleZ:W.tickStyle,cursor3DTickLabelFillStyleX:nt,cursor3DTickLabelFillStyleY:nt,cursor3DTickLabelFillStyleZ:nt,cursor3DTickLabelFontX:u,cursor3DTickLabelFontY:u,cursor3DTickLabelFontZ:u,cursor3DTickLabelBackgroundFillStyleX:yt,cursor3DTickLabelBackgroundFillStyleY:yt,cursor3DTickLabelBackgroundFillStyleZ:yt,cursor3DTickLabelBackgroundStrokeStyleX:at,cursor3DTickLabelBackgroundStrokeStyleY:at,cursor3DTickLabelBackgroundStrokeStyleZ:at,cursor3DTickLabelPaddingX:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingY:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingZ:{left:4,right:4,top:4,bottom:4}};return t.overrideThemeProperties&&(pt={...pt,...t.overrideThemeProperties}),pt})(t),e={...i,header1Font:s.xAxisTitleFont,header2Font:s.xAxisNumericTicks.getMajorTickStyle().labelFont,header3Font:s.uiTextFont,mainDataColor:t.dataColorPalette[0].stroke};return{...s,examples:e}},RA="Segoe UI, -apple-system, Verdana, Helvetica",zA=(t,i)=>{const s=new Image;s.crossOrigin="*";const e=`${t}/${i}`;return s.src=e,s},VA=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:Yi(i[e%i.length].stroke,m(255,255,255),.5);return new K({stops:[{color:Yi(h,m(255,255,255),.5*s).setA(100),offset:0},{color:h.setA(100),offset:.5},{color:Yi(h,m(30,30,30),.5*s).setA(100),offset:1}]})},OA=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:Yi(i[e%i.length].stroke,m(255,255,255),.2);return new K({stops:[{color:Yi(h,m(255,255,255),.2*s),offset:0},{color:h,offset:.5},{color:Yi(h,m(0,0,0),.2*s),offset:1}]})},NA=(t,i,s)=>e=>{const h=!0===t?i[e%i.length].stroke:Yi(i[e%i.length].stroke,m(255,255,255),.2);return new it({angle:90,stops:[{color:Yi(h,m(255,255,255),.5*s),offset:0},{color:h,offset:.35},{color:Yi(h,m(30,30,30),.5*s),offset:1}]})},GA=(t,i,s)=>(()=>{const s=new Map;return e=>{const h=s.get(e);if(h)return h;const r=(s=>{const e=!0===t?i[s%i.length].stroke:Yi(i[s%i.length].stroke,m(255,255,255),.3);return new it({angle:90,stops:[{color:Yi(e,m(255,255,255),.5),offset:0},{color:e,offset:.35},{color:Yi(e,m(30,30,30),.5),offset:1}]})})(e);return s.set(e,r),r}})(),$A=ns((()=>{const t=m(255,255,255),i=new $({color:t}),s=!0,e=new Ch({spread:1,blur:9,offset:{x:0,y:0},color:m(0,0,0,150)}),h=new K({position:{x:.8,y:.8},extent:Q.farthestCorner,shape:Z.ellipse,stops:[{offset:0,color:m(50,51,52)},{offset:.5,color:m(14,15,16)},{offset:1,color:m(0,0,0)}]}),r=new $({color:m(45,45,45)}),n=new K({position:{x:.5,y:.5},extent:Q.farthestCorner,shape:Z.circle,stops:[{offset:0,color:m(120,120,120,100)},{offset:1,color:m(0,0,0,50)}]}),o=new K({position:{x:.5,y:.5},extent:Q.farthestCorner,shape:Z.circle,stops:[{offset:0,color:m(30,30,30,200)},{offset:1,color:m(0,0,0,255)}]}),a=RA,l=new $({color:m(255,255,220)}),c=new $({color:m(255,255,166)}),u=new $({color:m(255,255,220)}),d=new $({color:m(255,255,200)}),f=d,A=f,g=new it({angle:45,stops:[{offset:0,color:m(230,230,230)},{offset:1,color:m(150,150,150)}]}),v=new $({color:m(220,220,220)}),y=new $({color:m(200,200,200,50)}),p=new $({color:m(200,200,200,150)}),S=new $({color:m(200,200,200,20)}),b=new $({color:m(220,220,220)}),x=new it({angle:0,stops:[{offset:0,color:m(10,10,10,220)},{offset:1,color:m(30,30,30,220)}]}),M=i,w=m(255,255,200),_=new $({color:m(0,0,0,224)}),C=new $({color:m(166,166,166)}),k=new $({color:m(49,53,58)}),T=m(20,20,20),F=m(0,0,0),I=t,P=m(150,150,150),L=m(50,50,50),B=m(50,50,50),D=m(100,100,100),E=m(200,200,200),R=[m(255,255,91,255),m(255,205,91,255),m(255,155,91,255),m(255,196,188,255),m(255,148,184,255),m(219,148,198,255),m(235,196,224,255),m(169,148,198,255),m(148,226,198,255),m(148,255,176,255),m(180,255,165,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),z=t.setA(20),V=m(176,255,157,255),O=m(255,112,76,255),N={mapChartFillStyle:new it({angle:135,stops:[{color:m(255,255,91,255),offset:0},{color:m(255,155,91,255),offset:1}]}),spiderSeriesFillStyle:VA(s,R,.5),pieChartSliceFillStylePalette:OA(s,R,1),funnelChartSliceFillStylePalette:NA(s,R,1),pyramidChartSliceFillStylePalette:NA(s,R,1),rectangleSeriesFillStyle:GA(s,R),gaugeChartBarColor:m(255,255,91,255),gaugeChartGlowColor:m(255,255,91,64)},G=new $({color:m(176,255,157,255)}),U=new $({color:m(255,146,146,255)}),Y=new $({color:m(176,255,157,255)}),H=new $({color:m(230,63,63,255)}),X=new $({color:m(176,255,157,120)}),W=new $({color:m(229,63,63,180)}),j=new $({color:m(27,37,36,255)}),J=new $({color:m(62,27,27,255)}),q=[m(255,0,0),m(255,255,0),m(0,255,0)],tt=[m(10,10,255),m(10,190,255),m(251,255,0),m(255,38,0)],st=[m(255,255,0),m(255,204,0),m(255,128,0),m(255,0,0)],et=[m(0,0,0),m(167,4,69,255),m(255,0,0),m(252,252,168,255)],ht=new K({stops:[{color:m(61,61,80,100),offset:0},{color:m(44,44,55,30),offset:1}]}),rt=new $({color:m(148,148,198,255)}),nt=X.getColor().setA(255),ot=m(100,100,100),at=[m(255,241,149,200),m(255,230,65,200),m(238,211,32,200),m(238,176,32,200),m(255,159,13,200),m(254,120,37,200),m(253,91,56,200),m(253,75,84,200),m(254,95,124,200),m(227,56,160,200),m(226,53,134,200),m(216,90,166,200),m(254,151,206,200),m(237,151,254,200),m(243,177,255,200),m(233,133,252,200),m(210,101,230,200),m(178,61,200,200),m(193,81,156,200),m(217,95,145,200)];return EA({isDark:s,highlightColorOffset:m(60,60,60,60),highlightColorOffsetAxisOverlay:m(255,255,255,40),effect:e,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:h,dashboardSplitterFillStyle:r,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:o,fontFamily:a,fontScaler:1,titleFillStyle:l,axisTitleFillStyle:c,axisLabelMajorFillStyle:u,uiTitleFillStyle:d,uiTextFillStyle:f,cursorTextFillStyle:A,axisLineFillStyle:g,axisTickMajorFillStyle:v,axisGridMajorFillStyle:y,axisTickMinorFillStyle:p,axisGridMinorFillStyle:S,cursorGridFillStyle:b,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:w,resultTableBackgroundFillStyle:_,resultTableBackgroundBorderFillStyle:C,resultTableHeaderBackgroundFillStyle:k,uiBackgroundColor:T,uiBackgroundBorderColor:F,uiStrokeColorContrastHigh:I,uiStrokeColorContrastMedium:P,uiStrokeColorContrastLow:L,dataStrokeColorContrastHigh:B,dataStrokeColorContrastMedium:D,dataStrokeColorContrastLow:E,dataColorPalette:R,dataColorPaletteInverted:[{area:m(190,50,50,100),border:m(210,80,80)}],dataHighlightOverlayColor:z,dataColorPositive:V,dataColorNegative:O,zoomBandChartDefocusOverlayFillStyle:new $({color:m(0,0,0,180)}),zoomBandChartSplitterColor:m(251,251,90),zoomBandChartKnobFillStyle:t=>new Yt({source:zA(t,"zoomBandChart/darkgold-selector.png"),fitMode:$t.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:m(255,255,255,24),overrideThemeProperties:N,treeMapChartParentColor:m(24,30,33),treeMapChartNodeColors:at,treeMapChartLabelFillStyle:new $({color:m(33,33,33)}),treeMapChartLabelHeaderFillStyle:new $({color:m(250,250,250)})},{positiveTextFillStyle:G,negativeTextFillStyle:U,positiveFillStyle:Y,negativeFillStyle:H,positiveAreaFillStyle:X,negativeAreaFillStyle:W,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:J,badGoodColorPalette:q,coldHotColorPalette:tt,intensityColorPalette:st,spectrogramColorPalette:et,bollingerFillStyle:ht,bollingerBorderFillStyle:rt,highlightPointColor:t,highlightDataGridColor:nt,unfocusedDataColor:ot})})),UA=ns((()=>{const t=m(255,255,255),i=new $({color:t}),s=!0,e=new Ch({spread:0,blur:9,offset:{x:0,y:0},color:m(105,255,236,40)}),h=new $({color:m(2,21,30)}),r=new K({stops:[{color:m(19,40,66,150),offset:0},{color:m(0,0,0,150),offset:1}]}),n=new $({color:m(0,5,8,150)}),o=RA,a=i,l=i,c=i,u=i,d=i,f=d,A=new $({color:m(20,224,250,255)}),g=i,v=new $({color:m(61,94,110,100)}),y=new $({color:m(61,94,110,255)}),p=new $({color:m(61,94,110,40)}),S=i,b=new $({color:m(0,18,23,255)}),x=i,M=t,w=new $({color:m(0,0,0,225)}),_=i,C=new $({color:m(18,66,75)}),k=m(0,38,48,220),T=m(0,0,0),F=t,I=m(150,150,150),P=m(19,78,93),L=m(50,50,50),B=m(0,36,48),D=m(200,200,200),E=[m(45,253,253,255),m(44,172,247,255),m(46,100,248,255),m(96,84,199,255),m(184,104,245,255),m(98,160,218,255),m(43,238,245,255),m(38,140,206,255),m(112,96,224,255),m(206,157,255,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),R=t.setA(50),z=m(3,217,194,255),V=m(230,63,63,255),O={mapChartFillStyle:new it({angle:135,stops:[{color:m(118,248,231,255),offset:0},{color:m(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:VA(s,E,1),pieChartSliceFillStylePalette:OA(s,E,1),funnelChartSliceFillStylePalette:NA(s,E,1),pyramidChartSliceFillStylePalette:NA(s,E,1),rectangleSeriesFillStyle:GA(s,E),gaugeChartBarColor:m(3,217,194,255),gaugeChartGlowColor:m(3,217,194,120)},N=new $({color:m(45,253,253,255)}),G=new $({color:m(255,146,146,255)}),U=new $({color:m(45,253,253,255)}),Y=new $({color:m(230,63,63,255)}),H=new $({color:m(1,190,164,120)}),X=new $({color:m(229,63,63,180)}),W=new $({color:m(1,53,57,255)}),j=new $({color:m(62,27,27,255)}),Z=[m(1,104,119,255),m(0,165,144,255),m(0,246,214,255)],Q=[m(0,87,95,255),m(0,125,124,255),m(1,209,182,255),m(0,255,221,255),m(218,112,112,255),m(172,47,47,255)],J=[m(126,255,253,255),m(50,233,230,255),m(0,196,193,255),m(62,138,178,255),m(139,88,191,255),m(162,55,143,255)],q=[m(13,31,52,255),m(101,50,118,255),m(1,142,172,255),m(2,196,170,255),m(0,255,221,255)],tt=new K({stops:[{color:m(122,103,254,70),offset:0},{color:m(178,168,255,10),offset:1}]}),st=new $({color:m(122,103,254,255)}),et=H.getColor().setA(255),ht=m(15,83,83),rt=[m(139,252,252,150),m(60,239,239,150),m(2,201,201,150),m(26,159,159,150),m(15,146,187,150),m(65,168,200,150),m(67,146,207,150),m(64,108,209,150),m(189,64,233,150),m(219,84,238,150),m(192,55,212,150),m(212,98,229,150),m(248,110,211,150),m(251,154,225,150),m(251,154,184,150),m(233,105,144,150),m(255,133,170,150),m(249,110,135,150),m(245,72,101,150),m(210,57,84,150)];return EA({isDark:s,highlightColorOffset:m(60,60,60,60),highlightColorOffsetAxisOverlay:m(255,255,255,40),effect:e,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new Yt({source:zA(t,"themes/turquoiseHexagon.jpg"),fitMode:$t.Fill}),dashboardSplitterFillStyle:h,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:o,fontScaler:1,titleFillStyle:a,axisTitleFillStyle:l,axisLabelMajorFillStyle:c,uiTitleFillStyle:u,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:A,axisTickMajorFillStyle:g,axisGridMajorFillStyle:v,axisTickMinorFillStyle:y,axisGridMinorFillStyle:p,cursorGridFillStyle:S,legendBackgroundFillStyle:b,legendBackgroundBorderFillStyle:x,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:_,resultTableHeaderBackgroundFillStyle:C,uiBackgroundColor:k,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:L,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:D,dataColorPalette:E,dataColorPaletteInverted:[{area:m(170,60,210,100),border:m(210,100,250)}],dataHighlightOverlayColor:R,dataColorPositive:z,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new $({color:m(0,0,0,180)}),zoomBandChartSplitterColor:m(43,244,244),zoomBandChartKnobFillStyle:t=>new Yt({source:zA(t,"zoomBandChart/turquoise-selector.png"),fitMode:$t.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:m(255,255,255,24),overrideThemeProperties:O,treeMapChartParentColor:m(0,35,41),treeMapChartNodeColors:rt,treeMapChartLabelFillStyle:new $({color:m(33,33,33)}),treeMapChartLabelHeaderFillStyle:new $({color:m(250,250,250)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:U,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:X,positiveBackgroundFillStyle:W,negativeBackgroundFillStyle:j,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:J,spectrogramColorPalette:q,bollingerFillStyle:tt,bollingerBorderFillStyle:st,highlightPointColor:t,highlightDataGridColor:et,unfocusedDataColor:ht})})),YA=ns((()=>{const t=!1,i=new Ch({spread:0,blur:6,offset:{x:2,y:-2},color:m(0,0,0,30)}),s=new K({position:{x:.8,y:.8},extent:Q.farthestCorner,shape:Z.ellipse,stops:[{offset:0,color:m(255,255,255)},{offset:1,color:m(255,255,255)}]}),e=new $({color:m(219,227,233,255)}),h=new K({position:{x:.5,y:.5},extent:Q.farthestCorner,shape:Z.circle,stops:[{offset:0,color:m(255,255,255,200)},{offset:1,color:m(240,244,246,200)}]}),r=new K({position:{x:.5,y:.5},extent:Q.farthestCorner,shape:Z.circle,stops:[{offset:0,color:m(255,255,255,255)},{offset:1,color:m(255,255,255,255)}]}),n=RA,o=new $({color:m(33,43,49)}),a=new $({color:m(33,43,49)}),l=new $({color:m(33,43,49)}),c=new $({color:m(33,43,49)}),u=c,d=u,f=new it({angle:45,stops:[{offset:0,color:m(225,225,225)},{offset:1,color:m(225,225,225)}]}),A=new $({color:m(150,150,150,255)}),g=new $({color:m(150,150,150,170)}),v=new $({color:m(150,150,150,150)}),y=new $({color:m(150,150,150,100)}),p=new $({color:m(60,70,80)}),S=new it({angle:0,stops:[{offset:0,color:m(255,255,255,240)},{offset:1,color:m(255,255,255,240)}]}),b=new $({color:m(168,186,199)}),x=m(150,150,150),M=new $({color:m(255,255,255,230)}),w=new $({color:m(168,186,199)}),_=new $({color:m(228,235,243)}),C=m(255,255,255,255),k=m(168,168,199,255),T=m(168,186,199,255),F=m(168,186,199,255),I=m(168,186,199,255),P=m(168,186,199,255),L=m(100,100,100),B=m(200,200,200),D=[m(28,181,140,255),m(255,132,0,255),m(240,39,39,255),m(86,121,251,255),m(2,181,213,255),m(13,212,158,255),m(22,167,3,255),m(234,103,232,255),m(62,183,179,255),m(140,93,3,255),m(155,158,186,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),E=m(150,150,150,80),R=m(46,182,120,255),z=m(255,66,66,255),V=new vh({thickness:2,fillStyle:new $({color:m(168,186,199,255)})}),O={mapChartFillStyle:new it({angle:-45,stops:[{color:m(2,181,213,255),offset:0},{color:m(175,243,255,255),offset:1}]}),spiderSeriesFillStyle:VA(t,D,.8),pieChartSliceFillStylePalette:OA(t,D,.8),funnelChartSliceFillStylePalette:NA(t,D,.5),pyramidChartSliceFillStylePalette:NA(t,D,.5),rectangleSeriesFillStyle:GA(t,D),gaugeChartBarColor:m(46,182,120,255),gaugeChartGlowColor:m(46,182,120,120),chartXYSeriesBackgroundStrokeStyle:V,chart3DSeriesBackgroundStrokeStyle:V,polarChartSeriesBackgroundStrokeStyle:V,spiderChartSeriesBackgroundStrokeStyle:V,dataGridTextFillStyle:new $({color:m(0,88,64,255)})},N=new $({color:m(4,146,108,255)}),G=new $({color:m(240,39,39,255)}),U=new $({color:m(28,181,140,255)}),Y=new $({color:m(230,88,88,255)}),H=new $({color:m(28,181,140,180)}),X=new $({color:m(230,88,88,180)}),W=new $({color:m(229,243,228)}),j=new $({color:m(232,225,216)}),J=[m(193,48,48,255),m(240,234,60,255),m(45,191,55,255)],q=[m(10,19,255,255),m(15,191,250,255),m(249,255,2,255),m(253,133,0,255),m(255,24,0,255)],tt=[m(50,99,213),m(8,179,77),m(255,246,0),m(255,126,0),m(189,36,30)],st=[m(16,64,176),m(8,179,77),m(255,246,0),m(255,126,0),m(168,6,0)],et=new $({color:m(185,198,207,255)}),ht=new K({stops:[{color:m(151,190,220,10),offset:0},{color:m(151,190,220,50),offset:1}]}),rt=H.getColor().setA(255),nt=m(150,150,150),ot=[m(255,243,136,125),m(254,237,99,125),m(255,216,109,125),m(255,172,100,125),m(255,133,101,125),m(255,113,142,125),m(230,103,129,125),m(242,126,219,125),m(255,155,235,125),m(255,181,240,125),m(203,143,255,125),m(208,154,255,125),m(171,188,255,125),m(197,209,255,125),m(171,187,255,125),m(84,167,239,125),m(38,196,214,125),m(38,214,196,125),m(69,225,141,125),m(36,191,88,125)];return EA({isDark:t,highlightColorOffset:m(-60,-60,-60,60),highlightColorOffsetAxisOverlay:m(0,0,0,40),effect:i,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:s,dashboardSplitterFillStyle:e,panelBackgroundFillStyle:h,seriesBackgroundFillStyle:r,fontFamily:n,fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,uiTitleFillStyle:c,uiTextFillStyle:u,cursorTextFillStyle:d,axisLineFillStyle:f,axisTickMajorFillStyle:A,axisGridMajorFillStyle:g,axisTickMinorFillStyle:v,axisGridMinorFillStyle:y,cursorGridFillStyle:p,legendBackgroundFillStyle:S,legendBackgroundBorderFillStyle:b,legendButtonDefaultColor:x,resultTableBackgroundFillStyle:M,resultTableBackgroundBorderFillStyle:w,resultTableHeaderBackgroundFillStyle:_,uiBackgroundColor:C,uiBackgroundBorderColor:k,uiStrokeColorContrastHigh:T,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:I,dataStrokeColorContrastHigh:P,dataStrokeColorContrastMedium:L,dataStrokeColorContrastLow:B,dataColorPalette:D,dataColorPaletteInverted:[{area:m(190,50,50,100),border:m(210,80,80)}],dataHighlightOverlayColor:E,dataColorPositive:R,dataColorNegative:z,zoomBandChartDefocusOverlayFillStyle:new $({color:m(255,255,255,180)}),zoomBandChartSplitterColor:m(80,93,101),zoomBandChartKnobFillStyle:t=>new Yt({source:zA(t,"zoomBandChart/light-selector.png"),fitMode:$t.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:m(0,0,0,24),overrideThemeProperties:O,treeMapChartParentColor:m(217,217,217),treeMapChartNodeColors:ot,treeMapChartLabelFillStyle:new $({color:m(0,0,0)}),treeMapChartLabelHeaderFillStyle:new $({color:m(33,33,33)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:U,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:X,positiveBackgroundFillStyle:W,negativeBackgroundFillStyle:j,badGoodColorPalette:J,coldHotColorPalette:q,intensityColorPalette:tt,spectrogramColorPalette:st,bollingerFillStyle:ht,bollingerBorderFillStyle:et,highlightPointColor:m(0,0,0),highlightDataGridColor:rt,unfocusedDataColor:nt})})),HA=ns((()=>{const t=!1,i=new K({position:{x:.8,y:.8},extent:Q.farthestCorner,shape:Z.ellipse,stops:[{offset:0,color:m(255,255,255)},{offset:1,color:m(255,255,255)}]}),s=new $({color:m(214,236,216,255)}),e=new K({position:{x:.5,y:.5},extent:Q.farthestCorner,shape:Z.circle,stops:[{offset:0,color:m(233,244,231,70)},{offset:1,color:m(233,244,231,200)}]}),h=new K({position:{x:.5,y:.5},extent:Q.farthestCorner,shape:Z.circle,stops:[{offset:0,color:m(255,255,255,255)},{offset:1,color:m(255,255,255,255)}]}),r=RA,n=new $({color:m(1,61,53)}),o=new $({color:m(1,61,53)}),a=new $({color:m(1,61,53)}),l=new $({color:m(1,61,53)}),c=l,u=c,d=new it({angle:45,stops:[{offset:0,color:m(225,225,225)},{offset:1,color:m(225,225,225)}]}),f=new $({color:m(188,211,186,255)}),A=new $({color:m(188,211,186,150)}),g=new $({color:m(188,211,186,50)}),v=new $({color:m(188,211,186,50)}),y=new $({color:m(104,148,111,255)}),p=new it({angle:0,stops:[{offset:0,color:m(255,255,255,240)},{offset:1,color:m(255,255,255,240)}]}),S=new $({color:m(104,148,111)}),b=m(150,150,150),x=new $({color:m(255,255,255,230)}),M=new $({color:m(104,148,111)}),w=new $({color:m(226,236,224)}),_=m(255,255,255,255),C=m(179,201,183,255),k=m(188,211,186,255),T=m(188,211,186,255),F=m(188,211,186,255),I=m(188,211,186,255),P=m(100,100,100),L=m(200,200,200),B=[m(138,195,142,255),m(193,161,114,255),m(178,99,99,255),m(142,156,210,255),m(154,209,219,255),m(164,212,199,255),m(104,156,97,255),m(196,147,195,255),m(92,190,187,255),m(126,100,51,255),m(136,138,157,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),D=m(150,150,150,80),E=m(46,182,84,255),R=m(232,96,96,255),z=new vh({thickness:2,fillStyle:new $({color:m(188,211,186,255)})}),V={mapChartFillStyle:new it({angle:-45,stops:[{color:m(118,160,121,255),offset:0},{color:m(174,227,178,255),offset:1}]}),spiderSeriesFillStyle:VA(t,B,.8),pieChartSliceFillStylePalette:OA(t,B,.8),pyramidChartSliceFillStylePalette:NA(t,B,.5),funnelChartSliceFillStylePalette:NA(t,B,.5),rectangleSeriesFillStyle:GA(t,B),gaugeChartBarColor:m(46,182,84,255),gaugeChartGlowColor:m(46,182,84,120),chartXYSeriesBackgroundStrokeStyle:z,chart3DSeriesBackgroundStrokeStyle:z,polarChartSeriesBackgroundStrokeStyle:z,spiderChartSeriesBackgroundStrokeStyle:z,dataGridTextFillStyle:new $({color:m(77,66,21,255)})},O=new $({color:m(93,151,97,255)}),N=new $({color:m(178,99,99,255)}),G=new $({color:m(138,195,142,255)}),U=new $({color:m(178,99,99,255)}),Y=new $({color:m(138,195,142,180)}),H=new $({color:m(178,99,99,180)}),X=new $({color:m(224,240,237)}),W=new $({color:m(251,227,227)}),j=[m(178,99,99,255),m(215,224,111,255),m(80,186,88,255)],J=[m(62,64,142,255),m(66,131,77,255),m(250,250,135,255),m(202,161,78,255),m(179,53,53,255)],q=[m(64,86,138),m(123,192,205),m(255,252,149),m(220,155,92),m(184,78,74)],tt=[m(64,86,138),m(123,192,205),m(255,252,149),m(220,155,92),m(132,60,57)],st=new $({color:m(185,198,207,255)}),et=new K({stops:[{color:m(151,190,220,10),offset:0},{color:m(151,190,220,50),offset:1}]}),ht=Y.getColor().setA(255),rt=m(150,150,150),nt=[m(242,239,210,150),m(243,238,183,150),m(210,222,136,150),m(204,217,148,150),m(157,190,124,150),m(143,178,72,150),m(198,147,88,150),m(216,148,71,150),m(229,142,103,150),m(225,174,152,150),m(219,149,203,150),m(216,188,209,150),m(109,198,189,150),m(172,206,202,150),m(164,223,217,150),m(174,215,233,150),m(203,225,235,150),m(220,227,243,150),m(207,213,227,150),m(171,182,209,150)];return EA({isDark:t,highlightColorOffset:m(-60,-60,-60,60),highlightColorOffsetAxisOverlay:m(0,0,0,40),effect:void 0,effectsText:!1,effectsDashboardSplitters:!1,lcjsBackgroundFillStyle:i,dashboardSplitterFillStyle:s,panelBackgroundFillStyle:e,seriesBackgroundFillStyle:h,fontFamily:r,fontScaler:1,titleFillStyle:n,axisTitleFillStyle:o,axisLabelMajorFillStyle:a,uiTitleFillStyle:l,uiTextFillStyle:c,cursorTextFillStyle:u,axisLineFillStyle:d,axisTickMajorFillStyle:f,axisGridMajorFillStyle:A,axisTickMinorFillStyle:g,axisGridMinorFillStyle:v,cursorGridFillStyle:y,legendBackgroundFillStyle:p,legendBackgroundBorderFillStyle:S,legendButtonDefaultColor:b,resultTableBackgroundFillStyle:x,resultTableBackgroundBorderFillStyle:M,resultTableHeaderBackgroundFillStyle:w,uiBackgroundColor:_,uiBackgroundBorderColor:C,uiStrokeColorContrastHigh:k,uiStrokeColorContrastMedium:T,uiStrokeColorContrastLow:F,dataStrokeColorContrastHigh:I,dataStrokeColorContrastMedium:P,dataStrokeColorContrastLow:L,dataColorPalette:B,dataColorPaletteInverted:[{area:m(210,70,70,100),border:m(200,110,110)}],dataHighlightOverlayColor:D,dataColorPositive:E,dataColorNegative:R,zoomBandChartDefocusOverlayFillStyle:new $({color:m(255,255,255,180)}),zoomBandChartSplitterColor:m(68,106,64),zoomBandChartKnobFillStyle:t=>new Yt({source:zA(t,"zoomBandChart/lightnature-selector.png"),fitMode:$t.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:m(0,0,0,24),overrideThemeProperties:V,treeMapChartParentColor:m(239,247,238),treeMapChartNodeColors:nt,treeMapChartLabelFillStyle:new $({color:m(0,0,0)}),treeMapChartLabelHeaderFillStyle:new $({color:m(33,33,33)})},{positiveTextFillStyle:O,negativeTextFillStyle:N,positiveFillStyle:G,negativeFillStyle:U,positiveAreaFillStyle:Y,negativeAreaFillStyle:H,positiveBackgroundFillStyle:X,negativeBackgroundFillStyle:W,badGoodColorPalette:j,coldHotColorPalette:J,intensityColorPalette:q,spectrogramColorPalette:tt,bollingerFillStyle:et,bollingerBorderFillStyle:st,highlightPointColor:m(0,0,0),highlightDataGridColor:ht,unfocusedDataColor:rt})})),XA=ns((()=>{const t=m(255,255,255),i=new $({color:t}),s=!0,e=new Ch({spread:1,blur:9,offset:{x:0,y:0},color:m(255,255,255,30)}),h=new $({color:m(6,15,36)}),r=new K({stops:[{color:m(46,13,87,50),offset:0},{color:m(0,0,0,150),offset:1}]}),n=new $({color:m(0,5,8,150)}),o=RA,a=i,l=i,c=i,u=i,d=i,f=d,A=new it({angle:45,stops:[{offset:0,color:m(241,133,255,255)},{offset:1,color:m(115,207,238,255)}]}),g=i,v=new $({color:m(61,94,110,100)}),y=new $({color:m(61,94,110,255)}),p=new $({color:m(61,94,110,40)}),S=i,b=new $({color:m(0,18,23,255)}),x=i,M=m(115,207,238,255),w=new $({color:m(0,0,0,224)}),_=i,C=new $({color:m(68,31,78)}),k=m(0,38,48,255),T=m(0,0,0),F=t,I=m(150,150,150),P=m(19,57,93),L=m(50,50,50),B=m(0,17,48),D=m(200,200,200),E=[m(20,211,237,255),m(98,147,252,255),m(164,73,250,255),m(129,117,253,255),m(95,134,252,255),m(22,133,212,255),m(35,200,242,255),m(104,121,233,255),m(137,69,232,255),m(70,72,241,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),R=t.setA(50),z=m(3,217,194,255),V=m(243,21,110,255),O={mapChartFillStyle:new it({angle:135,stops:[{color:m(118,248,231,255),offset:0},{color:m(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:VA(s,E,.5),pieChartSliceFillStylePalette:OA(s,E,2),funnelChartSliceFillStylePalette:NA(s,E,1),pyramidChartSliceFillStylePalette:NA(s,E,1),rectangleSeriesFillStyle:GA(s,E),gaugeChartBarColor:m(3,217,194,255),gaugeChartGlowColor:m(3,217,194,150)},N=new $({color:m(20,211,237,255)}),G=new $({color:m(253,145,178,255)}),U=new $({color:m(20,211,237,255)}),Y=new $({color:m(239,68,121,255)}),H=new $({color:m(20,211,237,120)}),X=new $({color:m(239,68,121,180)}),W=new $({color:m(1,53,57,255)}),j=new $({color:m(94,19,42,255)}),Z=[m(174,51,132,255),m(204,107,218,255),m(189,215,253,255)],Q=[m(0,63,95,255),m(0,149,255,255),m(0,225,255,255),m(255,154,254,255),m(204,98,170,255),m(139,39,84,255)],J=[m(197,241,255,255),m(70,210,255,255),m(0,164,217,255),m(90,99,222,255),m(138,75,192,255),m(151,27,162,255)],q=[m(13,31,52,255),m(129,54,130,255),m(131,108,176,255),m(7,162,213,255),m(26,247,255,255)],tt=new K({stops:[{color:m(219,42,235,60),offset:0},{color:m(237,73,252,10),offset:1}]}),st=new $({color:m(237,73,252,255)}),et=H.getColor().setA(255),ht=m(8,70,100),rt=[m(149,230,255,150),m(93,213,243,150),m(20,189,223,150),m(5,151,181,150),m(2,138,198,150),m(2,113,198,150),m(97,148,236,150),m(93,111,230,150),m(151,120,223,150),m(128,87,227,150),m(153,52,230,150),m(179,92,245,150),m(248,110,211,150),m(255,155,228,150),m(251,88,207,150),m(255,0,162,150),m(214,73,177,150),m(209,71,159,150),m(238,101,169,150),m(210,57,134,150)];return EA({isDark:s,highlightColorOffset:m(60,60,60,60),highlightColorOffsetAxisOverlay:m(255,255,255,40),effect:e,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new Yt({source:zA(t,"themes/cyberSpace.jpg"),fitMode:$t.Fill}),dashboardSplitterFillStyle:h,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:o,fontScaler:1,titleFillStyle:a,axisTitleFillStyle:l,axisLabelMajorFillStyle:c,uiTitleFillStyle:u,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:A,axisTickMajorFillStyle:g,axisGridMajorFillStyle:v,axisTickMinorFillStyle:y,axisGridMinorFillStyle:p,cursorGridFillStyle:S,legendBackgroundFillStyle:b,legendBackgroundBorderFillStyle:x,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:w,resultTableBackgroundBorderFillStyle:_,resultTableHeaderBackgroundFillStyle:C,uiBackgroundColor:k,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:L,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:D,dataColorPalette:E,dataColorPaletteInverted:[{area:m(41,130,255,100),border:m(45,110,240)}],dataHighlightOverlayColor:R,dataColorPositive:z,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new $({color:m(0,0,0,180)}),zoomBandChartSplitterColor:m(219,119,255),zoomBandChartKnobFillStyle:t=>new Yt({source:zA(t,"zoomBandChart/cyberspace-selector.png"),fitMode:$t.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:m(255,255,255,24),overrideThemeProperties:O,treeMapChartParentColor:m(30,30,59),treeMapChartNodeColors:rt,treeMapChartLabelFillStyle:new $({color:m(33,33,33)}),treeMapChartLabelHeaderFillStyle:new $({color:m(250,250,250)})},{positiveTextFillStyle:N,negativeTextFillStyle:G,positiveFillStyle:U,negativeFillStyle:Y,positiveAreaFillStyle:H,negativeAreaFillStyle:X,positiveBackgroundFillStyle:W,negativeBackgroundFillStyle:j,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:J,spectrogramColorPalette:q,bollingerFillStyle:tt,bollingerBorderFillStyle:st,highlightPointColor:t,highlightDataGridColor:et,unfocusedDataColor:ht})})),WA={};Object.defineProperty(WA,"darkGold",{get:$A,enumerable:!0}),Object.defineProperty(WA,"turquoiseHexagon",{get:UA,enumerable:!0}),Object.defineProperty(WA,"light",{get:YA,enumerable:!0}),Object.defineProperty(WA,"lightNature",{get:HA,enumerable:!0}),Object.defineProperty(WA,"cyberSpace",{get:XA,enumerable:!0});const jA=WA,ZA=jA.darkGold,QA=t=>({...t,effect:void 0}),JA=t=>{var i,s,e;return{...t,dataGridTextShadow:void 0,pieChartSliceLabelShadow:void 0,funnelChartSliceLabelShadow:void 0,spiderChartScaleLabelShadow:void 0,pyramidChartSliceLabelShadow:void 0,xAxisTimeTicks:t.xAxisTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxisTimeTicks:t.yAxisTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxis3DTimeTicks:t.xAxis3DTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxis3DTimeTicks:t.yAxis3DTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),zAxis3DTimeTicks:t.zAxis3DTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxisNumericTicks:t.xAxisNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxisNumericTicks:t.yAxisNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxisDateTimeTicks:t.xAxisDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxisDateTimeTicks:t.yAxisDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxis3DNumericTicks:t.xAxis3DNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxis3DNumericTicks:t.yAxis3DNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),zAxis3DNumericTicks:t.zAxis3DNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxis3DDateTimeTicks:t.xAxis3DDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxis3DDateTimeTicks:t.yAxis3DDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),zAxis3DDateTimeTicks:t.zAxis3DDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),barChartValueAxisTicks:t.barChartValueAxisTicks.setTickStyle((t=>t.setLabelShadow(void 0))),polarAmplitudeAxisNumericTicks:t.polarAmplitudeAxisNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),parallelCoordinateAxisTimeTicks:null===(i=t.parallelCoordinateAxisTimeTicks)||void 0===i?void 0:i.setTickStyle((t=>t.setLabelShadow(void 0))),parallelCoordinateAxisNumericTicks:null===(s=t.parallelCoordinateAxisNumericTicks)||void 0===s?void 0:s.setTickStyle((t=>t.setLabelShadow(void 0))),parallelCoordinateAxisDateTimeTicks:null===(e=t.parallelCoordinateAxisDateTimeTicks)||void 0===e?void 0:e.setTickStyle((t=>t.setLabelShadow(void 0)))}};class KA extends Ua{constructor(t,i,s,e,h,r){let n;super(t,i,s,i.wA("dataGrid bg",0),e,i.St._t.dataGridBackgroundFillStyle,i.St._t.dataGridBackgroundStrokeStyle,i.St._t.dataGridTitleFont,i.St._t.dataGridTitleFillStyle,i.St._t.dataGridTitleShadow,r),this.YI=[],this.HI=[],this.XI=[],this.WI=new Map,this.jI=!0,this.ZI=!0,this.QI=!0,this.JI=!0,this.KI=!0,this.qI=!0,this.tP=!0,this.iP=!0,this.sP=!0,this.eP=!0,this.hP=!0,this.rP=!0,this.nP=!0,this.oP=!0,this.aP=!0,this.lP=!0,this.cP=new Set,this.uP=new Set,this.dP=!0,this.fP=!0,this.AP=(t,i)=>{t.borders=void 0===i?sg:{...t.borders,...i},this.gP(t),this.rP=!0,this.St.Ls()},this.gP=t=>{t.borders&&(!1===t.borders.top&&this.vP(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!1}:{...this.yP,bottom:!1}})),!1===t.borders.bottom&&this.vP(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!1}:{...this.yP,top:!1}})),!1===t.borders.left&&this.vP(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!1}:{...this.yP,right:!1}})),!1===t.borders.right&&this.vP(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!1}:{...this.yP,left:!1}})),!0===t.borders.top&&this.vP(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!0}:{...this.yP,bottom:!0}})),!0===t.borders.bottom&&this.vP(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!0}:{...this.yP,top:!0}})),!0===t.borders.left&&this.vP(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!0}:{...this.yP,right:!0}})),!0===t.borders.right&&this.vP(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!0}:{...this.yP,left:!0}})))},this.pP={x:0,y:0},this.cells=new zt,this.D=new zt,this.St.Zo(Gr.En),this.Sh.Sr("Data Grid"),this.mP=s.d2({scaleXYConstructor:be}),this.mP.x.gf=Rf,this.SP=s.d2({scaleXYConstructor:be}),this.bP={x:0,y:0},this.xP=this._t.dataGridTextFont,this.MP=this._t.dataGridTextFillStyle,this.yP={top:!0,bottom:!0,left:!0,right:!0},this.wP=this._t.dataGridCellBackgroundFillStyle,this._P=this._t.dataGridBorderStrokeStyle,this.CP="left-center",this.kP={left:5,right:5,bottom:5,top:5},this.TP=i.bm("dataGrid grid bg",0),this.FP=i.bm("dataGrid cell bg",1),this.IP=i.Ng("dataGrid cell content",0),this.PP=i.Ng("dataGrid scrollbar bg",1),this.LP=i.Ng("dataGrid scrollbar fg",2),this.BP=this.TP.Qc(this.SP).Ie(this._t.dataGridBackgroundFillStyle).Fe(Wt).setPointerEvents(!1),this.DP=this.IP.Gf(this.mP).setPointerEvents(!1),this.EP=new El((()=>{const t=this.FP.Pe(this.mP).setPointerEvents(!0);return this.cells.Nt(t,{getExtraData:()=>this.WI.get(t),continueIfNotPrevented:(t,i,s)=>{const e=Te(this.getUserInteractions().scroll,"wheel",i,i.shiftKey,i.ctrlKey,i.altKey);if(e&&"wheel"===t&&i instanceof WheelEvent){Bi(i),this.RP({x:!0===e.x?Math.sign(i.deltaY):0,y:!0===e.y?Math.sign(i.deltaY):0});const t=e.on;t&&t({event:i})}}}),t})),this.zP=new El((()=>this.IP.Pe(this.mP).setPointerEvents(!1))),this.VP=new El((()=>this.IP.Yr(this.mP).setPointerEvents(!1))),this.OP=new El((()=>this.IP.tv(this.mP,{},[Cl.InternalUI,{type:"DataPattern",args:{pattern:"ProgressiveX"}}]).setPointerEvents(!1))),this.NP=new El((()=>this.IP.Ge(this.mP).setPointerEvents(!1))),this.GP=new El((()=>this.IP.wy(this.mP).setPointerEvents(!1))),this.$P=new El((()=>this.IP.Pe(this.mP).setPointerEvents(!1))),this.UP=new El((()=>this.IP.Yx(this.mP).setPointerEvents(!1))),this.YP=new El((()=>this.IP.Yu(this.mP).setPointerEvents(!1))),this.HP={background:this.PP.Pe(this.SP).setPointerEvents(!0).Ie(this._t.dataGridScrollBarBackgroundFillStyle).Fe(this._t.dataGridScrollBarBackgroundStrokeStyle),scrollbar:this.LP.Pe(this.SP).setPointerEvents(!0).Ie(this._t.dataGridScrollBarFillStyle).Fe(this._t.dataGridScrollBarStrokeStyle),button1:this.PP.Pe(this.SP).setPointerEvents(!0).Ie(this._t.dataGridScrollBarButtonFillStyle).Fe(this._t.dataGridScrollBarButtonStrokeStyle),button2:this.PP.Pe(this.SP).setPointerEvents(!0).Ie(this._t.dataGridScrollBarButtonFillStyle).Fe(this._t.dataGridScrollBarButtonStrokeStyle),buttonIcon1:this.LP.hd(this.SP).setPointerEvents(!1).Ne(Wt).sd(this._t.dataGridScrollBarButtonArrowFillStyle).rd(Oe.Triangle),buttonIcon2:this.LP.hd(this.SP).setPointerEvents(!1).Ne(Wt).sd(this._t.dataGridScrollBarButtonArrowFillStyle).rd(Oe.Triangle)},this.XP={background:this.PP.Pe(this.SP).setPointerEvents(!0).Ie(this._t.dataGridScrollBarBackgroundFillStyle).Fe(this._t.dataGridScrollBarBackgroundStrokeStyle),scrollbar:this.LP.Pe(this.SP).setPointerEvents(!0).Ie(this._t.dataGridScrollBarFillStyle).Fe(this._t.dataGridScrollBarStrokeStyle),button1:this.PP.Pe(this.SP).setPointerEvents(!0).Ie(this._t.dataGridScrollBarButtonFillStyle).Fe(this._t.dataGridScrollBarButtonStrokeStyle),button2:this.PP.Pe(this.SP).setPointerEvents(!0).Ie(this._t.dataGridScrollBarButtonFillStyle).Fe(this._t.dataGridScrollBarButtonStrokeStyle),buttonIcon1:this.LP.hd(this.SP).setPointerEvents(!1).Ne(Wt).sd(this._t.dataGridScrollBarButtonArrowFillStyle).rd(Oe.Triangle),buttonIcon2:this.LP.hd(this.SP).setPointerEvents(!1).Ne(Wt).sd(this._t.dataGridScrollBarButtonArrowFillStyle).rd(Oe.Triangle)},this.HP.scrollbar.addEventListener("pointerenter",(t=>{n=this.engine.setMouseStyle(tr.Vertical,n)})),this.HP.scrollbar.addEventListener("pointerleave",(t=>{n=this.engine.restoreMouseStyle(n)})),this.HP.scrollbar.addEventListener("pointerdown",(t=>{Bi(t);let i=t;const s=t=>{const s=t.clientY-i.clientY;i=t,this.WP({x:0,y:-s})},e=i=>{i.pointerId===t.pointerId&&(ni.removeEventListener("pointermove",s),ni.removeEventListener("pointerup",e))};ni.addEventListener("pointermove",s),ni.addEventListener("pointerup",e)})),this.HP.scrollbar.addEventListener("wheel",(t=>{Bi(t),this.RP({x:0,y:Math.sign(t.deltaY)})})),this.HP.background.addEventListener("pointerenter",(t=>{n=this.engine.setMouseStyle(tr.Vertical,n)})),this.HP.background.addEventListener("pointerleave",(t=>{n=this.engine.restoreMouseStyle(n)})),this.HP.background.addEventListener("click",(t=>{Bi(t);const i=this.St.pa(t),s=ot({x:i.engineX,y:i.engineY},this.St.ot,this.SP);this.RP({x:0,y:s.y>this.HP.scrollbar.il().y?-1:1})})),this.HP.background.addEventListener("wheel",(t=>{Bi(t),this.RP({x:0,y:Math.sign(t.deltaY)})})),this.HP.button1.addEventListener("pointerenter",(t=>{n=this.engine.setMouseStyle(tr.Point,n)})),this.HP.button1.addEventListener("pointerleave",(t=>{n=this.engine.restoreMouseStyle(n)})),this.HP.button1.addEventListener("click",(t=>{Bi(t),this.RP({x:0,y:1})})),this.HP.button2.addEventListener("click",(t=>{Bi(t),this.RP({x:0,y:-1})})),this.HP.button2.addEventListener("pointerenter",(t=>{n=this.engine.setMouseStyle(tr.Point,n)})),this.HP.button2.addEventListener("pointerleave",(t=>{n=this.engine.restoreMouseStyle(n)})),this.XP.scrollbar.addEventListener("pointerenter",(t=>{n=this.engine.setMouseStyle(tr.Horizontal,n)})),this.XP.scrollbar.addEventListener("pointerleave",(t=>{n=this.engine.restoreMouseStyle(n)})),this.XP.scrollbar.addEventListener("pointerdown",(t=>{Bi(t);let i=t;const s=t=>{const s=t.clientX-i.clientX;i=t,this.WP({x:s,y:0})},e=i=>{i.pointerId===t.pointerId&&(ni.removeEventListener("pointermove",s),ni.removeEventListener("pointerup",e))};ni.addEventListener("pointermove",s),ni.addEventListener("pointerup",e)})),this.XP.scrollbar.addEventListener("wheel",(t=>{Bi(t),this.RP({x:Math.sign(t.deltaY),y:0})})),this.XP.background.addEventListener("pointerenter",(t=>{n=this.engine.setMouseStyle(tr.Horizontal,n)})),this.XP.background.addEventListener("pointerleave",(t=>{n=this.engine.restoreMouseStyle(n)})),this.XP.background.addEventListener("click",(t=>{Bi(t);const i=this.St.pa(t),s=ot({x:i.engineX,y:i.engineY},this.St.ot,this.SP);this.RP({x:s.x<this.XP.scrollbar.il().x?-1:1,y:0})})),this.XP.background.addEventListener("wheel",(t=>{Bi(t),this.RP({x:Math.sign(t.deltaY),y:0})})),this.XP.button1.addEventListener("pointerenter",(t=>{n=this.engine.setMouseStyle(tr.Point,n)})),this.XP.button1.addEventListener("pointerleave",(t=>{n=this.engine.restoreMouseStyle(n)})),this.XP.button1.addEventListener("click",(t=>{Bi(t),this.RP({x:-1,y:0})})),this.XP.button2.addEventListener("click",(t=>{Bi(t),this.RP({x:1,y:0})})),this.XP.button2.addEventListener("pointerenter",(t=>{n=this.engine.setMouseStyle(tr.Point,n)})),this.XP.button2.addEventListener("pointerleave",(t=>{n=this.engine.restoreMouseStyle(n)})),this.MA(h,this.uiScale),this.addEventListener("resize",(()=>{this.jI=!0,this.St.Ls(),this.mP.Z(this.xf.xi()),this.SP.Z(this.xf.xi())})),this.jP=this.vs.kf([this.BP])}getMinimumSize(){return{x:200,y:200}}setAnimationsEnabled(t){return this}Gd(){return[]}dispose(){return super.dispose(),this.TP.G(),this.FP.G(),this.IP.G(),this.PP.G(),this.LP.G(),Na(this.mP),Na(this.SP),this.VP.mv(),this.EP.mv(),this.zP.mv(),this.OP.mv(),this.NP.mv(),this.GP.mv(),this.$P.mv(),this.UP.mv(),this.YP.mv(),this}H(){return super.H(),this.mP.H(),this.SP.H(),this}X(){return super.X(),this.mP.X(),this.SP.X(),this}setBackgroundEffect(t){return this.jP.Ps(t),this.St.Ls(),this}getBackgroundEffect(){return this.jP.Bs()}setUserInteractions(t){return this.ze=void 0===t?{scroll:!1}:t,this}getUserInteractions(){return hi({scroll:{wheel:{x:!1,y:!0},ctrl:{wheel:{x:!0,y:!1}}}},this.ze)}setGridBackgroundFillStyle(t){return this.BP.Ie(t),this.St.Ls(),this}getGridBackgroundFillStyle(){return this.BP.$h()}setCellContent(t,i,s,e,h){if("number"==typeof s&&void 0!==e&&void 0!==h){const r=s,n=e,o=h;let a=[];for(let s=t;s<t+r;s+=1)for(let t=i;t<i+n;t+=1){const i=this.vP(s,t);i&&a.push(i)}a=is(a);let l={highlight:0};for(const t of a){const i=this.YI.indexOf(t);i<0||(l={...l,highlight:t.highlight,textFont:t.textFont,textFillStyle:t.textFillStyle,contentAlignment:t.contentAlignment,borders:t.borders,padding:t.padding,backgroundFillStyle:t.backgroundFillStyle},this.YI.splice(i,1))}const c={...l,column:t,row:i,columnSpan:r,rowSpan:n,content:o};this.YI.push(c),this.JI=!0,"string"==typeof c.content||"number"==typeof c.content?this.ZI=!0:this.QI=!0,this.St.Ls()}else this.ZP(t,i,s);return this}setColumnContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.ZP(t,e,s)}return this}setRowContent(t,i){const s=i.length;if(0===s)return this;for(let e=0;e<s;e+=1){const s=i[e];this.ZP(e,t,s)}return this}setTableContent(t){const i=t.length;if(0===i)return this;const s=t[0].length;if(0===s)return this;for(let e=0;e<s;e+=1)for(let s=0;s<i;s+=1){const i=t[s][e];this.ZP(e,s,i)}return this}setColumnWidth(t,i){let s=this.HI.find((i=>i.column===t));return s||(s={column:t,min:void 0,max:void 0},this.HI.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.HI.splice(this.HI.indexOf(s),1):(s.min=i,s.max=i),this.qI=!0,this.St.Ls(),this}setRowHeight(t,i){let s=this.XI.find((i=>i.row===t));return s||(s={row:t,min:void 0,max:void 0},this.XI.push(s)),"object"==typeof i?(s.min=i.min,s.max=i.max):void 0===i?this.XI.splice(this.XI.indexOf(s),1):(s.min=i,s.max=i),this.qI=!0,this.St.Ls(),this}setColumnPaddings(t,i){return"number"==typeof i&&(i=A(i,i,i,i)),this.QP(t,(t=>this.JP(t,i))),this}setRowPaddings(t,i){return"number"==typeof i&&(i=A(i,i,i,i)),this.KP(t,(t=>this.JP(t,i))),this}setCellPadding(t,i,s){return"number"==typeof s&&(s=A(s,s,s,s)),this.vP(t,i,(t=>this.JP(t,s))),this}setCellsPaddings(t){return"number"==typeof t&&(t=A(t,t,t,t)),this.kP={...this.kP,...t},this.qP((t=>this.JP(t,this.kP))),this}setCellBorders(t,i,s){return this.vP(t,i,(t=>this.AP(t,s))),this}setRowBorders(t,i){return this.KP(t,(t=>this.AP(t,i))),this}setColumnBorders(t,i){return this.QP(t,(t=>this.AP(t,i))),this}setCellsBorders(t){return this.yP=void 0===t?sg:t,this.qP((t=>this.AP(t,this.yP))),this}setCellsBorderStrokeStyle(t){return this._P="function"==typeof t?t(this._P):t,this.oP=!0,this.St.Ls(),this}setColumnTextFillStyle(t,i){return this.QP(t,(t=>this.tL(t,i))),this}setRowTextFillStyle(t,i){return this.KP(t,(t=>this.tL(t,i))),this}setCellTextFillStyle(t,i,s){return this.vP(t,i,(t=>this.tL(t,s))),this}setCellsTextFillStyle(t){return this.MP="function"==typeof t?t(this.MP):t,this.qP((t=>this.tL(t,this.MP))),this}setColumnTextFont(t,i){return this.QP(t,(t=>this.iL(t,i))),this}setRowTextFont(t,i){return this.KP(t,(t=>this.iL(t,i))),this}setCellTextFont(t,i,s){return this.vP(t,i,(t=>this.iL(t,s))),this}setCellsTextFont(t){return this.xP="function"==typeof t?t(this.xP):t,this.qP((t=>this.iL(t,this.xP))),this}setColumnContentAlignment(t,i){return this.QP(t,(t=>this.sL(t,i))),this}setRowContentAlignment(t,i){return this.KP(t,(t=>this.sL(t,i))),this}setCellContentAlignment(t,i,s){return this.vP(t,i,(t=>this.sL(t,s))),this}setCellsContentAlignment(t){return this.CP=t,this.qP((t=>this.sL(t,this.CP))),this}setCellBackgroundFillStyle(t,i,s){return this.vP(t,i,(t=>this.eL(t,s))),this}setColumnBackgroundFillStyle(t,i){return this.QP(t,(t=>this.eL(t,i))),this}setRowBackgroundFillStyle(t,i){return this.KP(t,(t=>this.eL(t,i))),this}setCellsBackgroundFillStyle(t){return this.wP="function"==typeof t?t(this.wP):t,this.qP((t=>this.eL(t,this.wP))),this}setCellHighlight(t,i,s){return this.vP(t,i,(t=>{t.highlight=es(s)})),this.nP=!0,this.St.Ls(),this}setColumnHighlight(t,i){const s=es(i);return this.QP(t,(t=>{t.highlight=s})),this.nP=!0,this.St.Ls(),this}setRowHighlight(t,i){const s=es(i);return this.KP(t,(t=>{t.highlight=s})),this.nP=!0,this.St.Ls(),this}removeCell(t,i){return this.vP(t,i,(t=>this.YI.splice(this.YI.indexOf(t),1))),this.KI=!0,this.St.Ls(),this}removeRow(t){return this.KP(t,(t=>this.YI.splice(this.YI.indexOf(t),1))),this.YI.filter((i=>i.row>t)).forEach((t=>{t.row-=1})),this.KI=!0,this.St.Ls(),this}removeColumn(t){return this.QP(t,(t=>this.YI.splice(this.YI.indexOf(t),1))),this.YI.filter((i=>i.column>t)).forEach((t=>{t.column-=1})),this.KI=!0,this.St.Ls(),this}removeCells(){return this.YI.splice(0),this.KI=!0,this.St.Ls(),this}getColumnMax(){return 0===this.YI.length?0:this.YI.reduce(((t,i)=>Math.max(t,i.column+i.columnSpan-1)),0)}getRowMax(){return 0===this.YI.length?0:this.YI.reduce(((t,i)=>Math.max(t,i.row+i.rowSpan-1)),0)}Le(t){var i;super.Le(t),Ya.LA(this.Sh,this._A),super.xA();const s=Math.round(this._P.Xt()),e=s/2;let h=this.ZI||this.QI||this.JI||this.KI||this.qI||this.tP||this.hP||this.rP||this.oP||this.lP;if(h){this.YI.forEach((t=>{this.uP.add(t.column)})),this.YI.forEach((t=>{this.cP.add(t.row)}));const t=this.VP.yv(),i=this.hL(e,t);t.finishPlot();const r=this.rL(this.uP.size,i),n=this.nL(this.cP.size,i),o=r.reduce(Is,0)+s,a=n.reduce(Is,0)+s,l=new Array(r.length+1).fill(0).map(((t,i)=>r.reduce(((t,s,e)=>t+(e<i?s:0)),0))),c=new Array(n.length+1).fill(0).map(((t,i)=>n.reduce(((t,s,e)=>t+(e<i?s:0)),0)));if(this.oL){const t=this.oL.columnWidths.every(((t,i)=>t===r[i])),i=this.oL.rowHeights.every(((t,i)=>t===n[i]));t&&i&&(h=!1)}this.oL={columnWidths:r,rowHeights:n,dataGridWidth:o,dataGridHeight:a,columnWidthsCumulative:l,rowHeightsCumulative:c,cellsContentSizes:i}}const r=h||this.QI||this.JI||this.KI||this.iP||this.sP||this.eP||this.rP||this.nP||this.oP||this.jI||this.lP;if((r||this.aP)&&this.oL){const t=this.xf.getInnerIntervalPixels(),h=Ya.PA(this.Sh,this._A),n=[this.nn.left+e,this.nn.right+e],o=[this.nn.bottom+e,this.nn.top+h+e],a={x:t.x-n[0]-n[1],y:t.y-o[0]-o[1]},l=[this.nn.left,this.nn.right],c=[this.nn.bottom,this.nn.top+h],u={x:Math.round(t.x-l[0]-l[1]),y:Math.round(t.y-c[0]-c[1])},d={x:Math.ceil(e),y:Math.floor(u.y-e)};this.SP.Ji(n).Ki(o).qi(0,a.x).ts(0,a.y);const f=null!==(i=this._t.dataGridScrollBarThickness)&&void 0!==i?i:20,A={x:Math.min(a.x,this.oL.dataGridWidth+f)-f,y:Math.min(a.y,this.oL.dataGridHeight+f)-f};0===this.pP.x&&0===this.pP.y||(this.bP.y+=this.oL.dataGridHeight*this.pP.y/A.y,this.bP.x+=this.oL.dataGridWidth*this.pP.x/A.x,this.pP.x=0,this.pP.y=0),this.bP.y=fi(this.bP.y,a.y-this.oL.dataGridHeight-f,0),this.bP.x=fi(this.bP.x,0,this.oL.dataGridWidth-a.x+f);const g=this.bP;this.mP.Ji(l).Ki(c).qi(g.x,u.x+g.x).ts(g.y,u.y+g.y);const v={x:this.mP.x.pi(),y:this.mP.y.pi()+f,width:this.mP.x.Si()+s-f,height:this.mP.y.Si()+s-f};this.IP.dm(v),this.FP.dm(v);const y=this.oL,p=[{x:this.mP.x.getInnerStart(),y:this.mP.y.getInnerStart()},{x:this.mP.x.getInnerEnd(),y:this.mP.y.getInnerStart()},{x:this.mP.x.getInnerEnd(),y:this.mP.y.getInnerEnd()},{x:this.mP.x.getInnerStart(),y:this.mP.y.getInnerEnd()}];y.cellsContentSizes.forEach((t=>{var i;const s={x:d.x+y.columnWidthsCumulative[t.cell.column],y:d.y-y.rowHeightsCumulative[t.cell.row+t.cell.rowSpan]},e={x:s.x+y.columnWidths[t.cell.column],y:s.y+y.rowHeights[t.cell.row]},h=ks([s,{x:e.x,y:s.y},e,{x:s.x,y:e.y}],p);null===(i=t.text)||void 0===i||i.setVisible(h)})),r&&this.aL(d,this.oL,s);const m=a.y-f<this.oL.dataGridHeight;this.HP.background.setVisible(m).Be({x:A.x,y:f}).Z({x:f,y:A.y}),this.HP.scrollbar.setVisible(m).Be({x:A.x,y:f+A.y-f+-(A.y-2*f)*(-this.bP.y/this.oL.dataGridHeight)}).Z({x:f,y:-(A.y-2*f)*(A.y/this.oL.dataGridHeight)}),this.HP.button1.setVisible(m).Be({x:A.x,y:f}).Z({x:f,y:f}),this.HP.buttonIcon1.setVisible(m).ud(.5*f).od(0).td(new $n({dataPattern:null}).appendSample({x:A.x+f/2,y:1.5*f})),this.HP.button2.setVisible(m).Be({x:A.x,y:A.y}).Z({x:f,y:f}),this.HP.buttonIcon2.setVisible(m).ud(.5*f).od(180).td(new $n({dataPattern:null}).appendSample({x:A.x+f/2,y:A.y+f/2}));const S=a.x-f<this.oL.dataGridWidth,b=Math.max(a.y-this.oL.dataGridHeight-f,0);this.XP.background.setVisible(S).Be({x:0,y:b}).Z({x:A.x,y:f}),this.XP.scrollbar.setVisible(S).Be({x:f+(A.x-2*f)*(this.bP.x/this.oL.dataGridWidth),y:b}).Z({x:(A.x-2*f)*(A.x/this.oL.dataGridWidth),y:f}),this.XP.button1.setVisible(S).Be({x:0,y:b}).Z({x:f,y:f}),this.XP.buttonIcon1.setVisible(S).ud(.5*f).od(90).td(new $n({dataPattern:null}).appendSample({x:f/2,y:b+f/2})),this.XP.button2.setVisible(S).Be({x:A.x-f,y:b}).Z({x:f,y:f}),this.XP.buttonIcon2.setVisible(S).ud(.5*f).od(270).td(new $n({dataPattern:null}).appendSample({x:A.x-f/2,y:b+f/2})),this.BP.Hl([d,{x:d.x+A.x+(m?f:0),y:d.y},{x:d.x+A.x+(m?f:0),y:d.y-A.y},{x:d.x+A.x,y:d.y-A.y},{x:d.x+A.x,y:d.y-A.y-(S?f:0)},{x:d.x,y:d.y-A.y-(S?f:0)}])}this.jI=!1,this.ZI=!1,this.QI=!1,this.JI=!1,this.KI=!1,this.qI=!1,this.tP=!1,this.iP=!1,this.sP=!1,this.eP=!1,this.hP=!1,this.rP=!1,this.nP=!1,this.oP=!1,this.aP=!1,this.lP=!1}hL(t,i){const s=[],e={left:Math.ceil(t),right:Math.ceil(t),top:Math.ceil(t),bottom:Math.ceil(t)};for(const t of this.YI){const{content:h}=t,r={...this.kP,...t.padding};let n,o,a,l={x:0,y:0};if("string"==typeof h||"number"==typeof h){const s=String(h);n=i.add(),l=n.Sr(s).Xh(t.textFont||this.xP).hr().zu()}if(zf(h)&&(o=h,l={x:200,y:50}),wh(h)){const t=this.St.lL(h);t.cL()?(a=h,l=a.xi()):t.uL((()=>{this.lP=!0,this.St.Ls()}))}if(n||o||a){r.top=Math.round(r.top),r.left=Math.round(r.left),r.right=Math.round(r.right),r.bottom=Math.round(r.bottom);const i={x:Math.round(l.x+r.left+r.right+e.left+e.right),y:Math.round(l.y+r.top+r.bottom+e.top+e.bottom)};s.push({cell:t,contentSize:i,text:n,sparkChart:o,icon:a,cellPadding:r,cellMargin:e})}}return s}aL(t,i,s){const{cellsContentSizes:e,columnWidths:h,columnWidthsCumulative:r,rowHeights:n,rowHeightsCumulative:o}=i;this.DP.Ne(this._P),this.WI.clear();const a={cellBackground:this.EP.yv(),cellIconRect:this.zP.yv(),lineSet:this.OP.yv(),line:this.NP.yv(),pointSet:this.GP.yv(),rect:this.$P.yv(),junction:this.UP.yv(),arc:this.YP.yv()},l=[];for(const i of e){const{cell:e,text:c,sparkChart:u,icon:d,cellPadding:f,cellMargin:A}=i,g={column:e.column,row:e.row},v={x:t.x+r[e.column],y:t.y-o[e.row+e.rowSpan]},y={x:v.x+A.left,y:v.y+A.bottom},p={x:y.x+f.left,y:y.y+f.bottom},m={x:new Array(e.columnSpan).fill(0).reduce(((t,i,s)=>t+h[e.column+s]),0),y:new Array(e.rowSpan).fill(0).reduce(((t,i,s)=>t+n[e.row+s]),0)},S={x:m.x-A.left-A.right,y:m.y-A.top-A.bottom},b={x:S.x-f.left-f.right,y:S.y-f.top-f.bottom};if(c){const t=ig(p,b,e.contentAlignment||this.CP);c.Be(t[0]).ul({x:t[1],y:t[2]}).Ie(this.dL(e.textFillStyle||this.MP,e.content,this.MP)).Bt(e.highlight).mr(this._t.dataGridTextShadow)}const x=this.dL(e.backgroundFillStyle||this.wP,e.content);if(x!==V){const t=a.cellBackground.add();t.Be(v).Z(m).Ie(x).Fe(Wt).Bt(e.highlight),this.WI.set(t,g)}const M=e.borders||this.yP;if(M&&tg(v,m,M,s,l),u){const t=p,i=b;Vf(u,a,this.mP,t,i,this._t,this.aA,e.highlight)}if(d){const t=d.xi(),i=ig(p,b,e.contentAlignment||this.CP);a.cellIconRect.add().Be({x:i[0].x+t.x*(-.5-i[1]/2),y:i[0].y+t.y*(-.5-i[2]/2)}).Z(t).Ie(new Yt({source:d.Ws,fitMode:$t.Stretch})).Fe(Wt).Bt(e.highlight)}}this.DP.ti();for(const t of l)this.DP.lo().Uf(t[0],t[1]);a.cellBackground.finishPlot(),a.cellIconRect.finishPlot(),a.lineSet.finishPlot(),a.line.finishPlot(),a.pointSet.finishPlot(),a.rect.finishPlot(),a.junction.finishPlot(),a.arc.finishPlot()}rL(t,i){const s=new Array(t).fill(0);for(const t of this.uP.values()){const e=i.filter((i=>t>=i.cell.column&&t+1<=i.cell.column+i.cell.columnSpan)).reduce(((t,i)=>{const s=i.contentSize.x/i.cell.columnSpan;return Math.max(t,s)}),0),h=this.HI.find((i=>i.column===t)),r=h?fi(e,void 0!==h.min?h.min:xs,void 0!==h.max?h.max:bs):e;s[t]=r}return s}nL(t,i){const s=new Array(t).fill(0);for(const t of this.cP.values()){const e=i.filter((i=>t>=i.cell.row&&t+1<=i.cell.row+i.cell.rowSpan)).reduce(((t,i)=>{const s=i.contentSize.y/i.cell.rowSpan;return Math.max(t,s)}),0),h=this.XI.find((i=>i.row===t)),r=h?fi(e,void 0!==h.min?h.min:xs,void 0!==h.max?h.max:bs):e;s[t]=r}return s}dL(t,i,s){if(j(t)){try{const s=Number(i);return new $({color:t.getPalette().getColors(s,void 0)})}catch(t){}return s||V}return t}tL(t,i){t.textFillStyle="function"==typeof i?i(t.textFillStyle||this.MP):i,this.eP=!0,this.St.Ls()}iL(t,i){t.textFont="function"==typeof i?i(t.textFont||this.xP):i,this.hP=!0,this.St.Ls()}eL(t,i){t.backgroundFillStyle="function"==typeof i?i(t.backgroundFillStyle||this.wP):i,this.sP=!0,this.St.Ls()}sL(t,i){t.contentAlignment=i,this.iP=!0,this.St.Ls()}JP(t,i){t.padding={...t.padding,...i},this.tP=!0,this.St.Ls()}ZP(t,i,s){let e=this.vP(t,i);e?e.content=s:(e={column:t,row:i,columnSpan:1,rowSpan:1,content:s,highlight:0},this.YI.push(e),this.JI=!0),"string"==typeof e.content||"number"==typeof e.content?this.ZI=!0:this.QI=!0,this.St.Ls()}qP(t){this.YI.forEach((i=>t(i)))}vP(t,i,s){const e=this.YI.find((s=>t>=s.column&&t+1<=s.column+s.columnSpan&&i>=s.row&&i+1<=s.row+s.rowSpan));return e&&s&&s(e),e}QP(t,i){const s=this.YI.filter((i=>t>=i.column&&t+1<=i.column+i.columnSpan));for(const t of s)t&&i(t)}KP(t,i){const s=this.YI.filter((i=>t>=i.row&&t+1<=i.row+i.rowSpan));for(const t of s)t&&i(t)}RP(t){var i,s,e,h,r,n;if(this.oL){if(0!==t.y){const h=null!==(s=null===(i=this.oL.rowHeightsCumulative.map(((t,i)=>({value:t,index:i}))).reverse().find((i=>-this.bP.y+(t.y>0?1:0)>=i.value)))||void 0===i?void 0:i.index)&&void 0!==s?s:0,r=null!==(e=this.oL.rowHeightsCumulative[h+t.y])&&void 0!==e?e:0;this.bP.y=-r,this.aP=!0,this.St.Ls()}if(0!==t.x){const i=null!==(r=null===(h=this.oL.columnWidthsCumulative.map(((t,i)=>({value:t,index:i}))).reverse().find((i=>this.bP.x+(t.x>0?1:0)>=i.value)))||void 0===h?void 0:h.index)&&void 0!==r?r:0,s=null!==(n=this.oL.columnWidthsCumulative[i+t.x])&&void 0!==n?n:0;this.bP.x=s,this.aP=!0,this.St.Ls()}}}WP(t){this.oL&&(this.pP.x+=t.x,this.pP.y+=t.y,this.aP=!0,this.St.Ls())}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}var qA;!function(t){t.Center="center",t.RightCenter="right-center",t.LeftCenter="left-center",t.RightTop="right-top",t.LeftTop="left-top",t.RightBottom="right-bottom",t.LeftBottom="left-bottom",t.CenterTop="center-top",t.CenterBottom="center-bottom"}(qA||(qA={}));const tg=(t,i,s,e,h)=>{const r={x:t.x,y:t.y},n={x:t.x,y:t.y+i.y},o={x:t.x+i.x,y:t.y},a={x:t.x+i.x,y:t.y+i.y};s.top&&h.push([n,a]),s.bottom&&h.push([r,o]),s.left&&h.push([r,n]),s.right&&h.push([o,a])},ig=(t,i,s)=>{const e=t.x,h=t.x+i.x,n=t.x+i.x/2,o=t.y+i.y,a=t.y,l=t.y+i.y/2;switch(s){case"left-center":return[r(e,l),-1,0];case"right-center":return[r(h,l),1,0];case"center":return[r(n,l),0,0];case"left-bottom":return[r(e,a),-1,-1];case"right-bottom":return[r(h,a),1,-1];case"center-bottom":return[r(n,a),0,-1];case"left-top":return[r(e,o),-1,1];case"right-top":return[r(h,o),1,1];case"center-top":return[r(n,o),0,1]}return rs(0,`Unidentified DataGrid cell content alignment option: ${s}`)},sg={top:!1,bottom:!1,left:!1,right:!1},eg=(t,i)=>i?t.x:t.y,hg=(t,i,s,e)=>1===i&&e===(s?t.columnIndex:t.rowIndex)||-1===i&&e===(s?t.columnIndex+t.columnSpan:t.rowIndex+t.rowSpan),rg=(t,i,s,e,h,r)=>{const n=i.length,o=Math.sign(e),a=[],l=i.reduce(((t,i)=>t+i));for(let t=1;t<=n-1;t+=1)a.push(eg(h,r)*i.slice(0,t).reduce(((t,i)=>t+i),0)/l);const c=a.map((t=>0));let u=a[s-1]+e;for(let i=s;i>0&&i<n;i+=o){const e=t.filter((t=>hg(t,o,r,i))).reduce(((t,i)=>Math.max(t,eg(i.panel.getMinimumSize()||{x:0,y:0},r))),20),n=a[i-1];if(1===o&&u>eg(h,r)-e||-1===o&&u<0+e){c.fill(0);break}if(i!==s&&(1===o?n>u:n<u))break;c[i-1]=u-n,u+=e*o}const d=c.map(((t,i)=>a[i]+t)),f=d.map(((t,i)=>(t-(i>0?d[i-1]:0))/eg(h,r)));return f.push(1-f.reduce(((t,i)=>t+i),0)),f};class ng{constructor(t,i,s,e,h){this.coordsRelative="relative",this.coordsClient="client",this.dt=!1,this.YI=new Array,this.fL=[],this.Kf=[],this.AL=void 0,this.gL=!0,this.vL=!0,this.yL=!0,this.sA=!1,this.pL=!0,this.mL=()=>{this.pL=!0,this.St.Ls()},this.SL=[],this.bL=t=>{for(let i=0;i<this.YI.length;i+=1)if(this.YI[i].panel===t){this.YI.splice(i,1),this.gL=!0,this.St.Ls();break}},this.xL=t=>{const i=this.fL.indexOf(t);i>=0&&this.fL.splice(i,1)},this.oA=t=>{const i=this.Kf.indexOf(t);i>=0&&this.Kf.splice(i,1)},this.ML=(t,i,s,e,h)=>{if(this.wL(i,s,e,h)){const r={panel:t,columnIndex:i,rowIndex:s,columnSpan:e,rowSpan:h};return this.YI.push(r),this._L(r),this.gL=!0,t}throw new Jt("Out of dashboard range.")},this.D=new zt,this.CL=i.numberOfRows,this.kL=i.numberOfColumns,this.aA=t,this.TL=i,this.FL=e;const r=this.kL*this.CL;this.IL={x:new Ef(new Array(this.kL).fill(1)),y:new Ef(new Array(this.CL).fill(1))},this._t=s._t,this.PL=this._t.dashboardSplitterStyle,this.ah=!1!==(null==i?void 0:i.animationsEnabled),this.LL=Df(s,r),this.BL=s.Bk("dashboard splitters",500001),this.Sb=()=>this.LL.Lk(),this.AA=this.LL.Dk(),this.vs=s.vs.ys(this,{DL:{}}),this.vs.DL.Ps(this._t.effectsDashboardSplitters);const n=s.xi();this.uiScale=rt.d2({scaleXYConstructor:be}).qi(0,100).ts(0,100).Z(n),this.xf=rt.d2({scaleXYConstructor:be}).qi(0,this.uiScale.x.getCellSize()).ts(0,this.uiScale.y.getCellSize()).Z(n),this.EL=s.RL.bind(s),this.zL=s.VL.bind(s),this.OL=s.NL.bind(s),this.GL=s.$L.bind(s),this.oa=s.oa.bind(s),this.la=s.la.bind(s),this.engine=s.cA,this.St=s.uA,s.V("resize",this.mL),s.Ls();const o=t=>{this.sA=t.isInView,this.D.R("inviewchange",{isInView:this.sA})};s.V("inviewchanged",o),this.mA=()=>{s.N("inviewchanged",o)},this.UL(),this.setAnimationsEnabled(this.ah),this.createChartXY=t=>{const i=og(t,this.TL,this.ah);return this.ML(new Md(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createSpiderChart=t=>{const i=og(t,this.TL,this.ah);return this.ML(new kf(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPolarChart=t=>{const i=og(t,this.TL,this.ah);return this.ML(new Od(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPieChart=t=>{const i=og(t,this.TL,this.ah),s=i&&i.type?i.type:Tl;return this.ML(new s(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,this,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createGaugeChart=t=>{const i=og(t,this.TL,this.ah);return this.ML(new CA(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,this,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createFunnelChart=t=>{const i=og(t,this.TL,this.ah),s=i&&i.type?i.type:Jd;return this.ML(new s(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,this,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createPyramidChart=t=>{const i=og(t,this.TL,this.ah),s=t&&t.type?t.type:uf;return this.ML(new s(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,this,i),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createUIPanel=t=>{const i=og(t,this.TL,this.ah);return this.ML(new Ga(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createLegendBoxPanel=t=>{const i=og(t,this.TL,this.ah);return this.ML(new Sc(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createZoomBandChart=t=>{const i=og(t,this.TL,this.ah);return this.ML(new Pd(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createMapChart=t=>{const i=og(t,this.TL,this.ah);return this.ML(new Tc(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,i,this),i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createChart3D=t=>{const i=og(t,this.TL,this.ah),s=new yc(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,this,i);return this.ML(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createDataGrid=t=>{const i=og(t,this.TL,this.ah),s=new KA(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,this);return this.ML(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createBarChart=t=>{const i=og(t,this.TL,this.ah),s=new dA(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,this,i);return this.ML(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createParallelCoordinateChart=t=>{const i=og(t,this.TL,this.ah),s=new BA(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,this,i);return this.ML(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)},this.createParallelCoordinateChart=t=>{const i=og(t,this.TL,this.ah),s=new BA(this.aA,this.LL.Ek(this.YL(t.columnIndex,t.rowIndex)),this.HL(i,this.IL),this.bL,h,this,i);return this.ML(s,i.columnIndex,i.rowIndex,i.columnSpan,i.rowSpan)}}YL(t,i){return t+i*this.kL}HL(t,i){return{d1:s=>new s.scale1DConstructor("x"===s.dimension?t.columnIndex:t.rowIndex,"x"===s.dimension?t.columnSpan:t.rowSpan,"x"===s.dimension?this.kL:this.CL,"x"===s.dimension?i.x:i.y),d2:s=>(new s.scaleXYConstructor).ht({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.kL,y:this.CL},i),d3:()=>new et({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.kL,y:this.CL},i)}}setWidth(t){return t instanceof Array||(t=[t,t]),this.EL(t[0]),this.zL(t[1]),this}setHeight(t){return t instanceof Array||(t=[t,t]),this.OL(t[0]),this.GL(t[1]),this}getWidth(){return this.oa()}getHeight(){return this.la()}setBackgroundFillStyle(t){return this.engine.setBackgroundFillStyle(t),this.BL.Ls(),this}getBackgroundFillStyle(){return this.engine.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.engine.setBackgroundStrokeStyle(t),this.BL.Ls(),this}getBackgroundStrokeStyle(){return this.engine.getBackgroundStrokeStyle()}getTheme(){return this._t}setSplitterStyle(t){const i=this.PL;return this.PL="function"==typeof t?t(this.PL):t,this.XL(i),this}getSplitterStyle(){return this.PL}setSplitterEffect(t){return this.vs.DL.Ps(t),this.St.Ls(),this}getSplitterEffect(){return this.vs.DL.Bs()}setAnimationHighlight(t){return this.yL=t,this.SL.forEach((i=>this.St.xs.zs(i.line,t))),this}getAnimationHighlight(){return this.yL}XL(t){for(const t of this.SL)t.line.Ne(this.PL);this.UL()}setColumnWidth(t,i){const s=this.IL.x.C();return t>=0&&t<s.length&&(s[t]=i,this.IL.x._(s)),this.mL(),this}getColumnWidth(t){const i=this.IL.x.C();if(t>=i.length)throw new Jt("Column index is out of dashboard range.");return i[t]}setRowHeight(t,i){const s=this.IL.y.C();return t>=0&&t<s.length&&(s[Math.abs(s.length-1-t)]=i,this.IL.y._(s)),this.mL(),this}getRowHeight(t){const i=this.IL.y.C();if(t>=i.length)throw new Jt("Row index is out of dashboard range.");return i[Math.abs(i.length-1-t)]}getSizePixels(){return this.xf.getInnerIntervalPixels()}WL(t,i,s){if(s&&Math.abs(t.x)>0)this.jL(i,t.x);else{if(s||!(Math.abs(t.y)>0))return;this.ZL(i,t.y)}for(const t of this.YI)t.panel.X();this.mL()}ZL(t,i){const s=rg(this.YI,this.IL.y.C(),t,i,this.xf.xi(),!1);this.IL.y._(s),this.mL()}jL(t,i){const s=rg(this.YI,this.IL.x.C(),t,i,this.xf.xi(),!0);this.IL.x._(s),this.mL()}QL(){this.SL.forEach((t=>t.line.dispose())),this.SL.length=0;for(let t=1;t<=this.kL-1;t+=1)for(let i=0;i<=this.CL-1;i+=1)if(void 0!==this.YI.find((s=>Ls(i,s.rowIndex,s.rowIndex+s.rowSpan-1)&&(t===s.columnIndex||t===s.columnIndex+s.columnSpan)))){const s=this.BL.Ge(this.xf).Ne(this.PL);s.addEventListener("pointerenter",(i=>{this.SL.forEach((i=>{"vertical"===i.alignment&&i.column===t&&(this.St.xs.Rs(i.line,1),this.BL.JL(i.line))})),this.AL=this.engine.setMouseStyle(tr.ResizeColumn,this.AL),this.St.Ls()})),s.addEventListener("pointerleave",(i=>{this.SL.forEach((i=>{"vertical"===i.alignment&&i.column===t&&this.St.xs.Rs(i.line,0)})),this.AL=this.engine.restoreMouseStyle(this.AL),this.St.Ls()})),s.addEventListener("pointerdown",(i=>{Bi(i);let s=i;const e=i=>{Bi(i),this.AL=this.engine.setMouseStyle(tr.ResizeColumn,this.AL),this.SL.forEach((i=>{"vertical"===i.alignment&&i.column===t&&(this.St.xs.Rs(i.line,1),this.BL.JL(i.line))}));const e={x:i.clientX-s.clientX,y:i.clientY-s.clientY};s=i,this.WL(e,t,!0)},h=s=>{s.pointerId===i.pointerId&&(this.SL.forEach((i=>{"vertical"===i.alignment&&i.column===t&&this.St.xs.Rs(i.line,0)})),this.AL=this.engine.restoreMouseStyle(this.AL),ni.removeEventListener("pointermove",e),ni.removeEventListener("pointerup",h))};ni.addEventListener("pointermove",e),ni.addEventListener("pointerup",h)})),this.St.xs.bs(s,(t=>s.Bt(t)),{animationEnabled:this.yL}),this.SL.push({row:i,column:t,line:s,alignment:"vertical"})}for(let t=1;t<=this.CL-1;t+=1)for(let i=0;i<=this.kL-1;i+=1)if(void 0!==this.YI.find((s=>Ls(i,s.columnIndex,s.columnIndex+s.columnSpan-1)&&(t===s.rowIndex||t===s.rowIndex+s.rowSpan)))){const s=this.BL.Ge(this.xf).Ne(this.PL);s.addEventListener("pointerenter",(i=>{this.SL.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&(this.St.xs.Rs(i.line,1),this.BL.JL(i.line))})),this.AL=this.engine.setMouseStyle(tr.ResizeRow,this.AL),this.St.Ls()})),s.addEventListener("pointerleave",(i=>{this.SL.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&this.St.xs.Rs(i.line,0)})),this.AL=this.engine.restoreMouseStyle(this.AL),this.St.Ls()})),s.addEventListener("pointerdown",(i=>{Bi(i);let s=i;const e=i=>{Bi(i),this.AL=this.engine.setMouseStyle(tr.ResizeRow,this.AL),this.SL.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&(this.St.xs.Rs(i.line,1),this.BL.JL(i.line))}));const e={x:i.clientX-s.clientX,y:-(i.clientY-s.clientY)};s=i,this.WL(e,t,!1)},h=s=>{s.pointerId===i.pointerId&&(this.SL.forEach((i=>{"horizontal"===i.alignment&&i.row===t&&this.St.xs.Rs(i.line,0)})),this.AL=this.engine.restoreMouseStyle(this.AL),ni.removeEventListener("pointermove",e),ni.removeEventListener("pointerup",h))};ni.addEventListener("pointermove",e),ni.addEventListener("pointerup",h)})),this.St.xs.bs(s,(t=>s.Bt(t)),{animationEnabled:this.yL}),this.SL.push({row:t,column:i,line:s,alignment:"horizontal"})}this.vs.DL._s(this.SL.map((t=>t.line)))}KL(){const t=this.xf.xi(),i=this.IL.x.C(),s=i.reduce(((t,i)=>t+i)),e=this.IL.y.C(),h=e.reduce(((t,i)=>t+i));this.SL.forEach((n=>{if("vertical"===n.alignment){const o=r(t.x*i.slice(0,n.column).reduce(((t,i)=>t+i),0)/s,t.y*e.slice(0,n.row).reduce(((t,i)=>t+i),0)/h),a=r(o.x,t.y*e.slice(0,n.row+1).reduce(((t,i)=>t+i),0)/h);n.line.Ue(o).$e(a)}else{const o=r(t.x*i.slice(0,n.column).reduce(((t,i)=>t+i),0)/s,t.y*e.slice(0,n.row).reduce(((t,i)=>t+i),0)/h),a=r(t.x*i.slice(0,n.column+1).reduce(((t,i)=>t+i),0)/s,o.y);n.line.Ue(o).$e(a)}}))}setAnimationsEnabled(t){return this.ah=t,this.getCells().filter((t=>t.panel instanceof Ua)).forEach((i=>i.panel.setAnimationsEnabled(t))),this.setAnimationHighlight(this.ah),this}getAnimationsEnabled(){return this.ah}getCells(){return this.YI.slice()}dispose(){return this.dt||(this.mA&&this.mA(),this.YI.slice().forEach((t=>t.panel.dispose())),this.fL.slice().forEach((t=>t.dispose())),this.Kf.slice().forEach((t=>t.dispose())),this.dt=!0,this.FL(),this.D.R("dispose",{})),this}isDisposed(){return this.dt}getIsInView(){return this.sA}saveToFile(t,i,s){return Ea(this.engine,t,i,s),this}qL(t){if(this.pL){const t=this.St.ot.xi(),i=t.x,s=t.y;this.uiScale.Z(i,s),this.xf.Z(i,s);const e=this.uiScale.getInnerIntervalPixels();this.xf.qi(0,e.x).ts(0,e.y),this.D.R("resize",{width:e.x,height:e.y,engineWidth:i,engineHeight:s}),this.vL=!0}this.gL&&(this.QL(),this.gL=!1,this.vL=!0),this.vL&&(this.KL(),this.vL=!1);for(const i of this.YI)i.panel.Le(t);return this.fL.forEach((t=>t.hr())),this.fL.forEach((t=>t.Le())),this.Kf.forEach((t=>t.hr())),this.Kf.forEach((t=>t.Le())),this.pL=!1,this}H(){for(const t of this.YI)t.panel.H();return this.xf.x.H(),this.xf.y.H(),this.uiScale.x.H(),this.uiScale.y.H(),this}X(){for(const t of this.YI)t.panel.X();return this.xf.x.X(),this.xf.y.X(),this.uiScale.x.X(),this.uiScale.y.X(),this}translateCoordinate(t,i,s){return Va(t,i,s,this.xf,this.St)}addUIElement(t=xo,i=this.uiScale){i=za(i,this.xf);const s=Ra(t,this.Sb(),this.uiScale,i,this.xL,this._t);return this.fL.push(s),s}addLegendBox(t=Eo,i=this.uiScale){i=za(i,this.xf);const s=Ra(t,this.AA,this.uiScale,i,this.oA,this._t);return s.setDraggingMode(si.notDraggable),this.Kf.push(s),s}getLegendBoxes(){return this.Kf}wL(t,i,s,e){return i>=0&&t>=0&&i+e<=this.CL&&t+s<=this.kL}_L(t){const i=this.PL,s=i===Wt?0:i.getThickness()/2,e={left:t.columnIndex>0?s:0,top:t.rowIndex<this.CL-1?s:0,right:t.columnIndex<this.kL-1?s:0,bottom:t.rowIndex>0?s:0};t.panel.$r(e)}UL(){this.uiScale.x.yi([0,0]),this.uiScale.y.yi([0,0]),this.xf.x.yi([0,0]),this.xf.y.yi([0,0]);for(const t of this.YI)this._L(t);this.St.Ls()}addEventListener(t,i,s){this.D.addEventListener(t,i,s)}removeEventListener(t,i){this.D.removeEventListener(t,i)}}const og=(t,i,s)=>{const e={...t,columnSpan:t.columnSpan||1,rowSpan:t.rowSpan||1,animationsEnabled:void 0!==t.animationsEnabled?t.animationsEnabled:s};var h,r;return e.rowIndex=(h=e.rowIndex,r=e.rowSpan,i.numberOfRows-(h+r)),e},ag=(t,i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAsa2NhQlgAACxranVtYgAAAB5qdW1kYzJwYQARABCAAACqADibcQNjMnBhAAAALEVqdW1iAAAAR2p1bWRjMm1hABEAEIAAAKoAOJtxA3Vybjp1dWlkOjlmZDBkZjkzLTVmMDMtNDczYi1hZThhLTFhNDM4NmMzNmJhYQAAAAGzanVtYgAAAClqdW1kYzJhcwARABCAAACqADibcQNjMnBhLmFzc2VydGlvbnMAAAAA12p1bWIAAAAmanVtZGNib3IAEQAQgAAAqgA4m3EDYzJwYS5hY3Rpb25zAAAAAKljYm9yoWdhY3Rpb25zgaNmYWN0aW9ua2MycGEuZWRpdGVkbXNvZnR3YXJlQWdlbnRtQWRvYmUgRmlyZWZseXFkaWdpdGFsU291cmNlVHlwZXhTaHR0cDovL2N2LmlwdGMub3JnL25ld3Njb2Rlcy9kaWdpdGFsc291cmNldHlwZS9jb21wb3NpdGVXaXRoVHJhaW5lZEFsZ29yaXRobWljTWVkaWEAAACranVtYgAAAChqdW1kY2JvcgARABCAAACqADibcQNjMnBhLmhhc2guZGF0YQAAAAB7Y2JvcqVqZXhjbHVzaW9uc4GiZXN0YXJ0GCFmbGVuZ3RoGSx3ZG5hbWVuanVtYmYgbWFuaWZlc3RjYWxnZnNoYTI1NmRoYXNoWCBvErgv+J0u7bVCYViyMUgw5yMb8idAv1erA3/DALx9NWNwYWRIAAAAAAAAAAAAAAIDanVtYgAAACRqdW1kYzJjbAARABCAAACqADibcQNjMnBhLmNsYWltAAAAAddjYm9yqGhkYzp0aXRsZW9HZW5lcmF0ZWQgaW1hZ2VpZGM6Zm9ybWF0aWltYWdlL3BuZ2ppbnN0YW5jZUlEeCh4bXAuaWlkOjI3NEMxQjdDN0E0MDExRUVBQkZFQUNFQjJDOTA0NzVCb2NsYWltX2dlbmVyYXRvcng2QWRvYmVfUGhvdG9zaG9wLzI1LjIuMCBhZG9iZV9jMnBhLzAuNy42IGMycGEtcnMvMC4yNS4ydGNsYWltX2dlbmVyYXRvcl9pbmZvgb9kbmFtZW9BZG9iZSBQaG90b3Nob3BndmVyc2lvbmYyNS4yLjD/aXNpZ25hdHVyZXgZc2VsZiNqdW1iZj1jMnBhLnNpZ25hdHVyZWphc3NlcnRpb25zgqJjdXJseCdzZWxmI2p1bWJmPWMycGEuYXNzZXJ0aW9ucy9jMnBhLmFjdGlvbnNkaGFzaFggSmnBvf+o3kEweL4k7cz4MTrB0WSVNFZxoA1rBrM31K+iY3VybHgpc2VsZiNqdW1iZj1jMnBhLmFzc2VydGlvbnMvYzJwYS5oYXNoLmRhdGFkaGFzaFggL2g6Dghd536quyA5vPlS/9NGA5WvLRkkKJmqn0VxCoFjYWxnZnNoYTI1NgAAKEBqdW1iAAAAKGp1bWRjMmNzABEAEIAAAKoAOJtxA2MycGEuc2lnbmF0dXJlAAAAKBBjYm9y0oREoQE4JKNmc2lnVHN0oWl0c3RUb2tlbnOBoWN2YWxZDjYwgg4yMAMCAQAwgg4pBgkqhkiG9w0BBwKggg4aMIIOFgIBAzEPMA0GCWCGSAFlAwQCAQUAMIGCBgsqhkiG9w0BCRABBKBzBHEwbwIBAQYJYIZIAYb9bAcBMDEwDQYJYIZIAWUDBAIBBQAEIHj4VpJDPzaO0x4hOPnj/w1GTHuwXU0IpBf4VVocIQzoAhB3SsxvHza2JR1fKj3Mjr0yGA8yMDIzMTEwMzExNTcyNloCCQCyOL6wAOGCbaCCC70wggUHMIIC76ADAgECAhAFHp6R1x6RCrvkPVzt0N3ZMA0GCSqGSIb3DQEBCwUAMGMxCzAJBgNVBAYTAlVTMRcwFQYDVQQKEw5EaWdpQ2VydCwgSW5jLjE7MDkGA1UEAxMyRGlnaUNlcnQgVHJ1c3RlZCBHNCBSU0E0MDk2IFNIQTI1NiBUaW1lU3RhbXBpbmcgQ0EwHhcNMjMwOTA4MDAwMDAwWhcNMzQxMjA3MjM1OTU5WjBYMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xMDAuBgNVBAMTJ0RpZ2lDZXJ0IEFkb2JlIEFBVEwgVGltZXN0YW1wIFJlc3BvbmRlcjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABE0srlH5A/+15/MFl1asNh8Q8TubOsEVfu0qlJrF0smjtwL1IeHZ/AB7J59u1Trpho1BDN85lfTY30rNBsfT+myjggGLMIIBhzAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH/BAIwADAWBgNVHSUBAf8EDDAKBggrBgEFBQcDCDAgBgNVHSAEGTAXMAgGBmeBDAEEAjALBglghkgBhv1sBwEwHwYDVR0jBBgwFoAUuhbZbU2FL3MpdpovdYxqII+eyG8wHQYDVR0OBBYEFLA1qlbDIamLztO4vIsWJVed7zThMFoGA1UdHwRTMFEwT6BNoEuGSWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcmwwgZAGCCsGAQUFBwEBBIGDMIGAMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wWAYIKwYBBQUHMAKGTGh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcnQwDQYJKoZIhvcNAQELBQADggIBAHgrjELHhBCEWJSCyRX7lsL0C9LJgbX1ryVYySNRxHkMR2LqC7PQZRJgDNR+kJop8P5v2Bzp/jMrzw4U4pY6rYv3I8HpFlJa4uBwUTIUgHWpi8Xxd1JEEX94POODi7HySekX60A055BozFb7GGVaxb0LreQTRXnkr6ggPNUPX9Gh+2ScOxlTdQQLgZbkdYvxo3Ap6cy9riZijRxOZqiOyWSxMUhgKxeKzwrFW6Xbe0awNhOUXZzIxc4ixpKzWSItpPJ30ZiBQn49U3ADYTnshbN9ZkTA1pHf/Nov2ZUvvddkZ8UYvwo9vBvLTDvnmABnRMBKaXYAs3ZCvw9CkDPOWTeUJMFRAtmUx52ohaA3nD8bCJ6UfpQ2pFfOdShwpb6GKv0g+BgcdIG2LHPJ0Ufmr+XmpgZgq/HIge0hjcCADpjDgq2z4B0L4xtAA1M8MrUx02hxb7104nFKqMuv5zJTQl3sgwqXUyP+9zHQP9y/Z5Fx/AQWrOXCW56dV7P4cFBJl8zHqinlhkOStZ1m22+9Hlq+eC0hJ2lkF1LuzRdJJb/51LXoPKRnopFDng6XpoD7eG6w4YpAx9+P00JuUoBsYSrdsuFiyWyQQGBAnjI69ggbSLcW+hJytuinaxawVlItJkS2eV5Z4XsxPg7f82uRkdtN0hTHeI93CN3OWeRebnK7MIIGrjCCBJagAwIBAgIQBzY3tyRUfNhHrP0oZipeWzANBgkqhkiG9w0BAQsFADBiMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29tMSEwHwYDVQQDExhEaWdpQ2VydCBUcnVzdGVkIFJvb3QgRzQwHhcNMjIwMzIzMDAwMDAwWhcNMzcwMzIyMjM1OTU5WjBjMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xOzA5BgNVBAMTMkRpZ2lDZXJ0IFRydXN0ZWQgRzQgUlNBNDA5NiBTSEEyNTYgVGltZVN0YW1waW5nIENBMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAxoY1BkmzwT1ySVFVxyUDxPKRN6mXUaHW0oPRnkyibaCwzIP5WvYRoUQVQl+kiPNo+n3znIkLf50fng8zH1ATCyZzlm34V6gCff1DtITaEfFzsbPuK4CEiiIY3+vaPcQXf6sZKz5C3GeO6lE98NZW1OcoLevTsbV15x8GZY2UKdPZ7Gnf2ZCHRgB720RBidx8ald68Dd5n12sy+iEZLRS8nZH92GDGd1ftFQLIWhuNyG7QKxfst5Kfc71ORJn7w6lY2zkpsUdzTYNXNXmG6jBZHRAp8ByxbpOH7G1WE15/tePc5OsLDnipUjW8LAxE6lXKZYnLvWHpo9OdhVVJnCYJn+gGkcgQ+NDY4B7dW4nJZCYOjgRs/b2nuY7W+yB3iIU2YIqx5K/oN7jPqJz+ucfWmyU8lKVEStYdEAoq3NDzt9KoRxrOMUp88qqlnNCaJ+2RrOdOqPVA+C/8KI8ykLcGEh/FDTP0kyr75s9/g64ZCr6dSgkQe1CvwWcZklSUPRR8zZJTYsg0ixXNXkrqPNFYLwjjVj33GHek/45wPmyMKVM1+mYSlg+0wOI/rOP015LdhJRk8mMDDtbiiKowSYI+RQQEgN9XyO7ZONj4KbhPvbCdLI/Hgl27KtdRnXiYKNYCQEoAA6EVO7O6V3IXjASvUaetdN2udIOa5kM0jO0zbECAwEAAaOCAV0wggFZMBIGA1UdEwEB/wQIMAYBAf8CAQAwHQYDVR0OBBYEFLoW2W1NhS9zKXaaL3WMaiCPnshvMB8GA1UdIwQYMBaAFOzX44LScV1kTN8uZz/nupiuHA9PMA4GA1UdDwEB/wQEAwIBhjATBgNVHSUEDDAKBggrBgEFBQcDCDB3BggrBgEFBQcBAQRrMGkwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBBBggrBgEFBQcwAoY1aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcnQwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcmwwIAYDVR0gBBkwFzAIBgZngQwBBAIwCwYJYIZIAYb9bAcBMA0GCSqGSIb3DQEBCwUAA4ICAQB9WY7Ak7ZvmKlEIgF+ZtbYIULhsBguEE0TzzBTzr8Y+8dQXeJLKftwig2qKWn8acHPHQfpPmDI2AvlXFvXbYf6hCAlNDFnzbYSlm/EUExiHQwIgqgWvalWzxVzjQEiJc6VaT9Hd/tydBTX/6tPiix6q4XNQ1/tYLaqT5Fmniye4Iqs5f2MvGQmh2ySvZ180HAKfO+ovHVPulr3qRCyXen/KFSJ8NWKcXZl2szwcqMj+sAngkSumScbqyQeJsG33irr9p6xeZmBo1aGqwpFyd/EjaDnmPv7pp1yr8THwcFqcdnGE4AJxLafzYeHJLtPo0m5d2aR8XKc6UsCUqc3fpNTrDsdCEkPlM05et3/JWOZJyw9P2un8WbDQc1PtkCbISFA0LcTJM3cHXg65J6t5TRxktcma+Q4c6umAU+9Pzt4rUyt+8SVe+0KXzM5h0F4ejjpnOHdI/0dKNPH+ejxmF/7K9h+8kaddSweJywm228Vex4Ziza4k9Tm8heZWcpw8De/mADfIBZPJ/tgZxahZrrdVcA6KYawmKAr7ZVBtzrVFZgxtGIJDwq9gdkT/r+k0fNX2bwE+oLeMt8EifAAzV3C+dAjfwAL5HYCJtnwZXZCpimHCUcr5n8apIUP/JiW9lVUKx+A+sDyDivl1vupL0QVSucTDh3bNzgaoSv27dZ8/DGCAbgwggG0AgEBMHcwYzELMAkGA1UEBhMCVVMxFzAVBgNVBAoTDkRpZ2lDZXJ0LCBJbmMuMTswOQYDVQQDEzJEaWdpQ2VydCBUcnVzdGVkIEc0IFJTQTQwOTYgU0hBMjU2IFRpbWVTdGFtcGluZyBDQQIQBR6ekdcekQq75D1c7dDd2TANBglghkgBZQMEAgEFAKCB0TAaBgkqhkiG9w0BCQMxDQYLKoZIhvcNAQkQAQQwHAYJKoZIhvcNAQkFMQ8XDTIzMTEwMzExNTcyNlowKwYLKoZIhvcNAQkQAgwxHDAaMBgwFgQU2Rq5M/4XremCHqYT9aQ6cU4+fn0wLwYJKoZIhvcNAQkEMSIEIGmY+GsCefCDmP0PFcYjdxBUfi0EgKYuEZb9pUMyLNuVMDcGCyqGSIb3DQEJEAIvMSgwJjAkMCIEIILa8ZSVezaEAkWP1ScAaf5ixxRW+p4Lhqv4J+hTICfZMAoGCCqGSM49BAMCBEcwRQIgcxxuf7QHV9Fkpj1VhPrFqhNFh8dZzl8qUU/2N3Sr4eoCIQDKu0KGYL++CSsDAXjJciMDbr5ImTy3jw0yQU5GYYeLimd4NWNoYWluglkGMzCCBi8wggQXoAMCAQICEBtbCzvasORd8vMNnlTR2tIwDQYJKoZIhvcNAQELBQAwdTELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEiMCAGA1UEAxMZQWRvYmUgUHJvZHVjdCBTZXJ2aWNlcyBHMzAeFw0yMzAyMDEwMDAwMDBaFw0yNDAyMDEyMzU5NTlaMIGhMREwDwYDVQQDDAhjYWktcHJvZDEcMBoGA1UECwwTQ29udGVudCBDcmVkZW50aWFsczETMBEGA1UECgwKQWRvYmUgSW5jLjERMA8GA1UEBwwIU2FuIEpvc2UxEzARBgNVBAgMCkNhbGlmb3JuaWExCzAJBgNVBAYTAlVTMSQwIgYJKoZIhvcNAQkBFhVncnAtY2FpLW9wc0BhZG9iZS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDv0wCnfYY9lkHDsykrTG7FYlnYHBcyualuD5u9ULjzv+FsTWOLg8Nhrz9RTxI9EeBbu3Wm7f4vqPsQYfxkEp0wIa6DVmEOZhbAeRfbhybWQ/D4Wvvck4mEZR+QZmTpIn7HX61gbtMFHlJUxkYBctIoAt9TBAFbz9d5Ig2WG0bsH39b6/8USXnIIk4FB6dtBRT1xeEwSDtwOd1YBpXXNBJmRWHXNJZZ85of2tBTesg/kMvTrOJJxYDZ97U416wcvbVomlees+NXUY3/ZB4xH+NsZils7m1bL2v2hSnHiLoqZeUKklbHUmT4ZpjrZCdtuIsWm5j2PPXKr7HKUuCbZSXBAgMBAAWjggGMMIIBiDAMBgNVHRMBAf8EAjAAMA4GA1UdDwEB/wQEAwIHgDAeBgNVHSUEFzAVBgkqhkiG9y8BAQwGCCsGAQUFBwMEMIGOBgNVHSAEgYYwgYMwgYAGCSqGSIb3LwECAzBzMHEGCCsGAQUFBwICMGUMY1lvdSBhcmUgbm90IHBlcm1pdHRlZCB0byB1c2UgdGhpcyBMaWNlbnNlIENlcnRpZmljYXRlIGV4Y2VwdCBhcyBwZXJtaXR0ZWQgYnkgdGhlIGxpY2Vuc2UgYWdyZWVtZW50LjBdBgNVHR8EVjBUMFKgUKBOhkxodHRwOi8vcGtpLWNybC5zeW1hdXRoLmNvbS9jYV83YTVjM2EwYzczMTE3NDA2YWRkMTkzMTJiYzFiYzIzZi9MYXRlc3RDUkwuY3JsMDcGCCsGAQUFBwEBBCswKTAnBggrBgEFBQcwAYYbaHR0cDovL3BraS1vY3NwLnN5bWF1dGguY29tMB8GA1UdIwQYMBaAFFcpejJNzP7kNU7AHyRzznNTq99qMA0GCSqGSIb3DQEBCwUAA4ICAQBXjlGa3yAK/Gijn6n/JNU9FZm72MP6vc5czrWe9y0T+EawuRvhpD5Edi1TnXkrpe8sMkgSjTGdbY+yGhq8zlCWQeXN1/aWo3L9Xr1uNxY/oVpLn0uWWfnfJ7yR9gKl/yoMfhjydT4t1fXHi/MhfhrWSVRHqX2U31UFGz/e298P2kv+vqhzpIUo1bj+jibtoPLMMQcCOTtKiJOTh4o3VSZpwQDERCzo91NkF+LnZjwYl6fE5USIkg/oCoomXxSPpowybDrcRJ9ilbtJcER48/LGgwzv/c7OYdron4PnEXm1FkOaVj+QRf7OwiNTizonhIzLR5Vfp0QHOWv/bPzvCjPQd+Xr0Q4032WlSxQwostNTAPtoVAU4OCwVH3Ech38emJ00/6fkDCdr7MN8/4n2LSNrMUvaBEZdmLqDCBnO02dbFrmpg3pTc0FqRQ4GL/88pjRNSMy5tU9SoQnSCGYqIsjfL8AzgPEGiXXRgABYc1uXecf4/eayb3K2MPs7hnWTbUKpHHJIwxpdN3vTGdZNWpz9Oxfuo3eELQlkTvACHgqkaXi/FAanHe5PChn6fr1/4cNF8goD0buPApgS3zzwqjRhxrH8ISwPfJn8JqzurMaLDMnnc18tHzUiMtX73jf6oXh7voCxX/T4D3nFPlxU3om2cpcLQ1Wd4026x18rlSGR1kGpTCCBqEwggSJoAMCAQICEAyotlR7iebSBol1zYubieIwDQYJKoZIhvcNAQELBQAwbDELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEZMBcGA1UEAxMQQWRvYmUgUm9vdCBDQSBHMjAeFw0xNjExMjkwMDAwMDBaFw00MTExMjgyMzU5NTlaMHUxCzAJBgNVBAYTAlVTMSMwIQYDVQQKExpBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZDEdMBsGA1UECxMUQWRvYmUgVHJ1c3QgU2VydmljZXMxIjAgBgNVBAMTGUFkb2JlIFByb2R1Y3QgU2VydmljZXMgRzMwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC3Hy69vQmzXEhs/gyDrmwB6lF4JaSAPomnsbKIZNr2iXaB+fkd85X8eJiNmI7P5O4cVT4Nc1p3zrESqBV4ZUyW8gcZ78QdwoHG8QNd2VNcHnMgSR+XT9Iafsnq9Nfww3Jt9KL3l5ANQ5n1+MJqr48EWNLll942bOL/JH4ywDSMoqhZqtJEIUUUGlQVBZ8CAvJc7LE6ddA5C52PE2Ppa7RfQgHXf4gfXVZwpxYRZcziPiOHqEvLb0J3cShUbejFxV6cwX8QyAPa1ePHg1RtM0HX+D34xHo3DkyGnmT+Ddq00TEDGG26AL5PdINKFIQl+zaq6KJFQe1fdGE5wrWzU4mBPmzaz3EbLn+7FWlwAhorYqIMldbfHE3ydc+aTU1JW7+bG19qmvhO9IluGtTtQDeqFBj2fg6faxsfVfVPD7stN6TwoIDlkOCE4RE+Iin8m3z3eqi/VsTmsmRqBxWDRaqOHz02EJoEDxXJG3ei+UbIIp01XZQvdufm90WxOTuqqan2ZqTPX9K5VdjEh/ovr7xFc5q1dZo+Sa5y4sTVM854/tLU3klOgUKzzSXYPYS3GhBcYJHjwr9xNRHnNX99D6F0g7OijScWfvtjxh13aTv/H0ETvymah4yfDpVdh9cK5YSCPqnuOlsujFAyhYwJXOWDvZZU2EkWVLDhoPx9zp7N4QIDAQABo4IBNDCCATAwEgYDVR0TAQH/BAgwBgEB/wIBADA1BgNVHR8ELjAsMCqgKKAmhiRodHRwOi8vY3JsLmFkb2JlLmNvbS9hZG9iZXJvb3RnMi5jcmwwDgYDVR0PAQH/BAQDAgEGMBQGA1UdJQQNMAsGCSqGSIb3LwEBBzBXBgNVHSAEUDBOMEwGCSqGSIb3LwECAzA/MD0GCCsGAQUFBwIBFjFodHRwczovL3d3dy5hZG9iZS5jb20vbWlzYy9wa2kvcHJvZF9zdmNlX2Nwcy5odG1sMCQGA1UdEQQdMBukGTAXMRUwEwYDVQQDEwxTWU1DLTQwOTYtMzMwHQYDVR0OBBYEFFcpejJNzP7kNU7AHyRzznNTq99qMB8GA1UdIwQYMBaAFKYc4W1UJEyoj0hyv26pjNXk7DHUMA0GCSqGSIb3DQEBCwUAA4ICAQBxzuUHjKbcLdzI4DtlXgCSgZXrlSAkr59pOF3JfPG42qVNAGU7JcEYXJ6+WbfcGwY7WYMl+jO7IvJPb7shXFYW9bnJgxX7lLU14KExchmcLNY1ee6IhBJ2Y8PzZMRUKSd5CkURPg0PBLGjz/KR/DofHx+G4rPTCOGORYxeYrd01lci5hVxvKccvIk7MD69ZTewfZPSM+0WnsU3f0Zmd7hgbRpUyWceG0eHFpdUKK/ZFWhHjDVC28odCnN885tHncKXviItK0ZUUo/AIthFKlhEXsnq9VL9fFbgvO83ZvpUQo5y8mY3cuGnEVGXdhjNb53CfC1u4dbpYmWaN99subUzEsUaUb3loLPfVfzDOpg2y9v37kBdy/wuXr20teY7U62xj/fAgs1QSnhUtlMTfCqbefyEycKVmKIrJkJLsvgTSYKVvH4FFIwfd5WjqOC97jX98rcVAzhAI0iSkazsWOMvL6m0L4nLJapx+85GsVX8Y6AHmEP4bmCElwil6KAP+UewJFiw5rmwV2pESHAhYuZJa03B8tl0nd2QJzvJGmbeBqXqpF9ORinFM3HErK8puRokOjFH2+1asLeI2tB31W/ELdNe27Ogduq6Z6qBwCp59YX27qydDhD0WRfN64kCs25K88iGAGNW2CAfTDS+b+WYJBiIL9jXYZ4LF+BiUvfdu2NwYWRZC70AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPZZAQBKX2Q2ihN2fLDLReHISpfOF0xIqNpOZXbBwZ0XanWG98erbIBdawl7r9nVma/uZjYH457wp00TVpKYUTJHMnzJMKskvM2Df4K6t5pUKGtJqEvMXLUy3g9kJq53aYDwikcUE+8wv+CYtu/+vii4XYSXQIxT4NN+JKoTDXmrNH1G46Nmpfq6SKk0g9GQ2brbkW3fzGR0xDxY3BXRy71guSBxN9TAbQGqUjMnkIyBcwV9wUQ2oCW9oIMNKASjW0CRkcFEzzmrQ+y+zHYpNvUaG7QehHcyhvOec3plzlyP6DZeQWp3PHA5bmonI8t5j6Qj15X1KnQiXuJ0rW+xoMA89aIVmpx4VgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAOSaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA5LjEtYzAwMSA3OS4xNDYyODk5Nzc3LCAyMDIzLzA2LzI1LTIzOjU3OjE0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjYyYTdmYWExLWJmZTMtMjE0Ny04MjAwLWMxM2NlMGU4ZTc1NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzRDMUI3RDdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzRDMUI3QzdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjUuMiAoMjAyMzEwMjQubS4yMzc0IDRhYjk0MzkpICAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphYjQzZjNjYy1hNTY4LTRkNGQtOTdiZC1iYjk0YjBlZjhjYmQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjJhN2ZhYTEtYmZlMy0yMTQ3LTgyMDAtYzEzY2UwZThlNzU0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HNvo5wAADZFJREFUeNrsXFtPVUkW3gc4yP0qDigKON517FFbHRGn1TamjaOJvvhsjIkvPplgfEKe1AefNDE+GP+AmWTszPTYcbpn2piJzc1GWwlOekRBEBFQ7jeZ9ZVrnVkUtfc5CGp3h5VU9qUuu3bVV9+67DonND4+7omEQiHPJaWlpYlxcXGLKX8epTCdB5aXNnHU6c2bN5POcaREp+O9dHxSX1/f5s3KL1ImYCkasMrKyvIISJspD+AyZSTpOrodDSaIBpQCkwtgSM8oVd2/f39M2quoqAijmcrKyjG/l7L77vde+v6sfCRgbdu2LY3AtJNSgg0qDa5oTOViKQtM9nXTgQMHaqmpPEoLKXUQqJpcYIqPj/cSEhLMUZgUbYyNjZkjRPpu50n+VEUvKtditMEb7Xom5OrVqzvpkOXIukFps5XXTunO4cOHR7heKp1/ye1gEX9BCcdv6H4330cbCyh9iXrRgJUQ1FmarFWUIqDS4ApiCT9AobxMpj24uI/209LSvMLCwiLKz6fyQModAlW73TeAac6cOV5SUpIBlasv9qKRvgBYIyMj3tDQkDmPdaLRPzwrHA6bhGsNWr9xsMfEZnC7XDSg+tzv4lRCCRPfjJtHjhzpu3LlCkDVx4BKZICsx9gy4PT4rmFQQbIpdfM5ynX7gWrS/Phl7NixI0SDWCCD52Is14vqAXIByoluAkl+fr43f/58Lyvr7cIaHh4OJSYmfkug6rXZApOamprqUb6vned3X4CBujj29/cbkEl/7EUj74o+og4S2gh6xkypk6mUPXnyZN25c+fCDKzm8vLyOuQzqCAtJ06cuH/+/PkwAytMLCR57VjQFy5cmKeAiXJZGOeLFy/iPBVt4Nqeb60dogKLBm9O/FvxXIwVxBAaUBpgixYt8np7e7329vYJZUtKSkwSefHihVdTU9N2586dXrtfmNj09HQz0dMRvAsYD0dhLryrvG8s7/w+ZCrPcJSdx8duAb+6l0WgWqeu/8uMZMoDWCTr+BpMVoZ8jLUq18XXgdohEFg0cXF6kF2s5Uf9NqBwxL0FCxaYSXz58qWZSNzr6+vzioqKIm01NTV5ZLgbT9HuExgGAzBdUOmJEeb6EKD5AJKt1KJ9TwAFNrpz6tSpljNnzgiQuuh8DbNSNx9HlF0mx26/cbTHLy6AsSKGcVCyjWepJwnS2trqbdiwwZyDJaDyUBbslZmZGTG6Hz9+7D18+NDdUSqTkpIyY6B6V5b4mYsBAIGm27rXR/f+DFXGKm5Ega6P7a5lqvw6sbMIcFkKlCUAI6esQI0QBCwBjxirNqCkDACSkZFhQKLVCSassbHR27Jli6kvsnDhQnN8/vy5t3Hjxsj95ubmSQ6CVoEA5a8IBO+LsSKgoskPKxaC1DKo1mmDXF1/AwAyCO+rNoX1FrANVqLA6V6sfuGGgwcPphBovrCBIuwCgRp7+vSpAUd2dra5bmtrM6pvdHTUu3fvnrGdNHhEbt265XV1dXn79+9/y8V0XltbGwkDkKpsqqqqqhG2AmgBrFn5+Qo0Uyw21gRm0kwCLwqAAgC2b99u2AQCVYWyACtUGkRUoC2bNm0yYBIBe/l5ncKaWmg1hrj/47TCRu32ebUam4LyAweEymK1QG+PUdk3PmXCrGZicrej9e99CD0znvs4NsPtRh2fmMMNLmBBYHgDmTC4ly1bNslWAbhu375tyh06dGgCw2kB+yDEAIEh39HR4RsjE+/NkgJKf0DwlNJ3jkndi2Yo/QXOZ5RxWElpOaUqSk99QLWPErzUr2OcD+j7T+GPUKqZocldyu2mWWbMv1mt4T3q2OObSVnNz46MD49xMfelE85ArOGGiA2FSR0cHDRggVe3fv16Lzc317cXCBeUlZUZu8sVBLUF7YrnaDMWygsjWpLJx1eOvCS8LKX+GFeYdPS1T356wLOC7NcOK/g4HSbaSmku2zZtlo0D6l8U5R2mIxmO91/F79iP8aY+lmhAR2Us09PXr439hAles2ZNoK2Tl5dnwgorV66clHfz5k1v165dk8CFuJYfWwm4/Twgn4FMZqO0U00OPg/lsgck0k3Ae6JACq8HamsAJgPl9fOAzef8VLpey1HtVGXUQoZ45b7QawzgojqpauJNZIYnpEXUFpWZw8ZxMqsdEdgUixlUqPMt1RlygE8mv4jO5/M7tFHZXs4HI+uJG4YFQvldnF+sAPRGjd8SSjl8fzGVG6I6Dxk76GcKl8uOlbESh4eHDVOBpWCcQ/1F88qQv2fPnknlnjx5YsIJOBYXF/9/NqhtANcV8ZbYlc8zswJYJJ8H5Eem7A3WxEYmjdVcigycyltBeV/RsVANbDKDrJnL5jom+Dsa+A5e0WDOn7g/Kx3PR/06qpPDjBS28gG6e6pfDT6gimeV5LF6iqh4focxHo84Ne8hzv8ng2sJA6tfjUedROkZbPkqRhbie8JauTEBi7y6ePncAQaaO3fulKLaWgDQgYEBoxrh+WlgiW3l9znFNtp5IBN5kv0YS6vJYgYVVlU120mfUPot58sqbeaBxJh8zqs7TIN+i573R2aMfykGQD2w21dcfx2DMI3yXjOosLqH6Fr6U8VqDHGhzVw2ns8T2BaTWNMefrc09a7PA1R1iNuuYibZwfXmUB8Qq/qrZa9tZjs1i65fcRswHf5O1zuYgZ7yeG1jdq3SbM9gauFF8yimOBYABaN66dKlUwKVS0TVQT2+evVqgjcIYAWxXxQ12O/jcWUq0MlqvwtQsIeo8zOUWoQHOcCTNMbqQsqPcTARE5PCk/+a64woB6HPYf/JMzq57KgqW8AAaKa8Jn4fbfOlKe92wGeoMq13GFQqdwD95aDmZ5Q+Z9AJwwwoYL5Wn3vqHH2JCOU9pkMjg7jWMgH8GYtspVx8cIwW6QYDrV271rccgATGAkhgm8GTfPDggbd161YTWIUqdLGVnPt4lQKsQQebJTCVj7CNlO4YmAwFlCUaBAo0XVR/nK6T+RqTNh5g7GuwLrTyMxlMfY760r/eKI4J+hJSffA1rlm9o989DK5SLtOmnpOm+pCr6zNoojpJVK6HnxFbuKGiomI5u5hRQVVdXW0+0UjowGa97u6Jn5ewewExMIAN3mA0lepjX8nLgsYXMy2P8SAmWJM6zGoJhnkrr7BEBRwbJLYHJJ/zQ5gwZhx7IkMMkEFWfZF8BcxOFU9zAes33L9+yzERMKLP66nMM8V4HjNFpgPI0r9kft4AmwLjzE4wD0Z58S0OMCvk/RMDgB1zHGtZtIoIgopKe/TokRNYnZ2dzroAIsAFo93Vrq0OAxgLdPZ7TZBsLOtBAl2vZbvqE1VWT4JWM/YkDfJk4P4+GtxqR5l07otrYjMdk6Ydj24ebxjwO23CZ6A+YGegiJOn+vY3xcC9jncY5TwA7E92+zGEW/r5+CnbUjdijbXYbJXs8E6ck11aWmp2G+B7oC1Qc2AsP+AAVHqT3RR3Vd5nQ9dO93hw6ik95hX9H7jonF/PIQBjj7ARC9f5rhUTQrlWrt/L9e/y/XbOq1ce0ihfy0A85useZop6K2gJ8P8A0FACo/7De7tV5Qd4sgIa8QDp2IBoDTNOvU7Mlo1sQ44rwNSzwS3t19l14WWq/tb4qLW76rn3Yp2gSd8KCVjwWMqC1JP6nmei8Ddu3DBRdgmI4jshDHbkByVpQ5+rY9P3339fk5OT46m9RVMNLGLQf2cxdCGff62M3I8m1EcY73nqVg4nhBYe/FK+EwJH+E4cpAozgxoQlhEQwGNctWqVUW2rV6+OGOx++96jbcm193bJBrx3lBQV3NRu8o+xgCrWvervsoddWD8pKamQ40Py9QEM00htNrzrnvxY3yeW/kUTIRlbO7kYa4OlxyMsZG87loQ8Yhdv9+7dJkIPYGk28mOrFStWGOMeux+wdx0foq9fvx7Z3QDGgmeK9D63y8j74D2QpI+unZHTAZdsgJzKxE33vfQzowEuluC3q57eyx/EWBn2DQQ3MdDa9bd/xrV8+fLIpx8beH4/HigoKHgbKi4u9s6ePeuVl5cbYOkOIxwB0M30Bj+0DRDhy4LE7KSfszJ9SbAMd0+5vxEjG6EB+SWMRq3eepycnGwMdq0mfX7aNWHbsrAhovvXrl2bpCKRB2DDSZjuKpd2AVa0qX9EMSszK3GOmEWCjopLgBMJE4GEyZajVh8OA9zJXBpUOL98+bJ37Ngxr6WlRbPbuIABrILPS+8KAtRD/3t6ekzsTBbLLKg+HLC0GrxLkzCmAaWTDSptm0QDGf92cMKvdy5duuQdPXpU6+sB7TAAWFCzOI8VTCiLOoinIeaGNqbyO8JZmXlg3a2srPyJANQqQHIBTIPLBlYQc8GTxM5SAdHevXvNr3NgSylGe2Z7owAG2AZHcSbshHJgOJQDoCSeNgumj2hjMbAMqHBBE/IAv0imiU6AjSUGvN9Pv1z2lAtc2AiILTg4r6mpMfGP48ePew0NDdJGU21t7SuXaysAt3e26l85z7LSx5cJ4YbTp0/PJVBN2G6wb9++PJrAzdif5fpBhTaK/f70I1qygPeMrqvq6upi0nmuPyWZlY8XJPWNY7mEVJX5GyNK8yiFg34J7fM3RYEgIyCN09H8jVF1dfXs3xj9CoD1PwEGAKorJqR4atjIAAAAAElFTkSuQmCC",s)=>{let e,h=0,r=0;const n=[],o=t=>{const i=new ni.Image;i.src=t,i.onload=()=>{n.forEach((t=>{var s;const e=new Yt({source:i,fitMode:$t.Stretch});null===(s=t.Ou)||void 0===s||s.Ie(e),h=0,r=0,c(t)}))}};o(i);const a=t=>{o(t.logoDataURI)};let l;if(t.Qo.addEventListener("logochange",a),new ni.Image instanceof ni.HTMLImageElement){const t=new ni.Image;t.src=i,l=new Yt({source:t,fitMode:$t.Stretch})}else if(ni.lcjs_setup){const t=new ni.Image;t.src=i;const s=ni.lcjs_setup(t.naturalWidth,t.naturalHeight);s.getContext("2d").drawImage(t,0,0),l=new Yt({source:s,fitMode:$t.Stretch})}else l=new $({color:S("#f00")});const c=t=>{if(t.Ou){const i=t.ot.Pi({x:t.ot.x.getInnerEnd(),y:t.ot.y.getInnerStart()},{x:-(3+h),y:3}),s=t.ot.Pi({x:t.ot.x.getInnerEnd(),y:t.ot.y.getInnerStart()},{x:-3,y:3+r}),e={x:s.x-i.x,y:s.y-i.y};t.Ou.Be(i).Z(e)}e&&e.Ls()};return e=t.Bk("logo",Number.MAX_SAFE_INTEGER),i=>{const h={ot:i};return(i=>{const h=s&&"cGx1Z2lu"in s&&"cHl0aG9u"===s.cGx1Z2lu?cg:lg;if(i.Ou&&i.Ou.dispose(),e){let s;i.Ou=e.Pe(i.ot).Ie(l).setPointerEvents(!0).Fe(Wt),i.Ou.addEventListener("pointerenter",(()=>{s=t.tn(tr.Point)})),i.Ou.addEventListener("pointerleave",(()=>{s=t.sn(s)})),i.Ou.addEventListener("click",h),c(i)}})(h),n.push(h),{hr:()=>c(h),G:()=>(i=>{i.Ou&&(i.Ou.dispose(),i.Ou=void 0);const s=n.indexOf(i);s>=0&&n.splice(s,1),n.length<=0&&t.Qo.removeEventListener("logochange",a)})(h)}}},lg=()=>ni.open("https://lightningchart.com/lightningchart-js/"),cg=()=>ni.open("https://lightningchart.com/python-charts/");class ug{constructor(){this.tB=this.iB.bind(this),ni.addEventListener("scroll",this.tB,{passive:!0})}G(){this.tB&&ni.removeEventListener("scroll",this.tB),this.tB=void 0}}class dg{constructor(t,i){this.Ua=t,this.Y=i,this.sB=!0,this.eB=null,this.hB=null}}class fg{constructor(t){this.rB=!1,this.nB=1,this.oB=t,this.aB={Ua:r(0,0),Y:r(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),sB:!0,eB:null,hB:null},this.lB=r(64,64),this.cB=new Uint8ClampedArray(this.lB.x*this.lB.y*this.nB)}uB(t,i){if(!t.sB)return null;if(t.eB&&t.hB){const s=this.uB(t.eB,i);return null!==s?s:this.uB(t.hB,i)}const s=n(t.Y.x,t.Y.y);if(t.Ua.x+t.Y.x>=Number.MAX_SAFE_INTEGER&&(s.x=this.lB.x-t.Ua.x-1),t.Ua.y+t.Y.y>=Number.MAX_SAFE_INTEGER&&(s.y=this.lB.y-t.Ua.y-1),t.Y.x===i.x&&t.Y.y===i.y)return t.sB=!1,t;if(s.x<i.x||s.y<i.y)return null;let e,h;const o=s.x-i.x,a=s.y-i.y;let l=o<a;return 0===o&&0===a&&(l=!(t.Y.x>t.Y.y)),l?(e=new dg(js(t.Ua,{x:0,y:1}),r(t.Y.x,i.y)),h=new dg(js(t.Ua,{x:0,y:i.y+1}),r(t.Y.x,t.Y.y-1-i.y))):(e=new dg(js(t.Ua,{x:1,y:0}),r(i.x,t.Y.y)),h=new dg(js(t.Ua,{x:i.x+1,y:0}),r(t.Y.x-1-i.x,t.Y.y))),t.eB=e,t.hB=h,this.uB(t.eB,i)}dB(t,i){const s={fB:!1,Ua:null};let e=this.uB(this.aB,i);if(null===e)for(;null===e&&this.lB.x<this.oB&&this.lB.y<this.oB;){if(!this.AB(r(2*this.lB.x,2*this.lB.y)))return this.rB=!0,null;s.fB=!0,e=this.uB(this.aB,i)}if(null===e)return this.rB=!0,null;for(let s=0;s<i.y;s+=1)for(let h=0;h<i.x;h+=1){const r=e.Ua.y+s,n=e.Ua.x+h;this.cB[r*this.nB*this.lB.x+n*this.nB+0]=t[s*this.nB*i.x+h*this.nB+0]}return s.Ua=e.Ua,s}AB(t){if(t.x>this.oB||t.y>this.oB)return!1;const i=new Uint8ClampedArray(t.x*t.y*this.nB);for(let s=0;s<this.lB.y;s+=1)for(let e=0;e<this.lB.x;e+=1)i[s*t.x*this.nB+e*this.nB+0]=this.cB[s*this.lB.x*this.nB+e*this.nB+0];return this.lB=t,this.cB=i,!0}}class Ag{constructor(t){this.gB=new Map,this.oB=t,this.gB.set(this.gB.size,new fg(this.oB))}vB(t){return this.gB.get(t)}dB(t,i){let s=-1;const e=Array.from(this.gB.values());for(let t=0;t<e.length;t+=1){const i=e[t];if(!i)break;if(!i.rB){s=t;break}}-1===s&&(s=this.gB.size,this.gB.set(this.gB.size,new fg(this.oB)));const h=this.gB.get(s);if(!h)return null;let r=h.dB(t,i);if(!r&&h.rB){const e=this.gB.size,h=new fg(this.oB);this.gB.set(e,h),s=e,r=h.dB(t,i)}return r?{yB:s,...r}:null}}var gg;!function(t){t[t.Fail=0]="Fail",t[t.Success=1]="Success",t[t.Resize=2]="Resize"}(gg||(gg={}));const vg=Zi("font-texture");class yg{constructor(t){this.pB=new Map,this.mB=new Map,this.Mt=vg(),this.SB=t,this.bB=new Ag(this.SB.xB||4096)}MB(){return this.mB.forEach((t=>{this.SB.wB(t)})),this.mB.clear(),this}_B(t,i){const s=this.pB.get(i);if(s)return s.get(t)}CB(t,i,s){let e=this.pB.get(i);if(e||(e=new Map,this.pB.set(i,e)),e.has(t.glyph))return gg.Success;const h=this.bB.dB(s,t.size);if(!h||!h.Ua)return gg.Fail;h.fB&&this.kB();const r=this.bB.vB(h.yB);if(!r)return gg.Fail;let n=this.mB.get(h.yB);if(!n){const t=this.SB.gl.createTexture();if(!t)throw new Kt("Failed to create texture for font!");n=t,this.mB.set(h.yB,t)}const o=h.Ua,a=r.lB.x,l=r.lB.y,c=-t.offsetX,u=t.baseline-t.size.y,d=-t.offsetX+t.size.x,f=t.baseline,A=o.x/a,g=(o.y+t.size.y)/l,v=(o.x+t.size.x)/a,y=o.y/l,p=[A,g,v,g,A,y,A,y,v,g,v,y],m=[c,u,d,u,c,f,c,f,d,u,d,f],S={origin:o,size:t.size,advanceX:t.advance,baseline:t.baseline,vertices:m,texCoords:p,packerId:h.yB,texture:n};e.set(t.glyph,S);const b=this.SB.gl;return b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),b.bindTexture(b.TEXTURE_2D,n),b.texImage2D(b.TEXTURE_2D,0,b.LUMINANCE,r.lB.x,r.lB.y,0,b.LUMINANCE,b.UNSIGNED_BYTE,this.SB.TB?r.cB:new Uint8Array(r.cB)),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.bindTexture(b.TEXTURE_2D,null),h.fB?gg.Resize:gg.Success}kB(){this.pB.forEach((t=>{t.forEach(((i,s)=>{const e=this.bB.vB(i.packerId);if(!e)return;const h=i.origin,r=e.lB.x,n=e.lB.y,o=h.x/r,a=(h.y+i.size.y)/n,l=(h.x+i.size.x)/r,c=h.y/n,u=[o,a,l,a,o,c,o,c,l,a,l,c];i.texCoords=u,t.set(s,i)}))}))}}const pg=t=>{if(t instanceof be||t instanceof Vd)return t.Oi()?"linear-highPrecision":"linear";if(t instanceof xe){const i={};return t.x instanceof le&&(i.x={base:t.x.Ii()}),t.y instanceof le&&(i.y={base:t.y.Ii()}),["logarithmic",i]}return"linear"},mg=t=>{const i=Object.keys(t),s={};return i.forEach((i=>{const e=t[i];let h=!1;s[i]=t=>{if(!t)return h;const i=e();return h=i,i}})),s},Sg=(t,i,s)=>"value"===t.getLookUpProperty()?s:"x"===t.getLookUpProperty()?{min:i.Wt(),max:i.jt()}:"y"===t.getLookUpProperty()?{min:i.Zt(),max:i.Qt()}:"z"===t.getLookUpProperty()?{min:i.oy(),max:i.ny()}:void 0,bg=t=>!(!t||"value"!==t.lookUpProperty||!t.lut.percentageValues),xg=t=>(i,s)=>s%2?i:i+t;class Mg{constructor(t){this.FB=new Map,this.IB=Zi("font"),this.PB=new Map,this.LB=new Set,this.SB=t}MB(t=!1){return(t||0===this.LB.size)&&(this.FB.forEach(((t,i)=>{t.MB(),this.FB.delete(i)})),this.LB.clear()),this}BB(t){this.LB.add(t)}DB(t){this.LB.delete(t)}EB(t,i,s,e){const h=ni.devicePixelRatio,r=`${e?"dark":"light"} - ${qr(i,h).id}`,n=this.PB.get(r),o=this.FB.get(n);let a=0,l=0,c=0;const u=t.split(""),d=i.size,f=.45*i.size*h,A=Math.round(1*i.size*h);let g=!1;for(let t=0;t<u.length;t+=1){const i=u[t],s=o&&o._B(i,d);if(s)""!==i.trim()&&(l=Math.max(l,s.baseline),a=Math.min(a,s.baseline-(s.size.y-1))),c+=s.advanceX;else{if(""!==i.trim()){const t=0;l=Math.max(l,t),a=Math.min(a,t-(A-1))}c+=f,g=!0}}const v=((t,i,s)=>{if(0===s||360===s||180===s||s%180==0)return{x:t,y:i};if(90===s||-90===s||(s+90)%180==0)return{x:i,y:t};const e=s*Math.PI/180,h=Math.cos(e),r=Math.sin(e);return{x:Math.abs(t*h)+Math.abs(i*r),y:Math.abs(t*r)+Math.abs(i*h)}})(c/h,(l-a+1)/h,s);return{x:v.x,y:v.y,isEstimate:g}}RB(t,i,s){const e=`${s?"dark":"light"} - ${i.id}`;let h=this.PB.get(e);h||(h=this.IB(),this.FB.set(h,new yg(this.SB)),this.PB.set(e,h));const n=this.FB.get(h);if(!n)throw new Kt("Failed to get font texture!");let o=0,a=0,l=0;const u=t.split(""),d=new Map;let f=0;const A=i.properties.size;for(let t=0;t<u.length;t+=1){const e=u[t],h=Math.ceil(f);let r=n._B(e,A);if(!r){const h=this.SB.zB(e,i.properties,i.dpr,s);if(!h)continue;const l=n.CB(h[1],A,h[0]);if(l===gg.Resize){this.LB.forEach((t=>{t.Da.o=!0})),t=-1,f=0,a=0,o=0,d.clear(),this.SB.St.Ls(!0);continue}if(l===gg.Fail)throw new Kt("Failed to create glyph");if(r=n._B(e,A),!r)throw new Kt("Failed to get glyph after creation")}if(""!==e.trim()){let t=d.get(r.texture);t||(t={vertices:[],texCoords:[]},d.set(r.texture,t)),t.vertices.push(...r.vertices.map(xg(h))),t.texCoords.push(...r.texCoords),a=Math.max(a,r.baseline),o=Math.min(o,r.baseline-(r.size.y-1))}f+=r.advanceX}l=f;const g=c(r(0,o),r(l,a)),v=[];return d.forEach(((t,i)=>{v.push({texCoords:new Float32Array(t.texCoords),vertices:new Float32Array(t.vertices),texture:i})})),[v,g]}}const wg={roundUnsigned:{VB:"roundUnsigned",OB:"float roundUnsigned(float number) {\n  return floor(number + 0.5);\n}"},linearStep:{VB:"linearStep",OB:"float linearStep(float step0, float step1, float step) {\n  return clamp((step - step0) / (step1 - step0), 0.0, 1.0);\n}"},decodeUbyteRGBAEncodedFloat:{VB:"decodeUbyteRGBAEncodedFloat",OB:"\n      // Denormalize 8-bit color channels to integers in the range 0 to 255.\n      ivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {\n        ivec4 bytes = ivec4(inputFloats * 255.0);\n        return (\n          littleEndian\n          ? bytes.abgr\n          : bytes\n        );\n      }\n      \n      // Break the four bytes down into an array of 32 bits.\n      void bytesToBits(const in ivec4 bytes, out bool bits[32]) {\n        for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {\n          float acc = float(bytes[channelIndex]);\n          for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {\n            float powerOfTwo = exp2(float(indexInByte));\n            bool bit = acc >= powerOfTwo;\n            bits[channelIndex * 8 + (7 - indexInByte)] = bit;\n            acc = mod(acc, powerOfTwo);\n          }\n        }\n      }\n      \n      // Compute the exponent of the 32-bit float.\n      float getExponent(bool bits[32]) {\n        const int startIndex = 1;\n        const int bitStringLength = 8;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        float acc = 0.0;\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Compute the mantissa of the 32-bit float.\n      float getMantissa(bool bits[32], bool subnormal) {\n        const int startIndex = 9;\n        const int bitStringLength = 23;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        // Leading/implicit/hidden bit convention:\n        // If the number is not subnormal (with exponent 0), we add a leading 1 digit.\n        float acc = float(!subnormal) * exp2(float(bitStringLength));\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Parse the float from its 32 bits.\n      float bitsToFloat(bool bits[32]) {\n        float signBit = float(bits[0]) * -2.0 + 1.0;\n        float exponent = getExponent(bits);\n        bool subnormal = abs(exponent - 0.0) < 0.01;\n        float mantissa = getMantissa(bits, subnormal);\n        float exponentBias = 127.0;\n        return signBit * mantissa * exp2(exponent - exponentBias - 23.0);\n      }\n      \n      // Decode a 32-bit float from the RGBA color channels of a texel.\n      float decodeUbyteRGBAEncodedFloat(vec4 rgba, bool littleEndian) {\n        ivec4 rgbaBytes = floatsToBytes(rgba, littleEndian);\n        bool bits[32];\n        bytesToBits(rgbaBytes, bits);\n        return bitsToFloat(bits);\n      }\n      "},texelFetchWithFallback:{webgl2:{VB:"texelFetchWithFallback",OB:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{VB:"texelFetchWithFallback",OB:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},texelFetchUnsignedWithFallback:{webgl2:{VB:"texelFetchUnsignedWithFallback",OB:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{VB:"texelFetchUnsignedWithFallback",OB:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},modulus:{VB:"modulus",OB:"int modulus(int a, int b) {\n  return (a)-((a)/(b))*(b);\n}"},computeScreenSpaceWireframe:{VB:"computeScreenSpaceWireframe",OB:"#extension GL_OES_standard_derivatives : enable\nfloat computeScreenSpaceWireframe (vec3 barycentric, float lineWidth) {\n  vec3 dist = fwidth(barycentric);\n  vec3 smoothed = smoothstep(dist * ((lineWidth * 0.5) - 0.5), dist * ((lineWidth * 0.5) + 0.5), barycentric);\n  return 1.0 - min(min(smoothed.x, smoothed.y), smoothed.z);\n}"}},_g="posAxis",Cg="posWorld",kg="normal",Tg="rotatedGeo",Fg="colorFragment",Ig="antiAliasFactor",Pg="mousePickingIdOffset",Lg="uRatioPxClip",Bg="uRatioNwuWu",Dg="uColorTexture",Eg="uSizePixels",Rg="uOffsetAlignment",zg="uMaskTexture",Vg="aInstanceGeo",Og="aNormal";class Ng{constructor(t){this.modifiers=[],this.modifiers=t}build(t){const i=this.modifiers.filter((t=>Gg(t)));for(const s of i)t=s(t);return`${is(this.modifiers.filter((t=>Ug(t)))).map((t=>t.OB)).join("\n")}\n${t}`}}const Gg=t=>"function"==typeof t,$g={VB:"ratioPxClip",OB:`uniform vec2 ${Lg};`},Ug=t=>t&&"object"==typeof t&&"VB"in t,Yg=(...t)=>i=>{t=t.reverse();for(let s of t)"string"==typeof s&&(s=s.includes("{")||s.endsWith(";")?s:`${s};`,s=s.trim(),i=i.replace("void main(void)",`${s}\nvoid main(void)`));return i},Hg=t=>i=>(t=t.endsWith(";")?t:`${t};`,i.replace(t,"")),Xg=(...t)=>i=>{const s=t.filter((t=>t));for(let t=0;t<s.length;t+=1)s[t]=s[t].endsWith(";")?s[t]:`${s[t]};`,s[t]=s[t].startsWith("\t")?s[t]:`\t${s[t]}`;const e=s.join("\n");return i.replace("void main(void) {\n",`void main(void) {\n${e}\n`)},Wg=(t,...i)=>s=>{for(let t=0;t<i.length;t+=1)i[t]=i[t].endsWith(";")?i[t]:`${i[t]};`,i[t]=i[t].startsWith("\t")?i[t]:`\t${i[t]}`;const e=i.join("\n"),h=new RegExp(`(.*${t}.*)`),r=s.replace(h,`${e}\n$1`);return i.forEach((i=>{if(!r.includes(i))throw new Error(`ShaderBefore misusage (not found: \n${i}\nmatch: \n${t}\nresult: \n${r}\n)`)})),r},jg=(t,...i)=>s=>{const e=i.filter((t=>"string"==typeof t));for(let t=0;t<e.length;t+=1)e[t]=e[t].endsWith(";")?e[t]:`${e[t]};`,e[t]=e[t].startsWith("\t")?e[t]:`\t${e[t]}`;const h=e.join("\n"),r=s.lastIndexOf(t),n=s.substring(r),o=n.indexOf("\n"),a=n.substring(o),l=`${s.substring(0,r+o)}\n${h}${a}`;return e.forEach((i=>{if(!l.includes(i))throw new Error(`ShaderAfter misusage (not found: "${i}", match: "${t}", result: "${l}")`)})),l},Zg=(...t)=>i=>{for(let s of t)if("string"==typeof s){s=s.endsWith(";")?s:`${s};`,s=s.trim(),s=s.startsWith("\t")?s:`\t${s}`;const t=i.lastIndexOf("}");i=`${i.substring(0,t-1)}\n${s}\n}`}return i},Qg=(t,i)=>s=>{let e,h;if(t.includes("uniform")||t.includes("attribute")){const i=t.endsWith(";")?t:`${t};`;s=Yg(i)(s),e=t.split(" ")[2].replace(";","")}else e=t;if(i.includes(" ")){const t=i.endsWith(";")?i:`${i};`;s=Yg(t)(s),h=i.split(" ")[2].replace(";","")}else h=i;return Zg(`\t${h} = ${e};`)(s)},Jg=(...t)=>i=>{t=t.reverse();for(const s of t)i=s+i;return i},Kg=(t,i)=>{const s=i.steps,e=s.length-1,h=[Yg("uniform vec4 uFallbackColor")],r=[],n=[];for(let t=0;t<i.steps.length;t+=1)r.push(`uniform float uLUTValue${t}`),n.push(`uniform vec4 uLUTColor${t}`);return h.push(Yg(...r,...n),i.percentageValues&&Yg("uniform float uMinValue","uniform float uMaxValue")),i.interpolate?h.push(jg(`${Fg} =`,"vec4 colorLookup = uLUTColor0","float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),`if (value <= ${Qt}) {\n                    colorLookup = uFallbackColor;\n                }`,`if (value >= uLUTValue${e}) {\n                    colorLookup = uLUTColor${e};\n                }`,...s.slice(0,-1).map(((t,i)=>`if (value >= uLUTValue${i} && value <= uLUTValue${i+1}) {\ncolorLookup = uLUTColor${i} + vec4(uLUTColor${i+1}.r -  uLUTColor${i}.r, uLUTColor${i+1}.g -  uLUTColor${i}.g, uLUTColor${i+1}.b -  uLUTColor${i}.b, uLUTColor${i+1}.a -  uLUTColor${i}.a) * (value - uLUTValue${i})/(uLUTValue${i+1} - uLUTValue${i});} `)),`${Fg} = colorLookup`)):h.push(jg(`${Fg} =`,"vec4 colorLookup = vec4(uLUTValue0)","float value = "+(i.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),`if (${t} <= ${Qt}) {\n                    colorLookup = uFallbackColor;\n                } else if (${t} < uLUTValue0) { colorLookup = uLUTColor0;} ${s.slice().reverse().map((t=>{const i=s.indexOf(t);return`else if (value >= uLUTValue${i}) { colorLookup = uLUTColor${i};} `})).join("")}`,`${Fg} = colorLookup`)),h},qg=[Yg(`uniform sampler2D ${zg}`),Yg("varying vec2 vMaskTextureCoord"),jg(`${Ig} =`,`vec4 maskTextureSample = texture2D(${zg}, vMaskTextureCoord)`,`${Ig} = maskTextureSample.r`)],tv=[Yg(`uniform sampler2D ${zg}`),Yg("varying vec2 vMaskTextureCoord"),jg(`${Ig} =`,`vec4 maskTextureSample = texture2D(${zg}, vMaskTextureCoord)`,`${Ig} = maskTextureSample.a`)],iv=[Yg("varying vec3 vPosWorld;","varying vec3 vNormal;","uniform vec3 uCameraLoc;","uniform vec3 uLightLoc;","uniform vec4 uLightColor;","uniform vec4 uAmbientColor;","uniform float uShininess;","uniform float uAmbientReflection;","uniform float uDiffuseReflection;","uniform float uSpecularReflection;"),jg(`${Fg} =`,"float ambientReflection = uAmbientReflection","float diffuseReflection = uDiffuseReflection","float specularReflection = uSpecularReflection","vec3 ambientColor = uAmbientColor.rgb",`vec3 diffuseColor = ${Fg}.rgb`,"vec3 specularColor = uLightColor.rgb","vec3 vNormalNormalized = normalize(vNormal)","vNormalNormalized = (float(gl_FrontFacing) * 2.0 - 1.0) * vNormalNormalized","vec3 lightDir = normalize( uLightLoc - vPosWorld )","float lambertian = abs(dot(vNormalNormalized, lightDir))","float specular = 0.0","vec3 R =  reflect(-lightDir, vNormalNormalized)","vec3 V = normalize(uCameraLoc - vPosWorld)","float specAngle = max(dot(R,V),0.0)","specular = pow(specAngle, uShininess)",`${Fg} = vec4(ambientReflection * ambientColor + diffuseReflection * lambertian * diffuseColor + specularReflection * specular * specularColor, ${Fg}.a)`)],sv=(t,...i)=>{var s,e;if("linear-highPrecision"!==t||0===i.length)return{vertexShaderModifiers:[],fragmentShaderModifiers:[]};const h=i[0];return{vertexShaderModifiers:[Yg("varying vec4 d"),Zg(`d = vec4(${i[0]}.x, ${i[0]}.y, ${null!==(s=i[1])&&void 0!==s?s:h}.x, ${null!==(e=i[1])&&void 0!==e?e:h}.y)`)],idFragment:"hpfix",fragmentShaderModifiers:[Yg("varying vec4 d"),Zg("if (d.z == -100.0 + d.z / 10.0) { gl_FragColor = d; }")]}};class ev extends Error{constructor(t,i,s){super(`Dynamic shader generation error\n(id: ${i})\n ${s?`when applying feature: ${s.idVertex?`vert: ${s.idVertex}`:""} ${s.idFragment?`frag: ${s.idFragment}`:""}`:""} | ${t}`)}}const hv=(...t)=>{let i="";for(const s of t){if("object"!=typeof s){i+=`${String(s)},`;continue}const t=[{prefix:"",obj:s}];for(;t.length>0;){const{prefix:s,obj:e}=t.shift();i+=`${s}:`;const h=Object.keys(e).sort();for(const s of h){const h=e[s];"object"==typeof h&&h.__proto__===Object.prototype||Array.isArray(h)?t.push({prefix:s,obj:h}):i+=`${s}=${String(h)},`}}}return i},rv=t=>void 0!==t.find((t=>{var i;return null===(i=t.NB)||void 0===i?void 0:i.GB})),nv=t=>void 0!==t.find((t=>{var i;return null===(i=t.NB)||void 0===i?void 0:i.$B})),ov=(t,i,...s)=>{const e=[],h=i?"vec3":"vec2",{axisWorldTranslation:r,scaling:n,translation:o,offset:a,flipXY:l,flipXZ:c,splitPosAttribute:u,normalSource:d}=t,f=[];if("attribute"===d&&e.push(Yg(`attribute vec3 ${Og}`),Xg(`vec3 ${kg} = ${Og}`)),"linear-highPrecision"!==r?s.forEach((t=>{void 0!==t.attributeNameAxisCoord&&void 0!==t.variableNameAxisCoord&&(!0!==u?f.push(`${h} ${t.variableNameAxisCoord} = ${t.attributeNameAxisCoord}`):f.push(`${h} ${t.variableNameAxisCoord} = ${i?`vec3(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y, ${t.attributeNameAxisCoord}Z)`:`vec2(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y)`}`))})):s.forEach((i=>{!0!==t.splitPosAttribute?f.push(`${h} ${i.variableNameAxisCoord}_highpart = ${i.attributeNameAxisCoord}_highpart`,`${h} ${i.variableNameAxisCoord}_lowpart = ${i.attributeNameAxisCoord}_lowpart`):f.push(`${h} ${i.variableNameAxisCoord}_highpart = vec2(${i.attributeNameAxisCoord}_highpartX, ${i.attributeNameAxisCoord}_highpartY)`,`${h} ${i.variableNameAxisCoord}_lowpart = vec2(${i.attributeNameAxisCoord}_lowpartX, ${i.attributeNameAxisCoord}_lowpartY)`)})),a&&a.rotation){const t=a.rotation.dataType,i="uniform"===t?"u":"a";if("attribute-deg"===t){e.push(Yg("attribute float aRotDeg"),Yg("uniform float uBaseRotDeg"));const t="cRot",i=Vg;e.push(Xg(`vec2 ${t} = vec2(sin((aRotDeg + uBaseRotDeg) * 0.01745329252), cos((aRotDeg + uBaseRotDeg) * 0.01745329252))`,`vec2 ${Tg} = vec2(${i}.x * ${t}.y + ${i}.y * ${t}.x, ${i}.y * ${t}.y - ${i}.x * ${t}.x)`))}else{const s=`${i}Rot`;e.push(Yg(`${t} vec2 ${s}`));const h=Vg;e.push(Xg(`vec2 ${Tg} = vec2(${h}.x * ${s}.y + ${h}.y * ${s}.x, ${h}.y * ${s}.y - ${h}.x * ${s}.x)`))}}if(a&&e.push(Yg(`attribute ${h} ${Vg}`)),!0===l){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXY");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${i?`vec3(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x, ${t.variableNameAxisCoord}.z)`:`vec2(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`}`)}))}if(!0===c){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXZ");s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = vec3(${t.variableNameAxisCoord}.z, ${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`)}))}if(n){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + scaling");const t=("attribute"===n.dataType?"a":"u")+"Scaling",h=i?"vec3":"vec2";e.push(Yg(`${n.dataType} ${h} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} * ${t}`)}))}if(o&&"axis"===o.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + translation (axis)");const t=("attribute"===o.dataType?"a":"u")+"TranslationAxis",h=i?"vec3":"vec2";e.push(Yg(`${o.dataType} ${h} ${t}`)),s.forEach((i=>{f.push(`${i.variableNameAxisCoord} = ${i.variableNameAxisCoord} + ${t}`)}))}if(a&&"axis"===a.sizeUnit){if("linear-highPrecision"===r)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + offset (axis)");const t=("attribute"===a.dataType?"a":"u")+"OffsetAxis",n=!0===a.symmetric?"float":h;e.push(Yg(`${a.dataType} ${n} ${t}`));const o=a.halved?" * 0.5":"",l=a.rotation?Tg:Vg,c="offsetGeometry";f.push(`${h} ${c} = ${t} * ${l}${o} * sign(uScale)`),i&&"gpu-calculate"===d&&f.push(`${h} ${kg} = ${l}`),s.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${t.variableNameAxisCoord} + ${c}`)}))}if(void 0===r||"linear"===r)e.push(Yg(`uniform ${h} uDisp`,`uniform ${h} uScale`)),s.forEach((t=>{f.push(`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord} - uDisp) / uScale`)}));else if("linear-highPrecision"===r)e.push(Yg(`uniform ${h} uDisp`,`uniform ${h} uScale`,`uniform ${h} uScaleStart_highpart`,`uniform ${h} uScaleStart_lowpart`)),s.forEach((t=>{f.push(`${h} ${t.variableNameAxisCoord}_hprecision = (${t.variableNameAxisCoord}_highpart - uScaleStart_highpart) + (${t.variableNameAxisCoord}_lowpart - uScaleStart_lowpart)`,`${h} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord}_hprecision - uDisp) / uScale`,`${h} ${t.variableNameAxisCoord} = ${t.variableNameAxisCoord}_highpart + ${t.variableNameAxisCoord}_lowpart`)}));else if("matrix"===r)e.push(Yg("uniform mat3 uMatrix")),s.forEach((t=>{f.push(`vec2 ${t.variableNameWorldCoord} = (uMatrix * vec3(${t.variableNameAxisCoord}, 1.0)).xy`)}));else if("matrix4"===r)e.push(Yg("uniform mat4 uMatrix")),s.forEach((t=>{f.push(`vec4 ${t.variableNameWorldCoord} = uMatrix * ${t.attributeNameAxisCoord}`)}));else if("logarithmic"===r[0]){e.push(Yg(`uniform ${h} uScaleStart`,`uniform ${h} uScaleStartLog`,`uniform ${h} uScaleInterval`,`uniform ${h} uScaleIntervalLog`,`uniform ${h} uViewportStart`,`uniform ${h} uViewportSize`));const t=i?["x","y","z"]:["x","y"],n=[];t.forEach((t=>{const i=r[1][t];if(void 0!==i){const t=i.base;if("e"===t)return;const s=`float cLog${t} = 1.0 / log(${ue(t).toFixed(1)})`;n.includes(s)||n.push(s)}})),e.push(Yg(...n)),s.forEach(((i,s)=>{const e=`${s}`,n=[];t.forEach((t=>{const s=t.toUpperCase(),h=r[1][t];if(void 0===h)f.push(`float posPercent${s}${e} = (${i.variableNameAxisCoord}.${t} - uScaleStart.${t}) / uScaleInterval.${t}`);else{const r=h.base,n="e"===r;f.push(`float posLog${s}${e} = log(${i.variableNameAxisCoord}.${t})${n?"":` * cLog${r}`}`,`float posPercent${s}${e} = (posLog${s}${e} - uScaleStartLog.${t}) / uScaleIntervalLog.${t}`)}n.push(`posPercent${s}${e}`)})),f.push(`${h} ${i.variableNameWorldCoord} = uViewportStart + ${h}(${n.join(", ")}) * uViewportSize`)}))}if(a&&"px"===a.sizeUnit){e.push($g);let t="vec2(0.0, 0.0)";if(a.useAlignment&&(e.push(Yg(`uniform vec2 ${Rg}`)),t=Rg),s.find((t=>t.overrideOffsetPixels)))s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${t.overrideOffsetPixels} * ${Lg}`)}));else{const i=("attribute"===a.dataType?"a":"u")+"OffsetPixels",r=!0===a.symmetric?"float":h;e.push(Yg(`${a.dataType} ${r} ${i}`));const n=a.halved?" * 0.5":"";let o;if(!1!==a.useGeometry){const s=a.rotation?Tg:Vg;o=`(${s} + ${t}) * ${i}${n} * ${Lg}`}else o=`${i}${n} * ${Lg}`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${o}`)}))}}if(a&&"scale"===a.sizeUnit){e.push($g),e.push(Yg(`uniform vec2 ${Eg}`));let t="vec2(0.0, 0.0)";a.useAlignment&&(e.push(Yg(`uniform vec2 ${Rg}`)),t=Rg);const i=("uniform"===a.dataType?"u":"a")+"OffsetScale";e.push(Yg(`${a.dataType} float ${i}`));const h=`(${a.rotation?Tg:Vg} + ${t}) * ${i} * ${Eg} * ${Lg}`;s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${h}`)}))}if(a&&"wu"===a.sizeUnit){const t=("attribute"===a.dataType?"a":"u")+"OffsetWU",r=!0===a.symmetric?"float":h;e.push(Yg(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?Tg:Vg,l="offsetGeometry";f.push(`${h} ${l} = ${t} * ${o}${n}`),i&&"gpu-calculate"===d&&f.push(`${h} ${kg} = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l}`)}))}if(a&&"nwu"===a.sizeUnit){e.push(Yg(`uniform float ${Bg}`));const t=("attribute"===a.dataType?"a":"u")+"OffsetNWU",r=!0===a.symmetric?"float":h;e.push(Yg(`${a.dataType} ${r} ${t}`));const n=a.halved?" * 0.5":"",o=a.rotation?Tg:Vg,l="offsetGeometry";f.push(`${h} ${l} = ${t} * ${o}${n}`),i&&"gpu-calculate"===d&&f.push(`${h} ${kg} = normalize(${l})`),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l} * ${Bg}`)}))}return t.snapToNearestPixel&&(e.push(Yg("uniform vec2 uViewportSizePx")),s.forEach((t=>{f.push(`${t.variableNameWorldCoord} = 2.0 * floor(((${t.variableNameWorldCoord} + 1.0) * 0.5) * uViewportSizePx + 0.5) / uViewportSizePx - 1.0`)}))),e.push(Wg("gl_Position =",...f)),e},av=(t,i,s,e)=>{const h=[],r=t.axisWorldTranslation,n=i?"vec3":"vec2";if("linear"===r)h.push(jg(s,`${n} ${e} = ${s} * uScale + uDisp`));else if("linear-highPrecision"===r)h.push(jg(s,`${n} ${e} = ${s} * uScale + uDisp + uScaleStart_highpart + uScaleStart_lowpart`));else{if("matrix"===r)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("matrix4"===r)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("logarithmic"!==r[0])throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");{const t=[`${n} ${s}_percent = (${s} - uViewportStart) / uViewportSize`];(i?["x","y","z"]:["x","y"]).forEach((i=>{const e=i.toUpperCase(),h=r[1][i];if(void 0===h)t.push(`float pos${e}Back = ${s}_percent.${i} * uScaleInterval.${i} + uScaleStart.${i}`);else{const r=h.base,n="e"===r?"1.0":`cLog${r}`;t.push(`float pos${e}Back = pow(2.71828, (${s}_percent.${i} * uScaleIntervalLog.${i} + uScaleStartLog.${i}) / ${n})`)}})),t.push(`${n} ${e} = ${n}(posXBack, posYBack${i?", posZBack":""})`),h.push(jg(s,...t))}}return h},lv=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.NB)||void 0===i?void 0:i.UB})))(t)?[Hg("attribute vec4 aColor"),Hg("vColor = aColor"),Yg("attribute vec4 aColorA"),Yg("attribute vec4 aColorB"),Zg("vColor = mix(aColorA, aColorB, aSegmentSide)")]:[],cv=t=>(t=>void 0!==t.find((t=>{var i;return null===(i=t.NB)||void 0===i?void 0:i.YB})))(t)?[Hg("attribute float aLookupValue"),Hg("vLookupValue = aLookupValue"),Yg("attribute float aLookupValueA"),Yg("attribute float aLookupValueB"),Zg("vLookupValue = mix(aLookupValueA, aLookupValueB, aSegmentSide)")]:[],uv={"2D":{idFeature:"2D",apply:t=>({idVertex:"2D",idFragment:"2D",defaultVertexShader:"2D",defaultFragmentShader:"FragmentShader"})},"2DCompose":{idFeature:"2DCompose",apply:t=>({idVertex:"2DCompose",idFragment:"2DCompose",defaultVertexShader:"2DMatrix",defaultFragmentShader:"Empty"})},"3D":{idFeature:"3D",NB:{GB:!0},apply:t=>({idVertex:"3D",idFragment:"3D",defaultVertexShader:"3D",defaultFragmentShader:"FragmentShader"})},PointSize:t=>({idFeature:"PointSize",apply:i=>{const s="uniform"===t?"u":"a";return{idVertex:`SizePrimitive:${hv(t)}`,idFragment:void 0,vertexShaderModifiers:[Yg(`${t} float ${s}PointSize`,"uniform float uDevicePixelRatio"),Zg(`gl_PointSize = ${s}PointSize * uDevicePixelRatio`)]}}}),Color:t=>{const i=t&&t.dataType,s=t&&t.maskTextureText,e=t&&t.maskTexture,h=t&&t.overrideOpacity;return{idFeature:"Color",NB:{$B:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,YB:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0,UB:"attribute"===t.dataType||void 0},apply:(r,n)=>{let o,a=`Color:${hv(t)}`;const l=[];let c="FragmentShader";const u=[];if("uniform"===i)u.push(Yg("uniform vec4 uColor"),jg(`${Fg} =`,`${Fg} = uColor`),...s?qg:[],...e?tv:[]);else if("attribute"===i)o="colorAttribute",l.push(Qg("attribute vec4 aColor","varying vec4 vColor")),u.push(Yg("varying vec4 vColor"),jg(`${Fg} =`,`${Fg} = vColor`),...s?qg:[],...e?tv:[]);else if("texture"===i)o="colorTexCoord",l.push(Qg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),u.push(Yg("varying vec2 vTextureCoord"),Yg(`uniform sampler2D ${Dg}`),Yg("uniform vec4 uColor"),jg(`${Fg} =`,`${Fg} = texture2D(${Dg}, vTextureCoord)`,`if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.) {\n                        ${Fg} = uColor;\n                    }`),...s?qg:[],...e?tv:[]);else if("texture-coord-calc-gpu"===i)o="colorTexCoord",c="Empty",l.push(Yg("attribute vec2 aTextureCoord"),Yg("varying vec2 vTextureCoord"),Zg("vTextureCoord = gl_Position.xy * 0.5 + 0.5")),u.push(Yg("varying vec2 vTextureCoord"),Yg(`uniform sampler2D ${Dg}`),Xg(`vec4 ${Fg} = texture2D(${Dg}, vTextureCoord)`,`gl_FragColor = ${Fg};`));else if(Array.isArray(i)&&"image"===i[0])o="colorTexCoord",l.push(Qg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),i[1].fitMode===$t.Tile?u.push(Yg(`uniform sampler2D ${Dg}`),Yg("varying vec2 vTextureCoord"),jg(`${Fg} =`,`${Fg} = texture2D(${Dg}, vTextureCoord);`)):u.push(Yg(`uniform sampler2D ${Dg}`),Yg("varying vec2 vTextureCoord"),Yg("uniform vec4 uColor"),jg(`${Fg} =`,`${Fg} = texture2D(${Dg}, vTextureCoord);`,`if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.){\n                                ${Fg} = uColor;\n                            }`));else if(Array.isArray(i)&&"lookup"===i[0]){const t=i[1];if("value"===t)o="lookup:value",l.push(Qg("attribute float aLookupValue","varying float vLookupValue"));else{const i=`${_g}.${t}`;o=`lookup:${t}`,l.push(Qg(i,"varying float vLookupValue"))}u.push(Yg("varying float vLookupValue"),...Kg("vLookupValue",i[2]),...s?qg:[],...e?tv:[])}else if(Array.isArray(i)&&"gradient"===i[0]){const t=i[1],h=t.getColorStops();q(t)?(a=`rgradient${h.length},${e},${s}`,u.push(Yg("uniform vec4 uBounds","uniform vec2 uCenter","uniform vec2 uDistance","uniform float uAspect"),Yg(...Ai(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),wg.linearStep,jg(`${Fg} =`,"vec2 uv = vec2((((gl_FragCoord.x)-uBounds.x)/(uBounds.z))*uAspect,((gl_FragCoord.y)-uBounds.y)/(uBounds.w))","float mixVal = distance(uv/uDistance, uCenter/uDistance)","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, mixVal))",...h.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, mixVal));`)),`${Fg} = color`),...s?qg:[],...e?tv:[])):st(t)&&(a=`lgradient${h.length},${e},${s}`,u.push(Yg("uniform vec4 uBounds","uniform vec2 uStartPoint","uniform vec2 uEndPoint"),Yg(...Ai(h.map(((t,i)=>[`uniform vec4 color_${i}`,`uniform float stop_${i}`])))),wg.linearStep,jg(`${Fg} =`,"vec2 uv = gl_FragCoord.xy - uBounds.xy","float magnitude = ((uv.x-uStartPoint.x) * (uEndPoint.x-uStartPoint.x) + (uv.y-uStartPoint.y) * (uEndPoint.y-uStartPoint.y)) / (pow(uEndPoint.x - uStartPoint.x, 2.0) + pow(uEndPoint.y-uStartPoint.y,2.0))","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, magnitude))",...h.map(((t,i)=>i<2?"":`color = mix(color, color_${i}, linearStep(stop_${i-1}, stop_${i}, magnitude))`)),`${Fg} = color`),...s?qg:[],...e?tv:[]))}if(s||e){const t="maskTexture";o=o?`${o} ${t}`:`Color:${t}`,l.push(Qg("attribute vec2 aMaskTextureCoord","varying vec2 vMaskTextureCoord"))}return h&&u.push(Yg("uniform float uOpacity"),jg(`${Fg} =`,`${Fg}.a *= uOpacity`)),{vertexShaderModifiers:l,fragmentShader:c,fragmentShaderModifiers:u,idVertex:o,idFragment:a}}}},ColorShaded3D:t=>{const{dataType:i,shadingStyle:s,wireframe:e}=t;let h;const r=`ColorShaded3D:${hv(t)}`;return{idFeature:"ColorShaded3D",NB:{$B:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,YB:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0},apply:(t,n)=>{const o=[],a=[];if(o.push("phong"===s&&Qg(kg,"varying vec3 vNormal"),Qg(Cg,"varying vec3 vPosWorld")),"uniform"===i)a.push(Yg("uniform vec4 uColorDiffuse"),jg(`${Fg} =`,`${Fg} = uColorDiffuse`));else if("attribute"===i)h="per-vertex-color",o.push(Qg("attribute vec4 aColor","varying vec4 vColor")),a.push(Yg("varying vec4 vColor"),jg(`${Fg} =`,`${Fg} = vColor`));else if(Array.isArray(i)){const t=i[1];if("value"===t)h="lookup:value",o.push(Qg("attribute float aLookupValue","varying float vLookupValue"));else{const i=`${_g}.${t}`;h=`lookup:${t}`,o.push(Qg(i,"varying float vLookupValue"))}a.push(Yg("varying float vLookupValue"),...Kg("vLookupValue",i[2]))}if(e){const t="wireframe";h=h?`${h},${t}`:t,o.push(Qg("attribute vec3 aTriangleBary","varying vec3 vTriangleBary")),a.push(Yg("varying vec3 vTriangleBary"),Yg("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),wg.computeScreenSpaceWireframe,jg(`${Fg} =`,"float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",`${Fg} = mix(${Fg}, uWireframeColor, edge)`))}return"phong"===s&&a.push(...iv),{idVertex:h,idFragment:r,vertexShaderModifiers:o,fragmentShader:"FragmentShader",fragmentShaderModifiers:a}}}},VertexLocation:t=>({idFeature:"VertexLocation",apply:i=>{const s=sv(t.axisWorldTranslation,"posAxis_hprecision"),e=[],h=rv(i),r=t.coordType?t.coordType:h?"vec3":"vec2";return t.isInstanceRectangleRendering?e.push(Yg("attribute vec2 aRectCorner","attribute vec2 aMemberStart","attribute vec2 aMemberEnd"),Xg("vec2 aPos = mix(aMemberStart, aMemberEnd, aRectCorner)")):"linear-highPrecision"!==t.axisWorldTranslation?!0!==t.splitPosAttribute?e.push(Yg(`attribute ${r} aPos`)):e.push(Yg("attribute float aPosX"),Yg("attribute float aPosY"),h&&Yg("attribute float aPosZ")):!0===t.splitPosAttribute?e.push(Yg("attribute float aPos_highpartX"),Yg("attribute float aPos_lowpartX"),Yg("attribute float aPos_highpartY"),Yg("attribute float aPos_lowpartY")):e.push(Yg(`attribute ${r} aPos_highpart`),Yg(`attribute ${r} aPos_lowpart`)),e.push(...ov(t,h,{attributeNameAxisCoord:"aPos",variableNameAxisCoord:"vec4"===t.coordType?void 0:_g,variableNameWorldCoord:Cg})),e.push(...s.vertexShaderModifiers),{idVertex:`VertexLocation:${hv(t)}`,idFragment:s.idFragment,vertexShaderModifiers:e,fragmentShaderModifiers:s.fragmentShaderModifiers}}}),Model3D:t=>({idFeature:"Model3D",apply:i=>{const s=[];return s.push(Yg("attribute vec3 aGeoPos"),Yg("uniform mat4 uModelRotation"),Yg("uniform mat4 uModelRotationNormals"),Yg("uniform vec3 uLocationAxis"),Yg("uniform vec3 uModelAlignment"),Yg("uniform vec3 uModelScale"),Yg("uniform vec3 uModelSize"),...ov({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,{attributeNameAxisCoord:"uLocationAxis",variableNameAxisCoord:"locationAxis",variableNameWorldCoord:"locationWorld"}),Wg("gl_Position =","vec3 posWorld = locationWorld + ((uModelRotation * vec4(aGeoPos, 1.0)).xyz  - (uModelAlignment + 1.0) * uModelSize/2.0) * uModelScale;"),"attribute"===t.normalSource&&jg(`vec3 ${kg} =`,` ${kg} = (uModelRotationNormals * vec4(${kg}, 1.0)).xyz;`),...nv(i)?av({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,Cg,_g):[]),{vertexShaderModifiers:s,idVertex:`Model3D:${hv(t)}`,idFragment:void 0}}}),LineInstanced2D:t=>{const i=sv(t.axisWorldTranslation,"locationA_hprecision","locationB_hprecision");return{idFeature:"LineInstanced2D",apply:s=>({idVertex:`LineInstanced2D:${hv(t)}`,idFragment:i.idFragment,vertexShaderModifiers:[Yg("uniform float uThicknessPixels"),$g,..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[Yg("attribute vec2 aLocationA"),Yg("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[Yg("attribute vec2 aLocationA_highpart"),Yg("attribute vec2 aLocationB_highpart"),Yg("attribute vec2 aLocationA_lowpart"),Yg("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[Yg("attribute float aLocationAX"),Yg("attribute float aLocationAY"),Yg("attribute float aLocationBX"),Yg("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[Yg("attribute float aLocationA_highpartX"),Yg("attribute float aLocationA_highpartY"),Yg("attribute float aLocationB_highpartX"),Yg("attribute float aLocationB_highpartY"),Yg("attribute float aLocationA_lowpartX"),Yg("attribute float aLocationA_lowpartY"),Yg("attribute float aLocationB_lowpartX"),Yg("attribute float aLocationB_lowpartY")]:[],Yg("attribute vec2 aSegmentPosition"),Yg("attribute float aSegmentSide"),t.offset&&Yg("attribute vec2 aOffsetPixelsA","attribute vec2 aOffsetPixelsB"),...ov(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA",overrideOffsetPixels:t.offset?"aOffsetPixelsA":void 0},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB",overrideOffsetPixels:t.offset?"aOffsetPixelsB":void 0}),t.ensureMinimumSegmentLength&&Yg("uniform vec2 uMinSegmentPixelVector"),jg("worldB = ",t.ensureMinimumSegmentLength&&"float segmentLengthPixels = sqrt(pow(worldB.x - worldA.x, 2.0) + pow(worldB.y - worldA.y, 2.0)) / length(uRatioPxClip)",t.ensureMinimumSegmentLength&&"if (segmentLengthPixels == 0.0 || segmentLengthPixels < length(uMinSegmentPixelVector)) {\n                            worldB = worldA + uMinSegmentPixelVector * uRatioPxClip;\n                        }","vec2 directionBasis = worldB - worldA","vec2 directionBasisNorm = normalize(directionBasis)","vec2 perpendBasisNorm = vec2(-directionBasisNorm.y, directionBasisNorm.x)","vec2 offset = mix(worldA, worldB, aSegmentSide)","vec2 thicknessDirection = aSegmentPosition.x * directionBasisNorm + aSegmentPosition.y * perpendBasisNorm",`vec2 ${Cg} = offset + thicknessDirection * uThicknessPixels * ${Lg}`),...cv(s),...lv(s),...nv(s)?av(t,!1,Cg,_g):[],...i.vertexShaderModifiers],fragmentShaderModifiers:i.fragmentShaderModifiers})}},Area2D:t=>({idFeature:"Area2D",apply:i=>{const s=sv(t.axisWorldTranslation,"locationA_hprecision","locationB_hprecision");return{idVertex:`Area2D:${hv(t)}`,idFragment:s.idFragment,vertexShaderModifiers:[..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[Yg("attribute vec2 aLocationA"),Yg("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[Yg("attribute vec2 aLocationA_highpart"),Yg("attribute vec2 aLocationB_highpart"),Yg("attribute vec2 aLocationA_lowpart"),Yg("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[Yg("attribute float aLocationAX"),Yg("attribute float aLocationAY"),Yg("attribute float aLocationBX"),Yg("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[Yg("attribute float aLocationA_highpartX"),Yg("attribute float aLocationA_highpartY"),Yg("attribute float aLocationB_highpartX"),Yg("attribute float aLocationB_highpartY"),Yg("attribute float aLocationA_lowpartX"),Yg("attribute float aLocationA_lowpartY"),Yg("attribute float aLocationB_lowpartX"),Yg("attribute float aLocationB_lowpartY")]:[],Yg("attribute float aCurveOrBaseline"),Yg("attribute float aSegmentSide"),...ov(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),jg("worldB = ","vec2 posCoord = mix(worldA, worldB, aSegmentSide)","bottom"===t.fill?"float baseline = min(posCoord.y, -1.0)":"top"===t.fill?"float baseline = max(posCoord.y, 1.0)":"left"===t.fill?"float baseline = min(posCoord.x, -1.0)":"float baseline = max(posCoord.x, 1.0)",`vec2 ${Cg} = ${"bottom"===t.fill||"top"===t.fill?"vec2(posCoord.x, mix(posCoord.y, baseline, aCurveOrBaseline))":"vec2(mix(posCoord.x, baseline, aCurveOrBaseline), posCoord.y)"}`),...cv(i),...lv(i),...nv(i)?av(t,!1,Cg,_g):[],...s.vertexShaderModifiers],fragmentShaderModifiers:s.fragmentShaderModifiers}}}),LineInstanced3D:t=>({idFeature:"LineInstanced3D",apply:i=>({idVertex:`LineInstanced3D:${hv(t)}`,idFragment:void 0,defaultFragmentShader:"FragmentShader",vertexShaderModifiers:[Yg("uniform float uOffsetWU"),Yg("attribute vec3 aLocationA"),Yg("attribute vec3 aLocationB"),Yg("attribute float aSegmentPosition"),Yg("attribute float aPerpendHorizontal"),Yg("attribute float aPerpendVertical"),...ov({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},rv(i),{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),jg("worldB = ","vec3 directionBasis = worldB - worldA","vec3 directionBasisNorm = normalize(directionBasis)","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(directionBasis.y), 0.9 ) ))","vec3 horizontalBasis = normalize( cross( notParallel, directionBasisNorm ) )","vec3 verticalBasis = normalize( cross( horizontalBasis, directionBasisNorm ) )",`vec3 ${kg} = aPerpendHorizontal * horizontalBasis + aPerpendVertical * verticalBasis`,`vec3 ${Cg} = worldA + aSegmentPosition * directionBasis + ${kg} * uOffsetWU * 0.5`),...nv(i)?av({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,Cg,_g):[]]})}),RoundedEdges3D:{idFeature:"RoundedEdges3D",apply:t=>({idVertex:"RoundedEdges3D",idFragment:void 0,vertexShaderModifiers:[Yg("attribute vec3 aEdge"),Yg("uniform float uEdgeRoundness"),jg(`${Cg} =`,"vec3 boxSizeWorld = abs( aOffsetAxis / uScale )","float boxMinDimensionWorldXZ = min( boxSizeWorld.x, boxSizeWorld.z )","vec3 edgeRoundAmount = uEdgeRoundness * vec3( boxMinDimensionWorldXZ, min( boxMinDimensionWorldXZ, boxSizeWorld.y ), boxMinDimensionWorldXZ )",`${Cg} = ${Cg} + aEdge * edgeRoundAmount`)]})},ColorGrid2D:t=>{const i=t.flipXY,s=t.intensityTextureType,e=t.littleEndian;return{idFeature:"ColorGrid2D",apply:(h,r)=>({idVertex:void 0,idFragment:`ColorGrid2D:${hv(t)}`,fragmentShader:"FragmentShader",fragmentShaderModifiers:[Yg("uniform vec4 uTileBounds","uniform vec2 uTileDimensions","uniform sampler2D uTileIntensityValues"),"ubyte"===s&&wg.decodeUbyteRGBAEncodedFloat,"bilinear"===t.interpolation?Xg("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions - 1.0)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensions - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensions - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${i?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${i?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${i?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${i?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===s?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${e})`),"float intensity01 = "+("float"===s?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${e})`),"float intensity10 = "+("float"===s?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${e})`),"float intensity11 = "+("float"===s?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${e})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${i?"lerpFactors.y":"lerpFactors.x"})`):Xg("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellIndexNormalized = cellIndex / uTileDimensions",`vec4 sample0 = texture2D(uTileIntensityValues, ${i?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = "+("float"===s?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${e})`)),...Kg("intensityP",t.lut)]})}},DrawToNormalTexture:t=>{const i=t.flipXZ,s=t.vertexIdSource,e=t.normalTextureType,h=t.heightmapTextureType,r=t.littleEndian;return{idFeature:"DrawToNormalTexture",apply:(n,o)=>{const a=[],l=[];return a.push(Yg("uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB","attribute"===s&&"attribute float aVertexID"),void 0!==s&&wg.roundUnsigned,wg.modulus,wg.texelFetchWithFallback[o],"ubyte"===h&&wg.decodeUbyteRGBAEncodedFloat,Xg(void 0===s?"int iVertex = gl_VertexID":"int iVertex = int(roundUnsigned(aVertexID))","int iSecondary = modulus(iVertex, (uTileDimensions.y - 1))","int iPrimary = iVertex / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(uTileDimensions) - 1.0","vec2 halfTexelWorld = 2.0 / (uTileDimensionsMinus1 * 2.0)","vec2 posWorld = vec2(-1.0 + halfTexelWorld.y + iCell.y * 2.0 * halfTexelWorld.y, -1.0 + halfTexelWorld.x + iCell.x * 2.0 * halfTexelWorld.x)","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec3 posAxis0 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`} ,\n                            uTileStartLocationAxisXZ.y + iCell.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell1 = iCell + vec2(1.0, 0.0)",`vec3 posAxis1 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell1.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell1.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell2 = iCell + vec2(0.0, 1.0)",`vec3 posAxis2 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell2.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell2.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell3 = iCell + vec2(1.0, 1.0)",`vec3 posAxis3 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell3.${i?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r})`},\n                            uTileStartLocationAxisXZ.y + iCell3.${i?"x":"y"} * cellSizeAxis.y\n                        )`,"vec3 normal = normalize(cross(posAxis2 - posAxis0, posAxis1 - posAxis0) + cross(posAxis1 - posAxis3, posAxis2 - posAxis3))","uint"===e?"vNormalRGB = uvec3(((normal / 2.0) + 0.5) * float(-1u))":"vNormalRGB = (normal / 2.0) + 0.5","gl_PointSize = 1.0")),l.push(Yg("uint"===e?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB"),Xg("uint"===e?"gl_FragColor = uvec4(vNormalRGB, -1u)":"gl_FragColor = vec4(vNormalRGB, 1.0)")),{idVertex:`DrawToNormalTexture:${hv(t)}`,idFragment:`DrawToNormalTexture:${hv(t)}`,vertexShaderModifiers:a,fragmentShaderModifiers:l,fragmentShader:"Empty",hints:["uint"===e&&{type:"fragOutput",fragOutput:"uvec4"}]}}}},SurfaceGrid:t=>{const i=t.fillColor,s=t.interpolation,e=t.flipXZ,h=t.shadingStyle,r=t.wireframe,n=t.normalTextureType,o=t.heightmapTextureType,a=t.intensityTextureType,l=t.littleEndian;return{idFeature:"SurfaceGrid",NB:{HB:!0},apply:(c,u)=>{const d=[],f=[];return d.push(Yg("attribute vec2 aGeoCellOffset","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture"),wg.modulus,wg.texelFetchWithFallback[u],"ubyte"===o&&wg.decodeUbyteRGBAEncodedFloat,Xg("int iSecondary = modulus(iInstance + uBaseInstance, (uTileDimensions.y - 1))","int iPrimary = (iInstance + uBaseInstance) / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 iCellVertex = iCell + aGeoCellOffset","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","vec2 ySampleCoordinate = vec2(iCellVertex.y, iCellVertex.x) / vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x)","float y = "+("float"===o?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${l})`),"vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)","vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * "+(e?"vec2(iCellVertex.y, iCellVertex.x)":"iCellVertex"),"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)")),d.push(...ov({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:_g,variableNameWorldCoord:Cg})),"phong"===h&&d.push(Qg(Cg,"varying vec3 vPosWorld"),..."uint"===n?[wg.texelFetchUnsignedWithFallback[u],Zg("vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)")]:[Zg("vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))")],Zg("vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vNormal = normalize(normalAxis * uScale)"),Yg("varying vec3 vNormal",..."uint"===n?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"])),f.push(Yg("varying vec3 vTriangleBary")),"uniform"===i?f.push(Yg("uniform vec4 uColorDiffuse"),jg(`${Fg} =`,`${Fg} = uColorDiffuse`)):Array.isArray(i)&&"lookup"===i[0]&&("value"===i[1]?(d.push(Qg(`${_g}.xz`,"varying vec2 vVertexLocationAxisXZ")),f.push(Yg("uniform vec4 uTileBoundsAxisXZ","uniform vec2 uTileDimensionsXZ","varying vec2 vVertexLocationAxisXZ","uniform sampler2D uTileIntensityValues","uniform mat4 uViewProjectionMatrix","uniform vec3 uScale","uniform vec3 uDisp"),"ubyte"===a&&wg.decodeUbyteRGBAEncodedFloat,"bilinear"===s?Xg("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = (vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensionsXZ - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensionsXZ - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${e?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${e?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${e?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${e?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===a?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${l})`),"float intensity01 = "+("float"===a?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${l})`),"float intensity10 = "+("float"===a?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${l})`),"float intensity11 = "+("float"===a?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${l})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${e?"lerpFactors.y":"lerpFactors.x"})`):Xg("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = floor((vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ)","vec2 cellIndexNormalized = cellIndex / (uTileDimensionsXZ - 1.0)",`vec4 sample0 = texture2D(uTileIntensityValues, ${e?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = sample0.x"),...Kg("intensityP",i[2]))):(d.push(Qg(`${_g}.${i[1]}`,"varying float vLookupValue")),f.push(Yg("varying float vLookupValue"),...Kg("vLookupValue",i[2])))),"phong"===h&&f.push(...iv),r&&(d.push(Yg("attribute vec3 aTriangleBary"),Qg("aTriangleBary","varying vec3 vTriangleBary")),f.push(Yg("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),wg.computeScreenSpaceWireframe,jg(`${Fg} =`,"float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",i?`if (edge > 0.0) {\n                                    ${Fg} = vec4(mix(${Fg}.rgb, uWireframeColor.rgb, edge * uWireframeColor.a), max(${Fg}.a, uWireframeColor.a));\n                                }`:`if (edge > 0.0) {\n                                    ${Fg} = uWireframeColor;\n                                  } else {\n                                      discard;\n                                  }`))),{idVertex:`SurfaceGrid:${hv(t)}`,idFragment:`SurfaceGrid:${hv(t)}`,vertexShaderModifiers:d,fragmentShader:"FragmentShader",fragmentShaderModifiers:f}}}},DebugSurfaceGridNormals:t=>({idFeature:"DebugSurfaceGridNormals",apply:(i,s)=>({idVertex:`DebugSurfaceGridNormals:${hv(t)}`,idFragment:`DebugSurfaceGridNormals:${hv(t)}`,vertexShaderModifiers:[Yg("attribute float aNormalArrow","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===t.instanceIdSource&&"attribute float aInstanceID",..."uint"===t.normalTextureType?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"]),wg.roundUnsigned,wg.modulus,wg.texelFetchWithFallback[s],"ubyte"===t.heightmapTextureType&&wg.decodeUbyteRGBAEncodedFloat,Xg(void 0===t.instanceIdSource?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","float y00 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y01 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y10 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y11 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y = (y00 + y01 + y10 + y11) / 4.0","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * (0.5 + ${t.flipXZ?"vec2(iCell.y, iCell.x)":"iCell"})`,"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)",..."uint"===t.normalTextureType?["vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)"]:["vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))"],"vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vec3 normalWorld = normalize(normalAxis * uScale)"),..."uint"===t.normalTextureType?[wg.texelFetchUnsignedWithFallback[s]]:[],...ov({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:_g,variableNameWorldCoord:Cg}),jg("posWorld =","vec3 dirArrow = normalWorld","vec3 posArrowStart = posWorld","vec3 posArrowEnd = posWorld + dirArrow * 0.010","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(dirArrow.y), 0.9 ) ))","vec3 dirArrowLeft = normalize(-dirArrow + 0.50 * normalize(cross(dirArrow, notParallel)))","vec3 dirArrowRight = normalize(-dirArrow + 0.50 * normalize(cross(notParallel, dirArrow)))","vec3 posArrowLeft = posArrowEnd + dirArrowLeft * 0.0025","vec3 posArrowRight = posArrowEnd + dirArrowRight * 0.0025","if (aNormalArrow == 0.0) {\n                        posWorld = posArrowStart;\n                    } else if (aNormalArrow == 1.0) {\n                        posWorld = posArrowEnd;\n                    } else if (aNormalArrow == 2.0) {\n                        posWorld = posArrowLeft;\n                    } else if (aNormalArrow == 3.0) {\n                        posWorld = posArrowRight;\n                    }")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[Zg("gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0)")]})}),OffsetTowardsCamera:()=>({idFeature:"OffsetTowardsCamera",apply:t=>({idVertex:"OffsetTowardsCamera",idFragment:void 0,vertexShaderModifiers:[Yg("uniform vec3 uCameraLoc"),jg("posWorld =","posWorld = posWorld + normalize(uCameraLoc) * 0.0025")]})}),AliasedEdge:{idFeature:"AliasedEdge",apply:t=>({idVertex:"AliasedEdge",idFragment:"AliasedEdge",vertexShaderModifiers:[Yg("attribute float aSegmentInside"),Yg("varying float vSegmentInside"),Yg("varying float vSegmentSide"),jg("gl_Position = ","\n                vSegmentInside = aSegmentInside;\n                vSegmentSide = aSegmentSide;\n                ")],fragmentShaderModifiers:[Jg("#extension GL_OES_standard_derivatives : enable"),Yg("uniform float uAALimit"),Yg("varying float vSegmentInside"),Yg("varying float vSegmentSide"),jg(`${Ig} = `,`\n                float dist = (uAALimit - vSegmentInside);\n                vec2 ddist = vec2(dFdx(dist), dFdy(dist));\n                float pixelDist = dist / length(ddist);\n                // additional blurring\n                pixelDist *= 0.5;\n\n                float aa = clamp(0.5 - pixelDist, 0.0, 1.0);\n                if((vSegmentSide <= 0.0 || vSegmentSide >= 1.0) && aa <=0.99){\n                    aa *= 0.5;\n                }\n                ${Ig} = aa;\n                `)]})},Glow1D:t=>({idFeature:"Glow1D",apply:()=>{const i=Math.round(t.spreadPx),s=Math.round(t.blurPx),e=i+s,h=t.firstPass,r=[];for(let t=-e;t<=e;t+=1){const i=Math.abs(t);r.push(h?{x:t.toFixed(1),y:"0.0",distPx:i.toFixed(1)}:{x:"0.0",y:t.toFixed(1),distPx:i.toFixed(1)})}return{idVertex:`Glow1D:${hv(t)}`,idFragment:`Glow1D:${hv(t)}`,vertexShaderModifiers:[Qg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[Yg("uniform sampler2D uTexture"),Yg("varying vec2 vTextureCoord"),Yg("uniform vec2 uTextureSize"),h&&Yg("uniform vec2 uOffsetPx"),!h&&Yg("uniform sampler2D uTextureFirstGlowPass"),!h&&Yg("uniform vec4 uGlowColor"),jg(`${Ig} =`,"vec2 oneTexel = vec2(1.0, 1.0) / uTextureSize","vec2 vTexCoordPixelCenter = vTextureCoord + vec2(0.5, 0.5) / uTextureSize",...h?[]:["float inverseIntensity =\n                                    0.25 * texture2D(uTexture, vTexCoordPixelCenter).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(-oneTexel.x, 0.0)).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(oneTexel.x, 0.0)).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(0.0, -oneTexel.y)).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(0.0, oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(-oneTexel.x, -oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(oneTexel.x, -oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(-oneTexel.x, oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(oneTexel.x, oneTexel.y)).a",`${Ig} *= 1.0 - (inverseIntensity * inverseIntensity)`,`if (${Ig} <= 0.0) { discard; }`],"float distancePx = 255.0","vec2 sample_tx = vec2(0.0)",...h?["vec2 texCoordOffset = vTexCoordPixelCenter - uOffsetPx * oneTexel",...r.map(((t,i)=>[`sample_tx = texCoordOffset + oneTexel * vec2(${t.x}, ${t.y})`,`if (distancePx > ${t.distPx} && sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0 && texture2D(uTexture, sample_tx).a > 0.0) { distancePx = ${t.distPx}; }`])).flat(),`${Fg} = vec4(distancePx / 255.0, 0.0, 0.0, 1.0)`]:["vec4 sample_horizontal = vec4(0.0)","float horizontal_dist = 255.0","float min_horizontal_dist = 255.0",...r.map(((t,i)=>[`sample_tx = vTexCoordPixelCenter + oneTexel * vec2(${t.x}, ${t.y})`,"if (sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0) {\n                                                sample_horizontal = texture2D(uTextureFirstGlowPass, sample_tx);\n                                                horizontal_dist = sample_horizontal.r * 255.0;\n                                            }","if (sample_horizontal.a < 0.9) { horizontal_dist = 255.0; }","min_horizontal_dist = min(min_horizontal_dist, horizontal_dist)",`distancePx = min(distancePx, pow(horizontal_dist * horizontal_dist + ${t.y} * ${t.y}, 0.5))`])).flat(),`if (distancePx > ${e.toFixed(1)}) { discard; }`,"vec4 pixelGlowColor = vec4(0.0, 0.0, 0.0, 0.0)",`if (distancePx > ${i.toFixed(1)}) {\n                                        float lerpAmount = (distancePx - ${i.toFixed(1)}) / ${(s+1).toFixed(1)};\n                                        pixelGlowColor = mix(uGlowColor, vec4(uGlowColor.rgb, 0.0), 1.0 - (1.0 - lerpAmount) * (1.0 - lerpAmount));\n                                    } else {\n                                        pixelGlowColor = uGlowColor;\n                                    }`,`${Fg} = pixelGlowColor`])]}}}),MousePicking:t=>{const i=!!(null==t?void 0:t.customMousePickingIdInput),s=!i&&!!(null==t?void 0:t.useVertexId),e=!i&&!!(null==t?void 0:t.useAttribute),h=!i&&!s&&!e;return{idFeature:"MousePicking",NB:{HB:h,XB:s},apply:(r,n)=>{const o="webgl2"===n?"flat":"",a="webgl2"===n?"int":"float";return{idVertex:`MousePicking:${hv(t)}`,idFragment:`MousePicking:${hv(t)}`,vertexShaderModifiers:[...h?[Yg(`${o} varying ${a} vPickingIdOffset`),Zg(`vPickingIdOffset = ${a}(iInstance)`)]:[],...s?[Yg(`${o} varying ${a} vPickingIdOffset`),Zg(`vPickingIdOffset = ${a}(iVertex)`)]:[],...e?[Yg("attribute float aPickingIdOffset",`${o} varying ${a} vPickingIdOffset`),Zg(`vPickingIdOffset = ${a}(aPickingIdOffset)`)]:[]],fragmentShaderModifiers:[Yg("uniform int uFirstId"),...i?[]:[Yg(`${o} varying ${a} vPickingIdOffset`),Xg(`int ${Pg} = ${"int"===a?"vPickingIdOffset":"int(floor(vPickingIdOffset + 0.5))"}`)],jg(`${Fg} =`,`int remainder = ${Pg} + uFirstId`,"int r = remainder / 16777216","remainder -= r * 16777216","int g = remainder / 65536","remainder -= g * 65536","int b = remainder / 256","remainder -= b * 256","int a = remainder",`${Fg} = vec4(float(r) / 255.0, float(g) / 255.0, float(b) / 255.0, float(a) / 255.0)`),t=>t.replace(`gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * ${Ig})`,`if (${Ig} <= 0.0) { discard; }\ngl_FragColor = fragColorEnd`).replace("if (fragColorEnd.a <= 0.0) { discard; }","")]}}}},AttributeHighlight:{idFeature:"AttributeHighlight",apply:t=>({idVertex:"AttributeHighlight",idFragment:"AttributeHighlight",vertexShaderModifiers:[Qg("attribute float aIsHighlighted","varying float vIsHighlighted")],fragmentShaderModifiers:[t=>t.replace("uniform float uIsHighlighted","varying float vIsHighlighted").replace("uIsHighlighted","vIsHighlighted")]})},StippleTexture:{idFeature:"StippleTexture",apply:(t,i)=>({idVertex:"StippleTexture",idFragment:"StippleTexture",vertexShaderModifiers:[Yg("attribute vec2 aLengthSoFar"),Yg("varying float vLengthSoFar"),Yg("uniform vec2 uStippleCount"),Zg("\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[Yg("uniform sampler2D uStippleTexture"),Yg("uniform float uStippleScale"),Yg("varying float vLengthSoFar"),"webgl1"===i&&Yg("uniform float uStippleTextureWidthLimiter"),jg(`${Ig} = `,`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    ${Ig} *= stippleAA;\n                    if (${Ig} <= 0.0) { discard; }`)]})},StippleTextureInstanced:{idFeature:"StippleTextureInstanced",apply:(t,i)=>({idVertex:"StippleTextureInstanced",idFragment:"StippleTextureInstanced",vertexShaderModifiers:[Yg("attribute vec2 aLengthSoFarA"),Yg("attribute vec2 aLengthSoFarB"),Yg("varying float vLengthSoFar"),Yg("uniform vec2 uStippleCount"),Zg("\n                vec2 aLengthSoFar = mix(aLengthSoFarA, aLengthSoFarB, aSegmentSide);\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[Yg("uniform sampler2D uStippleTexture"),Yg("uniform float uStippleScale"),Yg("varying float vLengthSoFar"),"webgl1"===i&&Yg("uniform float uStippleTextureWidthLimiter"),jg(`${Ig} = `,`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===i?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    ${Ig} *= stippleAA;\n                    if (${Ig} <= 0.0) { discard; }`)]})},PolarHeatmap:t=>({idFeature:"PolarHeatmap",apply:(i,s)=>{const e="dataType"in t,h="interpolation"in t?t:void 0,r=h?h.flipXY:void 0,n="bilinear"===(null==h?void 0:h.interpolation),o=null==h?void 0:h.intensityTextureType,a=null==h?void 0:h.littleEndian;return{idVertex:void 0,idFragment:`PolarHeatmap:${hv(t)}`,vertexShaderModifiers:[],fragmentShaderModifiers:[Yg("uniform vec2 uViewportSize","uniform vec2 uScale","uniform vec2 uDisp","uniform float uSectors","uniform float uAnnuli","uniform float uAmplitudeStart","uniform float uAmplitudeStep","uniform float uAmplitudeAxisStart","uniform float uAmplitudeAxisEnd","uniform float uAngleOffset","uniform float uAngleDirection",h&&"uniform sampler2D uTileIntensityValues",e&&"uniform vec4 uColor"),wg.texelFetchWithFallback[s],"ubyte"===o&&wg.decodeUbyteRGBAEncodedFloat,Xg("vec2 posWorld = (2.0 * gl_FragCoord.xy / uViewportSize) - 1.0","vec2 posAxis = posWorld * uScale + uDisp","float amplitudeAxisInterval = uAmplitudeAxisEnd - uAmplitudeAxisStart","float amplitude = uAmplitudeAxisStart + sign(amplitudeAxisInterval) * sqrt(posAxis.x * posAxis.x + posAxis.y * posAxis.y)","float iAnnulus = (amplitude - uAmplitudeStart) / uAmplitudeStep"),h&&jg("iAnnulus","float angRad = atan(posAxis.y, posAxis.x) * uAngleDirection + uAngleOffset","if (angRad < 0.0) { angRad = angRad + 2.0 * 3.1415926538; }","if (angRad > 2.0 * 3.1415926538) { angRad = angRad - 2.0 * 3.1415926538; }","float iSector = uSectors * angRad / (2.0 * 3.1415926538)","vec2 cellIndex = vec2(iSector, iAnnulus)","ivec2 cellStart = ivec2(floor(cellIndex))","ivec2 cellEnd = cellStart + ivec2(1)","if (cellEnd.x >= int(uSectors)) { cellEnd = ivec2(0, cellEnd.y); }",r&&"cellIndex = vec2(cellIndex.y, cellIndex.x)",r&&"cellStart = ivec2(cellStart.y, cellStart.x)",r&&"cellEnd = ivec2(cellEnd.y, cellEnd.x)"),e&&jg(`${Fg} =`,`${Fg} = uColor`),h&&jg("cellEnd","vec2 tileDimensions = "+(r?"vec2(uAnnuli, uSectors)":"vec2(uSectors, uAnnuli)"),n&&"vec4 sample00 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",n&&"vec4 sample01 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellStart.x, cellEnd.y), tileDimensions)",n&&"vec4 sample10 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellEnd.x, cellStart.y), tileDimensions)",n&&"vec4 sample11 = texelFetchWithFallback(uTileIntensityValues, cellEnd, tileDimensions)",n&&"float intensity00 = "+("float"===o?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${a})`),n&&"float intensity01 = "+("float"===o?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${a})`),n&&"float intensity10 = "+("float"===o?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${a})`),n&&"float intensity11 = "+("float"===o?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${a})`),n&&"vec2 lerpFactors = cellIndex - vec2(cellStart)",n&&"float intensityR1 = mix(intensity00, intensity10, lerpFactors.x)",n&&"float intensityR2 = mix(intensity01, intensity11, lerpFactors.x)",n&&"float intensityP = mix(intensityR1, intensityR2,  lerpFactors.y)",!n&&"vec4 sample0 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",!n&&"float intensityP = "+("float"===o?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${a})`)),...h?Kg("intensityP",h.lut):[]]}}})},dv={"2D":"\nvoid main(void) {\n    gl_Position = vec4(posWorld, 0.0, 1.0 );\n}\n","2DMatrix":"\nvoid main(void) {\n    gl_Position = posWorld;\n}\n","3D":"\nuniform mat4 uViewProjectionMatrix;\nvoid main(void) {\n    gl_Position = uViewProjectionMatrix * vec4(posWorld, 1.0);\n}\n"},fv={FragmentShader:`\nuniform float uIsHighlighted;\nuniform vec4 uHighlightColorOffset;\nuniform float uRenderEffectMask;\nvoid main(void) {\n    vec4 ${Fg} = vec4(0.0, 0.0, 0.0, 0.0);\n    float ${Ig} = 1.0;\n    vec4 fragColorEnd = ${Fg};\n    if (fragColorEnd.a <= 0.0) { discard; }\n    fragColorEnd = clamp(fragColorEnd + uIsHighlighted * uHighlightColorOffset, vec4(0.0), vec4(1.0));\n    fragColorEnd = mix(fragColorEnd, vec4(1.0), uRenderEffectMask * fragColorEnd.a * 1000.0);\n    gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * ${Ig});\n}\n`,Empty:"\nvoid main(void) {\n}\n"};class Av{constructor(t,i,s,e,h){if(this.id=t,this.shader=s,this.gl=e,this.info=h,!i||!s)throw new qt(`Could not find ${this.WB()} ${this.jB()} shader source code.`);this.gl.shaderSource(s,i),this.gl.compileShader(s)}get src(){return""}WB(){return this.id.toString()}jB(){return this.gl.getShaderParameter(this.shader,this.gl.SHADER_TYPE)===this.gl.FRAGMENT_SHADER?"fragment":"vertex"}}class gv extends Av{constructor(t,i,s,e){super(t,i,s.createShader(s.VERTEX_SHADER),s,e)}}class vv extends Av{constructor(t,i,s,e){super(t,i,s.createShader(s.FRAGMENT_SHADER),s,e)}}class yv{constructor(t,i,s,e){this.ZB=new Map,this.QB=new Map,this.JB=s,this.KB=s.createProgram(),this.qB=`${t.WB()} vertex`,this.tD=`${i.WB()} fragment`,s.attachShader(this.KB,t.shader),s.attachShader(this.KB,i.shader),s.bindAttribLocation(this.KB,0,"aPos"),s.linkProgram(this.KB),s.deleteShader(t.shader),s.deleteShader(i.shader),this.allAttributeNames=t.info.allAttributeNames,this.allUniformNames=Array.from(new Set(t.info.allUniformNames.concat(i.info.allUniformNames)).values()),this.vertexSharedRemovedVariables=t.info.removedVariableNames,this.fragmentSharedRemovedVariables=i.info.removedVariableNames}get vertexShaderSrc(){return""}get fragmentShaderSrc(){return""}iD(t){return Ki(0,(()=>qi()))}sD(t){const i=this.eD(t);if(void 0===i)throw this.iD(`Could not get ${t} uniform from ${this.qB} and ${this.tD} shaders.`);return i}eD(t){const i=this.ZB.get(t);if(i)return i;const s=this.JB.getUniformLocation(this.KB,t);return s?(this.ZB.set(t,s),s):void 0}hD(t){const i=this.rD(t);if(void 0===i)throw this.iD(`Could not get ${t} attribute from ${this.qB} and ${this.tD} shaders.`);return i}rD(t){const i=this.QB.get(t);if(i||0===i)return i;const s=this.JB.getAttribLocation(this.KB,t);return s>=0?(this.QB.set(t,s),s):void 0}G(){this.JB.deleteProgram(this.KB)}}const pv=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/,mv=t=>{let i;try{i=ni.getComputedStyle(t)}catch(t){return null}return i};
 /**
  * stacking-order by Rich Harris
  * https://github.com/Rich-Harris/stacking-order
